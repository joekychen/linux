<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › usb › musb › musb_regs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>musb_regs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * MUSB OTG driver register defines</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2005 Mentor Graphics Corporation</span>
<span class="cm"> * Copyright (C) 2005-2006 by Texas Instruments</span>
<span class="cm"> * Copyright (C) 2006-2007 Nokia Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * version 2 as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA</span>
<span class="cm"> * 02110-1301 USA</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED</span>
<span class="cm"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN</span>
<span class="cm"> * NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<span class="cm"> * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<span class="cm"> * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
<span class="cm"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON</span>
<span class="cm"> * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="cm"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<span class="cm"> * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __MUSB_REGS_H__</span>
<span class="cp">#define __MUSB_REGS_H__</span>

<span class="cp">#define MUSB_EP0_FIFOSIZE	64	</span><span class="cm">/* This is non-configurable */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * MUSB Register bits</span>
<span class="cm"> */</span>

<span class="cm">/* POWER */</span>
<span class="cp">#define MUSB_POWER_ISOUPDATE	0x80</span>
<span class="cp">#define MUSB_POWER_SOFTCONN	0x40</span>
<span class="cp">#define MUSB_POWER_HSENAB	0x20</span>
<span class="cp">#define MUSB_POWER_HSMODE	0x10</span>
<span class="cp">#define MUSB_POWER_RESET	0x08</span>
<span class="cp">#define MUSB_POWER_RESUME	0x04</span>
<span class="cp">#define MUSB_POWER_SUSPENDM	0x02</span>
<span class="cp">#define MUSB_POWER_ENSUSPEND	0x01</span>

<span class="cm">/* INTRUSB */</span>
<span class="cp">#define MUSB_INTR_SUSPEND	0x01</span>
<span class="cp">#define MUSB_INTR_RESUME	0x02</span>
<span class="cp">#define MUSB_INTR_RESET		0x04</span>
<span class="cp">#define MUSB_INTR_BABBLE	0x04</span>
<span class="cp">#define MUSB_INTR_SOF		0x08</span>
<span class="cp">#define MUSB_INTR_CONNECT	0x10</span>
<span class="cp">#define MUSB_INTR_DISCONNECT	0x20</span>
<span class="cp">#define MUSB_INTR_SESSREQ	0x40</span>
<span class="cp">#define MUSB_INTR_VBUSERROR	0x80	</span><span class="cm">/* For SESSION end */</span><span class="cp"></span>

<span class="cm">/* DEVCTL */</span>
<span class="cp">#define MUSB_DEVCTL_BDEVICE	0x80</span>
<span class="cp">#define MUSB_DEVCTL_FSDEV	0x40</span>
<span class="cp">#define MUSB_DEVCTL_LSDEV	0x20</span>
<span class="cp">#define MUSB_DEVCTL_VBUS	0x18</span>
<span class="cp">#define MUSB_DEVCTL_VBUS_SHIFT	3</span>
<span class="cp">#define MUSB_DEVCTL_HM		0x04</span>
<span class="cp">#define MUSB_DEVCTL_HR		0x02</span>
<span class="cp">#define MUSB_DEVCTL_SESSION	0x01</span>

<span class="cm">/* MUSB ULPI VBUSCONTROL */</span>
<span class="cp">#define MUSB_ULPI_USE_EXTVBUS	0x01</span>
<span class="cp">#define MUSB_ULPI_USE_EXTVBUSIND 0x02</span>
<span class="cm">/* ULPI_REG_CONTROL */</span>
<span class="cp">#define MUSB_ULPI_REG_REQ	(1 &lt;&lt; 0)</span>
<span class="cp">#define MUSB_ULPI_REG_CMPLT	(1 &lt;&lt; 1)</span>
<span class="cp">#define MUSB_ULPI_RDN_WR	(1 &lt;&lt; 2)</span>

<span class="cm">/* TESTMODE */</span>
<span class="cp">#define MUSB_TEST_FORCE_HOST	0x80</span>
<span class="cp">#define MUSB_TEST_FIFO_ACCESS	0x40</span>
<span class="cp">#define MUSB_TEST_FORCE_FS	0x20</span>
<span class="cp">#define MUSB_TEST_FORCE_HS	0x10</span>
<span class="cp">#define MUSB_TEST_PACKET	0x08</span>
<span class="cp">#define MUSB_TEST_K		0x04</span>
<span class="cp">#define MUSB_TEST_J		0x02</span>
<span class="cp">#define MUSB_TEST_SE0_NAK	0x01</span>

<span class="cm">/* Allocate for double-packet buffering (effectively doubles assigned _SIZE) */</span>
<span class="cp">#define MUSB_FIFOSZ_DPB	0x10</span>
<span class="cm">/* Allocation size (8, 16, 32, ... 4096) */</span>
<span class="cp">#define MUSB_FIFOSZ_SIZE	0x0f</span>

<span class="cm">/* CSR0 */</span>
<span class="cp">#define MUSB_CSR0_FLUSHFIFO	0x0100</span>
<span class="cp">#define MUSB_CSR0_TXPKTRDY	0x0002</span>
<span class="cp">#define MUSB_CSR0_RXPKTRDY	0x0001</span>

<span class="cm">/* CSR0 in Peripheral mode */</span>
<span class="cp">#define MUSB_CSR0_P_SVDSETUPEND	0x0080</span>
<span class="cp">#define MUSB_CSR0_P_SVDRXPKTRDY	0x0040</span>
<span class="cp">#define MUSB_CSR0_P_SENDSTALL	0x0020</span>
<span class="cp">#define MUSB_CSR0_P_SETUPEND	0x0010</span>
<span class="cp">#define MUSB_CSR0_P_DATAEND	0x0008</span>
<span class="cp">#define MUSB_CSR0_P_SENTSTALL	0x0004</span>

<span class="cm">/* CSR0 in Host mode */</span>
<span class="cp">#define MUSB_CSR0_H_DIS_PING		0x0800</span>
<span class="cp">#define MUSB_CSR0_H_WR_DATATOGGLE	0x0400	</span><span class="cm">/* Set to allow setting: */</span><span class="cp"></span>
<span class="cp">#define MUSB_CSR0_H_DATATOGGLE		0x0200	</span><span class="cm">/* Data toggle control */</span><span class="cp"></span>
<span class="cp">#define MUSB_CSR0_H_NAKTIMEOUT		0x0080</span>
<span class="cp">#define MUSB_CSR0_H_STATUSPKT		0x0040</span>
<span class="cp">#define MUSB_CSR0_H_REQPKT		0x0020</span>
<span class="cp">#define MUSB_CSR0_H_ERROR		0x0010</span>
<span class="cp">#define MUSB_CSR0_H_SETUPPKT		0x0008</span>
<span class="cp">#define MUSB_CSR0_H_RXSTALL		0x0004</span>

<span class="cm">/* CSR0 bits to avoid zeroing (write zero clears, write 1 ignored) */</span>
<span class="cp">#define MUSB_CSR0_P_WZC_BITS	\</span>
<span class="cp">	(MUSB_CSR0_P_SENTSTALL)</span>
<span class="cp">#define MUSB_CSR0_H_WZC_BITS	\</span>
<span class="cp">	(MUSB_CSR0_H_NAKTIMEOUT | MUSB_CSR0_H_RXSTALL \</span>
<span class="cp">	| MUSB_CSR0_RXPKTRDY)</span>

<span class="cm">/* TxType/RxType */</span>
<span class="cp">#define MUSB_TYPE_SPEED		0xc0</span>
<span class="cp">#define MUSB_TYPE_SPEED_SHIFT	6</span>
<span class="cp">#define MUSB_TYPE_PROTO		0x30	</span><span class="cm">/* Implicitly zero for ep0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_TYPE_PROTO_SHIFT	4</span>
<span class="cp">#define MUSB_TYPE_REMOTE_END	0xf	</span><span class="cm">/* Implicitly zero for ep0 */</span><span class="cp"></span>

<span class="cm">/* CONFIGDATA */</span>
<span class="cp">#define MUSB_CONFIGDATA_MPRXE		0x80	</span><span class="cm">/* Auto bulk pkt combining */</span><span class="cp"></span>
<span class="cp">#define MUSB_CONFIGDATA_MPTXE		0x40	</span><span class="cm">/* Auto bulk pkt splitting */</span><span class="cp"></span>
<span class="cp">#define MUSB_CONFIGDATA_BIGENDIAN	0x20</span>
<span class="cp">#define MUSB_CONFIGDATA_HBRXE		0x10	</span><span class="cm">/* HB-ISO for RX */</span><span class="cp"></span>
<span class="cp">#define MUSB_CONFIGDATA_HBTXE		0x08	</span><span class="cm">/* HB-ISO for TX */</span><span class="cp"></span>
<span class="cp">#define MUSB_CONFIGDATA_DYNFIFO		0x04	</span><span class="cm">/* Dynamic FIFO sizing */</span><span class="cp"></span>
<span class="cp">#define MUSB_CONFIGDATA_SOFTCONE	0x02	</span><span class="cm">/* SoftConnect */</span><span class="cp"></span>
<span class="cp">#define MUSB_CONFIGDATA_UTMIDW		0x01	</span><span class="cm">/* Data width 0/1 =&gt; 8/16bits */</span><span class="cp"></span>

<span class="cm">/* TXCSR in Peripheral and Host mode */</span>
<span class="cp">#define MUSB_TXCSR_AUTOSET		0x8000</span>
<span class="cp">#define MUSB_TXCSR_DMAENAB		0x1000</span>
<span class="cp">#define MUSB_TXCSR_FRCDATATOG		0x0800</span>
<span class="cp">#define MUSB_TXCSR_DMAMODE		0x0400</span>
<span class="cp">#define MUSB_TXCSR_CLRDATATOG		0x0040</span>
<span class="cp">#define MUSB_TXCSR_FLUSHFIFO		0x0008</span>
<span class="cp">#define MUSB_TXCSR_FIFONOTEMPTY		0x0002</span>
<span class="cp">#define MUSB_TXCSR_TXPKTRDY		0x0001</span>

<span class="cm">/* TXCSR in Peripheral mode */</span>
<span class="cp">#define MUSB_TXCSR_P_ISO		0x4000</span>
<span class="cp">#define MUSB_TXCSR_P_INCOMPTX		0x0080</span>
<span class="cp">#define MUSB_TXCSR_P_SENTSTALL		0x0020</span>
<span class="cp">#define MUSB_TXCSR_P_SENDSTALL		0x0010</span>
<span class="cp">#define MUSB_TXCSR_P_UNDERRUN		0x0004</span>

<span class="cm">/* TXCSR in Host mode */</span>
<span class="cp">#define MUSB_TXCSR_H_WR_DATATOGGLE	0x0200</span>
<span class="cp">#define MUSB_TXCSR_H_DATATOGGLE		0x0100</span>
<span class="cp">#define MUSB_TXCSR_H_NAKTIMEOUT		0x0080</span>
<span class="cp">#define MUSB_TXCSR_H_RXSTALL		0x0020</span>
<span class="cp">#define MUSB_TXCSR_H_ERROR		0x0004</span>

<span class="cm">/* TXCSR bits to avoid zeroing (write zero clears, write 1 ignored) */</span>
<span class="cp">#define MUSB_TXCSR_P_WZC_BITS	\</span>
<span class="cp">	(MUSB_TXCSR_P_INCOMPTX | MUSB_TXCSR_P_SENTSTALL \</span>
<span class="cp">	| MUSB_TXCSR_P_UNDERRUN | MUSB_TXCSR_FIFONOTEMPTY)</span>
<span class="cp">#define MUSB_TXCSR_H_WZC_BITS	\</span>
<span class="cp">	(MUSB_TXCSR_H_NAKTIMEOUT | MUSB_TXCSR_H_RXSTALL \</span>
<span class="cp">	| MUSB_TXCSR_H_ERROR | MUSB_TXCSR_FIFONOTEMPTY)</span>

<span class="cm">/* RXCSR in Peripheral and Host mode */</span>
<span class="cp">#define MUSB_RXCSR_AUTOCLEAR		0x8000</span>
<span class="cp">#define MUSB_RXCSR_DMAENAB		0x2000</span>
<span class="cp">#define MUSB_RXCSR_DISNYET		0x1000</span>
<span class="cp">#define MUSB_RXCSR_PID_ERR		0x1000</span>
<span class="cp">#define MUSB_RXCSR_DMAMODE		0x0800</span>
<span class="cp">#define MUSB_RXCSR_INCOMPRX		0x0100</span>
<span class="cp">#define MUSB_RXCSR_CLRDATATOG		0x0080</span>
<span class="cp">#define MUSB_RXCSR_FLUSHFIFO		0x0010</span>
<span class="cp">#define MUSB_RXCSR_DATAERROR		0x0008</span>
<span class="cp">#define MUSB_RXCSR_FIFOFULL		0x0002</span>
<span class="cp">#define MUSB_RXCSR_RXPKTRDY		0x0001</span>

<span class="cm">/* RXCSR in Peripheral mode */</span>
<span class="cp">#define MUSB_RXCSR_P_ISO		0x4000</span>
<span class="cp">#define MUSB_RXCSR_P_SENTSTALL		0x0040</span>
<span class="cp">#define MUSB_RXCSR_P_SENDSTALL		0x0020</span>
<span class="cp">#define MUSB_RXCSR_P_OVERRUN		0x0004</span>

<span class="cm">/* RXCSR in Host mode */</span>
<span class="cp">#define MUSB_RXCSR_H_AUTOREQ		0x4000</span>
<span class="cp">#define MUSB_RXCSR_H_WR_DATATOGGLE	0x0400</span>
<span class="cp">#define MUSB_RXCSR_H_DATATOGGLE		0x0200</span>
<span class="cp">#define MUSB_RXCSR_H_RXSTALL		0x0040</span>
<span class="cp">#define MUSB_RXCSR_H_REQPKT		0x0020</span>
<span class="cp">#define MUSB_RXCSR_H_ERROR		0x0004</span>

<span class="cm">/* RXCSR bits to avoid zeroing (write zero clears, write 1 ignored) */</span>
<span class="cp">#define MUSB_RXCSR_P_WZC_BITS	\</span>
<span class="cp">	(MUSB_RXCSR_P_SENTSTALL | MUSB_RXCSR_P_OVERRUN \</span>
<span class="cp">	| MUSB_RXCSR_RXPKTRDY)</span>
<span class="cp">#define MUSB_RXCSR_H_WZC_BITS	\</span>
<span class="cp">	(MUSB_RXCSR_H_RXSTALL | MUSB_RXCSR_H_ERROR \</span>
<span class="cp">	| MUSB_RXCSR_DATAERROR | MUSB_RXCSR_RXPKTRDY)</span>

<span class="cm">/* HUBADDR */</span>
<span class="cp">#define MUSB_HUBADDR_MULTI_TT		0x80</span>


<span class="cp">#ifndef CONFIG_BLACKFIN</span>

<span class="cm">/*</span>
<span class="cm"> * Common USB registers</span>
<span class="cm"> */</span>

<span class="cp">#define MUSB_FADDR		0x00	</span><span class="cm">/* 8-bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_POWER		0x01	</span><span class="cm">/* 8-bit */</span><span class="cp"></span>

<span class="cp">#define MUSB_INTRTX		0x02	</span><span class="cm">/* 16-bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_INTRRX		0x04</span>
<span class="cp">#define MUSB_INTRTXE		0x06</span>
<span class="cp">#define MUSB_INTRRXE		0x08</span>
<span class="cp">#define MUSB_INTRUSB		0x0A	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_INTRUSBE		0x0B	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_FRAME		0x0C</span>
<span class="cp">#define MUSB_INDEX		0x0E	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_TESTMODE		0x0F	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cm">/* Get offset for a given FIFO from musb-&gt;mregs */</span>
<span class="cp">#if defined(CONFIG_USB_MUSB_TUSB6010) ||	\</span>
<span class="cp">	defined(CONFIG_USB_MUSB_TUSB6010_MODULE)</span>
<span class="cp">#define MUSB_FIFO_OFFSET(epnum)	(0x200 + ((epnum) * 0x20))</span>
<span class="cp">#else</span>
<span class="cp">#define MUSB_FIFO_OFFSET(epnum)	(0x20 + ((epnum) * 4))</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * Additional Control Registers</span>
<span class="cm"> */</span>

<span class="cp">#define MUSB_DEVCTL		0x60	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cm">/* These are always controlled through the INDEX register */</span>
<span class="cp">#define MUSB_TXFIFOSZ		0x62	</span><span class="cm">/* 8-bit (see masks) */</span><span class="cp"></span>
<span class="cp">#define MUSB_RXFIFOSZ		0x63	</span><span class="cm">/* 8-bit (see masks) */</span><span class="cp"></span>
<span class="cp">#define MUSB_TXFIFOADD		0x64	</span><span class="cm">/* 16-bit offset shifted right 3 */</span><span class="cp"></span>
<span class="cp">#define MUSB_RXFIFOADD		0x66	</span><span class="cm">/* 16-bit offset shifted right 3 */</span><span class="cp"></span>

<span class="cm">/* REVISIT: vctrl/vstatus: optional vendor utmi+phy register at 0x68 */</span>
<span class="cp">#define MUSB_HWVERS		0x6C	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_BUSCONTROL	0x70	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_INT_MASK	0x72	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_INT_SRC	0x73	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_REG_DATA	0x74	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_REG_ADDR	0x75	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_REG_CONTROL	0x76	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_ULPI_RAW_DATA	0x77	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cp">#define MUSB_EPINFO		0x78	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_RAMINFO		0x79	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_LINKINFO		0x7a	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_VPLEN		0x7b	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_HS_EOF1		0x7c	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_FS_EOF1		0x7d	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_LS_EOF1		0x7e	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cm">/* Offsets to endpoint registers */</span>
<span class="cp">#define MUSB_TXMAXP		0x00</span>
<span class="cp">#define MUSB_TXCSR		0x02</span>
<span class="cp">#define MUSB_CSR0		MUSB_TXCSR	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_RXMAXP		0x04</span>
<span class="cp">#define MUSB_RXCSR		0x06</span>
<span class="cp">#define MUSB_RXCOUNT		0x08</span>
<span class="cp">#define MUSB_COUNT0		MUSB_RXCOUNT	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_TXTYPE		0x0A</span>
<span class="cp">#define MUSB_TYPE0		MUSB_TXTYPE	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_TXINTERVAL		0x0B</span>
<span class="cp">#define MUSB_NAKLIMIT0		MUSB_TXINTERVAL	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_RXTYPE		0x0C</span>
<span class="cp">#define MUSB_RXINTERVAL		0x0D</span>
<span class="cp">#define MUSB_FIFOSIZE		0x0F</span>
<span class="cp">#define MUSB_CONFIGDATA		MUSB_FIFOSIZE	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>

<span class="cm">/* Offsets to endpoint registers in indexed model (using INDEX register) */</span>
<span class="cp">#define MUSB_INDEXED_OFFSET(_epnum, _offset)	\</span>
<span class="cp">	(0x10 + (_offset))</span>

<span class="cm">/* Offsets to endpoint registers in flat models */</span>
<span class="cp">#define MUSB_FLAT_OFFSET(_epnum, _offset)	\</span>
<span class="cp">	(0x100 + (0x10*(_epnum)) + (_offset))</span>

<span class="cp">#if defined(CONFIG_USB_MUSB_TUSB6010) ||	\</span>
<span class="cp">	defined(CONFIG_USB_MUSB_TUSB6010_MODULE)</span>
<span class="cm">/* TUSB6010 EP0 configuration register is special */</span>
<span class="cp">#define MUSB_TUSB_OFFSET(_epnum, _offset)	\</span>
<span class="cp">	(0x10 + _offset)</span>
<span class="cp">#include &quot;tusb6010.h&quot;		</span><span class="cm">/* Needed &quot;only&quot; for TUSB_EP0_CONF */</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#define MUSB_TXCSR_MODE			0x2000</span>

<span class="cm">/* &quot;bus control&quot;/target registers, for host side multipoint (external hubs) */</span>
<span class="cp">#define MUSB_TXFUNCADDR		0x00</span>
<span class="cp">#define MUSB_TXHUBADDR		0x02</span>
<span class="cp">#define MUSB_TXHUBPORT		0x03</span>

<span class="cp">#define MUSB_RXFUNCADDR		0x04</span>
<span class="cp">#define MUSB_RXHUBADDR		0x06</span>
<span class="cp">#define MUSB_RXHUBPORT		0x07</span>

<span class="cp">#define MUSB_BUSCTL_OFFSET(_epnum, _offset) \</span>
<span class="cp">	(0x80 + (8*(_epnum)) + (_offset))</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_txfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">c_size</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_TXFIFOSZ</span><span class="p">,</span> <span class="n">c_size</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_txfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u16</span> <span class="n">c_off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writew</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_TXFIFOADD</span><span class="p">,</span> <span class="n">c_off</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">c_size</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_RXFIFOSZ</span><span class="p">,</span> <span class="n">c_size</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_rxfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u16</span> <span class="n">c_off</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writew</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_RXFIFOADD</span><span class="p">,</span> <span class="n">c_off</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_ulpi_buscontrol</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_ULPI_BUSCONTROL</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_txfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_TXFIFOSZ</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">musb_read_txfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readw</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_TXFIFOADD</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_RXFIFOSZ</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span>  <span class="nf">musb_read_rxfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readw</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_RXFIFOADD</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_ulpi_buscontrol</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_ULPI_BUSCONTROL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_configdata</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_INDEX</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="mh">0x10</span> <span class="o">+</span> <span class="n">MUSB_CONFIGDATA</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">musb_read_hwvers</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readw</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_HWVERS</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="nf">musb_read_target_reg_base</span><span class="p">(</span><span class="n">u8</span> <span class="n">i</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">mbase</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">ep_target_regs</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">ep_target_regs</span><span class="p">,</span> <span class="n">MUSB_RXFUNCADDR</span><span class="p">,</span> <span class="n">qh_addr_reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">ep_target_regs</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_h_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">ep_target_regs</span><span class="p">,</span> <span class="n">MUSB_RXHUBADDR</span><span class="p">,</span> <span class="n">qh_h_addr_reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">ep_target_regs</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_h_port_reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">ep_target_regs</span><span class="p">,</span> <span class="n">MUSB_RXHUBPORT</span><span class="p">,</span> <span class="n">qh_h_port_reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_txfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_TXFUNCADDR</span><span class="p">),</span>
			<span class="n">qh_addr_reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_txhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_TXHUBADDR</span><span class="p">),</span>
			<span class="n">qh_addr_reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_txhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_h_port_reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">musb_writeb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_TXHUBPORT</span><span class="p">),</span>
			<span class="n">qh_h_port_reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_RXFUNCADDR</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_RXHUBADDR</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_RXHUBPORT</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span>  <span class="nf">musb_read_txfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_TXFUNCADDR</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span>  <span class="nf">musb_read_txhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_TXHUBADDR</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span>  <span class="nf">musb_read_txhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">musb_readb</span><span class="p">(</span><span class="n">mbase</span><span class="p">,</span> <span class="n">MUSB_BUSCTL_OFFSET</span><span class="p">(</span><span class="n">epnum</span><span class="p">,</span> <span class="n">MUSB_TXHUBPORT</span><span class="p">));</span>
<span class="p">}</span>

<span class="cp">#else </span><span class="cm">/* CONFIG_BLACKFIN */</span><span class="cp"></span>

<span class="cp">#define USB_BASE		USB_FADDR</span>
<span class="cp">#define USB_OFFSET(reg)		(reg - USB_BASE)</span>

<span class="cm">/*</span>
<span class="cm"> * Common USB registers</span>
<span class="cm"> */</span>
<span class="cp">#define MUSB_FADDR		USB_OFFSET(USB_FADDR)	</span><span class="cm">/* 8-bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_POWER		USB_OFFSET(USB_POWER)	</span><span class="cm">/* 8-bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_INTRTX		USB_OFFSET(USB_INTRTX)	</span><span class="cm">/* 16-bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_INTRRX		USB_OFFSET(USB_INTRRX)</span>
<span class="cp">#define MUSB_INTRTXE		USB_OFFSET(USB_INTRTXE)</span>
<span class="cp">#define MUSB_INTRRXE		USB_OFFSET(USB_INTRRXE)</span>
<span class="cp">#define MUSB_INTRUSB		USB_OFFSET(USB_INTRUSB)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_INTRUSBE		USB_OFFSET(USB_INTRUSBE)</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_FRAME		USB_OFFSET(USB_FRAME)</span>
<span class="cp">#define MUSB_INDEX		USB_OFFSET(USB_INDEX)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_TESTMODE		USB_OFFSET(USB_TESTMODE)</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cm">/* Get offset for a given FIFO from musb-&gt;mregs */</span>
<span class="cp">#define MUSB_FIFO_OFFSET(epnum)	\</span>
<span class="cp">	(USB_OFFSET(USB_EP0_FIFO) + ((epnum) * 8))</span>

<span class="cm">/*</span>
<span class="cm"> * Additional Control Registers</span>
<span class="cm"> */</span>

<span class="cp">#define MUSB_DEVCTL		USB_OFFSET(USB_OTG_DEV_CTL)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cp">#define MUSB_LINKINFO		USB_OFFSET(USB_LINKINFO)</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_VPLEN		USB_OFFSET(USB_VPLEN)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_HS_EOF1		USB_OFFSET(USB_HS_EOF1)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_FS_EOF1		USB_OFFSET(USB_FS_EOF1)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>
<span class="cp">#define MUSB_LS_EOF1		USB_OFFSET(USB_LS_EOF1)	</span><span class="cm">/* 8 bit */</span><span class="cp"></span>

<span class="cm">/* Offsets to endpoint registers */</span>
<span class="cp">#define MUSB_TXMAXP		0x00</span>
<span class="cp">#define MUSB_TXCSR		0x04</span>
<span class="cp">#define MUSB_CSR0		MUSB_TXCSR	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_RXMAXP		0x08</span>
<span class="cp">#define MUSB_RXCSR		0x0C</span>
<span class="cp">#define MUSB_RXCOUNT		0x10</span>
<span class="cp">#define MUSB_COUNT0		MUSB_RXCOUNT	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_TXTYPE		0x14</span>
<span class="cp">#define MUSB_TYPE0		MUSB_TXTYPE	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_TXINTERVAL		0x18</span>
<span class="cp">#define MUSB_NAKLIMIT0		MUSB_TXINTERVAL	</span><span class="cm">/* Re-used for EP0 */</span><span class="cp"></span>
<span class="cp">#define MUSB_RXTYPE		0x1C</span>
<span class="cp">#define MUSB_RXINTERVAL		0x20</span>
<span class="cp">#define MUSB_TXCOUNT		0x28</span>

<span class="cm">/* Offsets to endpoint registers in indexed model (using INDEX register) */</span>
<span class="cp">#define MUSB_INDEXED_OFFSET(_epnum, _offset)	\</span>
<span class="cp">	(0x40 + (_offset))</span>

<span class="cm">/* Offsets to endpoint registers in flat models */</span>
<span class="cp">#define MUSB_FLAT_OFFSET(_epnum, _offset)	\</span>
<span class="cp">	(USB_OFFSET(USB_EP_NI0_TXMAXP) + (0x40 * (_epnum)) + (_offset))</span>

<span class="cm">/* Not implemented - HW has separate Tx/Rx FIFO */</span>
<span class="cp">#define MUSB_TXCSR_MODE			0x0000</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_txfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">c_size</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_txfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u16</span> <span class="n">c_off</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">c_size</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_rxfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u16</span> <span class="n">c_off</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_ulpi_buscontrol</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_txfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">musb_read_txfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxfifosz</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span>  <span class="nf">musb_read_rxfifoadd</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_ulpi_buscontrol</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_configdata</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">musb_read_hwvers</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * This register is invisible on Blackfin, actually the MUSB</span>
<span class="cm">	 * RTL version of Blackfin is 1.9, so just harcode its value.</span>
<span class="cm">	 */</span>
	<span class="k">return</span> <span class="n">MUSB_HWVERS_1900</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="nf">musb_read_target_reg_base</span><span class="p">(</span><span class="n">u8</span> <span class="n">i</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">ep_target_regs</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_addr_req</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">ep_target_regs</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_h_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">musb_write_rxhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">ep_target_regs</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_h_port_reg</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_txfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_txhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_addr_reg</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>  <span class="nf">musb_write_txhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">qh_h_port_reg</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_rxhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span>  <span class="nf">musb_read_txfunaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span>  <span class="nf">musb_read_txhubaddr</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">musb_read_txhubport</span><span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbase</span><span class="p">,</span> <span class="n">u8</span> <span class="n">epnum</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_BLACKFIN */</span><span class="cp"></span>

<span class="cp">#endif	</span><span class="cm">/* __MUSB_REGS_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
