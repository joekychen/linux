f | rsparser.c | s | 31K | 1009 | Witold Szczeponik | Witold.Szczeponik@gmx.net | 1320628435 |  | PNPACPI: Simplify disabled resource registration  The attached patch simplifies 29df8d8f8702f0f53c1375015f09f04bc8d023c1.  As the "pnp_xxx" structs are not designed to cope with IORESOURCE_DISABLED, and hence no code can test for this value, setting this value is actually a "no op" and can be skipped altogether.  It is sufficient to remove the checks for "empty" resources and continue processing.  The patch is applied against 3.1.  Signed-off-by: Witold Szczeponik <Witold.Szczeponik@gmx.net> Acked-by: Bjorn Helgaas <bhelgaas@google.com> Signed-off-by: Len Brown <len.brown@intel.com>
f | Makefile | g | 89B |  | Thomas Renninger | trenn@suse.de | 1288160624 |  | PNP: Compile all pnp built-in stuff in one module namespace  This is cleanup mostly, nothing urgent. I came up with it when looking at dynamic debug which can enable pr_debug messages at runtime or boot param for a specific module.  Advantages:   - Any pnp code can make use of the moduleparam.h interface, the modules     will show up as pnp.param.   - Passing pnp.ddebug as kernel boot param will enable all pnp debug messages     with my previous patch and CONFIG_DYNAMIC_DEBUG enabled.  Signed-off-by: Thomas Renninger <trenn@suse.de> Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com> Signed-off-by: Len Brown <len.brown@intel.com>
f | pnpacpi.h | s | 382B | 10 | Bjorn Helgaas | bjorn.helgaas@hp.com | 1209453750 |  | PNPACPI: move _CRS/_PRS warnings closer to the action  Move warnings about _CRS and _PRS problems to the place where we actually make the ACPI calls.  Then we don't have to pass around acpi_status values any more than necessary.  Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com> Acked-By: Rene Herman <rene.herman@gmail.com> Signed-off-by: Len Brown <len.brown@intel.com>
f | Kconfig | g | 83B |  | Len Brown | len.brown@intel.com | 1171597084 |  | ACPI: always enable CONFIG_PNPACPI on CONFIG_ACPI kernels  We removed the ACPI motherboard driver which handled the ACPI=y, PNP=n case, so now we need to enforce that PNP & PNPACPI are always enabled for ACPI kernels.  Most major distros ship this way this already.  Cc: Bjorn Helgaas <bjorn.helgaas@hp.com> Signed-off-by: Len Brown <len.brown@intel.com>
f | core.c | s | 9.9K | 328 | Yinghai Lu | yinghai@kernel.org | 1333093120 |  | PNPACPI: Fix device ref leaking in acpi_pnp_match  During testing pci root bus removal, found some root bus bridge is not freed. If booting with pnpacpi=off, those hostbridge could be freed without problem. It turns out that some devices reference are not released during acpi_pnp_match. that match should not hold one device ref during every calling. Add pu_device calling before returning.  Signed-off-by: Yinghai Lu <yinghai@kernel.org> Cc: stable@vger.kernel.org Signed-off-by: Len Brown <len.brown@intel.com>
