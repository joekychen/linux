f | w1_ds2780.c | s | 4.3K | 162 | Clifton Barnes | cabarnes@indesign-llc.com | 1320275223 |  | drivers/power/ds2780_battery.c: add a nolock function to w1 interface  Adds a nolock function to the w1 interface to avoid locking the mutex if needed.  Signed-off-by: Clifton Barnes <cabarnes@indesign-llc.com> Cc: Evgeniy Polyakov <zbr@ioremap.net> Cc: <stable@kernel.org> Cc: <stable@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | w1_ds2408.c | s | 9.5K | 341 | H Hartley Sweeten | hartleys@visionengravers.com | 1336173930 |  | w1: w1_ds2408.c: quite sparse noise about using plaing integer as NULL pointer  NULL not 0 should be used with pointers. Just remove the offending lines since they will default to NULL anyway.  Signed-off-by: H Hartley Sweeten <hsweeten@visionengravers.com> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | Makefile | g | 496B |  | Renata Sayakhova | rsayakhova@gmail.com | 1331234133 |  | DS2781 Maxim Stand-Alone Fuel Gauge battery and w1 slave drivers  Signed-off-by: Renata Sayakhova <rsayakhova@gmail.com> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | w1_ds2781.h | s | 3.9K | 125 | Renata Sayakhova | rsayakhova@gmail.com | 1331234133 |  | DS2781 Maxim Stand-Alone Fuel Gauge battery and w1 slave drivers  Signed-off-by: Renata Sayakhova <rsayakhova@gmail.com> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | w1_ds2433.c | s | 7.3K | 260 | Chris Wright | chrisw@sous-sol.org | 1274459851 |  | sysfs: add struct file* to bin_attr callbacks  This allows bin_attr->read,write,mmap callbacks to check file specific data (such as inode owner) as part of any privilege validation.  Signed-off-by: Chris Wright <chrisw@sous-sol.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | w1_ds2760.h | s | 1.8K | 51 | Daniel Mack | daniel@caiaq.de | 1244489117 |  | w1: ds2760_battery: add support for sleep mode feature  This adds support for ds2760's sleep mode feature. With this feature enabled, the chip enters a deep sleep mode and disconnects from the battery when the w1 line is held down for more than 2 seconds.  This new behaviour can be switched on and off using a new module parameter.  Signed-off-by: Daniel Mack <daniel@caiaq.de> Cc: Szabolcs Gyurko <szabolcs.gyurko@tlt.hu> Acked-by: Matt Reimer <mreimer@vpop.net> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Anton Vorontsov <cbouatmailru@gmail.com>
f | w1_smem.c | s | 1.7K | 58 | Evgeniy Polyakov | zbr@ioremap.net | 1314314733 |  | MAINTAINERS: Evgeniy has moved  Signed-off-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | w1_ds2781.c | s | 4.2K | 160 | Renata Sayakhova | rsayakhova@gmail.com | 1331234133 |  | DS2781 Maxim Stand-Alone Fuel Gauge battery and w1 slave drivers  Signed-off-by: Renata Sayakhova <rsayakhova@gmail.com> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | w1_bq27000.c | s | 2.4K | 90 | NeilBrown | neilb@suse.de | 1330122350 |  | w1_bq27000: Only one thread can access the bq27000 at a time.  If multiple threads try, they trip over each other badly.  Signed-off-by: NeilBrown <neilb@suse.de> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | Kconfig | g | 2.7K |  | Renata Sayakhova | rsayakhova@gmail.com | 1331234133 |  | DS2781 Maxim Stand-Alone Fuel Gauge battery and w1 slave drivers  Signed-off-by: Renata Sayakhova <rsayakhova@gmail.com> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | w1_therm.c | s | 6.6K | 232 | Maciej Szmigiero | mhej@o2.pl | 1321559276 |  | W1: w1_therm: release the bus during conversion on externally powered devices  w1_therm devices can either be bus powered or externally powered.  When device is bus powered during temperature conversion the bus have to be left high to provide necessary power. Some masters also allow strong power-up to be enabled in this case. Naturally, no communication over bus can occur during that time.  However, if device has external power then there is no such restriction, and host can talk to other devices during temperature conversion.  There is command which allows us to check how device is powered, this patch uses it to release the bus on externally w1_therm powered devices during temperature conversion.  Also, this changes uninterruptible sleeps there into interruptible ones to avoid long uninterruptible sleep if w1 subsystem happens to grab bus for scan during w1_therm_read().  Signed-off-by: Maciej Szmigiero <mhej@o2.pl> Acked-by: Evgeniy Polyakov <zbr@ioremap.net> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | w1_ds2431.c | s | 7.1K | 246 | Chris Wright | chrisw@sous-sol.org | 1274459851 |  | sysfs: add struct file* to bin_attr callbacks  This allows bin_attr->read,write,mmap callbacks to check file specific data (such as inode owner) as part of any privilege validation.  Signed-off-by: Chris Wright <chrisw@sous-sol.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | w1_ds2780.h | s | 4.0K | 121 | Clifton Barnes | cabarnes@indesign-llc.com | 1320275223 |  | drivers/power/ds2780_battery.c: add a nolock function to w1 interface  Adds a nolock function to the w1 interface to avoid locking the mutex if needed.  Signed-off-by: Clifton Barnes <cabarnes@indesign-llc.com> Cc: Evgeniy Polyakov <zbr@ioremap.net> Cc: <stable@kernel.org> Cc: <stable@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | w1_ds2760.c | s | 4.5K | 166 | Jonathan Cameron | jic23@cam.ac.uk | 1320275222 |  | w1: ds2760 and ds2780, use ida for id and ida_simple_get() to get it  Straightforward.  As an aside, the ida_init calls are not needed as far as I can see needed.  (DEFINE_IDA does the same already).  Signed-off-by: Jonathan Cameron <jic23@cam.ac.uk> Cc: Evgeniy Polyakov <zbr@ioremap.net> Acked-by: Clifton Barnes <cabarnes@indesign-llc.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | w1_ds2423.c | s | 4.3K | 150 | Mika Laitio | lamikr@pilppa.org | 1294934602 |  | w1: DS2423 counter driver and documentation  This is a 1-wire/w1 DS2423 slave driver for reading the values from all 4 counters available DS2423 devices by using standard w1_slave file.  In ds2423 the counters are tied to ram pages 12-15 in and each of those ram-pages.  Each of these counter values (and asoociated ram page values) are represented as a own line in w1_slave file.  Driver has been tested on mips and x86.  usage example: cat /sys/bus/w1/devices/1d-00000009b964/w1_slave  00 02 00 00 00 00 00 00 00 6d 38 00 ff ff 00 00 fe ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff crc=YES c=2 00 02 00 00 00 00 00 00 00 e0 1f 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff crc=YES c=2 00 5a 0e 5f 18 00 00 00 00 0b 28 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff 00 00 ff ff crc=YES c=408882778 00 05 00 00 00 00 00 00 00 8d 39 ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff crc=YES c=5  Patch includes also the documentation.  [randy.dunlap@oracle.com: fix ds2423 build, needs to select CRC16] Signed-off-by: Mika Laitio <lamikr@pilppa.org> Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: Evgeniy Polyakov <johnpol@2ka.mipt.ru> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
