f | Makefile | g | 453B |  | Linus Torvalds | torvalds@linux-foundation.org | 1337893306 |  | 
f | of_pci_irq.c | s | 2.8K | 84 | John Crispin | blogic@openwrt.org | 1337607108 |  | OF: PCI: const usage needed by MIPS  On MIPS we want to call of_irq_map_pci from inside  arch/mips/include/asm/pci.h:extern int pcibios_map_irq( 				const struct pci_dev *dev, u8 slot, u8 pin); For this to work we need to change several functions to const usage.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-pci@vger.kernel.org Cc: devicetree-discuss@lists.ozlabs.org Cc: linux-mips@linux-mips.org Acked-by: Bjorn Helgaas <bhelgaas@google.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Patchwork: https://patchwork.linux-mips.org/patch/3710/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | device.c | s | 4.3K | 147 | Grant Likely | grant.likely@secretlab.ca | 1328131590 |  | drivercore: Output common devicetree information in uevent  When userspace needs to find a specific device, it currently isn't easy to resolve a /sys/devices/ path from a specific device tree node.  Nor is it easy to obtain the compatible list for devices.  This patch generalizes the code that inserts OF_* values into the uevent device attribute so that any device that is attached to an OF node will have that information exported to userspace.  Without this patch only platform devices and some powerpc-specific busses have access to this data.  The original function also creates a MODALIAS property for the compatible list, but that code has not been generalized into the common case because it has the potential to break module loading on a lot of bus types.  Bus types are still responsible for their own MODALIAS properties.  Boot tested on ARM and compile tested on PowerPC and SPARC.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: Tobias Klauser <tklauser@distanz.ch> Cc: Frederic Lambert <frdrc66@gmail.com> Cc: Rob Herring <rob.herring@calxeda.com> Cc: Mark Brown <broonie@sirena.org.uk> Cc: "David S. Miller" <davem@davemloft.net> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | of_mtd.c | s | 2.0K | 76 | Jean-Christophe PLAGNIOL-VILLARD | plagnioj@jcrosoft.com | 1331825299 |  | of/mtd/nand: add generic bindings and helpers  - nand-ecc-mode : String, operation mode of the NAND ecc mode.   Supported values are: "none", "soft", "hw", "hw_syndrome", "hw_oob_first",   "soft_bch". - nand-bus-width : 8 or 16 bus width if not present 8 - nand-on-flash-bbt: boolean to enable on flash bbt option if not present false  Signed-off-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: Stefan Roese <sr@denx.de>
f | base.c | s | 33K | 1165 | Stephen Warren | swarren@nvidia.com | 1334749991 |  | dt: add property iteration helpers  This patch adds macros of_property_for_each_u32() and of_property_for_each_string(), which iterate over an array of values within a device-tree property. Usage is for example:  struct property *prop; const __be32 *p; u32 u; of_property_for_each_u32(np, "propname", prop, p, u) 	printk("U32 value: %x\n", u);  struct property *prop; const char *s; of_property_for_each_string(np, "propname", prop, s) 	printk("String value: %s\n", s);  Based on work by Rob Herring <robherring2@gmail.com>  Cc: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Stephen Warren <swarren@nvidia.com> Acked-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | platform.c | s | 12K | 408 | Linus Torvalds | torvalds@linux-foundation.org | 1332549049 |  | Merge branch 'for-armsoc' of git://git.linaro.org/people/rmk/linux-arm  Pull #1 ARM updates from Russell King:  "This one covers stuff which Arnd is waiting for me to push, as this is   shared between both our trees and probably other trees elsewhere.    Essentially, this contains:    - AMBA primecell device initializer updates - mostly shrinking the      size of the device declarations in platform code to something more      reasonable.    - Getting rid of the NO_IRQ crap from AMBA primecell stuff.    - Nicolas' idle cleanups.  This in combination with the restart      cleanups from the last merge window results in a great many      mach/system.h files being deleted."  Yay: ~80 files, ~2000 lines deleted.  * 'for-armsoc' of git://git.linaro.org/people/rmk/linux-arm: (60 commits)   ARM: remove disable_fiq and arch_ret_to_user macros   ARM: make entry-macro.S depend on !MULTI_IRQ_HANDLER   ARM: rpc: make default fiq handler run-time installed   ARM: make arch_ret_to_user macro optional   ARM: amba: samsung: use common amba device initializers   ARM: amba: spear: use common amba device initializers   ARM: amba: nomadik: use common amba device initializers   ARM: amba: u300: use common amba device initializers   ARM: amba: lpc32xx: use common amba device initializers   ARM: amba: netx: use common amba device initializers   ARM: amba: bcmring: use common amba device initializers   ARM: amba: ep93xx: use common amba device initializers   ARM: amba: omap2: use common amba device initializers   ARM: amba: integrator: use common amba device initializers   ARM: amba: realview: get rid of private platform amba_device initializer   ARM: amba: versatile: get rid of private platform amba_device initializer   ARM: amba: vexpress: get rid of private platform amba_device initializer   ARM: amba: provide common initializers for static amba devices   ARM: amba: make use of -1 IRQs warn   ARM: amba: u300: get rid of NO_IRQ initializers   ...
f | selftest.c | s | 4.4K | 148 | Grant Likely | grant.likely@secretlab.ca | 1327771760 |  | of: Add of_property_match_string() to find index into a string list  Add a helper function for finding the index of a string in a string list property.  This helper is useful for bindings that use a separate *-name property for attaching names to tuples in another property such as 'reg' or 'gpios'.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | irq.c | s | 13K | 435 | Benoit Cousson | b-cousson@ti.com | 1325662395 |  | of/irq: Add interrupts-names property to name an irq resource  Add a interrupts-names property to allow the possibility to provide a name to any interrupts entries.  If the name is available, use it to name the resource, otherwise keep the device full name.  Signed-off-by: Benoit Cousson <b-cousson@ti.com> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Rob Herring <rob.herring@calxeda.com> [grant.likely: use "interrupt-names" and tidy documentation] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | of_i2c.c | s | 2.8K | 91 | Stephen Warren | swarren@nvidia.com | 1336825697 |  | of/i2c: implement of_find_i2c_adapter_by_node  This finds the struct i2c_adapter * for a given device tree node. Just like of_find_i2c_device_by_node.  Signed-off-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Wolfram Sang <w.sang@pengutronix.de>
f | Kconfig | g | 1.5K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337893306 |  | 
f | address.c | s | 15K | 535 | Arnd Bergmann | arnd@arndb.de | 1335127444 |  | ARM: spear: remove most mach/*.h header contents  The register and irq definitions in mach/*.h for spear3xx and spear6xx are now mostly obsolete, after the platforms have been converted to device tree based probing and the data is now part of the device tree files.  The misc_regs.h contents are moved into clock.c because that is the only user, aside from the DMA_CHN_CFG that should eventually get handled differently. Some of the contents of mach/spear.h still remain, because they are used to set up the static map table, timer, uart and auxdata tables, but almost everything got removed. We might remove everything but the map table as the DT conversion completes, but that is not a priority. I've also made sure to make both copies of spear.h more or less identical so we can eventually combine them.  The spear3?0.h files were only used by the spear3?0.c files, so I merged the contents in there and removed the bits that were unused. This is something that should still be looked at.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Viresh Kumar <viresh.kumar@st.com>
f | of_pci.c | s | 1.0K | 38 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103874 |  | of: of_pci.c needs export.h since it uses EXPORT_SYMBOLS  It was getting it implicitly before, since module.h was pulled in via device.h -- but that is something we are going to make go away soon.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | of_mdio.c | s | 5.0K | 164 | David Daney | david.daney@cavium.com | 1336445889 |  | netdev/of/phy: New function: of_mdio_find_bus().  Add of_mdio_find_bus() which allows an mii_bus to be located given its associated the device tree node.  This is needed by the follow-on patch to add a driver for MDIO bus multiplexers.  The of_mdiobus_register() function is modified so that the device tree node is recorded in the mii_bus.  Then we can find it again by iterating over all mdio_bus_class devices.  Because the OF device tree has now become an integral part of the kernel, this can live in mdio_bus.c (which contains the needed mdio_bus_class structure) instead of of_mdio.c.  Signed-off-by: David Daney <david.daney@cavium.com> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: "David S. Miller" <davem@davemloft.net> Signed-off-by: David S. Miller <davem@davemloft.net>
f | fdt.c | s | 18K | 633 | Danny Kukawka | danny.kukawka@bisect.de | 1330358965 |  | of/fdt.c: asm/setup.h included twice  drivers/of/fdt.c included 'asm/setup.h' twice, remove the duplicate.  Signed-off-by: Danny Kukawka <danny.kukawka@bisect.de> Signed-off-by: Rob Herring <rob.herring@calxeda.com>
f | of_net.c | s | 3.0K | 84 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103916 |  | drivers/of: include export.h for EXPORT_SYMBOL_GPL/THIS_MODULE as required  For files that were getting these macros via the implicit presence of module.h being everywhere.  With contributions from Stephen Rothwell <sfr@canb.auug.org.au>.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | pdt.c | s | 5.9K | 204 | Sam Ravnborg | sam@ravnborg.org | 1325025450 |  | of/pdt: fix section mismatch warning  Fix the following section mismatch warning - seen when building sparc32:  WARNING: vmlinux.o(.text+0x1ff9c0): Section mismatch in reference from the function kernel_tree_alloc() to the function .init.text:prom_early_alloc() The function kernel_tree_alloc() references the function __init prom_early_alloc(). This is often because kernel_tree_alloc lacks a __init annotation or the annotation of prom_early_alloc is wrong.  prom_early_alloc() is annotated __init, and users of kernel_tree_alloc() is also annotated __init. So simply match the annoation of these to fix the warning.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Grant Likely <grant.likely@secretlab.ca> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Rob Herring <rob.herring@calxeda.com>
