<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › s390 › net › qeth_core_mpc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>qeth_core_mpc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  drivers/s390/net/qeth_core_mpc.h</span>
<span class="cm"> *</span>
<span class="cm"> *    Copyright IBM Corp. 2007</span>
<span class="cm"> *    Author(s): Frank Pavlic &lt;fpavlic@de.ibm.com&gt;,</span>
<span class="cm"> *		 Thomas Spatzier &lt;tspat@de.ibm.com&gt;,</span>
<span class="cm"> *		 Frank Blaschka &lt;frank.blaschka@de.ibm.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __QETH_CORE_MPC_H__</span>
<span class="cp">#define __QETH_CORE_MPC_H__</span>

<span class="cp">#include &lt;asm/qeth.h&gt;</span>

<span class="cp">#define IPA_PDU_HEADER_SIZE	0x40</span>
<span class="cp">#define QETH_IPA_PDU_LEN_TOTAL(buffer) (buffer + 0x0e)</span>
<span class="cp">#define QETH_IPA_PDU_LEN_PDU1(buffer) (buffer + 0x26)</span>
<span class="cp">#define QETH_IPA_PDU_LEN_PDU2(buffer) (buffer + 0x29)</span>
<span class="cp">#define QETH_IPA_PDU_LEN_PDU3(buffer) (buffer + 0x3a)</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IPA_PDU_HEADER</span><span class="p">[];</span>
<span class="cp">#define QETH_IPA_CMD_DEST_ADDR(buffer) (buffer + 0x2c)</span>

<span class="cp">#define IPA_CMD_LENGTH	(IPA_PDU_HEADER_SIZE + sizeof(struct qeth_ipa_cmd))</span>

<span class="cp">#define QETH_SEQ_NO_LENGTH	4</span>
<span class="cp">#define QETH_MPC_TOKEN_LENGTH	4</span>
<span class="cp">#define QETH_MCL_LENGTH		4</span>
<span class="cp">#define OSA_ADDR_LEN		6</span>

<span class="cp">#define QETH_TIMEOUT		(10 * HZ)</span>
<span class="cp">#define QETH_IPA_TIMEOUT	(45 * HZ)</span>
<span class="cp">#define QETH_IDX_COMMAND_SEQNO	0xffff0000</span>
<span class="cp">#define SR_INFO_LEN		16</span>

<span class="cp">#define QETH_CLEAR_CHANNEL_PARM	-10</span>
<span class="cp">#define QETH_HALT_CHANNEL_PARM	-11</span>
<span class="cp">#define QETH_RCD_PARM -12</span>

<span class="cm">/*****************************************************************************/</span>
<span class="cm">/* IP Assist related definitions                                             */</span>
<span class="cm">/*****************************************************************************/</span>
<span class="cp">#define IPA_CMD_INITIATOR_HOST  0x00</span>
<span class="cp">#define IPA_CMD_INITIATOR_OSA   0x01</span>
<span class="cp">#define IPA_CMD_INITIATOR_HOST_REPLY  0x80</span>
<span class="cp">#define IPA_CMD_INITIATOR_OSA_REPLY   0x81</span>
<span class="cp">#define IPA_CMD_PRIM_VERSION_NO 0x01</span>

<span class="k">enum</span> <span class="n">qeth_card_types</span> <span class="p">{</span>
	<span class="n">QETH_CARD_TYPE_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">QETH_CARD_TYPE_OSD</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">QETH_CARD_TYPE_IQD</span>     <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">QETH_CARD_TYPE_OSN</span>     <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">QETH_CARD_TYPE_OSM</span>     <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">QETH_CARD_TYPE_OSX</span>     <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define QETH_MPC_DIFINFO_LEN_INDICATES_LINK_TYPE 0x18</span>
<span class="cm">/* only the first two bytes are looked at in qeth_get_cardname_short */</span>
<span class="k">enum</span> <span class="n">qeth_link_types</span> <span class="p">{</span>
	<span class="n">QETH_LINK_TYPE_FAST_ETH</span>     <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_HSTR</span>         <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_GBIT_ETH</span>     <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_OSN</span>          <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_10GBIT_ETH</span>   <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_LANE_ETH100</span>  <span class="o">=</span> <span class="mh">0x81</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_LANE_TR</span>      <span class="o">=</span> <span class="mh">0x82</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_LANE_ETH1000</span> <span class="o">=</span> <span class="mh">0x83</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_LANE</span>         <span class="o">=</span> <span class="mh">0x88</span><span class="p">,</span>
	<span class="n">QETH_LINK_TYPE_ATM_NATIVE</span>   <span class="o">=</span> <span class="mh">0x90</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Routing stuff</span>
<span class="cm"> */</span>
<span class="cp">#define RESET_ROUTING_FLAG 0x10 </span><span class="cm">/* indicate that routing type shall be set */</span><span class="cp"></span>
<span class="k">enum</span> <span class="n">qeth_routing_types</span> <span class="p">{</span>
	<span class="cm">/* TODO: set to bit flag used in IPA Command */</span>
	<span class="n">NO_ROUTER</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PRIMARY_ROUTER</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">SECONDARY_ROUTER</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">MULTICAST_ROUTER</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">PRIMARY_CONNECTOR</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">SECONDARY_CONNECTOR</span>	<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* IPA Commands */</span>
<span class="k">enum</span> <span class="n">qeth_ipa_cmds</span> <span class="p">{</span>
	<span class="n">IPA_CMD_STARTLAN</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">IPA_CMD_STOPLAN</span>			<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETVMAC</span>			<span class="o">=</span> <span class="mh">0x21</span><span class="p">,</span>
	<span class="n">IPA_CMD_DELVMAC</span>			<span class="o">=</span> <span class="mh">0x22</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETGMAC</span>			<span class="o">=</span> <span class="mh">0x23</span><span class="p">,</span>
	<span class="n">IPA_CMD_DELGMAC</span>			<span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETVLAN</span>			<span class="o">=</span> <span class="mh">0x25</span><span class="p">,</span>
	<span class="n">IPA_CMD_DELVLAN</span>			<span class="o">=</span> <span class="mh">0x26</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETCCID</span>			<span class="o">=</span> <span class="mh">0x41</span><span class="p">,</span>
	<span class="n">IPA_CMD_DELCCID</span>			<span class="o">=</span> <span class="mh">0x42</span><span class="p">,</span>
	<span class="n">IPA_CMD_MODCCID</span>			<span class="o">=</span> <span class="mh">0x43</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETIP</span>			<span class="o">=</span> <span class="mh">0xb1</span><span class="p">,</span>
	<span class="n">IPA_CMD_QIPASSIST</span>		<span class="o">=</span> <span class="mh">0xb2</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETASSPARMS</span>		<span class="o">=</span> <span class="mh">0xb3</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETIPM</span>			<span class="o">=</span> <span class="mh">0xb4</span><span class="p">,</span>
	<span class="n">IPA_CMD_DELIPM</span>			<span class="o">=</span> <span class="mh">0xb5</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETRTG</span>			<span class="o">=</span> <span class="mh">0xb6</span><span class="p">,</span>
	<span class="n">IPA_CMD_DELIP</span>			<span class="o">=</span> <span class="mh">0xb7</span><span class="p">,</span>
	<span class="n">IPA_CMD_SETADAPTERPARMS</span>		<span class="o">=</span> <span class="mh">0xb8</span><span class="p">,</span>
	<span class="n">IPA_CMD_SET_DIAG_ASS</span>		<span class="o">=</span> <span class="mh">0xb9</span><span class="p">,</span>
	<span class="n">IPA_CMD_CREATE_ADDR</span>		<span class="o">=</span> <span class="mh">0xc3</span><span class="p">,</span>
	<span class="n">IPA_CMD_DESTROY_ADDR</span>		<span class="o">=</span> <span class="mh">0xc4</span><span class="p">,</span>
	<span class="n">IPA_CMD_REGISTER_LOCAL_ADDR</span>	<span class="o">=</span> <span class="mh">0xd1</span><span class="p">,</span>
	<span class="n">IPA_CMD_UNREGISTER_LOCAL_ADDR</span>	<span class="o">=</span> <span class="mh">0xd2</span><span class="p">,</span>
	<span class="n">IPA_CMD_UNKNOWN</span>			<span class="o">=</span> <span class="mh">0x00</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_ip_ass_cmds</span> <span class="p">{</span>
	<span class="n">IPA_CMD_ASS_START</span>	<span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_STOP</span>	<span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_CONFIGURE</span>	<span class="o">=</span> <span class="mh">0x0003</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ENABLE</span>	<span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_arp_process_subcmds</span> <span class="p">{</span>
	<span class="n">IPA_CMD_ASS_ARP_SET_NO_ENTRIES</span>	<span class="o">=</span> <span class="mh">0x0003</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ARP_QUERY_CACHE</span>	<span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ARP_ADD_ENTRY</span>	<span class="o">=</span> <span class="mh">0x0005</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ARP_REMOVE_ENTRY</span>	<span class="o">=</span> <span class="mh">0x0006</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ARP_FLUSH_CACHE</span>	<span class="o">=</span> <span class="mh">0x0007</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ARP_QUERY_INFO</span>	<span class="o">=</span> <span class="mh">0x0104</span><span class="p">,</span>
	<span class="n">IPA_CMD_ASS_ARP_QUERY_STATS</span>	<span class="o">=</span> <span class="mh">0x0204</span><span class="p">,</span>
<span class="p">};</span>


<span class="cm">/* Return Codes for IPA Commands</span>
<span class="cm"> * according to OSA card Specs */</span>

<span class="k">enum</span> <span class="n">qeth_ipa_return_codes</span> <span class="p">{</span>
	<span class="n">IPA_RC_SUCCESS</span>			<span class="o">=</span> <span class="mh">0x0000</span><span class="p">,</span>
	<span class="n">IPA_RC_NOTSUPP</span>			<span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">IPA_RC_IP_TABLE_FULL</span>		<span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">IPA_RC_UNKNOWN_ERROR</span>		<span class="o">=</span> <span class="mh">0x0003</span><span class="p">,</span>
	<span class="n">IPA_RC_UNSUPPORTED_COMMAND</span>	<span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">IPA_RC_TRACE_ALREADY_ACTIVE</span>	<span class="o">=</span> <span class="mh">0x0005</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_FORMAT</span>		<span class="o">=</span> <span class="mh">0x0006</span><span class="p">,</span>
	<span class="n">IPA_RC_DUP_IPV6_REMOTE</span>		<span class="o">=</span> <span class="mh">0x0008</span><span class="p">,</span>
	<span class="n">IPA_RC_DUP_IPV6_HOME</span>		<span class="o">=</span> <span class="mh">0x0010</span><span class="p">,</span>
	<span class="n">IPA_RC_UNREGISTERED_ADDR</span>	<span class="o">=</span> <span class="mh">0x0011</span><span class="p">,</span>
	<span class="n">IPA_RC_NO_ID_AVAILABLE</span>		<span class="o">=</span> <span class="mh">0x0012</span><span class="p">,</span>
	<span class="n">IPA_RC_ID_NOT_FOUND</span>		<span class="o">=</span> <span class="mh">0x0013</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_IP_VERSION</span>	<span class="o">=</span> <span class="mh">0x0020</span><span class="p">,</span>
	<span class="n">IPA_RC_LAN_FRAME_MISMATCH</span>	<span class="o">=</span> <span class="mh">0x0040</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_UNSUPPORTED_CMD</span>	<span class="o">=</span> <span class="mh">0x2003</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_DUP_MAC</span>		<span class="o">=</span> <span class="mh">0x2005</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_ADDR_TABLE_FULL</span>	<span class="o">=</span> <span class="mh">0x2006</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_DUP_LAYER3_MAC</span>	<span class="o">=</span> <span class="mh">0x200a</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_GMAC_NOT_FOUND</span>	<span class="o">=</span> <span class="mh">0x200b</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_MAC_NOT_AUTH_BY_HYP</span>	<span class="o">=</span> <span class="mh">0x200c</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_MAC_NOT_AUTH_BY_ADP</span>	<span class="o">=</span> <span class="mh">0x200d</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_MAC_NOT_FOUND</span>		<span class="o">=</span> <span class="mh">0x2010</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_INVALID_VLAN_ID</span>	<span class="o">=</span> <span class="mh">0x2015</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_DUP_VLAN_ID</span>		<span class="o">=</span> <span class="mh">0x2016</span><span class="p">,</span>
	<span class="n">IPA_RC_L2_VLAN_ID_NOT_FOUND</span>	<span class="o">=</span> <span class="mh">0x2017</span><span class="p">,</span>
	<span class="n">IPA_RC_DATA_MISMATCH</span>		<span class="o">=</span> <span class="mh">0xe001</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_MTU_SIZE</span>		<span class="o">=</span> <span class="mh">0xe002</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_LANTYPE</span>		<span class="o">=</span> <span class="mh">0xe003</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_LANNUM</span>		<span class="o">=</span> <span class="mh">0xe004</span><span class="p">,</span>
	<span class="n">IPA_RC_DUPLICATE_IP_ADDRESS</span>	<span class="o">=</span> <span class="mh">0xe005</span><span class="p">,</span>
	<span class="n">IPA_RC_IP_ADDR_TABLE_FULL</span>	<span class="o">=</span> <span class="mh">0xe006</span><span class="p">,</span>
	<span class="n">IPA_RC_LAN_PORT_STATE_ERROR</span>	<span class="o">=</span> <span class="mh">0xe007</span><span class="p">,</span>
	<span class="n">IPA_RC_SETIP_NO_STARTLAN</span>	<span class="o">=</span> <span class="mh">0xe008</span><span class="p">,</span>
	<span class="n">IPA_RC_SETIP_ALREADY_RECEIVED</span>	<span class="o">=</span> <span class="mh">0xe009</span><span class="p">,</span>
	<span class="n">IPA_RC_IP_ADDR_ALREADY_USED</span>	<span class="o">=</span> <span class="mh">0xe00a</span><span class="p">,</span>
	<span class="n">IPA_RC_MC_ADDR_NOT_FOUND</span>	<span class="o">=</span> <span class="mh">0xe00b</span><span class="p">,</span>
	<span class="n">IPA_RC_SETIP_INVALID_VERSION</span>	<span class="o">=</span> <span class="mh">0xe00d</span><span class="p">,</span>
	<span class="n">IPA_RC_UNSUPPORTED_SUBCMD</span>	<span class="o">=</span> <span class="mh">0xe00e</span><span class="p">,</span>
	<span class="n">IPA_RC_ARP_ASSIST_NO_ENABLE</span>	<span class="o">=</span> <span class="mh">0xe00f</span><span class="p">,</span>
	<span class="n">IPA_RC_PRIMARY_ALREADY_DEFINED</span>	<span class="o">=</span> <span class="mh">0xe010</span><span class="p">,</span>
	<span class="n">IPA_RC_SECOND_ALREADY_DEFINED</span>	<span class="o">=</span> <span class="mh">0xe011</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_SETRTG_INDICATOR</span>	<span class="o">=</span> <span class="mh">0xe012</span><span class="p">,</span>
	<span class="n">IPA_RC_MC_ADDR_ALREADY_DEFINED</span>	<span class="o">=</span> <span class="mh">0xe013</span><span class="p">,</span>
	<span class="n">IPA_RC_LAN_OFFLINE</span>		<span class="o">=</span> <span class="mh">0xe080</span><span class="p">,</span>
	<span class="n">IPA_RC_INVALID_IP_VERSION2</span>	<span class="o">=</span> <span class="mh">0xf001</span><span class="p">,</span>
	<span class="n">IPA_RC_ENOMEM</span>			<span class="o">=</span> <span class="mh">0xfffe</span><span class="p">,</span>
	<span class="n">IPA_RC_FFFF</span>			<span class="o">=</span> <span class="mh">0xffff</span>
<span class="p">};</span>
<span class="cm">/* for DELIP */</span>
<span class="cp">#define IPA_RC_IP_ADDRESS_NOT_DEFINED	IPA_RC_PRIMARY_ALREADY_DEFINED</span>
<span class="cm">/* for SET_DIAGNOSTIC_ASSIST */</span>
<span class="cp">#define IPA_RC_INVALID_SUBCMD		IPA_RC_IP_TABLE_FULL</span>
<span class="cp">#define IPA_RC_HARDWARE_AUTH_ERROR	IPA_RC_UNKNOWN_ERROR</span>

<span class="cm">/* IPA function flags; each flag marks availability of respective function */</span>
<span class="k">enum</span> <span class="n">qeth_ipa_funcs</span> <span class="p">{</span>
	<span class="n">IPA_ARP_PROCESSING</span>      <span class="o">=</span> <span class="mh">0x00000001L</span><span class="p">,</span>
	<span class="n">IPA_INBOUND_CHECKSUM</span>    <span class="o">=</span> <span class="mh">0x00000002L</span><span class="p">,</span>
	<span class="n">IPA_OUTBOUND_CHECKSUM</span>   <span class="o">=</span> <span class="mh">0x00000004L</span><span class="p">,</span>
	<span class="n">IPA_IP_FRAGMENTATION</span>    <span class="o">=</span> <span class="mh">0x00000008L</span><span class="p">,</span>
	<span class="n">IPA_FILTERING</span>           <span class="o">=</span> <span class="mh">0x00000010L</span><span class="p">,</span>
	<span class="n">IPA_IPV6</span>                <span class="o">=</span> <span class="mh">0x00000020L</span><span class="p">,</span>
	<span class="n">IPA_MULTICASTING</span>        <span class="o">=</span> <span class="mh">0x00000040L</span><span class="p">,</span>
	<span class="n">IPA_IP_REASSEMBLY</span>       <span class="o">=</span> <span class="mh">0x00000080L</span><span class="p">,</span>
	<span class="n">IPA_QUERY_ARP_COUNTERS</span>  <span class="o">=</span> <span class="mh">0x00000100L</span><span class="p">,</span>
	<span class="n">IPA_QUERY_ARP_ADDR_INFO</span> <span class="o">=</span> <span class="mh">0x00000200L</span><span class="p">,</span>
	<span class="n">IPA_SETADAPTERPARMS</span>     <span class="o">=</span> <span class="mh">0x00000400L</span><span class="p">,</span>
	<span class="n">IPA_VLAN_PRIO</span>           <span class="o">=</span> <span class="mh">0x00000800L</span><span class="p">,</span>
	<span class="n">IPA_PASSTHRU</span>            <span class="o">=</span> <span class="mh">0x00001000L</span><span class="p">,</span>
	<span class="n">IPA_FLUSH_ARP_SUPPORT</span>   <span class="o">=</span> <span class="mh">0x00002000L</span><span class="p">,</span>
	<span class="n">IPA_FULL_VLAN</span>           <span class="o">=</span> <span class="mh">0x00004000L</span><span class="p">,</span>
	<span class="n">IPA_INBOUND_PASSTHRU</span>    <span class="o">=</span> <span class="mh">0x00008000L</span><span class="p">,</span>
	<span class="n">IPA_SOURCE_MAC</span>          <span class="o">=</span> <span class="mh">0x00010000L</span><span class="p">,</span>
	<span class="n">IPA_OSA_MC_ROUTER</span>       <span class="o">=</span> <span class="mh">0x00020000L</span><span class="p">,</span>
	<span class="n">IPA_QUERY_ARP_ASSIST</span>	<span class="o">=</span> <span class="mh">0x00040000L</span><span class="p">,</span>
	<span class="n">IPA_INBOUND_TSO</span>         <span class="o">=</span> <span class="mh">0x00080000L</span><span class="p">,</span>
	<span class="n">IPA_OUTBOUND_TSO</span>        <span class="o">=</span> <span class="mh">0x00100000L</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* SETIP/DELIP IPA Command: ***************************************************/</span>
<span class="k">enum</span> <span class="n">qeth_ipa_setdelip_flags</span> <span class="p">{</span>
	<span class="n">QETH_IPA_SETDELIP_DEFAULT</span>          <span class="o">=</span> <span class="mh">0x00L</span><span class="p">,</span> <span class="cm">/* default */</span>
	<span class="n">QETH_IPA_SETIP_VIPA_FLAG</span>           <span class="o">=</span> <span class="mh">0x01L</span><span class="p">,</span> <span class="cm">/* no grat. ARP */</span>
	<span class="n">QETH_IPA_SETIP_TAKEOVER_FLAG</span>       <span class="o">=</span> <span class="mh">0x02L</span><span class="p">,</span> <span class="cm">/* nofail on grat. ARP */</span>
	<span class="n">QETH_IPA_DELIP_ADDR_2_B_TAKEN_OVER</span> <span class="o">=</span> <span class="mh">0x20L</span><span class="p">,</span>
	<span class="n">QETH_IPA_DELIP_VIPA_FLAG</span>           <span class="o">=</span> <span class="mh">0x40L</span><span class="p">,</span>
	<span class="n">QETH_IPA_DELIP_ADDR_NEEDS_SETIP</span>    <span class="o">=</span> <span class="mh">0x80L</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* SETADAPTER IPA Command: ****************************************************/</span>
<span class="k">enum</span> <span class="n">qeth_ipa_setadp_cmd</span> <span class="p">{</span>
	<span class="n">IPA_SETADP_QUERY_COMMANDS_SUPPORTED</span>	<span class="o">=</span> <span class="mh">0x00000001L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_ALTER_MAC_ADDRESS</span>		<span class="o">=</span> <span class="mh">0x00000002L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_ADD_DELETE_GROUP_ADDRESS</span>	<span class="o">=</span> <span class="mh">0x00000004L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_ADD_DELETE_FUNCTIONAL_ADDR</span>	<span class="o">=</span> <span class="mh">0x00000008L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_ADDRESSING_MODE</span>		<span class="o">=</span> <span class="mh">0x00000010L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_CONFIG_PARMS</span>		<span class="o">=</span> <span class="mh">0x00000020L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_CONFIG_PARMS_EXTENDED</span>	<span class="o">=</span> <span class="mh">0x00000040L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_BROADCAST_MODE</span>		<span class="o">=</span> <span class="mh">0x00000080L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SEND_OSA_MESSAGE</span>		<span class="o">=</span> <span class="mh">0x00000100L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_SNMP_CONTROL</span>		<span class="o">=</span> <span class="mh">0x00000200L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_QUERY_CARD_INFO</span>		<span class="o">=</span> <span class="mh">0x00000400L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_PROMISC_MODE</span>		<span class="o">=</span> <span class="mh">0x00000800L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_DIAG_ASSIST</span>		<span class="o">=</span> <span class="mh">0x00002000L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_SET_ACCESS_CONTROL</span>		<span class="o">=</span> <span class="mh">0x00010000L</span><span class="p">,</span>
	<span class="n">IPA_SETADP_QUERY_OAT</span>			<span class="o">=</span> <span class="mh">0x00080000L</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="n">qeth_ipa_mac_ops</span> <span class="p">{</span>
	<span class="n">CHANGE_ADDR_READ_MAC</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_REPLACE_MAC</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_ADD_MAC</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_DEL_MAC</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_RESET_MAC</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="n">qeth_ipa_addr_ops</span> <span class="p">{</span>
	<span class="n">CHANGE_ADDR_READ_ADDR</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_ADD_ADDR</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_DEL_ADDR</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">CHANGE_ADDR_FLUSH_ADDR_TABLE</span>	<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="n">qeth_ipa_promisc_modes</span> <span class="p">{</span>
	<span class="n">SET_PROMISC_MODE_OFF</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SET_PROMISC_MODE_ON</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="n">qeth_ipa_isolation_modes</span> <span class="p">{</span>
	<span class="n">ISOLATION_MODE_NONE</span>		<span class="o">=</span> <span class="mh">0x00000000L</span><span class="p">,</span>
	<span class="n">ISOLATION_MODE_FWD</span>		<span class="o">=</span> <span class="mh">0x00000001L</span><span class="p">,</span>
	<span class="n">ISOLATION_MODE_DROP</span>		<span class="o">=</span> <span class="mh">0x00000002L</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">enum</span> <span class="n">qeth_ipa_set_access_mode_rc</span> <span class="p">{</span>
	<span class="n">SET_ACCESS_CTRL_RC_SUCCESS</span>		<span class="o">=</span> <span class="mh">0x0000</span><span class="p">,</span>
	<span class="n">SET_ACCESS_CTRL_RC_NOT_SUPPORTED</span>	<span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">SET_ACCESS_CTRL_RC_ALREADY_NOT_ISOLATED</span>	<span class="o">=</span> <span class="mh">0x0008</span><span class="p">,</span>
	<span class="n">SET_ACCESS_CTRL_RC_ALREADY_ISOLATED</span>	<span class="o">=</span> <span class="mh">0x0010</span><span class="p">,</span>
	<span class="n">SET_ACCESS_CTRL_RC_NONE_SHARED_ADAPTER</span>	<span class="o">=</span> <span class="mh">0x0014</span><span class="p">,</span>
	<span class="n">SET_ACCESS_CTRL_RC_ACTIVE_CHECKSUM_OFF</span>	<span class="o">=</span> <span class="mh">0x0018</span><span class="p">,</span>
<span class="p">};</span>


<span class="cm">/* (SET)DELIP(M) IPA stuff ***************************************************/</span>
<span class="k">struct</span> <span class="n">qeth_ipacmd_setdelip4</span> <span class="p">{</span>
	<span class="n">__u8</span>   <span class="n">ip_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__u8</span>   <span class="n">mask</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__u32</span>  <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_setdelip6</span> <span class="p">{</span>
	<span class="n">__u8</span>   <span class="n">ip_addr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">__u8</span>   <span class="n">mask</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">__u32</span>  <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_setdelipm</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">__u8</span> <span class="n">padding</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__u8</span> <span class="n">ip6</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
	<span class="n">__u8</span> <span class="n">ip4</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_layer2setdelmac</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">mac_length</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_layer2setdelvlan</span> <span class="p">{</span>
	<span class="n">__u16</span> <span class="n">vlan_id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>


<span class="k">struct</span> <span class="n">qeth_ipacmd_setassparms_hdr</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">assist_no</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">command_code</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">return_code</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">number_of_replies</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">seq_no</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_arp_query_data</span> <span class="p">{</span>
	<span class="n">__u16</span> <span class="n">request_bits</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">reply_bits</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">no_entries</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">data</span><span class="p">;</span> <span class="cm">/* only for replies */</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* used as parameter for arp_query reply */</span>
<span class="k">struct</span> <span class="n">qeth_arp_query_info</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">udata_len</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">mask_bits</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">udata_offset</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">no_entries</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">udata</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* SETASSPARMS IPA Command: */</span>
<span class="k">struct</span> <span class="n">qeth_ipacmd_setassparms</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_ipacmd_setassparms_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">__u32</span> <span class="n">flags_32bit</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_arp_cache_entry</span> <span class="n">add_arp_entry</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_arp_query_data</span> <span class="n">query_arp</span><span class="p">;</span>
		<span class="n">__u8</span> <span class="n">ip</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>


<span class="cm">/* SETRTG IPA Command:    ****************************************************/</span>
<span class="k">struct</span> <span class="n">qeth_set_routing</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">type</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* SETADAPTERPARMS IPA Command:    *******************************************/</span>
<span class="k">struct</span> <span class="n">qeth_query_cmds_supp</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">no_lantypes_supp</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">lan_type</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__u32</span> <span class="n">supported_cmds</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_change_addr</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">addr_size</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">no_macs</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">addr</span><span class="p">[</span><span class="n">OSA_ADDR_LEN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>


<span class="k">struct</span> <span class="n">qeth_snmp_cmd</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">token</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">__u32</span> <span class="n">request</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">interface</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">returncode</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">firmwarelevel</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">seqno</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_snmp_ureq_hdr</span> <span class="p">{</span>
	<span class="n">__u32</span>   <span class="n">data_len</span><span class="p">;</span>
	<span class="n">__u32</span>   <span class="n">req_len</span><span class="p">;</span>
	<span class="n">__u32</span>   <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">__u32</span>   <span class="n">reserved2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_snmp_ureq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_snmp_ureq_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_snmp_cmd</span> <span class="n">cmd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* SET_ACCESS_CONTROL: same format for request and reply */</span>
<span class="k">struct</span> <span class="n">qeth_set_access_ctrl</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">subcmd_code</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_query_oat</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">subcmd_code</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">qeth_qoat_priv</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">buffer_len</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">response_len</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_setadpparms_hdr</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">supp_hw_cmds</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">cmdlength</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">reserved2</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">command_code</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">return_code</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">used_total</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">seq_no</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">reserved3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_setadpparms</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_ipacmd_setadpparms_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">qeth_query_cmds_supp</span> <span class="n">query_cmds_supp</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_change_addr</span> <span class="n">change_addr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_snmp_cmd</span> <span class="n">snmp</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_set_access_ctrl</span> <span class="n">set_access_ctrl</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_query_oat</span> <span class="n">query_oat</span><span class="p">;</span>
		<span class="n">__u32</span> <span class="n">mode</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* CREATE_ADDR IPA Command:    ***********************************************/</span>
<span class="k">struct</span> <span class="n">qeth_create_destroy_address</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">unique_id</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* SET DIAGNOSTIC ASSIST IPA Command:	 *************************************/</span>

<span class="k">enum</span> <span class="n">qeth_diags_cmds</span> <span class="p">{</span>
	<span class="n">QETH_DIAGS_CMD_QUERY</span>	<span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_TRAP</span>	<span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_TRACE</span>	<span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_NOLOG</span>	<span class="o">=</span> <span class="mh">0x0008</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_DUMP</span>	<span class="o">=</span> <span class="mh">0x0010</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_diags_trace_types</span> <span class="p">{</span>
	<span class="n">QETH_DIAGS_TYPE_HIPERSOCKET</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_diags_trace_cmds</span> <span class="p">{</span>
	<span class="n">QETH_DIAGS_CMD_TRACE_ENABLE</span>	<span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_TRACE_DISABLE</span>	<span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_TRACE_MODIFY</span>	<span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_TRACE_REPLACE</span>	<span class="o">=</span> <span class="mh">0x0008</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_CMD_TRACE_QUERY</span>	<span class="o">=</span> <span class="mh">0x0010</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_diags_trap_action</span> <span class="p">{</span>
	<span class="n">QETH_DIAGS_TRAP_ARM</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_TRAP_DISARM</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">QETH_DIAGS_TRAP_CAPTURE</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_ipacmd_diagass</span> <span class="p">{</span>
	<span class="n">__u32</span>  <span class="n">host_tod2</span><span class="p">;</span>
	<span class="nl">__u32:</span><span class="mi">32</span><span class="p">;</span>
	<span class="n">__u16</span>  <span class="n">subcmd_len</span><span class="p">;</span>
	<span class="nl">__u16:</span><span class="mi">16</span><span class="p">;</span>
	<span class="n">__u32</span>  <span class="n">subcmd</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">type</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">action</span><span class="p">;</span>
	<span class="n">__u16</span>  <span class="n">options</span><span class="p">;</span>
	<span class="n">__u32</span>  <span class="n">ext</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">cdata</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* Header for each IPA command */</span>
<span class="k">struct</span> <span class="n">qeth_ipacmd_hdr</span> <span class="p">{</span>
	<span class="n">__u8</span>   <span class="n">command</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">initiator</span><span class="p">;</span>
	<span class="n">__u16</span>  <span class="n">seqno</span><span class="p">;</span>
	<span class="n">__u16</span>  <span class="n">return_code</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">adapter_type</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">rel_adapter_no</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">prim_version_no</span><span class="p">;</span>
	<span class="n">__u8</span>   <span class="n">param_count</span><span class="p">;</span>
	<span class="n">__u16</span>  <span class="n">prot_version</span><span class="p">;</span>
	<span class="n">__u32</span>  <span class="n">ipa_supported</span><span class="p">;</span>
	<span class="n">__u32</span>  <span class="n">ipa_enabled</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* The IPA command itself */</span>
<span class="k">struct</span> <span class="n">qeth_ipa_cmd</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_ipacmd_hdr</span> <span class="n">hdr</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_setdelip4</span>		<span class="n">setdelip4</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_setdelip6</span>		<span class="n">setdelip6</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_setdelipm</span>		<span class="n">setdelipm</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_setassparms</span>		<span class="n">setassparms</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_layer2setdelmac</span>	<span class="n">setdelmac</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_layer2setdelvlan</span>	<span class="n">setdelvlan</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_create_destroy_address</span>	<span class="n">create_destroy_addr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_setadpparms</span>		<span class="n">setadapterparms</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_set_routing</span>			<span class="n">setrtg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_ipacmd_diagass</span>		<span class="n">diagass</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/*</span>
<span class="cm"> * special command for ARP processing.</span>
<span class="cm"> * this is not included in setassparms command before, because we get</span>
<span class="cm"> * problem with the size of struct qeth_ipacmd_setassparms otherwise</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">qeth_ipa_arp_return_codes</span> <span class="p">{</span>
	<span class="n">QETH_IPA_ARP_RC_SUCCESS</span>      <span class="o">=</span> <span class="mh">0x0000</span><span class="p">,</span>
	<span class="n">QETH_IPA_ARP_RC_FAILED</span>       <span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">QETH_IPA_ARP_RC_NOTSUPP</span>      <span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">QETH_IPA_ARP_RC_OUT_OF_RANGE</span> <span class="o">=</span> <span class="mh">0x0003</span><span class="p">,</span>
	<span class="n">QETH_IPA_ARP_RC_Q_NOTSUPP</span>    <span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">QETH_IPA_ARP_RC_Q_NO_DATA</span>    <span class="o">=</span> <span class="mh">0x0008</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">qeth_get_ipa_msg</span><span class="p">(</span><span class="k">enum</span> <span class="n">qeth_ipa_return_codes</span> <span class="n">rc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">qeth_get_ipa_cmd_name</span><span class="p">(</span><span class="k">enum</span> <span class="n">qeth_ipa_cmds</span> <span class="n">cmd</span><span class="p">);</span>

<span class="cp">#define QETH_SETASS_BASE_LEN (sizeof(struct qeth_ipacmd_hdr) + \</span>
<span class="cp">			       sizeof(struct qeth_ipacmd_setassparms_hdr))</span>
<span class="cp">#define QETH_IPA_ARP_DATA_POS(buffer) (buffer + IPA_PDU_HEADER_SIZE + \</span>
<span class="cp">				       QETH_SETASS_BASE_LEN)</span>
<span class="cp">#define QETH_SETADP_BASE_LEN (sizeof(struct qeth_ipacmd_hdr) + \</span>
<span class="cp">			      sizeof(struct qeth_ipacmd_setadpparms_hdr))</span>
<span class="cp">#define QETH_SNMP_SETADP_CMDLENGTH 16</span>

<span class="cp">#define QETH_ARP_DATA_SIZE 3968</span>
<span class="cp">#define QETH_ARP_CMD_LEN (QETH_ARP_DATA_SIZE + 8)</span>
<span class="cm">/* Helper functions */</span>
<span class="cp">#define IS_IPA_REPLY(cmd) ((cmd-&gt;hdr.initiator == IPA_CMD_INITIATOR_HOST) || \</span>
<span class="cp">			   (cmd-&gt;hdr.initiator == IPA_CMD_INITIATOR_OSA_REPLY))</span>

<span class="cm">/*****************************************************************************/</span>
<span class="cm">/* END OF   IP Assist related definitions                                    */</span>
<span class="cm">/*****************************************************************************/</span>


<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">WRITE_CCW</span><span class="p">[];</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">READ_CCW</span><span class="p">[];</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">CM_ENABLE</span><span class="p">[];</span>
<span class="cp">#define CM_ENABLE_SIZE 0x63</span>
<span class="cp">#define QETH_CM_ENABLE_ISSUER_RM_TOKEN(buffer) (buffer + 0x2c)</span>
<span class="cp">#define QETH_CM_ENABLE_FILTER_TOKEN(buffer) (buffer + 0x53)</span>
<span class="cp">#define QETH_CM_ENABLE_USER_DATA(buffer) (buffer + 0x5b)</span>

<span class="cp">#define QETH_CM_ENABLE_RESP_FILTER_TOKEN(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x13)</span>


<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">CM_SETUP</span><span class="p">[];</span>
<span class="cp">#define CM_SETUP_SIZE 0x64</span>
<span class="cp">#define QETH_CM_SETUP_DEST_ADDR(buffer) (buffer + 0x2c)</span>
<span class="cp">#define QETH_CM_SETUP_CONNECTION_TOKEN(buffer) (buffer + 0x51)</span>
<span class="cp">#define QETH_CM_SETUP_FILTER_TOKEN(buffer) (buffer + 0x5a)</span>

<span class="cp">#define QETH_CM_SETUP_RESP_DEST_ADDR(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x1a)</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ULP_ENABLE</span><span class="p">[];</span>
<span class="cp">#define ULP_ENABLE_SIZE 0x6b</span>
<span class="cp">#define QETH_ULP_ENABLE_LINKNUM(buffer) (buffer + 0x61)</span>
<span class="cp">#define QETH_ULP_ENABLE_DEST_ADDR(buffer) (buffer + 0x2c)</span>
<span class="cp">#define QETH_ULP_ENABLE_FILTER_TOKEN(buffer) (buffer + 0x53)</span>
<span class="cp">#define QETH_ULP_ENABLE_PORTNAME_AND_LL(buffer) (buffer + 0x62)</span>
<span class="cp">#define QETH_ULP_ENABLE_RESP_FILTER_TOKEN(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x13)</span>
<span class="cp">#define QETH_ULP_ENABLE_RESP_MAX_MTU(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x1f)</span>
<span class="cp">#define QETH_ULP_ENABLE_RESP_DIFINFO_LEN(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x17)</span>
<span class="cp">#define QETH_ULP_ENABLE_RESP_LINK_TYPE(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x2b)</span>
<span class="cm">/* Layer 2 definitions */</span>
<span class="cp">#define QETH_PROT_LAYER2 0x08</span>
<span class="cp">#define QETH_PROT_TCPIP  0x03</span>
<span class="cp">#define QETH_PROT_OSN2   0x0a</span>
<span class="cp">#define QETH_ULP_ENABLE_PROT_TYPE(buffer) (buffer + 0x50)</span>
<span class="cp">#define QETH_IPA_CMD_PROT_TYPE(buffer) (buffer + 0x19)</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ULP_SETUP</span><span class="p">[];</span>
<span class="cp">#define ULP_SETUP_SIZE 0x6c</span>
<span class="cp">#define QETH_ULP_SETUP_DEST_ADDR(buffer) (buffer + 0x2c)</span>
<span class="cp">#define QETH_ULP_SETUP_CONNECTION_TOKEN(buffer) (buffer + 0x51)</span>
<span class="cp">#define QETH_ULP_SETUP_FILTER_TOKEN(buffer) (buffer + 0x5a)</span>
<span class="cp">#define QETH_ULP_SETUP_CUA(buffer) (buffer + 0x68)</span>
<span class="cp">#define QETH_ULP_SETUP_REAL_DEVADDR(buffer) (buffer + 0x6a)</span>

<span class="cp">#define QETH_ULP_SETUP_RESP_CONNECTION_TOKEN(buffer) \</span>
<span class="cp">		(PDU_ENCAPSULATION(buffer) + 0x1a)</span>


<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">DM_ACT</span><span class="p">[];</span>
<span class="cp">#define DM_ACT_SIZE 0x55</span>
<span class="cp">#define QETH_DM_ACT_DEST_ADDR(buffer) (buffer + 0x2c)</span>
<span class="cp">#define QETH_DM_ACT_CONNECTION_TOKEN(buffer) (buffer + 0x51)</span>



<span class="cp">#define QETH_TRANSPORT_HEADER_SEQ_NO(buffer) (buffer + 4)</span>
<span class="cp">#define QETH_PDU_HEADER_SEQ_NO(buffer) (buffer + 0x1c)</span>
<span class="cp">#define QETH_PDU_HEADER_ACK_SEQ_NO(buffer) (buffer + 0x20)</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IDX_ACTIVATE_READ</span><span class="p">[];</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">IDX_ACTIVATE_WRITE</span><span class="p">[];</span>

<span class="cp">#define IDX_ACTIVATE_SIZE	0x22</span>
<span class="cp">#define QETH_IDX_ACT_PNO(buffer) (buffer+0x0b)</span>
<span class="cp">#define QETH_IDX_ACT_ISSUER_RM_TOKEN(buffer) (buffer + 0x0c)</span>
<span class="cp">#define QETH_IDX_NO_PORTNAME_REQUIRED(buffer) ((buffer)[0x0b] &amp; 0x80)</span>
<span class="cp">#define QETH_IDX_ACT_FUNC_LEVEL(buffer) (buffer + 0x10)</span>
<span class="cp">#define QETH_IDX_ACT_DATASET_NAME(buffer) (buffer + 0x16)</span>
<span class="cp">#define QETH_IDX_ACT_QDIO_DEV_CUA(buffer) (buffer + 0x1e)</span>
<span class="cp">#define QETH_IDX_ACT_QDIO_DEV_REALADDR(buffer) (buffer + 0x20)</span>
<span class="cp">#define QETH_IS_IDX_ACT_POS_REPLY(buffer) (((buffer)[0x08] &amp; 3) == 2)</span>
<span class="cp">#define QETH_IDX_REPLY_LEVEL(buffer) (buffer + 0x12)</span>
<span class="cp">#define QETH_IDX_ACT_CAUSE_CODE(buffer) (buffer)[0x09]</span>
<span class="cp">#define QETH_IDX_ACT_ERR_EXCL		0x19</span>
<span class="cp">#define QETH_IDX_ACT_ERR_AUTH		0x1E</span>
<span class="cp">#define QETH_IDX_ACT_ERR_AUTH_USER	0x20</span>

<span class="cp">#define PDU_ENCAPSULATION(buffer) \</span>
<span class="cp">	(buffer + *(buffer + (*(buffer + 0x0b)) + \</span>
<span class="cp">	 *(buffer + *(buffer + 0x0b) + 0x11) + 0x07))</span>

<span class="cp">#define IS_IPA(buffer) \</span>
<span class="cp">	((buffer) &amp;&amp; \</span>
<span class="cp">	 (*(buffer + ((*(buffer + 0x0b)) + 4)) == 0xc1))</span>

<span class="cp">#define ADDR_FRAME_TYPE_DIX 1</span>
<span class="cp">#define ADDR_FRAME_TYPE_802_3 2</span>
<span class="cp">#define ADDR_FRAME_TYPE_TR_WITHOUT_SR 0x10</span>
<span class="cp">#define ADDR_FRAME_TYPE_TR_WITH_SR 0x20</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
