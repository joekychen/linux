<!DOCTYPE html>
<html><head><title>joekychen/linux » drivers › s390 › net › qeth_core.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>qeth_core.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  drivers/s390/net/qeth_core.h</span>
<span class="cm"> *</span>
<span class="cm"> *    Copyright IBM Corp. 2007</span>
<span class="cm"> *    Author(s): Utz Bacher &lt;utz.bacher@de.ibm.com&gt;,</span>
<span class="cm"> *		 Frank Pavlic &lt;fpavlic@de.ibm.com&gt;,</span>
<span class="cm"> *		 Thomas Spatzier &lt;tspat@de.ibm.com&gt;,</span>
<span class="cm"> *		 Frank Blaschka &lt;frank.blaschka@de.ibm.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __QETH_CORE_H__</span>
<span class="cp">#define __QETH_CORE_H__</span>

<span class="cp">#include &lt;linux/if.h&gt;</span>
<span class="cp">#include &lt;linux/if_arp.h&gt;</span>
<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &lt;linux/if_vlan.h&gt;</span>
<span class="cp">#include &lt;linux/ctype.h&gt;</span>
<span class="cp">#include &lt;linux/in6.h&gt;</span>
<span class="cp">#include &lt;linux/bitops.h&gt;</span>
<span class="cp">#include &lt;linux/seq_file.h&gt;</span>
<span class="cp">#include &lt;linux/ethtool.h&gt;</span>

<span class="cp">#include &lt;net/ipv6.h&gt;</span>
<span class="cp">#include &lt;net/if_inet6.h&gt;</span>
<span class="cp">#include &lt;net/addrconf.h&gt;</span>

<span class="cp">#include &lt;asm/debug.h&gt;</span>
<span class="cp">#include &lt;asm/qdio.h&gt;</span>
<span class="cp">#include &lt;asm/ccwdev.h&gt;</span>
<span class="cp">#include &lt;asm/ccwgroup.h&gt;</span>
<span class="cp">#include &lt;asm/sysinfo.h&gt;</span>

<span class="cp">#include &quot;qeth_core_mpc.h&quot;</span>

<span class="cm">/**</span>
<span class="cm"> * Debug Facility stuff</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">qeth_dbf_names</span> <span class="p">{</span>
	<span class="n">QETH_DBF_SETUP</span><span class="p">,</span>
	<span class="n">QETH_DBF_MSG</span><span class="p">,</span>
	<span class="n">QETH_DBF_CTRL</span><span class="p">,</span>
	<span class="n">QETH_DBF_INFOS</span>	<span class="cm">/* must be last element */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_dbf_info</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">DEBUG_MAX_NAME_LEN</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">pages</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">areas</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">len</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">level</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">debug_view</span> <span class="o">*</span><span class="n">view</span><span class="p">;</span>
	<span class="n">debug_info_t</span> <span class="o">*</span><span class="n">id</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define QETH_DBF_CTRL_LEN 256</span>

<span class="cp">#define QETH_DBF_TEXT(name, level, text) \</span>
<span class="cp">	debug_text_event(qeth_dbf[QETH_DBF_##name].id, level, text)</span>

<span class="cp">#define QETH_DBF_HEX(name, level, addr, len) \</span>
<span class="cp">	debug_event(qeth_dbf[QETH_DBF_##name].id, level, (void *)(addr), len)</span>

<span class="cp">#define QETH_DBF_MESSAGE(level, text...) \</span>
<span class="cp">	debug_sprintf_event(qeth_dbf[QETH_DBF_MSG].id, level, text)</span>

<span class="cp">#define QETH_DBF_TEXT_(name, level, text...) \</span>
<span class="cp">	qeth_dbf_longtext(qeth_dbf[QETH_DBF_##name].id, level, text)</span>

<span class="cp">#define QETH_CARD_TEXT(card, level, text) \</span>
<span class="cp">	debug_text_event(card-&gt;debug, level, text)</span>

<span class="cp">#define QETH_CARD_HEX(card, level, addr, len) \</span>
<span class="cp">	debug_event(card-&gt;debug, level, (void *)(addr), len)</span>

<span class="cp">#define QETH_CARD_MESSAGE(card, text...) \</span>
<span class="cp">	debug_sprintf_event(card-&gt;debug, level, text)</span>

<span class="cp">#define QETH_CARD_TEXT_(card, level, text...) \</span>
<span class="cp">	qeth_dbf_longtext(card-&gt;debug, level, text)</span>

<span class="cp">#define SENSE_COMMAND_REJECT_BYTE 0</span>
<span class="cp">#define SENSE_COMMAND_REJECT_FLAG 0x80</span>
<span class="cp">#define SENSE_RESETTING_EVENT_BYTE 1</span>
<span class="cp">#define SENSE_RESETTING_EVENT_FLAG 0x80</span>

<span class="cm">/*</span>
<span class="cm"> * Common IO related definitions</span>
<span class="cm"> */</span>
<span class="cp">#define CARD_RDEV(card) card-&gt;read.ccwdev</span>
<span class="cp">#define CARD_WDEV(card) card-&gt;write.ccwdev</span>
<span class="cp">#define CARD_DDEV(card) card-&gt;data.ccwdev</span>
<span class="cp">#define CARD_BUS_ID(card) dev_name(&amp;card-&gt;gdev-&gt;dev)</span>
<span class="cp">#define CARD_RDEV_ID(card) dev_name(&amp;card-&gt;read.ccwdev-&gt;dev)</span>
<span class="cp">#define CARD_WDEV_ID(card) dev_name(&amp;card-&gt;write.ccwdev-&gt;dev)</span>
<span class="cp">#define CARD_DDEV_ID(card) dev_name(&amp;card-&gt;data.ccwdev-&gt;dev)</span>
<span class="cp">#define CHANNEL_ID(channel) dev_name(&amp;channel-&gt;ccwdev-&gt;dev)</span>

<span class="cm">/**</span>
<span class="cm"> * card stuff</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">qeth_perf_stats</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bufs_rec</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bufs_sent</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">skbs_sent_pack</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bufs_sent_pack</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sc_dp_p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sc_p_dp</span><span class="p">;</span>
	<span class="cm">/* qdio_cq_handler: number of times called, time spent in */</span>
	<span class="n">__u64</span> <span class="n">cq_start_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cq_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cq_time</span><span class="p">;</span>
	<span class="cm">/* qdio_input_handler: number of times called, time spent in */</span>
	<span class="n">__u64</span> <span class="n">inbound_start_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inbound_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inbound_time</span><span class="p">;</span>
	<span class="cm">/* qeth_send_packet: number of times called, time spent in */</span>
	<span class="n">__u64</span> <span class="n">outbound_start_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">outbound_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">outbound_time</span><span class="p">;</span>
	<span class="cm">/* qdio_output_handler: number of times called, time spent in */</span>
	<span class="n">__u64</span> <span class="n">outbound_handler_start_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">outbound_handler_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">outbound_handler_time</span><span class="p">;</span>
	<span class="cm">/* number of calls to and time spent in do_QDIO for inbound queue */</span>
	<span class="n">__u64</span> <span class="n">inbound_do_qdio_start_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inbound_do_qdio_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inbound_do_qdio_time</span><span class="p">;</span>
	<span class="cm">/* number of calls to and time spent in do_QDIO for outbound queues */</span>
	<span class="n">__u64</span> <span class="n">outbound_do_qdio_start_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">outbound_do_qdio_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">outbound_do_qdio_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">large_send_bytes</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">large_send_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sg_skbs_sent</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sg_frags_sent</span><span class="p">;</span>
	<span class="cm">/* initial values when measuring starts */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">initial_rx_packets</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">initial_tx_packets</span><span class="p">;</span>
	<span class="cm">/* inbound scatter gather data */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sg_skbs_rx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sg_frags_rx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sg_alloc_page_rx</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_csum</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tx_lin</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Routing stuff */</span>
<span class="k">struct</span> <span class="n">qeth_routing_info</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">qeth_routing_types</span> <span class="n">type</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* IPA stuff */</span>
<span class="k">struct</span> <span class="n">qeth_ipa_info</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">supported_funcs</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">enabled_funcs</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">qeth_is_ipa_supported</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_ipa_info</span> <span class="o">*</span><span class="n">ipa</span><span class="p">,</span>
		<span class="k">enum</span> <span class="n">qeth_ipa_funcs</span> <span class="n">func</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">ipa</span><span class="o">-&gt;</span><span class="n">supported_funcs</span> <span class="o">&amp;</span> <span class="n">func</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">qeth_is_ipa_enabled</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_ipa_info</span> <span class="o">*</span><span class="n">ipa</span><span class="p">,</span>
		<span class="k">enum</span> <span class="n">qeth_ipa_funcs</span> <span class="n">func</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">ipa</span><span class="o">-&gt;</span><span class="n">supported_funcs</span> <span class="o">&amp;</span> <span class="n">ipa</span><span class="o">-&gt;</span><span class="n">enabled_funcs</span> <span class="o">&amp;</span> <span class="n">func</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#define qeth_adp_supported(c, f) \</span>
<span class="cp">	qeth_is_ipa_supported(&amp;c-&gt;options.adp, f)</span>
<span class="cp">#define qeth_adp_enabled(c, f) \</span>
<span class="cp">	qeth_is_ipa_enabled(&amp;c-&gt;options.adp, f)</span>
<span class="cp">#define qeth_is_supported(c, f) \</span>
<span class="cp">	qeth_is_ipa_supported(&amp;c-&gt;options.ipa4, f)</span>
<span class="cp">#define qeth_is_enabled(c, f) \</span>
<span class="cp">	qeth_is_ipa_enabled(&amp;c-&gt;options.ipa4, f)</span>
<span class="cp">#define qeth_is_supported6(c, f) \</span>
<span class="cp">	qeth_is_ipa_supported(&amp;c-&gt;options.ipa6, f)</span>
<span class="cp">#define qeth_is_enabled6(c, f) \</span>
<span class="cp">	qeth_is_ipa_enabled(&amp;c-&gt;options.ipa6, f)</span>
<span class="cp">#define qeth_is_ipafunc_supported(c, prot, f) \</span>
<span class="cp">	 ((prot == QETH_PROT_IPV6) ? \</span>
<span class="cp">		qeth_is_supported6(c, f) : qeth_is_supported(c, f))</span>
<span class="cp">#define qeth_is_ipafunc_enabled(c, prot, f) \</span>
<span class="cp">	 ((prot == QETH_PROT_IPV6) ? \</span>
<span class="cp">		qeth_is_enabled6(c, f) : qeth_is_enabled(c, f))</span>

<span class="cp">#define QETH_IDX_FUNC_LEVEL_OSD		 0x0101</span>
<span class="cp">#define QETH_IDX_FUNC_LEVEL_IQD		 0x4108</span>

<span class="cp">#define QETH_MODELLIST_ARRAY \</span>
<span class="cp">	{{0x1731, 0x01, 0x1732, QETH_CARD_TYPE_OSD, QETH_MAX_QUEUES, 0}, \</span>
<span class="cp">	 {0x1731, 0x05, 0x1732, QETH_CARD_TYPE_IQD, QETH_MAX_QUEUES, 0x103}, \</span>
<span class="cp">	 {0x1731, 0x06, 0x1732, QETH_CARD_TYPE_OSN, QETH_MAX_QUEUES, 0}, \</span>
<span class="cp">	 {0x1731, 0x02, 0x1732, QETH_CARD_TYPE_OSM, QETH_MAX_QUEUES, 0}, \</span>
<span class="cp">	 {0x1731, 0x02, 0x1732, QETH_CARD_TYPE_OSX, QETH_MAX_QUEUES, 0}, \</span>
<span class="cp">	 {0, 0, 0, 0, 0, 0} }</span>
<span class="cp">#define QETH_CU_TYPE_IND	0</span>
<span class="cp">#define QETH_CU_MODEL_IND	1</span>
<span class="cp">#define QETH_DEV_TYPE_IND	2</span>
<span class="cp">#define QETH_DEV_MODEL_IND	3</span>
<span class="cp">#define QETH_QUEUE_NO_IND	4</span>
<span class="cp">#define QETH_MULTICAST_IND	5</span>

<span class="cp">#define QETH_REAL_CARD		1</span>
<span class="cp">#define QETH_VLAN_CARD		2</span>
<span class="cp">#define QETH_BUFSIZE		4096</span>

<span class="cm">/**</span>
<span class="cm"> * some more defs</span>
<span class="cm"> */</span>
<span class="cp">#define QETH_TX_TIMEOUT		100 * HZ</span>
<span class="cp">#define QETH_RCD_TIMEOUT	60 * HZ</span>
<span class="cp">#define QETH_RECLAIM_WORK_TIME	HZ</span>
<span class="cp">#define QETH_HEADER_SIZE	32</span>
<span class="cp">#define QETH_MAX_PORTNO		15</span>

<span class="cm">/*IPv6 address autoconfiguration stuff*/</span>
<span class="cp">#define UNIQUE_ID_IF_CREATE_ADDR_FAILED 0xfffe</span>
<span class="cp">#define UNIQUE_ID_NOT_BY_CARD		0x10000</span>

<span class="cm">/*****************************************************************************/</span>
<span class="cm">/* QDIO queue and buffer handling                                            */</span>
<span class="cm">/*****************************************************************************/</span>
<span class="cp">#define QETH_MAX_QUEUES 4</span>
<span class="cp">#define QETH_IN_BUF_SIZE_DEFAULT 65536</span>
<span class="cp">#define QETH_IN_BUF_COUNT_DEFAULT 64</span>
<span class="cp">#define QETH_IN_BUF_COUNT_HSDEFAULT 128</span>
<span class="cp">#define QETH_IN_BUF_COUNT_MIN 8</span>
<span class="cp">#define QETH_IN_BUF_COUNT_MAX 128</span>
<span class="cp">#define QETH_MAX_BUFFER_ELEMENTS(card) ((card)-&gt;qdio.in_buf_size &gt;&gt; 12)</span>
<span class="cp">#define QETH_IN_BUF_REQUEUE_THRESHOLD(card) \</span>
<span class="cp">		 ((card)-&gt;qdio.in_buf_pool.buf_count / 2)</span>

<span class="cm">/* buffers we have to be behind before we get a PCI */</span>
<span class="cp">#define QETH_PCI_THRESHOLD_A(card) ((card)-&gt;qdio.in_buf_pool.buf_count+1)</span>
<span class="cm">/*enqueued free buffers left before we get a PCI*/</span>
<span class="cp">#define QETH_PCI_THRESHOLD_B(card) 0</span>
<span class="cm">/*not used unless the microcode gets patched*/</span>
<span class="cp">#define QETH_PCI_TIMER_VALUE(card) 3</span>

<span class="cm">/* priority queing */</span>
<span class="cp">#define QETH_PRIOQ_DEFAULT QETH_NO_PRIO_QUEUEING</span>
<span class="cp">#define QETH_DEFAULT_QUEUE    2</span>
<span class="cp">#define QETH_NO_PRIO_QUEUEING 0</span>
<span class="cp">#define QETH_PRIO_Q_ING_PREC  1</span>
<span class="cp">#define QETH_PRIO_Q_ING_TOS   2</span>
<span class="cp">#define IP_TOS_LOWDELAY 0x10</span>
<span class="cp">#define IP_TOS_HIGHTHROUGHPUT 0x08</span>
<span class="cp">#define IP_TOS_HIGHRELIABILITY 0x04</span>
<span class="cp">#define IP_TOS_NOTIMPORTANT 0x02</span>

<span class="cm">/* Packing */</span>
<span class="cp">#define QETH_LOW_WATERMARK_PACK  2</span>
<span class="cp">#define QETH_HIGH_WATERMARK_PACK 5</span>
<span class="cp">#define QETH_WATERMARK_PACK_FUZZ 1</span>

<span class="cp">#define QETH_IP_HEADER_SIZE 40</span>

<span class="cm">/* large receive scatter gather copy break */</span>
<span class="cp">#define QETH_RX_SG_CB (PAGE_SIZE &gt;&gt; 1)</span>
<span class="cp">#define QETH_RX_PULL_LEN 256</span>

<span class="k">struct</span> <span class="n">qeth_hdr_layer3</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">id</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">inbound_checksum</span><span class="p">;</span> <span class="cm">/*TSO:__u16 seqno */</span>
	<span class="n">__u32</span> <span class="n">token</span><span class="p">;</span>		<span class="cm">/*TSO: __u32 reserved */</span>
	<span class="n">__u16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">vlan_prio</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">ext_flags</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">vlan_id</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">frame_offset</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">dest_addr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_hdr_layer2</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">flags</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__u8</span> <span class="n">port_no</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">hdr_length</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">pkt_length</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">seq_no</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">vlan_id</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_hdr_osn</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">seq_no</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">reserved2</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">control_flags</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">pdu_length</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">18</span><span class="p">];</span>
	<span class="n">__u32</span> <span class="n">ccid</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_hdr</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">qeth_hdr_layer2</span> <span class="n">l2</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_hdr_layer3</span> <span class="n">l3</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">qeth_hdr_osn</span>    <span class="n">osn</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">hdr</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/*TCP Segmentation Offload header*/</span>
<span class="k">struct</span> <span class="n">qeth_hdr_ext_tso</span> <span class="p">{</span>
	<span class="n">__u16</span> <span class="n">hdr_tot_len</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">imb_hdr_no</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">reserved</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">hdr_type</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">hdr_version</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">hdr_len</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">payload_len</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">mss</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">dg_hdr_len</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">padding</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qeth_hdr_tso</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_hdr</span> <span class="n">hdr</span><span class="p">;</span>	<span class="cm">/*hdr-&gt;hdr.l3.xxx*/</span>
	<span class="k">struct</span> <span class="n">qeth_hdr_ext_tso</span> <span class="n">ext</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>


<span class="cm">/* flags for qeth_hdr.flags */</span>
<span class="cp">#define QETH_HDR_PASSTHRU 0x10</span>
<span class="cp">#define QETH_HDR_IPV6     0x80</span>
<span class="cp">#define QETH_HDR_CAST_MASK 0x07</span>
<span class="k">enum</span> <span class="n">qeth_cast_flags</span> <span class="p">{</span>
	<span class="n">QETH_CAST_UNICAST</span>   <span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span>
	<span class="n">QETH_CAST_MULTICAST</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">QETH_CAST_BROADCAST</span> <span class="o">=</span> <span class="mh">0x05</span><span class="p">,</span>
	<span class="n">QETH_CAST_ANYCAST</span>   <span class="o">=</span> <span class="mh">0x07</span><span class="p">,</span>
	<span class="n">QETH_CAST_NOCAST</span>    <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_layer2_frame_flags</span> <span class="p">{</span>
	<span class="n">QETH_LAYER2_FLAG_MULTICAST</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">QETH_LAYER2_FLAG_BROADCAST</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">QETH_LAYER2_FLAG_UNICAST</span>   <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">QETH_LAYER2_FLAG_VLAN</span>      <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_header_ids</span> <span class="p">{</span>
	<span class="n">QETH_HEADER_TYPE_LAYER3</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">QETH_HEADER_TYPE_LAYER2</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">QETH_HEADER_TYPE_TSO</span>	<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">QETH_HEADER_TYPE_OSN</span>    <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
<span class="p">};</span>
<span class="cm">/* flags for qeth_hdr.ext_flags */</span>
<span class="cp">#define QETH_HDR_EXT_VLAN_FRAME       0x01</span>
<span class="cp">#define QETH_HDR_EXT_TOKEN_ID         0x02</span>
<span class="cp">#define QETH_HDR_EXT_INCLUDE_VLAN_TAG 0x04</span>
<span class="cp">#define QETH_HDR_EXT_SRC_MAC_ADDR     0x08</span>
<span class="cp">#define QETH_HDR_EXT_CSUM_HDR_REQ     0x10</span>
<span class="cp">#define QETH_HDR_EXT_CSUM_TRANSP_REQ  0x20</span>
<span class="cp">#define QETH_HDR_EXT_UDP	      0x40 </span><span class="cm">/*bit off for TCP*/</span><span class="cp"></span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">qeth_is_last_sbale</span><span class="p">(</span><span class="k">struct</span> <span class="n">qdio_buffer_element</span> <span class="o">*</span><span class="n">sbale</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">sbale</span><span class="o">-&gt;</span><span class="n">eflags</span> <span class="o">&amp;</span> <span class="n">SBAL_EFLAGS_LAST_ENTRY</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">enum</span> <span class="n">qeth_qdio_buffer_states</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * inbound: read out by driver; owned by hardware in order to be filled</span>
<span class="cm">	 * outbound: owned by driver in order to be filled</span>
<span class="cm">	 */</span>
	<span class="n">QETH_QDIO_BUF_EMPTY</span><span class="p">,</span>
	<span class="cm">/*</span>
<span class="cm">	 * inbound: filled by hardware; owned by driver in order to be read out</span>
<span class="cm">	 * outbound: filled by driver; owned by hardware in order to be sent</span>
<span class="cm">	 */</span>
	<span class="n">QETH_QDIO_BUF_PRIMED</span><span class="p">,</span>
	<span class="cm">/*</span>
<span class="cm">	 * inbound: not applicable</span>
<span class="cm">	 * outbound: identified to be pending in TPQ</span>
<span class="cm">	 */</span>
	<span class="n">QETH_QDIO_BUF_PENDING</span><span class="p">,</span>
	<span class="cm">/*</span>
<span class="cm">	 * inbound: not applicable</span>
<span class="cm">	 * outbound: found in completion queue</span>
<span class="cm">	 */</span>
	<span class="n">QETH_QDIO_BUF_IN_CQ</span><span class="p">,</span>
	<span class="cm">/*</span>
<span class="cm">	 * inbound: not applicable</span>
<span class="cm">	 * outbound: handled via transfer pending / completion queue</span>
<span class="cm">	 */</span>
	<span class="n">QETH_QDIO_BUF_HANDLED_DELAYED</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_qdio_info_states</span> <span class="p">{</span>
	<span class="n">QETH_QDIO_UNINITIALIZED</span><span class="p">,</span>
	<span class="n">QETH_QDIO_ALLOCATED</span><span class="p">,</span>
	<span class="n">QETH_QDIO_ESTABLISHED</span><span class="p">,</span>
	<span class="n">QETH_QDIO_CLEANING</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_buffer_pool_entry</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">init_list</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">elements</span><span class="p">[</span><span class="n">QDIO_MAX_ELEMENTS_PER_BUFFER</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_qdio_buffer_pool</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">entry_list</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">buf_count</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_qdio_buffer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qdio_buffer</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
	<span class="cm">/* the buffer pool entry currently associated to this buffer */</span>
	<span class="k">struct</span> <span class="n">qeth_buffer_pool_entry</span> <span class="o">*</span><span class="n">pool_entry</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">rx_skb</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_qdio_q</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qdio_buffer</span> <span class="n">qdio_bufs</span><span class="p">[</span><span class="n">QDIO_MAX_BUFFERS_PER_Q</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_buffer</span> <span class="n">bufs</span><span class="p">[</span><span class="n">QDIO_MAX_BUFFERS_PER_Q</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">next_buf_to_init</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">256</span><span class="p">)));</span>

<span class="k">struct</span> <span class="n">qeth_qdio_out_buffer</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qdio_buffer</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">next_element_to_fill</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span> <span class="n">skb_list</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_header</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">qaob</span> <span class="o">*</span><span class="n">aob</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_out_q</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_out_buffer</span> <span class="o">*</span><span class="n">next_pending</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_card</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">qeth_out_q_states</span> <span class="p">{</span>
       <span class="n">QETH_OUT_Q_UNLOCKED</span><span class="p">,</span>
       <span class="n">QETH_OUT_Q_LOCKED</span><span class="p">,</span>
       <span class="n">QETH_OUT_Q_LOCKED_FLUSH</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_qdio_out_q</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qdio_buffer</span> <span class="n">qdio_bufs</span><span class="p">[</span><span class="n">QDIO_MAX_BUFFERS_PER_Q</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_out_buffer</span> <span class="o">*</span><span class="n">bufs</span><span class="p">[</span><span class="n">QDIO_MAX_BUFFERS_PER_Q</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">qdio_outbuf_state</span> <span class="o">*</span><span class="n">bufstates</span><span class="p">;</span> <span class="cm">/* convenience pointer */</span>
	<span class="kt">int</span> <span class="n">queue_no</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="n">card</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">do_pack</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * index of buffer to be filled by driver; state EMPTY or PACKING</span>
<span class="cm">	 */</span>
	<span class="kt">int</span> <span class="n">next_buf_to_fill</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * number of buffers that are currently filled (PRIMED)</span>
<span class="cm">	 * -&gt; these buffers are hardware-owned</span>
<span class="cm">	 */</span>
	<span class="n">atomic_t</span> <span class="n">used_buffers</span><span class="p">;</span>
	<span class="cm">/* indicates whether PCI flag must be set (or if one is outstanding) */</span>
	<span class="n">atomic_t</span> <span class="n">set_pci_flags_count</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">256</span><span class="p">)));</span>

<span class="k">struct</span> <span class="n">qeth_qdio_info</span> <span class="p">{</span>
	<span class="n">atomic_t</span> <span class="n">state</span><span class="p">;</span>
	<span class="cm">/* input */</span>
	<span class="kt">int</span> <span class="n">no_in_queues</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_q</span> <span class="o">*</span><span class="n">in_q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_q</span> <span class="o">*</span><span class="n">c_q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_buffer_pool</span> <span class="n">in_buf_pool</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_buffer_pool</span> <span class="n">init_pool</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">in_buf_size</span><span class="p">;</span>

	<span class="cm">/* output */</span>
	<span class="kt">int</span> <span class="n">no_out_queues</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_out_q</span> <span class="o">**</span><span class="n">out_qs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qdio_outbuf_state</span> <span class="o">*</span><span class="n">out_bufstates</span><span class="p">;</span>

	<span class="cm">/* priority queueing */</span>
	<span class="kt">int</span> <span class="n">do_prio_queueing</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">default_out_queue</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_send_errors</span> <span class="p">{</span>
	<span class="n">QETH_SEND_ERROR_NONE</span><span class="p">,</span>
	<span class="n">QETH_SEND_ERROR_LINK_FAILURE</span><span class="p">,</span>
	<span class="n">QETH_SEND_ERROR_RETRY</span><span class="p">,</span>
	<span class="n">QETH_SEND_ERROR_KICK_IT</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define QETH_ETH_MAC_V4      0x0100 </span><span class="cm">/* like v4 */</span><span class="cp"></span>
<span class="cp">#define QETH_ETH_MAC_V6      0x3333 </span><span class="cm">/* like v6 */</span><span class="cp"></span>
<span class="cm">/* tr mc mac is longer, but that will be enough to detect mc frames */</span>
<span class="cp">#define QETH_TR_MAC_NC       0xc000 </span><span class="cm">/* non-canonical */</span><span class="cp"></span>
<span class="cp">#define QETH_TR_MAC_C        0x0300 </span><span class="cm">/* canonical */</span><span class="cp"></span>

<span class="cp">#define DEFAULT_ADD_HHLEN 0</span>
<span class="cp">#define MAX_ADD_HHLEN 1024</span>

<span class="cm">/**</span>
<span class="cm"> * buffer stuff for read channel</span>
<span class="cm"> */</span>
<span class="cp">#define QETH_CMD_BUFFER_NO	8</span>

<span class="cm">/**</span>
<span class="cm"> *  channel state machine</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">qeth_channel_states</span> <span class="p">{</span>
	<span class="n">CH_STATE_UP</span><span class="p">,</span>
	<span class="n">CH_STATE_DOWN</span><span class="p">,</span>
	<span class="n">CH_STATE_ACTIVATING</span><span class="p">,</span>
	<span class="n">CH_STATE_HALTED</span><span class="p">,</span>
	<span class="n">CH_STATE_STOPPED</span><span class="p">,</span>
	<span class="n">CH_STATE_RCD</span><span class="p">,</span>
	<span class="n">CH_STATE_RCD_DONE</span><span class="p">,</span>
<span class="p">};</span>
<span class="cm">/**</span>
<span class="cm"> * card state machine</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">qeth_card_states</span> <span class="p">{</span>
	<span class="n">CARD_STATE_DOWN</span><span class="p">,</span>
	<span class="n">CARD_STATE_HARDSETUP</span><span class="p">,</span>
	<span class="n">CARD_STATE_SOFTSETUP</span><span class="p">,</span>
	<span class="n">CARD_STATE_UP</span><span class="p">,</span>
	<span class="n">CARD_STATE_RECOVER</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * Protocol versions</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">qeth_prot_versions</span> <span class="p">{</span>
	<span class="n">QETH_PROT_IPV4</span> <span class="o">=</span> <span class="mh">0x0004</span><span class="p">,</span>
	<span class="n">QETH_PROT_IPV6</span> <span class="o">=</span> <span class="mh">0x0006</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_ip_types</span> <span class="p">{</span>
	<span class="n">QETH_IP_TYPE_NORMAL</span><span class="p">,</span>
	<span class="n">QETH_IP_TYPE_VIPA</span><span class="p">,</span>
	<span class="n">QETH_IP_TYPE_RXIP</span><span class="p">,</span>
	<span class="n">QETH_IP_TYPE_DEL_ALL_MC</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_cmd_buffer_state</span> <span class="p">{</span>
	<span class="n">BUF_STATE_FREE</span><span class="p">,</span>
	<span class="n">BUF_STATE_LOCKED</span><span class="p">,</span>
	<span class="n">BUF_STATE_PROCESSED</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_cq</span> <span class="p">{</span>
	<span class="n">QETH_CQ_DISABLED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">QETH_CQ_ENABLED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">QETH_CQ_NOTAVAILABLE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_ipato</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">enabled</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">invert4</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">invert6</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">entries</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_channel</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">qeth_cmd_buffer_state</span> <span class="n">state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_channel</span> <span class="o">*</span><span class="n">channel</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">qeth_channel</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * definition of a qeth channel, used for read and write</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">qeth_channel</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">qeth_channel_states</span> <span class="n">state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ccw1</span> <span class="n">ccw</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">iob_lock</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">wait_q</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tasklet_struct</span> <span class="n">irq_tasklet</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ccw_device</span> <span class="o">*</span><span class="n">ccwdev</span><span class="p">;</span>
<span class="cm">/*command buffer for control data*/</span>
	<span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="n">iob</span><span class="p">[</span><span class="n">QETH_CMD_BUFFER_NO</span><span class="p">];</span>
	<span class="n">atomic_t</span> <span class="n">irq_pending</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">io_buf_no</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">buf_no</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> *  OSA card related definitions</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">qeth_token</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">issuer_rm_w</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">issuer_rm_r</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cm_filter_w</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cm_filter_r</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cm_connection_w</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cm_connection_r</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">ulp_filter_w</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">ulp_filter_r</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">ulp_connection_w</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">ulp_connection_r</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_seqno</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">trans_hdr</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pdu_hdr</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pdu_hdr_ack</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">ipa</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pkt_seqno</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_reply</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">wait_q</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_reply</span> <span class="o">*</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">seqno</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">received</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rc</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">param</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="n">card</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">refcnt</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">qeth_card_blkt</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">time_total</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">inter_packet</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">inter_packet_jumbo</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define QETH_BROADCAST_WITH_ECHO    0x01</span>
<span class="cp">#define QETH_BROADCAST_WITHOUT_ECHO 0x02</span>
<span class="cp">#define QETH_LAYER2_MAC_READ	    0x01</span>
<span class="cp">#define QETH_LAYER2_MAC_REGISTERED  0x02</span>
<span class="k">struct</span> <span class="n">qeth_card_info</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">unit_addr2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">cula</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">chpid</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">func_level</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">mcl_level</span><span class="p">[</span><span class="n">QETH_MCL_LENGTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">guestlan</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mac_bits</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">portname_required</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">portno</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">portname</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
	<span class="k">enum</span> <span class="n">qeth_card_types</span> <span class="n">type</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">qeth_link_types</span> <span class="n">link_type</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_multicast_different</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">initial_mtu</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max_mtu</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">broadcast_capable</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">unique_id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_card_blkt</span> <span class="n">blkt</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">csum_mask</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">tx_csum_mask</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">qeth_ipa_promisc_modes</span> <span class="n">promisc_mode</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">diagass_support</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">hwtrap</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_card_options</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_routing_info</span> <span class="n">route4</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_ipa_info</span> <span class="n">ipa4</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_ipa_info</span> <span class="n">adp</span><span class="p">;</span> <span class="cm">/*Adapter parameters*/</span>
	<span class="k">struct</span> <span class="n">qeth_routing_info</span> <span class="n">route6</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_ipa_info</span> <span class="n">ipa6</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">fake_broadcast</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">add_hhlen</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">layer2</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">performance_stats</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rx_sg_cb</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">qeth_ipa_isolation_modes</span> <span class="n">isolation</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sniffer</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">qeth_cq</span> <span class="n">cq</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">hsuid</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * thread bits for qeth_card thread masks</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">qeth_threads</span> <span class="p">{</span>
	<span class="n">QETH_RECOVER_THREAD</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_osn_info</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">assist_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">data_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">qeth_discipline_id</span> <span class="p">{</span>
	<span class="n">QETH_DISCIPLINE_LAYER3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">QETH_DISCIPLINE_LAYER2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_discipline</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">start_poll</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ccw_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
	<span class="n">qdio_handler_t</span> <span class="o">*</span><span class="n">input_handler</span><span class="p">;</span>
	<span class="n">qdio_handler_t</span> <span class="o">*</span><span class="n">output_handler</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">recover</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">setup</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">remove</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_online</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_offline</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">shutdown</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">prepare</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">complete</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">freeze</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">thaw</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">restore</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_vlan_vid</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vid</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_mc_mac</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">mc_addr</span><span class="p">[</span><span class="n">MAX_ADDR_LEN</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mc_addrlen</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_vmac</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_rx</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">b_count</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">b_index</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qdio_buffer_element</span> <span class="o">*</span><span class="n">b_element</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">e_offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">qdio_err</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define QETH_NAPI_WEIGHT 128</span>

<span class="k">struct</span> <span class="n">qeth_card</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">qeth_card_states</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">lan_online</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="n">gdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_channel</span> <span class="n">read</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_channel</span> <span class="n">write</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_channel</span> <span class="n">data</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device_stats</span> <span class="n">stats</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">qeth_card_info</span> <span class="n">info</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_token</span> <span class="n">token</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_seqno</span> <span class="n">seqno</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_card_options</span> <span class="n">options</span><span class="p">;</span>

	<span class="n">wait_queue_head_t</span> <span class="n">wait_q</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">vlanlock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">mclock</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">active_vlans</span><span class="p">[</span><span class="n">BITS_TO_LONGS</span><span class="p">(</span><span class="n">VLAN_N_VID</span><span class="p">)];</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">vid_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">mc_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">kernel_thread_starter</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">thread_mask_lock</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">thread_start_mask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">thread_allowed_mask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">thread_running_mask</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">ip_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">ip_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="o">*</span><span class="n">ip_tbd_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_ipato</span> <span class="n">ipato</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">cmd_waiter_list</span><span class="p">;</span>
	<span class="cm">/* QDIO buffer handling */</span>
	<span class="k">struct</span> <span class="n">qeth_qdio_info</span> <span class="n">qdio</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_perf_stats</span> <span class="n">perf_stats</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">read_or_write_problem</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_osn_info</span> <span class="n">osn_info</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_discipline</span> <span class="o">*</span><span class="n">discipline</span><span class="p">;</span>
	<span class="n">atomic_t</span> <span class="n">force_alloc_skb</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">service_level</span> <span class="n">qeth_service_level</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qdio_ssqd_desc</span> <span class="n">ssqd</span><span class="p">;</span>
	<span class="n">debug_info_t</span> <span class="o">*</span><span class="n">debug</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">conf_mutex</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">discipline_mutex</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">napi_struct</span> <span class="n">napi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">qeth_rx</span> <span class="n">rx</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">delayed_work</span> <span class="n">buffer_reclaim_work</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">reclaim_index</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_card_list_struct</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="n">rwlock_t</span> <span class="n">rwlock</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">qeth_trap_id</span> <span class="p">{</span>
	<span class="n">__u16</span> <span class="n">lparnr</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">vmname</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">__u8</span> <span class="n">chpid</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">ssid</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">devno</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__packed</span><span class="p">;</span>

<span class="cm">/*some helper functions*/</span>
<span class="cp">#define QETH_CARD_IFNAME(card) (((card)-&gt;dev)? (card)-&gt;dev-&gt;name : &quot;&quot;)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="nf">CARD_FROM_CDEV</span><span class="p">(</span><span class="k">struct</span> <span class="n">ccw_device</span> <span class="o">*</span><span class="n">cdev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="n">card</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="o">&amp;</span><span class="p">((</span><span class="k">struct</span> <span class="n">ccwgroup_device</span> <span class="o">*</span><span class="p">)</span>
		<span class="n">dev_get_drvdata</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">))</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">card</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">qeth_get_micros</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">get_clock</span><span class="p">()</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">qeth_get_ip_version</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">ethhdr</span> <span class="o">*</span><span class="n">ehdr</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ethhdr</span> <span class="o">*</span><span class="p">)</span><span class="n">skb</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">ehdr</span><span class="o">-&gt;</span><span class="n">h_proto</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">ETH_P_IPV6</span>:
		<span class="k">return</span> <span class="mi">6</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">ETH_P_IP</span>:
		<span class="k">return</span> <span class="mi">4</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">qeth_put_buffer_pool_entry</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="n">card</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">qeth_buffer_pool_entry</span> <span class="o">*</span><span class="n">entry</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">list_add_tail</span><span class="p">(</span><span class="o">&amp;</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">card</span><span class="o">-&gt;</span><span class="n">qdio</span><span class="p">.</span><span class="n">in_buf_pool</span><span class="p">.</span><span class="n">entry_list</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">qeth_is_diagass_supported</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="n">card</span><span class="p">,</span>
		<span class="k">enum</span> <span class="n">qeth_diags_cmds</span> <span class="n">cmd</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">card</span><span class="o">-&gt;</span><span class="n">info</span><span class="p">.</span><span class="n">diagass_support</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">__u32</span><span class="p">)</span><span class="n">cmd</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">qeth_discipline</span> <span class="n">qeth_l2_discipline</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">qeth_discipline</span> <span class="n">qeth_l3_discipline</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">attribute_group</span> <span class="o">*</span><span class="n">qeth_generic_attr_groups</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">attribute_group</span> <span class="o">*</span><span class="n">qeth_osn_attr_groups</span><span class="p">[];</span>

<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">qeth_get_cardname_short</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_realloc_buffer_pool</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_core_load_discipline</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">enum</span> <span class="n">qeth_discipline_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_core_free_discipline</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_buffer_reclaim_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* exports for qeth discipline device drivers */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">qeth_card_list_struct</span> <span class="n">qeth_core_card_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">kmem_cache</span> <span class="o">*</span><span class="n">qeth_core_header_cache</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">qeth_dbf_info</span> <span class="n">qeth_dbf</span><span class="p">[</span><span class="n">QETH_DBF_INFOS</span><span class="p">];</span>

<span class="kt">void</span> <span class="n">qeth_set_allowed_threads</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_threads_running</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_wait_for_threads</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_do_run_thread</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_clear_thread_start_bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_clear_thread_running_bit</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_core_hardsetup_card</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_print_status_message</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_init_qdio_queues</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_send_startlan</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_send_stoplan</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_send_ipa_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="p">,</span>
		  <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">reply_cb</span><span class="p">)</span>
		  <span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_reply</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">),</span>
		  <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="n">qeth_get_ipacmd_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">enum</span> <span class="n">qeth_ipa_cmds</span><span class="p">,</span> <span class="k">enum</span> <span class="n">qeth_prot_versions</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_query_setadapterparms</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_check_qdio_errors</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qdio_buffer</span> <span class="o">*</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_queue_input_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">qeth_core_get_next_skb</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">qeth_qdio_buffer</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qdio_buffer_element</span> <span class="o">**</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">qeth_hdr</span> <span class="o">**</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_schedule_recovery</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_qdio_start_poll</span><span class="p">(</span><span class="k">struct</span> <span class="n">ccw_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_qdio_input_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">ccw_device</span> <span class="o">*</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span>
		<span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_qdio_output_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">ccw_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span>
			<span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_clear_ipacmd_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_qdio_clear_card</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_clear_working_pool_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_clear_cmd_buffers</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_channel</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_clear_qdio_buffers</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_setadp_promisc_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">net_device_stats</span> <span class="o">*</span><span class="n">qeth_get_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_change_mtu</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_setadpparms_change_macaddr</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_tx_timeout</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_prepare_control_data</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_release_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_channel</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_prepare_ipa_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="n">qeth_wait_for_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_channel</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_mdio_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_snmp_command</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_query_oat_command</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="n">qeth_get_adapter_cmd</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="n">__u32</span><span class="p">,</span> <span class="n">__u32</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_default_setadapterparms_cb</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_reply</span> <span class="o">*</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_send_control_data</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_cmd_buffer</span> <span class="o">*</span><span class="p">,</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">reply_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_reply</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">),</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">reply_param</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_get_priority_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_get_elements_no</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_do_send_packet_fast</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_qdio_out_q</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_hdr</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_do_send_packet</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_qdio_out_q</span> <span class="o">*</span><span class="p">,</span>
		    <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">qeth_hdr</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_core_get_sset_count</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_core_get_ethtool_stats</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">ethtool_stats</span> <span class="o">*</span><span class="p">,</span> <span class="n">u64</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_core_get_strings</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_core_get_drvinfo</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ethtool_drvinfo</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">qeth_dbf_longtext</span><span class="p">(</span><span class="n">debug_info_t</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">text</span><span class="p">,</span> <span class="p">...);</span>
<span class="kt">int</span> <span class="n">qeth_core_ethtool_get_settings</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ethtool_cmd</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_set_access_ctrl_online</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="n">card</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_hdr_chk_and_bounce</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_configure_cq</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">enum</span> <span class="n">qeth_cq</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_hw_trap</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">enum</span> <span class="n">qeth_diags_trap_action</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_query_ipassists</span><span class="p">(</span><span class="k">struct</span> <span class="n">qeth_card</span> <span class="o">*</span><span class="p">,</span> <span class="k">enum</span> <span class="n">qeth_prot_versions</span> <span class="n">prot</span><span class="p">);</span>

<span class="cm">/* exports for OSN */</span>
<span class="kt">int</span> <span class="n">qeth_osn_assist</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">qeth_osn_register</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">read_dev_no</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">**</span><span class="p">,</span>
		<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">assist_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">),</span>
		<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">data_cb</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">));</span>
<span class="kt">void</span> <span class="n">qeth_osn_deregister</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __QETH_CORE_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
