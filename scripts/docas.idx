f | export_report.pl | s | 4.5K | 163 | Jim Cromie | jim.cromie@gmail.com | 1306246027 |  | export_report: use warn() to issue WARNING, so they go to stderr  Also count CONFIG_MODVERSIONS warnings, and print a NOTE at start of SECTION 2 if any were issued.  Section 2 will be empty if the build is lacking this CONFIG_ item, and user may have missed the warnings, as they're off screen.  Signed-off-by: Jim Cromie <jim.cromie@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | checkkconfigsymbols.sh | s | 1.8K | 56 | Roland Dreier | rdreier@cisco.com | 1275554379 |  | checkkconfigsymbols.sh: Kconfig symbols sometimes have lowercase letters  Quite a few Kconfig symbols contain lowercase letters.  The current checkkconfigsymbols.sh code only contains A-Z in the regexp it uses to find config symbols in source code, so it comes up with the wrong symbol to look for in Kconfig files and then generates false positives when it doesn't find that wrong symbol.  For example checking drivers/net generates a false positive for MAC89 because the the actual config option is MAC89x0.  Fix this by also adding a-z to the regexp.  Signed-off-by: Roland Dreier <rolandd@cisco.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | conmakehash.c | s | 6.0K | 254 | Trevor Keith | tsrk@tsrk.net | 1253716768 |  | Fix all -Wmissing-prototypes warnings in x86 defconfig  Signed-off-by: Trevor Keith <tsrk@tsrk.net> Cc: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | extract-vmlinux | s | 1.6K | 53 | Corentin Chary | corentincj@iksaif.net | 1314799937 |  | scripts: add extract-vmlinux  This script can be used to extract vmlinux from a compressed kernel image (bzImage, etc..). It's inspired from (a subset of) extract-ikconfig.  It's something a lot of people have been looking for (mainly people with xen < 4 that doesn't support bzImages at all).  Signed-off-by: Corentin Chary <corentincj@iksaif.net> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Makefile | g | 1.3K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337795075 |  | Merge branch 'x86-extable-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull exception table generation updates from Ingo Molnar:  "The biggest change here is to allow the build-time sorting of the   exception table, to speed up booting.  This is achieved by the   architecture enabling BUILDTIME_EXTABLE_SORT.  This option is enabled   for x86 and MIPS currently.    On x86 a number of fixes and changes were needed to allow build-time   sorting of the exception table, in particular a relocation invariant   exception table format was needed.  This required the abstracting out   of exception table protocol and the removal of 20 years of accumulated   assumptions about the x86 exception table format.    While at it, this tree also cleans up various other aspects of   exception handling, such as early(er) exception handling for   rdmsr_safe() et al.    All in one, as the result of these changes the x86 exception code is   now pretty nice and modern.  As an added bonus any regressions in this   code will be early and violent crashes, so if you see any of those,   you'll know whom to blame!"  Fix up trivial conflicts in arch/{mips,x86}/Kconfig files due to nearby modifications of other core architecture options.  * 'x86-extable-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip: (35 commits)   Revert "x86, extable: Disable presorted exception table for now"   scripts/sortextable: Handle relative entries, and other cleanups   x86, extable: Switch to relative exception table entries   x86, extable: Disable presorted exception table for now   x86, extable: Add _ASM_EXTABLE_EX() macro   x86, extable: Remove open-coded exception table entries in arch/x86/ia32/ia32entry.S   x86, extable: Remove open-coded exception table entries in arch/x86/include/asm/xsave.h   x86, extable: Remove open-coded exception table entries in arch/x86/include/asm/kvm_host.h   x86, extable: Remove the now-unused __ASM_EX_SEC macros   x86, extable: Remove open-coded exception table entries in arch/x86/xen/xen-asm_32.S   x86, extable: Remove open-coded exception table entries in arch/x86/um/checksum_32.S   x86, extable: Remove open-coded exception table entries in arch/x86/lib/usercopy_32.c   x86, extable: Remove open-coded exception table entries in arch/x86/lib/putuser.S   x86, extable: Remove open-coded exception table entries in arch/x86/lib/getuser.S   x86, extable: Remove open-coded exception table entries in arch/x86/lib/csum-copy_64.S   x86, extable: Remove open-coded exception table entries in arch/x86/lib/copy_user_nocache_64.S   x86, extable: Remove open-coded exception table entries in arch/x86/lib/copy_user_64.S   x86, extable: Remove open-coded exception table entries in arch/x86/lib/checksum_32.S   x86, extable: Remove open-coded exception table entries in arch/x86/kernel/test_rodata.c   x86, extable: Remove open-coded exception table entries in arch/x86/kernel/entry_64.S   ...
f | setlocalversion | s | 3.9K | 151 | Roland Dreier | roland@purestorage.com | 1332795240 |  | setlocalversion: Use "grep -q" instead of piping output to "read dummy"  In some circumstances (eg when running a build in an emacs shell buffer), I get a spew of messages like      grep: writing output: Broken pipe  from setlocalversion, because the "read" subshell apparently exits as soon as it reads one line and gives EPIPE to grep.  It's not clear to me why this way of writing the check was used instead of just using grep -q to suppress output, but unless there is some deep reason I don't know, this way looks cleaner to me anyway, and gets rid of the ugly message spew.  (I double checked at http://pubs.opengroup.org/onlinepubs/009604499/utilities/grep.html and "grep -q" is specified in POSIX / SuS, so hopefully even people cross-compiling the kernel on some bizarre host OS can't complain about this change)  Signed-off-by: Roland Dreier <roland@purestorage.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | mksysmap | g | 1.3K |  | Sam Ravnborg | sam@ravnborg.org | 1231965500 |  | Revert "kbuild: strip generated symbols from *.ko"  This reverts commit ad7a953c522ceb496611d127e51e278bfe0ff483.  And commit: ("allow stripping of generated symbols under CONFIG_KALLSYMS_ALL")             9bb482476c6c9d1ae033306440c51ceac93ea80c  These stripping patches has caused a set of issues:  1) People have reported compatibility issues with binutils due to    lack of support for `--strip-unneeded-symbols' with objcopy 2.15.92.0.2    Reported by: Wenji 2) ccache and distcc no longer works as expeced    Reported by: Ted, Roland, + others 3) The installed modules increased a lot in size    Reported by: Ted, Davej + others  Reported-by: Wenji Huang <wenji.huang@oracle.com> Reported-by: "Theodore Ts'o" <tytso@mit.edu> Reported-by: Dave Jones <davej@redhat.com> Reported-by: Roland McGrath <roland@redhat.com> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | Makefile.modinst | g | 1.0K |  | Sam Ravnborg | sam@ravnborg.org | 1231965500 |  | Revert "kbuild: strip generated symbols from *.ko"  This reverts commit ad7a953c522ceb496611d127e51e278bfe0ff483.  And commit: ("allow stripping of generated symbols under CONFIG_KALLSYMS_ALL")             9bb482476c6c9d1ae033306440c51ceac93ea80c  These stripping patches has caused a set of issues:  1) People have reported compatibility issues with binutils due to    lack of support for `--strip-unneeded-symbols' with objcopy 2.15.92.0.2    Reported by: Wenji 2) ccache and distcc no longer works as expeced    Reported by: Ted, Roland, + others 3) The installed modules increased a lot in size    Reported by: Ted, Davej + others  Reported-by: Wenji Huang <wenji.huang@oracle.com> Reported-by: "Theodore Ts'o" <tytso@mit.edu> Reported-by: Dave Jones <davej@redhat.com> Reported-by: Roland McGrath <roland@redhat.com> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | xz_wrap.sh | s | 562B | 20 | Lasse Collin | lasse.collin@tukaani.org | 1334779998 |  | xz: Enable BCJ filters on SPARC and 32-bit x86  The BCJ filters were meant to be enabled already on these archs, but the xz_wrap.sh script was buggy. Enabling the filters should give smaller kernel images.  xz_wrap.sh will now use $SRCARCH instead of $ARCH to detect the architecture. That way it doesn't need to care about the subarchs (like i386 vs. x86_64) since the BCJ filters don't care either.  Signed-off-by: Lasse Collin <lasse.collin@tukaani.org> Acked-by: Jan Beulich <jbeulich@suse.com> Acked-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kernel-doc | s | 62K | 2030 | Randy Dunlap | rdunlap@xenotime.net | 1327337093 |  | scripts/kernel-doc: fix fatal error caused by cfg80211.h  include/net/cfg80211.h uses __must_check in functions that have kernel-doc notation.  This was confusing scripts/kernel-doc, so have scripts/kernel-doc ignore "__must_check".  Error(include/net/cfg80211.h:2702): cannot understand prototype: 'struct cfg80211_bss * __must_check cfg80211_inform_bss(...)  Signed-off-by: Randy Dunlap <rdunlap@xenotime.net> Cc:	Johannes Berg <johannes@sipsolutions.net> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unifdef.c | s | 34K | 1161 | Tony Finch | dot@dotat.at | 1295707859 |  | unifdef: update to upstream version 2.5  Fix a long-standing cpp compatibility bug. The -DFOO argument (without an explicit value) should define FOO to 1 not to the empty string.  Add a -o option to support overwriting a file in place, and a -S option to list the nesting depth of symbols. Include line numbers in debugging output. Support CRLF newlines.  Signed-off-by: Tony Finch <dot@dotat.at> Signed-off-by: Michal Marek <mmarek@suse.cz>
d | ksymoops |  | 1 items |  | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
d | package |  | 4 items |  | Lekensteyn | lekensteyn@gmail.com | 1338065690 |  | builddeb: include autogenerated header files  After 303395ac3bf3e2cb488435537d416bc840438fcb, some headers are autogenerated. Include these autogenerated headers (mainly unistd_32_ia32.h) in out-of-tree builds to allow DKMS modules to be built succesfully.  Signed-off-by: Peter Lekensteyn <lekensteyn@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
d | genksyms |  | 11 items |  | Fernando Luis Vázquez Cao | fernando@oss.ntt.co.jp | 1326030495 |  | scripts/genksyms: clean lex/yacc generated files  Add "keywords.hash.c", "lex.lex.c", "parse.tab.c" and "parse.tab.h" to clean-list so that they get automagically deleted at clean/mrproper time.  Signed-off-by: Fernando Luis Vazquez Cao<fernando@oss.ntt.co.jp> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | recordmcount.c | s | 11K | 422 | Martin Schwidefsky | schwidefsky@de.ibm.com | 1305572706 |  | ftrace/s390: mcount offset calculation  Do the mcount offset adjustment in the recordmcount.pl/recordmcount.[ch] at compile time and not in ftrace_call_adjust at run time.  Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com> Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
f | gcc-version.sh | s | 819B | 28 | dann frazier | dannf@debian.org | 1244579874 |  | Remove bashisms from scripts  The '-e' option to echo and brace expansion are not guaranteed to be supported by a POSIX-compliant /bin/sh (e.g. dash)  Signed-off-by: dann frazier <dannf@debian.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
d | mod |  | 8 items |  | Greg Kroah-Hartman | gregkh@linuxfoundation.org | 1337777931 |  | modpost: use proper kernel style for autogenerated files  If the kernel build process is creating files automatically, the least it can do is create them in a properly formatted manner.  Sure, it's a minor issue, but being consistent is nice.  Cc: Rusty Russell <rusty@rustcorp.com.au> Cc: Alessio Igor Bogani <abogani@kernel.org> Cc: Tony Lindgren <tony@atomide.com> Cc: Ben Hutchings <ben@decadent.org.uk> Cc: Russell King <rmk+kernel@arm.linux.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | tags.sh | s | 7.4K | 228 | Stephen Boyd | sboyd@codeaurora.org | 1333358897 |  | Subject: [PATCH] tags.sh: Add missing quotes  When $remove_structs is empty a test for empty string will turn into test -n with no arguments meaning true. Add quotes so an empty string is tested and so that make cscope works again.  Reported-and-tested-by: Jike Song <albcamus@gmail.com> Reported-by: Prarit Bhargava <prarit@redhat.com> Acked-by: Yang Bai <hamo.by@gmail.com> Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
d | selinux |  | 5 items |  | Randy Dunlap | randy.dunlap@oracle.com | 1305845978 |  | Create Documentation/security/, move LSM-, credentials-, and keys-related files from Documentation/   to Documentation/security/, add Documentation/security/00-INDEX, and update all occurrences of Documentation/<moved_file>   to Documentation/security/<moved_file>.
f | mkuboot.sh | s | 379B | 15 | Roland Stigge | stigge@antcom.de | 1294407061 |  | mkuboot.sh: Fail if mkimage is missing  on building an uImage, I get:  $ make uImage   CHK     include/linux/version.h   CHK     include/generated/utsrelease.h make[1]: `include/generated/mach-types.h' is up to date.   CALL    scripts/checksyscalls.sh   CHK     include/generated/compile.h   Kernel: arch/arm/boot/Image is ready   SHIPPED arch/arm/boot/compressed/lib1funcs.S   AS      arch/arm/boot/compressed/lib1funcs.o   LD      arch/arm/boot/compressed/vmlinux   OBJCOPY arch/arm/boot/zImage   Kernel: arch/arm/boot/zImage is ready   UIMAGE  arch/arm/boot/uImage "mkimage" command not found - U-Boot images will not be built   Image arch/arm/boot/uImage is ready $  I.e. it says: "uImage is ready" even though the uImage file doesn't exist because mkimage is missing.  I propose the attached patch.  Signed-off-by: Roland Stigge <stigge@antcom.de> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Makefile.build | g | 14K |  | Kirill A. Shutemov | kirill.shutemov@linux.intel.com | 1327572446 |  | kbuild: disable -Wmissing-field-initializers for W=1  -Wmissing-field-initializers is too noisy to be useful on W=1. Let's move it to W=2.  Signed-off-by: Kirill A. Shutemov <kirill.shutemov@linux.intel.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | patch-kernel | s | 9.9K | 295 | Shawn Landden | shawnlandden@gmail.com | 1333113816 |  | scripts/patch-kernel: digest kernel.org hosted .xz patches  kernel.org is hosting patches and kernel compressed with xz (lzma2+). Allow scripts/patch-kernel to decompress these files.  Signed-off-by: Shawn Landden <shawnlandden@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | headers_install.pl | s | 1.8K | 52 | Markus Trippelsdorf | markus@trippelsdorf.de | 1308927365 |  | headers_install: fix __packed in exported kernel headers  checkpatch.pl warns about using __attribute__((packed)) in kernel headers: "__packed is preferred over __attribute__((packed))". If one follows that advice it could cause problems in the exported header files, because the outside world doesn't know about this shortcut.  For example busybox will fail to compile:  CC      miscutils/ubi_attach_detach.o  In file included from miscutils/ubi_attach_detach.c:27:0:  /usr/include/mtd/ubi-user.h:330:3: error: conflicting types for ‘__packed’  /usr/include/mtd/ubi-user.h:314:3: note: previous declaration of ‘__packed’ was here ...  Fix the problem by substituting __packed with __attribute__((packed)) in the header_install.pl script.  Cc: Artem Bityutskiy <Artem.Bityutskiy@nokia.com> CC: Joe Perches <joe@perches.com> Signed-off-by: Markus Trippelsdorf <markus@trippelsdorf.de> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | ver_linux | s | 3.1K | 68 | dann frazier | dannf@debian.org | 1244579874 |  | Remove bashisms from scripts  The '-e' option to echo and brace expansion are not guaranteed to be supported by a POSIX-compliant /bin/sh (e.g. dash)  Signed-off-by: dann frazier <dannf@debian.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | checkincludes.pl | s | 1.8K | 77 | Stephen Hemminger | shemminger@vyatta.com | 1267993197 |  | checkincludes: fix perlcritic warnings  Turn on strict checking. Use local file handles. Use three argument open.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Cc: Cong Wang <amwang@redhat.com> Cc: Michal Marek <mmarek@suse.cz> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | module-common.lds | g | 737B |  | Alessio Igor Bogani | abogani@kernel.org | 1305789927 |  | module: Sort exported symbols  This patch places every exported symbol in its own section (i.e. "___ksymtab+printk").  Thus the linker will use its SORT() directive to sort and finally merge all symbol in the right and final section (i.e. "__ksymtab").  The symbol prefixed archs use an underscore as prefix for symbols. To avoid collision we use a different character to create the temporary section names.  This work was supported by a hardware donation from the CE Linux Forum.  Signed-off-by: Alessio Igor Bogani <abogani@kernel.org> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> (folded in '+' fixup) Tested-by: Dirk Behme <dirk.behme@googlemail.com>
f | gcc-x86_64-has-stack-protector.sh | s | 199B | 7 | Ingo Molnar | mingo@elte.hu | 1234351049 |  | stackprotector: fix multi-word cross-builds  Stackprotector builds were failing if CROSS_COMPILER was more than a single world (such as when distcc was used) - because the check scripts used $1 instead of $*.  Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | Makefile.help | g | 68B |  | Nicolas Palix | npalix@diku.dk | 1276293629 |  | Add a target to use the Coccinelle checker  A 'coccicheck' target is added. It can be called with four different modes. Each one generates a different kind of output, i.e. context, patch, org, report, according to the corresponding mode to be activated.  The new target calls the 'coccicheck' front-end in the 'scripts' directory with the MODE argument. Every SmPL file in the subdirectories of 'scripts/coccinelle' is then given to the front-end and applied to the entire source tree.  The four modes behave as follows:  'report' generates a list in the following format:   file:line:column-column: message  'patch' proposes a fix, when possible.  'context' highlights lines of interest and their context in a diff-like style. Lines of interest are indicated with '-'.  'org' generates a report in the Org mode format of Emacs.  Signed-off-by: Nicolas Palix <npalix@diku.dk> Signed-off-by: Julia Lawall <julia@diku.dk> Acked-by: Sam Ravnborg <sam@ravnborg.org> Acked-by: Joerg Roedel <joerg.roedel@amd.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | gcc-goto.sh | s | 465B | 19 | Rabin Vincent | rabin@rab.in | 1332581936 |  | ARM: 7333/2: jump label: detect %c support for ARM  Some versions of ARM GCC which do support asm goto, do not support the %c specifier.  Since we need the %c to support jump labels on ARM, detect that too in the asm goto detection script to avoid build errors with these versions.  http://gcc.gnu.org/bugzilla/show_bug.cgi?id=48637  Acked-by: Jason Baron <jbaron@redhat.com> Signed-off-by: Rabin Vincent <rabin@rab.in> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | Makefile.headersinst | g | 4.0K |  | H. Peter Anvin | hpa@linux.intel.com | 1321564476 |  | kbuild: Add support for installing generated asm headers  Generated asm headers are supposed to live in arch/*/include/generated/asm, but objhdr-y expect them to live in the same directory they are generated in.  Instead of trying to cut that particular Gordian knot, introduce genhdr-y that takes this into account; the sole user of objhdr-y, linux/version.h, should be migrated over at some later date.  Suggested-by: David Woodhouse <dwmw2@infradead.org> Acked-by: David Woodhouse <dwmw2@infradead.org> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Michal Marek <mmarek@suse.cz> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | bootgraph.pl | s | 5.6K | 176 | Andrew Murray | amurray@mpcdata.com | 1307916297 |  | bootgraph.pl: relax timing information requirements  This patch removes the assumption of the bootgraph.pl script that the timing information reported by PRINTK_TIME will contain at least one entry with a time of less than 100 seconds.  Not all boards correctly reset the system timer and in many cases the inital times reported by PRINTK_TIME is high. When this occurs the bootchart.pl script fails to give any useful output.  This patch sets the $firsttime variable to the largest value expected by PRINTK_TIME  Signed-off-by: Andrew Murray <amurray@mpc-data.co.uk> Acked-by: Arjan van de Ven <arjan@linux.intel.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | cleanfile | s | 3.4K | 147 | H. Peter Anvin | hpa@zytor.com | 1184613350 |  | scripts: Make cleanfile/cleanpatch warn about long lines  Make the "cleanfile" and "cleanpatch" script warn about long lines, by default lines whose visual width exceeds 79 characters.  Per suggestion from Auke Kok.  Signed-off-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | get_maintainer.pl | s | 54K | 1846 | Joe Perches | joe@perches.com | 1340228376 |        created from checkpatch.pl | get_maintainer: Fix --help warning  Using --help emits a concatenation error.  Fix it.  Signed-off-by: Joe Perches <joe@perches.com> Reported-by: Paul Bolle <pebolle@tiscali.nl> Tested-by: Paul Bolle <pebolle@tiscali.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | recordmcount.h | s | 16K | 497 | David Daney | david.daney@cavium.com | 1325887602 |  | recordmcount: Fix handling of elf64 big-endian objects.  In ELF64, the sh_flags field is 64-bits wide.  recordmcount was erroneously treating it as a 32-bit wide field.  For little endian objects this works because the flags of interest (SHF_EXECINSTR) reside in the lower 32 bits of the word, and you get the same result with either a 32-bit or 64-bit read.  Big endian objects on the other hand do not work at all with this error.  The fix:  Correctly treat sh_flags as 64-bits wide in elf64 objects.  The symptom I observed was that my __start_mcount_loc..__stop_mcount_loc was empty even though ftrace function tracing was enabled.  Link: http://lkml.kernel.org/r/1324345362-12230-1-git-send-email-ddaney.cavm@gmail.com  Cc: stable@kernel.org # 3.0+ Signed-off-by: David Daney <david.daney@cavium.com> Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
f | docproc.c | s | 14K | 534 | Jesper Juhl | jj@chaosbits.net | 1308249603 |  | docproc: cleanup brace placement  The placement of the opening brace "{" after 'if' statements in scripts/docproc.c is inconsistent. Most are placed on the same line as the 'if' statement itself as per CodingStyle, but a few are not.  This patch cleans up the inconsistency. We save a few source lines and the file then uses the same style throughout, which is nice.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | config | s | 2.9K | 137 | Yann E. MORIN | yann.morin.1998@free.fr | 1337119991 |  | scripts/config: properly report and set string options  Currently, scripts/config removes the leading double-quote from string options, but leaves the trailing double-quote.  Also, double-quotes in a string are escaped, but scripts/config does not unescape those when printing  Finally, scripts/config does not escape double-quotes when setting string options.  Eg. the current behavior:     $ grep -E '^CONFIG_FOO=' .config     CONFIG_FOO="Bar \"Buz\" Meh"     $ ./scripts/config -s FOO     Bar \"Buz\" Meh"     $ ./scripts/config --set-str FOO 'Alpha "Bravo" Charlie'     $ grep -E '^CONFIG_FOO=' .config     CONFIG_FOO="Alpha "Bravo" Charlie"  Fix those three, giving this new behavior:     $ grep -E '^CONFIG_FOO=' .config     CONFIG_FOO="Bar \"Buz\" Meh"     $ ./scripts/config -s FOO     Bar "Buz" Meh     $ ./scripts/config --set-str FOO 'Alpha "Bravo" Charlie'     $ grep -E '^CONFIG_FOO=' .config     CONFIG_FOO="Alpha \"Bravo\" Charlie"  Signed-off-by: "Yann E. MORIN" <yann.morin.1998@free.fr> Acked-by: Andi Kleen <andi@firstfloor.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
d | kconfig |  | 32 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338226676 |  | Merge branch 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild  Pull kconfig changes from Michal Marek:   - Error handling for make KCONFIG_ALLCONFIG=<...> all*config plus a fix    for a bug that was exposed by this   - Fix for the script/config utility.  * 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild:   scripts/config: properly report and set string options   kbuild: all{no,yes,mod,def,rand}config only read files when instructed to.   kconfig: Add error handling to KCONFIG_ALLCONFIG
d | dtc |  | 22 items |  | Felipe Balbi | balbi@ti.com | 1332626855 |  | scripts: dtc: fix compile warnings  Fix following compile warnings:  scripts/dtc/flattree.c: In function ‘flat_read_mem_reserve’: scripts/dtc/flattree.c:700:14: warning: variable ‘p’ set but not used 	[-Wunused-but-set-variable]  scripts/dtc/dtc.c: In function ‘main’: scripts/dtc/dtc.c:104:17: warning: variable ‘check’ set but not used 	[-Wunused-but-set-variable]  Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | headers_check.pl | s | 3.5K | 148 | Bobby Powers | bobbypowers@gmail.com | 1332766467 |  | headers_check: recursively search for linux/types.h inclusion  headers_check.pl currently emits some spurious warnings, especially for the drm headers, about using __[us]{8,16,32,64} types without including linux/types.h.  Recursively search for types.h inclusion, avoiding circular references.  Signed-off-by: Bobby Powers <bobbypowers@gmail.com> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Dave Airlie <airlied@linux.ie> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | headers.sh | s | 530B | 26 | Kirill A. Shutemov | kirill@shutemov.name | 1292361379 |  | kbuild: introduce HDR_ARCH_LIST for headers_install_all  Using HDR_ARCH_LIST you can specify subset of architectures you want to get headers for.  Signed-off-by: Kirill A. Shutemov <kirill@shutemov.name> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Makefile.modpost | g | 5.1K |  | Michal Marek | mmarek@suse.cz | 1307453871 |  | Merge commit 'v3.0-rc1' into kbuild/kbuild
f | kallsyms.c | s | 15K | 548 | Xiaochen Wang | wangxiaochen0@gmail.com | 1305213820 |  | scripts/kallsyms.c: fix potential segfault  Description: This bug hardly appears during real kernel compiling,  because the vmlinux symbols table is huge.  But we can still catch it under strict condition , as follows.    $ echo "c101b97b T do_fork" || ./scripts/kallsyms --all-symbols    #include <asm/types.h>    ......    ......    .globl kallsyms_token_table            ALGN    kallsyms_token_table:    Segmentation fault (core dumped)    $  If symbols table is small, all entries in token_profit[0x10000] may decrease to 0 after several calls of compress_symbols() in optimize_result(). In that case, find_best_token() always return 0 and best_table[i] is set to "\0\0" and best_table_len[i] is set to 2.  As a result, expand_symbol(best_table[0]="\0\0", best_table_len[0]=2, buf) in write_src() will run in infinite recursion until stack overflows, causing segfault.  This patch checks the find_best_token() return value. If all entries in token_profit[0x10000] become 0 according to return value, it breaks the loop in optimize_result(). And expand_symbol() works well when best_table_len[i] is 0.  Signed-off-by: Xiaochen Wang <wangxiaochen0@gmail.com> Acked-by: Paulo Marques <pmarques@grupopie.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | headerdep.pl | s | 3.5K | 153 | Stephen Hemminger | shemminger@vyatta.com | 1269343598 |  | headerdep: perlcritic warning  Minor perlcritic warning: headerdep.pl: "return" statement with explicit "undef" at line 84, column 2.  See page 199 of PBP.  (Severity: 5)  The rationale according to PBP is that an explicit return of undef (contrary to most people's expectations) doesn't always evaluate as false. It has to with the fact that perl return value depends on context the function is called. If function is used in list context, the appropriate return value for false is an empty list; whereas in scalar context the return value for false is undefined. By just using a "return" both cases are handled.  In the context of a trivial script this doesn't matter. But one script may be cut-paste into later code (most people like me only know 50% of perl), that is why perlcritic always complains  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | makelst | s | 773B | 29 | Sam Ravnborg | sam@neptun.(none) | 1192479906 |  | kbuild: introduce ccflags-y, asflags-y and ldflags-y  Introduce ccflags-y, asflags-y and ldflags-y so we soon can deprecate use of EXTRA_CFLAGS, EXTRA_AFLAGS and EXTRA_LDFLAGS. This patch does not touch any in-tree users - thats next round. Lets get this committed first and then fix the users of the soon to be deprecated variants next.  The rationale behind this change is to introduce support for makefile fragments like:  ccflags-$(CONFIG_WHATEVER_DEBUG) := -DDEBUG  As a replacement for the uglier: ifeq ($(CONFIG_WHATEVER_DEBUG),y)         EXTRA_CFLAGS := -DDEBUG endif  Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
d | coccinelle |  | 7 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338226747 |  | Merge branch 'misc' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild  Pull misc kbuild changes from Michal Marek:  "The non-critical part of kbuild for 3.5 includes     - two new coccinelle checks    - fix for make deb-pkg to include generated headers in arch/*/include    I have more make-deb-pkg fixes in the backlog, but these will likely   have to wait for 3.6."  * 'misc' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild:   builddeb: include autogenerated header files   scripts/coccinelle: sizeof of pointer   scripts/coccinelle: address test is always true
f | gfp-translate | s | 1.7K | 77 | Dave Jones | davej@redhat.com | 1340826269 |  | chmod +x scripts/gfp-translate  This script lacks an executable bit.  Signed-off-by: Dave Jones <davej@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Makefile.modbuiltin | g | 1.8K |  | Michal Marek | mmarek@suse.cz | 1276165388 |  | kbuild: Create output directory in Makefile.modbuiltin  Reported-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Lindent | s | 460B | 18 | Joe Perches | joe@perches.com | 1209481564 |  | scripts/Lindent: support gnu indent v2.2.10  The new version of indent supports positioning labels in column 1 using "-il0"  http://www.nabble.com/Release-2.2.10-of-GNU-Indent-td15990700.html  Add "-il0" if indent version >= 2.2.10  Signed-off-by: Joe Perches <joe@perches.com> Acked-by: Alan Cox <alan@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sortextable.h | s | 4.9K | 181 | David Daney | david.daney@cavium.com | 1335292940 |  | scripts/sortextable: Handle relative entries, and other cleanups  x86 is now using relative rather than absolute addresses in its exception table, so we add a sorter for these.  If there are relocations on the __ex_table section, they are redundant and probably incorrect after the sort, so they are zeroed out leaving them valid and consistent.  Also use the unaligned safe accessors from tools/{be,le}_byteshift.h  Signed-off-by: David Daney <david.daney@cavium.com> Link: http://lkml.kernel.org/r/1335291795-26693-2-git-send-email-ddaney.cavm@gmail.com Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | namespace.pl | s | 13K | 448 | Michal Marek | mmarek@suse.cz | 1288220396 |  | Revert "namespace: add source file location exceptions"  This reverts commit 24a54f7974a616385b96cd939e004592e2cea484.  Stephen Hemminger <shemminger@vyatta.com> writes: > That patch should not be included. It causes more problems than it > solves, since then there are duplicate file locations which causes > false duplicate symbol reports.  Reported-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | checkstack.pl | s | 5.2K | 159 | Jean Delvare | khali@linux-fr.org | 1305753890 |  | Haavard Skinnemoen has left Atmel  Haavard's e-mail address at Atmel is no longer valid.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Acked-by: Havard Skinnemoen <hskinnemoen@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | Makefile.clean | g | 3.2K |  | Michal Marek | mmarek@suse.cz | 1268302522 |  | kbuild: Really don't clean bounds.h and asm-offsets.h  Commit 7d3cc8b tried to keep bounds.h and asm-offsets.h during make clean by filtering these out of $(clean-files), but they are listed in $(targets) and $(always) and thus removed automatically. Introduce a new $(no-clean-files) variable to really skip such files in Makefile.clean.  Signed-off-by: Michal Marek <mmarek@suse.cz>
d | tracing |  | 1 items |  | Arjan van de Ven | arjan@linux.intel.com | 1253353332 |  | tracing, perf: Convert the power tracer into an event tracer  This patch converts the existing power tracer into an event tracer, so that power events (C states and frequency changes) can be tracked via "perf".  This also removes the perl script that was used to demo the tracer; its functionality is being replaced entirely with timechart.  Signed-off-by: Arjan van de Ven <arjan@linux.intel.com> Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Paul Mackerras <paulus@samba.org> Cc: Frederic Weisbecker <fweisbec@gmail.com> LKML-Reference: <20090912130542.6d314860@infradead.org> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | cleanpatch | s | 5.0K | 218 | H. Peter Anvin | hpa@zytor.com | 1184613350 |  | scripts: Make cleanfile/cleanpatch warn about long lines  Make the "cleanfile" and "cleanpatch" script warn about long lines, by default lines whose visual width exceeds 79 characters.  Per suggestion from Auke Kok.  Signed-off-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | profile2linkerlist.pl | s | 375B | 15 | Stephen Hemminger | shemminger@vyatta.com | 1267994373 |  | profile2linkerlist: fix perl warnings  Turn on strict checking. Simplify code by using "unless" statement.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Acked-by: WANG Cong <amwang@redhat.com> Cc: Michal Marek <mmarek@suse.cz> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | diffconfig | s | 3.6K | 108 | Tim Bird | tim.bird@am.sony.com | 1217016761 |  | kconfig: add diffconfig utility  Diffconfig is a simple utility for comparing two kernel configuration files. See usage in the script for more info.  Signed-off-by: Tim Bird <tim.bird@am.sony.com> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | sortextable.c | s | 6.7K | 291 | David Daney | david.daney@cavium.com | 1335292940 |  | scripts/sortextable: Handle relative entries, and other cleanups  x86 is now using relative rather than absolute addresses in its exception table, so we add a sorter for these.  If there are relocations on the __ex_table section, they are redundant and probably incorrect after the sort, so they are zeroed out leaving them valid and consistent.  Also use the unaligned safe accessors from tools/{be,le}_byteshift.h  Signed-off-by: David Daney <david.daney@cavium.com> Link: http://lkml.kernel.org/r/1335291795-26693-2-git-send-email-ddaney.cavm@gmail.com Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | link-vmlinux.sh | s | 5.2K | 187 | Linus Torvalds | torvalds@linux-foundation.org | 1338226348 |  | Merge branch 'kbuild' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild  Pull kbuild updates from Michal Marek.  Fixed up nontrivial merge conflict in Makefile as per Stephen Rothwell and linux-next (and trivial arch/sparc/Makefile changes due to removed sparc32 logic).  * 'kbuild' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild:   mips: Fix KBUILD_CPPFLAGS definition   kbuild: fix ia64 link   kbuild: document KBUILD_LDS, KBUILD_VMLINUX_{INIT,MAIN} and LDFLAGS_vmlinux   kbuild: link of vmlinux moved to a script   kbuild: refactor final link of sparc32   kbuild: drop unused KBUILD_VMLINUX_OBJS from top-level Makefile   kbuild: Makefile: remove unnecessary check for m68knommu ARCH
f | markup_oops.pl | s | 8.1K | 322 | Linus Torvalds | torvalds@linux-foundation.org | 1275407752 |  | Merge branch 'for-35' of git://repo.or.cz/linux-kbuild  * 'for-35' of git://repo.or.cz/linux-kbuild: (81 commits)   kbuild: Revert part of e8d400a to resolve a conflict   kbuild: Fix checking of scm-identifier variable   gconfig: add support to show hidden options that have prompts   menuconfig: add support to show hidden options which have prompts   gconfig: remove show_debug option   gconfig: remove dbg_print_ptype() and dbg_print_stype()   kconfig: fix zconfdump()   kconfig: some small fixes   add random binaries to .gitignore   kbuild: Include gen_initramfs_list.sh and the file list in the .d file   kconfig: recalc symbol value before showing search results   .gitignore: ignore *.lzo files   headerdep: perlcritic warning   scripts/Makefile.lib: Align the output of LZO   kbuild: Generate modules.builtin in make modules_install   Revert "kbuild: specify absolute paths for cscope"   kbuild: Do not unnecessarily regenerate modules.builtin   headers_install: use local file handles   headers_check: fix perl warnings   export_report: fix perl warnings   ...
f | gcc-x86_32-has-stack-protector.sh | s | 183B | 7 | Ingo Molnar | mingo@elte.hu | 1234351049 |  | stackprotector: fix multi-word cross-builds  Stackprotector builds were failing if CROSS_COMPILER was more than a single world (such as when distcc was used) - because the check scripts used $1 instead of $*.  Signed-off-by: Ingo Molnar <mingo@elte.hu>
d | rt-tester |  | 15 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | decodecode | s | 1.9K | 79 | Rabin Vincent | rabin@rab.in | 1275639995 |  | scripts: decodecode: remove bashisms  Remove bashisms to make scripts/decodecode work with other shells.  Signed-off-by: Rabin Vincent <rabin@rab.in> Reviewed-by: WANG Cong <xiyou.wangcong@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | bloat-o-meter | s | 1.8K | 52 | Jean Delvare | khali@linux-fr.org | 1300841057 |  | bloat-o-meter: include read-only data section in report  I'm not sure why the read-only data section is excluded from the report, it seems as relevant as the other data sections (b and d).  I've stripped the symbols starting with __mod_ as they can have their names dynamically generated and thus comparison between binaries is not possible.  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: Andi Kleen <andi@firstfloor.org> Acked-by: Nathan Lynch <ntl@pobox.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | show_delta | s | 3.0K | 108 | Don Zickus | dzickus@redhat.com | 1265117636 |  | scripts: change scripts to use system python instead of env  Just a small change to a couple of scripts to go from   #!/usr/bin/env python  to   #!/usr/bin/python  This shouldn't effect anyone, unless they don't install python there.  In preparation for python3, Fedora is doing a big push to change the scripts to use the system python.  This allows developers to put the python3 in their path without fear of breaking existing scripts.  Now I am pretty sure anyone using python3 for testing purposes will probably not run any of the scripts I changed, but Fedora has this automated tool that checks for this stuff so I thought I would try to push it upstream.  Signed-off-by: Don Zickus <dzickus@redhat.com> Acked-by: WANG Cong <xiyou.wangcong@gmail.com> Acked-by: Jarod Wilson <jarod@redhat.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | checkpatch.pl | s | 95K | 3063 | Joe Perches | joe@perches.com | 1338511767 |  | checkpatch: suggest pr_<level> over printk(KERN_<LEVEL>  Suggest the shorter pr_<level> instead of printk(KERN_<LEVEL>.  Prefer to use pr_<level> over bare printks. Prefer to use pr_warn over pr_warning.  Signed-off-by: Joe Perches <joe@perches.com> Cc: Andy Whitcroft <apw@shadowen.org> Cc: Theodore Ts'o <tytso@mit.edu> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Makefile.lib | g | 12K |  | Stephen Warren | swarren@wwwdotorg.org | 1332769760 |  | Kbuild: centralize MKIMAGE and cmd_uimage definitions  All ARCHs have the same definition of MKIMAGE. Move it to Makefile.lib to avoid duplication.  All ARCHs have similar definitions of cmd_uimage. Place a sufficiently parameterized version in Makefile.lib to avoid duplication.  Signed-off-by: Stephen Warren <swarren@wwwdotorg.org> Acked-by: Nicolas Pitre <nico@linaro.org> Tested-by: Mike Frysinger <vapier@gentoo.org> [Blackfin] Tested-by: Michal Simek <monstr@monstr.eu> [Microblaze] Tested-by: Guan Xuetao <gxt@mprc.pku.edu.cn> [unicore32] Signed-off-by: Michal Marek <mmarek@suse.cz>
f | recordmcount.pl | s | 17K | 523 | Martin Schwidefsky | schwidefsky@de.ibm.com | 1305572706 |  | ftrace/s390: mcount offset calculation  Do the mcount offset adjustment in the recordmcount.pl/recordmcount.[ch] at compile time and not in ftrace_call_adjust at run time.  Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com> Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
f | bin2c.c | s | 702B | 30 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | Makefile.asm-generic | g | 681B |  | Peter Foley | pefoley2@verizon.net | 1307612899 |  | kbuild: silence Nothing to be done for 'all' message  This patch silences a Makefile.asm-generic message by defining a dummy rule for all.  make -f /usr/src/git/scripts/Makefile.asm-generic \             obj=arch/x86/include/generated/asm make[1]: Nothing to be done for `all'.  Signed-off-by: Peter Foley <pefoley2@verizon.net> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | checksyscalls.sh | s | 5.5K | 201 | H. Peter Anvin | hpa@linux.intel.com | 1321565737 |  | checksyscalls: Use arch/x86/syscalls/syscall_32.tbl as source  Use the new arch/x86/syscalls/syscall_32.tbl file as source instead of arch/x86/include/asm/unistd_32.h.  Cc: Michal Marek <mmarek@suse.cz> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | mkcompile_h | s | 2.5K | 81 | Marcin Nowakowski | marcin.nowakowski.000@gmail.com | 1304085345 |  | Fix handling of backlash character in LINUX_COMPILE_BY name  When using a domain login, `whoami` returns the login in user\domain format. This leads to either warnings on unrecognised escape sequences or escaped characters being generated for the user. This patch ensures that any backslash is escaped to a double-backslash to make sure the name is preserved correctly. This patch does not enforce escaping on the KBUILD_BUILD_USER variable, as this is something the user has control of and can escape if required.  Signed-off-by: Marcin Nowakowski <marcin.nowakowski.000@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | pnmtologo.c | s | 11K | 431 | Stephen Rothwell | sfr@canb.auug.org.au | 1246413359 |  | fbdev: work around old compiler bug  When building with a 4.1.x compiler on powerpc64 (at least) we get this error:  drivers/video/logo/logo_linux_mono.c:81: error: logo_linux_mono causes a section type conflict  This was introduced by commit ae52bb2384f721562f15f719de1acb8e934733cb ("fbdev: move logo externs to header file").  This is a partial revert of that commit sufficient to not hit the compiler bug.  Also convert _clut arrays from __initconst to __initdata.  Sam said:    Al analysed this some time ago.  When we say something is const then   _sometimes_ gcc annotate the section as const(?) - sometimes not.  So if   we have two variables/functions annotated __*const and gcc decides to   annotate the section const only in one case we get a section type   conflict.  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Krzysztof Helt <krzysztof.h1@poczta.fm> Cc: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | depmod.sh | s | 1.1K | 39 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1327327939 |  | kbuild: do not check for ancient modutils tools  scripts/depmod.sh checks for the output of '-V' expecting that it has module-init-tools in it. It's a hack to prevent users from using modutils instead of module-init-tools, that only works with 2.4.x kernels. This however prints an annoying warning for kmod tool, that is currently replacing module-init-tools.  Rather than putting another check for kmod's version, just remove it since users of 2.4.x kernel are unlikely to upgrade to 3.x, and if they do, let depmod fail in that case because they should know what they are doing.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi> Acked-by: WANG Cong <amwang@redhat.com> Acked-By: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | gen_initramfs_list.sh | s | 7.4K | 279 | Linus Torvalds | torvalds@linux-foundation.org | 1306269097 |  | Merge branch 'kbuild' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6  * 'kbuild' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6:   kbuild: make KBUILD_NOCMDDEP=1 handle empty built-in.o   scripts/kallsyms.c: fix potential segfault   scripts/gen_initramfs_list.sh: Convert to a /bin/sh script   kbuild: Fix GNU make v3.80 compatibility   kbuild: Fix passing -Wno-* options to gcc 4.4+   kbuild: move scripts/basic/docproc.c to scripts/docproc.c   kbuild: Fix Makefile.asm-generic for um   kbuild: Allow to combine multiple W= levels   kbuild: Disable -Wunused-but-set-variable for gcc 4.6.0   Fix handling of backlash character in LINUX_COMPILE_BY name   kbuild: asm-generic support   kbuild: implement several W= levels   kbuild: Fix build with binutils <= 2.19   initramfs: Use KBUILD_BUILD_TIMESTAMP for generated entries   kbuild: Allow to override LINUX_COMPILE_BY and LINUX_COMPILE_HOST macros   kbuild: Drop unused LINUX_COMPILE_TIME and LINUX_COMPILE_DOMAIN macros   kbuild: Use the deterministic mode of ar   kbuild: Call gzip with -n   kbuild: move KALLSYMS_EXTRA_PASS from Kconfig to Makefile   Kconfig: improve KALLSYMS_ALL documentation  Fix up trivial conflict in Makefile
f | checkversion.pl | s | 1.9K | 57 | Peter Foley | pefoley2@verizon.net | 1304084335 |  | kbuild: don't warn about include/linux/version.h not including itself  This patch makes checkversion.pl not warn that include/linux/version.h dosen't include itself.  Signed-off-by: Peter Foley <pefoley2@verizon.net> [mmarek: simplified to use 'next if' syntax] Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Makefile.fwinst | g | 2.0K |  | David Woodhouse | David.Woodhouse@intel.com | 1217659949 |  | firmware: silence __fw_modbuild and __fw_modinst 'Nothing to be done' messages  People don't like them and think they're errors.  Leave the __fw_install one though; when 'make firmware_install' does nothing, it's best to have a 'Nothing to be done for...' message rather than just doing nothing.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | Kbuild.include | g | 10K |  | Bernhard Walle | bernhard@bwalle.de | 1332628325 |  | scripts/Kbuild.include: Fix portability problem of "echo -e"  "echo -e" is a GNU extension. When cross-compiling the kernel on a BSD-like operating system (Mac OS X in my case), this doesn't work.  One could install a GNU version of echo, put that in the $PATH before the system echo and use "/usr/bin/env echo", but the solution with printf is simpler.  Since it is no disadvantage on Linux, I hope that gets accepted even if cross-compiling the Linux kernel on another Unix operating system is quite a rare use case.  Signed-off-by: Bernhard Walle <bernhard@bwalle.de> Andreas Bießmann <andreas@biessmann.de> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | mkmakefile | g | 1.2K |  | Peter Foley | pefoley2@verizon.net | 1311174488 |  | kbuild: silence generated makefile message  This patch silences the "make -C /usr/src/git O=/usr/src/git/build/." message shown when using the generated makefile in KBUILD_OUTDIR.  Signed-off-by: Peter Foley <pefoley2@verizon.net> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Makefile.host | g | 6.5K |  | Robert P. J. Day | rpjday@crashcourse.ca | 1209147528 |  | kbuild: fix some minor typoes  Signed-off-by: Robert P. J. Day <rpjday@crashcourse.ca> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | mkversion | g | 74B |  | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | coccicheck | s | 3.1K | 91 | Greg Dietsche | Gregory.Dietsche@cuw.edu | 1330123819 |  | coccicheck: change handling of C={1,2} when M= is set  This patch reverts a portion of d0bc1fb4 so that coccicheck will work properly when C=1 or C=2.  Reported-and-tested-by: Brice Goglin <Brice.Goglin@inria.fr> Signed-off-by: Greg Dietsche <Gregory.Dietsche@cuw.edu> Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr> Signed-off-by: Michal Marek <mmarek@suse.cz>
d | basic |  | 3 items |  | Peter Foley | pefoley2@verizon.net | 1315561547 |  | fixdep: fix extraneous dependencies  The introduction of include/linux/kconfig.h created 3 extraneous dependencies: include/config/.h include/config/h.h include/config/foo.h  Fix this by excluding kconfig.h from fixdep calculations.  Signed-off-by: Peter Foley <pefoley2@verizon.net> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | extract-ikconfig | s | 1.6K | 59 | Dick Streefland | dick@streefland.net | 1297347783 |  | scripts/extract-ikconfig: add xz compression support  Add support for kernels compressed with xz to the extract-ikconfig script.  Signed-off-by: Dick Streefland <dick@streefland.net> Acked-by: WANG Cong <xiyou.wangcong@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
