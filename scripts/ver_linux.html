<!DOCTYPE html>
<html><head><title>joekychen/linux » scripts › ver_linux

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../index.html"></a><h1>ver_linux</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div><p>Before running this script please ensure that your PATH is
typical as you use for compilation/istallation. I use
/bin /sbin /usr/bin /usr/sbin /usr/local/bin, but it may
differ on your system.</p></td><td class="code"><div class="highlight"><pre><span class="nb">echo</span> <span class="s1">&#39;If some fields are empty or look unusual you may have an old version.&#39;</span>
<span class="nb">echo</span> <span class="s1">&#39;Compare to the current minimal requirements in Documentation/Changes.&#39;</span>
<span class="nb">echo</span> <span class="s1">&#39; &#39;</span>

uname -a
<span class="nb">echo</span> <span class="s1">&#39; &#39;</span>

gcc -dumpversion 2&gt;&amp;1| awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;Gnu C                 &quot;, $1}&#39;</span>

make --version 2&gt;&amp;1 | awk -F, <span class="s1">&#39;{print $1}&#39;</span> | awk <span class="se">\</span>
      <span class="s1">&#39;/GNU Make/{print &quot;Gnu make              &quot;,$NF}&#39;</span>

<span class="nb">echo</span> <span class="s2">&quot;binutils               $(ld -v | egrep -o &#39;[0-9]+\.[0-9\.]+&#39;)&quot;</span>

<span class="nb">echo</span> -n <span class="s2">&quot;util-linux             &quot;</span>
fdformat --version | awk <span class="s1">&#39;{print $NF}&#39;</span> | sed -e s/^util-linux-// -e s/<span class="se">\)</span><span class="nv">$/</span>/

<span class="nb">echo</span> -n <span class="s2">&quot;mount                  &quot;</span>
mount --version | awk <span class="s1">&#39;{print $NF}&#39;</span> | sed -e s/^mount-// -e s/<span class="se">\)</span><span class="nv">$/</span>/

depmod -V  2&gt;&amp;1 | awk <span class="s1">&#39;NR==1 {print &quot;module-init-tools     &quot;,$NF}&#39;</span>

tune2fs 2&gt;&amp;1 | grep <span class="s2">&quot;^tune2fs&quot;</span> | sed <span class="s1">&#39;s/,//&#39;</span> |  awk <span class="se">\</span>
<span class="s1">&#39;NR==1 {print &quot;e2fsprogs             &quot;, $2}&#39;</span>

fsck.jfs -V 2&gt;&amp;1 | grep version | sed <span class="s1">&#39;s/,//&#39;</span> |  awk <span class="se">\</span>
<span class="s1">&#39;NR==1 {print &quot;jfsutils              &quot;, $3}&#39;</span>

reiserfsck -V 2&gt;&amp;1 | grep ^reiserfsck | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;reiserfsprogs         &quot;, $2}&#39;</span>

fsck.reiser4 -V 2&gt;&amp;1 | grep ^fsck.reiser4 | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;reiser4progs          &quot;, $2}&#39;</span>

xfs_db -V 2&gt;&amp;1 | grep version | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;xfsprogs              &quot;, $3}&#39;</span>

pccardctl -V 2&gt;&amp;1| grep pcmciautils | awk <span class="s1">&#39;{print &quot;pcmciautils           &quot;, $2}&#39;</span>

cardmgr -V 2&gt;&amp;1| grep version | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;pcmcia-cs             &quot;, $3}&#39;</span>

quota -V 2&gt;&amp;1 | grep version | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;quota-tools           &quot;, $NF}&#39;</span>

pppd --version 2&gt;&amp;1| grep version | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;PPP                   &quot;, $3}&#39;</span>

isdnctrl 2&gt;&amp;1 | grep version | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;isdn4k-utils          &quot;, $NF}&#39;</span>

showmount --version 2&gt;&amp;1 | grep nfs-utils | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;nfs-utils             &quot;, $NF}&#39;</span>

<span class="nb">echo</span> -n <span class="s2">&quot;Linux C Library        &quot;</span>
sed -n -e <span class="s1">&#39;/^.*\/libc-\([^/]*\)\.so$/{s//\1/;p;q}&#39;</span> &lt; /proc/self/maps

ldd -v &gt; /dev/null 2&gt;&amp;1 <span class="o">&amp;&amp;</span> ldd -v <span class="o">||</span> ldd --version |head -n 1 | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;Dynamic linker (ldd)  &quot;, $NF}&#39;</span>

ls -l /usr/lib/libg++.so /usr/lib/libstdc++.so  2&gt;/dev/null | awk -F. <span class="se">\</span>
       <span class="s1">&#39;{print &quot;Linux C++ Library      &quot; $4&quot;.&quot;$5&quot;.&quot;$6}&#39;</span>

ps --version 2&gt;&amp;1 | grep version | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;Procps                &quot;, $NF}&#39;</span>

ifconfig --version 2&gt;&amp;1 | grep tools | awk <span class="se">\</span>
<span class="s1">&#39;NR==1{print &quot;Net-tools             &quot;, $NF}&#39;</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div></td><td class="code"><div class="highlight shebang"><pre><span>#!/bin/sh
</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Kbd needs 'loadkeys -h',</p></td><td class="code"><div class="highlight"><pre>loadkeys -h 2&gt;&amp;1 | awk <span class="se">\</span>
<span class="s1">&#39;(NR==1 &amp;&amp; ($3 !~ /option/)) {print &quot;Kbd                   &quot;, $3}&#39;</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>while console-tools needs 'loadkeys -V'.</p></td><td class="code"><div class="highlight"><pre>loadkeys -V 2&gt;&amp;1 | awk <span class="se">\</span>
<span class="s1">&#39;(NR==1 &amp;&amp; ($2 ~ /console-tools/)) {print &quot;Console-tools         &quot;, $3}&#39;</span>

oprofiled --version 2&gt;&amp;1 | awk <span class="se">\</span>
<span class="s1">&#39;(NR==1 &amp;&amp; ($2 == &quot;oprofile&quot;)) {print &quot;oprofile              &quot;, $3}&#39;</span>

expr --v 2&gt;&amp;1 | awk <span class="s1">&#39;NR==1{print &quot;Sh-utils              &quot;, $NF}&#39;</span>

udevinfo -V 2&gt;&amp;1 | grep version | awk <span class="s1">&#39;{print &quot;udev                  &quot;, $3}&#39;</span>

iwconfig --version 2&gt;&amp;1 | awk <span class="se">\</span>
<span class="s1">&#39;(NR==1 &amp;&amp; ($3 == &quot;version&quot;)) {print &quot;wireless-tools        &quot;,$4}&#39;</span>

<span class="k">if</span> <span class="o">[</span> -e /proc/modules <span class="o">]</span>; <span class="k">then</span>
<span class="k">    </span><span class="nv">X</span><span class="o">=</span><span class="sb">`</span>cat /proc/modules | sed -e <span class="s2">&quot;s/ .*$//&quot;</span><span class="sb">`</span>
    <span class="nb">echo</span> <span class="s2">&quot;Modules Loaded         &quot;</span><span class="nv">$X</span>
<span class="k">fi</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:1}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../javascript/docco.min.js"></script>
</html>
