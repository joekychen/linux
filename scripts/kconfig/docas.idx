f | nconf.c | s | 38K | 1422 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337295973 |  | MCA: delete all remaining traces of microchannel bus support.  Hardware with MCA bus is limited to 386 and 486 class machines that are now 20+ years old and typically with less than 32MB of memory.  A quick search on the internet, and you see that even the MCA hobbyist/enthusiast community has lost interest in the early 2000 era and never really even moved ahead from the 2.4 kernels to the 2.6 series.  This deletes anything remaining related to CONFIG_MCA from core kernel code and from the x86 architecture.  There is no point in carrying this any further into the future.  One complication to watch for is inadvertently scooping up stuff relating to machine check, since there is overlap in the TLA name space (e.g. arch/x86/boot/mca.c).  Cc: Thomas Gleixner <tglx@linutronix.de> Cc: James Bottomley <JBottomley@Parallels.com> Cc: x86@kernel.org Acked-by: Ingo Molnar <mingo@elte.hu> Acked-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | Makefile | g | 10K |  | Linus Torvalds | torvalds@linux-foundation.org | 1326753334 |  | Merge branch 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild  * 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild:   menuconfig: fix a regression when canceling the prompt dialog at exit   kbuild: Fix compiler warning with assertion when calling 'fwrite'   Improve update-po-config output   menuconfig: let make not report error when not save configuration   merge_config.sh: fix bug in final check   merge_config.sh: whitespace cleanup   merge_config.sh: use signal names compatible with dash and bash   kconfig: add merge_config.sh script   kconfig: use xfwrite wrapper function to silence warnings   kconfig: fix set but not used warnings   kconfig: fix warnings by specifing format arguments
f | zconf.gperf | g | 1.4K |  | Arnaud Lacombe | lacombar@gmail.com | 1307642682 |  | kconfig: constify `kconf_id_lookup'  Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | gconf.glade | s | 25K | 603 | Justin P. Mattock | justinmattock@gmail.com | 1284735282 |  | scripts/kconfig/gconf.glade Update broken web addresses.  As discussed, remove the DOCTYPE declaration since libglade validates the file against itself..  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | conf.c | s | 14K | 642 | Eric W. Biederman | ebiederm@xmission.com | 1336416666 |  | kbuild: all{no,yes,mod,def,rand}config only read files when instructed to.  Prevent subtle surprises to both people working on the kconfig code and people using make allnoconfig allyesconfig allmoconfig and randconfig by only attempting to read a config file if KCONFIG_ALLCONFIG is set.  Common sense suggests attempting to read the extra config files does not make sense unless requested.  The documentation says the code won't attempt to read the extra config files unless requested. Current usage does not appear to include people depending on the code reading the config files without the variable being set So do the simple thing and stop reading config files when passed all{no,yes,mod,def,rand}config unless KCONFIG_ALLCONFIG environment variable is set.  Signed-off-by: Eric W. Biederman <ebiederm@xmission.com> Reported-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | expr.h | s | 6.9K | 194 | Arnaud Lacombe | lacombar@gmail.com | 1326583038 |  | kbuild: Fix compiler warning with assertion when calling 'fwrite'  Reinhard Tartler discovered a corner case of calling xfwrite() where the length of the string is zero.  Arnaud Lacombe suggested to use assertion for the corner case, as fwrite(3) is currently used:   1) in comment printers. Empty comment are not allowed.  2) in a callback passed to expr_print(), where the string printed is     either NULL OR non-empty.  3) in the lexer, auto-generated, and unused.  I feel using assertion is a good solution:   1) It cleanly takes care of the above-mentioned corner case.  2) It can be easily disabled by defining NDEBUG.  3) It asserts xfwrite() is simply a wrapper for fwrite().  Reported-by: Reinhard Tartler <Reinhard.Tartler@informatik.uni-erlangen.de> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Signed-off-by: Jean Sacren <sakiwit@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | zconf.lex.c_shipped | g | 56K |  | Linus Torvalds | torvalds@linux-foundation.org | 1312010226 |  | Merge branch 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6  * 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6: (25 commits)   kconfig: Introduce IS_ENABLED(), IS_BUILTIN() and IS_MODULE()   xconfig: Abort close if configuration cannot be saved   kconfig: fix missing "0x" prefix from S_HEX symbol in autoconf.h   kconfig/nconf: remove useless conditionnal   kconfig/nconf: prevent segfault on empty menu   kconfig/nconf: use the generic menu_get_ext_help()   nconfig: Avoid Wunused-but-set warning   kconfig/conf: mark xfgets() private   kconfig: remove pending prototypes for kconfig_load()   kconfig/conf: add command line options' description   kconfig/conf: reduce the scope of `defconfig_file'   kconfig: use calloc() for expr allocation   kconfig: introduce specialized printer   kconfig: do not overwrite symbol direct dependency in assignment   kconfig/gconf: silent missing prototype warnings   kconfig/gconf: kill deadcode   kconfig: nuke LKC_DIRECT_LINK cruft   kconfig: nuke reference to SWIG   kconfig: add missing <stdlib.h> inclusion   kconfig: add missing <ctype.h> inclusion   ...  Fix up conflicts in scripts/kconfig/Makefile
f | lkc_proto.h | s | 2.4K | 47 | Arnaud Lacombe | lacombar@gmail.com | 1309530207 |  | kconfig: introduce specialized printer  Make conf_write_symbol() grammar agnostic to be able to use it from different code path. These path pass a printer callback which will print a symbol's name and its value in different format.  conf_write_symbol()'s job become mostly only to prepare a string for the printer. This avoid to have to pass specialized flag to generic functions  Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> [mmarek: rebased on top of de12518 (kconfig: autogenerated config_is_xxx macro)] Signed-off-by: Michal Marek <mmarek@suse.cz>
f | util.c | s | 2.8K | 123 | Arnaud Lacombe | lacombar@gmail.com | 1307388736 |  | kconfig: add missing <stdlib.h> inclusion  This header is needed when using {m,re}alloc(3) and free(3) function family.  Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | zconf.l | g | 6.5K |  | Linus Torvalds | torvalds@linux-foundation.org | 1312010226 |  | Merge branch 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6  * 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6: (25 commits)   kconfig: Introduce IS_ENABLED(), IS_BUILTIN() and IS_MODULE()   xconfig: Abort close if configuration cannot be saved   kconfig: fix missing "0x" prefix from S_HEX symbol in autoconf.h   kconfig/nconf: remove useless conditionnal   kconfig/nconf: prevent segfault on empty menu   kconfig/nconf: use the generic menu_get_ext_help()   nconfig: Avoid Wunused-but-set warning   kconfig/conf: mark xfgets() private   kconfig: remove pending prototypes for kconfig_load()   kconfig/conf: add command line options' description   kconfig/conf: reduce the scope of `defconfig_file'   kconfig: use calloc() for expr allocation   kconfig: introduce specialized printer   kconfig: do not overwrite symbol direct dependency in assignment   kconfig/gconf: silent missing prototype warnings   kconfig/gconf: kill deadcode   kconfig: nuke LKC_DIRECT_LINK cruft   kconfig: nuke reference to SWIG   kconfig: add missing <stdlib.h> inclusion   kconfig: add missing <ctype.h> inclusion   ...  Fix up conflicts in scripts/kconfig/Makefile
f | zconf.hash.c_shipped | g | 11K |  | Arnaud Lacombe | lacombar@gmail.com | 1307642685 |  | kconfig: regen parser  Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | qconf.h | s | 7.7K | 300 | Michal Marek | mmarek@suse.cz | 1311601834 |  | xconfig: Abort close if configuration cannot be saved  Give the user an opportunity to fix the error or save the configuration under a different path.  Reported-by: Hiromu Yakura <hiromu1996@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | merge_config.sh | s | 3.3K | 115 | John Stultz | john.stultz@linaro.org | 1333113287 |  | merge_config.sh: Add option to display redundant configs  Provide a -r option to display when fragments contain redundant options. This is really useful when breaking apart a config into fragments, as well as cleaning up older fragments.  Signed-off-by: John Stultz <john.stultz@linaro.org> Acked-by: Darren Hart <dvhart@linux.intel.com> Acked-by: Bruce Ashfield <bruce.ashfield@windriver.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | mconf.c | s | 23K | 826 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337295973 |  | MCA: delete all remaining traces of microchannel bus support.  Hardware with MCA bus is limited to 386 and 486 class machines that are now 20+ years old and typically with less than 32MB of memory.  A quick search on the internet, and you see that even the MCA hobbyist/enthusiast community has lost interest in the early 2000 era and never really even moved ahead from the 2.4 kernels to the 2.6 series.  This deletes anything remaining related to CONFIG_MCA from core kernel code and from the x86 architecture.  There is no point in carrying this any further into the future.  One complication to watch for is inadvertently scooping up stuff relating to machine check, since there is overlap in the TLA name space (e.g. arch/x86/boot/mca.c).  Cc: Thomas Gleixner <tglx@linutronix.de> Cc: James Bottomley <JBottomley@Parallels.com> Cc: x86@kernel.org Acked-by: Ingo Molnar <mingo@elte.hu> Acked-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | lkc.h | s | 4.6K | 155 | Arnaud Lacombe | lacombar@gmail.com | 1326583038 |  | kbuild: Fix compiler warning with assertion when calling 'fwrite'  Reinhard Tartler discovered a corner case of calling xfwrite() where the length of the string is zero.  Arnaud Lacombe suggested to use assertion for the corner case, as fwrite(3) is currently used:   1) in comment printers. Empty comment are not allowed.  2) in a callback passed to expr_print(), where the string printed is     either NULL OR non-empty.  3) in the lexer, auto-generated, and unused.  I feel using assertion is a good solution:   1) It cleanly takes care of the above-mentioned corner case.  2) It can be easily disabled by defining NDEBUG.  3) It asserts xfwrite() is simply a wrapper for fwrite().  Reported-by: Reinhard Tartler <Reinhard.Tartler@informatik.uni-erlangen.de> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Signed-off-by: Jean Sacren <sakiwit@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | expr.c | s | 26K | 1083 | Arnaud Lacombe | lacombar@gmail.com | 1309583077 |  | kconfig: use calloc() for expr allocation  Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | menu.c | s | 14K | 541 | Arnaud Lacombe | lacombar@gmail.com | 1312812123 |  | kconfig: factor code in menu_get_ext_help()  Cc: Srinivas Kandagatla <srinivas.kandagatla@st.com> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | gconf.c | s | 38K | 1284 | Peter Foley | pefoley2@verizon.net | 1323635385 |  | kconfig: fix set but not used warnings  Remove set but not used variables to fix warnings.    HOSTCC  scripts/kconfig/gconf.o /usr/src/lto/scripts/kconfig/gconf.c: In function 'change_sym_value': /usr/src/lto/scripts/kconfig/gconf.c:833:11: warning: variable 'oldval' set but not used [-Wunused-but-set-variable] /usr/src/lto/scripts/kconfig/gconf.c: In function 'update_tree': /usr/src/lto/scripts/kconfig/gconf.c:1281:19: warning: variable 'prop' set but not used [-Wunused-but-set-variable]  Signed-off-by: Peter Foley <pefoley2@verizon.net> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | kxgettext.c | s | 4.1K | 190 | Arnaud Lacombe | lacombar@gmail.com | 1307388740 |  | kconfig: nuke LKC_DIRECT_LINK cruft  This interface is not (and has never been ?) used by any frontend, just get rid of it.  Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | POTFILES.in | g | 361B |  | EGRY Gabor | gaboregry1@t-online.hu | 1201558479 |  | kconfig: gettext support for lxdialog  Gettext support for lxdialog.  Signed-off-by: Egry Gabor <gaboregry1@t-online.hu> Reviewed-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Roman Zippel <zippel@linux-m68k.org>
f | confdata.c | s | 22K | 984 | Paul Gortmaker | paul.gortmaker@windriver.com | 1334280958 |  | kconfig: delete last traces of __enabled_ from autoconf.h  We've now fixed IS_ENABLED() and friends to not require any special "__enabled_" prefixed versions of the normal Kconfig options, so delete the last traces of them being generated.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | zconf.y | g | 15K |  | Linus Torvalds | torvalds@linux-foundation.org | 1312010226 |  | Merge branch 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6  * 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6: (25 commits)   kconfig: Introduce IS_ENABLED(), IS_BUILTIN() and IS_MODULE()   xconfig: Abort close if configuration cannot be saved   kconfig: fix missing "0x" prefix from S_HEX symbol in autoconf.h   kconfig/nconf: remove useless conditionnal   kconfig/nconf: prevent segfault on empty menu   kconfig/nconf: use the generic menu_get_ext_help()   nconfig: Avoid Wunused-but-set warning   kconfig/conf: mark xfgets() private   kconfig: remove pending prototypes for kconfig_load()   kconfig/conf: add command line options' description   kconfig/conf: reduce the scope of `defconfig_file'   kconfig: use calloc() for expr allocation   kconfig: introduce specialized printer   kconfig: do not overwrite symbol direct dependency in assignment   kconfig/gconf: silent missing prototype warnings   kconfig/gconf: kill deadcode   kconfig: nuke LKC_DIRECT_LINK cruft   kconfig: nuke reference to SWIG   kconfig: add missing <stdlib.h> inclusion   kconfig: add missing <ctype.h> inclusion   ...  Fix up conflicts in scripts/kconfig/Makefile
f | nconf.gui.c | s | 14K | 572 | Cheng Renquan | crquan@gmail.com | 1315572008 |  | scripts/kconfig/nconf: add KEY_HOME / KEY_END for dialog_inputbox  to make it easier to locate begin/end when editing long strings;  Signed-off-by: Cheng Renquan <crquan@gmail.com> Acked By: Nir Tzachar <nir.tzachar@gmail.com>
f | nconf.h | s | 1.9K | 87 | Cheng Renquan | crquan@gmail.com | 1315572008 |  | scripts/kconfig/nconf: dynamically alloc dialog_input_result  To support unlimited length string config items;  No check for realloc return value keeps code simple, and to be consistent with other existing unchecked malloc in kconfig.  Signed-off-by: Cheng Renquan <crquan@gmail.com> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | symbol.c | s | 27K | 1142 | Arnaud Lacombe | lacombar@gmail.com | 1327572116 |  | kconfig: fix new choices being skipped upon config update  Running `oldconfig' after any of the following configuration change:  either trivial addition, such as:  config A 	bool "A"  choice 	prompt "Choice ?" 	depends on A  	config CHOICE_B 		bool "Choice B"  	config CHOICE_C 		bool "Choice C" endchoice  or more tricky change:  OLD KCONFIG                      ||  NEW KCONFIG                                  ||                                  ||  config A                                  ||          bool "A"                                  || choice                           ||  choice         prompt "Choice ?"        ||          prompt "Choice ?"                                  ||         config CHOICE_C          ||          config CHOICE_C                 bool "Choice C"  ||                  bool "Choice C"                                  ||         config CHOICE_D          ||          config CHOICE_D                 bool "Choice D"  ||                  bool "Choice D" endchoice                        ||                                  ||          config CHOICE_E                                  ||                  bool "Choice E"                                  ||                  depends on A                                  ||  endchoice  will not cause the choice to be considered as NEW, and thus not be asked. The cause of this behavior is that choice's novelty are computed statically right after the saved configuration has been read. At this point, the new dependency's value is still unknown and asserted to be `no'. Moreover, no update to this decision is made afterward.  Correct this by dynamically evaluating a choice's novelty, and removing the static evaluation.  Reported-and-tested-by: Uwe Kleine-KÃ¶nig <u.kleine-koenig@pengutronix.de> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | zconf.tab.c_shipped | g | 70K |  | Linus Torvalds | torvalds@linux-foundation.org | 1312010226 |  | Merge branch 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6  * 'kconfig' of git://git.kernel.org/pub/scm/linux/kernel/git/mmarek/kbuild-2.6: (25 commits)   kconfig: Introduce IS_ENABLED(), IS_BUILTIN() and IS_MODULE()   xconfig: Abort close if configuration cannot be saved   kconfig: fix missing "0x" prefix from S_HEX symbol in autoconf.h   kconfig/nconf: remove useless conditionnal   kconfig/nconf: prevent segfault on empty menu   kconfig/nconf: use the generic menu_get_ext_help()   nconfig: Avoid Wunused-but-set warning   kconfig/conf: mark xfgets() private   kconfig: remove pending prototypes for kconfig_load()   kconfig/conf: add command line options' description   kconfig/conf: reduce the scope of `defconfig_file'   kconfig: use calloc() for expr allocation   kconfig: introduce specialized printer   kconfig: do not overwrite symbol direct dependency in assignment   kconfig/gconf: silent missing prototype warnings   kconfig/gconf: kill deadcode   kconfig: nuke LKC_DIRECT_LINK cruft   kconfig: nuke reference to SWIG   kconfig: add missing <stdlib.h> inclusion   kconfig: add missing <ctype.h> inclusion   ...  Fix up conflicts in scripts/kconfig/Makefile
d | lxdialog |  | 10 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1314663746 |  | kconfig: fix set but not used variables  Some variables were being set but never used, which was triggering warnings in GCC >= 4.6.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi> Signed-off-by: Arnaud Lacombe <lacombar@gmail.com>
f | images.c | s | 6.4K | 311 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | streamline_config.pl | s | 10K | 416 | Steven Rostedt | srostedt@redhat.com | 1326495708 |  | kconfig/streamline-config.pl: Fix parsing Makefile with variables  Thomas Lange reported that when he did a 'make localmodconfig', his config was missing the brcmsmac driver, even though he had the module loaded.  Looking into this, I found the file: drivers/net/wireless/brcm80211/brcmsmac/Makefile had the following in the Makefile:  MODULEPFX := brcmsmac  obj-$(CONFIG_BRCMSMAC)  += $(MODULEPFX).o  The way streamline-config.pl works, is parsing all the  obj-$(CONFIG_FOO) += foo.o lines to find that CONFIG_FOO belongs to the module foo.ko.  But in this case, the brcmsmac.o was not used, but a variable in its place.  By changing streamline-config.pl to remember defined variables in Makefiles and substituting them when they are used in the obj-X lines, allows Thomas (and others) to have their brcmsmac module stay configured when it is loaded and running "make localmodconfig".  Reported-by: Thomas Lange <thomas-lange2@gmx.de> Tested-by: Thomas Lange <thomas-lange2@gmx.de> Cc: Arend van Spriel <arend@broadcom.com> Cc: stable@vger.kernel.org Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
f | qconf.cc | s | 43K | 1581 | Michal Marek | mmarek@suse.cz | 1311601834 |  | xconfig: Abort close if configuration cannot be saved  Give the user an opportunity to fix the error or save the configuration under a different path.  Reported-by: Hiromu Yakura <hiromu1996@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | check.sh | s | 214B | 13 | Sam Ravnborg | sam@ravnborg.org | 1192216430 |  | kbuild: check if we can link gettext not just compile  cygwin provides the header file but the lib file needs to be added manually. A generic fix is to check if we can compile and link a program that uses gettext() and if it fails fall back to NO_NLS.  International users of cygwin may have to specify HOST_LOADLIBES := "-lintl" on the make command line.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
