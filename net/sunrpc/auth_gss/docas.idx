f | auth_gss.c | s | 44K | 1529 | Trond Myklebust | Trond.Myklebust@netapp.com | 1330720598 |  | SUNRPC: Use RCU to dereference the rpc_clnt.cl_xprt field  A migration event will replace the rpc_xprt used by an rpc_clnt.  To ensure this can be done safely, all references to cl_xprt must now use a form of rcu_dereference().  Special care is taken with rpc_peeraddr2str(), which returns a pointer to memory whose lifetime is the same as the rpc_xprt.  Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com> [ cel: fix lockdep splats and layering violations ] [ cel: forward ported to 3.4 ] [ cel: remove rpc_max_reqs(), add rpc_net_ns() ] Signed-off-by: Chuck Lever <chuck.lever@oracle.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | svcauth_gss.c | s | 38K | 1377 | Linus Torvalds | torvalds@linux-foundation.org | 1338564778 |  | Merge branch 'for-3.5' of git://linux-nfs.org/~bfields/linux  Pull the rest of the nfsd commits from Bruce Fields:  "... and then I cherry-picked the remainder of the patches from the   head of my previous branch"  This is the rest of the original nfsd branch, rebased without the delegation stuff that I thought really needed to be redone.  I don't like rebasing things like this in general, but in this situation this was the lesser of two evils.  * 'for-3.5' of git://linux-nfs.org/~bfields/linux: (50 commits)   nfsd4: fix, consolidate client_has_state   nfsd4: don't remove rebooted client record until confirmation   nfsd4: remove some dprintk's and a comment   nfsd4: return "real" sequence id in confirmed case   nfsd4: fix exchange_id to return confirm flag   nfsd4: clarify that renewing expired client is a bug   nfsd4: simpler ordering of setclientid_confirm checks   nfsd4: setclientid: remove pointless assignment   nfsd4: fix error return in non-matching-creds case   nfsd4: fix setclientid_confirm same_cred check   nfsd4: merge 3 setclientid cases to 2   nfsd4: pull out common code from setclientid cases   nfsd4: merge last two setclientid cases   nfsd4: setclientid/confirm comment cleanup   nfsd4: setclientid remove unnecessary terms from a logical expression   nfsd4: move rq_flavor into svc_cred   nfsd4: stricter cred comparison for setclientid/exchange_id   nfsd4: move principal name into svc_cred   nfsd4: allow removing clients not holding state   nfsd4: rearrange exchange_id logic to simplify   ...
f | Makefile | g | 380B |  | Tracey Dent | tdent48227@gmail.com | 1290442576 |  | Net: sunrpc: auth_gss: Makefile: Remove deprecated kbuild goal definitions  Changed Makefile to use <modules>-y instead of <modules>-objs because -objs is deprecated and not mentioned in Documentation/kbuild/makefiles.txt.  Signed-off-by: Tracey Dent <tdent48227@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | gss_krb5_unseal.c | s | 6.6K | 186 | Kevin Coffman | kwc@citi.umich.edu | 1273864160 |  | gss_krb5: Add support for rc4-hmac encryption  Add necessary changes to add kernel support for the rc4-hmac Kerberos encryption type used by Microsoft and described in rfc4757.  Signed-off-by: Kevin Coffman <kwc@citi.umich.edu> Signed-off-by: Steve Dickson <steved@redhat.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | gss_mech_switch.c | s | 9.8K | 348 | Steve Dickson | steved@redhat.com | 1336062933 |  | auth_gss: the list of pseudoflavors not being parsed correctly  gss_mech_list_pseudoflavors() parses a list of registered mechanisms. On that list contains a list of pseudo flavors which was not being parsed correctly, causing only the first pseudo flavor to be found.  Signed-off-by: Steve Dickson <steved@redhat.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | gss_krb5_seqnum.c | s | 4.5K | 139 | Eric Dumazet | eric.dumazet@gmail.com | 1285277619 |  | net: return operator cleanup  Change "return (EXPR);" to "return EXPR;"  return is not a function, parentheses are not required.  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | gss_krb5_seal.c | s | 6.5K | 186 | Trond Myklebust | Trond.Myklebust@netapp.com | 1331508602 |  | SUNRPC: Fix a few sparse warnings  net/sunrpc/svcsock.c:412:22: warning: incorrect type in assignment (different address spaces)  - svc_partial_recvfrom now takes a struct kvec, so the variable    save_iovbase needs to be an ordinary (void *)  Make a bunch of variables in net/sunrpc/xprtsock.c static  Fix a couple of "warning: symbol 'foo' was not declared. Should it be static?" reports.  Fix a couple of conflicting function declarations.  Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | gss_generic_token.c | s | 6.1K | 196 | Eric Dumazet | eric.dumazet@gmail.com | 1285277619 |  | net: return operator cleanup  Change "return (EXPR);" to "return EXPR;"  return is not a function, parentheses are not required.  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | gss_krb5_wrap.c | s | 17K | 512 | J. Bruce Fields | bfields@redhat.com | 1338510579 |  | rpc: handle rotated gss data for Windows interoperability  The data in Kerberos gss tokens can be rotated.  But we were lazy and rejected any nonzero rotation value.  It wasn't necessary for the implementations we were testing against at the time.  But it appears that Windows does use a nonzero value here.  So, implement rotation to bring ourselves into compliance with the spec and to interoperate with Windows.  Signed-off-by: J. Bruce Fields <bfields@redhat.com>
f | gss_krb5_mech.c | s | 19K | 700 | Eric Dumazet | eric.dumazet@gmail.com | 1334508280 |  | net: cleanup unsigned to unsigned int  Use of "unsigned int" is preferred to bare "unsigned" in net tree.  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | gss_krb5_crypto.c | s | 24K | 836 | Trond Myklebust | Trond.Myklebust@netapp.com | 1331573836 |  | SUNRPC: Don't use variable length automatic arrays in kernel code  Replace the variable length array in the RPCSEC_GSS crypto code with a fixed length one. The size should be bounded by the variable GSS_KRB5_MAX_BLOCKSIZE, so use that.  Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | gss_krb5_keys.c | s | 8.9K | 283 | Trond Myklebust | Trond.Myklebust@netapp.com | 1273864173 |  | NFS: Don't use GFP_KERNEL in rpcsec_gss downcalls  Again, we can deadlock if the memory reclaim triggers a writeback that requires a rpcsec_gss credential lookup.  Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
