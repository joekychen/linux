f | crush.c | s | 2.6K | 111 | Sage Weil | sage@inktank.com | 1336430376 |  | crush: fix memory leak when destroying tree buckets  Reflects ceph.git commit 46d63d98434b3bc9dad2fc9ab23cbaedc3bcb0e4.  Reported-by: Alexander Lyakas <alex.bolshoy@gmail.com> Reviewed-by: Alex Elder <elder@inktank.com> Signed-off-by: Sage Weil <sage@inktank.com>
f | mapper.c | s | 12K | 513 | Linus Torvalds | torvalds@linux-foundation.org | 1338401839 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/sage/ceph-client  Pull ceph updates from Sage Weil:  "There are some updates and cleanups to the CRUSH placement code, a bug   fix with incremental maps, several cleanups and fixes from Josh Durgin   in the RBD block device code, a series of cleanups and bug fixes from   Alex Elder in the messenger code, and some miscellaneous bounds   checking and gfp cleanups/fixes."  Fix up trivial conflicts in net/ceph/{messenger.c,osdmap.c} due to the networking people preferring "unsigned int" over just "unsigned".  * git://git.kernel.org/pub/scm/linux/kernel/git/sage/ceph-client: (45 commits)   libceph: fix pg_temp updates   libceph: avoid unregistering osd request when not registered   ceph: add auth buf in prepare_write_connect()   ceph: rename prepare_connect_authorizer()   ceph: return pointer from prepare_connect_authorizer()   ceph: use info returned by get_authorizer   ceph: have get_authorizer methods return pointers   ceph: ensure auth ops are defined before use   ceph: messenger: reduce args to create_authorizer   ceph: define ceph_auth_handshake type   ceph: messenger: check return from get_authorizer   ceph: messenger: rework prepare_connect_authorizer()   ceph: messenger: check prepare_write_connect() result   ceph: don't set WRITE_PENDING too early   ceph: drop msgr argument from prepare_write_connect()   ceph: messenger: send banner in process_connect()   ceph: messenger: reset connection kvec caller   libceph: don't reset kvec in prepare_write_banner()   ceph: ignore preferred_osd field   ceph: fully initialize new layout   ...
f | hash.c | s | 3.1K | 134 | Yehuda Sadeh | yehuda@hq.newdream.net | 1287614248 |  | ceph: factor out libceph from Ceph file system  This factors out protocol and low-level storage parts of ceph into a separate libceph module living in net/ceph and include/linux/ceph.  This is mostly a matter of moving files around.  However, a few key pieces of the interface change as well:   - ceph_client becomes ceph_fs_client and ceph_client, where the latter    captures the mon and osd clients, and the fs_client gets the mds client    and file system specific pieces.  - Mount option parsing and debugfs setup is correspondingly broken into    two pieces.  - The mon client gets a generic handler callback for otherwise unknown    messages (mds map, in this case).  - The basic supported/required feature bits can be expanded (and are by    ceph_fs_client).  No functional change, aside from some subtle error handling cases that got cleaned up in the refactoring process.  Signed-off-by: Sage Weil <sage@newdream.net>
