f | ebt_ulog.c | s | 8.7K | 288 | Joe Perches | joe@perches.com | 1320135589 |  | netfilter: Remove unnecessary OOM logging messages  Site specific OOM messages are duplications of a generic MM out of memory message and aren't really useful, so just delete them.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Patrick McHardy <kaber@trash.net> Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
f | ebtable_filter.c | s | 3.1K | 123 | Alexey Dobriyan | adobriyan@gmail.com | 1263799547 |  | netfilter: xtables: add struct xt_mtdtor_param::net  Add ->net to match destructor list like ->net in constructor list.  Make sure it's set in ebtables/iptables/ip6tables, this requires to propagate netns up to *_unregister_table().  Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com> Signed-off-by: Patrick McHardy <kaber@trash.net>
f | ebtable_nat.c | s | 3.0K | 123 | Alexey Dobriyan | adobriyan@gmail.com | 1263799547 |  | netfilter: xtables: add struct xt_mtdtor_param::net  Add ->net to match destructor list like ->net in constructor list.  Make sure it's set in ebtables/iptables/ip6tables, this requires to propagate netns up to *_unregister_table().  Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com> Signed-off-by: Patrick McHardy <kaber@trash.net>
f | Makefile | g | 1.1K |  | Randy Dunlap | randy.dunlap@oracle.com | 1213744573 |  | bridge: fix IPV6=n build  Fix bridge netfilter code so that it uses CONFIG_IPV6 as needed:  net/built-in.o: In function `ebt_filter_ip6': ebt_ip6.c:(.text+0x87c37): undefined reference to `ipv6_skip_exthdr' net/built-in.o: In function `ebt_log_packet': ebt_log.c:(.text+0x88dee): undefined reference to `ipv6_skip_exthdr' make[1]: *** [.tmp_vmlinux1] Error 1  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ebt_among.c | s | 5.6K | 207 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_mark_m.c | s | 2.3K | 84 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_arp.c | s | 3.6K | 126 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_nflog.c | s | 1.7K | 62 | Jan Engelhardt | jengelh@medozas.de | 1273595477 |  | netfilter: xtables: substitute temporary defines by final name  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_log.c | s | 5.6K | 201 | Igor MaraviÄ‡ | igorm@etf.rs | 1324068592 |  | net:bridge: use IS_ENABLED  Use IS_ENABLED(CONFIG_FOO) instead of defined(CONFIG_FOO) |||| defined (CONFIG_FOO_MODULE)  Signed-off-by: Igor MaraviÄ‡ <igorm@etf.rs> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ebt_ip.c | s | 3.2K | 121 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_dnat.c | s | 1.8K | 64 | Jan Engelhardt | jengelh@medozas.de | 1273595477 |  | netfilter: xtables: substitute temporary defines by final name  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebtable_broute.c | s | 2.3K | 90 | Stephen Hemminger | shemminger@vyatta.com | 1312284563 |  | rcu: convert uses of rcu_assign_pointer(x, NULL) to RCU_INIT_POINTER  When assigning a NULL value to an RCU protected pointer, no barrier is needed. The rcu_assign_pointer, used to handle that but will soon change to not handle the special case.  Convert all rcu_assign_pointer of NULL value.  //smpl @@ expression P; @@  - rcu_assign_pointer(P, NULL) + RCU_INIT_POINTER(P, NULL)  // </smpl>  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Acked-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ebt_vlan.c | s | 5.4K | 156 | Jesse Gross | jesse@nicira.com | 1287649610 |  | vlan: Rename VLAN_GROUP_ARRAY_LEN to VLAN_N_VID.  VLAN_GROUP_ARRAY_LEN is simply the number of possible vlan VIDs. Since vlan groups will soon be more of an implementation detail for vlan devices, rename the constant to be descriptive of its actual purpose.  Signed-off-by: Jesse Gross <jesse@nicira.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ebt_mark.c | s | 2.6K | 95 | Jan Engelhardt | jengelh@medozas.de | 1273595477 |  | netfilter: xtables: substitute temporary defines by final name  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_pkttype.c | s | 1.3K | 48 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_802_3.c | s | 1.7K | 61 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_arpreply.c | s | 2.4K | 84 | Jan Engelhardt | jengelh@medozas.de | 1273595477 |  | netfilter: xtables: substitute temporary defines by final name  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_limit.c | s | 3.2K | 108 | Jan Engelhardt | jengelh@medozas.de | 1273595617 |  | netfilter: xtables: deconstify struct xt_action_param for matches  In future, layer-3 matches will be an xt module of their own, and need to set the fragoff and thoff fields. Adding more pointers would needlessy increase memory requirements (esp. so for 64-bit, where pointers are wider).  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_redirect.c | s | 2.0K | 70 | Jiri Pirko | jpirko@redhat.com | 1276627738 |  | bridge: use rx_handler_data pointer to store net_bridge_port pointer  Register net_bridge_port pointer as rx_handler data pointer. As br_port is removed from struct net_device, another netdev priv_flag is added to indicate the device serves as a bridge port. Also rcuized pointers are now correctly dereferenced in br_fdb.c and in netfilter parts.  Signed-off-by: Jiri Pirko <jpirko@redhat.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 6.8K |  | Bart De Schuymer | bdschuym@pandora.be | 1311950430 |  | netfilter: ebtables: fix ebtables build dependency  The configuration of ebtables shouldn't depend on CONFIG_BRIDGE_NETFILTER, only on CONFIG_NETFILTER.  Reported-by: Sébastien Laveze <slaveze@gmail.com> Signed-off-by: Bart De Schuymer <bdschuym@pandora.be> Signed-off-by: Patrick McHardy <kaber@trash.net>
f | ebtables.c | s | 61K | 2096 | Pablo Neira Ayuso | pablo@netfilter.org | 1331063029 |  | netfilter: bridge: fix wrong pointer dereference  In adf7ff8, a invalid dereference was added in ebt_make_names.  CC [M]  net/bridge/netfilter/ebtables.o net/bridge/netfilter/ebtables.c: In function `ebt_make_names': net/bridge/netfilter/ebtables.c:1371:20: warning: `t' may be used uninitialized in this function [-Wuninitialized]  Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ebt_ip6.c | s | 4.2K | 145 | Jesse Gross | jesse@nicira.com | 1322933710 |  | ipv6: Add fragment reporting to ipv6_skip_exthdr().  While parsing through IPv6 extension headers, fragment headers are skipped making them invisible to the caller.  This reports the fragment offset of the last header in order to make it possible to determine whether the packet is fragmented and, if so whether it is a first or last fragment.  Signed-off-by: Jesse Gross <jesse@nicira.com>
f | ebt_snat.c | s | 2.0K | 76 | Jan Engelhardt | jengelh@medozas.de | 1273595477 |  | netfilter: xtables: substitute temporary defines by final name  Signed-off-by: Jan Engelhardt <jengelh@medozas.de>
f | ebt_stp.c | s | 4.9K | 178 | Joe Perches | joe@perches.com | 1336610957 |  | bridge: netfilter: Convert compare_ether_addr to ether_addr_equal  Use the new bool function ether_addr_equal to add some clarity and reduce the likelihood for misuse of compare_ether_addr for sorting.  Done via cocci script:  $ cat compare_ether_addr.cocci @@ expression a,b; @@ -	!compare_ether_addr(a, b) +	ether_addr_equal(a, b)  @@ expression a,b; @@ -	compare_ether_addr(a, b) +	!ether_addr_equal(a, b)  @@ expression a,b; @@ -	!ether_addr_equal(a, b) == 0 +	ether_addr_equal(a, b)  @@ expression a,b; @@ -	!ether_addr_equal(a, b) != 0 +	!ether_addr_equal(a, b)  @@ expression a,b; @@ -	ether_addr_equal(a, b) == 0 +	!ether_addr_equal(a, b)  @@ expression a,b; @@ -	ether_addr_equal(a, b) != 0 +	ether_addr_equal(a, b)  @@ expression a,b; @@ -	!!ether_addr_equal(a, b) +	ether_addr_equal(a, b)  Signed-off-by: Joe Perches <joe@perches.com> Acked-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
