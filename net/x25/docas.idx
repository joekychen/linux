f | af_x25.c | s | 40K | 1587 | Igor Maravić | igorm@etf.rs | 1324068592 |  | net:x25: use IS_ENABLED  Use IS_ENABLED(CONFIG_FOO) instead of defined(CONFIG_FOO) |||| defined (CONFIG_FOO_MODULE)  Signed-off-by: Igor Maravić <igorm@etf.rs> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_forward.c | s | 3.8K | 140 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | x25_proc.c | s | 6.3K | 224 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103830 |  | net: Add export.h for EXPORT_SYMBOL/THIS_MODULE to non-modules  These files are non modular, but need to export symbols using the macros now living in export.h -- call out the include so that things won't break when we remove the implicit presence of module.h from everywhere.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | Makefile | g | 271B |  | Andrew Hendry | andrew.hendry@gmail.com | 1170970442 |  | [X.25]: Add call forwarding  Adds call forwarding to X.25, allowing it to operate like an X.25 router. Useful if one needs to manipulate X.25 traffic with tools like tc. This is an update/cleanup based off a patch submitted by Daniel Ferenci a few years ago.  Thanks Alan for the feedback. Added the null check to the clones. Moved the skb_clone's into the forwarding functions.  Worked ok with Cisco XoT, linux X.25 back to back, and some old NTUs/PADs.  Signed-off-by: Andrew Hendry <andrew.hendry@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_in.c | s | 9.8K | 359 | Matthew Daley | mattjd@gmail.com | 1318894299 |  | x25: Handle undersized/fragmented skbs  There are multiple locations in the X.25 packet layer where a skb is assumed to be of at least a certain size and that all its data is currently available at skb->data.  These assumptions are not checked, hence buffer overreads may occur.  Use pskb_may_pull to check these minimal size assumptions and ensure that data is available at skb->data when necessary, as well as use skb_copy_bits where needed.  Signed-off-by: Matthew Daley <mattjd@gmail.com> Cc: Eric Dumazet <eric.dumazet@gmail.com> Cc: Andrew Hendry <andrew.hendry@gmail.com> Cc: stable <stable@kernel.org> Acked-by: Andrew Hendry <andrew.hendry@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_link.c | s | 8.9K | 339 | Matthew Daley | mattjd@gmail.com | 1318894299 |  | x25: Handle undersized/fragmented skbs  There are multiple locations in the X.25 packet layer where a skb is assumed to be of at least a certain size and that all its data is currently available at skb->data.  These assumptions are not checked, hence buffer overreads may occur.  Use pskb_may_pull to check these minimal size assumptions and ensure that data is available at skb->data when necessary, as well as use skb_copy_bits where needed.  Signed-off-by: Matthew Daley <mattjd@gmail.com> Cc: Eric Dumazet <eric.dumazet@gmail.com> Cc: Andrew Hendry <andrew.hendry@gmail.com> Cc: stable <stable@kernel.org> Acked-by: Andrew Hendry <andrew.hendry@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_route.c | s | 4.8K | 188 | Igor Maravić | igorm@etf.rs | 1324068592 |  | net:x25: use IS_ENABLED  Use IS_ENABLED(CONFIG_FOO) instead of defined(CONFIG_FOO) |||| defined (CONFIG_FOO_MODULE)  Signed-off-by: Igor Maravić <igorm@etf.rs> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_timer.c | s | 3.8K | 143 | David S. Miller | davem@davemloft.net | 1245156030 |  | x25: Fix sleep from timer on socket destroy.  If socket destuction gets delayed to a timer, we try to lock_sock() from that timer which won't work.  Use bh_lock_sock() in that case.  Signed-off-by: David S. Miller <davem@davemloft.net> Tested-by: Ingo Molnar <mingo@elte.hu>
f | x25_subr.c | s | 9.5K | 342 | Matthew Daley | mattjd@gmail.com | 1318894299 |  | x25: Handle undersized/fragmented skbs  There are multiple locations in the X.25 packet layer where a skb is assumed to be of at least a certain size and that all its data is currently available at skb->data.  These assumptions are not checked, hence buffer overreads may occur.  Use pskb_may_pull to check these minimal size assumptions and ensure that data is available at skb->data when necessary, as well as use skb_copy_bits where needed.  Signed-off-by: Matthew Daley <mattjd@gmail.com> Cc: Eric Dumazet <eric.dumazet@gmail.com> Cc: Andrew Hendry <andrew.hendry@gmail.com> Cc: stable <stable@kernel.org> Acked-by: Andrew Hendry <andrew.hendry@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_facilities.c | s | 9.0K | 312 | Eric Dumazet | eric.dumazet@gmail.com | 1334508280 |  | net: cleanup unsigned to unsigned int  Use of "unsigned int" is preferred to bare "unsigned" in net tree.  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_dev.c | s | 4.4K | 192 | Eric Dumazet | edumazet@google.com | 1335234508 |  | net: add a limit parameter to sk_add_backlog()  sk_add_backlog() & sk_rcvqueues_full() hard coded sk_rcvbuf as the memory limit. We need to make this limit a parameter for TCP use.  No functional change expected in this patch, all callers still using the old sk_rcvbuf limit.  Signed-off-by: Eric Dumazet <edumazet@google.com> Cc: Neal Cardwell <ncardwell@google.com> Cc: Tom Herbert <therbert@google.com> Cc: Maciej Żenczykowski <maze@google.com> Cc: Yuchung Cheng <ycheng@google.com> Cc: Ilpo Järvinen <ilpo.jarvinen@helsinki.fi> Cc: Rick Jones <rick.jones2@hp.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | x25_out.c | s | 5.3K | 186 | Arnd Bergmann | arnd@arndb.de | 1299318945 |  | x25: remove the BKL  This replaces all instances of lock_kernel in x25 with lock_sock, taking care to release the socket lock around sleeping functions (sock_alloc_send_skb and skb_recv_datagram). It is not clear whether this is a correct solution, but it seem to be what other protocols do in the same situation.  Includes a fix suggested by Eric Dumazet.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Acked-by: David S. Miller <davem@davemloft.net> Tested-by: Andrew Hendry <andrew.hendry@gmail.com> Cc: linux-x25@vger.kernel.org Cc: netdev@vger.kernel.org Cc: Eric Dumazet <eric.dumazet@gmail.com>
f | sysctl_net_x25.c | s | 1.9K | 78 | Eric W. Biederman | ebiederm@xmission.com | 1334971350 |  | net: Convert all sysctl registrations to register_net_sysctl  This results in code with less boiler plate that is a bit easier to read.  Additionally stops us from using compatibility code in the sysctl core, hastening the day when the compatibility code can be removed.  Signed-off-by: Eric W. Biederman <ebiederm@xmission.com> Acked-by: Pavel Emelyanov <xemul@parallels.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | Kconfig | g | 1.6K |  | Arnd Bergmann | arnd@arndb.de | 1299318945 |  | x25: remove the BKL  This replaces all instances of lock_kernel in x25 with lock_sock, taking care to release the socket lock around sleeping functions (sock_alloc_send_skb and skb_recv_datagram). It is not clear whether this is a correct solution, but it seem to be what other protocols do in the same situation.  Includes a fix suggested by Eric Dumazet.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Acked-by: David S. Miller <davem@davemloft.net> Tested-by: Andrew Hendry <andrew.hendry@gmail.com> Cc: linux-x25@vger.kernel.org Cc: netdev@vger.kernel.org Cc: Eric Dumazet <eric.dumazet@gmail.com>
