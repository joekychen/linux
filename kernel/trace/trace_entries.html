<!DOCTYPE html>
<html><head><title>joekychen/linux » kernel › trace › trace_entries.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>trace_entries.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file defines the trace event structures that go into the ring</span>
<span class="cm"> * buffer directly. They are created via macros so that changes for them</span>
<span class="cm"> * appear in the format file. Using macros will automate this process.</span>
<span class="cm"> *</span>
<span class="cm"> * The macro used to create a ftrace data structure is:</span>
<span class="cm"> *</span>
<span class="cm"> * FTRACE_ENTRY( name, struct_name, id, structure, print )</span>
<span class="cm"> *</span>
<span class="cm"> * @name: the name used the event name, as well as the name of</span>
<span class="cm"> *   the directory that holds the format file.</span>
<span class="cm"> *</span>
<span class="cm"> * @struct_name: the name of the structure that is created.</span>
<span class="cm"> *</span>
<span class="cm"> * @id: The event identifier that is used to detect what event</span>
<span class="cm"> *    this is from the ring buffer.</span>
<span class="cm"> *</span>
<span class="cm"> * @structure: the structure layout</span>
<span class="cm"> *</span>
<span class="cm"> *  - __field(	type,	item	)</span>
<span class="cm"> *	  This is equivalent to declaring</span>
<span class="cm"> *		type	item;</span>
<span class="cm"> *	  in the structure.</span>
<span class="cm"> *  - __array(	type,	item,	size	)</span>
<span class="cm"> *	  This is equivalent to declaring</span>
<span class="cm"> *		type	item[size];</span>
<span class="cm"> *	  in the structure.</span>
<span class="cm"> *</span>
<span class="cm"> *   * for structures within structures, the format of the internal</span>
<span class="cm"> *	structure is laid out. This allows the internal structure</span>
<span class="cm"> *	to be deciphered for the format file. Although these macros</span>
<span class="cm"> *	may become out of sync with the internal structure, they</span>
<span class="cm"> *	will create a compile error if it happens. Since the</span>
<span class="cm"> *	internel structures are just tracing helpers, this is not</span>
<span class="cm"> *	an issue.</span>
<span class="cm"> *</span>
<span class="cm"> *	When an internal structure is used, it should use:</span>
<span class="cm"> *</span>
<span class="cm"> *	__field_struct(	type,	item	)</span>
<span class="cm"> *</span>
<span class="cm"> *	instead of __field. This will prevent it from being shown in</span>
<span class="cm"> *	the output file. The fields in the structure should use.</span>
<span class="cm"> *</span>
<span class="cm"> *	__field_desc(	type,	container,	item		)</span>
<span class="cm"> *	__array_desc(	type,	container,	item,	len	)</span>
<span class="cm"> *</span>
<span class="cm"> *	type, item and len are the same as __field and __array, but</span>
<span class="cm"> *	container is added. This is the name of the item in</span>
<span class="cm"> *	__field_struct that this is describing.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * @print: the print format shown to users in the format file.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Function trace entry - function address and parent function address:</span>
<span class="cm"> */</span>
<span class="n">FTRACE_ENTRY_REG</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">ftrace_entry</span><span class="p">,</span>

	<span class="n">TRACE_FN</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">ip</span>		<span class="p">)</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">parent_ip</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot; %lx &lt;-- %lx&quot;</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">ip</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">parent_ip</span><span class="p">),</span>

	<span class="n">FILTER_TRACE_FN</span><span class="p">,</span>

	<span class="n">perf_ftrace_event_register</span>
<span class="p">);</span>

<span class="cm">/* Function call entry */</span>
<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">funcgraph_entry</span><span class="p">,</span> <span class="n">ftrace_graph_ent_entry</span><span class="p">,</span>

	<span class="n">TRACE_GRAPH_ENT</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field_struct</span><span class="p">(</span>	<span class="k">struct</span> <span class="n">ftrace_graph_ent</span><span class="p">,</span>	<span class="n">graph_ent</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">graph_ent</span><span class="p">,</span>	<span class="n">func</span>		<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">int</span><span class="p">,</span>		<span class="n">graph_ent</span><span class="p">,</span>	<span class="n">depth</span>		<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;--&gt; %lx (%d)&quot;</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">func</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">depth</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="cm">/* Function return entry */</span>
<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">funcgraph_exit</span><span class="p">,</span> <span class="n">ftrace_graph_ret_entry</span><span class="p">,</span>

	<span class="n">TRACE_GRAPH_RET</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field_struct</span><span class="p">(</span>	<span class="k">struct</span> <span class="n">ftrace_graph_ret</span><span class="p">,</span>	<span class="n">ret</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">ret</span><span class="p">,</span>		<span class="n">func</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span>	<span class="n">calltime</span><span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span>	<span class="n">rettime</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">ret</span><span class="p">,</span>		<span class="n">overrun</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">int</span><span class="p">,</span>		<span class="n">ret</span><span class="p">,</span>		<span class="n">depth</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;&lt;-- %lx (%d) (start: %llx  end: %llx) over: %d&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">func</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">depth</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">calltime</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">rettime</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">depth</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Context switch trace entry - which task (and prio) we switched from/to:</span>
<span class="cm"> *</span>
<span class="cm"> * This is used for both wakeup and context switches. We only want</span>
<span class="cm"> * to create one structure, but we need two outputs for it.</span>
<span class="cm"> */</span>
<span class="cp">#define FTRACE_CTX_FIELDS					\</span>
<span class="cp">	__field(	unsigned int,	prev_pid	)	\</span>
<span class="cp">	__field(	unsigned int,	next_pid	)	\</span>
<span class="cp">	__field(	unsigned int,	next_cpu	)       \</span>
<span class="cp">	__field(	unsigned char,	prev_prio	)	\</span>
<span class="cp">	__field(	unsigned char,	prev_state	)	\</span>
<span class="cp">	__field(	unsigned char,	next_prio	)	\</span>
<span class="cp">	__field(	unsigned char,	next_state	)</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">context_switch</span><span class="p">,</span> <span class="n">ctx_switch_entry</span><span class="p">,</span>

	<span class="n">TRACE_CTX</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">FTRACE_CTX_FIELDS</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%u:%u:%u  ==&gt; %u:%u:%u [%03u]&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">prev_pid</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">prev_prio</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">prev_state</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_pid</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_prio</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_state</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_cpu</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * FTRACE_ENTRY_DUP only creates the format file, it will not</span>
<span class="cm"> *  create another structure.</span>
<span class="cm"> */</span>
<span class="n">FTRACE_ENTRY_DUP</span><span class="p">(</span><span class="n">wakeup</span><span class="p">,</span> <span class="n">ctx_switch_entry</span><span class="p">,</span>

	<span class="n">TRACE_WAKE</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">FTRACE_CTX_FIELDS</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%u:%u:%u  ==+ %u:%u:%u [%03u]&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">prev_pid</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">prev_prio</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">prev_state</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_pid</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_prio</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_state</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">next_cpu</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Stack-trace entry:</span>
<span class="cm"> */</span>

<span class="cp">#define FTRACE_STACK_ENTRIES	8</span>

<span class="cp">#ifndef CONFIG_64BIT</span>
<span class="cp"># define IP_FMT &quot;%08lx&quot;</span>
<span class="cp">#else</span>
<span class="cp"># define IP_FMT &quot;%016lx&quot;</span>
<span class="cp">#endif</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">kernel_stack</span><span class="p">,</span> <span class="n">stack_entry</span><span class="p">,</span>

	<span class="n">TRACE_STACK</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">int</span><span class="p">,</span>		<span class="n">size</span>	<span class="p">)</span>
		<span class="n">__dynamic_array</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">caller</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">7</span><span class="p">]),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">user_stack</span><span class="p">,</span> <span class="n">userstack_entry</span><span class="p">,</span>

	<span class="n">TRACE_USER_STACK</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span>	<span class="n">tgid</span>	<span class="p">)</span>
		<span class="n">__array</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">caller</span><span class="p">,</span> <span class="n">FTRACE_STACK_ENTRIES</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span>
		 <span class="s">&quot;</span><span class="se">\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n\t</span><span class="s">=&gt; (&quot;</span> <span class="n">IP_FMT</span> <span class="s">&quot;)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">caller</span><span class="p">[</span><span class="mi">7</span><span class="p">]),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * trace_printk entry:</span>
<span class="cm"> */</span>
<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">bprint</span><span class="p">,</span> <span class="n">bprint_entry</span><span class="p">,</span>

	<span class="n">TRACE_BPRINT</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">ip</span>	<span class="p">)</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>	<span class="n">fmt</span>	<span class="p">)</span>
		<span class="n">__dynamic_array</span><span class="p">(</span>	<span class="n">u32</span><span class="p">,</span>	<span class="n">buf</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%08lx fmt:%p&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">ip</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">fmt</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">print</span><span class="p">,</span> <span class="n">print_entry</span><span class="p">,</span>

	<span class="n">TRACE_PRINT</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">ip</span>	<span class="p">)</span>
		<span class="n">__dynamic_array</span><span class="p">(</span>	<span class="kt">char</span><span class="p">,</span>	<span class="n">buf</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%08lx %s&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">ip</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">buf</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">mmiotrace_rw</span><span class="p">,</span> <span class="n">trace_mmiotrace_rw</span><span class="p">,</span>

	<span class="n">TRACE_MMIO_RW</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field_struct</span><span class="p">(</span>	<span class="k">struct</span> <span class="n">mmiotrace_rw</span><span class="p">,</span>	<span class="n">rw</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="n">resource_size_t</span><span class="p">,</span> <span class="n">rw</span><span class="p">,</span>	<span class="n">phys</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">rw</span><span class="p">,</span>	<span class="n">value</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">rw</span><span class="p">,</span>	<span class="n">pc</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">int</span><span class="p">,</span> 		<span class="n">rw</span><span class="p">,</span>	<span class="n">map_id</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">char</span><span class="p">,</span>	<span class="n">rw</span><span class="p">,</span>	<span class="n">opcode</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">char</span><span class="p">,</span>	<span class="n">rw</span><span class="p">,</span>	<span class="n">width</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%lx %lx %lx %d %x %x&quot;</span><span class="p">,</span>
		 <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="n">__entry</span><span class="o">-&gt;</span><span class="n">phys</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">map_id</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">opcode</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">mmiotrace_map</span><span class="p">,</span> <span class="n">trace_mmiotrace_map</span><span class="p">,</span>

	<span class="n">TRACE_MMIO_MAP</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field_struct</span><span class="p">(</span>	<span class="k">struct</span> <span class="n">mmiotrace_map</span><span class="p">,</span>	<span class="n">map</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="n">resource_size_t</span><span class="p">,</span> <span class="n">map</span><span class="p">,</span>	<span class="n">phys</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">map</span><span class="p">,</span>	<span class="n">virt</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>	<span class="n">map</span><span class="p">,</span>	<span class="n">len</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">int</span><span class="p">,</span> 		<span class="n">map</span><span class="p">,</span>	<span class="n">map_id</span>	<span class="p">)</span>
		<span class="n">__field_desc</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">char</span><span class="p">,</span>	<span class="n">map</span><span class="p">,</span>	<span class="n">opcode</span>	<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%lx %lx %lx %d %x&quot;</span><span class="p">,</span>
		 <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="n">__entry</span><span class="o">-&gt;</span><span class="n">phys</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">virt</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">len</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">map_id</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">opcode</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>


<span class="cp">#define TRACE_FUNC_SIZE 30</span>
<span class="cp">#define TRACE_FILE_SIZE 20</span>

<span class="n">FTRACE_ENTRY</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="n">trace_branch</span><span class="p">,</span>

	<span class="n">TRACE_BRANCH</span><span class="p">,</span>

	<span class="n">F_STRUCT</span><span class="p">(</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span>	<span class="n">line</span>				<span class="p">)</span>
		<span class="n">__array</span><span class="p">(</span>	<span class="kt">char</span><span class="p">,</span>		<span class="n">func</span><span class="p">,</span>	<span class="n">TRACE_FUNC_SIZE</span><span class="o">+</span><span class="mi">1</span>	<span class="p">)</span>
		<span class="n">__array</span><span class="p">(</span>	<span class="kt">char</span><span class="p">,</span>		<span class="n">file</span><span class="p">,</span>	<span class="n">TRACE_FILE_SIZE</span><span class="o">+</span><span class="mi">1</span>	<span class="p">)</span>
		<span class="n">__field</span><span class="p">(</span>	<span class="kt">char</span><span class="p">,</span>		<span class="n">correct</span>				<span class="p">)</span>
	<span class="p">),</span>

	<span class="n">F_printk</span><span class="p">(</span><span class="s">&quot;%u:%s:%s (%u)&quot;</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">line</span><span class="p">,</span>
		 <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">func</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">file</span><span class="p">,</span> <span class="n">__entry</span><span class="o">-&gt;</span><span class="n">correct</span><span class="p">),</span>

	<span class="n">FILTER_OTHER</span>
<span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
