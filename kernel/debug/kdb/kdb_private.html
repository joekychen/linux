<!DOCTYPE html>
<html><head><title>joekychen/linux » kernel › debug › kdb › kdb_private.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>kdb_private.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _KDBPRIVATE_H</span>
<span class="cp">#define _KDBPRIVATE_H</span>

<span class="cm">/*</span>
<span class="cm"> * Kernel Debugger Architecture Independent Private Headers</span>
<span class="cm"> *</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2000-2004 Silicon Graphics, Inc.  All Rights Reserved.</span>
<span class="cm"> * Copyright (c) 2009 Wind River Systems, Inc.  All Rights Reserved.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/kgdb.h&gt;</span>
<span class="cp">#include &quot;../debug_core.h&quot;</span>

<span class="cm">/* Kernel Debugger Command codes.  Must not overlap with error codes. */</span>
<span class="cp">#define KDB_CMD_GO	(-1001)</span>
<span class="cp">#define KDB_CMD_CPU	(-1002)</span>
<span class="cp">#define KDB_CMD_SS	(-1003)</span>
<span class="cp">#define KDB_CMD_SSB	(-1004)</span>
<span class="cp">#define KDB_CMD_KGDB (-1005)</span>

<span class="cm">/* Internal debug flags */</span>
<span class="cp">#define KDB_DEBUG_FLAG_BP	0x0002	</span><span class="cm">/* Breakpoint subsystem debug */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_BB_SUMM	0x0004	</span><span class="cm">/* Basic block analysis, summary only */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_AR	0x0008	</span><span class="cm">/* Activation record, generic */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_ARA	0x0010	</span><span class="cm">/* Activation record, arch specific */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_BB	0x0020	</span><span class="cm">/* All basic block analysis */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_STATE	0x0040	</span><span class="cm">/* State flags */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_MASK	0xffff	</span><span class="cm">/* All debug flags */</span><span class="cp"></span>
<span class="cp">#define KDB_DEBUG_FLAG_SHIFT	16	</span><span class="cm">/* Shift factor for dbflags */</span><span class="cp"></span>

<span class="cp">#define KDB_DEBUG(flag)	(kdb_flags &amp; \</span>
<span class="cp">	(KDB_DEBUG_FLAG_##flag &lt;&lt; KDB_DEBUG_FLAG_SHIFT))</span>
<span class="cp">#define KDB_DEBUG_STATE(text, value) if (KDB_DEBUG(STATE)) \</span>
<span class="cp">		kdb_print_state(text, value)</span>

<span class="cp">#if BITS_PER_LONG == 32</span>

<span class="cp">#define KDB_PLATFORM_ENV	&quot;BYTESPERWORD=4&quot;</span>

<span class="cp">#define kdb_machreg_fmt		&quot;0x%lx&quot;</span>
<span class="cp">#define kdb_machreg_fmt0	&quot;0x%08lx&quot;</span>
<span class="cp">#define kdb_bfd_vma_fmt		&quot;0x%lx&quot;</span>
<span class="cp">#define kdb_bfd_vma_fmt0	&quot;0x%08lx&quot;</span>
<span class="cp">#define kdb_elfw_addr_fmt	&quot;0x%x&quot;</span>
<span class="cp">#define kdb_elfw_addr_fmt0	&quot;0x%08x&quot;</span>
<span class="cp">#define kdb_f_count_fmt		&quot;%d&quot;</span>

<span class="cp">#elif BITS_PER_LONG == 64</span>

<span class="cp">#define KDB_PLATFORM_ENV	&quot;BYTESPERWORD=8&quot;</span>

<span class="cp">#define kdb_machreg_fmt		&quot;0x%lx&quot;</span>
<span class="cp">#define kdb_machreg_fmt0	&quot;0x%016lx&quot;</span>
<span class="cp">#define kdb_bfd_vma_fmt		&quot;0x%lx&quot;</span>
<span class="cp">#define kdb_bfd_vma_fmt0	&quot;0x%016lx&quot;</span>
<span class="cp">#define kdb_elfw_addr_fmt	&quot;0x%x&quot;</span>
<span class="cp">#define kdb_elfw_addr_fmt0	&quot;0x%016x&quot;</span>
<span class="cp">#define kdb_f_count_fmt		&quot;%ld&quot;</span>

<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * KDB_MAXBPT describes the total number of breakpoints</span>
<span class="cm"> * supported by this architecure.</span>
<span class="cm"> */</span>
<span class="cp">#define KDB_MAXBPT	16</span>

<span class="cm">/* Symbol table format returned by kallsyms. */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">__ksymtab</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">value</span><span class="p">;</span>	<span class="cm">/* Address of symbol */</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">mod_name</span><span class="p">;</span>	<span class="cm">/* Module containing symbol or</span>
<span class="cm">					 * &quot;kernel&quot; */</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mod_start</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mod_end</span><span class="p">;</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">sec_name</span><span class="p">;</span>	<span class="cm">/* Section containing symbol */</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sec_start</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sec_end</span><span class="p">;</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">sym_name</span><span class="p">;</span>	<span class="cm">/* Full symbol name, including</span>
<span class="cm">					 * any version */</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sym_start</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sym_end</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">kdb_symtab_t</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kallsyms_symbol_next</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">prefix_name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flag</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kallsyms_symbol_complete</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">prefix_name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_len</span><span class="p">);</span>

<span class="cm">/* Exported Symbols for kernel loadable modules to use. */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_getarea_size</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_putarea_size</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Like get_user and put_user, kdb_getarea and kdb_putarea take variable</span>
<span class="cm"> * names, not pointers.  The underlying *_size functions take pointers.</span>
<span class="cm"> */</span>
<span class="cp">#define kdb_getarea(x, addr) kdb_getarea_size(&amp;(x), addr, sizeof((x)))</span>
<span class="cp">#define kdb_putarea(addr, x) kdb_putarea_size(addr, &amp;(x), sizeof((x)))</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_getphysword</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">word</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_getword</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_putword</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdbgetularg</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdbgetu64arg</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">u64</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">kdbgetenv</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdbgetaddrarg</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">**</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">,</span>
			 <span class="kt">long</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdbgetsymval</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">kdb_symtab_t</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdbnearsym</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="n">kdb_symtab_t</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdbnearsym_cleanup</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">kdb_strdup</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">type</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_symbol_print</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="k">const</span> <span class="n">kdb_symtab_t</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* Routine for debugging the debugger state. */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_print_state</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_state</span><span class="p">;</span>
<span class="cp">#define KDB_STATE_KDB		0x00000001	</span><span class="cm">/* Cpu is inside kdb */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_LEAVING	0x00000002	</span><span class="cm">/* Cpu is leaving kdb */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_CMD		0x00000004	</span><span class="cm">/* Running a kdb command */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_KDB_CONTROL	0x00000008	</span><span class="cm">/* This cpu is under</span>
<span class="cm">						 * kdb control */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_HOLD_CPU	0x00000010	</span><span class="cm">/* Hold this cpu inside kdb */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_DOING_SS	0x00000020	</span><span class="cm">/* Doing ss command */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_DOING_SSB	0x00000040	</span><span class="cm">/* Doing ssb command,</span>
<span class="cm">						 * DOING_SS is also set */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_SSBPT		0x00000080	</span><span class="cm">/* Install breakpoint</span>
<span class="cm">						 * after one ss, independent of</span>
<span class="cm">						 * DOING_SS */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_REENTRY	0x00000100	</span><span class="cm">/* Valid re-entry into kdb */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_SUPPRESS	0x00000200	</span><span class="cm">/* Suppress error messages */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_PAGER		0x00000400	</span><span class="cm">/* pager is available */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_GO_SWITCH	0x00000800	</span><span class="cm">/* go is switching</span>
<span class="cm">						 * back to initial cpu */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_PRINTF_LOCK	0x00001000	</span><span class="cm">/* Holds kdb_printf lock */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_WAIT_IPI	0x00002000	</span><span class="cm">/* Waiting for kdb_ipi() NMI */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_RECURSE	0x00004000	</span><span class="cm">/* Recursive entry to kdb */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_IP_ADJUSTED	0x00008000	</span><span class="cm">/* Restart IP has been</span>
<span class="cm">						 * adjusted */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_GO1		0x00010000	</span><span class="cm">/* go only releases one cpu */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_KEYBOARD	0x00020000	</span><span class="cm">/* kdb entered via</span>
<span class="cm">						 * keyboard on this cpu */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_KEXEC		0x00040000	</span><span class="cm">/* kexec issued */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_DOING_KGDB	0x00080000	</span><span class="cm">/* kgdb enter now issued */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_KGDB_TRANS	0x00200000	</span><span class="cm">/* Transition to kgdb */</span><span class="cp"></span>
<span class="cp">#define KDB_STATE_ARCH		0xff000000	</span><span class="cm">/* Reserved for arch</span>
<span class="cm">						 * specific use */</span><span class="cp"></span>

<span class="cp">#define KDB_STATE(flag) (kdb_state &amp; KDB_STATE_##flag)</span>
<span class="cp">#define KDB_STATE_SET(flag) ((void)(kdb_state |= KDB_STATE_##flag))</span>
<span class="cp">#define KDB_STATE_CLEAR(flag) ((void)(kdb_state &amp;= ~KDB_STATE_##flag))</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_nextline</span><span class="p">;</span> <span class="cm">/* Current number of lines displayed */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_kdb_bp</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">bp_addr</span><span class="p">;</span>	<span class="cm">/* Address breakpoint is present at */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bp_free</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* This entry is available */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bp_enabled</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Breakpoint is active in register */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bp_type</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* Uses hardware register */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bp_installed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Breakpoint is installed */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bp_delay</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Do delayed bp handling */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bp_delayed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Delayed breakpoint */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">bph_length</span><span class="p">;</span>	<span class="cm">/* HW break length */</span>
<span class="p">}</span> <span class="n">kdb_bp_t</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_KGDB_KDB</span>
<span class="k">extern</span> <span class="n">kdb_bp_t</span> <span class="n">kdb_breakpoints</span><span class="p">[</span><span class="cm">/* KDB_MAXBPT */</span><span class="p">];</span>

<span class="cm">/* The KDB shell command table */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_kdbtab</span> <span class="p">{</span>
	<span class="kt">char</span>    <span class="o">*</span><span class="n">cmd_name</span><span class="p">;</span>		<span class="cm">/* Command name */</span>
	<span class="n">kdb_func_t</span> <span class="n">cmd_func</span><span class="p">;</span>		<span class="cm">/* Function to execute command */</span>
	<span class="kt">char</span>    <span class="o">*</span><span class="n">cmd_usage</span><span class="p">;</span>		<span class="cm">/* Usage String for this command */</span>
	<span class="kt">char</span>    <span class="o">*</span><span class="n">cmd_help</span><span class="p">;</span>		<span class="cm">/* Help message for this command */</span>
	<span class="kt">short</span>    <span class="n">cmd_flags</span><span class="p">;</span>		<span class="cm">/* Parsing flags */</span>
	<span class="kt">short</span>    <span class="n">cmd_minlen</span><span class="p">;</span>		<span class="cm">/* Minimum legal # command</span>
<span class="cm">					 * chars required */</span>
	<span class="n">kdb_repeat_t</span> <span class="n">cmd_repeat</span><span class="p">;</span>	<span class="cm">/* Does command auto repeat on enter? */</span>
<span class="p">}</span> <span class="n">kdbtab_t</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_bt</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">**</span><span class="p">);</span>	<span class="cm">/* KDB display back trace */</span>

<span class="cm">/* KDB breakpoint management functions */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_initbptab</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_bp_install</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_bp_remove</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">KDB_DB_BPT</span><span class="p">,</span>	<span class="cm">/* Breakpoint */</span>
	<span class="n">KDB_DB_SS</span><span class="p">,</span>	<span class="cm">/* Single-step trap */</span>
	<span class="n">KDB_DB_SSB</span><span class="p">,</span>	<span class="cm">/* Single step to branch */</span>
	<span class="n">KDB_DB_SSBPT</span><span class="p">,</span>	<span class="cm">/* Single step over breakpoint */</span>
	<span class="n">KDB_DB_NOBPT</span>	<span class="cm">/* Spurious breakpoint */</span>
<span class="p">}</span> <span class="n">kdb_dbtrap_t</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_main_loop</span><span class="p">(</span><span class="n">kdb_reason_t</span><span class="p">,</span> <span class="n">kdb_reason_t</span><span class="p">,</span>
			 <span class="kt">int</span><span class="p">,</span> <span class="n">kdb_dbtrap_t</span><span class="p">,</span> <span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* Miscellaneous functions and data areas */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_grepping_flag</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="n">kdb_grep_string</span><span class="p">[];</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_grep_leading</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kdb_grep_trailing</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">kdb_cmds</span><span class="p">[];</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_syslog_data</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">syslog_data</span><span class="p">[]);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">kdb_task_state_string</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="n">kdb_task_state_char</span> <span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">kdb_task_state</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mask</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_ps_suppressed</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_ps1</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_print_nameval</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">val</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_send_sig_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span> <span class="k">struct</span> <span class="n">siginfo</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_meminfo_proc_show</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">kdb_getstr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_gdb_state_pass</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>

<span class="cm">/* Defines for kdb_symbol_print */</span>
<span class="cp">#define KDB_SP_SPACEB	0x0001		</span><span class="cm">/* Space before string */</span><span class="cp"></span>
<span class="cp">#define KDB_SP_SPACEA	0x0002		</span><span class="cm">/* Space after string */</span><span class="cp"></span>
<span class="cp">#define KDB_SP_PAREN	0x0004		</span><span class="cm">/* Parenthesis around string */</span><span class="cp"></span>
<span class="cp">#define KDB_SP_VALUE	0x0008		</span><span class="cm">/* Print the value of the address */</span><span class="cp"></span>
<span class="cp">#define KDB_SP_SYMSIZE	0x0010		</span><span class="cm">/* Print the size of the symbol */</span><span class="cp"></span>
<span class="cp">#define KDB_SP_NEWLINE	0x0020		</span><span class="cm">/* Newline after string */</span><span class="cp"></span>
<span class="cp">#define KDB_SP_DEFAULT (KDB_SP_VALUE|KDB_SP_PAREN)</span>

<span class="cp">#define KDB_TSK(cpu) kgdb_info[cpu].task</span>
<span class="cp">#define KDB_TSKREGS(cpu) kgdb_info[cpu].debuggerinfo</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">kdb_curr_task</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="cp">#define kdb_task_has_cpu(p) (task_curr(p))</span>

<span class="cm">/* Simplify coexistence with NPTL */</span>
<span class="cp">#define	kdb_do_each_thread(g, p) do_each_thread(g, p)</span>
<span class="cp">#define	kdb_while_each_thread(g, p) while_each_thread(g, p)</span>

<span class="cp">#define GFP_KDB (in_interrupt() ? GFP_ATOMIC : GFP_KERNEL)</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span><span class="n">debug_kmalloc</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">flags</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">debug_kfree</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">debug_kusage</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_set_current_task</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">kdb_current_task</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_KDB_KEYBOARD</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">kdb_kbd_cleanup_state</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else </span><span class="cm">/* ! CONFIG_KDB_KEYBOARD */</span><span class="cp"></span>
<span class="cp">#define kdb_kbd_cleanup_state()</span>
<span class="cp">#endif </span><span class="cm">/* ! CONFIG_KDB_KEYBOARD */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MODULES</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">list_head</span> <span class="o">*</span><span class="n">kdb_modules</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MODULES */</span><span class="cp"></span>

<span class="k">extern</span> <span class="kt">char</span> <span class="n">kdb_prompt_str</span><span class="p">[];</span>

<span class="cp">#define	KDB_WORD_SIZE	((int)sizeof(unsigned long))</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_KGDB_KDB */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* !_KDBPRIVATE_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
