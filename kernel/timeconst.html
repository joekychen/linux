<!DOCTYPE html>
<html><head><title>joekychen/linux » kernel › timeconst.pl

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../index.html"></a><h1>timeconst.pl</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="c1">#!/usr/bin/perl</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><hr />

<p>Copyright 2007-2008 rPath, Inc. - All Rights Reserved</p>

<p>This file is part of the Linux kernel, and is made available under
  the terms of the GNU General Public License version 2 or (at your
  option) any later version; incorporated herein by reference.</p>

<hr /></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Usage: timeconst.pl HZ > timeconst.h</p></td><td class="code"><div class="highlight"><pre></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Precomputed values for systems without Math::BigInt
Generated by:
timeconst.pl --can 24 32 48 64 100 122 128 200 250 256 300 512 1000 1024 1200</p></td><td class="code"><div class="highlight"><pre><span class="nv">%canned_values</span> <span class="o">=</span> <span class="p">(</span>
	<span class="mi">24</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xa6aaaaab&#39;</span><span class="p">,</span><span class="s">&#39;0x2aaaaaa&#39;</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&#39;0xc49ba5e4&#39;</span><span class="p">,</span><span class="s">&#39;0x1fbe76c8b4&#39;</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xa2c2aaab&#39;</span><span class="p">,</span><span class="s">&#39;0xaaaa&#39;</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span>
		<span class="mi">125000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&#39;0xc9539b89&#39;</span><span class="p">,</span><span class="s">&#39;0x7fffbce4217d&#39;</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">,</span><span class="mi">125000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">32</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0x6000000&#39;</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0xfdf3b645a&#39;</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span>
		<span class="mi">4</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xf4240000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span>
		<span class="mi">31250</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0x8637bd06&#39;</span><span class="p">,</span><span class="s">&#39;0x3fff79c842fa&#39;</span><span class="p">,</span><span class="mi">46</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">31250</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">48</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xa6aaaaab&#39;</span><span class="p">,</span><span class="s">&#39;0x6aaaaaa&#39;</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span>
		<span class="s">&#39;0xc49ba5e4&#39;</span><span class="p">,</span><span class="s">&#39;0xfdf3b645a&#39;</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span>
		<span class="mi">6</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xa2c2aaab&#39;</span><span class="p">,</span><span class="s">&#39;0x15555&#39;</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span>
		<span class="mi">62500</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&#39;0xc9539b89&#39;</span><span class="p">,</span><span class="s">&#39;0x3fffbce4217d&#39;</span><span class="p">,</span><span class="mi">46</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">,</span><span class="mi">62500</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">64</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0xe000000&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0x7ef9db22d&#39;</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span>
		<span class="mi">8</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xf4240000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span>
		<span class="mi">15625</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0x8637bd06&#39;</span><span class="p">,</span><span class="s">&#39;0x1fff79c842fa&#39;</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">15625</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">100</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xa0000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span>
		<span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0xcccccccd&#39;</span><span class="p">,</span><span class="s">&#39;0x733333333&#39;</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span>
		<span class="s">&#39;0x9c400000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span>
		<span class="mi">10000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0xd1b71759&#39;</span><span class="p">,</span><span class="s">&#39;0x1fff2e48e8a7&#39;</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">10000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">122</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0x8325c53f&#39;</span><span class="p">,</span><span class="s">&#39;0xfbcda3a&#39;</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span>
		<span class="mi">500</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span>
		<span class="s">&#39;0xf9db22d1&#39;</span><span class="p">,</span><span class="s">&#39;0x7fbe76c8b&#39;</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span>
		<span class="mi">61</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span>
		<span class="s">&#39;0x8012e2a0&#39;</span><span class="p">,</span><span class="s">&#39;0x3ef36&#39;</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span>
		<span class="mi">500000</span><span class="p">,</span><span class="mi">61</span><span class="p">,</span>
		<span class="s">&#39;0xffda4053&#39;</span><span class="p">,</span><span class="s">&#39;0x1ffffbce4217&#39;</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span>
		<span class="mi">61</span><span class="p">,</span><span class="mi">500000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">128</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0x1e000000&#39;</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0x3f7ced916&#39;</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span>
		<span class="mi">16</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xf4240000&#39;</span><span class="p">,</span><span class="s">&#39;0x40000&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span>
		<span class="mi">15625</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span>
		<span class="s">&#39;0x8637bd06&#39;</span><span class="p">,</span><span class="s">&#39;0xfffbce4217d&#39;</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span>
		<span class="mi">2</span><span class="p">,</span><span class="mi">15625</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">200</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xa0000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span>
		<span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0xcccccccd&#39;</span><span class="p">,</span><span class="s">&#39;0x333333333&#39;</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span>
		<span class="s">&#39;0x9c400000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span>
		<span class="mi">5000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0xd1b71759&#39;</span><span class="p">,</span><span class="s">&#39;0xfff2e48e8a7&#39;</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">5000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">250</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0x80000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span>
		<span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0x80000000&#39;</span><span class="p">,</span><span class="s">&#39;0x180000000&#39;</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span>
		<span class="mi">4000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0x7ff7ced9168&#39;</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">4000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">256</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0x3e000000&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0x1fbe76c8b&#39;</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span>
		<span class="mi">32</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xf4240000&#39;</span><span class="p">,</span><span class="s">&#39;0xc0000&#39;</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span>
		<span class="mi">15625</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span>
		<span class="s">&#39;0x8637bd06&#39;</span><span class="p">,</span><span class="s">&#39;0x7ffde7210be&#39;</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span>
		<span class="mi">4</span><span class="p">,</span><span class="mi">15625</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">300</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xd5555556&#39;</span><span class="p">,</span><span class="s">&#39;0x2aaaaaaa&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span>
		<span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&#39;0x9999999a&#39;</span><span class="p">,</span><span class="s">&#39;0x1cccccccc&#39;</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span>
		<span class="s">&#39;0xd0555556&#39;</span><span class="p">,</span><span class="s">&#39;0xaaaaa&#39;</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span>
		<span class="mi">10000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&#39;0x9d495183&#39;</span><span class="p">,</span><span class="s">&#39;0x7ffcb923a29&#39;</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">,</span><span class="mi">10000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">512</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0x7e000000&#39;</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0xfdf3b645&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span>
		<span class="mi">64</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xf4240000&#39;</span><span class="p">,</span><span class="s">&#39;0x1c0000&#39;</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span>
		<span class="mi">15625</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span>
		<span class="s">&#39;0x8637bd06&#39;</span><span class="p">,</span><span class="s">&#39;0x3ffef39085f&#39;</span><span class="p">,</span><span class="mi">42</span><span class="p">,</span>
		<span class="mi">8</span><span class="p">,</span><span class="mi">15625</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">1000</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0x80000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0x80000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0x0&#39;</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span>
		<span class="mi">1000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0x1ff7ced9168&#39;</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">1024</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xfa000000&#39;</span><span class="p">,</span><span class="s">&#39;0xfe000000&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span>
		<span class="mi">125</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span>
		<span class="s">&#39;0x83126e98&#39;</span><span class="p">,</span><span class="s">&#39;0x7ef9db22&#39;</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span>
		<span class="mi">128</span><span class="p">,</span><span class="mi">125</span><span class="p">,</span>
		<span class="s">&#39;0xf4240000&#39;</span><span class="p">,</span><span class="s">&#39;0x3c0000&#39;</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span>
		<span class="mi">15625</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span>
		<span class="s">&#39;0x8637bd06&#39;</span><span class="p">,</span><span class="s">&#39;0x1fff79c842f&#39;</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span>
		<span class="mi">16</span><span class="p">,</span><span class="mi">15625</span><span class="p">,</span>
	<span class="p">],</span> <span class="mi">1200</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="s">&#39;0xd5555556&#39;</span><span class="p">,</span><span class="s">&#39;0xd5555555&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span>
		<span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span>
		<span class="s">&#39;0x9999999a&#39;</span><span class="p">,</span><span class="s">&#39;0x66666666&#39;</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span>
		<span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span>
		<span class="s">&#39;0xd0555556&#39;</span><span class="p">,</span><span class="s">&#39;0x2aaaaa&#39;</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span>
		<span class="mi">2500</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&#39;0x9d495183&#39;</span><span class="p">,</span><span class="s">&#39;0x1ffcb923a29&#39;</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">,</span><span class="mi">2500</span><span class="p">,</span>
	<span class="p">]</span>
<span class="p">);</span>

<span class="nv">$has_bigint</span> <span class="o">=</span> <span class="nb">eval</span> <span class="s">&#39;use Math::BigInt qw(bgcd); 1;&#39;</span><span class="p">;</span>

<span class="k">sub </span><span class="nf">bint</span><span class="p">($)</span>
<span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$x</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">return</span> <span class="nn">Math::</span><span class="n">BigInt</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="nv">$x</span><span class="p">);</span>
<span class="p">}</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>Constants for division by reciprocal multiplication.
(bits, numerator, denominator)</p></td><td class="code"><div class="highlight"><pre><span class="k">sub </span><span class="nf">fmul</span><span class="p">($$$)</span>
<span class="p">{</span>
	<span class="k">my</span> <span class="p">(</span><span class="nv">$b</span><span class="p">,</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$d</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

	<span class="nv">$n</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span>
	<span class="nv">$d</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="nv">$d</span><span class="p">);</span>

	<span class="k">return</span> <span class="nb">scalar</span> <span class="p">((</span><span class="nv">$n</span> <span class="o">&lt;&lt;</span> <span class="nv">$b</span><span class="p">)</span><span class="o">+</span><span class="nv">$d</span><span class="o">-</span><span class="n">bint</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="nv">$d</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">fadj</span><span class="p">($$$)</span>
<span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$b</span><span class="p">,</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$d</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>

	<span class="nv">$n</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span>
	<span class="nv">$d</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="nv">$d</span><span class="p">);</span>

	<span class="nv">$d</span> <span class="o">=</span> <span class="nv">$d</span><span class="o">/</span><span class="n">bgcd</span><span class="p">(</span><span class="nv">$n</span><span class="p">,</span> <span class="nv">$d</span><span class="p">);</span>
	<span class="k">return</span> <span class="nb">scalar</span> <span class="p">((</span><span class="nv">$d</span><span class="o">-</span><span class="n">bint</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="nv">$b</span><span class="p">)</span><span class="o">/</span><span class="nv">$d</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">fmuls</span><span class="p">($$$)</span> <span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$b</span><span class="p">,</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$d</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="nv">$m</span><span class="p">);</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$thres</span><span class="p">)</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="nv">$b</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

	<span class="nv">$n</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="nv">$n</span><span class="p">);</span>
	<span class="nv">$d</span> <span class="o">=</span> <span class="n">bint</span><span class="p">(</span><span class="nv">$d</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="nv">$s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">$s</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="nv">$m</span> <span class="o">=</span> <span class="n">fmul</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$d</span><span class="p">);</span>
		<span class="k">return</span> <span class="nv">$s</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$m</span> <span class="o">&gt;=</span> <span class="nv">$thres</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>Generate a hex value if the result fits in 64 bits;
otherwise skip.</p></td><td class="code"><div class="highlight"><pre><span class="k">sub </span><span class="nf">bignum_hex</span><span class="p">($)</span> <span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$x</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nv">$x</span><span class="o">-&gt;</span><span class="n">as_hex</span><span class="p">();</span>

	<span class="k">return</span> <span class="p">(</span><span class="nb">length</span><span class="p">(</span><span class="nv">$s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">)</span> <span class="p">?</span> <span class="nb">undef</span> <span class="p">:</span> <span class="nv">$s</span><span class="p">;</span>
<span class="p">}</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>Provides mul, adj, and shr factors for a specific
(bit, time, hz) combination</p></td><td class="code"><div class="highlight"><pre><span class="k">sub </span><span class="nf">muladj</span><span class="p">($$$)</span> <span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$b</span><span class="p">,</span> <span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="n">fmuls</span><span class="p">(</span><span class="nv">$b</span><span class="p">,</span> <span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">);</span>
	<span class="k">my</span> <span class="nv">$m</span> <span class="o">=</span> <span class="n">fmul</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">);</span>
	<span class="k">my</span> <span class="nv">$a</span> <span class="o">=</span> <span class="n">fadj</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span> <span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">);</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">bignum_hex</span><span class="p">(</span><span class="nv">$m</span><span class="p">),</span> <span class="n">bignum_hex</span><span class="p">(</span><span class="nv">$a</span><span class="p">),</span> <span class="nv">$s</span><span class="p">);</span>
<span class="p">}</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>Provides numerator, denominator values</p></td><td class="code"><div class="highlight"><pre><span class="k">sub </span><span class="nf">numden</span><span class="p">($$)</span> <span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$n</span><span class="p">,</span> <span class="nv">$d</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">$g</span> <span class="o">=</span> <span class="n">bgcd</span><span class="p">(</span><span class="nv">$n</span><span class="p">,</span> <span class="nv">$d</span><span class="p">);</span>
	<span class="k">return</span> <span class="p">(</span><span class="nv">$n</span><span class="sr">/$g, $d/</span><span class="nv">$g</span><span class="p">);</span>
<span class="p">}</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>All values for a specific (time, hz) combo</p></td><td class="code"><div class="highlight"><pre><span class="k">sub </span><span class="nf">conversions</span><span class="p">($$)</span> <span class="p">{</span>
	<span class="k">my</span> <span class="p">(</span><span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">@val</span> <span class="o">=</span> <span class="p">();</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>HZ<em>TO</em>xx</p></td><td class="code"><div class="highlight"><pre>	<span class="nb">push</span><span class="p">(</span><span class="nv">@val</span><span class="p">,</span> <span class="n">muladj</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">));</span>
	<span class="nb">push</span><span class="p">(</span><span class="nv">@val</span><span class="p">,</span> <span class="n">numden</span><span class="p">(</span><span class="nv">$t</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">));</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>xx<em>TO</em>HZ</p></td><td class="code"><div class="highlight"><pre>	<span class="nb">push</span><span class="p">(</span><span class="nv">@val</span><span class="p">,</span> <span class="n">muladj</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">,</span> <span class="nv">$t</span><span class="p">));</span>
	<span class="nb">push</span><span class="p">(</span><span class="nv">@val</span><span class="p">,</span> <span class="n">numden</span><span class="p">(</span><span class="nv">$hz</span><span class="p">,</span> <span class="nv">$t</span><span class="p">));</span>

	<span class="k">return</span> <span class="nv">@val</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">compute_values</span><span class="p">($)</span> <span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$hz</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">@val</span> <span class="o">=</span> <span class="p">();</span>
	<span class="k">my</span> <span class="nv">$s</span><span class="p">,</span> <span class="nv">$m</span><span class="p">,</span> <span class="nv">$a</span><span class="p">,</span> <span class="nv">$g</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$has_bigint</span><span class="p">)</span> <span class="p">{</span>
		<span class="nb">die</span> <span class="s">&quot;$0: HZ == $hz not canned and &quot;</span><span class="o">.</span>
		    <span class="s">&quot;Math::BigInt not available\n&quot;</span><span class="p">;</span>
	<span class="p">}</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>MSEC conversions</p></td><td class="code"><div class="highlight"><pre>	<span class="nb">push</span><span class="p">(</span><span class="nv">@val</span><span class="p">,</span> <span class="n">conversions</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">));</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>USEC conversions</p></td><td class="code"><div class="highlight"><pre>	<span class="nb">push</span><span class="p">(</span><span class="nv">@val</span><span class="p">,</span> <span class="n">conversions</span><span class="p">(</span><span class="mi">1000000</span><span class="p">,</span> <span class="nv">$hz</span><span class="p">));</span>

	<span class="k">return</span> <span class="nv">@val</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">outputval</span><span class="p">($$)</span>
<span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$val</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">$csuf</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="nb">defined</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="p">{</span>
	    <span class="k">if</span> <span class="p">(</span><span class="nv">$name</span> <span class="o">!~</span> <span class="sr">/SHR/</span><span class="p">)</span> <span class="p">{</span>
		<span class="nv">$val</span> <span class="o">=</span> <span class="s">&quot;U64_C($val)&quot;</span><span class="p">;</span>
	    <span class="p">}</span>
	    <span class="nb">printf</span> <span class="s">&quot;#define %-23s %s\n&quot;</span><span class="p">,</span> <span class="nv">$name</span><span class="o">.</span><span class="nv">$csuf</span><span class="p">,</span> <span class="nv">$val</span><span class="o">.</span><span class="nv">$csuf</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">sub </span><span class="nf">output</span><span class="p">($@)</span>
<span class="p">{</span>
	<span class="k">my</span><span class="p">(</span><span class="nv">$hz</span><span class="p">,</span> <span class="nv">@val</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">$pfx</span><span class="p">,</span> <span class="nv">$bit</span><span class="p">,</span> <span class="nv">$suf</span><span class="p">,</span> <span class="nv">$s</span><span class="p">,</span> <span class="nv">$m</span><span class="p">,</span> <span class="nv">$a</span><span class="p">;</span>

	<span class="k">print</span> <span class="s">&quot;/* Automatically generated by kernel/timeconst.pl */\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;/* Conversion constants for HZ == $hz */\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#ifndef KERNEL_TIMECONST_H\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#define KERNEL_TIMECONST_H\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>

	<span class="k">print</span> <span class="s">&quot;#include &lt;linux/param.h&gt;\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#include &lt;linux/types.h&gt;\n&quot;</span><span class="p">;</span>

	<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#if HZ != $hz\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#error \&quot;kernel/timeconst.h has the wrong HZ value!\&quot;\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#endif\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>

	<span class="k">foreach</span> <span class="nv">$pfx</span> <span class="p">(</span><span class="s">&#39;HZ_TO_MSEC&#39;</span><span class="p">,</span><span class="s">&#39;MSEC_TO_HZ&#39;</span><span class="p">,</span>
		      <span class="s">&#39;HZ_TO_USEC&#39;</span><span class="p">,</span><span class="s">&#39;USEC_TO_HZ&#39;</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">foreach</span> <span class="nv">$bit</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">foreach</span> <span class="nv">$suf</span> <span class="p">(</span><span class="s">&#39;MUL&#39;</span><span class="p">,</span> <span class="s">&#39;ADJ&#39;</span><span class="p">,</span> <span class="s">&#39;SHR&#39;</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">outputval</span><span class="p">(</span><span class="s">&quot;${pfx}_$suf$bit&quot;</span><span class="p">,</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@val</span><span class="p">));</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">foreach</span> <span class="nv">$suf</span> <span class="p">(</span><span class="s">&#39;NUM&#39;</span><span class="p">,</span> <span class="s">&#39;DEN&#39;</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">outputval</span><span class="p">(</span><span class="s">&quot;${pfx}_$suf&quot;</span><span class="p">,</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@val</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">print</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;#endif /* KERNEL_TIMECONST_H */\n&quot;</span><span class="p">;</span>
<span class="p">}</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>Pretty-print Perl values</p></td><td class="code"><div class="highlight"><pre><span class="k">sub </span><span class="nf">perlvals</span><span class="p">(@)</span> <span class="p">{</span>
	<span class="k">my</span> <span class="nv">$v</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">@l</span> <span class="o">=</span> <span class="p">();</span>

	<span class="k">foreach</span> <span class="nv">$v</span> <span class="p">(</span><span class="nv">@_</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="nv">$v</span><span class="p">))</span> <span class="p">{</span>
			<span class="nb">push</span><span class="p">(</span><span class="nv">@l</span><span class="p">,</span> <span class="s">&#39;undef&#39;</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">elsif</span> <span class="p">(</span><span class="nv">$v</span> <span class="o">=~</span><span class="sr"> /^0x/</span><span class="p">)</span> <span class="p">{</span>
			<span class="nb">push</span><span class="p">(</span><span class="nv">@l</span><span class="p">,</span> <span class="s">&quot;\&#39;&quot;</span><span class="o">.</span><span class="nv">$v</span><span class="o">.</span><span class="s">&quot;\&#39;&quot;</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nb">push</span><span class="p">(</span><span class="nv">@l</span><span class="p">,</span> <span class="nv">$v</span><span class="o">.</span><span class="s">&#39;&#39;</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nb">join</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="nv">@l</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">(</span><span class="nv">$hz</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@ARGV</span><span class="p">;</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>Use this to generate the %canned_values structure</p></td><td class="code"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nv">$hz</span> <span class="ow">eq</span> <span class="s">&#39;--can&#39;</span><span class="p">)</span> <span class="p">{</span>
	<span class="nb">shift</span><span class="p">(</span><span class="nv">@ARGV</span><span class="p">);</span>
	<span class="nv">@hzlist</span> <span class="o">=</span> <span class="nb">sort</span> <span class="p">{</span><span class="nv">$a</span> <span class="sr">&lt;=&gt;</span> <span class="nv">$b</span><span class="p">}</span> <span class="p">(</span><span class="nv">@ARGV</span><span class="p">);</span>

	<span class="k">print</span> <span class="s">&quot;# Precomputed values for systems without Math::BigInt\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;# Generated by:\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;# timeconst.pl --can &quot;</span><span class="p">,</span> <span class="nb">join</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span> <span class="nv">@hzlist</span><span class="p">),</span> <span class="s">&quot;\n&quot;</span><span class="p">;</span>
	<span class="k">print</span> <span class="s">&quot;\%canned_values = (\n&quot;</span><span class="p">;</span>
	<span class="k">my</span> <span class="nv">$pf</span> <span class="o">=</span> <span class="s">&quot;\t&quot;</span><span class="p">;</span>
	<span class="k">foreach</span> <span class="nv">$hz</span> <span class="p">(</span><span class="nv">@hzlist</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">my</span> <span class="nv">@values</span> <span class="o">=</span> <span class="n">compute_values</span><span class="p">(</span><span class="nv">$hz</span><span class="p">);</span>
		<span class="k">print</span> <span class="s">&quot;$pf$hz =&gt; [\n&quot;</span><span class="p">;</span>
		<span class="k">while</span> <span class="p">(</span><span class="nb">scalar</span><span class="p">(</span><span class="nv">@values</span><span class="p">))</span> <span class="p">{</span>
			<span class="k">my</span> <span class="nv">$bit</span><span class="p">;</span>
			<span class="k">foreach</span> <span class="nv">$bit</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">my</span> <span class="nv">$m</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@values</span><span class="p">);</span>
				<span class="k">my</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@values</span><span class="p">);</span>
				<span class="k">my</span> <span class="nv">$s</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@values</span><span class="p">);</span>
				<span class="k">print</span> <span class="s">&quot;\t\t&quot;</span><span class="p">,</span> <span class="n">perlvals</span><span class="p">(</span><span class="nv">$m</span><span class="p">,</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$s</span><span class="p">),</span> <span class="s">&quot;,\n&quot;</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">my</span> <span class="nv">$n</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@values</span><span class="p">);</span>
			<span class="k">my</span> <span class="nv">$d</span> <span class="o">=</span> <span class="nb">shift</span><span class="p">(</span><span class="nv">@values</span><span class="p">);</span>
			<span class="k">print</span> <span class="s">&quot;\t\t&quot;</span><span class="p">,</span> <span class="n">perlvals</span><span class="p">(</span><span class="nv">$n</span><span class="p">,</span><span class="nv">$d</span><span class="p">),</span> <span class="s">&quot;,\n&quot;</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">print</span> <span class="s">&quot;\t]&quot;</span><span class="p">;</span>
		<span class="nv">$pf</span> <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">print</span> <span class="s">&quot;\n);\n&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	<span class="nv">$hz</span> <span class="o">+=</span> <span class="mi">0</span><span class="p">;</span>			<span class="c1"># Force to number</span>
	<span class="k">if</span> <span class="p">(</span><span class="nv">$hz</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="nb">die</span> <span class="s">&quot;Usage: $0 HZ\n&quot;</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nv">@val</span> <span class="o">=</span> <span class="nv">@</span><span class="p">{</span><span class="nv">$canned_values</span><span class="p">{</span><span class="nv">$hz</span><span class="p">}};</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="nv">@val</span><span class="p">))</span> <span class="p">{</span>
		<span class="nv">@val</span> <span class="o">=</span> <span class="n">compute_values</span><span class="p">(</span><span class="nv">$hz</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">output</span><span class="p">(</span><span class="nv">$hz</span><span class="p">,</span> <span class="nv">@val</span><span class="p">);</span>
<span class="p">}</span>
<span class="nb">exit</span> <span class="mi">0</span><span class="p">;</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:1}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../javascript/docco.min.js"></script>
</html>
