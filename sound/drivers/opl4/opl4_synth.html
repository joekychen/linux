<!DOCTYPE html>
<html><head><title>joekychen/linux » sound › drivers › opl4 › opl4_synth.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>opl4_synth.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * OPL4 MIDI synthesizer functions</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2003 by Clemens Ladisch &lt;clemens@ladisch.de&gt;</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> * modification, are permitted provided that the following conditions</span>
<span class="cm"> * are met:</span>
<span class="cm"> * 1. Redistributions of source code must retain the above copyright</span>
<span class="cm"> *    notice, this list of conditions, and the following disclaimer,</span>
<span class="cm"> *    without modification.</span>
<span class="cm"> * 2. The name of the author may not be used to endorse or promote products</span>
<span class="cm"> *    derived from this software without specific prior written permission.</span>
<span class="cm"> *</span>
<span class="cm"> * Alternatively, this software may be distributed and/or modified under the</span>
<span class="cm"> * terms of the GNU General Public License as published by the Free Software</span>
<span class="cm"> * Foundation; either version 2 of the License, or (at your option) any later</span>
<span class="cm"> * version.</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&#39;&#39; AND</span>
<span class="cm"> * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span class="cm"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<span class="cm"> * ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR</span>
<span class="cm"> * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<span class="cm"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</span>
<span class="cm"> * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span>
<span class="cm"> * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<span class="cm"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<span class="cm"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
<span class="cm"> * SUCH DAMAGE.</span>
<span class="cm"> */</span>

<span class="cp">#include &quot;opl4_local.h&quot;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;sound/asoundef.h&gt;</span>

<span class="cm">/* GM2 controllers */</span>
<span class="cp">#ifndef MIDI_CTL_RELEASE_TIME</span>
<span class="cp">#define MIDI_CTL_RELEASE_TIME	0x48</span>
<span class="cp">#define MIDI_CTL_ATTACK_TIME	0x49</span>
<span class="cp">#define MIDI_CTL_DECAY_TIME	0x4b</span>
<span class="cp">#define MIDI_CTL_VIBRATO_RATE	0x4c</span>
<span class="cp">#define MIDI_CTL_VIBRATO_DEPTH	0x4d</span>
<span class="cp">#define MIDI_CTL_VIBRATO_DELAY	0x4e</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * This table maps 100/128 cents to F_NUMBER.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">s16</span> <span class="n">snd_opl4_pitch_map</span><span class="p">[</span><span class="mh">0x600</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x000</span><span class="p">,</span><span class="mh">0x000</span><span class="p">,</span><span class="mh">0x001</span><span class="p">,</span><span class="mh">0x001</span><span class="p">,</span><span class="mh">0x002</span><span class="p">,</span><span class="mh">0x002</span><span class="p">,</span><span class="mh">0x003</span><span class="p">,</span><span class="mh">0x003</span><span class="p">,</span>
	<span class="mh">0x004</span><span class="p">,</span><span class="mh">0x004</span><span class="p">,</span><span class="mh">0x005</span><span class="p">,</span><span class="mh">0x005</span><span class="p">,</span><span class="mh">0x006</span><span class="p">,</span><span class="mh">0x006</span><span class="p">,</span><span class="mh">0x006</span><span class="p">,</span><span class="mh">0x007</span><span class="p">,</span>
	<span class="mh">0x007</span><span class="p">,</span><span class="mh">0x008</span><span class="p">,</span><span class="mh">0x008</span><span class="p">,</span><span class="mh">0x009</span><span class="p">,</span><span class="mh">0x009</span><span class="p">,</span><span class="mh">0x00a</span><span class="p">,</span><span class="mh">0x00a</span><span class="p">,</span><span class="mh">0x00b</span><span class="p">,</span>
	<span class="mh">0x00b</span><span class="p">,</span><span class="mh">0x00c</span><span class="p">,</span><span class="mh">0x00c</span><span class="p">,</span><span class="mh">0x00d</span><span class="p">,</span><span class="mh">0x00d</span><span class="p">,</span><span class="mh">0x00d</span><span class="p">,</span><span class="mh">0x00e</span><span class="p">,</span><span class="mh">0x00e</span><span class="p">,</span>
	<span class="mh">0x00f</span><span class="p">,</span><span class="mh">0x00f</span><span class="p">,</span><span class="mh">0x010</span><span class="p">,</span><span class="mh">0x010</span><span class="p">,</span><span class="mh">0x011</span><span class="p">,</span><span class="mh">0x011</span><span class="p">,</span><span class="mh">0x012</span><span class="p">,</span><span class="mh">0x012</span><span class="p">,</span>
	<span class="mh">0x013</span><span class="p">,</span><span class="mh">0x013</span><span class="p">,</span><span class="mh">0x014</span><span class="p">,</span><span class="mh">0x014</span><span class="p">,</span><span class="mh">0x015</span><span class="p">,</span><span class="mh">0x015</span><span class="p">,</span><span class="mh">0x015</span><span class="p">,</span><span class="mh">0x016</span><span class="p">,</span>
	<span class="mh">0x016</span><span class="p">,</span><span class="mh">0x017</span><span class="p">,</span><span class="mh">0x017</span><span class="p">,</span><span class="mh">0x018</span><span class="p">,</span><span class="mh">0x018</span><span class="p">,</span><span class="mh">0x019</span><span class="p">,</span><span class="mh">0x019</span><span class="p">,</span><span class="mh">0x01a</span><span class="p">,</span>
	<span class="mh">0x01a</span><span class="p">,</span><span class="mh">0x01b</span><span class="p">,</span><span class="mh">0x01b</span><span class="p">,</span><span class="mh">0x01c</span><span class="p">,</span><span class="mh">0x01c</span><span class="p">,</span><span class="mh">0x01d</span><span class="p">,</span><span class="mh">0x01d</span><span class="p">,</span><span class="mh">0x01e</span><span class="p">,</span>
	<span class="mh">0x01e</span><span class="p">,</span><span class="mh">0x01e</span><span class="p">,</span><span class="mh">0x01f</span><span class="p">,</span><span class="mh">0x01f</span><span class="p">,</span><span class="mh">0x020</span><span class="p">,</span><span class="mh">0x020</span><span class="p">,</span><span class="mh">0x021</span><span class="p">,</span><span class="mh">0x021</span><span class="p">,</span>
	<span class="mh">0x022</span><span class="p">,</span><span class="mh">0x022</span><span class="p">,</span><span class="mh">0x023</span><span class="p">,</span><span class="mh">0x023</span><span class="p">,</span><span class="mh">0x024</span><span class="p">,</span><span class="mh">0x024</span><span class="p">,</span><span class="mh">0x025</span><span class="p">,</span><span class="mh">0x025</span><span class="p">,</span>
	<span class="mh">0x026</span><span class="p">,</span><span class="mh">0x026</span><span class="p">,</span><span class="mh">0x027</span><span class="p">,</span><span class="mh">0x027</span><span class="p">,</span><span class="mh">0x028</span><span class="p">,</span><span class="mh">0x028</span><span class="p">,</span><span class="mh">0x029</span><span class="p">,</span><span class="mh">0x029</span><span class="p">,</span>
	<span class="mh">0x029</span><span class="p">,</span><span class="mh">0x02a</span><span class="p">,</span><span class="mh">0x02a</span><span class="p">,</span><span class="mh">0x02b</span><span class="p">,</span><span class="mh">0x02b</span><span class="p">,</span><span class="mh">0x02c</span><span class="p">,</span><span class="mh">0x02c</span><span class="p">,</span><span class="mh">0x02d</span><span class="p">,</span>
	<span class="mh">0x02d</span><span class="p">,</span><span class="mh">0x02e</span><span class="p">,</span><span class="mh">0x02e</span><span class="p">,</span><span class="mh">0x02f</span><span class="p">,</span><span class="mh">0x02f</span><span class="p">,</span><span class="mh">0x030</span><span class="p">,</span><span class="mh">0x030</span><span class="p">,</span><span class="mh">0x031</span><span class="p">,</span>
	<span class="mh">0x031</span><span class="p">,</span><span class="mh">0x032</span><span class="p">,</span><span class="mh">0x032</span><span class="p">,</span><span class="mh">0x033</span><span class="p">,</span><span class="mh">0x033</span><span class="p">,</span><span class="mh">0x034</span><span class="p">,</span><span class="mh">0x034</span><span class="p">,</span><span class="mh">0x035</span><span class="p">,</span>
	<span class="mh">0x035</span><span class="p">,</span><span class="mh">0x036</span><span class="p">,</span><span class="mh">0x036</span><span class="p">,</span><span class="mh">0x037</span><span class="p">,</span><span class="mh">0x037</span><span class="p">,</span><span class="mh">0x038</span><span class="p">,</span><span class="mh">0x038</span><span class="p">,</span><span class="mh">0x038</span><span class="p">,</span>
	<span class="mh">0x039</span><span class="p">,</span><span class="mh">0x039</span><span class="p">,</span><span class="mh">0x03a</span><span class="p">,</span><span class="mh">0x03a</span><span class="p">,</span><span class="mh">0x03b</span><span class="p">,</span><span class="mh">0x03b</span><span class="p">,</span><span class="mh">0x03c</span><span class="p">,</span><span class="mh">0x03c</span><span class="p">,</span>
	<span class="mh">0x03d</span><span class="p">,</span><span class="mh">0x03d</span><span class="p">,</span><span class="mh">0x03e</span><span class="p">,</span><span class="mh">0x03e</span><span class="p">,</span><span class="mh">0x03f</span><span class="p">,</span><span class="mh">0x03f</span><span class="p">,</span><span class="mh">0x040</span><span class="p">,</span><span class="mh">0x040</span><span class="p">,</span>
	<span class="mh">0x041</span><span class="p">,</span><span class="mh">0x041</span><span class="p">,</span><span class="mh">0x042</span><span class="p">,</span><span class="mh">0x042</span><span class="p">,</span><span class="mh">0x043</span><span class="p">,</span><span class="mh">0x043</span><span class="p">,</span><span class="mh">0x044</span><span class="p">,</span><span class="mh">0x044</span><span class="p">,</span>
	<span class="mh">0x045</span><span class="p">,</span><span class="mh">0x045</span><span class="p">,</span><span class="mh">0x046</span><span class="p">,</span><span class="mh">0x046</span><span class="p">,</span><span class="mh">0x047</span><span class="p">,</span><span class="mh">0x047</span><span class="p">,</span><span class="mh">0x048</span><span class="p">,</span><span class="mh">0x048</span><span class="p">,</span>
	<span class="mh">0x049</span><span class="p">,</span><span class="mh">0x049</span><span class="p">,</span><span class="mh">0x04a</span><span class="p">,</span><span class="mh">0x04a</span><span class="p">,</span><span class="mh">0x04b</span><span class="p">,</span><span class="mh">0x04b</span><span class="p">,</span><span class="mh">0x04c</span><span class="p">,</span><span class="mh">0x04c</span><span class="p">,</span>
	<span class="mh">0x04d</span><span class="p">,</span><span class="mh">0x04d</span><span class="p">,</span><span class="mh">0x04e</span><span class="p">,</span><span class="mh">0x04e</span><span class="p">,</span><span class="mh">0x04f</span><span class="p">,</span><span class="mh">0x04f</span><span class="p">,</span><span class="mh">0x050</span><span class="p">,</span><span class="mh">0x050</span><span class="p">,</span>
	<span class="mh">0x051</span><span class="p">,</span><span class="mh">0x051</span><span class="p">,</span><span class="mh">0x052</span><span class="p">,</span><span class="mh">0x052</span><span class="p">,</span><span class="mh">0x053</span><span class="p">,</span><span class="mh">0x053</span><span class="p">,</span><span class="mh">0x054</span><span class="p">,</span><span class="mh">0x054</span><span class="p">,</span>
	<span class="mh">0x055</span><span class="p">,</span><span class="mh">0x055</span><span class="p">,</span><span class="mh">0x056</span><span class="p">,</span><span class="mh">0x056</span><span class="p">,</span><span class="mh">0x057</span><span class="p">,</span><span class="mh">0x057</span><span class="p">,</span><span class="mh">0x058</span><span class="p">,</span><span class="mh">0x058</span><span class="p">,</span>
	<span class="mh">0x059</span><span class="p">,</span><span class="mh">0x059</span><span class="p">,</span><span class="mh">0x05a</span><span class="p">,</span><span class="mh">0x05a</span><span class="p">,</span><span class="mh">0x05b</span><span class="p">,</span><span class="mh">0x05b</span><span class="p">,</span><span class="mh">0x05c</span><span class="p">,</span><span class="mh">0x05c</span><span class="p">,</span>
	<span class="mh">0x05d</span><span class="p">,</span><span class="mh">0x05d</span><span class="p">,</span><span class="mh">0x05e</span><span class="p">,</span><span class="mh">0x05e</span><span class="p">,</span><span class="mh">0x05f</span><span class="p">,</span><span class="mh">0x05f</span><span class="p">,</span><span class="mh">0x060</span><span class="p">,</span><span class="mh">0x060</span><span class="p">,</span>
	<span class="mh">0x061</span><span class="p">,</span><span class="mh">0x061</span><span class="p">,</span><span class="mh">0x062</span><span class="p">,</span><span class="mh">0x062</span><span class="p">,</span><span class="mh">0x063</span><span class="p">,</span><span class="mh">0x063</span><span class="p">,</span><span class="mh">0x064</span><span class="p">,</span><span class="mh">0x064</span><span class="p">,</span>
	<span class="mh">0x065</span><span class="p">,</span><span class="mh">0x065</span><span class="p">,</span><span class="mh">0x066</span><span class="p">,</span><span class="mh">0x066</span><span class="p">,</span><span class="mh">0x067</span><span class="p">,</span><span class="mh">0x067</span><span class="p">,</span><span class="mh">0x068</span><span class="p">,</span><span class="mh">0x068</span><span class="p">,</span>
	<span class="mh">0x069</span><span class="p">,</span><span class="mh">0x069</span><span class="p">,</span><span class="mh">0x06a</span><span class="p">,</span><span class="mh">0x06a</span><span class="p">,</span><span class="mh">0x06b</span><span class="p">,</span><span class="mh">0x06b</span><span class="p">,</span><span class="mh">0x06c</span><span class="p">,</span><span class="mh">0x06c</span><span class="p">,</span>
	<span class="mh">0x06d</span><span class="p">,</span><span class="mh">0x06d</span><span class="p">,</span><span class="mh">0x06e</span><span class="p">,</span><span class="mh">0x06e</span><span class="p">,</span><span class="mh">0x06f</span><span class="p">,</span><span class="mh">0x06f</span><span class="p">,</span><span class="mh">0x070</span><span class="p">,</span><span class="mh">0x071</span><span class="p">,</span>
	<span class="mh">0x071</span><span class="p">,</span><span class="mh">0x072</span><span class="p">,</span><span class="mh">0x072</span><span class="p">,</span><span class="mh">0x073</span><span class="p">,</span><span class="mh">0x073</span><span class="p">,</span><span class="mh">0x074</span><span class="p">,</span><span class="mh">0x074</span><span class="p">,</span><span class="mh">0x075</span><span class="p">,</span>
	<span class="mh">0x075</span><span class="p">,</span><span class="mh">0x076</span><span class="p">,</span><span class="mh">0x076</span><span class="p">,</span><span class="mh">0x077</span><span class="p">,</span><span class="mh">0x077</span><span class="p">,</span><span class="mh">0x078</span><span class="p">,</span><span class="mh">0x078</span><span class="p">,</span><span class="mh">0x079</span><span class="p">,</span>
	<span class="mh">0x079</span><span class="p">,</span><span class="mh">0x07a</span><span class="p">,</span><span class="mh">0x07a</span><span class="p">,</span><span class="mh">0x07b</span><span class="p">,</span><span class="mh">0x07b</span><span class="p">,</span><span class="mh">0x07c</span><span class="p">,</span><span class="mh">0x07c</span><span class="p">,</span><span class="mh">0x07d</span><span class="p">,</span>
	<span class="mh">0x07d</span><span class="p">,</span><span class="mh">0x07e</span><span class="p">,</span><span class="mh">0x07e</span><span class="p">,</span><span class="mh">0x07f</span><span class="p">,</span><span class="mh">0x07f</span><span class="p">,</span><span class="mh">0x080</span><span class="p">,</span><span class="mh">0x081</span><span class="p">,</span><span class="mh">0x081</span><span class="p">,</span>
	<span class="mh">0x082</span><span class="p">,</span><span class="mh">0x082</span><span class="p">,</span><span class="mh">0x083</span><span class="p">,</span><span class="mh">0x083</span><span class="p">,</span><span class="mh">0x084</span><span class="p">,</span><span class="mh">0x084</span><span class="p">,</span><span class="mh">0x085</span><span class="p">,</span><span class="mh">0x085</span><span class="p">,</span>
	<span class="mh">0x086</span><span class="p">,</span><span class="mh">0x086</span><span class="p">,</span><span class="mh">0x087</span><span class="p">,</span><span class="mh">0x087</span><span class="p">,</span><span class="mh">0x088</span><span class="p">,</span><span class="mh">0x088</span><span class="p">,</span><span class="mh">0x089</span><span class="p">,</span><span class="mh">0x089</span><span class="p">,</span>
	<span class="mh">0x08a</span><span class="p">,</span><span class="mh">0x08a</span><span class="p">,</span><span class="mh">0x08b</span><span class="p">,</span><span class="mh">0x08b</span><span class="p">,</span><span class="mh">0x08c</span><span class="p">,</span><span class="mh">0x08d</span><span class="p">,</span><span class="mh">0x08d</span><span class="p">,</span><span class="mh">0x08e</span><span class="p">,</span>
	<span class="mh">0x08e</span><span class="p">,</span><span class="mh">0x08f</span><span class="p">,</span><span class="mh">0x08f</span><span class="p">,</span><span class="mh">0x090</span><span class="p">,</span><span class="mh">0x090</span><span class="p">,</span><span class="mh">0x091</span><span class="p">,</span><span class="mh">0x091</span><span class="p">,</span><span class="mh">0x092</span><span class="p">,</span>
	<span class="mh">0x092</span><span class="p">,</span><span class="mh">0x093</span><span class="p">,</span><span class="mh">0x093</span><span class="p">,</span><span class="mh">0x094</span><span class="p">,</span><span class="mh">0x094</span><span class="p">,</span><span class="mh">0x095</span><span class="p">,</span><span class="mh">0x096</span><span class="p">,</span><span class="mh">0x096</span><span class="p">,</span>
	<span class="mh">0x097</span><span class="p">,</span><span class="mh">0x097</span><span class="p">,</span><span class="mh">0x098</span><span class="p">,</span><span class="mh">0x098</span><span class="p">,</span><span class="mh">0x099</span><span class="p">,</span><span class="mh">0x099</span><span class="p">,</span><span class="mh">0x09a</span><span class="p">,</span><span class="mh">0x09a</span><span class="p">,</span>
	<span class="mh">0x09b</span><span class="p">,</span><span class="mh">0x09b</span><span class="p">,</span><span class="mh">0x09c</span><span class="p">,</span><span class="mh">0x09c</span><span class="p">,</span><span class="mh">0x09d</span><span class="p">,</span><span class="mh">0x09d</span><span class="p">,</span><span class="mh">0x09e</span><span class="p">,</span><span class="mh">0x09f</span><span class="p">,</span>
	<span class="mh">0x09f</span><span class="p">,</span><span class="mh">0x0a0</span><span class="p">,</span><span class="mh">0x0a0</span><span class="p">,</span><span class="mh">0x0a1</span><span class="p">,</span><span class="mh">0x0a1</span><span class="p">,</span><span class="mh">0x0a2</span><span class="p">,</span><span class="mh">0x0a2</span><span class="p">,</span><span class="mh">0x0a3</span><span class="p">,</span>
	<span class="mh">0x0a3</span><span class="p">,</span><span class="mh">0x0a4</span><span class="p">,</span><span class="mh">0x0a4</span><span class="p">,</span><span class="mh">0x0a5</span><span class="p">,</span><span class="mh">0x0a6</span><span class="p">,</span><span class="mh">0x0a6</span><span class="p">,</span><span class="mh">0x0a7</span><span class="p">,</span><span class="mh">0x0a7</span><span class="p">,</span>
	<span class="mh">0x0a8</span><span class="p">,</span><span class="mh">0x0a8</span><span class="p">,</span><span class="mh">0x0a9</span><span class="p">,</span><span class="mh">0x0a9</span><span class="p">,</span><span class="mh">0x0aa</span><span class="p">,</span><span class="mh">0x0aa</span><span class="p">,</span><span class="mh">0x0ab</span><span class="p">,</span><span class="mh">0x0ab</span><span class="p">,</span>
	<span class="mh">0x0ac</span><span class="p">,</span><span class="mh">0x0ad</span><span class="p">,</span><span class="mh">0x0ad</span><span class="p">,</span><span class="mh">0x0ae</span><span class="p">,</span><span class="mh">0x0ae</span><span class="p">,</span><span class="mh">0x0af</span><span class="p">,</span><span class="mh">0x0af</span><span class="p">,</span><span class="mh">0x0b0</span><span class="p">,</span>
	<span class="mh">0x0b0</span><span class="p">,</span><span class="mh">0x0b1</span><span class="p">,</span><span class="mh">0x0b1</span><span class="p">,</span><span class="mh">0x0b2</span><span class="p">,</span><span class="mh">0x0b2</span><span class="p">,</span><span class="mh">0x0b3</span><span class="p">,</span><span class="mh">0x0b4</span><span class="p">,</span><span class="mh">0x0b4</span><span class="p">,</span>
	<span class="mh">0x0b5</span><span class="p">,</span><span class="mh">0x0b5</span><span class="p">,</span><span class="mh">0x0b6</span><span class="p">,</span><span class="mh">0x0b6</span><span class="p">,</span><span class="mh">0x0b7</span><span class="p">,</span><span class="mh">0x0b7</span><span class="p">,</span><span class="mh">0x0b8</span><span class="p">,</span><span class="mh">0x0b8</span><span class="p">,</span>
	<span class="mh">0x0b9</span><span class="p">,</span><span class="mh">0x0ba</span><span class="p">,</span><span class="mh">0x0ba</span><span class="p">,</span><span class="mh">0x0bb</span><span class="p">,</span><span class="mh">0x0bb</span><span class="p">,</span><span class="mh">0x0bc</span><span class="p">,</span><span class="mh">0x0bc</span><span class="p">,</span><span class="mh">0x0bd</span><span class="p">,</span>
	<span class="mh">0x0bd</span><span class="p">,</span><span class="mh">0x0be</span><span class="p">,</span><span class="mh">0x0be</span><span class="p">,</span><span class="mh">0x0bf</span><span class="p">,</span><span class="mh">0x0c0</span><span class="p">,</span><span class="mh">0x0c0</span><span class="p">,</span><span class="mh">0x0c1</span><span class="p">,</span><span class="mh">0x0c1</span><span class="p">,</span>
	<span class="mh">0x0c2</span><span class="p">,</span><span class="mh">0x0c2</span><span class="p">,</span><span class="mh">0x0c3</span><span class="p">,</span><span class="mh">0x0c3</span><span class="p">,</span><span class="mh">0x0c4</span><span class="p">,</span><span class="mh">0x0c4</span><span class="p">,</span><span class="mh">0x0c5</span><span class="p">,</span><span class="mh">0x0c6</span><span class="p">,</span>
	<span class="mh">0x0c6</span><span class="p">,</span><span class="mh">0x0c7</span><span class="p">,</span><span class="mh">0x0c7</span><span class="p">,</span><span class="mh">0x0c8</span><span class="p">,</span><span class="mh">0x0c8</span><span class="p">,</span><span class="mh">0x0c9</span><span class="p">,</span><span class="mh">0x0c9</span><span class="p">,</span><span class="mh">0x0ca</span><span class="p">,</span>
	<span class="mh">0x0cb</span><span class="p">,</span><span class="mh">0x0cb</span><span class="p">,</span><span class="mh">0x0cc</span><span class="p">,</span><span class="mh">0x0cc</span><span class="p">,</span><span class="mh">0x0cd</span><span class="p">,</span><span class="mh">0x0cd</span><span class="p">,</span><span class="mh">0x0ce</span><span class="p">,</span><span class="mh">0x0ce</span><span class="p">,</span>
	<span class="mh">0x0cf</span><span class="p">,</span><span class="mh">0x0d0</span><span class="p">,</span><span class="mh">0x0d0</span><span class="p">,</span><span class="mh">0x0d1</span><span class="p">,</span><span class="mh">0x0d1</span><span class="p">,</span><span class="mh">0x0d2</span><span class="p">,</span><span class="mh">0x0d2</span><span class="p">,</span><span class="mh">0x0d3</span><span class="p">,</span>
	<span class="mh">0x0d3</span><span class="p">,</span><span class="mh">0x0d4</span><span class="p">,</span><span class="mh">0x0d5</span><span class="p">,</span><span class="mh">0x0d5</span><span class="p">,</span><span class="mh">0x0d6</span><span class="p">,</span><span class="mh">0x0d6</span><span class="p">,</span><span class="mh">0x0d7</span><span class="p">,</span><span class="mh">0x0d7</span><span class="p">,</span>
	<span class="mh">0x0d8</span><span class="p">,</span><span class="mh">0x0d8</span><span class="p">,</span><span class="mh">0x0d9</span><span class="p">,</span><span class="mh">0x0da</span><span class="p">,</span><span class="mh">0x0da</span><span class="p">,</span><span class="mh">0x0db</span><span class="p">,</span><span class="mh">0x0db</span><span class="p">,</span><span class="mh">0x0dc</span><span class="p">,</span>
	<span class="mh">0x0dc</span><span class="p">,</span><span class="mh">0x0dd</span><span class="p">,</span><span class="mh">0x0de</span><span class="p">,</span><span class="mh">0x0de</span><span class="p">,</span><span class="mh">0x0df</span><span class="p">,</span><span class="mh">0x0df</span><span class="p">,</span><span class="mh">0x0e0</span><span class="p">,</span><span class="mh">0x0e0</span><span class="p">,</span>
	<span class="mh">0x0e1</span><span class="p">,</span><span class="mh">0x0e1</span><span class="p">,</span><span class="mh">0x0e2</span><span class="p">,</span><span class="mh">0x0e3</span><span class="p">,</span><span class="mh">0x0e3</span><span class="p">,</span><span class="mh">0x0e4</span><span class="p">,</span><span class="mh">0x0e4</span><span class="p">,</span><span class="mh">0x0e5</span><span class="p">,</span>
	<span class="mh">0x0e5</span><span class="p">,</span><span class="mh">0x0e6</span><span class="p">,</span><span class="mh">0x0e7</span><span class="p">,</span><span class="mh">0x0e7</span><span class="p">,</span><span class="mh">0x0e8</span><span class="p">,</span><span class="mh">0x0e8</span><span class="p">,</span><span class="mh">0x0e9</span><span class="p">,</span><span class="mh">0x0e9</span><span class="p">,</span>
	<span class="mh">0x0ea</span><span class="p">,</span><span class="mh">0x0eb</span><span class="p">,</span><span class="mh">0x0eb</span><span class="p">,</span><span class="mh">0x0ec</span><span class="p">,</span><span class="mh">0x0ec</span><span class="p">,</span><span class="mh">0x0ed</span><span class="p">,</span><span class="mh">0x0ed</span><span class="p">,</span><span class="mh">0x0ee</span><span class="p">,</span>
	<span class="mh">0x0ef</span><span class="p">,</span><span class="mh">0x0ef</span><span class="p">,</span><span class="mh">0x0f0</span><span class="p">,</span><span class="mh">0x0f0</span><span class="p">,</span><span class="mh">0x0f1</span><span class="p">,</span><span class="mh">0x0f1</span><span class="p">,</span><span class="mh">0x0f2</span><span class="p">,</span><span class="mh">0x0f3</span><span class="p">,</span>
	<span class="mh">0x0f3</span><span class="p">,</span><span class="mh">0x0f4</span><span class="p">,</span><span class="mh">0x0f4</span><span class="p">,</span><span class="mh">0x0f5</span><span class="p">,</span><span class="mh">0x0f5</span><span class="p">,</span><span class="mh">0x0f6</span><span class="p">,</span><span class="mh">0x0f7</span><span class="p">,</span><span class="mh">0x0f7</span><span class="p">,</span>
	<span class="mh">0x0f8</span><span class="p">,</span><span class="mh">0x0f8</span><span class="p">,</span><span class="mh">0x0f9</span><span class="p">,</span><span class="mh">0x0f9</span><span class="p">,</span><span class="mh">0x0fa</span><span class="p">,</span><span class="mh">0x0fb</span><span class="p">,</span><span class="mh">0x0fb</span><span class="p">,</span><span class="mh">0x0fc</span><span class="p">,</span>
	<span class="mh">0x0fc</span><span class="p">,</span><span class="mh">0x0fd</span><span class="p">,</span><span class="mh">0x0fd</span><span class="p">,</span><span class="mh">0x0fe</span><span class="p">,</span><span class="mh">0x0ff</span><span class="p">,</span><span class="mh">0x0ff</span><span class="p">,</span><span class="mh">0x100</span><span class="p">,</span><span class="mh">0x100</span><span class="p">,</span>
	<span class="mh">0x101</span><span class="p">,</span><span class="mh">0x101</span><span class="p">,</span><span class="mh">0x102</span><span class="p">,</span><span class="mh">0x103</span><span class="p">,</span><span class="mh">0x103</span><span class="p">,</span><span class="mh">0x104</span><span class="p">,</span><span class="mh">0x104</span><span class="p">,</span><span class="mh">0x105</span><span class="p">,</span>
	<span class="mh">0x106</span><span class="p">,</span><span class="mh">0x106</span><span class="p">,</span><span class="mh">0x107</span><span class="p">,</span><span class="mh">0x107</span><span class="p">,</span><span class="mh">0x108</span><span class="p">,</span><span class="mh">0x108</span><span class="p">,</span><span class="mh">0x109</span><span class="p">,</span><span class="mh">0x10a</span><span class="p">,</span>
	<span class="mh">0x10a</span><span class="p">,</span><span class="mh">0x10b</span><span class="p">,</span><span class="mh">0x10b</span><span class="p">,</span><span class="mh">0x10c</span><span class="p">,</span><span class="mh">0x10c</span><span class="p">,</span><span class="mh">0x10d</span><span class="p">,</span><span class="mh">0x10e</span><span class="p">,</span><span class="mh">0x10e</span><span class="p">,</span>
	<span class="mh">0x10f</span><span class="p">,</span><span class="mh">0x10f</span><span class="p">,</span><span class="mh">0x110</span><span class="p">,</span><span class="mh">0x111</span><span class="p">,</span><span class="mh">0x111</span><span class="p">,</span><span class="mh">0x112</span><span class="p">,</span><span class="mh">0x112</span><span class="p">,</span><span class="mh">0x113</span><span class="p">,</span>
	<span class="mh">0x114</span><span class="p">,</span><span class="mh">0x114</span><span class="p">,</span><span class="mh">0x115</span><span class="p">,</span><span class="mh">0x115</span><span class="p">,</span><span class="mh">0x116</span><span class="p">,</span><span class="mh">0x116</span><span class="p">,</span><span class="mh">0x117</span><span class="p">,</span><span class="mh">0x118</span><span class="p">,</span>
	<span class="mh">0x118</span><span class="p">,</span><span class="mh">0x119</span><span class="p">,</span><span class="mh">0x119</span><span class="p">,</span><span class="mh">0x11a</span><span class="p">,</span><span class="mh">0x11b</span><span class="p">,</span><span class="mh">0x11b</span><span class="p">,</span><span class="mh">0x11c</span><span class="p">,</span><span class="mh">0x11c</span><span class="p">,</span>
	<span class="mh">0x11d</span><span class="p">,</span><span class="mh">0x11e</span><span class="p">,</span><span class="mh">0x11e</span><span class="p">,</span><span class="mh">0x11f</span><span class="p">,</span><span class="mh">0x11f</span><span class="p">,</span><span class="mh">0x120</span><span class="p">,</span><span class="mh">0x120</span><span class="p">,</span><span class="mh">0x121</span><span class="p">,</span>
	<span class="mh">0x122</span><span class="p">,</span><span class="mh">0x122</span><span class="p">,</span><span class="mh">0x123</span><span class="p">,</span><span class="mh">0x123</span><span class="p">,</span><span class="mh">0x124</span><span class="p">,</span><span class="mh">0x125</span><span class="p">,</span><span class="mh">0x125</span><span class="p">,</span><span class="mh">0x126</span><span class="p">,</span>
	<span class="mh">0x126</span><span class="p">,</span><span class="mh">0x127</span><span class="p">,</span><span class="mh">0x128</span><span class="p">,</span><span class="mh">0x128</span><span class="p">,</span><span class="mh">0x129</span><span class="p">,</span><span class="mh">0x129</span><span class="p">,</span><span class="mh">0x12a</span><span class="p">,</span><span class="mh">0x12b</span><span class="p">,</span>
	<span class="mh">0x12b</span><span class="p">,</span><span class="mh">0x12c</span><span class="p">,</span><span class="mh">0x12c</span><span class="p">,</span><span class="mh">0x12d</span><span class="p">,</span><span class="mh">0x12e</span><span class="p">,</span><span class="mh">0x12e</span><span class="p">,</span><span class="mh">0x12f</span><span class="p">,</span><span class="mh">0x12f</span><span class="p">,</span>
	<span class="mh">0x130</span><span class="p">,</span><span class="mh">0x131</span><span class="p">,</span><span class="mh">0x131</span><span class="p">,</span><span class="mh">0x132</span><span class="p">,</span><span class="mh">0x132</span><span class="p">,</span><span class="mh">0x133</span><span class="p">,</span><span class="mh">0x134</span><span class="p">,</span><span class="mh">0x134</span><span class="p">,</span>
	<span class="mh">0x135</span><span class="p">,</span><span class="mh">0x135</span><span class="p">,</span><span class="mh">0x136</span><span class="p">,</span><span class="mh">0x137</span><span class="p">,</span><span class="mh">0x137</span><span class="p">,</span><span class="mh">0x138</span><span class="p">,</span><span class="mh">0x138</span><span class="p">,</span><span class="mh">0x139</span><span class="p">,</span>
	<span class="mh">0x13a</span><span class="p">,</span><span class="mh">0x13a</span><span class="p">,</span><span class="mh">0x13b</span><span class="p">,</span><span class="mh">0x13b</span><span class="p">,</span><span class="mh">0x13c</span><span class="p">,</span><span class="mh">0x13d</span><span class="p">,</span><span class="mh">0x13d</span><span class="p">,</span><span class="mh">0x13e</span><span class="p">,</span>
	<span class="mh">0x13e</span><span class="p">,</span><span class="mh">0x13f</span><span class="p">,</span><span class="mh">0x140</span><span class="p">,</span><span class="mh">0x140</span><span class="p">,</span><span class="mh">0x141</span><span class="p">,</span><span class="mh">0x141</span><span class="p">,</span><span class="mh">0x142</span><span class="p">,</span><span class="mh">0x143</span><span class="p">,</span>
	<span class="mh">0x143</span><span class="p">,</span><span class="mh">0x144</span><span class="p">,</span><span class="mh">0x144</span><span class="p">,</span><span class="mh">0x145</span><span class="p">,</span><span class="mh">0x146</span><span class="p">,</span><span class="mh">0x146</span><span class="p">,</span><span class="mh">0x147</span><span class="p">,</span><span class="mh">0x148</span><span class="p">,</span>
	<span class="mh">0x148</span><span class="p">,</span><span class="mh">0x149</span><span class="p">,</span><span class="mh">0x149</span><span class="p">,</span><span class="mh">0x14a</span><span class="p">,</span><span class="mh">0x14b</span><span class="p">,</span><span class="mh">0x14b</span><span class="p">,</span><span class="mh">0x14c</span><span class="p">,</span><span class="mh">0x14c</span><span class="p">,</span>
	<span class="mh">0x14d</span><span class="p">,</span><span class="mh">0x14e</span><span class="p">,</span><span class="mh">0x14e</span><span class="p">,</span><span class="mh">0x14f</span><span class="p">,</span><span class="mh">0x14f</span><span class="p">,</span><span class="mh">0x150</span><span class="p">,</span><span class="mh">0x151</span><span class="p">,</span><span class="mh">0x151</span><span class="p">,</span>
	<span class="mh">0x152</span><span class="p">,</span><span class="mh">0x153</span><span class="p">,</span><span class="mh">0x153</span><span class="p">,</span><span class="mh">0x154</span><span class="p">,</span><span class="mh">0x154</span><span class="p">,</span><span class="mh">0x155</span><span class="p">,</span><span class="mh">0x156</span><span class="p">,</span><span class="mh">0x156</span><span class="p">,</span>
	<span class="mh">0x157</span><span class="p">,</span><span class="mh">0x157</span><span class="p">,</span><span class="mh">0x158</span><span class="p">,</span><span class="mh">0x159</span><span class="p">,</span><span class="mh">0x159</span><span class="p">,</span><span class="mh">0x15a</span><span class="p">,</span><span class="mh">0x15b</span><span class="p">,</span><span class="mh">0x15b</span><span class="p">,</span>
	<span class="mh">0x15c</span><span class="p">,</span><span class="mh">0x15c</span><span class="p">,</span><span class="mh">0x15d</span><span class="p">,</span><span class="mh">0x15e</span><span class="p">,</span><span class="mh">0x15e</span><span class="p">,</span><span class="mh">0x15f</span><span class="p">,</span><span class="mh">0x160</span><span class="p">,</span><span class="mh">0x160</span><span class="p">,</span>
	<span class="mh">0x161</span><span class="p">,</span><span class="mh">0x161</span><span class="p">,</span><span class="mh">0x162</span><span class="p">,</span><span class="mh">0x163</span><span class="p">,</span><span class="mh">0x163</span><span class="p">,</span><span class="mh">0x164</span><span class="p">,</span><span class="mh">0x165</span><span class="p">,</span><span class="mh">0x165</span><span class="p">,</span>
	<span class="mh">0x166</span><span class="p">,</span><span class="mh">0x166</span><span class="p">,</span><span class="mh">0x167</span><span class="p">,</span><span class="mh">0x168</span><span class="p">,</span><span class="mh">0x168</span><span class="p">,</span><span class="mh">0x169</span><span class="p">,</span><span class="mh">0x16a</span><span class="p">,</span><span class="mh">0x16a</span><span class="p">,</span>
	<span class="mh">0x16b</span><span class="p">,</span><span class="mh">0x16b</span><span class="p">,</span><span class="mh">0x16c</span><span class="p">,</span><span class="mh">0x16d</span><span class="p">,</span><span class="mh">0x16d</span><span class="p">,</span><span class="mh">0x16e</span><span class="p">,</span><span class="mh">0x16f</span><span class="p">,</span><span class="mh">0x16f</span><span class="p">,</span>
	<span class="mh">0x170</span><span class="p">,</span><span class="mh">0x170</span><span class="p">,</span><span class="mh">0x171</span><span class="p">,</span><span class="mh">0x172</span><span class="p">,</span><span class="mh">0x172</span><span class="p">,</span><span class="mh">0x173</span><span class="p">,</span><span class="mh">0x174</span><span class="p">,</span><span class="mh">0x174</span><span class="p">,</span>
	<span class="mh">0x175</span><span class="p">,</span><span class="mh">0x175</span><span class="p">,</span><span class="mh">0x176</span><span class="p">,</span><span class="mh">0x177</span><span class="p">,</span><span class="mh">0x177</span><span class="p">,</span><span class="mh">0x178</span><span class="p">,</span><span class="mh">0x179</span><span class="p">,</span><span class="mh">0x179</span><span class="p">,</span>
	<span class="mh">0x17a</span><span class="p">,</span><span class="mh">0x17a</span><span class="p">,</span><span class="mh">0x17b</span><span class="p">,</span><span class="mh">0x17c</span><span class="p">,</span><span class="mh">0x17c</span><span class="p">,</span><span class="mh">0x17d</span><span class="p">,</span><span class="mh">0x17e</span><span class="p">,</span><span class="mh">0x17e</span><span class="p">,</span>
	<span class="mh">0x17f</span><span class="p">,</span><span class="mh">0x180</span><span class="p">,</span><span class="mh">0x180</span><span class="p">,</span><span class="mh">0x181</span><span class="p">,</span><span class="mh">0x181</span><span class="p">,</span><span class="mh">0x182</span><span class="p">,</span><span class="mh">0x183</span><span class="p">,</span><span class="mh">0x183</span><span class="p">,</span>
	<span class="mh">0x184</span><span class="p">,</span><span class="mh">0x185</span><span class="p">,</span><span class="mh">0x185</span><span class="p">,</span><span class="mh">0x186</span><span class="p">,</span><span class="mh">0x187</span><span class="p">,</span><span class="mh">0x187</span><span class="p">,</span><span class="mh">0x188</span><span class="p">,</span><span class="mh">0x188</span><span class="p">,</span>
	<span class="mh">0x189</span><span class="p">,</span><span class="mh">0x18a</span><span class="p">,</span><span class="mh">0x18a</span><span class="p">,</span><span class="mh">0x18b</span><span class="p">,</span><span class="mh">0x18c</span><span class="p">,</span><span class="mh">0x18c</span><span class="p">,</span><span class="mh">0x18d</span><span class="p">,</span><span class="mh">0x18e</span><span class="p">,</span>
	<span class="mh">0x18e</span><span class="p">,</span><span class="mh">0x18f</span><span class="p">,</span><span class="mh">0x190</span><span class="p">,</span><span class="mh">0x190</span><span class="p">,</span><span class="mh">0x191</span><span class="p">,</span><span class="mh">0x191</span><span class="p">,</span><span class="mh">0x192</span><span class="p">,</span><span class="mh">0x193</span><span class="p">,</span>
	<span class="mh">0x193</span><span class="p">,</span><span class="mh">0x194</span><span class="p">,</span><span class="mh">0x195</span><span class="p">,</span><span class="mh">0x195</span><span class="p">,</span><span class="mh">0x196</span><span class="p">,</span><span class="mh">0x197</span><span class="p">,</span><span class="mh">0x197</span><span class="p">,</span><span class="mh">0x198</span><span class="p">,</span>
	<span class="mh">0x199</span><span class="p">,</span><span class="mh">0x199</span><span class="p">,</span><span class="mh">0x19a</span><span class="p">,</span><span class="mh">0x19a</span><span class="p">,</span><span class="mh">0x19b</span><span class="p">,</span><span class="mh">0x19c</span><span class="p">,</span><span class="mh">0x19c</span><span class="p">,</span><span class="mh">0x19d</span><span class="p">,</span>
	<span class="mh">0x19e</span><span class="p">,</span><span class="mh">0x19e</span><span class="p">,</span><span class="mh">0x19f</span><span class="p">,</span><span class="mh">0x1a0</span><span class="p">,</span><span class="mh">0x1a0</span><span class="p">,</span><span class="mh">0x1a1</span><span class="p">,</span><span class="mh">0x1a2</span><span class="p">,</span><span class="mh">0x1a2</span><span class="p">,</span>
	<span class="mh">0x1a3</span><span class="p">,</span><span class="mh">0x1a4</span><span class="p">,</span><span class="mh">0x1a4</span><span class="p">,</span><span class="mh">0x1a5</span><span class="p">,</span><span class="mh">0x1a6</span><span class="p">,</span><span class="mh">0x1a6</span><span class="p">,</span><span class="mh">0x1a7</span><span class="p">,</span><span class="mh">0x1a8</span><span class="p">,</span>
	<span class="mh">0x1a8</span><span class="p">,</span><span class="mh">0x1a9</span><span class="p">,</span><span class="mh">0x1a9</span><span class="p">,</span><span class="mh">0x1aa</span><span class="p">,</span><span class="mh">0x1ab</span><span class="p">,</span><span class="mh">0x1ab</span><span class="p">,</span><span class="mh">0x1ac</span><span class="p">,</span><span class="mh">0x1ad</span><span class="p">,</span>
	<span class="mh">0x1ad</span><span class="p">,</span><span class="mh">0x1ae</span><span class="p">,</span><span class="mh">0x1af</span><span class="p">,</span><span class="mh">0x1af</span><span class="p">,</span><span class="mh">0x1b0</span><span class="p">,</span><span class="mh">0x1b1</span><span class="p">,</span><span class="mh">0x1b1</span><span class="p">,</span><span class="mh">0x1b2</span><span class="p">,</span>
	<span class="mh">0x1b3</span><span class="p">,</span><span class="mh">0x1b3</span><span class="p">,</span><span class="mh">0x1b4</span><span class="p">,</span><span class="mh">0x1b5</span><span class="p">,</span><span class="mh">0x1b5</span><span class="p">,</span><span class="mh">0x1b6</span><span class="p">,</span><span class="mh">0x1b7</span><span class="p">,</span><span class="mh">0x1b7</span><span class="p">,</span>
	<span class="mh">0x1b8</span><span class="p">,</span><span class="mh">0x1b9</span><span class="p">,</span><span class="mh">0x1b9</span><span class="p">,</span><span class="mh">0x1ba</span><span class="p">,</span><span class="mh">0x1bb</span><span class="p">,</span><span class="mh">0x1bb</span><span class="p">,</span><span class="mh">0x1bc</span><span class="p">,</span><span class="mh">0x1bd</span><span class="p">,</span>
	<span class="mh">0x1bd</span><span class="p">,</span><span class="mh">0x1be</span><span class="p">,</span><span class="mh">0x1bf</span><span class="p">,</span><span class="mh">0x1bf</span><span class="p">,</span><span class="mh">0x1c0</span><span class="p">,</span><span class="mh">0x1c1</span><span class="p">,</span><span class="mh">0x1c1</span><span class="p">,</span><span class="mh">0x1c2</span><span class="p">,</span>
	<span class="mh">0x1c3</span><span class="p">,</span><span class="mh">0x1c3</span><span class="p">,</span><span class="mh">0x1c4</span><span class="p">,</span><span class="mh">0x1c5</span><span class="p">,</span><span class="mh">0x1c5</span><span class="p">,</span><span class="mh">0x1c6</span><span class="p">,</span><span class="mh">0x1c7</span><span class="p">,</span><span class="mh">0x1c7</span><span class="p">,</span>
	<span class="mh">0x1c8</span><span class="p">,</span><span class="mh">0x1c9</span><span class="p">,</span><span class="mh">0x1c9</span><span class="p">,</span><span class="mh">0x1ca</span><span class="p">,</span><span class="mh">0x1cb</span><span class="p">,</span><span class="mh">0x1cb</span><span class="p">,</span><span class="mh">0x1cc</span><span class="p">,</span><span class="mh">0x1cd</span><span class="p">,</span>
	<span class="mh">0x1cd</span><span class="p">,</span><span class="mh">0x1ce</span><span class="p">,</span><span class="mh">0x1cf</span><span class="p">,</span><span class="mh">0x1cf</span><span class="p">,</span><span class="mh">0x1d0</span><span class="p">,</span><span class="mh">0x1d1</span><span class="p">,</span><span class="mh">0x1d1</span><span class="p">,</span><span class="mh">0x1d2</span><span class="p">,</span>
	<span class="mh">0x1d3</span><span class="p">,</span><span class="mh">0x1d3</span><span class="p">,</span><span class="mh">0x1d4</span><span class="p">,</span><span class="mh">0x1d5</span><span class="p">,</span><span class="mh">0x1d5</span><span class="p">,</span><span class="mh">0x1d6</span><span class="p">,</span><span class="mh">0x1d7</span><span class="p">,</span><span class="mh">0x1d7</span><span class="p">,</span>
	<span class="mh">0x1d8</span><span class="p">,</span><span class="mh">0x1d9</span><span class="p">,</span><span class="mh">0x1d9</span><span class="p">,</span><span class="mh">0x1da</span><span class="p">,</span><span class="mh">0x1db</span><span class="p">,</span><span class="mh">0x1db</span><span class="p">,</span><span class="mh">0x1dc</span><span class="p">,</span><span class="mh">0x1dd</span><span class="p">,</span>
	<span class="mh">0x1dd</span><span class="p">,</span><span class="mh">0x1de</span><span class="p">,</span><span class="mh">0x1df</span><span class="p">,</span><span class="mh">0x1df</span><span class="p">,</span><span class="mh">0x1e0</span><span class="p">,</span><span class="mh">0x1e1</span><span class="p">,</span><span class="mh">0x1e1</span><span class="p">,</span><span class="mh">0x1e2</span><span class="p">,</span>
	<span class="mh">0x1e3</span><span class="p">,</span><span class="mh">0x1e4</span><span class="p">,</span><span class="mh">0x1e4</span><span class="p">,</span><span class="mh">0x1e5</span><span class="p">,</span><span class="mh">0x1e6</span><span class="p">,</span><span class="mh">0x1e6</span><span class="p">,</span><span class="mh">0x1e7</span><span class="p">,</span><span class="mh">0x1e8</span><span class="p">,</span>
	<span class="mh">0x1e8</span><span class="p">,</span><span class="mh">0x1e9</span><span class="p">,</span><span class="mh">0x1ea</span><span class="p">,</span><span class="mh">0x1ea</span><span class="p">,</span><span class="mh">0x1eb</span><span class="p">,</span><span class="mh">0x1ec</span><span class="p">,</span><span class="mh">0x1ec</span><span class="p">,</span><span class="mh">0x1ed</span><span class="p">,</span>
	<span class="mh">0x1ee</span><span class="p">,</span><span class="mh">0x1ee</span><span class="p">,</span><span class="mh">0x1ef</span><span class="p">,</span><span class="mh">0x1f0</span><span class="p">,</span><span class="mh">0x1f0</span><span class="p">,</span><span class="mh">0x1f1</span><span class="p">,</span><span class="mh">0x1f2</span><span class="p">,</span><span class="mh">0x1f3</span><span class="p">,</span>
	<span class="mh">0x1f3</span><span class="p">,</span><span class="mh">0x1f4</span><span class="p">,</span><span class="mh">0x1f5</span><span class="p">,</span><span class="mh">0x1f5</span><span class="p">,</span><span class="mh">0x1f6</span><span class="p">,</span><span class="mh">0x1f7</span><span class="p">,</span><span class="mh">0x1f7</span><span class="p">,</span><span class="mh">0x1f8</span><span class="p">,</span>
	<span class="mh">0x1f9</span><span class="p">,</span><span class="mh">0x1f9</span><span class="p">,</span><span class="mh">0x1fa</span><span class="p">,</span><span class="mh">0x1fb</span><span class="p">,</span><span class="mh">0x1fb</span><span class="p">,</span><span class="mh">0x1fc</span><span class="p">,</span><span class="mh">0x1fd</span><span class="p">,</span><span class="mh">0x1fe</span><span class="p">,</span>
	<span class="mh">0x1fe</span><span class="p">,</span><span class="mh">0x1ff</span><span class="p">,</span><span class="mh">0x200</span><span class="p">,</span><span class="mh">0x200</span><span class="p">,</span><span class="mh">0x201</span><span class="p">,</span><span class="mh">0x202</span><span class="p">,</span><span class="mh">0x202</span><span class="p">,</span><span class="mh">0x203</span><span class="p">,</span>
	<span class="mh">0x204</span><span class="p">,</span><span class="mh">0x205</span><span class="p">,</span><span class="mh">0x205</span><span class="p">,</span><span class="mh">0x206</span><span class="p">,</span><span class="mh">0x207</span><span class="p">,</span><span class="mh">0x207</span><span class="p">,</span><span class="mh">0x208</span><span class="p">,</span><span class="mh">0x209</span><span class="p">,</span>
	<span class="mh">0x209</span><span class="p">,</span><span class="mh">0x20a</span><span class="p">,</span><span class="mh">0x20b</span><span class="p">,</span><span class="mh">0x20b</span><span class="p">,</span><span class="mh">0x20c</span><span class="p">,</span><span class="mh">0x20d</span><span class="p">,</span><span class="mh">0x20e</span><span class="p">,</span><span class="mh">0x20e</span><span class="p">,</span>
	<span class="mh">0x20f</span><span class="p">,</span><span class="mh">0x210</span><span class="p">,</span><span class="mh">0x210</span><span class="p">,</span><span class="mh">0x211</span><span class="p">,</span><span class="mh">0x212</span><span class="p">,</span><span class="mh">0x212</span><span class="p">,</span><span class="mh">0x213</span><span class="p">,</span><span class="mh">0x214</span><span class="p">,</span>
	<span class="mh">0x215</span><span class="p">,</span><span class="mh">0x215</span><span class="p">,</span><span class="mh">0x216</span><span class="p">,</span><span class="mh">0x217</span><span class="p">,</span><span class="mh">0x217</span><span class="p">,</span><span class="mh">0x218</span><span class="p">,</span><span class="mh">0x219</span><span class="p">,</span><span class="mh">0x21a</span><span class="p">,</span>
	<span class="mh">0x21a</span><span class="p">,</span><span class="mh">0x21b</span><span class="p">,</span><span class="mh">0x21c</span><span class="p">,</span><span class="mh">0x21c</span><span class="p">,</span><span class="mh">0x21d</span><span class="p">,</span><span class="mh">0x21e</span><span class="p">,</span><span class="mh">0x21e</span><span class="p">,</span><span class="mh">0x21f</span><span class="p">,</span>
	<span class="mh">0x220</span><span class="p">,</span><span class="mh">0x221</span><span class="p">,</span><span class="mh">0x221</span><span class="p">,</span><span class="mh">0x222</span><span class="p">,</span><span class="mh">0x223</span><span class="p">,</span><span class="mh">0x223</span><span class="p">,</span><span class="mh">0x224</span><span class="p">,</span><span class="mh">0x225</span><span class="p">,</span>
	<span class="mh">0x226</span><span class="p">,</span><span class="mh">0x226</span><span class="p">,</span><span class="mh">0x227</span><span class="p">,</span><span class="mh">0x228</span><span class="p">,</span><span class="mh">0x228</span><span class="p">,</span><span class="mh">0x229</span><span class="p">,</span><span class="mh">0x22a</span><span class="p">,</span><span class="mh">0x22b</span><span class="p">,</span>
	<span class="mh">0x22b</span><span class="p">,</span><span class="mh">0x22c</span><span class="p">,</span><span class="mh">0x22d</span><span class="p">,</span><span class="mh">0x22d</span><span class="p">,</span><span class="mh">0x22e</span><span class="p">,</span><span class="mh">0x22f</span><span class="p">,</span><span class="mh">0x230</span><span class="p">,</span><span class="mh">0x230</span><span class="p">,</span>
	<span class="mh">0x231</span><span class="p">,</span><span class="mh">0x232</span><span class="p">,</span><span class="mh">0x232</span><span class="p">,</span><span class="mh">0x233</span><span class="p">,</span><span class="mh">0x234</span><span class="p">,</span><span class="mh">0x235</span><span class="p">,</span><span class="mh">0x235</span><span class="p">,</span><span class="mh">0x236</span><span class="p">,</span>
	<span class="mh">0x237</span><span class="p">,</span><span class="mh">0x237</span><span class="p">,</span><span class="mh">0x238</span><span class="p">,</span><span class="mh">0x239</span><span class="p">,</span><span class="mh">0x23a</span><span class="p">,</span><span class="mh">0x23a</span><span class="p">,</span><span class="mh">0x23b</span><span class="p">,</span><span class="mh">0x23c</span><span class="p">,</span>
	<span class="mh">0x23c</span><span class="p">,</span><span class="mh">0x23d</span><span class="p">,</span><span class="mh">0x23e</span><span class="p">,</span><span class="mh">0x23f</span><span class="p">,</span><span class="mh">0x23f</span><span class="p">,</span><span class="mh">0x240</span><span class="p">,</span><span class="mh">0x241</span><span class="p">,</span><span class="mh">0x241</span><span class="p">,</span>
	<span class="mh">0x242</span><span class="p">,</span><span class="mh">0x243</span><span class="p">,</span><span class="mh">0x244</span><span class="p">,</span><span class="mh">0x244</span><span class="p">,</span><span class="mh">0x245</span><span class="p">,</span><span class="mh">0x246</span><span class="p">,</span><span class="mh">0x247</span><span class="p">,</span><span class="mh">0x247</span><span class="p">,</span>
	<span class="mh">0x248</span><span class="p">,</span><span class="mh">0x249</span><span class="p">,</span><span class="mh">0x249</span><span class="p">,</span><span class="mh">0x24a</span><span class="p">,</span><span class="mh">0x24b</span><span class="p">,</span><span class="mh">0x24c</span><span class="p">,</span><span class="mh">0x24c</span><span class="p">,</span><span class="mh">0x24d</span><span class="p">,</span>
	<span class="mh">0x24e</span><span class="p">,</span><span class="mh">0x24f</span><span class="p">,</span><span class="mh">0x24f</span><span class="p">,</span><span class="mh">0x250</span><span class="p">,</span><span class="mh">0x251</span><span class="p">,</span><span class="mh">0x251</span><span class="p">,</span><span class="mh">0x252</span><span class="p">,</span><span class="mh">0x253</span><span class="p">,</span>
	<span class="mh">0x254</span><span class="p">,</span><span class="mh">0x254</span><span class="p">,</span><span class="mh">0x255</span><span class="p">,</span><span class="mh">0x256</span><span class="p">,</span><span class="mh">0x257</span><span class="p">,</span><span class="mh">0x257</span><span class="p">,</span><span class="mh">0x258</span><span class="p">,</span><span class="mh">0x259</span><span class="p">,</span>
	<span class="mh">0x259</span><span class="p">,</span><span class="mh">0x25a</span><span class="p">,</span><span class="mh">0x25b</span><span class="p">,</span><span class="mh">0x25c</span><span class="p">,</span><span class="mh">0x25c</span><span class="p">,</span><span class="mh">0x25d</span><span class="p">,</span><span class="mh">0x25e</span><span class="p">,</span><span class="mh">0x25f</span><span class="p">,</span>
	<span class="mh">0x25f</span><span class="p">,</span><span class="mh">0x260</span><span class="p">,</span><span class="mh">0x261</span><span class="p">,</span><span class="mh">0x262</span><span class="p">,</span><span class="mh">0x262</span><span class="p">,</span><span class="mh">0x263</span><span class="p">,</span><span class="mh">0x264</span><span class="p">,</span><span class="mh">0x265</span><span class="p">,</span>
	<span class="mh">0x265</span><span class="p">,</span><span class="mh">0x266</span><span class="p">,</span><span class="mh">0x267</span><span class="p">,</span><span class="mh">0x267</span><span class="p">,</span><span class="mh">0x268</span><span class="p">,</span><span class="mh">0x269</span><span class="p">,</span><span class="mh">0x26a</span><span class="p">,</span><span class="mh">0x26a</span><span class="p">,</span>
	<span class="mh">0x26b</span><span class="p">,</span><span class="mh">0x26c</span><span class="p">,</span><span class="mh">0x26d</span><span class="p">,</span><span class="mh">0x26d</span><span class="p">,</span><span class="mh">0x26e</span><span class="p">,</span><span class="mh">0x26f</span><span class="p">,</span><span class="mh">0x270</span><span class="p">,</span><span class="mh">0x270</span><span class="p">,</span>
	<span class="mh">0x271</span><span class="p">,</span><span class="mh">0x272</span><span class="p">,</span><span class="mh">0x273</span><span class="p">,</span><span class="mh">0x273</span><span class="p">,</span><span class="mh">0x274</span><span class="p">,</span><span class="mh">0x275</span><span class="p">,</span><span class="mh">0x276</span><span class="p">,</span><span class="mh">0x276</span><span class="p">,</span>
	<span class="mh">0x277</span><span class="p">,</span><span class="mh">0x278</span><span class="p">,</span><span class="mh">0x279</span><span class="p">,</span><span class="mh">0x279</span><span class="p">,</span><span class="mh">0x27a</span><span class="p">,</span><span class="mh">0x27b</span><span class="p">,</span><span class="mh">0x27c</span><span class="p">,</span><span class="mh">0x27c</span><span class="p">,</span>
	<span class="mh">0x27d</span><span class="p">,</span><span class="mh">0x27e</span><span class="p">,</span><span class="mh">0x27f</span><span class="p">,</span><span class="mh">0x27f</span><span class="p">,</span><span class="mh">0x280</span><span class="p">,</span><span class="mh">0x281</span><span class="p">,</span><span class="mh">0x282</span><span class="p">,</span><span class="mh">0x282</span><span class="p">,</span>
	<span class="mh">0x283</span><span class="p">,</span><span class="mh">0x284</span><span class="p">,</span><span class="mh">0x285</span><span class="p">,</span><span class="mh">0x285</span><span class="p">,</span><span class="mh">0x286</span><span class="p">,</span><span class="mh">0x287</span><span class="p">,</span><span class="mh">0x288</span><span class="p">,</span><span class="mh">0x288</span><span class="p">,</span>
	<span class="mh">0x289</span><span class="p">,</span><span class="mh">0x28a</span><span class="p">,</span><span class="mh">0x28b</span><span class="p">,</span><span class="mh">0x28b</span><span class="p">,</span><span class="mh">0x28c</span><span class="p">,</span><span class="mh">0x28d</span><span class="p">,</span><span class="mh">0x28e</span><span class="p">,</span><span class="mh">0x28e</span><span class="p">,</span>
	<span class="mh">0x28f</span><span class="p">,</span><span class="mh">0x290</span><span class="p">,</span><span class="mh">0x291</span><span class="p">,</span><span class="mh">0x291</span><span class="p">,</span><span class="mh">0x292</span><span class="p">,</span><span class="mh">0x293</span><span class="p">,</span><span class="mh">0x294</span><span class="p">,</span><span class="mh">0x294</span><span class="p">,</span>
	<span class="mh">0x295</span><span class="p">,</span><span class="mh">0x296</span><span class="p">,</span><span class="mh">0x297</span><span class="p">,</span><span class="mh">0x298</span><span class="p">,</span><span class="mh">0x298</span><span class="p">,</span><span class="mh">0x299</span><span class="p">,</span><span class="mh">0x29a</span><span class="p">,</span><span class="mh">0x29b</span><span class="p">,</span>
	<span class="mh">0x29b</span><span class="p">,</span><span class="mh">0x29c</span><span class="p">,</span><span class="mh">0x29d</span><span class="p">,</span><span class="mh">0x29e</span><span class="p">,</span><span class="mh">0x29e</span><span class="p">,</span><span class="mh">0x29f</span><span class="p">,</span><span class="mh">0x2a0</span><span class="p">,</span><span class="mh">0x2a1</span><span class="p">,</span>
	<span class="mh">0x2a1</span><span class="p">,</span><span class="mh">0x2a2</span><span class="p">,</span><span class="mh">0x2a3</span><span class="p">,</span><span class="mh">0x2a4</span><span class="p">,</span><span class="mh">0x2a5</span><span class="p">,</span><span class="mh">0x2a5</span><span class="p">,</span><span class="mh">0x2a6</span><span class="p">,</span><span class="mh">0x2a7</span><span class="p">,</span>
	<span class="mh">0x2a8</span><span class="p">,</span><span class="mh">0x2a8</span><span class="p">,</span><span class="mh">0x2a9</span><span class="p">,</span><span class="mh">0x2aa</span><span class="p">,</span><span class="mh">0x2ab</span><span class="p">,</span><span class="mh">0x2ab</span><span class="p">,</span><span class="mh">0x2ac</span><span class="p">,</span><span class="mh">0x2ad</span><span class="p">,</span>
	<span class="mh">0x2ae</span><span class="p">,</span><span class="mh">0x2af</span><span class="p">,</span><span class="mh">0x2af</span><span class="p">,</span><span class="mh">0x2b0</span><span class="p">,</span><span class="mh">0x2b1</span><span class="p">,</span><span class="mh">0x2b2</span><span class="p">,</span><span class="mh">0x2b2</span><span class="p">,</span><span class="mh">0x2b3</span><span class="p">,</span>
	<span class="mh">0x2b4</span><span class="p">,</span><span class="mh">0x2b5</span><span class="p">,</span><span class="mh">0x2b5</span><span class="p">,</span><span class="mh">0x2b6</span><span class="p">,</span><span class="mh">0x2b7</span><span class="p">,</span><span class="mh">0x2b8</span><span class="p">,</span><span class="mh">0x2b9</span><span class="p">,</span><span class="mh">0x2b9</span><span class="p">,</span>
	<span class="mh">0x2ba</span><span class="p">,</span><span class="mh">0x2bb</span><span class="p">,</span><span class="mh">0x2bc</span><span class="p">,</span><span class="mh">0x2bc</span><span class="p">,</span><span class="mh">0x2bd</span><span class="p">,</span><span class="mh">0x2be</span><span class="p">,</span><span class="mh">0x2bf</span><span class="p">,</span><span class="mh">0x2c0</span><span class="p">,</span>
	<span class="mh">0x2c0</span><span class="p">,</span><span class="mh">0x2c1</span><span class="p">,</span><span class="mh">0x2c2</span><span class="p">,</span><span class="mh">0x2c3</span><span class="p">,</span><span class="mh">0x2c4</span><span class="p">,</span><span class="mh">0x2c4</span><span class="p">,</span><span class="mh">0x2c5</span><span class="p">,</span><span class="mh">0x2c6</span><span class="p">,</span>
	<span class="mh">0x2c7</span><span class="p">,</span><span class="mh">0x2c7</span><span class="p">,</span><span class="mh">0x2c8</span><span class="p">,</span><span class="mh">0x2c9</span><span class="p">,</span><span class="mh">0x2ca</span><span class="p">,</span><span class="mh">0x2cb</span><span class="p">,</span><span class="mh">0x2cb</span><span class="p">,</span><span class="mh">0x2cc</span><span class="p">,</span>
	<span class="mh">0x2cd</span><span class="p">,</span><span class="mh">0x2ce</span><span class="p">,</span><span class="mh">0x2ce</span><span class="p">,</span><span class="mh">0x2cf</span><span class="p">,</span><span class="mh">0x2d0</span><span class="p">,</span><span class="mh">0x2d1</span><span class="p">,</span><span class="mh">0x2d2</span><span class="p">,</span><span class="mh">0x2d2</span><span class="p">,</span>
	<span class="mh">0x2d3</span><span class="p">,</span><span class="mh">0x2d4</span><span class="p">,</span><span class="mh">0x2d5</span><span class="p">,</span><span class="mh">0x2d6</span><span class="p">,</span><span class="mh">0x2d6</span><span class="p">,</span><span class="mh">0x2d7</span><span class="p">,</span><span class="mh">0x2d8</span><span class="p">,</span><span class="mh">0x2d9</span><span class="p">,</span>
	<span class="mh">0x2da</span><span class="p">,</span><span class="mh">0x2da</span><span class="p">,</span><span class="mh">0x2db</span><span class="p">,</span><span class="mh">0x2dc</span><span class="p">,</span><span class="mh">0x2dd</span><span class="p">,</span><span class="mh">0x2dd</span><span class="p">,</span><span class="mh">0x2de</span><span class="p">,</span><span class="mh">0x2df</span><span class="p">,</span>
	<span class="mh">0x2e0</span><span class="p">,</span><span class="mh">0x2e1</span><span class="p">,</span><span class="mh">0x2e1</span><span class="p">,</span><span class="mh">0x2e2</span><span class="p">,</span><span class="mh">0x2e3</span><span class="p">,</span><span class="mh">0x2e4</span><span class="p">,</span><span class="mh">0x2e5</span><span class="p">,</span><span class="mh">0x2e5</span><span class="p">,</span>
	<span class="mh">0x2e6</span><span class="p">,</span><span class="mh">0x2e7</span><span class="p">,</span><span class="mh">0x2e8</span><span class="p">,</span><span class="mh">0x2e9</span><span class="p">,</span><span class="mh">0x2e9</span><span class="p">,</span><span class="mh">0x2ea</span><span class="p">,</span><span class="mh">0x2eb</span><span class="p">,</span><span class="mh">0x2ec</span><span class="p">,</span>
	<span class="mh">0x2ed</span><span class="p">,</span><span class="mh">0x2ed</span><span class="p">,</span><span class="mh">0x2ee</span><span class="p">,</span><span class="mh">0x2ef</span><span class="p">,</span><span class="mh">0x2f0</span><span class="p">,</span><span class="mh">0x2f1</span><span class="p">,</span><span class="mh">0x2f1</span><span class="p">,</span><span class="mh">0x2f2</span><span class="p">,</span>
	<span class="mh">0x2f3</span><span class="p">,</span><span class="mh">0x2f4</span><span class="p">,</span><span class="mh">0x2f5</span><span class="p">,</span><span class="mh">0x2f5</span><span class="p">,</span><span class="mh">0x2f6</span><span class="p">,</span><span class="mh">0x2f7</span><span class="p">,</span><span class="mh">0x2f8</span><span class="p">,</span><span class="mh">0x2f9</span><span class="p">,</span>
	<span class="mh">0x2f9</span><span class="p">,</span><span class="mh">0x2fa</span><span class="p">,</span><span class="mh">0x2fb</span><span class="p">,</span><span class="mh">0x2fc</span><span class="p">,</span><span class="mh">0x2fd</span><span class="p">,</span><span class="mh">0x2fd</span><span class="p">,</span><span class="mh">0x2fe</span><span class="p">,</span><span class="mh">0x2ff</span><span class="p">,</span>
	<span class="mh">0x300</span><span class="p">,</span><span class="mh">0x301</span><span class="p">,</span><span class="mh">0x302</span><span class="p">,</span><span class="mh">0x302</span><span class="p">,</span><span class="mh">0x303</span><span class="p">,</span><span class="mh">0x304</span><span class="p">,</span><span class="mh">0x305</span><span class="p">,</span><span class="mh">0x306</span><span class="p">,</span>
	<span class="mh">0x306</span><span class="p">,</span><span class="mh">0x307</span><span class="p">,</span><span class="mh">0x308</span><span class="p">,</span><span class="mh">0x309</span><span class="p">,</span><span class="mh">0x30a</span><span class="p">,</span><span class="mh">0x30a</span><span class="p">,</span><span class="mh">0x30b</span><span class="p">,</span><span class="mh">0x30c</span><span class="p">,</span>
	<span class="mh">0x30d</span><span class="p">,</span><span class="mh">0x30e</span><span class="p">,</span><span class="mh">0x30f</span><span class="p">,</span><span class="mh">0x30f</span><span class="p">,</span><span class="mh">0x310</span><span class="p">,</span><span class="mh">0x311</span><span class="p">,</span><span class="mh">0x312</span><span class="p">,</span><span class="mh">0x313</span><span class="p">,</span>
	<span class="mh">0x313</span><span class="p">,</span><span class="mh">0x314</span><span class="p">,</span><span class="mh">0x315</span><span class="p">,</span><span class="mh">0x316</span><span class="p">,</span><span class="mh">0x317</span><span class="p">,</span><span class="mh">0x318</span><span class="p">,</span><span class="mh">0x318</span><span class="p">,</span><span class="mh">0x319</span><span class="p">,</span>
	<span class="mh">0x31a</span><span class="p">,</span><span class="mh">0x31b</span><span class="p">,</span><span class="mh">0x31c</span><span class="p">,</span><span class="mh">0x31c</span><span class="p">,</span><span class="mh">0x31d</span><span class="p">,</span><span class="mh">0x31e</span><span class="p">,</span><span class="mh">0x31f</span><span class="p">,</span><span class="mh">0x320</span><span class="p">,</span>
	<span class="mh">0x321</span><span class="p">,</span><span class="mh">0x321</span><span class="p">,</span><span class="mh">0x322</span><span class="p">,</span><span class="mh">0x323</span><span class="p">,</span><span class="mh">0x324</span><span class="p">,</span><span class="mh">0x325</span><span class="p">,</span><span class="mh">0x326</span><span class="p">,</span><span class="mh">0x326</span><span class="p">,</span>
	<span class="mh">0x327</span><span class="p">,</span><span class="mh">0x328</span><span class="p">,</span><span class="mh">0x329</span><span class="p">,</span><span class="mh">0x32a</span><span class="p">,</span><span class="mh">0x32a</span><span class="p">,</span><span class="mh">0x32b</span><span class="p">,</span><span class="mh">0x32c</span><span class="p">,</span><span class="mh">0x32d</span><span class="p">,</span>
	<span class="mh">0x32e</span><span class="p">,</span><span class="mh">0x32f</span><span class="p">,</span><span class="mh">0x32f</span><span class="p">,</span><span class="mh">0x330</span><span class="p">,</span><span class="mh">0x331</span><span class="p">,</span><span class="mh">0x332</span><span class="p">,</span><span class="mh">0x333</span><span class="p">,</span><span class="mh">0x334</span><span class="p">,</span>
	<span class="mh">0x334</span><span class="p">,</span><span class="mh">0x335</span><span class="p">,</span><span class="mh">0x336</span><span class="p">,</span><span class="mh">0x337</span><span class="p">,</span><span class="mh">0x338</span><span class="p">,</span><span class="mh">0x339</span><span class="p">,</span><span class="mh">0x339</span><span class="p">,</span><span class="mh">0x33a</span><span class="p">,</span>
	<span class="mh">0x33b</span><span class="p">,</span><span class="mh">0x33c</span><span class="p">,</span><span class="mh">0x33d</span><span class="p">,</span><span class="mh">0x33e</span><span class="p">,</span><span class="mh">0x33e</span><span class="p">,</span><span class="mh">0x33f</span><span class="p">,</span><span class="mh">0x340</span><span class="p">,</span><span class="mh">0x341</span><span class="p">,</span>
	<span class="mh">0x342</span><span class="p">,</span><span class="mh">0x343</span><span class="p">,</span><span class="mh">0x343</span><span class="p">,</span><span class="mh">0x344</span><span class="p">,</span><span class="mh">0x345</span><span class="p">,</span><span class="mh">0x346</span><span class="p">,</span><span class="mh">0x347</span><span class="p">,</span><span class="mh">0x348</span><span class="p">,</span>
	<span class="mh">0x349</span><span class="p">,</span><span class="mh">0x349</span><span class="p">,</span><span class="mh">0x34a</span><span class="p">,</span><span class="mh">0x34b</span><span class="p">,</span><span class="mh">0x34c</span><span class="p">,</span><span class="mh">0x34d</span><span class="p">,</span><span class="mh">0x34e</span><span class="p">,</span><span class="mh">0x34e</span><span class="p">,</span>
	<span class="mh">0x34f</span><span class="p">,</span><span class="mh">0x350</span><span class="p">,</span><span class="mh">0x351</span><span class="p">,</span><span class="mh">0x352</span><span class="p">,</span><span class="mh">0x353</span><span class="p">,</span><span class="mh">0x353</span><span class="p">,</span><span class="mh">0x354</span><span class="p">,</span><span class="mh">0x355</span><span class="p">,</span>
	<span class="mh">0x356</span><span class="p">,</span><span class="mh">0x357</span><span class="p">,</span><span class="mh">0x358</span><span class="p">,</span><span class="mh">0x359</span><span class="p">,</span><span class="mh">0x359</span><span class="p">,</span><span class="mh">0x35a</span><span class="p">,</span><span class="mh">0x35b</span><span class="p">,</span><span class="mh">0x35c</span><span class="p">,</span>
	<span class="mh">0x35d</span><span class="p">,</span><span class="mh">0x35e</span><span class="p">,</span><span class="mh">0x35f</span><span class="p">,</span><span class="mh">0x35f</span><span class="p">,</span><span class="mh">0x360</span><span class="p">,</span><span class="mh">0x361</span><span class="p">,</span><span class="mh">0x362</span><span class="p">,</span><span class="mh">0x363</span><span class="p">,</span>
	<span class="mh">0x364</span><span class="p">,</span><span class="mh">0x364</span><span class="p">,</span><span class="mh">0x365</span><span class="p">,</span><span class="mh">0x366</span><span class="p">,</span><span class="mh">0x367</span><span class="p">,</span><span class="mh">0x368</span><span class="p">,</span><span class="mh">0x369</span><span class="p">,</span><span class="mh">0x36a</span><span class="p">,</span>
	<span class="mh">0x36a</span><span class="p">,</span><span class="mh">0x36b</span><span class="p">,</span><span class="mh">0x36c</span><span class="p">,</span><span class="mh">0x36d</span><span class="p">,</span><span class="mh">0x36e</span><span class="p">,</span><span class="mh">0x36f</span><span class="p">,</span><span class="mh">0x370</span><span class="p">,</span><span class="mh">0x370</span><span class="p">,</span>
	<span class="mh">0x371</span><span class="p">,</span><span class="mh">0x372</span><span class="p">,</span><span class="mh">0x373</span><span class="p">,</span><span class="mh">0x374</span><span class="p">,</span><span class="mh">0x375</span><span class="p">,</span><span class="mh">0x376</span><span class="p">,</span><span class="mh">0x377</span><span class="p">,</span><span class="mh">0x377</span><span class="p">,</span>
	<span class="mh">0x378</span><span class="p">,</span><span class="mh">0x379</span><span class="p">,</span><span class="mh">0x37a</span><span class="p">,</span><span class="mh">0x37b</span><span class="p">,</span><span class="mh">0x37c</span><span class="p">,</span><span class="mh">0x37d</span><span class="p">,</span><span class="mh">0x37d</span><span class="p">,</span><span class="mh">0x37e</span><span class="p">,</span>
	<span class="mh">0x37f</span><span class="p">,</span><span class="mh">0x380</span><span class="p">,</span><span class="mh">0x381</span><span class="p">,</span><span class="mh">0x382</span><span class="p">,</span><span class="mh">0x383</span><span class="p">,</span><span class="mh">0x383</span><span class="p">,</span><span class="mh">0x384</span><span class="p">,</span><span class="mh">0x385</span><span class="p">,</span>
	<span class="mh">0x386</span><span class="p">,</span><span class="mh">0x387</span><span class="p">,</span><span class="mh">0x388</span><span class="p">,</span><span class="mh">0x389</span><span class="p">,</span><span class="mh">0x38a</span><span class="p">,</span><span class="mh">0x38a</span><span class="p">,</span><span class="mh">0x38b</span><span class="p">,</span><span class="mh">0x38c</span><span class="p">,</span>
	<span class="mh">0x38d</span><span class="p">,</span><span class="mh">0x38e</span><span class="p">,</span><span class="mh">0x38f</span><span class="p">,</span><span class="mh">0x390</span><span class="p">,</span><span class="mh">0x391</span><span class="p">,</span><span class="mh">0x391</span><span class="p">,</span><span class="mh">0x392</span><span class="p">,</span><span class="mh">0x393</span><span class="p">,</span>
	<span class="mh">0x394</span><span class="p">,</span><span class="mh">0x395</span><span class="p">,</span><span class="mh">0x396</span><span class="p">,</span><span class="mh">0x397</span><span class="p">,</span><span class="mh">0x398</span><span class="p">,</span><span class="mh">0x398</span><span class="p">,</span><span class="mh">0x399</span><span class="p">,</span><span class="mh">0x39a</span><span class="p">,</span>
	<span class="mh">0x39b</span><span class="p">,</span><span class="mh">0x39c</span><span class="p">,</span><span class="mh">0x39d</span><span class="p">,</span><span class="mh">0x39e</span><span class="p">,</span><span class="mh">0x39f</span><span class="p">,</span><span class="mh">0x39f</span><span class="p">,</span><span class="mh">0x3a0</span><span class="p">,</span><span class="mh">0x3a1</span><span class="p">,</span>
	<span class="mh">0x3a2</span><span class="p">,</span><span class="mh">0x3a3</span><span class="p">,</span><span class="mh">0x3a4</span><span class="p">,</span><span class="mh">0x3a5</span><span class="p">,</span><span class="mh">0x3a6</span><span class="p">,</span><span class="mh">0x3a7</span><span class="p">,</span><span class="mh">0x3a7</span><span class="p">,</span><span class="mh">0x3a8</span><span class="p">,</span>
	<span class="mh">0x3a9</span><span class="p">,</span><span class="mh">0x3aa</span><span class="p">,</span><span class="mh">0x3ab</span><span class="p">,</span><span class="mh">0x3ac</span><span class="p">,</span><span class="mh">0x3ad</span><span class="p">,</span><span class="mh">0x3ae</span><span class="p">,</span><span class="mh">0x3ae</span><span class="p">,</span><span class="mh">0x3af</span><span class="p">,</span>
	<span class="mh">0x3b0</span><span class="p">,</span><span class="mh">0x3b1</span><span class="p">,</span><span class="mh">0x3b2</span><span class="p">,</span><span class="mh">0x3b3</span><span class="p">,</span><span class="mh">0x3b4</span><span class="p">,</span><span class="mh">0x3b5</span><span class="p">,</span><span class="mh">0x3b6</span><span class="p">,</span><span class="mh">0x3b6</span><span class="p">,</span>
	<span class="mh">0x3b7</span><span class="p">,</span><span class="mh">0x3b8</span><span class="p">,</span><span class="mh">0x3b9</span><span class="p">,</span><span class="mh">0x3ba</span><span class="p">,</span><span class="mh">0x3bb</span><span class="p">,</span><span class="mh">0x3bc</span><span class="p">,</span><span class="mh">0x3bd</span><span class="p">,</span><span class="mh">0x3be</span><span class="p">,</span>
	<span class="mh">0x3bf</span><span class="p">,</span><span class="mh">0x3bf</span><span class="p">,</span><span class="mh">0x3c0</span><span class="p">,</span><span class="mh">0x3c1</span><span class="p">,</span><span class="mh">0x3c2</span><span class="p">,</span><span class="mh">0x3c3</span><span class="p">,</span><span class="mh">0x3c4</span><span class="p">,</span><span class="mh">0x3c5</span><span class="p">,</span>
	<span class="mh">0x3c6</span><span class="p">,</span><span class="mh">0x3c7</span><span class="p">,</span><span class="mh">0x3c7</span><span class="p">,</span><span class="mh">0x3c8</span><span class="p">,</span><span class="mh">0x3c9</span><span class="p">,</span><span class="mh">0x3ca</span><span class="p">,</span><span class="mh">0x3cb</span><span class="p">,</span><span class="mh">0x3cc</span><span class="p">,</span>
	<span class="mh">0x3cd</span><span class="p">,</span><span class="mh">0x3ce</span><span class="p">,</span><span class="mh">0x3cf</span><span class="p">,</span><span class="mh">0x3d0</span><span class="p">,</span><span class="mh">0x3d1</span><span class="p">,</span><span class="mh">0x3d1</span><span class="p">,</span><span class="mh">0x3d2</span><span class="p">,</span><span class="mh">0x3d3</span><span class="p">,</span>
	<span class="mh">0x3d4</span><span class="p">,</span><span class="mh">0x3d5</span><span class="p">,</span><span class="mh">0x3d6</span><span class="p">,</span><span class="mh">0x3d7</span><span class="p">,</span><span class="mh">0x3d8</span><span class="p">,</span><span class="mh">0x3d9</span><span class="p">,</span><span class="mh">0x3da</span><span class="p">,</span><span class="mh">0x3da</span><span class="p">,</span>
	<span class="mh">0x3db</span><span class="p">,</span><span class="mh">0x3dc</span><span class="p">,</span><span class="mh">0x3dd</span><span class="p">,</span><span class="mh">0x3de</span><span class="p">,</span><span class="mh">0x3df</span><span class="p">,</span><span class="mh">0x3e0</span><span class="p">,</span><span class="mh">0x3e1</span><span class="p">,</span><span class="mh">0x3e2</span><span class="p">,</span>
	<span class="mh">0x3e3</span><span class="p">,</span><span class="mh">0x3e4</span><span class="p">,</span><span class="mh">0x3e4</span><span class="p">,</span><span class="mh">0x3e5</span><span class="p">,</span><span class="mh">0x3e6</span><span class="p">,</span><span class="mh">0x3e7</span><span class="p">,</span><span class="mh">0x3e8</span><span class="p">,</span><span class="mh">0x3e9</span><span class="p">,</span>
	<span class="mh">0x3ea</span><span class="p">,</span><span class="mh">0x3eb</span><span class="p">,</span><span class="mh">0x3ec</span><span class="p">,</span><span class="mh">0x3ed</span><span class="p">,</span><span class="mh">0x3ee</span><span class="p">,</span><span class="mh">0x3ef</span><span class="p">,</span><span class="mh">0x3ef</span><span class="p">,</span><span class="mh">0x3f0</span><span class="p">,</span>
	<span class="mh">0x3f1</span><span class="p">,</span><span class="mh">0x3f2</span><span class="p">,</span><span class="mh">0x3f3</span><span class="p">,</span><span class="mh">0x3f4</span><span class="p">,</span><span class="mh">0x3f5</span><span class="p">,</span><span class="mh">0x3f6</span><span class="p">,</span><span class="mh">0x3f7</span><span class="p">,</span><span class="mh">0x3f8</span><span class="p">,</span>
	<span class="mh">0x3f9</span><span class="p">,</span><span class="mh">0x3fa</span><span class="p">,</span><span class="mh">0x3fa</span><span class="p">,</span><span class="mh">0x3fb</span><span class="p">,</span><span class="mh">0x3fc</span><span class="p">,</span><span class="mh">0x3fd</span><span class="p">,</span><span class="mh">0x3fe</span><span class="p">,</span><span class="mh">0x3ff</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Attenuation according to GM recommendations, in -0.375 dB units.</span>
<span class="cm"> * table[v] = 40 * log(v / 127) / -0.375</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">snd_opl4_volume_table</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mi">255</span><span class="p">,</span><span class="mi">224</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mi">173</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">141</span><span class="p">,</span><span class="mi">134</span><span class="p">,</span>
	<span class="mi">128</span><span class="p">,</span><span class="mi">122</span><span class="p">,</span><span class="mi">117</span><span class="p">,</span><span class="mi">113</span><span class="p">,</span><span class="mi">109</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">102</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span>
	 <span class="mi">96</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span>
	 <span class="mi">77</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span>
	 <span class="mi">64</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span>
	 <span class="mi">53</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span>
	 <span class="mi">45</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span>
	 <span class="mi">38</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span>
	 <span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>
	 <span class="mi">26</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span>
	 <span class="mi">21</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>
	 <span class="mi">17</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>
	 <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>
	  <span class="mi">9</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>
	  <span class="mi">6</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>
	  <span class="mi">2</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Initializes all voices.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">snd_opl4_synth_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OPL4_MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_MISC</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">OPL4_DAMP_BIT</span><span class="p">);</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="n">INIT_LIST_HEAD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">off_voices</span><span class="p">);</span>
	<span class="n">INIT_LIST_HEAD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">on_voices</span><span class="p">);</span>
	<span class="n">memset</span><span class="p">(</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">));</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OPL4_MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">number</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
		<span class="n">list_add_tail</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">list</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">off_voices</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">snd_midi_channel_set_clear</span><span class="p">(</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">chset</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Shuts down all voices.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">snd_opl4_synth_shutdown</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OPL4_MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_MISC</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span>
			       <span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">reg_misc</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">OPL4_KEY_ON_BIT</span><span class="p">);</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Executes the callback for all voices playing the specified note.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_do_for_note</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="kt">int</span> <span class="n">note</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span>
				 <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">))</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">;</span>

	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OPL4_MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span> <span class="o">==</span> <span class="n">chan</span> <span class="o">&amp;&amp;</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">note</span> <span class="o">==</span> <span class="n">note</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">func</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Executes the callback for all voices of to the specified channel.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_do_for_channel</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span>
				    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">))</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">;</span>

	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OPL4_MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span> <span class="o">==</span> <span class="n">chan</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">func</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Executes the callback for all active voices.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_do_for_all</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span>
				<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">))</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">;</span>

	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">OPL4_MAX_VOICES</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">voices</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="p">)</span>
			<span class="n">func</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_update_volume</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">att</span><span class="p">;</span>

	<span class="n">att</span> <span class="o">=</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">tone_attenuate</span><span class="p">;</span>
	<span class="n">att</span> <span class="o">+=</span> <span class="n">snd_opl4_volume_table</span><span class="p">[</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">chset</span><span class="o">-&gt;</span><span class="n">gs_master_volume</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">];</span>
	<span class="n">att</span> <span class="o">+=</span> <span class="n">snd_opl4_volume_table</span><span class="p">[</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">gm_volume</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">];</span>
	<span class="n">att</span> <span class="o">+=</span> <span class="n">snd_opl4_volume_table</span><span class="p">[</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">gm_expression</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">];</span>
	<span class="n">att</span> <span class="o">+=</span> <span class="n">snd_opl4_volume_table</span><span class="p">[</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">velocity</span><span class="p">];</span>
	<span class="n">att</span> <span class="o">=</span> <span class="mh">0x7f</span> <span class="o">-</span> <span class="p">(</span><span class="mh">0x7f</span> <span class="o">-</span> <span class="n">att</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">volume_factor</span><span class="p">)</span> <span class="o">/</span> <span class="mh">0xfe</span> <span class="o">-</span> <span class="n">volume_boost</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">att</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">att</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">att</span> <span class="o">&gt;</span> <span class="mh">0x7e</span><span class="p">)</span>
		<span class="n">att</span> <span class="o">=</span> <span class="mh">0x7e</span><span class="p">;</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_LEVEL</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="p">(</span><span class="n">att</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">level_direct</span><span class="p">);</span>
	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">level_direct</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_update_pan</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">pan</span> <span class="o">=</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">panpot</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">drum_channel</span><span class="p">)</span>
		<span class="n">pan</span> <span class="o">+=</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">control</span><span class="p">[</span><span class="n">MIDI_CTL_MSB_PAN</span><span class="p">]</span> <span class="o">-</span> <span class="mh">0x40</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pan</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">7</span><span class="p">)</span>
		<span class="n">pan</span> <span class="o">=</span> <span class="o">-</span><span class="mi">7</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pan</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span>
		<span class="n">pan</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">=</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">OPL4_PAN_POT_MASK</span><span class="p">)</span>
		<span class="o">|</span> <span class="p">(</span><span class="n">pan</span> <span class="o">&amp;</span> <span class="n">OPL4_PAN_POT_MASK</span><span class="p">);</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_MISC</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_update_vibrato_depth</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span>
					  <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">depth</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">drum_channel</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">depth</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span> <span class="o">-</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">vibrato</span><span class="p">)</span>
		<span class="o">*</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">control</span><span class="p">[</span><span class="n">MIDI_CTL_VIBRATO_DEPTH</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">);</span>
	<span class="n">depth</span> <span class="o">=</span> <span class="p">(</span><span class="n">depth</span> <span class="o">&gt;&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">vibrato</span><span class="p">;</span>
	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_lfo_vibrato</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">OPL4_VIBRATO_DEPTH_MASK</span><span class="p">;</span>
	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_lfo_vibrato</span> <span class="o">|=</span> <span class="n">depth</span> <span class="o">&amp;</span> <span class="n">OPL4_VIBRATO_DEPTH_MASK</span><span class="p">;</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_LFO_VIBRATO</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_lfo_vibrato</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_update_pitch</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span> <span class="o">=</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">chan</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">note</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="n">octave</span><span class="p">;</span>

	<span class="n">note</span> <span class="o">=</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">drum_channel</span> <span class="o">?</span> <span class="mi">60</span> <span class="o">:</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">note</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * pitch is in 100/128 cents, so 0x80 is one semitone and</span>
<span class="cm">	 * 0x600 is one octave.</span>
<span class="cm">	 */</span>
	<span class="n">pitch</span> <span class="o">=</span> <span class="p">((</span><span class="n">note</span> <span class="o">-</span> <span class="mi">60</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">*</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">key_scaling</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="mi">60</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">);</span>
	<span class="n">pitch</span> <span class="o">+=</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">pitch_offset</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">drum_channel</span><span class="p">)</span>
		<span class="n">pitch</span> <span class="o">+=</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">gm_rpn_coarse_tuning</span><span class="p">;</span>
	<span class="n">pitch</span> <span class="o">+=</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">gm_rpn_fine_tuning</span> <span class="o">&gt;&gt;</span> <span class="mi">7</span><span class="p">;</span>
	<span class="n">pitch</span> <span class="o">+=</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">midi_pitchbend</span> <span class="o">*</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">gm_rpn_pitch_bend_range</span> <span class="o">/</span> <span class="mh">0x2000</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pitch</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">pitch</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pitch</span> <span class="o">&gt;=</span> <span class="mh">0x6000</span><span class="p">)</span>
		<span class="n">pitch</span> <span class="o">=</span> <span class="mh">0x5fff</span><span class="p">;</span>
	<span class="n">octave</span> <span class="o">=</span> <span class="n">pitch</span> <span class="o">/</span> <span class="mh">0x600</span> <span class="o">-</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">pitch</span> <span class="o">=</span> <span class="n">snd_opl4_pitch_map</span><span class="p">[</span><span class="n">pitch</span> <span class="o">%</span> <span class="mh">0x600</span><span class="p">];</span>

	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_OCTAVE</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="p">(</span><span class="n">octave</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">pitch</span> <span class="o">&gt;&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">OPL4_F_NUMBER_HIGH_MASK</span><span class="p">));</span>
	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_f_number</span> <span class="o">=</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_f_number</span> <span class="o">&amp;</span> <span class="n">OPL4_TONE_NUMBER_BIT8</span><span class="p">)</span>
		<span class="o">|</span> <span class="p">((</span><span class="n">pitch</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">OPL4_F_NUMBER_LOW_MASK</span><span class="p">);</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_F_NUMBER</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_f_number</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_update_tone_parameters</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span>
					    <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_ATTACK_DECAY1</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">reg_attack_decay1</span><span class="p">);</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_LEVEL_DECAY2</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">reg_level_decay2</span><span class="p">);</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_RELEASE_CORRECTION</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">reg_release_correction</span><span class="p">);</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_TREMOLO</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
		       <span class="n">voice</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">reg_tremolo</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* allocate one voice */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="nf">snd_opl4_get_voice</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* first, try to get the oldest key-off voice */</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">list_empty</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">off_voices</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">list_entry</span><span class="p">(</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">off_voices</span><span class="p">.</span><span class="n">next</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span><span class="p">,</span> <span class="n">list</span><span class="p">);</span>
	<span class="cm">/* then get the oldest key-on voice */</span>
	<span class="n">snd_BUG_ON</span><span class="p">(</span><span class="n">list_empty</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">on_voices</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">list_entry</span><span class="p">(</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">on_voices</span><span class="p">.</span><span class="n">next</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span><span class="p">,</span> <span class="n">list</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_wait_for_wave_headers</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">timeout</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>

	<span class="k">while</span> <span class="p">((</span><span class="n">inb</span><span class="p">(</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">fm_port</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">OPL4_STATUS_LOAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">--</span><span class="n">timeout</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">udelay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">snd_opl4_note_on</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">note</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vel</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span> <span class="o">=</span> <span class="n">private_data</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">opl4_region_ptr</span> <span class="o">*</span><span class="n">regions</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">opl4_sound</span> <span class="o">*</span><span class="n">sound</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">voices</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>

	<span class="cm">/* determine the number of voices and voice parameters */</span>
	<span class="n">i</span> <span class="o">=</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">drum_channel</span> <span class="o">?</span> <span class="mh">0x80</span> <span class="o">:</span> <span class="p">(</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">midi_program</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">);</span>
	<span class="n">regions</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">snd_yrw801_regions</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">regions</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">note</span> <span class="o">&gt;=</span> <span class="n">regions</span><span class="o">-&gt;</span><span class="n">regions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">key_min</span> <span class="o">&amp;&amp;</span>
		    <span class="n">note</span> <span class="o">&lt;=</span> <span class="n">regions</span><span class="o">-&gt;</span><span class="n">regions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">key_max</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">sound</span><span class="p">[</span><span class="n">voices</span><span class="p">]</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">regions</span><span class="o">-&gt;</span><span class="n">regions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">sound</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="n">voices</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span>
				<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cm">/* allocate and initialize the needed voices */</span>
	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">voices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">snd_opl4_get_voice</span><span class="p">(</span><span class="n">opl4</span><span class="p">);</span>
		<span class="n">list_del</span><span class="p">(</span><span class="o">&amp;</span><span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">);</span>
		<span class="n">list_add_tail</span><span class="p">(</span><span class="o">&amp;</span><span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">on_voices</span><span class="p">);</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">chan</span> <span class="o">=</span> <span class="n">chan</span><span class="p">;</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">note</span> <span class="o">=</span> <span class="n">note</span><span class="p">;</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">velocity</span> <span class="o">=</span> <span class="n">vel</span> <span class="o">&amp;</span> <span class="mh">0x7f</span><span class="p">;</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sound</span> <span class="o">=</span> <span class="n">sound</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="p">}</span>

	<span class="cm">/* set tone number (triggers header loading) */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">voices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_f_number</span> <span class="o">=</span>
			<span class="p">(</span><span class="n">sound</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">tone</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">OPL4_TONE_NUMBER_BIT8</span><span class="p">;</span>
		<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_F_NUMBER</span> <span class="o">+</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
			       <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_f_number</span><span class="p">);</span>
		<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_TONE_NUMBER</span> <span class="o">+</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
			       <span class="n">sound</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">tone</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* set parameters which can be set while loading */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">voices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">=</span> <span class="n">OPL4_LFO_RESET_BIT</span><span class="p">;</span>
		<span class="n">snd_opl4_update_pan</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
		<span class="n">snd_opl4_update_pitch</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">level_direct</span> <span class="o">=</span> <span class="n">OPL4_LEVEL_DIRECT_BIT</span><span class="p">;</span>
		<span class="n">snd_opl4_update_volume</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>

	<span class="cm">/* wait for completion of loading */</span>
	<span class="n">snd_opl4_wait_for_wave_headers</span><span class="p">(</span><span class="n">opl4</span><span class="p">);</span>

	<span class="cm">/* set remaining parameters */</span>
	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">voices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">snd_opl4_update_tone_parameters</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_lfo_vibrato</span> <span class="o">=</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sound</span><span class="o">-&gt;</span><span class="n">reg_lfo_vibrato</span><span class="p">;</span>
		<span class="n">snd_opl4_update_vibrato_depth</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
	<span class="p">}</span>

	<span class="cm">/* finally, switch on all voices */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">voices</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">=</span>
			<span class="p">(</span><span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">&amp;</span> <span class="mh">0x1f</span><span class="p">)</span> <span class="o">|</span> <span class="n">OPL4_KEY_ON_BIT</span><span class="p">;</span>
		<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_MISC</span> <span class="o">+</span> <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span>
			       <span class="n">voice</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">reg_misc</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">reg_lock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_voice_off</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">list_del</span><span class="p">(</span><span class="o">&amp;</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">);</span>
	<span class="n">list_add_tail</span><span class="p">(</span><span class="o">&amp;</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">off_voices</span><span class="p">);</span>

	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">OPL4_KEY_ON_BIT</span><span class="p">;</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_MISC</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">snd_opl4_note_off</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">note</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vel</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span> <span class="o">=</span> <span class="n">private_data</span><span class="p">;</span>

	<span class="n">snd_opl4_do_for_note</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_voice_off</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">snd_opl4_terminate_voice</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span><span class="p">,</span> <span class="k">struct</span> <span class="n">opl4_voice</span> <span class="o">*</span><span class="n">voice</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">list_del</span><span class="p">(</span><span class="o">&amp;</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">);</span>
	<span class="n">list_add_tail</span><span class="p">(</span><span class="o">&amp;</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">list</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">opl4</span><span class="o">-&gt;</span><span class="n">off_voices</span><span class="p">);</span>

	<span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">=</span> <span class="p">(</span><span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">OPL4_KEY_ON_BIT</span><span class="p">)</span> <span class="o">|</span> <span class="n">OPL4_DAMP_BIT</span><span class="p">;</span>
	<span class="n">snd_opl4_write</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">OPL4_REG_MISC</span> <span class="o">+</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">number</span><span class="p">,</span> <span class="n">voice</span><span class="o">-&gt;</span><span class="n">reg_misc</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">snd_opl4_terminate_note</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">note</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span> <span class="o">=</span> <span class="n">private_data</span><span class="p">;</span>

	<span class="n">snd_opl4_do_for_note</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_terminate_voice</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">snd_opl4_control</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_midi_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span> <span class="o">=</span> <span class="n">private_data</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_MSB_MODWHEEL</span>:
		<span class="n">chan</span><span class="o">-&gt;</span><span class="n">control</span><span class="p">[</span><span class="n">MIDI_CTL_VIBRATO_DEPTH</span><span class="p">]</span> <span class="o">=</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">control</span><span class="p">[</span><span class="n">MIDI_CTL_MSB_MODWHEEL</span><span class="p">];</span>
		<span class="n">snd_opl4_do_for_channel</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_update_vibrato_depth</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_MSB_MAIN_VOLUME</span>:
		<span class="n">snd_opl4_do_for_channel</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_update_volume</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_MSB_PAN</span>:
		<span class="n">snd_opl4_do_for_channel</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_update_pan</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_MSB_EXPRESSION</span>:
		<span class="n">snd_opl4_do_for_channel</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_update_volume</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_VIBRATO_RATE</span>:
		<span class="cm">/* not yet supported */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_VIBRATO_DEPTH</span>:
		<span class="n">snd_opl4_do_for_channel</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_update_vibrato_depth</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_VIBRATO_DELAY</span>:
		<span class="cm">/* not yet supported */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_E1_REVERB_DEPTH</span>:
		<span class="cm">/*</span>
<span class="cm">		 * Each OPL4 voice has a bit called &quot;Pseudo-Reverb&quot;, but</span>
<span class="cm">		 * IMHO _not_ using it enhances the listening experience.</span>
<span class="cm">		 */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MIDI_CTL_PITCHBEND</span>:
		<span class="n">snd_opl4_do_for_channel</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span> <span class="n">snd_opl4_update_pitch</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">snd_opl4_sysex</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span>
		    <span class="kt">int</span> <span class="n">parsed</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_midi_channel_set</span> <span class="o">*</span><span class="n">chset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_opl4</span> <span class="o">*</span><span class="n">opl4</span> <span class="o">=</span> <span class="n">private_data</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">parsed</span> <span class="o">==</span> <span class="n">SNDRV_MIDI_SYSEX_GS_MASTER_VOLUME</span><span class="p">)</span>
		<span class="n">snd_opl4_do_for_all</span><span class="p">(</span><span class="n">opl4</span><span class="p">,</span> <span class="n">snd_opl4_update_volume</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
