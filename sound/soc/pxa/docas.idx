f | hx4700.c | s | 5.8K | 195 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | poodle.c | s | 8.1K | 265 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | Makefile | g | 1.9K |  | Dmitry Artamonow | mad_soft@inbox.ru | 1305839459 |  | ASoC: add iPAQ hx4700 machine driver  AK4641 connected via I2S and I2C, jack detection via GPIO.  Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com> Signed-off-by: Dmitry Artamonow <mad_soft@inbox.ru> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pxa-ssp.h | s | 1.0K | 37 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | magician.c | s | 13K | 481 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | mioa701_wm9713.c | s | 7.0K | 196 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tosa.c | s | 7.0K | 239 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | zylonite.c | s | 6.9K | 240 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | spitz.c | s | 9.4K | 305 | Axel Lin | axel.lin@gmail.com | 1329494973 |  | ASoC: Change spitz_ext_control to take dapm as argument.  This fixes below build warning:   CC      sound/soc/pxa/spitz.o sound/soc/pxa/spitz.c: In function 'spitz_startup': sound/soc/pxa/spitz.c:116: warning: passing argument 1 of 'spitz_ext_control' from incompatible pointer type sound/soc/pxa/spitz.c:47: note: expected 'struct snd_soc_card *' but argument is of type 'struct snd_soc_codec *'  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pxa2xx-pcm.c | s | 3.7K | 123 | Axel Lin | axel.lin@gmail.com | 1322226916 |  | ASoC: Convert pxa directory to module_platform_driver  Factor out some boilerplate code.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Marek Vasut <marek.vasut@gmail.com> Acked-by: Robert Jarzmik <robert.jarzmik@free.fr> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | raumfeld.c | s | 7.9K | 278 | Shawn Guo | shawn.guo@linaro.org | 1330432520 |  | ASoC: Remove unnecessary -codec from cs4270 driver name  Similar to what commit 1e3ad57 (ASoC: Remove redundant -codec from WM8776 driver name) does for wm8776 driver, this patch does the same thing for cs4270 driver.  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Timur Tabi <timur@freescale.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | e750_wm9705.c | s | 4.4K | 144 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | imote2.c | s | 2.2K | 85 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | e800_wm9712.c | s | 4.1K | 136 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | corgi.c | s | 8.9K | 289 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tavorevb3.c | s | 5.2K | 154 | Axel Lin | axel.lin@gmail.com | 1325509719 |  | ASoC: Use dai_fmt in tavorevb3 machine driver  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Haojian Zhuang <haojian.zhuang@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pxa2xx-i2s.c | s | 9.7K | 346 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1334601627 |  | 
f | pxa2xx-ac97.c | s | 6.7K | 230 | Linus Torvalds | torvalds@linux-foundation.org | 1333069330 |  | 
f | saarb.c | s | 5.1K | 154 | Axel Lin | axel.lin@gmail.com | 1325509716 |  | ASoC: Convert saarb to table based DAPM init  Also remove a unused ret variable to silence the build warning.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | palm27x.c | s | 5.0K | 172 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pxa-ssp.c | s | 19K | 699 | Qiao Zhou | zhouqiao@marvell.com | 1339388775 |  | ASoC: fix pxa-ssp compiling issue under mach-mmp  pxa-ssp.c uses API like cpu_is_pxa3xx(), cpu_is_pxa2xx(), which is defined under arch-pxa architecture, and drivers under mach-mmp can't find it. so just use ssp->type to replace that API.  Signed-off-by: Qiao Zhou <zhouqiao@marvell.com> Acked-by: Haojian Zhuang <haojian.zhuang@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | e740_wm9705.c | s | 4.8K | 156 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | Kconfig | g | 5.6K |  | Axel Lin | axel.lin@gmail.com | 1323042436 |  | ASoC: Fix dependency for SND_SOC_RAUMFELD and SND_PXA2XX_SOC_HX4700  SND_SOC_RAUMFELD selects SND_SOC_CS4270 which needs CONFIG_I2C, and also selects SND_SOC_AK4104 which needs SPI_MASTER. Thus make SND_SOC_RAUMFELD depend on I2C && SPI_MASTER.  Add depend on SPI_MASTER to fix below build error if CONFIG_SPI_MASTER is not selected.    LD      .tmp_vmlinux1 sound/built-in.o: In function `ak4104_spi_write': last.c:(.text+0x290cc): undefined reference to `spi_sync' sound/built-in.o: In function `ak4104_probe': last.c:(.text+0x292a0): undefined reference to `spi_write_then_read' sound/built-in.o: In function `ak4104_spi_probe': last.c:(.text+0x29398): undefined reference to `spi_setup' sound/built-in.o: In function `ak4104_init': last.c:(.init.text+0x4ec): undefined reference to `spi_register_driver' make: *** [.tmp_vmlinux1] Error 1  Add depend on I2C to fix below build error if CONFIG_I2C is not selected:   CC      sound/soc/codecs/cs4270.o sound/soc/codecs/cs4270.c: In function 'cs4270_i2c_probe': sound/soc/codecs/cs4270.c:657: error: implicit declaration of function 'i2c_smbus_read_byte_data' sound/soc/codecs/cs4270.c: In function 'cs4270_init': sound/soc/codecs/cs4270.c:730: error: implicit declaration of function 'i2c_add_driver' sound/soc/codecs/cs4270.c: In function 'cs4270_exit': sound/soc/codecs/cs4270.c:736: error: implicit declaration of function 'i2c_del_driver' make[3]: *** [sound/soc/codecs/cs4270.o] Error 1 make[2]: *** [sound/soc/codecs] Error 2 make[1]: *** [sound/soc] Error 2 make: *** [sound] Error 2  SND_PXA2XX_SOC_HX4700 selects SND_SOC_AK4641 which needs CONFIG_I2C. Thus make SND_PXA2XX_SOC_HX4700 depend on I2C.  Add depend on I2C to fix below build error if CONFIG_I2C is not selected:   CC      sound/soc/codecs/ak4641.o sound/soc/codecs/ak4641.c: In function 'ak4641_modinit': sound/soc/codecs/ak4641.c:646: error: implicit declaration of function 'i2c_add_driver' sound/soc/codecs/ak4641.c: In function 'ak4641_exit': sound/soc/codecs/ak4641.c:656: error: implicit declaration of function 'i2c_del_driver' make[3]: *** [sound/soc/codecs/ak4641.o] Error 1 make[2]: *** [sound/soc/codecs] Error 2 make[1]: *** [sound/soc] Error 2 make: *** [sound] Error 2  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pxa2xx-i2s.h | s | 382B | 14 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | z2.c | s | 5.1K | 191 | Axel Lin | axel.lin@gmail.com | 1325509718 |  | ASoC: Convert z2 to table based DAPM init  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | em-x270.c | s | 2.2K | 80 | Axel Lin | axel.lin@gmail.com | 1324551858 |  | ASoC: pxa: Add .owner to struct snd_soc_card  Missed .owner of struct snd_soc_card will prevent the module from being removed from underneath its users.  Reported-by: Lothar Waßmann <LW@KARO-electronics.de> Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pxa2xx-ac97.h | s | 474B | 16 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
