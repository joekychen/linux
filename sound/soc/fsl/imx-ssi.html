<!DOCTYPE html>
<html><head><title>joekychen/linux » sound › soc › fsl › imx-ssi.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>imx-ssi.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _IMX_SSI_H</span>
<span class="cp">#define _IMX_SSI_H</span>

<span class="cp">#define SSI_STX0	0x00</span>
<span class="cp">#define SSI_STX1	0x04</span>
<span class="cp">#define SSI_SRX0	0x08</span>
<span class="cp">#define SSI_SRX1	0x0c</span>

<span class="cp">#define SSI_SCR		0x10</span>
<span class="cp">#define SSI_SCR_CLK_IST		(1 &lt;&lt; 9)</span>
<span class="cp">#define SSI_SCR_CLK_IST_SHIFT	9</span>
<span class="cp">#define SSI_SCR_TCH_EN		(1 &lt;&lt; 8)</span>
<span class="cp">#define SSI_SCR_SYS_CLK_EN	(1 &lt;&lt; 7)</span>
<span class="cp">#define SSI_SCR_I2S_MODE_NORM	(0 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SCR_I2S_MODE_MSTR	(1 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SCR_I2S_MODE_SLAVE	(2 &lt;&lt; 5)</span>
<span class="cp">#define SSI_I2S_MODE_MASK	(3 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SCR_SYN		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_SCR_NET		(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_SCR_RE		(1 &lt;&lt; 2)</span>
<span class="cp">#define SSI_SCR_TE		(1 &lt;&lt; 1)</span>
<span class="cp">#define SSI_SCR_SSIEN		(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_SISR	0x14</span>
<span class="cp">#define SSI_SISR_MASK		((1 &lt;&lt; 19) - 1)</span>
<span class="cp">#define SSI_SISR_CMDAU		(1 &lt;&lt; 18)</span>
<span class="cp">#define SSI_SISR_CMDDU		(1 &lt;&lt; 17)</span>
<span class="cp">#define SSI_SISR_RXT		(1 &lt;&lt; 16)</span>
<span class="cp">#define SSI_SISR_RDR1		(1 &lt;&lt; 15)</span>
<span class="cp">#define SSI_SISR_RDR0		(1 &lt;&lt; 14)</span>
<span class="cp">#define SSI_SISR_TDE1		(1 &lt;&lt; 13)</span>
<span class="cp">#define SSI_SISR_TDE0		(1 &lt;&lt; 12)</span>
<span class="cp">#define SSI_SISR_ROE1		(1 &lt;&lt; 11)</span>
<span class="cp">#define SSI_SISR_ROE0		(1 &lt;&lt; 10)</span>
<span class="cp">#define SSI_SISR_TUE1		(1 &lt;&lt; 9)</span>
<span class="cp">#define SSI_SISR_TUE0		(1 &lt;&lt; 8)</span>
<span class="cp">#define SSI_SISR_TFS		(1 &lt;&lt; 7)</span>
<span class="cp">#define SSI_SISR_RFS		(1 &lt;&lt; 6)</span>
<span class="cp">#define SSI_SISR_TLS		(1 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SISR_RLS		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_SISR_RFF1		(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_SISR_RFF0		(1 &lt;&lt; 2)</span>
<span class="cp">#define SSI_SISR_TFE1		(1 &lt;&lt; 1)</span>
<span class="cp">#define SSI_SISR_TFE0		(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_SIER	0x18</span>
<span class="cp">#define SSI_SIER_RDMAE		(1 &lt;&lt; 22)</span>
<span class="cp">#define SSI_SIER_RIE		(1 &lt;&lt; 21)</span>
<span class="cp">#define SSI_SIER_TDMAE		(1 &lt;&lt; 20)</span>
<span class="cp">#define SSI_SIER_TIE		(1 &lt;&lt; 19)</span>
<span class="cp">#define SSI_SIER_CMDAU_EN	(1 &lt;&lt; 18)</span>
<span class="cp">#define SSI_SIER_CMDDU_EN	(1 &lt;&lt; 17)</span>
<span class="cp">#define SSI_SIER_RXT_EN		(1 &lt;&lt; 16)</span>
<span class="cp">#define SSI_SIER_RDR1_EN	(1 &lt;&lt; 15)</span>
<span class="cp">#define SSI_SIER_RDR0_EN	(1 &lt;&lt; 14)</span>
<span class="cp">#define SSI_SIER_TDE1_EN	(1 &lt;&lt; 13)</span>
<span class="cp">#define SSI_SIER_TDE0_EN	(1 &lt;&lt; 12)</span>
<span class="cp">#define SSI_SIER_ROE1_EN	(1 &lt;&lt; 11)</span>
<span class="cp">#define SSI_SIER_ROE0_EN	(1 &lt;&lt; 10)</span>
<span class="cp">#define SSI_SIER_TUE1_EN	(1 &lt;&lt; 9)</span>
<span class="cp">#define SSI_SIER_TUE0_EN	(1 &lt;&lt; 8)</span>
<span class="cp">#define SSI_SIER_TFS_EN		(1 &lt;&lt; 7)</span>
<span class="cp">#define SSI_SIER_RFS_EN		(1 &lt;&lt; 6)</span>
<span class="cp">#define SSI_SIER_TLS_EN		(1 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SIER_RLS_EN		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_SIER_RFF1_EN	(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_SIER_RFF0_EN	(1 &lt;&lt; 2)</span>
<span class="cp">#define SSI_SIER_TFE1_EN	(1 &lt;&lt; 1)</span>
<span class="cp">#define SSI_SIER_TFE0_EN	(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_STCR	0x1c</span>
<span class="cp">#define SSI_STCR_TXBIT0		(1 &lt;&lt; 9)</span>
<span class="cp">#define SSI_STCR_TFEN1		(1 &lt;&lt; 8)</span>
<span class="cp">#define SSI_STCR_TFEN0		(1 &lt;&lt; 7)</span>
<span class="cp">#define SSI_FIFO_ENABLE_0_SHIFT 7</span>
<span class="cp">#define SSI_STCR_TFDIR		(1 &lt;&lt; 6)</span>
<span class="cp">#define SSI_STCR_TXDIR		(1 &lt;&lt; 5)</span>
<span class="cp">#define SSI_STCR_TSHFD		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_STCR_TSCKP		(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_STCR_TFSI		(1 &lt;&lt; 2)</span>
<span class="cp">#define SSI_STCR_TFSL		(1 &lt;&lt; 1)</span>
<span class="cp">#define SSI_STCR_TEFS		(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_SRCR	0x20</span>
<span class="cp">#define SSI_SRCR_RXBIT0		(1 &lt;&lt; 9)</span>
<span class="cp">#define SSI_SRCR_RFEN1		(1 &lt;&lt; 8)</span>
<span class="cp">#define SSI_SRCR_RFEN0		(1 &lt;&lt; 7)</span>
<span class="cp">#define SSI_FIFO_ENABLE_0_SHIFT 7</span>
<span class="cp">#define SSI_SRCR_RFDIR		(1 &lt;&lt; 6)</span>
<span class="cp">#define SSI_SRCR_RXDIR		(1 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SRCR_RSHFD		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_SRCR_RSCKP		(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_SRCR_RFSI		(1 &lt;&lt; 2)</span>
<span class="cp">#define SSI_SRCR_RFSL		(1 &lt;&lt; 1)</span>
<span class="cp">#define SSI_SRCR_REFS		(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_SRCCR		0x28</span>
<span class="cp">#define SSI_SRCCR_DIV2		(1 &lt;&lt; 18)</span>
<span class="cp">#define SSI_SRCCR_PSR		(1 &lt;&lt; 17)</span>
<span class="cp">#define SSI_SRCCR_WL(x)		((((x) - 2) &gt;&gt; 1) &lt;&lt; 13)</span>
<span class="cp">#define SSI_SRCCR_DC(x)		(((x) &amp; 0x1f) &lt;&lt; 8)</span>
<span class="cp">#define SSI_SRCCR_PM(x)		(((x) &amp; 0xff) &lt;&lt; 0)</span>
<span class="cp">#define SSI_SRCCR_WL_MASK	(0xf &lt;&lt; 13)</span>
<span class="cp">#define SSI_SRCCR_DC_MASK	(0x1f &lt;&lt; 8)</span>
<span class="cp">#define SSI_SRCCR_PM_MASK	(0xff &lt;&lt; 0)</span>

<span class="cp">#define SSI_STCCR		0x24</span>
<span class="cp">#define SSI_STCCR_DIV2		(1 &lt;&lt; 18)</span>
<span class="cp">#define SSI_STCCR_PSR		(1 &lt;&lt; 17)</span>
<span class="cp">#define SSI_STCCR_WL(x)		((((x) - 2) &gt;&gt; 1) &lt;&lt; 13)</span>
<span class="cp">#define SSI_STCCR_DC(x)		(((x) &amp; 0x1f) &lt;&lt; 8)</span>
<span class="cp">#define SSI_STCCR_PM(x)		(((x) &amp; 0xff) &lt;&lt; 0)</span>
<span class="cp">#define SSI_STCCR_WL_MASK	(0xf &lt;&lt; 13)</span>
<span class="cp">#define SSI_STCCR_DC_MASK	(0x1f &lt;&lt; 8)</span>
<span class="cp">#define SSI_STCCR_PM_MASK	(0xff &lt;&lt; 0)</span>

<span class="cp">#define SSI_SFCSR	0x2c</span>
<span class="cp">#define SSI_SFCSR_RFCNT1(x)	(((x) &amp; 0xf) &lt;&lt; 28)</span>
<span class="cp">#define SSI_RX_FIFO_1_COUNT_SHIFT 28</span>
<span class="cp">#define SSI_SFCSR_TFCNT1(x)	(((x) &amp; 0xf) &lt;&lt; 24)</span>
<span class="cp">#define SSI_TX_FIFO_1_COUNT_SHIFT 24</span>
<span class="cp">#define SSI_SFCSR_RFWM1(x)	(((x) &amp; 0xf) &lt;&lt; 20)</span>
<span class="cp">#define SSI_SFCSR_TFWM1(x)	(((x) &amp; 0xf) &lt;&lt; 16)</span>
<span class="cp">#define SSI_SFCSR_RFCNT0(x)	(((x) &amp; 0xf) &lt;&lt; 12)</span>
<span class="cp">#define SSI_RX_FIFO_0_COUNT_SHIFT 12</span>
<span class="cp">#define SSI_SFCSR_TFCNT0(x)	(((x) &amp; 0xf) &lt;&lt;  8)</span>
<span class="cp">#define SSI_TX_FIFO_0_COUNT_SHIFT 8</span>
<span class="cp">#define SSI_SFCSR_RFWM0(x)	(((x) &amp; 0xf) &lt;&lt;  4)</span>
<span class="cp">#define SSI_SFCSR_TFWM0(x)	(((x) &amp; 0xf) &lt;&lt;  0)</span>
<span class="cp">#define SSI_SFCSR_RFWM0_MASK	(0xf &lt;&lt;  4)</span>
<span class="cp">#define SSI_SFCSR_TFWM0_MASK	(0xf &lt;&lt;  0)</span>

<span class="cp">#define SSI_STR		0x30</span>
<span class="cp">#define SSI_STR_TEST		(1 &lt;&lt; 15)</span>
<span class="cp">#define SSI_STR_RCK2TCK		(1 &lt;&lt; 14)</span>
<span class="cp">#define SSI_STR_RFS2TFS		(1 &lt;&lt; 13)</span>
<span class="cp">#define SSI_STR_RXSTATE(x)	(((x) &amp; 0xf) &lt;&lt; 8)</span>
<span class="cp">#define SSI_STR_TXD2RXD		(1 &lt;&lt;  7)</span>
<span class="cp">#define SSI_STR_TCK2RCK		(1 &lt;&lt;  6)</span>
<span class="cp">#define SSI_STR_TFS2RFS		(1 &lt;&lt;  5)</span>
<span class="cp">#define SSI_STR_TXSTATE(x)	(((x) &amp; 0xf) &lt;&lt; 0)</span>

<span class="cp">#define SSI_SOR		0x34</span>
<span class="cp">#define SSI_SOR_CLKOFF		(1 &lt;&lt; 6)</span>
<span class="cp">#define SSI_SOR_RX_CLR		(1 &lt;&lt; 5)</span>
<span class="cp">#define SSI_SOR_TX_CLR		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_SOR_INIT		(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_SOR_WAIT(x)		(((x) &amp; 0x3) &lt;&lt; 1)</span>
<span class="cp">#define SSI_SOR_WAIT_MASK	(0x3 &lt;&lt; 1)</span>
<span class="cp">#define SSI_SOR_SYNRST		(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_SACNT	0x38</span>
<span class="cp">#define SSI_SACNT_FRDIV(x)	(((x) &amp; 0x3f) &lt;&lt; 5)</span>
<span class="cp">#define SSI_SACNT_WR		(1 &lt;&lt; 4)</span>
<span class="cp">#define SSI_SACNT_RD		(1 &lt;&lt; 3)</span>
<span class="cp">#define SSI_SACNT_TIF		(1 &lt;&lt; 2)</span>
<span class="cp">#define SSI_SACNT_FV		(1 &lt;&lt; 1)</span>
<span class="cp">#define SSI_SACNT_AC97EN	(1 &lt;&lt; 0)</span>

<span class="cp">#define SSI_SACADD	0x3c</span>
<span class="cp">#define SSI_SACDAT	0x40</span>
<span class="cp">#define SSI_SATAG	0x44</span>
<span class="cp">#define SSI_STMSK	0x48</span>
<span class="cp">#define SSI_SRMSK	0x4c</span>
<span class="cp">#define SSI_SACCST	0x50</span>
<span class="cp">#define SSI_SACCEN	0x54</span>
<span class="cp">#define SSI_SACCDIS	0x58</span>

<span class="cm">/* SSI clock sources */</span>
<span class="cp">#define IMX_SSP_SYS_CLK		0</span>

<span class="cm">/* SSI audio dividers */</span>
<span class="cp">#define IMX_SSI_TX_DIV_2	0</span>
<span class="cp">#define IMX_SSI_TX_DIV_PSR	1</span>
<span class="cp">#define IMX_SSI_TX_DIV_PM	2</span>
<span class="cp">#define IMX_SSI_RX_DIV_2	3</span>
<span class="cp">#define IMX_SSI_RX_DIV_PSR	4</span>
<span class="cp">#define IMX_SSI_RX_DIV_PM	5</span>

<span class="cp">#define DRV_NAME &quot;imx-ssi&quot;</span>

<span class="cp">#include &lt;linux/dmaengine.h&gt;</span>
<span class="cp">#include &lt;mach/dma.h&gt;</span>
<span class="cp">#include &quot;imx-pcm.h&quot;</span>

<span class="k">struct</span> <span class="n">imx_ssi</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">ac97_dev</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">imx_ac97</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">clk</span> <span class="o">*</span><span class="n">clk</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">base</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">fiq_enable</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>

	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">ac97_reset</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span><span class="n">ac97</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">ac97_warm_reset</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span><span class="n">ac97</span><span class="p">);</span>

	<span class="k">struct</span> <span class="n">imx_pcm_dma_params</span>	<span class="n">dma_params_rx</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">imx_pcm_dma_params</span>	<span class="n">dma_params_tx</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">enabled</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">soc_platform_pdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">soc_platform_pdev_fiq</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* _IMX_SSI_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
