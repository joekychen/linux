f | qi_lb60.c | s | 3.6K | 117 | Axel Lin | axel.lin@gmail.com | 1327067909 |  | ASoC: jz4740: Convert qi_lb60 to use snd_soc_register_card()  Use snd_soc_register_card() instead of creating a "soc-audio" platform device.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | jz4740-pcm.c | s | 9.0K | 286 | Joachim Eastwood | joachim.eastwood@jotron.com | 1325963885 |  | ASoC: check for substream not channels_min in pcm engines  This is a follow up on 53dea36c70c1857 which fixes the other affected pcm engines.  Description from 53dea36c70c1857:  Don't rely on the codec's channels_min information to decide wheter or  not allocate a substream's DMA buffer. Rather check if the substream  itself was allocated previously.  Without this patch I was seeing null-pointer dereferenc in atmel-pcm.  Signed-off-by: Joachim Eastwood <joachim.eastwood@jotron.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | jz4740-i2s.h | s | 366B | 12 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | Makefile | g | 332B |  | Lars-Peter Clausen | lars@metafoo.de | 1277248257 |  | ASoC: JZ4740: Add qi_lb60 board driver  This patch adds ASoC support for the qi_lb60 board.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | jz4740-i2s.c | s | 12K | 423 | Maarten ter Huurne | maarten@treewalker.org | 1333732925 |  | ASoC: JZ4740: Replaced comma operators with semicolons.  They were harmless but also unnecessary, probably a leftover from earlier code.  Signed-off-by: Maarten ter Huurne <maarten@treewalker.org> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | jz4740-pcm.h | s | 409B | 15 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | Kconfig | g | 763B |  | Lars-Peter Clausen | lars@metafoo.de | 1277248257 |  | ASoC: JZ4740: Add qi_lb60 board driver  This patch adds ASoC support for the qi_lb60 board.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
