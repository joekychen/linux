f | twl6040.c | s | 32K | 1038 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336912374 |  | 
f | ak4104.c | s | 5.9K | 212 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | adau1701.c | s | 12K | 455 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ad193x.c | s | 13K | 460 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8350.c | s | 48K | 1425 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1337014475 |  | ASoC: wm8350: Remove direct usage of codec->control_data  Supports regmap conversion.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8990.c | s | 43K | 1226 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8741.h | s | 10K | 195 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | tlv320aic23.h | s | 3.8K | 103 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | alc5623.c | s | 33K | 947 | Axel Lin | axel.lin@gmail.com | 1336499190 |  | ASoC: alc5623: Convert to module_i2c_driver()  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | adav80x.c | s | 25K | 788 | Lars-Peter Clausen | lars@metafoo.de | 1322821923 |  | ASoC: Drop unused state parameter from CODEC suspend callback  The existence of this parameter is purely historical. None of the CODEC drivers uses it and we always pass in the same value anyway, so it should be safe to remove it.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | 88pm860x-codec.c | s | 44K | 1269 | Axel Lin | axel.lin@gmail.com | 1324990682 |  | ASoC: Convert 88pm860x-codec to devm_kzalloc()  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tpa6130a2.h | s | 2.0K | 53 | Peter Ujfalusi | peter.ujfalusi@ti.com | 1305126765 |  | ASoC: tpa6130a2: Update e-mail address  Signed-off-by: Peter Ujfalusi <peter.ujfalusi@ti.com> Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@ti.com>
f | Makefile | g | 8.8K |  | Ricardo Neri | ricardo.neri@ti.com | 1337358684 |  | ASoC: OMAP: HDMI: Introduce codec  Introduce codec for HDMI. At the moment, this is a dummy codec. In the future it will parse the EDID to modify the supported parameters, such as the number of channels and the sample rates. At the moment, it blindly supports all the sample rates and audio channels described in the HDMI 1.4a specification.  Signed-off-by: Ricardo Neri <ricardo.neri@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | sn95031.c | s | 28K | 798 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8770.c | s | 19K | 636 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8940.h | s | 2.3K | 83 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8993.c | s | 47K | 1513 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1335548531 |  | ASoC: wm_hubs: Factor out class W management  Since the analogue portions of the checks for class W are the same over all the devices factor out these checks into wm_hubs and while we're at it also use wm_hubs_dac_hp_direct() to enable class W optimisations on more paths.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm9081.c | s | 35K | 1203 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336476558 |  | ASoC: wm9081: Hook DAC up via DAPM rather than stream  More current API usage.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm2000.h | s | 2.2K | 60 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322948121 |  | ASoC: Convert WM2000 into a standard CODEC driver  We've been able to handle external amps for a while now.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max9850.h | s | 1.0K | 33 | Christian Glindkamp | christian.glindkamp@taskit.de | 1299844904 |  | ASoC: Add MAX9850 codec driver  This patch adds ASoC support for the MAX9850 codec with headphone amplifier.  Supported features: - Playback - 16, 20 and 24 bit audio - 8k - 48k sample rates - DAPM  Signed-off-by: Christian Glindkamp <christian.glindkamp@taskit.de> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ac97.c | s | 3.5K | 130 | Fabio Estevam | festevam@gmail.com | 1334140999 |  | ASoC: ac97: Fix build due to removal of 'runtime' definition  Fix the following build error:  sound/soc/codecs/ac97.c: In function 'ac97_prepare': sound/soc/codecs/ac97.c:33: error: 'runtime' undeclared (first use in this function)  This was caused by commit e6968a (ASoC: codecs: Remove rtd->codec usage from CODEC drivers), which removed the 'struct snd_pcm_runtime *runtime = substream->runtime' definition.  Signed-off-by: Fabio Estevam <fabio.estevam@freescale.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | sn95031.h | s | 4.1K | 121 | Vinod Koul | vinod.koul@intel.com | 1297290773 |  | ASoC: sn95031: Add support for reading mic bias  This patch adds support to read the mic bias voltage when a jack is inserted. It uses ADC to measure.  Signed-off-by: Vinod Koul <vinod.koul@intel.com> Signed-off-by: Harsha Priya <priya.harsha@intel.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8753.h | s | 3.0K | 107 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | adav80x.h | s | 547B | 29 | Lars-Peter Clausen | lars@metafoo.de | 1309277480 |  | ASoC: Add ADAV80x codec driver  This patch adds support for the Analog Devices ADAV801 and ADAV803 audio codec.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm_hubs.h | s | 1.8K | 55 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1335896467 |  | ASoC: wm_hubs: Cache multiple DCS offsets  Rather than invalidating the cached DCS value every time the headphone gain changes store multiple values, indexed by gain. This allows the optimisation we get from the cache to take effect more often.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | rt5631.c | s | 55K | 1539 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336564447 |  | ASoC: rt5631: Convert to direct regmap API usage  We're trying to remove all usage of the ASoc level cache and I/O code and for a device like this with a pretty sparse register map the rbtree cache is a better idea anyway.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8727.c | s | 1.8K | 63 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322948101 |  | ASoC: Remove unused -codec from Wolfson device driver names  Devices that aren't MFDs don't need to distinguish this.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8996.h | s | 216K | 3518 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327067674 |  | ASoC: Disable register synchronisation for low frequency WM8996 SYSCLK  With a low frequency SYSCLK and a fast I2C clock register synchronisation may occasionally take too long to take effect, causing I/O issues. Disable synchronisation in order to avoid any issues.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@kernel.org
f | wm9705.c | s | 11K | 356 | Fabio Estevam | festevam@gmail.com | 1334140999 |  | ASoC: wm9705: Fix build due to removal of 'runtime' definition  sound/soc/codecs/wm9705.c: In function 'ac97_prepare': sound/soc/codecs/wm9705.c:251: error: 'runtime' undeclared (first use in this function)  This was caused by commit e6968a (ASoC: codecs: Remove rtd->codec usage from CODEC drivers), which removed the 'struct snd_pcm_runtime *runtime = substream->runtime' definition.  Signed-off-by: Fabio Estevam <fabio.estevam@freescale.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8991.c | s | 43K | 1207 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8728.h | s | 518B | 18 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8750.h | s | 1.5K | 54 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | twl6040.h | s | 1.4K | 39 | Liam Girdwood | lrg@ti.com | 1327067906 |  | ASoC: twl6040 - add method to query HS DC offset step size in mV  Provide a method for mach drivers to query the HS DC offset step size in mV.  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8961.c | s | 29K | 981 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8962.h | s | 210K | 3588 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1286794324 |  | ASoC: Compress WM8962 register access map  Reduce the source code size still futher by only specifying non-zero rows in the WM8962 access map.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm9705.h | s | 155B | 8 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8904.c | s | 63K | 1931 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1339391858 |  | ASoC: wm8904: Fix cache only management  We should be using the regmap API consistently for all the cache only configuration and we should be going cache only before we power down the supplies.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm5100-tables.c | s | 63K | 1481 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1335203551 |  | ASoC: Update regmap access for WM5100 DSP control registers  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8990.h | s | 34K | 776 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8737.h | s | 16K | 301 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1290598392 |  | ASoC: Add initial WM8737 driver  The WM8737 is a low power, flexible stereo ADC designed for portable applications. This driver supports most of the functionality of the WM8737, though some features such as the ALC are not yet implemented.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | sigmadsp.c | s | 5.2K | 196 | Lars-Peter Clausen | lars@metafoo.de | 1322568083 |  | ASoC: SigmaDSP: Add regmap support  Add support for loading the SigmaDSP firmware using regmap. This allows us to transparently use SPI or I2C as the transport protocol on devices which support them.  For now we keep the old I2C support since we have one user of this which is not straight forward to convert to regmap, due to variable length registers.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8711.c | s | 12K | 453 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322948117 |  | ASoC: Convert WM8711 to table based control init  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | dmic.c | s | 2.5K | 82 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322480009 |  | ASoC: Convert CODEC drivers to module_platform_driver  Factors out a bit of boilerplate.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm5100.h | s | 282K | 4930 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1335203551 |  | ASoC: Update regmap access for WM5100 DSP control registers  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ssm2602.c | s | 21K | 686 | Lars-Peter Clausen | lars@metafoo.de | 1335349690 |  | ASoC: SSM2602: Convert to direct regmap API usage  Mostly a one to one converion. On one occasion the patch replaces a snd_soc_read-snd_soc_write sequence with regmap_update_bits though as it helps to keep the conversion simple.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8962.c | s | 116K | 3293 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8978.c | s | 31K | 944 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8988.h | s | 1.4K | 52 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | cs4271.c | s | 18K | 575 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wl1273.h | s | 986B | 27 | Matti J. Aaltonen | matti.j.aaltonen@nokia.com | 1295008180 |  | ASoC: WL1273 FM radio: Fix breakage with MFD API changes  These changes are needed to keep up with the changes in the MFD core and V4L2 parts of the wl1273 FM radio driver.  Use function pointers instead of exported functions for I2C IO. Also move all preprocessor constants from the wl1273.h to include/linux/mfd/wl1273-core.h.  Signed-off-by: Matti J. Aaltonen <matti.j.aaltonen@nokia.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ml26124.c | s | 19K | 601 | Tomoya MORINAGA | tomoya.rohm@gmail.com | 1333276108 |  | ASoC: Add LAPIS Semiconductor ML26124 driver  ML26124-01HB/ML26124-02GD is 16bit monaural audio CODEC which has high resistance to voltage noise. On chip regulator realizes power supply rejection ratio be over 90dB so more than 50dB is improved than ever. ML26124-01HB/ ML26124-02GD can deliver stable audio performance without being affected by noise from the power supply circuit and peripheral components. The chip also includes a composite video signal output, which can be applied to various portable device  requirements. The ML26124 is realized these functions into very small package the size is only 2.56mm x 2.46mm therefore can be construct high quality sound system easily. ML26124-01HB is 25pin WCSP package; ML26124-02GD is 32pin WQFN package.  Signed-off-by: Tomoya MORINAGA <tomoya.rohm@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | alc5623.h | s | 6.2K | 147 | Arnaud Patard (Rtp) | arnaud.patard@rtp-net.org | 1287694273 |  | ASoC: add support for alc562[123] codecs  This patch is adding support for alc562[123] codecs. It's based on the source code available in HP source code and other places.  Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8958-dsp2.c | s | 27K | 852 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ak4535.c | s | 13K | 430 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ad1836.h | s | 1.5K | 40 | Axel Lin | axel.lin@gmail.com | 1321967174 |  | ASoC: Fix wrong define for AD1836_ADC_WORD_OFFSET  According to the datasheet: The BIT[5:4] of ADC Control Register 2 is to control the word width.         00 = 25 Bits         01 = 20 Bits         10 = 16 Bits         11 = Invalid  Thus, the AD1836_ADC_WORD_OFFSET should be defined as 4.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@vger.kernel.org
f | stac9766.h | s | 377B | 13 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | ad1836.c | s | 9.7K | 335 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm2000.c | s | 19K | 696 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1339110013 |  | ASoC: wm2000: Always use a 4s timeout for the firmware  Rather than having varying timeouts depending on the transition always use a 4s timeout. This provides better diagnostics for clocking errors and ensures compatibility with current calibration firmwares.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | twl4030.c | s | 69K | 1985 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | lm49453.c | s | 53K | 1362 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336948431 |  | ASoC: lm49453: Fix author e-mail address  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tlv320aic3x.c | s | 48K | 1286 | Hebbar, Gururaja | gururaja.hebbar@ti.com | 1340954283 |  | ASoC: tlv320aic3x: Fix codec pll configure bug  In sound/soc/codecs/tlv320aic3x.c          data = snd_soc_read(codec, AIC3X_PLL_PROGA_REG);         snd_soc_write(codec, AIC3X_PLL_PROGA_REG,                       data || (pll_p << PLLP_SHIFT));  In the above code, pll-p value is OR'ed with previous value without clearing it. Bug is not seen if pll-p value doesn't change across Sampling frequency.  However on some platforms (like AM335x EVM-SK), pll-p may have different values across different sampling frequencies. In such case, above code configures the pll with a wrong value. Because of this bug, when a audio stream is played with pll value different from previous stream, audio is heard as differently(like its stretched).  Signed-off-by: Hebbar, Gururaja <gururaja.hebbar@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@vger.kernel.org
f | wm1250-ev1.c | s | 6.1K | 218 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1334841021 |  | ASoC: wm1250-ev1: Support sample rate configuration  The Springbank module can support a range of sample rates, selected at runtime via GPIO configuration. Allow these to be configured at runtime.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8960.c | s | 27K | 850 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8900.h | s | 1.5K | 48 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8974.c | s | 18K | 565 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327067902 |  | ASoC: Remove wm8974 private data  It's only ever referenced when being allocated and freed.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max98088.c | s | 74K | 1837 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ad1980.h | s | 550B | 24 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1281880600 |  | Merge branch 'for-2.6.36' of git://git.kernel.org/pub/scm/linux/kernel/git/broonie/sound-2.6 into for-2.6.37  Trivial overlap with the removal of the local revision variable.  Conflicts: 	sound/soc/codecs/wm8994.c
f | wm8955.h | s | 24K | 451 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | jz4740.c | s | 11K | 356 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pcm3008.c | s | 4.2K | 148 | Lars-Peter Clausen | lars@metafoo.de | 1322821923 |  | ASoC: Drop unused state parameter from CODEC suspend callback  The existence of this parameter is purely historical. None of the CODEC drivers uses it and we always pass in the same value anyway, so it should be safe to remove it.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max98088.h | s | 8.3K | 180 | Jin Park | jinyoungp@nvidia.com | 1305519996 |  | ASoC: codecs: max98088: Added digital mute function in DAI1 and DAI2  Added digital mute function in DAI1 and DAI2.  Signed-off-by: Jin Park <jinyoungp@nvidia.com> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8974.h | s | 2.2K | 77 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8996.c | s | 98K | 2821 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1339417251 |  | ASoC: wm8996: Mark the CODEC as cache only when powering off on boot  Otherwise we might try to write to a powered off device.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8903.h | s | 70K | 1149 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1298399893 |  | Merge branch 'for-2.6.38' into for-2.6.39
f | wm8904.h | s | 89K | 1488 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327067906 |  | ASoC: Optimise performance of WM8904 ADC 128fs OSR mode  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ml26124.h | s | 5.4K | 164 | Tomoya MORINAGA | tomoya.rohm@gmail.com | 1333276108 |  | ASoC: Add LAPIS Semiconductor ML26124 driver  ML26124-01HB/ML26124-02GD is 16bit monaural audio CODEC which has high resistance to voltage noise. On chip regulator realizes power supply rejection ratio be over 90dB so more than 50dB is improved than ever. ML26124-01HB/ ML26124-02GD can deliver stable audio performance without being affected by noise from the power supply circuit and peripheral components. The chip also includes a composite video signal output, which can be applied to various portable device  requirements. The ML26124 is realized these functions into very small package the size is only 2.56mm x 2.46mm therefore can be construct high quality sound system easily. ML26124-01HB is 25pin WCSP package; ML26124-02GD is 32pin WQFN package.  Signed-off-by: Tomoya MORINAGA <tomoya.rohm@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max9768.c | s | 6.6K | 207 | Liam Girdwood | lrg@ti.com | 1328547136 |  | ASoC: max9768: Fix build and use new add control API.  Fix build breakage by using the correct API call to add kcontrols.  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | spdif_transciever.c | s | 1.8K | 58 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322480009 |  | ASoC: Convert CODEC drivers to module_platform_driver  Factors out a bit of boilerplate.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8971.h | s | 1.4K | 52 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | adau1373.h | s | 583B | 25 | Lars-Peter Clausen | lars@metafoo.de | 1313510034 |  | ASoC: Add ADAU1373 codec support  This patch adds support for the Analog Devices ADAU1373 audio codec.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm9712.c | s | 23K | 598 | Fabio Estevam | festevam@gmail.com | 1334093718 |  | ASoC: wm9712: Fix build due to missing definition of "runtime"  Fix the following build error:  sound/soc/codecs/wm9712.c:482:32: error: 'runtime' undeclared (first use in this function) sound/soc/codecs/wm9712.c:499:33: error: 'runtime' undeclared (first use in this function)  Signed-off-by: Fabio Estevam <fabio.estevam@freescale.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ssm2602.h | s | 6.9K | 107 | Lars-Peter Clausen | lars@metafoo.de | 1317126648 |  | ASoC: ssm2602: Support setting the oscillator and the clock output state  Currently the oscillator is always enabled and the clock output is always disabled. This patch adds support for controlling the oscillator and clock output state through snd_soc_dai_set_sysclk. Which makes it possible to disable or enable them dynamically according to the requirements of the board on which the CODEC is used.  This patch also slightly modifies the behavior as to when the oscillator is going to be disabled in low-power states. Previously it would only be disabled in BIAS_OFF, now it is also going to be disabled in BIAS_STANDBY, since no components which depend on it should be active in this state.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs42l51.h | s | 5.3K | 141 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8776.h | s | 1.2K | 42 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | tpa6130a2.c | s | 11K | 417 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | uda134x.h | s | 833B | 28 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8993.h | s | 127K | 2021 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1329001881 |  | ASoC: wm_hubs: Clamp inputs to VMID while we ramp  Reduces the amount of time taken to stabilise them.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | omap-hdmi.c | s | 2.0K | 60 | Ricardo Neri | ricardo.neri@ti.com | 1337358684 |  | ASoC: OMAP: HDMI: Introduce codec  Introduce codec for HDMI. At the moment, this is a dummy codec. In the future it will parse the EDID to modify the supported parameters, such as the number of channels and the sample rates. At the moment, it blindly supports all the sample rates and audio channels described in the HDMI 1.4a specification.  Signed-off-by: Ricardo Neri <ricardo.neri@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | lm4857.c | s | 6.2K | 215 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm_hubs.c | s | 39K | 1028 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336912374 |  | 
f | wm2200.c | s | 71K | 2075 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1340954282 |  | ASoC: wm2200: Add missing BCLK rate  Without this very high BCLKs will be configured incorrectly.  Reported-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@vger.kernel.org
f | sgtl5000.h | s | 12K | 372 | Axel Lin | axel.lin@gmail.com | 1319026098 |  | ASoC: sgtl5000: Fix define for SGTL5000_BIAS_R_MASK  According to the datasheet: CHIP_MIC_CTRL 0x002A  BITS[9:8] BIAS_RESISTOR         0x0 = Powerd off         0x1 = 2.0 kohm         0x2 = 4.0 kohm         0x3 = 8.0 kohm  Thus SGTL5000_BIAS_R_MASK should be defined as 0x0300 instead of 0x0200.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Wolfram Sang <w.sang@pengutronix.de> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | da7210.c | s | 40K | 1211 | Ashish Chavan | ashish.chavan@kpitcummins.com | 1336067632 |  | ASoC: da7210: Minor improvements and a bugfix  This patch improves playback quality for few sample rates like 8000 and 11025 Hz.  This also fixes an issue observed during testing of pll slave mode. Due to the issue, on some rare occasions there was no sound output for first time playback after system boot, though all subsequent playbacks were fine. It was mainly because of the sequence in which SRM bit was enabled.  Signed-off-by: Ashish Chavan <ashish.chavan@kpitcummins.com> Signed-off-by: David Dajun Chen <dchen@diasemi.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ak4641.c | s | 17K | 547 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | dfbmcs320.c | s | 1.5K | 52 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322480009 |  | ASoC: Convert CODEC drivers to module_platform_driver  Factors out a bit of boilerplate.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs42l52.h | s | 8.6K | 234 | Brian Austin | brian.austin@cirrus.com | 1335825380 |  | ASoC: Add support for CS42L52 Codec  This patch adds support for Cirrus Logic CS42L52 Low Power Stereo Codec  Signed-off-by: Brian Austin <brian.austin@cirrus.com> Signed-off-by: Georgi Vlaev <joe@nucleusys.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs42l52.c | s | 38K | 1060 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336600590 |  | ASoC: cs42l52: Staticise non-exported symbols  Makes sparse happy and avoids polluting the global namespace.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Brian Austin <brian.austin@cirrus.com>
f | tlv320aic26.c | s | 12K | 388 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8903.c | s | 65K | 1885 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8770.h | s | 1.8K | 47 | Dimitris Papastamos | dp@opensource.wolfsonmicro.com | 1289057739 |  | ASoC: WM8770: Initial driver  The WM8770 is a high performance, multi-channel audio codec.  The WM8770 is ideal for surround sound processing applications for home hi-fi, automotive and other audio visual equipment.  Signed-off-by: Dimitris Papastamos <dp@opensource.wolfsonmicro.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | mc13783.c | s | 20K | 648 | Philippe Rtornaz | philippe.retornaz@epfl.ch | 1337355741 |  | ASoC: mc13783 codec cleanups  Signed-off-by: Philippe Rtornaz <philippe.retornaz@epfl.ch> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ad193x.h | s | 2.9K | 80 | Lars-Peter Clausen | lars@metafoo.de | 1322506672 |  | ASoC: ad193x: Use snd_soc_update_bits where appropriate  We can reduce the code size here a bit by using snd_soc_update_bits instead of open-coding the read-modify-write cycle. The conversion done in this patch is not completely straightforward and some minor code restructuring has been incorporated to further reduce the code size.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max9850.c | s | 9.4K | 332 | Axel Lin | axel.lin@gmail.com | 1325507291 |  | ASoC: Convert max9850 to devm_kzalloc()  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max9877.h | s | 1014B | 31 | Joonyoung Shim | jy0922.shim@samsung.com | 1247673571 |  | ASoC: MAX9877: add MAX9877 amp driver  The MAX9877 combines a high-efficiency Class D audio power amplifier with a stereo Class AB capacitor-less DirectDrive headphone amplifier.  The max9877_add_controls() is called to register the MAX9877 specific controls on machine specific init() of the machine driver.  The datasheet for the MAX9877 can find at the following url: http://datasheets.maxim-ic.com/en/ds/MAX9877.pdf  [Slight edit to sort the ALL_CODECS entries -- broonie.]  Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8940.c | s | 21K | 707 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tlv320dac33.c | s | 43K | 1400 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cx20442.c | s | 10K | 363 | Janusz Krzysztofik | jkrzyszt@tis.icnet.pl | 1326108016 |  | ASoC: cx20442: add bias control over a platform provided regulator  Now that a regulator device for controlling the codec chip reset state over a platform agnostic regulator API is available on the only board using this driver so far, extend the driver with a bias control function which will request virtual power to the codec chip from that virtual regulator, and will supersede the present implementation existing at the sound card level.  Thanks to the regulator sharing mechanism, both the old (the sound card) and the new (the codec) implementations should coexist smoothly until the sound card file is updated. For this to work as expected, update the sound card .set_bias_level callback to not touch codec->dapm.bias_level.  While extending the cx20442 structure, drop unused control_type member.  Created against linxu-3.2-rc6, tested on top of patch 1/4 "ARM: OMAP1: ams-delta: set up a regulator over the modem reset GPIO pin".  Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@ti.com>
f | ad73311.h | s | 2.3K | 73 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8737.c | s | 19K | 625 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm9090.h | s | 40K | 668 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | ak4535.h | s | 827B | 33 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1329462285 |  | ASoC: ak4535: Convert to direct regmap API usage  I suspect the timer register may also be volatile.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8991.h | s | 34K | 775 | Dimitris Papastamos | dp@opensource.wolfsonmicro.com | 1295272220 |  | ASoC: WM8991: Add initial WM8991 driver  The WM8991 is a highly integrated ultra-low power hi-fi CODEC designed for handsets rich in multimedia features such as GPS, mobile TV, digital audio playback and gaming.  This driver was originally written by Graeme Gregory and has been maintained out of tree by Mark Brown and Dimitris Papastamos.  Signed-off-by: Graeme Gregory <gg@opensource.wolfsonmicro.com> Signed-off-by: Dimitris Papastamos <dp@opensource.wolfsonmicro.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | uda134x.c | s | 16K | 529 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm9713.h | s | 1.3K | 39 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm9081.h | s | 40K | 721 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm2200.h | s | 180K | 3321 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327594075 |  | ASoC: wm2200: Add WM2200 CODEC driver  The WM2200 is a low power mobile CODEC with enhanced Wolfson myZone Ambient Noise Cancellation (ANC) intended for mobile telephony applications.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs42l73.c | s | 41K | 1216 | Takashi Iwai | tiwai@suse.de | 1337597118 |  | Merge branch 'topic/asoc' into for-linus
f | wm8400.c | s | 43K | 1234 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333659931 |  | ASoC: wm8400: Use snd_soc_write() and snd_soc_read()  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max9877.c | s | 8.0K | 254 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ad73311.c | s | 1.7K | 60 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322480009 |  | ASoC: Convert CODEC drivers to module_platform_driver  Factors out a bit of boilerplate.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8985.c | s | 36K | 1092 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327180542 |  | ASoC: wm8985: Convert to direct regmap API usage  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8776.c | s | 13K | 483 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1329815639 |  | ASoC: wm8776: Add WM8775 device ID to the WM8776  The WM8775 is register compatible with the WM8776 so can be supported with the same driver though it is an ADC only part. Add the device ID to the WM8776 driver, further updates will be added in the future.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8350.h | s | 786B | 24 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8400.h | s | 2.1K | 51 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | tlv320aic23.c | s | 18K | 593 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336912374 |  | 
f | tlv320aic32x4.c | s | 22K | 657 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | sta32x.c | s | 31K | 912 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | rt5631.h | s | 27K | 631 | johnnyhsu@realtek.com | johnnyhsu@realtek.com | 1316616743 |  | ASoC: Add driver for rt5631  Signed-off-by: Johnny Hsu <johnnyhsu@realtek.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8994.c | s | 116K | 3553 | Jaroslav Kysela | perex@perex.cz | 1340615653 |  | ASoC: wm8994: remove duplicate code  It seems that the code duplication was added at a merge operation.  Signed-off-by: Jaroslav Kysela <perex@perex.cz> Signed-off-by: Takashi Iwai <tiwai@suse.de>
f | wm8995.c | s | 62K | 2122 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | adau1373.c | s | 46K | 1220 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | pcm3008.h | s | 476B | 19 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm9090.c | s | 21K | 597 | Axel Lin | axel.lin@gmail.com | 1329373195 |  | ASoC: Show device id in the debug message  Show the id we read when the id mismatch is detected. This is useful for debugging.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | stac9766.c | s | 12K | 352 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8983.c | s | 37K | 1044 | Dimitris Papastamos | dp@opensource.wolfsonmicro.com | 1327067909 |  | ASoC: wm8983: Remove useless snd_kcontrol  This must be a leftover from a previous driver.  Signed-off-by: Dimitris Papastamos <dp@opensource.wolfsonmicro.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | lm49453.h | s | 13K | 337 | M R Swami Reddy | mr.swami.reddy@ti.com | 1333276541 |  | ASoC: Support TI LM49453 Audio driver  Signed-off-by: M R Swami Reddy <mr.swami.reddy@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cq93vc.c | s | 5.3K | 177 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8961.h | s | 45K | 799 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8960.h | s | 2.8K | 95 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | adau1701.h | s | 260B | 14 | Lars-Peter Clausen | lars@metafoo.de | 1308219857 |  | ASoC: Add ADAU1701 codec driver  This patch adds support for the Analog Devices ADAU1701 SigmaDSP.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8510.c | s | 18K | 594 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8804.c | s | 19K | 719 | Axel Lin | axel.lin@gmail.com | 1331036531 |  | ASoC: Add missing regmap_init_i2c in wm8804_i2c_probe  commit 891271c "ASoC: Convert wm8804 to direct regmap API usage" only converts wm8804_spi_probe to use regmap_init_spi.  This patch adds missing regmap_init_i2c in wm8804_i2c_probe.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8985.h | s | 57K | 983 | Dimitris Papastamos | dp@opensource.wolfsonmicro.com | 1284563484 |  | ASoC: WM8985: Initial driver  The WM8985 is a low power, high quality, feature-rich stereo CODEC designed for portable multimedia applications that require low power consumption and high quality audio.  Signed-off-by: Dimitris Papastamos <dp@opensource.wolfsonmicro.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ak4641.h | s | 1005B | 38 | Dmitry Artamonow | mad_soft@inbox.ru | 1305839445 |  | ASoC: Asahi Kasei AK4641 codec driver  A driver for the AK4641 codec used in iPAQ hx4700 and Glofiish M800 among others.  Signed-off-by: Harald Welte <laforge@gnumonks.org> Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com> Signed-off-by: Dmitry Artamonow <mad_soft@inbox.ru> Acked-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8971.c | s | 21K | 629 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ads117x.c | s | 1.6K | 55 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322480009 |  | ASoC: Convert CODEC drivers to module_platform_driver  Factors out a bit of boilerplate.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8782.c | s | 1.8K | 62 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1322480009 |  | ASoC: Convert CODEC drivers to module_platform_driver  Factors out a bit of boilerplate.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ak4671.h | s | 5.3K | 143 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | max98095.c | s | 67K | 2209 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333374793 |  | ASoC: max98095: Fix build failure  sound/soc/codecs/max98095.c: In function 'max98095_jack_detect_enable': sound/soc/codecs/max98095.c:2229:14: error: 'struct max98095_priv' has no member named 'jack_detect_delay' sound/soc/codecs/max98095.c:2230:18: error: 'struct max98095_priv' has no member named 'jack_detect_delay'  Reported-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8753.c | s | 47K | 1474 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8523.c | s | 14K | 495 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | alc5632.h | s | 9.6K | 230 | Andrey Danin | danindrey@mail.ru | 1329001367 |  | ASoC: alc5632: Refactored DAPM routes to add voice support  Refactored DAPM routes to add voice support.  - Added undocumented register - Used AIF in/out - Added missed voice items and routes - Added DMIC input - Romoved unrelevant items  Signed-off-by: Andrey Danin <danindrey@mail.ru> Signed-off-by: Leon Romanovsky <leon@leon.nu> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | Kconfig | g | 8.6K |  | Ricardo Neri | ricardo.neri@ti.com | 1337358684 |  | ASoC: OMAP: HDMI: Introduce codec  Introduce codec for HDMI. At the moment, this is a dummy codec. In the future it will parse the EDID to modify the supported parameters, such as the number of channels and the sample rates. At the moment, it blindly supports all the sample rates and audio channels described in the HDMI 1.4a specification.  Signed-off-by: Ricardo Neri <ricardo.neri@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | sgtl5000.c | s | 36K | 1240 | Linus Torvalds | torvalds@linux-foundation.org | 1337803543 |  | 
f | sta32x.h | s | 5.7K | 189 | Johannes Stezenbach | js@sig21.net | 1321306332 |  | ASoC: sta32x: preserve coefficient RAM  The coefficient RAM must be saved in a shadow so it can be restored when the codec is powered on using regulator_bulk_enable().  Signed-off-by: Johannes Stezenbach <js@sig21.net> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@vger.kernel.org
f | wm8711.h | s | 830B | 32 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | tlv320aic3x.h | s | 7.3K | 230 | Hebbar, Gururaja | gururaja.hebbar@ti.com | 1340954283 |  | ASoC: tlv320aic3x: Fix codec pll configure bug  In sound/soc/codecs/tlv320aic3x.c          data = snd_soc_read(codec, AIC3X_PLL_PROGA_REG);         snd_soc_write(codec, AIC3X_PLL_PROGA_REG,                       data || (pll_p << PLLP_SHIFT));  In the above code, pll-p value is OR'ed with previous value without clearing it. Bug is not seen if pll-p value doesn't change across Sampling frequency.  However on some platforms (like AM335x EVM-SK), pll-p may have different values across different sampling frequencies. In such case, above code configures the pll with a wrong value. Because of this bug, when a audio stream is played with pll value different from previous stream, audio is heard as differently(like its stretched).  Signed-off-by: Hebbar, Gururaja <gururaja.hebbar@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@vger.kernel.org
f | wm8731.h | s | 858B | 32 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1282084824 |  | ASoC: Support non-crystal master clocks for WM8731  Instead of unconditionally enabling the crystal oscillator on the WM8731 only enable it when explicitly selected via set_sysclk(), allowing machine drivers to specify that they drive a clock into MCLK alone. This avoids any conflicts between the oscillator and the external MCLK source and saves power for systems which do not need the oscillator.  This should also deliver a small power saving on systems using the crystal since the oscillator will only be enabled when the ADC or DAC is active.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8995.h | s | 246K | 4045 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1293190365 |  | ASoC: Remove WM8995 write sequencer bitfield definitions  They're very verbose and extremely repetitive so bulk up the kernel more than is ideal. If required we can readd with WRITE_SEQUENCER_n type definitions that cover the entire register bank in a few defines.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | 88pm860x-codec.h | s | 2.9K | 88 | Haojian Zhuang | haojian.zhuang@gmail.com | 1282150989 |  | ASoC: add 88pm860x codec driver  Add 88PM860x codec driver. 88PM860x codec supports two interfaces. And it also supports headset/mic/hook/short detection.  Signed-off-by: Haojian Zhuang <haojian.zhuang@marvell.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs4270.c | s | 22K | 655 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8731.c | s | 18K | 643 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336849898 |  | ASoC: wm8731: Convert to devm_ functions  Use the devm_ versions of the regmap and memory allocation functions, saving some error handling code.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8580.h | s | 811B | 28 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1281880332 |  | ASoC: Automatically calculate clock ratio for WM8580  Implement set_sysclk() and then rather than assuming 256fs use the supplied value to calculate and configure the clock ratio for the currently used sample rate. As a side effect we also end up implementing clock selection for the ADC path.  In order to avoid confusion remove the existing set_clkdiv() based configuration of the clock source for the DAC and update the SMDK64xx driver (which is the only in-tree user of the CODEC).  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | uda1380.h | s | 2.1K | 73 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm8580.c | s | 24K | 815 | Axel Lin | axel.lin@gmail.com | 1325509720 |  | ASoC: Fix return value of wm8580_set_sysclk()  We can't just pass back the return value of snd_soc_update_bits() as it will be 1 if a bit changed rather than zero.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tlv320dac33.h | s | 8.4K | 237 | Peter Ujfalusi | peter.ujfalusi@ti.com | 1305126755 |  | ASoC: tlv320dac33: Update e-mail address  Signed-off-by: Peter Ujfalusi <peter.ujfalusi@ti.com> Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@ti.com>
f | wm8510.h | s | 2.5K | 90 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | mc13783.h | s | 1009B | 24 | Philippe Rtornaz | philippe.retornaz@epfl.ch | 1337355740 |  | ASoC: Add mc13783 codec  Signed-off-by: Philippe Rtornaz <philippe.retornaz@epfl.ch> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8988.c | s | 27K | 848 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | sigmadsp.h | s | 475B | 16 | Lars-Peter Clausen | lars@metafoo.de | 1322568083 |  | ASoC: SigmaDSP: Add regmap support  Add support for loading the SigmaDSP firmware using regmap. This allows us to transparently use SPI or I2C as the transport protocol on devices which support them.  For now we keep the old I2C support since we have one user of this which is not straight forward to convert to regmap, due to variable length registers.  Signed-off-by: Lars-Peter Clausen <lars@metafoo.de> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ak4671.c | s | 21K | 630 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cx20442.h | s | 480B | 15 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | ad1980.c | s | 7.5K | 232 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | max98095.h | s | 12K | 285 | Rhyland Klein | rklein@nvidia.com | 1333276104 |  | ASoC: max98095: add jack detection  This change adds the logic to support using the jack detect mechanism built in to the codec to detect both when a jack was inserted and what type of jack is present.  This change also supports the use of an external mechanism for headphone detection. If this mechanism exists, when the max98095_jack_detect function is called, the hp_jack is simply passed NULL.  This change supports both simple headphones, powered headphones, microphones and headsets with both headphones and a mic.  Signed-off-by: Rhyland Klein <rklein@nvidia.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8804.h | s | 1.5K | 54 | Dimitris Papastamos | dp@opensource.wolfsonmicro.com | 1285878741 |  | ASoC: WM8804: Initial driver  The WM8804 is a high performance consumer mode S/PDIF transceiver with support for 1 received channel and 1 transmitted channel.  Signed-off-by: Dimitris Papastamos <dp@opensource.wolfsonmicro.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | l3.c | s | 1.8K | 79 | Christian Pellegrin | chripell@gmail.com | 1226922339 |  | ASoC: UDA134x codec driver  Signed-off-by: Christian Pellegrin <chripell@fsfe.org> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | alc5632.c | s | 38K | 1057 | Axel Lin | axel.lin@gmail.com | 1336499191 |  | ASoC: alc5632: Convert to devm_regmap_init_i2c()  Signed-off-by: Axel Lin <axel.lin@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8900.c | s | 38K | 1114 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs42l73.h | s | 9.1K | 206 | Axel Lin | axel.lin@gmail.com | 1321966929 |  | ASoC: cs42l73: Unify the way to define bits of register  Current code defines some bits with left shift to the proper bit defined in datasheet, but some don't. Unify the definition with proper left shift and adjust the code accordingly.  Signed-off-by: Axel Lin <axel.lin@gmail.com> Acked-by: Brian Austin <brian.austin@cirrus.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm9712.h | s | 156B | 8 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | wm5100.c | s | 75K | 2370 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336824122 |  | ASoC: wm5100: Convert to module_i2c_driver()  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | cs42l51.c | s | 17K | 555 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tlv320aic26.h | s | 3.4K | 82 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | wm8978.h | s | 2.5K | 78 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327067899 |  | ASoC: Convert wm8978 to direct regmap API usage  Helps push the register cache code down out of ASoC and improves resume times by using the more efficient regmap cache sync code.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8994.h | s | 3.5K | 124 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336588363 |  | ASoC: wm8994: Add debounce to wm8994 mic detection  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8728.c | s | 8.9K | 337 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | tlv320aic32x4.h | s | 4.1K | 124 | Javier Martin | javier.martin@vista-silicon.com | 1299262868 |  | ASoC: Add TI tlv320aic32x4 codec support.  This patch adds support for tlv320aic3205 and tlv320aic3254 codecs. It doesn't include miniDSP support for aic3254.  Signed-off-by: Javier Martin <javier.martin@vista-silicon.com> Acked-by: Liam Girdwood <lrg@slimlogic.co.uk> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8983.h | s | 57K | 969 | Dimitris Papastamos | dp@opensource.wolfsonmicro.com | 1310740793 |  | ASoC: WM8983: Initial driver  The WM8983 is a low power, high quality stereo CODEC designed for portable multimedia applications. Highly flexible analogue mixing functions enable new application features, combining hi-fi quality audio with voice communication.  Signed-off-by: Dimitris Papastamos <dp@opensource.wolfsonmicro.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ak4642.c | s | 13K | 512 | Kuninori Morimoto | kuninori.morimoto.gx@renesas.com | 1333620525 |  | ASoC: ak4642: fixup: mute needs +1 step  ak4642 out_tlv is +12.0dB to -115.0 dB, and it supports mute. But current settings didn't care +1 step for mute. This patch adds it  Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: stable@vger.kernel.org
f | wm8955.c | s | 28K | 910 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1327067905 |  | ASoC: Convert WM8955 to table based DAPM and control init  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wl1273.c | s | 12K | 422 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8523.h | s | 7.3K | 143 | Liam Girdwood | lrg@slimlogic.co.uk | 1281618000 |  | ASoC: multi-component - ASoC Multi-Component Support  This patch extends the ASoC API to allow sound cards to have more than one CODEC and more than one platform DMA controller. This is achieved by dividing some current ASoC structures that contain both driver data and device data into structures that only either contain device data or driver data. i.e.   struct snd_soc_codec    --->  struct snd_soc_codec (device data)                           +->  struct snd_soc_codec_driver (driver data)   struct snd_soc_platform --->  struct snd_soc_platform (device data)                           +->  struct snd_soc_platform_driver (driver data)   struct snd_soc_dai      --->  struct snd_soc_dai (device data)                           +->  struct snd_soc_dai_driver (driver data)   struct snd_soc_device   --->  deleted  This now allows ASoC to be more tightly aligned with the Linux driver model and also means that every ASoC codec, platform and (platform) DAI is a kernel device. ASoC component private data is now stored as device private data.  The ASoC sound card struct snd_soc_card has also been updated to store lists of it's components rather than a pointer to a codec and platform. The PCM runtime struct soc_pcm_runtime now has pointers to all its components.  This patch adds DAPM support for ASoC multi-component and removes struct snd_soc_socdev from DAPM core. All DAPM calls are now made on a card, codec or runtime PCM level basis rather than using snd_soc_socdev.  Other notable multi-component changes:-   * Stream operations now de-reference less structures.  * close_delayed work() now runs on a DAI basis rather than looping all DAIs    in a card.  * PM suspend()/resume() operations can now handle N CODECs and Platforms    per sound card.  * Added soc_bind_dai_link() to bind the component devices to the sound card.  * Added soc_dai_link_probe() and soc_dai_link_remove() to probe and remove    DAI link components.  * sysfs entries can now be registered per component per card.  * snd_soc_new_pcms() functionailty rolled into dai_link_probe().  * snd_soc_register_codec() now does all the codec list and mutex init.  This patch changes the probe() and remove() of the CODEC drivers as follows:-   o Make CODEC driver a platform driver  o Moved all struct snd_soc_codec list, mutex, etc initialiasation to core.  o Removed all static codec pointers (drivers now support > 1 codec dev)  o snd_soc_register_pcms() now done by core.  o snd_soc_register_dai() folded into snd_soc_register_codec().  CS4270 portions: Acked-by: Timur Tabi <timur@freescale.com>  Some TLV320aic23 and Cirrus platform fixes. Signed-off-by: Ryan Mallon <ryan@bluewatersys.com>  TI CODEC and OMAP fixes Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com> Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Jarkko Nikula <jhnikula@gmail.com>  Samsung platform and misc fixes :- Signed-off-by: Chanwoo Choi <cw00.choi@samsung.com> Signed-off-by: Joonyoung Shim <jy0922.shim@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Jassi Brar <jassi.brar@samsung.com> Signed-off-by: Seungwhan Youn <sw.youn@samsung.com>  MPC8610 and PPC fixes. Signed-off-by: Timur Tabi <timur@freescale.com>  i.MX fixes and some core fixes. Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>  J4740 platform fixes:- Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>  CC: Tony Lindgren <tony@atomide.com> CC: Nicolas Ferre <nicolas.ferre@atmel.com> CC: Kevin Hilman <khilman@deeprootsystems.com> CC: Sascha Hauer <s.hauer@pengutronix.de> CC: Atsushi Nemoto <anemo@mba.ocn.ne.jp> CC: Kuninori Morimoto <morimoto.kuninori@renesas.com> CC: Daniel Gloeckner <dg@emlix.com> CC: Manuel Lauss <mano@roarinelk.homelinux.net> CC: Mike Frysinger <vapier.adi@gmail.com> CC: Arnaud Patard <apatard@mandriva.com> CC: Wan ZongShun <mcuos.com@gmail.com>  Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@slimlogic.co.uk>
f | uda1380.c | s | 23K | 748 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8741.c | s | 14K | 509 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm9713.c | s | 41K | 1106 | Liam Girdwood | lrg@ti.com | 1328359211 |  | ASoC: core: Add support for DAI and machine kcontrols.  Currently ASoC can only add kcontrols using codec and platform component device handles. It's also desirable to add kcontrols for DAIs (i.e. McBSP) and for SoC card machine drivers too. This allows the kcontrol to have a direct handle to the parent ASoC component DAI/SoC Card/Platform/Codec device and hence easily get it's private data.  This change makes snd_soc_add_controls() static and wraps it in the folowing calls (card and dai are new) :-  snd_soc_add_card_controls() snd_soc_add_codec_controls() snd_soc_add_dai_controls() snd_soc_add_platform_controls()  This patch also does a lot of small mechanical changes in individual codec drivers to replace snd_soc_add_controls() with snd_soc_add_codec_controls().  It also updates the McBSP DAI driver to use snd_soc_add_dai_controls().  Finally, it updates the existing machine drivers that register controls to either :-  1) Use snd_soc_add_card_controls() where no direct codec control is required. 2) Use snd_soc_add_codec_controls() where there is direct codec control.  In the case of 1) above we also update the machine drivers to get the correct component data pointers from the kcontrol (rather than getting the machine pointer via the codec pointer).  Signed-off-by: Liam Girdwood <lrg@ti.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | wm8750.c | s | 24K | 728 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1333551552 |  | ASoC: codecs: Remove rtd->codec usage from CODEC drivers  In order to support CODEC<->CODEC links remove the assumption that there is only a single CODEC on a DAI link by removing the use of the CODEC pointer in the rtd from the CODEC drivers. They are already being passed their DAI whenever they are passed an rtd and can get the CODEC from there.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
