<!DOCTYPE html>
<html><head><title>joekychen/linux » sound › soc › codecs › 88pm860x-codec.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>88pm860x-codec.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * 88pm860x-codec.c -- 88PM860x ALSA SoC Audio Driver</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2010 Marvell International Ltd.</span>
<span class="cm"> * Author: Haojian Zhuang &lt;haojian.zhuang@marvell.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/mfd/88pm860x.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;sound/core.h&gt;</span>
<span class="cp">#include &lt;sound/pcm.h&gt;</span>
<span class="cp">#include &lt;sound/pcm_params.h&gt;</span>
<span class="cp">#include &lt;sound/soc.h&gt;</span>
<span class="cp">#include &lt;sound/tlv.h&gt;</span>
<span class="cp">#include &lt;sound/initval.h&gt;</span>
<span class="cp">#include &lt;sound/jack.h&gt;</span>
<span class="cp">#include &lt;trace/events/asoc.h&gt;</span>

<span class="cp">#include &quot;88pm860x-codec.h&quot;</span>

<span class="cp">#define MAX_NAME_LEN		20</span>
<span class="cp">#define REG_CACHE_SIZE		0x40</span>
<span class="cp">#define REG_CACHE_BASE		0xb0</span>

<span class="cm">/* Status Register 1 (0x01) */</span>
<span class="cp">#define REG_STATUS_1		0x01</span>
<span class="cp">#define MIC_STATUS		(1 &lt;&lt; 7)</span>
<span class="cp">#define HOOK_STATUS		(1 &lt;&lt; 6)</span>
<span class="cp">#define HEADSET_STATUS		(1 &lt;&lt; 5)</span>

<span class="cm">/* Mic Detection Register (0x37) */</span>
<span class="cp">#define REG_MIC_DET		0x37</span>
<span class="cp">#define CONTINUOUS_POLLING	(3 &lt;&lt; 1)</span>
<span class="cp">#define EN_MIC_DET		(1 &lt;&lt; 0)</span>
<span class="cp">#define MICDET_MASK		0x07</span>

<span class="cm">/* Headset Detection Register (0x38) */</span>
<span class="cp">#define REG_HS_DET		0x38</span>
<span class="cp">#define EN_HS_DET		(1 &lt;&lt; 0)</span>

<span class="cm">/* Misc2 Register (0x42) */</span>
<span class="cp">#define REG_MISC2		0x42</span>
<span class="cp">#define AUDIO_PLL		(1 &lt;&lt; 5)</span>
<span class="cp">#define AUDIO_SECTION_RESET	(1 &lt;&lt; 4)</span>
<span class="cp">#define AUDIO_SECTION_ON	(1 &lt;&lt; 3)</span>

<span class="cm">/* PCM Interface Register 2 (0xb1) */</span>
<span class="cp">#define PCM_INF2_BCLK		(1 &lt;&lt; 6)	</span><span class="cm">/* Bit clock polarity */</span><span class="cp"></span>
<span class="cp">#define PCM_INF2_FS		(1 &lt;&lt; 5)	</span><span class="cm">/* Frame Sync polarity */</span><span class="cp"></span>
<span class="cp">#define PCM_INF2_MASTER		(1 &lt;&lt; 4)	</span><span class="cm">/* Master / Slave */</span><span class="cp"></span>
<span class="cp">#define PCM_INF2_18WL		(1 &lt;&lt; 3)	</span><span class="cm">/* 18 / 16 bits */</span><span class="cp"></span>
<span class="cp">#define PCM_GENERAL_I2S		0</span>
<span class="cp">#define PCM_EXACT_I2S		1</span>
<span class="cp">#define PCM_LEFT_I2S		2</span>
<span class="cp">#define PCM_RIGHT_I2S		3</span>
<span class="cp">#define PCM_SHORT_FS		4</span>
<span class="cp">#define PCM_LONG_FS		5</span>
<span class="cp">#define PCM_MODE_MASK		7</span>

<span class="cm">/* I2S Interface Register 4 (0xbe) */</span>
<span class="cp">#define I2S_EQU_BYP		(1 &lt;&lt; 6)</span>

<span class="cm">/* DAC Offset Register (0xcb) */</span>
<span class="cp">#define DAC_MUTE		(1 &lt;&lt; 7)</span>
<span class="cp">#define MUTE_LEFT		(1 &lt;&lt; 6)</span>
<span class="cp">#define MUTE_RIGHT		(1 &lt;&lt; 2)</span>

<span class="cm">/* ADC Analog Register 1 (0xd0) */</span>
<span class="cp">#define REG_ADC_ANA_1		0xd0</span>
<span class="cp">#define MIC1BIAS_MASK		0x60</span>

<span class="cm">/* Earpiece/Speaker Control Register 2 (0xda) */</span>
<span class="cp">#define REG_EAR2		0xda</span>
<span class="cp">#define RSYNC_CHANGE		(1 &lt;&lt; 2)</span>

<span class="cm">/* Audio Supplies Register 2 (0xdc) */</span>
<span class="cp">#define REG_SUPPLIES2		0xdc</span>
<span class="cp">#define LDO15_READY		(1 &lt;&lt; 4)</span>
<span class="cp">#define LDO15_EN		(1 &lt;&lt; 3)</span>
<span class="cp">#define CPUMP_READY		(1 &lt;&lt; 2)</span>
<span class="cp">#define CPUMP_EN		(1 &lt;&lt; 1)</span>
<span class="cp">#define AUDIO_EN		(1 &lt;&lt; 0)</span>
<span class="cp">#define SUPPLY_MASK		(LDO15_EN | CPUMP_EN | AUDIO_EN)</span>

<span class="cm">/* Audio Enable Register 1 (0xdd) */</span>
<span class="cp">#define ADC_MOD_RIGHT		(1 &lt;&lt; 1)</span>
<span class="cp">#define ADC_MOD_LEFT		(1 &lt;&lt; 0)</span>

<span class="cm">/* Audio Enable Register 2 (0xde) */</span>
<span class="cp">#define ADC_LEFT		(1 &lt;&lt; 5)</span>
<span class="cp">#define ADC_RIGHT		(1 &lt;&lt; 4)</span>

<span class="cm">/* DAC Enable Register 2 (0xe1) */</span>
<span class="cp">#define DAC_LEFT		(1 &lt;&lt; 5)</span>
<span class="cp">#define DAC_RIGHT		(1 &lt;&lt; 4)</span>
<span class="cp">#define MODULATOR		(1 &lt;&lt; 3)</span>

<span class="cm">/* Shorts Register (0xeb) */</span>
<span class="cp">#define REG_SHORTS		0xeb</span>
<span class="cp">#define CLR_SHORT_LO2		(1 &lt;&lt; 7)</span>
<span class="cp">#define SHORT_LO2		(1 &lt;&lt; 6)</span>
<span class="cp">#define CLR_SHORT_LO1		(1 &lt;&lt; 5)</span>
<span class="cp">#define SHORT_LO1		(1 &lt;&lt; 4)</span>
<span class="cp">#define CLR_SHORT_HS2		(1 &lt;&lt; 3)</span>
<span class="cp">#define SHORT_HS2		(1 &lt;&lt; 2)</span>
<span class="cp">#define CLR_SHORT_HS1		(1 &lt;&lt; 1)</span>
<span class="cp">#define SHORT_HS1		(1 &lt;&lt; 0)</span>

<span class="cm">/*</span>
<span class="cm"> * This widget should be just after DAC &amp; PGA in DAPM power-on sequence and</span>
<span class="cm"> * before DAC &amp; PGA in DAPM power-off sequence.</span>
<span class="cm"> */</span>
<span class="cp">#define PM860X_DAPM_OUTPUT(wname, wevent)	\</span>
<span class="cp">{	.id = snd_soc_dapm_pga, .name = wname, .reg = SND_SOC_NOPM, \</span>
<span class="cp">	.shift = 0, .invert = 0, .kcontrol_news = NULL, \</span>
<span class="cp">	.num_kcontrols = 0, .event = wevent, \</span>
<span class="cp">	.event_flags = SND_SOC_DAPM_POST_PMU | SND_SOC_DAPM_POST_PMD, }</span>

<span class="k">struct</span> <span class="n">pm860x_det</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_jack</span>	<span class="o">*</span><span class="n">hp_jack</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_jack</span>	<span class="o">*</span><span class="n">mic_jack</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">hp_det</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">mic_det</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">hook_det</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">hs_shrt</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">lo_shrt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">sysclk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">pcmclk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">dir</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">filter</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span>	<span class="o">*</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">i2c_client</span>	<span class="o">*</span><span class="n">i2c</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pm860x_chip</span>	<span class="o">*</span><span class="n">chip</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pm860x_det</span>	<span class="n">det</span><span class="p">;</span>

	<span class="kt">int</span>			<span class="n">irq</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">name</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="n">MAX_NAME_LEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* -9450dB to 0dB in 150dB steps ( mute instead of -9450dB) */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">dpga_tlv</span><span class="p">,</span> <span class="o">-</span><span class="mi">9450</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="cm">/* -9dB to 0db in 3dB steps */</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">adc_tlv</span><span class="p">,</span> <span class="o">-</span><span class="mi">900</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="cm">/* {-23, -17, -13.5, -11, -9, -6, -3, 0}dB */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mic_tlv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TLV_DB_RANGE_HEAD</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
	<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">2300</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">1700</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">1350</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">900</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* {0, 0, 0, -6, 0, 6, 12, 18}dB */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">aux_tlv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TLV_DB_RANGE_HEAD</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* {-16, -13, -10, -7, -5.2, -3,3, -2.2, 0}dB, mute instead of -16dB */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">out_tlv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TLV_DB_RANGE_HEAD</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
	<span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">1600</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">520</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">330</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">st_tlv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TLV_DB_RANGE_HEAD</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
	<span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">12041</span><span class="p">,</span> <span class="mi">602</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">11087</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">10643</span><span class="p">,</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">10351</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">10133</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">9958</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">14</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">9689</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">18</span><span class="p">,</span> <span class="mi">271</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">9484</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* Sidetone Gain = M * 2^(-5-N) */</span>
<span class="k">struct</span> <span class="n">st_gain</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">db</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">m</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">n</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">st_gain</span> <span class="n">st_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="o">-</span><span class="mi">12041</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">11439</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">11087</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">10837</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span>
	<span class="p">{</span><span class="o">-</span><span class="mi">10643</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">10485</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">10351</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">10235</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span>
	<span class="p">{</span><span class="o">-</span><span class="mi">10133</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">10041</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9958</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9883</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">9813</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9749</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9689</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9633</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">9580</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9531</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9484</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9439</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">9397</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9356</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9318</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9281</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">9245</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9211</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9178</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9147</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">9116</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9087</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9058</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">15</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">9031</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8978</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8929</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8882</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8837</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8795</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8754</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8716</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8679</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8643</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8609</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8576</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8545</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8514</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8485</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8456</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">14</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8429</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8376</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8327</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8280</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8235</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8193</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8152</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8114</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8077</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">8041</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">8007</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7974</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7943</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">7912</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7883</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7854</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">13</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7827</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">7774</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7724</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7678</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7633</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">7591</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7550</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7512</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7475</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">7439</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7405</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7372</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7341</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">7310</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7281</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7252</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7225</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">7172</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7122</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7075</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">7031</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6989</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6948</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6910</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6873</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6837</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6803</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6770</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6739</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6708</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6679</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6650</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6623</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6570</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6520</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6473</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6429</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6386</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6346</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6307</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6270</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6235</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6201</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6168</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6137</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">6106</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6077</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6048</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">6021</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5968</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5918</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5871</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5827</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5784</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5744</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5705</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5668</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5633</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5599</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5566</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5535</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5504</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5475</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5446</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">9</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5419</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5366</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5316</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5269</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5225</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5182</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5142</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5103</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">5066</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">5031</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4997</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4964</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4932</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">4902</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4873</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4844</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">8</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4816</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">4764</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4714</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4667</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4623</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">4580</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4540</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4501</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4464</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">4429</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4395</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4362</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4330</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">4300</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4270</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4242</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">7</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4214</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">4162</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4112</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4065</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">4021</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3978</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3938</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3899</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3862</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3827</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3793</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3760</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3728</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3698</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3668</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3640</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">6</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3612</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3560</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3510</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3463</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3419</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3376</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3336</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3297</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3260</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3225</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3191</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3158</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3126</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">3096</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3066</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3038</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">5</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">3010</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2958</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2908</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2861</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2816</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2774</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2734</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2695</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2658</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2623</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2589</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2556</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2524</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2494</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2464</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2436</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">4</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2408</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2356</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2306</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2259</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2214</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2172</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2132</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2093</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">2056</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1987</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1954</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1922</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1892</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1862</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1834</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">3</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1806</span><span class="p">,</span>  <span class="mi">4</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1754</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1704</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1657</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1612</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1570</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1530</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1491</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1454</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1419</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1384</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1352</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1320</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1290</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1260</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1232</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">2</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1204</span><span class="p">,</span>  <span class="mi">8</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span> <span class="o">-</span><span class="mi">1151</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1102</span><span class="p">,</span>  <span class="mi">9</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1055</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span> <span class="o">-</span><span class="mi">1010</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">968</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">928</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">889</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">852</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">816</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">782</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">750</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">718</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">688</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">658</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">630</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">1</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">602</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">549</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">500</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">453</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">408</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">366</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">325</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">287</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">250</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>  <span class="o">-</span><span class="mi">214</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">148</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>  <span class="o">-</span><span class="mi">116</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span>   <span class="o">-</span><span class="mi">86</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>   <span class="o">-</span><span class="mi">56</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>   <span class="o">-</span><span class="mi">28</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span> <span class="p">{</span>     <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_volatile</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">BUG_ON</span><span class="p">(</span><span class="n">reg</span> <span class="o">&gt;=</span> <span class="n">REG_CACHE_SIZE</span><span class="p">);</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">reg</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">PM860X_AUDIO_SUPPLIES_2</span>:
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">pm860x_read_reg_cache</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">,</span>
					  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cache</span> <span class="o">=</span> <span class="n">codec</span><span class="o">-&gt;</span><span class="n">reg_cache</span><span class="p">;</span>

	<span class="n">BUG_ON</span><span class="p">(</span><span class="n">reg</span> <span class="o">&gt;=</span> <span class="n">REG_CACHE_SIZE</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pm860x_volatile</span><span class="p">(</span><span class="n">reg</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">reg</span><span class="p">];</span>

	<span class="n">reg</span> <span class="o">+=</span> <span class="n">REG_CACHE_BASE</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">pm860x_reg_read</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_write_reg_cache</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">,</span>
				  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cache</span> <span class="o">=</span> <span class="n">codec</span><span class="o">-&gt;</span><span class="n">reg_cache</span><span class="p">;</span>

	<span class="n">BUG_ON</span><span class="p">(</span><span class="n">reg</span> <span class="o">&gt;=</span> <span class="n">REG_CACHE_SIZE</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pm860x_volatile</span><span class="p">(</span><span class="n">reg</span><span class="p">))</span>
		<span class="n">cache</span><span class="p">[</span><span class="n">reg</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="p">)</span><span class="n">value</span><span class="p">;</span>

	<span class="n">reg</span> <span class="o">+=</span> <span class="n">REG_CACHE_BASE</span><span class="p">;</span>

	<span class="k">return</span> <span class="n">pm860x_reg_write</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">snd_soc_get_volsw_2r_st</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">snd_ctl_elem_value</span> <span class="o">*</span><span class="n">ucontrol</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="n">mc</span> <span class="o">=</span>
		<span class="p">(</span><span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="p">)</span><span class="n">kcontrol</span><span class="o">-&gt;</span><span class="n">private_value</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">snd_kcontrol_chip</span><span class="p">(</span><span class="n">kcontrol</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg2</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">rreg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">val2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">i</span><span class="p">;</span>

	<span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">;</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_SIDETONE_SHIFT</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">;</span>
	<span class="n">val2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">;</span>
	<span class="n">val2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_SIDETONE_SHIFT</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">st_table</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">st_table</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">m</span> <span class="o">==</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">st_table</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">n</span> <span class="o">==</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
			<span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">st_table</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">m</span> <span class="o">==</span> <span class="n">val2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">st_table</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">n</span> <span class="o">==</span> <span class="n">val2</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
			<span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">snd_soc_put_volsw_2r_st</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">snd_ctl_elem_value</span> <span class="o">*</span><span class="n">ucontrol</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="n">mc</span> <span class="o">=</span>
		<span class="p">(</span><span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="p">)</span><span class="n">kcontrol</span><span class="o">-&gt;</span><span class="n">private_value</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">snd_kcontrol_chip</span><span class="p">(</span><span class="n">kcontrol</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg2</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">rreg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="n">val2</span><span class="p">;</span>

	<span class="n">val</span> <span class="o">=</span> <span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">val2</span> <span class="o">=</span> <span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

	<span class="n">err</span> <span class="o">=</span> <span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="n">st_table</span><span class="p">[</span><span class="n">val</span><span class="p">].</span><span class="n">m</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">err</span><span class="p">;</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_SIDETONE_SHIFT</span><span class="p">,</span> <span class="mh">0xf0</span><span class="p">,</span>
				  <span class="n">st_table</span><span class="p">[</span><span class="n">val</span><span class="p">].</span><span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">err</span><span class="p">;</span>

	<span class="n">err</span> <span class="o">=</span> <span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg2</span><span class="p">,</span> <span class="mh">0x3f</span><span class="p">,</span> <span class="n">st_table</span><span class="p">[</span><span class="n">val2</span><span class="p">].</span><span class="n">m</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">err</span><span class="p">;</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_SIDETONE_SHIFT</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span>
				  <span class="n">st_table</span><span class="p">[</span><span class="n">val2</span><span class="p">].</span><span class="n">n</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">snd_soc_get_volsw_2r_out</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">snd_ctl_elem_value</span> <span class="o">*</span><span class="n">ucontrol</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="n">mc</span> <span class="o">=</span>
		<span class="p">(</span><span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="p">)</span><span class="n">kcontrol</span><span class="o">-&gt;</span><span class="n">private_value</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">snd_kcontrol_chip</span><span class="p">(</span><span class="n">kcontrol</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg2</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">rreg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">shift</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">max</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">val2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">fls</span><span class="p">(</span><span class="n">max</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

	<span class="n">val</span> <span class="o">=</span> <span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">val2</span> <span class="o">=</span> <span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg2</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">max</span> <span class="o">-</span> <span class="n">val</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">max</span> <span class="o">-</span> <span class="n">val2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">;</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">snd_soc_put_volsw_2r_out</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">snd_ctl_elem_value</span> <span class="o">*</span><span class="n">ucontrol</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="n">mc</span> <span class="o">=</span>
		<span class="p">(</span><span class="k">struct</span> <span class="n">soc_mixer_control</span> <span class="o">*</span><span class="p">)</span><span class="n">kcontrol</span><span class="o">-&gt;</span><span class="n">private_value</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">snd_kcontrol_chip</span><span class="p">(</span><span class="n">kcontrol</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg2</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">rreg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shift</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">shift</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">mc</span><span class="o">-&gt;</span><span class="n">max</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">fls</span><span class="p">(</span><span class="n">max</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="n">val2</span><span class="p">,</span> <span class="n">val_mask</span><span class="p">;</span>

	<span class="n">val_mask</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">val</span> <span class="o">=</span> <span class="p">((</span><span class="n">max</span> <span class="o">-</span> <span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">);</span>
	<span class="n">val2</span> <span class="o">=</span> <span class="p">((</span><span class="n">max</span> <span class="o">-</span> <span class="n">ucontrol</span><span class="o">-&gt;</span><span class="n">value</span><span class="p">.</span><span class="n">integer</span><span class="p">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">);</span>

	<span class="n">val</span> <span class="o">=</span> <span class="n">val</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">val2</span> <span class="o">=</span> <span class="n">val2</span> <span class="o">&lt;&lt;</span> <span class="n">shift</span><span class="p">;</span>

	<span class="n">err</span> <span class="o">=</span> <span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val_mask</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">err</span><span class="p">;</span>

	<span class="n">err</span> <span class="o">=</span> <span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">reg2</span><span class="p">,</span> <span class="n">val_mask</span><span class="p">,</span> <span class="n">val2</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* DAPM Widget Events */</span>
<span class="cm">/*</span>
<span class="cm"> * A lot registers are belong to RSYNC domain. It requires enabling RSYNC bit</span>
<span class="cm"> * after updating these registers. Otherwise, these updated registers won&#39;t</span>
<span class="cm"> * be effective.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_rsync_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dapm_widget</span> <span class="o">*</span><span class="n">w</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">,</span> <span class="kt">int</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">w</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * In order to avoid current on the load, mute power-on and power-off</span>
<span class="cm">	 * should be transients.</span>
<span class="cm">	 * Unmute by DAC_MUTE. It should be unmuted when DAPM sequence is</span>
<span class="cm">	 * finished.</span>
<span class="cm">	 */</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_OFFSET</span><span class="p">,</span> <span class="n">DAC_MUTE</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_EAR_CTRL_2</span><span class="p">,</span>
			    <span class="n">RSYNC_CHANGE</span><span class="p">,</span> <span class="n">RSYNC_CHANGE</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_dac_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dapm_widget</span> <span class="o">*</span><span class="n">w</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">,</span> <span class="kt">int</span> <span class="n">event</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">w</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dac</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">data</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">strcmp</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">))</span>
		<span class="n">dac</span> <span class="o">=</span> <span class="n">DAC_LEFT</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">strcmp</span><span class="p">(</span><span class="n">w</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">))</span>
		<span class="n">dac</span> <span class="o">=</span> <span class="n">DAC_RIGHT</span><span class="p">;</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAPM_PRE_PMU</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dac</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* Auto mute in power-on sequence. */</span>
			<span class="n">dac</span> <span class="o">|=</span> <span class="n">MODULATOR</span><span class="p">;</span>
			<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_OFFSET</span><span class="p">,</span>
					    <span class="n">DAC_MUTE</span><span class="p">,</span> <span class="n">DAC_MUTE</span><span class="p">);</span>
			<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_EAR_CTRL_2</span><span class="p">,</span>
					    <span class="n">RSYNC_CHANGE</span><span class="p">,</span> <span class="n">RSYNC_CHANGE</span><span class="p">);</span>
			<span class="cm">/* update dac */</span>
			<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_2</span><span class="p">,</span>
					    <span class="n">dac</span><span class="p">,</span> <span class="n">dac</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAPM_PRE_PMD</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">dac</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* Auto mute in power-off sequence. */</span>
			<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_OFFSET</span><span class="p">,</span>
					    <span class="n">DAC_MUTE</span><span class="p">,</span> <span class="n">DAC_MUTE</span><span class="p">);</span>
			<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_EAR_CTRL_2</span><span class="p">,</span>
					    <span class="n">RSYNC_CHANGE</span><span class="p">,</span> <span class="n">RSYNC_CHANGE</span><span class="p">);</span>
			<span class="cm">/* update dac */</span>
			<span class="n">data</span> <span class="o">=</span> <span class="n">snd_soc_read</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_2</span><span class="p">);</span>
			<span class="n">data</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">dac</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">data</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">DAC_LEFT</span> <span class="o">|</span> <span class="n">DAC_RIGHT</span><span class="p">)))</span>
				<span class="n">data</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">MODULATOR</span><span class="p">;</span>
			<span class="n">snd_soc_write</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_2</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pm860x_opamp_texts</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;-50%&quot;</span><span class="p">,</span> <span class="s">&quot;-25%&quot;</span><span class="p">,</span> <span class="s">&quot;0%&quot;</span><span class="p">,</span> <span class="s">&quot;75%&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pm860x_pa_texts</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;-33%&quot;</span><span class="p">,</span> <span class="s">&quot;0%&quot;</span><span class="p">,</span> <span class="s">&quot;33%&quot;</span><span class="p">,</span> <span class="s">&quot;66%&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_hs1_opamp_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_HS1_CTRL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_opamp_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_hs2_opamp_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_HS2_CTRL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_opamp_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_hs1_pa_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_HS1_CTRL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_pa_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_hs2_pa_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_HS2_CTRL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_pa_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_lo1_opamp_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_LO1_CTRL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_opamp_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_lo2_opamp_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_LO2_CTRL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_opamp_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_lo1_pa_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_LO1_CTRL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_pa_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_lo2_pa_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_LO2_CTRL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_pa_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_spk_pa_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_EAR_CTRL_1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_pa_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_ear_pa_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_EAR_CTRL_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_pa_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pm860x_spk_ear_opamp_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_EAR_CTRL_1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">pm860x_opamp_texts</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">pm860x_snd_controls</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">SOC_DOUBLE_R_TLV</span><span class="p">(</span><span class="s">&quot;ADC Capture Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_ANA_2</span><span class="p">,</span>
			<span class="n">PM860X_ADC_ANA_3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">adc_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_TLV</span><span class="p">(</span><span class="s">&quot;AUX Capture Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_ANA_3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">aux_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;MIC1 Capture Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_ANA_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">mic_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;MIC3 Capture Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_ANA_2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">mic_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_EXT_TLV</span><span class="p">(</span><span class="s">&quot;Sidetone Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_SIDETONE_L_GAIN</span><span class="p">,</span>
			     <span class="n">PM860X_SIDETONE_R_GAIN</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">st_table</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>
			     <span class="mi">0</span><span class="p">,</span> <span class="n">snd_soc_get_volsw_2r_st</span><span class="p">,</span>
			     <span class="n">snd_soc_put_volsw_2r_st</span><span class="p">,</span> <span class="n">st_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Speaker Playback Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_EAR_CTRL_1</span><span class="p">,</span>
			<span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_TLV</span><span class="p">(</span><span class="s">&quot;Line Playback Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_LO1_CTRL</span><span class="p">,</span>
			 <span class="n">PM860X_LO2_CTRL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_TLV</span><span class="p">(</span><span class="s">&quot;Headset Playback Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_HS1_CTRL</span><span class="p">,</span>
			 <span class="n">PM860X_HS2_CTRL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_EXT_TLV</span><span class="p">(</span><span class="s">&quot;Hifi Left Playback Volume&quot;</span><span class="p">,</span>
			     <span class="n">PM860X_HIFIL_GAIN_LEFT</span><span class="p">,</span>
			     <span class="n">PM860X_HIFIL_GAIN_RIGHT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			     <span class="n">snd_soc_get_volsw_2r_out</span><span class="p">,</span>
			     <span class="n">snd_soc_put_volsw_2r_out</span><span class="p">,</span> <span class="n">dpga_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_EXT_TLV</span><span class="p">(</span><span class="s">&quot;Hifi Right Playback Volume&quot;</span><span class="p">,</span>
			     <span class="n">PM860X_HIFIR_GAIN_LEFT</span><span class="p">,</span>
			     <span class="n">PM860X_HIFIR_GAIN_RIGHT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			     <span class="n">snd_soc_get_volsw_2r_out</span><span class="p">,</span>
			     <span class="n">snd_soc_put_volsw_2r_out</span><span class="p">,</span> <span class="n">dpga_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_EXT_TLV</span><span class="p">(</span><span class="s">&quot;Lofi Playback Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_LOFI_GAIN_LEFT</span><span class="p">,</span>
			     <span class="n">PM860X_LOFI_GAIN_RIGHT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			     <span class="n">snd_soc_get_volsw_2r_out</span><span class="p">,</span>
			     <span class="n">snd_soc_put_volsw_2r_out</span><span class="p">,</span> <span class="n">dpga_tlv</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Headset1 Operational Amplifier Current&quot;</span><span class="p">,</span>
		 <span class="n">pm860x_hs1_opamp_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Headset2 Operational Amplifier Current&quot;</span><span class="p">,</span>
		 <span class="n">pm860x_hs2_opamp_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Headset1 Amplifier Current&quot;</span><span class="p">,</span> <span class="n">pm860x_hs1_pa_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Headset2 Amplifier Current&quot;</span><span class="p">,</span> <span class="n">pm860x_hs2_pa_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Lineout1 Operational Amplifier Current&quot;</span><span class="p">,</span>
		 <span class="n">pm860x_lo1_opamp_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Lineout2 Operational Amplifier Current&quot;</span><span class="p">,</span>
		 <span class="n">pm860x_lo2_opamp_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Lineout1 Amplifier Current&quot;</span><span class="p">,</span> <span class="n">pm860x_lo1_pa_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Lineout2 Amplifier Current&quot;</span><span class="p">,</span> <span class="n">pm860x_lo2_pa_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Speaker Operational Amplifier Current&quot;</span><span class="p">,</span>
		 <span class="n">pm860x_spk_ear_opamp_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Speaker Amplifier Current&quot;</span><span class="p">,</span> <span class="n">pm860x_spk_pa_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Earpiece Amplifier Current&quot;</span><span class="p">,</span> <span class="n">pm860x_ear_pa_enum</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * DAPM Controls</span>
<span class="cm"> */</span>

<span class="cm">/* PCM Switch / PCM Interface */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">pcm_switch_controls</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="cm">/* AUX1 Switch */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">aux1_switch_controls</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="cm">/* AUX2 Switch */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">aux2_switch_controls</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="cm">/* Left Ex. PA Switch */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">lepa_switch_controls</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="cm">/* Right Ex. PA Switch */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">repa_switch_controls</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="cm">/* PCM Mux / Mux7 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">aif1_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;PCM L&quot;</span><span class="p">,</span> <span class="s">&quot;PCM R&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">aif1_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_PCM_IFACE_3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">aif1_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">aif1_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;PCM Mux&quot;</span><span class="p">,</span> <span class="n">aif1_enum</span><span class="p">);</span>

<span class="cm">/* I2S Mux / Mux9 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">i2s_din_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;DIN&quot;</span><span class="p">,</span> <span class="s">&quot;DIN1&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">i2s_din_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_I2S_IFACE_3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i2s_din_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">i2s_din_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;I2S DIN Mux&quot;</span><span class="p">,</span> <span class="n">i2s_din_enum</span><span class="p">);</span>

<span class="cm">/* I2S Mic Mux / Mux8 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">i2s_mic_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Ex PA&quot;</span><span class="p">,</span> <span class="s">&quot;ADC&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">i2s_mic_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_I2S_IFACE_3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i2s_mic_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">i2s_mic_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">,</span> <span class="n">i2s_mic_enum</span><span class="p">);</span>

<span class="cm">/* ADCL Mux / Mux2 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">adcl_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;ADCR&quot;</span><span class="p">,</span> <span class="s">&quot;ADCL&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adcl_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_PCM_IFACE_3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">adcl_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adcl_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="n">adcl_enum</span><span class="p">);</span>

<span class="cm">/* ADCR Mux / Mux3 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">adcr_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;ADCL&quot;</span><span class="p">,</span> <span class="s">&quot;ADCR&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adcr_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_PCM_IFACE_3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">adcr_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adcr_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="n">adcr_enum</span><span class="p">);</span>

<span class="cm">/* ADCR EC Mux / Mux6 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">adcr_ec_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;ADCR&quot;</span><span class="p">,</span> <span class="s">&quot;EC&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adcr_ec_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">adcr_ec_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adcr_ec_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;ADCR EC Mux&quot;</span><span class="p">,</span> <span class="n">adcr_ec_enum</span><span class="p">);</span>

<span class="cm">/* EC Mux / Mux4 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ec_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Left + Right&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">ec_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_EC_PATH</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ec_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">ec_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;EC Mux&quot;</span><span class="p">,</span> <span class="n">ec_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dac_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;No input&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;No input&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* DAC Headset 1 Mux / Mux10 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">dac_hs1_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_INPUT_SEL_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dac_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">dac_hs1_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;DAC HS1 Mux&quot;</span><span class="p">,</span> <span class="n">dac_hs1_enum</span><span class="p">);</span>

<span class="cm">/* DAC Headset 2 Mux / Mux11 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">dac_hs2_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_INPUT_SEL_1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dac_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">dac_hs2_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;DAC HS2 Mux&quot;</span><span class="p">,</span> <span class="n">dac_hs2_enum</span><span class="p">);</span>

<span class="cm">/* DAC Lineout 1 Mux / Mux12 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">dac_lo1_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_INPUT_SEL_1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dac_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">dac_lo1_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;DAC LO1 Mux&quot;</span><span class="p">,</span> <span class="n">dac_lo1_enum</span><span class="p">);</span>

<span class="cm">/* DAC Lineout 2 Mux / Mux13 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">dac_lo2_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_INPUT_SEL_1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dac_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">dac_lo2_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;DAC LO2 Mux&quot;</span><span class="p">,</span> <span class="n">dac_lo2_enum</span><span class="p">);</span>

<span class="cm">/* DAC Spearker Earphone Mux / Mux14 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">dac_spk_ear_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_INPUT_SEL_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">dac_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">dac_spk_ear_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;DAC SP Mux&quot;</span><span class="p">,</span> <span class="n">dac_spk_ear_enum</span><span class="p">);</span>

<span class="cm">/* Headset 1 Mux / Mux15 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">in_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Digital&quot;</span><span class="p">,</span> <span class="s">&quot;Analog&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">hs1_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">in_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">hs1_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Headset1 Mux&quot;</span><span class="p">,</span> <span class="n">hs1_enum</span><span class="p">);</span>

<span class="cm">/* Headset 2 Mux / Mux16 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">hs2_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">in_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">hs2_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Headset2 Mux&quot;</span><span class="p">,</span> <span class="n">hs2_enum</span><span class="p">);</span>

<span class="cm">/* Lineout 1 Mux / Mux17 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">lo1_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">in_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">lo1_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Lineout1 Mux&quot;</span><span class="p">,</span> <span class="n">lo1_enum</span><span class="p">);</span>

<span class="cm">/* Lineout 2 Mux / Mux18 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">lo2_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">in_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">lo2_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Lineout2 Mux&quot;</span><span class="p">,</span> <span class="n">lo2_enum</span><span class="p">);</span>

<span class="cm">/* Speaker Earpiece Demux */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">spk_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Earpiece&quot;</span><span class="p">,</span> <span class="s">&quot;Speaker&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">spk_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ANA_TO_ANA</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">spk_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">spk_demux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Speaker Earpiece Demux&quot;</span><span class="p">,</span> <span class="n">spk_enum</span><span class="p">);</span>

<span class="cm">/* MIC Mux / Mux1 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">mic_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Mic 1&quot;</span><span class="p">,</span> <span class="s">&quot;Mic 2&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">mic_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">PM860X_ADC_ANA_4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mic_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">mic_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;MIC Mux&quot;</span><span class="p">,</span> <span class="n">mic_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_soc_dapm_widget</span> <span class="n">pm860x_dapm_widgets</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">SND_SOC_DAPM_AIF_IN</span><span class="p">(</span><span class="s">&quot;PCM SDI&quot;</span><span class="p">,</span> <span class="s">&quot;PCM Playback&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_AIF_OUT</span><span class="p">(</span><span class="s">&quot;PCM SDO&quot;</span><span class="p">,</span> <span class="s">&quot;PCM Capture&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			     <span class="n">PM860X_PCM_IFACE_3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>


	<span class="n">SND_SOC_DAPM_AIF_IN</span><span class="p">(</span><span class="s">&quot;I2S DIN&quot;</span><span class="p">,</span> <span class="s">&quot;I2S Playback&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_AIF_IN</span><span class="p">(</span><span class="s">&quot;I2S DIN1&quot;</span><span class="p">,</span> <span class="s">&quot;I2S Playback&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_AIF_OUT</span><span class="p">(</span><span class="s">&quot;I2S DOUT&quot;</span><span class="p">,</span> <span class="s">&quot;I2S Capture&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			     <span class="n">PM860X_I2S_IFACE_3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SUPPLY</span><span class="p">(</span><span class="s">&quot;I2S CLK&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2s_mic_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adcl_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adcr_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;EC Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ec_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADCR EC Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adcr_ec_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;Left EPA&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="o">&amp;</span><span class="n">lepa_switch_controls</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;Right EPA&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="o">&amp;</span><span class="n">repa_switch_controls</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_REG</span><span class="p">(</span><span class="n">snd_soc_dapm_supply</span><span class="p">,</span> <span class="s">&quot;Left ADC MOD&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_1</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_REG</span><span class="p">(</span><span class="n">snd_soc_dapm_supply</span><span class="p">,</span> <span class="s">&quot;Right ADC MOD&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_1</span><span class="p">,</span>
			 <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_ADC</span><span class="p">(</span><span class="s">&quot;Left ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_ADC</span><span class="p">(</span><span class="s">&quot;Right ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;AUX1 Switch&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="o">&amp;</span><span class="n">aux1_switch_controls</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;AUX2 Switch&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			    <span class="o">&amp;</span><span class="n">aux2_switch_controls</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;MIC Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mic_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MICBIAS</span><span class="p">(</span><span class="s">&quot;Mic1 Bias&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_ANA_1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MICBIAS</span><span class="p">(</span><span class="s">&quot;Mic3 Bias&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_ANA_1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;MIC1 Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;MIC3 Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;AUX1 Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;AUX2 Volume&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Sidetone PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Lofi PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_ADC_EN_2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AUX1&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AUX2&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MIC1P&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MIC1N&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MIC2P&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MIC2N&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MIC3P&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MIC3N&quot;</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_DAC_E</span><span class="p">(</span><span class="s">&quot;Left DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			   <span class="n">pm860x_dac_event</span><span class="p">,</span>
			   <span class="n">SND_SOC_DAPM_PRE_PMU</span> <span class="o">|</span> <span class="n">SND_SOC_DAPM_PRE_PMD</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_DAC_E</span><span class="p">(</span><span class="s">&quot;Right DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			   <span class="n">pm860x_dac_event</span><span class="p">,</span>
			   <span class="n">SND_SOC_DAPM_PRE_PMU</span> <span class="o">|</span> <span class="n">SND_SOC_DAPM_PRE_PMD</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;I2S DIN Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i2s_din_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;DAC HS1 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dac_hs1_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;DAC HS2 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dac_hs2_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;DAC LO1 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dac_lo1_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;DAC LO2 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dac_lo2_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;DAC SP Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dac_spk_ear_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;Headset1 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hs1_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;Headset2 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hs2_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;Lineout1 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">lo1_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;Lineout2 Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">lo2_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;Speaker Earpiece Demux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			 <span class="o">&amp;</span><span class="n">spk_demux</span><span class="p">),</span>


	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Headset1 PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Headset2 PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;HS1&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;HS2&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Lineout1 PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Lineout2 PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;LINEOUT1&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;LINEOUT2&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Earpiece PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;EARP&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;EARN&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;Speaker PGA&quot;</span><span class="p">,</span> <span class="n">PM860X_DAC_EN_1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;LSP&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;LSN&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_REG</span><span class="p">(</span><span class="n">snd_soc_dapm_supply</span><span class="p">,</span> <span class="s">&quot;VCODEC&quot;</span><span class="p">,</span> <span class="n">PM860X_AUDIO_SUPPLIES_2</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="n">SUPPLY_MASK</span><span class="p">,</span> <span class="n">SUPPLY_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">PM860X_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="n">pm860x_rsync_event</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_soc_dapm_route</span> <span class="n">pm860x_dapm_routes</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* supply */</span>
	<span class="p">{</span><span class="s">&quot;Left DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;VCODEC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;VCODEC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Left ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;VCODEC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;VCODEC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Left ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Left ADC MOD&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Right ADC MOD&quot;</span><span class="p">},</span>

	<span class="cm">/* I2S Clock */</span>
	<span class="p">{</span><span class="s">&quot;I2S DIN&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;I2S CLK&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S DIN1&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;I2S CLK&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S DOUT&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;I2S CLK&quot;</span><span class="p">},</span>

	<span class="cm">/* PCM/AIF1 Inputs */</span>
	<span class="p">{</span><span class="s">&quot;PCM SDO&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ADC Left Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PCM SDO&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ADCR EC Mux&quot;</span><span class="p">},</span>

	<span class="cm">/* PCM/AFI2 Outputs */</span>
	<span class="p">{</span><span class="s">&quot;Lofi PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;PCM SDI&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Lofi PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Sidetone PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Left DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Lofi PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Lofi PGA&quot;</span><span class="p">},</span>

	<span class="cm">/* I2S/AIF2 Inputs */</span>
	<span class="p">{</span><span class="s">&quot;MIC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Mic 1&quot;</span><span class="p">,</span> <span class="s">&quot;MIC1P&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;MIC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Mic 1&quot;</span><span class="p">,</span> <span class="s">&quot;MIC1N&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;MIC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Mic 2&quot;</span><span class="p">,</span> <span class="s">&quot;MIC2P&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;MIC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Mic 2&quot;</span><span class="p">,</span> <span class="s">&quot;MIC2N&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;MIC1 Volume&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MIC Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;MIC3 Volume&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MIC3P&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;MIC3 Volume&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MIC3N&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Left ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MIC1 Volume&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right ADC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MIC3 Volume&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADCR&quot;</span><span class="p">,</span> <span class="s">&quot;Right ADC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADCL&quot;</span><span class="p">,</span> <span class="s">&quot;Left ADC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADCL&quot;</span><span class="p">,</span> <span class="s">&quot;Left ADC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADCR&quot;</span><span class="p">,</span> <span class="s">&quot;Right ADC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Left EPA&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right EPA&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;EC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;EC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;EC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left + Right&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;EC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left + Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADCR EC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADCR&quot;</span><span class="p">,</span> <span class="s">&quot;ADC Right Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADCR EC Mux&quot;</span><span class="p">,</span> <span class="s">&quot;EC&quot;</span><span class="p">,</span> <span class="s">&quot;EC Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Ex PA&quot;</span><span class="p">,</span> <span class="s">&quot;Left EPA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Ex PA&quot;</span><span class="p">,</span> <span class="s">&quot;Right EPA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADC&quot;</span><span class="p">,</span> <span class="s">&quot;ADC Left Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADC&quot;</span><span class="p">,</span> <span class="s">&quot;ADCR EC Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S DOUT&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;I2S Mic Mux&quot;</span><span class="p">},</span>

	<span class="cm">/* I2S/AIF2 Outputs */</span>
	<span class="p">{</span><span class="s">&quot;I2S DIN Mux&quot;</span><span class="p">,</span> <span class="s">&quot;DIN&quot;</span><span class="p">,</span> <span class="s">&quot;I2S DIN&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;I2S DIN Mux&quot;</span><span class="p">,</span> <span class="s">&quot;DIN1&quot;</span><span class="p">,</span> <span class="s">&quot;I2S DIN1&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Left DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;I2S DIN Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Right DAC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;I2S DIN Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC HS1 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC HS1 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC HS2 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC HS2 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC LO1 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC LO1 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC LO2 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC LO2 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Headset1 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Digital&quot;</span><span class="p">,</span> <span class="s">&quot;DAC HS1 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Headset2 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Digital&quot;</span><span class="p">,</span> <span class="s">&quot;DAC HS2 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Lineout1 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Digital&quot;</span><span class="p">,</span> <span class="s">&quot;DAC LO1 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Lineout2 Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Digital&quot;</span><span class="p">,</span> <span class="s">&quot;DAC LO2 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Headset1 PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Headset1 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Headset2 PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Headset2 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Lineout1 PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Lineout1 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Lineout2 PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Lineout2 Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC SP Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;Left DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC SP Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;Right DAC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Speaker Earpiece Demux&quot;</span><span class="p">,</span> <span class="s">&quot;Speaker&quot;</span><span class="p">,</span> <span class="s">&quot;DAC SP Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Speaker PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Speaker Earpiece Demux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Earpiece PGA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Speaker Earpiece Demux&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Headset1 PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Headset2 PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Lineout1 PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Lineout2 PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Speaker PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Speaker PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Earpiece PGA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;RSYNC&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Earpiece PGA&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;HS1&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;HS2&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;LINEOUT1&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;LINEOUT2&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;LSP&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;LSN&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;EARP&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;EARN&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;RSYNC&quot;</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Use MUTE_LEFT &amp; MUTE_RIGHT to implement digital mute.</span>
<span class="cm"> * These bits can also be used to mute.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_digital_mute</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">codec_dai</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mute</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec_dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">MUTE_LEFT</span> <span class="o">|</span> <span class="n">MUTE_RIGHT</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">mute</span><span class="p">)</span>
		<span class="n">data</span> <span class="o">=</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_DAC_OFFSET</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_EAR_CTRL_2</span><span class="p">,</span>
			    <span class="n">RSYNC_CHANGE</span><span class="p">,</span> <span class="n">RSYNC_CHANGE</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_pcm_hw_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">substream</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">snd_pcm_hw_params</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">dai</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/* bit size */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">params_format</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SNDRV_PCM_FORMAT_S16_LE</span>:
		<span class="n">inf</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">PCM_INF2_18WL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SNDRV_PCM_FORMAT_S18_3LE</span>:
		<span class="n">inf</span> <span class="o">|=</span> <span class="n">PCM_INF2_18WL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">mask</span> <span class="o">|=</span> <span class="n">PCM_INF2_18WL</span><span class="p">;</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_PCM_IFACE_2</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">inf</span><span class="p">);</span>

	<span class="cm">/* sample rate */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">params_rate</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">8000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">16000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">32000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">48000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_PCM_RATE</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="n">inf</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_pcm_set_dai_fmt</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">codec_dai</span><span class="p">,</span>
				  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec_dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>

	<span class="n">mask</span> <span class="o">|=</span> <span class="n">PCM_INF2_BCLK</span> <span class="o">|</span> <span class="n">PCM_INF2_FS</span> <span class="o">|</span> <span class="n">PCM_INF2_MASTER</span><span class="p">;</span>

	<span class="cm">/* set master/slave audio interface */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_MASTER_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBM_CFM</span>:
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBM_CFS</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">dir</span> <span class="o">==</span> <span class="n">PM860X_CLK_DIR_OUT</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">inf</span> <span class="o">|=</span> <span class="n">PCM_INF2_MASTER</span><span class="p">;</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBS_CFS</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">dir</span> <span class="o">==</span> <span class="n">PM860X_CLK_DIR_IN</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">inf</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">PCM_INF2_MASTER</span><span class="p">;</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_FORMAT_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_I2S</span>:
		<span class="n">inf</span> <span class="o">|=</span> <span class="n">PCM_EXACT_I2S</span><span class="p">;</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">mask</span> <span class="o">|=</span> <span class="n">PCM_MODE_MASK</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_PCM_IFACE_2</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">inf</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_set_dai_sysclk</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">codec_dai</span><span class="p">,</span>
				 <span class="kt">int</span> <span class="n">clk_id</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">freq</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec_dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dir</span> <span class="o">==</span> <span class="n">PM860X_CLK_DIR_OUT</span><span class="p">)</span>
		<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">dir</span> <span class="o">=</span> <span class="n">PM860X_CLK_DIR_OUT</span><span class="p">;</span>
	<span class="k">else</span> <span class="p">{</span>
		<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">dir</span> <span class="o">=</span> <span class="n">PM860X_CLK_DIR_IN</span><span class="p">;</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_i2s_hw_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">substream</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">snd_pcm_hw_params</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">dai</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">inf</span><span class="p">;</span>

	<span class="cm">/* bit size */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">params_format</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SNDRV_PCM_FORMAT_S16_LE</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SNDRV_PCM_FORMAT_S18_3LE</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="n">PCM_INF2_18WL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_I2S_IFACE_2</span><span class="p">,</span> <span class="n">PCM_INF2_18WL</span><span class="p">,</span> <span class="n">inf</span><span class="p">);</span>

	<span class="cm">/* sample rate */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">params_rate</span><span class="p">(</span><span class="n">params</span><span class="p">))</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">8000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">11025</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">16000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">22050</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">32000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">44100</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">48000</span>:
		<span class="n">inf</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_I2S_IFACE_4</span><span class="p">,</span> <span class="mh">0xf</span><span class="p">,</span> <span class="n">inf</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_i2s_set_dai_fmt</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">codec_dai</span><span class="p">,</span>
				  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec_dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">mask</span> <span class="o">|=</span> <span class="n">PCM_INF2_BCLK</span> <span class="o">|</span> <span class="n">PCM_INF2_FS</span> <span class="o">|</span> <span class="n">PCM_INF2_MASTER</span><span class="p">;</span>

	<span class="cm">/* set master/slave audio interface */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_MASTER_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBM_CFM</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">dir</span> <span class="o">==</span> <span class="n">PM860X_CLK_DIR_OUT</span><span class="p">)</span>
			<span class="n">inf</span> <span class="o">|=</span> <span class="n">PCM_INF2_MASTER</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBS_CFS</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">dir</span> <span class="o">==</span> <span class="n">PM860X_CLK_DIR_IN</span><span class="p">)</span>
			<span class="n">inf</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">PCM_INF2_MASTER</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_FORMAT_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_I2S</span>:
		<span class="n">inf</span> <span class="o">|=</span> <span class="n">PCM_EXACT_I2S</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">mask</span> <span class="o">|=</span> <span class="n">PCM_MODE_MASK</span><span class="p">;</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">PM860X_I2S_IFACE_2</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">inf</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_set_bias_level</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">,</span>
				 <span class="k">enum</span> <span class="n">snd_soc_bias_level</span> <span class="n">level</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">data</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">level</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_BIAS_ON</span>:
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">SND_SOC_BIAS_PREPARE</span>:
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">SND_SOC_BIAS_STANDBY</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dapm</span><span class="p">.</span><span class="n">bias_level</span> <span class="o">==</span> <span class="n">SND_SOC_BIAS_OFF</span><span class="p">)</span> <span class="p">{</span>
			<span class="cm">/* Enable Audio PLL &amp; Audio section */</span>
			<span class="n">data</span> <span class="o">=</span> <span class="n">AUDIO_PLL</span> <span class="o">|</span> <span class="n">AUDIO_SECTION_ON</span><span class="p">;</span>
			<span class="n">pm860x_reg_write</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_MISC2</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
			<span class="n">udelay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
			<span class="n">data</span> <span class="o">=</span> <span class="n">AUDIO_PLL</span> <span class="o">|</span> <span class="n">AUDIO_SECTION_RESET</span>
				<span class="o">|</span> <span class="n">AUDIO_SECTION_ON</span><span class="p">;</span>
			<span class="n">pm860x_reg_write</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_MISC2</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="n">SND_SOC_BIAS_OFF</span>:
		<span class="n">data</span> <span class="o">=</span> <span class="n">AUDIO_PLL</span> <span class="o">|</span> <span class="n">AUDIO_SECTION_RESET</span> <span class="o">|</span> <span class="n">AUDIO_SECTION_ON</span><span class="p">;</span>
		<span class="n">pm860x_set_bits</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_MISC2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">codec</span><span class="o">-&gt;</span><span class="n">dapm</span><span class="p">.</span><span class="n">bias_level</span> <span class="o">=</span> <span class="n">level</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_soc_dai_ops</span> <span class="n">pm860x_pcm_dai_ops</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">digital_mute</span>	<span class="o">=</span> <span class="n">pm860x_digital_mute</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hw_params</span>	<span class="o">=</span> <span class="n">pm860x_pcm_hw_params</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_fmt</span>	<span class="o">=</span> <span class="n">pm860x_pcm_set_dai_fmt</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_sysclk</span>	<span class="o">=</span> <span class="n">pm860x_set_dai_sysclk</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_soc_dai_ops</span> <span class="n">pm860x_i2s_dai_ops</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">digital_mute</span>	<span class="o">=</span> <span class="n">pm860x_digital_mute</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hw_params</span>	<span class="o">=</span> <span class="n">pm860x_i2s_hw_params</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_fmt</span>	<span class="o">=</span> <span class="n">pm860x_i2s_set_dai_fmt</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_sysclk</span>	<span class="o">=</span> <span class="n">pm860x_set_dai_sysclk</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define PM860X_RATES	(SNDRV_PCM_RATE_8000 | SNDRV_PCM_RATE_16000 |	\</span>
<span class="cp">			 SNDRV_PCM_RATE_32000 | SNDRV_PCM_RATE_48000)</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">snd_soc_dai_driver</span> <span class="n">pm860x_dai</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="cm">/* DAI PCM */</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;88pm860x-pcm&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">id</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">playback</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">stream_name</span>	<span class="o">=</span> <span class="s">&quot;PCM Playback&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_min</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_max</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">rates</span>		<span class="o">=</span> <span class="n">PM860X_RATES</span><span class="p">,</span>
			<span class="p">.</span><span class="n">formats</span>	<span class="o">=</span> <span class="n">SNDRV_PCM_FORMAT_S16_LE</span> <span class="o">|</span> \
					  <span class="n">SNDRV_PCM_FORMAT_S18_3LE</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">.</span><span class="n">capture</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">stream_name</span>	<span class="o">=</span> <span class="s">&quot;PCM Capture&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_min</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_max</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">rates</span>		<span class="o">=</span> <span class="n">PM860X_RATES</span><span class="p">,</span>
			<span class="p">.</span><span class="n">formats</span>	<span class="o">=</span> <span class="n">SNDRV_PCM_FORMAT_S16_LE</span> <span class="o">|</span> \
					  <span class="n">SNDRV_PCM_FORMAT_S18_3LE</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">.</span><span class="n">ops</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">pm860x_pcm_dai_ops</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="cm">/* DAI I2S */</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;88pm860x-i2s&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">id</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">playback</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">stream_name</span>	<span class="o">=</span> <span class="s">&quot;I2S Playback&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_min</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_max</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">rates</span>		<span class="o">=</span> <span class="n">SNDRV_PCM_RATE_8000_48000</span><span class="p">,</span>
			<span class="p">.</span><span class="n">formats</span>	<span class="o">=</span> <span class="n">SNDRV_PCM_FORMAT_S16_LE</span> <span class="o">|</span> \
					  <span class="n">SNDRV_PCM_FORMAT_S18_3LE</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">.</span><span class="n">capture</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">stream_name</span>	<span class="o">=</span> <span class="s">&quot;I2S Capture&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_min</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_max</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">rates</span>		<span class="o">=</span> <span class="n">SNDRV_PCM_RATE_8000_48000</span><span class="p">,</span>
			<span class="p">.</span><span class="n">formats</span>	<span class="o">=</span> <span class="n">SNDRV_PCM_FORMAT_S16_LE</span> <span class="o">|</span> \
					  <span class="n">SNDRV_PCM_FORMAT_S18_3LE</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">.</span><span class="n">ops</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">pm860x_i2s_dai_ops</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">irqreturn_t</span> <span class="nf">pm860x_codec_handler</span><span class="p">(</span><span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">status</span><span class="p">,</span> <span class="n">shrt</span><span class="p">,</span> <span class="n">report</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mic_report</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mask</span><span class="p">;</span>

	<span class="n">status</span> <span class="o">=</span> <span class="n">pm860x_reg_read</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">i2c</span><span class="p">,</span> <span class="n">REG_STATUS_1</span><span class="p">);</span>
	<span class="n">shrt</span> <span class="o">=</span> <span class="n">pm860x_reg_read</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">i2c</span><span class="p">,</span> <span class="n">REG_SHORTS</span><span class="p">);</span>
	<span class="n">mask</span> <span class="o">=</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hs_shrt</span> <span class="o">|</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hook_det</span> <span class="o">|</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">lo_shrt</span>
		<span class="o">|</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hp_det</span><span class="p">;</span>

<span class="cp">#ifndef CONFIG_SND_SOC_88PM860X_MODULE</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">status</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">HEADSET_STATUS</span> <span class="o">|</span> <span class="n">MIC_STATUS</span> <span class="o">|</span> <span class="n">SHORT_HS1</span> <span class="o">|</span> <span class="n">SHORT_HS2</span> <span class="o">|</span>
		      <span class="n">SHORT_LO1</span> <span class="o">|</span> <span class="n">SHORT_LO2</span><span class="p">))</span>
		<span class="n">trace_snd_soc_jack_irq</span><span class="p">(</span><span class="n">dev_name</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">));</span>
<span class="cp">#endif</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hp_det</span> <span class="o">&amp;</span> <span class="n">SND_JACK_HEADPHONE</span><span class="p">)</span>
		<span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">status</span> <span class="o">&amp;</span> <span class="n">HEADSET_STATUS</span><span class="p">))</span>
		<span class="n">report</span> <span class="o">|=</span> <span class="n">SND_JACK_HEADPHONE</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">mic_det</span> <span class="o">&amp;</span> <span class="n">SND_JACK_MICROPHONE</span><span class="p">)</span>
		<span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">status</span> <span class="o">&amp;</span> <span class="n">MIC_STATUS</span><span class="p">))</span>
		<span class="n">mic_report</span> <span class="o">|=</span> <span class="n">SND_JACK_MICROPHONE</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hs_shrt</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">shrt</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">SHORT_HS1</span> <span class="o">|</span> <span class="n">SHORT_HS2</span><span class="p">)))</span>
		<span class="n">report</span> <span class="o">|=</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hs_shrt</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hook_det</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">status</span> <span class="o">&amp;</span> <span class="n">HOOK_STATUS</span><span class="p">))</span>
		<span class="n">report</span> <span class="o">|=</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hook_det</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">lo_shrt</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">shrt</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">SHORT_LO1</span> <span class="o">|</span> <span class="n">SHORT_LO2</span><span class="p">)))</span>
		<span class="n">report</span> <span class="o">|=</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">lo_shrt</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">report</span><span class="p">)</span>
		<span class="n">snd_soc_jack_report</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hp_jack</span><span class="p">,</span> <span class="n">report</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mic_report</span><span class="p">)</span>
		<span class="n">snd_soc_jack_report</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">mic_jack</span><span class="p">,</span> <span class="n">SND_JACK_MICROPHONE</span><span class="p">,</span>
				    <span class="n">SND_JACK_MICROPHONE</span><span class="p">);</span>

	<span class="n">dev_dbg</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;headphone report:0x%x, mask:%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">report</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
	<span class="n">dev_dbg</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;microphone report:0x%x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">mic_report</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">IRQ_HANDLED</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">pm860x_hs_jack_detect</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">snd_soc_jack</span> <span class="o">*</span><span class="n">jack</span><span class="p">,</span>
			  <span class="kt">int</span> <span class="n">det</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hook</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hs_shrt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lo_shrt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">data</span><span class="p">;</span>

	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hp_jack</span> <span class="o">=</span> <span class="n">jack</span><span class="p">;</span>
	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hp_det</span> <span class="o">=</span> <span class="n">det</span><span class="p">;</span>
	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hook_det</span> <span class="o">=</span> <span class="n">hook</span><span class="p">;</span>
	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">hs_shrt</span> <span class="o">=</span> <span class="n">hs_shrt</span><span class="p">;</span>
	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">lo_shrt</span> <span class="o">=</span> <span class="n">lo_shrt</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">det</span> <span class="o">&amp;</span> <span class="n">SND_JACK_HEADPHONE</span><span class="p">)</span>
		<span class="n">pm860x_set_bits</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_HS_DET</span><span class="p">,</span>
				<span class="n">EN_HS_DET</span><span class="p">,</span> <span class="n">EN_HS_DET</span><span class="p">);</span>
	<span class="cm">/* headset short detect */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">hs_shrt</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">data</span> <span class="o">=</span> <span class="n">CLR_SHORT_HS2</span> <span class="o">|</span> <span class="n">CLR_SHORT_HS1</span><span class="p">;</span>
		<span class="n">pm860x_set_bits</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_SHORTS</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="cm">/* Lineout short detect */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">lo_shrt</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">data</span> <span class="o">=</span> <span class="n">CLR_SHORT_LO2</span> <span class="o">|</span> <span class="n">CLR_SHORT_LO1</span><span class="p">;</span>
		<span class="n">pm860x_set_bits</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_SHORTS</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/* sync status */</span>
	<span class="n">pm860x_codec_handler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pm860x</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">pm860x_hs_jack_detect</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">pm860x_mic_jack_detect</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">,</span>
			   <span class="k">struct</span> <span class="n">snd_soc_jack</span> <span class="o">*</span><span class="n">jack</span><span class="p">,</span> <span class="kt">int</span> <span class="n">det</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">mic_jack</span> <span class="o">=</span> <span class="n">jack</span><span class="p">;</span>
	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">det</span><span class="p">.</span><span class="n">mic_det</span> <span class="o">=</span> <span class="n">det</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">det</span> <span class="o">&amp;</span> <span class="n">SND_JACK_MICROPHONE</span><span class="p">)</span>
		<span class="n">pm860x_set_bits</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_MIC_DET</span><span class="p">,</span>
				<span class="n">MICDET_MASK</span><span class="p">,</span> <span class="n">MICDET_MASK</span><span class="p">);</span>

	<span class="cm">/* sync status */</span>
	<span class="n">pm860x_codec_handler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pm860x</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL_GPL</span><span class="p">(</span><span class="n">pm860x_mic_jack_detect</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec</span><span class="p">;</span>

	<span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span> <span class="o">=</span> <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">i2c</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">request_threaded_irq</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">NULL</span><span class="p">,</span>
					   <span class="n">pm860x_codec_handler</span><span class="p">,</span> <span class="n">IRQF_ONESHOT</span><span class="p">,</span>
					   <span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pm860x</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to request IRQ!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">out</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="n">pm860x_set_bias_level</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">SND_SOC_BIAS_STANDBY</span><span class="p">);</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">pm860x_bulk_read</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span><span class="p">,</span> <span class="n">REG_CACHE_BASE</span><span class="p">,</span>
			       <span class="n">REG_CACHE_SIZE</span><span class="p">,</span> <span class="n">codec</span><span class="o">-&gt;</span><span class="n">reg_cache</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to fill register cache: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">ret</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">out</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">out:</span>
	<span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">free_irq</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pm860x</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">pm860x_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span>
		<span class="n">free_irq</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pm860x</span><span class="p">);</span>
	<span class="n">pm860x_set_bias_level</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">SND_SOC_BIAS_OFF</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">snd_soc_codec_driver</span> <span class="n">soc_codec_dev_pm860x</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">probe</span>		<span class="o">=</span> <span class="n">pm860x_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span>		<span class="o">=</span> <span class="n">pm860x_remove</span><span class="p">,</span>
	<span class="p">.</span><span class="n">read</span>		<span class="o">=</span> <span class="n">pm860x_read_reg_cache</span><span class="p">,</span>
	<span class="p">.</span><span class="n">write</span>		<span class="o">=</span> <span class="n">pm860x_write_reg_cache</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reg_cache_size</span>	<span class="o">=</span> <span class="n">REG_CACHE_SIZE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reg_word_size</span>	<span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">u8</span><span class="p">),</span>
	<span class="p">.</span><span class="n">set_bias_level</span>	<span class="o">=</span> <span class="n">pm860x_set_bias_level</span><span class="p">,</span>

	<span class="p">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">pm860x_snd_controls</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_controls</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pm860x_snd_controls</span><span class="p">),</span>
	<span class="p">.</span><span class="n">dapm_widgets</span> <span class="o">=</span> <span class="n">pm860x_dapm_widgets</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_dapm_widgets</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pm860x_dapm_widgets</span><span class="p">),</span>
	<span class="p">.</span><span class="n">dapm_routes</span> <span class="o">=</span> <span class="n">pm860x_dapm_routes</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_dapm_routes</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pm860x_dapm_routes</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__devinit</span> <span class="nf">pm860x_codec_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">pdev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">pm860x_chip</span> <span class="o">*</span><span class="n">chip</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">pdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">.</span><span class="n">parent</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">pm860x_priv</span> <span class="o">*</span><span class="n">pm860x</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">res</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">pm860x</span> <span class="o">=</span> <span class="n">devm_kzalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pm860x_priv</span><span class="p">),</span>
			      <span class="n">GFP_KERNEL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pm860x</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>

	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">chip</span> <span class="o">=</span> <span class="n">chip</span><span class="p">;</span>
	<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">i2c</span> <span class="o">=</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">id</span> <span class="o">==</span> <span class="n">CHIP_PM8607</span><span class="p">)</span> <span class="o">?</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">client</span>
			<span class="o">:</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">companion</span><span class="p">;</span>
	<span class="n">platform_set_drvdata</span><span class="p">(</span><span class="n">pdev</span><span class="p">,</span> <span class="n">pm860x</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">res</span> <span class="o">=</span> <span class="n">platform_get_resource</span><span class="p">(</span><span class="n">pdev</span><span class="p">,</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">res</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">dev_err</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to get IRQ resources</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">out</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">irq</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">irq_base</span><span class="p">;</span>
		<span class="n">strncpy</span><span class="p">(</span><span class="n">pm860x</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">MAX_NAME_LEN</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">snd_soc_register_codec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">soc_codec_dev_pm860x</span><span class="p">,</span>
				     <span class="n">pm860x_dai</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pm860x_dai</span><span class="p">));</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to register codec</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">out</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>

<span class="nl">out:</span>
	<span class="n">platform_set_drvdata</span><span class="p">(</span><span class="n">pdev</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__devexit</span> <span class="nf">pm860x_codec_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">pdev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">snd_soc_unregister_codec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pdev</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">platform_set_drvdata</span><span class="p">(</span><span class="n">pdev</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_driver</span> <span class="n">pm860x_codec_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">driver</span>	<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;88pm860x-codec&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">owner</span>	<span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">probe</span>	<span class="o">=</span> <span class="n">pm860x_codec_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span>	<span class="o">=</span> <span class="n">__devexit_p</span><span class="p">(</span><span class="n">pm860x_codec_remove</span><span class="p">),</span>
<span class="p">};</span>

<span class="n">module_platform_driver</span><span class="p">(</span><span class="n">pm860x_codec_driver</span><span class="p">);</span>

<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;ASoC 88PM860x driver&quot;</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Haojian Zhuang &lt;haojian.zhuang@marvell.com&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
<span class="n">MODULE_ALIAS</span><span class="p">(</span><span class="s">&quot;platform:88pm860x-codec&quot;</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
