<!DOCTYPE html>
<html><head><title>joekychen/linux » sound › soc › codecs › cs42l52.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>cs42l52.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * cs42l52.c -- CS42L52 ALSA SoC audio driver</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2012 CirrusLogic, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Georgi Vlaev &lt;joe@nucleusys.com&gt;</span>
<span class="cm"> * Author: Brian Austin &lt;brian.austin@cirrus.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/moduleparam.h&gt;</span>
<span class="cp">#include &lt;linux/version.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/pm.h&gt;</span>
<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &lt;linux/input.h&gt;</span>
<span class="cp">#include &lt;linux/regmap.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/workqueue.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;sound/core.h&gt;</span>
<span class="cp">#include &lt;sound/pcm.h&gt;</span>
<span class="cp">#include &lt;sound/pcm_params.h&gt;</span>
<span class="cp">#include &lt;sound/soc.h&gt;</span>
<span class="cp">#include &lt;sound/soc-dapm.h&gt;</span>
<span class="cp">#include &lt;sound/initval.h&gt;</span>
<span class="cp">#include &lt;sound/tlv.h&gt;</span>
<span class="cp">#include &lt;sound/cs42l52.h&gt;</span>
<span class="cp">#include &quot;cs42l52.h&quot;</span>

<span class="k">struct</span> <span class="n">sp_config</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">spc</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">spfs</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">srate</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span>  <span class="n">cs42l52_private</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">regmap</span> <span class="o">*</span><span class="n">regmap</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sp_config</span> <span class="n">config</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cs42l52_platform_data</span> <span class="n">pdata</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sysclk</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mclksel</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">mclk</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#if defined(CONFIG_INPUT) || defined(CONFIG_INPUT_MODULE)</span>
	<span class="k">struct</span> <span class="n">input_dev</span> <span class="o">*</span><span class="n">beep</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">beep_work</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">beep_rate</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">reg_default</span> <span class="n">cs42l52_reg_defaults</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="mh">0x9F</span> <span class="p">},</span>	<span class="cm">/* r02 PWRCTL 1 */</span>
	<span class="p">{</span> <span class="n">CS42L52_PWRCTL2</span><span class="p">,</span> <span class="mh">0x07</span> <span class="p">},</span>	<span class="cm">/* r03 PWRCTL 2 */</span>
	<span class="p">{</span> <span class="n">CS42L52_PWRCTL3</span><span class="p">,</span> <span class="mh">0xFF</span> <span class="p">},</span>	<span class="cm">/* r04 PWRCTL 3 */</span>
	<span class="p">{</span> <span class="n">CS42L52_CLK_CTL</span><span class="p">,</span> <span class="mh">0xA0</span> <span class="p">},</span>	<span class="cm">/* r05 Clocking Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_IFACE_CTL1</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r06 Interface Ctl 1 */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mh">0x80</span> <span class="p">},</span>	<span class="cm">/* r08 Input A Select */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mh">0x80</span> <span class="p">},</span>	<span class="cm">/* r09 Input B Select */</span>
	<span class="p">{</span> <span class="n">CS42L52_ANALOG_HPF_CTL</span><span class="p">,</span> <span class="mh">0xA5</span> <span class="p">},</span>	<span class="cm">/* r0A Analog HPF Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADC_HPF_FREQ</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r0B ADC HPF Corner Freq */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADC_MISC_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r0C Misc. ADC Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_PB_CTL1</span><span class="p">,</span> <span class="mh">0x60</span> <span class="p">},</span>	<span class="cm">/* r0D Playback Ctl 1 */</span>
	<span class="p">{</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mh">0x02</span> <span class="p">},</span>	<span class="cm">/* r0E Misc. Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_PB_CTL2</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r0F Playback Ctl 2 */</span>
	<span class="p">{</span> <span class="n">CS42L52_MICA_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r10 MICA Amp Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_MICB_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r11 MICB Amp Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_PGAA_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r12 PGAA Vol, Misc. */</span>
	<span class="p">{</span> <span class="n">CS42L52_PGAB_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r13 PGAB Vol, Misc. */</span>
	<span class="p">{</span> <span class="n">CS42L52_PASSTHRUA_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r14 Bypass A Vol */</span>
	<span class="p">{</span> <span class="n">CS42L52_PASSTHRUB_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r15 Bypass B Vol */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADCA_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r16 ADCA Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADCB_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r17 ADCB Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADCA_MIXER_VOL</span><span class="p">,</span> <span class="mh">0x80</span> <span class="p">},</span>	<span class="cm">/* r18 ADCA Mixer Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADCB_MIXER_VOL</span><span class="p">,</span> <span class="mh">0x80</span> <span class="p">},</span>	<span class="cm">/* r19 ADCB Mixer Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_PCMA_MIXER_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r1A PCMA Mixer Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_PCMB_MIXER_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r1B PCMB Mixer Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_BEEP_FREQ</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r1C Beep Freq on Time */</span>
	<span class="p">{</span> <span class="n">CS42L52_BEEP_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r1D Beep Volume off Time */</span>
	<span class="p">{</span> <span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r1E Beep Tone Cfg. */</span>
	<span class="p">{</span> <span class="n">CS42L52_TONE_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r1F Tone Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_MASTERA_VOL</span><span class="p">,</span> <span class="mh">0x88</span> <span class="p">},</span>	<span class="cm">/* r20 Master A Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_MASTERB_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r21 Master B Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_HPA_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r22 Headphone A Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_HPB_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r23 Headphone B Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_SPKA_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r24 Speaker A Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_SPKB_VOL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r25 Speaker B Volume */</span>
	<span class="p">{</span> <span class="n">CS42L52_ADC_PCM_MIXER</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r26 Channel Mixer and Swap */</span>
	<span class="p">{</span> <span class="n">CS42L52_LIMITER_CTL1</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r27 Limit Ctl 1 Thresholds */</span>
	<span class="p">{</span> <span class="n">CS42L52_LIMITER_CTL2</span><span class="p">,</span> <span class="mh">0x7F</span> <span class="p">},</span>	<span class="cm">/* r28 Limit Ctl 2 Release Rate */</span>
	<span class="p">{</span> <span class="n">CS42L52_LIMITER_AT_RATE</span><span class="p">,</span> <span class="mh">0xC0</span> <span class="p">},</span>	<span class="cm">/* r29 Limiter Attack Rate */</span>
	<span class="p">{</span> <span class="n">CS42L52_ALC_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r2A ALC Ctl 1 Attack Rate */</span>
	<span class="p">{</span> <span class="n">CS42L52_ALC_RATE</span><span class="p">,</span> <span class="mh">0x3F</span> <span class="p">},</span>	<span class="cm">/* r2B ALC Release Rate */</span>
	<span class="p">{</span> <span class="n">CS42L52_ALC_THRESHOLD</span><span class="p">,</span> <span class="mh">0x3f</span> <span class="p">},</span>	<span class="cm">/* r2C ALC Thresholds */</span>
	<span class="p">{</span> <span class="n">CS42L52_NOISE_GATE_CTL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r2D Noise Gate Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_CLK_STATUS</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r2E Overflow and Clock Status */</span>
	<span class="p">{</span> <span class="n">CS42L52_BATT_COMPEN</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r2F battery Compensation */</span>
	<span class="p">{</span> <span class="n">CS42L52_BATT_LEVEL</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r30 VP Battery Level */</span>
	<span class="p">{</span> <span class="n">CS42L52_SPK_STATUS</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r31 Speaker Status */</span>
	<span class="p">{</span> <span class="n">CS42L52_TEM_CTL</span><span class="p">,</span> <span class="mh">0x3B</span> <span class="p">},</span>	<span class="cm">/* r32 Temp Ctl */</span>
	<span class="p">{</span> <span class="n">CS42L52_THE_FOLDBACK</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>	<span class="cm">/* r33 Foldback */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">bool</span> <span class="nf">cs42l52_readable_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">reg</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CS42L52_CHIP</span>:
	<span class="k">case</span> <span class="n">CS42L52_PWRCTL1</span>:
	<span class="k">case</span> <span class="n">CS42L52_PWRCTL2</span>:
	<span class="k">case</span> <span class="n">CS42L52_PWRCTL3</span>:
	<span class="k">case</span> <span class="n">CS42L52_CLK_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_IFACE_CTL1</span>:
	<span class="k">case</span> <span class="n">CS42L52_IFACE_CTL2</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADC_PGA_A</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADC_PGA_B</span>:
	<span class="k">case</span> <span class="n">CS42L52_ANALOG_HPF_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADC_HPF_FREQ</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADC_MISC_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PB_CTL1</span>:
	<span class="k">case</span> <span class="n">CS42L52_MISC_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PB_CTL2</span>:
	<span class="k">case</span> <span class="n">CS42L52_MICA_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_MICB_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PGAA_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PGAB_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PASSTHRUA_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PASSTHRUB_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADCA_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADCB_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADCA_MIXER_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADCB_MIXER_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PCMA_MIXER_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_PCMB_MIXER_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_BEEP_FREQ</span>:
	<span class="k">case</span> <span class="n">CS42L52_BEEP_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_BEEP_TONE_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_TONE_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_MASTERA_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_MASTERB_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_HPA_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_HPB_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_SPKA_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_SPKB_VOL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ADC_PCM_MIXER</span>:
	<span class="k">case</span> <span class="n">CS42L52_LIMITER_CTL1</span>:
	<span class="k">case</span> <span class="n">CS42L52_LIMITER_CTL2</span>:
	<span class="k">case</span> <span class="n">CS42L52_LIMITER_AT_RATE</span>:
	<span class="k">case</span> <span class="n">CS42L52_ALC_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_ALC_RATE</span>:
	<span class="k">case</span> <span class="n">CS42L52_ALC_THRESHOLD</span>:
	<span class="k">case</span> <span class="n">CS42L52_NOISE_GATE_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_CLK_STATUS</span>:
	<span class="k">case</span> <span class="n">CS42L52_BATT_COMPEN</span>:
	<span class="k">case</span> <span class="n">CS42L52_BATT_LEVEL</span>:
	<span class="k">case</span> <span class="n">CS42L52_SPK_STATUS</span>:
	<span class="k">case</span> <span class="n">CS42L52_TEM_CTL</span>:
	<span class="k">case</span> <span class="n">CS42L52_THE_FOLDBACK</span>:
	<span class="k">case</span> <span class="n">CS42L52_CHARGE_PUMP</span>:
		<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">bool</span> <span class="nf">cs42l52_volatile_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">reg</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">CS42L52_IFACE_CTL2</span>:
	<span class="k">case</span> <span class="n">CS42L52_CLK_STATUS</span>:
	<span class="k">case</span> <span class="n">CS42L52_BATT_LEVEL</span>:
	<span class="k">case</span> <span class="n">CS42L52_SPK_STATUS</span>:
	<span class="k">case</span> <span class="n">CS42L52_CHARGE_PUMP</span>:
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">hl_tlv</span><span class="p">,</span> <span class="o">-</span><span class="mi">10200</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">hpd_tlv</span><span class="p">,</span> <span class="o">-</span><span class="mi">9600</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">static</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">ipd_tlv</span><span class="p">,</span> <span class="o">-</span><span class="mi">9600</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">mic_tlv</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="n">DECLARE_TLV_DB_SCALE</span><span class="p">(</span><span class="n">pga_tlv</span><span class="p">,</span> <span class="o">-</span><span class="mi">600</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">limiter_tlv</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">TLV_DB_RANGE_HEAD</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
	<span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">TLV_DB_SCALE_ITEM</span><span class="p">(</span><span class="o">-</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cs42l52_adca_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Input1A&quot;</span><span class="p">,</span> <span class="s">&quot;Input2A&quot;</span><span class="p">,</span> <span class="s">&quot;Input3A&quot;</span><span class="p">,</span> <span class="s">&quot;Input4A&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Input Left&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cs42l52_adcb_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Input1B&quot;</span><span class="p">,</span> <span class="s">&quot;Input2B&quot;</span><span class="p">,</span> <span class="s">&quot;Input3B&quot;</span><span class="p">,</span> <span class="s">&quot;Input4B&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Input Right&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adca_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_adca_text</span><span class="p">),</span> <span class="n">cs42l52_adca_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adcb_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_adcb_text</span><span class="p">),</span> <span class="n">cs42l52_adcb_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adca_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Left ADC Input Capture Mux&quot;</span><span class="p">,</span> <span class="n">adca_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adcb_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Right ADC Input Capture Mux&quot;</span><span class="p">,</span> <span class="n">adcb_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">mic_bias_level_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;0.5 +VA&quot;</span><span class="p">,</span> <span class="s">&quot;0.6 +VA&quot;</span><span class="p">,</span> <span class="s">&quot;0.7 +VA&quot;</span><span class="p">,</span>
	<span class="s">&quot;0.8 +VA&quot;</span><span class="p">,</span> <span class="s">&quot;0.83 +VA&quot;</span><span class="p">,</span> <span class="s">&quot;0.91 +VA&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">mic_bias_level_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_IFACE_CTL1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">mic_bias_level_text</span><span class="p">),</span> <span class="n">mic_bias_level_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cs42l52_mic_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;Single&quot;</span><span class="p">,</span> <span class="s">&quot;Differential&quot;</span> <span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">mica_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_MICA_CTL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_mic_text</span><span class="p">),</span> <span class="n">cs42l52_mic_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">micb_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_MICB_CTL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_mic_text</span><span class="p">),</span> <span class="n">cs42l52_mic_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">mica_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Left Mic Input Capture Mux&quot;</span><span class="p">,</span> <span class="n">mica_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">micb_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Right Mic Input Capture Mux&quot;</span><span class="p">,</span> <span class="n">micb_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">digital_output_mux_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;ADC&quot;</span><span class="p">,</span> <span class="s">&quot;DSP&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">digital_output_mux_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_MISC_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">digital_output_mux_text</span><span class="p">),</span>
			<span class="n">digital_output_mux_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">digital_output_mux</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Digital Output Mux&quot;</span><span class="p">,</span> <span class="n">digital_output_mux_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">hp_gain_num_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;0.3959&quot;</span><span class="p">,</span> <span class="s">&quot;0.4571&quot;</span><span class="p">,</span> <span class="s">&quot;0.5111&quot;</span><span class="p">,</span> <span class="s">&quot;0.6047&quot;</span><span class="p">,</span>
	<span class="s">&quot;0.7099&quot;</span><span class="p">,</span> <span class="s">&quot;0.8399&quot;</span><span class="p">,</span> <span class="s">&quot;1.000&quot;</span><span class="p">,</span> <span class="s">&quot;1.1430&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">hp_gain_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_PB_CTL1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">hp_gain_num_text</span><span class="p">),</span> <span class="n">hp_gain_num_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">beep_pitch_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;C4&quot;</span><span class="p">,</span> <span class="s">&quot;C5&quot;</span><span class="p">,</span> <span class="s">&quot;D5&quot;</span><span class="p">,</span> <span class="s">&quot;E5&quot;</span><span class="p">,</span> <span class="s">&quot;F5&quot;</span><span class="p">,</span> <span class="s">&quot;G5&quot;</span><span class="p">,</span> <span class="s">&quot;A5&quot;</span><span class="p">,</span> <span class="s">&quot;B5&quot;</span><span class="p">,</span>
	<span class="s">&quot;C6&quot;</span><span class="p">,</span> <span class="s">&quot;D6&quot;</span><span class="p">,</span> <span class="s">&quot;E6&quot;</span><span class="p">,</span> <span class="s">&quot;F6&quot;</span><span class="p">,</span> <span class="s">&quot;G6&quot;</span><span class="p">,</span> <span class="s">&quot;A6&quot;</span><span class="p">,</span> <span class="s">&quot;B6&quot;</span><span class="p">,</span> <span class="s">&quot;C7&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">beep_pitch_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_BEEP_FREQ</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_pitch_text</span><span class="p">),</span> <span class="n">beep_pitch_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">beep_ontime_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;86 ms&quot;</span><span class="p">,</span> <span class="s">&quot;430 ms&quot;</span><span class="p">,</span> <span class="s">&quot;780 ms&quot;</span><span class="p">,</span> <span class="s">&quot;1.20 s&quot;</span><span class="p">,</span> <span class="s">&quot;1.50 s&quot;</span><span class="p">,</span>
	<span class="s">&quot;1.80 s&quot;</span><span class="p">,</span> <span class="s">&quot;2.20 s&quot;</span><span class="p">,</span> <span class="s">&quot;2.50 s&quot;</span><span class="p">,</span> <span class="s">&quot;2.80 s&quot;</span><span class="p">,</span> <span class="s">&quot;3.20 s&quot;</span><span class="p">,</span>
	<span class="s">&quot;3.50 s&quot;</span><span class="p">,</span> <span class="s">&quot;3.80 s&quot;</span><span class="p">,</span> <span class="s">&quot;4.20 s&quot;</span><span class="p">,</span> <span class="s">&quot;4.50 s&quot;</span><span class="p">,</span> <span class="s">&quot;4.80 s&quot;</span><span class="p">,</span> <span class="s">&quot;5.20 s&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">beep_ontime_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_BEEP_FREQ</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_ontime_text</span><span class="p">),</span> <span class="n">beep_ontime_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">beep_offtime_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;1.23 s&quot;</span><span class="p">,</span> <span class="s">&quot;2.58 s&quot;</span><span class="p">,</span> <span class="s">&quot;3.90 s&quot;</span><span class="p">,</span> <span class="s">&quot;5.20 s&quot;</span><span class="p">,</span>
	<span class="s">&quot;6.60 s&quot;</span><span class="p">,</span> <span class="s">&quot;8.05 s&quot;</span><span class="p">,</span> <span class="s">&quot;9.35 s&quot;</span><span class="p">,</span> <span class="s">&quot;10.80 s&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">beep_offtime_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_BEEP_VOL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_offtime_text</span><span class="p">),</span> <span class="n">beep_offtime_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">beep_config_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Off&quot;</span><span class="p">,</span> <span class="s">&quot;Single&quot;</span><span class="p">,</span> <span class="s">&quot;Multiple&quot;</span><span class="p">,</span> <span class="s">&quot;Continuous&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">beep_config_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_config_text</span><span class="p">),</span> <span class="n">beep_config_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">beep_bass_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;50 Hz&quot;</span><span class="p">,</span> <span class="s">&quot;100 Hz&quot;</span><span class="p">,</span> <span class="s">&quot;200 Hz&quot;</span><span class="p">,</span> <span class="s">&quot;250 Hz&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">beep_bass_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_bass_text</span><span class="p">),</span> <span class="n">beep_bass_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">beep_treble_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;5 kHz&quot;</span><span class="p">,</span> <span class="s">&quot;7 kHz&quot;</span><span class="p">,</span> <span class="s">&quot;10 kHz&quot;</span><span class="p">,</span> <span class="s">&quot; 15 kHz&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">beep_treble_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
			<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_treble_text</span><span class="p">),</span> <span class="n">beep_treble_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">ng_threshold_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;-34dB&quot;</span><span class="p">,</span> <span class="s">&quot;-37dB&quot;</span><span class="p">,</span> <span class="s">&quot;-40dB&quot;</span><span class="p">,</span> <span class="s">&quot;-43dB&quot;</span><span class="p">,</span>
	<span class="s">&quot;-46dB&quot;</span><span class="p">,</span> <span class="s">&quot;-52dB&quot;</span><span class="p">,</span> <span class="s">&quot;-58dB&quot;</span><span class="p">,</span> <span class="s">&quot;-64dB&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">ng_threshold_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_NOISE_GATE_CTL</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">ng_threshold_text</span><span class="p">),</span> <span class="n">ng_threshold_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cs42l52_ng_delay_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;50ms&quot;</span><span class="p">,</span> <span class="s">&quot;100ms&quot;</span><span class="p">,</span> <span class="s">&quot;150ms&quot;</span><span class="p">,</span> <span class="s">&quot;200ms&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">ng_delay_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_NOISE_GATE_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_ng_delay_text</span><span class="p">),</span> <span class="n">cs42l52_ng_delay_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cs42l52_ng_type_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Apply Specific&quot;</span><span class="p">,</span> <span class="s">&quot;Apply All&quot;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">ng_type_enum</span> <span class="o">=</span>
	<span class="n">SOC_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_NOISE_GATE_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_ng_type_text</span><span class="p">),</span> <span class="n">cs42l52_ng_type_text</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">left_swap_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Left&quot;</span><span class="p">,</span> <span class="s">&quot;LR 2&quot;</span><span class="p">,</span> <span class="s">&quot;Right&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="k">const</span> <span class="n">right_swap_text</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">&quot;Right&quot;</span><span class="p">,</span> <span class="s">&quot;LR 2&quot;</span><span class="p">,</span> <span class="s">&quot;Left&quot;</span><span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">swap_values</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adca_swap_enum</span> <span class="o">=</span>
	<span class="n">SOC_VALUE_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_PCM_MIXER</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			      <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">left_swap_text</span><span class="p">),</span>
			      <span class="n">left_swap_text</span><span class="p">,</span>
			      <span class="n">swap_values</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adca_mixer</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Route&quot;</span><span class="p">,</span> <span class="n">adca_swap_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pcma_swap_enum</span> <span class="o">=</span>
	<span class="n">SOC_VALUE_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_PCM_MIXER</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			      <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">left_swap_text</span><span class="p">),</span>
			      <span class="n">left_swap_text</span><span class="p">,</span>
			      <span class="n">swap_values</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">pcma_mixer</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Route&quot;</span><span class="p">,</span> <span class="n">pcma_swap_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">adcb_swap_enum</span> <span class="o">=</span>
	<span class="n">SOC_VALUE_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_PCM_MIXER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			      <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">right_swap_text</span><span class="p">),</span>
			      <span class="n">right_swap_text</span><span class="p">,</span>
			      <span class="n">swap_values</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">adcb_mixer</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Route&quot;</span><span class="p">,</span> <span class="n">adcb_swap_enum</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">soc_enum</span> <span class="n">pcmb_swap_enum</span> <span class="o">=</span>
	<span class="n">SOC_VALUE_ENUM_SINGLE</span><span class="p">(</span><span class="n">CS42L52_ADC_PCM_MIXER</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
			      <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">right_swap_text</span><span class="p">),</span>
			      <span class="n">right_swap_text</span><span class="p">,</span>
			      <span class="n">swap_values</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">pcmb_mixer</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_ENUM</span><span class="p">(</span><span class="s">&quot;Route&quot;</span><span class="p">,</span> <span class="n">pcmb_swap_enum</span><span class="p">);</span>


<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">passthrul_ctl</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">passthrur_ctl</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">spkl_ctl</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">spkr_ctl</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">hpl_ctl</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">hpr_ctl</span> <span class="o">=</span>
	<span class="n">SOC_DAPM_SINGLE</span><span class="p">(</span><span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_kcontrol_new</span> <span class="n">cs42l52_snd_controls</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;Master Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_MASTERA_VOL</span><span class="p">,</span>
			      <span class="n">CS42L52_MASTERB_VOL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xE4</span><span class="p">,</span> <span class="n">hl_tlv</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;Headphone Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_HPA_VOL</span><span class="p">,</span>
			      <span class="n">CS42L52_HPB_VOL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mh">0xCC</span><span class="p">,</span> <span class="n">hpd_tlv</span><span class="p">),</span>

	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Headphone Analog Gain&quot;</span><span class="p">,</span> <span class="n">hp_gain_enum</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;Speaker Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_SPKA_VOL</span><span class="p">,</span>
			      <span class="n">CS42L52_SPKB_VOL</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mh">0x1</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="n">hl_tlv</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;Bypass Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_PASSTHRUA_VOL</span><span class="p">,</span>
			      <span class="n">CS42L52_PASSTHRUB_VOL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x90</span><span class="p">,</span> <span class="n">pga_tlv</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE</span><span class="p">(</span><span class="s">&quot;Bypass Mute&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_TLV</span><span class="p">(</span><span class="s">&quot;MIC Gain Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_MICA_CTL</span><span class="p">,</span>
			      <span class="n">CS42L52_MICB_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mic_tlv</span><span class="p">),</span>

	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;MIC Bias Level&quot;</span><span class="p">,</span> <span class="n">mic_bias_level_enum</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;ADC Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADCA_VOL</span><span class="p">,</span>
			      <span class="n">CS42L52_ADCB_VOL</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">,</span> <span class="mh">0xA0</span><span class="p">,</span> <span class="n">ipd_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;ADC Mixer Volume&quot;</span><span class="p">,</span>
			     <span class="n">CS42L52_ADCA_MIXER_VOL</span><span class="p">,</span> <span class="n">CS42L52_ADCB_MIXER_VOL</span><span class="p">,</span>
				<span class="mi">6</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="n">ipd_tlv</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE</span><span class="p">(</span><span class="s">&quot;ADC Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_MISC_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R</span><span class="p">(</span><span class="s">&quot;ADC Mixer Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADCA_MIXER_VOL</span><span class="p">,</span>
		     <span class="n">CS42L52_ADCB_MIXER_VOL</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;PGA Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_PGAA_CTL</span><span class="p">,</span>
			    <span class="n">CS42L52_PGAB_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x30</span><span class="p">,</span> <span class="n">pga_tlv</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R_SX_TLV</span><span class="p">(</span><span class="s">&quot;PCM Mixer Volume&quot;</span><span class="p">,</span>
			    <span class="n">CS42L52_PCMA_MIXER_VOL</span><span class="p">,</span> <span class="n">CS42L52_PCMB_MIXER_VOL</span><span class="p">,</span>
				<span class="mi">6</span><span class="p">,</span> <span class="mh">0x7f</span><span class="p">,</span> <span class="mh">0x19</span><span class="p">,</span> <span class="n">hl_tlv</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R</span><span class="p">(</span><span class="s">&quot;PCM Mixer Switch&quot;</span><span class="p">,</span>
		     <span class="n">CS42L52_PCMA_MIXER_VOL</span><span class="p">,</span> <span class="n">CS42L52_PCMB_MIXER_VOL</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Beep Config&quot;</span><span class="p">,</span> <span class="n">beep_config_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Beep Pitch&quot;</span><span class="p">,</span> <span class="n">beep_pitch_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Beep on Time&quot;</span><span class="p">,</span> <span class="n">beep_ontime_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Beep off Time&quot;</span><span class="p">,</span> <span class="n">beep_offtime_enum</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Beep Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_BEEP_VOL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x07</span><span class="p">,</span> <span class="n">hl_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Beep Mixer Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Beep Treble Corner Freq&quot;</span><span class="p">,</span> <span class="n">beep_treble_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;Beep Bass Corner Freq&quot;</span><span class="p">,</span> <span class="n">beep_bass_enum</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Tone Control Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Treble Gain Volume&quot;</span><span class="p">,</span>
			    <span class="n">CS42L52_TONE_CTL</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">hl_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Bass Gain Volume&quot;</span><span class="p">,</span>
			    <span class="n">CS42L52_TONE_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">hl_tlv</span><span class="p">),</span>

	<span class="cm">/* Limiter */</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Limiter Max Threshold Volume&quot;</span><span class="p">,</span>
		       <span class="n">CS42L52_LIMITER_CTL1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Limiter Cushion Threshold Volume&quot;</span><span class="p">,</span>
		       <span class="n">CS42L52_LIMITER_CTL1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Limiter Release Rate Volume&quot;</span><span class="p">,</span>
		       <span class="n">CS42L52_LIMITER_CTL2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;Limiter Attack Rate Volume&quot;</span><span class="p">,</span>
		       <span class="n">CS42L52_LIMITER_AT_RATE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Limiter SR Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_LIMITER_CTL1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Limiter ZC Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_LIMITER_CTL1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Limiter Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_LIMITER_CTL2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="cm">/* ALC */</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;ALC Attack Rate Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_ALC_CTL</span><span class="p">,</span>
		       <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;ALC Release Rate Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_ALC_RATE</span><span class="p">,</span>
		       <span class="mi">0</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;ALC Max Threshold Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_ALC_THRESHOLD</span><span class="p">,</span>
		       <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>
	<span class="n">SOC_SINGLE_TLV</span><span class="p">(</span><span class="s">&quot;ALC Min Threshold Volume&quot;</span><span class="p">,</span> <span class="n">CS42L52_ALC_THRESHOLD</span><span class="p">,</span>
		       <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">limiter_tlv</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE_R</span><span class="p">(</span><span class="s">&quot;ALC SR Capture Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_PGAA_CTL</span><span class="p">,</span>
		     <span class="n">CS42L52_PGAB_CTL</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE_R</span><span class="p">(</span><span class="s">&quot;ALC ZC Capture Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_PGAA_CTL</span><span class="p">,</span>
		     <span class="n">CS42L52_PGAB_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE</span><span class="p">(</span><span class="s">&quot;ALC Capture Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ALC_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="cm">/* Noise gate */</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;NG Type Switch&quot;</span><span class="p">,</span> <span class="n">ng_type_enum</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;NG Enable Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_NOISE_GATE_CTL</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;NG Boost Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_NOISE_GATE_CTL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;NG Threshold&quot;</span><span class="p">,</span> <span class="n">ng_threshold_enum</span><span class="p">),</span>
	<span class="n">SOC_ENUM</span><span class="p">(</span><span class="s">&quot;NG Delay&quot;</span><span class="p">,</span> <span class="n">ng_delay_enum</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE</span><span class="p">(</span><span class="s">&quot;HPF Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ANALOG_HPF_CTL</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_DOUBLE</span><span class="p">(</span><span class="s">&quot;Analog SR Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ANALOG_HPF_CTL</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_DOUBLE</span><span class="p">(</span><span class="s">&quot;Analog ZC Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ANALOG_HPF_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Digital SR Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Digital ZC Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Deemphasis Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Batt Compensation Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_BATT_COMPEN</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Batt VP Monitor Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_BATT_COMPEN</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;Batt VP ref&quot;</span><span class="p">,</span> <span class="n">CS42L52_BATT_COMPEN</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN1L Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN1R Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN2L Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN2R Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN3L Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN3R Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN4L Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA AIN4R Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA MICA Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_A</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SOC_SINGLE</span><span class="p">(</span><span class="s">&quot;PGA MICB Switch&quot;</span><span class="p">,</span> <span class="n">CS42L52_ADC_PGA_B</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_soc_dapm_widget</span> <span class="n">cs42l52_dapm_widgets</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>

	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN1L&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN1R&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN2L&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN2R&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN3L&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN3R&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN4L&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;AIN4R&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MICA&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_INPUT</span><span class="p">(</span><span class="s">&quot;MICB&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SIGGEN</span><span class="p">(</span><span class="s">&quot;Beep&quot;</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_AIF_OUT</span><span class="p">(</span><span class="s">&quot;AIFOUTL&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>
			<span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_AIF_OUT</span><span class="p">(</span><span class="s">&quot;AIFOUTR&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>
			<span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;MICA Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mica_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;MICB Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">micb_mux</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_ADC</span><span class="p">(</span><span class="s">&quot;ADC Left&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_ADC</span><span class="p">(</span><span class="s">&quot;ADC Right&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;PGA Left&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;PGA Right&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adca_mux</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adcb_mux</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADC Left Swap&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adca_mixer</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;ADC Right Swap&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adcb_mixer</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;Output Mux&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">digital_output_mux</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;PGA MICA&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_PGA</span><span class="p">(</span><span class="s">&quot;PGA MICB&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_SUPPLY</span><span class="p">(</span><span class="s">&quot;Mic Bias&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SUPPLY</span><span class="p">(</span><span class="s">&quot;Charge Pump&quot;</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_AIF_IN</span><span class="p">(</span><span class="s">&quot;AIFINL&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>
			<span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_AIF_IN</span><span class="p">(</span><span class="s">&quot;AIFINR&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>
			<span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_DAC</span><span class="p">(</span><span class="s">&quot;DAC Left&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_DAC</span><span class="p">(</span><span class="s">&quot;DAC Right&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;Bypass Left&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span>
			    <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">passthrul_ctl</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;Bypass Right&quot;</span><span class="p">,</span> <span class="n">CS42L52_MISC_CTL</span><span class="p">,</span>
			    <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">passthrur_ctl</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;PCM Left Swap&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pcma_mixer</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_MUX</span><span class="p">(</span><span class="s">&quot;PCM Right Swap&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span>
			 <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pcmb_mixer</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;HP Left Amp&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hpl_ctl</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;HP Right Amp&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hpr_ctl</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;SPK Left Amp&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spkl_ctl</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_SWITCH</span><span class="p">(</span><span class="s">&quot;SPK Right Amp&quot;</span><span class="p">,</span> <span class="n">SND_SOC_NOPM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">spkr_ctl</span><span class="p">),</span>

	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;HPOUTA&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;HPOUTB&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;SPKOUTA&quot;</span><span class="p">),</span>
	<span class="n">SND_SOC_DAPM_OUTPUT</span><span class="p">(</span><span class="s">&quot;SPKOUTB&quot;</span><span class="p">),</span>

<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">snd_soc_dapm_route</span> <span class="n">cs42l52_audio_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>

	<span class="p">{</span><span class="s">&quot;Capture&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;AIFOUTL&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Capture&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;AIFOUTL&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;AIFOUTL&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Output Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;AIFOUTR&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Output Mux&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;Output Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADC&quot;</span><span class="p">,</span> <span class="s">&quot;ADC Left&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Output Mux&quot;</span><span class="p">,</span> <span class="s">&quot;ADC&quot;</span><span class="p">,</span> <span class="s">&quot;ADC Right&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;ADC Left&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Charge Pump&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Charge Pump&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;Charge Pump&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ADC Left Mux&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Charge Pump&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;ADC Right Mux&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input1A&quot;</span><span class="p">,</span> <span class="s">&quot;AIN1L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input1B&quot;</span><span class="p">,</span> <span class="s">&quot;AIN1R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input2A&quot;</span><span class="p">,</span> <span class="s">&quot;AIN2L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input2B&quot;</span><span class="p">,</span> <span class="s">&quot;AIN2R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input3A&quot;</span><span class="p">,</span> <span class="s">&quot;AIN3L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input3B&quot;</span><span class="p">,</span> <span class="s">&quot;AIN3R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input4A&quot;</span><span class="p">,</span> <span class="s">&quot;AIN4L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;Input4B&quot;</span><span class="p">,</span> <span class="s">&quot;AIN4R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Left Mux&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Input Left&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Left&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;ADC Right Mux&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Input Right&quot;</span> <span class="p">,</span> <span class="s">&quot;PGA Right&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;PGA Left&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN1L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Right&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN1R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Left&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN2L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Right&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN2R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Left&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN3L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Right&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN3R&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Left&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN4L&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA Right&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;AIN4R&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;PGA Left&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;PGA MICA&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA MICA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MICA&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;PGA Right&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;PGA MICB&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;PGA MICB&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;MICB&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;HPOUTA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;HP Left Amp&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;HPOUTB&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;HP Right Amp&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;HP Left Amp&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Bypass Left&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;HP Right Amp&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Bypass Right&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Bypass Left&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Left&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Bypass Right&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;PGA Right&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;HP Left Amp&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;DAC Left&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;HP Right Amp&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;DAC Right&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;SPKOUTA&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;SPK Left Amp&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;SPKOUTB&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;SPK Right Amp&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;SPK Left Amp&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Beep&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;SPK Right Amp&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Beep&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;SPK Left Amp&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;SPK Right Amp&quot;</span><span class="p">,</span> <span class="s">&quot;Switch&quot;</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;DAC Left&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Beep&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC Right&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Beep&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC Left&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;DAC Right&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;Output Mux&quot;</span><span class="p">,</span> <span class="s">&quot;DSP&quot;</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;Output Mux&quot;</span><span class="p">,</span> <span class="s">&quot;DSP&quot;</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>

	<span class="p">{</span><span class="s">&quot;AIFINL&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="s">&quot;AIFINR&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;Playback&quot;</span><span class="p">},</span>

<span class="p">};</span>

<span class="k">struct</span> <span class="n">cs42l52_clk_para</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">mclk</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">rate</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">speed</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">group</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">videoclk</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">ratio</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mclkdiv2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">cs42l52_clk_para</span> <span class="n">clk_map_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/*8k*/</span>
	<span class="p">{</span><span class="mi">12288000</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">18432000</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">12000000</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">24000000</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">27000000</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_27M_MCLK</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>

	<span class="cm">/*11.025k*/</span>
	<span class="p">{</span><span class="mi">11289600</span><span class="p">,</span> <span class="mi">11025</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">16934400</span><span class="p">,</span> <span class="mi">11025</span><span class="p">,</span> <span class="n">CLK_QS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>

	<span class="cm">/*16k*/</span>
	<span class="p">{</span><span class="mi">12288000</span><span class="p">,</span> <span class="mi">16000</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">18432000</span><span class="p">,</span> <span class="mi">16000</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">12000000</span><span class="p">,</span> <span class="mi">16000</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">24000000</span><span class="p">,</span> <span class="mi">16000</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">27000000</span><span class="p">,</span> <span class="mi">16000</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_27M_MCLK</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>

	<span class="cm">/*22.05k*/</span>
	<span class="p">{</span><span class="mi">11289600</span><span class="p">,</span> <span class="mi">22050</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">16934400</span><span class="p">,</span> <span class="mi">22050</span><span class="p">,</span> <span class="n">CLK_HS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>

	<span class="cm">/* 32k */</span>
	<span class="p">{</span><span class="mi">12288000</span><span class="p">,</span> <span class="mi">32000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">18432000</span><span class="p">,</span> <span class="mi">32000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">12000000</span><span class="p">,</span> <span class="mi">32000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">24000000</span><span class="p">,</span> <span class="mi">32000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">27000000</span><span class="p">,</span> <span class="mi">32000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_32K</span><span class="p">,</span> <span class="n">CLK_27M_MCLK</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>

	<span class="cm">/* 44.1k */</span>
	<span class="p">{</span><span class="mi">11289600</span><span class="p">,</span> <span class="mi">44100</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">16934400</span><span class="p">,</span> <span class="mi">44100</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>

	<span class="cm">/* 48k */</span>
	<span class="p">{</span><span class="mi">12288000</span><span class="p">,</span> <span class="mi">48000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">18432000</span><span class="p">,</span> <span class="mi">48000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">12000000</span><span class="p">,</span> <span class="mi">48000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">24000000</span><span class="p">,</span> <span class="mi">48000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">27000000</span><span class="p">,</span> <span class="mi">48000</span><span class="p">,</span> <span class="n">CLK_SS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_27M_MCLK</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>

	<span class="cm">/* 88.2k */</span>
	<span class="p">{</span><span class="mi">11289600</span><span class="p">,</span> <span class="mi">88200</span><span class="p">,</span> <span class="n">CLK_DS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">16934400</span><span class="p">,</span> <span class="mi">88200</span><span class="p">,</span> <span class="n">CLK_DS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>

	<span class="cm">/* 96k */</span>
	<span class="p">{</span><span class="mi">12288000</span><span class="p">,</span> <span class="mi">96000</span><span class="p">,</span> <span class="n">CLK_DS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">18432000</span><span class="p">,</span> <span class="mi">96000</span><span class="p">,</span> <span class="n">CLK_DS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_128</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">12000000</span><span class="p">,</span> <span class="mi">96000</span><span class="p">,</span> <span class="n">CLK_DS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">{</span><span class="mi">24000000</span><span class="p">,</span> <span class="mi">96000</span><span class="p">,</span> <span class="n">CLK_DS_MODE</span><span class="p">,</span> <span class="n">CLK_NO_32K</span><span class="p">,</span> <span class="n">CLK_NO_27M</span><span class="p">,</span> <span class="n">CLK_R_125</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_get_clk</span><span class="p">(</span><span class="kt">int</span> <span class="n">mclk</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rate</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u_int</span> <span class="n">mclk1</span><span class="p">,</span> <span class="n">mclk2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">clk_map_table</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">clk_map_table</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">rate</span> <span class="o">==</span> <span class="n">rate</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">mclk1</span> <span class="o">=</span> <span class="n">clk_map_table</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">mclk</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">mclk</span> <span class="o">-</span> <span class="n">mclk1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">abs</span><span class="p">(</span><span class="n">mclk</span> <span class="o">-</span> <span class="n">mclk2</span><span class="p">))</span> <span class="p">{</span>
				<span class="n">mclk2</span> <span class="o">=</span> <span class="n">mclk1</span><span class="p">;</span>
				<span class="n">ret</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&gt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">clk_map_table</span><span class="p">))</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_set_sysclk</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">codec_dai</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">clk_id</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">freq</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec_dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">freq</span> <span class="o">&gt;=</span> <span class="n">CS42L52_MIN_CLK</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">freq</span> <span class="o">&lt;=</span> <span class="n">CS42L52_MAX_CLK</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">sysclk</span> <span class="o">=</span> <span class="n">freq</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Invalid freq paramter</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_set_fmt</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">codec_dai</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">codec_dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">iface</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_MASTER_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBM_CFM</span>:
		<span class="n">iface</span> <span class="o">=</span> <span class="n">CS42L52_IFACE_CTL1_MASTER</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_CBS_CFS</span>:
		<span class="n">iface</span> <span class="o">=</span> <span class="n">CS42L52_IFACE_CTL1_SLAVE</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	 <span class="cm">/* interface format */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_FORMAT_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_I2S</span>:
		<span class="n">iface</span> <span class="o">|=</span> <span class="n">CS42L52_IFACE_CTL1_ADC_FMT_I2S</span> <span class="o">|</span>
				<span class="n">CS42L52_IFACE_CTL1_DAC_FMT_I2S</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_RIGHT_J</span>:
		<span class="n">iface</span> <span class="o">|=</span> <span class="n">CS42L52_IFACE_CTL1_DAC_FMT_RIGHT_J</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_LEFT_J</span>:
		<span class="n">iface</span> <span class="o">|=</span> <span class="n">CS42L52_IFACE_CTL1_ADC_FMT_LEFT_J</span> <span class="o">|</span>
				<span class="n">CS42L52_IFACE_CTL1_DAC_FMT_LEFT_J</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_DSP_A</span>:
		<span class="n">iface</span> <span class="o">|=</span> <span class="n">CS42L52_IFACE_CTL1_DSP_MODE_EN</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_DSP_B</span>:
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* clock inversion */</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">fmt</span> <span class="o">&amp;</span> <span class="n">SND_SOC_DAIFMT_INV_MASK</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_NB_NF</span>:
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_IB_IF</span>:
		<span class="n">iface</span> <span class="o">|=</span> <span class="n">CS42L52_IFACE_CTL1_INV_SCLK</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_IB_NF</span>:
		<span class="n">iface</span> <span class="o">|=</span> <span class="n">CS42L52_IFACE_CTL1_INV_SCLK</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_DAIFMT_NB_IF</span>:
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">iface</span><span class="p">;</span>
	<span class="n">snd_soc_write</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_IFACE_CTL1</span><span class="p">,</span> <span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">.</span><span class="n">format</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_digital_mute</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">dai</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mute</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">mute</span><span class="p">)</span>
		<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_PB_CTL1</span><span class="p">,</span>
				    <span class="n">CS42L52_PB_CTL1_MUTE_MASK</span><span class="p">,</span>
				<span class="n">CS42L52_PB_CTL1_MUTE</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_PB_CTL1</span><span class="p">,</span>
				    <span class="n">CS42L52_PB_CTL1_MUTE_MASK</span><span class="p">,</span>
				<span class="n">CS42L52_PB_CTL1_UNMUTE</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_pcm_hw_params</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">substream</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">snd_pcm_hw_params</span> <span class="o">*</span><span class="n">params</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">snd_soc_dai</span> <span class="o">*</span><span class="n">dai</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">dai</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="n">u32</span> <span class="n">clk</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">index</span><span class="p">;</span>

	<span class="n">index</span> <span class="o">=</span> <span class="n">cs42l52_get_clk</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">sysclk</span><span class="p">,</span> <span class="n">params_rate</span><span class="p">(</span><span class="n">params</span><span class="p">));</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">sysclk</span> <span class="o">=</span> <span class="n">clk_map_table</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">mclk</span><span class="p">;</span>

		<span class="n">clk</span> <span class="o">|=</span> <span class="p">(</span><span class="n">clk_map_table</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">speed</span> <span class="o">&lt;&lt;</span> <span class="n">CLK_SPEED_SHIFT</span><span class="p">)</span> <span class="o">|</span>
		<span class="p">(</span><span class="n">clk_map_table</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">group</span> <span class="o">&lt;&lt;</span> <span class="n">CLK_32K_SR_SHIFT</span><span class="p">)</span> <span class="o">|</span>
		<span class="p">(</span><span class="n">clk_map_table</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">videoclk</span> <span class="o">&lt;&lt;</span> <span class="n">CLK_27M_MCLK_SHIFT</span><span class="p">)</span> <span class="o">|</span>
		<span class="p">(</span><span class="n">clk_map_table</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">ratio</span> <span class="o">&lt;&lt;</span> <span class="n">CLK_RATIO_SHIFT</span><span class="p">)</span> <span class="o">|</span>
		<span class="n">clk_map_table</span><span class="p">[</span><span class="n">index</span><span class="p">].</span><span class="n">mclkdiv2</span><span class="p">;</span>

		<span class="n">snd_soc_write</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_CLK_CTL</span><span class="p">,</span> <span class="n">clk</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;can&#39;t get correct mclk</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_set_bias_level</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">,</span>
					<span class="k">enum</span> <span class="n">snd_soc_bias_level</span> <span class="n">level</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">level</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_SOC_BIAS_ON</span>:
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_BIAS_PREPARE</span>:
		<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span>
				    <span class="n">CS42L52_PWRCTL1_PDN_CODEC</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_BIAS_STANDBY</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dapm</span><span class="p">.</span><span class="n">bias_level</span> <span class="o">==</span> <span class="n">SND_SOC_BIAS_OFF</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">regcache_cache_only</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
			<span class="n">regcache_sync</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">snd_soc_write</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1_PDN_ALL</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_SOC_BIAS_OFF</span>:
		<span class="n">snd_soc_write</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1</span><span class="p">,</span> <span class="n">CS42L52_PWRCTL1_PDN_ALL</span><span class="p">);</span>
		<span class="n">regcache_cache_only</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">codec</span><span class="o">-&gt;</span><span class="n">dapm</span><span class="p">.</span><span class="n">bias_level</span> <span class="o">=</span> <span class="n">level</span><span class="p">;</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define CS42L52_RATES (SNDRV_PCM_RATE_8000_96000)</span>

<span class="cp">#define CS42L52_FORMATS (SNDRV_PCM_FMTBIT_S16_LE | SNDRV_PCM_FMTBIT_U16_LE | \</span>
<span class="cp">			SNDRV_PCM_FMTBIT_S18_3LE | SNDRV_PCM_FMTBIT_U18_3LE | \</span>
<span class="cp">			SNDRV_PCM_FMTBIT_S20_3LE | SNDRV_PCM_FMTBIT_U20_3LE | \</span>
<span class="cp">			SNDRV_PCM_FMTBIT_S24_LE | SNDRV_PCM_FMTBIT_U24_LE)</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">snd_soc_dai_ops</span> <span class="n">cs42l52_ops</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">hw_params</span>	<span class="o">=</span> <span class="n">cs42l52_pcm_hw_params</span><span class="p">,</span>
	<span class="p">.</span><span class="n">digital_mute</span>	<span class="o">=</span> <span class="n">cs42l52_digital_mute</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_fmt</span>	<span class="o">=</span> <span class="n">cs42l52_set_fmt</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_sysclk</span>	<span class="o">=</span> <span class="n">cs42l52_set_sysclk</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">snd_soc_dai_driver</span> <span class="n">cs42l52_dai</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;cs42l52&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">playback</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">stream_name</span> <span class="o">=</span> <span class="s">&quot;Playback&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_min</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_max</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">rates</span> <span class="o">=</span> <span class="n">CS42L52_RATES</span><span class="p">,</span>
			<span class="p">.</span><span class="n">formats</span> <span class="o">=</span> <span class="n">CS42L52_FORMATS</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">.</span><span class="n">capture</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">stream_name</span> <span class="o">=</span> <span class="s">&quot;Capture&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_min</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">channels_max</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
			<span class="p">.</span><span class="n">rates</span> <span class="o">=</span> <span class="n">CS42L52_RATES</span><span class="p">,</span>
			<span class="p">.</span><span class="n">formats</span> <span class="o">=</span> <span class="n">CS42L52_FORMATS</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">.</span><span class="n">ops</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cs42l52_ops</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">cs42l52_set_bias_level</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">SND_SOC_BIAS_OFF</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">cs42l52_set_bias_level</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">SND_SOC_BIAS_STANDBY</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#if defined(CONFIG_INPUT) || defined(CONFIG_INPUT_MODULE)</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">beep_rates</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mi">261</span><span class="p">,</span> <span class="mi">522</span><span class="p">,</span> <span class="mi">585</span><span class="p">,</span> <span class="mi">667</span><span class="p">,</span> <span class="mi">706</span><span class="p">,</span> <span class="mi">774</span><span class="p">,</span> <span class="mi">889</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span>
	<span class="mi">1043</span><span class="p">,</span> <span class="mi">1200</span><span class="p">,</span> <span class="mi">1333</span><span class="p">,</span> <span class="mi">1412</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1714</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2182</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">cs42l52_beep_work</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span>
		<span class="n">container_of</span><span class="p">(</span><span class="n">work</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cs42l52_private</span><span class="p">,</span> <span class="n">beep_work</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">codec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_soc_dapm_context</span> <span class="o">*</span><span class="n">dapm</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dapm</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">best</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_rate</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">beep_rates</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_rate</span> <span class="o">-</span> <span class="n">beep_rates</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span>
			    <span class="n">abs</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_rate</span> <span class="o">-</span> <span class="n">beep_rates</span><span class="p">[</span><span class="n">best</span><span class="p">]))</span>
				<span class="n">best</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="n">dev_dbg</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Set beep rate %dHz for requested %dHz</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">beep_rates</span><span class="p">[</span><span class="n">best</span><span class="p">],</span> <span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_rate</span><span class="p">);</span>

		<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">best</span> <span class="o">&lt;&lt;</span> <span class="n">CS42L52_BEEP_RATE_SHIFT</span><span class="p">);</span>

		<span class="n">snd_soc_dapm_enable_pin</span><span class="p">(</span><span class="n">dapm</span><span class="p">,</span> <span class="s">&quot;Beep&quot;</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">dev_dbg</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Disabling beep</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">snd_soc_dapm_disable_pin</span><span class="p">(</span><span class="n">dapm</span><span class="p">,</span> <span class="s">&quot;Beep&quot;</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_BEEP_FREQ</span><span class="p">,</span>
			    <span class="n">CS42L52_BEEP_RATE_MASK</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>

	<span class="n">snd_soc_dapm_sync</span><span class="p">(</span><span class="n">dapm</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* For usability define a way of injecting beep events for the device -</span>
<span class="cm"> * many systems will not have a keyboard.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_beep_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">input_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">code</span><span class="p">,</span> <span class="kt">int</span> <span class="n">hz</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span> <span class="o">=</span> <span class="n">input_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="n">dev_dbg</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Beep event %x %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">hz</span><span class="p">);</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">SND_BELL</span>:
		<span class="k">if</span> <span class="p">(</span><span class="n">hz</span><span class="p">)</span>
			<span class="n">hz</span> <span class="o">=</span> <span class="mi">261</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SND_TONE</span>:
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* Kick the beep from a workqueue */</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_rate</span> <span class="o">=</span> <span class="n">hz</span><span class="p">;</span>
	<span class="n">schedule_work</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_work</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">ssize_t</span> <span class="nf">cs42l52_beep_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">device_attribute</span> <span class="o">*</span><span class="n">attr</span><span class="p">,</span>
			       <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">long</span> <span class="kt">int</span> <span class="n">time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">kstrtol</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">input_event</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="p">,</span> <span class="n">EV_SND</span><span class="p">,</span> <span class="n">SND_TONE</span><span class="p">,</span> <span class="n">time</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">count</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">DEVICE_ATTR</span><span class="p">(</span><span class="n">beep</span><span class="p">,</span> <span class="mo">0200</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">cs42l52_beep_set</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">cs42l52_init_beep</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span> <span class="o">=</span> <span class="n">input_allocate_device</span><span class="p">();</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to allocate beep device</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">INIT_WORK</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_work</span><span class="p">,</span> <span class="n">cs42l52_beep_work</span><span class="p">);</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_rate</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;CS42L52 Beep Generator&quot;</span><span class="p">;</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">phys</span> <span class="o">=</span> <span class="n">dev_name</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">id</span><span class="p">.</span><span class="n">bustype</span> <span class="o">=</span> <span class="n">BUS_I2C</span><span class="p">;</span>

	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">evbit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">BIT_MASK</span><span class="p">(</span><span class="n">EV_SND</span><span class="p">);</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">sndbit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">BIT_MASK</span><span class="p">(</span><span class="n">SND_BELL</span><span class="p">)</span> <span class="o">|</span> <span class="n">BIT_MASK</span><span class="p">(</span><span class="n">SND_TONE</span><span class="p">);</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">event</span> <span class="o">=</span> <span class="n">cs42l52_beep_event</span><span class="p">;</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">input_set_drvdata</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="p">,</span> <span class="n">codec</span><span class="p">);</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">input_register_device</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">input_free_device</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="p">);</span>
		<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to register beep device</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">device_create_file</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev_attr_beep</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to create keyclick file: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">ret</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">cs42l52_free_beep</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="n">device_remove_file</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dev_attr_beep</span><span class="p">);</span>
	<span class="n">input_unregister_device</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span><span class="p">);</span>
	<span class="n">cancel_work_sync</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep_work</span><span class="p">);</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">beep</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>

	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_BEEP_TONE_CTL</span><span class="p">,</span>
			    <span class="n">CS42L52_BEEP_EN_MASK</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">cs42l52_init_beep</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">cs42l52_free_beep</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">snd_soc_codec_get_drvdata</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">codec</span><span class="o">-&gt;</span><span class="n">control_data</span> <span class="o">=</span> <span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">;</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">snd_soc_codec_set_cache_io</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">SND_SOC_REGMAP</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="n">codec</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to set cache I/O: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">regcache_cache_only</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

	<span class="n">cs42l52_init_beep</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>

	<span class="n">cs42l52_set_bias_level</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">SND_SOC_BIAS_STANDBY</span><span class="p">);</span>

	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">sysclk</span> <span class="o">=</span> <span class="n">CS42L52_DEFAULT_CLK</span><span class="p">;</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">config</span><span class="p">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">CS42L52_DEFAULT_FORMAT</span><span class="p">;</span>

	<span class="cm">/* Set Platform MICx CFG */</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_MICA_CTL</span><span class="p">,</span>
			    <span class="n">CS42L52_MIC_CTL_TYPE_MASK</span><span class="p">,</span>
				<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">mica_cfg</span> <span class="o">&lt;&lt;</span>
				<span class="n">CS42L52_MIC_CTL_TYPE_SHIFT</span><span class="p">);</span>

	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_MICB_CTL</span><span class="p">,</span>
			    <span class="n">CS42L52_MIC_CTL_TYPE_MASK</span><span class="p">,</span>
				<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">micb_cfg</span> <span class="o">&lt;&lt;</span>
				<span class="n">CS42L52_MIC_CTL_TYPE_SHIFT</span><span class="p">);</span>

	<span class="cm">/* if Single Ended, Get Mic_Select */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">mica_cfg</span><span class="p">)</span>
		<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_MICA_CTL</span><span class="p">,</span>
				    <span class="n">CS42L52_MIC_CTL_MIC_SEL_MASK</span><span class="p">,</span>
				<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">mica_sel</span> <span class="o">&lt;&lt;</span>
				<span class="n">CS42L52_MIC_CTL_MIC_SEL_SHIFT</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">micb_cfg</span><span class="p">)</span>
		<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_MICB_CTL</span><span class="p">,</span>
				    <span class="n">CS42L52_MIC_CTL_MIC_SEL_MASK</span><span class="p">,</span>
				<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">micb_sel</span> <span class="o">&lt;&lt;</span>
				<span class="n">CS42L52_MIC_CTL_MIC_SEL_SHIFT</span><span class="p">);</span>

	<span class="cm">/* Set Platform Charge Pump Freq */</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_CHARGE_PUMP</span><span class="p">,</span>
			    <span class="n">CS42L52_CHARGE_PUMP_MASK</span><span class="p">,</span>
				<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">chgfreq</span> <span class="o">&lt;&lt;</span>
				<span class="n">CS42L52_CHARGE_PUMP_SHIFT</span><span class="p">);</span>

	<span class="cm">/* Set Platform Bias Level */</span>
	<span class="n">snd_soc_update_bits</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">CS42L52_IFACE_CTL2</span><span class="p">,</span>
			    <span class="n">CS42L52_IFACE_CTL2_BIAS_LVL</span><span class="p">,</span>
				<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">.</span><span class="n">micbias_lvl</span><span class="p">);</span>

	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_soc_codec</span> <span class="o">*</span><span class="n">codec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">cs42l52_free_beep</span><span class="p">(</span><span class="n">codec</span><span class="p">);</span>
	<span class="n">cs42l52_set_bias_level</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">SND_SOC_BIAS_OFF</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">snd_soc_codec_driver</span> <span class="n">soc_codec_dev_cs42l52</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">probe</span> <span class="o">=</span> <span class="n">cs42l52_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span> <span class="o">=</span> <span class="n">cs42l52_remove</span><span class="p">,</span>
	<span class="p">.</span><span class="n">suspend</span> <span class="o">=</span> <span class="n">cs42l52_suspend</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resume</span> <span class="o">=</span> <span class="n">cs42l52_resume</span><span class="p">,</span>
	<span class="p">.</span><span class="n">set_bias_level</span> <span class="o">=</span> <span class="n">cs42l52_set_bias_level</span><span class="p">,</span>

	<span class="p">.</span><span class="n">dapm_widgets</span> <span class="o">=</span> <span class="n">cs42l52_dapm_widgets</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_dapm_widgets</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_dapm_widgets</span><span class="p">),</span>
	<span class="p">.</span><span class="n">dapm_routes</span> <span class="o">=</span> <span class="n">cs42l52_audio_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_dapm_routes</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_audio_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">cs42l52_snd_controls</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_controls</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_snd_controls</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* Current and threshold powerup sequence Pg37 */</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">reg_default</span> <span class="n">cs42l52_threshold_patch</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>

	<span class="p">{</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x99</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x3E</span><span class="p">,</span> <span class="mh">0xBA</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x47</span><span class="p">,</span> <span class="mh">0x80</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0xBB</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x32</span><span class="p">,</span> <span class="mh">0x3B</span> <span class="p">},</span>
	<span class="p">{</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span> <span class="p">},</span>

<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">regmap_config</span> <span class="n">cs42l52_regmap</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">reg_bits</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">val_bits</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>

	<span class="p">.</span><span class="n">max_register</span> <span class="o">=</span> <span class="n">CS42L52_MAX_REGISTER</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reg_defaults</span> <span class="o">=</span> <span class="n">cs42l52_reg_defaults</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_reg_defaults</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_reg_defaults</span><span class="p">),</span>
	<span class="p">.</span><span class="n">readable_reg</span> <span class="o">=</span> <span class="n">cs42l52_readable_register</span><span class="p">,</span>
	<span class="p">.</span><span class="n">volatile_reg</span> <span class="o">=</span> <span class="n">cs42l52_volatile_register</span><span class="p">,</span>
	<span class="p">.</span><span class="n">cache_type</span> <span class="o">=</span> <span class="n">REGCACHE_RBTREE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_i2c_probe</span><span class="p">(</span><span class="k">struct</span> <span class="n">i2c_client</span> <span class="o">*</span><span class="n">i2c_client</span><span class="p">,</span>
			     <span class="k">const</span> <span class="k">struct</span> <span class="n">i2c_device_id</span> <span class="o">*</span><span class="n">id</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">devid</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">;</span>

	<span class="n">cs42l52</span> <span class="o">=</span> <span class="n">devm_kzalloc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">cs42l52_private</span><span class="p">),</span>
			       <span class="n">GFP_KERNEL</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">cs42l52</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">;</span>

	<span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span> <span class="o">=</span> <span class="n">regmap_init_i2c</span><span class="p">(</span><span class="n">i2c_client</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cs42l52_regmap</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">IS_ERR</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">PTR_ERR</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">);</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;regmap_init() failed: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">i2c_set_clientdata</span><span class="p">(</span><span class="n">i2c_client</span><span class="p">,</span> <span class="n">cs42l52</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">dev_get_platdata</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">))</span>
		<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">,</span> <span class="n">dev_get_platdata</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">),</span>
		       <span class="k">sizeof</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">pdata</span><span class="p">));</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">regmap_register_patch</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">cs42l52_threshold_patch</span><span class="p">,</span>
				    <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cs42l52_threshold_patch</span><span class="p">));</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="n">dev_warn</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span> <span class="s">&quot;Failed to apply regmap patch: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			 <span class="n">ret</span><span class="p">);</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">regmap_read</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">CS42L52_CHIP</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">reg</span><span class="p">);</span>
	<span class="n">devid</span> <span class="o">=</span> <span class="n">reg</span> <span class="o">&amp;</span> <span class="n">CS42L52_CHIP_ID_MASK</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">devid</span> <span class="o">!=</span> <span class="n">CS42L52_CHIP_ID</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
		<span class="n">dev_err</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="s">&quot;CS42L52 Device ID (%X). Expected %X</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			<span class="n">devid</span><span class="p">,</span> <span class="n">CS42L52_CHIP_ID</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">err_regmap</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">regcache_cache_only</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

	<span class="n">ret</span> <span class="o">=</span>  <span class="n">snd_soc_register_codec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">i2c_client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">,</span>
			<span class="o">&amp;</span><span class="n">soc_codec_dev_cs42l52</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cs42l52_dai</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">err_regmap</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">err_regmap:</span>
	<span class="n">regmap_exit</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">);</span>

<span class="nl">err:</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">cs42l52_i2c_remove</span><span class="p">(</span><span class="k">struct</span> <span class="n">i2c_client</span> <span class="o">*</span><span class="n">client</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">cs42l52_private</span> <span class="o">*</span><span class="n">cs42l52</span> <span class="o">=</span> <span class="n">i2c_get_clientdata</span><span class="p">(</span><span class="n">client</span><span class="p">);</span>

	<span class="n">snd_soc_unregister_codec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">client</span><span class="o">-&gt;</span><span class="n">dev</span><span class="p">);</span>
	<span class="n">regmap_exit</span><span class="p">(</span><span class="n">cs42l52</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">i2c_device_id</span> <span class="n">cs42l52_id</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="s">&quot;cs42l52&quot;</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>
<span class="n">MODULE_DEVICE_TABLE</span><span class="p">(</span><span class="n">i2c</span><span class="p">,</span> <span class="n">cs42l52_id</span><span class="p">);</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_driver</span> <span class="n">cs42l52_i2c_driver</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">driver</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;cs42l52&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">THIS_MODULE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">id_table</span> <span class="o">=</span> <span class="n">cs42l52_id</span><span class="p">,</span>
	<span class="p">.</span><span class="n">probe</span> <span class="o">=</span>    <span class="n">cs42l52_i2c_probe</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remove</span> <span class="o">=</span>   <span class="n">__devexit_p</span><span class="p">(</span><span class="n">cs42l52_i2c_remove</span><span class="p">),</span>
<span class="p">};</span>

<span class="n">module_i2c_driver</span><span class="p">(</span><span class="n">cs42l52_i2c_driver</span><span class="p">);</span>

<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;ASoC CS42L52 driver&quot;</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Georgi Vlaev, Nucleus Systems Ltd, &lt;joe@nucleusys.com&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;Brian Austin, Cirrus Logic Inc, &lt;brian.austin@cirrus.com&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
