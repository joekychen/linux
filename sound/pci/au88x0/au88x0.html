<!DOCTYPE html>
<html><head><title>joekychen/linux » sound › pci › au88x0 › au88x0.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>au88x0.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *  (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *  GNU Library General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
<span class="cm"> */</span>
 
<span class="cp">#ifndef __SOUND_AU88X0_H</span>
<span class="cp">#define __SOUND_AU88X0_H</span>

<span class="cp">#ifdef __KERNEL__</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;sound/core.h&gt;</span>
<span class="cp">#include &lt;sound/pcm.h&gt;</span>
<span class="cp">#include &lt;sound/rawmidi.h&gt;</span>
<span class="cp">#include &lt;sound/mpu401.h&gt;</span>
<span class="cp">#include &lt;sound/hwdep.h&gt;</span>
<span class="cp">#include &lt;sound/ac97_codec.h&gt;</span>
<span class="cp">#include &lt;sound/tlv.h&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef CHIP_AU8820</span>
<span class="cp">#include &quot;au88x0_eq.h&quot;</span>
<span class="cp">#include &quot;au88x0_a3d.h&quot;</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef CHIP_AU8810</span>
<span class="cp">#include &quot;au88x0_wt.h&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#define	hwread(x,y) readl((x)+(y))</span>
<span class="cp">#define	hwwrite(x,y,z) writel((z),(x)+(y))</span>

<span class="cm">/* Vortex MPU401 defines. */</span>
<span class="cp">#define	MIDI_CLOCK_DIV		0x61</span>
<span class="cm">/* Standart MPU401 defines. */</span>
<span class="cp">#define	MPU401_RESET		0xff</span>
<span class="cp">#define	MPU401_ENTER_UART	0x3f</span>
<span class="cp">#define	MPU401_ACK		0xfe</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>Get src register value to convert from x to y.</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define	SRC_RATIO(x,y)		((((x&lt;&lt;15)/y) + 1)/2)</span>

<span class="cm">/* FIFO software state constants. */</span>
<span class="cp">#define FIFO_STOP 0</span>
<span class="cp">#define FIFO_START 1</span>
<span class="cp">#define FIFO_PAUSE 2</span>

<span class="cm">/* IRQ flags */</span>
<span class="cp">#define IRQ_ERR_MASK	0x00ff</span>
<span class="cp">#define IRQ_FATAL	0x0001</span>
<span class="cp">#define IRQ_PARITY	0x0002</span>
<span class="cp">#define IRQ_REG		0x0004</span>
<span class="cp">#define IRQ_FIFO	0x0008</span>
<span class="cp">#define IRQ_DMA		0x0010</span>
<span class="cp">#define IRQ_PCMOUT	0x0020	</span><span class="cm">/* PCM OUT page crossing */</span><span class="cp"></span>
<span class="cp">#define IRQ_TIMER	0x1000</span>
<span class="cp">#define IRQ_MIDI	0x2000</span>
<span class="cp">#define IRQ_MODEM	0x4000</span>

<span class="cm">/* ADB Resource */</span>
<span class="cp">#define VORTEX_RESOURCE_DMA	0x00000000</span>
<span class="cp">#define VORTEX_RESOURCE_SRC	0x00000001</span>
<span class="cp">#define VORTEX_RESOURCE_MIXIN	0x00000002</span>
<span class="cp">#define VORTEX_RESOURCE_MIXOUT	0x00000003</span>
<span class="cp">#define VORTEX_RESOURCE_A3D	0x00000004</span>
<span class="cp">#define VORTEX_RESOURCE_LAST	0x00000005</span>

<span class="cm">/* codec io: VORTEX_CODEC_IO bits */</span>
<span class="cp">#define VORTEX_CODEC_ID_SHIFT	24</span>
<span class="cp">#define VORTEX_CODEC_WRITE	0x00800000</span>
<span class="cp">#define VORTEX_CODEC_ADDSHIFT 	16</span>
<span class="cp">#define VORTEX_CODEC_ADDMASK	0x7f0000</span>
<span class="cp">#define VORTEX_CODEC_DATSHIFT	0</span>
<span class="cp">#define VORTEX_CODEC_DATMASK	0xffff</span>

<span class="cm">/* Check for SDAC bit in &quot;Extended audio ID&quot; AC97 register */</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><h1>define VORTEX<em>IS</em>QUAD(x) (((x)->codec == NULL) ?  0 : ((x)->codec->ext_id&amp;0x80))</h1></td><td class="code"><div class="highlight"><pre><span class="cp">#define VORTEX_IS_QUAD(x) ((x)-&gt;isquad)</span>
<span class="cm">/* Check if chip has bug. */</span>
<span class="cp">#define IS_BAD_CHIP(x) (\</span>
<span class="cp">	(x-&gt;rev == 0xfe &amp;&amp; x-&gt;device == PCI_DEVICE_ID_AUREAL_VORTEX_2) || \</span>
<span class="cp">	(x-&gt;rev == 0xfe &amp;&amp; x-&gt;device == PCI_DEVICE_ID_AUREAL_ADVANTAGE))</span>


<span class="cm">/* PCM devices */</span>
<span class="cp">#define VORTEX_PCM_ADB		0</span>
<span class="cp">#define VORTEX_PCM_SPDIF	1</span>
<span class="cp">#define VORTEX_PCM_A3D		2</span>
<span class="cp">#define VORTEX_PCM_WT		3</span>
<span class="cp">#define VORTEX_PCM_I2S		4</span>
<span class="cp">#define VORTEX_PCM_LAST		5</span>

<span class="cp">#define MIX_CAPT(x) (vortex-&gt;mixcapt[x])</span>
<span class="cp">#define MIX_PLAYB(x) (vortex-&gt;mixplayb[x])</span>
<span class="cp">#define MIX_SPDIF(x) (vortex-&gt;mixspdif[x])</span>

<span class="cp">#define NR_WTPB 0x20		</span><span class="cm">/* WT channels per each bank. */</span><span class="cp"></span>
<span class="cp">#define NR_PCM	0x10</span>

<span class="k">struct</span> <span class="n">pcm_vol</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kctl</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">active</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">dma</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mixin</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">vol</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Structs */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>int this_08;          /* Still unknown */</p></td><td class="code"><div class="highlight"><pre>	<span class="kt">int</span> <span class="n">fifo_enabled</span><span class="p">;</span>	<span class="cm">/* this_24 */</span>
	<span class="kt">int</span> <span class="n">fifo_status</span><span class="p">;</span>	<span class="cm">/* this_1c */</span>
	<span class="n">u32</span> <span class="n">dma_ctrl</span><span class="p">;</span>		<span class="cm">/* this_78 (ADB), this_7c (WT) */</span>
	<span class="kt">int</span> <span class="n">dma_unknown</span><span class="p">;</span>	<span class="cm">/* this_74 (ADB), this_78 (WT). WDM: +8 */</span>
	<span class="kt">int</span> <span class="n">cfg0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cfg1</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">nr_ch</span><span class="p">;</span>		<span class="cm">/* Nr of PCM channels in use */</span>
	<span class="kt">int</span> <span class="n">type</span><span class="p">;</span>		<span class="cm">/* Output type (ac97, a3d, spdif, i2s, dsp) */</span>
	<span class="kt">int</span> <span class="n">dma</span><span class="p">;</span>		<span class="cm">/* Hardware DMA index. */</span>
	<span class="kt">int</span> <span class="n">dir</span><span class="p">;</span>		<span class="cm">/* Stream Direction. */</span>
	<span class="n">u32</span> <span class="n">resources</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

	<span class="cm">/* Virtual page extender stuff */</span>
	<span class="kt">int</span> <span class="n">nr_periods</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">period_bytes</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">period_real</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">period_virt</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">substream</span><span class="p">;</span>
<span class="p">}</span> <span class="n">stream_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">snd_vortex</span> <span class="n">vortex_t</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">snd_vortex</span> <span class="p">{</span>
	<span class="cm">/* ALSA structs. */</span>
	<span class="k">struct</span> <span class="n">snd_card</span> <span class="o">*</span><span class="n">card</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">*</span><span class="n">pcm</span><span class="p">[</span><span class="n">VORTEX_PCM_LAST</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">snd_rawmidi</span> <span class="o">*</span><span class="n">rmidi</span><span class="p">;</span>	<span class="cm">/* Legacy Midi interface. */</span>
	<span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span><span class="n">codec</span><span class="p">;</span>

	<span class="cm">/* Stream structs. */</span>
	<span class="n">stream_t</span> <span class="n">dma_adb</span><span class="p">[</span><span class="n">NR_ADB</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">spdif_sr</span><span class="p">;</span>
<span class="cp">#ifndef CHIP_AU8810</span>
	<span class="n">stream_t</span> <span class="n">dma_wt</span><span class="p">[</span><span class="n">NR_WT</span><span class="p">];</span>
	<span class="n">wt_voice_t</span> <span class="n">wt_voice</span><span class="p">[</span><span class="n">NR_WT</span><span class="p">];</span>	<span class="cm">/* WT register cache. */</span>
	<span class="kt">char</span> <span class="n">mixwt</span><span class="p">[(</span><span class="n">NR_WT</span> <span class="o">/</span> <span class="n">NR_WTPB</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span><span class="p">];</span>	<span class="cm">/* WT mixin objects */</span>
<span class="cp">#endif</span>

	<span class="cm">/* Global resources */</span>
	<span class="n">s8</span> <span class="n">mixcapt</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">s8</span> <span class="n">mixplayb</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="cp">#ifndef CHIP_AU8820</span>
	<span class="n">s8</span> <span class="n">mixspdif</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">s8</span> <span class="n">mixa3d</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* mixers which collect all a3d streams. */</span>
	<span class="n">s8</span> <span class="n">mixxtlk</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* crosstalk canceler mixer inputs. */</span>
<span class="cp">#endif</span>
	<span class="n">u32</span> <span class="n">fixed_res</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

<span class="cp">#ifndef CHIP_AU8820</span>
	<span class="cm">/* Hardware equalizer structs */</span>
	<span class="n">eqlzr_t</span> <span class="n">eq</span><span class="p">;</span>
	<span class="cm">/* A3D structs */</span>
	<span class="n">a3dsrc_t</span> <span class="n">a3d</span><span class="p">[</span><span class="n">NR_A3D</span><span class="p">];</span>
	<span class="cm">/* Xtalk canceler */</span>
	<span class="kt">int</span> <span class="n">xt_mode</span><span class="p">;</span>		<span class="cm">/* 1: speakers, 0:headphones. */</span>
<span class="cp">#endif</span>
	<span class="k">struct</span> <span class="n">pcm_vol</span> <span class="n">pcm_vol</span><span class="p">[</span><span class="n">NR_PCM</span><span class="p">];</span>

	<span class="kt">int</span> <span class="n">isquad</span><span class="p">;</span>		<span class="cm">/* cache of extended ID codec flag. */</span>

	<span class="cm">/* Gameport stuff. */</span>
	<span class="k">struct</span> <span class="n">gameport</span> <span class="o">*</span><span class="n">gameport</span><span class="p">;</span>

	<span class="cm">/* PCI hardware resources */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">io</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mmio</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>

	<span class="cm">/* PCI device */</span>
	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci_dev</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">vendor</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">device</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rev</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Functions. */</span>

<span class="cm">/* SRC */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adb_setsrc</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">,</span>
			      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cvrt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">);</span>

<span class="cm">/* DMA Engines. */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_setbuffers</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">,</span>
				     <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_setmode</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ie</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">dir</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fmt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">,</span>
				  <span class="n">u32</span> <span class="n">offset</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_setstartbuffer</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sb</span><span class="p">);</span>
<span class="cp">#ifndef CHIP_AU8810</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_setbuffers</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">,</span>
				    <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_setmode</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ie</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fmt</span><span class="p">,</span> <span class="kt">int</span> <span class="n">d</span><span class="p">,</span>	<span class="cm">/*int e, */</span>
				 <span class="n">u32</span> <span class="n">offset</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_setstartbuffer</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sb</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_startfifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">);</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>static void vortex<em>adbdma</em>stopfifo(vortex_t *vortex, int adbdma);</p></td><td class="code"><div class="highlight"><pre><span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_pausefifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_resumefifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="n">vortex_adbdma_getlinearpos</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_adbdma_resetup</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span><span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">adbdma</span><span class="p">);</span>

<span class="cp">#ifndef CHIP_AU8810</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_startfifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_stopfifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_pausefifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wtdma_resumefifo</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">);</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="n">vortex_wtdma_getlinearpos</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">wtdma</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cm">/* global stuff. */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_codec_init</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_codec_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span> <span class="n">codec</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">addr</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">data</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vortex_codec_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span> <span class="n">codec</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">addr</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_spdif_init</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">spdif_sr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">spdif_mode</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_core_init</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">card</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_core_shutdown</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">card</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_enable_int</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">card</span><span class="p">);</span>
<span class="k">static</span> <span class="n">irqreturn_t</span> <span class="n">vortex_interrupt</span><span class="p">(</span><span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">dev_id</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_alsafmt_aspfmt</span><span class="p">(</span><span class="kt">int</span> <span class="n">alsafmt</span><span class="p">);</span>

<span class="cm">/* Connection  stuff. */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_connect_default</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">en</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_adb_allocroute</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dma</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nr_ch</span><span class="p">,</span>
				 <span class="kt">int</span> <span class="n">dir</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">subdev</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">char</span> <span class="n">vortex_adb_checkinout</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">resmap</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">out</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">restype</span><span class="p">);</span>
<span class="cp">#ifndef CHIP_AU8810</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_wt_allocroute</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dma</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nr_ch</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wt_connect</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">en</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_wt_init</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_route</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">en</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">channel</span><span class="p">,</span>
			 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">source</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dest</span><span class="p">);</span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">static void vortex_routes(vortex_t * vortex, int en, unsigned char channel,</span>
<span class="c">			  unsigned char source, unsigned char dest0,</span>
<span class="c">			  unsigned char dest1);</span>
<span class="cp">#endif</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_connection_mixin_mix</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">en</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mixin</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mix</span><span class="p">,</span> <span class="kt">int</span> <span class="n">a</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_mix_setinputvolumebyte</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span>
					  <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mix</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mixin</span><span class="p">,</span>
					  <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">vol</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_mix_setvolumebyte</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">mix</span><span class="p">,</span>
				     <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">vol</span><span class="p">);</span>

<span class="cm">/* A3D functions. */</span>
<span class="cp">#ifndef CHIP_AU8820</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_Vort3D_enable</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">v</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_Vort3D_disable</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">v</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_Vort3D_connect</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">en</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_Vort3D_InitializeSource</span><span class="p">(</span><span class="n">a3dsrc_t</span> <span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">en</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cm">/* Driver stuff. */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_gameport_register</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">card</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">vortex_gameport_unregister</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">card</span><span class="p">);</span>
<span class="cp">#ifndef CHIP_AU8820</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_eq_init</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">vortex_eq_free</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cm">/* ALSA stuff. */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">snd_vortex_new_pcm</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nr</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">snd_vortex_mixer</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">snd_vortex_midi</span><span class="p">(</span><span class="n">vortex_t</span> <span class="o">*</span> <span class="n">vortex</span><span class="p">);</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
