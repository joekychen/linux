<!DOCTYPE html>
<html><head><title>joekychen/linux » sound › pci › ad1889.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>ad1889.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* Analog Devices 1889 audio driver</span>
<span class="cm"> * Copyright (C) 2004, Kyle McMartin &lt;kyle@parisc-linux.org&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __AD1889_H__</span>
<span class="cp">#define __AD1889_H__</span>

<span class="cp">#define AD_DS_WSMC	0x00 </span><span class="cm">/* wave/synthesis channel mixer control */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WSMC_SYEN 0x0004 </span><span class="cm">/* synthesis channel enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WSMC_SYRQ 0x0030 </span><span class="cm">/* synth. fifo request point */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WSMC_WA16 0x0100 </span><span class="cm">/* wave channel 16bit select */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WSMC_WAST 0x0200 </span><span class="cm">/* wave channel stereo select */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WSMC_WAEN 0x0400 </span><span class="cm">/* wave channel enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WSMC_WARQ 0x3000 </span><span class="cm">/* wave fifo request point */</span><span class="cp"></span>

<span class="cp">#define AD_DS_RAMC	0x02 </span><span class="cm">/* resampler/ADC channel mixer control */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RAMC_AD16 0x0001 </span><span class="cm">/* ADC channel 16bit select */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RAMC_ADST 0x0002 </span><span class="cm">/* ADC channel stereo select */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RAMC_ADEN 0x0004 </span><span class="cm">/* ADC channel enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RAMC_ACRQ 0x0030 </span><span class="cm">/* ADC fifo request point */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RAMC_REEN 0x0400 </span><span class="cm">/* resampler channel enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RAMC_RERQ 0x3000 </span><span class="cm">/* res. fifo request point */</span><span class="cp"></span>

<span class="cp">#define AD_DS_WADA	0x04 </span><span class="cm">/* wave channel mix attenuation */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WADA_RWAM 0x0080 </span><span class="cm">/* right wave mute */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WADA_RWAA 0x001f </span><span class="cm">/* right wave attenuation */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WADA_LWAM 0x8000 </span><span class="cm">/* left wave mute */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WADA_LWAA 0x3e00 </span><span class="cm">/* left wave attenuation */</span><span class="cp"></span>

<span class="cp">#define AD_DS_SYDA	0x06 </span><span class="cm">/* synthesis channel mix attenuation */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_SYDA_RSYM 0x0080 </span><span class="cm">/* right synthesis mute */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_SYDA_RSYA 0x001f </span><span class="cm">/* right synthesis attenuation */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_SYDA_LSYM 0x8000 </span><span class="cm">/* left synthesis mute */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_SYDA_LSYA 0x3e00 </span><span class="cm">/* left synthesis attenuation */</span><span class="cp"></span>

<span class="cp">#define AD_DS_WAS	0x08 </span><span class="cm">/* wave channel sample rate */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_WAS_WAS   0xffff </span><span class="cm">/* sample rate mask */</span><span class="cp"></span>

<span class="cp">#define AD_DS_RES	0x0a </span><span class="cm">/* resampler channel sample rate */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_RES_RES   0xffff </span><span class="cm">/* sample rate mask */</span><span class="cp"></span>

<span class="cp">#define AD_DS_CCS	0x0c </span><span class="cm">/* chip control/status */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_CCS_ADO   0x0001 </span><span class="cm">/* ADC channel overflow */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_CCS_REO   0x0002 </span><span class="cm">/* resampler channel overflow */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_CCS_SYU   0x0004 </span><span class="cm">/* synthesis channel underflow */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_CCS_WAU   0x0008 </span><span class="cm">/* wave channel underflow */</span><span class="cp"></span>
<span class="cm">/* bits 4 -&gt; 7, 9, 11 -&gt; 14 reserved */</span>
<span class="cp">#define  AD_DS_CCS_XTD   0x0100 </span><span class="cm">/* xtd delay control (4096 clock cycles) */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_CCS_PDALL 0x0400 </span><span class="cm">/* power */</span><span class="cp"></span>
<span class="cp">#define  AD_DS_CCS_CLKEN 0x8000 </span><span class="cm">/* clock */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_RESBA	0x40 </span><span class="cm">/* RES base address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_RESCA	0x44 </span><span class="cm">/* RES current address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_RESBC	0x48 </span><span class="cm">/* RES base count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_RESCC	0x4c </span><span class="cm">/* RES current count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_ADCBA	0x50 </span><span class="cm">/* ADC base address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_ADCCA	0x54 </span><span class="cm">/* ADC current address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_ADCBC	0x58 </span><span class="cm">/* ADC base count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_ADCCC	0x5c </span><span class="cm">/* ADC current count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_SYNBA	0x60 </span><span class="cm">/* synth base address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_SYNCA	0x64 </span><span class="cm">/* synth current address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_SYNBC	0x68 </span><span class="cm">/* synth base count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_SYNCC	0x6c </span><span class="cm">/* synth current count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_WAVBA	0x70 </span><span class="cm">/* wave base address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_WAVCA	0x74 </span><span class="cm">/* wave current address */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_WAVBC	0x78 </span><span class="cm">/* wave base count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_WAVCC	0x7c </span><span class="cm">/* wave current count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_RESIC	0x80 </span><span class="cm">/* RES dma interrupt current byte count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_RESIB	0x84 </span><span class="cm">/* RES dma interrupt base byte count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_ADCIC	0x88 </span><span class="cm">/* ADC dma interrupt current byte count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_ADCIB	0x8c </span><span class="cm">/* ADC dma interrupt base byte count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_SYNIC	0x90 </span><span class="cm">/* synth dma interrupt current byte count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_SYNIB	0x94 </span><span class="cm">/* synth dma interrupt base byte count */</span><span class="cp"></span>

<span class="cp">#define AD_DMA_WAVIC	0x98 </span><span class="cm">/* wave dma interrupt current byte count */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_WAVIB	0x9c </span><span class="cm">/* wave dma interrupt base byte count */</span><span class="cp"></span>

<span class="cp">#define  AD_DMA_ICC	0xffffff </span><span class="cm">/* current byte count mask */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_IBC	0xffffff </span><span class="cm">/* base byte count mask */</span><span class="cp"></span>
<span class="cm">/* bits 24 -&gt; 31 reserved */</span>

<span class="cm">/* 4 bytes pad */</span>
<span class="cp">#define AD_DMA_ADC	0xa8	</span><span class="cm">/* ADC      dma control and status */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_SYNTH	0xb0	</span><span class="cm">/* Synth    dma control and status */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_WAV	0xb8	</span><span class="cm">/* wave     dma control and status */</span><span class="cp"></span>
<span class="cp">#define AD_DMA_RES	0xa0	</span><span class="cm">/* Resample dma control and status */</span><span class="cp"></span>

<span class="cp">#define  AD_DMA_SGDE	0x0001 </span><span class="cm">/* SGD mode enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_LOOP	0x0002 </span><span class="cm">/* loop enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_IM	0x000c </span><span class="cm">/* interrupt mode mask */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_IM_DIS	(~AD_DMA_IM)	</span><span class="cm">/* disable */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_IM_CNT	0x0004 </span><span class="cm">/* interrupt on count */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_IM_SGD	0x0008 </span><span class="cm">/* interrupt on SGD flag */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_IM_EOL	0x000c </span><span class="cm">/* interrupt on End of Linked List */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_SGDS	0x0030 </span><span class="cm">/* SGD status */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_SFLG	0x0040 </span><span class="cm">/* SGD flag */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_EOL	0x0080 </span><span class="cm">/* SGD end of list */</span><span class="cp"></span>
<span class="cm">/* bits 8 -&gt; 15 reserved */</span>

<span class="cp">#define AD_DMA_DISR	0xc0 </span><span class="cm">/* dma interrupt status */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_RESI 0x000001 </span><span class="cm">/* resampler channel interrupt */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_ADCI 0x000002 </span><span class="cm">/* ADC channel interrupt */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_SYNI 0x000004 </span><span class="cm">/* synthesis channel interrupt */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_WAVI 0x000008 </span><span class="cm">/* wave channel interrupt */</span><span class="cp"></span>
<span class="cm">/* bits 4, 5 reserved */</span>
<span class="cp">#define  AD_DMA_DISR_SEPS 0x000040 </span><span class="cm">/* serial eeprom status */</span><span class="cp"></span>
<span class="cm">/* bits 7 -&gt; 13 reserved */</span>
<span class="cp">#define  AD_DMA_DISR_PMAI 0x004000 </span><span class="cm">/* pci master abort interrupt */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_PTAI 0x008000 </span><span class="cm">/* pci target abort interrupt */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_PTAE 0x010000 </span><span class="cm">/* pci target abort interrupt enable */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_DISR_PMAE 0x020000 </span><span class="cm">/* pci master abort interrupt enable */</span><span class="cp"></span>
<span class="cm">/* bits 19 -&gt; 31 reserved */</span>

<span class="cm">/* interrupt mask */</span>
<span class="cp">#define  AD_INTR_MASK     (AD_DMA_DISR_RESI|AD_DMA_DISR_ADCI| \</span>
<span class="cp">                           AD_DMA_DISR_WAVI|AD_DMA_DISR_SYNI| \</span>
<span class="cp">                           AD_DMA_DISR_PMAI|AD_DMA_DISR_PTAI)</span>

<span class="cp">#define AD_DMA_CHSS	0xc4 </span><span class="cm">/* dma channel stop status */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_CHSS_RESS 0x000001 </span><span class="cm">/* resampler channel stopped */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_CHSS_ADCS 0x000002 </span><span class="cm">/* ADC channel stopped */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_CHSS_SYNS 0x000004 </span><span class="cm">/* synthesis channel stopped */</span><span class="cp"></span>
<span class="cp">#define  AD_DMA_CHSS_WAVS 0x000008 </span><span class="cm">/* wave channel stopped */</span><span class="cp"></span>

<span class="cp">#define AD_GPIO_IPC	0xc8	</span><span class="cm">/* gpio port control */</span><span class="cp"></span>
<span class="cp">#define AD_GPIO_OP	0xca	</span><span class="cm">/* gpio output port status */</span><span class="cp"></span>
<span class="cp">#define AD_GPIO_IP	0xcc	</span><span class="cm">/* gpio  input port status */</span><span class="cp"></span>

<span class="cp">#define AD_AC97_BASE	0x100	</span><span class="cm">/* ac97 base register */</span><span class="cp"></span>

<span class="cp">#define AD_AC97_RESET   0x100   </span><span class="cm">/* reset */</span><span class="cp"></span>

<span class="cp">#define AD_AC97_PWR_CTL	0x126	</span><span class="cm">/* == AC97_POWERDOWN */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_PWR_ADC 0x0001 </span><span class="cm">/* ADC ready status */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_PWR_DAC 0x0002 </span><span class="cm">/* DAC ready status */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_PWR_PR0 0x0100 </span><span class="cm">/* PR0 (ADC) powerdown */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_PWR_PR1 0x0200 </span><span class="cm">/* PR1 (DAC) powerdown */</span><span class="cp"></span>

<span class="cp">#define AD_MISC_CTL     0x176 </span><span class="cm">/* misc control */</span><span class="cp"></span>
<span class="cp">#define  AD_MISC_CTL_DACZ   0x8000 </span><span class="cm">/* set for zero fill, unset for repeat */</span><span class="cp"></span>
<span class="cp">#define  AD_MISC_CTL_ARSR   0x0001 </span><span class="cm">/* set for SR1, unset for SR0 */</span><span class="cp"></span>
<span class="cp">#define  AD_MISC_CTL_ALSR   0x0100</span>
<span class="cp">#define  AD_MISC_CTL_DLSR   0x0400</span>
<span class="cp">#define  AD_MISC_CTL_DRSR   0x0004</span>

<span class="cp">#define AD_AC97_SR0     0x178 </span><span class="cm">/* sample rate 0, 0xbb80 == 48K */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_SR0_48K 0xbb80 </span><span class="cm">/* 48KHz */</span><span class="cp"></span>
<span class="cp">#define AD_AC97_SR1     0x17a </span><span class="cm">/* sample rate 1 */</span><span class="cp"></span>

<span class="cp">#define AD_AC97_ACIC	0x180 </span><span class="cm">/* ac97 codec interface control */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_ACIE  0x0001 </span><span class="cm">/* analog codec interface enable */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_ACRD  0x0002 </span><span class="cm">/* analog codec reset disable */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_ASOE  0x0004 </span><span class="cm">/* audio stream output enable */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_VSRM  0x0008 </span><span class="cm">/* variable sample rate mode */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_FSDH  0x0100 </span><span class="cm">/* force SDATA_OUT high */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_FSYH  0x0200 </span><span class="cm">/* force sync high */</span><span class="cp"></span>
<span class="cp">#define  AD_AC97_ACIC_ACRDY 0x8000 </span><span class="cm">/* analog codec ready status */</span><span class="cp"></span>
<span class="cm">/* bits 10 -&gt; 14 reserved */</span>


<span class="cp">#define AD_DS_MEMSIZE	512</span>
<span class="cp">#define AD_OPL_MEMSIZE	16</span>
<span class="cp">#define AD_MIDI_MEMSIZE	16</span>

<span class="cp">#define AD_WAV_STATE	0</span>
<span class="cp">#define AD_ADC_STATE	1</span>
<span class="cp">#define AD_MAX_STATES	2</span>

<span class="cp">#define AD_CHAN_WAV	0x0001</span>
<span class="cp">#define AD_CHAN_ADC	0x0002</span>
<span class="cp">#define AD_CHAN_RES	0x0004</span>
<span class="cp">#define AD_CHAN_SYN	0x0008</span>


<span class="cm">/* The chip would support 4 GB buffers and 16 MB periods,</span>
<span class="cm"> * but let&#39;s not overdo it ... */</span>
<span class="cp">#define BUFFER_BYTES_MAX	(256 * 1024)</span>
<span class="cp">#define PERIOD_BYTES_MIN	32</span>
<span class="cp">#define PERIOD_BYTES_MAX	(BUFFER_BYTES_MAX / 2)</span>
<span class="cp">#define PERIODS_MIN		2</span>
<span class="cp">#define PERIODS_MAX		(BUFFER_BYTES_MAX / PERIOD_BYTES_MIN)</span>

<span class="cp">#endif </span><span class="cm">/* __AD1889_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
