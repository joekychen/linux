f | debug.h | s | 7.9K | 244 | Joe Perches | joe@perches.com | 1332805334 |  | jffs2: Standardize JFFS_<LEVEL> uses  Use pr_<level> to prefix KBUILD_MODNAME via pr_fmt.  Remove obfuscating defines and use constants in pr_<level> No need for a do {} while (0) for single statements.  Form of JFFS_<LEVEL> output changes from "JFFS2 notice: " to "jffs2: notice: "  Added pr_fmt to xattr.c  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | summary.c | s | 23K | 699 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | dir.c | s | 22K | 706 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | Makefile | g | 751B |  | Richard Purdie | rpurdie@openedhand.com | 1184162633 |  | [JFFS2] Add LZO compression support.  Add LZO1X compression/decompression support to jffs2.  LZO's interface doesn't entirely match that required by jffs2 so a buffer and memcpy is unavoidable.  Signed-off-by: Richard Purdie <rpurdie@openedhand.com> Signed-off-by: David Woodhouse <dwmw2@infradead.org>
f | nodelist.c | s | 21K | 649 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | nodelist.h | s | 17K | 406 | Eric Paris | eparis@redhat.com | 1296576749 |  | fs/vfs/security: pass last path component to LSM on inode creation  SELinux would like to implement a new labeling behavior of newly created inodes.  We currently label new inodes based on the parent and the creating process.  This new behavior would also take into account the name of the new object when deciding the new label.  This is not the (supposed) full path, just the last component of the path.  This is very useful because creating /etc/shadow is different than creating /etc/passwd but the kernel hooks are unable to differentiate these operations.  We currently require that userspace realize it is doing some difficult operation like that and than userspace jumps through SELinux hoops to get things set up correctly.  This patch does not implement new behavior, that is obviously contained in a seperate SELinux patch, but it does pass the needed name down to the correct LSM hook.  If no such name exists it is fine to pass NULL.  Signed-off-by: Eric Paris <eparis@redhat.com>
f | malloc.c | s | 7.5K | 275 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | TODO | g | 1.9K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | jffs2_fs_sb.h | s | 5.8K | 136 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1336969463 |  | jffs2: get rid of jffs2_sync_super  Currently JFFS2 file-system maps the VFS "superblock" abstraction to the write-buffer. Namely, it uses VFS services to synchronize the write-buffer periodically.  The whole "superblock write-out" VFS infrastructure is served by the 'sync_supers()' kernel thread, which wakes up every 5 (by default) seconds and writes out all dirty superblock using the '->write_super()' call-back. But the problem with this thread is that it wastes power by waking up the system every 5 seconds no matter what. So we want to kill it completely and thus, we need to make file-systems to stop using the '->write_super' VFS service, and then remove it together with the kernel thread.  This patch switches the JFFS2 write-buffer management from '->write_super()'/'->s_dirt' to a delayed work. Instead of setting the 's_dirt' flag we just schedule a delayed work for synchronizing the write-buffer.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | debug.c | s | 25K | 748 | Joe Perches | joe@perches.com | 1332805334 |  | jffs2: Standardize JFFS_<LEVEL> uses  Use pr_<level> to prefix KBUILD_MODNAME via pr_fmt.  Remove obfuscating defines and use constants in pr_<level> No need for a do {} while (0) for single statements.  Form of JFFS_<LEVEL> output changes from "JFFS2 notice: " to "jffs2: notice: "  Added pr_fmt to xattr.c  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | writev.c | s | 1.1K | 44 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1326133579 |  | mtd: harmonize mtd_writev usage  This patch makes the 'mtd_writev()' function more usable and logical. We first teach it to fall-back to the 'default_mtd_writev()' function if the MTD driver does not define its own '->writev()' method. Then we make block2mtd and JFFS2 just 'mtd_writev()' instead of 'default_mtd_writev()' function. This means we can now stop exporting 'default_mtd_writev()' and instead, export 'mtd_writev()'. This is much cleaner and more logical, as well as allows us to get read of another direct 'mtd->writev' access in JFFS2.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | xattr.h | s | 4.3K | 109 | Jean-Christophe DUBOIS | jcd@tribudubois.net | 1336969956 |  | jffs2: allow to complete xattr integrity check on first GC scan  Unlike file data integrity the xattr data integrity was not checked before some explicit access to the attribute was made.  This could leave in the system a number of corrupted extended attributes which will be detected only at access time and possibly at a very late time compared to the time the corruption actually happened.  This patch adds the ability to check for extended attribute integrity on first GC scan pass (similar to file data integrity check). This allows for all present attributes to be completly verified before any use of them.  In order to work correctly this patch also needs the patch allowing JFFS2 to discriminate between recoverable and non recoverable errors on extended attributes.  Signed-off-by: Jean-Christophe DUBOIS <jcd@tribudubois.net> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | xattr.c | s | 38K | 1209 | Jean-Christophe DUBOIS | jcd@tribudubois.net | 1336969956 |  | jffs2: allow to complete xattr integrity check on first GC scan  Unlike file data integrity the xattr data integrity was not checked before some explicit access to the attribute was made.  This could leave in the system a number of corrupted extended attributes which will be detected only at access time and possibly at a very late time compared to the time the corruption actually happened.  This patch adds the ability to check for extended attribute integrity on first GC scan pass (similar to file data integrity check). This allows for all present attributes to be completly verified before any use of them.  In order to work correctly this patch also needs the patch allowing JFFS2 to discriminate between recoverable and non recoverable errors on extended attributes.  Signed-off-by: Jean-Christophe DUBOIS <jcd@tribudubois.net> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | scan.c | s | 35K | 1023 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | compr.h | s | 3.1K | 89 | Andres Salomon | dilinger@queued.net | 1319034141 |  | jffs2: add compr=lzo and compr=zlib options  ..to allow forcing of either compression scheme.  This will override compiled-in defaults.  jffs2_compress is reworked a bit, as the lzo/zlib override shares lots of code w/ the PRIORITY mode.  v2: update show_options accordingly.  Signed-off-by: Andres Salomon <dilinger@queued.net> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@intel.com>
f | LICENCE | g | 1.4K |  | David Woodhouse | dwmw2@infradead.org | 1177507007 |  | [JFFS2] Tidy up licensing/copyright boilerplate.  In particular, remove the bit in the LICENCE file about contacting Red Hat for alternative arrangements. Their errant IS department broke that arrangement a long time ago -- the policy of collecting copyright assignments from contributors came to an end when the plug was pulled on the servers hosting the project, without notice or reason.  We do still dual-license it for use with eCos, with the GPL+exception licence approved by the FSF as being GPL-compatible. It's just that nobody has the right to license it differently.  Signed-off-by: David Woodhouse <dwmw2@infradead.org>
f | super.c | s | 10K | 368 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1336969463 |  | jffs2: get rid of jffs2_sync_super  Currently JFFS2 file-system maps the VFS "superblock" abstraction to the write-buffer. Namely, it uses VFS services to synchronize the write-buffer periodically.  The whole "superblock write-out" VFS infrastructure is served by the 'sync_supers()' kernel thread, which wakes up every 5 (by default) seconds and writes out all dirty superblock using the '->write_super()' call-back. But the problem with this thread is that it wastes power by waking up the system every 5 seconds no matter what. So we want to kill it completely and thus, we need to make file-systems to stop using the '->write_super' VFS service, and then remove it together with the kernel thread.  This patch switches the JFFS2 write-buffer management from '->write_super()'/'->s_dirt' to a delayed work. Instead of setting the 's_dirt' flag we just schedule a delayed work for synchronizing the write-buffer.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | read.c | s | 6.7K | 207 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | compr_lzo.c | s | 2.2K | 88 | Joe Perches | joe@perches.com | 1332804118 |  | jffs2: Remove unnecessary OOM messages  Per call site OOM messages are unnecessary. k.alloc and v.alloc failures use dump_stack().  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | summary.h | s | 6.3K | 182 | David Woodhouse | David.Woodhouse@intel.com | 1217581671 |  | [JFFS2] Fix allocation of summary buffer  We can't use vmalloc for the buffer we use for writing summaries, because some drivers may want to DMA from it. So limit the size to 64KiB and use kmalloc for it instead.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | gc.c | s | 42K | 1181 | Josh Cartwright | joshc@linux.com | 1336419014 |  | jffs2: Fix lock acquisition order bug in gc path  The locking policy is such that the erase_complete_block spinlock is nested within the alloc_sem mutex.  This fixes a case in which the acquisition order was erroneously reversed.  This issue was caught by the following lockdep splat:     =======================================================    [ INFO: possible circular locking dependency detected ]    3.0.5 #1    -------------------------------------------------------    jffs2_gcd_mtd6/299 is trying to acquire lock:     (&c->alloc_sem){+.+.+.}, at: [<c01f7714>] jffs2_garbage_collect_pass+0x314/0x890     but task is already holding lock:     (&(&c->erase_completion_lock)->rlock){+.+...}, at: [<c01f7708>] jffs2_garbage_collect_pass+0x308/0x890     which lock already depends on the new lock.     the existing dependency chain (in reverse order) is:     -> #1 (&(&c->erase_completion_lock)->rlock){+.+...}:           [<c008bec4>] validate_chain+0xe6c/0x10bc           [<c008c660>] __lock_acquire+0x54c/0xba4           [<c008d240>] lock_acquire+0xa4/0x114           [<c046780c>] _raw_spin_lock+0x3c/0x4c           [<c01f744c>] jffs2_garbage_collect_pass+0x4c/0x890           [<c01f937c>] jffs2_garbage_collect_thread+0x1b4/0x1cc           [<c0071a68>] kthread+0x98/0xa0           [<c000f264>] kernel_thread_exit+0x0/0x8     -> #0 (&c->alloc_sem){+.+.+.}:           [<c008ad2c>] print_circular_bug+0x70/0x2c4           [<c008c08c>] validate_chain+0x1034/0x10bc           [<c008c660>] __lock_acquire+0x54c/0xba4           [<c008d240>] lock_acquire+0xa4/0x114           [<c0466628>] mutex_lock_nested+0x74/0x33c           [<c01f7714>] jffs2_garbage_collect_pass+0x314/0x890           [<c01f937c>] jffs2_garbage_collect_thread+0x1b4/0x1cc           [<c0071a68>] kthread+0x98/0xa0           [<c000f264>] kernel_thread_exit+0x0/0x8     other info that might help us debug this:      Possible unsafe locking scenario:            CPU0                    CPU1           ----                    ----      lock(&(&c->erase_completion_lock)->rlock);                                   lock(&c->alloc_sem);                                   lock(&(&c->erase_completion_lock)->rlock);      lock(&c->alloc_sem);      *** DEADLOCK ***     1 lock held by jffs2_gcd_mtd6/299:     #0:  (&(&c->erase_completion_lock)->rlock){+.+...}, at: [<c01f7708>] jffs2_garbage_collect_pass+0x308/0x890     stack backtrace:    [<c00155dc>] (unwind_backtrace+0x0/0x100) from [<c0463dc0>] (dump_stack+0x20/0x24)    [<c0463dc0>] (dump_stack+0x20/0x24) from [<c008ae84>] (print_circular_bug+0x1c8/0x2c4)    [<c008ae84>] (print_circular_bug+0x1c8/0x2c4) from [<c008c08c>] (validate_chain+0x1034/0x10bc)    [<c008c08c>] (validate_chain+0x1034/0x10bc) from [<c008c660>] (__lock_acquire+0x54c/0xba4)    [<c008c660>] (__lock_acquire+0x54c/0xba4) from [<c008d240>] (lock_acquire+0xa4/0x114)    [<c008d240>] (lock_acquire+0xa4/0x114) from [<c0466628>] (mutex_lock_nested+0x74/0x33c)    [<c0466628>] (mutex_lock_nested+0x74/0x33c) from [<c01f7714>] (jffs2_garbage_collect_pass+0x314/0x890)    [<c01f7714>] (jffs2_garbage_collect_pass+0x314/0x890) from [<c01f937c>] (jffs2_garbage_collect_thread+0x1b4/0x1cc)    [<c01f937c>] (jffs2_garbage_collect_thread+0x1b4/0x1cc) from [<c0071a68>] (kthread+0x98/0xa0)    [<c0071a68>] (kthread+0x98/0xa0) from [<c000f264>] (kernel_thread_exit+0x0/0x8)  This was introduce in '81cfc9f jffs2: Fix serious write stall due to erase'.  Cc: stable@kernel.org [2.6.37+] Signed-off-by: Josh Cartwright <joshc@linux.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | symlink.c | s | 1.8K | 57 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | compr_rtime.c | s | 2.8K | 111 | Mike Frysinger | vapier@gentoo.org | 1287964151 |  | jffs2: drop unused model argument  The jffs2 compression framework provides a "model" argument when compressing and decompressing, but the caller always passes in NULL and the callees never use it.  So punt this useless overhead.  Signed-off-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | jffs2_fs_i.h | s | 1.6K | 45 | David Woodhouse | David.Woodhouse@intel.com | 1281273322 |  | jffs2: Update copyright notices  Signed-off-by: David Woodhouse <dwmw2@infradead.org>
f | os-linux.h | s | 7.3K | 162 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1338426292 |  | jffs2: get rid of jffs2_sync_super  Currently JFFS2 file-system maps the VFS "superblock" abstraction to the write-buffer. Namely, it uses VFS services to synchronize the write-buffer periodically.  The whole "superblock write-out" VFS infrastructure is served by the 'sync_supers()' kernel thread, which wakes up every 5 (by default) seconds and writes out all dirty superblock using the '->write_super()' call-back. But the problem with this thread is that it wastes power by waking up the system every 5 seconds no matter what. So we want to kill it completely and thus, we need to make file-systems to stop using the '->write_super' VFS service, and then remove it together with the kernel thread.  This patch switches the JFFS2 write-buffer management from '->write_super()'/'->s_dirt' to a delayed work. Instead of setting the 's_dirt' flag we just schedule a delayed work for synchronizing the write-buffer.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | wbuf.c | s | 37K | 1137 | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1338426292 |  | jffs2: get rid of jffs2_sync_super  Currently JFFS2 file-system maps the VFS "superblock" abstraction to the write-buffer. Namely, it uses VFS services to synchronize the write-buffer periodically.  The whole "superblock write-out" VFS infrastructure is served by the 'sync_supers()' kernel thread, which wakes up every 5 (by default) seconds and writes out all dirty superblock using the '->write_super()' call-back. But the problem with this thread is that it wastes power by waking up the system every 5 seconds no matter what. So we want to kill it completely and thus, we need to make file-systems to stop using the '->write_super' VFS service, and then remove it together with the kernel thread.  This patch switches the JFFS2 write-buffer management from '->write_super()'/'->s_dirt' to a delayed work. Instead of setting the 's_dirt' flag we just schedule a delayed work for synchronizing the write-buffer.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | acl.h | s | 1.0K | 35 | Al Viro | viro@zeniv.linux.org.uk | 1312178982 |  | switch posix_acl_create() to umode_t *  so we can pass &inode->i_mode to it  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | xattr_trusted.c | s | 1.4K | 48 | Stephen Hemminger | shemminger@vyatta.com | 1274481080 |  | jffs2: constify xattr_handler  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | readinode.c | s | 43K | 1275 | Jean-Christophe DUBOIS | jcd@tribudubois.net | 1336969956 |  | jffs2: allow to complete xattr integrity check on first GC scan  Unlike file data integrity the xattr data integrity was not checked before some explicit access to the attribute was made.  This could leave in the system a number of corrupted extended attributes which will be detected only at access time and possibly at a very late time compared to the time the corruption actually happened.  This patch adds the ability to check for extended attribute integrity on first GC scan pass (similar to file data integrity check). This allows for all present attributes to be completly verified before any use of them.  In order to work correctly this patch also needs the patch allowing JFFS2 to discriminate between recoverable and non recoverable errors on extended attributes.  Signed-off-by: Jean-Christophe DUBOIS <jcd@tribudubois.net> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | fs.c | s | 19K | 633 | Jan Kara | jack@suse.cz | 1336283021 |  | vfs: Rename end_writeback() to clear_inode()  After we moved inode_sync_wait() from end_writeback() it doesn't make sense to call the function end_writeback() anymore. Rename it to clear_inode() which well says what the function really does - set I_CLEAR flag.  Signed-off-by: Jan Kara <jack@suse.cz> Signed-off-by: Fengguang Wu <fengguang.wu@intel.com>
f | compr.c | s | 11K | 381 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | acl.c | s | 9.0K | 363 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | compr_zlib.c | s | 5.5K | 186 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | xattr_user.c | s | 1.4K | 48 | Stephen Hemminger | shemminger@vyatta.com | 1274481080 |  | jffs2: constify xattr_handler  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | ioctl.c | s | 557B | 19 | David Woodhouse | David.Woodhouse@intel.com | 1281273322 |  | jffs2: Update copyright notices  Signed-off-by: David Woodhouse <dwmw2@infradead.org>
f | Kconfig | g | 5.7K |  | Alexey Dobriyan | adobriyan@gmail.com | 1220264992 |  | [JFFS2] Move JFFS2 config options out of fs/Kconfig  Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | file.c | s | 9.3K | 282 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | compr_rubin.c | s | 8.8K | 367 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | build.c | s | 10K | 324 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | security.c | s | 2.3K | 77 | Nikola Pajkovsky | n.pajkovsky@gmail.com | 1332805004 |  | jffs2: make jffs2_initxattrs() static  Signed-off-by: Nikola Pajkovsky <n.pajkovsky@gmail.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | nodemgmt.c | s | 28K | 755 | Daniel Drake | dsd@laptop.org | 1336967489 |  | JFFS2: Add parameter to reserve disk space for root  Add a new rp_size= parameter which creates a "reserved pool" of disk space which can only be used by root. Other users are not permitted to write to disk when the available space is less than the pool size.  Based on original code by Artem Bityutskiy in https://dev.laptop.org/ticket/5317  [dwmw2: use capable(CAP_SYS_RESOURCE) not uid/gid check, fix debug prints] Signed-off-by: Daniel Drake <dsd@laptop.org> Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | write.c | s | 21K | 599 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | erase.c | s | 14K | 443 | Shmulik Ladkani | shmulik.ladkani@gmail.com | 1332806544 |  | mtd: unify initialization of erase_info->fail_addr  Initialization of 'erase_info->fail_addr' to MTD_FAIL_ADDR_UNKNOWN prior erase operation is duplicated accross several MTD drivers, and also taken care of by some MTD users as well.  Harmonize it: initialize 'fail_addr' within 'mtd_erase()' interface.  Signed-off-by: Shmulik Ladkani <shmulik.ladkani@gmail.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | background.c | s | 4.2K | 140 | Joe Perches | joe@perches.com | 1332805219 |  | jffs2: Use pr_fmt and remove jffs: from formats  Use pr_fmt to prefix KBUILD_MODNAME to appropriate logging messages.  Remove now unnecessary internal prefixes from formats.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | README.Locking | g | 7.0K |  | David Woodhouse | dwmw2@infradead.org | 1208873620 |  | [JFFS2] semaphore->mutex conversion  Signed-off-by: David Woodhouse <dwmw2@infradead.org>
