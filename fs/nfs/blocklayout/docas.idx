f | blocklayout.c | s | 30K | 1062 | Fred Isaman | iisaman@netapp.com | 1335550237 |  | NFS: create struct nfs_page_array  Both nfs_read_data and nfs_write_data devote several fields which can be combined into a single shared struct.  Signed-off-by: Fred Isaman <iisaman@netapp.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | blocklayoutdm.c | s | 3.4K | 99 | Dan Carpenter | dan.carpenter@oracle.com | 1331667188 |  | NFS: null dereference in dev_remove()  In commit 5ffaf85541 "NFS: replace global bl_wq with per-net one" we made "msg" a pointer instead of a struct stored in stack memory.  But we forgot to change the memset() here so we're still clearing stack memory instead clearing the struct like we intended.  It will lead to a kernel crash.  Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | blocklayoutdev.c | s | 10K | 359 | Chuck Lever | chuck.lever@oracle.com | 1337719544 |  | NFS: Use proper naming conventions for the nfs_client.net field  Clean up:  When naming fields and data types, follow established conventions to facilitate accurate grep/cscope searches.  Introduced by commit e50a7a1a "NFS: make NFS client allocated per network namespace context," Tue Jan 10, 2012.  Signed-off-by: Chuck Lever <chuck.lever@oracle.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | Makefile | g | 193B |  | Jim Rees | rees@umich.edu | 1312129096 |  | pnfsblock: remove device operations  Signed-off-by: Jim Rees <rees@umich.edu> Signed-off-by: Fred Isaman <iisaman@citi.umich.edu> Signed-off-by: Benny Halevy <bhalevy@panasas.com> Signed-off-by: Benny Halevy <bhalevy@tonian.com> [upcall bugfixes] Signed-off-by: Peng Tao <peng_tao@emc.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | blocklayout.h | s | 7.4K | 184 | Stanislav Kinsbursky | skinsbursky@parallels.com | 1331477855 |  | NFS: replace global bl_wq with per-net one  This queue is used for sleeping in kernel and it have to be per-net since we don't want to wake any other waiters except in out network nemespace. BTW, move wq to per-net data is easy. But some way to handle upcall timeouts have to be provided. On message destroy in case of timeout, tasks, waiting for message to be delivered, should be awakened. Thus, some data required to located the right wait queue. Chosen solution replaces rpc_pipe_msg object with new introduced bl_pipe_msg object, containing rpc_pipe_msg and proper wq.  Signed-off-by: Stanislav Kinsbursky <skinsbursky@parallels.com> Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
f | extents.c | s | 25K | 824 | Trond Myklebust | Trond.Myklebust@netapp.com | 1328056102 |  | NFS: Use kcalloc() when allocating arrays  Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
