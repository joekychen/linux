f | dlmfs.c | s | 16K | 580 | Jan Kara | jack@suse.cz | 1336283021 |  | vfs: Rename end_writeback() to clear_inode()  After we moved inode_sync_wait() from end_writeback() it doesn't make sense to call the function end_writeback() anymore. Rename it to clear_inode() which well says what the function really does - set I_CLEAR flag.  Signed-off-by: Jan Kara <jack@suse.cz> Signed-off-by: Fengguang Wu <fengguang.wu@intel.com>
f | Makefile | g | 115B |  | matt mooney | mfm@muteddisk.com | 1300366977 |  | fs: change to new flag variable  Replace EXTRA_CFLAGS with ccflags-y. And change ntfs-objs to ntfs-y for cleaner conditional inclusion.  Signed-off-by: matt mooney <mfm@muteddisk.com> Acked-by: WANG Cong <xiyou.wangcong@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | dlmfsver.c | s | 1.2K | 35 | Joel Becker | joel.becker@oracle.com | 1267227674 |  | ocfs2_dlmfs: Move to its own directory  We're going to remove the tie between ocfs2_dlmfs and o2dlm. ocfs2_dlmfs doesn't belong in the fs/ocfs2/dlm directory anymore.  Here we move it to fs/ocfs2/dlmfs.  Signed-off-by: Joel Becker <joel.becker@oracle.com>
f | dlmfsver.h | s | 997B | 28 | Joel Becker | joel.becker@oracle.com | 1267227674 |  | ocfs2_dlmfs: Move to its own directory  We're going to remove the tie between ocfs2_dlmfs and o2dlm. ocfs2_dlmfs doesn't belong in the fs/ocfs2/dlm directory anymore.  Here we move it to fs/ocfs2/dlmfs.  Signed-off-by: Joel Becker <joel.becker@oracle.com>
f | userdlm.c | s | 17K | 566 | Sunil Mushran | sunil.mushran@oracle.com | 1267329427 |  | ocfs2/userdlm: Add tracing in userdlm  Make use of the newly added BASTS masklog to trace ASTs and BASTs in userdlm.  Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com> Signed-off-by: Joel Becker <joel.becker@oracle.com>
f | userdlm.h | s | 3.3K | 94 | Joel Becker | joel.becker@oracle.com | 1267227678 |  | ocfs2_dlmfs: Use the stackglue.  Rather than directly using o2dlm, dlmfs can now use the stackglue.  This allows it to use userspace cluster stacks and fs/dlm.  This commit forces o2cb for now.  A latter commit will bump the protocol version and allow non-o2cb stacks.  This is one big sed, really.  LKM_xxMODE becomes DLM_LOCK_xx.  LKM_flag becomes DLM_LKF_flag.  We also learn to check that the LVB is valid before reading it.  Any DLM can lose the contents of the LVB during a complicated recovery.  userdlm should be checking this.  Now it does.  dlmfs will return 0 from read(2) if the LVB was invalid.  Signed-off-by: Joel Becker <joel.becker@oracle.com>
