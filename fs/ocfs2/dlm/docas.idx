f | dlmlock.c | s | 19K | 659 | Julia Lawall | julia@diku.dk | 1321523206 |  | fs/ocfs2/dlm/dlmlock.c: free kmem_cache_zalloc'd data using kmem_cache_free  Memory allocated using kmem_cache_zalloc should be freed using kmem_cache_free, not kfree.  The semantic patch that fixes this problem is as follows: (http://coccinelle.lip6.fr/)  // <smpl> @@ expression x,e,e1,e2; @@  x = kmem_cache_zalloc(e1,e2) ... when != x = e ?-kfree(x) +kmem_cache_free(e1,x) // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Joel Becker <jlbec@evilplan.org>
f | dlmdomain.c | s | 60K | 1986 | Al Viro | viro@zeniv.linux.org.uk | 1338348514 |  | ocfs2: trivial endianness misannotations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | Makefile | g | 205B |  | matt mooney | mfm@muteddisk.com | 1300366977 |  | fs: change to new flag variable  Replace EXTRA_CFLAGS with ccflags-y. And change ntfs-objs to ntfs-y for cleaner conditional inclusion.  Signed-off-by: matt mooney <mfm@muteddisk.com> Acked-by: WANG Cong <xiyou.wangcong@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | dlmconvert.h | s | 1.2K | 32 | Kurt Hackel | kurt.hackel@oracle.com | 1136317547 |  | [PATCH] OCFS2: The Second Oracle Cluster Filesystem  A distributed lock manager built with the cluster file system use case in mind. The OCFS2 dlm exposes a VMS style API, though things have been simplified internally. The only lock levels implemented currently are NLMODE, PRMODE and EXMODE.  Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com> Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
f | dlmthread.c | s | 20K | 638 | Sunil Mushran | sunil.mushran@oracle.com | 1311528594 |  | ocfs2/dlm: Take inflight reference count for remotely mastered resources too  The inflight reference count, in the lock resource, is taken to pin the resource in memory. We take it when a new resource is created and release it after a lock is attached to it. We do this to prevent the resource from getting purged prematurely.  Earlier this reference count was being taken for locally mastered resources only. This patch extends the same functionality for remotely mastered ones.  We are doing this because the same premature purging could occur for remotely mastered resources if the remote node were to die before completion of the create lock.  Fix for Oracle bug#12405575.  Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
f | dlmrecovery.c | s | 85K | 2549 | Sunil Mushran | sunil.mushran@oracle.com | 1311528534 |  | ocfs2/dlm: Cleanup dlm_wait_for_node_death() and dlm_wait_for_node_recovery()  dlm_wait_for_node_death() and dlm_wait_for_node_recovery() needed a facelift.  Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
f | dlmver.h | s | 991B | 28 | Kurt Hackel | kurt.hackel@oracle.com | 1136317547 |  | [PATCH] OCFS2: The Second Oracle Cluster Filesystem  A distributed lock manager built with the cluster file system use case in mind. The OCFS2 dlm exposes a VMS style API, though things have been simplified internally. The only lock levels implemented currently are NLMODE, PRMODE and EXMODE.  Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com> Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
f | dlmdomain.h | s | 1.1K | 32 | Kurt Hackel | kurt.hackel@oracle.com | 1136317547 |  | [PATCH] OCFS2: The Second Oracle Cluster Filesystem  A distributed lock manager built with the cluster file system use case in mind. The OCFS2 dlm exposes a VMS style API, though things have been simplified internally. The only lock levels implemented currently are NLMODE, PRMODE and EXMODE.  Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com> Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
f | dlmmaster.c | s | 94K | 2986 | Sunil Mushran | sunil.mushran@oracle.com | 1311528594 |  | ocfs2/dlm: Take inflight reference count for remotely mastered resources too  The inflight reference count, in the lock resource, is taken to pin the resource in memory. We take it when a new resource is created and release it after a lock is attached to it. We do this to prevent the resource from getting purged prematurely.  Earlier this reference count was being taken for locally mastered resources only. This patch extends the same functionality for remotely mastered ones.  We are doing this because the same premature purging could occur for remotely mastered resources if the remote node were to die before completion of the create lock.  Fix for Oracle bug#12405575.  Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
f | dlmcommon.h | s | 29K | 975 | Al Viro | viro@zeniv.linux.org.uk | 1338348514 |  | ocfs2: trivial endianness misannotations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | dlmunlock.c | s | 18K | 603 | Tao Ma | boyu.mt@taobao.com | 1298257844 |  | ocfs2: Remove ENTRY from masklog.  ENTRY is used to record the entry of a function. But because it is added in so many functions, if we enable it, the system logs get filled up quickly and cause too much I/O. So actually no one can open it for a production system or even for a test.  So for mlog_entry_void, we just remove it. for mlog_entry(...), we replace it with mlog(0,...), and they will be replace by trace event later.  Signed-off-by: Tao Ma <boyu.mt@taobao.com>
f | dlmdebug.h | s | 2.0K | 70 | Sunil Mushran | sunil.mushran@oracle.com | 1293071684 |  | ocfs2/dlm: Cleanup dlmdebug.c  Remove struct debug_buffer in dlmdebug.c/h.  Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com> Signed-off-by: Joel Becker <joel.becker@oracle.com>
f | dlmdebug.c | s | 27K | 869 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103831 |  | fs: add export.h to files using EXPORT_SYMBOL/THIS_MODULE macros  These files were getting <linux/module.h> via an implicit include path, but we want to crush those out of existence since they cost time during compiles of processing thousands of lines of headers for no reason.  Give them the lightweight header that just contains the EXPORT_SYMBOL infrastructure.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | dlmast.c | s | 14K | 422 | Al Viro | viro@zeniv.linux.org.uk | 1338348514 |  | ocfs2: trivial endianness misannotations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | dlmapi.h | s | 9.3K | 199 | Sunil Mushran | sunil.mushran@oracle.com | 1264476051 |  | ocfs2/trivial: Remove trailing whitespaces  Patch removes trailing whitespaces.  Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com> Signed-off-by: Joel Becker <joel.becker@oracle.com>
f | dlmver.c | s | 1.2K | 35 | Mark Fasheh | mark.fasheh@oracle.com | 1201302346 |  | ocfs2: bump version number  Bump the printed version to 1.5.0. This helps us quickly identify which version of Ocfs2 a bug filer is running.  Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>
f | dlmconvert.c | s | 15K | 480 | Tao Ma | boyu.mt@taobao.com | 1298257844 |  | ocfs2: Remove ENTRY from masklog.  ENTRY is used to record the entry of a function. But because it is added in so many functions, if we enable it, the system logs get filled up quickly and cause too much I/O. So actually no one can open it for a production system or even for a test.  So for mlog_entry_void, we just remove it. for mlog_entry(...), we replace it with mlog(0,...), and they will be replace by trace event later.  Signed-off-by: Tao Ma <boyu.mt@taobao.com>
