<!DOCTYPE html>
<html><head><title>joekychen/linux » fs › cifs › cifsproto.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>cifsproto.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *   fs/cifs/cifsproto.h</span>
<span class="cm"> *</span>
<span class="cm"> *   Copyright (c) International Business Machines  Corp., 2002,2008</span>
<span class="cm"> *   Author(s): Steve French (sfrench@us.ibm.com)</span>
<span class="cm"> *</span>
<span class="cm"> *   This library is free software; you can redistribute it and/or modify</span>
<span class="cm"> *   it under the terms of the GNU Lesser General Public License as published</span>
<span class="cm"> *   by the Free Software Foundation; either version 2.1 of the License, or</span>
<span class="cm"> *   (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *   This library is distributed in the hope that it will be useful,</span>
<span class="cm"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See</span>
<span class="cm"> *   the GNU Lesser General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *   You should have received a copy of the GNU Lesser General Public License</span>
<span class="cm"> *   along with this library; if not, write to the Free Software</span>
<span class="cm"> *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _CIFSPROTO_H</span>
<span class="cp">#define _CIFSPROTO_H</span>
<span class="cp">#include &lt;linux/nls.h&gt;</span>

<span class="k">struct</span> <span class="n">statfs</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">smb_vol</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> *****************************************************************</span>
<span class="cm"> * All Prototypes</span>
<span class="cm"> *****************************************************************</span>
<span class="cm"> */</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="n">cifs_buf_get</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_buf_release</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="n">cifs_small_buf_get</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_small_buf_release</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">smb_send</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="cm">/* length */</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">_GetXid</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">_FreeXid</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
<span class="cp">#define GetXid()						\</span>
<span class="cp">({								\</span>
<span class="cp">	int __xid = (int)_GetXid();				\</span>
<span class="cp">	cFYI(1, &quot;CIFS VFS: in %s as Xid: %d with uid: %d&quot;,	\</span>
<span class="cp">	     __func__, __xid, current_fsuid());			\</span>
<span class="cp">	__xid;							\</span>
<span class="cp">})</span>

<span class="cp">#define FreeXid(curr_xid)					\</span>
<span class="cp">do {								\</span>
<span class="cp">	_FreeXid(curr_xid);					\</span>
<span class="cp">	cFYI(1, &quot;CIFS VFS: leaving %s (xid = %d) rc = %d&quot;,	\</span>
<span class="cp">	     __func__, curr_xid, (int)rc);			\</span>
<span class="cp">} while (0)</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">init_cifs_idmap</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">exit_cifs_idmap</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_destroy_idmaptrees</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">build_path_from_dentry</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cifs_build_path_to_root</span><span class="p">(</span><span class="k">struct</span> <span class="n">smb_vol</span> <span class="o">*</span><span class="n">vol</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">build_wildcard_path_from_dentry</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">direntry</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cifs_compose_mount_options</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">sb_mountdata</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fullpath</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">dfs_info3_param</span> <span class="o">*</span><span class="n">ref</span><span class="p">,</span>
		<span class="kt">char</span> <span class="o">**</span><span class="n">devname</span><span class="p">);</span>
<span class="cm">/* extern void renew_parental_timestamps(struct dentry *direntry);*/</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mid_q_entry</span> <span class="o">*</span><span class="n">AllocMidQEntry</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="n">smb_buffer</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">DeleteMidQEntry</span><span class="p">(</span><span class="k">struct</span> <span class="n">mid_q_entry</span> <span class="o">*</span><span class="n">midEntry</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_call_async</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">,</span> <span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span>
			   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nvec</span><span class="p">,</span> <span class="n">mid_receive_t</span> <span class="o">*</span><span class="n">receive</span><span class="p">,</span>
			   <span class="n">mid_callback_t</span> <span class="o">*</span><span class="n">callback</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">cbdata</span><span class="p">,</span>
			   <span class="n">bool</span> <span class="n">ignore_pend</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SendReceive</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="cm">/* xid */</span> <span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span> <span class="cm">/* input */</span> <span class="p">,</span>
			<span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span> <span class="cm">/* out */</span> <span class="p">,</span>
			<span class="kt">int</span> <span class="o">*</span> <span class="cm">/* bytes returned */</span> <span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">long_op</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SendReceiveNoRsp</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">,</span>
			    <span class="kt">char</span> <span class="o">*</span><span class="n">in_buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_setup_request</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">mid_q_entry</span> <span class="o">**</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_check_receive</span><span class="p">(</span><span class="k">struct</span> <span class="n">mid_q_entry</span> <span class="o">*</span><span class="n">mid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">,</span> <span class="n">bool</span> <span class="n">log_error</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SendReceive2</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="cm">/* xid */</span> <span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="cm">/* nvec to send */</span><span class="p">,</span>
			<span class="kt">int</span> <span class="o">*</span> <span class="cm">/* type of buf returned */</span> <span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SendReceiveBlockingLock</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">ptcon</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="n">in_buf</span> <span class="p">,</span>
			<span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="n">out_buf</span><span class="p">,</span>
			<span class="kt">int</span> <span class="o">*</span><span class="n">bytes_returned</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">checkSMB</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">length</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">is_valid_oplock_break</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">backup_cred</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">is_size_safe_to_change</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifsInodeInfo</span> <span class="o">*</span><span class="p">,</span> <span class="n">__u64</span> <span class="n">eof</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_update_eof</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifsInodeInfo</span> <span class="o">*</span><span class="n">cifsi</span><span class="p">,</span> <span class="n">loff_t</span> <span class="n">offset</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bytes_written</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">cifsFileInfo</span> <span class="o">*</span><span class="n">find_writable_file</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifsInodeInfo</span> <span class="o">*</span><span class="p">,</span> <span class="n">bool</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">cifsFileInfo</span> <span class="o">*</span><span class="n">find_readable_file</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifsInodeInfo</span> <span class="o">*</span><span class="p">,</span> <span class="n">bool</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">smbCalcSize</span><span class="p">(</span><span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="n">ptr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">decode_negTokenInit</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">security_blob</span><span class="p">,</span> <span class="kt">int</span> <span class="n">length</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_convert_address</span><span class="p">(</span><span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">dst</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_set_port</span><span class="p">(</span><span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">port</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_fill_sockaddr</span><span class="p">(</span><span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">dst</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">src</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span>
				<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">port</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">map_smb_to_linux_error</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">bool</span> <span class="n">logErr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">header_assemble</span><span class="p">(</span><span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="cm">/* command */</span> <span class="p">,</span>
			    <span class="k">const</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="cm">/* length of</span>
<span class="cm">			    fixed section (word count) in two byte units */</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">small_smb_init_no_tc</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">smb_cmd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">wct</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">,</span>
				<span class="kt">void</span> <span class="o">**</span><span class="n">request_buf</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFS_SessSetup</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">,</span>
			     <span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_cp</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">timespec</span> <span class="n">cifs_NTtimeToUnix</span><span class="p">(</span><span class="n">__le64</span> <span class="n">utc_nanoseconds_since_1601</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u64</span> <span class="n">cifs_UnixTimeToNT</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">timespec</span> <span class="n">cnvrtDosUnixTm</span><span class="p">(</span><span class="n">__le16</span> <span class="n">le_date</span><span class="p">,</span> <span class="n">__le16</span> <span class="n">le_time</span><span class="p">,</span>
				      <span class="kt">int</span> <span class="n">offset</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_set_oplock_level</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifsInodeInfo</span> <span class="o">*</span><span class="n">cinode</span><span class="p">,</span> <span class="n">__u32</span> <span class="n">oplock</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">cifsFileInfo</span> <span class="o">*</span><span class="n">cifs_new_fileinfo</span><span class="p">(</span><span class="n">__u16</span> <span class="n">fileHandle</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="k">struct</span> <span class="n">tcon_link</span> <span class="o">*</span><span class="n">tlink</span><span class="p">,</span>
				<span class="n">__u32</span> <span class="n">oplock</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_posix_open</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">full_path</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">**</span><span class="n">pinode</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="n">sb</span><span class="p">,</span>
				<span class="kt">int</span> <span class="n">mode</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">f_flags</span><span class="p">,</span>
				<span class="n">__u32</span> <span class="o">*</span><span class="n">poplock</span><span class="p">,</span> <span class="n">__u16</span> <span class="o">*</span><span class="n">pnetfid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">cifs_fill_uniqueid</span><span class="p">(</span><span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="n">sb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_unix_basic_to_fattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">,</span>
				     <span class="n">FILE_UNIX_BASIC_INFO</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_fattr_to_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">cifs_iget</span><span class="p">(</span><span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="n">sb</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_get_file_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">filp</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_get_inode_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">**</span><span class="n">pinode</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">search_path</span><span class="p">,</span>
			<span class="n">FILE_ALL_INFO</span> <span class="o">*</span><span class="n">pfile_info</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="n">sb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u16</span> <span class="o">*</span><span class="n">pfid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_get_file_info_unix</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">filp</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_get_inode_info_unix</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">**</span><span class="n">pinode</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">search_path</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="n">sb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_acl_to_fattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span>
			      <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u16</span> <span class="o">*</span><span class="n">pfid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">id_mode_to_cifs_acl</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="n">__u64</span><span class="p">,</span>
					<span class="n">uid_t</span><span class="p">,</span> <span class="n">gid_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">cifs_ntsd</span> <span class="o">*</span><span class="n">get_cifs_acl</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">set_cifs_acl</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_ntsd</span> <span class="o">*</span><span class="p">,</span> <span class="n">__u32</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">dequeue_mid</span><span class="p">(</span><span class="k">struct</span> <span class="n">mid_q_entry</span> <span class="o">*</span><span class="n">mid</span><span class="p">,</span> <span class="n">bool</span> <span class="n">malformed</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_read_from_socket</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
		     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">to_read</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_readv_from_socket</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="n">iov_orig</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr_segs</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">to_read</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_setup_cifs_sb</span><span class="p">(</span><span class="k">struct</span> <span class="n">smb_vol</span> <span class="o">*</span><span class="n">pvolume_info</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_match_super</span><span class="p">(</span><span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_cleanup_volume_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">smb_vol</span> <span class="o">*</span><span class="n">pvolume_info</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">smb_vol</span> <span class="o">*</span><span class="n">cifs_get_volume_info</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">mount_data</span><span class="p">,</span>
					    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">devname</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_mount</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">smb_vol</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_umount</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#if IS_ENABLED(CONFIG_CIFS_DFS_UPCALL)</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_dfs_release_automount_timer</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else </span><span class="cm">/* ! IS_ENABLED(CONFIG_CIFS_DFS_UPCALL) */</span><span class="cp"></span>
<span class="cp">#define cifs_dfs_release_automount_timer()	do { } while (0)</span>
<span class="cp">#endif </span><span class="cm">/* ! IS_ENABLED(CONFIG_CIFS_DFS_UPCALL) */</span><span class="cp"></span>

<span class="kt">void</span> <span class="n">cifs_proc_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">cifs_proc_clean</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_negotiate_protocol</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_setup_session</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_info</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBNegotiate</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSTCon</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tree</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSFindFirst</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
		<span class="n">__u16</span> <span class="o">*</span><span class="n">searchHandle</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">search_flags</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">cifs_search_info</span> <span class="o">*</span><span class="n">psrch_inf</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">map</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">dirsep</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSFindNext</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
		<span class="n">__u16</span> <span class="n">searchHandle</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">search_flags</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">cifs_search_info</span> <span class="o">*</span><span class="n">psrch_inf</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSFindClose</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u16</span> <span class="n">search_handle</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQFileInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="n">u16</span> <span class="n">netfid</span><span class="p">,</span> <span class="n">FILE_ALL_INFO</span> <span class="o">*</span><span class="n">pFindData</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQPathInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
			<span class="n">FILE_ALL_INFO</span> <span class="o">*</span><span class="n">findData</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">legacy</span> <span class="cm">/* whether to use old info level */</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SMBQueryInformation</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
			<span class="n">FILE_ALL_INFO</span> <span class="o">*</span><span class="n">findData</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBUnixQFileInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="n">u16</span> <span class="n">netfid</span><span class="p">,</span> <span class="n">FILE_UNIX_BASIC_INFO</span> <span class="o">*</span><span class="n">pFindData</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBUnixQPathInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
			<span class="n">FILE_UNIX_BASIC_INFO</span> <span class="o">*</span><span class="n">pFindData</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSGetDFSRefer</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">dfs_info3_param</span> <span class="o">**</span><span class="n">target_nodes</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">number_of_nodes_in_array</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">get_dfs_path</span><span class="p">(</span><span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">pSesInfo</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">old_path</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">pnum_referrals</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">dfs_info3_param</span> <span class="o">**</span><span class="n">preferrals</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">reset_cifs_unix_caps</span><span class="p">(</span><span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">smb_vol</span> <span class="o">*</span><span class="n">vol</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQFSInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">kstatfs</span> <span class="o">*</span><span class="n">FSData</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SMBOldQFSInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">kstatfs</span> <span class="o">*</span><span class="n">FSData</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetFSUnixInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="n">__u64</span> <span class="n">cap</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQFSAttributeInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQFSDeviceInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQFSUnixInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQFSPosixInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">kstatfs</span> <span class="o">*</span><span class="n">FSData</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetPathInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span> <span class="k">const</span> <span class="n">FILE_BASIC_INFO</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetFileInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">FILE_BASIC_INFO</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">fid</span><span class="p">,</span>
			<span class="n">__u32</span> <span class="n">pid_of_opener</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetFileDisposition</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="n">bool</span> <span class="n">delete_file</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">fid</span><span class="p">,</span> <span class="n">__u32</span> <span class="n">pid_of_opener</span><span class="p">);</span>
<span class="cp">#if 0</span><span class="c"></span>
<span class="c">extern int CIFSSMBSetAttrLegacy(int xid, struct cifs_tcon *tcon,</span>
<span class="c">			char *fileName, __u16 dos_attributes,</span>
<span class="c">			const struct nls_table *nls_codepage);</span>
<span class="cp">#endif /* possibly unneeded function */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetEOF</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span> <span class="n">__u64</span> <span class="n">size</span><span class="p">,</span>
			<span class="n">bool</span> <span class="n">setAllocationSizeFlag</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetFileSize</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			 <span class="n">__u64</span> <span class="n">size</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">fileHandle</span><span class="p">,</span> <span class="n">__u32</span> <span class="n">opener_pid</span><span class="p">,</span>
			<span class="n">bool</span> <span class="n">AllocSizeFlag</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">cifs_unix_set_info_args</span> <span class="p">{</span>
	<span class="n">__u64</span>	<span class="n">ctime</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">atime</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">mtime</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">mode</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">uid</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">gid</span><span class="p">;</span>
	<span class="n">dev_t</span>	<span class="n">device</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBUnixSetFileInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
				  <span class="k">const</span> <span class="k">struct</span> <span class="n">cifs_unix_set_info_args</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span>
				  <span class="n">u16</span> <span class="n">fid</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pid_of_opener</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBUnixSetPathInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">pTcon</span><span class="p">,</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">cifs_unix_set_info_args</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBMkDir</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">newName</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBRmDir</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSPOSIXDelFile</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">type</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBDelFile</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBRename</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fromName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">toName</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBRenameOpenFile</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">pTcon</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">netfid</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">target_name</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSCreateHardLink</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fromName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">toName</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSUnixCreateHardLink</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fromName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">toName</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSUnixCreateSymLink</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fromName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">toName</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBUnixQuerySymLink</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">syminfo</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_CIFS_SYMLINK_EXPERIMENTAL</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBQueryReparseLinkInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
			<span class="kt">char</span> <span class="o">*</span><span class="n">symlinkinfo</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">,</span> <span class="n">__u16</span> <span class="n">fid</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* temporarily unused until cifs_symlink fixed */</span><span class="cp"></span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBOpen</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">disposition</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">access_flags</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">omode</span><span class="p">,</span>
			<span class="n">__u16</span> <span class="o">*</span><span class="n">netfid</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">pOplock</span><span class="p">,</span> <span class="n">FILE_ALL_INFO</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SMBLegacyOpen</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">disposition</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">access_flags</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">omode</span><span class="p">,</span>
			<span class="n">__u16</span> <span class="o">*</span><span class="n">netfid</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">pOplock</span><span class="p">,</span> <span class="n">FILE_ALL_INFO</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSPOSIXCreate</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="n">u32</span> <span class="n">posix_flags</span><span class="p">,</span> <span class="n">__u64</span> <span class="n">mode</span><span class="p">,</span> <span class="n">__u16</span> <span class="o">*</span><span class="n">netfid</span><span class="p">,</span>
			<span class="n">FILE_UNIX_BASIC_INFO</span> <span class="o">*</span><span class="n">pRetData</span><span class="p">,</span>
			<span class="n">__u32</span> <span class="o">*</span><span class="n">pOplock</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBClose</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">smb_file_id</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBFlush</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">smb_file_id</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBRead</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_io_parms</span> <span class="o">*</span><span class="n">io_parms</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">nbytes</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">buf</span><span class="p">,</span>
			<span class="kt">int</span> <span class="o">*</span><span class="n">return_buf_type</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBWrite</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_io_parms</span> <span class="o">*</span><span class="n">io_parms</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">nbytes</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ubuf</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">long_op</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBWrite2</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_io_parms</span> <span class="o">*</span><span class="n">io_parms</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">nbytes</span><span class="p">,</span> <span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">nvec</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">long_op</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSGetSrvInodeNumber</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span> <span class="n">__u64</span> <span class="o">*</span><span class="n">inode_number</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_lockv</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u16</span> <span class="n">netfid</span><span class="p">,</span>
		      <span class="k">const</span> <span class="n">__u8</span> <span class="n">lock_type</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u32</span> <span class="n">num_unlock</span><span class="p">,</span>
		      <span class="k">const</span> <span class="n">__u32</span> <span class="n">num_lock</span><span class="p">,</span> <span class="n">LOCKING_ANDX_RANGE</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBLock</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u16</span> <span class="n">netfid</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u32</span> <span class="n">netpid</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u64</span> <span class="n">len</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u64</span> <span class="n">offset</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u32</span> <span class="n">numUnlock</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u32</span> <span class="n">numLock</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u8</span> <span class="n">lockType</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">bool</span> <span class="n">waitFlag</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u8</span> <span class="n">oplock_level</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBPosixLock</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u16</span> <span class="n">smb_file_id</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u32</span> <span class="n">netpid</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">get_flag</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u64</span> <span class="n">len</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file_lock</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u16</span> <span class="n">lock_type</span><span class="p">,</span> <span class="k">const</span> <span class="n">bool</span> <span class="n">waitFlag</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBTDis</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBEcho</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBLogoff</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">ses</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="n">sesInfoAlloc</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">sesInfoFree</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tconInfoAlloc</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">tconInfoFree</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_sign_smb</span><span class="p">(</span><span class="k">struct</span> <span class="n">smb_hdr</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="p">,</span> <span class="n">__u32</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_sign_smb2</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n_vec</span><span class="p">,</span> <span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="p">,</span>
			  <span class="n">__u32</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_verify_signature</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr_iov</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="n">server</span><span class="p">,</span>
				<span class="n">__u32</span> <span class="n">expected_sequence_number</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SMBNTencrypt</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">setup_ntlm_response</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">setup_ntlmv2_rsp</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cifs_crypto_shash_allocate</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_crypto_shash_release</span><span class="p">(</span><span class="k">struct</span> <span class="n">TCP_Server_Info</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">calc_seckey</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_ses</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_CIFS_WEAK_PW_HASH</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">calc_lanman_hash</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">password</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cryptkey</span><span class="p">,</span>
				<span class="n">bool</span> <span class="n">encrypt</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">lnm_session_key</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CIFS_WEAK_PW_HASH */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_CIFS_DNOTIFY_EXPERIMENTAL </span><span class="cm">/* unused temporarily */</span><span class="cp"></span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBNotify</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">notify_subdirs</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u16</span> <span class="n">netfid</span><span class="p">,</span>
			<span class="n">__u32</span> <span class="n">filter</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">int</span> <span class="n">multishot</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* was needed for dnotify, and will be needed for inotify when VFS fix */</span><span class="cp"></span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBCopy</span><span class="p">(</span><span class="kt">int</span> <span class="n">xid</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">source_tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fromName</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">__u16</span> <span class="n">target_tid</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">toName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">CIFSSMBQAllEAs</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ea_name</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">EAData</span><span class="p">,</span>
			<span class="kt">size_t</span> <span class="n">bufsize</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetEA</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ea_name</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">ea_value</span><span class="p">,</span> <span class="k">const</span> <span class="n">__u16</span> <span class="n">ea_value_len</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBGetCIFSACL</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="n">__u16</span> <span class="n">fid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_ntsd</span> <span class="o">**</span><span class="n">acl_inf</span><span class="p">,</span> <span class="n">__u32</span> <span class="o">*</span><span class="n">buflen</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetCIFSACL</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="p">,</span> <span class="n">__u16</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">cifs_ntsd</span> <span class="o">*</span><span class="p">,</span> <span class="n">__u32</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBGetPosixACL</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">searchName</span><span class="p">,</span>
		<span class="kt">char</span> <span class="o">*</span><span class="n">acl_inf</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">acl_type</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSSMBSetPosixACL</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fileName</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">local_acl</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">acl_type</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">nls_codepage</span><span class="p">,</span> <span class="kt">int</span> <span class="n">remap_special_chars</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSGetExtAttr</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cifs_tcon</span> <span class="o">*</span><span class="n">tcon</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">int</span> <span class="n">netfid</span><span class="p">,</span> <span class="n">__u64</span> <span class="o">*</span><span class="n">pExtAttrBits</span><span class="p">,</span> <span class="n">__u64</span> <span class="o">*</span><span class="n">pMask</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">cifs_autodisable_serverino</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">CIFSCouldBeMFSymlink</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">CIFSCheckMFSymlink</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">cifs_sb_info</span> <span class="o">*</span><span class="n">cifs_sb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">xid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mdfour</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">E_md4hash</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">passwd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p16</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">nls_table</span> <span class="o">*</span><span class="n">codepage</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">SMBencrypt</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">passwd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">c8</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">p24</span><span class="p">);</span>

<span class="cm">/* asynchronous read support */</span>
<span class="k">struct</span> <span class="n">cifs_readdata</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">kref</span>			<span class="n">refcount</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>		<span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">completion</span>		<span class="n">done</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cifsFileInfo</span>		<span class="o">*</span><span class="n">cfile</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">address_space</span>		<span class="o">*</span><span class="n">mapping</span><span class="p">;</span>
	<span class="n">__u64</span>				<span class="n">offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">bytes</span><span class="p">;</span>
	<span class="n">pid_t</span>				<span class="n">pid</span><span class="p">;</span>
	<span class="kt">int</span>				<span class="n">result</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>		<span class="n">pages</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span>		<span class="n">work</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">marshal_iov</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">cifs_readdata</span> <span class="o">*</span><span class="n">rdata</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">remaining</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">nr_iov</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kvec</span>			<span class="n">iov</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">cifs_readdata_release</span><span class="p">(</span><span class="k">struct</span> <span class="n">kref</span> <span class="o">*</span><span class="n">refcount</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">cifs_async_readv</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_readdata</span> <span class="o">*</span><span class="n">rdata</span><span class="p">);</span>

<span class="cm">/* asynchronous write support */</span>
<span class="k">struct</span> <span class="n">cifs_writedata</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">kref</span>			<span class="n">refcount</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>		<span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">completion</span>		<span class="n">done</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">writeback_sync_modes</span>	<span class="n">sync_mode</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span>		<span class="n">work</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">cifsFileInfo</span>		<span class="o">*</span><span class="n">cfile</span><span class="p">;</span>
	<span class="n">__u64</span>				<span class="n">offset</span><span class="p">;</span>
	<span class="n">pid_t</span>				<span class="n">pid</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">bytes</span><span class="p">;</span>
	<span class="kt">int</span>				<span class="n">result</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">marshal_iov</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">kvec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">cifs_writedata</span> <span class="o">*</span><span class="n">wdata</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">nr_pages</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">page</span>			<span class="o">*</span><span class="n">pages</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">cifs_async_writev</span><span class="p">(</span><span class="k">struct</span> <span class="n">cifs_writedata</span> <span class="o">*</span><span class="n">wdata</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">cifs_writev_complete</span><span class="p">(</span><span class="k">struct</span> <span class="n">work_struct</span> <span class="o">*</span><span class="n">work</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">cifs_writedata</span> <span class="o">*</span><span class="n">cifs_writedata_alloc</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr_pages</span><span class="p">,</span>
						<span class="n">work_func_t</span> <span class="n">complete</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">cifs_writedata_release</span><span class="p">(</span><span class="k">struct</span> <span class="n">kref</span> <span class="o">*</span><span class="n">refcount</span><span class="p">);</span>

<span class="cp">#endif			</span><span class="cm">/* _CIFSPROTO_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
