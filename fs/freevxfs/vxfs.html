<!DOCTYPE html>
<html><head><title>joekychen/linux » fs › freevxfs › vxfs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>vxfs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2000-2001 Christoph Hellwig.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> * modification, are permitted provided that the following conditions</span>
<span class="cm"> * are met:</span>
<span class="cm"> * 1. Redistributions of source code must retain the above copyright</span>
<span class="cm"> *    notice, this list of conditions, and the following disclaimer,</span>
<span class="cm"> *    without modification.</span>
<span class="cm"> * 2. The name of the author may not be used to endorse or promote products</span>
<span class="cm"> *    derived from this software without specific prior written permission.</span>
<span class="cm"> *</span>
<span class="cm"> * Alternatively, this software may be distributed under the terms of the</span>
<span class="cm"> * GNU General Public License (&quot;GPL&quot;).</span>
<span class="cm"> *</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&#39;&#39; AND</span>
<span class="cm"> * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span class="cm"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<span class="cm"> * ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR</span>
<span class="cm"> * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<span class="cm"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</span>
<span class="cm"> * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span>
<span class="cm"> * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<span class="cm"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<span class="cm"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
<span class="cm"> * SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _VXFS_SUPER_H_</span>
<span class="cp">#define _VXFS_SUPER_H_</span>

<span class="cm">/*</span>
<span class="cm"> * Veritas filesystem driver - superblock structure.</span>
<span class="cm"> *</span>
<span class="cm"> * This file contains the definition of the disk and core</span>
<span class="cm"> * superblocks of the Veritas Filesystem.</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>


<span class="cm">/*</span>
<span class="cm"> * Data types for use with the VxFS ondisk format.</span>
<span class="cm"> */</span>
<span class="k">typedef</span>	<span class="kt">int32_t</span>		<span class="n">vx_daddr_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">int32_t</span>		<span class="n">vx_ino_t</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Superblock magic number (vxfs_super-&gt;vs_magic).</span>
<span class="cm"> */</span>
<span class="cp">#define VXFS_SUPER_MAGIC	0xa501FCF5</span>

<span class="cm">/*</span>
<span class="cm"> * The root inode.</span>
<span class="cm"> */</span>
<span class="cp">#define VXFS_ROOT_INO		2</span>

<span class="cm">/*</span>
<span class="cm"> * Num of entries in free extent array</span>
<span class="cm"> */</span>
<span class="cp">#define VXFS_NEFREE		32</span>


<span class="cm">/*</span>
<span class="cm"> * VxFS superblock (disk).</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">vxfs_sb</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Readonly fields for the version 1 superblock.</span>
<span class="cm">	 *</span>
<span class="cm">	 * Lots of this fields are no more used by version 2</span>
<span class="cm">	 * and never filesystems.</span>
<span class="cm">	 */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_magic</span><span class="p">;</span>		<span class="cm">/* Magic number */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_version</span><span class="p">;</span>		<span class="cm">/* VxFS version */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_ctime</span><span class="p">;</span>		<span class="cm">/* create time - secs */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_cutime</span><span class="p">;</span>		<span class="cm">/* create time - usecs */</span>
	<span class="kt">int32_t</span>		<span class="n">__unused1</span><span class="p">;</span>		<span class="cm">/* unused */</span>
	<span class="kt">int32_t</span>		<span class="n">__unused2</span><span class="p">;</span>		<span class="cm">/* unused */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_old_logstart</span><span class="p">;</span>	<span class="cm">/* obsolete */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_old_logend</span><span class="p">;</span>		<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_bsize</span><span class="p">;</span>		<span class="cm">/* block size */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_size</span><span class="p">;</span>		<span class="cm">/* number of blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_dsize</span><span class="p">;</span>		<span class="cm">/* number of data blocks */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_old_ninode</span><span class="p">;</span>		<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_nau</span><span class="p">;</span>		<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">__unused3</span><span class="p">;</span>		<span class="cm">/* unused */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_defiextsize</span><span class="p">;</span>	<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_ilbsize</span><span class="p">;</span>		<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_immedlen</span><span class="p">;</span>		<span class="cm">/* size of immediate data area */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_ndaddr</span><span class="p">;</span>		<span class="cm">/* number of direct extentes */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_firstau</span><span class="p">;</span>		<span class="cm">/* address of first AU */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_emap</span><span class="p">;</span>		<span class="cm">/* offset of extent map in AU */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_imap</span><span class="p">;</span>		<span class="cm">/* offset of inode map in AU */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_iextop</span><span class="p">;</span>		<span class="cm">/* offset of ExtOp. map in AU */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_istart</span><span class="p">;</span>		<span class="cm">/* offset of inode list in AU */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_bstart</span><span class="p">;</span>		<span class="cm">/* offset of fdblock in AU */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_femap</span><span class="p">;</span>		<span class="cm">/* aufirst + emap */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_fimap</span><span class="p">;</span>		<span class="cm">/* aufirst + imap */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_fiextop</span><span class="p">;</span>		<span class="cm">/* aufirst + iextop */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_fistart</span><span class="p">;</span>		<span class="cm">/* aufirst + istart */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_fbstart</span><span class="p">;</span>		<span class="cm">/* aufirst + bstart */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_nindir</span><span class="p">;</span>		<span class="cm">/* number of entries in indir */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_aulen</span><span class="p">;</span>		<span class="cm">/* length of AU in blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_auimlen</span><span class="p">;</span>		<span class="cm">/* length of imap in blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_auemlen</span><span class="p">;</span>		<span class="cm">/* length of emap in blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_auilen</span><span class="p">;</span>		<span class="cm">/* length of ilist in blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_aupad</span><span class="p">;</span>		<span class="cm">/* length of pad in blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_aublocks</span><span class="p">;</span>		<span class="cm">/* data blocks in AU */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_maxtier</span><span class="p">;</span>		<span class="cm">/* log base 2 of aublocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_inopb</span><span class="p">;</span>		<span class="cm">/* number of inodes per blk */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_inopau</span><span class="p">;</span>		<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_inopilb</span><span class="p">;</span>		<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_ndiripau</span><span class="p">;</span>	<span class="cm">/* obsolete */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_iaddrlen</span><span class="p">;</span>		<span class="cm">/* size of indirect addr ext. */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_bshift</span><span class="p">;</span>		<span class="cm">/* log base 2 of bsize */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_inoshift</span><span class="p">;</span>		<span class="cm">/* log base 2 of inobp */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_bmask</span><span class="p">;</span>		<span class="cm">/* ~( bsize - 1 ) */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_boffmask</span><span class="p">;</span>		<span class="cm">/* bsize - 1 */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_inomask</span><span class="p">;</span>		<span class="cm">/* old_inopilb - 1 */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_checksum</span><span class="p">;</span>		<span class="cm">/* checksum of V1 data */</span>
	
	<span class="cm">/*</span>
<span class="cm">	 * Version 1, writable</span>
<span class="cm">	 */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_free</span><span class="p">;</span>		<span class="cm">/* number of free blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_ifree</span><span class="p">;</span>		<span class="cm">/* number of free inodes */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_efree</span><span class="p">[</span><span class="n">VXFS_NEFREE</span><span class="p">];</span>	<span class="cm">/* number of free extents by size */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_flags</span><span class="p">;</span>		<span class="cm">/* flags ?!? */</span>
	<span class="n">u_int8_t</span>	<span class="n">vs_mod</span><span class="p">;</span>			<span class="cm">/* filesystem has been changed */</span>
	<span class="n">u_int8_t</span>	<span class="n">vs_clean</span><span class="p">;</span>		<span class="cm">/* clean FS */</span>
	<span class="n">u_int16_t</span>	<span class="n">__unused4</span><span class="p">;</span>		<span class="cm">/* unused */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_firstlogid</span><span class="p">;</span>		<span class="cm">/* mount time log ID */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_wtime</span><span class="p">;</span>		<span class="cm">/* last time written - sec */</span>
	<span class="n">u_int32_t</span>	<span class="n">vs_wutime</span><span class="p">;</span>		<span class="cm">/* last time written - usec */</span>
	<span class="n">u_int8_t</span>	<span class="n">vs_fname</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>		<span class="cm">/* FS name */</span>
	<span class="n">u_int8_t</span>	<span class="n">vs_fpack</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>		<span class="cm">/* FS pack name */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_logversion</span><span class="p">;</span>		<span class="cm">/* log format version */</span>
	<span class="kt">int32_t</span>		<span class="n">__unused5</span><span class="p">;</span>		<span class="cm">/* unused */</span>
	
	<span class="cm">/*</span>
<span class="cm">	 * Version 2, Read-only</span>
<span class="cm">	 */</span>
	<span class="n">vx_daddr_t</span>	<span class="n">vs_oltext</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>		<span class="cm">/* OLT extent and replica */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_oltsize</span><span class="p">;</span>		<span class="cm">/* OLT extent size */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_iauimlen</span><span class="p">;</span>		<span class="cm">/* size of inode map */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_iausize</span><span class="p">;</span>		<span class="cm">/* size of IAU in blocks */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_dinosize</span><span class="p">;</span>		<span class="cm">/* size of inode in bytes */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_old_dniaddr</span><span class="p">;</span>		<span class="cm">/* indir levels per inode */</span>
	<span class="kt">int32_t</span>		<span class="n">vs_checksum2</span><span class="p">;</span>		<span class="cm">/* checksum of V2 RO */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Actually much more...</span>
<span class="cm">	 */</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * In core superblock filesystem private data for VxFS.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">vxfs_sb_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">vxfs_sb</span>		<span class="o">*</span><span class="n">vsi_raw</span><span class="p">;</span>	<span class="cm">/* raw (on disk) superblock */</span>
	<span class="k">struct</span> <span class="n">buffer_head</span>	<span class="o">*</span><span class="n">vsi_bp</span><span class="p">;</span>	<span class="cm">/* buffer for raw superblock*/</span>
	<span class="k">struct</span> <span class="n">inode</span>		<span class="o">*</span><span class="n">vsi_fship</span><span class="p">;</span>	<span class="cm">/* fileset header inode */</span>
	<span class="k">struct</span> <span class="n">inode</span>		<span class="o">*</span><span class="n">vsi_ilist</span><span class="p">;</span>	<span class="cm">/* inode list inode */</span>
	<span class="k">struct</span> <span class="n">inode</span>		<span class="o">*</span><span class="n">vsi_stilist</span><span class="p">;</span>	<span class="cm">/* structural inode list inode */</span>
	<span class="n">u_long</span>			<span class="n">vsi_iext</span><span class="p">;</span>	<span class="cm">/* initial inode list */</span>
	<span class="n">ino_t</span>			<span class="n">vsi_fshino</span><span class="p">;</span>	<span class="cm">/* fileset header inode */</span>
	<span class="n">daddr_t</span>			<span class="n">vsi_oltext</span><span class="p">;</span>	<span class="cm">/* OLT extent */</span>
	<span class="n">daddr_t</span>			<span class="n">vsi_oltsize</span><span class="p">;</span>	<span class="cm">/* OLT size */</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * File modes.  File types above 0xf000 are vxfs internal only, they should</span>
<span class="cm"> * not be passed back to higher levels of the system.  vxfs file types must</span>
<span class="cm"> * never have one of the regular file type bits set.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">vxfs_mode</span> <span class="p">{</span>
	<span class="n">VXFS_ISUID</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>	<span class="cm">/* setuid */</span>
	<span class="n">VXFS_ISGID</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>	<span class="cm">/* setgid */</span>
	<span class="n">VXFS_ISVTX</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>	<span class="cm">/* sticky bit */</span>
	<span class="n">VXFS_IREAD</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>	<span class="cm">/* read */</span>
	<span class="n">VXFS_IWRITE</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>	<span class="cm">/* write */</span>
	<span class="n">VXFS_IEXEC</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>	<span class="cm">/* exec */</span>

	<span class="n">VXFS_IFIFO</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>	<span class="cm">/* Named pipe */</span>
	<span class="n">VXFS_IFCHR</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>	<span class="cm">/* Character device */</span>
	<span class="n">VXFS_IFDIR</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>	<span class="cm">/* Directory */</span>
	<span class="n">VXFS_IFNAM</span> <span class="o">=</span> <span class="mh">0x00005000</span><span class="p">,</span>	<span class="cm">/* Xenix device ?? */</span>
	<span class="n">VXFS_IFBLK</span> <span class="o">=</span> <span class="mh">0x00006000</span><span class="p">,</span>	<span class="cm">/* Block device */</span>
	<span class="n">VXFS_IFREG</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>	<span class="cm">/* Regular file */</span>
	<span class="n">VXFS_IFCMP</span> <span class="o">=</span> <span class="mh">0x00009000</span><span class="p">,</span>	<span class="cm">/* Compressed file ?!? */</span>
	<span class="n">VXFS_IFLNK</span> <span class="o">=</span> <span class="mh">0x0000a000</span><span class="p">,</span>	<span class="cm">/* Symlink */</span>
	<span class="n">VXFS_IFSOC</span> <span class="o">=</span> <span class="mh">0x0000c000</span><span class="p">,</span>	<span class="cm">/* Socket */</span>

	<span class="cm">/* VxFS internal */</span>
	<span class="n">VXFS_IFFSH</span> <span class="o">=</span> <span class="mh">0x10000000</span><span class="p">,</span>	<span class="cm">/* Fileset header */</span>
	<span class="n">VXFS_IFILT</span> <span class="o">=</span> <span class="mh">0x20000000</span><span class="p">,</span>	<span class="cm">/* Inode list */</span>
	<span class="n">VXFS_IFIAU</span> <span class="o">=</span> <span class="mh">0x30000000</span><span class="p">,</span>	<span class="cm">/* Inode allocation unit */</span>
	<span class="n">VXFS_IFCUT</span> <span class="o">=</span> <span class="mh">0x40000000</span><span class="p">,</span>	<span class="cm">/* Current usage table */</span>
	<span class="n">VXFS_IFATT</span> <span class="o">=</span> <span class="mh">0x50000000</span><span class="p">,</span>	<span class="cm">/* Attr. inode */</span>
	<span class="n">VXFS_IFLCT</span> <span class="o">=</span> <span class="mh">0x60000000</span><span class="p">,</span>	<span class="cm">/* Link count table */</span>
	<span class="n">VXFS_IFIAT</span> <span class="o">=</span> <span class="mh">0x70000000</span><span class="p">,</span>	<span class="cm">/* Indirect attribute file */</span>
	<span class="n">VXFS_IFEMR</span> <span class="o">=</span> <span class="mh">0x80000000</span><span class="p">,</span>	<span class="cm">/* Extent map reorg file */</span>
	<span class="n">VXFS_IFQUO</span> <span class="o">=</span> <span class="mh">0x90000000</span><span class="p">,</span>	<span class="cm">/* BSD quota file */</span>
	<span class="n">VXFS_IFPTI</span> <span class="o">=</span> <span class="mh">0xa0000000</span><span class="p">,</span>	<span class="cm">/* &quot;Pass through&quot; inode */</span>
	<span class="n">VXFS_IFLAB</span> <span class="o">=</span> <span class="mh">0x11000000</span><span class="p">,</span>	<span class="cm">/* Device label file */</span>
	<span class="n">VXFS_IFOLT</span> <span class="o">=</span> <span class="mh">0x12000000</span><span class="p">,</span>	<span class="cm">/* OLT file */</span>
	<span class="n">VXFS_IFLOG</span> <span class="o">=</span> <span class="mh">0x13000000</span><span class="p">,</span>	<span class="cm">/* Log file */</span>
	<span class="n">VXFS_IFEMP</span> <span class="o">=</span> <span class="mh">0x14000000</span><span class="p">,</span>	<span class="cm">/* Extent map file */</span>
	<span class="n">VXFS_IFEAU</span> <span class="o">=</span> <span class="mh">0x15000000</span><span class="p">,</span>	<span class="cm">/* Extent AU file */</span>
	<span class="n">VXFS_IFAUS</span> <span class="o">=</span> <span class="mh">0x16000000</span><span class="p">,</span>	<span class="cm">/* Extent AU summary file */</span>
	<span class="n">VXFS_IFDEV</span> <span class="o">=</span> <span class="mh">0x17000000</span><span class="p">,</span>	<span class="cm">/* Device config file */</span>

<span class="p">};</span>

<span class="cp">#define	VXFS_TYPE_MASK		0xfffff000</span>

<span class="cp">#define VXFS_IS_TYPE(ip,type)	(((ip)-&gt;vii_mode &amp; VXFS_TYPE_MASK) == (type))</span>
<span class="cp">#define VXFS_ISFIFO(x)		VXFS_IS_TYPE((x),VXFS_IFIFO)</span>
<span class="cp">#define VXFS_ISCHR(x)		VXFS_IS_TYPE((x),VXFS_IFCHR)</span>
<span class="cp">#define VXFS_ISDIR(x)		VXFS_IS_TYPE((x),VXFS_IFDIR)</span>
<span class="cp">#define VXFS_ISNAM(x)		VXFS_IS_TYPE((x),VXFS_IFNAM)</span>
<span class="cp">#define VXFS_ISBLK(x)		VXFS_IS_TYPE((x),VXFS_IFBLK)</span>
<span class="cp">#define VXFS_ISLNK(x)		VXFS_IS_TYPE((x),VXFS_IFLNK)</span>
<span class="cp">#define VXFS_ISREG(x)		VXFS_IS_TYPE((x),VXFS_IFREG)</span>
<span class="cp">#define VXFS_ISCMP(x)		VXFS_IS_TYPE((x),VXFS_IFCMP)</span>
<span class="cp">#define VXFS_ISSOC(x)		VXFS_IS_TYPE((x),VXFS_IFSOC)</span>

<span class="cp">#define VXFS_ISFSH(x)		VXFS_IS_TYPE((x),VXFS_IFFSH)</span>
<span class="cp">#define VXFS_ISILT(x)		VXFS_IS_TYPE((x),VXFS_IFILT)</span>

<span class="cm">/*</span>
<span class="cm"> * Inmode organisation types.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">VXFS_ORG_NONE</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* Inode has *no* format ?!? */</span>
	<span class="n">VXFS_ORG_EXT4</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* Ext4 */</span>
	<span class="n">VXFS_ORG_IMMED</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* All data stored in inode */</span>
	<span class="n">VXFS_ORG_TYPED</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* Typed extents */</span>
<span class="p">};</span>

<span class="cp">#define VXFS_IS_ORG(ip,org)	((ip)-&gt;vii_orgtype == (org))</span>
<span class="cp">#define VXFS_ISNONE(ip)		VXFS_IS_ORG((ip), VXFS_ORG_NONE)</span>
<span class="cp">#define VXFS_ISEXT4(ip)		VXFS_IS_ORG((ip), VXFS_ORG_EXT4)</span>
<span class="cp">#define VXFS_ISIMMED(ip)	VXFS_IS_ORG((ip), VXFS_ORG_IMMED)</span>
<span class="cp">#define VXFS_ISTYPED(ip)	VXFS_IS_ORG((ip), VXFS_ORG_TYPED)</span>


<span class="cm">/*</span>
<span class="cm"> * Get filesystem private data from VFS inode.</span>
<span class="cm"> */</span>
<span class="cp">#define VXFS_INO(ip) \</span>
<span class="cp">	((struct vxfs_inode_info *)(ip)-&gt;i_private)</span>

<span class="cm">/*</span>
<span class="cm"> * Get filesystem private data from VFS superblock.</span>
<span class="cm"> */</span>
<span class="cp">#define VXFS_SBI(sbp) \</span>
<span class="cp">	((struct vxfs_sb_info *)(sbp)-&gt;s_fs_info)</span>

<span class="cp">#endif </span><span class="cm">/* _VXFS_SUPER_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
