<!DOCTYPE html>
<html><head><title>joekychen/linux » include › drm › i810_drm.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>i810_drm.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _I810_DRM_H_</span>
<span class="cp">#define _I810_DRM_H_</span>

<span class="cm">/* WARNING: These defines must be the same as what the Xserver uses.</span>
<span class="cm"> * if you change them, you must change the defines in the Xserver.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _I810_DEFINES_</span>
<span class="cp">#define _I810_DEFINES_</span>

<span class="cp">#define I810_DMA_BUF_ORDER		12</span>
<span class="cp">#define I810_DMA_BUF_SZ 		(1&lt;&lt;I810_DMA_BUF_ORDER)</span>
<span class="cp">#define I810_DMA_BUF_NR 		256</span>
<span class="cp">#define I810_NR_SAREA_CLIPRECTS 	8</span>

<span class="cm">/* Each region is a minimum of 64k, and there are at most 64 of them.</span>
<span class="cm"> */</span>
<span class="cp">#define I810_NR_TEX_REGIONS 64</span>
<span class="cp">#define I810_LOG_MIN_TEX_REGION_SIZE 16</span>
<span class="cp">#endif</span>

<span class="cp">#define I810_UPLOAD_TEX0IMAGE  0x1	</span><span class="cm">/* handled clientside */</span><span class="cp"></span>
<span class="cp">#define I810_UPLOAD_TEX1IMAGE  0x2	</span><span class="cm">/* handled clientside */</span><span class="cp"></span>
<span class="cp">#define I810_UPLOAD_CTX        0x4</span>
<span class="cp">#define I810_UPLOAD_BUFFERS    0x8</span>
<span class="cp">#define I810_UPLOAD_TEX0       0x10</span>
<span class="cp">#define I810_UPLOAD_TEX1       0x20</span>
<span class="cp">#define I810_UPLOAD_CLIPRECTS  0x40</span>

<span class="cm">/* Indices into buf.Setup where various bits of state are mirrored per</span>
<span class="cm"> * context and per buffer.  These can be fired at the card as a unit,</span>
<span class="cm"> * or in a piecewise fashion as required.</span>
<span class="cm"> */</span>

<span class="cm">/* Destbuffer state</span>
<span class="cm"> *    - backbuffer linear offset and pitch -- invarient in the current dri</span>
<span class="cm"> *    - zbuffer linear offset and pitch -- also invarient</span>
<span class="cm"> *    - drawing origin in back and depth buffers.</span>
<span class="cm"> *</span>
<span class="cm"> * Keep the depth/back buffer state here to accommodate private buffers</span>
<span class="cm"> * in the future.</span>
<span class="cm"> */</span>
<span class="cp">#define I810_DESTREG_DI0  0	</span><span class="cm">/* CMD_OP_DESTBUFFER_INFO (2 dwords) */</span><span class="cp"></span>
<span class="cp">#define I810_DESTREG_DI1  1</span>
<span class="cp">#define I810_DESTREG_DV0  2	</span><span class="cm">/* GFX_OP_DESTBUFFER_VARS (2 dwords) */</span><span class="cp"></span>
<span class="cp">#define I810_DESTREG_DV1  3</span>
<span class="cp">#define I810_DESTREG_DR0  4	</span><span class="cm">/* GFX_OP_DRAWRECT_INFO (4 dwords) */</span><span class="cp"></span>
<span class="cp">#define I810_DESTREG_DR1  5</span>
<span class="cp">#define I810_DESTREG_DR2  6</span>
<span class="cp">#define I810_DESTREG_DR3  7</span>
<span class="cp">#define I810_DESTREG_DR4  8</span>
<span class="cp">#define I810_DEST_SETUP_SIZE 10</span>

<span class="cm">/* Context state</span>
<span class="cm"> */</span>
<span class="cp">#define I810_CTXREG_CF0   0	</span><span class="cm">/* GFX_OP_COLOR_FACTOR */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_CF1   1</span>
<span class="cp">#define I810_CTXREG_ST0   2	</span><span class="cm">/* GFX_OP_STIPPLE */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_ST1   3</span>
<span class="cp">#define I810_CTXREG_VF    4	</span><span class="cm">/* GFX_OP_VERTEX_FMT */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MT    5	</span><span class="cm">/* GFX_OP_MAP_TEXELS */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MC0   6	</span><span class="cm">/* GFX_OP_MAP_COLOR_STAGES - stage 0 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MC1   7	</span><span class="cm">/* GFX_OP_MAP_COLOR_STAGES - stage 1 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MC2   8	</span><span class="cm">/* GFX_OP_MAP_COLOR_STAGES - stage 2 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MA0   9	</span><span class="cm">/* GFX_OP_MAP_ALPHA_STAGES - stage 0 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MA1   10	</span><span class="cm">/* GFX_OP_MAP_ALPHA_STAGES - stage 1 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_MA2   11	</span><span class="cm">/* GFX_OP_MAP_ALPHA_STAGES - stage 2 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_SDM   12	</span><span class="cm">/* GFX_OP_SRC_DEST_MONO */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_FOG   13	</span><span class="cm">/* GFX_OP_FOG_COLOR */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_B1    14	</span><span class="cm">/* GFX_OP_BOOL_1 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_B2    15	</span><span class="cm">/* GFX_OP_BOOL_2 */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_LCS   16	</span><span class="cm">/* GFX_OP_LINEWIDTH_CULL_SHADE_MODE */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_PV    17	</span><span class="cm">/* GFX_OP_PV_RULE -- Invarient! */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_ZA    18	</span><span class="cm">/* GFX_OP_ZBIAS_ALPHAFUNC */</span><span class="cp"></span>
<span class="cp">#define I810_CTXREG_AA    19	</span><span class="cm">/* GFX_OP_ANTIALIAS */</span><span class="cp"></span>
<span class="cp">#define I810_CTX_SETUP_SIZE 20</span>

<span class="cm">/* Texture state (per tex unit)</span>
<span class="cm"> */</span>
<span class="cp">#define I810_TEXREG_MI0  0	</span><span class="cm">/* GFX_OP_MAP_INFO (4 dwords) */</span><span class="cp"></span>
<span class="cp">#define I810_TEXREG_MI1  1</span>
<span class="cp">#define I810_TEXREG_MI2  2</span>
<span class="cp">#define I810_TEXREG_MI3  3</span>
<span class="cp">#define I810_TEXREG_MF   4	</span><span class="cm">/* GFX_OP_MAP_FILTER */</span><span class="cp"></span>
<span class="cp">#define I810_TEXREG_MLC  5	</span><span class="cm">/* GFX_OP_MAP_LOD_CTL */</span><span class="cp"></span>
<span class="cp">#define I810_TEXREG_MLL  6	</span><span class="cm">/* GFX_OP_MAP_LOD_LIMITS */</span><span class="cp"></span>
<span class="cp">#define I810_TEXREG_MCS  7	</span><span class="cm">/* GFX_OP_MAP_COORD_SETS ??? */</span><span class="cp"></span>
<span class="cp">#define I810_TEX_SETUP_SIZE 8</span>

<span class="cm">/* Flags for clear ioctl</span>
<span class="cm"> */</span>
<span class="cp">#define I810_FRONT   0x1</span>
<span class="cp">#define I810_BACK    0x2</span>
<span class="cp">#define I810_DEPTH   0x4</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="n">_drm_i810_init_func</span> <span class="p">{</span>
	<span class="n">I810_INIT_DMA</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">I810_CLEANUP_DMA</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">I810_INIT_DMA_1_4</span> <span class="o">=</span> <span class="mh">0x03</span>
<span class="p">}</span> <span class="n">drm_i810_init_func_t</span><span class="p">;</span>

<span class="cm">/* This is the init structure after v1.2 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_init</span> <span class="p">{</span>
	<span class="n">drm_i810_init_func_t</span> <span class="n">func</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mmio_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">buffers_offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sarea_priv_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ring_start</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ring_end</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ring_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">front_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">back_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">depth_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">overlay_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">overlay_physical</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">w</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">h</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pitch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pitch_bits</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_i810_init_t</span><span class="p">;</span>

<span class="cm">/* This is the init structure prior to v1.2 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_pre12_init</span> <span class="p">{</span>
	<span class="n">drm_i810_init_func_t</span> <span class="n">func</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mmio_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">buffers_offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">sarea_priv_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ring_start</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ring_end</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ring_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">front_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">back_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">depth_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">w</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">h</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pitch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pitch_bits</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_i810_pre12_init_t</span><span class="p">;</span>

<span class="cm">/* Warning: If you change the SAREA structure you must change the Xserver</span>
<span class="cm"> * structure as well */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_tex_region</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">next</span><span class="p">,</span> <span class="n">prev</span><span class="p">;</span>	<span class="cm">/* indices to form a circular LRU  */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">in_use</span><span class="p">;</span>	<span class="cm">/* owned by a client, or free? */</span>
	<span class="kt">int</span> <span class="n">age</span><span class="p">;</span>		<span class="cm">/* tracked by clients to update local LRU&#39;s */</span>
<span class="p">}</span> <span class="n">drm_i810_tex_region_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_sarea</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ContextState</span><span class="p">[</span><span class="n">I810_CTX_SETUP_SIZE</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">BufferState</span><span class="p">[</span><span class="n">I810_DEST_SETUP_SIZE</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">TexState</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">I810_TEX_SETUP_SIZE</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dirty</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nbox</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">drm_clip_rect</span> <span class="n">boxes</span><span class="p">[</span><span class="n">I810_NR_SAREA_CLIPRECTS</span><span class="p">];</span>

	<span class="cm">/* Maintain an LRU of contiguous regions of texture space.  If</span>
<span class="cm">	 * you think you own a region of texture memory, and it has an</span>
<span class="cm">	 * age different to the one you set, then you are mistaken and</span>
<span class="cm">	 * it has been stolen by another client.  If global texAge</span>
<span class="cm">	 * hasn&#39;t changed, there is no need to walk the list.</span>
<span class="cm">	 *</span>
<span class="cm">	 * These regions can be used as a proxy for the fine-grained</span>
<span class="cm">	 * texture information of other clients - by maintaining them</span>
<span class="cm">	 * in the same lru which is used to age their own textures,</span>
<span class="cm">	 * clients have an approximate lru for the whole of global</span>
<span class="cm">	 * texture space, and can make informed decisions as to which</span>
<span class="cm">	 * areas to kick out.  There is no need to choose whether to</span>
<span class="cm">	 * kick out your own texture or someone else&#39;s - simply eject</span>
<span class="cm">	 * them all in LRU order.</span>
<span class="cm">	 */</span>

	<span class="n">drm_i810_tex_region_t</span> <span class="n">texList</span><span class="p">[</span><span class="n">I810_NR_TEX_REGIONS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="cm">/* Last elt is sentinal */</span>
	<span class="kt">int</span> <span class="n">texAge</span><span class="p">;</span>		<span class="cm">/* last time texture was uploaded */</span>
	<span class="kt">int</span> <span class="n">last_enqueue</span><span class="p">;</span>	<span class="cm">/* last time a buffer was enqueued */</span>
	<span class="kt">int</span> <span class="n">last_dispatch</span><span class="p">;</span>	<span class="cm">/* age of the most recently dispatched buffer */</span>
	<span class="kt">int</span> <span class="n">last_quiescent</span><span class="p">;</span>	<span class="cm">/*  */</span>
	<span class="kt">int</span> <span class="n">ctxOwner</span><span class="p">;</span>		<span class="cm">/* last context to upload state */</span>

	<span class="kt">int</span> <span class="n">vertex_prim</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">pf_enabled</span><span class="p">;</span>		<span class="cm">/* is pageflipping allowed? */</span>
	<span class="kt">int</span> <span class="n">pf_active</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pf_current_page</span><span class="p">;</span>	<span class="cm">/* which buffer is being displayed? */</span>
<span class="p">}</span> <span class="n">drm_i810_sarea_t</span><span class="p">;</span>

<span class="cm">/* WARNING: If you change any of these defines, make sure to change the</span>
<span class="cm"> * defines in the Xserver file (xf86drmMga.h)</span>
<span class="cm"> */</span>

<span class="cm">/* i810 specific ioctls</span>
<span class="cm"> * The device specific ioctl range is 0x40 to 0x79.</span>
<span class="cm"> */</span>
<span class="cp">#define DRM_I810_INIT		0x00</span>
<span class="cp">#define DRM_I810_VERTEX		0x01</span>
<span class="cp">#define DRM_I810_CLEAR		0x02</span>
<span class="cp">#define DRM_I810_FLUSH		0x03</span>
<span class="cp">#define DRM_I810_GETAGE		0x04</span>
<span class="cp">#define DRM_I810_GETBUF		0x05</span>
<span class="cp">#define DRM_I810_SWAP		0x06</span>
<span class="cp">#define DRM_I810_COPY		0x07</span>
<span class="cp">#define DRM_I810_DOCOPY		0x08</span>
<span class="cp">#define DRM_I810_OV0INFO	0x09</span>
<span class="cp">#define DRM_I810_FSTATUS	0x0a</span>
<span class="cp">#define DRM_I810_OV0FLIP	0x0b</span>
<span class="cp">#define DRM_I810_MC		0x0c</span>
<span class="cp">#define DRM_I810_RSTATUS	0x0d</span>
<span class="cp">#define DRM_I810_FLIP		0x0e</span>

<span class="cp">#define DRM_IOCTL_I810_INIT		DRM_IOW( DRM_COMMAND_BASE + DRM_I810_INIT, drm_i810_init_t)</span>
<span class="cp">#define DRM_IOCTL_I810_VERTEX		DRM_IOW( DRM_COMMAND_BASE + DRM_I810_VERTEX, drm_i810_vertex_t)</span>
<span class="cp">#define DRM_IOCTL_I810_CLEAR		DRM_IOW( DRM_COMMAND_BASE + DRM_I810_CLEAR, drm_i810_clear_t)</span>
<span class="cp">#define DRM_IOCTL_I810_FLUSH		DRM_IO(  DRM_COMMAND_BASE + DRM_I810_FLUSH)</span>
<span class="cp">#define DRM_IOCTL_I810_GETAGE		DRM_IO(  DRM_COMMAND_BASE + DRM_I810_GETAGE)</span>
<span class="cp">#define DRM_IOCTL_I810_GETBUF		DRM_IOWR(DRM_COMMAND_BASE + DRM_I810_GETBUF, drm_i810_dma_t)</span>
<span class="cp">#define DRM_IOCTL_I810_SWAP		DRM_IO(  DRM_COMMAND_BASE + DRM_I810_SWAP)</span>
<span class="cp">#define DRM_IOCTL_I810_COPY		DRM_IOW( DRM_COMMAND_BASE + DRM_I810_COPY, drm_i810_copy_t)</span>
<span class="cp">#define DRM_IOCTL_I810_DOCOPY		DRM_IO(  DRM_COMMAND_BASE + DRM_I810_DOCOPY)</span>
<span class="cp">#define DRM_IOCTL_I810_OV0INFO		DRM_IOR( DRM_COMMAND_BASE + DRM_I810_OV0INFO, drm_i810_overlay_t)</span>
<span class="cp">#define DRM_IOCTL_I810_FSTATUS		DRM_IO ( DRM_COMMAND_BASE + DRM_I810_FSTATUS)</span>
<span class="cp">#define DRM_IOCTL_I810_OV0FLIP		DRM_IO ( DRM_COMMAND_BASE + DRM_I810_OV0FLIP)</span>
<span class="cp">#define DRM_IOCTL_I810_MC		DRM_IOW( DRM_COMMAND_BASE + DRM_I810_MC, drm_i810_mc_t)</span>
<span class="cp">#define DRM_IOCTL_I810_RSTATUS		DRM_IO ( DRM_COMMAND_BASE + DRM_I810_RSTATUS)</span>
<span class="cp">#define DRM_IOCTL_I810_FLIP             DRM_IO ( DRM_COMMAND_BASE + DRM_I810_FLIP)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_clear</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">clear_color</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">clear_depth</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_i810_clear_t</span><span class="p">;</span>

<span class="cm">/* These may be placeholders if we have more cliprects than</span>
<span class="cm"> * I810_NR_SAREA_CLIPRECTS.  In that case, the client sets discard to</span>
<span class="cm"> * false, indicating that the buffer will be dispatched again with a</span>
<span class="cm"> * new set of cliprects.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_vertex</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>		<span class="cm">/* buffer index */</span>
	<span class="kt">int</span> <span class="n">used</span><span class="p">;</span>		<span class="cm">/* nr bytes in use */</span>
	<span class="kt">int</span> <span class="n">discard</span><span class="p">;</span>		<span class="cm">/* client is finished with the buffer? */</span>
<span class="p">}</span> <span class="n">drm_i810_vertex_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_copy_t</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>		<span class="cm">/* buffer index */</span>
	<span class="kt">int</span> <span class="n">used</span><span class="p">;</span>		<span class="cm">/* nr bytes in use */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">address</span><span class="p">;</span>		<span class="cm">/* Address to copy from */</span>
<span class="p">}</span> <span class="n">drm_i810_copy_t</span><span class="p">;</span>

<span class="cp">#define PR_TRIANGLES         (0x0&lt;&lt;18)</span>
<span class="cp">#define PR_TRISTRIP_0        (0x1&lt;&lt;18)</span>
<span class="cp">#define PR_TRISTRIP_1        (0x2&lt;&lt;18)</span>
<span class="cp">#define PR_TRIFAN            (0x3&lt;&lt;18)</span>
<span class="cp">#define PR_POLYGON           (0x4&lt;&lt;18)</span>
<span class="cp">#define PR_LINES             (0x5&lt;&lt;18)</span>
<span class="cp">#define PR_LINESTRIP         (0x6&lt;&lt;18)</span>
<span class="cp">#define PR_RECTS             (0x7&lt;&lt;18)</span>
<span class="cp">#define PR_MASK              (0x7&lt;&lt;18)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_i810_dma</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="o">*</span><span class="k">virtual</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">request_idx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">request_size</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">granted</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_i810_dma_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_overlay_t</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>	<span class="cm">/* Address of the Overlay Regs */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">physical</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_i810_overlay_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">_drm_i810_mc</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>		<span class="cm">/* buffer index */</span>
	<span class="kt">int</span> <span class="n">used</span><span class="p">;</span>		<span class="cm">/* nr bytes in use */</span>
	<span class="kt">int</span> <span class="n">num_blocks</span><span class="p">;</span>		<span class="cm">/* number of GFXBlocks */</span>
	<span class="kt">int</span> <span class="o">*</span><span class="n">length</span><span class="p">;</span>		<span class="cm">/* List of lengths for GFXBlocks (FUTURE) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">last_render</span><span class="p">;</span>	<span class="cm">/* Last Render Request */</span>
<span class="p">}</span> <span class="n">drm_i810_mc_t</span><span class="p">;</span>

<span class="cp">#endif				</span><span class="cm">/* _I810_DRM_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
