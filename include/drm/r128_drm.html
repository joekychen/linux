<!DOCTYPE html>
<html><head><title>joekychen/linux » include › drm › r128_drm.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>r128_drm.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* r128_drm.h -- Public header for the r128 driver -*- linux-c -*-</span>
<span class="cm"> * Created: Wed Apr  5 19:24:19 2000 by kevin@precisioninsight.com</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * Copyright 2000 Precision Insight, Inc., Cedar Park, Texas.</span>
<span class="cm"> * Copyright 2000 VA Linux Systems, Inc., Sunnyvale, California.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="cm"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span>
<span class="cm"> * to deal in the Software without restriction, including without limitation</span>
<span class="cm"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span>
<span class="cm"> * and/or sell copies of the Software, and to permit persons to whom the</span>
<span class="cm"> * Software is furnished to do so, subject to the following conditions:</span>
<span class="cm"> *</span>
<span class="cm"> * The above copyright notice and this permission notice (including the next</span>
<span class="cm"> * paragraph) shall be included in all copies or substantial portions of the</span>
<span class="cm"> * Software.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="cm"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL</span>
<span class="cm"> * PRECISION INSIGHT AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span>
<span class="cm"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span>
<span class="cm"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span>
<span class="cm"> * DEALINGS IN THE SOFTWARE.</span>
<span class="cm"> *</span>
<span class="cm"> * Authors:</span>
<span class="cm"> *    Gareth Hughes &lt;gareth@valinux.com&gt;</span>
<span class="cm"> *    Kevin E. Martin &lt;martin@valinux.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __R128_DRM_H__</span>
<span class="cp">#define __R128_DRM_H__</span>

<span class="cm">/* WARNING: If you change any of these defines, make sure to change the</span>
<span class="cm"> * defines in the X server file (r128_sarea.h)</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __R128_SAREA_DEFINES__</span>
<span class="cp">#define __R128_SAREA_DEFINES__</span>

<span class="cm">/* What needs to be changed for the current vertex buffer?</span>
<span class="cm"> */</span>
<span class="cp">#define R128_UPLOAD_CONTEXT		0x001</span>
<span class="cp">#define R128_UPLOAD_SETUP		0x002</span>
<span class="cp">#define R128_UPLOAD_TEX0		0x004</span>
<span class="cp">#define R128_UPLOAD_TEX1		0x008</span>
<span class="cp">#define R128_UPLOAD_TEX0IMAGES		0x010</span>
<span class="cp">#define R128_UPLOAD_TEX1IMAGES		0x020</span>
<span class="cp">#define R128_UPLOAD_CORE		0x040</span>
<span class="cp">#define R128_UPLOAD_MASKS		0x080</span>
<span class="cp">#define R128_UPLOAD_WINDOW		0x100</span>
<span class="cp">#define R128_UPLOAD_CLIPRECTS		0x200	</span><span class="cm">/* handled client-side */</span><span class="cp"></span>
<span class="cp">#define R128_REQUIRE_QUIESCENCE		0x400</span>
<span class="cp">#define R128_UPLOAD_ALL			0x7ff</span>

<span class="cp">#define R128_FRONT			0x1</span>
<span class="cp">#define R128_BACK			0x2</span>
<span class="cp">#define R128_DEPTH			0x4</span>

<span class="cm">/* Primitive types</span>
<span class="cm"> */</span>
<span class="cp">#define R128_POINTS			0x1</span>
<span class="cp">#define R128_LINES			0x2</span>
<span class="cp">#define R128_LINE_STRIP			0x3</span>
<span class="cp">#define R128_TRIANGLES			0x4</span>
<span class="cp">#define R128_TRIANGLE_FAN		0x5</span>
<span class="cp">#define R128_TRIANGLE_STRIP		0x6</span>

<span class="cm">/* Vertex/indirect buffer size</span>
<span class="cm"> */</span>
<span class="cp">#define R128_BUFFER_SIZE		16384</span>

<span class="cm">/* Byte offsets for indirect buffer data</span>
<span class="cm"> */</span>
<span class="cp">#define R128_INDEX_PRIM_OFFSET		20</span>
<span class="cp">#define R128_HOSTDATA_BLIT_OFFSET	32</span>

<span class="cm">/* Keep these small for testing.</span>
<span class="cm"> */</span>
<span class="cp">#define R128_NR_SAREA_CLIPRECTS		12</span>

<span class="cm">/* There are 2 heaps (local/AGP).  Each region within a heap is a</span>
<span class="cm"> *  minimum of 64k, and there are at most 64 of them per heap.</span>
<span class="cm"> */</span>
<span class="cp">#define R128_LOCAL_TEX_HEAP		0</span>
<span class="cp">#define R128_AGP_TEX_HEAP		1</span>
<span class="cp">#define R128_NR_TEX_HEAPS		2</span>
<span class="cp">#define R128_NR_TEX_REGIONS		64</span>
<span class="cp">#define R128_LOG_TEX_GRANULARITY	16</span>

<span class="cp">#define R128_NR_CONTEXT_REGS		12</span>

<span class="cp">#define R128_MAX_TEXTURE_LEVELS		11</span>
<span class="cp">#define R128_MAX_TEXTURE_UNITS		2</span>

<span class="cp">#endif				</span><span class="cm">/* __R128_SAREA_DEFINES__ */</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="cm">/* Context state - can be written in one large chunk */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dst_pitch_offset_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dp_gui_master_cntl_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sc_top_left_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sc_bottom_right_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">z_offset_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">z_pitch_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">z_sten_cntl_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_cntl_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">misc_3d_state_cntl_reg</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">texture_clr_cmp_clr_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">texture_clr_cmp_msk_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fog_color_c</span><span class="p">;</span>

	<span class="cm">/* Texture state */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_size_pitch_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">constant_color_c</span><span class="p">;</span>

	<span class="cm">/* Setup state */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pm4_vc_fpu_setup</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">setup_cntl</span><span class="p">;</span>

	<span class="cm">/* Mask state */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dp_write_mask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sten_ref_mask_c</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">plane_3d_mask_c</span><span class="p">;</span>

	<span class="cm">/* Window state */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">window_xy_offset</span><span class="p">;</span>

	<span class="cm">/* Core state */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">scale_3d_cntl</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_context_regs_t</span><span class="p">;</span>

<span class="cm">/* Setup registers for each texture unit</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_cntl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_combine_cntl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_size_pitch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_offset</span><span class="p">[</span><span class="n">R128_MAX_TEXTURE_LEVELS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_border_color</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_texture_regs_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_sarea</span> <span class="p">{</span>
	<span class="cm">/* The channel for communication of state information to the kernel</span>
<span class="cm">	 * on firing a vertex buffer.</span>
<span class="cm">	 */</span>
	<span class="n">drm_r128_context_regs_t</span> <span class="n">context_state</span><span class="p">;</span>
	<span class="n">drm_r128_texture_regs_t</span> <span class="n">tex_state</span><span class="p">[</span><span class="n">R128_MAX_TEXTURE_UNITS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dirty</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vertsize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vc_format</span><span class="p">;</span>

	<span class="cm">/* The current cliprects, or a subset thereof.</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">drm_clip_rect</span> <span class="n">boxes</span><span class="p">[</span><span class="n">R128_NR_SAREA_CLIPRECTS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nbox</span><span class="p">;</span>

	<span class="cm">/* Counters for client-side throttling of rendering clients.</span>
<span class="cm">	 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">last_frame</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">last_dispatch</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">drm_tex_region</span> <span class="n">tex_list</span><span class="p">[</span><span class="n">R128_NR_TEX_HEAPS</span><span class="p">][</span><span class="n">R128_NR_TEX_REGIONS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tex_age</span><span class="p">[</span><span class="n">R128_NR_TEX_HEAPS</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">ctx_owner</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pfAllowPageFlip</span><span class="p">;</span>	<span class="cm">/* number of 3d windows (0,1,2 or more) */</span>
	<span class="kt">int</span> <span class="n">pfCurrentPage</span><span class="p">;</span>	<span class="cm">/* which buffer is being displayed? */</span>
<span class="p">}</span> <span class="n">drm_r128_sarea_t</span><span class="p">;</span>

<span class="cm">/* WARNING: If you change any of these defines, make sure to change the</span>
<span class="cm"> * defines in the Xserver file (xf86drmR128.h)</span>
<span class="cm"> */</span>

<span class="cm">/* Rage 128 specific ioctls</span>
<span class="cm"> * The device specific ioctl range is 0x40 to 0x79.</span>
<span class="cm"> */</span>
<span class="cp">#define DRM_R128_INIT       0x00</span>
<span class="cp">#define DRM_R128_CCE_START  0x01</span>
<span class="cp">#define DRM_R128_CCE_STOP   0x02</span>
<span class="cp">#define DRM_R128_CCE_RESET  0x03</span>
<span class="cp">#define DRM_R128_CCE_IDLE   0x04</span>
<span class="cm">/* 0x05 not used */</span>
<span class="cp">#define DRM_R128_RESET      0x06</span>
<span class="cp">#define DRM_R128_SWAP       0x07</span>
<span class="cp">#define DRM_R128_CLEAR      0x08</span>
<span class="cp">#define DRM_R128_VERTEX     0x09</span>
<span class="cp">#define DRM_R128_INDICES    0x0a</span>
<span class="cp">#define DRM_R128_BLIT       0x0b</span>
<span class="cp">#define DRM_R128_DEPTH      0x0c</span>
<span class="cp">#define DRM_R128_STIPPLE    0x0d</span>
<span class="cm">/* 0x0e not used */</span>
<span class="cp">#define DRM_R128_INDIRECT   0x0f</span>
<span class="cp">#define DRM_R128_FULLSCREEN 0x10</span>
<span class="cp">#define DRM_R128_CLEAR2     0x11</span>
<span class="cp">#define DRM_R128_GETPARAM   0x12</span>
<span class="cp">#define DRM_R128_FLIP       0x13</span>

<span class="cp">#define DRM_IOCTL_R128_INIT       DRM_IOW( DRM_COMMAND_BASE + DRM_R128_INIT, drm_r128_init_t)</span>
<span class="cp">#define DRM_IOCTL_R128_CCE_START  DRM_IO(  DRM_COMMAND_BASE + DRM_R128_CCE_START)</span>
<span class="cp">#define DRM_IOCTL_R128_CCE_STOP   DRM_IOW( DRM_COMMAND_BASE + DRM_R128_CCE_STOP, drm_r128_cce_stop_t)</span>
<span class="cp">#define DRM_IOCTL_R128_CCE_RESET  DRM_IO(  DRM_COMMAND_BASE + DRM_R128_CCE_RESET)</span>
<span class="cp">#define DRM_IOCTL_R128_CCE_IDLE   DRM_IO(  DRM_COMMAND_BASE + DRM_R128_CCE_IDLE)</span>
<span class="cm">/* 0x05 not used */</span>
<span class="cp">#define DRM_IOCTL_R128_RESET      DRM_IO(  DRM_COMMAND_BASE + DRM_R128_RESET)</span>
<span class="cp">#define DRM_IOCTL_R128_SWAP       DRM_IO(  DRM_COMMAND_BASE + DRM_R128_SWAP)</span>
<span class="cp">#define DRM_IOCTL_R128_CLEAR      DRM_IOW( DRM_COMMAND_BASE + DRM_R128_CLEAR, drm_r128_clear_t)</span>
<span class="cp">#define DRM_IOCTL_R128_VERTEX     DRM_IOW( DRM_COMMAND_BASE + DRM_R128_VERTEX, drm_r128_vertex_t)</span>
<span class="cp">#define DRM_IOCTL_R128_INDICES    DRM_IOW( DRM_COMMAND_BASE + DRM_R128_INDICES, drm_r128_indices_t)</span>
<span class="cp">#define DRM_IOCTL_R128_BLIT       DRM_IOW( DRM_COMMAND_BASE + DRM_R128_BLIT, drm_r128_blit_t)</span>
<span class="cp">#define DRM_IOCTL_R128_DEPTH      DRM_IOW( DRM_COMMAND_BASE + DRM_R128_DEPTH, drm_r128_depth_t)</span>
<span class="cp">#define DRM_IOCTL_R128_STIPPLE    DRM_IOW( DRM_COMMAND_BASE + DRM_R128_STIPPLE, drm_r128_stipple_t)</span>
<span class="cm">/* 0x0e not used */</span>
<span class="cp">#define DRM_IOCTL_R128_INDIRECT   DRM_IOWR(DRM_COMMAND_BASE + DRM_R128_INDIRECT, drm_r128_indirect_t)</span>
<span class="cp">#define DRM_IOCTL_R128_FULLSCREEN DRM_IOW( DRM_COMMAND_BASE + DRM_R128_FULLSCREEN, drm_r128_fullscreen_t)</span>
<span class="cp">#define DRM_IOCTL_R128_CLEAR2     DRM_IOW( DRM_COMMAND_BASE + DRM_R128_CLEAR2, drm_r128_clear2_t)</span>
<span class="cp">#define DRM_IOCTL_R128_GETPARAM   DRM_IOWR( DRM_COMMAND_BASE + DRM_R128_GETPARAM, drm_r128_getparam_t)</span>
<span class="cp">#define DRM_IOCTL_R128_FLIP       DRM_IO(  DRM_COMMAND_BASE + DRM_R128_FLIP)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_init</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="p">{</span>
		<span class="n">R128_INIT_CCE</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
		<span class="n">R128_CLEANUP_CCE</span> <span class="o">=</span> <span class="mh">0x02</span>
	<span class="p">}</span> <span class="n">func</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sarea_priv_offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_pci</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cce_mode</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cce_secure</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ring_size</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">usec_timeout</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fb_bpp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">front_offset</span><span class="p">,</span> <span class="n">front_pitch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">back_offset</span><span class="p">,</span> <span class="n">back_pitch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">depth_bpp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">depth_offset</span><span class="p">,</span> <span class="n">depth_pitch</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">span_offset</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fb_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mmio_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ring_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ring_rptr_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">buffers_offset</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">agp_textures_offset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_init_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_cce_stop</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">flush</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">idle</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_cce_stop_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_clear</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">clear_color</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">clear_depth</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">color_mask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">depth_mask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_clear_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_vertex</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">prim</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>		<span class="cm">/* Index of vertex buffer */</span>
	<span class="kt">int</span> <span class="n">count</span><span class="p">;</span>		<span class="cm">/* Number of vertices in buffer */</span>
	<span class="kt">int</span> <span class="n">discard</span><span class="p">;</span>		<span class="cm">/* Client finished with buffer? */</span>
<span class="p">}</span> <span class="n">drm_r128_vertex_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_indices</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">prim</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">start</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">end</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">discard</span><span class="p">;</span>		<span class="cm">/* Client finished with buffer? */</span>
<span class="p">}</span> <span class="n">drm_r128_indices_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_blit</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">pitch</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">format</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_blit_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_depth</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="p">{</span>
		<span class="n">R128_WRITE_SPAN</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
		<span class="n">R128_WRITE_PIXELS</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
		<span class="n">R128_READ_SPAN</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
		<span class="n">R128_READ_PIXELS</span> <span class="o">=</span> <span class="mh">0x04</span>
	<span class="p">}</span> <span class="n">func</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">x</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">y</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">mask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_depth_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_stipple</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">mask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_stipple_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_indirect</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">idx</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">start</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">end</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">discard</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_indirect_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_fullscreen</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="p">{</span>
		<span class="n">R128_INIT_FULLSCREEN</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
		<span class="n">R128_CLEANUP_FULLSCREEN</span> <span class="o">=</span> <span class="mh">0x02</span>
	<span class="p">}</span> <span class="n">func</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_fullscreen_t</span><span class="p">;</span>

<span class="cm">/* 2.3: An ioctl to get parameters that aren&#39;t available to the 3d</span>
<span class="cm"> * client any other way.</span>
<span class="cm"> */</span>
<span class="cp">#define R128_PARAM_IRQ_NR            1</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">drm_r128_getparam</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">param</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">value</span><span class="p">;</span>
<span class="p">}</span> <span class="n">drm_r128_getparam_t</span><span class="p">;</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
