f | ttm_execbuf_util.h | s | 4.0K | 101 | Thomas Hellstrom | thellstrom@vmware.com | 1290396321 |  | drm/ttm/vmwgfx: Have TTM manage the validation sequence.  Rather than having the driver supply the validation sequence, leave that responsibility to TTM. This saves some confusion and a function argument.  Signed-off-by: Thomas Hellstrom <thellstrom@vmware.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
f | ttm_object.h | s | 8.7K | 246 | Konrad Rzeszutek Wilk | konrad.wilk@oracle.com | 1308623598 |  | ttm: Fix spelling mistakes and remove unused #ifdef  . and some comments to make it easier to understand.  Ackedby: Randy Dunlap <randy.dunlap@oracle.com> [v2: Added some more updates from Randy Dunlap] Signed-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
f | ttm_lock.h | s | 7.0K | 226 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ttm_placement.h | s | 3.4K | 82 | Thomas Hellstrom | thellstrom@vmware.com | 1245022677 |  | drm: Add the TTM GPU memory manager subsystem.  TTM is a GPU memory manager subsystem designed for use with GPU devices with various memory types (On-card VRAM, AGP, PCI apertures etc.). It's essentially a helper library that assists the DRM driver in creating and managing persistent buffer objects.  TTM manages placement of data and CPU map setup and teardown on data movement. It can also optionally manage synchronization of data on a per-buffer-object level.  TTM takes care to provide an always valid virtual user-space address to a buffer object which makes user-space sub-allocation of big buffer objects feasible.  TTM uses a fine-grained per buffer-object locking scheme, taking care to release all relevant locks when waiting for the GPU. Although this implies some locking overhead, it's probably a big win for devices with multiple command submission mechanisms, since the lock contention will be minimal.  TTM can be used with whatever user-space interface the driver chooses, including GEM. It's used by the upcoming Radeon KMS DRM driver and is also the GPU memory management core of various new experimental DRM drivers.  Signed-off-by: Thomas Hellstrom <thellstrom@vmware.com> Signed-off-by: Jerome Glisse <jglisse@redhat.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
f | ttm_bo_driver.h | s | 33K | 938 | Dave Airlie | airlied@redhat.com | 1337766387 |  | ttm: add prime sharing support to TTM (v2)  This adds the ability for ttm common code to take an SG table and use it as the backing for a slave TTM object.  The drivers can then populate their GTT tables using the SG object.  v2: make sure to setup VM for sg bos as well.  Reviewed-by: Alex Deucher <alexander.deucher@amd.com> Reviewed-by: Jerome Glisse <jglisse@redhat.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
f | ttm_page_alloc.h | s | 2.7K | 84 | Jerome Glisse | jglisse@redhat.com | 1323168002 |  | drm/ttm: isolate dma data from ttm_tt V4  Move dma data to a superset ttm_dma_tt structure which herit from ttm_tt. This allow driver that don't use dma functionalities to not have to waste memory for it.  V2 Rebase on top of no memory account changes (where/when is my    delorean when i need it ?) V3 Make sure page list is initialized empty V4 typo/syntax fixes  Signed-off-by: Jerome Glisse <jglisse@redhat.com> Reviewed-by: Thomas Hellstrom <thellstrom@vmware.com>
f | ttm_memory.h | s | 5.4K | 147 | Paul Gortmaker | paul.gortmaker@windriver.com | 1330901674 |  | BUG: headers with BUG/BUG_ON etc. need linux/bug.h  If a header file is making use of BUG, BUG_ON, BUILD_BUG_ON, or any other BUG variant in a static inline (i.e. not in a #define) then that header really should be including <linux/bug.h> and not just expecting it to be implicitly present.  We can make this change risk-free, since if the files using these headers didn't have exposure to linux/bug.h already, they would have been causing compile failures/warnings.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | ttm_module.h | s | 1.6K | 36 | Dave Airlie | airlied@redhat.com | 1280879166 |  | drm: move ttm global code to core drm  I wrote this for the prime sharing work, but I also noticed other external non-upstream drivers from a large company carrying a similiar patch, so I may as well ship it in master.  Signed-off-by: Dave Airlie <airlied@redhat.com>
f | ttm_bo_api.h | s | 22K | 665 | Dave Airlie | airlied@redhat.com | 1337766387 |  | ttm: add prime sharing support to TTM (v2)  This adds the ability for ttm common code to take an SG table and use it as the backing for a slave TTM object.  The drivers can then populate their GTT tables using the SG object.  v2: make sure to setup VM for sg bos as well.  Reviewed-by: Alex Deucher <alexander.deucher@amd.com> Reviewed-by: Jerome Glisse <jglisse@redhat.com> Signed-off-by: Dave Airlie <airlied@redhat.com>
