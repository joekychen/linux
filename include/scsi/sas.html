<!DOCTYPE html>
<html><head><title>joekychen/linux » include › scsi › sas.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>sas.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * SAS structures and definitions header file</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2005 Adaptec, Inc.  All rights reserved.</span>
<span class="cm"> * Copyright (C) 2005 Luben Tuikov &lt;luben_tuikov@adaptec.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This file is licensed under GPLv2.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License as</span>
<span class="cm"> * published by the Free Software Foundation; either version 2 of the</span>
<span class="cm"> * License, or (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> * WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> * General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
<span class="cm"> * USA</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _SAS_H_</span>
<span class="cp">#define _SAS_H_</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;asm/byteorder.h&gt;</span>

<span class="cp">#define SAS_ADDR_SIZE        8</span>
<span class="cp">#define HASHED_SAS_ADDR_SIZE 3</span>
<span class="cp">#define SAS_ADDR(_sa) ((unsigned long long) be64_to_cpu(*(__be64 *)(_sa)))</span>

<span class="cp">#define SMP_REQUEST             0x40</span>
<span class="cp">#define SMP_RESPONSE            0x41</span>

<span class="cp">#define SSP_DATA                0x01</span>
<span class="cp">#define SSP_XFER_RDY            0x05</span>
<span class="cp">#define SSP_COMMAND             0x06</span>
<span class="cp">#define SSP_RESPONSE            0x07</span>
<span class="cp">#define SSP_TASK                0x16</span>

<span class="cp">#define SMP_REPORT_GENERAL       0x00</span>
<span class="cp">#define SMP_REPORT_MANUF_INFO    0x01</span>
<span class="cp">#define SMP_READ_GPIO_REG        0x02</span>
<span class="cp">#define SMP_DISCOVER             0x10</span>
<span class="cp">#define SMP_REPORT_PHY_ERR_LOG   0x11</span>
<span class="cp">#define SMP_REPORT_PHY_SATA      0x12</span>
<span class="cp">#define SMP_REPORT_ROUTE_INFO    0x13</span>
<span class="cp">#define SMP_WRITE_GPIO_REG       0x82</span>
<span class="cp">#define SMP_CONF_ROUTE_INFO      0x90</span>
<span class="cp">#define SMP_PHY_CONTROL          0x91</span>
<span class="cp">#define SMP_PHY_TEST_FUNCTION    0x92</span>

<span class="cp">#define SMP_RESP_FUNC_ACC        0x00</span>
<span class="cp">#define SMP_RESP_FUNC_UNK        0x01</span>
<span class="cp">#define SMP_RESP_FUNC_FAILED     0x02</span>
<span class="cp">#define SMP_RESP_INV_FRM_LEN     0x03</span>
<span class="cp">#define SMP_RESP_NO_PHY          0x10</span>
<span class="cp">#define SMP_RESP_NO_INDEX        0x11</span>
<span class="cp">#define SMP_RESP_PHY_NO_SATA     0x12</span>
<span class="cp">#define SMP_RESP_PHY_UNK_OP      0x13</span>
<span class="cp">#define SMP_RESP_PHY_UNK_TESTF   0x14</span>
<span class="cp">#define SMP_RESP_PHY_TEST_INPROG 0x15</span>
<span class="cp">#define SMP_RESP_PHY_VACANT      0x16</span>

<span class="cm">/* SAM TMFs */</span>
<span class="cp">#define TMF_ABORT_TASK      0x01</span>
<span class="cp">#define TMF_ABORT_TASK_SET  0x02</span>
<span class="cp">#define TMF_CLEAR_TASK_SET  0x04</span>
<span class="cp">#define TMF_LU_RESET        0x08</span>
<span class="cp">#define TMF_CLEAR_ACA       0x40</span>
<span class="cp">#define TMF_QUERY_TASK      0x80</span>

<span class="cm">/* SAS TMF responses */</span>
<span class="cp">#define TMF_RESP_FUNC_COMPLETE   0x00</span>
<span class="cp">#define TMF_RESP_INVALID_FRAME   0x02</span>
<span class="cp">#define TMF_RESP_FUNC_ESUPP      0x04</span>
<span class="cp">#define TMF_RESP_FUNC_FAILED     0x05</span>
<span class="cp">#define TMF_RESP_FUNC_SUCC       0x08</span>
<span class="cp">#define TMF_RESP_NO_LUN          0x09</span>
<span class="cp">#define TMF_RESP_OVERLAPPED_TAG  0x0A</span>

<span class="k">enum</span> <span class="n">sas_oob_mode</span> <span class="p">{</span>
	<span class="n">OOB_NOT_CONNECTED</span><span class="p">,</span>
	<span class="n">SATA_OOB_MODE</span><span class="p">,</span>
	<span class="n">SAS_OOB_MODE</span>
<span class="p">};</span>

<span class="cm">/* See sas_discover.c if you plan on changing these */</span>
<span class="k">enum</span> <span class="n">sas_dev_type</span> <span class="p">{</span>
	<span class="n">NO_DEVICE</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	  <span class="cm">/* protocol */</span>
	<span class="n">SAS_END_DEV</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	  <span class="cm">/* protocol */</span>
	<span class="n">EDGE_DEV</span>    <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	  <span class="cm">/* protocol */</span>
	<span class="n">FANOUT_DEV</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	  <span class="cm">/* protocol */</span>
	<span class="n">SAS_HA</span>      <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">SATA_DEV</span>    <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">SATA_PM</span>     <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">SATA_PM_PORT</span><span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">SATA_PENDING</span>  <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">sas_protocol</span> <span class="p">{</span>
	<span class="n">SAS_PROTOCOL_NONE</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SAS_PROTOCOL_SATA</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">SAS_PROTOCOL_SMP</span>		<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">SAS_PROTOCOL_STP</span>		<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">SAS_PROTOCOL_SSP</span>		<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">SAS_PROTOCOL_ALL</span>		<span class="o">=</span> <span class="mh">0x0E</span><span class="p">,</span>
	<span class="n">SAS_PROTOCOL_STP_ALL</span>		<span class="o">=</span> <span class="n">SAS_PROTOCOL_STP</span><span class="o">|</span><span class="n">SAS_PROTOCOL_SATA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* From the spec; local phys only */</span>
<span class="k">enum</span> <span class="n">phy_func</span> <span class="p">{</span>
	<span class="n">PHY_FUNC_NOP</span><span class="p">,</span>
	<span class="n">PHY_FUNC_LINK_RESET</span><span class="p">,</span>		  <span class="cm">/* Enables the phy */</span>
	<span class="n">PHY_FUNC_HARD_RESET</span><span class="p">,</span>
	<span class="n">PHY_FUNC_DISABLE</span><span class="p">,</span>
	<span class="n">PHY_FUNC_CLEAR_ERROR_LOG</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">PHY_FUNC_CLEAR_AFFIL</span><span class="p">,</span>
	<span class="n">PHY_FUNC_TX_SATA_PS_SIGNAL</span><span class="p">,</span>
	<span class="n">PHY_FUNC_RELEASE_SPINUP_HOLD</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span> <span class="cm">/* LOCAL PORT ONLY! */</span>
	<span class="n">PHY_FUNC_SET_LINK_RATE</span><span class="p">,</span>
	<span class="n">PHY_FUNC_GET_EVENTS</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* SAS LLDD would need to report only _very_few_ of those, like BROADCAST.</span>
<span class="cm"> * Most of those are here for completeness.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">sas_prim</span> <span class="p">{</span>
	<span class="n">SAS_PRIM_AIP_NORMAL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_R0</span>     <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_R1</span>     <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_R2</span>     <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_WC</span>     <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_WD</span>     <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_WP</span>     <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">SAS_PRIM_AIP_RWP</span>    <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>

	<span class="n">SAS_PRIM_BC_CH</span>      <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_RCH0</span>    <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_RCH1</span>    <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_R0</span>      <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_R1</span>      <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_R2</span>      <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_R3</span>      <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BC_R4</span>      <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>

	<span class="n">SAS_PRIM_NOTIFY_ENSP</span><span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
	<span class="n">SAS_PRIM_NOTIFY_R0</span>  <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="n">SAS_PRIM_NOTIFY_R1</span>  <span class="o">=</span> <span class="mi">19</span><span class="p">,</span>
	<span class="n">SAS_PRIM_NOTIFY_R2</span>  <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>

	<span class="n">SAS_PRIM_CLOSE_CLAF</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="n">SAS_PRIM_CLOSE_NORM</span> <span class="o">=</span> <span class="mi">22</span><span class="p">,</span>
	<span class="n">SAS_PRIM_CLOSE_R0</span>   <span class="o">=</span> <span class="mi">23</span><span class="p">,</span>
	<span class="n">SAS_PRIM_CLOSE_R1</span>   <span class="o">=</span> <span class="mi">24</span><span class="p">,</span>

	<span class="n">SAS_PRIM_OPEN_RTRY</span>  <span class="o">=</span> <span class="mi">25</span><span class="p">,</span>
	<span class="n">SAS_PRIM_OPEN_RJCT</span>  <span class="o">=</span> <span class="mi">26</span><span class="p">,</span>
	<span class="n">SAS_PRIM_OPEN_ACPT</span>  <span class="o">=</span> <span class="mi">27</span><span class="p">,</span>

	<span class="n">SAS_PRIM_DONE</span>       <span class="o">=</span> <span class="mi">28</span><span class="p">,</span>
	<span class="n">SAS_PRIM_BREAK</span>      <span class="o">=</span> <span class="mi">29</span><span class="p">,</span>

	<span class="n">SATA_PRIM_DMAT</span>      <span class="o">=</span> <span class="mi">33</span><span class="p">,</span>
	<span class="n">SATA_PRIM_PMNAK</span>     <span class="o">=</span> <span class="mi">34</span><span class="p">,</span>
	<span class="n">SATA_PRIM_PMACK</span>     <span class="o">=</span> <span class="mi">35</span><span class="p">,</span>
	<span class="n">SATA_PRIM_PMREQ_S</span>   <span class="o">=</span> <span class="mi">36</span><span class="p">,</span>
	<span class="n">SATA_PRIM_PMREQ_P</span>   <span class="o">=</span> <span class="mi">37</span><span class="p">,</span>
	<span class="n">SATA_SATA_R_ERR</span>     <span class="o">=</span> <span class="mi">38</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">sas_open_rej_reason</span> <span class="p">{</span>
	<span class="cm">/* Abandon open */</span>
	<span class="n">SAS_OREJ_UNKNOWN</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SAS_OREJ_BAD_DEST</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">SAS_OREJ_CONN_RATE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">SAS_OREJ_EPROTO</span>    <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RESV_AB0</span>  <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RESV_AB1</span>  <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RESV_AB2</span>  <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RESV_AB3</span>  <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">SAS_OREJ_WRONG_DEST</span><span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">SAS_OREJ_STP_NORES</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>

	<span class="cm">/* Retry open */</span>
	<span class="n">SAS_OREJ_NO_DEST</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">SAS_OREJ_PATH_BLOCKED</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_CONT0</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_CONT1</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_INIT0</span> <span class="o">=</span> <span class="mi">14</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_INIT1</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_STOP0</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_STOP1</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
	<span class="n">SAS_OREJ_RSVD_RETRY</span> <span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">sas_gpio_reg_type</span> <span class="p">{</span>
	<span class="n">SAS_GPIO_REG_CFG</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">SAS_GPIO_REG_RX</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">SAS_GPIO_REG_RX_GP</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">SAS_GPIO_REG_TX</span>    <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">SAS_GPIO_REG_TX_GP</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span>  <span class="n">dev_to_host_fis</span> <span class="p">{</span>
	<span class="n">u8</span>     <span class="n">fis_type</span><span class="p">;</span>	  <span class="cm">/* 0x34 */</span>
	<span class="n">u8</span>     <span class="n">flags</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">status</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">error</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">lbal</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span> <span class="n">u8</span> <span class="n">lbam</span><span class="p">;</span> <span class="n">u8</span> <span class="n">byte_count_low</span><span class="p">;</span> <span class="p">};</span>
	<span class="k">union</span> <span class="p">{</span> <span class="n">u8</span> <span class="n">lbah</span><span class="p">;</span> <span class="n">u8</span> <span class="n">byte_count_high</span><span class="p">;</span> <span class="p">};</span>
	<span class="n">u8</span>     <span class="n">device</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">lbal_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">lbam_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">lbah_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_a</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span> <span class="n">u8</span>  <span class="n">sector_count</span><span class="p">;</span> <span class="n">u8</span> <span class="n">interrupt_reason</span><span class="p">;</span> <span class="p">};</span>
	<span class="n">u8</span>     <span class="n">sector_count_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_b</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_c</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_d</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">host_to_dev_fis</span> <span class="p">{</span>
	<span class="n">u8</span>     <span class="n">fis_type</span><span class="p">;</span>	  <span class="cm">/* 0x27 */</span>
	<span class="n">u8</span>     <span class="n">flags</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">command</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">features</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">lbal</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span> <span class="n">u8</span> <span class="n">lbam</span><span class="p">;</span> <span class="n">u8</span> <span class="n">byte_count_low</span><span class="p">;</span> <span class="p">};</span>
	<span class="k">union</span> <span class="p">{</span> <span class="n">u8</span> <span class="n">lbah</span><span class="p">;</span> <span class="n">u8</span> <span class="n">byte_count_high</span><span class="p">;</span> <span class="p">};</span>
	<span class="n">u8</span>     <span class="n">device</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">lbal_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">lbam_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">lbah_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">features_exp</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span> <span class="n">u8</span>  <span class="n">sector_count</span><span class="p">;</span> <span class="n">u8</span> <span class="n">interrupt_reason</span><span class="p">;</span> <span class="p">};</span>
	<span class="n">u8</span>     <span class="n">sector_count_exp</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_a</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">control</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_b</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* Prefer to have code clarity over header file clarity.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef __LITTLE_ENDIAN_BITFIELD</span>
<span class="k">struct</span> <span class="n">sas_identify_frame</span> <span class="p">{</span>
	<span class="cm">/* Byte 0 */</span>
	<span class="n">u8</span>  <span class="n">frame_type</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">dev_type</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">_un0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="cm">/* Byte 1 */</span>
	<span class="n">u8</span>  <span class="n">_un1</span><span class="p">;</span>

	<span class="cm">/* Byte 2 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span>  <span class="n">_un20</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">smp_iport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">stp_iport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">ssp_iport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">_un247</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="n">u8</span> <span class="n">initiator_bits</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="cm">/* Byte 3 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span>  <span class="n">_un30</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">smp_tport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">stp_tport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">ssp_tport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">_un347</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="n">u8</span> <span class="n">target_bits</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="cm">/* Byte 4 - 11 */</span>
	<span class="n">u8</span> <span class="n">_un4_11</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="cm">/* Byte 12 - 19 */</span>
	<span class="n">u8</span> <span class="n">sas_addr</span><span class="p">[</span><span class="n">SAS_ADDR_SIZE</span><span class="p">];</span>

	<span class="cm">/* Byte 20 */</span>
	<span class="n">u8</span> <span class="n">phy_id</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">_un21_27</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

	<span class="n">__be32</span> <span class="n">crc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">ssp_frame_hdr</span> <span class="p">{</span>
	<span class="n">u8</span>     <span class="n">frame_type</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">hashed_dest_addr</span><span class="p">[</span><span class="n">HASHED_SAS_ADDR_SIZE</span><span class="p">];</span>
	<span class="n">u8</span>     <span class="n">_r_a</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">hashed_src_addr</span><span class="p">[</span><span class="n">HASHED_SAS_ADDR_SIZE</span><span class="p">];</span>
	<span class="n">__be16</span> <span class="n">_r_b</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">changing_data_ptr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">retransmit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">retry_data_frames</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_c</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">num_fill_bytes</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_d</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_e</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">tag</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">tptt</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">data_offs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">ssp_response_iu</span> <span class="p">{</span>
	<span class="n">u8</span>     <span class="n">_r_a</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

	<span class="n">u8</span>     <span class="n">datapres</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">_r_b</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">status</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_c</span><span class="p">;</span>

	<span class="n">__be32</span> <span class="n">sense_data_len</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">response_data_len</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">resp_data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">u8</span>     <span class="n">sense_data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* ---------- SMP ---------- */</span>

<span class="k">struct</span> <span class="n">report_general_resp</span> <span class="p">{</span>
	<span class="n">__be16</span>  <span class="n">change_count</span><span class="p">;</span>
	<span class="n">__be16</span>  <span class="n">route_indexes</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">_r_a</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">num_phys</span><span class="p">;</span>

	<span class="n">u8</span>      <span class="n">conf_route_table</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">configuring</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">config_others</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">orej_retry_supp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">stp_cont_awt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">self_config</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">zone_config</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">t2t_supp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>      <span class="n">_r_c</span><span class="p">;</span>

	<span class="n">u8</span>      <span class="n">enclosure_logical_id</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="n">u8</span>      <span class="n">_r_d</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">discover_resp</span> <span class="p">{</span>
	<span class="n">u8</span>    <span class="n">_r_a</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

	<span class="n">u8</span>    <span class="n">phy_id</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">_r_b</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_c</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">attached_dev_type</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_d</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_e</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">attached_sata_host</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">iproto</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_f</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">attached_sata_dev</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">tproto</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_g</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">attached_sata_ps</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">sas_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>    <span class="n">attached_sas_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>    <span class="n">attached_phy_id</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_h</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

	<span class="n">u8</span>    <span class="n">hmin_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">pmin_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">hmax_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">pmax_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">change_count</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">pptv</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_i</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="k">virtual</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">routing_attr</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_j</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">conn_type</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">conn_el_index</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">conn_phy_link</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_k</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">report_phy_sata_resp</span> <span class="p">{</span>
	<span class="n">u8</span>    <span class="n">_r_a</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

	<span class="n">u8</span>    <span class="n">phy_id</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_b</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">affil_valid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">affil_supp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_c</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_d</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">stp_sas_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">dev_to_host_fis</span> <span class="n">fis</span><span class="p">;</span>

	<span class="n">u32</span>   <span class="n">_r_e</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">affil_stp_ini_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="n">__be32</span> <span class="n">crc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">smp_resp</span> <span class="p">{</span>
	<span class="n">u8</span>    <span class="n">frame_type</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">function</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">result</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">reserved</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">report_general_resp</span>  <span class="n">rg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">discover_resp</span>        <span class="n">disc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">report_phy_sata_resp</span> <span class="n">rps</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cp">#elif defined(__BIG_ENDIAN_BITFIELD)</span>
<span class="k">struct</span> <span class="n">sas_identify_frame</span> <span class="p">{</span>
	<span class="cm">/* Byte 0 */</span>
	<span class="n">u8</span>  <span class="n">_un0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">dev_type</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>  <span class="n">frame_type</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="cm">/* Byte 1 */</span>
	<span class="n">u8</span>  <span class="n">_un1</span><span class="p">;</span>

	<span class="cm">/* Byte 2 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span>  <span class="n">_un247</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">ssp_iport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">stp_iport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">smp_iport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span>  <span class="n">_un20</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="n">u8</span> <span class="n">initiator_bits</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="cm">/* Byte 3 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">_un347</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">ssp_tport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">stp_tport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">smp_tport</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">_un30</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="p">};</span>
		<span class="n">u8</span> <span class="n">target_bits</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="cm">/* Byte 4 - 11 */</span>
	<span class="n">u8</span> <span class="n">_un4_11</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="cm">/* Byte 12 - 19 */</span>
	<span class="n">u8</span> <span class="n">sas_addr</span><span class="p">[</span><span class="n">SAS_ADDR_SIZE</span><span class="p">];</span>

	<span class="cm">/* Byte 20 */</span>
	<span class="n">u8</span> <span class="n">phy_id</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">_un21_27</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

	<span class="n">__be32</span> <span class="n">crc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">ssp_frame_hdr</span> <span class="p">{</span>
	<span class="n">u8</span>     <span class="n">frame_type</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">hashed_dest_addr</span><span class="p">[</span><span class="n">HASHED_SAS_ADDR_SIZE</span><span class="p">];</span>
	<span class="n">u8</span>     <span class="n">_r_a</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">hashed_src_addr</span><span class="p">[</span><span class="n">HASHED_SAS_ADDR_SIZE</span><span class="p">];</span>
	<span class="n">__be16</span> <span class="n">_r_b</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">_r_c</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">retry_data_frames</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">retransmit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">changing_data_ptr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">_r_d</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">num_fill_bytes</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_e</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">tag</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">tptt</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">data_offs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">ssp_response_iu</span> <span class="p">{</span>
	<span class="n">u8</span>     <span class="n">_r_a</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

	<span class="n">u8</span>     <span class="n">_r_b</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u8</span>     <span class="n">datapres</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">status</span><span class="p">;</span>

	<span class="n">u32</span>    <span class="n">_r_c</span><span class="p">;</span>

	<span class="n">__be32</span> <span class="n">sense_data_len</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">response_data_len</span><span class="p">;</span>

	<span class="n">u8</span>     <span class="n">resp_data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">u8</span>     <span class="n">sense_data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* ---------- SMP ---------- */</span>

<span class="k">struct</span> <span class="n">report_general_resp</span> <span class="p">{</span>
	<span class="n">__be16</span>  <span class="n">change_count</span><span class="p">;</span>
	<span class="n">__be16</span>  <span class="n">route_indexes</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">_r_a</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">num_phys</span><span class="p">;</span>

	<span class="n">u8</span>	<span class="n">t2t_supp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">zone_config</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">self_config</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">stp_cont_awt</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">orej_retry_supp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">config_others</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">configuring</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>      <span class="n">conf_route_table</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>      <span class="n">_r_c</span><span class="p">;</span>

	<span class="n">u8</span>      <span class="n">enclosure_logical_id</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="n">u8</span>      <span class="n">_r_d</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">discover_resp</span> <span class="p">{</span>
	<span class="n">u8</span>    <span class="n">_r_a</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

	<span class="n">u8</span>    <span class="n">phy_id</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">_r_b</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_d</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">attached_dev_type</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_c</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_e</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_f</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">iproto</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">attached_sata_host</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">attached_sata_ps</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_g</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">tproto</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">attached_sata_dev</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">sas_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>    <span class="n">attached_sas_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u8</span>    <span class="n">attached_phy_id</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_h</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

	<span class="n">u8</span>    <span class="n">pmin_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">hmin_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">pmax_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">hmax_linkrate</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">change_count</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="k">virtual</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_i</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">pptv</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_j</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">routing_attr</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">conn_type</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">conn_el_index</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">conn_phy_link</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_k</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">report_phy_sata_resp</span> <span class="p">{</span>
	<span class="n">u8</span>    <span class="n">_r_a</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>

	<span class="n">u8</span>    <span class="n">phy_id</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">_r_b</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">_r_c</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">affil_supp</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">affil_valid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>

	<span class="n">u32</span>   <span class="n">_r_d</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">stp_sas_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">dev_to_host_fis</span> <span class="n">fis</span><span class="p">;</span>

	<span class="n">u32</span>   <span class="n">_r_e</span><span class="p">;</span>

	<span class="n">u8</span>    <span class="n">affil_stp_ini_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>

	<span class="n">__be32</span> <span class="n">crc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">smp_resp</span> <span class="p">{</span>
	<span class="n">u8</span>    <span class="n">frame_type</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">function</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">result</span><span class="p">;</span>
	<span class="n">u8</span>    <span class="n">reserved</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">report_general_resp</span>  <span class="n">rg</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">discover_resp</span>        <span class="n">disc</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">report_phy_sata_resp</span> <span class="n">rps</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cp">#else</span>
<span class="cp">#error &quot;Bitfield order not defined!&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* _SAS_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
