<!DOCTYPE html>
<html><head><title>joekychen/linux » include › scsi › fc › fc_els.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>fc_els.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright(c) 2007 Intel Corporation. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms and conditions of the GNU General Public License,</span>
<span class="cm"> * version 2, as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope it will be useful, but WITHOUT</span>
<span class="cm"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> * more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along with</span>
<span class="cm"> * this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> * 51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.</span>
<span class="cm"> *</span>
<span class="cm"> * Maintained at www.Open-FCoE.org</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _FC_ELS_H_</span>
<span class="cp">#define	_FC_ELS_H_</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Fibre Channel Switch - Enhanced Link Services definitions.</span>
<span class="cm"> * From T11 FC-LS Rev 1.2 June 7, 2005.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * ELS Command codes - byte 0 of the frame payload</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_cmd</span> <span class="p">{</span>
	<span class="n">ELS_LS_RJT</span> <span class="o">=</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* ESL reject */</span>
	<span class="n">ELS_LS_ACC</span> <span class="o">=</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/* ESL Accept */</span>
	<span class="n">ELS_PLOGI</span> <span class="o">=</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="cm">/* N_Port login */</span>
	<span class="n">ELS_FLOGI</span> <span class="o">=</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="cm">/* F_Port login */</span>
	<span class="n">ELS_LOGO</span> <span class="o">=</span>	<span class="mh">0x05</span><span class="p">,</span>	<span class="cm">/* Logout */</span>
	<span class="n">ELS_ABTX</span> <span class="o">=</span>	<span class="mh">0x06</span><span class="p">,</span>	<span class="cm">/* Abort exchange - obsolete */</span>
	<span class="n">ELS_RCS</span> <span class="o">=</span>	<span class="mh">0x07</span><span class="p">,</span>	<span class="cm">/* read connection status */</span>
	<span class="n">ELS_RES</span> <span class="o">=</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="cm">/* read exchange status block */</span>
	<span class="n">ELS_RSS</span> <span class="o">=</span>	<span class="mh">0x09</span><span class="p">,</span>	<span class="cm">/* read sequence status block */</span>
	<span class="n">ELS_RSI</span> <span class="o">=</span>	<span class="mh">0x0a</span><span class="p">,</span>	<span class="cm">/* read sequence initiative */</span>
	<span class="n">ELS_ESTS</span> <span class="o">=</span>	<span class="mh">0x0b</span><span class="p">,</span>	<span class="cm">/* establish streaming */</span>
	<span class="n">ELS_ESTC</span> <span class="o">=</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="cm">/* estimate credit */</span>
	<span class="n">ELS_ADVC</span> <span class="o">=</span>	<span class="mh">0x0d</span><span class="p">,</span>	<span class="cm">/* advise credit */</span>
	<span class="n">ELS_RTV</span> <span class="o">=</span>	<span class="mh">0x0e</span><span class="p">,</span>	<span class="cm">/* read timeout value */</span>
	<span class="n">ELS_RLS</span> <span class="o">=</span>	<span class="mh">0x0f</span><span class="p">,</span>	<span class="cm">/* read link error status block */</span>
	<span class="n">ELS_ECHO</span> <span class="o">=</span>	<span class="mh">0x10</span><span class="p">,</span>	<span class="cm">/* echo */</span>
	<span class="n">ELS_TEST</span> <span class="o">=</span>	<span class="mh">0x11</span><span class="p">,</span>	<span class="cm">/* test */</span>
	<span class="n">ELS_RRQ</span> <span class="o">=</span>	<span class="mh">0x12</span><span class="p">,</span>	<span class="cm">/* reinstate recovery qualifier */</span>
	<span class="n">ELS_REC</span> <span class="o">=</span>	<span class="mh">0x13</span><span class="p">,</span>	<span class="cm">/* read exchange concise */</span>
	<span class="n">ELS_SRR</span> <span class="o">=</span>	<span class="mh">0x14</span><span class="p">,</span>	<span class="cm">/* sequence retransmission request */</span>
	<span class="n">ELS_PRLI</span> <span class="o">=</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="cm">/* process login */</span>
	<span class="n">ELS_PRLO</span> <span class="o">=</span>	<span class="mh">0x21</span><span class="p">,</span>	<span class="cm">/* process logout */</span>
	<span class="n">ELS_SCN</span> <span class="o">=</span>	<span class="mh">0x22</span><span class="p">,</span>	<span class="cm">/* state change notification */</span>
	<span class="n">ELS_TPLS</span> <span class="o">=</span>	<span class="mh">0x23</span><span class="p">,</span>	<span class="cm">/* test process login state */</span>
	<span class="n">ELS_TPRLO</span> <span class="o">=</span>	<span class="mh">0x24</span><span class="p">,</span>	<span class="cm">/* third party process logout */</span>
	<span class="n">ELS_LCLM</span> <span class="o">=</span>	<span class="mh">0x25</span><span class="p">,</span>	<span class="cm">/* login control list mgmt (obs) */</span>
	<span class="n">ELS_GAID</span> <span class="o">=</span>	<span class="mh">0x30</span><span class="p">,</span>	<span class="cm">/* get alias_ID */</span>
	<span class="n">ELS_FACT</span> <span class="o">=</span>	<span class="mh">0x31</span><span class="p">,</span>	<span class="cm">/* fabric activate alias_id */</span>
	<span class="n">ELS_FDACDT</span> <span class="o">=</span>	<span class="mh">0x32</span><span class="p">,</span>	<span class="cm">/* fabric deactivate alias_id */</span>
	<span class="n">ELS_NACT</span> <span class="o">=</span>	<span class="mh">0x33</span><span class="p">,</span>	<span class="cm">/* N-port activate alias_id */</span>
	<span class="n">ELS_NDACT</span> <span class="o">=</span>	<span class="mh">0x34</span><span class="p">,</span>	<span class="cm">/* N-port deactivate alias_id */</span>
	<span class="n">ELS_QOSR</span> <span class="o">=</span>	<span class="mh">0x40</span><span class="p">,</span>	<span class="cm">/* quality of service request */</span>
	<span class="n">ELS_RVCS</span> <span class="o">=</span>	<span class="mh">0x41</span><span class="p">,</span>	<span class="cm">/* read virtual circuit status */</span>
	<span class="n">ELS_PDISC</span> <span class="o">=</span>	<span class="mh">0x50</span><span class="p">,</span>	<span class="cm">/* discover N_port service params */</span>
	<span class="n">ELS_FDISC</span> <span class="o">=</span>	<span class="mh">0x51</span><span class="p">,</span>	<span class="cm">/* discover F_port service params */</span>
	<span class="n">ELS_ADISC</span> <span class="o">=</span>	<span class="mh">0x52</span><span class="p">,</span>	<span class="cm">/* discover address */</span>
	<span class="n">ELS_RNC</span> <span class="o">=</span>	<span class="mh">0x53</span><span class="p">,</span>	<span class="cm">/* report node cap (obs) */</span>
	<span class="n">ELS_FARP_REQ</span> <span class="o">=</span>	<span class="mh">0x54</span><span class="p">,</span>	<span class="cm">/* FC ARP request */</span>
	<span class="n">ELS_FARP_REPL</span> <span class="o">=</span>	<span class="mh">0x55</span><span class="p">,</span>	<span class="cm">/* FC ARP reply */</span>
	<span class="n">ELS_RPS</span> <span class="o">=</span>	<span class="mh">0x56</span><span class="p">,</span>	<span class="cm">/* read port status block */</span>
	<span class="n">ELS_RPL</span> <span class="o">=</span>	<span class="mh">0x57</span><span class="p">,</span>	<span class="cm">/* read port list */</span>
	<span class="n">ELS_RPBC</span> <span class="o">=</span>	<span class="mh">0x58</span><span class="p">,</span>	<span class="cm">/* read port buffer condition */</span>
	<span class="n">ELS_FAN</span> <span class="o">=</span>	<span class="mh">0x60</span><span class="p">,</span>	<span class="cm">/* fabric address notification */</span>
	<span class="n">ELS_RSCN</span> <span class="o">=</span>	<span class="mh">0x61</span><span class="p">,</span>	<span class="cm">/* registered state change notification */</span>
	<span class="n">ELS_SCR</span> <span class="o">=</span>	<span class="mh">0x62</span><span class="p">,</span>	<span class="cm">/* state change registration */</span>
	<span class="n">ELS_RNFT</span> <span class="o">=</span>	<span class="mh">0x63</span><span class="p">,</span>	<span class="cm">/* report node FC-4 types */</span>
	<span class="n">ELS_CSR</span> <span class="o">=</span>	<span class="mh">0x68</span><span class="p">,</span>	<span class="cm">/* clock synch. request */</span>
	<span class="n">ELS_CSU</span> <span class="o">=</span>	<span class="mh">0x69</span><span class="p">,</span>	<span class="cm">/* clock synch. update */</span>
	<span class="n">ELS_LINIT</span> <span class="o">=</span>	<span class="mh">0x70</span><span class="p">,</span>	<span class="cm">/* loop initialize */</span>
	<span class="n">ELS_LSTS</span> <span class="o">=</span>	<span class="mh">0x72</span><span class="p">,</span>	<span class="cm">/* loop status */</span>
	<span class="n">ELS_RNID</span> <span class="o">=</span>	<span class="mh">0x78</span><span class="p">,</span>	<span class="cm">/* request node ID data */</span>
	<span class="n">ELS_RLIR</span> <span class="o">=</span>	<span class="mh">0x79</span><span class="p">,</span>	<span class="cm">/* registered link incident report */</span>
	<span class="n">ELS_LIRR</span> <span class="o">=</span>	<span class="mh">0x7a</span><span class="p">,</span>	<span class="cm">/* link incident record registration */</span>
	<span class="n">ELS_SRL</span> <span class="o">=</span>	<span class="mh">0x7b</span><span class="p">,</span>	<span class="cm">/* scan remote loop */</span>
	<span class="n">ELS_SBRP</span> <span class="o">=</span>	<span class="mh">0x7c</span><span class="p">,</span>	<span class="cm">/* set bit-error reporting params */</span>
	<span class="n">ELS_RPSC</span> <span class="o">=</span>	<span class="mh">0x7d</span><span class="p">,</span>	<span class="cm">/* report speed capabilities */</span>
	<span class="n">ELS_QSA</span> <span class="o">=</span>	<span class="mh">0x7e</span><span class="p">,</span>	<span class="cm">/* query security attributes */</span>
	<span class="n">ELS_EVFP</span> <span class="o">=</span>	<span class="mh">0x7f</span><span class="p">,</span>	<span class="cm">/* exchange virt. fabrics params */</span>
	<span class="n">ELS_LKA</span> <span class="o">=</span>	<span class="mh">0x80</span><span class="p">,</span>	<span class="cm">/* link keep-alive */</span>
	<span class="n">ELS_AUTH_ELS</span> <span class="o">=</span>	<span class="mh">0x90</span><span class="p">,</span>	<span class="cm">/* authentication ELS */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Initializer useful for decoding table.</span>
<span class="cm"> * Please keep this in sync with the above definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_ELS_CMDS_INIT {			\</span>
<span class="cp">	[ELS_LS_RJT] =	&quot;LS_RJT&quot;,		\</span>
<span class="cp">	[ELS_LS_ACC] =	&quot;LS_ACC&quot;,		\</span>
<span class="cp">	[ELS_PLOGI] =	&quot;PLOGI&quot;,		\</span>
<span class="cp">	[ELS_FLOGI] =	&quot;FLOGI&quot;,		\</span>
<span class="cp">	[ELS_LOGO] =	&quot;LOGO&quot;,			\</span>
<span class="cp">	[ELS_ABTX] =	&quot;ABTX&quot;,			\</span>
<span class="cp">	[ELS_RCS] =	&quot;RCS&quot;,			\</span>
<span class="cp">	[ELS_RES] =	&quot;RES&quot;,			\</span>
<span class="cp">	[ELS_RSS] =	&quot;RSS&quot;,			\</span>
<span class="cp">	[ELS_RSI] =	&quot;RSI&quot;,			\</span>
<span class="cp">	[ELS_ESTS] =	&quot;ESTS&quot;,			\</span>
<span class="cp">	[ELS_ESTC] =	&quot;ESTC&quot;,			\</span>
<span class="cp">	[ELS_ADVC] =	&quot;ADVC&quot;,			\</span>
<span class="cp">	[ELS_RTV] =	&quot;RTV&quot;,			\</span>
<span class="cp">	[ELS_RLS] =	&quot;RLS&quot;,			\</span>
<span class="cp">	[ELS_ECHO] =	&quot;ECHO&quot;,			\</span>
<span class="cp">	[ELS_TEST] =	&quot;TEST&quot;,			\</span>
<span class="cp">	[ELS_RRQ] =	&quot;RRQ&quot;,			\</span>
<span class="cp">	[ELS_REC] =	&quot;REC&quot;,			\</span>
<span class="cp">	[ELS_SRR] =	&quot;SRR&quot;,			\</span>
<span class="cp">	[ELS_PRLI] =	&quot;PRLI&quot;,			\</span>
<span class="cp">	[ELS_PRLO] =	&quot;PRLO&quot;,			\</span>
<span class="cp">	[ELS_SCN] =	&quot;SCN&quot;,			\</span>
<span class="cp">	[ELS_TPLS] =	&quot;TPLS&quot;,			\</span>
<span class="cp">	[ELS_TPRLO] =	&quot;TPRLO&quot;,		\</span>
<span class="cp">	[ELS_LCLM] =	&quot;LCLM&quot;,			\</span>
<span class="cp">	[ELS_GAID] =	&quot;GAID&quot;,			\</span>
<span class="cp">	[ELS_FACT] =	&quot;FACT&quot;,			\</span>
<span class="cp">	[ELS_FDACDT] =	&quot;FDACDT&quot;,		\</span>
<span class="cp">	[ELS_NACT] =	&quot;NACT&quot;,			\</span>
<span class="cp">	[ELS_NDACT] =	&quot;NDACT&quot;,		\</span>
<span class="cp">	[ELS_QOSR] =	&quot;QOSR&quot;,			\</span>
<span class="cp">	[ELS_RVCS] =	&quot;RVCS&quot;,			\</span>
<span class="cp">	[ELS_PDISC] =	&quot;PDISC&quot;,		\</span>
<span class="cp">	[ELS_FDISC] =	&quot;FDISC&quot;,		\</span>
<span class="cp">	[ELS_ADISC] =	&quot;ADISC&quot;,		\</span>
<span class="cp">	[ELS_RNC] =	&quot;RNC&quot;,			\</span>
<span class="cp">	[ELS_FARP_REQ] = &quot;FARP_REQ&quot;,		\</span>
<span class="cp">	[ELS_FARP_REPL] =  &quot;FARP_REPL&quot;,		\</span>
<span class="cp">	[ELS_RPS] =	&quot;RPS&quot;,			\</span>
<span class="cp">	[ELS_RPL] =	&quot;RPL&quot;,			\</span>
<span class="cp">	[ELS_RPBC] =	&quot;RPBC&quot;,			\</span>
<span class="cp">	[ELS_FAN] =	&quot;FAN&quot;,			\</span>
<span class="cp">	[ELS_RSCN] =	&quot;RSCN&quot;,			\</span>
<span class="cp">	[ELS_SCR] =	&quot;SCR&quot;,			\</span>
<span class="cp">	[ELS_RNFT] =	&quot;RNFT&quot;,			\</span>
<span class="cp">	[ELS_CSR] =	&quot;CSR&quot;,			\</span>
<span class="cp">	[ELS_CSU] =	&quot;CSU&quot;,			\</span>
<span class="cp">	[ELS_LINIT] =	&quot;LINIT&quot;,		\</span>
<span class="cp">	[ELS_LSTS] =	&quot;LSTS&quot;,			\</span>
<span class="cp">	[ELS_RNID] =	&quot;RNID&quot;,			\</span>
<span class="cp">	[ELS_RLIR] =	&quot;RLIR&quot;,			\</span>
<span class="cp">	[ELS_LIRR] =	&quot;LIRR&quot;,			\</span>
<span class="cp">	[ELS_SRL] =	&quot;SRL&quot;,			\</span>
<span class="cp">	[ELS_SBRP] =	&quot;SBRP&quot;,			\</span>
<span class="cp">	[ELS_RPSC] =	&quot;RPSC&quot;,			\</span>
<span class="cp">	[ELS_QSA] =	&quot;QSA&quot;,			\</span>
<span class="cp">	[ELS_EVFP] =	&quot;EVFP&quot;,			\</span>
<span class="cp">	[ELS_LKA] =	&quot;LKA&quot;,			\</span>
<span class="cp">	[ELS_AUTH_ELS] = &quot;AUTH_ELS&quot;,		\</span>
<span class="cp">}</span>

<span class="cm">/*</span>
<span class="cm"> * LS_ACC payload.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_ls_acc</span> <span class="p">{</span>
	<span class="n">__u8</span>          <span class="n">la_cmd</span><span class="p">;</span>		<span class="cm">/* command code ELS_LS_ACC */</span>
	<span class="n">__u8</span>          <span class="n">la_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS reject payload.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_ls_rjt</span> <span class="p">{</span>
	<span class="n">__u8</span>	<span class="n">er_cmd</span><span class="p">;</span>		<span class="cm">/* command code ELS_LS_RJT */</span>
	<span class="n">__u8</span>	<span class="n">er_resv</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* reserved must be zero */</span>
	<span class="n">__u8</span>	<span class="n">er_reason</span><span class="p">;</span>	<span class="cm">/* reason (enum fc_els_rjt_reason below) */</span>
	<span class="n">__u8</span>	<span class="n">er_explan</span><span class="p">;</span>	<span class="cm">/* explanation (enum fc_els_rjt_explan below) */</span>
	<span class="n">__u8</span>	<span class="n">er_vendor</span><span class="p">;</span>	<span class="cm">/* vendor specific code */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS reject reason codes (er_reason).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_rjt_reason</span> <span class="p">{</span>
	<span class="n">ELS_RJT_NONE</span> <span class="o">=</span>		<span class="mi">0</span><span class="p">,</span>	<span class="cm">/* no reject - not to be sent */</span>
	<span class="n">ELS_RJT_INVAL</span> <span class="o">=</span>		<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* invalid ELS command code */</span>
	<span class="n">ELS_RJT_LOGIC</span> <span class="o">=</span>		<span class="mh">0x03</span><span class="p">,</span>	<span class="cm">/* logical error */</span>
	<span class="n">ELS_RJT_BUSY</span> <span class="o">=</span>		<span class="mh">0x05</span><span class="p">,</span>	<span class="cm">/* logical busy */</span>
	<span class="n">ELS_RJT_PROT</span> <span class="o">=</span>		<span class="mh">0x07</span><span class="p">,</span>	<span class="cm">/* protocol error */</span>
	<span class="n">ELS_RJT_UNAB</span> <span class="o">=</span>		<span class="mh">0x09</span><span class="p">,</span>	<span class="cm">/* unable to perform command request */</span>
	<span class="n">ELS_RJT_UNSUP</span> <span class="o">=</span>		<span class="mh">0x0b</span><span class="p">,</span>	<span class="cm">/* command not supported */</span>
	<span class="n">ELS_RJT_INPROG</span> <span class="o">=</span>	<span class="mh">0x0e</span><span class="p">,</span>	<span class="cm">/* command already in progress */</span>
	<span class="n">ELS_RJT_FIP</span> <span class="o">=</span>		<span class="mh">0x20</span><span class="p">,</span>	<span class="cm">/* FIP error */</span>
	<span class="n">ELS_RJT_VENDOR</span> <span class="o">=</span>	<span class="mh">0xff</span><span class="p">,</span>	<span class="cm">/* vendor specific error */</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * reason code explanation (er_explan).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_rjt_explan</span> <span class="p">{</span>
	<span class="n">ELS_EXPL_NONE</span> <span class="o">=</span>		<span class="mh">0x00</span><span class="p">,</span>	<span class="cm">/* No additional explanation */</span>
	<span class="n">ELS_EXPL_SPP_OPT_ERR</span> <span class="o">=</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* service parameter error - options */</span>
	<span class="n">ELS_EXPL_SPP_ICTL_ERR</span> <span class="o">=</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="cm">/* service parm error - initiator ctl */</span>
	<span class="n">ELS_EXPL_AH</span> <span class="o">=</span>		<span class="mh">0x11</span><span class="p">,</span>	<span class="cm">/* invalid association header */</span>
	<span class="n">ELS_EXPL_AH_REQ</span> <span class="o">=</span>	<span class="mh">0x13</span><span class="p">,</span>	<span class="cm">/* association_header required */</span>
	<span class="n">ELS_EXPL_SID</span> <span class="o">=</span>		<span class="mh">0x15</span><span class="p">,</span>	<span class="cm">/* invalid originator S_ID */</span>
	<span class="n">ELS_EXPL_OXID_RXID</span> <span class="o">=</span>	<span class="mh">0x17</span><span class="p">,</span>	<span class="cm">/* invalid OX_ID-RX_ID combination */</span>
	<span class="n">ELS_EXPL_INPROG</span> <span class="o">=</span>	<span class="mh">0x19</span><span class="p">,</span>	<span class="cm">/* Request already in progress */</span>
	<span class="n">ELS_EXPL_PLOGI_REQD</span> <span class="o">=</span>	<span class="mh">0x1e</span><span class="p">,</span>	<span class="cm">/* N_Port login required */</span>
	<span class="n">ELS_EXPL_INSUF_RES</span> <span class="o">=</span>	<span class="mh">0x29</span><span class="p">,</span>	<span class="cm">/* insufficient resources */</span>
	<span class="n">ELS_EXPL_UNAB_DATA</span> <span class="o">=</span>	<span class="mh">0x2a</span><span class="p">,</span>	<span class="cm">/* unable to supply requested data */</span>
	<span class="n">ELS_EXPL_UNSUPR</span> <span class="o">=</span>	<span class="mh">0x2c</span><span class="p">,</span>	<span class="cm">/* Request not supported */</span>
	<span class="n">ELS_EXPL_INV_LEN</span> <span class="o">=</span>	<span class="mh">0x2d</span><span class="p">,</span>	<span class="cm">/* Invalid payload length */</span>
	<span class="n">ELS_EXPL_NOT_NEIGHBOR</span> <span class="o">=</span> <span class="mh">0x62</span><span class="p">,</span>	<span class="cm">/* VN2VN_Port not in neighbor set */</span>
	<span class="cm">/* TBD - above definitions incomplete */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Common service parameters (N ports).</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_csp</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">sp_hi_ver</span><span class="p">;</span>	<span class="cm">/* highest version supported (obs.) */</span>
	<span class="n">__u8</span>		<span class="n">sp_lo_ver</span><span class="p">;</span>	<span class="cm">/* highest version supported (obs.) */</span>
	<span class="n">__be16</span>		<span class="n">sp_bb_cred</span><span class="p">;</span>	<span class="cm">/* buffer-to-buffer credits */</span>
	<span class="n">__be16</span>		<span class="n">sp_features</span><span class="p">;</span>	<span class="cm">/* common feature flags */</span>
	<span class="n">__be16</span>		<span class="n">sp_bb_data</span><span class="p">;</span>	<span class="cm">/* b-b state number and data field sz */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__be16</span>	<span class="n">_sp_tot_seq</span><span class="p">;</span> <span class="cm">/* total concurrent sequences */</span>
			<span class="n">__be16</span>	<span class="n">_sp_rel_off</span><span class="p">;</span> <span class="cm">/* rel. offset by info cat */</span>
		<span class="p">}</span> <span class="n">sp_plogi</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__be32</span>	<span class="n">_sp_r_a_tov</span><span class="p">;</span> <span class="cm">/* resource alloc. timeout msec */</span>
		<span class="p">}</span> <span class="n">sp_flogi_acc</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">sp_u</span><span class="p">;</span>
	<span class="n">__be32</span>		<span class="n">sp_e_d_tov</span><span class="p">;</span>	<span class="cm">/* error detect timeout value */</span>
<span class="p">};</span>
<span class="cp">#define	sp_tot_seq	sp_u.sp_plogi._sp_tot_seq</span>
<span class="cp">#define	sp_rel_off	sp_u.sp_plogi._sp_rel_off</span>
<span class="cp">#define	sp_r_a_tov	sp_u.sp_flogi_acc._sp_r_a_tov</span>

<span class="cp">#define	FC_SP_BB_DATA_MASK 0xfff </span><span class="cm">/* mask for data field size in sp_bb_data */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Minimum and maximum values for max data field size in service parameters.</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_SP_MIN_MAX_PAYLOAD	FC_MIN_MAX_PAYLOAD</span>
<span class="cp">#define	FC_SP_MAX_MAX_PAYLOAD	FC_MAX_PAYLOAD</span>

<span class="cm">/*</span>
<span class="cm"> * sp_features</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_SP_FT_NPIV	0x8000	</span><span class="cm">/* multiple N_Port_ID support (FLOGI) */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_CIRO	0x8000	</span><span class="cm">/* continuously increasing rel off (PLOGI) */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_CLAD	0x8000	</span><span class="cm">/* clean address (in FLOGI LS_ACC) */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_RAND	0x4000	</span><span class="cm">/* random relative offset */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_VAL	0x2000	</span><span class="cm">/* valid vendor version level */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_NPIV_ACC	0x2000	</span><span class="cm">/* NPIV assignment (FLOGI LS_ACC) */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_FPORT	0x1000	</span><span class="cm">/* F port (1) vs. N port (0) */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_ABB	0x0800	</span><span class="cm">/* alternate BB_credit management */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_EDTR	0x0400	</span><span class="cm">/* E_D_TOV Resolution is nanoseconds */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_MCAST	0x0200	</span><span class="cm">/* multicast */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_BCAST	0x0100	</span><span class="cm">/* broadcast */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_HUNT	0x0080	</span><span class="cm">/* hunt group */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_SIMP	0x0040	</span><span class="cm">/* dedicated simplex */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_SEC	0x0020	</span><span class="cm">/* reserved for security */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_CSYN	0x0010	</span><span class="cm">/* clock synch. supported */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_RTTOV	0x0008	</span><span class="cm">/* R_T_TOV value 100 uS, else 100 mS */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_HALF	0x0004	</span><span class="cm">/* dynamic half duplex */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_SEQC	0x0002	</span><span class="cm">/* SEQ_CNT */</span><span class="cp"></span>
<span class="cp">#define	FC_SP_FT_PAYL	0x0001	</span><span class="cm">/* FLOGI payload length 256, else 116 */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Class-specific service parameters.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_cssp</span> <span class="p">{</span>
	<span class="n">__be16</span>		<span class="n">cp_class</span><span class="p">;</span>	<span class="cm">/* class flags */</span>
	<span class="n">__be16</span>		<span class="n">cp_init</span><span class="p">;</span>	<span class="cm">/* initiator flags */</span>
	<span class="n">__be16</span>		<span class="n">cp_recip</span><span class="p">;</span>	<span class="cm">/* recipient flags */</span>
	<span class="n">__be16</span>		<span class="n">cp_rdfs</span><span class="p">;</span>	<span class="cm">/* receive data field size */</span>
	<span class="n">__be16</span>		<span class="n">cp_con_seq</span><span class="p">;</span>	<span class="cm">/* concurrent sequences */</span>
	<span class="n">__be16</span>		<span class="n">cp_ee_cred</span><span class="p">;</span>	<span class="cm">/* N-port end-to-end credit */</span>
	<span class="n">__u8</span>		<span class="n">cp_resv1</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">cp_open_seq</span><span class="p">;</span>	<span class="cm">/* open sequences per exchange */</span>
	<span class="n">__u8</span>		<span class="n">_cp_resv2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * cp_class flags.</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_CPC_VALID	0x8000		</span><span class="cm">/* class valid */</span><span class="cp"></span>
<span class="cp">#define	FC_CPC_IMIX	0x4000		</span><span class="cm">/* intermix mode */</span><span class="cp"></span>
<span class="cp">#define	FC_CPC_SEQ	0x0800		</span><span class="cm">/* sequential delivery */</span><span class="cp"></span>
<span class="cp">#define	FC_CPC_CAMP	0x0200		</span><span class="cm">/* camp-on */</span><span class="cp"></span>
<span class="cp">#define	FC_CPC_PRI	0x0080		</span><span class="cm">/* priority */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * cp_init flags.</span>
<span class="cm"> * (TBD: not all flags defined here).</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_CPI_CSYN	0x0010		</span><span class="cm">/* clock synch. capable */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * cp_recip flags.</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_CPR_CSYN	0x0008		</span><span class="cm">/* clock synch. capable */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * NFC_ELS_FLOGI: Fabric login request.</span>
<span class="cm"> * NFC_ELS_PLOGI: Port login request (same format).</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_flogi</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">fl_cmd</span><span class="p">;</span>		<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">_fl_resvd</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* must be zero */</span>
	<span class="k">struct</span> <span class="n">fc_els_csp</span> <span class="n">fl_csp</span><span class="p">;</span>	<span class="cm">/* common service parameters */</span>
	<span class="n">__be64</span>		<span class="n">fl_wwpn</span><span class="p">;</span>	<span class="cm">/* port name */</span>
	<span class="n">__be64</span>		<span class="n">fl_wwnn</span><span class="p">;</span>	<span class="cm">/* node name */</span>
	<span class="k">struct</span> <span class="n">fc_els_cssp</span> <span class="n">fl_cssp</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* class 1-4 service parameters */</span>
	<span class="n">__u8</span>		<span class="n">fl_vend</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>	<span class="cm">/* vendor version level */</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cm">/*</span>
<span class="cm"> * Process login service parameter page.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_spp</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">spp_type</span><span class="p">;</span>	<span class="cm">/* type code or common service params */</span>
	<span class="n">__u8</span>		<span class="n">spp_type_ext</span><span class="p">;</span>	<span class="cm">/* type code extension */</span>
	<span class="n">__u8</span>		<span class="n">spp_flags</span><span class="p">;</span>
	<span class="n">__u8</span>		<span class="n">_spp_resvd</span><span class="p">;</span>
	<span class="n">__be32</span>		<span class="n">spp_orig_pa</span><span class="p">;</span>	<span class="cm">/* originator process associator */</span>
	<span class="n">__be32</span>		<span class="n">spp_resp_pa</span><span class="p">;</span>	<span class="cm">/* responder process associator */</span>
	<span class="n">__be32</span>		<span class="n">spp_params</span><span class="p">;</span>	<span class="cm">/* service parameters */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * spp_flags.</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_SPP_OPA_VAL	    0x80	</span><span class="cm">/* originator proc. assoc. valid */</span><span class="cp"></span>
<span class="cp">#define	FC_SPP_RPA_VAL	    0x40	</span><span class="cm">/* responder proc. assoc. valid */</span><span class="cp"></span>
<span class="cp">#define	FC_SPP_EST_IMG_PAIR 0x20	</span><span class="cm">/* establish image pair */</span><span class="cp"></span>
<span class="cp">#define	FC_SPP_RESP_MASK    0x0f	</span><span class="cm">/* mask for response code (below) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * SPP response code in spp_flags - lower 4 bits.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_spp_resp</span> <span class="p">{</span>
	<span class="n">FC_SPP_RESP_ACK</span>	<span class="o">=</span>	<span class="mi">1</span><span class="p">,</span>	<span class="cm">/* request executed */</span>
	<span class="n">FC_SPP_RESP_RES</span> <span class="o">=</span>	<span class="mi">2</span><span class="p">,</span>	<span class="cm">/* unable due to lack of resources */</span>
	<span class="n">FC_SPP_RESP_INIT</span> <span class="o">=</span>	<span class="mi">3</span><span class="p">,</span>	<span class="cm">/* initialization not complete */</span>
	<span class="n">FC_SPP_RESP_NO_PA</span> <span class="o">=</span> 	<span class="mi">4</span><span class="p">,</span>	<span class="cm">/* unknown process associator */</span>
	<span class="n">FC_SPP_RESP_CONF</span> <span class="o">=</span> 	<span class="mi">5</span><span class="p">,</span>	<span class="cm">/* configuration precludes image pair */</span>
	<span class="n">FC_SPP_RESP_COND</span> <span class="o">=</span> 	<span class="mi">6</span><span class="p">,</span>	<span class="cm">/* request completed conditionally */</span>
	<span class="n">FC_SPP_RESP_MULT</span> <span class="o">=</span> 	<span class="mi">7</span><span class="p">,</span>	<span class="cm">/* unable to handle multiple SPPs */</span>
	<span class="n">FC_SPP_RESP_INVL</span> <span class="o">=</span> 	<span class="mi">8</span><span class="p">,</span>	<span class="cm">/* SPP is invalid */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_RRQ - Reinstate Recovery Qualifier</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rrq</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rrq_cmd</span><span class="p">;</span>	<span class="cm">/* command (0x12) */</span>
	<span class="n">__u8</span>		<span class="n">rrq_zero</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* specified as zero - part of cmd */</span>
	<span class="n">__u8</span>		<span class="n">rrq_resvd</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">rrq_s_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* originator FID */</span>
	<span class="n">__be16</span>		<span class="n">rrq_ox_id</span><span class="p">;</span>	<span class="cm">/* originator exchange ID */</span>
	<span class="n">__be16</span>		<span class="n">rrq_rx_id</span><span class="p">;</span>	<span class="cm">/* responders exchange ID */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_REC - Read exchange concise.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rec</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rec_cmd</span><span class="p">;</span>	<span class="cm">/* command (0x13) */</span>
	<span class="n">__u8</span>		<span class="n">rec_zero</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* specified as zero - part of cmd */</span>
	<span class="n">__u8</span>		<span class="n">rec_resvd</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">rec_s_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* originator FID */</span>
	<span class="n">__be16</span>		<span class="n">rec_ox_id</span><span class="p">;</span>	<span class="cm">/* originator exchange ID */</span>
	<span class="n">__be16</span>		<span class="n">rec_rx_id</span><span class="p">;</span>	<span class="cm">/* responders exchange ID */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_REC LS_ACC payload.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rec_acc</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">reca_cmd</span><span class="p">;</span>	<span class="cm">/* accept (0x02) */</span>
	<span class="n">__u8</span>		<span class="n">reca_zero</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* specified as zero - part of cmd */</span>
	<span class="n">__be16</span>		<span class="n">reca_ox_id</span><span class="p">;</span>	<span class="cm">/* originator exchange ID */</span>
	<span class="n">__be16</span>		<span class="n">reca_rx_id</span><span class="p">;</span>	<span class="cm">/* responders exchange ID */</span>
	<span class="n">__u8</span>		<span class="n">reca_resvd1</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">reca_ofid</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* originator FID */</span>
	<span class="n">__u8</span>		<span class="n">reca_resvd2</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">reca_rfid</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* responder FID */</span>
	<span class="n">__be32</span>		<span class="n">reca_fc4value</span><span class="p">;</span>	<span class="cm">/* FC4 value */</span>
	<span class="n">__be32</span>		<span class="n">reca_e_stat</span><span class="p">;</span>	<span class="cm">/* ESB (exchange status block) status */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_PRLI - Process login request and response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_prli</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">prli_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">prli_spp_len</span><span class="p">;</span>	<span class="cm">/* length of each serv. parm. page */</span>
	<span class="n">__be16</span>		<span class="n">prli_len</span><span class="p">;</span>	<span class="cm">/* length of entire payload */</span>
	<span class="cm">/* service parameter pages follow */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_PRLO - Process logout request and response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_prlo</span> <span class="p">{</span>
	<span class="n">__u8</span>            <span class="n">prlo_cmd</span><span class="p">;</span>       <span class="cm">/* command */</span>
	<span class="n">__u8</span>            <span class="n">prlo_obs</span><span class="p">;</span>       <span class="cm">/* obsolete, but shall be set to 10h */</span>
	<span class="n">__be16</span>          <span class="n">prlo_len</span><span class="p">;</span>       <span class="cm">/* payload length */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_ADISC payload</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_adisc</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">adisc_cmd</span><span class="p">;</span>
	<span class="n">__u8</span>		<span class="n">adisc_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__u8</span>            <span class="n">adisc_resv1</span><span class="p">;</span>
	<span class="n">__u8</span>            <span class="n">adisc_hard_addr</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__be64</span>          <span class="n">adisc_wwpn</span><span class="p">;</span>
	<span class="n">__be64</span>          <span class="n">adisc_wwnn</span><span class="p">;</span>
	<span class="n">__u8</span>            <span class="n">adisc_resv2</span><span class="p">;</span>
	<span class="n">__u8</span>            <span class="n">adisc_port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_LOGO - process or fabric logout.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_logo</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">fl_cmd</span><span class="p">;</span>		<span class="cm">/* command code */</span>
	<span class="n">__u8</span>		<span class="n">fl_zero</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* specified as zero - part of cmd */</span>
	<span class="n">__u8</span>		<span class="n">fl_resvd</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">fl_n_port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="cm">/* N port ID */</span>
	<span class="n">__be64</span>		<span class="n">fl_n_port_wwn</span><span class="p">;</span>	<span class="cm">/* port name */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_RTV - read timeout value.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rtv</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rtv_cmd</span><span class="p">;</span>	<span class="cm">/* command code 0x0e */</span>
	<span class="n">__u8</span>		<span class="n">rtv_zero</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* specified as zero - part of cmd */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * LS_ACC for ELS_RTV - read timeout value.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rtv_acc</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rtv_cmd</span><span class="p">;</span>	<span class="cm">/* command code 0x02 */</span>
	<span class="n">__u8</span>		<span class="n">rtv_zero</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* specified as zero - part of cmd */</span>
	<span class="n">__be32</span>		<span class="n">rtv_r_a_tov</span><span class="p">;</span>	<span class="cm">/* resource allocation timeout value */</span>
	<span class="n">__be32</span>		<span class="n">rtv_e_d_tov</span><span class="p">;</span>	<span class="cm">/* error detection timeout value */</span>
	<span class="n">__be32</span>		<span class="n">rtv_toq</span><span class="p">;</span>	<span class="cm">/* timeout qualifier (see below) */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * rtv_toq bits.</span>
<span class="cm"> */</span>
<span class="cp">#define	FC_ELS_RTV_EDRES (1 &lt;&lt; 26)	</span><span class="cm">/* E_D_TOV resolution is nS else mS */</span><span class="cp"></span>
<span class="cp">#define	FC_ELS_RTV_RTTOV (1 &lt;&lt; 19)	</span><span class="cm">/* R_T_TOV is 100 uS else 100 mS */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ELS_SCR - state change registration payload.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_scr</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">scr_cmd</span><span class="p">;</span>	<span class="cm">/* command code */</span>
	<span class="n">__u8</span>		<span class="n">scr_resv</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">scr_reg_func</span><span class="p">;</span>	<span class="cm">/* registration function (see below) */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_scr_func</span> <span class="p">{</span>
	<span class="n">ELS_SCRF_FAB</span> <span class="o">=</span>	<span class="mi">1</span><span class="p">,</span>	<span class="cm">/* fabric-detected registration */</span>
	<span class="n">ELS_SCRF_NPORT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* Nx_Port-detected registration */</span>
	<span class="n">ELS_SCRF_FULL</span> <span class="o">=</span>	<span class="mi">3</span><span class="p">,</span>	<span class="cm">/* full registration */</span>
	<span class="n">ELS_SCRF_CLEAR</span> <span class="o">=</span> <span class="mi">255</span><span class="p">,</span>	<span class="cm">/* remove any current registrations */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_RSCN - registered state change notification payload.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rscn</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rscn_cmd</span><span class="p">;</span>	<span class="cm">/* RSCN opcode (0x61) */</span>
	<span class="n">__u8</span>		<span class="n">rscn_page_len</span><span class="p">;</span>	<span class="cm">/* page length (4) */</span>
	<span class="n">__be16</span>		<span class="n">rscn_plen</span><span class="p">;</span>	<span class="cm">/* payload length including this word */</span>

	<span class="cm">/* followed by 4-byte generic affected Port_ID pages */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fc_els_rscn_page</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rscn_page_flags</span><span class="p">;</span> <span class="cm">/* event and address format */</span>
	<span class="n">__u8</span>		<span class="n">rscn_fid</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* fabric ID */</span>
<span class="p">};</span>

<span class="cp">#define	ELS_RSCN_EV_QUAL_BIT	2	</span><span class="cm">/* shift count for event qualifier */</span><span class="cp"></span>
<span class="cp">#define	ELS_RSCN_EV_QUAL_MASK	0xf	</span><span class="cm">/* mask for event qualifier */</span><span class="cp"></span>
<span class="cp">#define	ELS_RSCN_ADDR_FMT_BIT	0	</span><span class="cm">/* shift count for address format */</span><span class="cp"></span>
<span class="cp">#define	ELS_RSCN_ADDR_FMT_MASK	0x3	</span><span class="cm">/* mask for address format */</span><span class="cp"></span>

<span class="k">enum</span> <span class="n">fc_els_rscn_ev_qual</span> <span class="p">{</span>
	<span class="n">ELS_EV_QUAL_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* unspecified */</span>
	<span class="n">ELS_EV_QUAL_NS_OBJ</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>		<span class="cm">/* changed name server object */</span>
	<span class="n">ELS_EV_QUAL_PORT_ATTR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* changed port attribute */</span>
	<span class="n">ELS_EV_QUAL_SERV_OBJ</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* changed service object */</span>
	<span class="n">ELS_EV_QUAL_SW_CONFIG</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* changed switch configuration */</span>
	<span class="n">ELS_EV_QUAL_REM_OBJ</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/* removed object */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rscn_addr_fmt</span> <span class="p">{</span>
	<span class="n">ELS_ADDR_FMT_PORT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* rscn_fid is a port address */</span>
	<span class="n">ELS_ADDR_FMT_AREA</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* rscn_fid is a area address */</span>
	<span class="n">ELS_ADDR_FMT_DOM</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* rscn_fid is a domain address */</span>
	<span class="n">ELS_ADDR_FMT_FAB</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* anything on fabric may have changed */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_RNID - request Node ID.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rnid</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rnid_cmd</span><span class="p">;</span>	<span class="cm">/* RNID opcode (0x78) */</span>
	<span class="n">__u8</span>		<span class="n">rnid_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">rnid_fmt</span><span class="p">;</span>	<span class="cm">/* data format */</span>
	<span class="n">__u8</span>		<span class="n">rnid_resv2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Node Identification Data formats (rnid_fmt)</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_rnid_fmt</span> <span class="p">{</span>
	<span class="n">ELS_RNIDF_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* no specific identification data */</span>
	<span class="n">ELS_RNIDF_GEN</span> <span class="o">=</span> <span class="mh">0xdf</span><span class="p">,</span>		<span class="cm">/* general topology discovery format */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS_RNID response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rnid_resp</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rnid_cmd</span><span class="p">;</span>	<span class="cm">/* response code (LS_ACC) */</span>
	<span class="n">__u8</span>		<span class="n">rnid_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">rnid_fmt</span><span class="p">;</span>	<span class="cm">/* data format */</span>
	<span class="n">__u8</span>		<span class="n">rnid_cid_len</span><span class="p">;</span>	<span class="cm">/* common ID data length */</span>
	<span class="n">__u8</span>		<span class="n">rnid_resv2</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">rnid_sid_len</span><span class="p">;</span>	<span class="cm">/* specific ID data length */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fc_els_rnid_cid</span> <span class="p">{</span>
	<span class="n">__be64</span>		<span class="n">rnid_wwpn</span><span class="p">;</span>	<span class="cm">/* N port name */</span>
	<span class="n">__be64</span>		<span class="n">rnid_wwnn</span><span class="p">;</span>	<span class="cm">/* node name */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">fc_els_rnid_gen</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rnid_vend_id</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span> <span class="cm">/* vendor-unique ID */</span>
	<span class="n">__be32</span>		<span class="n">rnid_atype</span><span class="p">;</span>	<span class="cm">/* associated type (see below) */</span>
	<span class="n">__be32</span>		<span class="n">rnid_phys_port</span><span class="p">;</span>	<span class="cm">/* physical port number */</span>
	<span class="n">__be32</span>		<span class="n">rnid_att_nodes</span><span class="p">;</span>	<span class="cm">/* number of attached nodes */</span>
	<span class="n">__u8</span>		<span class="n">rnid_node_mgmt</span><span class="p">;</span>	<span class="cm">/* node management (see below) */</span>
	<span class="n">__u8</span>		<span class="n">rnid_ip_ver</span><span class="p">;</span>	<span class="cm">/* IP version (see below) */</span>
	<span class="n">__be16</span>		<span class="n">rnid_prot_port</span><span class="p">;</span>	<span class="cm">/* UDP / TCP port number */</span>
	<span class="n">__be32</span>		<span class="n">rnid_ip_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="cm">/* IP address */</span>
	<span class="n">__u8</span>		<span class="n">rnid_resvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
	<span class="n">__be16</span>		<span class="n">rnid_vend_spec</span><span class="p">;</span>	<span class="cm">/* vendor-specific field */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rnid_atype</span> <span class="p">{</span>
	<span class="n">ELS_RNIDA_UNK</span> <span class="o">=</span>		<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* unknown */</span>
	<span class="n">ELS_RNIDA_OTHER</span> <span class="o">=</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/* none of the following */</span>
	<span class="n">ELS_RNIDA_HUB</span> <span class="o">=</span>		<span class="mh">0x03</span><span class="p">,</span>
	<span class="n">ELS_RNIDA_SWITCH</span> <span class="o">=</span>	<span class="mh">0x04</span><span class="p">,</span>
	<span class="n">ELS_RNIDA_GATEWAY</span> <span class="o">=</span>	<span class="mh">0x05</span><span class="p">,</span>
	<span class="n">ELS_RNIDA_CONV</span> <span class="o">=</span>	<span class="mh">0x06</span><span class="p">,</span>   <span class="cm">/* Obsolete, do not use this value */</span>
	<span class="n">ELS_RNIDA_HBA</span> <span class="o">=</span>	        <span class="mh">0x07</span><span class="p">,</span>   <span class="cm">/* Obsolete, do not use this value */</span>
	<span class="n">ELS_RNIDA_PROXY</span> <span class="o">=</span>       <span class="mh">0x08</span><span class="p">,</span>   <span class="cm">/* Obsolete, do not use this value */</span>
	<span class="n">ELS_RNIDA_STORAGE</span> <span class="o">=</span>	<span class="mh">0x09</span><span class="p">,</span>
	<span class="n">ELS_RNIDA_HOST</span> <span class="o">=</span>	<span class="mh">0x0a</span><span class="p">,</span>
	<span class="n">ELS_RNIDA_SUBSYS</span> <span class="o">=</span>	<span class="mh">0x0b</span><span class="p">,</span>	<span class="cm">/* storage subsystem (e.g., RAID) */</span>
	<span class="n">ELS_RNIDA_ACCESS</span> <span class="o">=</span>	<span class="mh">0x0e</span><span class="p">,</span>	<span class="cm">/* access device (e.g. media changer) */</span>
	<span class="n">ELS_RNIDA_NAS</span> <span class="o">=</span>		<span class="mh">0x11</span><span class="p">,</span>	<span class="cm">/* NAS server */</span>
	<span class="n">ELS_RNIDA_BRIDGE</span> <span class="o">=</span>	<span class="mh">0x12</span><span class="p">,</span>	<span class="cm">/* bridge */</span>
	<span class="n">ELS_RNIDA_VIRT</span> <span class="o">=</span>	<span class="mh">0x13</span><span class="p">,</span>	<span class="cm">/* virtualization device */</span>
	<span class="n">ELS_RNIDA_MF</span> <span class="o">=</span>		<span class="mh">0xff</span><span class="p">,</span>	<span class="cm">/* multifunction device (bits below) */</span>
	<span class="n">ELS_RNIDA_MF_HUB</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">,</span> 	<span class="cm">/* hub */</span>
	<span class="n">ELS_RNIDA_MF_SW</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">30</span><span class="p">,</span> 	<span class="cm">/* switch */</span>
	<span class="n">ELS_RNIDA_MF_GW</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">29</span><span class="p">,</span>	<span class="cm">/* gateway */</span>
	<span class="n">ELS_RNIDA_MF_ST</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">28</span><span class="p">,</span>	<span class="cm">/* storage */</span>
	<span class="n">ELS_RNIDA_MF_HOST</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">27</span><span class="p">,</span>	<span class="cm">/* host */</span>
	<span class="n">ELS_RNIDA_MF_SUB</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">26</span><span class="p">,</span>	<span class="cm">/* storage subsystem */</span>
	<span class="n">ELS_RNIDA_MF_ACC</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">25</span><span class="p">,</span>	<span class="cm">/* storage access dev */</span>
	<span class="n">ELS_RNIDA_MF_WDM</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="p">,</span>	<span class="cm">/* wavelength division mux */</span>
	<span class="n">ELS_RNIDA_MF_NAS</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">23</span><span class="p">,</span>	<span class="cm">/* NAS server */</span>
	<span class="n">ELS_RNIDA_MF_BR</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">22</span><span class="p">,</span>	<span class="cm">/* bridge */</span>
	<span class="n">ELS_RNIDA_MF_VIRT</span> <span class="o">=</span>	<span class="mi">1UL</span> <span class="o">&lt;&lt;</span> <span class="mi">21</span><span class="p">,</span>	<span class="cm">/* virtualization device */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rnid_mgmt</span> <span class="p">{</span>
	<span class="n">ELS_RNIDM_SNMP</span> <span class="o">=</span>	<span class="mi">0</span><span class="p">,</span>
	<span class="n">ELS_RNIDM_TELNET</span> <span class="o">=</span>	<span class="mi">1</span><span class="p">,</span>
	<span class="n">ELS_RNIDM_HTTP</span> <span class="o">=</span>	<span class="mi">2</span><span class="p">,</span>
	<span class="n">ELS_RNIDM_HTTPS</span> <span class="o">=</span>	<span class="mi">3</span><span class="p">,</span>
	<span class="n">ELS_RNIDM_XML</span> <span class="o">=</span>		<span class="mi">4</span><span class="p">,</span>	<span class="cm">/* HTTP + XML */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rnid_ipver</span> <span class="p">{</span>
	<span class="n">ELS_RNIDIP_NONE</span> <span class="o">=</span>	<span class="mi">0</span><span class="p">,</span>	<span class="cm">/* no IP support or node mgmt. */</span>
	<span class="n">ELS_RNIDIP_V4</span> <span class="o">=</span>		<span class="mi">1</span><span class="p">,</span>	<span class="cm">/* IPv4 */</span>
	<span class="n">ELS_RNIDIP_V6</span> <span class="o">=</span>		<span class="mi">2</span><span class="p">,</span>	<span class="cm">/* IPv6 */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS RPL - Read Port List.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rpl</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rpl_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">rpl_resv</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__be16</span>		<span class="n">rpl_max_size</span><span class="p">;</span>	<span class="cm">/* maximum response size or zero */</span>
	<span class="n">__u8</span>		<span class="n">rpl_resv1</span><span class="p">;</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rpl_index</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* starting index */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Port number block in RPL response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_pnb</span> <span class="p">{</span>
	<span class="n">__be32</span>		<span class="n">pnb_phys_pn</span><span class="p">;</span>	<span class="cm">/* physical port number */</span>
	<span class="n">__u8</span>		<span class="n">pnb_resv</span><span class="p">;</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">pnb_port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* port ID */</span>
	<span class="n">__be64</span>		<span class="n">pnb_wwpn</span><span class="p">;</span>	<span class="cm">/* port name */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * RPL LS_ACC response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rpl_resp</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rpl_cmd</span><span class="p">;</span>	<span class="cm">/* ELS_LS_ACC */</span>
	<span class="n">__u8</span>		<span class="n">rpl_resv1</span><span class="p">;</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__be16</span>		<span class="n">rpl_plen</span><span class="p">;</span>	<span class="cm">/* payload length */</span>
	<span class="n">__u8</span>		<span class="n">rpl_resv2</span><span class="p">;</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rpl_llen</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* list length */</span>
	<span class="n">__u8</span>		<span class="n">rpl_resv3</span><span class="p">;</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rpl_index</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* starting index */</span>
	<span class="k">struct</span> <span class="n">fc_els_pnb</span> <span class="n">rpl_pnb</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>	<span class="cm">/* variable number of PNBs */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Link Error Status Block.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_lesb</span> <span class="p">{</span>
	<span class="n">__be32</span>		<span class="n">lesb_link_fail</span><span class="p">;</span>	<span class="cm">/* link failure count */</span>
	<span class="n">__be32</span>		<span class="n">lesb_sync_loss</span><span class="p">;</span>	<span class="cm">/* loss of synchronization count */</span>
	<span class="n">__be32</span>		<span class="n">lesb_sig_loss</span><span class="p">;</span>	<span class="cm">/* loss of signal count */</span>
	<span class="n">__be32</span>		<span class="n">lesb_prim_err</span><span class="p">;</span>	<span class="cm">/* primitive sequence error count */</span>
	<span class="n">__be32</span>		<span class="n">lesb_inv_word</span><span class="p">;</span>	<span class="cm">/* invalid transmission word count */</span>
	<span class="n">__be32</span>		<span class="n">lesb_inv_crc</span><span class="p">;</span>	<span class="cm">/* invalid CRC count */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS RPS - Read Port Status Block request.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rps</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rps_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">rps_resv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rps_flag</span><span class="p">;</span>	<span class="cm">/* flag - see below */</span>
	<span class="n">__be64</span>		<span class="n">rps_port_spec</span><span class="p">;</span>	<span class="cm">/* port selection */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rps_flag</span> <span class="p">{</span>
	<span class="n">FC_ELS_RPS_DID</span> <span class="o">=</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="cm">/* port identified by D_ID of req. */</span>
	<span class="n">FC_ELS_RPS_PPN</span> <span class="o">=</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* port_spec is physical port number */</span>
	<span class="n">FC_ELS_RPS_WWPN</span> <span class="o">=</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/* port_spec is port WWN */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS RPS LS_ACC response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rps_resp</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rps_cmd</span><span class="p">;</span>	<span class="cm">/* command - LS_ACC */</span>
	<span class="n">__u8</span>		<span class="n">rps_resv</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rps_flag</span><span class="p">;</span>	<span class="cm">/* flag - see below */</span>
	<span class="n">__u8</span>		<span class="n">rps_resv2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
	<span class="n">__be16</span>		<span class="n">rps_status</span><span class="p">;</span>	<span class="cm">/* port status - see below */</span>
	<span class="k">struct</span> <span class="n">fc_els_lesb</span> <span class="n">rps_lesb</span><span class="p">;</span>	<span class="cm">/* link error status block */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rps_resp_flag</span> <span class="p">{</span>
	<span class="n">FC_ELS_RPS_LPEV</span> <span class="o">=</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* L_port extension valid */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_rps_resp_status</span> <span class="p">{</span>
	<span class="n">FC_ELS_RPS_PTP</span> <span class="o">=</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">,</span>	<span class="cm">/* point-to-point connection */</span>
	<span class="n">FC_ELS_RPS_LOOP</span> <span class="o">=</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* loop mode */</span>
	<span class="n">FC_ELS_RPS_FAB</span> <span class="o">=</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* fabric present */</span>
	<span class="n">FC_ELS_RPS_NO_SIG</span> <span class="o">=</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* loss of signal */</span>
	<span class="n">FC_ELS_RPS_NO_SYNC</span> <span class="o">=</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* loss of synchronization */</span>
	<span class="n">FC_ELS_RPS_RESET</span> <span class="o">=</span>	<span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* in link reset protocol */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS LIRR - Link Incident Record Registration request.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_lirr</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">lirr_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">lirr_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">lirr_func</span><span class="p">;</span>	<span class="cm">/* registration function */</span>
	<span class="n">__u8</span>		<span class="n">lirr_fmt</span><span class="p">;</span>	<span class="cm">/* FC-4 type of RLIR requested */</span>
	<span class="n">__u8</span>		<span class="n">lirr_resv2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_lirr_func</span> <span class="p">{</span>
	<span class="n">ELS_LIRR_SET_COND</span> <span class="o">=</span> 	<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* set - conditionally receive */</span>
	<span class="n">ELS_LIRR_SET_UNCOND</span> <span class="o">=</span> 	<span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/* set - unconditionally receive */</span>
	<span class="n">ELS_LIRR_CLEAR</span> <span class="o">=</span> 	<span class="mh">0xff</span>	<span class="cm">/* clear registration */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS SRL - Scan Remote Loop request.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_srl</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">srl_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">srl_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">srl_flag</span><span class="p">;</span>	<span class="cm">/* flag - see below */</span>
	<span class="n">__u8</span>		<span class="n">srl_flag_param</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* flag parameter */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">fc_els_srl_flag</span> <span class="p">{</span>
	<span class="n">FC_ELS_SRL_ALL</span> <span class="o">=</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="cm">/* scan all FL ports */</span>
	<span class="n">FC_ELS_SRL_ONE</span> <span class="o">=</span>	<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* scan specified loop */</span>
	<span class="n">FC_ELS_SRL_EN_PER</span> <span class="o">=</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/* enable periodic scanning (param) */</span>
	<span class="n">FC_ELS_SRL_DIS_PER</span> <span class="o">=</span>	<span class="mh">0x03</span><span class="p">,</span>	<span class="cm">/* disable periodic scanning */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS RLS - Read Link Error Status Block request.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rls</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rls_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">rls_resv</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rls_port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* port ID */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS RLS LS_ACC Response.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rls_resp</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rls_cmd</span><span class="p">;</span>	<span class="cm">/* ELS_LS_ACC */</span>
	<span class="n">__u8</span>		<span class="n">rls_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="k">struct</span> <span class="n">fc_els_lesb</span> <span class="n">rls_lesb</span><span class="p">;</span>	<span class="cm">/* link error status block */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ELS RLIR - Registered Link Incident Report.</span>
<span class="cm"> * This is followed by the CLIR and the CLID, described below.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_rlir</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">rlir_cmd</span><span class="p">;</span>	<span class="cm">/* command */</span>
	<span class="n">__u8</span>		<span class="n">rlir_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved - must be zero */</span>
	<span class="n">__u8</span>		<span class="n">rlir_fmt</span><span class="p">;</span>	<span class="cm">/* format (FC4-type if type specific) */</span>
	<span class="n">__u8</span>		<span class="n">rlir_clr_len</span><span class="p">;</span>	<span class="cm">/* common link incident record length */</span>
	<span class="n">__u8</span>		<span class="n">rlir_cld_len</span><span class="p">;</span>	<span class="cm">/* common link incident desc. length */</span>
	<span class="n">__u8</span>		<span class="n">rlir_slr_len</span><span class="p">;</span>	<span class="cm">/* spec. link incident record length */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * CLIR - Common Link Incident Record Data. - Sent via RLIR.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_clir</span> <span class="p">{</span>
	<span class="n">__be64</span>		<span class="n">clir_wwpn</span><span class="p">;</span>	<span class="cm">/* incident port name */</span>
	<span class="n">__be64</span>		<span class="n">clir_wwnn</span><span class="p">;</span>	<span class="cm">/* incident port node name */</span>
	<span class="n">__u8</span>		<span class="n">clir_port_type</span><span class="p">;</span>	<span class="cm">/* incident port type */</span>
	<span class="n">__u8</span>		<span class="n">clir_port_id</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* incident port ID */</span>

	<span class="n">__be64</span>		<span class="n">clir_conn_wwpn</span><span class="p">;</span>	<span class="cm">/* connected port name */</span>
	<span class="n">__be64</span>		<span class="n">clir_conn_wwnn</span><span class="p">;</span>	<span class="cm">/* connected node name */</span>
	<span class="n">__be64</span>		<span class="n">clir_fab_name</span><span class="p">;</span>	<span class="cm">/* fabric name */</span>
	<span class="n">__be32</span>		<span class="n">clir_phys_port</span><span class="p">;</span>	<span class="cm">/* physical port number */</span>
	<span class="n">__be32</span>		<span class="n">clir_trans_id</span><span class="p">;</span>	<span class="cm">/* transaction ID */</span>
	<span class="n">__u8</span>		<span class="n">clir_resv</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* reserved */</span>
	<span class="n">__u8</span>		<span class="n">clir_ts_fmt</span><span class="p">;</span>	<span class="cm">/* time stamp format */</span>
	<span class="n">__be64</span>		<span class="n">clir_timestamp</span><span class="p">;</span>	<span class="cm">/* time stamp */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * CLIR clir_ts_fmt - time stamp format values.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_clir_ts_fmt</span> <span class="p">{</span>
	<span class="n">ELS_CLIR_TS_UNKNOWN</span> <span class="o">=</span> 	<span class="mi">0</span><span class="p">,</span>	<span class="cm">/* time stamp field unknown */</span>
	<span class="n">ELS_CLIR_TS_SEC_FRAC</span> <span class="o">=</span> 	<span class="mi">1</span><span class="p">,</span>	<span class="cm">/* time in seconds and fractions */</span>
	<span class="n">ELS_CLIR_TS_CSU</span> <span class="o">=</span>	<span class="mi">2</span><span class="p">,</span>	<span class="cm">/* time in clock synch update format */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Common Link Incident Descriptor - sent via RLIR.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fc_els_clid</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">clid_iq</span><span class="p">;</span>	<span class="cm">/* incident qualifier flags */</span>
	<span class="n">__u8</span>		<span class="n">clid_ic</span><span class="p">;</span>	<span class="cm">/* incident code */</span>
	<span class="n">__be16</span>		<span class="n">clid_epai</span><span class="p">;</span>	<span class="cm">/* domain/area of ISL */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * CLID incident qualifier flags.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_clid_iq</span> <span class="p">{</span>
	<span class="n">ELS_CLID_SWITCH</span> <span class="o">=</span>	<span class="mh">0x20</span><span class="p">,</span>	<span class="cm">/* incident port is a switch node */</span>
	<span class="n">ELS_CLID_E_PORT</span> <span class="o">=</span>	<span class="mh">0x10</span><span class="p">,</span>	<span class="cm">/* incident is an ISL (E) port */</span>
	<span class="n">ELS_CLID_SEV_MASK</span> <span class="o">=</span>	<span class="mh">0x0c</span><span class="p">,</span>	<span class="cm">/* severity 2-bit field mask */</span>
	<span class="n">ELS_CLID_SEV_INFO</span> <span class="o">=</span>	<span class="mh">0x00</span><span class="p">,</span>	<span class="cm">/* report is informational */</span>
	<span class="n">ELS_CLID_SEV_INOP</span> <span class="o">=</span>	<span class="mh">0x08</span><span class="p">,</span>	<span class="cm">/* link not operational */</span>
	<span class="n">ELS_CLID_SEV_DEG</span> <span class="o">=</span>	<span class="mh">0x04</span><span class="p">,</span>	<span class="cm">/* link degraded but operational */</span>
	<span class="n">ELS_CLID_LASER</span> <span class="o">=</span>	<span class="mh">0x02</span><span class="p">,</span>	<span class="cm">/* subassembly is a laser */</span>
	<span class="n">ELS_CLID_FRU</span> <span class="o">=</span>		<span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* format can identify a FRU */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * CLID incident code.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">fc_els_clid_ic</span> <span class="p">{</span>
	<span class="n">ELS_CLID_IC_IMPL</span> <span class="o">=</span>	<span class="mi">1</span><span class="p">,</span>	<span class="cm">/* implicit incident */</span>
	<span class="n">ELS_CLID_IC_BER</span> <span class="o">=</span>	<span class="mi">2</span><span class="p">,</span>	<span class="cm">/* bit-error-rate threshold exceeded */</span>
	<span class="n">ELS_CLID_IC_LOS</span> <span class="o">=</span>	<span class="mi">3</span><span class="p">,</span>	<span class="cm">/* loss of synch or signal */</span>
	<span class="n">ELS_CLID_IC_NOS</span> <span class="o">=</span>	<span class="mi">4</span><span class="p">,</span>	<span class="cm">/* non-operational primitive sequence */</span>
	<span class="n">ELS_CLID_IC_PST</span> <span class="o">=</span>	<span class="mi">5</span><span class="p">,</span>	<span class="cm">/* primitive sequence timeout */</span>
	<span class="n">ELS_CLID_IC_INVAL</span> <span class="o">=</span>	<span class="mi">6</span><span class="p">,</span>	<span class="cm">/* invalid primitive sequence */</span>
	<span class="n">ELS_CLID_IC_LOOP_TO</span> <span class="o">=</span>	<span class="mi">7</span><span class="p">,</span>	<span class="cm">/* loop initialization time out */</span>
	<span class="n">ELS_CLID_IC_LIP</span> <span class="o">=</span>	<span class="mi">8</span><span class="p">,</span>	<span class="cm">/* receiving LIP */</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* _FC_ELS_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
