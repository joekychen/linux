<!DOCTYPE html>
<html><head><title>joekychen/linux » include › rdma › rdma_cm.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>rdma_cm.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 2005 Voltaire Inc.  All rights reserved.</span>
<span class="cm"> * Copyright (c) 2005 Intel Corporation.  All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This software is available to you under a choice of one of two</span>
<span class="cm"> * licenses.  You may choose to be licensed under the terms of the GNU</span>
<span class="cm"> * General Public License (GPL) Version 2, available from the file</span>
<span class="cm"> * COPYING in the main directory of this source tree, or the</span>
<span class="cm"> * OpenIB.org BSD license below:</span>
<span class="cm"> *</span>
<span class="cm"> *     Redistribution and use in source and binary forms, with or</span>
<span class="cm"> *     without modification, are permitted provided that the following</span>
<span class="cm"> *     conditions are met:</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions of source code must retain the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer.</span>
<span class="cm"> *</span>
<span class="cm"> *      - Redistributions in binary form must reproduce the above</span>
<span class="cm"> *        copyright notice, this list of conditions and the following</span>
<span class="cm"> *        disclaimer in the documentation and/or other materials</span>
<span class="cm"> *        provided with the distribution.</span>
<span class="cm"> *</span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span>
<span class="cm"> * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span>
<span class="cm"> * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</span>
<span class="cm"> * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS</span>
<span class="cm"> * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN</span>
<span class="cm"> * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span>
<span class="cm"> * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="cm"> * SOFTWARE.</span>
<span class="cm"> */</span>

<span class="cp">#if !defined(RDMA_CM_H)</span>
<span class="cp">#define RDMA_CM_H</span>

<span class="cp">#include &lt;linux/socket.h&gt;</span>
<span class="cp">#include &lt;linux/in6.h&gt;</span>
<span class="cp">#include &lt;rdma/ib_addr.h&gt;</span>
<span class="cp">#include &lt;rdma/ib_sa.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Upon receiving a device removal event, users must destroy the associated</span>
<span class="cm"> * RDMA identifier and release all resources allocated with the device.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">rdma_cm_event_type</span> <span class="p">{</span>
	<span class="n">RDMA_CM_EVENT_ADDR_RESOLVED</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_ADDR_ERROR</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_ROUTE_RESOLVED</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_ROUTE_ERROR</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_CONNECT_REQUEST</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_CONNECT_RESPONSE</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_CONNECT_ERROR</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_UNREACHABLE</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_REJECTED</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_ESTABLISHED</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_DISCONNECTED</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_DEVICE_REMOVAL</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_MULTICAST_JOIN</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_MULTICAST_ERROR</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_ADDR_CHANGE</span><span class="p">,</span>
	<span class="n">RDMA_CM_EVENT_TIMEWAIT_EXIT</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">rdma_port_space</span> <span class="p">{</span>
	<span class="n">RDMA_PS_SDP</span>   <span class="o">=</span> <span class="mh">0x0001</span><span class="p">,</span>
	<span class="n">RDMA_PS_IPOIB</span> <span class="o">=</span> <span class="mh">0x0002</span><span class="p">,</span>
	<span class="n">RDMA_PS_IB</span>    <span class="o">=</span> <span class="mh">0x013F</span><span class="p">,</span>
	<span class="n">RDMA_PS_TCP</span>   <span class="o">=</span> <span class="mh">0x0106</span><span class="p">,</span>
	<span class="n">RDMA_PS_UDP</span>   <span class="o">=</span> <span class="mh">0x0111</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_addr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sockaddr_storage</span> <span class="n">src_addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sockaddr_storage</span> <span class="n">dst_addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rdma_dev_addr</span> <span class="n">dev_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_route</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">rdma_addr</span> <span class="n">addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ib_sa_path_rec</span> <span class="o">*</span><span class="n">path_rec</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">num_paths</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_conn_param</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">private_data_len</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">responder_resources</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">initiator_depth</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">flow_control</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">retry_count</span><span class="p">;</span>		<span class="cm">/* ignored when accepting */</span>
	<span class="n">u8</span> <span class="n">rnr_retry_count</span><span class="p">;</span>
	<span class="cm">/* Fields below ignored if a QP is created on the rdma_cm_id. */</span>
	<span class="n">u8</span> <span class="n">srq</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qp_num</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_ud_param</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">private_data_len</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ib_ah_attr</span> <span class="n">ah_attr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qp_num</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">qkey</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_cm_event</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">rdma_cm_event_type</span>	 <span class="n">event</span><span class="p">;</span>
	<span class="kt">int</span>			 <span class="n">status</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">rdma_conn_param</span>	<span class="n">conn</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">rdma_ud_param</span>	<span class="n">ud</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">param</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">rdma_cm_state</span> <span class="p">{</span>
	<span class="n">RDMA_CM_IDLE</span><span class="p">,</span>
	<span class="n">RDMA_CM_ADDR_QUERY</span><span class="p">,</span>
	<span class="n">RDMA_CM_ADDR_RESOLVED</span><span class="p">,</span>
	<span class="n">RDMA_CM_ROUTE_QUERY</span><span class="p">,</span>
	<span class="n">RDMA_CM_ROUTE_RESOLVED</span><span class="p">,</span>
	<span class="n">RDMA_CM_CONNECT</span><span class="p">,</span>
	<span class="n">RDMA_CM_DISCONNECT</span><span class="p">,</span>
	<span class="n">RDMA_CM_ADDR_BOUND</span><span class="p">,</span>
	<span class="n">RDMA_CM_LISTEN</span><span class="p">,</span>
	<span class="n">RDMA_CM_DEVICE_REMOVAL</span><span class="p">,</span>
	<span class="n">RDMA_CM_DESTROYING</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rdma_cm_id</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_cm_event_handler - Callback used to report user events.</span>
<span class="cm"> *</span>
<span class="cm"> * Notes: Users may not call rdma_destroy_id from this callback to destroy</span>
<span class="cm"> *   the passed in id, or a corresponding listen id.  Returning a</span>
<span class="cm"> *   non-zero value from the callback will destroy the passed in id.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">rdma_cm_event_handler</span><span class="p">)(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">rdma_cm_event</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ib_device</span>	<span class="o">*</span><span class="n">device</span><span class="p">;</span>
	<span class="kt">void</span>			<span class="o">*</span><span class="n">context</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ib_qp</span>		<span class="o">*</span><span class="n">qp</span><span class="p">;</span>
	<span class="n">rdma_cm_event_handler</span>	 <span class="n">event_handler</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rdma_route</span>	 <span class="n">route</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">rdma_port_space</span>	 <span class="n">ps</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">ib_qp_type</span>		 <span class="n">qp_type</span><span class="p">;</span>
	<span class="n">u8</span>			 <span class="n">port_num</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_create_id - Create an RDMA identifier.</span>
<span class="cm"> *</span>
<span class="cm"> * @event_handler: User callback invoked to report events associated with the</span>
<span class="cm"> *   returned rdma_id.</span>
<span class="cm"> * @context: User specified context associated with the id.</span>
<span class="cm"> * @ps: RDMA port space.</span>
<span class="cm"> * @qp_type: type of queue pair associated with the id.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">rdma_create_id</span><span class="p">(</span><span class="n">rdma_cm_event_handler</span> <span class="n">event_handler</span><span class="p">,</span>
				  <span class="kt">void</span> <span class="o">*</span><span class="n">context</span><span class="p">,</span> <span class="k">enum</span> <span class="n">rdma_port_space</span> <span class="n">ps</span><span class="p">,</span>
				  <span class="k">enum</span> <span class="n">ib_qp_type</span> <span class="n">qp_type</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm">  * rdma_destroy_id - Destroys an RDMA identifier.</span>
<span class="cm">  *</span>
<span class="cm">  * @id: RDMA identifier.</span>
<span class="cm">  *</span>
<span class="cm">  * Note: calling this function has the effect of canceling in-flight</span>
<span class="cm">  * asynchronous operations associated with the id.</span>
<span class="cm">  */</span>
<span class="kt">void</span> <span class="n">rdma_destroy_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_bind_addr - Bind an RDMA identifier to a source address and</span>
<span class="cm"> *   associated RDMA device, if needed.</span>
<span class="cm"> *</span>
<span class="cm"> * @id: RDMA identifier.</span>
<span class="cm"> * @addr: Local address information.  Wildcard values are permitted.</span>
<span class="cm"> *</span>
<span class="cm"> * This associates a source address with the RDMA identifier before calling</span>
<span class="cm"> * rdma_listen.  If a specific local address is given, the RDMA identifier will</span>
<span class="cm"> * be bound to a local RDMA device.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_bind_addr</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_resolve_addr - Resolve destination and optional source addresses</span>
<span class="cm"> *   from IP addresses to an RDMA address.  If successful, the specified</span>
<span class="cm"> *   rdma_cm_id will be bound to a local device.</span>
<span class="cm"> *</span>
<span class="cm"> * @id: RDMA identifier.</span>
<span class="cm"> * @src_addr: Source address information.  This parameter may be NULL.</span>
<span class="cm"> * @dst_addr: Destination address information.</span>
<span class="cm"> * @timeout_ms: Time to wait for resolution to complete.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_resolve_addr</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">src_addr</span><span class="p">,</span>
		      <span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">dst_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">timeout_ms</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_resolve_route - Resolve the RDMA address bound to the RDMA identifier</span>
<span class="cm"> *   into route information needed to establish a connection.</span>
<span class="cm"> *</span>
<span class="cm"> * This is called on the client side of a connection.</span>
<span class="cm"> * Users must have first called rdma_resolve_addr to resolve a dst_addr</span>
<span class="cm"> * into an RDMA address before calling this routine.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_resolve_route</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">timeout_ms</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_create_qp - Allocate a QP and associate it with the specified RDMA</span>
<span class="cm"> * identifier.</span>
<span class="cm"> *</span>
<span class="cm"> * QPs allocated to an rdma_cm_id will automatically be transitioned by the CMA</span>
<span class="cm"> * through their states.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_create_qp</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ib_pd</span> <span class="o">*</span><span class="n">pd</span><span class="p">,</span>
		   <span class="k">struct</span> <span class="n">ib_qp_init_attr</span> <span class="o">*</span><span class="n">qp_init_attr</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_destroy_qp - Deallocate the QP associated with the specified RDMA</span>
<span class="cm"> * identifier.</span>
<span class="cm"> *</span>
<span class="cm"> * Users must destroy any QP associated with an RDMA identifier before</span>
<span class="cm"> * destroying the RDMA ID.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">rdma_destroy_qp</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_init_qp_attr - Initializes the QP attributes for use in transitioning</span>
<span class="cm"> *   to a specified QP state.</span>
<span class="cm"> * @id: Communication identifier associated with the QP attributes to</span>
<span class="cm"> *   initialize.</span>
<span class="cm"> * @qp_attr: On input, specifies the desired QP state.  On output, the</span>
<span class="cm"> *   mandatory and desired optional attributes will be set in order to</span>
<span class="cm"> *   modify the QP to the specified state.</span>
<span class="cm"> * @qp_attr_mask: The QP attribute mask that may be used to transition the</span>
<span class="cm"> *   QP to the specified state.</span>
<span class="cm"> *</span>
<span class="cm"> * Users must set the @qp_attr-&gt;qp_state to the desired QP state.  This call</span>
<span class="cm"> * will set all required attributes for the given transition, along with</span>
<span class="cm"> * known optional attributes.  Users may override the attributes returned from</span>
<span class="cm"> * this call before calling ib_modify_qp.</span>
<span class="cm"> *</span>
<span class="cm"> * Users that wish to have their QP automatically transitioned through its</span>
<span class="cm"> * states can associate a QP with the rdma_cm_id by calling rdma_create_qp().</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_init_qp_attr</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ib_qp_attr</span> <span class="o">*</span><span class="n">qp_attr</span><span class="p">,</span>
		       <span class="kt">int</span> <span class="o">*</span><span class="n">qp_attr_mask</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_connect - Initiate an active connection request.</span>
<span class="cm"> * @id: Connection identifier to connect.</span>
<span class="cm"> * @conn_param: Connection information used for connected QPs.</span>
<span class="cm"> *</span>
<span class="cm"> * Users must have resolved a route for the rdma_cm_id to connect with</span>
<span class="cm"> * by having called rdma_resolve_route before calling this routine.</span>
<span class="cm"> *</span>
<span class="cm"> * This call will either connect to a remote QP or obtain remote QP</span>
<span class="cm"> * information for unconnected rdma_cm_id&#39;s.  The actual operation is</span>
<span class="cm"> * based on the rdma_cm_id&#39;s port space.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_connect</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">rdma_conn_param</span> <span class="o">*</span><span class="n">conn_param</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_listen - This function is called by the passive side to</span>
<span class="cm"> *   listen for incoming connection requests.</span>
<span class="cm"> *</span>
<span class="cm"> * Users must have bound the rdma_cm_id to a local address by calling</span>
<span class="cm"> * rdma_bind_addr before calling this routine.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_listen</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">backlog</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_accept - Called to accept a connection request or response.</span>
<span class="cm"> * @id: Connection identifier associated with the request.</span>
<span class="cm"> * @conn_param: Information needed to establish the connection.  This must be</span>
<span class="cm"> *   provided if accepting a connection request.  If accepting a connection</span>
<span class="cm"> *   response, this parameter must be NULL.</span>
<span class="cm"> *</span>
<span class="cm"> * Typically, this routine is only called by the listener to accept a connection</span>
<span class="cm"> * request.  It must also be called on the active side of a connection if the</span>
<span class="cm"> * user is performing their own QP transitions.</span>
<span class="cm"> *</span>
<span class="cm"> * In the case of error, a reject message is sent to the remote side and the</span>
<span class="cm"> * state of the qp associated with the id is modified to error, such that any</span>
<span class="cm"> * previously posted receive buffers would be flushed.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_accept</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">rdma_conn_param</span> <span class="o">*</span><span class="n">conn_param</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_notify - Notifies the RDMA CM of an asynchronous event that has</span>
<span class="cm"> * occurred on the connection.</span>
<span class="cm"> * @id: Connection identifier to transition to established.</span>
<span class="cm"> * @event: Asynchronous event.</span>
<span class="cm"> *</span>
<span class="cm"> * This routine should be invoked by users to notify the CM of relevant</span>
<span class="cm"> * communication events.  Events that should be reported to the CM and</span>
<span class="cm"> * when to report them are:</span>
<span class="cm"> *</span>
<span class="cm"> * IB_EVENT_COMM_EST - Used when a message is received on a connected</span>
<span class="cm"> *    QP before an RTU has been received.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_notify</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">enum</span> <span class="n">ib_event_type</span> <span class="n">event</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_reject - Called to reject a connection request or response.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_reject</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">private_data_len</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_disconnect - This function disconnects the associated QP and</span>
<span class="cm"> *   transitions it into the error state.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_disconnect</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_join_multicast - Join the multicast group specified by the given</span>
<span class="cm"> *   address.</span>
<span class="cm"> * @id: Communication identifier associated with the request.</span>
<span class="cm"> * @addr: Multicast address identifying the group to join.</span>
<span class="cm"> * @context: User-defined context associated with the join request, returned</span>
<span class="cm"> * to the user through the private_data pointer in multicast events.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_join_multicast</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span>
			<span class="kt">void</span> <span class="o">*</span><span class="n">context</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_leave_multicast - Leave the multicast group specified by the given</span>
<span class="cm"> *   address.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">rdma_leave_multicast</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_set_service_type - Set the type of service associated with a</span>
<span class="cm"> *   connection identifier.</span>
<span class="cm"> * @id: Communication identifier to associated with service type.</span>
<span class="cm"> * @tos: Type of service.</span>
<span class="cm"> *</span>
<span class="cm"> * The type of service is interpretted as a differentiated service</span>
<span class="cm"> * field (RFC 2474).  The service type should be specified before</span>
<span class="cm"> * performing route resolution, as existing communication on the</span>
<span class="cm"> * connection identifier may be unaffected.  The type of service</span>
<span class="cm"> * requested may not be supported by the network to all destinations.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">rdma_set_service_type</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">tos</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * rdma_set_reuseaddr - Allow the reuse of local addresses when binding</span>
<span class="cm"> *    the rdma_cm_id.</span>
<span class="cm"> * @id: Communication identifier to configure.</span>
<span class="cm"> * @reuse: Value indicating if the bound address is reusable.</span>
<span class="cm"> *</span>
<span class="cm"> * Reuse must be set before an address is bound to the id.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">rdma_set_reuseaddr</span><span class="p">(</span><span class="k">struct</span> <span class="n">rdma_cm_id</span> <span class="o">*</span><span class="n">id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reuse</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* RDMA_CM_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
