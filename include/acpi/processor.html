<!DOCTYPE html>
<html><head><title>joekychen/linux » include › acpi › processor.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>processor.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __ACPI_PROCESSOR_H</span>
<span class="cp">#define __ACPI_PROCESSOR_H</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/cpu.h&gt;</span>
<span class="cp">#include &lt;linux/cpuidle.h&gt;</span>
<span class="cp">#include &lt;linux/thermal.h&gt;</span>
<span class="cp">#include &lt;asm/acpi.h&gt;</span>

<span class="cp">#define ACPI_PROCESSOR_BUSY_METRIC	10</span>

<span class="cp">#define ACPI_PROCESSOR_MAX_POWER	8</span>
<span class="cp">#define ACPI_PROCESSOR_MAX_C2_LATENCY	100</span>
<span class="cp">#define ACPI_PROCESSOR_MAX_C3_LATENCY	1000</span>

<span class="cp">#define ACPI_PROCESSOR_MAX_THROTTLING	16</span>
<span class="cp">#define ACPI_PROCESSOR_MAX_THROTTLE	250	</span><span class="cm">/* 25% */</span><span class="cp"></span>
<span class="cp">#define ACPI_PROCESSOR_MAX_DUTY_WIDTH	4</span>

<span class="cp">#define ACPI_PDC_REVISION_ID		0x1</span>

<span class="cp">#define ACPI_PSD_REV0_REVISION		0	</span><span class="cm">/* Support for _PSD as in ACPI 3.0 */</span><span class="cp"></span>
<span class="cp">#define ACPI_PSD_REV0_ENTRIES		5</span>

<span class="cp">#define ACPI_TSD_REV0_REVISION		0	</span><span class="cm">/* Support for _PSD as in ACPI 3.0 */</span><span class="cp"></span>
<span class="cp">#define ACPI_TSD_REV0_ENTRIES		5</span>
<span class="cm">/*</span>
<span class="cm"> * Types of coordination defined in ACPI 3.0. Same macros can be used across</span>
<span class="cm"> * P, C and T states</span>
<span class="cm"> */</span>
<span class="cp">#define DOMAIN_COORD_TYPE_SW_ALL	0xfc</span>
<span class="cp">#define DOMAIN_COORD_TYPE_SW_ANY	0xfd</span>
<span class="cp">#define DOMAIN_COORD_TYPE_HW_ALL	0xfe</span>

<span class="cp">#define ACPI_CSTATE_SYSTEMIO	0</span>
<span class="cp">#define ACPI_CSTATE_FFH		1</span>
<span class="cp">#define ACPI_CSTATE_HALT	2</span>

<span class="cp">#define ACPI_CX_DESC_LEN	32</span>

<span class="cm">/* Power Management */</span>

<span class="k">struct</span> <span class="n">acpi_processor_cx</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">acpi_power_register</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">descriptor</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">space_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bit_width</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bit_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">access_size</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">address</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">acpi_processor_cx</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">valid</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">address</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">entry_method</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">index</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">latency</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">latency_ticks</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">power</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">usage</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">time</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bm_sts_skip</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">desc</span><span class="p">[</span><span class="n">ACPI_CX_DESC_LEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor_power</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">cpuidle_device</span> <span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_cx</span> <span class="o">*</span><span class="n">state</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">bm_check_timestamp</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">default_state</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_cx</span> <span class="n">states</span><span class="p">[</span><span class="n">ACPI_PROCESSOR_MAX_POWER</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">timer_broadcast_on_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Performance Management */</span>

<span class="k">struct</span> <span class="n">acpi_psd_package</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">num_entries</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">revision</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">domain</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">coord_type</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">num_processors</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">acpi_pct_register</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">descriptor</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">space_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bit_width</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bit_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">address</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">acpi_processor_px</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">core_frequency</span><span class="p">;</span>	<span class="cm">/* megahertz */</span>
	<span class="n">u64</span> <span class="n">power</span><span class="p">;</span>	<span class="cm">/* milliWatts */</span>
	<span class="n">u64</span> <span class="n">transition_latency</span><span class="p">;</span>	<span class="cm">/* microseconds */</span>
	<span class="n">u64</span> <span class="n">bus_master_latency</span><span class="p">;</span>	<span class="cm">/* microseconds */</span>
	<span class="n">u64</span> <span class="n">control</span><span class="p">;</span>	<span class="cm">/* control value */</span>
	<span class="n">u64</span> <span class="n">status</span><span class="p">;</span>	<span class="cm">/* success indicator */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor_performance</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">platform_limit</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_pct_register</span> <span class="n">control_register</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_pct_register</span> <span class="n">status_register</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">state_count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_px</span> <span class="o">*</span><span class="n">states</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_psd_package</span> <span class="n">domain_info</span><span class="p">;</span>
	<span class="n">cpumask_var_t</span> <span class="n">shared_cpu_map</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shared_type</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Throttling Control */</span>

<span class="k">struct</span> <span class="n">acpi_tsd_package</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">num_entries</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">revision</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">domain</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">coord_type</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">num_processors</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">acpi_ptc_register</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">descriptor</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">space_id</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bit_width</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bit_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">address</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">acpi_processor_tx_tss</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">freqpercentage</span><span class="p">;</span>	<span class="cm">/* */</span>
	<span class="n">u64</span> <span class="n">power</span><span class="p">;</span>	<span class="cm">/* milliWatts */</span>
	<span class="n">u64</span> <span class="n">transition_latency</span><span class="p">;</span>	<span class="cm">/* microseconds */</span>
	<span class="n">u64</span> <span class="n">control</span><span class="p">;</span>	<span class="cm">/* control value */</span>
	<span class="n">u64</span> <span class="n">status</span><span class="p">;</span>	<span class="cm">/* success indicator */</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">acpi_processor_tx</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">power</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">performance</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">acpi_processor_throttling</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">platform_limit</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_pct_register</span> <span class="n">control_register</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_pct_register</span> <span class="n">status_register</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">state_count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_tx_tss</span> <span class="o">*</span><span class="n">states_tss</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_tsd_package</span> <span class="n">domain_info</span><span class="p">;</span>
	<span class="n">cpumask_var_t</span> <span class="n">shared_cpu_map</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_processor_get_throttling</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span> <span class="n">pr</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_processor_set_throttling</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span> <span class="n">pr</span><span class="p">,</span>
					      <span class="kt">int</span> <span class="n">state</span><span class="p">,</span> <span class="n">bool</span> <span class="n">force</span><span class="p">);</span>

	<span class="n">u32</span> <span class="n">address</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">duty_offset</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">duty_width</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">tsd_valid_flag</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shared_type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_tx</span> <span class="n">states</span><span class="p">[</span><span class="n">ACPI_PROCESSOR_MAX_THROTTLING</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Limit Interface */</span>

<span class="k">struct</span> <span class="n">acpi_processor_lx</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">px</span><span class="p">;</span>			<span class="cm">/* performance state */</span>
	<span class="kt">int</span> <span class="n">tx</span><span class="p">;</span>			<span class="cm">/* throttle level */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor_limit</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">acpi_processor_lx</span> <span class="n">state</span><span class="p">;</span>	<span class="cm">/* current limit */</span>
	<span class="k">struct</span> <span class="n">acpi_processor_lx</span> <span class="n">thermal</span><span class="p">;</span>	<span class="cm">/* thermal limit */</span>
	<span class="k">struct</span> <span class="n">acpi_processor_lx</span> <span class="n">user</span><span class="p">;</span>	<span class="cm">/* user limit */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor_flags</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">power</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">performance</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">throttling</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">limit</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bm_control</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bm_check</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">has_cst</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">power_setup_done</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">bm_rld_set</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">need_hotplug_init</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor</span> <span class="p">{</span>
	<span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">acpi_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pblk</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">performance_platform_limit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">throttling_platform_limit</span><span class="p">;</span>
	<span class="cm">/* 0 - states 0..n-th state available */</span>

	<span class="k">struct</span> <span class="n">acpi_processor_flags</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_power</span> <span class="n">power</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_performance</span> <span class="o">*</span><span class="n">performance</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_throttling</span> <span class="n">throttling</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_processor_limit</span> <span class="n">limit</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">thermal_cooling_device</span> <span class="o">*</span><span class="n">cdev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_processor_errata</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">smp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">throttle</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">fdma</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">bmisx</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">piix4</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">acpi_processor_load_module</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">acpi_processor_preregister_performance</span><span class="p">(</span><span class="k">struct</span>
						  <span class="n">acpi_processor_performance</span>
						  <span class="n">__percpu</span> <span class="o">*</span><span class="n">performance</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">acpi_processor_register_performance</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor_performance</span>
					       <span class="o">*</span><span class="n">performance</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">acpi_processor_unregister_performance</span><span class="p">(</span><span class="k">struct</span>
						  <span class="n">acpi_processor_performance</span>
						  <span class="o">*</span><span class="n">performance</span><span class="p">,</span>
						  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">);</span>

<span class="cm">/* note: this locks both the calling module and the processor module</span>
<span class="cm">         if a _PPC object exists, rmmod is disallowed then */</span>
<span class="kt">int</span> <span class="n">acpi_processor_notify_smm</span><span class="p">(</span><span class="k">struct</span> <span class="n">module</span> <span class="o">*</span><span class="n">calling_module</span><span class="p">);</span>

<span class="cm">/* for communication between multiple parts of the processor kernel module */</span>
<span class="n">DECLARE_PER_CPU</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="p">,</span> <span class="n">processors</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">acpi_processor_errata</span> <span class="n">errata</span><span class="p">;</span>

<span class="cp">#ifdef ARCH_HAS_POWER_INIT</span>
<span class="kt">void</span> <span class="n">acpi_processor_power_init_bm_check</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor_flags</span> <span class="o">*</span><span class="n">flags</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_ffh_cstate_probe</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">acpi_processor_cx</span> <span class="o">*</span><span class="n">cx</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">acpi_power_register</span> <span class="o">*</span><span class="n">reg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_processor_ffh_cstate_enter</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor_cx</span> <span class="o">*</span><span class="n">cstate</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">acpi_processor_power_init_bm_check</span><span class="p">(</span><span class="k">struct</span>
						      <span class="n">acpi_processor_flags</span>
						      <span class="o">*</span><span class="n">flags</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">flags</span><span class="o">-&gt;</span><span class="n">bm_check</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_processor_ffh_cstate_probe</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">,</span>
						  <span class="k">struct</span> <span class="n">acpi_processor_cx</span> <span class="o">*</span><span class="n">cx</span><span class="p">,</span>
						  <span class="k">struct</span> <span class="n">acpi_power_register</span>
						  <span class="o">*</span><span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">acpi_processor_ffh_cstate_enter</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor_cx</span>
						   <span class="o">*</span><span class="n">cstate</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/* in processor_perflib.c */</span>

<span class="cp">#ifdef CONFIG_CPU_FREQ</span>
<span class="kt">void</span> <span class="n">acpi_processor_ppc_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_processor_ppc_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_ppc_has_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">event_flag</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">acpi_processor_get_bios_limit</span><span class="p">(</span><span class="kt">int</span> <span class="n">cpu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">limit</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">acpi_processor_ppc_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">acpi_processor_ppc_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_processor_ppc_has_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">,</span>
								<span class="kt">int</span> <span class="n">event_flag</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">printout</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">printout</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span>
		       <span class="s">&quot;Warning: Processor Platform Limit event detected, but not handled.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span>
		       <span class="s">&quot;Consider compiling CPUfreq support into your kernel.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
		<span class="n">printout</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_processor_get_bios_limit</span><span class="p">(</span><span class="kt">int</span> <span class="n">cpu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">limit</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#endif				</span><span class="cm">/* CONFIG_CPU_FREQ */</span><span class="cp"></span>

<span class="cm">/* in processor_core.c */</span>
<span class="kt">void</span> <span class="n">acpi_processor_set_pdc</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_get_cpuid</span><span class="p">(</span><span class="n">acpi_handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="n">u32</span> <span class="n">acpi_id</span><span class="p">);</span>

<span class="cm">/* in processor_throttling.c */</span>
<span class="kt">int</span> <span class="n">acpi_processor_tstate_has_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_get_throttling_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">acpi_processor_set_throttling</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">,</span>
					 <span class="kt">int</span> <span class="n">state</span><span class="p">,</span> <span class="n">bool</span> <span class="n">force</span><span class="p">);</span>
<span class="cm">/*</span>
<span class="cm"> * Reevaluate whether the T-state is invalid after one cpu is</span>
<span class="cm"> * onlined/offlined. In such case the flags.throttling will be updated.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">acpi_processor_reevaluate_tstate</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">action</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">acpi_processor_throttling_fops</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">acpi_processor_throttling_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cm">/* in processor_idle.c */</span>
<span class="kt">int</span> <span class="n">acpi_processor_power_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_cst_has_changed</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_hotplug</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_power_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">,</span> <span class="n">pm_message_t</span> <span class="n">state</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_processor_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">cpuidle_driver</span> <span class="n">acpi_idle_driver</span><span class="p">;</span>

<span class="cm">/* in processor_thermal.c */</span>
<span class="kt">int</span> <span class="n">acpi_processor_get_limit_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_processor</span> <span class="o">*</span><span class="n">pr</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">thermal_cooling_device_ops</span> <span class="n">processor_cooling_ops</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_CPU_FREQ</span>
<span class="kt">void</span> <span class="n">acpi_thermal_cpufreq_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_thermal_cpufreq_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">acpi_thermal_cpufreq_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">acpi_thermal_cpufreq_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
