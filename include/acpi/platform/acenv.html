<!DOCTYPE html>
<html><head><title>joekychen/linux » include › acpi › platform › acenv.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>acenv.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Name: acenv.h - Generation environment specific items</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2000 - 2011, Intel Corp.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Redistribution and use in source and binary forms, with or without</span>
<span class="cm"> * modification, are permitted provided that the following conditions</span>
<span class="cm"> * are met:</span>
<span class="cm"> * 1. Redistributions of source code must retain the above copyright</span>
<span class="cm"> *    notice, this list of conditions, and the following disclaimer,</span>
<span class="cm"> *    without modification.</span>
<span class="cm"> * 2. Redistributions in binary form must reproduce at minimum a disclaimer</span>
<span class="cm"> *    substantially similar to the &quot;NO WARRANTY&quot; disclaimer below</span>
<span class="cm"> *    (&quot;Disclaimer&quot;) and any redistribution must be conditioned upon</span>
<span class="cm"> *    including a substantially similar Disclaimer requirement for further</span>
<span class="cm"> *    binary redistribution.</span>
<span class="cm"> * 3. Neither the names of the above-listed copyright holders nor the names</span>
<span class="cm"> *    of any contributors may be used to endorse or promote products derived</span>
<span class="cm"> *    from this software without specific prior written permission.</span>
<span class="cm"> *</span>
<span class="cm"> * Alternatively, this software may be distributed under the terms of the</span>
<span class="cm"> * GNU General Public License (&quot;GPL&quot;) version 2 as published by the Free</span>
<span class="cm"> * Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * NO WARRANTY</span>
<span class="cm"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<span class="cm"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<span class="cm"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR</span>
<span class="cm"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<span class="cm"> * HOLDERS OR CONTRIBUTORS BE LIABLE FOR SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<span class="cm"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</span>
<span class="cm"> * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span>
<span class="cm"> * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span>
<span class="cm"> * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span>
<span class="cm"> * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span class="cm"> * POSSIBILITY OF SUCH DAMAGES.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ACENV_H__</span>
<span class="cp">#define __ACENV_H__</span>

<span class="cm">/* Types for ACPI_MUTEX_TYPE */</span>

<span class="cp">#define ACPI_BINARY_SEMAPHORE       0</span>
<span class="cp">#define ACPI_OSL_MUTEX              1</span>

<span class="cm">/* Types for DEBUGGER_THREADING */</span>

<span class="cp">#define DEBUGGER_SINGLE_THREADED    0</span>
<span class="cp">#define DEBUGGER_MULTI_THREADED     1</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Configuration for ACPI tools and utilities</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cp">#ifdef ACPI_LIBRARY</span>
<span class="cm">/*</span>
<span class="cm"> * Note: The non-debug version of the acpi_library does not contain any</span>
<span class="cm"> * debug support, for minimal size. The debug version uses ACPI_FULL_DEBUG</span>
<span class="cm"> */</span>
<span class="cp">#define ACPI_USE_LOCAL_CACHE</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef ACPI_ASL_COMPILER</span>
<span class="cp">#define ACPI_DEBUG_OUTPUT</span>
<span class="cp">#define ACPI_APPLICATION</span>
<span class="cp">#define ACPI_DISASSEMBLER</span>
<span class="cp">#define ACPI_CONSTANT_EVAL_ONLY</span>
<span class="cp">#define ACPI_LARGE_NAMESPACE_NODE</span>
<span class="cp">#define ACPI_DATA_TABLE_DISASSEMBLY</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef ACPI_EXEC_APP</span>
<span class="cp">#undef DEBUGGER_THREADING</span>
<span class="cp">#define DEBUGGER_THREADING      DEBUGGER_SINGLE_THREADED</span>
<span class="cp">#define ACPI_FULL_DEBUG</span>
<span class="cp">#define ACPI_APPLICATION</span>
<span class="cp">#define ACPI_DEBUGGER</span>
<span class="cp">#define ACPI_MUTEX_DEBUG</span>
<span class="cp">#define ACPI_DBG_TRACK_ALLOCATIONS</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef ACPI_APPLICATION</span>
<span class="cp">#define ACPI_USE_SYSTEM_CLIBRARY</span>
<span class="cp">#define ACPI_USE_LOCAL_CACHE</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef ACPI_FULL_DEBUG</span>
<span class="cp">#define ACPI_DEBUGGER</span>
<span class="cp">#define ACPI_DEBUG_OUTPUT</span>
<span class="cp">#define ACPI_DISASSEMBLER</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * Environment configuration.  The purpose of this file is to interface to the</span>
<span class="cm"> * local generation environment.</span>
<span class="cm"> *</span>
<span class="cm"> * 1) ACPI_USE_SYSTEM_CLIBRARY - Define this if linking to an actual C library.</span>
<span class="cm"> *      Otherwise, local versions of string/memory functions will be used.</span>
<span class="cm"> * 2) ACPI_USE_STANDARD_HEADERS - Define this if linking to a C library and</span>
<span class="cm"> *      the standard header files may be used.</span>
<span class="cm"> *</span>
<span class="cm"> * The ACPI subsystem only uses low level C library functions that do not call</span>
<span class="cm"> * operating system services and may therefore be inlined in the code.</span>
<span class="cm"> *</span>
<span class="cm"> * It may be necessary to tailor these include files to the target</span>
<span class="cm"> * generation environment.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * Functions and constants used from each header:</span>
<span class="cm"> *</span>
<span class="cm"> * string.h:    memcpy</span>
<span class="cm"> *              memset</span>
<span class="cm"> *              strcat</span>
<span class="cm"> *              strcmp</span>
<span class="cm"> *              strcpy</span>
<span class="cm"> *              strlen</span>
<span class="cm"> *              strncmp</span>
<span class="cm"> *              strncat</span>
<span class="cm"> *              strncpy</span>
<span class="cm"> *</span>
<span class="cm"> * stdlib.h:    strtoul</span>
<span class="cm"> *</span>
<span class="cm"> * stdarg.h:    va_list</span>
<span class="cm"> *              va_arg</span>
<span class="cm"> *              va_start</span>
<span class="cm"> *              va_end</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cm">/*! [Begin] no source code translation */</span>

<span class="cp">#if defined(_LINUX) || defined(__linux__)</span>
<span class="cp">#include &quot;aclinux.h&quot;</span>

<span class="cp">#elif defined(_AED_EFI)</span>
<span class="cp">#include &quot;acefi.h&quot;</span>

<span class="cp">#elif defined(WIN32)</span>
<span class="cp">#include &quot;acwin.h&quot;</span>

<span class="cp">#elif defined(WIN64)</span>
<span class="cp">#include &quot;acwin64.h&quot;</span>

<span class="cp">#elif defined(MSDOS)		</span><span class="cm">/* Must appear after WIN32 and WIN64 check */</span><span class="cp"></span>
<span class="cp">#include &quot;acdos16.h&quot;</span>

<span class="cp">#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__)</span>
<span class="cp">#include &quot;acfreebsd.h&quot;</span>

<span class="cp">#elif defined(__NetBSD__)</span>
<span class="cp">#include &quot;acnetbsd.h&quot;</span>

<span class="cp">#elif defined(MODESTO)</span>
<span class="cp">#include &quot;acmodesto.h&quot;</span>

<span class="cp">#elif defined(NETWARE)</span>
<span class="cp">#include &quot;acnetware.h&quot;</span>

<span class="cp">#elif defined(__sun)</span>
<span class="cp">#include &quot;acsolaris.h&quot;</span>

<span class="cp">#else</span>

<span class="cm">/* All other environments */</span>

<span class="cp">#define ACPI_USE_STANDARD_HEADERS</span>

<span class="cp">#define COMPILER_DEPENDENT_INT64   long long</span>
<span class="cp">#define COMPILER_DEPENDENT_UINT64  unsigned long long</span>

<span class="cp">#endif</span>

<span class="cm">/*! [End] no source code translation !*/</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Miscellaneous configuration</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> * Are mutexes supported by the host? default is no, use binary semaphores.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef ACPI_MUTEX_TYPE</span>
<span class="cp">#define ACPI_MUTEX_TYPE             ACPI_BINARY_SEMAPHORE</span>
<span class="cp">#endif</span>

<span class="cm">/* &quot;inline&quot; keywords - configurable since inline is not standardized */</span>

<span class="cp">#ifndef ACPI_INLINE</span>
<span class="cp">#define ACPI_INLINE</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * Debugger threading model</span>
<span class="cm"> * Use single threaded if the entire subsystem is contained in an application</span>
<span class="cm"> * Use multiple threaded when the subsystem is running in the kernel.</span>
<span class="cm"> *</span>
<span class="cm"> * By default the model is single threaded if ACPI_APPLICATION is set,</span>
<span class="cm"> * multi-threaded if ACPI_APPLICATION is not set.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef DEBUGGER_THREADING</span>
<span class="cp">#ifdef ACPI_APPLICATION</span>
<span class="cp">#define DEBUGGER_THREADING          DEBUGGER_SINGLE_THREADED</span>

<span class="cp">#else</span>
<span class="cp">#define DEBUGGER_THREADING          DEBUGGER_MULTI_THREADED</span>
<span class="cp">#endif</span>
<span class="cp">#endif				</span><span class="cm">/* !DEBUGGER_THREADING */</span><span class="cp"></span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * C library configuration</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cp">#define ACPI_IS_ASCII(c)  ((c) &lt; 0x80)</span>

<span class="cp">#ifdef ACPI_USE_SYSTEM_CLIBRARY</span>
<span class="cm">/*</span>
<span class="cm"> * Use the standard C library headers.</span>
<span class="cm"> * We want to keep these to a minimum.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef ACPI_USE_STANDARD_HEADERS</span>
<span class="cm">/*</span>
<span class="cm"> * Use the standard headers from the standard locations</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#include &lt;ctype.h&gt;</span>

<span class="cp">#endif				</span><span class="cm">/* ACPI_USE_STANDARD_HEADERS */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * We will be linking to the standard Clib functions</span>
<span class="cm"> */</span>
<span class="cp">#define ACPI_STRSTR(s1,s2)      strstr((s1), (s2))</span>
<span class="cp">#define ACPI_STRCHR(s1,c)       strchr((s1), (c))</span>
<span class="cp">#define ACPI_STRLEN(s)          (acpi_size) strlen((s))</span>
<span class="cp">#define ACPI_STRCPY(d,s)        (void) strcpy((d), (s))</span>
<span class="cp">#define ACPI_STRNCPY(d,s,n)     (void) strncpy((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_STRNCMP(d,s,n)     strncmp((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_STRCMP(d,s)        strcmp((d), (s))</span>
<span class="cp">#define ACPI_STRCAT(d,s)        (void) strcat((d), (s))</span>
<span class="cp">#define ACPI_STRNCAT(d,s,n)     strncat((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_STRTOUL(d,s,n)     strtoul((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_MEMCMP(s1,s2,n)    memcmp((const char *)(s1), (const char *)(s2), (acpi_size)(n))</span>
<span class="cp">#define ACPI_MEMCPY(d,s,n)      (void) memcpy((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_MEMSET(d,s,n)      (void) memset((d), (s), (acpi_size)(n))</span>

<span class="cp">#define ACPI_TOUPPER(i)         toupper((int) (i))</span>
<span class="cp">#define ACPI_TOLOWER(i)         tolower((int) (i))</span>
<span class="cp">#define ACPI_IS_XDIGIT(i)       isxdigit((int) (i))</span>
<span class="cp">#define ACPI_IS_DIGIT(i)        isdigit((int) (i))</span>
<span class="cp">#define ACPI_IS_SPACE(i)        isspace((int) (i))</span>
<span class="cp">#define ACPI_IS_UPPER(i)        isupper((int) (i))</span>
<span class="cp">#define ACPI_IS_PRINT(i)        isprint((int) (i))</span>
<span class="cp">#define ACPI_IS_ALPHA(i)        isalpha((int) (i))</span>

<span class="cp">#else</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Not using native C library, use local implementations</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

 <span class="cm">/*</span>
<span class="cm">  * Use local definitions of C library macros and functions</span>
<span class="cm">  * NOTE: The function implementations may not be as efficient</span>
<span class="cm">  * as an inline or assembly code implementation provided by a</span>
<span class="cm">  * native C library.</span>
<span class="cm">  */</span>

<span class="cp">#ifndef va_arg</span>

<span class="cp">#ifndef _VALIST</span>
<span class="cp">#define _VALIST</span>
<span class="k">typedef</span> <span class="kt">char</span> <span class="o">*</span><span class="kt">va_list</span><span class="p">;</span>
<span class="cp">#endif				</span><span class="cm">/* _VALIST */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Storage alignment properties</span>
<span class="cm"> */</span>
<span class="cp">#define  _AUPBND                (sizeof (acpi_native_int) - 1)</span>
<span class="cp">#define  _ADNBND                (sizeof (acpi_native_int) - 1)</span>

<span class="cm">/*</span>
<span class="cm"> * Variable argument list macro definitions</span>
<span class="cm"> */</span>
<span class="cp">#define _bnd(X, bnd)            (((sizeof (X)) + (bnd)) &amp; (~(bnd)))</span>
<span class="cp">#define va_arg(ap, T)           (*(T *)(((ap) += (_bnd (T, _AUPBND))) - (_bnd (T,_ADNBND))))</span>
<span class="cp">#define va_end(ap)              (void) 0</span>
<span class="cp">#define va_start(ap, A)         (void) ((ap) = (((char *) &amp;(A)) + (_bnd (A,_AUPBND))))</span>

<span class="cp">#endif				</span><span class="cm">/* va_arg */</span><span class="cp"></span>

<span class="cp">#define ACPI_STRSTR(s1,s2)      acpi_ut_strstr ((s1), (s2))</span>
<span class="cp">#define ACPI_STRCHR(s1,c)       acpi_ut_strchr ((s1), (c))</span>
<span class="cp">#define ACPI_STRLEN(s)          (acpi_size) acpi_ut_strlen ((s))</span>
<span class="cp">#define ACPI_STRCPY(d,s)        (void) acpi_ut_strcpy ((d), (s))</span>
<span class="cp">#define ACPI_STRNCPY(d,s,n)     (void) acpi_ut_strncpy ((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_STRNCMP(d,s,n)     acpi_ut_strncmp ((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_STRCMP(d,s)        acpi_ut_strcmp ((d), (s))</span>
<span class="cp">#define ACPI_STRCAT(d,s)        (void) acpi_ut_strcat ((d), (s))</span>
<span class="cp">#define ACPI_STRNCAT(d,s,n)     acpi_ut_strncat ((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_STRTOUL(d,s,n)     acpi_ut_strtoul ((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_MEMCMP(s1,s2,n)    acpi_ut_memcmp((const char *)(s1), (const char *)(s2), (acpi_size)(n))</span>
<span class="cp">#define ACPI_MEMCPY(d,s,n)      (void) acpi_ut_memcpy ((d), (s), (acpi_size)(n))</span>
<span class="cp">#define ACPI_MEMSET(d,v,n)      (void) acpi_ut_memset ((d), (v), (acpi_size)(n))</span>
<span class="cp">#define ACPI_TOUPPER(c)         acpi_ut_to_upper ((int) (c))</span>
<span class="cp">#define ACPI_TOLOWER(c)         acpi_ut_to_lower ((int) (c))</span>

<span class="cp">#endif				</span><span class="cm">/* ACPI_USE_SYSTEM_CLIBRARY */</span><span class="cp"></span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Assembly code macros</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> * Handle platform- and compiler-specific assembly language differences.</span>
<span class="cm"> * These should already have been defined by the platform includes above.</span>
<span class="cm"> *</span>
<span class="cm"> * Notes:</span>
<span class="cm"> * 1) Interrupt 3 is used to break into a debugger</span>
<span class="cm"> * 2) Interrupts are turned off during ACPI register setup</span>
<span class="cm"> */</span>

<span class="cm">/* Unrecognized compiler, use defaults */</span>

<span class="cp">#ifndef ACPI_ASM_MACROS</span>

<span class="cm">/*</span>
<span class="cm"> * Calling conventions:</span>
<span class="cm"> *</span>
<span class="cm"> * ACPI_SYSTEM_XFACE        - Interfaces to host OS (handlers, threads)</span>
<span class="cm"> * ACPI_EXTERNAL_XFACE      - External ACPI interfaces</span>
<span class="cm"> * ACPI_INTERNAL_XFACE      - Internal ACPI interfaces</span>
<span class="cm"> * ACPI_INTERNAL_VAR_XFACE  - Internal variable-parameter list interfaces</span>
<span class="cm"> */</span>
<span class="cp">#define ACPI_SYSTEM_XFACE</span>
<span class="cp">#define ACPI_EXTERNAL_XFACE</span>
<span class="cp">#define ACPI_INTERNAL_XFACE</span>
<span class="cp">#define ACPI_INTERNAL_VAR_XFACE</span>

<span class="cp">#define ACPI_ASM_MACROS</span>
<span class="cp">#define BREAKPOINT3</span>
<span class="cp">#define ACPI_DISABLE_IRQS()</span>
<span class="cp">#define ACPI_ENABLE_IRQS()</span>
<span class="cp">#define ACPI_ACQUIRE_GLOBAL_LOCK(Glptr, acq)</span>
<span class="cp">#define ACPI_RELEASE_GLOBAL_LOCK(Glptr, acq)</span>

<span class="cp">#endif				</span><span class="cm">/* ACPI_ASM_MACROS */</span><span class="cp"></span>

<span class="cp">#ifdef ACPI_APPLICATION</span>

<span class="cm">/* Don&#39;t want software interrupts within a ring3 application */</span>

<span class="cp">#undef BREAKPOINT3</span>
<span class="cp">#define BREAKPOINT3</span>
<span class="cp">#endif</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Compiler-specific information is contained in the compiler-specific</span>
<span class="cm"> * headers.</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>
<span class="cp">#endif				</span><span class="cm">/* __ACENV_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
