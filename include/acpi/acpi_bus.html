<!DOCTYPE html>
<html><head><title>joekychen/linux » include › acpi › acpi_bus.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>acpi_bus.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  acpi_bus.h - ACPI Bus Driver ($Revision: 22 $)</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2001, 2002 Andy Grover &lt;andrew.grover@intel.com&gt;</span>
<span class="cm"> *  Copyright (C) 2001, 2002 Paul Diefenbaugh &lt;paul.s.diefenbaugh@intel.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; either version 2 of the License, or (at</span>
<span class="cm"> *  your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> *  WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="cm"> *  General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License along</span>
<span class="cm"> *  with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="cm"> *  59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.</span>
<span class="cm"> *</span>
<span class="cm"> * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ACPI_BUS_H__</span>
<span class="cp">#define __ACPI_BUS_H__</span>

<span class="cp">#include &lt;linux/device.h&gt;</span>

<span class="cp">#include &lt;acpi/acpi.h&gt;</span>

<span class="cm">/* TBD: Make dynamic */</span>
<span class="cp">#define ACPI_MAX_HANDLES	10</span>
<span class="k">struct</span> <span class="n">acpi_handle_list</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">count</span><span class="p">;</span>
	<span class="n">acpi_handle</span> <span class="n">handles</span><span class="p">[</span><span class="n">ACPI_MAX_HANDLES</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* acpi_utils.h */</span>
<span class="n">acpi_status</span>
<span class="n">acpi_extract_package</span><span class="p">(</span><span class="k">union</span> <span class="n">acpi_object</span> <span class="o">*</span><span class="n">package</span><span class="p">,</span>
		     <span class="k">struct</span> <span class="n">acpi_buffer</span> <span class="o">*</span><span class="n">format</span><span class="p">,</span> <span class="k">struct</span> <span class="n">acpi_buffer</span> <span class="o">*</span><span class="n">buffer</span><span class="p">);</span>
<span class="n">acpi_status</span>
<span class="n">acpi_evaluate_integer</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span>
		      <span class="n">acpi_string</span> <span class="n">pathname</span><span class="p">,</span>
		      <span class="k">struct</span> <span class="n">acpi_object_list</span> <span class="o">*</span><span class="n">arguments</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="n">acpi_status</span>
<span class="n">acpi_evaluate_reference</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span>
			<span class="n">acpi_string</span> <span class="n">pathname</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">acpi_object_list</span> <span class="o">*</span><span class="n">arguments</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">acpi_handle_list</span> <span class="o">*</span><span class="n">list</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">acpi_pld</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">revision</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span> <span class="cm">/* 0 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ignore_colour</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 7 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">colour</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span> <span class="cm">/* 8 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">width</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span> <span class="cm">/* 32 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">height</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span> <span class="cm">/* 48 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">user_visible</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 64 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dock</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 65 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">lid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 66 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">panel</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span> <span class="cm">/* 67 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vertical_pos</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span> <span class="cm">/* 70 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">horizontal_pos</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span> <span class="cm">/* 72 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shape</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span> <span class="cm">/* 74 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">group_orientation</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 78 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">group_token</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span> <span class="cm">/* 79 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">group_position</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span> <span class="cm">/* 87 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bay</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 95 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ejectable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 96 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ospm_eject_required</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 97 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cabinet_number</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span> <span class="cm">/* 98 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">card_cage_number</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span> <span class="cm">/* 106 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reference</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span> <span class="cm">/* 114 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rotation</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span> <span class="cm">/* 115 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">order</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span> <span class="cm">/* 119 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span> <span class="cm">/* 124 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vertical_offset</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span> <span class="cm">/* 128 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">horizontal_offset</span><span class="o">:</span><span class="mi">16</span><span class="p">;</span> <span class="cm">/* 144 */</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="n">acpi_status</span>
<span class="n">acpi_get_physical_device_location</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="k">struct</span> <span class="n">acpi_pld</span> <span class="o">*</span><span class="n">pld</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_ACPI</span>

<span class="cp">#include &lt;linux/proc_fs.h&gt;</span>

<span class="cp">#define ACPI_BUS_FILE_ROOT	&quot;acpi&quot;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">proc_dir_entry</span> <span class="o">*</span><span class="n">acpi_root_dir</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">acpi_bus_removal_type</span> <span class="p">{</span>
	<span class="n">ACPI_BUS_REMOVAL_NORMAL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ACPI_BUS_REMOVAL_EJECT</span><span class="p">,</span>
	<span class="n">ACPI_BUS_REMOVAL_SUPRISE</span><span class="p">,</span>
	<span class="n">ACPI_BUS_REMOVAL_TYPE_COUNT</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">acpi_bus_device_type</span> <span class="p">{</span>
	<span class="n">ACPI_BUS_TYPE_DEVICE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">ACPI_BUS_TYPE_POWER</span><span class="p">,</span>
	<span class="n">ACPI_BUS_TYPE_PROCESSOR</span><span class="p">,</span>
	<span class="n">ACPI_BUS_TYPE_THERMAL</span><span class="p">,</span>
	<span class="n">ACPI_BUS_TYPE_POWER_BUTTON</span><span class="p">,</span>
	<span class="n">ACPI_BUS_TYPE_SLEEP_BUTTON</span><span class="p">,</span>
	<span class="n">ACPI_BUS_DEVICE_TYPE_COUNT</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_driver</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">acpi_device</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * ACPI Driver</span>
<span class="cm"> * -----------</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_add</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_remove</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_start</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_suspend</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">,</span>
				<span class="n">pm_message_t</span> <span class="n">state</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_resume</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_bind</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_unbind</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">acpi_op_notify</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">,</span> <span class="n">u32</span> <span class="n">event</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">acpi_bus_ops</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">acpi_op_add</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">acpi_op_start</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_ops</span> <span class="p">{</span>
	<span class="n">acpi_op_add</span> <span class="n">add</span><span class="p">;</span>
	<span class="n">acpi_op_remove</span> <span class="n">remove</span><span class="p">;</span>
	<span class="n">acpi_op_start</span> <span class="n">start</span><span class="p">;</span>
	<span class="n">acpi_op_suspend</span> <span class="n">suspend</span><span class="p">;</span>
	<span class="n">acpi_op_resume</span> <span class="n">resume</span><span class="p">;</span>
	<span class="n">acpi_op_bind</span> <span class="n">bind</span><span class="p">;</span>
	<span class="n">acpi_op_unbind</span> <span class="n">unbind</span><span class="p">;</span>
	<span class="n">acpi_op_notify</span> <span class="n">notify</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ACPI_DRIVER_ALL_NOTIFY_EVENTS	0x1	</span><span class="cm">/* system AND device events */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">acpi_driver</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">80</span><span class="p">];</span>
	<span class="kt">char</span> <span class="n">class</span><span class="p">[</span><span class="mi">80</span><span class="p">];</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">acpi_device_id</span> <span class="o">*</span><span class="n">ids</span><span class="p">;</span> <span class="cm">/* Supported Hardware IDs */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_ops</span> <span class="n">ops</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device_driver</span> <span class="n">drv</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">module</span> <span class="o">*</span><span class="n">owner</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ACPI Device</span>
<span class="cm"> * -----------</span>
<span class="cm"> */</span>

<span class="cm">/* Status (_STA) */</span>

<span class="k">struct</span> <span class="n">acpi_device_status</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">present</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">enabled</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">show_in_ui</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">functional</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">battery_present</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">27</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Flags */</span>

<span class="k">struct</span> <span class="n">acpi_device_flags</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">dynamic_status</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">bus_address</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">removable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ejectable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">lockable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">suprise_removal_ok</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">power_manageable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">performance_manageable</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">24</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* File System */</span>

<span class="k">struct</span> <span class="n">acpi_device_dir</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">proc_dir_entry</span> <span class="o">*</span><span class="n">entry</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define acpi_device_dir(d)	((d)-&gt;dir.entry)</span>

<span class="cm">/* Plug and Play */</span>

<span class="k">typedef</span> <span class="kt">char</span> <span class="n">acpi_bus_id</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">acpi_bus_address</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">char</span> <span class="n">acpi_device_name</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span>
<span class="k">typedef</span> <span class="kt">char</span> <span class="n">acpi_device_class</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>

<span class="k">struct</span> <span class="n">acpi_hardware_id</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">id</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_pnp</span> <span class="p">{</span>
	<span class="n">acpi_bus_id</span> <span class="n">bus_id</span><span class="p">;</span>	<span class="cm">/* Object name */</span>
	<span class="n">acpi_bus_address</span> <span class="n">bus_address</span><span class="p">;</span>	<span class="cm">/* _ADR */</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">unique_id</span><span class="p">;</span>	<span class="cm">/* _UID */</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">ids</span><span class="p">;</span>		<span class="cm">/* _HID and _CIDs */</span>
	<span class="n">acpi_device_name</span> <span class="n">device_name</span><span class="p">;</span>	<span class="cm">/* Driver-determined */</span>
	<span class="n">acpi_device_class</span> <span class="n">device_class</span><span class="p">;</span>	<span class="cm">/*        &quot;          */</span>
<span class="p">};</span>

<span class="cp">#define acpi_device_bid(d)	((d)-&gt;pnp.bus_id)</span>
<span class="cp">#define acpi_device_adr(d)	((d)-&gt;pnp.bus_address)</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">acpi_device_hid</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">);</span>
<span class="cp">#define acpi_device_name(d)	((d)-&gt;pnp.device_name)</span>
<span class="cp">#define acpi_device_class(d)	((d)-&gt;pnp.device_class)</span>

<span class="cm">/* Power Management */</span>

<span class="k">struct</span> <span class="n">acpi_device_power_flags</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">explicit_get</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* _PSC present? */</span>
	<span class="n">u32</span> <span class="n">power_resources</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Power resources */</span>
	<span class="n">u32</span> <span class="n">inrush_current</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Serialize Dx-&gt;D0 */</span>
	<span class="n">u32</span> <span class="n">power_removed</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* Optimize Dx-&gt;D0 */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">28</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_power_state</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">valid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">explicit_set</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>	<span class="cm">/* _PSx present? */</span>
		<span class="n">u8</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">power</span><span class="p">;</span>		<span class="cm">/* % Power (compared to D0) */</span>
	<span class="kt">int</span> <span class="n">latency</span><span class="p">;</span>		<span class="cm">/* Dx-&gt;D0 time (microseconds) */</span>
	<span class="k">struct</span> <span class="n">acpi_handle_list</span> <span class="n">resources</span><span class="p">;</span>	<span class="cm">/* Power resources referenced */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_power</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>		<span class="cm">/* Current state */</span>
	<span class="k">struct</span> <span class="n">acpi_device_power_flags</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_power_state</span> <span class="n">states</span><span class="p">[</span><span class="n">ACPI_D_STATE_COUNT</span><span class="p">];</span>	<span class="cm">/* Power states (D0-D3Cold) */</span>
<span class="p">};</span>

<span class="cm">/* Performance Management */</span>

<span class="k">struct</span> <span class="n">acpi_device_perf_flags</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_perf_state</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">valid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">power</span><span class="p">;</span>		<span class="cm">/* % Power (compared to P0) */</span>
	<span class="n">u8</span> <span class="n">performance</span><span class="p">;</span>		<span class="cm">/* % Performance (    &quot;   ) */</span>
	<span class="kt">int</span> <span class="n">latency</span><span class="p">;</span>		<span class="cm">/* Px-&gt;P0 time (microseconds) */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_perf</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_perf_flags</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">state_count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_perf_state</span> <span class="o">*</span><span class="n">states</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Wakeup Management */</span>
<span class="k">struct</span> <span class="n">acpi_device_wakeup_flags</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">valid</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>		<span class="cm">/* Can successfully enable wakeup? */</span>
	<span class="n">u8</span> <span class="n">run_wake</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>		<span class="cm">/* Run-Wake GPE devices */</span>
	<span class="n">u8</span> <span class="n">notifier_present</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>  <span class="cm">/* Wake-up notify handler has been installed */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">acpi_device_wakeup</span> <span class="p">{</span>
	<span class="n">acpi_handle</span> <span class="n">gpe_device</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">gpe_number</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">sleep_state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_handle_list</span> <span class="n">resources</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_wakeup_flags</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">prepare_count</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Device */</span>

<span class="k">struct</span> <span class="n">acpi_device</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">device_type</span><span class="p">;</span>
	<span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">;</span>		<span class="cm">/* no handle for fixed hardware */</span>
	<span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">parent</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">children</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">node</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">wakeup_list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_status</span> <span class="n">status</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_flags</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_pnp</span> <span class="n">pnp</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_power</span> <span class="n">power</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_wakeup</span> <span class="n">wakeup</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_perf</span> <span class="n">performance</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_dir</span> <span class="n">dir</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device_ops</span> <span class="n">ops</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_driver</span> <span class="o">*</span><span class="n">driver</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">driver_data</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_bus_ops</span> <span class="n">bus_ops</span><span class="p">;</span>	<span class="cm">/* workaround for different code path for hotplug */</span>
	<span class="k">enum</span> <span class="n">acpi_bus_removal_type</span> <span class="n">removal_type</span><span class="p">;</span>	<span class="cm">/* indicate for different removal type */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="o">*</span><span class="nf">acpi_driver_data</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">d</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">d</span><span class="o">-&gt;</span><span class="n">driver_data</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define to_acpi_device(d)	container_of(d, struct acpi_device, dev)</span>
<span class="cp">#define to_acpi_driver(d)	container_of(d, struct acpi_driver, drv)</span>

<span class="cm">/* acpi_device.dev.bus == &amp;acpi_bus_type */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">bus_type</span> <span class="n">acpi_bus_type</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Events</span>
<span class="cm"> * ------</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">acpi_bus_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">node</span><span class="p">;</span>
	<span class="n">acpi_device_class</span> <span class="n">device_class</span><span class="p">;</span>
	<span class="n">acpi_bus_id</span> <span class="n">bus_id</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">data</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">kobject</span> <span class="o">*</span><span class="n">acpi_kobj</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">acpi_bus_generate_netlink_event</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">,</span> <span class="n">u8</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_bus_private_data_handler</span><span class="p">(</span><span class="n">acpi_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_get_private_data</span><span class="p">(</span><span class="n">acpi_handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">**</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">acpi_notifier_call_chain</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">register_acpi_notifier</span><span class="p">(</span><span class="k">struct</span> <span class="n">notifier_block</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">unregister_acpi_notifier</span><span class="p">(</span><span class="k">struct</span> <span class="n">notifier_block</span> <span class="o">*</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">register_acpi_bus_notifier</span><span class="p">(</span><span class="k">struct</span> <span class="n">notifier_block</span> <span class="o">*</span><span class="n">nb</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">unregister_acpi_bus_notifier</span><span class="p">(</span><span class="k">struct</span> <span class="n">notifier_block</span> <span class="o">*</span><span class="n">nb</span><span class="p">);</span>
<span class="cm">/*</span>
<span class="cm"> * External Functions</span>
<span class="cm"> */</span>

<span class="kt">int</span> <span class="n">acpi_bus_get_device</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">**</span><span class="n">device</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_bus_data_handler</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">context</span><span class="p">);</span>
<span class="n">acpi_status</span> <span class="n">acpi_bus_get_status_handle</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span>
				       <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="o">*</span><span class="n">sta</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_get_status</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_set_power</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">state</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_update_power</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">state_p</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">acpi_bus_power_manageable</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">);</span>
<span class="n">bool</span> <span class="n">acpi_bus_can_wakeup</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_power_resource_register_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_power_resource_unregister_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_ACPI_PROC_EVENT</span>
<span class="kt">int</span> <span class="n">acpi_bus_generate_proc_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">,</span> <span class="n">u8</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_generate_proc_event4</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">class</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">bid</span><span class="p">,</span> <span class="n">u8</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_receive_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_bus_event</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_bus_generate_proc_event</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">,</span> <span class="n">u8</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">data</span><span class="p">)</span>
	<span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
<span class="cp">#endif</span>
<span class="kt">int</span> <span class="n">acpi_bus_register_driver</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_driver</span> <span class="o">*</span><span class="n">driver</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_bus_unregister_driver</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_driver</span> <span class="o">*</span><span class="n">driver</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_add</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">**</span><span class="n">child</span><span class="p">,</span> <span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span>
		 <span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_trim</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rmdevice</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_bus_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">);</span>
<span class="n">acpi_status</span> <span class="n">acpi_bus_get_ejd</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">,</span> <span class="n">acpi_handle</span> <span class="o">*</span> <span class="n">ejd</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_match_device_ids</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">device</span><span class="p">,</span>
			  <span class="k">const</span> <span class="k">struct</span> <span class="n">acpi_device_id</span> <span class="o">*</span><span class="n">ids</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_create_dir</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">acpi_remove_dir</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Bind physical devices with ACPI devices</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">acpi_bus_type</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">bus_type</span> <span class="o">*</span><span class="n">bus</span><span class="p">;</span>
	<span class="cm">/* For general devices under the bus */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">find_device</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">,</span> <span class="n">acpi_handle</span> <span class="o">*</span><span class="p">);</span>
	<span class="cm">/* For bridges, such as PCI root bridge, IDE controller */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">find_bridge</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">,</span> <span class="n">acpi_handle</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>
<span class="kt">int</span> <span class="n">register_acpi_bus_type</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_bus_type</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">unregister_acpi_bus_type</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_bus_type</span> <span class="o">*</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">acpi_get_physical_device</span><span class="p">(</span><span class="n">acpi_handle</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">acpi_pci_root</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">node</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span> <span class="n">device</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">acpi_pci_id</span> <span class="n">id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_bus</span> <span class="o">*</span><span class="n">bus</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">segment</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">resource</span> <span class="n">secondary</span><span class="p">;</span>	<span class="cm">/* downstream bus range */</span>

	<span class="n">u32</span> <span class="n">osc_support_set</span><span class="p">;</span>	<span class="cm">/* _OSC state of support bits */</span>
	<span class="n">u32</span> <span class="n">osc_control_set</span><span class="p">;</span>	<span class="cm">/* _OSC state of control bits */</span>
<span class="p">};</span>

<span class="cm">/* helper */</span>
<span class="n">acpi_handle</span> <span class="n">acpi_get_child</span><span class="p">(</span><span class="n">acpi_handle</span><span class="p">,</span> <span class="n">u64</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_is_root_bridge</span><span class="p">(</span><span class="n">acpi_handle</span><span class="p">);</span>
<span class="n">acpi_handle</span> <span class="n">acpi_get_pci_rootbridge_handle</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">acpi_pci_root</span> <span class="o">*</span><span class="n">acpi_pci_find_root</span><span class="p">(</span><span class="n">acpi_handle</span> <span class="n">handle</span><span class="p">);</span>
<span class="cp">#define DEVICE_ACPI_HANDLE(dev) ((acpi_handle)((dev)-&gt;archdata.acpi_handle))</span>

<span class="kt">int</span> <span class="n">acpi_enable_wakeup_device_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">state</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_disable_wakeup_device_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">acpi_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_PM</span>
<span class="kt">int</span> <span class="n">acpi_pm_device_sleep_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_pm_device_sleep_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">d</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
		<span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">ACPI_STATE_D0</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">ACPI_STATE_D3</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PM_SLEEP</span>
<span class="kt">int</span> <span class="n">acpi_pm_device_run_wake</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">,</span> <span class="n">bool</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">acpi_pm_device_sleep_wake</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">,</span> <span class="n">bool</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_pm_device_run_wake</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">acpi_pm_device_sleep_wake</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#else	</span><span class="cm">/* CONFIG_ACPI */</span><span class="cp"></span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">register_acpi_bus_type</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">bus</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">unregister_acpi_bus_type</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">bus</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>

<span class="cp">#endif				</span><span class="cm">/* CONFIG_ACPI */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/*__ACPI_BUS_H__*/</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
