<!DOCTYPE html>
<html><head><title>joekychen/linux » include › video › omapdss.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>omapdss.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2008 Nokia Corporation</span>
<span class="cm"> * Author: Tomi Valkeinen &lt;tomi.valkeinen@nokia.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms of the GNU General Public License version 2 as published by</span>
<span class="cm"> * the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful, but WITHOUT</span>
<span class="cm"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> * more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License along with</span>
<span class="cm"> * this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __OMAP_OMAPDSS_H</span>
<span class="cp">#define __OMAP_OMAPDSS_H</span>

<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/kobject.h&gt;</span>
<span class="cp">#include &lt;linux/device.h&gt;</span>

<span class="cp">#define DISPC_IRQ_FRAMEDONE		(1 &lt;&lt; 0)</span>
<span class="cp">#define DISPC_IRQ_VSYNC			(1 &lt;&lt; 1)</span>
<span class="cp">#define DISPC_IRQ_EVSYNC_EVEN		(1 &lt;&lt; 2)</span>
<span class="cp">#define DISPC_IRQ_EVSYNC_ODD		(1 &lt;&lt; 3)</span>
<span class="cp">#define DISPC_IRQ_ACBIAS_COUNT_STAT	(1 &lt;&lt; 4)</span>
<span class="cp">#define DISPC_IRQ_PROG_LINE_NUM		(1 &lt;&lt; 5)</span>
<span class="cp">#define DISPC_IRQ_GFX_FIFO_UNDERFLOW	(1 &lt;&lt; 6)</span>
<span class="cp">#define DISPC_IRQ_GFX_END_WIN		(1 &lt;&lt; 7)</span>
<span class="cp">#define DISPC_IRQ_PAL_GAMMA_MASK	(1 &lt;&lt; 8)</span>
<span class="cp">#define DISPC_IRQ_OCP_ERR		(1 &lt;&lt; 9)</span>
<span class="cp">#define DISPC_IRQ_VID1_FIFO_UNDERFLOW	(1 &lt;&lt; 10)</span>
<span class="cp">#define DISPC_IRQ_VID1_END_WIN		(1 &lt;&lt; 11)</span>
<span class="cp">#define DISPC_IRQ_VID2_FIFO_UNDERFLOW	(1 &lt;&lt; 12)</span>
<span class="cp">#define DISPC_IRQ_VID2_END_WIN		(1 &lt;&lt; 13)</span>
<span class="cp">#define DISPC_IRQ_SYNC_LOST		(1 &lt;&lt; 14)</span>
<span class="cp">#define DISPC_IRQ_SYNC_LOST_DIGIT	(1 &lt;&lt; 15)</span>
<span class="cp">#define DISPC_IRQ_WAKEUP		(1 &lt;&lt; 16)</span>
<span class="cp">#define DISPC_IRQ_SYNC_LOST2		(1 &lt;&lt; 17)</span>
<span class="cp">#define DISPC_IRQ_VSYNC2		(1 &lt;&lt; 18)</span>
<span class="cp">#define DISPC_IRQ_VID3_END_WIN		(1 &lt;&lt; 19)</span>
<span class="cp">#define DISPC_IRQ_VID3_FIFO_UNDERFLOW	(1 &lt;&lt; 20)</span>
<span class="cp">#define DISPC_IRQ_ACBIAS_COUNT_STAT2	(1 &lt;&lt; 21)</span>
<span class="cp">#define DISPC_IRQ_FRAMEDONE2		(1 &lt;&lt; 22)</span>
<span class="cp">#define DISPC_IRQ_FRAMEDONEWB		(1 &lt;&lt; 23)</span>
<span class="cp">#define DISPC_IRQ_FRAMEDONETV		(1 &lt;&lt; 24)</span>
<span class="cp">#define DISPC_IRQ_WBBUFFEROVERFLOW	(1 &lt;&lt; 25)</span>

<span class="k">struct</span> <span class="n">omap_dss_device</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">omap_overlay_manager</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">snd_aes_iec958</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">snd_cea_861_aud_if</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">omap_display_type</span> <span class="p">{</span>
	<span class="n">OMAP_DISPLAY_TYPE_NONE</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DISPLAY_TYPE_DPI</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DISPLAY_TYPE_DBI</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DISPLAY_TYPE_SDI</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OMAP_DISPLAY_TYPE_DSI</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">OMAP_DISPLAY_TYPE_VENC</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">OMAP_DISPLAY_TYPE_HDMI</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_plane</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_GFX</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_VIDEO1</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_VIDEO2</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OMAP_DSS_VIDEO3</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_channel</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_CHANNEL_LCD</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_CHANNEL_DIGIT</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_CHANNEL_LCD2</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_color_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_COLOR_CLUT1</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="cm">/* BITMAP 1 */</span>
	<span class="n">OMAP_DSS_COLOR_CLUT2</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>  <span class="cm">/* BITMAP 2 */</span>
	<span class="n">OMAP_DSS_COLOR_CLUT4</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>  <span class="cm">/* BITMAP 4 */</span>
	<span class="n">OMAP_DSS_COLOR_CLUT8</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">,</span>  <span class="cm">/* BITMAP 8 */</span>
	<span class="n">OMAP_DSS_COLOR_RGB12U</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">,</span>  <span class="cm">/* RGB12, 16-bit container */</span>
	<span class="n">OMAP_DSS_COLOR_ARGB16</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">,</span>  <span class="cm">/* ARGB16 */</span>
	<span class="n">OMAP_DSS_COLOR_RGB16</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">,</span>  <span class="cm">/* RGB16 */</span>
	<span class="n">OMAP_DSS_COLOR_RGB24U</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">,</span>  <span class="cm">/* RGB24, 32-bit container */</span>
	<span class="n">OMAP_DSS_COLOR_RGB24P</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">,</span>  <span class="cm">/* RGB24, 24-bit container */</span>
	<span class="n">OMAP_DSS_COLOR_YUV2</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">9</span><span class="p">,</span>  <span class="cm">/* YUV2 4:2:2 co-sited */</span>
	<span class="n">OMAP_DSS_COLOR_UYVY</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">10</span><span class="p">,</span> <span class="cm">/* UYVY 4:2:2 co-sited */</span>
	<span class="n">OMAP_DSS_COLOR_ARGB32</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">11</span><span class="p">,</span> <span class="cm">/* ARGB32 */</span>
	<span class="n">OMAP_DSS_COLOR_RGBA32</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">12</span><span class="p">,</span> <span class="cm">/* RGBA32 */</span>
	<span class="n">OMAP_DSS_COLOR_RGBX32</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">13</span><span class="p">,</span> <span class="cm">/* RGBx32 */</span>
	<span class="n">OMAP_DSS_COLOR_NV12</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">14</span><span class="p">,</span> <span class="cm">/* NV12 format: YUV 4:2:0 */</span>
	<span class="n">OMAP_DSS_COLOR_RGBA16</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span><span class="p">,</span> <span class="cm">/* RGBA16 - 4444 */</span>
	<span class="n">OMAP_DSS_COLOR_RGBX16</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">,</span> <span class="cm">/* RGBx16 - 4444 */</span>
	<span class="n">OMAP_DSS_COLOR_ARGB16_1555</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">17</span><span class="p">,</span> <span class="cm">/* ARGB16 - 1555 */</span>
	<span class="n">OMAP_DSS_COLOR_XRGB16_1555</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">18</span><span class="p">,</span> <span class="cm">/* xRGB16 - 1555 */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_lcd_display_type</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_LCD_DISPLAY_STN</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LCD_DISPLAY_TFT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_load_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_LOAD_CLUT_AND_FRAME</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LOAD_CLUT_ONLY</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LOAD_FRAME_ONLY</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LOAD_CLUT_ONCE_FRAME</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_trans_key_type</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_COLOR_KEY_GFX_DST</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_COLOR_KEY_VID_SRC</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_rfbi_te_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_RFBI_TE_MODE_1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_RFBI_TE_MODE_2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_panel_config</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_LCD_IVS</span>		<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LCD_IHS</span>		<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LCD_IPC</span>		<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">2</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LCD_IEO</span>		<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">3</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LCD_RF</span>			<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">4</span><span class="p">,</span>
	<span class="n">OMAP_DSS_LCD_ONOFF</span>		<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">5</span><span class="p">,</span>

	<span class="n">OMAP_DSS_LCD_TFT</span>		<span class="o">=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">20</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_venc_type</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_VENC_TYPE_COMPOSITE</span><span class="p">,</span>
	<span class="n">OMAP_DSS_VENC_TYPE_SVIDEO</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_dsi_pixel_format</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_DSI_FMT_RGB888</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DSI_FMT_RGB666</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DSI_FMT_RGB666_PACKED</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DSI_FMT_RGB565</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_dsi_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_DSI_CMD_MODE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DSI_VIDEO_MODE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_display_caps</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_DISPLAY_CAP_MANUAL_UPDATE</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DISPLAY_CAP_TEAR_ELIM</span>		<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_display_state</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_DISPLAY_DISABLED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DISPLAY_ACTIVE</span><span class="p">,</span>
	<span class="n">OMAP_DSS_DISPLAY_SUSPENDED</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_audio_state</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_AUDIO_DISABLED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_AUDIO_ENABLED</span><span class="p">,</span>
	<span class="n">OMAP_DSS_AUDIO_CONFIGURED</span><span class="p">,</span>
	<span class="n">OMAP_DSS_AUDIO_PLAYING</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* XXX perhaps this should be removed */</span>
<span class="k">enum</span> <span class="n">omap_dss_overlay_managers</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_OVL_MGR_LCD</span><span class="p">,</span>
	<span class="n">OMAP_DSS_OVL_MGR_TV</span><span class="p">,</span>
	<span class="n">OMAP_DSS_OVL_MGR_LCD2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_rotation_type</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_ROT_DMA</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_ROT_VRFB</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_ROT_TILER</span>	<span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* clockwise rotation angle */</span>
<span class="k">enum</span> <span class="n">omap_dss_rotation_angle</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_ROT_0</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_ROT_90</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_ROT_180</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OMAP_DSS_ROT_270</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_overlay_caps</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_OVL_CAP_SCALE</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DSS_OVL_CAP_GLOBAL_ALPHA</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">OMAP_DSS_OVL_CAP_PRE_MULT_ALPHA</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">OMAP_DSS_OVL_CAP_ZORDER</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_overlay_manager_caps</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_DUMMY_VALUE</span><span class="p">,</span> <span class="cm">/* add a dummy value to prevent compiler error */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dss_clk_source</span> <span class="p">{</span>
	<span class="n">OMAP_DSS_CLK_SRC_FCK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* OMAP2/3: DSS1_ALWON_FCLK</span>
<span class="cm">						 * OMAP4: DSS_FCLK */</span>
	<span class="n">OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DISPC</span><span class="p">,</span>	<span class="cm">/* OMAP3: DSI1_PLL_FCLK</span>
<span class="cm">						 * OMAP4: PLL1_CLK1 */</span>
	<span class="n">OMAP_DSS_CLK_SRC_DSI_PLL_HSDIV_DSI</span><span class="p">,</span>	<span class="cm">/* OMAP3: DSI2_PLL_FCLK</span>
<span class="cm">						 * OMAP4: PLL1_CLK2 */</span>
	<span class="n">OMAP_DSS_CLK_SRC_DSI2_PLL_HSDIV_DISPC</span><span class="p">,</span>	<span class="cm">/* OMAP4: PLL2_CLK1 */</span>
	<span class="n">OMAP_DSS_CLK_SRC_DSI2_PLL_HSDIV_DSI</span><span class="p">,</span>	<span class="cm">/* OMAP4: PLL2_CLK2 */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_hdmi_flags</span> <span class="p">{</span>
	<span class="n">OMAP_HDMI_SDA_SCL_EXTERNAL_PULLUP</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* RFBI */</span>

<span class="k">struct</span> <span class="n">rfbi_timings</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">cs_on_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cs_off_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">we_on_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">we_off_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">re_on_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">re_off_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">we_cycle_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">re_cycle_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cs_pulse_width</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">access_time</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">clk_div</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">tim</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>             <span class="cm">/* set by rfbi_convert_timings() */</span>

	<span class="kt">int</span> <span class="n">converted</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">omap_rfbi_write_command</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u32</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_rfbi_read_data</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u32</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_rfbi_write_data</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="n">u32</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_rfbi_write_pixels</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">scr_width</span><span class="p">,</span>
		<span class="n">u16</span> <span class="n">x</span><span class="p">,</span> <span class="n">u16</span> <span class="n">y</span><span class="p">,</span>
		<span class="n">u16</span> <span class="n">w</span><span class="p">,</span> <span class="n">u16</span> <span class="n">h</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_rfbi_enable_te</span><span class="p">(</span><span class="n">bool</span> <span class="n">enable</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">line</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_rfbi_setup_te</span><span class="p">(</span><span class="k">enum</span> <span class="n">omap_rfbi_te_mode</span> <span class="n">mode</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="n">hs_pulse_time</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">vs_pulse_time</span><span class="p">,</span>
			     <span class="kt">int</span> <span class="n">hs_pol_inv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vs_pol_inv</span><span class="p">,</span> <span class="kt">int</span> <span class="n">extif_div</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rfbi_bus_lock</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rfbi_bus_unlock</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* DSI */</span>

<span class="k">struct</span> <span class="n">omap_dss_dsi_videomode_data</span> <span class="p">{</span>
	<span class="cm">/* DSI video mode blanking data */</span>
	<span class="cm">/* Unit: byte clock cycles */</span>
	<span class="n">u16</span> <span class="n">hsa</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">hfp</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">hbp</span><span class="p">;</span>
	<span class="cm">/* Unit: line clocks */</span>
	<span class="n">u16</span> <span class="n">vsa</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">vfp</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">vbp</span><span class="p">;</span>

	<span class="cm">/* DSI blanking modes */</span>
	<span class="kt">int</span> <span class="n">blanking_mode</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">hsa_blanking_mode</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">hbp_blanking_mode</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">hfp_blanking_mode</span><span class="p">;</span>

	<span class="cm">/* Video port sync events */</span>
	<span class="kt">int</span> <span class="n">vp_de_pol</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">vp_hsync_pol</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">vp_vsync_pol</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">vp_vsync_end</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">vp_hsync_end</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">ddr_clk_always_on</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">window_sync</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">dsi_bus_lock</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">dsi_bus_unlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_dcs_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_dcs_write_0</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="n">dcs_cmd</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_write_0</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_dcs_write_1</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="n">dcs_cmd</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">param</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_write_1</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">param</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_write_2</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">param1</span><span class="p">,</span> <span class="n">u8</span> <span class="n">param2</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_dcs_write_nosync</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_write_nosync</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_dcs_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="n">dcs_cmd</span><span class="p">,</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_read_0</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">buflen</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_read_1</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="n">u8</span> <span class="n">param</span><span class="p">,</span>
		<span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_generic_read_2</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">u8</span> <span class="n">param1</span><span class="p">,</span> <span class="n">u8</span> <span class="n">param2</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">buflen</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_set_max_rx_packet_size</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">u16</span> <span class="n">len</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_send_null</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_vc_send_bta_sync</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dsi_enable_video_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">dsi_disable_video_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>

<span class="cm">/* Board specific data */</span>
<span class="k">struct</span> <span class="n">omap_dss_board_info</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_context_loss_count</span><span class="p">)(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">num_devices</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">**</span><span class="n">devices</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">default_device</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">dsi_enable_pads</span><span class="p">)(</span><span class="kt">int</span> <span class="n">dsi_id</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">lane_mask</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">dsi_disable_pads</span><span class="p">)(</span><span class="kt">int</span> <span class="n">dsi_id</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">lane_mask</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_min_bus_tput</span><span class="p">)(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">r</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* Init with the board info */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_display_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_board_info</span> <span class="o">*</span><span class="n">board_data</span><span class="p">);</span>
<span class="cm">/* HDMI mux init*/</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_hdmi_init</span><span class="p">(</span><span class="k">enum</span> <span class="n">omap_hdmi_flags</span> <span class="n">flags</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="p">{</span>
	<span class="cm">/* Unit: pixels */</span>
	<span class="n">u16</span> <span class="n">x_res</span><span class="p">;</span>
	<span class="cm">/* Unit: pixels */</span>
	<span class="n">u16</span> <span class="n">y_res</span><span class="p">;</span>
	<span class="cm">/* Unit: KHz */</span>
	<span class="n">u32</span> <span class="n">pixel_clock</span><span class="p">;</span>
	<span class="cm">/* Unit: pixel clocks */</span>
	<span class="n">u16</span> <span class="n">hsw</span><span class="p">;</span>	<span class="cm">/* Horizontal synchronization pulse width */</span>
	<span class="cm">/* Unit: pixel clocks */</span>
	<span class="n">u16</span> <span class="n">hfp</span><span class="p">;</span>	<span class="cm">/* Horizontal front porch */</span>
	<span class="cm">/* Unit: pixel clocks */</span>
	<span class="n">u16</span> <span class="n">hbp</span><span class="p">;</span>	<span class="cm">/* Horizontal back porch */</span>
	<span class="cm">/* Unit: line clocks */</span>
	<span class="n">u16</span> <span class="n">vsw</span><span class="p">;</span>	<span class="cm">/* Vertical synchronization pulse width */</span>
	<span class="cm">/* Unit: line clocks */</span>
	<span class="n">u16</span> <span class="n">vfp</span><span class="p">;</span>	<span class="cm">/* Vertical front porch */</span>
	<span class="cm">/* Unit: line clocks */</span>
	<span class="n">u16</span> <span class="n">vbp</span><span class="p">;</span>	<span class="cm">/* Vertical back porch */</span>
<span class="p">};</span>

<span class="cp">#ifdef CONFIG_OMAP2_DSS_VENC</span>
<span class="cm">/* Hardcoded timings for tv modes. Venc only uses these to</span>
<span class="cm"> * identify the mode, and does not actually use the configs</span>
<span class="cm"> * itself. However, the configs should be something that</span>
<span class="cm"> * a normal monitor can also show */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="n">omap_dss_pal_timings</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="n">omap_dss_ntsc_timings</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="k">struct</span> <span class="n">omap_dss_cpr_coefs</span> <span class="p">{</span>
	<span class="n">s16</span> <span class="n">rr</span><span class="p">,</span> <span class="n">rg</span><span class="p">,</span> <span class="n">rb</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">gr</span><span class="p">,</span> <span class="n">gg</span><span class="p">,</span> <span class="n">gb</span><span class="p">;</span>
	<span class="n">s16</span> <span class="n">br</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">bb</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_overlay_info</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">paddr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p_uv_addr</span><span class="p">;</span>  <span class="cm">/* for NV12 format */</span>
	<span class="n">u16</span> <span class="n">screen_width</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">width</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">height</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_color_mode</span> <span class="n">color_mode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">rotation</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_dss_rotation_type</span> <span class="n">rotation_type</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">mirror</span><span class="p">;</span>

	<span class="n">u16</span> <span class="n">pos_x</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">pos_y</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">out_width</span><span class="p">;</span>	<span class="cm">/* if 0, out_width == width */</span>
	<span class="n">u16</span> <span class="n">out_height</span><span class="p">;</span>	<span class="cm">/* if 0, out_height == height */</span>
	<span class="n">u8</span> <span class="n">global_alpha</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pre_mult_alpha</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">zorder</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_overlay</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">kobject</span> <span class="n">kobj</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>

	<span class="cm">/* static fields */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_plane</span> <span class="n">id</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_color_mode</span> <span class="n">supported_modes</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_overlay_caps</span> <span class="n">caps</span><span class="p">;</span>

	<span class="cm">/* dynamic fields */</span>
	<span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">manager</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * The following functions do not block:</span>
<span class="cm">	 *</span>
<span class="cm">	 * is_enabled</span>
<span class="cm">	 * set_overlay_info</span>
<span class="cm">	 * get_overlay_info</span>
<span class="cm">	 *</span>
<span class="cm">	 * The rest of the functions may block and cannot be called from</span>
<span class="cm">	 * interrupt context</span>
<span class="cm">	 */</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">disable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">);</span>
	<span class="n">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">is_enabled</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_manager</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">unset_manager</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_overlay_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_overlay_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_overlay_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_overlay_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">wait_for_go</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">ovl</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_overlay_manager_info</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">default_color</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">omap_dss_trans_key_type</span> <span class="n">trans_key_type</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">trans_key</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">trans_enabled</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">partial_alpha_enabled</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">cpr_enable</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">omap_dss_cpr_coefs</span> <span class="n">cpr_coefs</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">kobject</span> <span class="n">kobj</span><span class="p">;</span>

	<span class="cm">/* static fields */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_channel</span> <span class="n">id</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_overlay_manager_caps</span> <span class="n">caps</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">overlays</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">omap_display_type</span> <span class="n">supported_displays</span><span class="p">;</span>

	<span class="cm">/* dynamic fields */</span>
	<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">device</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * The following functions do not block:</span>
<span class="cm">	 *</span>
<span class="cm">	 * set_manager_info</span>
<span class="cm">	 * get_manager_info</span>
<span class="cm">	 * apply</span>
<span class="cm">	 *</span>
<span class="cm">	 * The rest of the functions may block and cannot be called from</span>
<span class="cm">	 * interrupt context</span>
<span class="cm">	 */</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_device</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">unset_device</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_manager_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_overlay_manager_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_manager_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_overlay_manager_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">apply</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">wait_for_go</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">wait_for_vsync</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">mgr</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* 22 pins means 1 clk lane and 10 data lanes */</span>
<span class="cp">#define OMAP_DSS_MAX_DSI_PINS 22</span>

<span class="k">struct</span> <span class="n">omap_dsi_pin_config</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">num_pins</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * pin numbers in the following order:</span>
<span class="cm">	 * clk+, clk-</span>
<span class="cm">	 * data1+, data1-</span>
<span class="cm">	 * data2+, data2-</span>
<span class="cm">	 * ...</span>
<span class="cm">	 */</span>
	<span class="kt">int</span> <span class="n">pins</span><span class="p">[</span><span class="n">OMAP_DSS_MAX_DSI_PINS</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="n">dev</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">omap_display_type</span> <span class="n">type</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">omap_channel</span> <span class="n">channel</span><span class="p">;</span>

	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">data_lines</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">dpi</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">channel</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">data_lines</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">rfbi</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u8</span> <span class="n">datapairs</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">sdi</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">int</span> <span class="n">module</span><span class="p">;</span>

			<span class="n">bool</span> <span class="n">ext_te</span><span class="p">;</span>
			<span class="n">u8</span> <span class="n">ext_te_gpio</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">dsi</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">enum</span> <span class="n">omap_dss_venc_type</span> <span class="n">type</span><span class="p">;</span>
			<span class="n">bool</span> <span class="n">invert_polarity</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">venc</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">phy</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="p">{</span>
				<span class="n">u16</span> <span class="n">lck_div</span><span class="p">;</span>
				<span class="n">u16</span> <span class="n">pck_div</span><span class="p">;</span>
				<span class="k">enum</span> <span class="n">omap_dss_clk_source</span> <span class="n">lcd_clk_src</span><span class="p">;</span>
			<span class="p">}</span> <span class="n">channel</span><span class="p">;</span>

			<span class="k">enum</span> <span class="n">omap_dss_clk_source</span> <span class="n">dispc_fclk_src</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">dispc</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="cm">/* regn is one greater than TRM&#39;s REGN value */</span>
			<span class="n">u16</span> <span class="n">regn</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">regm</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">regm_dispc</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">regm_dsi</span><span class="p">;</span>

			<span class="n">u16</span> <span class="n">lp_clk_div</span><span class="p">;</span>
			<span class="k">enum</span> <span class="n">omap_dss_clk_source</span> <span class="n">dsi_fclk_src</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">dsi</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="cm">/* regn is one greater than TRM&#39;s REGN value */</span>
			<span class="n">u16</span> <span class="n">regn</span><span class="p">;</span>
			<span class="n">u16</span> <span class="n">regm2</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">hdmi</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">clocks</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="n">timings</span><span class="p">;</span>

		<span class="kt">int</span> <span class="n">acbi</span><span class="p">;</span>	<span class="cm">/* ac-bias pin transitions per interrupt */</span>
		<span class="cm">/* Unit: line clocks */</span>
		<span class="kt">int</span> <span class="n">acb</span><span class="p">;</span>	<span class="cm">/* ac-bias pin frequency */</span>

		<span class="k">enum</span> <span class="n">omap_panel_config</span> <span class="n">config</span><span class="p">;</span>

		<span class="k">enum</span> <span class="n">omap_dss_dsi_pixel_format</span> <span class="n">dsi_pix_fmt</span><span class="p">;</span>
		<span class="k">enum</span> <span class="n">omap_dss_dsi_mode</span> <span class="n">dsi_mode</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">omap_dss_dsi_videomode_data</span> <span class="n">dsi_vm_data</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">panel</span><span class="p">;</span>

	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">pixel_size</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">rfbi_timings</span> <span class="n">rfbi_timings</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ctrl</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">reset_gpio</span><span class="p">;</span>

	<span class="kt">int</span> <span class="n">max_backlight_level</span><span class="p">;</span>

	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>

	<span class="cm">/* used to match device to driver */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">driver_name</span><span class="p">;</span>

	<span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">omap_dss_driver</span> <span class="o">*</span><span class="n">driver</span><span class="p">;</span>

	<span class="cm">/* helper variable for driver suspend/resume */</span>
	<span class="n">bool</span> <span class="n">activate_after_resume</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">omap_display_caps</span> <span class="n">caps</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">manager</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">omap_dss_display_state</span> <span class="n">state</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">omap_dss_audio_state</span> <span class="n">audio_state</span><span class="p">;</span>

	<span class="cm">/* platform specific  */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">platform_enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">platform_disable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_backlight</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_backlight</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dss_hdmi_data</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">hpd_gpio</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dss_audio</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_aes_iec958</span> <span class="o">*</span><span class="n">iec</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_cea_861_aud_if</span> <span class="o">*</span><span class="n">cea</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dss_driver</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device_driver</span> <span class="n">driver</span><span class="p">;</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">probe</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">remove</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">display</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">disable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">display</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">suspend</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">display</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">resume</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">display</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">run_test</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">display</span><span class="p">,</span> <span class="kt">int</span> <span class="n">test</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">update</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			       <span class="n">u16</span> <span class="n">x</span><span class="p">,</span> <span class="n">u16</span> <span class="n">y</span><span class="p">,</span> <span class="n">u16</span> <span class="n">w</span><span class="p">,</span> <span class="n">u16</span> <span class="n">h</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">sync</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">enable_te</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_te</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

	<span class="n">u8</span> <span class="p">(</span><span class="o">*</span><span class="n">get_rotate</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_rotate</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">rotate</span><span class="p">);</span>

	<span class="n">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_mirror</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_mirror</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">memory_read</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span>
			<span class="n">u16</span> <span class="n">x</span><span class="p">,</span> <span class="n">u16</span> <span class="n">y</span><span class="p">,</span> <span class="n">u16</span> <span class="n">w</span><span class="p">,</span> <span class="n">u16</span> <span class="n">h</span><span class="p">);</span>

	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_resolution</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="n">u16</span> <span class="o">*</span><span class="n">xres</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">yres</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_dimensions</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="n">u32</span> <span class="o">*</span><span class="n">width</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">height</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_recommended_bpp</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">check_timings</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="o">*</span><span class="n">timings</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">set_timings</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="o">*</span><span class="n">timings</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_timings</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="o">*</span><span class="n">timings</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_wss</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="n">u32</span> <span class="n">wss</span><span class="p">);</span>
	<span class="n">u32</span> <span class="p">(</span><span class="o">*</span><span class="n">get_wss</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">read_edid</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">len</span><span class="p">);</span>
	<span class="n">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">detect</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * For display drivers that support audio. This encompasses</span>
<span class="cm">	 * HDMI and DisplayPort at the moment.</span>
<span class="cm">	 */</span>
	<span class="cm">/*</span>
<span class="cm">	 * Note: These functions might sleep. Do not call while</span>
<span class="cm">	 * holding a spinlock/readlock.</span>
<span class="cm">	 */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">audio_enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">audio_disable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="n">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">audio_supported</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">audio_config</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">omap_dss_audio</span> <span class="o">*</span><span class="n">audio</span><span class="p">);</span>
	<span class="cm">/* Note: These functions may not sleep */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">audio_start</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">audio_stop</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

<span class="p">};</span>

<span class="kt">int</span> <span class="n">omap_dss_register_driver</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_driver</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_dss_unregister_driver</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_driver</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">omap_dss_get_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_dss_put_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="cp">#define for_each_dss_dev(d) while ((d = omap_dss_get_next_device(d)) != NULL)</span>
<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">omap_dss_get_next_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">from</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">omap_dss_find_device</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span>
		<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">match</span><span class="p">)(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">));</span>

<span class="kt">int</span> <span class="n">omap_dss_start_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_dss_stop_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omap_dss_get_num_overlay_managers</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">omap_overlay_manager</span> <span class="o">*</span><span class="n">omap_dss_get_overlay_manager</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omap_dss_get_num_overlays</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">omap_overlay</span> <span class="o">*</span><span class="n">omap_dss_get_overlay</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">omapdss_default_get_resolution</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="n">u16</span> <span class="o">*</span><span class="n">xres</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">yres</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omapdss_default_get_recommended_bpp</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omapdss_default_get_timings</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="o">*</span><span class="n">timings</span><span class="p">);</span>

<span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">omap_dispc_isr_t</span><span class="p">)</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_dispc_register_isr</span><span class="p">(</span><span class="n">omap_dispc_isr_t</span> <span class="n">isr</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_dispc_unregister_isr</span><span class="p">(</span><span class="n">omap_dispc_isr_t</span> <span class="n">isr</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omap_dispc_wait_for_irq_timeout</span><span class="p">(</span><span class="n">u32</span> <span class="n">irqmask</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">timeout</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_dispc_wait_for_irq_interruptible_timeout</span><span class="p">(</span><span class="n">u32</span> <span class="n">irqmask</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">timeout</span><span class="p">);</span>

<span class="cp">#define to_dss_driver(x) container_of((x), struct omap_dss_driver, driver)</span>
<span class="cp">#define to_dss_device(x) container_of((x), struct omap_dss_device, dev)</span>

<span class="kt">void</span> <span class="n">omapdss_dsi_vc_enable_hs</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omapdss_dsi_enable_te</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enable</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omap_dsi_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span>
		<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">),</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_dsi_request_vc</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">channel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_dsi_set_vc_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="kt">int</span> <span class="n">vc_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_dsi_release_vc</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omapdss_dsi_configure_pins</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">omap_dsi_pin_config</span> <span class="o">*</span><span class="n">pin_cfg</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omapdss_dsi_display_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omapdss_dsi_display_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="n">bool</span> <span class="n">disconnect_lanes</span><span class="p">,</span> <span class="n">bool</span> <span class="n">enter_ulps</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omapdss_dpi_display_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omapdss_dpi_display_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">dpi_set_timings</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="o">*</span><span class="n">timings</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">dpi_check_timings</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">omap_video_timings</span> <span class="o">*</span><span class="n">timings</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omapdss_sdi_display_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omapdss_sdi_display_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">omapdss_rfbi_display_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omapdss_rfbi_display_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_rfbi_prepare_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="n">u16</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">w</span><span class="p">,</span> <span class="n">u16</span> <span class="o">*</span><span class="n">h</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_rfbi_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span>
		<span class="n">u16</span> <span class="n">x</span><span class="p">,</span> <span class="n">u16</span> <span class="n">y</span><span class="p">,</span> <span class="n">u16</span> <span class="n">w</span><span class="p">,</span> <span class="n">u16</span> <span class="n">h</span><span class="p">,</span>
		<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">),</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">omap_rfbi_configure</span><span class="p">(</span><span class="k">struct</span> <span class="n">omap_dss_device</span> <span class="o">*</span><span class="n">dssdev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pixel_size</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">data_lines</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
