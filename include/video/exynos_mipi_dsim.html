<!DOCTYPE html>
<html><head><title>joekychen/linux » include › video › exynos_mipi_dsim.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>exynos_mipi_dsim.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* include/video/exynos_mipi_dsim.h</span>
<span class="cm"> *</span>
<span class="cm"> * Platform data header for Samsung SoC MIPI-DSIM.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2012 Samsung Electronics Co., Ltd</span>
<span class="cm"> *</span>
<span class="cm"> * InKi Dae &lt;inki.dae@samsung.com&gt;</span>
<span class="cm"> * Donghwa Lee &lt;dh09.lee@samsung.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm">*/</span>

<span class="cp">#ifndef _EXYNOS_MIPI_DSIM_H</span>
<span class="cp">#define _EXYNOS_MIPI_DSIM_H</span>

<span class="cp">#include &lt;linux/device.h&gt;</span>
<span class="cp">#include &lt;linux/fb.h&gt;</span>

<span class="cp">#define PANEL_NAME_SIZE		(32)</span>

<span class="cm">/*</span>
<span class="cm"> * Enumerate display interface type.</span>
<span class="cm"> *</span>
<span class="cm"> * DSIM_COMMAND means cpu interface and rgb interface for DSIM_VIDEO.</span>
<span class="cm"> *</span>
<span class="cm"> * P.S. MIPI DSI Master has two display controller intefaces, RGB Interface</span>
<span class="cm"> *	for main display and CPU Interface(same as I80 Interface) for main</span>
<span class="cm"> *	and sub display.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">mipi_dsim_interface_type</span> <span class="p">{</span>
	<span class="n">DSIM_COMMAND</span><span class="p">,</span>
	<span class="n">DSIM_VIDEO</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mipi_dsim_virtual_ch_no</span> <span class="p">{</span>
	<span class="n">DSIM_VIRTUAL_CH_0</span><span class="p">,</span>
	<span class="n">DSIM_VIRTUAL_CH_1</span><span class="p">,</span>
	<span class="n">DSIM_VIRTUAL_CH_2</span><span class="p">,</span>
	<span class="n">DSIM_VIRTUAL_CH_3</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mipi_dsim_burst_mode_type</span> <span class="p">{</span>
	<span class="n">DSIM_NON_BURST_SYNC_EVENT</span><span class="p">,</span>
	<span class="n">DSIM_BURST_SYNC_EVENT</span><span class="p">,</span>
	<span class="n">DSIM_NON_BURST_SYNC_PULSE</span><span class="p">,</span>
	<span class="n">DSIM_BURST</span><span class="p">,</span>
	<span class="n">DSIM_NON_VIDEO_MODE</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mipi_dsim_no_of_data_lane</span> <span class="p">{</span>
	<span class="n">DSIM_DATA_LANE_1</span><span class="p">,</span>
	<span class="n">DSIM_DATA_LANE_2</span><span class="p">,</span>
	<span class="n">DSIM_DATA_LANE_3</span><span class="p">,</span>
	<span class="n">DSIM_DATA_LANE_4</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mipi_dsim_byte_clk_src</span> <span class="p">{</span>
	<span class="n">DSIM_PLL_OUT_DIV8</span><span class="p">,</span>
	<span class="n">DSIM_EXT_CLK_DIV8</span><span class="p">,</span>
	<span class="n">DSIM_EXT_CLK_BYPASS</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mipi_dsim_pixel_format</span> <span class="p">{</span>
	<span class="n">DSIM_CMD_3BPP</span><span class="p">,</span>
	<span class="n">DSIM_CMD_8BPP</span><span class="p">,</span>
	<span class="n">DSIM_CMD_12BPP</span><span class="p">,</span>
	<span class="n">DSIM_CMD_16BPP</span><span class="p">,</span>
	<span class="n">DSIM_VID_16BPP_565</span><span class="p">,</span>
	<span class="n">DSIM_VID_18BPP_666PACKED</span><span class="p">,</span>
	<span class="n">DSIM_18BPP_666LOOSELYPACKED</span><span class="p">,</span>
	<span class="n">DSIM_24BPP_888</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * struct mipi_dsim_config - interface for configuring mipi-dsi controller.</span>
<span class="cm"> *</span>
<span class="cm"> * @auto_flush: enable or disable Auto flush of MD FIFO using VSYNC pulse.</span>
<span class="cm"> * @eot_disable: enable or disable EoT packet in HS mode.</span>
<span class="cm"> * @auto_vertical_cnt: specifies auto vertical count mode.</span>
<span class="cm"> *	in Video mode, the vertical line transition uses line counter</span>
<span class="cm"> *	configured by VSA, VBP, and Vertical resolution.</span>
<span class="cm"> *	If this bit is set to &#39;1&#39;, the line counter does not use VSA and VBP</span>
<span class="cm"> *	registers.(in command mode, this variable is ignored)</span>
<span class="cm"> * @hse: set horizontal sync event mode.</span>
<span class="cm"> *	In VSYNC pulse and Vporch area, MIPI DSI master transfers only HSYNC</span>
<span class="cm"> *	start packet to MIPI DSI slave at MIPI DSI spec1.1r02.</span>
<span class="cm"> *	this bit transfers HSYNC end packet in VSYNC pulse and Vporch area</span>
<span class="cm"> *	(in mommand mode, this variable is ignored)</span>
<span class="cm"> * @hfp: specifies HFP disable mode.</span>
<span class="cm"> *	if this variable is set, DSI master ignores HFP area in VIDEO mode.</span>
<span class="cm"> *	(in command mode, this variable is ignored)</span>
<span class="cm"> * @hbp: specifies HBP disable mode.</span>
<span class="cm"> *	if this variable is set, DSI master ignores HBP area in VIDEO mode.</span>
<span class="cm"> *	(in command mode, this variable is ignored)</span>
<span class="cm"> * @hsa: specifies HSA disable mode.</span>
<span class="cm"> *	if this variable is set, DSI master ignores HSA area in VIDEO mode.</span>
<span class="cm"> *	(in command mode, this variable is ignored)</span>
<span class="cm"> * @cma_allow: specifies the number of horizontal lines, where command packet</span>
<span class="cm"> *	transmission is allowed after Stable VFP period.</span>
<span class="cm"> * @e_interface: specifies interface to be used.(CPU or RGB interface)</span>
<span class="cm"> * @e_virtual_ch: specifies virtual channel number that main or</span>
<span class="cm"> *	sub diaplsy uses.</span>
<span class="cm"> * @e_pixel_format: specifies pixel stream format for main or sub display.</span>
<span class="cm"> * @e_burst_mode: selects Burst mode in Video mode.</span>
<span class="cm"> *	in Non-burst mode, RGB data area is filled with RGB data and NULL</span>
<span class="cm"> *	packets, according to input bandwidth of RGB interface.</span>
<span class="cm"> *	In Burst mode, RGB data area is filled with RGB data only.</span>
<span class="cm"> * @e_no_data_lane: specifies data lane count to be used by Master.</span>
<span class="cm"> * @e_byte_clk: select byte clock source. (it must be DSIM_PLL_OUT_DIV8)</span>
<span class="cm"> *	DSIM_EXT_CLK_DIV8 and DSIM_EXT_CLK_BYPASSS are not supported.</span>
<span class="cm"> * @pll_stable_time: specifies the PLL Timer for stability of the ganerated</span>
<span class="cm"> *	clock(System clock cycle base)</span>
<span class="cm"> *	if the timer value goes to 0x00000000, the clock stable bit of status</span>
<span class="cm"> *	and interrupt register is set.</span>
<span class="cm"> * @esc_clk: specifies escape clock frequency for getting the escape clock</span>
<span class="cm"> *	prescaler value.</span>
<span class="cm"> * @stop_holding_cnt: specifies the interval value between transmitting</span>
<span class="cm"> *	read packet(or write &quot;set_tear_on&quot; command) and BTA request.</span>
<span class="cm"> *	after transmitting read packet or write &quot;set_tear_on&quot; command,</span>
<span class="cm"> *	BTA requests to D-PHY automatically. this counter value specifies</span>
<span class="cm"> *	the interval between them.</span>
<span class="cm"> * @bta_timeout: specifies the timer for BTA.</span>
<span class="cm"> *	this register specifies time out from BTA request to change</span>
<span class="cm"> *	the direction with respect to Tx escape clock.</span>
<span class="cm"> * @rx_timeout: specifies the timer for LP Rx mode timeout.</span>
<span class="cm"> *	this register specifies time out on how long RxValid deasserts,</span>
<span class="cm"> *	after RxLpdt asserts with respect to Tx escape clock.</span>
<span class="cm"> *	- RxValid specifies Rx data valid indicator.</span>
<span class="cm"> *	- RxLpdt specifies an indicator that D-PHY is under RxLpdt mode.</span>
<span class="cm"> *	- RxValid and RxLpdt specifies signal from D-PHY.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">mipi_dsim_config</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">auto_flush</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">eot_disable</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">auto_vertical_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">hse</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">hfp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">hbp</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">hsa</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">cmd_allow</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">mipi_dsim_interface_type</span>	<span class="n">e_interface</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">mipi_dsim_virtual_ch_no</span>	<span class="n">e_virtual_ch</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">mipi_dsim_pixel_format</span>	<span class="n">e_pixel_format</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">mipi_dsim_burst_mode_type</span>	<span class="n">e_burst_mode</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">mipi_dsim_no_of_data_lane</span>	<span class="n">e_no_data_lane</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">mipi_dsim_byte_clk_src</span>	<span class="n">e_byte_clk</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * ===========================================</span>
<span class="cm">	 * |    P    |    M    |    S    |    MHz    |</span>
<span class="cm">	 * -------------------------------------------</span>
<span class="cm">	 * |    3    |   100   |    3    |    100    |</span>
<span class="cm">	 * |    3    |   100   |    2    |    200    |</span>
<span class="cm">	 * |    3    |    63   |    1    |    252    |</span>
<span class="cm">	 * |    4    |   100   |    1    |    300    |</span>
<span class="cm">	 * |    4    |   110   |    1    |    330    |</span>
<span class="cm">	 * |   12    |   350   |    1    |    350    |</span>
<span class="cm">	 * |    3    |   100   |    1    |    400    |</span>
<span class="cm">	 * |    4    |   150   |    1    |    450    |</span>
<span class="cm">	 * |    6    |   118   |    1    |    472    |</span>
<span class="cm">	 * |	3    |   120   |    1    |    480    |</span>
<span class="cm">	 * |   12    |   250   |    0    |    500    |</span>
<span class="cm">	 * |    4    |   100   |    0    |    600    |</span>
<span class="cm">	 * |    3    |    81   |    0    |    648    |</span>
<span class="cm">	 * |    3    |    88   |    0    |    704    |</span>
<span class="cm">	 * |    3    |    90   |    0    |    720    |</span>
<span class="cm">	 * |    3    |   100   |    0    |    800    |</span>
<span class="cm">	 * |   12    |   425   |    0    |    850    |</span>
<span class="cm">	 * |    4    |   150   |    0    |    900    |</span>
<span class="cm">	 * |   12    |   475   |    0    |    950    |</span>
<span class="cm">	 * |    6    |   250   |    0    |   1000    |</span>
<span class="cm">	 * -------------------------------------------</span>
<span class="cm">	 */</span>

	<span class="cm">/*</span>
<span class="cm">	 * pms could be calculated as the following.</span>
<span class="cm">	 * M * 24 / P * 2 ^ S = MHz</span>
<span class="cm">	 */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">p</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>			<span class="n">m</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">s</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">pll_stable_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>			<span class="n">esc_clk</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">short</span>			<span class="n">stop_holding_cnt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">bta_timeout</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>			<span class="n">rx_timeout</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * struct mipi_dsim_device - global interface for mipi-dsi driver.</span>
<span class="cm"> *</span>
<span class="cm"> * @dev: driver model representation of the device.</span>
<span class="cm"> * @id: unique device id.</span>
<span class="cm"> * @clock: pointer to MIPI-DSI clock of clock framework.</span>
<span class="cm"> * @irq: interrupt number to MIPI-DSI controller.</span>
<span class="cm"> * @reg_base: base address to memory mapped SRF of MIPI-DSI controller.</span>
<span class="cm"> *	(virtual address)</span>
<span class="cm"> * @lock: the mutex protecting this data structure.</span>
<span class="cm"> * @dsim_info: infomation for configuring mipi-dsi controller.</span>
<span class="cm"> * @master_ops: callbacks to mipi-dsi operations.</span>
<span class="cm"> * @dsim_lcd_dev: pointer to activated ddi device.</span>
<span class="cm"> *	(it would be registered by mipi-dsi driver.)</span>
<span class="cm"> * @dsim_lcd_drv: pointer to activated_ddi driver.</span>
<span class="cm"> *	(it would be registered by mipi-dsi driver.)</span>
<span class="cm"> * @lcd_info: pointer to mipi_lcd_info structure.</span>
<span class="cm"> * @state: specifies status of MIPI-DSI controller.</span>
<span class="cm"> *	the status could be RESET, INIT, STOP, HSCLKEN and ULPS.</span>
<span class="cm"> * @data_lane: specifiec enabled data lane number.</span>
<span class="cm"> *	this variable would be set by driver according to e_no_data_lane</span>
<span class="cm"> *	automatically.</span>
<span class="cm"> * @e_clk_src: select byte clock source.</span>
<span class="cm"> * @pd: pointer to MIPI-DSI driver platform data.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span>			<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">int</span>				<span class="n">id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">resource</span>			<span class="o">*</span><span class="n">res</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">clk</span>			<span class="o">*</span><span class="n">clock</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">irq</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span>			<span class="o">*</span><span class="n">reg_base</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>			<span class="n">lock</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">mipi_dsim_config</span>		<span class="o">*</span><span class="n">dsim_config</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mipi_dsim_master_ops</span>	<span class="o">*</span><span class="n">master_ops</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span>	<span class="o">*</span><span class="n">dsim_lcd_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mipi_dsim_lcd_driver</span>	<span class="o">*</span><span class="n">dsim_lcd_drv</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">state</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">data_lane</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">e_clk_src</span><span class="p">;</span>
	<span class="n">bool</span>				<span class="n">suspended</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">mipi_dsim_platform_data</span>	<span class="o">*</span><span class="n">pd</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * struct mipi_dsim_platform_data - interface to platform data</span>
<span class="cm"> *	for mipi-dsi driver.</span>
<span class="cm"> *</span>
<span class="cm"> * @lcd_panel_name: specifies lcd panel name registered to mipi-dsi driver.</span>
<span class="cm"> *	lcd panel driver searched would be actived.</span>
<span class="cm"> * @dsim_config: pointer of structure for configuring mipi-dsi controller.</span>
<span class="cm"> * @enabled: indicate whether mipi controller got enabled or not.</span>
<span class="cm"> * @lcd_panel_info: pointer for lcd panel specific structure.</span>
<span class="cm"> *	this structure specifies width, height, timing and polarity and so on.</span>
<span class="cm"> * @phy_enable: pointer to a callback controlling D-PHY enable/reset</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">mipi_dsim_platform_data</span> <span class="p">{</span>
	<span class="kt">char</span>				<span class="n">lcd_panel_name</span><span class="p">[</span><span class="n">PANEL_NAME_SIZE</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">mipi_dsim_config</span>		<span class="o">*</span><span class="n">dsim_config</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>			<span class="n">enabled</span><span class="p">;</span>
	<span class="kt">void</span>				<span class="o">*</span><span class="n">lcd_panel_info</span><span class="p">;</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">phy_enable</span><span class="p">)(</span><span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">pdev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">on</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * struct mipi_dsim_master_ops - callbacks to mipi-dsi operations.</span>
<span class="cm"> *</span>
<span class="cm"> * @cmd_write: transfer command to lcd panel at LP mode.</span>
<span class="cm"> * @cmd_read: read command from rx register.</span>
<span class="cm"> * @get_dsim_frame_done: get the status that all screen data have been</span>
<span class="cm"> *	transferred to mipi-dsi.</span>
<span class="cm"> * @clear_dsim_frame_done: clear frame done status.</span>
<span class="cm"> * @get_fb_frame_done: get frame done status of display controller.</span>
<span class="cm"> * @trigger: trigger display controller.</span>
<span class="cm"> *	- this one would be used only in case of CPU mode.</span>
<span class="cm"> *  @set_early_blank_mode: set framebuffer blank mode.</span>
<span class="cm"> *	- this callback should be called prior to fb_blank() by a client driver</span>
<span class="cm"> *	only if needing.</span>
<span class="cm"> *  @set_blank_mode: set framebuffer blank mode.</span>
<span class="cm"> *	- this callback should be called after fb_blank() by a client driver</span>
<span class="cm"> *	only if needing.</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">mipi_dsim_master_ops</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">cmd_write</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">dsim</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data_id</span><span class="p">,</span>
		<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">data0</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data1</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">cmd_read</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">dsim</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data_id</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data0</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">req_size</span><span class="p">,</span> <span class="n">u8</span> <span class="o">*</span><span class="n">rx_buf</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_dsim_frame_done</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">dsim</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">clear_dsim_frame_done</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">dsim</span><span class="p">);</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_fb_frame_done</span><span class="p">)(</span><span class="k">struct</span> <span class="n">fb_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">trigger</span><span class="p">)(</span><span class="k">struct</span> <span class="n">fb_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_early_blank_mode</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">dsim</span><span class="p">,</span> <span class="kt">int</span> <span class="n">power</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_blank_mode</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">dsim</span><span class="p">,</span> <span class="kt">int</span> <span class="n">power</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * device structure for mipi-dsi based lcd panel.</span>
<span class="cm"> *</span>
<span class="cm"> * @name: name of the device to use with this device, or an</span>
<span class="cm"> *	alias for that name.</span>
<span class="cm"> * @dev: driver model representation of the device.</span>
<span class="cm"> * @id: id of device to be registered.</span>
<span class="cm"> * @bus_id: bus id for identifing connected bus</span>
<span class="cm"> *	and this bus id should be same as id of mipi_dsim_device.</span>
<span class="cm"> * @irq: irq number for signaling when framebuffer transfer of</span>
<span class="cm"> *	lcd panel module is completed.</span>
<span class="cm"> *	this irq would be used only for MIPI-DSI based CPU mode lcd panel.</span>
<span class="cm"> * @master: pointer to mipi-dsi master device object.</span>
<span class="cm"> * @platform_data: lcd panel specific platform data.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="p">{</span>
	<span class="kt">char</span>			<span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span>		<span class="n">dev</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">id</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">bus_id</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">irq</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">panel_reverse</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">mipi_dsim_device</span> <span class="o">*</span><span class="n">master</span><span class="p">;</span>
	<span class="kt">void</span>			<span class="o">*</span><span class="n">platform_data</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * driver structure for mipi-dsi based lcd panel.</span>
<span class="cm"> *</span>
<span class="cm"> * this structure should be registered by lcd panel driver.</span>
<span class="cm"> * mipi-dsi driver seeks lcd panel registered through name field</span>
<span class="cm"> * and calls these callback functions in appropriate time.</span>
<span class="cm"> *</span>
<span class="cm"> * @name: name of the driver to use with this device, or an</span>
<span class="cm"> *	alias for that name.</span>
<span class="cm"> * @id: id of driver to be registered.</span>
<span class="cm"> *	this id would be used for finding device object registered.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">mipi_dsim_lcd_driver</span> <span class="p">{</span>
	<span class="kt">char</span>			<span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">id</span><span class="p">;</span>

	<span class="kt">void</span>	<span class="p">(</span><span class="o">*</span><span class="n">power_on</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
	<span class="kt">void</span>	<span class="p">(</span><span class="o">*</span><span class="n">set_sequence</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">probe</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">remove</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">);</span>
	<span class="kt">void</span>	<span class="p">(</span><span class="o">*</span><span class="n">shutdown</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">suspend</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">resume</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span> <span class="o">*</span><span class="n">dsim_dev</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * register mipi_dsim_lcd_device to mipi-dsi master.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">exynos_mipi_dsi_register_lcd_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_device</span>
						<span class="o">*</span><span class="n">lcd_dev</span><span class="p">);</span>
<span class="cm">/**</span>
<span class="cm"> * register mipi_dsim_lcd_driver object defined by lcd panel driver</span>
<span class="cm"> * to mipi-dsi driver.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">exynos_mipi_dsi_register_lcd_driver</span><span class="p">(</span><span class="k">struct</span> <span class="n">mipi_dsim_lcd_driver</span>
						<span class="o">*</span><span class="n">lcd_drv</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* _EXYNOS_MIPI_DSIM_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
