<!DOCTYPE html>
<html><head><title>joekychen/linux » include › video › vga.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>vga.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * linux/include/video/vga.h -- standard VGA chipset interaction</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 1999 Jeff Garzik &lt;jgarzik@pobox.com&gt;</span>
<span class="cm"> * </span>
<span class="cm"> * Copyright history from vga16fb.c:</span>
<span class="cm"> *	Copyright 1999 Ben Pfaff and Petr Vandrovec</span>
<span class="cm"> *	Based on VGA info at http://www.osdever.net/FreeVGA/home.htm </span>
<span class="cm"> *	Based on VESA framebuffer (c) 1998 Gerd Knorr</span>
<span class="cm"> *</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General</span>
<span class="cm"> * Public License.  See the file COPYING in the main directory of this</span>
<span class="cm"> * archive for more details.  </span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __linux_video_vga_h__</span>
<span class="cp">#define __linux_video_vga_h__</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;asm/vga.h&gt;</span>
<span class="cp">#include &lt;asm/byteorder.h&gt;</span>


<span class="cm">/* Some of the code below is taken from SVGAlib.  The original,</span>
<span class="cm">   unmodified copyright notice for that code is below. */</span>
<span class="cm">/* VGAlib version 1.2 - (c) 1993 Tommy Frandsen                    */</span>
<span class="cm">/*                                                                 */</span>
<span class="cm">/* This library is free software; you can redistribute it and/or   */</span>
<span class="cm">/* modify it without any restrictions. This library is distributed */</span>
<span class="cm">/* in the hope that it will be useful, but without any warranty.   */</span>

<span class="cm">/* Multi-chipset support Copyright 1993 Harm Hanemaayer */</span>
<span class="cm">/* partially copyrighted (C) 1993 by Hartmut Schirmer */</span>

<span class="cm">/* VGA data register ports */</span>
<span class="cp">#define VGA_CRT_DC  	0x3D5	</span><span class="cm">/* CRT Controller Data Register - color emulation */</span><span class="cp"></span>
<span class="cp">#define VGA_CRT_DM  	0x3B5	</span><span class="cm">/* CRT Controller Data Register - mono emulation */</span><span class="cp"></span>
<span class="cp">#define VGA_ATT_R   	0x3C1	</span><span class="cm">/* Attribute Controller Data Read Register */</span><span class="cp"></span>
<span class="cp">#define VGA_ATT_W   	0x3C0	</span><span class="cm">/* Attribute Controller Data Write Register */</span><span class="cp"></span>
<span class="cp">#define VGA_GFX_D   	0x3CF	</span><span class="cm">/* Graphics Controller Data Register */</span><span class="cp"></span>
<span class="cp">#define VGA_SEQ_D   	0x3C5	</span><span class="cm">/* Sequencer Data Register */</span><span class="cp"></span>
<span class="cp">#define VGA_MIS_R   	0x3CC	</span><span class="cm">/* Misc Output Read Register */</span><span class="cp"></span>
<span class="cp">#define VGA_MIS_W   	0x3C2	</span><span class="cm">/* Misc Output Write Register */</span><span class="cp"></span>
<span class="cp">#define VGA_FTC_R	0x3CA	</span><span class="cm">/* Feature Control Read Register */</span><span class="cp"></span>
<span class="cp">#define VGA_IS1_RC  	0x3DA	</span><span class="cm">/* Input Status Register 1 - color emulation */</span><span class="cp"></span>
<span class="cp">#define VGA_IS1_RM  	0x3BA	</span><span class="cm">/* Input Status Register 1 - mono emulation */</span><span class="cp"></span>
<span class="cp">#define VGA_PEL_D   	0x3C9	</span><span class="cm">/* PEL Data Register */</span><span class="cp"></span>
<span class="cp">#define VGA_PEL_MSK 	0x3C6	</span><span class="cm">/* PEL mask register */</span><span class="cp"></span>

<span class="cm">/* EGA-specific registers */</span>
<span class="cp">#define EGA_GFX_E0	0x3CC	</span><span class="cm">/* Graphics enable processor 0 */</span><span class="cp"></span>
<span class="cp">#define EGA_GFX_E1	0x3CA	</span><span class="cm">/* Graphics enable processor 1 */</span><span class="cp"></span>

<span class="cm">/* VGA index register ports */</span>
<span class="cp">#define VGA_CRT_IC  	0x3D4	</span><span class="cm">/* CRT Controller Index - color emulation */</span><span class="cp"></span>
<span class="cp">#define VGA_CRT_IM  	0x3B4	</span><span class="cm">/* CRT Controller Index - mono emulation */</span><span class="cp"></span>
<span class="cp">#define VGA_ATT_IW  	0x3C0	</span><span class="cm">/* Attribute Controller Index &amp; Data Write Register */</span><span class="cp"></span>
<span class="cp">#define VGA_GFX_I   	0x3CE	</span><span class="cm">/* Graphics Controller Index */</span><span class="cp"></span>
<span class="cp">#define VGA_SEQ_I   	0x3C4	</span><span class="cm">/* Sequencer Index */</span><span class="cp"></span>
<span class="cp">#define VGA_PEL_IW  	0x3C8	</span><span class="cm">/* PEL Write Index */</span><span class="cp"></span>
<span class="cp">#define VGA_PEL_IR  	0x3C7	</span><span class="cm">/* PEL Read Index */</span><span class="cp"></span>

<span class="cm">/* standard VGA indexes max counts */</span>
<span class="cp">#define VGA_CRT_C   	0x19	</span><span class="cm">/* Number of CRT Controller Registers */</span><span class="cp"></span>
<span class="cp">#define VGA_ATT_C   	0x15	</span><span class="cm">/* Number of Attribute Controller Registers */</span><span class="cp"></span>
<span class="cp">#define VGA_GFX_C   	0x09	</span><span class="cm">/* Number of Graphics Controller Registers */</span><span class="cp"></span>
<span class="cp">#define VGA_SEQ_C   	0x05	</span><span class="cm">/* Number of Sequencer Registers */</span><span class="cp"></span>
<span class="cp">#define VGA_MIS_C   	0x01	</span><span class="cm">/* Number of Misc Output Register */</span><span class="cp"></span>

<span class="cm">/* VGA misc register bit masks */</span>
<span class="cp">#define VGA_MIS_COLOR		0x01</span>
<span class="cp">#define VGA_MIS_ENB_MEM_ACCESS	0x02</span>
<span class="cp">#define VGA_MIS_DCLK_28322_720	0x04</span>
<span class="cp">#define VGA_MIS_ENB_PLL_LOAD	(0x04 | 0x08)</span>
<span class="cp">#define VGA_MIS_SEL_HIGH_PAGE	0x20</span>

<span class="cm">/* VGA CRT controller register indices */</span>
<span class="cp">#define VGA_CRTC_H_TOTAL	0</span>
<span class="cp">#define VGA_CRTC_H_DISP		1</span>
<span class="cp">#define VGA_CRTC_H_BLANK_START	2</span>
<span class="cp">#define VGA_CRTC_H_BLANK_END	3</span>
<span class="cp">#define VGA_CRTC_H_SYNC_START	4</span>
<span class="cp">#define VGA_CRTC_H_SYNC_END	5</span>
<span class="cp">#define VGA_CRTC_V_TOTAL	6</span>
<span class="cp">#define VGA_CRTC_OVERFLOW	7</span>
<span class="cp">#define VGA_CRTC_PRESET_ROW	8</span>
<span class="cp">#define VGA_CRTC_MAX_SCAN	9</span>
<span class="cp">#define VGA_CRTC_CURSOR_START	0x0A</span>
<span class="cp">#define VGA_CRTC_CURSOR_END	0x0B</span>
<span class="cp">#define VGA_CRTC_START_HI	0x0C</span>
<span class="cp">#define VGA_CRTC_START_LO	0x0D</span>
<span class="cp">#define VGA_CRTC_CURSOR_HI	0x0E</span>
<span class="cp">#define VGA_CRTC_CURSOR_LO	0x0F</span>
<span class="cp">#define VGA_CRTC_V_SYNC_START	0x10</span>
<span class="cp">#define VGA_CRTC_V_SYNC_END	0x11</span>
<span class="cp">#define VGA_CRTC_V_DISP_END	0x12</span>
<span class="cp">#define VGA_CRTC_OFFSET		0x13</span>
<span class="cp">#define VGA_CRTC_UNDERLINE	0x14</span>
<span class="cp">#define VGA_CRTC_V_BLANK_START	0x15</span>
<span class="cp">#define VGA_CRTC_V_BLANK_END	0x16</span>
<span class="cp">#define VGA_CRTC_MODE		0x17</span>
<span class="cp">#define VGA_CRTC_LINE_COMPARE	0x18</span>
<span class="cp">#define VGA_CRTC_REGS		VGA_CRT_C</span>

<span class="cm">/* VGA CRT controller bit masks */</span>
<span class="cp">#define VGA_CR11_LOCK_CR0_CR7	0x80 </span><span class="cm">/* lock writes to CR0 - CR7 */</span><span class="cp"></span>
<span class="cp">#define VGA_CR17_H_V_SIGNALS_ENABLED 0x80</span>

<span class="cm">/* VGA attribute controller register indices */</span>
<span class="cp">#define VGA_ATC_PALETTE0	0x00</span>
<span class="cp">#define VGA_ATC_PALETTE1	0x01</span>
<span class="cp">#define VGA_ATC_PALETTE2	0x02</span>
<span class="cp">#define VGA_ATC_PALETTE3	0x03</span>
<span class="cp">#define VGA_ATC_PALETTE4	0x04</span>
<span class="cp">#define VGA_ATC_PALETTE5	0x05</span>
<span class="cp">#define VGA_ATC_PALETTE6	0x06</span>
<span class="cp">#define VGA_ATC_PALETTE7	0x07</span>
<span class="cp">#define VGA_ATC_PALETTE8	0x08</span>
<span class="cp">#define VGA_ATC_PALETTE9	0x09</span>
<span class="cp">#define VGA_ATC_PALETTEA	0x0A</span>
<span class="cp">#define VGA_ATC_PALETTEB	0x0B</span>
<span class="cp">#define VGA_ATC_PALETTEC	0x0C</span>
<span class="cp">#define VGA_ATC_PALETTED	0x0D</span>
<span class="cp">#define VGA_ATC_PALETTEE	0x0E</span>
<span class="cp">#define VGA_ATC_PALETTEF	0x0F</span>
<span class="cp">#define VGA_ATC_MODE		0x10</span>
<span class="cp">#define VGA_ATC_OVERSCAN	0x11</span>
<span class="cp">#define VGA_ATC_PLANE_ENABLE	0x12</span>
<span class="cp">#define VGA_ATC_PEL		0x13</span>
<span class="cp">#define VGA_ATC_COLOR_PAGE	0x14</span>

<span class="cp">#define VGA_AR_ENABLE_DISPLAY	0x20</span>

<span class="cm">/* VGA sequencer register indices */</span>
<span class="cp">#define VGA_SEQ_RESET		0x00</span>
<span class="cp">#define VGA_SEQ_CLOCK_MODE	0x01</span>
<span class="cp">#define VGA_SEQ_PLANE_WRITE	0x02</span>
<span class="cp">#define VGA_SEQ_CHARACTER_MAP	0x03</span>
<span class="cp">#define VGA_SEQ_MEMORY_MODE	0x04</span>

<span class="cm">/* VGA sequencer register bit masks */</span>
<span class="cp">#define VGA_SR01_CHAR_CLK_8DOTS	0x01 </span><span class="cm">/* bit 0: character clocks 8 dots wide are generated */</span><span class="cp"></span>
<span class="cp">#define VGA_SR01_SCREEN_OFF	0x20 </span><span class="cm">/* bit 5: Screen is off */</span><span class="cp"></span>
<span class="cp">#define VGA_SR02_ALL_PLANES	0x0F </span><span class="cm">/* bits 3-0: enable access to all planes */</span><span class="cp"></span>
<span class="cp">#define VGA_SR04_EXT_MEM	0x02 </span><span class="cm">/* bit 1: allows complete mem access to 256K */</span><span class="cp"></span>
<span class="cp">#define VGA_SR04_SEQ_MODE	0x04 </span><span class="cm">/* bit 2: directs system to use a sequential addressing mode */</span><span class="cp"></span>
<span class="cp">#define VGA_SR04_CHN_4M		0x08 </span><span class="cm">/* bit 3: selects modulo 4 addressing for CPU access to display memory */</span><span class="cp"></span>

<span class="cm">/* VGA graphics controller register indices */</span>
<span class="cp">#define VGA_GFX_SR_VALUE	0x00</span>
<span class="cp">#define VGA_GFX_SR_ENABLE	0x01</span>
<span class="cp">#define VGA_GFX_COMPARE_VALUE	0x02</span>
<span class="cp">#define VGA_GFX_DATA_ROTATE	0x03</span>
<span class="cp">#define VGA_GFX_PLANE_READ	0x04</span>
<span class="cp">#define VGA_GFX_MODE		0x05</span>
<span class="cp">#define VGA_GFX_MISC		0x06</span>
<span class="cp">#define VGA_GFX_COMPARE_MASK	0x07</span>
<span class="cp">#define VGA_GFX_BIT_MASK	0x08</span>

<span class="cm">/* VGA graphics controller bit masks */</span>
<span class="cp">#define VGA_GR06_GRAPHICS_MODE	0x01</span>

<span class="cm">/* macro for composing an 8-bit VGA register index and value</span>
<span class="cm"> * into a single 16-bit quantity */</span>
<span class="cp">#define VGA_OUT16VAL(v, r)       (((v) &lt;&lt; 8) | (r))</span>

<span class="cm">/* decide whether we should enable the faster 16-bit VGA register writes */</span>
<span class="cp">#ifdef __LITTLE_ENDIAN</span>
<span class="cp">#define VGA_OUTW_WRITE</span>
<span class="cp">#endif</span>

<span class="cm">/* VGA State Save and Restore */</span>
<span class="cp">#define VGA_SAVE_FONT0 1  </span><span class="cm">/* save/restore plane 2 fonts	  */</span><span class="cp"></span>
<span class="cp">#define VGA_SAVE_FONT1 2  </span><span class="cm">/* save/restore plane 3 fonts   */</span><span class="cp"></span>
<span class="cp">#define VGA_SAVE_TEXT  4  </span><span class="cm">/* save/restore plane 0/1 fonts */</span><span class="cp"></span>
<span class="cp">#define VGA_SAVE_FONTS 7  </span><span class="cm">/* save/restore all fonts	  */</span><span class="cp"></span>
<span class="cp">#define VGA_SAVE_MODE  8  </span><span class="cm">/* save/restore video mode 	  */</span><span class="cp"></span>
<span class="cp">#define VGA_SAVE_CMAP  16 </span><span class="cm">/* save/restore color map/DAC   */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">vgastate</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">vgabase</span><span class="p">;</span>	<span class="cm">/* mmio base, if supported 		   */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">membase</span><span class="p">;</span>	<span class="cm">/* VGA window base, 0 for default - 0xA000 */</span>
	<span class="n">__u32</span> <span class="n">memsize</span><span class="p">;</span>		<span class="cm">/* VGA window size, 0 for default 64K	   */</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>		<span class="cm">/* what state[s] to save (see VGA_SAVE_*)  */</span>
	<span class="n">__u32</span> <span class="n">depth</span><span class="p">;</span>		<span class="cm">/* current fb depth, not important	   */</span>
	<span class="n">__u32</span> <span class="n">num_attr</span><span class="p">;</span>		<span class="cm">/* number of att registers, 0 for default  */</span>
	<span class="n">__u32</span> <span class="n">num_crtc</span><span class="p">;</span>		<span class="cm">/* number of crt registers, 0 for default  */</span>
	<span class="n">__u32</span> <span class="n">num_gfx</span><span class="p">;</span>		<span class="cm">/* number of gfx registers, 0 for default  */</span>
	<span class="n">__u32</span> <span class="n">num_seq</span><span class="p">;</span>		<span class="cm">/* number of seq registers, 0 for default  */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">vidstate</span><span class="p">;</span>
<span class="p">};</span>	

<span class="k">extern</span> <span class="kt">int</span> <span class="n">save_vga</span><span class="p">(</span><span class="k">struct</span> <span class="n">vgastate</span> <span class="o">*</span><span class="n">state</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">restore_vga</span><span class="p">(</span><span class="k">struct</span> <span class="n">vgastate</span> <span class="o">*</span><span class="n">state</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * generic VGA port read/write</span>
<span class="cm"> */</span>
 
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_io_r</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">inb_p</span><span class="p">(</span><span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_io_w</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">outb_p</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_io_w_fast</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span>
				  <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">outw</span><span class="p">(</span><span class="n">VGA_OUT16VAL</span> <span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">reg</span><span class="p">),</span> <span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_mm_r</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">readb</span> <span class="p">(</span><span class="n">regbase</span> <span class="o">+</span> <span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_mm_w</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writeb</span> <span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">regbase</span> <span class="o">+</span> <span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_mm_w_fast</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">,</span>
				  <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">writew</span> <span class="p">(</span><span class="n">VGA_OUT16VAL</span> <span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">reg</span><span class="p">),</span> <span class="n">regbase</span> <span class="o">+</span> <span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_r</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">regbase</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">vga_mm_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">port</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">vga_io_r</span> <span class="p">(</span><span class="n">port</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_w</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">regbase</span><span class="p">)</span>
		<span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">vga_io_w</span> <span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>


<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_w_fast</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">port</span><span class="p">,</span>
			       <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">regbase</span><span class="p">)</span>
		<span class="n">vga_mm_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="n">vga_io_w_fast</span> <span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * VGA CRTC register read/write</span>
<span class="cm"> */</span>
 
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_rcrt</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_DC</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_wcrt</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_DC</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_io_rcrt</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_io_r</span> <span class="p">(</span><span class="n">VGA_CRT_DC</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_io_wcrt</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_io_w_fast</span> <span class="p">(</span><span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_CRT_DC</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_mm_rcrt</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_mm_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_DC</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_mm_wcrt</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_mm_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_IC</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_CRT_DC</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * VGA sequencer register read/write</span>
<span class="cm"> */</span>
 
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_rseq</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_D</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_wseq</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_D</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_io_rseq</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_io_r</span> <span class="p">(</span><span class="n">VGA_SEQ_D</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_io_wseq</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_io_w_fast</span> <span class="p">(</span><span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_SEQ_D</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_mm_rseq</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_mm_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_D</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_mm_wseq</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_mm_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_SEQ_D</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * VGA graphics controller register read/write</span>
<span class="cm"> */</span>
 
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_rgfx</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_D</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_wgfx</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_D</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_io_rgfx</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_io_r</span> <span class="p">(</span><span class="n">VGA_GFX_D</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_io_wgfx</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_io_w_fast</span> <span class="p">(</span><span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_GFX_D</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_mm_rgfx</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_mm_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_D</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_mm_wgfx</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#ifdef VGA_OUTW_WRITE</span>
	<span class="n">vga_mm_w_fast</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#else</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_I</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_GFX_D</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* VGA_OUTW_WRITE */</span><span class="cp"></span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * VGA attribute controller register read/write</span>
<span class="cm"> */</span>
 
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_rattr</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_IW</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_R</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_wattr</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_IW</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_W</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_io_rattr</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_ATT_IW</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_io_r</span> <span class="p">(</span><span class="n">VGA_ATT_R</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_io_wattr</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_ATT_IW</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_io_w</span> <span class="p">(</span><span class="n">VGA_ATT_W</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">vga_mm_rattr</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_IW</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">vga_mm_r</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_R</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">vga_mm_wattr</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">regbase</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_IW</span><span class="p">,</span> <span class="n">reg</span><span class="p">);</span>
        <span class="n">vga_mm_w</span> <span class="p">(</span><span class="n">regbase</span><span class="p">,</span> <span class="n">VGA_ATT_W</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* __linux_video_vga_h__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
