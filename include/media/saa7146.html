<!DOCTYPE html>
<html><head><title>joekychen/linux » include › media › saa7146.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>saa7146.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __SAA7146__</span>
<span class="cp">#define __SAA7146__</span>

<span class="cp">#include &lt;linux/delay.h&gt;	</span><span class="cm">/* for delay-stuff */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/slab.h&gt;		</span><span class="cm">/* for kmalloc/kfree */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/pci.h&gt;		</span><span class="cm">/* for pci-config-stuff, vendor ids etc. */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/init.h&gt;		</span><span class="cm">/* for &quot;__init&quot; */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/interrupt.h&gt;	</span><span class="cm">/* for IMMEDIATE_BH */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/kmod.h&gt;		</span><span class="cm">/* for kernel module loader */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/i2c.h&gt;		</span><span class="cm">/* for i2c subsystem */</span><span class="cp"></span>
<span class="cp">#include &lt;asm/io.h&gt;		</span><span class="cm">/* for accessing devices */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/stringify.h&gt;</span>
<span class="cp">#include &lt;linux/mutex.h&gt;</span>
<span class="cp">#include &lt;linux/scatterlist.h&gt;</span>
<span class="cp">#include &lt;media/v4l2-device.h&gt;</span>
<span class="cp">#include &lt;media/v4l2-ctrls.h&gt;</span>

<span class="cp">#include &lt;linux/vmalloc.h&gt;	</span><span class="cm">/* for vmalloc() */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/mm.h&gt;		</span><span class="cm">/* for vmalloc_to_page() */</span><span class="cp"></span>

<span class="cp">#define saa7146_write(sxy,adr,dat)    writel((dat),(sxy-&gt;mem+(adr)))</span>
<span class="cp">#define saa7146_read(sxy,adr)         readl(sxy-&gt;mem+(adr))</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">saa7146_debug</span><span class="p">;</span>

<span class="cp">#ifndef DEBUG_VARIABLE</span>
	<span class="cp">#define DEBUG_VARIABLE saa7146_debug</span>
<span class="cp">#endif</span>

<span class="cp">#define ERR(fmt, ...)	pr_err(&quot;%s: &quot; fmt, __func__, ##__VA_ARGS__)</span>

<span class="cp">#define _DBG(mask, fmt, ...)						\</span>
<span class="cp">do {									\</span>
<span class="cp">	if (DEBUG_VARIABLE &amp; mask)					\</span>
<span class="cp">		pr_debug(&quot;%s(): &quot; fmt, __func__, ##__VA_ARGS__);	\</span>
<span class="cp">} while (0)</span>

<span class="cm">/* simple debug messages */</span>
<span class="cp">#define DEB_S(fmt, ...)		_DBG(0x01, fmt, ##__VA_ARGS__)</span>
<span class="cm">/* more detailed debug messages */</span>
<span class="cp">#define DEB_D(fmt, ...)		_DBG(0x02, fmt, ##__VA_ARGS__)</span>
<span class="cm">/* print enter and exit of functions */</span>
<span class="cp">#define DEB_EE(fmt, ...)	_DBG(0x04, fmt, ##__VA_ARGS__)</span>
<span class="cm">/* i2c debug messages */</span>
<span class="cp">#define DEB_I2C(fmt, ...)	_DBG(0x08, fmt, ##__VA_ARGS__)</span>
<span class="cm">/* vbi debug messages */</span>
<span class="cp">#define DEB_VBI(fmt, ...)	_DBG(0x10, fmt, ##__VA_ARGS__)</span>
<span class="cm">/* interrupt debug messages */</span>
<span class="cp">#define DEB_INT(fmt, ...)	_DBG(0x20, fmt, ##__VA_ARGS__)</span>
<span class="cm">/* capture debug messages */</span>
<span class="cp">#define DEB_CAP(fmt, ...)	_DBG(0x40, fmt, ##__VA_ARGS__)</span>

<span class="cp">#define SAA7146_ISR_CLEAR(x,y) \</span>
<span class="cp">	saa7146_write(x, ISR, (y));</span>

<span class="k">struct</span> <span class="n">module</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">saa7146_dev</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">saa7146_extension</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">saa7146_vv</span><span class="p">;</span>

<span class="cm">/* saa7146 page table */</span>
<span class="k">struct</span> <span class="n">saa7146_pgtable</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">size</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="o">*</span><span class="n">cpu</span><span class="p">;</span>
	<span class="n">dma_addr_t</span>	<span class="n">dma</span><span class="p">;</span>
	<span class="cm">/* used for offsets for u,v planes for planar capture modes */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">offset</span><span class="p">;</span>
	<span class="cm">/* used for custom pagetables (used for example by budget dvb cards) */</span>
	<span class="k">struct</span> <span class="n">scatterlist</span> <span class="o">*</span><span class="n">slist</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">nents</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7146_pci_extension_data</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">saa7146_extension</span> <span class="o">*</span><span class="n">ext</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">ext_priv</span><span class="p">;</span>			<span class="cm">/* most likely a name string */</span>
<span class="p">};</span>

<span class="cp">#define MAKE_EXTENSION_PCI(x_var, x_vendor, x_device)		\</span>
<span class="cp">	{							\</span>
<span class="cp">		.vendor    = PCI_VENDOR_ID_PHILIPS,		\</span>
<span class="cp">		.device	   = PCI_DEVICE_ID_PHILIPS_SAA7146,	\</span>
<span class="cp">		.subvendor = x_vendor,				\</span>
<span class="cp">		.subdevice = x_device,				\</span>
<span class="cp">		.driver_data = (unsigned long)&amp; x_var,		\</span>
<span class="cp">	}</span>

<span class="k">struct</span> <span class="n">saa7146_extension</span>
<span class="p">{</span>
	<span class="kt">char</span>	<span class="n">name</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* name of the device */</span>
<span class="cp">#define SAA7146_USE_I2C_IRQ	0x1</span>
<span class="cp">#define SAA7146_I2C_SHORT_DELAY	0x2</span>
	<span class="kt">int</span>	<span class="n">flags</span><span class="p">;</span>

	<span class="cm">/* pairs of subvendor and subdevice ids for</span>
<span class="cm">	   supported devices, last entry 0xffff, 0xfff */</span>
	<span class="k">struct</span> <span class="n">module</span> <span class="o">*</span><span class="n">module</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_driver</span> <span class="n">driver</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pci_device_id</span> <span class="o">*</span><span class="n">pci_tbl</span><span class="p">;</span>

	<span class="cm">/* extension functions */</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">probe</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">attach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_pci_extension_data</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">detach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7146_dev</span><span class="o">*</span><span class="p">);</span>

	<span class="n">u32</span>	<span class="n">irq_mask</span><span class="p">;</span>	<span class="cm">/* mask to indicate, which irq-events are handled by the extension */</span>
	<span class="kt">void</span>	<span class="p">(</span><span class="o">*</span><span class="n">irq_func</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7146_dev</span><span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="o">*</span> <span class="n">irq_mask</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7146_dma</span>
<span class="p">{</span>
	<span class="n">dma_addr_t</span>	<span class="n">dma_handle</span><span class="p">;</span>
	<span class="n">__le32</span>		<span class="o">*</span><span class="n">cpu_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">saa7146_dev</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">module</span>			<span class="o">*</span><span class="n">module</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">list_head</span>		<span class="n">item</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">v4l2_device</span> 		<span class="n">v4l2_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">v4l2_ctrl_handler</span>	<span class="n">ctrl_handler</span><span class="p">;</span>

	<span class="cm">/* different device locks */</span>
	<span class="n">spinlock_t</span>			<span class="n">slock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>			<span class="n">v4l2_lock</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">char</span>			<span class="n">__iomem</span> <span class="o">*</span><span class="n">mem</span><span class="p">;</span>		<span class="cm">/* pointer to mapped IO memory */</span>
	<span class="n">u32</span>				<span class="n">revision</span><span class="p">;</span>	<span class="cm">/* chip revision; needed for bug-workarounds*/</span>

	<span class="cm">/* pci-device &amp; irq stuff*/</span>
	<span class="kt">char</span>				<span class="n">name</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">pci_dev</span>			<span class="o">*</span><span class="n">pci</span><span class="p">;</span>
	<span class="n">u32</span>				<span class="n">int_todo</span><span class="p">;</span>
	<span class="n">spinlock_t</span>			<span class="n">int_slock</span><span class="p">;</span>

	<span class="cm">/* extension handling */</span>
	<span class="k">struct</span> <span class="n">saa7146_extension</span>	<span class="o">*</span><span class="n">ext</span><span class="p">;</span>		<span class="cm">/* indicates if handled by extension */</span>
	<span class="kt">void</span>				<span class="o">*</span><span class="n">ext_priv</span><span class="p">;</span>	<span class="cm">/* pointer for extension private use (most likely some private data) */</span>
	<span class="k">struct</span> <span class="n">saa7146_ext_vv</span>		<span class="o">*</span><span class="n">ext_vv_data</span><span class="p">;</span>

	<span class="cm">/* per device video/vbi informations (if available) */</span>
	<span class="k">struct</span> <span class="n">saa7146_vv</span>	<span class="o">*</span><span class="n">vv_data</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">vv_callback</span><span class="p">)(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">status</span><span class="p">);</span>

	<span class="cm">/* i2c-stuff */</span>
	<span class="k">struct</span> <span class="n">mutex</span>			<span class="n">i2c_lock</span><span class="p">;</span>

	<span class="n">u32</span>				<span class="n">i2c_bitrate</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7146_dma</span>		<span class="n">d_i2c</span><span class="p">;</span>	<span class="cm">/* pointer to i2c memory */</span>
	<span class="n">wait_queue_head_t</span>		<span class="n">i2c_wq</span><span class="p">;</span>
	<span class="kt">int</span>				<span class="n">i2c_op</span><span class="p">;</span>

	<span class="cm">/* memories */</span>
	<span class="k">struct</span> <span class="n">saa7146_dma</span>		<span class="n">d_rps0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">saa7146_dma</span>		<span class="n">d_rps1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="nf">to_saa7146_dev</span><span class="p">(</span><span class="k">struct</span> <span class="n">v4l2_device</span> <span class="o">*</span><span class="n">v4l2_dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">container_of</span><span class="p">(</span><span class="n">v4l2_dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_dev</span><span class="p">,</span> <span class="n">v4l2_dev</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* from saa7146_i2c.c */</span>
<span class="kt">int</span> <span class="n">saa7146_i2c_adapter_prepare</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">i2c_adapter</span> <span class="o">*</span><span class="n">i2c_adapter</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bitrate</span><span class="p">);</span>

<span class="cm">/* from saa7146_core.c */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">list_head</span> <span class="n">saa7146_devices</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mutex</span> <span class="n">saa7146_devices_lock</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">saa7146_register_extension</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_extension</span><span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7146_unregister_extension</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_extension</span><span class="o">*</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">saa7146_format</span><span class="o">*</span> <span class="n">saa7146_format_by_fourcc</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fourcc</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7146_pgtable_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7146_pgtable_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7146_pgtable_build_single</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">,</span> <span class="k">struct</span> <span class="n">scatterlist</span> <span class="o">*</span><span class="n">list</span><span class="p">,</span> <span class="kt">int</span> <span class="n">length</span> <span class="p">);</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">saa7146_vmalloc_build_pgtable</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="kt">long</span> <span class="n">length</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7146_vfree_destroy_pgtable</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">mem</span><span class="p">,</span> <span class="k">struct</span> <span class="n">saa7146_pgtable</span> <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">saa7146_setgpio</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">port</span><span class="p">,</span> <span class="n">u32</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">saa7146_wait_for_debi_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nobusyloop</span><span class="p">);</span>

<span class="cm">/* some memory sizes */</span>
<span class="cp">#define SAA7146_I2C_MEM		( 1*PAGE_SIZE)</span>
<span class="cp">#define SAA7146_RPS_MEM		( 1*PAGE_SIZE)</span>

<span class="cm">/* some i2c constants */</span>
<span class="cp">#define SAA7146_I2C_TIMEOUT	100	</span><span class="cm">/* i2c-timeout-value in ms */</span><span class="cp"></span>
<span class="cp">#define SAA7146_I2C_RETRIES	3	</span><span class="cm">/* how many times shall we retry an i2c-operation? */</span><span class="cp"></span>
<span class="cp">#define SAA7146_I2C_DELAY	5	</span><span class="cm">/* time we wait after certain i2c-operations */</span><span class="cp"></span>

<span class="cm">/* unsorted defines */</span>
<span class="cp">#define ME1    0x0000000800</span>
<span class="cp">#define PV1    0x0000000008</span>

<span class="cm">/* gpio defines */</span>
<span class="cp">#define SAA7146_GPIO_INPUT 0x00</span>
<span class="cp">#define SAA7146_GPIO_IRQHI 0x10</span>
<span class="cp">#define SAA7146_GPIO_IRQLO 0x20</span>
<span class="cp">#define SAA7146_GPIO_IRQHL 0x30</span>
<span class="cp">#define SAA7146_GPIO_OUTLO 0x40</span>
<span class="cp">#define SAA7146_GPIO_OUTHI 0x50</span>

<span class="cm">/* debi defines */</span>
<span class="cp">#define DEBINOSWAP 0x000e0000</span>

<span class="cm">/* define for the register programming sequencer (rps) */</span>
<span class="cp">#define CMD_NOP		0x00000000  </span><span class="cm">/* No operation */</span><span class="cp"></span>
<span class="cp">#define CMD_CLR_EVENT	0x00000000  </span><span class="cm">/* Clear event */</span><span class="cp"></span>
<span class="cp">#define CMD_SET_EVENT	0x10000000  </span><span class="cm">/* Set signal event */</span><span class="cp"></span>
<span class="cp">#define CMD_PAUSE	0x20000000  </span><span class="cm">/* Pause */</span><span class="cp"></span>
<span class="cp">#define CMD_CHECK_LATE	0x30000000  </span><span class="cm">/* Check late */</span><span class="cp"></span>
<span class="cp">#define CMD_UPLOAD	0x40000000  </span><span class="cm">/* Upload */</span><span class="cp"></span>
<span class="cp">#define CMD_STOP	0x50000000  </span><span class="cm">/* Stop */</span><span class="cp"></span>
<span class="cp">#define CMD_INTERRUPT	0x60000000  </span><span class="cm">/* Interrupt */</span><span class="cp"></span>
<span class="cp">#define CMD_JUMP	0x80000000  </span><span class="cm">/* Jump */</span><span class="cp"></span>
<span class="cp">#define CMD_WR_REG	0x90000000  </span><span class="cm">/* Write (load) register */</span><span class="cp"></span>
<span class="cp">#define CMD_RD_REG	0xa0000000  </span><span class="cm">/* Read (store) register */</span><span class="cp"></span>
<span class="cp">#define CMD_WR_REG_MASK	0xc0000000  </span><span class="cm">/* Write register with mask */</span><span class="cp"></span>

<span class="cp">#define CMD_OAN		MASK_27</span>
<span class="cp">#define CMD_INV		MASK_26</span>
<span class="cp">#define CMD_SIG4	MASK_25</span>
<span class="cp">#define CMD_SIG3	MASK_24</span>
<span class="cp">#define CMD_SIG2	MASK_23</span>
<span class="cp">#define CMD_SIG1	MASK_22</span>
<span class="cp">#define CMD_SIG0	MASK_21</span>
<span class="cp">#define CMD_O_FID_B	MASK_14</span>
<span class="cp">#define CMD_E_FID_B	MASK_13</span>
<span class="cp">#define CMD_O_FID_A	MASK_12</span>
<span class="cp">#define CMD_E_FID_A	MASK_11</span>

<span class="cm">/* some events and command modifiers for rps1 squarewave generator */</span>
<span class="cp">#define EVT_HS          (1&lt;&lt;15)     </span><span class="c1">// Source Line Threshold reached</span>
<span class="cp">#define EVT_VBI_B       (1&lt;&lt;9)      </span><span class="c1">// VSYNC Event</span>
<span class="cp">#define RPS_OAN         (1&lt;&lt;27)     </span><span class="c1">// 1: OR events, 0: AND events</span>
<span class="cp">#define RPS_INV         (1&lt;&lt;26)     </span><span class="c1">// Invert (compound) event</span>
<span class="cp">#define GPIO3_MSK       0xFF000000  </span><span class="c1">// GPIO #3 control bits</span>

<span class="cm">/* Bit mask constants */</span>
<span class="cp">#define MASK_00   0x00000001    </span><span class="cm">/* Mask value for bit 0 */</span><span class="cp"></span>
<span class="cp">#define MASK_01   0x00000002    </span><span class="cm">/* Mask value for bit 1 */</span><span class="cp"></span>
<span class="cp">#define MASK_02   0x00000004    </span><span class="cm">/* Mask value for bit 2 */</span><span class="cp"></span>
<span class="cp">#define MASK_03   0x00000008    </span><span class="cm">/* Mask value for bit 3 */</span><span class="cp"></span>
<span class="cp">#define MASK_04   0x00000010    </span><span class="cm">/* Mask value for bit 4 */</span><span class="cp"></span>
<span class="cp">#define MASK_05   0x00000020    </span><span class="cm">/* Mask value for bit 5 */</span><span class="cp"></span>
<span class="cp">#define MASK_06   0x00000040    </span><span class="cm">/* Mask value for bit 6 */</span><span class="cp"></span>
<span class="cp">#define MASK_07   0x00000080    </span><span class="cm">/* Mask value for bit 7 */</span><span class="cp"></span>
<span class="cp">#define MASK_08   0x00000100    </span><span class="cm">/* Mask value for bit 8 */</span><span class="cp"></span>
<span class="cp">#define MASK_09   0x00000200    </span><span class="cm">/* Mask value for bit 9 */</span><span class="cp"></span>
<span class="cp">#define MASK_10   0x00000400    </span><span class="cm">/* Mask value for bit 10 */</span><span class="cp"></span>
<span class="cp">#define MASK_11   0x00000800    </span><span class="cm">/* Mask value for bit 11 */</span><span class="cp"></span>
<span class="cp">#define MASK_12   0x00001000    </span><span class="cm">/* Mask value for bit 12 */</span><span class="cp"></span>
<span class="cp">#define MASK_13   0x00002000    </span><span class="cm">/* Mask value for bit 13 */</span><span class="cp"></span>
<span class="cp">#define MASK_14   0x00004000    </span><span class="cm">/* Mask value for bit 14 */</span><span class="cp"></span>
<span class="cp">#define MASK_15   0x00008000    </span><span class="cm">/* Mask value for bit 15 */</span><span class="cp"></span>
<span class="cp">#define MASK_16   0x00010000    </span><span class="cm">/* Mask value for bit 16 */</span><span class="cp"></span>
<span class="cp">#define MASK_17   0x00020000    </span><span class="cm">/* Mask value for bit 17 */</span><span class="cp"></span>
<span class="cp">#define MASK_18   0x00040000    </span><span class="cm">/* Mask value for bit 18 */</span><span class="cp"></span>
<span class="cp">#define MASK_19   0x00080000    </span><span class="cm">/* Mask value for bit 19 */</span><span class="cp"></span>
<span class="cp">#define MASK_20   0x00100000    </span><span class="cm">/* Mask value for bit 20 */</span><span class="cp"></span>
<span class="cp">#define MASK_21   0x00200000    </span><span class="cm">/* Mask value for bit 21 */</span><span class="cp"></span>
<span class="cp">#define MASK_22   0x00400000    </span><span class="cm">/* Mask value for bit 22 */</span><span class="cp"></span>
<span class="cp">#define MASK_23   0x00800000    </span><span class="cm">/* Mask value for bit 23 */</span><span class="cp"></span>
<span class="cp">#define MASK_24   0x01000000    </span><span class="cm">/* Mask value for bit 24 */</span><span class="cp"></span>
<span class="cp">#define MASK_25   0x02000000    </span><span class="cm">/* Mask value for bit 25 */</span><span class="cp"></span>
<span class="cp">#define MASK_26   0x04000000    </span><span class="cm">/* Mask value for bit 26 */</span><span class="cp"></span>
<span class="cp">#define MASK_27   0x08000000    </span><span class="cm">/* Mask value for bit 27 */</span><span class="cp"></span>
<span class="cp">#define MASK_28   0x10000000    </span><span class="cm">/* Mask value for bit 28 */</span><span class="cp"></span>
<span class="cp">#define MASK_29   0x20000000    </span><span class="cm">/* Mask value for bit 29 */</span><span class="cp"></span>
<span class="cp">#define MASK_30   0x40000000    </span><span class="cm">/* Mask value for bit 30 */</span><span class="cp"></span>
<span class="cp">#define MASK_31   0x80000000    </span><span class="cm">/* Mask value for bit 31 */</span><span class="cp"></span>

<span class="cp">#define MASK_B0   0x000000ff    </span><span class="cm">/* Mask value for byte 0 */</span><span class="cp"></span>
<span class="cp">#define MASK_B1   0x0000ff00    </span><span class="cm">/* Mask value for byte 1 */</span><span class="cp"></span>
<span class="cp">#define MASK_B2   0x00ff0000    </span><span class="cm">/* Mask value for byte 2 */</span><span class="cp"></span>
<span class="cp">#define MASK_B3   0xff000000    </span><span class="cm">/* Mask value for byte 3 */</span><span class="cp"></span>

<span class="cp">#define MASK_W0   0x0000ffff    </span><span class="cm">/* Mask value for word 0 */</span><span class="cp"></span>
<span class="cp">#define MASK_W1   0xffff0000    </span><span class="cm">/* Mask value for word 1 */</span><span class="cp"></span>

<span class="cp">#define MASK_PA   0xfffffffc    </span><span class="cm">/* Mask value for physical address */</span><span class="cp"></span>
<span class="cp">#define MASK_PR   0xfffffffe	</span><span class="cm">/* Mask value for protection register */</span><span class="cp"></span>
<span class="cp">#define MASK_ER   0xffffffff    </span><span class="cm">/* Mask value for the entire register */</span><span class="cp"></span>

<span class="cp">#define MASK_NONE 0x00000000    </span><span class="cm">/* No mask */</span><span class="cp"></span>

<span class="cm">/* register aliases */</span>
<span class="cp">#define BASE_ODD1         0x00  </span><span class="cm">/* Video DMA 1 registers  */</span><span class="cp"></span>
<span class="cp">#define BASE_EVEN1        0x04</span>
<span class="cp">#define PROT_ADDR1        0x08</span>
<span class="cp">#define PITCH1            0x0C</span>
<span class="cp">#define BASE_PAGE1        0x10  </span><span class="cm">/* Video DMA 1 base page */</span><span class="cp"></span>
<span class="cp">#define NUM_LINE_BYTE1    0x14</span>

<span class="cp">#define BASE_ODD2         0x18  </span><span class="cm">/* Video DMA 2 registers */</span><span class="cp"></span>
<span class="cp">#define BASE_EVEN2        0x1C</span>
<span class="cp">#define PROT_ADDR2        0x20</span>
<span class="cp">#define PITCH2            0x24</span>
<span class="cp">#define BASE_PAGE2        0x28  </span><span class="cm">/* Video DMA 2 base page */</span><span class="cp"></span>
<span class="cp">#define NUM_LINE_BYTE2    0x2C</span>

<span class="cp">#define BASE_ODD3         0x30  </span><span class="cm">/* Video DMA 3 registers */</span><span class="cp"></span>
<span class="cp">#define BASE_EVEN3        0x34</span>
<span class="cp">#define PROT_ADDR3        0x38</span>
<span class="cp">#define PITCH3            0x3C</span>
<span class="cp">#define BASE_PAGE3        0x40  </span><span class="cm">/* Video DMA 3 base page */</span><span class="cp"></span>
<span class="cp">#define NUM_LINE_BYTE3    0x44</span>

<span class="cp">#define PCI_BT_V1         0x48  </span><span class="cm">/* Video/FIFO 1 */</span><span class="cp"></span>
<span class="cp">#define PCI_BT_V2         0x49  </span><span class="cm">/* Video/FIFO 2 */</span><span class="cp"></span>
<span class="cp">#define PCI_BT_V3         0x4A  </span><span class="cm">/* Video/FIFO 3 */</span><span class="cp"></span>
<span class="cp">#define PCI_BT_DEBI       0x4B  </span><span class="cm">/* DEBI */</span><span class="cp"></span>
<span class="cp">#define PCI_BT_A          0x4C  </span><span class="cm">/* Audio */</span><span class="cp"></span>

<span class="cp">#define DD1_INIT          0x50  </span><span class="cm">/* Init setting of DD1 interface */</span><span class="cp"></span>

<span class="cp">#define DD1_STREAM_B      0x54  </span><span class="cm">/* DD1 B video data stream handling */</span><span class="cp"></span>
<span class="cp">#define DD1_STREAM_A      0x56  </span><span class="cm">/* DD1 A video data stream handling */</span><span class="cp"></span>

<span class="cp">#define BRS_CTRL          0x58  </span><span class="cm">/* BRS control register */</span><span class="cp"></span>
<span class="cp">#define HPS_CTRL          0x5C  </span><span class="cm">/* HPS control register */</span><span class="cp"></span>
<span class="cp">#define HPS_V_SCALE       0x60  </span><span class="cm">/* HPS vertical scale */</span><span class="cp"></span>
<span class="cp">#define HPS_V_GAIN        0x64  </span><span class="cm">/* HPS vertical ACL and gain */</span><span class="cp"></span>
<span class="cp">#define HPS_H_PRESCALE    0x68  </span><span class="cm">/* HPS horizontal prescale   */</span><span class="cp"></span>
<span class="cp">#define HPS_H_SCALE       0x6C  </span><span class="cm">/* HPS horizontal scale */</span><span class="cp"></span>
<span class="cp">#define BCS_CTRL          0x70  </span><span class="cm">/* BCS control */</span><span class="cp"></span>
<span class="cp">#define CHROMA_KEY_RANGE  0x74</span>
<span class="cp">#define CLIP_FORMAT_CTRL  0x78  </span><span class="cm">/* HPS outputs formats &amp; clipping */</span><span class="cp"></span>

<span class="cp">#define DEBI_CONFIG       0x7C</span>
<span class="cp">#define DEBI_COMMAND      0x80</span>
<span class="cp">#define DEBI_PAGE         0x84</span>
<span class="cp">#define DEBI_AD           0x88</span>

<span class="cp">#define I2C_TRANSFER      0x8C</span>
<span class="cp">#define I2C_STATUS        0x90</span>

<span class="cp">#define BASE_A1_IN        0x94	</span><span class="cm">/* Audio 1 input DMA */</span><span class="cp"></span>
<span class="cp">#define PROT_A1_IN        0x98</span>
<span class="cp">#define PAGE_A1_IN        0x9C</span>

<span class="cp">#define BASE_A1_OUT       0xA0  </span><span class="cm">/* Audio 1 output DMA */</span><span class="cp"></span>
<span class="cp">#define PROT_A1_OUT       0xA4</span>
<span class="cp">#define PAGE_A1_OUT       0xA8</span>

<span class="cp">#define BASE_A2_IN        0xAC  </span><span class="cm">/* Audio 2 input DMA */</span><span class="cp"></span>
<span class="cp">#define PROT_A2_IN        0xB0</span>
<span class="cp">#define PAGE_A2_IN        0xB4</span>

<span class="cp">#define BASE_A2_OUT       0xB8  </span><span class="cm">/* Audio 2 output DMA */</span><span class="cp"></span>
<span class="cp">#define PROT_A2_OUT       0xBC</span>
<span class="cp">#define PAGE_A2_OUT       0xC0</span>

<span class="cp">#define RPS_PAGE0         0xC4  </span><span class="cm">/* RPS task 0 page register */</span><span class="cp"></span>
<span class="cp">#define RPS_PAGE1         0xC8  </span><span class="cm">/* RPS task 1 page register */</span><span class="cp"></span>

<span class="cp">#define RPS_THRESH0       0xCC  </span><span class="cm">/* HBI threshold for task 0 */</span><span class="cp"></span>
<span class="cp">#define RPS_THRESH1       0xD0  </span><span class="cm">/* HBI threshold for task 1 */</span><span class="cp"></span>

<span class="cp">#define RPS_TOV0          0xD4  </span><span class="cm">/* RPS timeout for task 0 */</span><span class="cp"></span>
<span class="cp">#define RPS_TOV1          0xD8  </span><span class="cm">/* RPS timeout for task 1 */</span><span class="cp"></span>

<span class="cp">#define IER               0xDC  </span><span class="cm">/* Interrupt enable register */</span><span class="cp"></span>

<span class="cp">#define GPIO_CTRL         0xE0  </span><span class="cm">/* GPIO 0-3 register */</span><span class="cp"></span>

<span class="cp">#define EC1SSR            0xE4  </span><span class="cm">/* Event cnt set 1 source select */</span><span class="cp"></span>
<span class="cp">#define EC2SSR            0xE8  </span><span class="cm">/* Event cnt set 2 source select */</span><span class="cp"></span>
<span class="cp">#define ECT1R             0xEC  </span><span class="cm">/* Event cnt set 1 thresholds */</span><span class="cp"></span>
<span class="cp">#define ECT2R             0xF0  </span><span class="cm">/* Event cnt set 2 thresholds */</span><span class="cp"></span>

<span class="cp">#define ACON1             0xF4</span>
<span class="cp">#define ACON2             0xF8</span>

<span class="cp">#define MC1               0xFC   </span><span class="cm">/* Main control register 1 */</span><span class="cp"></span>
<span class="cp">#define MC2               0x100  </span><span class="cm">/* Main control register 2  */</span><span class="cp"></span>

<span class="cp">#define RPS_ADDR0         0x104  </span><span class="cm">/* RPS task 0 address register */</span><span class="cp"></span>
<span class="cp">#define RPS_ADDR1         0x108  </span><span class="cm">/* RPS task 1 address register */</span><span class="cp"></span>

<span class="cp">#define ISR               0x10C  </span><span class="cm">/* Interrupt status register */</span><span class="cp"></span>
<span class="cp">#define PSR               0x110  </span><span class="cm">/* Primary status register */</span><span class="cp"></span>
<span class="cp">#define SSR               0x114  </span><span class="cm">/* Secondary status register */</span><span class="cp"></span>

<span class="cp">#define EC1R              0x118  </span><span class="cm">/* Event counter set 1 register */</span><span class="cp"></span>
<span class="cp">#define EC2R              0x11C  </span><span class="cm">/* Event counter set 2 register */</span><span class="cp"></span>

<span class="cp">#define PCI_VDP1          0x120  </span><span class="cm">/* Video DMA pointer of FIFO 1 */</span><span class="cp"></span>
<span class="cp">#define PCI_VDP2          0x124  </span><span class="cm">/* Video DMA pointer of FIFO 2 */</span><span class="cp"></span>
<span class="cp">#define PCI_VDP3          0x128  </span><span class="cm">/* Video DMA pointer of FIFO 3 */</span><span class="cp"></span>
<span class="cp">#define PCI_ADP1          0x12C  </span><span class="cm">/* Audio DMA pointer of audio out 1 */</span><span class="cp"></span>
<span class="cp">#define PCI_ADP2          0x130  </span><span class="cm">/* Audio DMA pointer of audio in 1 */</span><span class="cp"></span>
<span class="cp">#define PCI_ADP3          0x134  </span><span class="cm">/* Audio DMA pointer of audio out 2 */</span><span class="cp"></span>
<span class="cp">#define PCI_ADP4          0x138  </span><span class="cm">/* Audio DMA pointer of audio in 2 */</span><span class="cp"></span>
<span class="cp">#define PCI_DMA_DDP       0x13C  </span><span class="cm">/* DEBI DMA pointer */</span><span class="cp"></span>

<span class="cp">#define LEVEL_REP         0x140,</span>
<span class="cp">#define A_TIME_SLOT1      0x180,  </span><span class="cm">/* from 180 - 1BC */</span><span class="cp"></span>
<span class="cp">#define A_TIME_SLOT2      0x1C0,  </span><span class="cm">/* from 1C0 - 1FC */</span><span class="cp"></span>

<span class="cm">/* isr masks */</span>
<span class="cp">#define SPCI_PPEF       0x80000000  </span><span class="cm">/* PCI parity error */</span><span class="cp"></span>
<span class="cp">#define SPCI_PABO       0x40000000  </span><span class="cm">/* PCI access error (target or master abort) */</span><span class="cp"></span>
<span class="cp">#define SPCI_PPED       0x20000000  </span><span class="cm">/* PCI parity error on &#39;real time data&#39; */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_I1     0x10000000  </span><span class="cm">/* Interrupt issued by RPS1 */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_I0     0x08000000  </span><span class="cm">/* Interrupt issued by RPS0 */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_LATE1  0x04000000  </span><span class="cm">/* RPS task 1 is late */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_LATE0  0x02000000  </span><span class="cm">/* RPS task 0 is late */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_E1     0x01000000  </span><span class="cm">/* RPS error from task 1 */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_E0     0x00800000  </span><span class="cm">/* RPS error from task 0 */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_TO1    0x00400000  </span><span class="cm">/* RPS timeout task 1 */</span><span class="cp"></span>
<span class="cp">#define SPCI_RPS_TO0    0x00200000  </span><span class="cm">/* RPS timeout task 0 */</span><span class="cp"></span>
<span class="cp">#define SPCI_UPLD       0x00100000  </span><span class="cm">/* RPS in upload */</span><span class="cp"></span>
<span class="cp">#define SPCI_DEBI_S     0x00080000  </span><span class="cm">/* DEBI status */</span><span class="cp"></span>
<span class="cp">#define SPCI_DEBI_E     0x00040000  </span><span class="cm">/* DEBI error */</span><span class="cp"></span>
<span class="cp">#define SPCI_IIC_S      0x00020000  </span><span class="cm">/* I2C status */</span><span class="cp"></span>
<span class="cp">#define SPCI_IIC_E      0x00010000  </span><span class="cm">/* I2C error */</span><span class="cp"></span>
<span class="cp">#define SPCI_A2_IN      0x00008000  </span><span class="cm">/* Audio 2 input DMA protection / limit */</span><span class="cp"></span>
<span class="cp">#define SPCI_A2_OUT     0x00004000  </span><span class="cm">/* Audio 2 output DMA protection / limit */</span><span class="cp"></span>
<span class="cp">#define SPCI_A1_IN      0x00002000  </span><span class="cm">/* Audio 1 input DMA protection / limit */</span><span class="cp"></span>
<span class="cp">#define SPCI_A1_OUT     0x00001000  </span><span class="cm">/* Audio 1 output DMA protection / limit */</span><span class="cp"></span>
<span class="cp">#define SPCI_AFOU       0x00000800  </span><span class="cm">/* Audio FIFO over- / underflow */</span><span class="cp"></span>
<span class="cp">#define SPCI_V_PE       0x00000400  </span><span class="cm">/* Video protection address */</span><span class="cp"></span>
<span class="cp">#define SPCI_VFOU       0x00000200  </span><span class="cm">/* Video FIFO over- / underflow */</span><span class="cp"></span>
<span class="cp">#define SPCI_FIDA       0x00000100  </span><span class="cm">/* Field ID video port A */</span><span class="cp"></span>
<span class="cp">#define SPCI_FIDB       0x00000080  </span><span class="cm">/* Field ID video port B */</span><span class="cp"></span>
<span class="cp">#define SPCI_PIN3       0x00000040  </span><span class="cm">/* GPIO pin 3 */</span><span class="cp"></span>
<span class="cp">#define SPCI_PIN2       0x00000020  </span><span class="cm">/* GPIO pin 2 */</span><span class="cp"></span>
<span class="cp">#define SPCI_PIN1       0x00000010  </span><span class="cm">/* GPIO pin 1 */</span><span class="cp"></span>
<span class="cp">#define SPCI_PIN0       0x00000008  </span><span class="cm">/* GPIO pin 0 */</span><span class="cp"></span>
<span class="cp">#define SPCI_ECS        0x00000004  </span><span class="cm">/* Event counter 1, 2, 4, 5 */</span><span class="cp"></span>
<span class="cp">#define SPCI_EC3S       0x00000002  </span><span class="cm">/* Event counter 3 */</span><span class="cp"></span>
<span class="cp">#define SPCI_EC0S       0x00000001  </span><span class="cm">/* Event counter 0 */</span><span class="cp"></span>

<span class="cm">/* i2c */</span>
<span class="cp">#define	SAA7146_I2C_ABORT	(1&lt;&lt;7)</span>
<span class="cp">#define	SAA7146_I2C_SPERR	(1&lt;&lt;6)</span>
<span class="cp">#define	SAA7146_I2C_APERR	(1&lt;&lt;5)</span>
<span class="cp">#define	SAA7146_I2C_DTERR	(1&lt;&lt;4)</span>
<span class="cp">#define	SAA7146_I2C_DRERR	(1&lt;&lt;3)</span>
<span class="cp">#define	SAA7146_I2C_AL		(1&lt;&lt;2)</span>
<span class="cp">#define	SAA7146_I2C_ERR		(1&lt;&lt;1)</span>
<span class="cp">#define	SAA7146_I2C_BUSY	(1&lt;&lt;0)</span>

<span class="cp">#define	SAA7146_I2C_START	(0x3)</span>
<span class="cp">#define	SAA7146_I2C_CONT	(0x2)</span>
<span class="cp">#define	SAA7146_I2C_STOP	(0x1)</span>
<span class="cp">#define	SAA7146_I2C_NOP		(0x0)</span>

<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_6400	(0x500)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_3200	(0x100)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_480	(0x400)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_320	(0x600)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_240	(0x700)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_120	(0x000)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_80	(0x200)</span>
<span class="cp">#define SAA7146_I2C_BUS_BIT_RATE_60	(0x300)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">SAA7146_IER_DISABLE</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">int_slock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="n">saa7146_write</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IER</span><span class="p">,</span> <span class="n">saa7146_read</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IER</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">y</span><span class="p">);</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">int_slock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">SAA7146_IER_ENABLE</span><span class="p">(</span><span class="k">struct</span> <span class="n">saa7146_dev</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">y</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">spin_lock_irqsave</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">int_slock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
	<span class="n">saa7146_write</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IER</span><span class="p">,</span> <span class="n">saa7146_read</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IER</span><span class="p">)</span> <span class="o">|</span> <span class="n">y</span><span class="p">);</span>
	<span class="n">spin_unlock_irqrestore</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">int_slock</span><span class="p">,</span> <span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
