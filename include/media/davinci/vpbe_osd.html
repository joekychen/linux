<!DOCTYPE html>
<html><head><title>joekychen/linux » include › media › davinci › vpbe_osd.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>vpbe_osd.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2007-2009 Texas Instruments Inc</span>
<span class="cm"> * Copyright (C) 2007 MontaVista Software, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Andy Lowe (alowe@mvista.com), MontaVista Software</span>
<span class="cm"> * - Initial version</span>
<span class="cm"> * Murali Karicheri (mkaricheri@gmail.com), Texas Instruments Ltd.</span>
<span class="cm"> * - ported to sub device interface</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation version 2..</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _OSD_H</span>
<span class="cp">#define _OSD_H</span>

<span class="cp">#include &lt;media/davinci/vpbe_types.h&gt;</span>

<span class="cp">#define VPBE_OSD_SUBDEV_NAME &quot;vpbe-osd&quot;</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_layer</span>
<span class="cm"> * @WIN_OSD0: On-Screen Display Window 0</span>
<span class="cm"> * @WIN_VID0: Video Window 0</span>
<span class="cm"> * @WIN_OSD1: On-Screen Display Window 1</span>
<span class="cm"> * @WIN_VID1: Video Window 1</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the osd display layers.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_layer</span> <span class="p">{</span>
	<span class="n">WIN_OSD0</span><span class="p">,</span>
	<span class="n">WIN_VID0</span><span class="p">,</span>
	<span class="n">WIN_OSD1</span><span class="p">,</span>
	<span class="n">WIN_VID1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_win_layer</span>
<span class="cm"> * @OSDWIN_OSD0: On-Screen Display Window 0</span>
<span class="cm"> * @OSDWIN_OSD1: On-Screen Display Window 1</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the OSD Window layers.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_win_layer</span> <span class="p">{</span>
	<span class="n">OSDWIN_OSD0</span><span class="p">,</span>
	<span class="n">OSDWIN_OSD1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_pix_format</span>
<span class="cm"> * @PIXFMT_1BPP: 1-bit-per-pixel bitmap</span>
<span class="cm"> * @PIXFMT_2BPP: 2-bits-per-pixel bitmap</span>
<span class="cm"> * @PIXFMT_4BPP: 4-bits-per-pixel bitmap</span>
<span class="cm"> * @PIXFMT_8BPP: 8-bits-per-pixel bitmap</span>
<span class="cm"> * @PIXFMT_RGB565: 16-bits-per-pixel RGB565</span>
<span class="cm"> * @PIXFMT_YCbCrI: YUV 4:2:2</span>
<span class="cm"> * @PIXFMT_RGB888: 24-bits-per-pixel RGB888</span>
<span class="cm"> * @PIXFMT_YCrCbI: YUV 4:2:2 with chroma swap</span>
<span class="cm"> * @PIXFMT_NV12: YUV 4:2:0 planar</span>
<span class="cm"> * @PIXFMT_OSD_ATTR: OSD Attribute Window pixel format (4bpp)</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the DaVinci pixel formats.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_pix_format</span> <span class="p">{</span>
	<span class="n">PIXFMT_1BPP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PIXFMT_2BPP</span><span class="p">,</span>
	<span class="n">PIXFMT_4BPP</span><span class="p">,</span>
	<span class="n">PIXFMT_8BPP</span><span class="p">,</span>
	<span class="n">PIXFMT_RGB565</span><span class="p">,</span>
	<span class="n">PIXFMT_YCbCrI</span><span class="p">,</span>
	<span class="n">PIXFMT_RGB888</span><span class="p">,</span>
	<span class="n">PIXFMT_YCrCbI</span><span class="p">,</span>
	<span class="n">PIXFMT_NV12</span><span class="p">,</span>
	<span class="n">PIXFMT_OSD_ATTR</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_h_exp_ratio</span>
<span class="cm"> * @H_EXP_OFF: no expansion (1/1)</span>
<span class="cm"> * @H_EXP_9_OVER_8: 9/8 expansion ratio</span>
<span class="cm"> * @H_EXP_3_OVER_2: 3/2 expansion ratio</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the available horizontal expansion ratios.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_h_exp_ratio</span> <span class="p">{</span>
	<span class="n">H_EXP_OFF</span><span class="p">,</span>
	<span class="n">H_EXP_9_OVER_8</span><span class="p">,</span>
	<span class="n">H_EXP_3_OVER_2</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_v_exp_ratio</span>
<span class="cm"> * @V_EXP_OFF: no expansion (1/1)</span>
<span class="cm"> * @V_EXP_6_OVER_5: 6/5 expansion ratio</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the available vertical expansion ratios.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_v_exp_ratio</span> <span class="p">{</span>
	<span class="n">V_EXP_OFF</span><span class="p">,</span>
	<span class="n">V_EXP_6_OVER_5</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_zoom_factor</span>
<span class="cm"> * @ZOOM_X1: no zoom (x1)</span>
<span class="cm"> * @ZOOM_X2: x2 zoom</span>
<span class="cm"> * @ZOOM_X4: x4 zoom</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the available zoom factors.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_zoom_factor</span> <span class="p">{</span>
	<span class="n">ZOOM_X1</span><span class="p">,</span>
	<span class="n">ZOOM_X2</span><span class="p">,</span>
	<span class="n">ZOOM_X4</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_clut</span>
<span class="cm"> * @ROM_CLUT: ROM CLUT</span>
<span class="cm"> * @RAM_CLUT: RAM CLUT</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the available Color Lookup Tables (CLUTs).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_clut</span> <span class="p">{</span>
	<span class="n">ROM_CLUT</span><span class="p">,</span>
	<span class="n">RAM_CLUT</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_rom_clut</span>
<span class="cm"> * @ROM_CLUT0: Macintosh CLUT</span>
<span class="cm"> * @ROM_CLUT1: CLUT from DM270 and prior devices</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the ROM Color Lookup Table (CLUT) options.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_rom_clut</span> <span class="p">{</span>
	<span class="n">ROM_CLUT0</span><span class="p">,</span>
	<span class="n">ROM_CLUT1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_blending_factor</span>
<span class="cm"> * @OSD_0_VID_8: OSD pixels are fully transparent</span>
<span class="cm"> * @OSD_1_VID_7: OSD pixels contribute 1/8, video pixels contribute 7/8</span>
<span class="cm"> * @OSD_2_VID_6: OSD pixels contribute 2/8, video pixels contribute 6/8</span>
<span class="cm"> * @OSD_3_VID_5: OSD pixels contribute 3/8, video pixels contribute 5/8</span>
<span class="cm"> * @OSD_4_VID_4: OSD pixels contribute 4/8, video pixels contribute 4/8</span>
<span class="cm"> * @OSD_5_VID_3: OSD pixels contribute 5/8, video pixels contribute 3/8</span>
<span class="cm"> * @OSD_6_VID_2: OSD pixels contribute 6/8, video pixels contribute 2/8</span>
<span class="cm"> * @OSD_8_VID_0: OSD pixels are fully opaque</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the DaVinci pixel blending factor options.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_blending_factor</span> <span class="p">{</span>
	<span class="n">OSD_0_VID_8</span><span class="p">,</span>
	<span class="n">OSD_1_VID_7</span><span class="p">,</span>
	<span class="n">OSD_2_VID_6</span><span class="p">,</span>
	<span class="n">OSD_3_VID_5</span><span class="p">,</span>
	<span class="n">OSD_4_VID_4</span><span class="p">,</span>
	<span class="n">OSD_5_VID_3</span><span class="p">,</span>
	<span class="n">OSD_6_VID_2</span><span class="p">,</span>
	<span class="n">OSD_8_VID_0</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_blink_interval</span>
<span class="cm"> * @BLINK_X1: blink interval is 1 vertical refresh cycle</span>
<span class="cm"> * @BLINK_X2: blink interval is 2 vertical refresh cycles</span>
<span class="cm"> * @BLINK_X3: blink interval is 3 vertical refresh cycles</span>
<span class="cm"> * @BLINK_X4: blink interval is 4 vertical refresh cycles</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * An enumeration of the DaVinci pixel blinking interval options.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_blink_interval</span> <span class="p">{</span>
	<span class="n">BLINK_X1</span><span class="p">,</span>
	<span class="n">BLINK_X2</span><span class="p">,</span>
	<span class="n">BLINK_X3</span><span class="p">,</span>
	<span class="n">BLINK_X4</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum osd_cursor_h_width</span>
<span class="cm"> * @H_WIDTH_1: horizontal line width is 1 pixel</span>
<span class="cm"> * @H_WIDTH_4: horizontal line width is 4 pixels</span>
<span class="cm"> * @H_WIDTH_8: horizontal line width is 8 pixels</span>
<span class="cm"> * @H_WIDTH_12: horizontal line width is 12 pixels</span>
<span class="cm"> * @H_WIDTH_16: horizontal line width is 16 pixels</span>
<span class="cm"> * @H_WIDTH_20: horizontal line width is 20 pixels</span>
<span class="cm"> * @H_WIDTH_24: horizontal line width is 24 pixels</span>
<span class="cm"> * @H_WIDTH_28: horizontal line width is 28 pixels</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_cursor_h_width</span> <span class="p">{</span>
	<span class="n">H_WIDTH_1</span><span class="p">,</span>
	<span class="n">H_WIDTH_4</span><span class="p">,</span>
	<span class="n">H_WIDTH_8</span><span class="p">,</span>
	<span class="n">H_WIDTH_12</span><span class="p">,</span>
	<span class="n">H_WIDTH_16</span><span class="p">,</span>
	<span class="n">H_WIDTH_20</span><span class="p">,</span>
	<span class="n">H_WIDTH_24</span><span class="p">,</span>
	<span class="n">H_WIDTH_28</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * enum davinci_cursor_v_width</span>
<span class="cm"> * @V_WIDTH_1: vertical line width is 1 line</span>
<span class="cm"> * @V_WIDTH_2: vertical line width is 2 lines</span>
<span class="cm"> * @V_WIDTH_4: vertical line width is 4 lines</span>
<span class="cm"> * @V_WIDTH_6: vertical line width is 6 lines</span>
<span class="cm"> * @V_WIDTH_8: vertical line width is 8 lines</span>
<span class="cm"> * @V_WIDTH_10: vertical line width is 10 lines</span>
<span class="cm"> * @V_WIDTH_12: vertical line width is 12 lines</span>
<span class="cm"> * @V_WIDTH_14: vertical line width is 14 lines</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">osd_cursor_v_width</span> <span class="p">{</span>
	<span class="n">V_WIDTH_1</span><span class="p">,</span>
	<span class="n">V_WIDTH_2</span><span class="p">,</span>
	<span class="n">V_WIDTH_4</span><span class="p">,</span>
	<span class="n">V_WIDTH_6</span><span class="p">,</span>
	<span class="n">V_WIDTH_8</span><span class="p">,</span>
	<span class="n">V_WIDTH_10</span><span class="p">,</span>
	<span class="n">V_WIDTH_12</span><span class="p">,</span>
	<span class="n">V_WIDTH_14</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct osd_cursor_config</span>
<span class="cm"> * @xsize: horizontal size in pixels</span>
<span class="cm"> * @ysize: vertical size in lines</span>
<span class="cm"> * @xpos: horizontal offset in pixels from the left edge of the display</span>
<span class="cm"> * @ypos: vertical offset in lines from the top of the display</span>
<span class="cm"> * @interlaced: Non-zero if the display is interlaced, or zero otherwise</span>
<span class="cm"> * @h_width: horizontal line width</span>
<span class="cm"> * @v_width: vertical line width</span>
<span class="cm"> * @clut: the CLUT selector (ROM or RAM) for the cursor color</span>
<span class="cm"> * @clut_index: an index into the CLUT for the cursor color</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * A structure describing the configuration parameters of the hardware</span>
<span class="cm"> * rectangular cursor.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">osd_cursor_config</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="n">xsize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">ysize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">xpos</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">ypos</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">interlaced</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_cursor_h_width</span> <span class="n">h_width</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_cursor_v_width</span> <span class="n">v_width</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_clut</span> <span class="n">clut</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">clut_index</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct osd_layer_config</span>
<span class="cm"> * @pixfmt: pixel format</span>
<span class="cm"> * @line_length: offset in bytes between start of each line in memory</span>
<span class="cm"> * @xsize: number of horizontal pixels displayed per line</span>
<span class="cm"> * @ysize: number of lines displayed</span>
<span class="cm"> * @xpos: horizontal offset in pixels from the left edge of the display</span>
<span class="cm"> * @ypos: vertical offset in lines from the top of the display</span>
<span class="cm"> * @interlaced: Non-zero if the display is interlaced, or zero otherwise</span>
<span class="cm"> *</span>
<span class="cm"> * Description:</span>
<span class="cm"> * A structure describing the configuration parameters of an On-Screen Display</span>
<span class="cm"> * (OSD) or video layer related to how the image is stored in memory.</span>
<span class="cm"> * @line_length must be a multiple of the cache line size (32 bytes).</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">osd_layer_config</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">osd_pix_format</span> <span class="n">pixfmt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">line_length</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">xsize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">ysize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">xpos</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">ypos</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">interlaced</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* parameters that apply on a per-window (OSD or video) basis */</span>
<span class="k">struct</span> <span class="n">osd_window_state</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">is_allocated</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_enabled</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fb_base_phys</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_zoom_factor</span> <span class="n">h_zoom</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_zoom_factor</span> <span class="n">v_zoom</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">osd_layer_config</span> <span class="n">lconfig</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* parameters that apply on a per-OSD-window basis */</span>
<span class="k">struct</span> <span class="n">osd_osdwin_state</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">osd_clut</span> <span class="n">clut</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_blending_factor</span> <span class="n">blend</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">colorkey_blending</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">colorkey</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">rec601_attenuation</span><span class="p">;</span>
	<span class="cm">/* index is pixel value */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">palette_map</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* hardware rectangular cursor parameters */</span>
<span class="k">struct</span> <span class="n">osd_cursor_state</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">is_enabled</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">osd_cursor_config</span> <span class="n">config</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">osd_state</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">vpbe_osd_ops</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">initialize</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">request_layer</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">release_layer</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">enable_layer</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">,</span>
			    <span class="kt">int</span> <span class="n">otherwin</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">disable_layer</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_layer_config</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">osd_layer_config</span> <span class="o">*</span><span class="n">lconfig</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_layer_config</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">osd_layer_config</span> <span class="o">*</span><span class="n">lconfig</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">start_layer</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fb_base_phys</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cbcr_ofst</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">set_left_margin</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">set_top_margin</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">set_interpolation_filter</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">filter</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">set_vid_expansion</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span>
					<span class="k">enum</span> <span class="n">osd_h_exp_ratio</span> <span class="n">h_exp</span><span class="p">,</span>
					<span class="k">enum</span> <span class="n">osd_v_exp_ratio</span> <span class="n">v_exp</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_vid_expansion</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span>
					<span class="k">enum</span> <span class="n">osd_h_exp_ratio</span> <span class="o">*</span><span class="n">h_exp</span><span class="p">,</span>
					<span class="k">enum</span> <span class="n">osd_v_exp_ratio</span> <span class="o">*</span><span class="n">v_exp</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">set_zoom</span><span class="p">)(</span><span class="k">struct</span> <span class="n">osd_state</span> <span class="o">*</span><span class="n">sd</span><span class="p">,</span> <span class="k">enum</span> <span class="n">osd_layer</span> <span class="n">layer</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">osd_zoom_factor</span> <span class="n">h_zoom</span><span class="p">,</span>
				<span class="k">enum</span> <span class="n">osd_zoom_factor</span> <span class="n">v_zoom</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">osd_state</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">vpbe_version</span> <span class="n">vpbe_type</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">dma_addr_t</span> <span class="n">osd_base_phys</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">osd_base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">osd_size</span><span class="p">;</span>
	<span class="cm">/* 1--&gt;the isr will toggle the VID0 ping-pong buffer */</span>
	<span class="kt">int</span> <span class="n">pingpong</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">interpolation_filter</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">field_inversion</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_h_exp_ratio</span> <span class="n">osd_h_exp</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_v_exp_ratio</span> <span class="n">osd_v_exp</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_h_exp_ratio</span> <span class="n">vid_h_exp</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_v_exp_ratio</span> <span class="n">vid_v_exp</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_clut</span> <span class="n">backg_clut</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">backg_clut_index</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">osd_rom_clut</span> <span class="n">rom_clut</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">is_blinking</span><span class="p">;</span>
	<span class="cm">/* attribute window blinking enabled */</span>
	<span class="k">enum</span> <span class="n">osd_blink_interval</span> <span class="n">blink</span><span class="p">;</span>
	<span class="cm">/* YCbCrI or YCrCbI */</span>
	<span class="k">enum</span> <span class="n">osd_pix_format</span> <span class="n">yc_pixfmt</span><span class="p">;</span>
	<span class="cm">/* columns are Y, Cb, Cr */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">clut_ram</span><span class="p">[</span><span class="mi">256</span><span class="p">][</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">osd_cursor_state</span> <span class="n">cursor</span><span class="p">;</span>
	<span class="cm">/* OSD0, VID0, OSD1, VID1 */</span>
	<span class="k">struct</span> <span class="n">osd_window_state</span> <span class="n">win</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="cm">/* OSD0, OSD1 */</span>
	<span class="k">struct</span> <span class="n">osd_osdwin_state</span> <span class="n">osdwin</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="cm">/* OSD device Operations */</span>
	<span class="k">struct</span> <span class="n">vpbe_osd_ops</span> <span class="n">ops</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">osd_platform_data</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">vpbe_version</span> <span class="n">vpbe_type</span><span class="p">;</span>
	<span class="kt">int</span>  <span class="n">field_inv_wa_enable</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
