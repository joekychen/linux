<!DOCTYPE html>
<html><head><title>joekychen/linux » include › media › davinci › isif.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>isif.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2008-2009 Texas Instruments Inc</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> *</span>
<span class="cm"> * isif header file</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ISIF_H</span>
<span class="cp">#define _ISIF_H</span>

<span class="cp">#include &lt;media/davinci/ccdc_types.h&gt;</span>
<span class="cp">#include &lt;media/davinci/vpfe_types.h&gt;</span>

<span class="cm">/* isif float type S8Q8/U8Q8 */</span>
<span class="k">struct</span> <span class="n">isif_float_8</span> <span class="p">{</span>
	<span class="cm">/* 8 bit integer part */</span>
	<span class="n">__u8</span> <span class="n">integer</span><span class="p">;</span>
	<span class="cm">/* 8 bit decimal part */</span>
	<span class="n">__u8</span> <span class="n">decimal</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* isif float type U16Q16/S16Q16 */</span>
<span class="k">struct</span> <span class="n">isif_float_16</span> <span class="p">{</span>
	<span class="cm">/* 16 bit integer part */</span>
	<span class="n">__u16</span> <span class="n">integer</span><span class="p">;</span>
	<span class="cm">/* 16 bit decimal part */</span>
	<span class="n">__u16</span> <span class="n">decimal</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/************************************************************************</span>
<span class="cm"> *   Vertical Defect Correction parameters</span>
<span class="cm"> ***********************************************************************/</span>
<span class="cm">/* Defect Correction (DFC) table entry */</span>
<span class="k">struct</span> <span class="n">isif_vdfc_entry</span> <span class="p">{</span>
	<span class="cm">/* vertical position of defect */</span>
	<span class="n">__u16</span> <span class="n">pos_vert</span><span class="p">;</span>
	<span class="cm">/* horizontal position of defect */</span>
	<span class="n">__u16</span> <span class="n">pos_horz</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * Defect level of Vertical line defect position. This is subtracted</span>
<span class="cm">	 * from the data at the defect position</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">level_at_pos</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * Defect level of the pixels upper than the vertical line defect.</span>
<span class="cm">	 * This is subtracted from the data</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">level_up_pixels</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * Defect level of the pixels lower than the vertical line defect.</span>
<span class="cm">	 * This is subtracted from the data</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">level_low_pixels</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ISIF_VDFC_TABLE_SIZE		8</span>
<span class="k">struct</span> <span class="n">isif_dfc</span> <span class="p">{</span>
	<span class="cm">/* enable vertical defect correction */</span>
	<span class="n">__u8</span> <span class="n">en</span><span class="p">;</span>
	<span class="cm">/* Defect level subtraction. Just fed through if saturating */</span>
<span class="cp">#define	ISIF_VDFC_NORMAL		0</span>
	<span class="cm">/*</span>
<span class="cm">	 * Defect level subtraction. Horizontal interpolation ((i-2)+(i+2))/2</span>
<span class="cm">	 * if data saturating</span>
<span class="cm">	 */</span>
<span class="cp">#define ISIF_VDFC_HORZ_INTERPOL_IF_SAT	1</span>
	<span class="cm">/* Horizontal interpolation (((i-2)+(i+2))/2) */</span>
<span class="cp">#define	ISIF_VDFC_HORZ_INTERPOL		2</span>
	<span class="cm">/* one of the vertical defect correction modes above */</span>
	<span class="n">__u8</span> <span class="n">corr_mode</span><span class="p">;</span>
	<span class="cm">/* 0 - whole line corrected, 1 - not pixels upper than the defect */</span>
	<span class="n">__u8</span> <span class="n">corr_whole_line</span><span class="p">;</span>
<span class="cp">#define ISIF_VDFC_NO_SHIFT		0</span>
<span class="cp">#define ISIF_VDFC_SHIFT_1		1</span>
<span class="cp">#define ISIF_VDFC_SHIFT_2		2</span>
<span class="cp">#define ISIF_VDFC_SHIFT_3		3</span>
<span class="cp">#define ISIF_VDFC_SHIFT_4		4</span>
	<span class="cm">/*</span>
<span class="cm">	 * defect level shift value. level_at_pos, level_upper_pos,</span>
<span class="cm">	 * and level_lower_pos can be shifted up by this value. Choose</span>
<span class="cm">	 * one of the values above</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">def_level_shift</span><span class="p">;</span>
	<span class="cm">/* defect saturation level */</span>
	<span class="n">__u16</span> <span class="n">def_sat_level</span><span class="p">;</span>
	<span class="cm">/* number of vertical defects. Max is ISIF_VDFC_TABLE_SIZE */</span>
	<span class="n">__u16</span> <span class="n">num_vdefects</span><span class="p">;</span>
	<span class="cm">/* VDFC table ptr */</span>
	<span class="k">struct</span> <span class="n">isif_vdfc_entry</span> <span class="n">table</span><span class="p">[</span><span class="n">ISIF_VDFC_TABLE_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_horz_bclamp</span> <span class="p">{</span>

	<span class="cm">/* Horizontal clamp disabled. Only vertical clamp value is subtracted */</span>
<span class="cp">#define	ISIF_HORZ_BC_DISABLE		0</span>
	<span class="cm">/*</span>
<span class="cm">	 * Horizontal clamp value is calculated and subtracted from image data</span>
<span class="cm">	 * along with vertical clamp value</span>
<span class="cm">	 */</span>
<span class="cp">#define ISIF_HORZ_BC_CLAMP_CALC_ENABLED	1</span>
	<span class="cm">/*</span>
<span class="cm">	 * Horizontal clamp value calculated from previous image is subtracted</span>
<span class="cm">	 * from image data along with vertical clamp value.</span>
<span class="cm">	 */</span>
<span class="cp">#define ISIF_HORZ_BC_CLAMP_NOT_UPDATED	2</span>
	<span class="cm">/* horizontal clamp mode. One of the values above */</span>
	<span class="n">__u8</span> <span class="n">mode</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * pixel value limit enable.</span>
<span class="cm">	 *  0 - limit disabled</span>
<span class="cm">	 *  1 - pixel value limited to 1023</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">clamp_pix_limit</span><span class="p">;</span>
	<span class="cm">/* Select Most left window for bc calculation */</span>
<span class="cp">#define	ISIF_SEL_MOST_LEFT_WIN		0</span>
	<span class="cm">/* Select Most right window for bc calculation */</span>
<span class="cp">#define ISIF_SEL_MOST_RIGHT_WIN		1</span>
	<span class="cm">/* Select most left or right window for clamp val calculation */</span>
	<span class="n">__u8</span> <span class="n">base_win_sel_calc</span><span class="p">;</span>
	<span class="cm">/* Window count per color for calculation. range 1-32 */</span>
	<span class="n">__u8</span> <span class="n">win_count_calc</span><span class="p">;</span>
	<span class="cm">/* Window start position - horizontal for calculation. 0 - 8191 */</span>
	<span class="n">__u16</span> <span class="n">win_start_h_calc</span><span class="p">;</span>
	<span class="cm">/* Window start position - vertical for calculation 0 - 8191 */</span>
	<span class="n">__u16</span> <span class="n">win_start_v_calc</span><span class="p">;</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_H_2PIXELS	0</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_H_4PIXELS	1</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_H_8PIXELS	2</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_H_16PIXELS	3</span>
	<span class="cm">/* Width of the sample window in pixels for calculation */</span>
	<span class="n">__u8</span> <span class="n">win_h_sz_calc</span><span class="p">;</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_V_32PIXELS	0</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_V_64PIXELS	1</span>
<span class="cp">#define	ISIF_HORZ_BC_SZ_V_128PIXELS	2</span>
<span class="cp">#define ISIF_HORZ_BC_SZ_V_256PIXELS	3</span>
	<span class="cm">/* Height of the sample window in pixels for calculation */</span>
	<span class="n">__u8</span> <span class="n">win_v_sz_calc</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/************************************************************************</span>
<span class="cm"> *  Black Clamp parameters</span>
<span class="cm"> ***********************************************************************/</span>
<span class="k">struct</span> <span class="n">isif_vert_bclamp</span> <span class="p">{</span>
	<span class="cm">/* Reset value used is the clamp value calculated */</span>
<span class="cp">#define	ISIF_VERT_BC_USE_HORZ_CLAMP_VAL		0</span>
	<span class="cm">/* Reset value used is reset_clamp_val configured */</span>
<span class="cp">#define	ISIF_VERT_BC_USE_CONFIG_CLAMP_VAL	1</span>
	<span class="cm">/* No update, previous image value is used */</span>
<span class="cp">#define	ISIF_VERT_BC_NO_UPDATE			2</span>
	<span class="cm">/*</span>
<span class="cm">	 * Reset value selector for vertical clamp calculation. Use one of</span>
<span class="cm">	 * the above values</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">reset_val_sel</span><span class="p">;</span>
	<span class="cm">/* U8Q8. Line average coefficient used in vertical clamp calculation */</span>
	<span class="n">__u8</span> <span class="n">line_ave_coef</span><span class="p">;</span>
	<span class="cm">/* Height of the optical black region for calculation */</span>
	<span class="n">__u16</span> <span class="n">ob_v_sz_calc</span><span class="p">;</span>
	<span class="cm">/* Optical black region start position - horizontal. 0 - 8191 */</span>
	<span class="n">__u16</span> <span class="n">ob_start_h</span><span class="p">;</span>
	<span class="cm">/* Optical black region start position - vertical 0 - 8191 */</span>
	<span class="n">__u16</span> <span class="n">ob_start_v</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_black_clamp</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * This offset value is added irrespective of the clamp enable status.</span>
<span class="cm">	 * S13</span>
<span class="cm">	 */</span>
	<span class="n">__u16</span> <span class="n">dc_offset</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * Enable black/digital clamp value to be subtracted from the image data</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">en</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * black clamp mode. same/separate clamp for 4 colors</span>
<span class="cm">	 * 0 - disable - same clamp value for all colors</span>
<span class="cm">	 * 1 - clamp value calculated separately for all colors</span>
<span class="cm">	 */</span>
	<span class="n">__u8</span> <span class="n">bc_mode_color</span><span class="p">;</span>
	<span class="cm">/* Vrtical start position for bc subtraction */</span>
	<span class="n">__u16</span> <span class="n">vert_start_sub</span><span class="p">;</span>
	<span class="cm">/* Black clamp for horizontal direction */</span>
	<span class="k">struct</span> <span class="n">isif_horz_bclamp</span> <span class="n">horz</span><span class="p">;</span>
	<span class="cm">/* Black clamp for vertical direction */</span>
	<span class="k">struct</span> <span class="n">isif_vert_bclamp</span> <span class="n">vert</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*************************************************************************</span>
<span class="cm">** Color Space Conversion (CSC)</span>
<span class="cm">*************************************************************************/</span>
<span class="cp">#define ISIF_CSC_NUM_COEFF	16</span>
<span class="k">struct</span> <span class="n">isif_color_space_conv</span> <span class="p">{</span>
	<span class="cm">/* Enable color space conversion */</span>
	<span class="n">__u8</span> <span class="n">en</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * csc coeffient table. S8Q5, M00 at index 0, M01 at index 1, and</span>
<span class="cm">	 * so forth</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">isif_float_8</span> <span class="n">coeff</span><span class="p">[</span><span class="n">ISIF_CSC_NUM_COEFF</span><span class="p">];</span>
<span class="p">};</span>


<span class="cm">/*************************************************************************</span>
<span class="cm">**  Black  Compensation parameters</span>
<span class="cm">*************************************************************************/</span>
<span class="k">struct</span> <span class="n">isif_black_comp</span> <span class="p">{</span>
	<span class="cm">/* Comp for Red */</span>
	<span class="n">__s8</span> <span class="n">r_comp</span><span class="p">;</span>
	<span class="cm">/* Comp for Gr */</span>
	<span class="n">__s8</span> <span class="n">gr_comp</span><span class="p">;</span>
	<span class="cm">/* Comp for Blue */</span>
	<span class="n">__s8</span> <span class="n">b_comp</span><span class="p">;</span>
	<span class="cm">/* Comp for Gb */</span>
	<span class="n">__s8</span> <span class="n">gb_comp</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*************************************************************************</span>
<span class="cm">**  Gain parameters</span>
<span class="cm">*************************************************************************/</span>
<span class="k">struct</span> <span class="n">isif_gain</span> <span class="p">{</span>
	<span class="cm">/* Gain for Red or ye */</span>
	<span class="k">struct</span> <span class="n">isif_float_16</span> <span class="n">r_ye</span><span class="p">;</span>
	<span class="cm">/* Gain for Gr or cy */</span>
	<span class="k">struct</span> <span class="n">isif_float_16</span> <span class="n">gr_cy</span><span class="p">;</span>
	<span class="cm">/* Gain for Gb or g */</span>
	<span class="k">struct</span> <span class="n">isif_float_16</span> <span class="n">gb_g</span><span class="p">;</span>
	<span class="cm">/* Gain for Blue or mg */</span>
	<span class="k">struct</span> <span class="n">isif_float_16</span> <span class="n">b_mg</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ISIF_LINEAR_TAB_SIZE	192</span>
<span class="cm">/*************************************************************************</span>
<span class="cm">**  Linearization parameters</span>
<span class="cm">*************************************************************************/</span>
<span class="k">struct</span> <span class="n">isif_linearize</span> <span class="p">{</span>
	<span class="cm">/* Enable or Disable linearization of data */</span>
	<span class="n">__u8</span> <span class="n">en</span><span class="p">;</span>
	<span class="cm">/* Shift value applied */</span>
	<span class="n">__u8</span> <span class="n">corr_shft</span><span class="p">;</span>
	<span class="cm">/* scale factor applied U11Q10 */</span>
	<span class="k">struct</span> <span class="n">isif_float_16</span> <span class="n">scale_fact</span><span class="p">;</span>
	<span class="cm">/* Size of the linear table */</span>
	<span class="n">__u16</span> <span class="n">table</span><span class="p">[</span><span class="n">ISIF_LINEAR_TAB_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Color patterns */</span>
<span class="cp">#define ISIF_RED	0</span>
<span class="cp">#define	ISIF_GREEN_RED	1</span>
<span class="cp">#define ISIF_GREEN_BLUE	2</span>
<span class="cp">#define ISIF_BLUE	3</span>
<span class="k">struct</span> <span class="n">isif_col_pat</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">olop</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">olep</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">elop</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">elep</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*************************************************************************</span>
<span class="cm">**  Data formatter parameters</span>
<span class="cm">*************************************************************************/</span>
<span class="k">struct</span> <span class="n">isif_fmtplen</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * number of program entries for SET0, range 1 - 16</span>
<span class="cm">	 * when fmtmode is ISIF_SPLIT, 1 - 8 when fmtmode is</span>
<span class="cm">	 * ISIF_COMBINE</span>
<span class="cm">	 */</span>
	<span class="n">__u16</span> <span class="n">plen0</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * number of program entries for SET1, range 1 - 16</span>
<span class="cm">	 * when fmtmode is ISIF_SPLIT, 1 - 8 when fmtmode is</span>
<span class="cm">	 * ISIF_COMBINE</span>
<span class="cm">	 */</span>
	<span class="n">__u16</span> <span class="n">plen1</span><span class="p">;</span>
	<span class="cm">/**</span>
<span class="cm">	 * number of program entries for SET2, range 1 - 16</span>
<span class="cm">	 * when fmtmode is ISIF_SPLIT, 1 - 8 when fmtmode is</span>
<span class="cm">	 * ISIF_COMBINE</span>
<span class="cm">	 */</span>
	<span class="n">__u16</span> <span class="n">plen2</span><span class="p">;</span>
	<span class="cm">/**</span>
<span class="cm">	 * number of program entries for SET3, range 1 - 16</span>
<span class="cm">	 * when fmtmode is ISIF_SPLIT, 1 - 8 when fmtmode is</span>
<span class="cm">	 * ISIF_COMBINE</span>
<span class="cm">	 */</span>
	<span class="n">__u16</span> <span class="n">plen3</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_fmt_cfg</span> <span class="p">{</span>
<span class="cp">#define ISIF_SPLIT		0</span>
<span class="cp">#define ISIF_COMBINE		1</span>
	<span class="cm">/* Split or combine or line alternate */</span>
	<span class="n">__u8</span> <span class="n">fmtmode</span><span class="p">;</span>
	<span class="cm">/* enable or disable line alternating mode */</span>
	<span class="n">__u8</span> <span class="n">ln_alter_en</span><span class="p">;</span>
<span class="cp">#define ISIF_1LINE		0</span>
<span class="cp">#define	ISIF_2LINES		1</span>
<span class="cp">#define	ISIF_3LINES		2</span>
<span class="cp">#define	ISIF_4LINES		3</span>
	<span class="cm">/* Split/combine line number */</span>
	<span class="n">__u8</span> <span class="n">lnum</span><span class="p">;</span>
	<span class="cm">/* Address increment Range 1 - 16 */</span>
	<span class="n">__u8</span> <span class="n">addrinc</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_fmt_addr_ptr</span> <span class="p">{</span>
	<span class="cm">/* Initial address */</span>
	<span class="n">__u32</span> <span class="n">init_addr</span><span class="p">;</span>
	<span class="cm">/* output line number */</span>
<span class="cp">#define ISIF_1STLINE		0</span>
<span class="cp">#define	ISIF_2NDLINE		1</span>
<span class="cp">#define	ISIF_3RDLINE		2</span>
<span class="cp">#define	ISIF_4THLINE		3</span>
	<span class="n">__u8</span> <span class="n">out_line</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_fmtpgm_ap</span> <span class="p">{</span>
	<span class="cm">/* program address pointer */</span>
	<span class="n">__u8</span> <span class="n">pgm_aptr</span><span class="p">;</span>
	<span class="cm">/* program address increment or decrement */</span>
	<span class="n">__u8</span> <span class="n">pgmupdt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_data_formatter</span> <span class="p">{</span>
	<span class="cm">/* Enable/Disable data formatter */</span>
	<span class="n">__u8</span> <span class="n">en</span><span class="p">;</span>
	<span class="cm">/* data formatter configuration */</span>
	<span class="k">struct</span> <span class="n">isif_fmt_cfg</span> <span class="n">cfg</span><span class="p">;</span>
	<span class="cm">/* Formatter program entries length */</span>
	<span class="k">struct</span> <span class="n">isif_fmtplen</span> <span class="n">plen</span><span class="p">;</span>
	<span class="cm">/* first pixel in a line fed to formatter */</span>
	<span class="n">__u16</span> <span class="n">fmtrlen</span><span class="p">;</span>
	<span class="cm">/* HD interval for output line. Only valid when split line */</span>
	<span class="n">__u16</span> <span class="n">fmthcnt</span><span class="p">;</span>
	<span class="cm">/* formatter address pointers */</span>
	<span class="k">struct</span> <span class="n">isif_fmt_addr_ptr</span> <span class="n">fmtaddr_ptr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="cm">/* program enable/disable */</span>
	<span class="n">__u8</span> <span class="n">pgm_en</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="cm">/* program address pointers */</span>
	<span class="k">struct</span> <span class="n">isif_fmtpgm_ap</span> <span class="n">fmtpgm_ap</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_df_csc</span> <span class="p">{</span>
	<span class="cm">/* Color Space Conversion confguration, 0 - csc, 1 - df */</span>
	<span class="n">__u8</span> <span class="n">df_or_csc</span><span class="p">;</span>
	<span class="cm">/* csc configuration valid if df_or_csc is 0 */</span>
	<span class="k">struct</span> <span class="n">isif_color_space_conv</span> <span class="n">csc</span><span class="p">;</span>
	<span class="cm">/* data formatter configuration valid if df_or_csc is 1 */</span>
	<span class="k">struct</span> <span class="n">isif_data_formatter</span> <span class="n">df</span><span class="p">;</span>
	<span class="cm">/* start pixel in a line at the input */</span>
	<span class="n">__u32</span> <span class="n">start_pix</span><span class="p">;</span>
	<span class="cm">/* number of pixels in input line */</span>
	<span class="n">__u32</span> <span class="n">num_pixels</span><span class="p">;</span>
	<span class="cm">/* start line at the input */</span>
	<span class="n">__u32</span> <span class="n">start_line</span><span class="p">;</span>
	<span class="cm">/* number of lines at the input */</span>
	<span class="n">__u32</span> <span class="n">num_lines</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_gain_offsets_adj</span> <span class="p">{</span>
	<span class="cm">/* Gain adjustment per color */</span>
	<span class="k">struct</span> <span class="n">isif_gain</span> <span class="n">gain</span><span class="p">;</span>
	<span class="cm">/* Offset adjustment */</span>
	<span class="n">__u16</span> <span class="n">offset</span><span class="p">;</span>
	<span class="cm">/* Enable or Disable Gain adjustment for SDRAM data */</span>
	<span class="n">__u8</span> <span class="n">gain_sdram_en</span><span class="p">;</span>
	<span class="cm">/* Enable or Disable Gain adjustment for IPIPE data */</span>
	<span class="n">__u8</span> <span class="n">gain_ipipe_en</span><span class="p">;</span>
	<span class="cm">/* Enable or Disable Gain adjustment for H3A data */</span>
	<span class="n">__u8</span> <span class="n">gain_h3a_en</span><span class="p">;</span>
	<span class="cm">/* Enable or Disable Gain adjustment for SDRAM data */</span>
	<span class="n">__u8</span> <span class="n">offset_sdram_en</span><span class="p">;</span>
	<span class="cm">/* Enable or Disable Gain adjustment for IPIPE data */</span>
	<span class="n">__u8</span> <span class="n">offset_ipipe_en</span><span class="p">;</span>
	<span class="cm">/* Enable or Disable Gain adjustment for H3A data */</span>
	<span class="n">__u8</span> <span class="n">offset_h3a_en</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_cul</span> <span class="p">{</span>
	<span class="cm">/* Horizontal Cull pattern for odd lines */</span>
	<span class="n">__u8</span> <span class="n">hcpat_odd</span><span class="p">;</span>
	<span class="cm">/* Horizontal Cull pattern for even lines */</span>
	<span class="n">__u8</span> <span class="n">hcpat_even</span><span class="p">;</span>
	<span class="cm">/* Vertical Cull pattern */</span>
	<span class="n">__u8</span> <span class="n">vcpat</span><span class="p">;</span>
	<span class="cm">/* Enable or disable lpf. Apply when cull is enabled */</span>
	<span class="n">__u8</span> <span class="n">en_lpf</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_compress</span> <span class="p">{</span>
<span class="cp">#define ISIF_ALAW		0</span>
<span class="cp">#define ISIF_DPCM		1</span>
<span class="cp">#define ISIF_NO_COMPRESSION	2</span>
	<span class="cm">/* Compression Algorithm used */</span>
	<span class="n">__u8</span> <span class="n">alg</span><span class="p">;</span>
	<span class="cm">/* Choose Predictor1 for DPCM compression */</span>
<span class="cp">#define ISIF_DPCM_PRED1		0</span>
	<span class="cm">/* Choose Predictor2 for DPCM compression */</span>
<span class="cp">#define ISIF_DPCM_PRED2		1</span>
	<span class="cm">/* Predictor for DPCM compression */</span>
	<span class="n">__u8</span> <span class="n">pred</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* all the stuff in this struct will be provided by userland */</span>
<span class="k">struct</span> <span class="n">isif_config_params_raw</span> <span class="p">{</span>
	<span class="cm">/* Linearization parameters for image sensor data input */</span>
	<span class="k">struct</span> <span class="n">isif_linearize</span> <span class="n">linearize</span><span class="p">;</span>
	<span class="cm">/* Data formatter or CSC */</span>
	<span class="k">struct</span> <span class="n">isif_df_csc</span> <span class="n">df_csc</span><span class="p">;</span>
	<span class="cm">/* Defect Pixel Correction (DFC) confguration */</span>
	<span class="k">struct</span> <span class="n">isif_dfc</span> <span class="n">dfc</span><span class="p">;</span>
	<span class="cm">/* Black/Digital Clamp configuration */</span>
	<span class="k">struct</span> <span class="n">isif_black_clamp</span> <span class="n">bclamp</span><span class="p">;</span>
	<span class="cm">/* Gain, offset adjustments */</span>
	<span class="k">struct</span> <span class="n">isif_gain_offsets_adj</span> <span class="n">gain_offset</span><span class="p">;</span>
	<span class="cm">/* Culling */</span>
	<span class="k">struct</span> <span class="n">isif_cul</span> <span class="n">culling</span><span class="p">;</span>
	<span class="cm">/* A-Law and DPCM compression options */</span>
	<span class="k">struct</span> <span class="n">isif_compress</span> <span class="n">compress</span><span class="p">;</span>
	<span class="cm">/* horizontal offset for Gain/LSC/DFC */</span>
	<span class="n">__u16</span> <span class="n">horz_offset</span><span class="p">;</span>
	<span class="cm">/* vertical offset for Gain/LSC/DFC */</span>
	<span class="n">__u16</span> <span class="n">vert_offset</span><span class="p">;</span>
	<span class="cm">/* color pattern for field 0 */</span>
	<span class="k">struct</span> <span class="n">isif_col_pat</span> <span class="n">col_pat_field0</span><span class="p">;</span>
	<span class="cm">/* color pattern for field 1 */</span>
	<span class="k">struct</span> <span class="n">isif_col_pat</span> <span class="n">col_pat_field1</span><span class="p">;</span>
<span class="cp">#define ISIF_NO_SHIFT		0</span>
<span class="cp">#define	ISIF_1BIT_SHIFT		1</span>
<span class="cp">#define	ISIF_2BIT_SHIFT		2</span>
<span class="cp">#define	ISIF_3BIT_SHIFT		3</span>
<span class="cp">#define	ISIF_4BIT_SHIFT		4</span>
<span class="cp">#define ISIF_5BIT_SHIFT		5</span>
<span class="cp">#define ISIF_6BIT_SHIFT		6</span>
	<span class="cm">/* Data shift applied before storing to SDRAM */</span>
	<span class="n">__u8</span> <span class="n">data_shift</span><span class="p">;</span>
	<span class="cm">/* enable input test pattern generation */</span>
	<span class="n">__u8</span> <span class="n">test_pat_gen</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#ifdef __KERNEL__</span>
<span class="k">struct</span> <span class="n">isif_ycbcr_config</span> <span class="p">{</span>
	<span class="cm">/* isif pixel format */</span>
	<span class="k">enum</span> <span class="n">ccdc_pixfmt</span> <span class="n">pix_fmt</span><span class="p">;</span>
	<span class="cm">/* isif frame format */</span>
	<span class="k">enum</span> <span class="n">ccdc_frmfmt</span> <span class="n">frm_fmt</span><span class="p">;</span>
	<span class="cm">/* ISIF crop window */</span>
	<span class="k">struct</span> <span class="n">v4l2_rect</span> <span class="n">win</span><span class="p">;</span>
	<span class="cm">/* field polarity */</span>
	<span class="k">enum</span> <span class="n">vpfe_pin_pol</span> <span class="n">fid_pol</span><span class="p">;</span>
	<span class="cm">/* interface VD polarity */</span>
	<span class="k">enum</span> <span class="n">vpfe_pin_pol</span> <span class="n">vd_pol</span><span class="p">;</span>
	<span class="cm">/* interface HD polarity */</span>
	<span class="k">enum</span> <span class="n">vpfe_pin_pol</span> <span class="n">hd_pol</span><span class="p">;</span>
	<span class="cm">/* isif pix order. Only used for ycbcr capture */</span>
	<span class="k">enum</span> <span class="n">ccdc_pixorder</span> <span class="n">pix_order</span><span class="p">;</span>
	<span class="cm">/* isif buffer type. Only used for ycbcr capture */</span>
	<span class="k">enum</span> <span class="n">ccdc_buftype</span> <span class="n">buf_type</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* MSB of image data connected to sensor port */</span>
<span class="k">enum</span> <span class="n">isif_data_msb</span> <span class="p">{</span>
	<span class="n">ISIF_BIT_MSB_15</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_14</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_13</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_12</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_11</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_10</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_9</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_8</span><span class="p">,</span>
	<span class="n">ISIF_BIT_MSB_7</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">isif_cfa_pattern</span> <span class="p">{</span>
	<span class="n">ISIF_CFA_PAT_MOSAIC</span><span class="p">,</span>
	<span class="n">ISIF_CFA_PAT_STRIPE</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">isif_params_raw</span> <span class="p">{</span>
	<span class="cm">/* isif pixel format */</span>
	<span class="k">enum</span> <span class="n">ccdc_pixfmt</span> <span class="n">pix_fmt</span><span class="p">;</span>
	<span class="cm">/* isif frame format */</span>
	<span class="k">enum</span> <span class="n">ccdc_frmfmt</span> <span class="n">frm_fmt</span><span class="p">;</span>
	<span class="cm">/* video window */</span>
	<span class="k">struct</span> <span class="n">v4l2_rect</span> <span class="n">win</span><span class="p">;</span>
	<span class="cm">/* field polarity */</span>
	<span class="k">enum</span> <span class="n">vpfe_pin_pol</span> <span class="n">fid_pol</span><span class="p">;</span>
	<span class="cm">/* interface VD polarity */</span>
	<span class="k">enum</span> <span class="n">vpfe_pin_pol</span> <span class="n">vd_pol</span><span class="p">;</span>
	<span class="cm">/* interface HD polarity */</span>
	<span class="k">enum</span> <span class="n">vpfe_pin_pol</span> <span class="n">hd_pol</span><span class="p">;</span>
	<span class="cm">/* buffer type. Applicable for interlaced mode */</span>
	<span class="k">enum</span> <span class="n">ccdc_buftype</span> <span class="n">buf_type</span><span class="p">;</span>
	<span class="cm">/* Gain values */</span>
	<span class="k">struct</span> <span class="n">isif_gain</span> <span class="n">gain</span><span class="p">;</span>
	<span class="cm">/* cfa pattern */</span>
	<span class="k">enum</span> <span class="n">isif_cfa_pattern</span> <span class="n">cfa_pat</span><span class="p">;</span>
	<span class="cm">/* Data MSB position */</span>
	<span class="k">enum</span> <span class="n">isif_data_msb</span> <span class="n">data_msb</span><span class="p">;</span>
	<span class="cm">/* Enable horizontal flip */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">horz_flip_en</span><span class="p">;</span>
	<span class="cm">/* Enable image invert vertically */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">image_invert_en</span><span class="p">;</span>

	<span class="cm">/* all the userland defined stuff*/</span>
	<span class="k">struct</span> <span class="n">isif_config_params_raw</span> <span class="n">config_params</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">isif_data_pack</span> <span class="p">{</span>
	<span class="n">ISIF_PACK_16BIT</span><span class="p">,</span>
	<span class="n">ISIF_PACK_12BIT</span><span class="p">,</span>
	<span class="n">ISIF_PACK_8BIT</span>
<span class="p">};</span>

<span class="cp">#define ISIF_WIN_NTSC				{0, 0, 720, 480}</span>
<span class="cp">#define ISIF_WIN_VGA				{0, 0, 640, 480}</span>

<span class="cp">#endif</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
