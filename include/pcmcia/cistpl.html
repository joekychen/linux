<!DOCTYPE html>
<html><head><title>joekychen/linux » include › pcmcia › cistpl.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>cistpl.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * cistpl.h</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * The initial developer of the original code is David A. Hinds</span>
<span class="cm"> * &lt;dahinds@users.sourceforge.net&gt;.  Portions created by David A. Hinds</span>
<span class="cm"> * are Copyright (C) 1999 David A. Hinds.  All Rights Reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * (C) 1999             David A. Hinds</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _LINUX_CISTPL_H</span>
<span class="cp">#define _LINUX_CISTPL_H</span>

<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cisdata_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_NULL		0x00</span>
<span class="cp">#define CISTPL_DEVICE		0x01</span>
<span class="cp">#define CISTPL_LONGLINK_CB	0x02</span>
<span class="cp">#define CISTPL_INDIRECT		0x03</span>
<span class="cp">#define CISTPL_CONFIG_CB	0x04</span>
<span class="cp">#define CISTPL_CFTABLE_ENTRY_CB	0x05</span>
<span class="cp">#define CISTPL_LONGLINK_MFC	0x06</span>
<span class="cp">#define CISTPL_BAR		0x07</span>
<span class="cp">#define CISTPL_PWR_MGMNT	0x08</span>
<span class="cp">#define CISTPL_EXTDEVICE	0x09</span>
<span class="cp">#define CISTPL_CHECKSUM		0x10</span>
<span class="cp">#define CISTPL_LONGLINK_A	0x11</span>
<span class="cp">#define CISTPL_LONGLINK_C	0x12</span>
<span class="cp">#define CISTPL_LINKTARGET	0x13</span>
<span class="cp">#define CISTPL_NO_LINK		0x14</span>
<span class="cp">#define CISTPL_VERS_1		0x15</span>
<span class="cp">#define CISTPL_ALTSTR		0x16</span>
<span class="cp">#define CISTPL_DEVICE_A		0x17</span>
<span class="cp">#define CISTPL_JEDEC_C		0x18</span>
<span class="cp">#define CISTPL_JEDEC_A		0x19</span>
<span class="cp">#define CISTPL_CONFIG		0x1a</span>
<span class="cp">#define CISTPL_CFTABLE_ENTRY	0x1b</span>
<span class="cp">#define CISTPL_DEVICE_OC	0x1c</span>
<span class="cp">#define CISTPL_DEVICE_OA	0x1d</span>
<span class="cp">#define CISTPL_DEVICE_GEO	0x1e</span>
<span class="cp">#define CISTPL_DEVICE_GEO_A	0x1f</span>
<span class="cp">#define CISTPL_MANFID		0x20</span>
<span class="cp">#define CISTPL_FUNCID		0x21</span>
<span class="cp">#define CISTPL_FUNCE		0x22</span>
<span class="cp">#define CISTPL_SWIL		0x23</span>
<span class="cp">#define CISTPL_END		0xff</span>
<span class="cm">/* Layer 2 tuples */</span>
<span class="cp">#define CISTPL_VERS_2		0x40</span>
<span class="cp">#define CISTPL_FORMAT		0x41</span>
<span class="cp">#define CISTPL_GEOMETRY		0x42</span>
<span class="cp">#define CISTPL_BYTEORDER	0x43</span>
<span class="cp">#define CISTPL_DATE		0x44</span>
<span class="cp">#define CISTPL_BATTERY		0x45</span>
<span class="cp">#define CISTPL_FORMAT_A		0x47</span>
<span class="cm">/* Layer 3 tuples */</span>
<span class="cp">#define CISTPL_ORG		0x46</span>
<span class="cp">#define CISTPL_SPCL		0x90</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_longlink_t</span> <span class="p">{</span>
    <span class="n">u_int</span>	<span class="n">addr</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_longlink_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_checksum_t</span> <span class="p">{</span>
    <span class="n">u_short</span>	<span class="n">addr</span><span class="p">;</span>
    <span class="n">u_short</span>	<span class="n">len</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">sum</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_checksum_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_MAX_FUNCTIONS	8</span>
<span class="cp">#define CISTPL_MFC_ATTR		0x00</span>
<span class="cp">#define CISTPL_MFC_COMMON	0x01</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_longlink_mfc_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">nfn</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_char</span>	<span class="n">space</span><span class="p">;</span>
	<span class="n">u_int</span>	<span class="n">addr</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">fn</span><span class="p">[</span><span class="n">CISTPL_MAX_FUNCTIONS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_longlink_mfc_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_MAX_ALTSTR_STRINGS	4</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_altstr_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">ns</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">ofs</span><span class="p">[</span><span class="n">CISTPL_MAX_ALTSTR_STRINGS</span><span class="p">];</span>
    <span class="kt">char</span>	<span class="n">str</span><span class="p">[</span><span class="mi">254</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_altstr_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_DTYPE_NULL	0x00</span>
<span class="cp">#define CISTPL_DTYPE_ROM	0x01</span>
<span class="cp">#define CISTPL_DTYPE_OTPROM	0x02</span>
<span class="cp">#define CISTPL_DTYPE_EPROM	0x03</span>
<span class="cp">#define CISTPL_DTYPE_EEPROM	0x04</span>
<span class="cp">#define CISTPL_DTYPE_FLASH	0x05</span>
<span class="cp">#define CISTPL_DTYPE_SRAM	0x06</span>
<span class="cp">#define CISTPL_DTYPE_DRAM	0x07</span>
<span class="cp">#define CISTPL_DTYPE_FUNCSPEC	0x0d</span>
<span class="cp">#define CISTPL_DTYPE_EXTEND	0x0e</span>

<span class="cp">#define CISTPL_MAX_DEVICES	4</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_device_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">ndev</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_char</span> 	<span class="n">type</span><span class="p">;</span>
	<span class="n">u_char</span>	<span class="n">wp</span><span class="p">;</span>
	<span class="n">u_int</span>	<span class="n">speed</span><span class="p">;</span>
	<span class="n">u_int</span>	<span class="n">size</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">dev</span><span class="p">[</span><span class="n">CISTPL_MAX_DEVICES</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_device_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_DEVICE_MWAIT	0x01</span>
<span class="cp">#define CISTPL_DEVICE_3VCC	0x02</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_device_o_t</span> <span class="p">{</span>
    <span class="n">u_char</span>		<span class="n">flags</span><span class="p">;</span>
    <span class="n">cistpl_device_t</span>	<span class="n">device</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_device_o_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_VERS_1_MAX_PROD_STRINGS	4</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_vers_1_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">major</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">minor</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">ns</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">ofs</span><span class="p">[</span><span class="n">CISTPL_VERS_1_MAX_PROD_STRINGS</span><span class="p">];</span>
    <span class="kt">char</span>	<span class="n">str</span><span class="p">[</span><span class="mi">254</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_vers_1_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_jedec_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">nid</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_char</span>	<span class="n">mfr</span><span class="p">;</span>
	<span class="n">u_char</span>	<span class="n">info</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">id</span><span class="p">[</span><span class="n">CISTPL_MAX_DEVICES</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_jedec_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_manfid_t</span> <span class="p">{</span>
    <span class="n">u_short</span>	<span class="n">manf</span><span class="p">;</span>
    <span class="n">u_short</span>	<span class="n">card</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_manfid_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_FUNCID_MULTI	0x00</span>
<span class="cp">#define CISTPL_FUNCID_MEMORY	0x01</span>
<span class="cp">#define CISTPL_FUNCID_SERIAL	0x02</span>
<span class="cp">#define CISTPL_FUNCID_PARALLEL	0x03</span>
<span class="cp">#define CISTPL_FUNCID_FIXED	0x04</span>
<span class="cp">#define CISTPL_FUNCID_VIDEO	0x05</span>
<span class="cp">#define CISTPL_FUNCID_NETWORK	0x06</span>
<span class="cp">#define CISTPL_FUNCID_AIMS	0x07</span>
<span class="cp">#define CISTPL_FUNCID_SCSI	0x08</span>

<span class="cp">#define CISTPL_SYSINIT_POST	0x01</span>
<span class="cp">#define CISTPL_SYSINIT_ROM	0x02</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_funcid_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">func</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">sysinit</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_funcid_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_funce_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">type</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_funce_t</span><span class="p">;</span>

<span class="cm">/*======================================================================</span>

<span class="cm">    Modem Function Extension Tuples</span>

<span class="cm">======================================================================*/</span>

<span class="cp">#define CISTPL_FUNCE_SERIAL_IF		0x00</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_CAP		0x01</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_SERV_DATA	0x02</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_SERV_FAX	0x03</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_SERV_VOICE	0x04</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_CAP_DATA	0x05</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_CAP_FAX	0x06</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_CAP_VOICE	0x07</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_IF_DATA	0x08</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_IF_FAX	0x09</span>
<span class="cp">#define CISTPL_FUNCE_SERIAL_IF_VOICE	0x0a</span>

<span class="cm">/* UART identification */</span>
<span class="cp">#define CISTPL_SERIAL_UART_8250		0x00</span>
<span class="cp">#define CISTPL_SERIAL_UART_16450	0x01</span>
<span class="cp">#define CISTPL_SERIAL_UART_16550	0x02</span>
<span class="cp">#define CISTPL_SERIAL_UART_8251		0x03</span>
<span class="cp">#define CISTPL_SERIAL_UART_8530		0x04</span>
<span class="cp">#define CISTPL_SERIAL_UART_85230	0x05</span>

<span class="cm">/* UART capabilities */</span>
<span class="cp">#define CISTPL_SERIAL_UART_SPACE	0x01</span>
<span class="cp">#define CISTPL_SERIAL_UART_MARK		0x02</span>
<span class="cp">#define CISTPL_SERIAL_UART_ODD		0x04</span>
<span class="cp">#define CISTPL_SERIAL_UART_EVEN		0x08</span>
<span class="cp">#define CISTPL_SERIAL_UART_5BIT		0x01</span>
<span class="cp">#define CISTPL_SERIAL_UART_6BIT		0x02</span>
<span class="cp">#define CISTPL_SERIAL_UART_7BIT		0x04</span>
<span class="cp">#define CISTPL_SERIAL_UART_8BIT		0x08</span>
<span class="cp">#define CISTPL_SERIAL_UART_1STOP	0x10</span>
<span class="cp">#define CISTPL_SERIAL_UART_MSTOP	0x20</span>
<span class="cp">#define CISTPL_SERIAL_UART_2STOP	0x40</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_serial_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">uart_type</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">uart_cap_0</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">uart_cap_1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_serial_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_modem_cap_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">flow</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">cmd_buf</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">rcv_buf_0</span><span class="p">,</span> <span class="n">rcv_buf_1</span><span class="p">,</span> <span class="n">rcv_buf_2</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">xmit_buf_0</span><span class="p">,</span> <span class="n">xmit_buf_1</span><span class="p">,</span> <span class="n">xmit_buf_2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_modem_cap_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_SERIAL_MOD_103		0x01</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V21		0x02</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V23		0x04</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V22		0x08</span>
<span class="cp">#define CISTPL_SERIAL_MOD_212A		0x10</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V22BIS	0x20</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V26		0x40</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V26BIS	0x80</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V27BIS	0x01</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V29		0x02</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V32		0x04</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V32BIS	0x08</span>
<span class="cp">#define CISTPL_SERIAL_MOD_V34		0x10</span>

<span class="cp">#define CISTPL_SERIAL_ERR_MNP2_4	0x01</span>
<span class="cp">#define CISTPL_SERIAL_ERR_V42_LAPM	0x02</span>

<span class="cp">#define CISTPL_SERIAL_CMPR_V42BIS	0x01</span>
<span class="cp">#define CISTPL_SERIAL_CMPR_MNP5		0x02</span>

<span class="cp">#define CISTPL_SERIAL_CMD_AT1		0x01</span>
<span class="cp">#define CISTPL_SERIAL_CMD_AT2		0x02</span>
<span class="cp">#define CISTPL_SERIAL_CMD_AT3		0x04</span>
<span class="cp">#define CISTPL_SERIAL_CMD_MNP_AT	0x08</span>
<span class="cp">#define CISTPL_SERIAL_CMD_V25BIS	0x10</span>
<span class="cp">#define CISTPL_SERIAL_CMD_V25A		0x20</span>
<span class="cp">#define CISTPL_SERIAL_CMD_DMCL		0x40</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_data_serv_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">max_data_0</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">max_data_1</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">modulation_0</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">modulation_1</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">error_control</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">compression</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">cmd_protocol</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">escape</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">encrypt</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">misc_features</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">ccitt_code</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_data_serv_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_fax_serv_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">max_data_0</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">max_data_1</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">modulation</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">encrypt</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">features_0</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">features_1</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">ccitt_code</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_fax_serv_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_voice_serv_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">max_data_0</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">max_data_1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_voice_serv_t</span><span class="p">;</span>

<span class="cm">/*======================================================================</span>

<span class="cm">    LAN Function Extension Tuples</span>

<span class="cm">======================================================================*/</span>

<span class="cp">#define CISTPL_FUNCE_LAN_TECH		0x01</span>
<span class="cp">#define CISTPL_FUNCE_LAN_SPEED		0x02</span>
<span class="cp">#define CISTPL_FUNCE_LAN_MEDIA		0x03</span>
<span class="cp">#define CISTPL_FUNCE_LAN_NODE_ID	0x04</span>
<span class="cp">#define CISTPL_FUNCE_LAN_CONNECTOR	0x05</span>

<span class="cm">/* LAN technologies */</span>
<span class="cp">#define CISTPL_LAN_TECH_ARCNET		0x01</span>
<span class="cp">#define CISTPL_LAN_TECH_ETHERNET	0x02</span>
<span class="cp">#define CISTPL_LAN_TECH_TOKENRING	0x03</span>
<span class="cp">#define CISTPL_LAN_TECH_LOCALTALK	0x04</span>
<span class="cp">#define CISTPL_LAN_TECH_FDDI		0x05</span>
<span class="cp">#define CISTPL_LAN_TECH_ATM		0x06</span>
<span class="cp">#define CISTPL_LAN_TECH_WIRELESS	0x07</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_lan_tech_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">tech</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_lan_tech_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_lan_speed_t</span> <span class="p">{</span>
    <span class="n">u_int</span>	<span class="n">speed</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_lan_speed_t</span><span class="p">;</span>

<span class="cm">/* LAN media definitions */</span>
<span class="cp">#define CISTPL_LAN_MEDIA_UTP		0x01</span>
<span class="cp">#define CISTPL_LAN_MEDIA_STP		0x02</span>
<span class="cp">#define CISTPL_LAN_MEDIA_THIN_COAX	0x03</span>
<span class="cp">#define CISTPL_LAN_MEDIA_THICK_COAX	0x04</span>
<span class="cp">#define CISTPL_LAN_MEDIA_FIBER		0x05</span>
<span class="cp">#define CISTPL_LAN_MEDIA_900MHZ		0x06</span>
<span class="cp">#define CISTPL_LAN_MEDIA_2GHZ		0x07</span>
<span class="cp">#define CISTPL_LAN_MEDIA_5GHZ		0x08</span>
<span class="cp">#define CISTPL_LAN_MEDIA_DIFF_IR	0x09</span>
<span class="cp">#define CISTPL_LAN_MEDIA_PTP_IR		0x0a</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_lan_media_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">media</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_lan_media_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_lan_node_id_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">nb</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">id</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_lan_node_id_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_lan_connector_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">code</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_lan_connector_t</span><span class="p">;</span>

<span class="cm">/*======================================================================</span>

<span class="cm">    IDE Function Extension Tuples</span>

<span class="cm">======================================================================*/</span>

<span class="cp">#define CISTPL_IDE_INTERFACE		0x01</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_ide_interface_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">interface</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_ide_interface_t</span><span class="p">;</span>

<span class="cm">/* First feature byte */</span>
<span class="cp">#define CISTPL_IDE_SILICON		0x04</span>
<span class="cp">#define CISTPL_IDE_UNIQUE		0x08</span>
<span class="cp">#define CISTPL_IDE_DUAL			0x10</span>

<span class="cm">/* Second feature byte */</span>
<span class="cp">#define CISTPL_IDE_HAS_SLEEP		0x01</span>
<span class="cp">#define CISTPL_IDE_HAS_STANDBY		0x02</span>
<span class="cp">#define CISTPL_IDE_HAS_IDLE		0x04</span>
<span class="cp">#define CISTPL_IDE_LOW_POWER		0x08</span>
<span class="cp">#define CISTPL_IDE_REG_INHIBIT		0x10</span>
<span class="cp">#define CISTPL_IDE_HAS_INDEX		0x20</span>
<span class="cp">#define CISTPL_IDE_IOIS16		0x40</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_ide_feature_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">feature1</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">feature2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_ide_feature_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_FUNCE_IDE_IFACE		0x01</span>
<span class="cp">#define CISTPL_FUNCE_IDE_MASTER		0x02</span>
<span class="cp">#define CISTPL_FUNCE_IDE_SLAVE		0x03</span>

<span class="cm">/*======================================================================</span>

<span class="cm">    Configuration Table Entries</span>

<span class="cm">======================================================================*/</span>

<span class="cp">#define CISTPL_BAR_SPACE	0x07</span>
<span class="cp">#define CISTPL_BAR_SPACE_IO	0x10</span>
<span class="cp">#define CISTPL_BAR_PREFETCH	0x20</span>
<span class="cp">#define CISTPL_BAR_CACHEABLE	0x40</span>
<span class="cp">#define CISTPL_BAR_1MEG_MAP	0x80</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_bar_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">attr</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_bar_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_config_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">last_idx</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">base</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">rmask</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="n">u_char</span>	<span class="n">subtuples</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_config_t</span><span class="p">;</span>

<span class="cm">/* These are bits in the &#39;present&#39; field, and indices in &#39;param&#39; */</span>
<span class="cp">#define CISTPL_POWER_VNOM	0</span>
<span class="cp">#define CISTPL_POWER_VMIN	1</span>
<span class="cp">#define CISTPL_POWER_VMAX	2</span>
<span class="cp">#define CISTPL_POWER_ISTATIC	3</span>
<span class="cp">#define CISTPL_POWER_IAVG	4</span>
<span class="cp">#define CISTPL_POWER_IPEAK	5</span>
<span class="cp">#define CISTPL_POWER_IDOWN	6</span>

<span class="cp">#define CISTPL_POWER_HIGHZ_OK	0x01</span>
<span class="cp">#define CISTPL_POWER_HIGHZ_REQ	0x02</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_power_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">present</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">flags</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">param</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_power_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_timing_t</span> <span class="p">{</span>
    <span class="n">u_int</span>	<span class="n">wait</span><span class="p">,</span> <span class="n">waitscale</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">ready</span><span class="p">,</span> <span class="n">rdyscale</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">reserved</span><span class="p">,</span> <span class="n">rsvscale</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_timing_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_IO_LINES_MASK	0x1f</span>
<span class="cp">#define CISTPL_IO_8BIT		0x20</span>
<span class="cp">#define CISTPL_IO_16BIT		0x40</span>
<span class="cp">#define CISTPL_IO_RANGE		0x80</span>

<span class="cp">#define CISTPL_IO_MAX_WIN	16</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_io_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">flags</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">nwin</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_int</span>	<span class="n">base</span><span class="p">;</span>
	<span class="n">u_int</span>	<span class="n">len</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">win</span><span class="p">[</span><span class="n">CISTPL_IO_MAX_WIN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_io_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_irq_t</span> <span class="p">{</span>
    <span class="n">u_int</span>	<span class="n">IRQInfo1</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">IRQInfo2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_irq_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_MEM_MAX_WIN	8</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_mem_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">flags</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">nwin</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_int</span>	<span class="n">len</span><span class="p">;</span>
	<span class="n">u_int</span>	<span class="n">card_addr</span><span class="p">;</span>
	<span class="n">u_int</span>	<span class="n">host_addr</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">win</span><span class="p">[</span><span class="n">CISTPL_MEM_MAX_WIN</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_mem_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_CFTABLE_DEFAULT		0x0001</span>
<span class="cp">#define CISTPL_CFTABLE_BVDS		0x0002</span>
<span class="cp">#define CISTPL_CFTABLE_WP		0x0004</span>
<span class="cp">#define CISTPL_CFTABLE_RDYBSY		0x0008</span>
<span class="cp">#define CISTPL_CFTABLE_MWAIT		0x0010</span>
<span class="cp">#define CISTPL_CFTABLE_AUDIO		0x0800</span>
<span class="cp">#define CISTPL_CFTABLE_READONLY		0x1000</span>
<span class="cp">#define CISTPL_CFTABLE_PWRDOWN		0x2000</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_cftable_entry_t</span> <span class="p">{</span>
    <span class="n">u_char</span>		<span class="n">index</span><span class="p">;</span>
    <span class="n">u_short</span>		<span class="n">flags</span><span class="p">;</span>
    <span class="n">u_char</span>		<span class="n">interface</span><span class="p">;</span>
    <span class="n">cistpl_power_t</span>	<span class="n">vcc</span><span class="p">,</span> <span class="n">vpp1</span><span class="p">,</span> <span class="n">vpp2</span><span class="p">;</span>
    <span class="n">cistpl_timing_t</span>	<span class="n">timing</span><span class="p">;</span>
    <span class="n">cistpl_io_t</span>		<span class="n">io</span><span class="p">;</span>
    <span class="n">cistpl_irq_t</span>	<span class="n">irq</span><span class="p">;</span>
    <span class="n">cistpl_mem_t</span>	<span class="n">mem</span><span class="p">;</span>
    <span class="n">u_char</span>		<span class="n">subtuples</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_cftable_entry_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_CFTABLE_MASTER		0x000100</span>
<span class="cp">#define CISTPL_CFTABLE_INVALIDATE	0x000200</span>
<span class="cp">#define CISTPL_CFTABLE_VGA_PALETTE	0x000400</span>
<span class="cp">#define CISTPL_CFTABLE_PARITY		0x000800</span>
<span class="cp">#define CISTPL_CFTABLE_WAIT		0x001000</span>
<span class="cp">#define CISTPL_CFTABLE_SERR		0x002000</span>
<span class="cp">#define CISTPL_CFTABLE_FAST_BACK	0x004000</span>
<span class="cp">#define CISTPL_CFTABLE_BINARY_AUDIO	0x010000</span>
<span class="cp">#define CISTPL_CFTABLE_PWM_AUDIO	0x020000</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_cftable_entry_cb_t</span> <span class="p">{</span>
    <span class="n">u_char</span>		<span class="n">index</span><span class="p">;</span>
    <span class="n">u_int</span>		<span class="n">flags</span><span class="p">;</span>
    <span class="n">cistpl_power_t</span>	<span class="n">vcc</span><span class="p">,</span> <span class="n">vpp1</span><span class="p">,</span> <span class="n">vpp2</span><span class="p">;</span>
    <span class="n">u_char</span>		<span class="n">io</span><span class="p">;</span>
    <span class="n">cistpl_irq_t</span>	<span class="n">irq</span><span class="p">;</span>
    <span class="n">u_char</span>		<span class="n">mem</span><span class="p">;</span>
    <span class="n">u_char</span>		<span class="n">subtuples</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_cftable_entry_cb_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_device_geo_t</span> <span class="p">{</span>
    <span class="n">u_char</span>		<span class="n">ngeo</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_char</span>		<span class="n">buswidth</span><span class="p">;</span>
	<span class="n">u_int</span>		<span class="n">erase_block</span><span class="p">;</span>
	<span class="n">u_int</span>		<span class="n">read_block</span><span class="p">;</span>
	<span class="n">u_int</span>		<span class="n">write_block</span><span class="p">;</span>
	<span class="n">u_int</span>		<span class="n">partition</span><span class="p">;</span>
	<span class="n">u_int</span>		<span class="n">interleave</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">geo</span><span class="p">[</span><span class="n">CISTPL_MAX_DEVICES</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_device_geo_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_vers_2_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">vers</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">comply</span><span class="p">;</span>
    <span class="n">u_short</span>	<span class="n">dindex</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">vspec8</span><span class="p">,</span> <span class="n">vspec9</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">nhdr</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">vendor</span><span class="p">,</span> <span class="n">info</span><span class="p">;</span>
    <span class="kt">char</span>	<span class="n">str</span><span class="p">[</span><span class="mi">244</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_vers_2_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_org_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">data_org</span><span class="p">;</span>
    <span class="kt">char</span>	<span class="n">desc</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="p">}</span> <span class="n">cistpl_org_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_ORG_FS		0x00</span>
<span class="cp">#define CISTPL_ORG_APPSPEC	0x01</span>
<span class="cp">#define CISTPL_ORG_XIP		0x02</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">cistpl_format_t</span> <span class="p">{</span>
    <span class="n">u_char</span>	<span class="n">type</span><span class="p">;</span>
    <span class="n">u_char</span>	<span class="n">edc</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">offset</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">length</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cistpl_format_t</span><span class="p">;</span>

<span class="cp">#define CISTPL_FORMAT_DISK	0x00</span>
<span class="cp">#define CISTPL_FORMAT_MEM	0x01</span>

<span class="cp">#define CISTPL_EDC_NONE		0x00</span>
<span class="cp">#define CISTPL_EDC_CKSUM	0x01</span>
<span class="cp">#define CISTPL_EDC_CRC		0x02</span>
<span class="cp">#define CISTPL_EDC_PCC		0x03</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">cisparse_t</span> <span class="p">{</span>
    <span class="n">cistpl_device_t</span>		<span class="n">device</span><span class="p">;</span>
    <span class="n">cistpl_checksum_t</span>		<span class="n">checksum</span><span class="p">;</span>
    <span class="n">cistpl_longlink_t</span>		<span class="n">longlink</span><span class="p">;</span>
    <span class="n">cistpl_longlink_mfc_t</span>	<span class="n">longlink_mfc</span><span class="p">;</span>
    <span class="n">cistpl_vers_1_t</span>		<span class="n">version_1</span><span class="p">;</span>
    <span class="n">cistpl_altstr_t</span>		<span class="n">altstr</span><span class="p">;</span>
    <span class="n">cistpl_jedec_t</span>		<span class="n">jedec</span><span class="p">;</span>
    <span class="n">cistpl_manfid_t</span>		<span class="n">manfid</span><span class="p">;</span>
    <span class="n">cistpl_funcid_t</span>		<span class="n">funcid</span><span class="p">;</span>
    <span class="n">cistpl_funce_t</span>		<span class="n">funce</span><span class="p">;</span>
    <span class="n">cistpl_bar_t</span>		<span class="n">bar</span><span class="p">;</span>
    <span class="n">cistpl_config_t</span>		<span class="n">config</span><span class="p">;</span>
    <span class="n">cistpl_cftable_entry_t</span>	<span class="n">cftable_entry</span><span class="p">;</span>
    <span class="n">cistpl_cftable_entry_cb_t</span>	<span class="n">cftable_entry_cb</span><span class="p">;</span>
    <span class="n">cistpl_device_geo_t</span>		<span class="n">device_geo</span><span class="p">;</span>
    <span class="n">cistpl_vers_2_t</span>		<span class="n">vers_2</span><span class="p">;</span>
    <span class="n">cistpl_org_t</span>		<span class="n">org</span><span class="p">;</span>
    <span class="n">cistpl_format_t</span>		<span class="n">format</span><span class="p">;</span>
<span class="p">}</span> <span class="n">cisparse_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">tuple_t</span> <span class="p">{</span>
    <span class="n">u_int</span>	<span class="n">Attributes</span><span class="p">;</span>
    <span class="n">cisdata_t</span> 	<span class="n">DesiredTuple</span><span class="p">;</span>
    <span class="n">u_int</span>	<span class="n">Flags</span><span class="p">;</span>		<span class="cm">/* internal use */</span>
    <span class="n">u_int</span>	<span class="n">LinkOffset</span><span class="p">;</span>	<span class="cm">/* internal use */</span>
    <span class="n">u_int</span>	<span class="n">CISOffset</span><span class="p">;</span>	<span class="cm">/* internal use */</span>
    <span class="n">cisdata_t</span>	<span class="n">TupleCode</span><span class="p">;</span>
    <span class="n">cisdata_t</span>	<span class="n">TupleLink</span><span class="p">;</span>
    <span class="n">cisdata_t</span>	<span class="n">TupleOffset</span><span class="p">;</span>
    <span class="n">cisdata_t</span>	<span class="n">TupleDataMax</span><span class="p">;</span>
    <span class="n">cisdata_t</span>	<span class="n">TupleDataLen</span><span class="p">;</span>
    <span class="n">cisdata_t</span>	<span class="o">*</span><span class="n">TupleData</span><span class="p">;</span>
<span class="p">}</span> <span class="n">tuple_t</span><span class="p">;</span>

<span class="cm">/* Special cisdata_t value */</span>
<span class="cp">#define RETURN_FIRST_TUPLE	0xff</span>

<span class="cm">/* Attributes for tuple calls */</span>
<span class="cp">#define TUPLE_RETURN_LINK	0x01</span>
<span class="cp">#define TUPLE_RETURN_COMMON	0x02</span>

<span class="cp">#define CISTPL_MAX_CIS_SIZE	0x200</span>

<span class="cp">#endif </span><span class="cm">/* LINUX_CISTPL_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
