<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › ssb › ssb_driver_chipcommon.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>ssb_driver_chipcommon.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef LINUX_SSB_CHIPCO_H_</span>
<span class="cp">#define LINUX_SSB_CHIPCO_H_</span>

<span class="cm">/* SonicsSiliconBackplane CHIPCOMMON core hardware definitions</span>
<span class="cm"> *</span>
<span class="cm"> * The chipcommon core provides chip identification, SB control,</span>
<span class="cm"> * jtag, 0/1/2 uarts, clock frequency control, a watchdog interrupt timer,</span>
<span class="cm"> * gpio interface, extbus, and support for serial and parallel flashes.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2005, Broadcom Corporation</span>
<span class="cm"> * Copyright 2006, Michael Buesch &lt;m@bues.ch&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Licensed under the GPL version 2. See COPYING for details.</span>
<span class="cm"> */</span>

<span class="cm">/** ChipCommon core registers. **/</span>

<span class="cp">#define SSB_CHIPCO_CHIPID		0x0000</span>
<span class="cp">#define  SSB_CHIPCO_IDMASK		0x0000FFFF</span>
<span class="cp">#define  SSB_CHIPCO_REVMASK		0x000F0000</span>
<span class="cp">#define  SSB_CHIPCO_REVSHIFT		16</span>
<span class="cp">#define  SSB_CHIPCO_PACKMASK		0x00F00000</span>
<span class="cp">#define  SSB_CHIPCO_PACKSHIFT		20</span>
<span class="cp">#define  SSB_CHIPCO_NRCORESMASK		0x0F000000</span>
<span class="cp">#define  SSB_CHIPCO_NRCORESSHIFT	24</span>
<span class="cp">#define SSB_CHIPCO_CAP	 		0x0004		</span><span class="cm">/* Capabilities */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_NRUART		0x00000003	</span><span class="cm">/* # of UARTs */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_MIPSEB		0x00000004	</span><span class="cm">/* MIPS in BigEndian Mode */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_UARTCLK		0x00000018	</span><span class="cm">/* UART clock select */</span><span class="cp"></span>
<span class="cp">#define   SSB_CHIPCO_CAP_UARTCLK_INT	0x00000008	</span><span class="cm">/* UARTs are driven by internal divided clock */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_UARTGPIO	0x00000020	</span><span class="cm">/* UARTs on GPIO 15-12 */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_EXTBUS		0x000000C0	</span><span class="cm">/* External buses present */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_FLASHT		0x00000700	</span><span class="cm">/* Flash Type */</span><span class="cp"></span>
<span class="cp">#define   SSB_CHIPCO_FLASHT_NONE	0x00000000	</span><span class="cm">/* No flash */</span><span class="cp"></span>
<span class="cp">#define   SSB_CHIPCO_FLASHT_STSER	0x00000100	</span><span class="cm">/* ST serial flash */</span><span class="cp"></span>
<span class="cp">#define   SSB_CHIPCO_FLASHT_ATSER	0x00000200	</span><span class="cm">/* Atmel serial flash */</span><span class="cp"></span>
<span class="cp">#define	  SSB_CHIPCO_FLASHT_PARA	0x00000700	</span><span class="cm">/* Parallel flash */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_PLLT		0x00038000	</span><span class="cm">/* PLL Type */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_NONE		0x00000000</span>
<span class="cp">#define   SSB_PLLTYPE_1			0x00010000	</span><span class="cm">/* 48Mhz base, 3 dividers */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_2			0x00020000	</span><span class="cm">/* 48Mhz, 4 dividers */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_3			0x00030000	</span><span class="cm">/* 25Mhz, 2 dividers */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_4			0x00008000	</span><span class="cm">/* 48Mhz, 4 dividers */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_5			0x00018000	</span><span class="cm">/* 25Mhz, 4 dividers */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_6			0x00028000	</span><span class="cm">/* 100/200 or 120/240 only */</span><span class="cp"></span>
<span class="cp">#define   SSB_PLLTYPE_7			0x00038000	</span><span class="cm">/* 25Mhz, 4 dividers */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_PCTL		0x00040000	</span><span class="cm">/* Power Control */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_OTPS		0x00380000	</span><span class="cm">/* OTP size */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_OTPS_SHIFT	19</span>
<span class="cp">#define  SSB_CHIPCO_CAP_OTPS_BASE	5</span>
<span class="cp">#define  SSB_CHIPCO_CAP_JTAGM		0x00400000	</span><span class="cm">/* JTAG master present */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_BROM		0x00800000	</span><span class="cm">/* Internal boot ROM active */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_64BIT		0x08000000	</span><span class="cm">/* 64-bit Backplane */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_PMU		0x10000000	</span><span class="cm">/* PMU available (rev &gt;= 20) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_ECI		0x20000000	</span><span class="cm">/* ECI available (rev &gt;= 20) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CAP_SPROM		0x40000000	</span><span class="cm">/* SPROM present */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CORECTL		0x0008</span>
<span class="cp">#define  SSB_CHIPCO_CORECTL_UARTCLK0	0x00000001	</span><span class="cm">/* Drive UART with internal clock */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_CORECTL_SE		0x00000002	</span><span class="cm">/* sync clk out enable (corerev &gt;= 3) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CORECTL_UARTCLKEN	0x00000008	</span><span class="cm">/* UART clock enable (rev &gt;= 21) */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_BIST			0x000C</span>
<span class="cp">#define SSB_CHIPCO_OTPS			0x0010		</span><span class="cm">/* OTP status */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_OTPS_PROGFAIL	0x80000000</span>
<span class="cp">#define	 SSB_CHIPCO_OTPS_PROTECT	0x00000007</span>
<span class="cp">#define	 SSB_CHIPCO_OTPS_HW_PROTECT	0x00000001</span>
<span class="cp">#define	 SSB_CHIPCO_OTPS_SW_PROTECT	0x00000002</span>
<span class="cp">#define	 SSB_CHIPCO_OTPS_CID_PROTECT	0x00000004</span>
<span class="cp">#define SSB_CHIPCO_OTPC			0x0014		</span><span class="cm">/* OTP control */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_OTPC_RECWAIT	0xFF000000</span>
<span class="cp">#define	 SSB_CHIPCO_OTPC_PROGWAIT	0x00FFFF00</span>
<span class="cp">#define	 SSB_CHIPCO_OTPC_PRW_SHIFT	8</span>
<span class="cp">#define	 SSB_CHIPCO_OTPC_MAXFAIL	0x00000038</span>
<span class="cp">#define	 SSB_CHIPCO_OTPC_VSEL		0x00000006</span>
<span class="cp">#define	 SSB_CHIPCO_OTPC_SELVL		0x00000001</span>
<span class="cp">#define SSB_CHIPCO_OTPP			0x0018		</span><span class="cm">/* OTP prog */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_COL		0x000000FF</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_ROW		0x0000FF00</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_ROW_SHIFT	8</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_READERR	0x10000000</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_VALUE		0x20000000</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_READ		0x40000000</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_START		0x80000000</span>
<span class="cp">#define	 SSB_CHIPCO_OTPP_BUSY		0x80000000</span>
<span class="cp">#define SSB_CHIPCO_IRQSTAT		0x0020</span>
<span class="cp">#define SSB_CHIPCO_IRQMASK		0x0024</span>
<span class="cp">#define	 SSB_CHIPCO_IRQ_GPIO		0x00000001	</span><span class="cm">/* gpio intr */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_IRQ_EXT		0x00000002	</span><span class="cm">/* ro: ext intr pin (corerev &gt;= 3) */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_IRQ_WDRESET		0x80000000	</span><span class="cm">/* watchdog reset occurred */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHIPCTL		0x0028		</span><span class="cm">/* Rev &gt;= 11 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHIPSTAT		0x002C		</span><span class="cm">/* Rev &gt;= 11 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_JCMD			0x0030		</span><span class="cm">/* Rev &gt;= 10 only */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_JCMD_START		0x80000000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_BUSY		0x80000000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_PAUSE		0x40000000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_MASK	0x0000F000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_IRDR	0x00000000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_DR	0x00001000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_IR	0x00002000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_RESET	0x00003000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_IRPDR	0x00004000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_ACC_PDR	0x00005000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD0_IRW_MASK	0x00000F00</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_MASK	0x000F0000	</span><span class="cm">/* Changes for corerev 11 */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_IRDR	0x00000000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_DR		0x00010000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_IR		0x00020000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_RESET	0x00030000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_IRPDR	0x00040000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_ACC_PDR	0x00050000</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_IRW_MASK	0x00001F00</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_IRW_SHIFT	8</span>
<span class="cp">#define  SSB_CHIPCO_JCMD_DRW_MASK	0x0000003F</span>
<span class="cp">#define SSB_CHIPCO_JIR			0x0034		</span><span class="cm">/* Rev &gt;= 10 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_JDR			0x0038		</span><span class="cm">/* Rev &gt;= 10 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_JCTL			0x003C		</span><span class="cm">/* Rev &gt;= 10 only */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_JCTL_FORCE_CLK	4		</span><span class="cm">/* Force clock */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_JCTL_EXT_EN		2		</span><span class="cm">/* Enable external targets */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_JCTL_EN		1		</span><span class="cm">/* Enable Jtag master */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL		0x0040</span>
<span class="cp">#define  SSB_CHIPCO_FLASHCTL_START	0x80000000</span>
<span class="cp">#define  SSB_CHIPCO_FLASHCTL_BUSY	SSB_CHIPCO_FLASHCTL_START</span>
<span class="cp">#define SSB_CHIPCO_FLASHADDR		0x0044</span>
<span class="cp">#define SSB_CHIPCO_FLASHDATA		0x0048</span>
<span class="cp">#define SSB_CHIPCO_BCAST_ADDR		0x0050</span>
<span class="cp">#define SSB_CHIPCO_BCAST_DATA		0x0054</span>
<span class="cp">#define SSB_CHIPCO_GPIOPULLUP		0x0058		</span><span class="cm">/* Rev &gt;= 20 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_GPIOPULLDOWN		0x005C		</span><span class="cm">/* Rev &gt;= 20 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_GPIOIN		0x0060</span>
<span class="cp">#define SSB_CHIPCO_GPIOOUT		0x0064</span>
<span class="cp">#define SSB_CHIPCO_GPIOOUTEN		0x0068</span>
<span class="cp">#define SSB_CHIPCO_GPIOCTL		0x006C</span>
<span class="cp">#define SSB_CHIPCO_GPIOPOL		0x0070</span>
<span class="cp">#define SSB_CHIPCO_GPIOIRQ		0x0074</span>
<span class="cp">#define SSB_CHIPCO_WATCHDOG		0x0080</span>
<span class="cp">#define SSB_CHIPCO_GPIOTIMER		0x0088		</span><span class="cm">/* LED powersave (corerev &gt;= 16) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_GPIOTIMER_OFFTIME	0x0000FFFF</span>
<span class="cp">#define  SSB_CHIPCO_GPIOTIMER_OFFTIME_SHIFT	0</span>
<span class="cp">#define  SSB_CHIPCO_GPIOTIMER_ONTIME	0xFFFF0000</span>
<span class="cp">#define  SSB_CHIPCO_GPIOTIMER_ONTIME_SHIFT	16</span>
<span class="cp">#define SSB_CHIPCO_GPIOTOUTM		0x008C		</span><span class="cm">/* LED powersave (corerev &gt;= 16) */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CLOCK_N		0x0090</span>
<span class="cp">#define SSB_CHIPCO_CLOCK_SB		0x0094</span>
<span class="cp">#define SSB_CHIPCO_CLOCK_PCI		0x0098</span>
<span class="cp">#define SSB_CHIPCO_CLOCK_M2		0x009C</span>
<span class="cp">#define SSB_CHIPCO_CLOCK_MIPS		0x00A0</span>
<span class="cp">#define SSB_CHIPCO_CLKDIV		0x00A4		</span><span class="cm">/* Rev &gt;= 3 only */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_SFLASH	0x0F000000</span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_SFLASH_SHIFT	24</span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_OTP		0x000F0000</span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_OTP_SHIFT	16</span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_JTAG		0x00000F00</span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_JTAG_SHIFT	8</span>
<span class="cp">#define	 SSB_CHIPCO_CLKDIV_UART		0x000000FF</span>
<span class="cp">#define SSB_CHIPCO_PLLONDELAY		0x00B0		</span><span class="cm">/* Rev &gt;= 4 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FREFSELDELAY		0x00B4		</span><span class="cm">/* Rev &gt;= 4 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_SLOWCLKCTL		0x00B8		</span><span class="cm">/* 6 &lt;= Rev &lt;= 9 only */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_SRC	0x00000007	</span><span class="cm">/* slow clock source mask */</span><span class="cp"></span>
<span class="cp">#define	  SSB_CHIPCO_SLOWCLKCTL_SRC_LPO		0x00000000	</span><span class="cm">/* source of slow clock is LPO */</span><span class="cp"></span>
<span class="cp">#define   SSB_CHIPCO_SLOWCLKCTL_SRC_XTAL	0x00000001	</span><span class="cm">/* source of slow clock is crystal */</span><span class="cp"></span>
<span class="cp">#define	  SSB_CHIPCO_SLOECLKCTL_SRC_PCI		0x00000002	</span><span class="cm">/* source of slow clock is PCI */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_LPOFREQ	0x00000200	</span><span class="cm">/* LPOFreqSel, 1: 160Khz, 0: 32KHz */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_LPOPD	0x00000400	</span><span class="cm">/* LPOPowerDown, 1: LPO is disabled, 0: LPO is enabled */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_FSLOW	0x00000800	</span><span class="cm">/* ForceSlowClk, 1: sb/cores running on slow clock, 0: power logic control */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_IPLL	0x00001000	</span><span class="cm">/* IgnorePllOffReq, 1/0: power logic ignores/honors PLL clock disable requests from core */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_ENXTAL	0x00002000	</span><span class="cm">/* XtalControlEn, 1/0: power logic does/doesn&#39;t disable crystal when appropriate */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_XTALPU	0x00004000	</span><span class="cm">/* XtalPU (RO), 1/0: crystal running/disabled */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_CLKDIV	0xFFFF0000	</span><span class="cm">/* ClockDivider (SlowClk = 1/(4+divisor)) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SLOWCLKCTL_CLKDIV_SHIFT	16</span>
<span class="cp">#define SSB_CHIPCO_SYSCLKCTL		0x00C0		</span><span class="cm">/* Rev &gt;= 3 only */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_SYSCLKCTL_IDLPEN	0x00000001	</span><span class="cm">/* ILPen: Enable Idle Low Power */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_SYSCLKCTL_ALPEN	0x00000002	</span><span class="cm">/* ALPen: Enable Active Low Power */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_SYSCLKCTL_PLLEN	0x00000004	</span><span class="cm">/* ForcePLLOn */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_SYSCLKCTL_FORCEALP	0x00000008	</span><span class="cm">/* Force ALP (or HT if ALPen is not set */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_SYSCLKCTL_FORCEHT	0x00000010	</span><span class="cm">/* Force HT */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SYSCLKCTL_CLKDIV	0xFFFF0000	</span><span class="cm">/* ClkDiv  (ILP = 1/(4+divisor)) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_SYSCLKCTL_CLKDIV_SHIFT	16</span>
<span class="cp">#define SSB_CHIPCO_CLKSTSTR		0x00C4		</span><span class="cm">/* Rev &gt;= 3 only */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PCMCIA_CFG		0x0100</span>
<span class="cp">#define SSB_CHIPCO_PCMCIA_MEMWAIT	0x0104</span>
<span class="cp">#define SSB_CHIPCO_PCMCIA_ATTRWAIT	0x0108</span>
<span class="cp">#define SSB_CHIPCO_PCMCIA_IOWAIT	0x010C</span>
<span class="cp">#define SSB_CHIPCO_IDE_CFG		0x0110</span>
<span class="cp">#define SSB_CHIPCO_IDE_MEMWAIT		0x0114</span>
<span class="cp">#define SSB_CHIPCO_IDE_ATTRWAIT		0x0118</span>
<span class="cp">#define SSB_CHIPCO_IDE_IOWAIT		0x011C</span>
<span class="cp">#define SSB_CHIPCO_PROG_CFG		0x0120</span>
<span class="cp">#define SSB_CHIPCO_PROG_WAITCNT		0x0124</span>
<span class="cp">#define SSB_CHIPCO_FLASH_CFG		0x0128</span>
<span class="cp">#define SSB_CHIPCO_FLASH_WAITCNT	0x012C</span>
<span class="cp">#define SSB_CHIPCO_CLKCTLST		0x01E0 </span><span class="cm">/* Clock control and status (rev &gt;= 20) */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_FORCEALP	0x00000001 </span><span class="cm">/* Force ALP request */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_FORCEHT	0x00000002 </span><span class="cm">/* Force HT request */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_FORCEILP	0x00000004 </span><span class="cm">/* Force ILP request */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_HAVEALPREQ	0x00000008 </span><span class="cm">/* ALP available request */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_HAVEHTREQ	0x00000010 </span><span class="cm">/* HT available request */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_HWCROFF	0x00000020 </span><span class="cm">/* Force HW clock request off */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_HAVEALP	0x00010000 </span><span class="cm">/* ALP available */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_HAVEHT	0x00020000 </span><span class="cm">/* HT available */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_4328A0_HAVEHT	0x00010000 </span><span class="cm">/* 4328a0 has reversed bits */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_CLKCTLST_4328A0_HAVEALP	0x00020000 </span><span class="cm">/* 4328a0 has reversed bits */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_HW_WORKAROUND	0x01E4 </span><span class="cm">/* Hardware workaround (rev &gt;= 20) */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_UART0_DATA		0x0300</span>
<span class="cp">#define SSB_CHIPCO_UART0_IMR		0x0304</span>
<span class="cp">#define SSB_CHIPCO_UART0_FCR		0x0308</span>
<span class="cp">#define SSB_CHIPCO_UART0_LCR		0x030C</span>
<span class="cp">#define SSB_CHIPCO_UART0_MCR		0x0310</span>
<span class="cp">#define SSB_CHIPCO_UART0_LSR		0x0314</span>
<span class="cp">#define SSB_CHIPCO_UART0_MSR		0x0318</span>
<span class="cp">#define SSB_CHIPCO_UART0_SCRATCH	0x031C</span>
<span class="cp">#define SSB_CHIPCO_UART1_DATA		0x0400</span>
<span class="cp">#define SSB_CHIPCO_UART1_IMR		0x0404</span>
<span class="cp">#define SSB_CHIPCO_UART1_FCR		0x0408</span>
<span class="cp">#define SSB_CHIPCO_UART1_LCR		0x040C</span>
<span class="cp">#define SSB_CHIPCO_UART1_MCR		0x0410</span>
<span class="cp">#define SSB_CHIPCO_UART1_LSR		0x0414</span>
<span class="cp">#define SSB_CHIPCO_UART1_MSR		0x0418</span>
<span class="cp">#define SSB_CHIPCO_UART1_SCRATCH	0x041C</span>
<span class="cm">/* PMU registers (rev &gt;= 20) */</span>
<span class="cp">#define SSB_CHIPCO_PMU_CTL			0x0600 </span><span class="cm">/* PMU control */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_ILP_DIV		0xFFFF0000 </span><span class="cm">/* ILP div mask */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_ILP_DIV_SHIFT	16</span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_NOILPONW		0x00000200 </span><span class="cm">/* No ILP on wait */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_HTREQEN		0x00000100 </span><span class="cm">/* HT req enable */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_ALPREQEN		0x00000080 </span><span class="cm">/* ALP req enable */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_XTALFREQ		0x0000007C </span><span class="cm">/* Crystal freq */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_XTALFREQ_SHIFT	2</span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_ILPDIVEN		0x00000002 </span><span class="cm">/* ILP div enable */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CTL_LPOSEL		0x00000001 </span><span class="cm">/* LPO sel */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_CAP			0x0604 </span><span class="cm">/* PMU capabilities */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_CAP_REVISION		0x000000FF </span><span class="cm">/* Revision mask */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_STAT			0x0608 </span><span class="cm">/* PMU status */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_STAT_INTPEND		0x00000040 </span><span class="cm">/* Interrupt pending */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_STAT_SBCLKST		0x00000030 </span><span class="cm">/* Backplane clock status? */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_STAT_HAVEALP		0x00000008 </span><span class="cm">/* ALP available */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_STAT_HAVEHT		0x00000004 </span><span class="cm">/* HT available */</span><span class="cp"></span>
<span class="cp">#define  SSB_CHIPCO_PMU_STAT_RESINIT		0x00000003 </span><span class="cm">/* Res init */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_STAT			0x060C </span><span class="cm">/* PMU res status */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_PEND			0x0610 </span><span class="cm">/* PMU res pending */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_TIMER			0x0614 </span><span class="cm">/* PMU timer */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_MINRES_MSK		0x0618 </span><span class="cm">/* PMU min res mask */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_MAXRES_MSK		0x061C </span><span class="cm">/* PMU max res mask */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_TABSEL		0x0620 </span><span class="cm">/* PMU res table sel */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_DEPMSK		0x0624 </span><span class="cm">/* PMU res dep mask */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_UPDNTM		0x0628 </span><span class="cm">/* PMU res updown timer */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_TIMER		0x062C </span><span class="cm">/* PMU res timer */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_CLKSTRETCH		0x0630 </span><span class="cm">/* PMU clockstretch */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_WATCHDOG			0x0634 </span><span class="cm">/* PMU watchdog */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_REQTS		0x0640 </span><span class="cm">/* PMU res req timer sel */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_REQT			0x0644 </span><span class="cm">/* PMU res req timer */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_PMU_RES_REQM			0x0648 </span><span class="cm">/* PMU res req mask */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHIPCTL_ADDR			0x0650</span>
<span class="cp">#define SSB_CHIPCO_CHIPCTL_DATA			0x0654</span>
<span class="cp">#define SSB_CHIPCO_REGCTL_ADDR			0x0658</span>
<span class="cp">#define SSB_CHIPCO_REGCTL_DATA			0x065C</span>
<span class="cp">#define SSB_CHIPCO_PLLCTL_ADDR			0x0660</span>
<span class="cp">#define SSB_CHIPCO_PLLCTL_DATA			0x0664</span>



<span class="cm">/** PMU PLL registers */</span>

<span class="cm">/* PMU rev 0 PLL registers */</span>
<span class="cp">#define SSB_PMU0_PLLCTL0			0</span>
<span class="cp">#define  SSB_PMU0_PLLCTL0_PDIV_MSK		0x00000001</span>
<span class="cp">#define  SSB_PMU0_PLLCTL0_PDIV_FREQ		25000 </span><span class="cm">/* kHz */</span><span class="cp"></span>
<span class="cp">#define SSB_PMU0_PLLCTL1			1</span>
<span class="cp">#define  SSB_PMU0_PLLCTL1_WILD_IMSK		0xF0000000 </span><span class="cm">/* Wild int mask (low nibble) */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU0_PLLCTL1_WILD_IMSK_SHIFT	28</span>
<span class="cp">#define  SSB_PMU0_PLLCTL1_WILD_FMSK		0x0FFFFF00 </span><span class="cm">/* Wild frac mask */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU0_PLLCTL1_WILD_FMSK_SHIFT	8</span>
<span class="cp">#define  SSB_PMU0_PLLCTL1_STOPMOD		0x00000040 </span><span class="cm">/* Stop mod */</span><span class="cp"></span>
<span class="cp">#define SSB_PMU0_PLLCTL2			2</span>
<span class="cp">#define  SSB_PMU0_PLLCTL2_WILD_IMSKHI		0x0000000F </span><span class="cm">/* Wild int mask (high nibble) */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU0_PLLCTL2_WILD_IMSKHI_SHIFT	0</span>

<span class="cm">/* PMU rev 1 PLL registers */</span>
<span class="cp">#define SSB_PMU1_PLLCTL0			0</span>
<span class="cp">#define  SSB_PMU1_PLLCTL0_P1DIV			0x00F00000 </span><span class="cm">/* P1 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL0_P1DIV_SHIFT		20</span>
<span class="cp">#define  SSB_PMU1_PLLCTL0_P2DIV			0x0F000000 </span><span class="cm">/* P2 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL0_P2DIV_SHIFT		24</span>
<span class="cp">#define SSB_PMU1_PLLCTL1			1</span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M1DIV			0x000000FF </span><span class="cm">/* M1 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M1DIV_SHIFT		0</span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M2DIV			0x0000FF00 </span><span class="cm">/* M2 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M2DIV_SHIFT		8</span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M3DIV			0x00FF0000 </span><span class="cm">/* M3 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M3DIV_SHIFT		16</span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M4DIV			0xFF000000 </span><span class="cm">/* M4 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL1_M4DIV_SHIFT		24</span>
<span class="cp">#define SSB_PMU1_PLLCTL2			2</span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_M5DIV			0x000000FF </span><span class="cm">/* M5 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_M5DIV_SHIFT		0</span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_M6DIV			0x0000FF00 </span><span class="cm">/* M6 div */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_M6DIV_SHIFT		8</span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_NDIVMODE		0x000E0000 </span><span class="cm">/* NDIV mode */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_NDIVMODE_SHIFT	17</span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_NDIVINT		0x1FF00000 </span><span class="cm">/* NDIV int */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL2_NDIVINT_SHIFT		20</span>
<span class="cp">#define SSB_PMU1_PLLCTL3			3</span>
<span class="cp">#define  SSB_PMU1_PLLCTL3_NDIVFRAC		0x00FFFFFF </span><span class="cm">/* NDIV frac */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL3_NDIVFRAC_SHIFT	0</span>
<span class="cp">#define SSB_PMU1_PLLCTL4			4</span>
<span class="cp">#define SSB_PMU1_PLLCTL5			5</span>
<span class="cp">#define  SSB_PMU1_PLLCTL5_CLKDRV		0xFFFFFF00 </span><span class="cm">/* clk drv */</span><span class="cp"></span>
<span class="cp">#define  SSB_PMU1_PLLCTL5_CLKDRV_SHIFT		8</span>

<span class="cm">/* BCM4312 PLL resource numbers. */</span>
<span class="cp">#define SSB_PMURES_4312_SWITCHER_BURST		0</span>
<span class="cp">#define SSB_PMURES_4312_SWITCHER_PWM    	1</span>
<span class="cp">#define SSB_PMURES_4312_PA_REF_LDO		2</span>
<span class="cp">#define SSB_PMURES_4312_CORE_LDO_BURST		3</span>
<span class="cp">#define SSB_PMURES_4312_CORE_LDO_PWM		4</span>
<span class="cp">#define SSB_PMURES_4312_RADIO_LDO		5</span>
<span class="cp">#define SSB_PMURES_4312_ILP_REQUEST		6</span>
<span class="cp">#define SSB_PMURES_4312_BG_FILTBYP		7</span>
<span class="cp">#define SSB_PMURES_4312_TX_FILTBYP		8</span>
<span class="cp">#define SSB_PMURES_4312_RX_FILTBYP		9</span>
<span class="cp">#define SSB_PMURES_4312_XTAL_PU			10</span>
<span class="cp">#define SSB_PMURES_4312_ALP_AVAIL		11</span>
<span class="cp">#define SSB_PMURES_4312_BB_PLL_FILTBYP		12</span>
<span class="cp">#define SSB_PMURES_4312_RF_PLL_FILTBYP		13</span>
<span class="cp">#define SSB_PMURES_4312_HT_AVAIL		14</span>

<span class="cm">/* BCM4325 PLL resource numbers. */</span>
<span class="cp">#define SSB_PMURES_4325_BUCK_BOOST_BURST	0</span>
<span class="cp">#define SSB_PMURES_4325_CBUCK_BURST		1</span>
<span class="cp">#define SSB_PMURES_4325_CBUCK_PWM		2</span>
<span class="cp">#define SSB_PMURES_4325_CLDO_CBUCK_BURST	3</span>
<span class="cp">#define SSB_PMURES_4325_CLDO_CBUCK_PWM		4</span>
<span class="cp">#define SSB_PMURES_4325_BUCK_BOOST_PWM		5</span>
<span class="cp">#define SSB_PMURES_4325_ILP_REQUEST		6</span>
<span class="cp">#define SSB_PMURES_4325_ABUCK_BURST		7</span>
<span class="cp">#define SSB_PMURES_4325_ABUCK_PWM		8</span>
<span class="cp">#define SSB_PMURES_4325_LNLDO1_PU		9</span>
<span class="cp">#define SSB_PMURES_4325_LNLDO2_PU		10</span>
<span class="cp">#define SSB_PMURES_4325_LNLDO3_PU		11</span>
<span class="cp">#define SSB_PMURES_4325_LNLDO4_PU		12</span>
<span class="cp">#define SSB_PMURES_4325_XTAL_PU			13</span>
<span class="cp">#define SSB_PMURES_4325_ALP_AVAIL		14</span>
<span class="cp">#define SSB_PMURES_4325_RX_PWRSW_PU		15</span>
<span class="cp">#define SSB_PMURES_4325_TX_PWRSW_PU		16</span>
<span class="cp">#define SSB_PMURES_4325_RFPLL_PWRSW_PU		17</span>
<span class="cp">#define SSB_PMURES_4325_LOGEN_PWRSW_PU		18</span>
<span class="cp">#define SSB_PMURES_4325_AFE_PWRSW_PU		19</span>
<span class="cp">#define SSB_PMURES_4325_BBPLL_PWRSW_PU		20</span>
<span class="cp">#define SSB_PMURES_4325_HT_AVAIL		21</span>

<span class="cm">/* BCM4328 PLL resource numbers. */</span>
<span class="cp">#define SSB_PMURES_4328_EXT_SWITCHER_PWM	0</span>
<span class="cp">#define SSB_PMURES_4328_BB_SWITCHER_PWM		1</span>
<span class="cp">#define SSB_PMURES_4328_BB_SWITCHER_BURST	2</span>
<span class="cp">#define SSB_PMURES_4328_BB_EXT_SWITCHER_BURST	3</span>
<span class="cp">#define SSB_PMURES_4328_ILP_REQUEST		4</span>
<span class="cp">#define SSB_PMURES_4328_RADIO_SWITCHER_PWM	5</span>
<span class="cp">#define SSB_PMURES_4328_RADIO_SWITCHER_BURST	6</span>
<span class="cp">#define SSB_PMURES_4328_ROM_SWITCH		7</span>
<span class="cp">#define SSB_PMURES_4328_PA_REF_LDO		8</span>
<span class="cp">#define SSB_PMURES_4328_RADIO_LDO		9</span>
<span class="cp">#define SSB_PMURES_4328_AFE_LDO			10</span>
<span class="cp">#define SSB_PMURES_4328_PLL_LDO			11</span>
<span class="cp">#define SSB_PMURES_4328_BG_FILTBYP		12</span>
<span class="cp">#define SSB_PMURES_4328_TX_FILTBYP		13</span>
<span class="cp">#define SSB_PMURES_4328_RX_FILTBYP		14</span>
<span class="cp">#define SSB_PMURES_4328_XTAL_PU			15</span>
<span class="cp">#define SSB_PMURES_4328_XTAL_EN			16</span>
<span class="cp">#define SSB_PMURES_4328_BB_PLL_FILTBYP		17</span>
<span class="cp">#define SSB_PMURES_4328_RF_PLL_FILTBYP		18</span>
<span class="cp">#define SSB_PMURES_4328_BB_PLL_PU		19</span>

<span class="cm">/* BCM5354 PLL resource numbers. */</span>
<span class="cp">#define SSB_PMURES_5354_EXT_SWITCHER_PWM	0</span>
<span class="cp">#define SSB_PMURES_5354_BB_SWITCHER_PWM		1</span>
<span class="cp">#define SSB_PMURES_5354_BB_SWITCHER_BURST	2</span>
<span class="cp">#define SSB_PMURES_5354_BB_EXT_SWITCHER_BURST	3</span>
<span class="cp">#define SSB_PMURES_5354_ILP_REQUEST		4</span>
<span class="cp">#define SSB_PMURES_5354_RADIO_SWITCHER_PWM	5</span>
<span class="cp">#define SSB_PMURES_5354_RADIO_SWITCHER_BURST	6</span>
<span class="cp">#define SSB_PMURES_5354_ROM_SWITCH		7</span>
<span class="cp">#define SSB_PMURES_5354_PA_REF_LDO		8</span>
<span class="cp">#define SSB_PMURES_5354_RADIO_LDO		9</span>
<span class="cp">#define SSB_PMURES_5354_AFE_LDO			10</span>
<span class="cp">#define SSB_PMURES_5354_PLL_LDO			11</span>
<span class="cp">#define SSB_PMURES_5354_BG_FILTBYP		12</span>
<span class="cp">#define SSB_PMURES_5354_TX_FILTBYP		13</span>
<span class="cp">#define SSB_PMURES_5354_RX_FILTBYP		14</span>
<span class="cp">#define SSB_PMURES_5354_XTAL_PU			15</span>
<span class="cp">#define SSB_PMURES_5354_XTAL_EN			16</span>
<span class="cp">#define SSB_PMURES_5354_BB_PLL_FILTBYP		17</span>
<span class="cp">#define SSB_PMURES_5354_RF_PLL_FILTBYP		18</span>
<span class="cp">#define SSB_PMURES_5354_BB_PLL_PU		19</span>



<span class="cm">/** Chip specific Chip-Status register contents. */</span>
<span class="cp">#define SSB_CHIPCO_CHST_4322_SPROM_EXISTS	0x00000040 </span><span class="cm">/* SPROM present */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_SPROM_OTP_SEL	0x00000003</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_DEFCIS_SEL		0 </span><span class="cm">/* OTP is powered up, use def. CIS, no SPROM */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_SPROM_SEL		1 </span><span class="cm">/* OTP is powered up, SPROM is present */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_OTP_SEL		2 </span><span class="cm">/* OTP is powered up, no SPROM */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_OTP_PWRDN		3 </span><span class="cm">/* OTP is powered down, SPROM is present */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_SDIO_USB_MODE	0x00000004</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_SDIO_USB_MODE_SHIFT  2</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_RCAL_VALID		0x00000008</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_RCAL_VALID_SHIFT	3</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_RCAL_VALUE		0x000001F0</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_RCAL_VALUE_SHIFT	4</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_PMUTOP_2B 		0x00000200 </span><span class="cm">/* 1 for 2b, 0 for to 2a */</span><span class="cp"></span>

<span class="cm">/** Macros to determine SPROM presence based on Chip-Status register. */</span>
<span class="cp">#define SSB_CHIPCO_CHST_4312_SPROM_PRESENT(status) \</span>
<span class="cp">	((status &amp; SSB_CHIPCO_CHST_4325_SPROM_OTP_SEL) != \</span>
<span class="cp">		SSB_CHIPCO_CHST_4325_OTP_SEL)</span>
<span class="cp">#define SSB_CHIPCO_CHST_4322_SPROM_PRESENT(status) \</span>
<span class="cp">	(status &amp; SSB_CHIPCO_CHST_4322_SPROM_EXISTS)</span>
<span class="cp">#define SSB_CHIPCO_CHST_4325_SPROM_PRESENT(status) \</span>
<span class="cp">	(((status &amp; SSB_CHIPCO_CHST_4325_SPROM_OTP_SEL) != \</span>
<span class="cp">		SSB_CHIPCO_CHST_4325_DEFCIS_SEL) &amp;&amp; \</span>
<span class="cp">	 ((status &amp; SSB_CHIPCO_CHST_4325_SPROM_OTP_SEL) != \</span>
<span class="cp">		SSB_CHIPCO_CHST_4325_OTP_SEL))</span>



<span class="cm">/** Clockcontrol masks and values **/</span>

<span class="cm">/* SSB_CHIPCO_CLOCK_N */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_N1		0x0000003F	</span><span class="cm">/* n1 control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_N2		0x00003F00	</span><span class="cm">/* n2 control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_N2_SHIFT		8</span>
<span class="cp">#define	SSB_CHIPCO_CLK_PLLC		0x000F0000	</span><span class="cm">/* pll control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_PLLC_SHIFT	16</span>

<span class="cm">/* SSB_CHIPCO_CLOCK_SB/PCI/UART */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_M1		0x0000003F	</span><span class="cm">/* m1 control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_M2		0x00003F00	</span><span class="cm">/* m2 control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_M2_SHIFT		8</span>
<span class="cp">#define	SSB_CHIPCO_CLK_M3		0x003F0000	</span><span class="cm">/* m3 control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_M3_SHIFT		16</span>
<span class="cp">#define	SSB_CHIPCO_CLK_MC		0x1F000000	</span><span class="cm">/* mux control */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_MC_SHIFT		24</span>

<span class="cm">/* N3M Clock control magic field values */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_F6_2		0x02		</span><span class="cm">/* A factor of 2 in */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_F6_3		0x03		</span><span class="cm">/* 6-bit fields like */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_F6_4		0x05		</span><span class="cm">/* N1, M1 or M3 */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_F6_5		0x09</span>
<span class="cp">#define	SSB_CHIPCO_CLK_F6_6		0x11</span>
<span class="cp">#define	SSB_CHIPCO_CLK_F6_7		0x21</span>

<span class="cp">#define	SSB_CHIPCO_CLK_F5_BIAS		5		</span><span class="cm">/* 5-bit fields get this added */</span><span class="cp"></span>

<span class="cp">#define	SSB_CHIPCO_CLK_MC_BYPASS	0x08</span>
<span class="cp">#define	SSB_CHIPCO_CLK_MC_M1		0x04</span>
<span class="cp">#define	SSB_CHIPCO_CLK_MC_M1M2		0x02</span>
<span class="cp">#define	SSB_CHIPCO_CLK_MC_M1M2M3	0x01</span>
<span class="cp">#define	SSB_CHIPCO_CLK_MC_M1M3		0x11</span>

<span class="cm">/* Type 2 Clock control magic field values */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_T2_BIAS		2		</span><span class="cm">/* n1, n2, m1 &amp; m3 bias */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_T2M2_BIAS	3		</span><span class="cm">/* m2 bias */</span><span class="cp"></span>

<span class="cp">#define	SSB_CHIPCO_CLK_T2MC_M1BYP	1</span>
<span class="cp">#define	SSB_CHIPCO_CLK_T2MC_M2BYP	2</span>
<span class="cp">#define	SSB_CHIPCO_CLK_T2MC_M3BYP	4</span>

<span class="cm">/* Type 6 Clock control magic field values */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_T6_MMASK		1		</span><span class="cm">/* bits of interest in m */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_T6_M0		120000000	</span><span class="cm">/* sb clock for m = 0 */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_T6_M1		100000000	</span><span class="cm">/* sb clock for m = 1 */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CLK_SB2MIPS_T6(sb)	(2 * (sb))</span>

<span class="cm">/* Common clock base */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_BASE1		24000000	</span><span class="cm">/* Half the clock freq */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_CLK_BASE2		12500000	</span><span class="cm">/* Alternate crystal on some PLL&#39;s */</span><span class="cp"></span>

<span class="cm">/* Clock control values for 200Mhz in 5350 */</span>
<span class="cp">#define	SSB_CHIPCO_CLK_5350_N		0x0311</span>
<span class="cp">#define	SSB_CHIPCO_CLK_5350_M		0x04020009</span>


<span class="cm">/** Bits in the config registers **/</span>

<span class="cp">#define	SSB_CHIPCO_CFG_EN		0x0001		</span><span class="cm">/* Enable */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CFG_EXTM		0x000E		</span><span class="cm">/* Extif Mode */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_CFG_EXTM_ASYNC	0x0002		</span><span class="cm">/* Async/Parallel flash */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_CFG_EXTM_SYNC	0x0004		</span><span class="cm">/* Synchronous */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_CFG_EXTM_PCMCIA	0x0008		</span><span class="cm">/* PCMCIA */</span><span class="cp"></span>
<span class="cp">#define	 SSB_CHIPCO_CFG_EXTM_IDE	0x000A		</span><span class="cm">/* IDE */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CFG_DS16		0x0010		</span><span class="cm">/* Data size, 0=8bit, 1=16bit */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CFG_CLKDIV		0x0060		</span><span class="cm">/* Sync: Clock divisor */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CFG_CLKEN		0x0080		</span><span class="cm">/* Sync: Clock enable */</span><span class="cp"></span>
<span class="cp">#define	SSB_CHIPCO_CFG_BSTRO		0x0100		</span><span class="cm">/* Sync: Size/Bytestrobe */</span><span class="cp"></span>


<span class="cm">/** Flash-specific control/status values */</span>

<span class="cm">/* flashcontrol opcodes for ST flashes */</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_WREN	0x0006		</span><span class="cm">/* Write Enable */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_WRDIS	0x0004		</span><span class="cm">/* Write Disable */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_RDSR	0x0105		</span><span class="cm">/* Read Status Register */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_WRSR	0x0101		</span><span class="cm">/* Write Status Register */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_READ	0x0303		</span><span class="cm">/* Read Data Bytes */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_PP	0x0302		</span><span class="cm">/* Page Program */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_SE	0x02D8		</span><span class="cm">/* Sector Erase */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_BE	0x00C7		</span><span class="cm">/* Bulk Erase */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_DP	0x00B9		</span><span class="cm">/* Deep Power-down */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_ST_RSIG	0x03AB		</span><span class="cm">/* Read Electronic Signature */</span><span class="cp"></span>

<span class="cm">/* Status register bits for ST flashes */</span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_ST_WIP	0x01		</span><span class="cm">/* Write In Progress */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_ST_WEL	0x02		</span><span class="cm">/* Write Enable Latch */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_ST_BP	0x1C		</span><span class="cm">/* Block Protect */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_ST_BP_SHIFT	2</span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_ST_SRWD	0x80		</span><span class="cm">/* Status Register Write Disable */</span><span class="cp"></span>

<span class="cm">/* flashcontrol opcodes for Atmel flashes */</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_READ		0x07E8</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_PAGE_READ	0x07D2</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_READ	</span><span class="cm">/* FIXME */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_READ	</span><span class="cm">/* FIXME */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_STATUS		0x01D7</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_WRITE	0x0384</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_WRITE	0x0387</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_ERASE_PRGM	0x0283	</span><span class="cm">/* Erase program */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_ERASE_PRGM	0x0286	</span><span class="cm">/* Erase program */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_PROGRAM	0x0288</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_PROGRAM	0x0289</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_PAGE_ERASE	0x0281</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BLOCK_ERASE	0x0250</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_WRER_PRGM	0x0382	</span><span class="cm">/* Write erase program */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_WRER_PRGM	0x0385	</span><span class="cm">/* Write erase program */</span><span class="cp"></span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_LOAD	0x0253</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_LOAD	0x0255</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_COMPARE	0x0260</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_COMPARE	0x0261</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF1_REPROGRAM	0x0258</span>
<span class="cp">#define SSB_CHIPCO_FLASHCTL_AT_BUF2_REPROGRAM	0x0259</span>

<span class="cm">/* Status register bits for Atmel flashes */</span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_AT_READY	0x80</span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_AT_MISMATCH	0x40</span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_AT_ID	0x38</span>
<span class="cp">#define SSB_CHIPCO_FLASHSTA_AT_ID_SHIFT	3</span>


<span class="cm">/** OTP **/</span>

<span class="cm">/* OTP regions */</span>
<span class="cp">#define	SSB_CHIPCO_OTP_HW_REGION	SSB_CHIPCO_OTPS_HW_PROTECT</span>
<span class="cp">#define	SSB_CHIPCO_OTP_SW_REGION	SSB_CHIPCO_OTPS_SW_PROTECT</span>
<span class="cp">#define	SSB_CHIPCO_OTP_CID_REGION	SSB_CHIPCO_OTPS_CID_PROTECT</span>

<span class="cm">/* OTP regions (Byte offsets from otp size) */</span>
<span class="cp">#define	SSB_CHIPCO_OTP_SWLIM_OFF	(-8)</span>
<span class="cp">#define	SSB_CHIPCO_OTP_CIDBASE_OFF	0</span>
<span class="cp">#define	SSB_CHIPCO_OTP_CIDLIM_OFF	8</span>

<span class="cm">/* Predefined OTP words (Word offset from otp size) */</span>
<span class="cp">#define	SSB_CHIPCO_OTP_BOUNDARY_OFF	(-4)</span>
<span class="cp">#define	SSB_CHIPCO_OTP_HWSIGN_OFF	(-3)</span>
<span class="cp">#define	SSB_CHIPCO_OTP_SWSIGN_OFF	(-2)</span>
<span class="cp">#define	SSB_CHIPCO_OTP_CIDSIGN_OFF	(-1)</span>

<span class="cp">#define	SSB_CHIPCO_OTP_CID_OFF		0</span>
<span class="cp">#define	SSB_CHIPCO_OTP_PKG_OFF		1</span>
<span class="cp">#define	SSB_CHIPCO_OTP_FID_OFF		2</span>
<span class="cp">#define	SSB_CHIPCO_OTP_RSV_OFF		3</span>
<span class="cp">#define	SSB_CHIPCO_OTP_LIM_OFF		4</span>

<span class="cp">#define	SSB_CHIPCO_OTP_SIGNATURE	0x578A</span>
<span class="cp">#define	SSB_CHIPCO_OTP_MAGIC		0x4E56</span>


<span class="k">struct</span> <span class="n">ssb_device</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">ssb_serial_port</span><span class="p">;</span>

<span class="cm">/* Data for the PMU, if available.</span>
<span class="cm"> * Check availability with ((struct ssb_chipcommon)-&gt;capabilities &amp; SSB_CHIPCO_CAP_PMU)</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ssb_chipcommon_pmu</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">rev</span><span class="p">;</span>			<span class="cm">/* PMU revision */</span>
	<span class="n">u32</span> <span class="n">crystalfreq</span><span class="p">;</span>	<span class="cm">/* The active crystal frequency (in kHz) */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ssb_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">capabilities</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
	<span class="cm">/* Fast Powerup Delay constant */</span>
	<span class="n">u16</span> <span class="n">fast_pwrup_delay</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ssb_chipcommon_pmu</span> <span class="n">pmu</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">bool</span> <span class="nf">ssb_chipco_available</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">cc</span><span class="o">-&gt;</span><span class="n">dev</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Register access */</span>
<span class="cp">#define chipco_read32(cc, offset)	ssb_read32((cc)-&gt;dev, offset)</span>
<span class="cp">#define chipco_write32(cc, offset, val)	ssb_write32((cc)-&gt;dev, offset, val)</span>

<span class="cp">#define chipco_mask32(cc, offset, mask) \</span>
<span class="cp">		chipco_write32(cc, offset, chipco_read32(cc, offset) &amp; (mask))</span>
<span class="cp">#define chipco_set32(cc, offset, set) \</span>
<span class="cp">		chipco_write32(cc, offset, chipco_read32(cc, offset) | (set))</span>
<span class="cp">#define chipco_maskset32(cc, offset, mask, set) \</span>
<span class="cp">		chipco_write32(cc, offset, (chipco_read32(cc, offset) &amp; (mask)) | (set))</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipcommon_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_get_clockcpu</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
                                    <span class="n">u32</span> <span class="o">*</span><span class="n">plltype</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">m</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_get_clockcontrol</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
					<span class="n">u32</span> <span class="o">*</span><span class="n">plltype</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">m</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_timing_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
				   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ns_per_cycle</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">ssb_clkmode</span> <span class="p">{</span>
	<span class="n">SSB_CLKMODE_SLOW</span><span class="p">,</span>
	<span class="n">SSB_CLKMODE_FAST</span><span class="p">,</span>
	<span class="n">SSB_CLKMODE_DYNAMIC</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_set_clockmode</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
				     <span class="k">enum</span> <span class="n">ssb_clkmode</span> <span class="n">mode</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_chipco_watchdog_timer_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
					  <span class="n">u32</span> <span class="n">ticks</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">ssb_chipco_irq_mask</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>

<span class="n">u32</span> <span class="n">ssb_chipco_irq_status</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">);</span>

<span class="cm">/* Chipcommon GPIO pin access. */</span>
<span class="n">u32</span> <span class="n">ssb_chipco_gpio_in</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ssb_chipco_gpio_out</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ssb_chipco_gpio_outen</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ssb_chipco_gpio_control</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ssb_chipco_gpio_intmask</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="n">u32</span> <span class="n">ssb_chipco_gpio_polarity</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_SSB_SERIAL</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ssb_chipco_serial_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">ssb_serial_port</span> <span class="o">*</span><span class="n">ports</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_SSB_SERIAL */</span><span class="cp"></span>

<span class="cm">/* PMU support */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ssb_pmu_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">ssb_pmu_ldo_volt_id</span> <span class="p">{</span>
	<span class="n">LDO_PAREF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">LDO_VOLT1</span><span class="p">,</span>
	<span class="n">LDO_VOLT2</span><span class="p">,</span>
	<span class="n">LDO_VOLT3</span><span class="p">,</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">ssb_pmu_set_ldo_voltage</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span>
			     <span class="k">enum</span> <span class="n">ssb_pmu_ldo_volt_id</span> <span class="n">id</span><span class="p">,</span> <span class="n">u32</span> <span class="n">voltage</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ssb_pmu_set_ldo_paref</span><span class="p">(</span><span class="k">struct</span> <span class="n">ssb_chipcommon</span> <span class="o">*</span><span class="n">cc</span><span class="p">,</span> <span class="n">bool</span> <span class="n">on</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* LINUX_SSB_CHIPCO_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
