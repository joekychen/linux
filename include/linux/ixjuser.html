<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › ixjuser.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>ixjuser.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __LINUX_IXJUSER_H</span>
<span class="cp">#define __LINUX_IXJUSER_H</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> *    ixjuser.h</span>
<span class="cm"> *</span>
<span class="cm"> * Device Driver for Quicknet Technologies, Inc.&#39;s Telephony cards</span>
<span class="cm"> * including the Internet PhoneJACK, Internet PhoneJACK Lite,</span>
<span class="cm"> * Internet PhoneJACK PCI, Internet LineJACK, Internet PhoneCARD and</span>
<span class="cm"> * SmartCABLE</span>
<span class="cm"> *</span>
<span class="cm"> *    (c) Copyright 1999-2001  Quicknet Technologies, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> *    This program is free software; you can redistribute it and/or</span>
<span class="cm"> *    modify it under the terms of the GNU General Public License</span>
<span class="cm"> *    as published by the Free Software Foundation; either version</span>
<span class="cm"> *    2 of the License, or (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * Author:          Ed Okerson, &lt;eokerson@quicknet.net&gt;</span>
<span class="cm"> *    </span>
<span class="cm"> * Contributors:    Greg Herlein, &lt;gherlein@quicknet.net&gt;</span>
<span class="cm"> *                  David W. Erhart, &lt;derhart@quicknet.net&gt;</span>
<span class="cm"> *                  John Sellers, &lt;jsellers@quicknet.net&gt;</span>
<span class="cm"> *                  Mike Preston, &lt;mpreston@quicknet.net&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * More information about the hardware related to this driver can be found</span>
<span class="cm"> * at our website:    http://www.quicknet.net</span>
<span class="cm"> *</span>
<span class="cm"> * Fixes:</span>
<span class="cm"> *</span>
<span class="cm"> * IN NO EVENT SHALL QUICKNET TECHNOLOGIES, INC. BE LIABLE TO ANY PARTY FOR</span>
<span class="cm"> * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT</span>
<span class="cm"> * OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF QUICKNET</span>
<span class="cm"> * TECHNOLOGIES, INC.HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> * QUICKNET TECHNOLOGIES, INC. SPECIFICALLY DISCLAIMS ANY WARRANTIES,</span>
<span class="cm"> * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY</span>
<span class="cm"> * AND FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS</span>
<span class="cm"> * ON AN &quot;AS IS&quot; BASIS, AND QUICKNET TECHNOLOGIES, INC. HAS NO OBLIGATION </span>
<span class="cm"> * TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cp">#include &lt;linux/telephony.h&gt;</span>


<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* IOCTL&#39;s used for the Quicknet Telephony Cards</span>
<span class="cm">*</span>
<span class="cm">* If you use the IXJCTL_TESTRAM command, the card must be power cycled to</span>
<span class="cm">* reset the SRAM values before further use.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_DSP_RESET 		_IO  (&#39;q&#39;, 0xC0)</span>

<span class="cp">#define IXJCTL_RING                     PHONE_RING</span>
<span class="cp">#define IXJCTL_HOOKSTATE                PHONE_HOOKSTATE</span>
<span class="cp">#define IXJCTL_MAXRINGS			PHONE_MAXRINGS</span>
<span class="cp">#define IXJCTL_RING_CADENCE		PHONE_RING_CADENCE</span>
<span class="cp">#define IXJCTL_RING_START		PHONE_RING_START</span>
<span class="cp">#define IXJCTL_RING_STOP		PHONE_RING_STOP</span>

<span class="cp">#define IXJCTL_CARDTYPE			_IOR (&#39;q&#39;, 0xC1, int)</span>
<span class="cp">#define IXJCTL_SERIAL			_IOR (&#39;q&#39;, 0xC2, int)</span>
<span class="cp">#define IXJCTL_DSP_TYPE                 _IOR (&#39;q&#39;, 0xC3, int)</span>
<span class="cp">#define IXJCTL_DSP_VERSION              _IOR (&#39;q&#39;, 0xC4, int)</span>
<span class="cp">#define IXJCTL_VERSION              	_IOR (&#39;q&#39;, 0xDA, char *)</span>
<span class="cp">#define IXJCTL_DSP_IDLE			_IO  (&#39;q&#39;, 0xC5)</span>
<span class="cp">#define IXJCTL_TESTRAM			_IO  (&#39;q&#39;, 0xC6)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* This group of IOCTLs deal with the record settings of the DSP</span>
<span class="cm">*</span>
<span class="cm">* The IXJCTL_REC_DEPTH command sets the internal buffer depth of the DSP.</span>
<span class="cm">* Setting a lower depth reduces latency, but increases the demand of the</span>
<span class="cm">* application to service the driver without frame loss.  The DSP has 480</span>
<span class="cm">* bytes of physical buffer memory for the record channel so the true</span>
<span class="cm">* maximum limit is determined by how many frames will fit in the buffer.</span>
<span class="cm">*</span>
<span class="cm">* 1 uncompressed (480 byte) 16-bit linear frame.</span>
<span class="cm">* 2 uncompressed (240 byte) 8-bit A-law/mu-law frames.</span>
<span class="cm">* 15 TrueSpeech 8.5 frames.</span>
<span class="cm">* 20 TrueSpeech 6.3,5.3,4.8 or 4.1 frames.</span>
<span class="cm">*</span>
<span class="cm">* The default in the driver is currently set to 2 frames.</span>
<span class="cm">*</span>
<span class="cm">* The IXJCTL_REC_VOLUME and IXJCTL_PLAY_VOLUME commands both use a Q8</span>
<span class="cm">* number as a parameter, 0x100 scales the signal by 1.0, 0x200 scales the</span>
<span class="cm">* signal by 2.0, 0x80 scales the signal by 0.5.  No protection is given</span>
<span class="cm">* against over-scaling, if the multiplication factor times the input</span>
<span class="cm">* signal exceeds 16 bits, overflow distortion will occur.  The default</span>
<span class="cm">* setting is 0x100 (1.0).</span>
<span class="cm">*</span>
<span class="cm">* The IXJCTL_REC_LEVEL returns the average signal level (not r.m.s.) on</span>
<span class="cm">* the most recently recorded frame as a 16 bit value.</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_REC_CODEC                PHONE_REC_CODEC</span>
<span class="cp">#define IXJCTL_REC_START                PHONE_REC_START</span>
<span class="cp">#define IXJCTL_REC_STOP                 PHONE_REC_STOP</span>
<span class="cp">#define IXJCTL_REC_DEPTH		PHONE_REC_DEPTH</span>
<span class="cp">#define IXJCTL_FRAME			PHONE_FRAME</span>
<span class="cp">#define IXJCTL_REC_VOLUME		PHONE_REC_VOLUME</span>
<span class="cp">#define IXJCTL_REC_LEVEL		PHONE_REC_LEVEL</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">f300_640</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">f300_500</span><span class="p">,</span> <span class="n">f1100</span><span class="p">,</span> <span class="n">f350</span><span class="p">,</span> <span class="n">f400</span><span class="p">,</span> <span class="n">f480</span><span class="p">,</span> <span class="n">f440</span><span class="p">,</span> <span class="n">f620</span><span class="p">,</span> <span class="n">f20_50</span><span class="p">,</span>
	<span class="n">f133_200</span><span class="p">,</span> <span class="n">f300</span><span class="p">,</span> <span class="n">f300_420</span><span class="p">,</span> <span class="n">f330</span><span class="p">,</span> <span class="n">f300_425</span><span class="p">,</span> <span class="n">f330_440</span><span class="p">,</span> <span class="n">f340</span><span class="p">,</span> <span class="n">f350_400</span><span class="p">,</span>
	<span class="n">f350_440</span><span class="p">,</span> <span class="n">f350_450</span><span class="p">,</span> <span class="n">f360</span><span class="p">,</span> <span class="n">f380_420</span><span class="p">,</span> <span class="n">f392</span><span class="p">,</span> <span class="n">f400_425</span><span class="p">,</span> <span class="n">f400_440</span><span class="p">,</span> <span class="n">f400_450</span><span class="p">,</span>
	<span class="n">f420</span><span class="p">,</span> <span class="n">f425</span><span class="p">,</span> <span class="n">f425_450</span><span class="p">,</span> <span class="n">f425_475</span><span class="p">,</span> <span class="n">f435</span><span class="p">,</span> <span class="n">f440_450</span><span class="p">,</span> <span class="n">f440_480</span><span class="p">,</span> <span class="n">f445</span><span class="p">,</span> <span class="n">f450</span><span class="p">,</span>
	<span class="n">f452</span><span class="p">,</span> <span class="n">f475</span><span class="p">,</span> <span class="n">f480_620</span><span class="p">,</span> <span class="n">f494</span><span class="p">,</span> <span class="n">f500</span><span class="p">,</span> <span class="n">f520</span><span class="p">,</span> <span class="n">f523</span><span class="p">,</span> <span class="n">f525</span><span class="p">,</span> <span class="n">f540_660</span><span class="p">,</span> <span class="n">f587</span><span class="p">,</span>
	<span class="n">f590</span><span class="p">,</span> <span class="n">f600</span><span class="p">,</span> <span class="n">f660</span><span class="p">,</span> <span class="n">f700</span><span class="p">,</span> <span class="n">f740</span><span class="p">,</span> <span class="n">f750</span><span class="p">,</span> <span class="n">f750_1450</span><span class="p">,</span> <span class="n">f770</span><span class="p">,</span> <span class="n">f800</span><span class="p">,</span> <span class="n">f816</span><span class="p">,</span> <span class="n">f850</span><span class="p">,</span>
	<span class="n">f857_1645</span><span class="p">,</span> <span class="n">f900</span><span class="p">,</span> <span class="n">f900_1300</span><span class="p">,</span> <span class="n">f935_1215</span><span class="p">,</span> <span class="n">f941_1477</span><span class="p">,</span> <span class="n">f942</span><span class="p">,</span> <span class="n">f950</span><span class="p">,</span> <span class="n">f950_1400</span><span class="p">,</span>
	<span class="n">f975</span><span class="p">,</span> <span class="n">f1000</span><span class="p">,</span> <span class="n">f1020</span><span class="p">,</span> <span class="n">f1050</span><span class="p">,</span> <span class="n">f1100_1750</span><span class="p">,</span> <span class="n">f1140</span><span class="p">,</span> <span class="n">f1200</span><span class="p">,</span> <span class="n">f1209</span><span class="p">,</span> <span class="n">f1330</span><span class="p">,</span> <span class="n">f1336</span><span class="p">,</span>
	<span class="n">lf1366</span><span class="p">,</span> <span class="n">f1380</span><span class="p">,</span> <span class="n">f1400</span><span class="p">,</span> <span class="n">f1477</span><span class="p">,</span> <span class="n">f1600</span><span class="p">,</span> <span class="n">f1633_1638</span><span class="p">,</span> <span class="n">f1800</span><span class="p">,</span> <span class="n">f1860</span>
<span class="p">}</span> <span class="n">IXJ_FILTER_FREQ</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">filter</span><span class="p">;</span>
	<span class="n">IXJ_FILTER_FREQ</span> <span class="n">freq</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">enable</span><span class="p">;</span>
<span class="p">}</span> <span class="n">IXJ_FILTER</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">enable</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">en_filter</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">filter</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">on1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">on2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">on3</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">off3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">IXJ_FILTER_CADENCE</span><span class="p">;</span>

<span class="cp">#define IXJCTL_SET_FILTER		_IOW (&#39;q&#39;, 0xC7, IXJ_FILTER *)</span>
<span class="cp">#define IXJCTL_SET_FILTER_RAW		_IOW (&#39;q&#39;, 0xDD, IXJ_FILTER_RAW *)</span>
<span class="cp">#define IXJCTL_GET_FILTER_HIST		_IOW (&#39;q&#39;, 0xC8, int)</span>
<span class="cp">#define IXJCTL_FILTER_CADENCE		_IOW (&#39;q&#39;, 0xD6, IXJ_FILTER_CADENCE *)</span>
<span class="cp">#define IXJCTL_PLAY_CID			_IO  (&#39;q&#39;, 0xD7)</span>
<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* This IOCTL allows you to reassign values in the tone index table.  The</span>
<span class="cm">* tone table has 32 entries (0 - 31), but the driver only allows entries</span>
<span class="cm">* 13 - 27 to be modified, entry 0 is reserved for silence and 1 - 12 are</span>
<span class="cm">* the standard DTMF digits and 28 - 31 are the DTMF tones for A, B, C &amp; D.</span>
<span class="cm">* The positions used internally for Call Progress Tones are as follows:</span>
<span class="cm">*    Dial Tone   - 25</span>
<span class="cm">*    Ring Back   - 26</span>
<span class="cm">*    Busy Signal - 27</span>
<span class="cm">*</span>
<span class="cm">* The freq values are calculated as:</span>
<span class="cm">* freq = cos(2 * PI * frequency / 8000)</span>
<span class="cm">*</span>
<span class="cm">* The most commonly needed values are already calculated and listed in the</span>
<span class="cm">* enum IXJ_TONE_FREQ.  Each tone index can have two frequencies with</span>
<span class="cm">* different gains, if you are only using a single frequency set the unused</span>
<span class="cm">* one to 0.</span>
<span class="cm">*</span>
<span class="cm">* The gain values range from 0 to 15 indicating +6dB to -24dB in 2dB</span>
<span class="cm">* increments.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">hz20</span> <span class="o">=</span> <span class="mh">0x7ffa</span><span class="p">,</span>
	<span class="n">hz50</span> <span class="o">=</span> <span class="mh">0x7fe5</span><span class="p">,</span>
	<span class="n">hz133</span> <span class="o">=</span> <span class="mh">0x7f4c</span><span class="p">,</span>
	<span class="n">hz200</span> <span class="o">=</span> <span class="mh">0x7e6b</span><span class="p">,</span>
	<span class="n">hz261</span> <span class="o">=</span> <span class="mh">0x7d50</span><span class="p">,</span>		<span class="cm">/* .63 C1  */</span>
	<span class="n">hz277</span> <span class="o">=</span> <span class="mh">0x7cfa</span><span class="p">,</span>		<span class="cm">/* .18 CS1 */</span>
	<span class="n">hz293</span> <span class="o">=</span> <span class="mh">0x7c9f</span><span class="p">,</span>		<span class="cm">/* .66 D1  */</span>
	<span class="n">hz300</span> <span class="o">=</span> <span class="mh">0x7c75</span><span class="p">,</span>
	<span class="n">hz311</span> <span class="o">=</span> <span class="mh">0x7c32</span><span class="p">,</span>		<span class="cm">/* .13 DS1 */</span>
	<span class="n">hz329</span> <span class="o">=</span> <span class="mh">0x7bbf</span><span class="p">,</span>		<span class="cm">/* .63 E1  */</span>
	<span class="n">hz330</span> <span class="o">=</span> <span class="mh">0x7bb8</span><span class="p">,</span>
	<span class="n">hz340</span> <span class="o">=</span> <span class="mh">0x7b75</span><span class="p">,</span>
	<span class="n">hz349</span> <span class="o">=</span> <span class="mh">0x7b37</span><span class="p">,</span>		<span class="cm">/* .23 F1  */</span>
	<span class="n">hz350</span> <span class="o">=</span> <span class="mh">0x7b30</span><span class="p">,</span>
	<span class="n">hz360</span> <span class="o">=</span> <span class="mh">0x7ae9</span><span class="p">,</span>
	<span class="n">hz369</span> <span class="o">=</span> <span class="mh">0x7aa8</span><span class="p">,</span>		<span class="cm">/* .99 FS1 */</span>
	<span class="n">hz380</span> <span class="o">=</span> <span class="mh">0x7a56</span><span class="p">,</span>
	<span class="n">hz392</span> <span class="o">=</span> <span class="mh">0x79fa</span><span class="p">,</span>		<span class="cm">/* .00 G1  */</span>
	<span class="n">hz400</span> <span class="o">=</span> <span class="mh">0x79bb</span><span class="p">,</span>
	<span class="n">hz415</span> <span class="o">=</span> <span class="mh">0x7941</span><span class="p">,</span>		<span class="cm">/* .30 GS1 */</span>
	<span class="n">hz420</span> <span class="o">=</span> <span class="mh">0x7918</span><span class="p">,</span>
	<span class="n">hz425</span> <span class="o">=</span> <span class="mh">0x78ee</span><span class="p">,</span>
	<span class="n">hz435</span> <span class="o">=</span> <span class="mh">0x7899</span><span class="p">,</span>
	<span class="n">hz440</span> <span class="o">=</span> <span class="mh">0x786d</span><span class="p">,</span>		<span class="cm">/* .00 A1  */</span>
	<span class="n">hz445</span> <span class="o">=</span> <span class="mh">0x7842</span><span class="p">,</span>
	<span class="n">hz450</span> <span class="o">=</span> <span class="mh">0x7815</span><span class="p">,</span>
	<span class="n">hz452</span> <span class="o">=</span> <span class="mh">0x7803</span><span class="p">,</span>
	<span class="n">hz466</span> <span class="o">=</span> <span class="mh">0x7784</span><span class="p">,</span>		<span class="cm">/* .16 AS1 */</span>
	<span class="n">hz475</span> <span class="o">=</span> <span class="mh">0x7731</span><span class="p">,</span>
	<span class="n">hz480</span> <span class="o">=</span> <span class="mh">0x7701</span><span class="p">,</span>
	<span class="n">hz493</span> <span class="o">=</span> <span class="mh">0x7685</span><span class="p">,</span>		<span class="cm">/* .88 B1  */</span>
	<span class="n">hz494</span> <span class="o">=</span> <span class="mh">0x767b</span><span class="p">,</span>
	<span class="n">hz500</span> <span class="o">=</span> <span class="mh">0x7640</span><span class="p">,</span>
	<span class="n">hz520</span> <span class="o">=</span> <span class="mh">0x7578</span><span class="p">,</span>
	<span class="n">hz523</span> <span class="o">=</span> <span class="mh">0x7559</span><span class="p">,</span>		<span class="cm">/* .25 C2  */</span>
	<span class="n">hz525</span> <span class="o">=</span> <span class="mh">0x7544</span><span class="p">,</span>
	<span class="n">hz540</span> <span class="o">=</span> <span class="mh">0x74a7</span><span class="p">,</span>
	<span class="n">hz554</span> <span class="o">=</span> <span class="mh">0x7411</span><span class="p">,</span>		<span class="cm">/* .37 CS2 */</span>
	<span class="n">hz587</span> <span class="o">=</span> <span class="mh">0x72a1</span><span class="p">,</span>		<span class="cm">/* .33 D2  */</span>
	<span class="n">hz590</span> <span class="o">=</span> <span class="mh">0x727f</span><span class="p">,</span>
	<span class="n">hz600</span> <span class="o">=</span> <span class="mh">0x720b</span><span class="p">,</span>
	<span class="n">hz620</span> <span class="o">=</span> <span class="mh">0x711e</span><span class="p">,</span>
	<span class="n">hz622</span> <span class="o">=</span> <span class="mh">0x7106</span><span class="p">,</span>		<span class="cm">/* .25 DS2 */</span>
	<span class="n">hz659</span> <span class="o">=</span> <span class="mh">0x6f3b</span><span class="p">,</span>		<span class="cm">/* .26 E2  */</span>
	<span class="n">hz660</span> <span class="o">=</span> <span class="mh">0x6f2e</span><span class="p">,</span>
	<span class="n">hz698</span> <span class="o">=</span> <span class="mh">0x6d3d</span><span class="p">,</span>		<span class="cm">/* .46 F2  */</span>
	<span class="n">hz700</span> <span class="o">=</span> <span class="mh">0x6d22</span><span class="p">,</span>
	<span class="n">hz739</span> <span class="o">=</span> <span class="mh">0x6b09</span><span class="p">,</span>		<span class="cm">/* .99 FS2 */</span>
	<span class="n">hz740</span> <span class="o">=</span> <span class="mh">0x6afa</span><span class="p">,</span>
	<span class="n">hz750</span> <span class="o">=</span> <span class="mh">0x6a6c</span><span class="p">,</span>
	<span class="n">hz770</span> <span class="o">=</span> <span class="mh">0x694b</span><span class="p">,</span>
	<span class="n">hz783</span> <span class="o">=</span> <span class="mh">0x688b</span><span class="p">,</span>		<span class="cm">/* .99 G2  */</span>
	<span class="n">hz800</span> <span class="o">=</span> <span class="mh">0x678d</span><span class="p">,</span>
	<span class="n">hz816</span> <span class="o">=</span> <span class="mh">0x6698</span><span class="p">,</span>
	<span class="n">hz830</span> <span class="o">=</span> <span class="mh">0x65bf</span><span class="p">,</span>		<span class="cm">/* .61 GS2 */</span>
	<span class="n">hz850</span> <span class="o">=</span> <span class="mh">0x6484</span><span class="p">,</span>
	<span class="n">hz857</span> <span class="o">=</span> <span class="mh">0x6414</span><span class="p">,</span>
	<span class="n">hz880</span> <span class="o">=</span> <span class="mh">0x629f</span><span class="p">,</span>		<span class="cm">/* .00 A2  */</span>
	<span class="n">hz900</span> <span class="o">=</span> <span class="mh">0x6154</span><span class="p">,</span>
	<span class="n">hz932</span> <span class="o">=</span> <span class="mh">0x5f35</span><span class="p">,</span>		<span class="cm">/* .33 AS2 */</span>
	<span class="n">hz935</span> <span class="o">=</span> <span class="mh">0x5f01</span><span class="p">,</span>
	<span class="n">hz941</span> <span class="o">=</span> <span class="mh">0x5e9a</span><span class="p">,</span>
	<span class="n">hz942</span> <span class="o">=</span> <span class="mh">0x5e88</span><span class="p">,</span>
	<span class="n">hz950</span> <span class="o">=</span> <span class="mh">0x5dfd</span><span class="p">,</span>
	<span class="n">hz975</span> <span class="o">=</span> <span class="mh">0x5c44</span><span class="p">,</span>
	<span class="n">hz1000</span> <span class="o">=</span> <span class="mh">0x5a81</span><span class="p">,</span>
	<span class="n">hz1020</span> <span class="o">=</span> <span class="mh">0x5912</span><span class="p">,</span>
	<span class="n">hz1050</span> <span class="o">=</span> <span class="mh">0x56e2</span><span class="p">,</span>
	<span class="n">hz1100</span> <span class="o">=</span> <span class="mh">0x5320</span><span class="p">,</span>
	<span class="n">hz1140</span> <span class="o">=</span> <span class="mh">0x5007</span><span class="p">,</span>
	<span class="n">hz1200</span> <span class="o">=</span> <span class="mh">0x4b3b</span><span class="p">,</span>
	<span class="n">hz1209</span> <span class="o">=</span> <span class="mh">0x4a80</span><span class="p">,</span>
	<span class="n">hz1215</span> <span class="o">=</span> <span class="mh">0x4a02</span><span class="p">,</span>
	<span class="n">hz1250</span> <span class="o">=</span> <span class="mh">0x471c</span><span class="p">,</span>
	<span class="n">hz1300</span> <span class="o">=</span> <span class="mh">0x42e0</span><span class="p">,</span>
	<span class="n">hz1330</span> <span class="o">=</span> <span class="mh">0x4049</span><span class="p">,</span>
	<span class="n">hz1336</span> <span class="o">=</span> <span class="mh">0x3fc4</span><span class="p">,</span>
	<span class="n">hz1366</span> <span class="o">=</span> <span class="mh">0x3d22</span><span class="p">,</span>
	<span class="n">hz1380</span> <span class="o">=</span> <span class="mh">0x3be4</span><span class="p">,</span>
	<span class="n">hz1400</span> <span class="o">=</span> <span class="mh">0x3a1b</span><span class="p">,</span>
	<span class="n">hz1450</span> <span class="o">=</span> <span class="mh">0x3596</span><span class="p">,</span>
	<span class="n">hz1477</span> <span class="o">=</span> <span class="mh">0x331c</span><span class="p">,</span>
	<span class="n">hz1500</span> <span class="o">=</span> <span class="mh">0x30fb</span><span class="p">,</span>
	<span class="n">hz1600</span> <span class="o">=</span> <span class="mh">0x278d</span><span class="p">,</span>
	<span class="n">hz1633</span> <span class="o">=</span> <span class="mh">0x2462</span><span class="p">,</span>
	<span class="n">hz1638</span> <span class="o">=</span> <span class="mh">0x23e7</span><span class="p">,</span>
	<span class="n">hz1645</span> <span class="o">=</span> <span class="mh">0x233a</span><span class="p">,</span>
	<span class="n">hz1750</span> <span class="o">=</span> <span class="mh">0x18f8</span><span class="p">,</span>
	<span class="n">hz1800</span> <span class="o">=</span> <span class="mh">0x1405</span><span class="p">,</span>
	<span class="n">hz1860</span> <span class="o">=</span> <span class="mh">0xe0b</span><span class="p">,</span>
	<span class="n">hz2100</span> <span class="o">=</span> <span class="mh">0xf5f6</span><span class="p">,</span>
	<span class="n">hz2130</span> <span class="o">=</span> <span class="mh">0xf2f5</span><span class="p">,</span>
	<span class="n">hz2450</span> <span class="o">=</span> <span class="mh">0xd3b3</span><span class="p">,</span>
	<span class="n">hz2750</span> <span class="o">=</span> <span class="mh">0xb8e4</span>
<span class="p">}</span> <span class="n">IXJ_FREQ</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">C1</span> <span class="o">=</span> <span class="n">hz261</span><span class="p">,</span>
	<span class="n">CS1</span> <span class="o">=</span> <span class="n">hz277</span><span class="p">,</span>
	<span class="n">D1</span> <span class="o">=</span> <span class="n">hz293</span><span class="p">,</span>
	<span class="n">DS1</span> <span class="o">=</span> <span class="n">hz311</span><span class="p">,</span>
	<span class="n">E1</span> <span class="o">=</span> <span class="n">hz329</span><span class="p">,</span>
	<span class="n">F1</span> <span class="o">=</span> <span class="n">hz349</span><span class="p">,</span>
	<span class="n">FS1</span> <span class="o">=</span> <span class="n">hz369</span><span class="p">,</span>
	<span class="n">G1</span> <span class="o">=</span> <span class="n">hz392</span><span class="p">,</span>
	<span class="n">GS1</span> <span class="o">=</span> <span class="n">hz415</span><span class="p">,</span>
	<span class="n">A1</span> <span class="o">=</span> <span class="n">hz440</span><span class="p">,</span>
	<span class="n">AS1</span> <span class="o">=</span> <span class="n">hz466</span><span class="p">,</span>
	<span class="n">B1</span> <span class="o">=</span> <span class="n">hz493</span><span class="p">,</span>
	<span class="n">C2</span> <span class="o">=</span> <span class="n">hz523</span><span class="p">,</span>
	<span class="n">CS2</span> <span class="o">=</span> <span class="n">hz554</span><span class="p">,</span>
	<span class="n">D2</span> <span class="o">=</span> <span class="n">hz587</span><span class="p">,</span>
	<span class="n">DS2</span> <span class="o">=</span> <span class="n">hz622</span><span class="p">,</span>
	<span class="n">E2</span> <span class="o">=</span> <span class="n">hz659</span><span class="p">,</span>
	<span class="n">F2</span> <span class="o">=</span> <span class="n">hz698</span><span class="p">,</span>
	<span class="n">FS2</span> <span class="o">=</span> <span class="n">hz739</span><span class="p">,</span>
	<span class="n">G2</span> <span class="o">=</span> <span class="n">hz783</span><span class="p">,</span>
	<span class="n">GS2</span> <span class="o">=</span> <span class="n">hz830</span><span class="p">,</span>
	<span class="n">A2</span> <span class="o">=</span> <span class="n">hz880</span><span class="p">,</span>
	<span class="n">AS2</span> <span class="o">=</span> <span class="n">hz932</span><span class="p">,</span>
<span class="p">}</span> <span class="n">IXJ_NOTE</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">tone_index</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">freq0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">gain0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">freq1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">gain1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">IXJ_TONE</span><span class="p">;</span>

<span class="cp">#define IXJCTL_INIT_TONE		_IOW (&#39;q&#39;, 0xC9, IXJ_TONE *)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* The IXJCTL_TONE_CADENCE ioctl defines tone sequences used for various</span>
<span class="cm">* Call Progress Tones (CPT).  This is accomplished by setting up an array of</span>
<span class="cm">* IXJ_CADENCE_ELEMENT structures that sequentially define the states of</span>
<span class="cm">* the tone sequence.  The tone_on_time and tone_off time are in</span>
<span class="cm">* 250 microsecond intervals.  A pointer to this array is passed to the</span>
<span class="cm">* driver as the ce element of an IXJ_CADENCE structure.  The elements_used</span>
<span class="cm">* must be set to the number of IXJ_CADENCE_ELEMENTS in the array.  The</span>
<span class="cm">* termination variable defines what to do at the end of a cadence, the</span>
<span class="cm">* options are to play the cadence once and stop, to repeat the last</span>
<span class="cm">* element of the cadence indefinitely, or to repeat the entire cadence</span>
<span class="cm">* indefinitely.  The ce variable is a pointer to the array of IXJ_TONE</span>
<span class="cm">* structures.  If the freq0 variable is non-zero, the tone table contents</span>
<span class="cm">* for the tone_index are updated to the frequencies and gains defined.  It</span>
<span class="cm">* should be noted that DTMF tones cannot be reassigned, so if DTMF tone</span>
<span class="cm">* table indexes are used in a cadence the frequency and gain variables will</span>
<span class="cm">* be ignored.</span>
<span class="cm">*</span>
<span class="cm">* If the array elements contain frequency parameters the driver will</span>
<span class="cm">* initialize the needed tone table elements and begin playing the tone,</span>
<span class="cm">* there is no preset limit on the number of elements in the cadence.  If</span>
<span class="cm">* there is more than one frequency used in the cadence, sequential elements</span>
<span class="cm">* of different frequencies MUST use different tone table indexes.  Only one</span>
<span class="cm">* cadence can be played at a time.  It is possible to build complex</span>
<span class="cm">* cadences with multiple frequencies using 2 tone table indexes by</span>
<span class="cm">* alternating between them.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">index</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tone_on_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tone_off_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">freq0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">gain0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">freq1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">gain1</span><span class="p">;</span>
<span class="p">}</span> <span class="n">IXJ_CADENCE_ELEMENT</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">PLAY_ONCE</span><span class="p">,</span>
	<span class="n">REPEAT_LAST_ELEMENT</span><span class="p">,</span>
	<span class="n">REPEAT_ALL</span>
<span class="p">}</span> <span class="n">IXJ_CADENCE_TERM</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">elements_used</span><span class="p">;</span>
	<span class="n">IXJ_CADENCE_TERM</span> <span class="n">termination</span><span class="p">;</span>
	<span class="n">IXJ_CADENCE_ELEMENT</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ce</span><span class="p">;</span>
<span class="p">}</span> <span class="n">IXJ_CADENCE</span><span class="p">;</span>

<span class="cp">#define IXJCTL_TONE_CADENCE		_IOW (&#39;q&#39;, 0xCA, IXJ_CADENCE *)</span>
<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* This group of IOCTLs deal with the playback settings of the DSP</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_PLAY_CODEC               PHONE_PLAY_CODEC</span>
<span class="cp">#define IXJCTL_PLAY_START               PHONE_PLAY_START</span>
<span class="cp">#define IXJCTL_PLAY_STOP                PHONE_PLAY_STOP</span>
<span class="cp">#define IXJCTL_PLAY_DEPTH		PHONE_PLAY_DEPTH</span>
<span class="cp">#define IXJCTL_PLAY_VOLUME		PHONE_PLAY_VOLUME</span>
<span class="cp">#define IXJCTL_PLAY_LEVEL		PHONE_PLAY_LEVEL</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* This group of IOCTLs deal with the Acoustic Echo Cancellation settings</span>
<span class="cm">* of the DSP</span>
<span class="cm">*</span>
<span class="cm">* Issuing the IXJCTL_AEC_START command with a value of AEC_OFF has the</span>
<span class="cm">* same effect as IXJCTL_AEC_STOP.  This is to simplify slider bar</span>
<span class="cm">* controls.  IXJCTL_AEC_GET_LEVEL returns the current setting of the AEC.</span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_AEC_START		_IOW (&#39;q&#39;, 0xCB, int)</span>
<span class="cp">#define IXJCTL_AEC_STOP			_IO  (&#39;q&#39;, 0xCC)</span>
<span class="cp">#define IXJCTL_AEC_GET_LEVEL		_IO  (&#39;q&#39;, 0xCD)</span>

<span class="cp">#define AEC_OFF   0</span>
<span class="cp">#define AEC_LOW   1</span>
<span class="cp">#define AEC_MED   2</span>
<span class="cp">#define AEC_HIGH  3</span>
<span class="cp">#define AEC_AUTO  4</span>
<span class="cp">#define AEC_AGC   5</span>
<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* Call Progress Tones, DTMF, etc.</span>
<span class="cm">* IXJCTL_DTMF_OOB determines if DTMF signaling is sent as Out-Of-Band</span>
<span class="cm">* only.  If you pass a 1, DTMF is suppressed from the audio stream.</span>
<span class="cm">* Tone on and off times are in 250 microsecond intervals so</span>
<span class="cm">* ioctl(ixj1, IXJCTL_SET_TONE_ON_TIME, 360);</span>
<span class="cm">* will set the tone on time of board ixj1 to 360 * 250us = 90ms</span>
<span class="cm">* the default values of tone on and off times is 840 or 210ms</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_DTMF_READY		PHONE_DTMF_READY</span>
<span class="cp">#define IXJCTL_GET_DTMF                 PHONE_GET_DTMF</span>
<span class="cp">#define IXJCTL_GET_DTMF_ASCII           PHONE_GET_DTMF_ASCII</span>
<span class="cp">#define IXJCTL_DTMF_OOB			PHONE_DTMF_OOB</span>
<span class="cp">#define IXJCTL_EXCEPTION		PHONE_EXCEPTION</span>
<span class="cp">#define IXJCTL_PLAY_TONE		PHONE_PLAY_TONE</span>
<span class="cp">#define IXJCTL_SET_TONE_ON_TIME		PHONE_SET_TONE_ON_TIME</span>
<span class="cp">#define IXJCTL_SET_TONE_OFF_TIME	PHONE_SET_TONE_OFF_TIME</span>
<span class="cp">#define IXJCTL_GET_TONE_ON_TIME		PHONE_GET_TONE_ON_TIME</span>
<span class="cp">#define IXJCTL_GET_TONE_OFF_TIME	PHONE_GET_TONE_OFF_TIME</span>
<span class="cp">#define IXJCTL_GET_TONE_STATE		PHONE_GET_TONE_STATE</span>
<span class="cp">#define IXJCTL_BUSY			PHONE_BUSY</span>
<span class="cp">#define IXJCTL_RINGBACK			PHONE_RINGBACK</span>
<span class="cp">#define IXJCTL_DIALTONE			PHONE_DIALTONE</span>
<span class="cp">#define IXJCTL_CPT_STOP			PHONE_CPT_STOP</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* LineJACK specific IOCTLs</span>
<span class="cm">*</span>
<span class="cm">* The lsb 4 bits of the LED argument represent the state of each of the 4</span>
<span class="cm">* LED&#39;s on the LineJACK</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_SET_LED			_IOW (&#39;q&#39;, 0xCE, int)</span>
<span class="cp">#define IXJCTL_MIXER			_IOW (&#39;q&#39;, 0xCF, int)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The master volume controls use attenuation with 32 levels from 0 to -62dB</span>
<span class="cm">* with steps of 2dB each, the defines should be OR&#39;ed together then sent</span>
<span class="cm">* as the parameter to the mixer command to change the mixer settings.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define MIXER_MASTER_L		0x0000</span>
<span class="cp">#define MIXER_MASTER_R		0x0100</span>
<span class="cp">#define ATT00DB			0x00</span>
<span class="cp">#define ATT02DB			0x01</span>
<span class="cp">#define ATT04DB			0x02</span>
<span class="cp">#define ATT06DB			0x03</span>
<span class="cp">#define ATT08DB			0x04</span>
<span class="cp">#define ATT10DB			0x05</span>
<span class="cp">#define ATT12DB			0x06</span>
<span class="cp">#define ATT14DB			0x07</span>
<span class="cp">#define ATT16DB			0x08</span>
<span class="cp">#define ATT18DB			0x09</span>
<span class="cp">#define ATT20DB			0x0A</span>
<span class="cp">#define ATT22DB			0x0B</span>
<span class="cp">#define ATT24DB			0x0C</span>
<span class="cp">#define ATT26DB			0x0D</span>
<span class="cp">#define ATT28DB			0x0E</span>
<span class="cp">#define ATT30DB			0x0F</span>
<span class="cp">#define ATT32DB			0x10</span>
<span class="cp">#define ATT34DB			0x11</span>
<span class="cp">#define ATT36DB			0x12</span>
<span class="cp">#define ATT38DB			0x13</span>
<span class="cp">#define ATT40DB			0x14</span>
<span class="cp">#define ATT42DB			0x15</span>
<span class="cp">#define ATT44DB			0x16</span>
<span class="cp">#define ATT46DB			0x17</span>
<span class="cp">#define ATT48DB			0x18</span>
<span class="cp">#define ATT50DB			0x19</span>
<span class="cp">#define ATT52DB			0x1A</span>
<span class="cp">#define ATT54DB			0x1B</span>
<span class="cp">#define ATT56DB			0x1C</span>
<span class="cp">#define ATT58DB			0x1D</span>
<span class="cp">#define ATT60DB			0x1E</span>
<span class="cp">#define ATT62DB			0x1F</span>
<span class="cp">#define MASTER_MUTE		0x80</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The input volume controls use gain with 32 levels from +12dB to -50dB</span>
<span class="cm">* with steps of 2dB each, the defines should be OR&#39;ed together then sent</span>
<span class="cm">* as the parameter to the mixer command to change the mixer settings.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define MIXER_PORT_CD_L		0x0600</span>
<span class="cp">#define MIXER_PORT_CD_R		0x0700</span>
<span class="cp">#define MIXER_PORT_LINE_IN_L	0x0800</span>
<span class="cp">#define MIXER_PORT_LINE_IN_R	0x0900</span>
<span class="cp">#define MIXER_PORT_POTS_REC	0x0C00</span>
<span class="cp">#define MIXER_PORT_MIC		0x0E00</span>

<span class="cp">#define GAIN12DB		0x00</span>
<span class="cp">#define GAIN10DB		0x01</span>
<span class="cp">#define GAIN08DB		0x02</span>
<span class="cp">#define GAIN06DB		0x03</span>
<span class="cp">#define GAIN04DB		0x04</span>
<span class="cp">#define GAIN02DB		0x05</span>
<span class="cp">#define GAIN00DB		0x06</span>
<span class="cp">#define GAIN_02DB		0x07</span>
<span class="cp">#define GAIN_04DB		0x08</span>
<span class="cp">#define GAIN_06DB		0x09</span>
<span class="cp">#define GAIN_08DB		0x0A</span>
<span class="cp">#define GAIN_10DB		0x0B</span>
<span class="cp">#define GAIN_12DB		0x0C</span>
<span class="cp">#define GAIN_14DB		0x0D</span>
<span class="cp">#define GAIN_16DB		0x0E</span>
<span class="cp">#define GAIN_18DB		0x0F</span>
<span class="cp">#define GAIN_20DB		0x10</span>
<span class="cp">#define GAIN_22DB		0x11</span>
<span class="cp">#define GAIN_24DB		0x12</span>
<span class="cp">#define GAIN_26DB		0x13</span>
<span class="cp">#define GAIN_28DB		0x14</span>
<span class="cp">#define GAIN_30DB		0x15</span>
<span class="cp">#define GAIN_32DB		0x16</span>
<span class="cp">#define GAIN_34DB		0x17</span>
<span class="cp">#define GAIN_36DB		0x18</span>
<span class="cp">#define GAIN_38DB		0x19</span>
<span class="cp">#define GAIN_40DB		0x1A</span>
<span class="cp">#define GAIN_42DB		0x1B</span>
<span class="cp">#define GAIN_44DB		0x1C</span>
<span class="cp">#define GAIN_46DB		0x1D</span>
<span class="cp">#define GAIN_48DB		0x1E</span>
<span class="cp">#define GAIN_50DB		0x1F</span>
<span class="cp">#define INPUT_MUTE		0x80</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The POTS volume control use attenuation with 8 levels from 0dB to -28dB</span>
<span class="cm">* with steps of 4dB each, the defines should be OR&#39;ed together then sent</span>
<span class="cm">* as the parameter to the mixer command to change the mixer settings.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define MIXER_PORT_POTS_PLAY	0x0F00</span>

<span class="cp">#define POTS_ATT_00DB		0x00</span>
<span class="cp">#define POTS_ATT_04DB		0x01</span>
<span class="cp">#define POTS_ATT_08DB		0x02</span>
<span class="cp">#define POTS_ATT_12DB		0x03</span>
<span class="cp">#define POTS_ATT_16DB		0x04</span>
<span class="cp">#define POTS_ATT_20DB		0x05</span>
<span class="cp">#define POTS_ATT_24DB		0x06</span>
<span class="cp">#define POTS_ATT_28DB		0x07</span>
<span class="cp">#define POTS_MUTE		0x80</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The DAA controls the interface to the PSTN port.  The driver loads the</span>
<span class="cm">* US coefficients by default, so if you live in a different country you</span>
<span class="cm">* need to load the set for your countries phone system.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_DAA_COEFF_SET		_IOW (&#39;q&#39;, 0xD0, int)</span>

<span class="cp">#define DAA_US 		1	</span><span class="cm">/*PITA 8kHz */</span><span class="cp"></span>
<span class="cp">#define DAA_UK 		2	</span><span class="cm">/*ISAR34 8kHz */</span><span class="cp"></span>
<span class="cp">#define DAA_FRANCE 	3	</span><span class="cm">/* */</span><span class="cp"></span>
<span class="cp">#define DAA_GERMANY	4</span>
<span class="cp">#define DAA_AUSTRALIA	5</span>
<span class="cp">#define DAA_JAPAN	6</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* Use IXJCTL_PORT to set or query the port the card is set to.  If the</span>
<span class="cm">* argument is set to PORT_QUERY, the return value of the ioctl will</span>
<span class="cm">* indicate which port is currently in use, otherwise it will change the</span>
<span class="cm">* port.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_PORT			_IOW (&#39;q&#39;, 0xD1, int)</span>

<span class="cp">#define PORT_QUERY	0</span>
<span class="cp">#define PORT_POTS	1</span>
<span class="cp">#define PORT_PSTN	2</span>
<span class="cp">#define PORT_SPEAKER	3</span>
<span class="cp">#define PORT_HANDSET	4</span>

<span class="cp">#define IXJCTL_PSTN_SET_STATE		PHONE_PSTN_SET_STATE</span>
<span class="cp">#define IXJCTL_PSTN_GET_STATE		PHONE_PSTN_GET_STATE</span>

<span class="cp">#define PSTN_ON_HOOK	0</span>
<span class="cp">#define PSTN_RINGING	1</span>
<span class="cp">#define PSTN_OFF_HOOK	2</span>
<span class="cp">#define PSTN_PULSE_DIAL	3</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The DAA Analog GAIN sets 2 parameters at one time, the receive gain (AGRR), </span>
<span class="cm">* and the transmit gain (AGX).  OR together the components and pass them</span>
<span class="cm">* as the parameter to IXJCTL_DAA_AGAIN.  The default setting is both at 0dB.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_DAA_AGAIN		_IOW (&#39;q&#39;, 0xD2, int)</span>

<span class="cp">#define AGRR00DB	0x00	</span><span class="cm">/* Analog gain in receive direction 0dB */</span><span class="cp"></span>
<span class="cp">#define AGRR3_5DB	0x10	</span><span class="cm">/* Analog gain in receive direction 3.5dB */</span><span class="cp"></span>
<span class="cp">#define AGRR06DB	0x30	</span><span class="cm">/* Analog gain in receive direction 6dB */</span><span class="cp"></span>

<span class="cp">#define AGX00DB		0x00	</span><span class="cm">/* Analog gain in transmit direction 0dB */</span><span class="cp"></span>
<span class="cp">#define AGX_6DB		0x04	</span><span class="cm">/* Analog gain in transmit direction -6dB */</span><span class="cp"></span>
<span class="cp">#define AGX3_5DB	0x08	</span><span class="cm">/* Analog gain in transmit direction 3.5dB */</span><span class="cp"></span>
<span class="cp">#define AGX_2_5B	0x0C	</span><span class="cm">/* Analog gain in transmit direction -2.5dB */</span><span class="cp"></span>

<span class="cp">#define IXJCTL_PSTN_LINETEST		_IO  (&#39;q&#39;, 0xD3)</span>

<span class="cp">#define IXJCTL_CID			_IOR (&#39;q&#39;, 0xD4, PHONE_CID *)</span>
<span class="cp">#define IXJCTL_VMWI			_IOR (&#39;q&#39;, 0xD8, int)</span>
<span class="cp">#define IXJCTL_CIDCW			_IOW (&#39;q&#39;, 0xD9, PHONE_CID *)</span>
<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The wink duration is tunable with this ioctl.  The default wink duration  </span>
<span class="cm">* is 320ms.  You do not need to use this ioctl if you do not require a</span>
<span class="cm">* different wink duration.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_WINK_DURATION		PHONE_WINK_DURATION</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* This ioctl will connect the POTS port to the PSTN port on the LineJACK</span>
<span class="cm">* In order for this to work properly the port selection should be set to</span>
<span class="cm">* the PSTN port with IXJCTL_PORT prior to calling this ioctl.  This will</span>
<span class="cm">* enable conference calls between PSTN callers and network callers.</span>
<span class="cm">* Passing a 1 to this ioctl enables the POTS&lt;-&gt;PSTN connection while</span>
<span class="cm">* passing a 0 turns it back off.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_POTS_PSTN		_IOW (&#39;q&#39;, 0xD5, int)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* IOCTLs added by request.</span>
<span class="cm">*</span>
<span class="cm">* IXJCTL_HZ sets the value your Linux kernel uses for HZ as defined in</span>
<span class="cm">*           /usr/include/asm/param.h, this determines the fundamental</span>
<span class="cm">*           frequency of the clock ticks on your Linux system.  The kernel</span>
<span class="cm">*           must be rebuilt if you change this value, also all modules you</span>
<span class="cm">*           use (except this one) must be recompiled.  The default value</span>
<span class="cm">*           is 100, and you only need to use this IOCTL if you use some</span>
<span class="cm">*           other value.</span>
<span class="cm">*</span>
<span class="cm">*</span>
<span class="cm">* IXJCTL_RATE sets the number of times per second that the driver polls</span>
<span class="cm">*             the DSP.  This value cannot be larger than HZ.  By</span>
<span class="cm">*             increasing both of these values, you may be able to reduce</span>
<span class="cm">*             latency because the max hang time that can exist between the</span>
<span class="cm">*             driver and the DSP will be reduced.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_HZ                       _IOW (&#39;q&#39;, 0xE0, int)</span>
<span class="cp">#define IXJCTL_RATE                     _IOW (&#39;q&#39;, 0xE1, int)</span>
<span class="cp">#define IXJCTL_FRAMES_READ		_IOR (&#39;q&#39;, 0xE2, unsigned long)</span>
<span class="cp">#define IXJCTL_FRAMES_WRITTEN		_IOR (&#39;q&#39;, 0xE3, unsigned long)</span>
<span class="cp">#define IXJCTL_READ_WAIT		_IOR (&#39;q&#39;, 0xE4, unsigned long)</span>
<span class="cp">#define IXJCTL_WRITE_WAIT		_IOR (&#39;q&#39;, 0xE5, unsigned long)</span>
<span class="cp">#define IXJCTL_DRYBUFFER_READ		_IOR (&#39;q&#39;, 0xE6, unsigned long)</span>
<span class="cp">#define IXJCTL_DRYBUFFER_CLEAR		_IO  (&#39;q&#39;, 0xE7)</span>
<span class="cp">#define IXJCTL_DTMF_PRESCALE		_IOW (&#39;q&#39;, 0xE8, int)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* This ioctl allows the user application to control what events the driver</span>
<span class="cm">* will send signals for, and what signals it will send for which event.</span>
<span class="cm">* By default, if signaling is enabled, all events will send SIGIO when</span>
<span class="cm">* they occur.  To disable signals for an event set the signal to 0.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">SIG_DTMF_READY</span><span class="p">,</span>
	<span class="n">SIG_HOOKSTATE</span><span class="p">,</span>
	<span class="n">SIG_FLASH</span><span class="p">,</span>
	<span class="n">SIG_PSTN_RING</span><span class="p">,</span>
	<span class="n">SIG_CALLER_ID</span><span class="p">,</span>
	<span class="n">SIG_PSTN_WINK</span><span class="p">,</span>
	<span class="n">SIG_F0</span><span class="p">,</span> <span class="n">SIG_F1</span><span class="p">,</span> <span class="n">SIG_F2</span><span class="p">,</span> <span class="n">SIG_F3</span><span class="p">,</span>
	<span class="n">SIG_FC0</span><span class="p">,</span> <span class="n">SIG_FC1</span><span class="p">,</span> <span class="n">SIG_FC2</span><span class="p">,</span> <span class="n">SIG_FC3</span><span class="p">,</span>
	<span class="n">SIG_READ_READY</span> <span class="o">=</span> <span class="mi">33</span><span class="p">,</span>
	<span class="n">SIG_WRITE_READY</span> <span class="o">=</span> <span class="mi">34</span>
<span class="p">}</span> <span class="n">IXJ_SIGEVENT</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">event</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">signal</span><span class="p">;</span>
<span class="p">}</span> <span class="n">IXJ_SIGDEF</span><span class="p">;</span>

<span class="cp">#define IXJCTL_SIGCTL			_IOW (&#39;q&#39;, 0xE9, IXJ_SIGDEF *)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* These ioctls allow the user application to change the gain in the </span>
<span class="cm">* Smart Cable of the Internet Phone Card.  Sending -1 as a value will cause</span>
<span class="cm">* return value to be the current setting.  Valid values to set are 0x00 - 0x1F</span>
<span class="cm">*</span>
<span class="cm">* 11111 = +12 dB</span>
<span class="cm">* 10111 =   0 dB</span>
<span class="cm">* 00000 = -34.5 dB</span>
<span class="cm">*</span>
<span class="cm">* IXJCTL_SC_RXG sets the Receive gain</span>
<span class="cm">* IXJCTL_SC_TXG sets the Transmit gain</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define IXJCTL_SC_RXG			_IOW (&#39;q&#39;, 0xEA, int)</span>
<span class="cp">#define IXJCTL_SC_TXG			_IOW (&#39;q&#39;, 0xEB, int)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* The intercom IOCTL&#39;s short the output from one card to the input of the</span>
<span class="cm">* other and vice versa (actually done in the DSP read function).  It is only</span>
<span class="cm">* necessary to execute the IOCTL on one card, but it is necessary to have</span>
<span class="cm">* both devices open to be able to detect hook switch changes.  The record</span>
<span class="cm">* codec and rate of each card must match the playback codec and rate of</span>
<span class="cm">* the other card for this to work properly.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>

<span class="cp">#define IXJCTL_INTERCOM_START 		_IOW (&#39;q&#39;, 0xFD, int)</span>
<span class="cp">#define IXJCTL_INTERCOM_STOP  		_IOW (&#39;q&#39;, 0xFE, int)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * new structure for accessing raw filter information</span>
<span class="cm"> *</span>
<span class="cm"> ******************************************************************************/</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">filter</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">enable</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">coeff</span><span class="p">[</span><span class="mi">19</span><span class="p">];</span>
<span class="p">}</span> <span class="n">IXJ_FILTER_RAW</span><span class="p">;</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
