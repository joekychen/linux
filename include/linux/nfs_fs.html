<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › nfs_fs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>nfs_fs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  linux/include/linux/nfs_fs.h</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 1992  Rick Sladkey</span>
<span class="cm"> *</span>
<span class="cm"> *  OS-specific nfs filesystem definitions and declarations</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _LINUX_NFS_FS_H</span>
<span class="cp">#define _LINUX_NFS_FS_H</span>

<span class="cp">#include &lt;linux/magic.h&gt;</span>

<span class="cm">/* Default timeout values */</span>
<span class="cp">#define NFS_DEF_UDP_TIMEO	(11)</span>
<span class="cp">#define NFS_DEF_UDP_RETRANS	(3)</span>
<span class="cp">#define NFS_DEF_TCP_TIMEO	(600)</span>
<span class="cp">#define NFS_DEF_TCP_RETRANS	(2)</span>

<span class="cp">#define NFS_MAX_UDP_TIMEOUT	(60*HZ)</span>
<span class="cp">#define NFS_MAX_TCP_TIMEOUT	(600*HZ)</span>

<span class="cp">#define NFS_DEF_ACREGMIN	(3)</span>
<span class="cp">#define NFS_DEF_ACREGMAX	(60)</span>
<span class="cp">#define NFS_DEF_ACDIRMIN	(30)</span>
<span class="cp">#define NFS_DEF_ACDIRMAX	(60)</span>

<span class="cm">/*</span>
<span class="cm"> * When flushing a cluster of dirty pages, there can be different</span>
<span class="cm"> * strategies:</span>
<span class="cm"> */</span>
<span class="cp">#define FLUSH_SYNC		1	</span><span class="cm">/* file being synced, or contention */</span><span class="cp"></span>
<span class="cp">#define FLUSH_STABLE		4	</span><span class="cm">/* commit to stable storage */</span><span class="cp"></span>
<span class="cp">#define FLUSH_LOWPRI		8	</span><span class="cm">/* low priority background flush */</span><span class="cp"></span>
<span class="cp">#define FLUSH_HIGHPRI		16	</span><span class="cm">/* high priority memory reclaim flush */</span><span class="cp"></span>
<span class="cp">#define FLUSH_COND_STABLE	32	</span><span class="cm">/* conditional stable write - only stable</span>
<span class="cm">					 * if everything fits in one RPC */</span><span class="cp"></span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cm">/*</span>
<span class="cm"> * Enable dprintk() debugging support for nfs client.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_NFS_DEBUG</span>
<span class="cp"># define NFS_DEBUG</span>
<span class="cp">#endif</span>

<span class="cp">#include &lt;linux/in.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/pagemap.h&gt;</span>
<span class="cp">#include &lt;linux/rbtree.h&gt;</span>
<span class="cp">#include &lt;linux/rwsem.h&gt;</span>
<span class="cp">#include &lt;linux/wait.h&gt;</span>

<span class="cp">#include &lt;linux/sunrpc/debug.h&gt;</span>
<span class="cp">#include &lt;linux/sunrpc/auth.h&gt;</span>
<span class="cp">#include &lt;linux/sunrpc/clnt.h&gt;</span>

<span class="cp">#include &lt;linux/nfs.h&gt;</span>
<span class="cp">#include &lt;linux/nfs2.h&gt;</span>
<span class="cp">#include &lt;linux/nfs3.h&gt;</span>
<span class="cp">#include &lt;linux/nfs4.h&gt;</span>
<span class="cp">#include &lt;linux/nfs_xdr.h&gt;</span>
<span class="cp">#include &lt;linux/nfs_fs_sb.h&gt;</span>

<span class="cp">#include &lt;linux/mempool.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * These are the default flags for swap requests</span>
<span class="cm"> */</span>
<span class="cp">#define NFS_RPC_SWAPFLAGS		(RPC_TASK_SWAPPER|RPC_TASK_ROOTCREDS)</span>

<span class="cm">/*</span>
<span class="cm"> * NFSv3/v4 Access mode cache entry</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">nfs_access_entry</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">rb_node</span>		<span class="n">rb_node</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">lru</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">jiffies</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rpc_cred</span> <span class="o">*</span>	<span class="n">cred</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">mask</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nfs_lock_context</span> <span class="p">{</span>
	<span class="n">atomic_t</span> <span class="n">count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">open_context</span><span class="p">;</span>
	<span class="n">fl_owner_t</span> <span class="n">lockowner</span><span class="p">;</span>
	<span class="n">pid_t</span> <span class="n">pid</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nfs4_state</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">nfs_lock_context</span> <span class="n">lock_context</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rpc_cred</span> <span class="o">*</span><span class="n">cred</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nfs4_state</span> <span class="o">*</span><span class="n">state</span><span class="p">;</span>
	<span class="n">fmode_t</span> <span class="n">mode</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define NFS_CONTEXT_ERROR_WRITE		(0)</span>
	<span class="kt">int</span> <span class="n">error</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nfs4_threshold</span>	<span class="o">*</span><span class="n">mdsthreshold</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nfs_open_dir_context</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">rpc_cred</span> <span class="o">*</span><span class="n">cred</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">attr_gencount</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">dir_cookie</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">dup_cookie</span><span class="p">;</span>
	<span class="kt">signed</span> <span class="kt">char</span> <span class="n">duped</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * NFSv4 delegation</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">nfs_delegation</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">posix_acl</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * nfs fs inode data in memory</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">nfs_inode</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * The 64bit &#39;inode number&#39;</span>
<span class="cm">	 */</span>
	<span class="n">__u64</span> <span class="n">fileid</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * NFS file handle</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">nfs_fh</span>		<span class="n">fh</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Various flags</span>
<span class="cm">	 */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">flags</span><span class="p">;</span>			<span class="cm">/* atomic bit ops */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">cache_validity</span><span class="p">;</span>		<span class="cm">/* bit mask */</span>

	<span class="cm">/*</span>
<span class="cm">	 * read_cache_jiffies is when we started read-caching this inode.</span>
<span class="cm">	 * attrtimeo is for how long the cached information is assumed</span>
<span class="cm">	 * to be valid. A successful attribute revalidation doubles</span>
<span class="cm">	 * attrtimeo (up to acregmax/acdirmax), a failure resets it to</span>
<span class="cm">	 * acregmin/acdirmin.</span>
<span class="cm">	 *</span>
<span class="cm">	 * We need to revalidate the cached attrs for this inode if</span>
<span class="cm">	 *</span>
<span class="cm">	 *	jiffies - read_cache_jiffies &gt;= attrtimeo</span>
<span class="cm">	 *</span>
<span class="cm">	 * Please note the comparison is greater than or equal</span>
<span class="cm">	 * so that zero timeout values can be specified.</span>
<span class="cm">	 */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">read_cache_jiffies</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">attrtimeo</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">attrtimeo_timestamp</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">attr_gencount</span><span class="p">;</span>
	<span class="cm">/* &quot;Generation counter&quot; for the attribute cache. This is</span>
<span class="cm">	 * bumped whenever we update the metadata on the</span>
<span class="cm">	 * server.</span>
<span class="cm">	 */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">cache_change_attribute</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">rb_root</span>		<span class="n">access_cache</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">access_cache_entry_lru</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">access_cache_inode_lru</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_NFS_V3_ACL</span>
	<span class="k">struct</span> <span class="n">posix_acl</span>	<span class="o">*</span><span class="n">acl_access</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">posix_acl</span>	<span class="o">*</span><span class="n">acl_default</span><span class="p">;</span>
<span class="cp">#endif</span>

	<span class="cm">/*</span>
<span class="cm">	 * This is the cookie verifier used for NFSv3 readdir</span>
<span class="cm">	 * operations</span>
<span class="cm">	 */</span>
	<span class="n">__be32</span>			<span class="n">cookieverf</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">npages</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nfs_mds_commit_info</span> <span class="n">commit_info</span><span class="p">;</span>

	<span class="cm">/* Open contexts for shared mmap writes */</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">open_files</span><span class="p">;</span>

	<span class="cm">/* Number of in-flight sillydelete RPC calls */</span>
	<span class="n">atomic_t</span>		<span class="n">silly_count</span><span class="p">;</span>
	<span class="cm">/* List of deferred sillydelete requests */</span>
	<span class="k">struct</span> <span class="n">hlist_head</span>	<span class="n">silly_list</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">waitqueue</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_NFS_V4</span>
	<span class="k">struct</span> <span class="n">nfs4_cached_acl</span>	<span class="o">*</span><span class="n">nfs4_acl</span><span class="p">;</span>
        <span class="cm">/* NFSv4 state */</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">open_states</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nfs_delegation</span> <span class="n">__rcu</span> <span class="o">*</span><span class="n">delegation</span><span class="p">;</span>
	<span class="n">fmode_t</span>			 <span class="n">delegation_state</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">rw_semaphore</span>	<span class="n">rwsem</span><span class="p">;</span>

	<span class="cm">/* pNFS layout information */</span>
	<span class="k">struct</span> <span class="n">pnfs_layout_hdr</span> <span class="o">*</span><span class="n">layout</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_NFS_V4*/</span><span class="cp"></span>
	<span class="cm">/* how many bytes have been written/read and how many bytes queued up */</span>
	<span class="n">__u64</span> <span class="n">write_io</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">read_io</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_NFS_FSCACHE</span>
	<span class="k">struct</span> <span class="n">fscache_cookie</span>	<span class="o">*</span><span class="n">fscache</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="k">struct</span> <span class="n">inode</span>		<span class="n">vfs_inode</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Cache validity bit flags</span>
<span class="cm"> */</span>
<span class="cp">#define NFS_INO_INVALID_ATTR	0x0001		</span><span class="cm">/* cached attrs are invalid */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_INVALID_DATA	0x0002		</span><span class="cm">/* cached data is invalid */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_INVALID_ATIME	0x0004		</span><span class="cm">/* cached atime is invalid */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_INVALID_ACCESS	0x0008		</span><span class="cm">/* cached access cred invalid */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_INVALID_ACL	0x0010		</span><span class="cm">/* cached acls are invalid */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_REVAL_PAGECACHE	0x0020		</span><span class="cm">/* must revalidate pagecache */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_REVAL_FORCED	0x0040		</span><span class="cm">/* force revalidation ignoring a delegation */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Bit offsets in flags field</span>
<span class="cm"> */</span>
<span class="cp">#define NFS_INO_ADVISE_RDPLUS	(0)		</span><span class="cm">/* advise readdirplus */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_STALE		(1)		</span><span class="cm">/* possible stale inode */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_ACL_LRU_SET	(2)		</span><span class="cm">/* Inode is on the LRU list */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_FLUSHING	(4)		</span><span class="cm">/* inode is flushing out data */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_FSCACHE		(5)		</span><span class="cm">/* inode can be cached by FS-Cache */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_FSCACHE_LOCK	(6)		</span><span class="cm">/* FS-Cache cookie management lock */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_COMMIT		(7)		</span><span class="cm">/* inode is committing unstable writes */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_LAYOUTCOMMIT	(9)		</span><span class="cm">/* layoutcommit required */</span><span class="cp"></span>
<span class="cp">#define NFS_INO_LAYOUTCOMMITTING (10)		</span><span class="cm">/* layoutcommit inflight */</span><span class="cp"></span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">nfs_inode</span> <span class="o">*</span><span class="nf">NFS_I</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">container_of</span><span class="p">(</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_inode</span><span class="p">,</span> <span class="n">vfs_inode</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="nf">NFS_SB</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="p">)(</span><span class="n">s</span><span class="o">-&gt;</span><span class="n">s_fs_info</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="nf">NFS_FH</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">fh</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="nf">NFS_SERVER</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_SB</span><span class="p">(</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">i_sb</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">rpc_clnt</span> <span class="o">*</span><span class="nf">NFS_CLIENT</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_SERVER</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">client</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_rpc_ops</span> <span class="o">*</span><span class="nf">NFS_PROTO</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_SERVER</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">nfs_client</span><span class="o">-&gt;</span><span class="n">rpc_ops</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">__be32</span> <span class="o">*</span><span class="nf">NFS_COOKIEVERF</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">cookieverf</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="nf">NFS_MINATTRTIMEO</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="n">nfss</span> <span class="o">=</span> <span class="n">NFS_SERVER</span><span class="p">(</span><span class="n">inode</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">S_ISDIR</span><span class="p">(</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">i_mode</span><span class="p">)</span> <span class="o">?</span> <span class="n">nfss</span><span class="o">-&gt;</span><span class="n">acdirmin</span> <span class="o">:</span> <span class="n">nfss</span><span class="o">-&gt;</span><span class="n">acregmin</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="nf">NFS_MAXATTRTIMEO</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="n">nfss</span> <span class="o">=</span> <span class="n">NFS_SERVER</span><span class="p">(</span><span class="n">inode</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">S_ISDIR</span><span class="p">(</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">i_mode</span><span class="p">)</span> <span class="o">?</span> <span class="n">nfss</span><span class="o">-&gt;</span><span class="n">acdirmax</span> <span class="o">:</span> <span class="n">nfss</span><span class="o">-&gt;</span><span class="n">acregmax</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">NFS_STALE</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">test_bit</span><span class="p">(</span><span class="n">NFS_INO_STALE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">NFS_FSCACHE</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">test_bit</span><span class="p">(</span><span class="n">NFS_INO_FSCACHE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">__u64</span> <span class="nf">NFS_FILEID</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">fileid</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">set_nfs_fileid</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="n">__u64</span> <span class="n">fileid</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">fileid</span> <span class="o">=</span> <span class="n">fileid</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">nfs_mark_for_revalidate</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">nfs_inode</span> <span class="o">*</span><span class="n">nfsi</span> <span class="o">=</span> <span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">);</span>

	<span class="n">spin_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">i_lock</span><span class="p">);</span>
	<span class="n">nfsi</span><span class="o">-&gt;</span><span class="n">cache_validity</span> <span class="o">|=</span> <span class="n">NFS_INO_INVALID_ATTR</span><span class="o">|</span><span class="n">NFS_INO_INVALID_ACCESS</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">S_ISDIR</span><span class="p">(</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">i_mode</span><span class="p">))</span>
		<span class="n">nfsi</span><span class="o">-&gt;</span><span class="n">cache_validity</span> <span class="o">|=</span> <span class="n">NFS_INO_REVAL_PAGECACHE</span><span class="o">|</span><span class="n">NFS_INO_INVALID_DATA</span><span class="p">;</span>
	<span class="n">spin_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">inode</span><span class="o">-&gt;</span><span class="n">i_lock</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">nfs_server_capable</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cap</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_SERVER</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">caps</span> <span class="o">&amp;</span> <span class="n">cap</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">nfs_set_verifier</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span> <span class="n">dentry</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">verf</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">dentry</span><span class="o">-&gt;</span><span class="n">d_time</span> <span class="o">=</span> <span class="n">verf</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * nfs_save_change_attribute - Returns the inode attribute change cookie</span>
<span class="cm"> * @dir - pointer to parent directory inode</span>
<span class="cm"> * The &quot;change attribute&quot; is updated every time we finish an operation</span>
<span class="cm"> * that will result in a metadata change on the server.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="nf">nfs_save_change_attribute</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_I</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">cache_change_attribute</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * nfs_verify_change_attribute - Detects NFS remote directory changes</span>
<span class="cm"> * @dir - pointer to parent directory inode</span>
<span class="cm"> * @chattr - previously saved change attribute</span>
<span class="cm"> * Return &quot;false&quot; if the verifiers doesn&#39;t match the change attribute.</span>
<span class="cm"> * This would usually indicate that the directory contents have changed on</span>
<span class="cm"> * the server, and that any dentries need revalidating.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">nfs_verify_change_attribute</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">dir</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">chattr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">chattr</span> <span class="o">==</span> <span class="n">NFS_I</span><span class="p">(</span><span class="n">dir</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">cache_change_attribute</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/inode.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_sync_mapping</span><span class="p">(</span><span class="k">struct</span> <span class="n">address_space</span> <span class="o">*</span><span class="n">mapping</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_zap_mapping</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">address_space</span> <span class="o">*</span><span class="n">mapping</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_zap_caches</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_invalidate_atime</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">nfs_fhget</span><span class="p">(</span><span class="k">struct</span> <span class="n">super_block</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_refresh_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_post_op_update_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_post_op_update_inode_force_wcc</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_getattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">vfsmount</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">kstat</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_permission</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_open</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_release</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_attribute_timeout</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_revalidate_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="n">server</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__nfs_revalidate_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_server</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_revalidate_mapping</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">address_space</span> <span class="o">*</span><span class="n">mapping</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_setattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">iattr</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_setattr_update_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">iattr</span> <span class="o">*</span><span class="n">attr</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">get_nfs_open_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">put_nfs_open_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">nfs_find_open_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">rpc_cred</span> <span class="o">*</span><span class="n">cred</span><span class="p">,</span> <span class="n">fmode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">alloc_nfs_open_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">,</span> <span class="n">fmode_t</span> <span class="n">f_mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_file_set_open_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">filp</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_lock_context</span> <span class="o">*</span><span class="n">nfs_get_lock_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">ctx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_put_lock_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_lock_context</span> <span class="o">*</span><span class="n">l_ctx</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u64</span> <span class="n">nfs_compat_user_ino64</span><span class="p">(</span><span class="n">u64</span> <span class="n">fileid</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_fattr_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nfs_inc_attr_generation_counter</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="n">nfs_alloc_fattr</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">nfs_free_fattr</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">kfree</span><span class="p">(</span><span class="n">fattr</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">nfs_alloc_fhandle</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">nfs_free_fhandle</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">kfree</span><span class="p">(</span><span class="n">fh</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#ifdef NFS_DEBUG</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">_nfs_display_fhandle_hash</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">);</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">nfs_display_fhandle_hash</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">_nfs_display_fhandle_hash</span><span class="p">(</span><span class="n">fh</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">_nfs_display_fhandle</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">caption</span><span class="p">);</span>
<span class="cp">#define nfs_display_fhandle(fh, caption)			\</span>
<span class="cp">	do {							\</span>
<span class="cp">		if (unlikely(nfs_debug &amp; NFSDBG_FACILITY))	\</span>
<span class="cp">			_nfs_display_fhandle(fh, caption);	\</span>
<span class="cp">	} while (0)</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">nfs_display_fhandle_hash</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">nfs_display_fhandle</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">,</span>
				       <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">caption</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/nfsroot.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_root_data</span><span class="p">(</span><span class="kt">char</span> <span class="o">**</span><span class="n">root_device</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">root_data</span><span class="p">);</span> <span class="cm">/*__init*/</span>
<span class="cm">/* linux/net/ipv4/ipconfig.c: trims ip addr off front of name, too. */</span>
<span class="k">extern</span> <span class="n">__be32</span> <span class="n">root_nfs_parse_addr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span> <span class="cm">/*__init*/</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/file.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs_file_inode_operations</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_NFS_V3</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs3_file_inode_operations</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_NFS_V3 */</span><span class="cp"></span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">nfs_file_operations</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_NFS_V4</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">nfs4_file_operations</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_NFS_V4 */</span><span class="cp"></span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">address_space_operations</span> <span class="n">nfs_file_aops</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">address_space_operations</span> <span class="n">nfs_dir_aops</span><span class="p">;</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="nf">nfs_file_open_context</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">filp</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">filp</span><span class="o">-&gt;</span><span class="n">private_data</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">rpc_cred</span> <span class="o">*</span><span class="nf">nfs_file_cred</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">file</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">file</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="n">ctx</span> <span class="o">=</span>
			<span class="n">nfs_file_open_context</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">ctx</span><span class="o">-&gt;</span><span class="n">cred</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/xattr.c</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_NFS_V3_ACL</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">nfs3_listxattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">nfs3_getxattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs3_setxattr</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs3_removexattr</span> <span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="cp"># define nfs3_listxattr NULL</span>
<span class="cp"># define nfs3_getxattr NULL</span>
<span class="cp"># define nfs3_setxattr NULL</span>
<span class="cp"># define nfs3_removexattr NULL</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/direct.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">nfs_direct_IO</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">kiocb</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">iovec</span> <span class="o">*</span><span class="p">,</span> <span class="n">loff_t</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">nfs_file_direct_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">kiocb</span> <span class="o">*</span><span class="n">iocb</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">iovec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr_segs</span><span class="p">,</span>
			<span class="n">loff_t</span> <span class="n">pos</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">nfs_file_direct_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">kiocb</span> <span class="o">*</span><span class="n">iocb</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">iovec</span> <span class="o">*</span><span class="n">iov</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr_segs</span><span class="p">,</span>
			<span class="n">loff_t</span> <span class="n">pos</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/dir.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs_dir_inode_operations</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_NFS_V3</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs3_dir_inode_operations</span><span class="p">;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_NFS_V3 */</span><span class="cp"></span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">nfs_dir_operations</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">dentry_operations</span> <span class="n">nfs_dentry_operations</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_force_lookup_revalidate</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">dir</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_instantiate</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_fh</span> <span class="o">*</span><span class="n">fh</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_fattr</span> <span class="o">*</span><span class="n">fattr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_may_open</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">rpc_cred</span> <span class="o">*</span><span class="n">cred</span><span class="p">,</span> <span class="kt">int</span> <span class="n">openflags</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_access_zap_cache</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/symlink.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs_symlink_inode_operations</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/sysctl.c</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_SYSCTL</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_register_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_unregister_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="cp">#define nfs_register_sysctl() 0</span>
<span class="cp">#define nfs_unregister_sysctl() do { } while(0)</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/namespace.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs_mountpoint_inode_operations</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">inode_operations</span> <span class="n">nfs_referral_inode_operations</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_mountpoint_expiry_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_release_automount_timer</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/unlink.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_complete_unlink</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_block_sillyrename</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_unblock_sillyrename</span><span class="p">(</span><span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_sillyrename</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">dir</span><span class="p">,</span> <span class="k">struct</span> <span class="n">dentry</span> <span class="o">*</span><span class="n">dentry</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/write.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_congestion_kb</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_writepage</span><span class="p">(</span><span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="n">page</span><span class="p">,</span> <span class="k">struct</span> <span class="n">writeback_control</span> <span class="o">*</span><span class="n">wbc</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_writepages</span><span class="p">(</span><span class="k">struct</span> <span class="n">address_space</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">writeback_control</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_flush_incompatible</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="n">page</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_updatepage</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_writeback_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">rpc_task</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_write_data</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Try to write back everything synchronously (but check the</span>
<span class="cm"> * return value!)</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_wb_all</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_wb_page</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">page</span><span class="o">*</span> <span class="n">page</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs_wb_page_cancel</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="k">struct</span> <span class="n">page</span><span class="o">*</span> <span class="n">page</span><span class="p">);</span>
<span class="cp">#if defined(CONFIG_NFS_V3) || defined(CONFIG_NFS_V4)</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_commit_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">nfs_commit_data</span> <span class="o">*</span><span class="n">nfs_commitdata_alloc</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs_commit_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_commit_data</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">nfs_commit_inode</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">how</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">nfs_have_writebacks</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">NFS_I</span><span class="p">(</span><span class="n">inode</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">npages</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs/read.c</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_readpage</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_readpages</span><span class="p">(</span><span class="k">struct</span> <span class="n">file</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">address_space</span> <span class="o">*</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">list_head</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_readpage_result</span><span class="p">(</span><span class="k">struct</span> <span class="n">rpc_task</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">nfs_read_data</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nfs_readpage_async</span><span class="p">(</span><span class="k">struct</span> <span class="n">nfs_open_context</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">page</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * linux/fs/nfs3proc.c</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_NFS_V3_ACL</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">posix_acl</span> <span class="o">*</span><span class="n">nfs3_proc_getacl</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs3_proc_setacl</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span>
			    <span class="k">struct</span> <span class="n">posix_acl</span> <span class="o">*</span><span class="n">acl</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nfs3_proc_set_default_acl</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">dir</span><span class="p">,</span> <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span>
		<span class="n">umode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nfs3_forget_cached_acls</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">nfs3_proc_set_default_acl</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">dir</span><span class="p">,</span>
					    <span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">,</span>
					    <span class="n">umode_t</span> <span class="n">mode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">nfs3_forget_cached_acls</span><span class="p">(</span><span class="k">struct</span> <span class="n">inode</span> <span class="o">*</span><span class="n">inode</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_NFS_V3_ACL */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * inline functions</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">loff_t</span> <span class="nf">nfs_size_to_loff_t</span><span class="p">(</span><span class="n">__u64</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">__u64</span><span class="p">)</span> <span class="n">OFFSET_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">OFFSET_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">loff_t</span><span class="p">)</span> <span class="n">size</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">ino_t</span>
<span class="nf">nfs_fileid_to_ino_t</span><span class="p">(</span><span class="n">u64</span> <span class="n">fileid</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">ino_t</span> <span class="n">ino</span> <span class="o">=</span> <span class="p">(</span><span class="n">ino_t</span><span class="p">)</span> <span class="n">fileid</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ino_t</span><span class="p">)</span> <span class="o">&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">u64</span><span class="p">))</span>
		<span class="n">ino</span> <span class="o">^=</span> <span class="n">fileid</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">u64</span><span class="p">)</span><span class="o">-</span><span class="k">sizeof</span><span class="p">(</span><span class="n">ino_t</span><span class="p">))</span> <span class="o">*</span> <span class="mi">8</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">ino</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define NFS_JUKEBOX_RETRY_TIME (5 * HZ)</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * NFS debug flags</span>
<span class="cm"> */</span>
<span class="cp">#define NFSDBG_VFS		0x0001</span>
<span class="cp">#define NFSDBG_DIRCACHE		0x0002</span>
<span class="cp">#define NFSDBG_LOOKUPCACHE	0x0004</span>
<span class="cp">#define NFSDBG_PAGECACHE	0x0008</span>
<span class="cp">#define NFSDBG_PROC		0x0010</span>
<span class="cp">#define NFSDBG_XDR		0x0020</span>
<span class="cp">#define NFSDBG_FILE		0x0040</span>
<span class="cp">#define NFSDBG_ROOT		0x0080</span>
<span class="cp">#define NFSDBG_CALLBACK		0x0100</span>
<span class="cp">#define NFSDBG_CLIENT		0x0200</span>
<span class="cp">#define NFSDBG_MOUNT		0x0400</span>
<span class="cp">#define NFSDBG_FSCACHE		0x0800</span>
<span class="cp">#define NFSDBG_PNFS		0x1000</span>
<span class="cp">#define NFSDBG_PNFS_LD		0x2000</span>
<span class="cp">#define NFSDBG_STATE		0x4000</span>
<span class="cp">#define NFSDBG_ALL		0xFFFF</span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cp"># undef ifdebug</span>
<span class="cp"># ifdef NFS_DEBUG</span>
<span class="cp">#  define ifdebug(fac)		if (unlikely(nfs_debug &amp; NFSDBG_##fac))</span>
<span class="cp">#  define NFS_IFDEBUG(x)	x</span>
<span class="cp"># else</span>
<span class="cp">#  define ifdebug(fac)		if (0)</span>
<span class="cp">#  define NFS_IFDEBUG(x)</span>
<span class="cp"># endif</span>
<span class="cp">#endif </span><span class="cm">/* __KERNEL */</span><span class="cp"></span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
