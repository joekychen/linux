<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › printk.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>printk.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __KERNEL_PRINTK__</span>
<span class="cp">#define __KERNEL_PRINTK__</span>

<span class="cp">#include &lt;linux/init.h&gt;</span>

<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">linux_banner</span><span class="p">[];</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">linux_proc_banner</span><span class="p">[];</span>

<span class="cp">#define KERN_EMERG	&quot;&lt;0&gt;&quot;	</span><span class="cm">/* system is unusable			*/</span><span class="cp"></span>
<span class="cp">#define KERN_ALERT	&quot;&lt;1&gt;&quot;	</span><span class="cm">/* action must be taken immediately	*/</span><span class="cp"></span>
<span class="cp">#define KERN_CRIT	&quot;&lt;2&gt;&quot;	</span><span class="cm">/* critical conditions			*/</span><span class="cp"></span>
<span class="cp">#define KERN_ERR	&quot;&lt;3&gt;&quot;	</span><span class="cm">/* error conditions			*/</span><span class="cp"></span>
<span class="cp">#define KERN_WARNING	&quot;&lt;4&gt;&quot;	</span><span class="cm">/* warning conditions			*/</span><span class="cp"></span>
<span class="cp">#define KERN_NOTICE	&quot;&lt;5&gt;&quot;	</span><span class="cm">/* normal but significant condition	*/</span><span class="cp"></span>
<span class="cp">#define KERN_INFO	&quot;&lt;6&gt;&quot;	</span><span class="cm">/* informational			*/</span><span class="cp"></span>
<span class="cp">#define KERN_DEBUG	&quot;&lt;7&gt;&quot;	</span><span class="cm">/* debug-level messages			*/</span><span class="cp"></span>

<span class="cm">/* Use the default kernel loglevel */</span>
<span class="cp">#define KERN_DEFAULT	&quot;&lt;d&gt;&quot;</span>
<span class="cm">/*</span>
<span class="cm"> * Annotation for a &quot;continued&quot; line of log printout (only done after a</span>
<span class="cm"> * line that had no enclosing \n). Only to be used by core/arch code</span>
<span class="cm"> * during early bootup (a continued line is not SMP-safe otherwise).</span>
<span class="cm"> */</span>
<span class="cp">#define KERN_CONT	&quot;&lt;c&gt;&quot;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">console_printk</span><span class="p">[];</span>

<span class="cp">#define console_loglevel (console_printk[0])</span>
<span class="cp">#define default_message_loglevel (console_printk[1])</span>
<span class="cp">#define minimum_console_loglevel (console_printk[2])</span>
<span class="cp">#define default_console_loglevel (console_printk[3])</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">console_silent</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">console_loglevel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">console_verbose</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">console_loglevel</span><span class="p">)</span>
		<span class="n">console_loglevel</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">va_format</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">;</span>
	<span class="kt">va_list</span> <span class="o">*</span><span class="n">va</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * FW_BUG</span>
<span class="cm"> * Add this to a message where you are sure the firmware is buggy or behaves</span>
<span class="cm"> * really stupid or out of spec. Be aware that the responsible BIOS developer</span>
<span class="cm"> * should be able to fix this issue or at least get a concrete idea of the</span>
<span class="cm"> * problem by reading your message without the need of looking at the kernel</span>
<span class="cm"> * code.</span>
<span class="cm"> *</span>
<span class="cm"> * Use it for definite and high priority BIOS bugs.</span>
<span class="cm"> *</span>
<span class="cm"> * FW_WARN</span>
<span class="cm"> * Use it for not that clear (e.g. could the kernel messed up things already?)</span>
<span class="cm"> * and medium priority BIOS bugs.</span>
<span class="cm"> *</span>
<span class="cm"> * FW_INFO</span>
<span class="cm"> * Use this one if you want to tell the user or vendor about something</span>
<span class="cm"> * suspicious, but generally harmless related to the firmware.</span>
<span class="cm"> *</span>
<span class="cm"> * Use it for information or very low priority BIOS bugs.</span>
<span class="cm"> */</span>
<span class="cp">#define FW_BUG		&quot;[Firmware Bug]: &quot;</span>
<span class="cp">#define FW_WARN		&quot;[Firmware Warn]: &quot;</span>
<span class="cp">#define FW_INFO		&quot;[Firmware Info]: &quot;</span>

<span class="cm">/*</span>
<span class="cm"> * HW_ERR</span>
<span class="cm"> * Add this to a message for hardware errors, so that user can report</span>
<span class="cm"> * it to hardware vendor instead of LKML or software vendor.</span>
<span class="cm"> */</span>
<span class="cp">#define HW_ERR		&quot;[Hardware Error]: &quot;</span>

<span class="cm">/*</span>
<span class="cm"> * Dummy printk for disabled debugging statements to use whilst maintaining</span>
<span class="cm"> * gcc&#39;s format and side-effect checking.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="nf">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">no_printk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="n">asmlinkage</span> <span class="n">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="kt">void</span> <span class="n">early_printk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">printk_needs_cpu</span><span class="p">(</span><span class="kt">int</span> <span class="n">cpu</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">printk_tick</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_PRINTK</span>
<span class="n">asmlinkage</span> <span class="n">__printf</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">vprintk_emit</span><span class="p">(</span><span class="kt">int</span> <span class="n">facility</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">,</span>
		 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dict</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">dictlen</span><span class="p">,</span>
		 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">args</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="n">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">vprintk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">args</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="n">__printf</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="n">__cold</span>
<span class="n">asmlinkage</span> <span class="kt">int</span> <span class="n">printk_emit</span><span class="p">(</span><span class="kt">int</span> <span class="n">facility</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">,</span>
			   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dict</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">dictlen</span><span class="p">,</span>
			   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>

<span class="n">asmlinkage</span> <span class="n">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">__cold</span>
<span class="kt">int</span> <span class="n">printk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>

<span class="cm">/*</span>
<span class="cm"> * Special printk facility for scheduler use only, _DO_NOT_USE_ !</span>
<span class="cm"> */</span>
<span class="n">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">__cold</span> <span class="kt">int</span> <span class="n">printk_sched</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>

<span class="cm">/*</span>
<span class="cm"> * Please don&#39;t use printk_ratelimit(), because it shares ratelimiting state</span>
<span class="cm"> * with all other unrelated printk_ratelimit() callsites.  Instead use</span>
<span class="cm"> * printk_ratelimited() or plain old __ratelimit().</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__printk_ratelimit</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">func</span><span class="p">);</span>
<span class="cp">#define printk_ratelimit() __printk_ratelimit(__func__)</span>
<span class="k">extern</span> <span class="n">bool</span> <span class="n">printk_timed_ratelimit</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">caller_jiffies</span><span class="p">,</span>
				   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">interval_msec</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">printk_delay_msec</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">dmesg_restrict</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">kptr_restrict</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">log_buf_kexec_setup</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">__init</span> <span class="n">setup_log_buf</span><span class="p">(</span><span class="kt">int</span> <span class="n">early</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="nf">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">vprintk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">args</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="nf">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">__cold</span>
<span class="kt">int</span> <span class="n">printk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="nf">__printf</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="n">__cold</span>
<span class="kt">int</span> <span class="n">printk_sched</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">printk_ratelimit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">bool</span> <span class="nf">printk_timed_ratelimit</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">caller_jiffies</span><span class="p">,</span>
					  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">interval_msec</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">log_buf_kexec_setup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">setup_log_buf</span><span class="p">(</span><span class="kt">int</span> <span class="n">early</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">dump_stack</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__cold</span><span class="p">;</span>

<span class="cp">#ifndef pr_fmt</span>
<span class="cp">#define pr_fmt(fmt) fmt</span>
<span class="cp">#endif</span>

<span class="cp">#define pr_emerg(fmt, ...) \</span>
<span class="cp">	printk(KERN_EMERG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_alert(fmt, ...) \</span>
<span class="cp">	printk(KERN_ALERT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_crit(fmt, ...) \</span>
<span class="cp">	printk(KERN_CRIT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_err(fmt, ...) \</span>
<span class="cp">	printk(KERN_ERR pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_warning(fmt, ...) \</span>
<span class="cp">	printk(KERN_WARNING pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_warn pr_warning</span>
<span class="cp">#define pr_notice(fmt, ...) \</span>
<span class="cp">	printk(KERN_NOTICE pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_info(fmt, ...) \</span>
<span class="cp">	printk(KERN_INFO pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_cont(fmt, ...) \</span>
<span class="cp">	printk(KERN_CONT fmt, ##__VA_ARGS__)</span>

<span class="cm">/* pr_devel() should produce zero code unless DEBUG is defined */</span>
<span class="cp">#ifdef DEBUG</span>
<span class="cp">#define pr_devel(fmt, ...) \</span>
<span class="cp">	printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#else</span>
<span class="cp">#define pr_devel(fmt, ...) \</span>
<span class="cp">	no_printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#endif</span>

<span class="cm">/* If you are writing a driver, please use dev_dbg instead */</span>
<span class="cp">#if defined(CONFIG_DYNAMIC_DEBUG)</span>
<span class="cm">/* dynamic_pr_debug() uses pr_fmt() internally so we don&#39;t need it here */</span>
<span class="cp">#define pr_debug(fmt, ...) \</span>
<span class="cp">	dynamic_pr_debug(fmt, ##__VA_ARGS__)</span>
<span class="cp">#elif defined(DEBUG)</span>
<span class="cp">#define pr_debug(fmt, ...) \</span>
<span class="cp">	printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#else</span>
<span class="cp">#define pr_debug(fmt, ...) \</span>
<span class="cp">	no_printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * Print a one-time message (analogous to WARN_ONCE() et al):</span>
<span class="cm"> */</span>

<span class="cp">#ifdef CONFIG_PRINTK</span>
<span class="cp">#define printk_once(fmt, ...)			\</span>
<span class="cp">({						\</span>
<span class="cp">	static bool __print_once;		\</span>
<span class="cp">						\</span>
<span class="cp">	if (!__print_once) {			\</span>
<span class="cp">		__print_once = true;		\</span>
<span class="cp">		printk(fmt, ##__VA_ARGS__);	\</span>
<span class="cp">	}					\</span>
<span class="cp">})</span>
<span class="cp">#else</span>
<span class="cp">#define printk_once(fmt, ...)			\</span>
<span class="cp">	no_printk(fmt, ##__VA_ARGS__)</span>
<span class="cp">#endif</span>

<span class="cp">#define pr_emerg_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_EMERG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_alert_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_ALERT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_crit_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_CRIT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_err_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_ERR pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_warn_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_WARNING pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_notice_once(fmt, ...)				\</span>
<span class="cp">	printk_once(KERN_NOTICE pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_info_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_INFO pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_cont_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_CONT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cm">/* If you are writing a driver, please use dev_dbg instead */</span>
<span class="cp">#if defined(DEBUG)</span>
<span class="cp">#define pr_debug_once(fmt, ...)					\</span>
<span class="cp">	printk_once(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#else</span>
<span class="cp">#define pr_debug_once(fmt, ...)					\</span>
<span class="cp">	no_printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * ratelimited messages with local ratelimit_state,</span>
<span class="cm"> * no local ratelimit_state used in the !PRINTK case</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_PRINTK</span>
<span class="cp">#define printk_ratelimited(fmt, ...)					\</span>
<span class="cp">({									\</span>
<span class="cp">	static DEFINE_RATELIMIT_STATE(_rs,				\</span>
<span class="cp">				      DEFAULT_RATELIMIT_INTERVAL,	\</span>
<span class="cp">				      DEFAULT_RATELIMIT_BURST);		\</span>
<span class="cp">									\</span>
<span class="cp">	if (__ratelimit(&amp;_rs))						\</span>
<span class="cp">		printk(fmt, ##__VA_ARGS__);				\</span>
<span class="cp">})</span>
<span class="cp">#else</span>
<span class="cp">#define printk_ratelimited(fmt, ...)					\</span>
<span class="cp">	no_printk(fmt, ##__VA_ARGS__)</span>
<span class="cp">#endif</span>

<span class="cp">#define pr_emerg_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_EMERG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_alert_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_ALERT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_crit_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_CRIT pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_err_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_ERR pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_warn_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_WARNING pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_notice_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_NOTICE pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#define pr_info_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_INFO pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cm">/* no pr_cont_ratelimited, don&#39;t do that... */</span>
<span class="cm">/* If you are writing a driver, please use dev_dbg instead */</span>
<span class="cp">#if defined(DEBUG)</span>
<span class="cp">#define pr_debug_ratelimited(fmt, ...)					\</span>
<span class="cp">	printk_ratelimited(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#else</span>
<span class="cp">#define pr_debug_ratelimited(fmt, ...) \</span>
<span class="cp">	no_printk(KERN_DEBUG pr_fmt(fmt), ##__VA_ARGS__)</span>
<span class="cp">#endif</span>

<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">kmsg_fops</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">DUMP_PREFIX_NONE</span><span class="p">,</span>
	<span class="n">DUMP_PREFIX_ADDRESS</span><span class="p">,</span>
	<span class="n">DUMP_PREFIX_OFFSET</span>
<span class="p">};</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">hex_dump_to_buffer</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
			       <span class="kt">int</span> <span class="n">rowsize</span><span class="p">,</span> <span class="kt">int</span> <span class="n">groupsize</span><span class="p">,</span>
			       <span class="kt">char</span> <span class="o">*</span><span class="n">linebuf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">linebuflen</span><span class="p">,</span> <span class="n">bool</span> <span class="n">ascii</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_PRINTK</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">print_hex_dump</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">prefix_str</span><span class="p">,</span>
			   <span class="kt">int</span> <span class="n">prefix_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rowsize</span><span class="p">,</span> <span class="kt">int</span> <span class="n">groupsize</span><span class="p">,</span>
			   <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span> <span class="n">bool</span> <span class="n">ascii</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">print_hex_dump_bytes</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">prefix_str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">prefix_type</span><span class="p">,</span>
				 <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">print_hex_dump</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">prefix_str</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">prefix_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rowsize</span><span class="p">,</span> <span class="kt">int</span> <span class="n">groupsize</span><span class="p">,</span>
				  <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span> <span class="n">bool</span> <span class="n">ascii</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">print_hex_dump_bytes</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">prefix_str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">prefix_type</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="cp">#endif</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
