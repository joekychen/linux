<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › dqblk_xfs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>dqblk_xfs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (c) 1995-2001,2004 Silicon Graphics, Inc.  All Rights Reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU Lesser General Public License</span>
<span class="cm"> * as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU Lesser General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU Lesset General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software Foundation,</span>
<span class="cm"> * Inc.,  51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _LINUX_DQBLK_XFS_H</span>
<span class="cp">#define _LINUX_DQBLK_XFS_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Disk quota - quotactl(2) commands for the XFS Quota Manager (XQM).</span>
<span class="cm"> */</span>

<span class="cp">#define XQM_CMD(x)	((&#39;X&#39;&lt;&lt;8)+(x))	</span><span class="cm">/* note: forms first QCMD argument */</span><span class="cp"></span>
<span class="cp">#define XQM_COMMAND(x)	(((x) &amp; (0xff&lt;&lt;8)) == (&#39;X&#39;&lt;&lt;8))	</span><span class="cm">/* test if for XFS */</span><span class="cp"></span>

<span class="cp">#define XQM_USRQUOTA	0	</span><span class="cm">/* system call user quota type */</span><span class="cp"></span>
<span class="cp">#define XQM_GRPQUOTA	1	</span><span class="cm">/* system call group quota type */</span><span class="cp"></span>
<span class="cp">#define XQM_PRJQUOTA	2	</span><span class="cm">/* system call project quota type */</span><span class="cp"></span>
<span class="cp">#define XQM_MAXQUOTAS	3</span>

<span class="cp">#define Q_XQUOTAON	XQM_CMD(1)	</span><span class="cm">/* enable accounting/enforcement */</span><span class="cp"></span>
<span class="cp">#define Q_XQUOTAOFF	XQM_CMD(2)	</span><span class="cm">/* disable accounting/enforcement */</span><span class="cp"></span>
<span class="cp">#define Q_XGETQUOTA	XQM_CMD(3)	</span><span class="cm">/* get disk limits and usage */</span><span class="cp"></span>
<span class="cp">#define Q_XSETQLIM	XQM_CMD(4)	</span><span class="cm">/* set disk limits */</span><span class="cp"></span>
<span class="cp">#define Q_XGETQSTAT	XQM_CMD(5)	</span><span class="cm">/* get quota subsystem status */</span><span class="cp"></span>
<span class="cp">#define Q_XQUOTARM	XQM_CMD(6)	</span><span class="cm">/* free disk space used by dquots */</span><span class="cp"></span>
<span class="cp">#define Q_XQUOTASYNC	XQM_CMD(7)	</span><span class="cm">/* delalloc flush, updates dquots */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * fs_disk_quota structure:</span>
<span class="cm"> *</span>
<span class="cm"> * This contains the current quota information regarding a user/proj/group.</span>
<span class="cm"> * It is 64-bit aligned, and all the blk units are in BBs (Basic Blocks) of</span>
<span class="cm"> * 512 bytes.</span>
<span class="cm"> */</span>
<span class="cp">#define FS_DQUOT_VERSION	1	</span><span class="cm">/* fs_disk_quota.d_version */</span><span class="cp"></span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fs_disk_quota</span> <span class="p">{</span>
	<span class="n">__s8</span>		<span class="n">d_version</span><span class="p">;</span>	<span class="cm">/* version of this structure */</span>
	<span class="n">__s8</span>		<span class="n">d_flags</span><span class="p">;</span>	<span class="cm">/* FS_{USER,PROJ,GROUP}_QUOTA */</span>
	<span class="n">__u16</span>		<span class="n">d_fieldmask</span><span class="p">;</span>	<span class="cm">/* field specifier */</span>
	<span class="n">__u32</span>		<span class="n">d_id</span><span class="p">;</span>		<span class="cm">/* user, project, or group ID */</span>
	<span class="n">__u64</span>		<span class="n">d_blk_hardlimit</span><span class="p">;</span><span class="cm">/* absolute limit on disk blks */</span>
	<span class="n">__u64</span>		<span class="n">d_blk_softlimit</span><span class="p">;</span><span class="cm">/* preferred limit on disk blks */</span>
	<span class="n">__u64</span>		<span class="n">d_ino_hardlimit</span><span class="p">;</span><span class="cm">/* maximum # allocated inodes */</span>
	<span class="n">__u64</span>		<span class="n">d_ino_softlimit</span><span class="p">;</span><span class="cm">/* preferred inode limit */</span>
	<span class="n">__u64</span>		<span class="n">d_bcount</span><span class="p">;</span>	<span class="cm">/* # disk blocks owned by the user */</span>
	<span class="n">__u64</span>		<span class="n">d_icount</span><span class="p">;</span>	<span class="cm">/* # inodes owned by the user */</span>
	<span class="n">__s32</span>		<span class="n">d_itimer</span><span class="p">;</span>	<span class="cm">/* zero if within inode limits */</span>
					<span class="cm">/* if not, we refuse service */</span>
	<span class="n">__s32</span>		<span class="n">d_btimer</span><span class="p">;</span>	<span class="cm">/* similar to above; for disk blocks */</span>
	<span class="n">__u16</span>	  	<span class="n">d_iwarns</span><span class="p">;</span>       <span class="cm">/* # warnings issued wrt num inodes */</span>
	<span class="n">__u16</span>	  	<span class="n">d_bwarns</span><span class="p">;</span>       <span class="cm">/* # warnings issued wrt disk blocks */</span>
	<span class="n">__s32</span>		<span class="n">d_padding2</span><span class="p">;</span>	<span class="cm">/* padding2 - for future use */</span>
	<span class="n">__u64</span>		<span class="n">d_rtb_hardlimit</span><span class="p">;</span><span class="cm">/* absolute limit on realtime blks */</span>
	<span class="n">__u64</span>		<span class="n">d_rtb_softlimit</span><span class="p">;</span><span class="cm">/* preferred limit on RT disk blks */</span>
	<span class="n">__u64</span>		<span class="n">d_rtbcount</span><span class="p">;</span>	<span class="cm">/* # realtime blocks owned */</span>
	<span class="n">__s32</span>		<span class="n">d_rtbtimer</span><span class="p">;</span>	<span class="cm">/* similar to above; for RT disk blks */</span>
	<span class="n">__u16</span>	  	<span class="n">d_rtbwarns</span><span class="p">;</span>     <span class="cm">/* # warnings issued wrt RT disk blks */</span>
	<span class="n">__s16</span>		<span class="n">d_padding3</span><span class="p">;</span>	<span class="cm">/* padding3 - for future use */</span>	
	<span class="kt">char</span>		<span class="n">d_padding4</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>	<span class="cm">/* yet more padding */</span>
<span class="p">}</span> <span class="n">fs_disk_quota_t</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * These fields are sent to Q_XSETQLIM to specify fields that need to change.</span>
<span class="cm"> */</span>
<span class="cp">#define FS_DQ_ISOFT	(1&lt;&lt;0)</span>
<span class="cp">#define FS_DQ_IHARD	(1&lt;&lt;1)</span>
<span class="cp">#define FS_DQ_BSOFT	(1&lt;&lt;2)</span>
<span class="cp">#define FS_DQ_BHARD 	(1&lt;&lt;3)</span>
<span class="cp">#define FS_DQ_RTBSOFT	(1&lt;&lt;4)</span>
<span class="cp">#define FS_DQ_RTBHARD	(1&lt;&lt;5)</span>
<span class="cp">#define FS_DQ_LIMIT_MASK	(FS_DQ_ISOFT | FS_DQ_IHARD | FS_DQ_BSOFT | \</span>
<span class="cp">				 FS_DQ_BHARD | FS_DQ_RTBSOFT | FS_DQ_RTBHARD)</span>
<span class="cm">/*</span>
<span class="cm"> * These timers can only be set in super user&#39;s dquot. For others, timers are</span>
<span class="cm"> * automatically started and stopped. Superusers timer values set the limits</span>
<span class="cm"> * for the rest.  In case these values are zero, the DQ_{F,B}TIMELIMIT values</span>
<span class="cm"> * defined below are used. </span>
<span class="cm"> * These values also apply only to the d_fieldmask field for Q_XSETQLIM.</span>
<span class="cm"> */</span>
<span class="cp">#define FS_DQ_BTIMER	(1&lt;&lt;6)</span>
<span class="cp">#define FS_DQ_ITIMER	(1&lt;&lt;7)</span>
<span class="cp">#define FS_DQ_RTBTIMER 	(1&lt;&lt;8)</span>
<span class="cp">#define FS_DQ_TIMER_MASK	(FS_DQ_BTIMER | FS_DQ_ITIMER | FS_DQ_RTBTIMER)</span>

<span class="cm">/*</span>
<span class="cm"> * Warning counts are set in both super user&#39;s dquot and others. For others,</span>
<span class="cm"> * warnings are set/cleared by the administrators (or automatically by going</span>
<span class="cm"> * below the soft limit).  Superusers warning values set the warning limits</span>
<span class="cm"> * for the rest.  In case these values are zero, the DQ_{F,B}WARNLIMIT values</span>
<span class="cm"> * defined below are used. </span>
<span class="cm"> * These values also apply only to the d_fieldmask field for Q_XSETQLIM.</span>
<span class="cm"> */</span>
<span class="cp">#define FS_DQ_BWARNS	(1&lt;&lt;9)</span>
<span class="cp">#define FS_DQ_IWARNS	(1&lt;&lt;10)</span>
<span class="cp">#define FS_DQ_RTBWARNS	(1&lt;&lt;11)</span>
<span class="cp">#define FS_DQ_WARNS_MASK	(FS_DQ_BWARNS | FS_DQ_IWARNS | FS_DQ_RTBWARNS)</span>

<span class="cm">/*</span>
<span class="cm"> * Accounting values.  These can only be set for filesystem with</span>
<span class="cm"> * non-transactional quotas that require quotacheck(8) in userspace.</span>
<span class="cm"> */</span>
<span class="cp">#define FS_DQ_BCOUNT		(1&lt;&lt;12)</span>
<span class="cp">#define FS_DQ_ICOUNT		(1&lt;&lt;13)</span>
<span class="cp">#define FS_DQ_RTBCOUNT		(1&lt;&lt;14)</span>
<span class="cp">#define FS_DQ_ACCT_MASK		(FS_DQ_BCOUNT | FS_DQ_ICOUNT | FS_DQ_RTBCOUNT)</span>

<span class="cm">/*</span>
<span class="cm"> * Various flags related to quotactl(2).</span>
<span class="cm"> */</span>
<span class="cp">#define FS_QUOTA_UDQ_ACCT	(1&lt;&lt;0)  </span><span class="cm">/* user quota accounting */</span><span class="cp"></span>
<span class="cp">#define FS_QUOTA_UDQ_ENFD	(1&lt;&lt;1)  </span><span class="cm">/* user quota limits enforcement */</span><span class="cp"></span>
<span class="cp">#define FS_QUOTA_GDQ_ACCT	(1&lt;&lt;2)  </span><span class="cm">/* group quota accounting */</span><span class="cp"></span>
<span class="cp">#define FS_QUOTA_GDQ_ENFD	(1&lt;&lt;3)  </span><span class="cm">/* group quota limits enforcement */</span><span class="cp"></span>
<span class="cp">#define FS_QUOTA_PDQ_ACCT	(1&lt;&lt;4)  </span><span class="cm">/* project quota accounting */</span><span class="cp"></span>
<span class="cp">#define FS_QUOTA_PDQ_ENFD	(1&lt;&lt;5)  </span><span class="cm">/* project quota limits enforcement */</span><span class="cp"></span>

<span class="cp">#define FS_USER_QUOTA		(1&lt;&lt;0)	</span><span class="cm">/* user quota type */</span><span class="cp"></span>
<span class="cp">#define FS_PROJ_QUOTA		(1&lt;&lt;1)	</span><span class="cm">/* project quota type */</span><span class="cp"></span>
<span class="cp">#define FS_GROUP_QUOTA		(1&lt;&lt;2)	</span><span class="cm">/* group quota type */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * fs_quota_stat is the struct returned in Q_XGETQSTAT for a given file system.</span>
<span class="cm"> * Provides a centralized way to get meta information about the quota subsystem.</span>
<span class="cm"> * eg. space taken up for user and group quotas, number of dquots currently</span>
<span class="cm"> * incore.</span>
<span class="cm"> */</span>
<span class="cp">#define FS_QSTAT_VERSION	1	</span><span class="cm">/* fs_quota_stat.qs_version */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Some basic information about &#39;quota files&#39;.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fs_qfilestat</span> <span class="p">{</span>
	<span class="n">__u64</span>		<span class="n">qfs_ino</span><span class="p">;</span>	<span class="cm">/* inode number */</span>
	<span class="n">__u64</span>		<span class="n">qfs_nblks</span><span class="p">;</span>	<span class="cm">/* number of BBs 512-byte-blks */</span>
	<span class="n">__u32</span>		<span class="n">qfs_nextents</span><span class="p">;</span>	<span class="cm">/* number of extents */</span>
<span class="p">}</span> <span class="n">fs_qfilestat_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fs_quota_stat</span> <span class="p">{</span>
	<span class="n">__s8</span>		<span class="n">qs_version</span><span class="p">;</span>	<span class="cm">/* version number for future changes */</span>
	<span class="n">__u16</span>		<span class="n">qs_flags</span><span class="p">;</span>	<span class="cm">/* FS_QUOTA_{U,P,G}DQ_{ACCT,ENFD} */</span>
	<span class="n">__s8</span>		<span class="n">qs_pad</span><span class="p">;</span>		<span class="cm">/* unused */</span>
	<span class="n">fs_qfilestat_t</span>	<span class="n">qs_uquota</span><span class="p">;</span>	<span class="cm">/* user quota storage information */</span>
	<span class="n">fs_qfilestat_t</span>	<span class="n">qs_gquota</span><span class="p">;</span>	<span class="cm">/* group quota storage information */</span>
	<span class="n">__u32</span>		<span class="n">qs_incoredqs</span><span class="p">;</span>	<span class="cm">/* number of dquots incore */</span>
	<span class="n">__s32</span>		<span class="n">qs_btimelimit</span><span class="p">;</span>  <span class="cm">/* limit for blks timer */</span>	
	<span class="n">__s32</span>		<span class="n">qs_itimelimit</span><span class="p">;</span>  <span class="cm">/* limit for inodes timer */</span>	
	<span class="n">__s32</span>		<span class="n">qs_rtbtimelimit</span><span class="p">;</span><span class="cm">/* limit for rt blks timer */</span>	
	<span class="n">__u16</span>		<span class="n">qs_bwarnlimit</span><span class="p">;</span>	<span class="cm">/* limit for num warnings */</span>
	<span class="n">__u16</span>		<span class="n">qs_iwarnlimit</span><span class="p">;</span>	<span class="cm">/* limit for num warnings */</span>
<span class="p">}</span> <span class="n">fs_quota_stat_t</span><span class="p">;</span>

<span class="cp">#endif	</span><span class="cm">/* _LINUX_DQBLK_XFS_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
