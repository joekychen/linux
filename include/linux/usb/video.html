<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › usb › video.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>video.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * USB Video Class definitions.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2009 Laurent Pinchart &lt;laurent.pinchart@skynet.be&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This file holds USB constants and structures defined by the USB Device</span>
<span class="cm"> * Class Definition for Video Devices. Unless otherwise stated, comments</span>
<span class="cm"> * below reference relevant sections of the USB Video Class 1.1 specification</span>
<span class="cm"> * available at</span>
<span class="cm"> *</span>
<span class="cm"> * http://www.usb.org/developers/devclass_docs/USB_Video_Class_1_1.zip</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __LINUX_USB_VIDEO_H</span>
<span class="cp">#define __LINUX_USB_VIDEO_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="cm">/* --------------------------------------------------------------------------</span>
<span class="cm"> * UVC constants</span>
<span class="cm"> */</span>

<span class="cm">/* A.2. Video Interface Subclass Codes */</span>
<span class="cp">#define UVC_SC_UNDEFINED				0x00</span>
<span class="cp">#define UVC_SC_VIDEOCONTROL				0x01</span>
<span class="cp">#define UVC_SC_VIDEOSTREAMING				0x02</span>
<span class="cp">#define UVC_SC_VIDEO_INTERFACE_COLLECTION		0x03</span>

<span class="cm">/* A.3. Video Interface Protocol Codes */</span>
<span class="cp">#define UVC_PC_PROTOCOL_UNDEFINED			0x00</span>

<span class="cm">/* A.5. Video Class-Specific VC Interface Descriptor Subtypes */</span>
<span class="cp">#define UVC_VC_DESCRIPTOR_UNDEFINED			0x00</span>
<span class="cp">#define UVC_VC_HEADER					0x01</span>
<span class="cp">#define UVC_VC_INPUT_TERMINAL				0x02</span>
<span class="cp">#define UVC_VC_OUTPUT_TERMINAL				0x03</span>
<span class="cp">#define UVC_VC_SELECTOR_UNIT				0x04</span>
<span class="cp">#define UVC_VC_PROCESSING_UNIT				0x05</span>
<span class="cp">#define UVC_VC_EXTENSION_UNIT				0x06</span>

<span class="cm">/* A.6. Video Class-Specific VS Interface Descriptor Subtypes */</span>
<span class="cp">#define UVC_VS_UNDEFINED				0x00</span>
<span class="cp">#define UVC_VS_INPUT_HEADER				0x01</span>
<span class="cp">#define UVC_VS_OUTPUT_HEADER				0x02</span>
<span class="cp">#define UVC_VS_STILL_IMAGE_FRAME			0x03</span>
<span class="cp">#define UVC_VS_FORMAT_UNCOMPRESSED			0x04</span>
<span class="cp">#define UVC_VS_FRAME_UNCOMPRESSED			0x05</span>
<span class="cp">#define UVC_VS_FORMAT_MJPEG				0x06</span>
<span class="cp">#define UVC_VS_FRAME_MJPEG				0x07</span>
<span class="cp">#define UVC_VS_FORMAT_MPEG2TS				0x0a</span>
<span class="cp">#define UVC_VS_FORMAT_DV				0x0c</span>
<span class="cp">#define UVC_VS_COLORFORMAT				0x0d</span>
<span class="cp">#define UVC_VS_FORMAT_FRAME_BASED			0x10</span>
<span class="cp">#define UVC_VS_FRAME_FRAME_BASED			0x11</span>
<span class="cp">#define UVC_VS_FORMAT_STREAM_BASED			0x12</span>

<span class="cm">/* A.7. Video Class-Specific Endpoint Descriptor Subtypes */</span>
<span class="cp">#define UVC_EP_UNDEFINED				0x00</span>
<span class="cp">#define UVC_EP_GENERAL					0x01</span>
<span class="cp">#define UVC_EP_ENDPOINT					0x02</span>
<span class="cp">#define UVC_EP_INTERRUPT				0x03</span>

<span class="cm">/* A.8. Video Class-Specific Request Codes */</span>
<span class="cp">#define UVC_RC_UNDEFINED				0x00</span>
<span class="cp">#define UVC_SET_CUR					0x01</span>
<span class="cp">#define UVC_GET_CUR					0x81</span>
<span class="cp">#define UVC_GET_MIN					0x82</span>
<span class="cp">#define UVC_GET_MAX					0x83</span>
<span class="cp">#define UVC_GET_RES					0x84</span>
<span class="cp">#define UVC_GET_LEN					0x85</span>
<span class="cp">#define UVC_GET_INFO					0x86</span>
<span class="cp">#define UVC_GET_DEF					0x87</span>

<span class="cm">/* A.9.1. VideoControl Interface Control Selectors */</span>
<span class="cp">#define UVC_VC_CONTROL_UNDEFINED			0x00</span>
<span class="cp">#define UVC_VC_VIDEO_POWER_MODE_CONTROL			0x01</span>
<span class="cp">#define UVC_VC_REQUEST_ERROR_CODE_CONTROL		0x02</span>

<span class="cm">/* A.9.2. Terminal Control Selectors */</span>
<span class="cp">#define UVC_TE_CONTROL_UNDEFINED			0x00</span>

<span class="cm">/* A.9.3. Selector Unit Control Selectors */</span>
<span class="cp">#define UVC_SU_CONTROL_UNDEFINED			0x00</span>
<span class="cp">#define UVC_SU_INPUT_SELECT_CONTROL			0x01</span>

<span class="cm">/* A.9.4. Camera Terminal Control Selectors */</span>
<span class="cp">#define UVC_CT_CONTROL_UNDEFINED			0x00</span>
<span class="cp">#define UVC_CT_SCANNING_MODE_CONTROL			0x01</span>
<span class="cp">#define UVC_CT_AE_MODE_CONTROL				0x02</span>
<span class="cp">#define UVC_CT_AE_PRIORITY_CONTROL			0x03</span>
<span class="cp">#define UVC_CT_EXPOSURE_TIME_ABSOLUTE_CONTROL		0x04</span>
<span class="cp">#define UVC_CT_EXPOSURE_TIME_RELATIVE_CONTROL		0x05</span>
<span class="cp">#define UVC_CT_FOCUS_ABSOLUTE_CONTROL			0x06</span>
<span class="cp">#define UVC_CT_FOCUS_RELATIVE_CONTROL			0x07</span>
<span class="cp">#define UVC_CT_FOCUS_AUTO_CONTROL			0x08</span>
<span class="cp">#define UVC_CT_IRIS_ABSOLUTE_CONTROL			0x09</span>
<span class="cp">#define UVC_CT_IRIS_RELATIVE_CONTROL			0x0a</span>
<span class="cp">#define UVC_CT_ZOOM_ABSOLUTE_CONTROL			0x0b</span>
<span class="cp">#define UVC_CT_ZOOM_RELATIVE_CONTROL			0x0c</span>
<span class="cp">#define UVC_CT_PANTILT_ABSOLUTE_CONTROL			0x0d</span>
<span class="cp">#define UVC_CT_PANTILT_RELATIVE_CONTROL			0x0e</span>
<span class="cp">#define UVC_CT_ROLL_ABSOLUTE_CONTROL			0x0f</span>
<span class="cp">#define UVC_CT_ROLL_RELATIVE_CONTROL			0x10</span>
<span class="cp">#define UVC_CT_PRIVACY_CONTROL				0x11</span>

<span class="cm">/* A.9.5. Processing Unit Control Selectors */</span>
<span class="cp">#define UVC_PU_CONTROL_UNDEFINED			0x00</span>
<span class="cp">#define UVC_PU_BACKLIGHT_COMPENSATION_CONTROL		0x01</span>
<span class="cp">#define UVC_PU_BRIGHTNESS_CONTROL			0x02</span>
<span class="cp">#define UVC_PU_CONTRAST_CONTROL				0x03</span>
<span class="cp">#define UVC_PU_GAIN_CONTROL				0x04</span>
<span class="cp">#define UVC_PU_POWER_LINE_FREQUENCY_CONTROL		0x05</span>
<span class="cp">#define UVC_PU_HUE_CONTROL				0x06</span>
<span class="cp">#define UVC_PU_SATURATION_CONTROL			0x07</span>
<span class="cp">#define UVC_PU_SHARPNESS_CONTROL			0x08</span>
<span class="cp">#define UVC_PU_GAMMA_CONTROL				0x09</span>
<span class="cp">#define UVC_PU_WHITE_BALANCE_TEMPERATURE_CONTROL	0x0a</span>
<span class="cp">#define UVC_PU_WHITE_BALANCE_TEMPERATURE_AUTO_CONTROL	0x0b</span>
<span class="cp">#define UVC_PU_WHITE_BALANCE_COMPONENT_CONTROL		0x0c</span>
<span class="cp">#define UVC_PU_WHITE_BALANCE_COMPONENT_AUTO_CONTROL	0x0d</span>
<span class="cp">#define UVC_PU_DIGITAL_MULTIPLIER_CONTROL		0x0e</span>
<span class="cp">#define UVC_PU_DIGITAL_MULTIPLIER_LIMIT_CONTROL		0x0f</span>
<span class="cp">#define UVC_PU_HUE_AUTO_CONTROL				0x10</span>
<span class="cp">#define UVC_PU_ANALOG_VIDEO_STANDARD_CONTROL		0x11</span>
<span class="cp">#define UVC_PU_ANALOG_LOCK_STATUS_CONTROL		0x12</span>

<span class="cm">/* A.9.7. VideoStreaming Interface Control Selectors */</span>
<span class="cp">#define UVC_VS_CONTROL_UNDEFINED			0x00</span>
<span class="cp">#define UVC_VS_PROBE_CONTROL				0x01</span>
<span class="cp">#define UVC_VS_COMMIT_CONTROL				0x02</span>
<span class="cp">#define UVC_VS_STILL_PROBE_CONTROL			0x03</span>
<span class="cp">#define UVC_VS_STILL_COMMIT_CONTROL			0x04</span>
<span class="cp">#define UVC_VS_STILL_IMAGE_TRIGGER_CONTROL		0x05</span>
<span class="cp">#define UVC_VS_STREAM_ERROR_CODE_CONTROL		0x06</span>
<span class="cp">#define UVC_VS_GENERATE_KEY_FRAME_CONTROL		0x07</span>
<span class="cp">#define UVC_VS_UPDATE_FRAME_SEGMENT_CONTROL		0x08</span>
<span class="cp">#define UVC_VS_SYNC_DELAY_CONTROL			0x09</span>

<span class="cm">/* B.1. USB Terminal Types */</span>
<span class="cp">#define UVC_TT_VENDOR_SPECIFIC				0x0100</span>
<span class="cp">#define UVC_TT_STREAMING				0x0101</span>

<span class="cm">/* B.2. Input Terminal Types */</span>
<span class="cp">#define UVC_ITT_VENDOR_SPECIFIC				0x0200</span>
<span class="cp">#define UVC_ITT_CAMERA					0x0201</span>
<span class="cp">#define UVC_ITT_MEDIA_TRANSPORT_INPUT			0x0202</span>

<span class="cm">/* B.3. Output Terminal Types */</span>
<span class="cp">#define UVC_OTT_VENDOR_SPECIFIC				0x0300</span>
<span class="cp">#define UVC_OTT_DISPLAY					0x0301</span>
<span class="cp">#define UVC_OTT_MEDIA_TRANSPORT_OUTPUT			0x0302</span>

<span class="cm">/* B.4. External Terminal Types */</span>
<span class="cp">#define UVC_EXTERNAL_VENDOR_SPECIFIC			0x0400</span>
<span class="cp">#define UVC_COMPOSITE_CONNECTOR				0x0401</span>
<span class="cp">#define UVC_SVIDEO_CONNECTOR				0x0402</span>
<span class="cp">#define UVC_COMPONENT_CONNECTOR				0x0403</span>

<span class="cm">/* 2.4.2.2. Status Packet Type */</span>
<span class="cp">#define UVC_STATUS_TYPE_CONTROL				1</span>
<span class="cp">#define UVC_STATUS_TYPE_STREAMING			2</span>

<span class="cm">/* 2.4.3.3. Payload Header Information */</span>
<span class="cp">#define UVC_STREAM_EOH					(1 &lt;&lt; 7)</span>
<span class="cp">#define UVC_STREAM_ERR					(1 &lt;&lt; 6)</span>
<span class="cp">#define UVC_STREAM_STI					(1 &lt;&lt; 5)</span>
<span class="cp">#define UVC_STREAM_RES					(1 &lt;&lt; 4)</span>
<span class="cp">#define UVC_STREAM_SCR					(1 &lt;&lt; 3)</span>
<span class="cp">#define UVC_STREAM_PTS					(1 &lt;&lt; 2)</span>
<span class="cp">#define UVC_STREAM_EOF					(1 &lt;&lt; 1)</span>
<span class="cp">#define UVC_STREAM_FID					(1 &lt;&lt; 0)</span>

<span class="cm">/* 4.1.2. Control Capabilities */</span>
<span class="cp">#define UVC_CONTROL_CAP_GET				(1 &lt;&lt; 0)</span>
<span class="cp">#define UVC_CONTROL_CAP_SET				(1 &lt;&lt; 1)</span>
<span class="cp">#define UVC_CONTROL_CAP_DISABLED			(1 &lt;&lt; 2)</span>
<span class="cp">#define UVC_CONTROL_CAP_AUTOUPDATE			(1 &lt;&lt; 3)</span>
<span class="cp">#define UVC_CONTROL_CAP_ASYNCHRONOUS			(1 &lt;&lt; 4)</span>

<span class="cm">/* ------------------------------------------------------------------------</span>
<span class="cm"> * UVC structures</span>
<span class="cm"> */</span>

<span class="cm">/* All UVC descriptors have these 3 fields at the beginning */</span>
<span class="k">struct</span> <span class="n">uvc_descriptor_header</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* 3.7.2. Video Control Interface Header Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_header_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">bcdUVC</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wTotalLength</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwClockFrequency</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bInCollection</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">baInterfaceNr</span><span class="p">[];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_HEADER_SIZE(n)				(12+(n))</span>

<span class="cp">#define UVC_HEADER_DESCRIPTOR(n) \</span>
<span class="cp">	uvc_header_descriptor_##n</span>

<span class="cp">#define DECLARE_UVC_HEADER_DESCRIPTOR(n)		\</span>
<span class="cp">struct UVC_HEADER_DESCRIPTOR(n) {			\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u16 bcdUVC;					\</span>
<span class="cp">	__u16 wTotalLength;				\</span>
<span class="cp">	__u32 dwClockFrequency;				\</span>
<span class="cp">	__u8  bInCollection;				\</span>
<span class="cp">	__u8  baInterfaceNr[n];				\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cm">/* 3.7.2.1. Input Terminal Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_input_terminal_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTerminalID</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wTerminalType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAssocTerminal</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">iTerminal</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_INPUT_TERMINAL_SIZE			8</span>

<span class="cm">/* 3.7.2.2. Output Terminal Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_output_terminal_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTerminalID</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wTerminalType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAssocTerminal</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bSourceID</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">iTerminal</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_OUTPUT_TERMINAL_SIZE			9</span>

<span class="cm">/* 3.7.2.3. Camera Terminal Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_camera_terminal_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTerminalID</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wTerminalType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAssocTerminal</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">iTerminal</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wObjectiveFocalLengthMin</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wObjectiveFocalLengthMax</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wOcularFocalLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bControlSize</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmControls</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_CAMERA_TERMINAL_SIZE(n)			(15+(n))</span>

<span class="cm">/* 3.7.2.4. Selector Unit Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_selector_unit_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bUnitID</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bNrInPins</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">baSourceID</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">iSelector</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_SELECTOR_UNIT_SIZE(n)			(6+(n))</span>

<span class="cp">#define UVC_SELECTOR_UNIT_DESCRIPTOR(n)	\</span>
<span class="cp">	uvc_selector_unit_descriptor_##n</span>

<span class="cp">#define DECLARE_UVC_SELECTOR_UNIT_DESCRIPTOR(n)	\</span>
<span class="cp">struct UVC_SELECTOR_UNIT_DESCRIPTOR(n) {		\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u8  bUnitID;					\</span>
<span class="cp">	__u8  bNrInPins;				\</span>
<span class="cp">	__u8  baSourceID[n];				\</span>
<span class="cp">	__u8  iSelector;				\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cm">/* 3.7.2.5. Processing Unit Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_processing_unit_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bUnitID</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bSourceID</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wMaxMultiplier</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bControlSize</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmControls</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">iProcessing</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_PROCESSING_UNIT_SIZE(n)			(9+(n))</span>

<span class="cm">/* 3.7.2.6. Extension Unit Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_extension_unit_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bUnitID</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">guidExtensionCode</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">bNumControls</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bNrInPins</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">baSourceID</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">bControlSize</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmControls</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">iExtension</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_EXTENSION_UNIT_SIZE(p, n)		(24+(p)+(n))</span>

<span class="cp">#define UVC_EXTENSION_UNIT_DESCRIPTOR(p, n) \</span>
<span class="cp">	uvc_extension_unit_descriptor_##p_##n</span>

<span class="cp">#define DECLARE_UVC_EXTENSION_UNIT_DESCRIPTOR(p, n)	\</span>
<span class="cp">struct UVC_EXTENSION_UNIT_DESCRIPTOR(p, n) {		\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u8  bUnitID;					\</span>
<span class="cp">	__u8  guidExtensionCode[16];			\</span>
<span class="cp">	__u8  bNumControls;				\</span>
<span class="cp">	__u8  bNrInPins;				\</span>
<span class="cp">	__u8  baSourceID[p];				\</span>
<span class="cp">	__u8  bControlSize;				\</span>
<span class="cp">	__u8  bmControls[n];				\</span>
<span class="cp">	__u8  iExtension;				\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cm">/* 3.8.2.2. Video Control Interrupt Endpoint Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_control_endpoint_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wMaxTransferSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_CONTROL_ENDPOINT_SIZE			5</span>

<span class="cm">/* 3.9.2.1. Input Header Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_input_header_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bNumFormats</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wTotalLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bEndpointAddress</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmInfo</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTerminalLink</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bStillCaptureMethod</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTriggerSupport</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTriggerUsage</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bControlSize</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmaControls</span><span class="p">[];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_INPUT_HEADER_SIZE(n, p)			(13+(n*p))</span>

<span class="cp">#define UVC_INPUT_HEADER_DESCRIPTOR(n, p) \</span>
<span class="cp">	uvc_input_header_descriptor_##n_##p</span>

<span class="cp">#define DECLARE_UVC_INPUT_HEADER_DESCRIPTOR(n, p)	\</span>
<span class="cp">struct UVC_INPUT_HEADER_DESCRIPTOR(n, p) {		\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u8  bNumFormats;				\</span>
<span class="cp">	__u16 wTotalLength;				\</span>
<span class="cp">	__u8  bEndpointAddress;				\</span>
<span class="cp">	__u8  bmInfo;					\</span>
<span class="cp">	__u8  bTerminalLink;				\</span>
<span class="cp">	__u8  bStillCaptureMethod;			\</span>
<span class="cp">	__u8  bTriggerSupport;				\</span>
<span class="cp">	__u8  bTriggerUsage;				\</span>
<span class="cp">	__u8  bControlSize;				\</span>
<span class="cp">	__u8  bmaControls[p][n];			\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cm">/* 3.9.2.2. Output Header Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_output_header_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bNumFormats</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wTotalLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bEndpointAddress</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTerminalLink</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bControlSize</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmaControls</span><span class="p">[];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_OUTPUT_HEADER_SIZE(n, p)			(9+(n*p))</span>

<span class="cp">#define UVC_OUTPUT_HEADER_DESCRIPTOR(n, p) \</span>
<span class="cp">	uvc_output_header_descriptor_##n_##p</span>

<span class="cp">#define DECLARE_UVC_OUTPUT_HEADER_DESCRIPTOR(n, p)	\</span>
<span class="cp">struct UVC_OUTPUT_HEADER_DESCRIPTOR(n, p) {		\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u8  bNumFormats;				\</span>
<span class="cp">	__u16 wTotalLength;				\</span>
<span class="cp">	__u8  bEndpointAddress;				\</span>
<span class="cp">	__u8  bTerminalLink;				\</span>
<span class="cp">	__u8  bControlSize;				\</span>
<span class="cp">	__u8  bmaControls[p][n];			\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cm">/* 3.9.2.6. Color matching descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_color_matching_descriptor</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bColorPrimaries</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bTransferCharacteristics</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bMatrixCoefficients</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_COLOR_MATCHING_SIZE			6</span>

<span class="cm">/* 4.3.1.1. Video Probe and Commit Controls */</span>
<span class="k">struct</span> <span class="n">uvc_streaming_control</span> <span class="p">{</span>
	<span class="n">__u16</span> <span class="n">bmHint</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFormatIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFrameIndex</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwFrameInterval</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wKeyFrameRate</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wPFrameRate</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wCompQuality</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wCompWindowSize</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wDelay</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMaxVideoFrameSize</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMaxPayloadTransferSize</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwClockFrequency</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmFramingInfo</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bPreferedVersion</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bMinVersion</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bMaxVersion</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cm">/* Uncompressed Payload - 3.1.1. Uncompressed Video Format Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_format_uncompressed</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFormatIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bNumFrameDescriptors</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">guidFormat</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">bBitsPerPixel</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDefaultFrameIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAspectRatioX</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAspectRatioY</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmInterfaceFlags</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bCopyProtect</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_FORMAT_UNCOMPRESSED_SIZE			27</span>

<span class="cm">/* Uncompressed Payload - 3.1.2. Uncompressed Video Frame Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_frame_uncompressed</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFrameIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmCapabilities</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wWidth</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wHeight</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMinBitRate</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMaxBitRate</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMaxVideoFrameBufferSize</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwDefaultFrameInterval</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFrameIntervalType</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwFrameInterval</span><span class="p">[];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_FRAME_UNCOMPRESSED_SIZE(n)		(26+4*(n))</span>

<span class="cp">#define UVC_FRAME_UNCOMPRESSED(n) \</span>
<span class="cp">	uvc_frame_uncompressed_##n</span>

<span class="cp">#define DECLARE_UVC_FRAME_UNCOMPRESSED(n)		\</span>
<span class="cp">struct UVC_FRAME_UNCOMPRESSED(n) {			\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u8  bFrameIndex;				\</span>
<span class="cp">	__u8  bmCapabilities;				\</span>
<span class="cp">	__u16 wWidth;					\</span>
<span class="cp">	__u16 wHeight;					\</span>
<span class="cp">	__u32 dwMinBitRate;				\</span>
<span class="cp">	__u32 dwMaxBitRate;				\</span>
<span class="cp">	__u32 dwMaxVideoFrameBufferSize;		\</span>
<span class="cp">	__u32 dwDefaultFrameInterval;			\</span>
<span class="cp">	__u8  bFrameIntervalType;			\</span>
<span class="cp">	__u32 dwFrameInterval[n];			\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cm">/* MJPEG Payload - 3.1.1. MJPEG Video Format Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_format_mjpeg</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFormatIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bNumFrameDescriptors</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmFlags</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDefaultFrameIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAspectRatioX</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bAspectRatioY</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmInterfaceFlags</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bCopyProtect</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_FORMAT_MJPEG_SIZE			11</span>

<span class="cm">/* MJPEG Payload - 3.1.2. MJPEG Video Frame Descriptor */</span>
<span class="k">struct</span> <span class="n">uvc_frame_mjpeg</span> <span class="p">{</span>
	<span class="n">__u8</span>  <span class="n">bLength</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bDescriptorSubType</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFrameIndex</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bmCapabilities</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wWidth</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">wHeight</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMinBitRate</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMaxBitRate</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwMaxVideoFrameBufferSize</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwDefaultFrameInterval</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">bFrameIntervalType</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dwFrameInterval</span><span class="p">[];</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">__packed__</span><span class="p">));</span>

<span class="cp">#define UVC_DT_FRAME_MJPEG_SIZE(n)			(26+4*(n))</span>

<span class="cp">#define UVC_FRAME_MJPEG(n) \</span>
<span class="cp">	uvc_frame_mjpeg_##n</span>

<span class="cp">#define DECLARE_UVC_FRAME_MJPEG(n)			\</span>
<span class="cp">struct UVC_FRAME_MJPEG(n) {				\</span>
<span class="cp">	__u8  bLength;					\</span>
<span class="cp">	__u8  bDescriptorType;				\</span>
<span class="cp">	__u8  bDescriptorSubType;			\</span>
<span class="cp">	__u8  bFrameIndex;				\</span>
<span class="cp">	__u8  bmCapabilities;				\</span>
<span class="cp">	__u16 wWidth;					\</span>
<span class="cp">	__u16 wHeight;					\</span>
<span class="cp">	__u32 dwMinBitRate;				\</span>
<span class="cp">	__u32 dwMaxBitRate;				\</span>
<span class="cp">	__u32 dwMaxVideoFrameBufferSize;		\</span>
<span class="cp">	__u32 dwDefaultFrameInterval;			\</span>
<span class="cp">	__u8  bFrameIntervalType;			\</span>
<span class="cp">	__u32 dwFrameInterval[n];			\</span>
<span class="cp">} __attribute__ ((packed))</span>

<span class="cp">#endif </span><span class="cm">/* __LINUX_USB_VIDEO_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
