<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › power › smb347-charger.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>smb347-charger.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Summit Microelectronics SMB347 Battery Charger Driver</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2011, Intel Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * Authors: Bruce E. Robertson &lt;bruce.e.robertson@intel.com&gt;</span>
<span class="cm"> *          Mika Westerberg &lt;mika.westerberg@linux.intel.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef SMB347_CHARGER_H</span>
<span class="cp">#define SMB347_CHARGER_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/power_supply.h&gt;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="cm">/* use the default compensation method */</span>
	<span class="n">SMB347_SOFT_TEMP_COMPENSATE_DEFAULT</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>

	<span class="n">SMB347_SOFT_TEMP_COMPENSATE_NONE</span><span class="p">,</span>
	<span class="n">SMB347_SOFT_TEMP_COMPENSATE_CURRENT</span><span class="p">,</span>
	<span class="n">SMB347_SOFT_TEMP_COMPENSATE_VOLTAGE</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* Use default factory programmed value for hard/soft temperature limit */</span>
<span class="cp">#define SMB347_TEMP_USE_DEFAULT		-273</span>

<span class="cm">/*</span>
<span class="cm"> * Charging enable can be controlled by software (via i2c) by</span>
<span class="cm"> * smb347-charger driver or by EN pin (active low/high).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">smb347_chg_enable</span> <span class="p">{</span>
	<span class="n">SMB347_CHG_ENABLE_SW</span><span class="p">,</span>
	<span class="n">SMB347_CHG_ENABLE_PIN_ACTIVE_LOW</span><span class="p">,</span>
	<span class="n">SMB347_CHG_ENABLE_PIN_ACTIVE_HIGH</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct smb347_charger_platform_data - platform data for SMB347 charger</span>
<span class="cm"> * @battery_info: Information about the battery</span>
<span class="cm"> * @max_charge_current: maximum current (in uA) the battery can be charged</span>
<span class="cm"> * @max_charge_voltage: maximum voltage (in uV) the battery can be charged</span>
<span class="cm"> * @pre_charge_current: current (in uA) to use in pre-charging phase</span>
<span class="cm"> * @termination_current: current (in uA) used to determine when the</span>
<span class="cm"> *			 charging cycle terminates</span>
<span class="cm"> * @pre_to_fast_voltage: voltage (in uV) treshold used for transitioning to</span>
<span class="cm"> *			 pre-charge to fast charge mode</span>
<span class="cm"> * @mains_current_limit: maximum input current drawn from AC/DC input (in uA)</span>
<span class="cm"> * @usb_hc_current_limit: maximum input high current (in uA) drawn from USB</span>
<span class="cm"> *			  input</span>
<span class="cm"> * @chip_temp_threshold: die temperature where device starts limiting charge</span>
<span class="cm"> *			 current [%100 - %130] (in degree C)</span>
<span class="cm"> * @soft_cold_temp_limit: soft cold temperature limit [%0 - %15] (in degree C),</span>
<span class="cm"> *			  granularity is 5 deg C.</span>
<span class="cm"> * @soft_hot_temp_limit: soft hot temperature limit [%40 - %55] (in degree  C),</span>
<span class="cm"> *			 granularity is 5 deg C.</span>
<span class="cm"> * @hard_cold_temp_limit: hard cold temperature limit [%-5 - %10] (in degree C),</span>
<span class="cm"> *			  granularity is 5 deg C.</span>
<span class="cm"> * @hard_hot_temp_limit: hard hot temperature limit [%50 - %65] (in degree C),</span>
<span class="cm"> *			 granularity is 5 deg C.</span>
<span class="cm"> * @suspend_on_hard_temp_limit: suspend charging when hard limit is hit</span>
<span class="cm"> * @soft_temp_limit_compensation: compensation method when soft temperature</span>
<span class="cm"> *				  limit is hit</span>
<span class="cm"> * @charge_current_compensation: current (in uA) for charging compensation</span>
<span class="cm"> *				 current when temperature hits soft limits</span>
<span class="cm"> * @use_mains: AC/DC input can be used</span>
<span class="cm"> * @use_usb: USB input can be used</span>
<span class="cm"> * @use_usb_otg: USB OTG output can be used (not implemented yet)</span>
<span class="cm"> * @irq_gpio: GPIO number used for interrupts (%-1 if not used)</span>
<span class="cm"> * @enable_control: how charging enable/disable is controlled</span>
<span class="cm"> *		    (driver/pin controls)</span>
<span class="cm"> *</span>
<span class="cm"> * @use_main, @use_usb, and @use_usb_otg are means to enable/disable</span>
<span class="cm"> * hardware support for these. This is useful when we want to have for</span>
<span class="cm"> * example OTG charging controlled via OTG transceiver driver and not by</span>
<span class="cm"> * the SMB347 hardware.</span>
<span class="cm"> *</span>
<span class="cm"> * Hard and soft temperature limit values are given as described in the</span>
<span class="cm"> * device data sheet and assuming NTC beta value is %3750. Even if this is</span>
<span class="cm"> * not the case, these values should be used. They can be mapped to the</span>
<span class="cm"> * corresponding NTC beta values with the help of table %2 in the data</span>
<span class="cm"> * sheet. So for example if NTC beta is %3375 and we want to program hard</span>
<span class="cm"> * hot limit to be %53 deg C, @hard_hot_temp_limit should be set to %50.</span>
<span class="cm"> *</span>
<span class="cm"> * If zero value is given in any of the current and voltage values, the</span>
<span class="cm"> * factory programmed default will be used. For soft/hard temperature</span>
<span class="cm"> * values, pass in %SMB347_TEMP_USE_DEFAULT instead.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">smb347_charger_platform_data</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">power_supply_info</span> <span class="n">battery_info</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">max_charge_current</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">max_charge_voltage</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">pre_charge_current</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">termination_current</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">pre_to_fast_voltage</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">mains_current_limit</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">usb_hc_current_limit</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">chip_temp_threshold</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">soft_cold_temp_limit</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">soft_hot_temp_limit</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">hard_cold_temp_limit</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">hard_hot_temp_limit</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">suspend_on_hard_temp_limit</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">soft_temp_limit_compensation</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">charge_current_compensation</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">use_mains</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">use_usb</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">use_usb_otg</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">irq_gpio</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">smb347_chg_enable</span> <span class="n">enable_control</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* SMB347_CHARGER_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
