<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › neighbour.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>neighbour.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __LINUX_NEIGHBOUR_H</span>
<span class="cp">#define __LINUX_NEIGHBOUR_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/netlink.h&gt;</span>

<span class="k">struct</span> <span class="n">ndmsg</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">ndm_family</span><span class="p">;</span>
	<span class="n">__u8</span>		<span class="n">ndm_pad1</span><span class="p">;</span>
	<span class="n">__u16</span>		<span class="n">ndm_pad2</span><span class="p">;</span>
	<span class="n">__s32</span>		<span class="n">ndm_ifindex</span><span class="p">;</span>
	<span class="n">__u16</span>		<span class="n">ndm_state</span><span class="p">;</span>
	<span class="n">__u8</span>		<span class="n">ndm_flags</span><span class="p">;</span>
	<span class="n">__u8</span>		<span class="n">ndm_type</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NDA_UNSPEC</span><span class="p">,</span>
	<span class="n">NDA_DST</span><span class="p">,</span>
	<span class="n">NDA_LLADDR</span><span class="p">,</span>
	<span class="n">NDA_CACHEINFO</span><span class="p">,</span>
	<span class="n">NDA_PROBES</span><span class="p">,</span>
	<span class="n">__NDA_MAX</span>
<span class="p">};</span>

<span class="cp">#define NDA_MAX (__NDA_MAX - 1)</span>

<span class="cm">/*</span>
<span class="cm"> *	Neighbor Cache Entry Flags</span>
<span class="cm"> */</span>

<span class="cp">#define NTF_USE		0x01</span>
<span class="cp">#define NTF_PROXY	0x08	</span><span class="cm">/* == ATF_PUBL */</span><span class="cp"></span>
<span class="cp">#define NTF_ROUTER	0x80</span>

<span class="cp">#define NTF_SELF	0x02</span>
<span class="cp">#define NTF_MASTER	0x04</span>

<span class="cm">/*</span>
<span class="cm"> *	Neighbor Cache Entry States.</span>
<span class="cm"> */</span>

<span class="cp">#define NUD_INCOMPLETE	0x01</span>
<span class="cp">#define NUD_REACHABLE	0x02</span>
<span class="cp">#define NUD_STALE	0x04</span>
<span class="cp">#define NUD_DELAY	0x08</span>
<span class="cp">#define NUD_PROBE	0x10</span>
<span class="cp">#define NUD_FAILED	0x20</span>

<span class="cm">/* Dummy states */</span>
<span class="cp">#define NUD_NOARP	0x40</span>
<span class="cp">#define NUD_PERMANENT	0x80</span>
<span class="cp">#define NUD_NONE	0x00</span>

<span class="cm">/* NUD_NOARP &amp; NUD_PERMANENT are pseudostates, they never change</span>
<span class="cm">   and make no address resolution or NUD.</span>
<span class="cm">   NUD_PERMANENT is also cannot be deleted by garbage collectors.</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">nda_cacheinfo</span> <span class="p">{</span>
	<span class="n">__u32</span>		<span class="n">ndm_confirmed</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndm_used</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndm_updated</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndm_refcnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*****************************************************************</span>
<span class="cm"> *		Neighbour tables specific messages.</span>
<span class="cm"> *</span>
<span class="cm"> * To retrieve the neighbour tables send RTM_GETNEIGHTBL with the</span>
<span class="cm"> * NLM_F_DUMP flag set. Every neighbour table configuration is</span>
<span class="cm"> * spread over multiple messages to avoid running into message</span>
<span class="cm"> * size limits on systems with many interfaces. The first message</span>
<span class="cm"> * in the sequence transports all not device specific data such as</span>
<span class="cm"> * statistics, configuration, and the default parameter set.</span>
<span class="cm"> * This message is followed by 0..n messages carrying device</span>
<span class="cm"> * specific parameter sets.</span>
<span class="cm"> * Although the ordering should be sufficient, NDTA_NAME can be</span>
<span class="cm"> * used to identify sequences. The initial message can be identified</span>
<span class="cm"> * by checking for NDTA_CONFIG. The device specific messages do</span>
<span class="cm"> * not contain this TLV but have NDTPA_IFINDEX set to the</span>
<span class="cm"> * corresponding interface index.</span>
<span class="cm"> *</span>
<span class="cm"> * To change neighbour table attributes, send RTM_SETNEIGHTBL</span>
<span class="cm"> * with NDTA_NAME set. Changeable attribute include NDTA_THRESH[1-3],</span>
<span class="cm"> * NDTA_GC_INTERVAL, and all TLVs in NDTA_PARMS unless marked</span>
<span class="cm"> * otherwise. Device specific parameter sets can be changed by</span>
<span class="cm"> * setting NDTPA_IFINDEX to the interface index of the corresponding</span>
<span class="cm"> * device.</span>
<span class="cm"> ****/</span>

<span class="k">struct</span> <span class="n">ndt_stats</span> <span class="p">{</span>
	<span class="n">__u64</span>		<span class="n">ndts_allocs</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_destroys</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_hash_grows</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_res_failed</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_lookups</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_hits</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_rcv_probes_mcast</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_rcv_probes_ucast</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_periodic_gc_runs</span><span class="p">;</span>
	<span class="n">__u64</span>		<span class="n">ndts_forced_gc_runs</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NDTPA_UNSPEC</span><span class="p">,</span>
	<span class="n">NDTPA_IFINDEX</span><span class="p">,</span>			<span class="cm">/* u32, unchangeable */</span>
	<span class="n">NDTPA_REFCNT</span><span class="p">,</span>			<span class="cm">/* u32, read-only */</span>
	<span class="n">NDTPA_REACHABLE_TIME</span><span class="p">,</span>		<span class="cm">/* u64, read-only, msecs */</span>
	<span class="n">NDTPA_BASE_REACHABLE_TIME</span><span class="p">,</span>	<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_RETRANS_TIME</span><span class="p">,</span>		<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_GC_STALETIME</span><span class="p">,</span>		<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_DELAY_PROBE_TIME</span><span class="p">,</span>		<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_QUEUE_LEN</span><span class="p">,</span>		<span class="cm">/* u32 */</span>
	<span class="n">NDTPA_APP_PROBES</span><span class="p">,</span>		<span class="cm">/* u32 */</span>
	<span class="n">NDTPA_UCAST_PROBES</span><span class="p">,</span>		<span class="cm">/* u32 */</span>
	<span class="n">NDTPA_MCAST_PROBES</span><span class="p">,</span>		<span class="cm">/* u32 */</span>
	<span class="n">NDTPA_ANYCAST_DELAY</span><span class="p">,</span>		<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_PROXY_DELAY</span><span class="p">,</span>		<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_PROXY_QLEN</span><span class="p">,</span>		<span class="cm">/* u32 */</span>
	<span class="n">NDTPA_LOCKTIME</span><span class="p">,</span>			<span class="cm">/* u64, msecs */</span>
	<span class="n">NDTPA_QUEUE_LENBYTES</span><span class="p">,</span>		<span class="cm">/* u32 */</span>
	<span class="n">__NDTPA_MAX</span>
<span class="p">};</span>
<span class="cp">#define NDTPA_MAX (__NDTPA_MAX - 1)</span>

<span class="k">struct</span> <span class="n">ndtmsg</span> <span class="p">{</span>
	<span class="n">__u8</span>		<span class="n">ndtm_family</span><span class="p">;</span>
	<span class="n">__u8</span>		<span class="n">ndtm_pad1</span><span class="p">;</span>
	<span class="n">__u16</span>		<span class="n">ndtm_pad2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ndt_config</span> <span class="p">{</span>
	<span class="n">__u16</span>		<span class="n">ndtc_key_len</span><span class="p">;</span>
	<span class="n">__u16</span>		<span class="n">ndtc_entry_size</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndtc_entries</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndtc_last_flush</span><span class="p">;</span>	<span class="cm">/* delta to now in msecs */</span>
	<span class="n">__u32</span>		<span class="n">ndtc_last_rand</span><span class="p">;</span>		<span class="cm">/* delta to now in msecs */</span>
	<span class="n">__u32</span>		<span class="n">ndtc_hash_rnd</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndtc_hash_mask</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndtc_hash_chain_gc</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">ndtc_proxy_qlen</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NDTA_UNSPEC</span><span class="p">,</span>
	<span class="n">NDTA_NAME</span><span class="p">,</span>			<span class="cm">/* char *, unchangeable */</span>
	<span class="n">NDTA_THRESH1</span><span class="p">,</span>			<span class="cm">/* u32 */</span>
	<span class="n">NDTA_THRESH2</span><span class="p">,</span>			<span class="cm">/* u32 */</span>
	<span class="n">NDTA_THRESH3</span><span class="p">,</span>			<span class="cm">/* u32 */</span>
	<span class="n">NDTA_CONFIG</span><span class="p">,</span>			<span class="cm">/* struct ndt_config, read-only */</span>
	<span class="n">NDTA_PARMS</span><span class="p">,</span>			<span class="cm">/* nested TLV NDTPA_* */</span>
	<span class="n">NDTA_STATS</span><span class="p">,</span>			<span class="cm">/* struct ndt_stats, read-only */</span>
	<span class="n">NDTA_GC_INTERVAL</span><span class="p">,</span>		<span class="cm">/* u64, msecs */</span>
	<span class="n">__NDTA_MAX</span>
<span class="p">};</span>
<span class="cp">#define NDTA_MAX (__NDTA_MAX - 1)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
