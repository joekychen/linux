<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › asic3.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>asic3.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * include/linux/mfd/asic3.h</span>
<span class="cm"> *</span>
<span class="cm"> * Compaq ASIC3 headers.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2001 Compaq Computer Corporation.</span>
<span class="cm"> * Copyright 2007-2008 OpenedHand Ltd.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ASIC3_H__</span>
<span class="cp">#define __ASIC3_H__</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="k">struct</span> <span class="n">led_classdev</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">asic3_led</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">char</span>	<span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span>	<span class="o">*</span><span class="n">default_trigger</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">led_classdev</span> <span class="o">*</span><span class="n">cdev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">asic3_platform_data</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="o">*</span><span class="n">gpio_config</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpio_config_num</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irq_base</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpio_base</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">clock_rate</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">asic3_led</span> <span class="o">*</span><span class="n">leds</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ASIC3_NUM_GPIO_BANKS	4</span>
<span class="cp">#define ASIC3_GPIOS_PER_BANK	16</span>
<span class="cp">#define ASIC3_NUM_GPIOS		64</span>
<span class="cp">#define ASIC3_NR_IRQS		ASIC3_NUM_GPIOS + 6</span>

<span class="cp">#define ASIC3_IRQ_LED0		64</span>
<span class="cp">#define ASIC3_IRQ_LED1		65</span>
<span class="cp">#define ASIC3_IRQ_LED2		66</span>
<span class="cp">#define ASIC3_IRQ_SPI		67</span>
<span class="cp">#define ASIC3_IRQ_SMBUS		68</span>
<span class="cp">#define ASIC3_IRQ_OWM		69</span>

<span class="cp">#define ASIC3_TO_GPIO(gpio) (NR_BUILTIN_GPIO + (gpio))</span>

<span class="cp">#define ASIC3_GPIO_BANK_A	0</span>
<span class="cp">#define ASIC3_GPIO_BANK_B	1</span>
<span class="cp">#define ASIC3_GPIO_BANK_C	2</span>
<span class="cp">#define ASIC3_GPIO_BANK_D	3</span>

<span class="cp">#define ASIC3_GPIO(bank, gpio) \</span>
<span class="cp">	((ASIC3_GPIOS_PER_BANK * ASIC3_GPIO_BANK_##bank) + (gpio))</span>
<span class="cp">#define ASIC3_GPIO_bit(gpio) (1 &lt;&lt; (gpio &amp; 0xf))</span>
<span class="cm">/* All offsets below are specified with this address bus shift */</span>
<span class="cp">#define ASIC3_DEFAULT_ADDR_SHIFT 2</span>

<span class="cp">#define ASIC3_OFFSET(base, reg) (ASIC3_##base##_BASE + ASIC3_##base##_##reg)</span>
<span class="cp">#define ASIC3_GPIO_OFFSET(base, reg) \</span>
<span class="cp">	(ASIC3_GPIO_##base##_BASE + ASIC3_GPIO_##reg)</span>

<span class="cp">#define ASIC3_GPIO_A_BASE      0x0000</span>
<span class="cp">#define ASIC3_GPIO_B_BASE      0x0100</span>
<span class="cp">#define ASIC3_GPIO_C_BASE      0x0200</span>
<span class="cp">#define ASIC3_GPIO_D_BASE      0x0300</span>

<span class="cp">#define ASIC3_GPIO_TO_BANK(gpio) ((gpio) &gt;&gt; 4)</span>
<span class="cp">#define ASIC3_GPIO_TO_BIT(gpio)  ((gpio) - \</span>
<span class="cp">				  (ASIC3_GPIOS_PER_BANK * ((gpio) &gt;&gt; 4)))</span>
<span class="cp">#define ASIC3_GPIO_TO_MASK(gpio) (1 &lt;&lt; ASIC3_GPIO_TO_BIT(gpio))</span>
<span class="cp">#define ASIC3_GPIO_TO_BASE(gpio) (ASIC3_GPIO_A_BASE + (((gpio) &gt;&gt; 4) * 0x0100))</span>
<span class="cp">#define ASIC3_BANK_TO_BASE(bank) (ASIC3_GPIO_A_BASE + ((bank) * 0x100))</span>

<span class="cp">#define ASIC3_GPIO_MASK          0x00    </span><span class="cm">/* R/W 0:don&#39;t mask */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_DIRECTION     0x04    </span><span class="cm">/* R/W 0:input */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_OUT           0x08    </span><span class="cm">/* R/W 0:output low */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_TRIGGER_TYPE  0x0c    </span><span class="cm">/* R/W 0:level */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_EDGE_TRIGGER  0x10    </span><span class="cm">/* R/W 0:falling */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_LEVEL_TRIGGER 0x14    </span><span class="cm">/* R/W 0:low level detect */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_SLEEP_MASK    0x18    </span><span class="cm">/* R/W 0:don&#39;t mask in sleep mode */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_SLEEP_OUT     0x1c    </span><span class="cm">/* R/W level 0:low in sleep mode */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_BAT_FAULT_OUT 0x20    </span><span class="cm">/* R/W level 0:low in batt_fault */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_INT_STATUS    0x24    </span><span class="cm">/* R/W 0:none, 1:detect */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_ALT_FUNCTION  0x28	 </span><span class="cm">/* R/W 1:LED register control */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_SLEEP_CONF    0x2c    </span><span class="cm">/*</span>
<span class="cm">					  * R/W bit 1: autosleep</span>
<span class="cm">					  * 0: disable gposlpout in normal mode,</span>
<span class="cm">					  * enable gposlpout in sleep mode.</span>
<span class="cm">					  */</span><span class="cp"></span>
<span class="cp">#define ASIC3_GPIO_STATUS        0x30    </span><span class="cm">/* R   Pin status */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ASIC3 GPIO config</span>
<span class="cm"> *</span>
<span class="cm"> * Bits 0..6   gpio number</span>
<span class="cm"> * Bits 7..13  Alternate function</span>
<span class="cm"> * Bit  14     Direction</span>
<span class="cm"> * Bit  15     Initial value</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#define ASIC3_CONFIG_GPIO_PIN(config) ((config) &amp; 0x7f)</span>
<span class="cp">#define ASIC3_CONFIG_GPIO_ALT(config)  (((config) &amp; (0x7f &lt;&lt; 7)) &gt;&gt; 7)</span>
<span class="cp">#define ASIC3_CONFIG_GPIO_DIR(config)  ((config &amp; (1 &lt;&lt; 14)) &gt;&gt; 14)</span>
<span class="cp">#define ASIC3_CONFIG_GPIO_INIT(config) ((config &amp; (1 &lt;&lt; 15)) &gt;&gt; 15)</span>
<span class="cp">#define ASIC3_CONFIG_GPIO(gpio, alt, dir, init) (((gpio) &amp; 0x7f) \</span>
<span class="cp">	| (((alt) &amp; 0x7f) &lt;&lt; 7) | (((dir) &amp; 0x1) &lt;&lt; 14) \</span>
<span class="cp">	| (((init) &amp; 0x1) &lt;&lt; 15))</span>
<span class="cp">#define ASIC3_CONFIG_GPIO_DEFAULT(gpio, dir, init) \</span>
<span class="cp">	ASIC3_CONFIG_GPIO((gpio), 0, (dir), (init))</span>
<span class="cp">#define ASIC3_CONFIG_GPIO_DEFAULT_OUT(gpio, init) \</span>
<span class="cp">	ASIC3_CONFIG_GPIO((gpio), 0, 1, (init))</span>

<span class="cm">/*</span>
<span class="cm"> * Alternate functions</span>
<span class="cm"> */</span>
<span class="cp">#define ASIC3_GPIOA11_PWM0		ASIC3_CONFIG_GPIO(11, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOA12_PWM1		ASIC3_CONFIG_GPIO(12, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOA15_CONTROL_CX	ASIC3_CONFIG_GPIO(15, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC0_LED0		ASIC3_CONFIG_GPIO(32, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC1_LED1		ASIC3_CONFIG_GPIO(33, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC2_LED2		ASIC3_CONFIG_GPIO(34, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC3_SPI_RXD		ASIC3_CONFIG_GPIO(35, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC4_CF_nCD		ASIC3_CONFIG_GPIO(36, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC4_SPI_TXD		ASIC3_CONFIG_GPIO(36, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC5_SPI_CLK		ASIC3_CONFIG_GPIO(37, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC5_nCIOW		ASIC3_CONFIG_GPIO(37, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC6_nCIOR		ASIC3_CONFIG_GPIO(38, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC7_nPCE_1		ASIC3_CONFIG_GPIO(39, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC8_nPCE_2		ASIC3_CONFIG_GPIO(40, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC9_nPOE		ASIC3_CONFIG_GPIO(41, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC10_nPWE		ASIC3_CONFIG_GPIO(42, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC11_PSKTSEL		ASIC3_CONFIG_GPIO(43, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC12_nPREG		ASIC3_CONFIG_GPIO(44, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOC13_nPWAIT		ASIC3_CONFIG_GPIO(45, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC14_nPIOIS16		ASIC3_CONFIG_GPIO(46, 1, 1, 0)</span>
<span class="cp">#define ASIC3_GPIOC15_nPIOR		ASIC3_CONFIG_GPIO(47, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOD4_CF_nCD		ASIC3_CONFIG_GPIO(52, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOD11_nCIOIS16		ASIC3_CONFIG_GPIO(59, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOD12_nCWAIT		ASIC3_CONFIG_GPIO(60, 1, 0, 0)</span>
<span class="cp">#define ASIC3_GPIOD15_nPIOW		ASIC3_CONFIG_GPIO(63, 1, 0, 0)</span>


<span class="cp">#define ASIC3_SPI_Base		      0x0400</span>
<span class="cp">#define ASIC3_SPI_Control               0x0000</span>
<span class="cp">#define ASIC3_SPI_TxData                0x0004</span>
<span class="cp">#define ASIC3_SPI_RxData                0x0008</span>
<span class="cp">#define ASIC3_SPI_Int                   0x000c</span>
<span class="cp">#define ASIC3_SPI_Status                0x0010</span>

<span class="cp">#define SPI_CONTROL_SPR(clk)      ((clk) &amp; 0x0f)  </span><span class="cm">/* Clock rate */</span><span class="cp"></span>

<span class="cp">#define ASIC3_PWM_0_Base                0x0500</span>
<span class="cp">#define ASIC3_PWM_1_Base                0x0600</span>
<span class="cp">#define ASIC3_PWM_TimeBase              0x0000</span>
<span class="cp">#define ASIC3_PWM_PeriodTime            0x0004</span>
<span class="cp">#define ASIC3_PWM_DutyTime              0x0008</span>

<span class="cp">#define PWM_TIMEBASE_VALUE(x)    ((x)&amp;0xf)   </span><span class="cm">/* Low 4 bits sets time base */</span><span class="cp"></span>
<span class="cp">#define PWM_TIMEBASE_ENABLE     (1 &lt;&lt; 4)   </span><span class="cm">/* Enable clock */</span><span class="cp"></span>

<span class="cp">#define ASIC3_NUM_LEDS                  3</span>
<span class="cp">#define ASIC3_LED_0_Base                0x0700</span>
<span class="cp">#define ASIC3_LED_1_Base                0x0800</span>
<span class="cp">#define ASIC3_LED_2_Base 		      0x0900</span>
<span class="cp">#define ASIC3_LED_TimeBase              0x0000    </span><span class="cm">/* R/W  7 bits */</span><span class="cp"></span>
<span class="cp">#define ASIC3_LED_PeriodTime            0x0004    </span><span class="cm">/* R/W 12 bits */</span><span class="cp"></span>
<span class="cp">#define ASIC3_LED_DutyTime              0x0008    </span><span class="cm">/* R/W 12 bits */</span><span class="cp"></span>
<span class="cp">#define ASIC3_LED_AutoStopCount         0x000c    </span><span class="cm">/* R/W 16 bits */</span><span class="cp"></span>

<span class="cm">/* LED TimeBase bits - match ASIC2 */</span>
<span class="cp">#define LED_TBS		0x0f </span><span class="cm">/* Low 4 bits sets time base, max = 13 */</span><span class="cp"></span>
			     <span class="cm">/* Note: max = 5 on hx4700	*/</span>
			     <span class="cm">/* 0: maximum time base */</span>
			     <span class="cm">/* 1: maximum time base / 2 */</span>
			     <span class="cm">/* n: maximum time base / 2^n */</span>

<span class="cp">#define LED_EN		(1 &lt;&lt; 4) </span><span class="cm">/* LED ON/OFF 0:off, 1:on */</span><span class="cp"></span>
<span class="cp">#define LED_AUTOSTOP	(1 &lt;&lt; 5) </span><span class="cm">/* LED ON/OFF auto stop 0:disable, 1:enable */</span><span class="cp"></span>
<span class="cp">#define LED_ALWAYS	(1 &lt;&lt; 6) </span><span class="cm">/* LED Interrupt Mask 0:No mask, 1:mask */</span><span class="cp"></span>

<span class="cp">#define ASIC3_CLOCK_BASE	   0x0A00</span>
<span class="cp">#define ASIC3_CLOCK_CDEX           0x00</span>
<span class="cp">#define ASIC3_CLOCK_SEL            0x04</span>

<span class="cp">#define CLOCK_CDEX_SOURCE       (1 &lt;&lt; 0)  </span><span class="cm">/* 2 bits */</span><span class="cp"></span>
<span class="cp">#define CLOCK_CDEX_SOURCE0      (1 &lt;&lt; 0)</span>
<span class="cp">#define CLOCK_CDEX_SOURCE1      (1 &lt;&lt; 1)</span>
<span class="cp">#define CLOCK_CDEX_SPI          (1 &lt;&lt; 2)</span>
<span class="cp">#define CLOCK_CDEX_OWM          (1 &lt;&lt; 3)</span>
<span class="cp">#define CLOCK_CDEX_PWM0         (1 &lt;&lt; 4)</span>
<span class="cp">#define CLOCK_CDEX_PWM1         (1 &lt;&lt; 5)</span>
<span class="cp">#define CLOCK_CDEX_LED0         (1 &lt;&lt; 6)</span>
<span class="cp">#define CLOCK_CDEX_LED1         (1 &lt;&lt; 7)</span>
<span class="cp">#define CLOCK_CDEX_LED2         (1 &lt;&lt; 8)</span>

<span class="cm">/* Clocks settings: 1 for 24.576 MHz, 0 for 12.288Mhz */</span>
<span class="cp">#define CLOCK_CDEX_SD_HOST      (1 &lt;&lt; 9)   </span><span class="cm">/* R/W: SD host clock source */</span><span class="cp"></span>
<span class="cp">#define CLOCK_CDEX_SD_BUS       (1 &lt;&lt; 10)  </span><span class="cm">/* R/W: SD bus clock source ctrl */</span><span class="cp"></span>
<span class="cp">#define CLOCK_CDEX_SMBUS        (1 &lt;&lt; 11)</span>
<span class="cp">#define CLOCK_CDEX_CONTROL_CX   (1 &lt;&lt; 12)</span>

<span class="cp">#define CLOCK_CDEX_EX0          (1 &lt;&lt; 13)  </span><span class="cm">/* R/W: 32.768 kHz crystal */</span><span class="cp"></span>
<span class="cp">#define CLOCK_CDEX_EX1          (1 &lt;&lt; 14)  </span><span class="cm">/* R/W: 24.576 MHz crystal */</span><span class="cp"></span>

<span class="cp">#define CLOCK_SEL_SD_HCLK_SEL   (1 &lt;&lt; 0)   </span><span class="cm">/* R/W: SDIO host clock select */</span><span class="cp"></span>
<span class="cp">#define CLOCK_SEL_SD_BCLK_SEL   (1 &lt;&lt; 1)   </span><span class="cm">/* R/W: SDIO bus clock select */</span><span class="cp"></span>

<span class="cm">/* R/W: INT clock source control (32.768 kHz) */</span>
<span class="cp">#define CLOCK_SEL_CX            (1 &lt;&lt; 2)</span>


<span class="cp">#define ASIC3_INTR_BASE		0x0B00</span>

<span class="cp">#define ASIC3_INTR_INT_MASK       0x00  </span><span class="cm">/* Interrupt mask control */</span><span class="cp"></span>
<span class="cp">#define ASIC3_INTR_P_INT_STAT     0x04  </span><span class="cm">/* Peripheral interrupt status */</span><span class="cp"></span>
<span class="cp">#define ASIC3_INTR_INT_CPS        0x08  </span><span class="cm">/* Interrupt timer clock pre-scale */</span><span class="cp"></span>
<span class="cp">#define ASIC3_INTR_INT_TBS        0x0c  </span><span class="cm">/* Interrupt timer set */</span><span class="cp"></span>

<span class="cp">#define ASIC3_INTMASK_GINTMASK    (1 &lt;&lt; 0)  </span><span class="cm">/* Global INTs mask 1:enable */</span><span class="cp"></span>
<span class="cp">#define ASIC3_INTMASK_GINTEL      (1 &lt;&lt; 1)  </span><span class="cm">/* 1: rising edge, 0: hi level */</span><span class="cp"></span>
<span class="cp">#define ASIC3_INTMASK_MASK0       (1 &lt;&lt; 2)</span>
<span class="cp">#define ASIC3_INTMASK_MASK1       (1 &lt;&lt; 3)</span>
<span class="cp">#define ASIC3_INTMASK_MASK2       (1 &lt;&lt; 4)</span>
<span class="cp">#define ASIC3_INTMASK_MASK3       (1 &lt;&lt; 5)</span>
<span class="cp">#define ASIC3_INTMASK_MASK4       (1 &lt;&lt; 6)</span>
<span class="cp">#define ASIC3_INTMASK_MASK5       (1 &lt;&lt; 7)</span>

<span class="cp">#define ASIC3_INTR_PERIPHERAL_A   (1 &lt;&lt; 0)</span>
<span class="cp">#define ASIC3_INTR_PERIPHERAL_B   (1 &lt;&lt; 1)</span>
<span class="cp">#define ASIC3_INTR_PERIPHERAL_C   (1 &lt;&lt; 2)</span>
<span class="cp">#define ASIC3_INTR_PERIPHERAL_D   (1 &lt;&lt; 3)</span>
<span class="cp">#define ASIC3_INTR_LED0           (1 &lt;&lt; 4)</span>
<span class="cp">#define ASIC3_INTR_LED1           (1 &lt;&lt; 5)</span>
<span class="cp">#define ASIC3_INTR_LED2           (1 &lt;&lt; 6)</span>
<span class="cp">#define ASIC3_INTR_SPI            (1 &lt;&lt; 7)</span>
<span class="cp">#define ASIC3_INTR_SMBUS          (1 &lt;&lt; 8)</span>
<span class="cp">#define ASIC3_INTR_OWM            (1 &lt;&lt; 9)</span>

<span class="cp">#define ASIC3_INTR_CPS(x)         ((x)&amp;0x0f)    </span><span class="cm">/* 4 bits, max 14 */</span><span class="cp"></span>
<span class="cp">#define ASIC3_INTR_CPS_SET        (1 &lt;&lt; 4)    </span><span class="cm">/* Time base enable */</span><span class="cp"></span>


<span class="cm">/* Basic control of the SD ASIC */</span>
<span class="cp">#define ASIC3_SDHWCTRL_BASE     0x0E00</span>
<span class="cp">#define ASIC3_SDHWCTRL_SDCONF     0x00</span>

<span class="cp">#define ASIC3_SDHWCTRL_SUSPEND    (1 &lt;&lt; 0)  </span><span class="cm">/* 1=suspend all SD operations */</span><span class="cp"></span>
<span class="cp">#define ASIC3_SDHWCTRL_CLKSEL     (1 &lt;&lt; 1)  </span><span class="cm">/* 1=SDICK, 0=HCLK */</span><span class="cp"></span>
<span class="cp">#define ASIC3_SDHWCTRL_PCLR       (1 &lt;&lt; 2)  </span><span class="cm">/* All registers of SDIO cleared */</span><span class="cp"></span>
<span class="cp">#define ASIC3_SDHWCTRL_LEVCD      (1 &lt;&lt; 3)  </span><span class="cm">/* SD card detection: 0:low */</span><span class="cp"></span>

<span class="cm">/* SD card write protection: 0=high */</span>
<span class="cp">#define ASIC3_SDHWCTRL_LEVWP      (1 &lt;&lt; 4)</span>
<span class="cp">#define ASIC3_SDHWCTRL_SDLED      (1 &lt;&lt; 5)  </span><span class="cm">/* SD card LED signal 0=disable */</span><span class="cp"></span>

<span class="cm">/* SD card power supply ctrl 1=enable */</span>
<span class="cp">#define ASIC3_SDHWCTRL_SDPWR      (1 &lt;&lt; 6)</span>

<span class="cp">#define ASIC3_EXTCF_BASE        0x1100</span>

<span class="cp">#define ASIC3_EXTCF_SELECT        0x00</span>
<span class="cp">#define ASIC3_EXTCF_RESET         0x04</span>

<span class="cp">#define ASIC3_EXTCF_SMOD0	         (1 &lt;&lt; 0)  </span><span class="cm">/* slot number of mode 0 */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_SMOD1	         (1 &lt;&lt; 1)  </span><span class="cm">/* slot number of mode 1 */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_SMOD2	         (1 &lt;&lt; 2)  </span><span class="cm">/* slot number of mode 2 */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_OWM_EN	         (1 &lt;&lt; 4)  </span><span class="cm">/* enable onewire module */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_OWM_SMB	         (1 &lt;&lt; 5)  </span><span class="cm">/* OWM bus selection */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_OWM_RESET            (1 &lt;&lt; 6)  </span><span class="cm">/* ?? used by OWM and CF */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_CF0_SLEEP_MODE       (1 &lt;&lt; 7)  </span><span class="cm">/* CF0 sleep state */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_CF1_SLEEP_MODE       (1 &lt;&lt; 8)  </span><span class="cm">/* CF1 sleep state */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_CF0_PWAIT_EN         (1 &lt;&lt; 10) </span><span class="cm">/* CF0 PWAIT_n control */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_CF1_PWAIT_EN         (1 &lt;&lt; 11) </span><span class="cm">/* CF1 PWAIT_n control */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_CF0_BUF_EN           (1 &lt;&lt; 12) </span><span class="cm">/* CF0 buffer control */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_CF1_BUF_EN           (1 &lt;&lt; 13) </span><span class="cm">/* CF1 buffer control */</span><span class="cp"></span>
<span class="cp">#define ASIC3_EXTCF_SD_MEM_ENABLE        (1 &lt;&lt; 14)</span>
<span class="cp">#define ASIC3_EXTCF_CF_SLEEP             (1 &lt;&lt; 15) </span><span class="cm">/* CF sleep mode control */</span><span class="cp"></span>

<span class="cm">/*********************************************</span>
<span class="cm"> *  The Onewire interface (DS1WM) is handled</span>
<span class="cm"> *  by the ds1wm driver.</span>
<span class="cm"> *</span>
<span class="cm"> *********************************************/</span>

<span class="cp">#define ASIC3_OWM_BASE		0xC00</span>

<span class="cm">/*****************************************************************************</span>
<span class="cm"> *  The SD configuration registers are at a completely different location</span>
<span class="cm"> *  in memory.  They are divided into three sets of registers:</span>
<span class="cm"> *</span>
<span class="cm"> *  SD_CONFIG         Core configuration register</span>
<span class="cm"> *  SD_CTRL           Control registers for SD operations</span>
<span class="cm"> *  SDIO_CTRL         Control registers for SDIO operations</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>
<span class="cp">#define ASIC3_SD_CONFIG_BASE	0x0400 </span><span class="cm">/* Assumes 32 bit addressing */</span><span class="cp"></span>
<span class="cp">#define ASIC3_SD_CONFIG_SIZE	0x0200 </span><span class="cm">/* Assumes 32 bit addressing */</span><span class="cp"></span>
<span class="cp">#define ASIC3_SD_CTRL_BASE	0x1000</span>
<span class="cp">#define ASIC3_SDIO_CTRL_BASE	0x1200</span>

<span class="cp">#define ASIC3_MAP_SIZE_32BIT	0x2000</span>
<span class="cp">#define ASIC3_MAP_SIZE_16BIT	0x1000</span>

<span class="cm">/* Functions needed by leds-asic3 */</span>

<span class="k">struct</span> <span class="n">asic3</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">asic3_write_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">asic3</span> <span class="o">*</span><span class="n">asic</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">asic3_read_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">asic3</span> <span class="o">*</span><span class="n">asic</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __ASIC3_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
