<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › abx500 › ab8500.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ab8500.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) ST-Ericsson SA 2010</span>
<span class="cm"> *</span>
<span class="cm"> * License Terms: GNU General Public License v2</span>
<span class="cm"> * Author: Srinidhi Kasagar &lt;srinidhi.kasagar@stericsson.com&gt;</span>
<span class="cm"> */</span>
<span class="cp">#ifndef MFD_AB8500_H</span>
<span class="cp">#define MFD_AB8500_H</span>

<span class="cp">#include &lt;linux/atomic.h&gt;</span>
<span class="cp">#include &lt;linux/mutex.h&gt;</span>

<span class="k">struct</span> <span class="n">device</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * AB IC versions</span>
<span class="cm"> *</span>
<span class="cm"> * AB8500_VERSION_AB8500 should be 0xFF but will never be read as need a</span>
<span class="cm"> * non-supported multi-byte I2C access via PRCMU. Set to 0x00 to ease the</span>
<span class="cm"> * print of version string.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">ab8500_version</span> <span class="p">{</span>
	<span class="n">AB8500_VERSION_AB8500</span> <span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
	<span class="n">AB8500_VERSION_AB8505</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">AB8500_VERSION_AB9540</span> <span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="n">AB8500_VERSION_AB8540</span> <span class="o">=</span> <span class="mh">0x3</span><span class="p">,</span>
	<span class="n">AB8500_VERSION_UNDEFINED</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* AB8500 CIDs*/</span>
<span class="cp">#define AB8500_CUTEARLY	0x00</span>
<span class="cp">#define AB8500_CUT1P0	0x10</span>
<span class="cp">#define AB8500_CUT1P1	0x11</span>
<span class="cp">#define AB8500_CUT2P0	0x20</span>
<span class="cp">#define AB8500_CUT3P0	0x30</span>
<span class="cp">#define AB8500_CUT3P3	0x33</span>

<span class="cm">/*</span>
<span class="cm"> * AB8500 bank addresses</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_SYS_CTRL1_BLOCK	0x1</span>
<span class="cp">#define AB8500_SYS_CTRL2_BLOCK	0x2</span>
<span class="cp">#define AB8500_REGU_CTRL1	0x3</span>
<span class="cp">#define AB8500_REGU_CTRL2	0x4</span>
<span class="cp">#define AB8500_USB		0x5</span>
<span class="cp">#define AB8500_TVOUT		0x6</span>
<span class="cp">#define AB8500_DBI		0x7</span>
<span class="cp">#define AB8500_ECI_AV_ACC	0x8</span>
<span class="cp">#define AB8500_RESERVED		0x9</span>
<span class="cp">#define AB8500_GPADC		0xA</span>
<span class="cp">#define AB8500_CHARGER		0xB</span>
<span class="cp">#define AB8500_GAS_GAUGE	0xC</span>
<span class="cp">#define AB8500_AUDIO		0xD</span>
<span class="cp">#define AB8500_INTERRUPT	0xE</span>
<span class="cp">#define AB8500_RTC		0xF</span>
<span class="cp">#define AB8500_MISC		0x10</span>
<span class="cp">#define AB8500_DEVELOPMENT	0x11</span>
<span class="cp">#define AB8500_DEBUG		0x12</span>
<span class="cp">#define AB8500_PROD_TEST	0x13</span>
<span class="cp">#define AB8500_OTP_EMUL		0x15</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupts</span>
<span class="cm"> * Values used to index into array ab8500_irq_regoffset[] defined in</span>
<span class="cm"> * drivers/mdf/ab8500-core.c</span>
<span class="cm"> */</span>
<span class="cm">/* Definitions for AB8500 and AB9540 */</span>
<span class="cm">/* ab8500_irq_regoffset[0] -&gt; IT[Source|Latch|Mask]1 */</span>
<span class="cp">#define AB8500_INT_MAIN_EXT_CH_NOT_OK	0 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_UN_PLUG_TV_DET	1 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_PLUG_TV_DET		2 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_TEMP_WARM		3</span>
<span class="cp">#define AB8500_INT_PON_KEY2DB_F		4</span>
<span class="cp">#define AB8500_INT_PON_KEY2DB_R		5</span>
<span class="cp">#define AB8500_INT_PON_KEY1DB_F		6</span>
<span class="cp">#define AB8500_INT_PON_KEY1DB_R		7</span>
<span class="cm">/* ab8500_irq_regoffset[1] -&gt; IT[Source|Latch|Mask]2 */</span>
<span class="cp">#define AB8500_INT_BATT_OVV		8</span>
<span class="cp">#define AB8500_INT_MAIN_CH_UNPLUG_DET	10 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_MAIN_CH_PLUG_DET	11 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_VBUS_DET_F		14</span>
<span class="cp">#define AB8500_INT_VBUS_DET_R		15</span>
<span class="cm">/* ab8500_irq_regoffset[2] -&gt; IT[Source|Latch|Mask]3 */</span>
<span class="cp">#define AB8500_INT_VBUS_CH_DROP_END	16</span>
<span class="cp">#define AB8500_INT_RTC_60S		17</span>
<span class="cp">#define AB8500_INT_RTC_ALARM		18</span>
<span class="cp">#define AB8500_INT_BAT_CTRL_INDB	20</span>
<span class="cp">#define AB8500_INT_CH_WD_EXP		21</span>
<span class="cp">#define AB8500_INT_VBUS_OVV		22</span>
<span class="cp">#define AB8500_INT_MAIN_CH_DROP_END	23 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cm">/* ab8500_irq_regoffset[3] -&gt; IT[Source|Latch|Mask]4 */</span>
<span class="cp">#define AB8500_INT_CCN_CONV_ACC		24</span>
<span class="cp">#define AB8500_INT_INT_AUD		25</span>
<span class="cp">#define AB8500_INT_CCEOC		26</span>
<span class="cp">#define AB8500_INT_CC_INT_CALIB		27</span>
<span class="cp">#define AB8500_INT_LOW_BAT_F		28</span>
<span class="cp">#define AB8500_INT_LOW_BAT_R		29</span>
<span class="cp">#define AB8500_INT_BUP_CHG_NOT_OK	30</span>
<span class="cp">#define AB8500_INT_BUP_CHG_OK		31</span>
<span class="cm">/* ab8500_irq_regoffset[4] -&gt; IT[Source|Latch|Mask]5 */</span>
<span class="cp">#define AB8500_INT_GP_HW_ADC_CONV_END	32 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_ACC_DETECT_1DB_F	33</span>
<span class="cp">#define AB8500_INT_ACC_DETECT_1DB_R	34</span>
<span class="cp">#define AB8500_INT_ACC_DETECT_22DB_F	35</span>
<span class="cp">#define AB8500_INT_ACC_DETECT_22DB_R	36</span>
<span class="cp">#define AB8500_INT_ACC_DETECT_21DB_F	37</span>
<span class="cp">#define AB8500_INT_ACC_DETECT_21DB_R	38</span>
<span class="cp">#define AB8500_INT_GP_SW_ADC_CONV_END	39</span>
<span class="cm">/* ab8500_irq_regoffset[5] -&gt; IT[Source|Latch|Mask]7 */</span>
<span class="cp">#define AB8500_INT_GPIO6R		40 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO7R		41 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO8R		42 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO9R		43 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO10R		44</span>
<span class="cp">#define AB8500_INT_GPIO11R		45</span>
<span class="cp">#define AB8500_INT_GPIO12R		46 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO13R		47</span>
<span class="cm">/* ab8500_irq_regoffset[6] -&gt; IT[Source|Latch|Mask]8 */</span>
<span class="cp">#define AB8500_INT_GPIO24R		48 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO25R		49 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO36R		50 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO37R		51 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO38R		52 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO39R		53 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO40R		54</span>
<span class="cp">#define AB8500_INT_GPIO41R		55</span>
<span class="cm">/* ab8500_irq_regoffset[7] -&gt; IT[Source|Latch|Mask]9 */</span>
<span class="cp">#define AB8500_INT_GPIO6F		56 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO7F		57 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO8F		58 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO9F		59 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO10F		60</span>
<span class="cp">#define AB8500_INT_GPIO11F		61</span>
<span class="cp">#define AB8500_INT_GPIO12F		62 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO13F		63</span>
<span class="cm">/* ab8500_irq_regoffset[8] -&gt; IT[Source|Latch|Mask]10 */</span>
<span class="cp">#define AB8500_INT_GPIO24F		64 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO25F		65 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO36F		66 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO37F		67 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO38F		68 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO39F		69 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_GPIO40F		70</span>
<span class="cp">#define AB8500_INT_GPIO41F		71</span>
<span class="cm">/* ab8500_irq_regoffset[9] -&gt; IT[Source|Latch|Mask]12 */</span>
<span class="cp">#define AB8500_INT_ADP_SOURCE_ERROR	72</span>
<span class="cp">#define AB8500_INT_ADP_SINK_ERROR	73</span>
<span class="cp">#define AB8500_INT_ADP_PROBE_PLUG	74</span>
<span class="cp">#define AB8500_INT_ADP_PROBE_UNPLUG	75</span>
<span class="cp">#define AB8500_INT_ADP_SENSE_OFF	76</span>
<span class="cp">#define AB8500_INT_USB_PHY_POWER_ERR	78</span>
<span class="cp">#define AB8500_INT_USB_LINK_STATUS	79</span>
<span class="cm">/* ab8500_irq_regoffset[10] -&gt; IT[Source|Latch|Mask]19 */</span>
<span class="cp">#define AB8500_INT_BTEMP_LOW		80</span>
<span class="cp">#define AB8500_INT_BTEMP_LOW_MEDIUM	81</span>
<span class="cp">#define AB8500_INT_BTEMP_MEDIUM_HIGH	82</span>
<span class="cp">#define AB8500_INT_BTEMP_HIGH		83</span>
<span class="cm">/* ab8500_irq_regoffset[11] -&gt; IT[Source|Latch|Mask]20 */</span>
<span class="cp">#define AB8500_INT_SRP_DETECT		88</span>
<span class="cp">#define AB8500_INT_USB_CHARGER_NOT_OKR	89</span>
<span class="cp">#define AB8500_INT_ID_WAKEUP_R		90</span>
<span class="cp">#define AB8500_INT_ID_DET_R1R		92</span>
<span class="cp">#define AB8500_INT_ID_DET_R2R		93</span>
<span class="cp">#define AB8500_INT_ID_DET_R3R		94</span>
<span class="cp">#define AB8500_INT_ID_DET_R4R		95</span>
<span class="cm">/* ab8500_irq_regoffset[12] -&gt; IT[Source|Latch|Mask]21 */</span>
<span class="cp">#define AB8500_INT_ID_WAKEUP_F		96</span>
<span class="cp">#define AB8500_INT_ID_DET_R1F		98</span>
<span class="cp">#define AB8500_INT_ID_DET_R2F		99</span>
<span class="cp">#define AB8500_INT_ID_DET_R3F		100</span>
<span class="cp">#define AB8500_INT_ID_DET_R4F		101</span>
<span class="cp">#define AB8500_INT_CHAUTORESTARTAFTSEC  102</span>
<span class="cp">#define AB8500_INT_CHSTOPBYSEC		103</span>
<span class="cm">/* ab8500_irq_regoffset[13] -&gt; IT[Source|Latch|Mask]22 */</span>
<span class="cp">#define AB8500_INT_USB_CH_TH_PROT_F	104</span>
<span class="cp">#define AB8500_INT_USB_CH_TH_PROT_R    105</span>
<span class="cp">#define AB8500_INT_MAIN_CH_TH_PROT_F	106 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_MAIN_CH_TH_PROT_R	107 </span><span class="cm">/* not 8505/9540 */</span><span class="cp"></span>
<span class="cp">#define AB8500_INT_CHCURLIMNOHSCHIRP	109</span>
<span class="cp">#define AB8500_INT_CHCURLIMHSCHIRP	110</span>
<span class="cp">#define AB8500_INT_XTAL32K_KO		111</span>

<span class="cm">/* Definitions for AB9540 */</span>
<span class="cm">/* ab8500_irq_regoffset[14] -&gt; IT[Source|Latch|Mask]13 */</span>
<span class="cp">#define AB9540_INT_GPIO50R		113</span>
<span class="cp">#define AB9540_INT_GPIO51R		114 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB9540_INT_GPIO52R		115</span>
<span class="cp">#define AB9540_INT_GPIO53R		116</span>
<span class="cp">#define AB9540_INT_GPIO54R		117 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB9540_INT_IEXT_CH_RF_BFN_R	118</span>
<span class="cp">#define AB9540_INT_IEXT_CH_RF_BFN_F	119</span>
<span class="cm">/* ab8500_irq_regoffset[15] -&gt; IT[Source|Latch|Mask]14 */</span>
<span class="cp">#define AB9540_INT_GPIO50F		121</span>
<span class="cp">#define AB9540_INT_GPIO51F		122 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cp">#define AB9540_INT_GPIO52F		123</span>
<span class="cp">#define AB9540_INT_GPIO53F		124</span>
<span class="cp">#define AB9540_INT_GPIO54F		125 </span><span class="cm">/* not 8505 */</span><span class="cp"></span>
<span class="cm">/* ab8500_irq_regoffset[16] -&gt; IT[Source|Latch|Mask]25 */</span>
<span class="cp">#define AB8505_INT_KEYSTUCK		128</span>
<span class="cp">#define AB8505_INT_IKR			129</span>
<span class="cp">#define AB8505_INT_IKP			130</span>
<span class="cp">#define AB8505_INT_KP			131</span>
<span class="cp">#define AB8505_INT_KEYDEGLITCH		132</span>
<span class="cp">#define AB8505_INT_MODPWRSTATUSF	134</span>
<span class="cp">#define AB8505_INT_MODPWRSTATUSR	135</span>

<span class="cm">/*</span>
<span class="cm"> * AB8500_AB9540_NR_IRQS is used when configuring the IRQ numbers for the</span>
<span class="cm"> * entire platform. This is a &quot;compile time&quot; constant so this must be set to</span>
<span class="cm"> * the largest possible value that may be encountered with different AB SOCs.</span>
<span class="cm"> * Of the currently supported AB devices, AB8500 and AB9540, it is the AB9540</span>
<span class="cm"> * which is larger.</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_NR_IRQS			112</span>
<span class="cp">#define AB8505_NR_IRQS			136</span>
<span class="cp">#define AB9540_NR_IRQS			136</span>
<span class="cm">/* This is set to the roof of any AB8500 chip variant IRQ counts */</span>
<span class="cp">#define AB8500_MAX_NR_IRQS		AB9540_NR_IRQS</span>

<span class="cp">#define AB8500_NUM_IRQ_REGS		14</span>
<span class="cp">#define AB9540_NUM_IRQ_REGS		17</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500 - ab8500 internal structure</span>
<span class="cm"> * @dev: parent device</span>
<span class="cm"> * @lock: read/write operations lock</span>
<span class="cm"> * @irq_lock: genirq bus lock</span>
<span class="cm"> * @transfer_ongoing: 0 if no transfer ongoing</span>
<span class="cm"> * @irq: irq line</span>
<span class="cm"> * @version: chip version id (e.g. ab8500 or ab9540)</span>
<span class="cm"> * @chip_id: chip revision id</span>
<span class="cm"> * @write: register write</span>
<span class="cm"> * @write_masked: masked register write</span>
<span class="cm"> * @read: register read</span>
<span class="cm"> * @rx_buf: rx buf for SPI</span>
<span class="cm"> * @tx_buf: tx buf for SPI</span>
<span class="cm"> * @mask: cache of IRQ regs for bus lock</span>
<span class="cm"> * @oldmask: cache of previous IRQ regs for bus lock</span>
<span class="cm"> * @mask_size: Actual number of valid entries in mask[], oldmask[] and</span>
<span class="cm"> * irq_reg_offset</span>
<span class="cm"> * @irq_reg_offset: Array of offsets into IRQ registers</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>	<span class="n">lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>	<span class="n">irq_lock</span><span class="p">;</span>
	<span class="n">atomic_t</span>	<span class="n">transfer_ongoing</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">irq_base</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">irq</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">ab8500_version</span> <span class="n">version</span><span class="p">;</span>
	<span class="n">u8</span>		<span class="n">chip_id</span><span class="p">;</span>

	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">write</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab8500</span><span class="p">,</span> <span class="n">u16</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u8</span> <span class="n">data</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">write_masked</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab8500</span><span class="p">,</span> <span class="n">u16</span> <span class="n">addr</span><span class="p">,</span> <span class="n">u8</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u8</span> <span class="n">data</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">read</span><span class="p">)(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab8500</span><span class="p">,</span> <span class="n">u16</span> <span class="n">addr</span><span class="p">);</span>

	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">tx_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">rx_buf</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

	<span class="n">u8</span> <span class="o">*</span><span class="n">mask</span><span class="p">;</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">oldmask</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">mask_size</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="o">*</span><span class="n">irq_reg_offset</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">regulator_reg_init</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">regulator_init_data</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">ab8500_gpio_platform_data</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500_platform_data - AB8500 platform data</span>
<span class="cm"> * @irq_base: start of AB8500 IRQs, AB8500_NR_IRQS will be used</span>
<span class="cm"> * @init: board-specific initialization after detection of ab8500</span>
<span class="cm"> * @num_regulator_reg_init: number of regulator init registers</span>
<span class="cm"> * @regulator_reg_init: regulator init registers</span>
<span class="cm"> * @num_regulator: number of regulators</span>
<span class="cm"> * @regulator: machine-specific constraints for regulators</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500_platform_data</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">irq_base</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)</span> <span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">num_regulator_reg_init</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ab8500_regulator_reg_init</span> <span class="o">*</span><span class="n">regulator_reg_init</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">num_regulator</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="o">*</span><span class="n">regulator</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ab8500_gpio_platform_data</span> <span class="o">*</span><span class="n">gpio</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">__devinit</span> <span class="n">ab8500_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab8500</span><span class="p">,</span>
				 <span class="k">enum</span> <span class="n">ab8500_version</span> <span class="n">version</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__devexit</span> <span class="n">ab8500_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab8500</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">ab8500_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab8500</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8500</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">ab</span><span class="o">-&gt;</span><span class="n">version</span> <span class="o">==</span> <span class="n">AB8500_VERSION_AB8500</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8505</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">ab</span><span class="o">-&gt;</span><span class="n">version</span> <span class="o">==</span> <span class="n">AB8500_VERSION_AB8505</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab9540</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">ab</span><span class="o">-&gt;</span><span class="n">version</span> <span class="o">==</span> <span class="n">AB8500_VERSION_AB9540</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8540</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">ab</span><span class="o">-&gt;</span><span class="n">version</span> <span class="o">==</span> <span class="n">AB8500_VERSION_AB8540</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* exclude also ab8505, ab9540... */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8500_1p0_or_earlier</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">is_ab8500</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">ab</span><span class="o">-&gt;</span><span class="n">chip_id</span> <span class="o">&lt;=</span> <span class="n">AB8500_CUT1P0</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* exclude also ab8505, ab9540... */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8500_1p1_or_earlier</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">is_ab8500</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">ab</span><span class="o">-&gt;</span><span class="n">chip_id</span> <span class="o">&lt;=</span> <span class="n">AB8500_CUT1P1</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* exclude also ab8505, ab9540... */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8500_2p0_or_earlier</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">is_ab8500</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">ab</span><span class="o">-&gt;</span><span class="n">chip_id</span> <span class="o">&lt;=</span> <span class="n">AB8500_CUT2P0</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* exclude also ab8505, ab9540... */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">is_ab8500_2p0</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500</span> <span class="o">*</span><span class="n">ab</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">is_ab8500</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">ab</span><span class="o">-&gt;</span><span class="n">chip_id</span> <span class="o">==</span> <span class="n">AB8500_CUT2P0</span><span class="p">));</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* MFD_AB8500_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
