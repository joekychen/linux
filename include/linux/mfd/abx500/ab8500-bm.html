<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › abx500 › ab8500-bm.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ab8500-bm.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright ST-Ericsson 2012.</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Arun Murthy &lt;arun.murthy@stericsson.com&gt;</span>
<span class="cm"> * Licensed under GPLv2.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _AB8500_BM_H</span>
<span class="cp">#define _AB8500_BM_H</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/mfd/abx500.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * System control 2 register offsets.</span>
<span class="cm"> * bank = 0x02</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_MAIN_WDOG_CTRL_REG	0x01</span>
<span class="cp">#define AB8500_LOW_BAT_REG		0x03</span>
<span class="cp">#define AB8500_BATT_OK_REG		0x04</span>
<span class="cm">/*</span>
<span class="cm"> * USB/ULPI register offsets</span>
<span class="cm"> * Bank : 0x5</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_USB_LINE_STAT_REG	0x80</span>

<span class="cm">/*</span>
<span class="cm"> * Charger / status register offfsets</span>
<span class="cm"> * Bank : 0x0B</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_CH_STATUS1_REG		0x00</span>
<span class="cp">#define AB8500_CH_STATUS2_REG		0x01</span>
<span class="cp">#define AB8500_CH_USBCH_STAT1_REG	0x02</span>
<span class="cp">#define AB8500_CH_USBCH_STAT2_REG	0x03</span>
<span class="cp">#define AB8500_CH_FSM_STAT_REG		0x04</span>
<span class="cp">#define AB8500_CH_STAT_REG		0x05</span>

<span class="cm">/*</span>
<span class="cm"> * Charger / control register offfsets</span>
<span class="cm"> * Bank : 0x0B</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_CH_VOLT_LVL_REG		0x40</span>
<span class="cp">#define AB8500_CH_VOLT_LVL_MAX_REG	0x41  </span><span class="cm">/*Only in Cut2.0*/</span><span class="cp"></span>
<span class="cp">#define AB8500_CH_OPT_CRNTLVL_REG	0x42</span>
<span class="cp">#define AB8500_CH_OPT_CRNTLVL_MAX_REG	0x43  </span><span class="cm">/*Only in Cut2.0*/</span><span class="cp"></span>
<span class="cp">#define AB8500_CH_WD_TIMER_REG		0x50</span>
<span class="cp">#define AB8500_CHARG_WD_CTRL		0x51</span>
<span class="cp">#define AB8500_BTEMP_HIGH_TH		0x52</span>
<span class="cp">#define AB8500_LED_INDICATOR_PWM_CTRL	0x53</span>
<span class="cp">#define AB8500_LED_INDICATOR_PWM_DUTY	0x54</span>
<span class="cp">#define AB8500_BATT_OVV			0x55</span>
<span class="cp">#define AB8500_CHARGER_CTRL		0x56</span>
<span class="cp">#define AB8500_BAT_CTRL_CURRENT_SOURCE	0x60  </span><span class="cm">/*Only in Cut2.0*/</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Charger / main control register offsets</span>
<span class="cm"> * Bank : 0x0B</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_MCH_CTRL1		0x80</span>
<span class="cp">#define AB8500_MCH_CTRL2		0x81</span>
<span class="cp">#define AB8500_MCH_IPT_CURLVL_REG	0x82</span>
<span class="cp">#define AB8500_CH_WD_REG		0x83</span>

<span class="cm">/*</span>
<span class="cm"> * Charger / USB control register offsets</span>
<span class="cm"> * Bank : 0x0B</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_USBCH_CTRL1_REG		0xC0</span>
<span class="cp">#define AB8500_USBCH_CTRL2_REG		0xC1</span>
<span class="cp">#define AB8500_USBCH_IPT_CRNTLVL_REG	0xC2</span>

<span class="cm">/*</span>
<span class="cm"> * Gas Gauge register offsets</span>
<span class="cm"> * Bank : 0x0C</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_GASG_CC_CTRL_REG		0x00</span>
<span class="cp">#define AB8500_GASG_CC_ACCU1_REG	0x01</span>
<span class="cp">#define AB8500_GASG_CC_ACCU2_REG	0x02</span>
<span class="cp">#define AB8500_GASG_CC_ACCU3_REG	0x03</span>
<span class="cp">#define AB8500_GASG_CC_ACCU4_REG	0x04</span>
<span class="cp">#define AB8500_GASG_CC_SMPL_CNTRL_REG	0x05</span>
<span class="cp">#define AB8500_GASG_CC_SMPL_CNTRH_REG	0x06</span>
<span class="cp">#define AB8500_GASG_CC_SMPL_CNVL_REG	0x07</span>
<span class="cp">#define AB8500_GASG_CC_SMPL_CNVH_REG	0x08</span>
<span class="cp">#define AB8500_GASG_CC_CNTR_AVGOFF_REG	0x09</span>
<span class="cp">#define AB8500_GASG_CC_OFFSET_REG	0x0A</span>
<span class="cp">#define AB8500_GASG_CC_NCOV_ACCU	0x10</span>
<span class="cp">#define AB8500_GASG_CC_NCOV_ACCU_CTRL	0x11</span>
<span class="cp">#define AB8500_GASG_CC_NCOV_ACCU_LOW	0x12</span>
<span class="cp">#define AB8500_GASG_CC_NCOV_ACCU_MED	0x13</span>
<span class="cp">#define AB8500_GASG_CC_NCOV_ACCU_HIGH	0x14</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt register offsets</span>
<span class="cm"> * Bank : 0x0E</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_IT_SOURCE2_REG		0x01</span>
<span class="cp">#define AB8500_IT_SOURCE21_REG		0x14</span>

<span class="cm">/*</span>
<span class="cm"> * RTC register offsets</span>
<span class="cm"> * Bank: 0x0F</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_RTC_BACKUP_CHG_REG	0x0C</span>
<span class="cp">#define AB8500_RTC_CC_CONF_REG		0x01</span>
<span class="cp">#define AB8500_RTC_CTRL_REG		0x0B</span>

<span class="cm">/*</span>
<span class="cm"> * OTP register offsets</span>
<span class="cm"> * Bank : 0x15</span>
<span class="cm"> */</span>
<span class="cp">#define AB8500_OTP_CONF_15		0x0E</span>

<span class="cm">/* GPADC constants from AB8500 spec, UM0836 */</span>
<span class="cp">#define ADC_RESOLUTION			1024</span>
<span class="cp">#define ADC_CH_MAIN_MIN			0</span>
<span class="cp">#define ADC_CH_MAIN_MAX			20030</span>
<span class="cp">#define ADC_CH_VBUS_MIN			0</span>
<span class="cp">#define ADC_CH_VBUS_MAX			20030</span>
<span class="cp">#define ADC_CH_VBAT_MIN			2300</span>
<span class="cp">#define ADC_CH_VBAT_MAX			4800</span>
<span class="cp">#define ADC_CH_BKBAT_MIN		0</span>
<span class="cp">#define ADC_CH_BKBAT_MAX		3200</span>

<span class="cm">/* Main charge i/p current */</span>
<span class="cp">#define MAIN_CH_IP_CUR_0P9A		0x80</span>
<span class="cp">#define MAIN_CH_IP_CUR_1P0A		0x90</span>
<span class="cp">#define MAIN_CH_IP_CUR_1P1A		0xA0</span>
<span class="cp">#define MAIN_CH_IP_CUR_1P2A		0xB0</span>
<span class="cp">#define MAIN_CH_IP_CUR_1P3A		0xC0</span>
<span class="cp">#define MAIN_CH_IP_CUR_1P4A		0xD0</span>
<span class="cp">#define MAIN_CH_IP_CUR_1P5A		0xE0</span>

<span class="cm">/* ChVoltLevel */</span>
<span class="cp">#define CH_VOL_LVL_3P5			0x00</span>
<span class="cp">#define CH_VOL_LVL_4P0			0x14</span>
<span class="cp">#define CH_VOL_LVL_4P05			0x16</span>
<span class="cp">#define CH_VOL_LVL_4P1			0x1B</span>
<span class="cp">#define CH_VOL_LVL_4P15			0x20</span>
<span class="cp">#define CH_VOL_LVL_4P2			0x25</span>
<span class="cp">#define CH_VOL_LVL_4P6			0x4D</span>

<span class="cm">/* ChOutputCurrentLevel */</span>
<span class="cp">#define CH_OP_CUR_LVL_0P1		0x00</span>
<span class="cp">#define CH_OP_CUR_LVL_0P2		0x01</span>
<span class="cp">#define CH_OP_CUR_LVL_0P3		0x02</span>
<span class="cp">#define CH_OP_CUR_LVL_0P4		0x03</span>
<span class="cp">#define CH_OP_CUR_LVL_0P5		0x04</span>
<span class="cp">#define CH_OP_CUR_LVL_0P6		0x05</span>
<span class="cp">#define CH_OP_CUR_LVL_0P7		0x06</span>
<span class="cp">#define CH_OP_CUR_LVL_0P8		0x07</span>
<span class="cp">#define CH_OP_CUR_LVL_0P9		0x08</span>
<span class="cp">#define CH_OP_CUR_LVL_1P4		0x0D</span>
<span class="cp">#define CH_OP_CUR_LVL_1P5		0x0E</span>
<span class="cp">#define CH_OP_CUR_LVL_1P6		0x0F</span>

<span class="cm">/* BTEMP High thermal limits */</span>
<span class="cp">#define BTEMP_HIGH_TH_57_0		0x00</span>
<span class="cp">#define BTEMP_HIGH_TH_52		0x01</span>
<span class="cp">#define BTEMP_HIGH_TH_57_1		0x02</span>
<span class="cp">#define BTEMP_HIGH_TH_62		0x03</span>

<span class="cm">/* current is mA */</span>
<span class="cp">#define USB_0P1A			100</span>
<span class="cp">#define USB_0P2A			200</span>
<span class="cp">#define USB_0P3A			300</span>
<span class="cp">#define USB_0P4A			400</span>
<span class="cp">#define USB_0P5A			500</span>

<span class="cp">#define LOW_BAT_3P1V			0x20</span>
<span class="cp">#define LOW_BAT_2P3V			0x00</span>
<span class="cp">#define LOW_BAT_RESET			0x01</span>
<span class="cp">#define LOW_BAT_ENABLE			0x01</span>

<span class="cm">/* Backup battery constants */</span>
<span class="cp">#define BUP_ICH_SEL_50UA		0x00</span>
<span class="cp">#define BUP_ICH_SEL_150UA		0x04</span>
<span class="cp">#define BUP_ICH_SEL_300UA		0x08</span>
<span class="cp">#define BUP_ICH_SEL_700UA		0x0C</span>

<span class="cp">#define BUP_VCH_SEL_2P5V		0x00</span>
<span class="cp">#define BUP_VCH_SEL_2P6V		0x01</span>
<span class="cp">#define BUP_VCH_SEL_2P8V		0x02</span>
<span class="cp">#define BUP_VCH_SEL_3P1V		0x03</span>

<span class="cm">/* Battery OVV constants */</span>
<span class="cp">#define BATT_OVV_ENA			0x02</span>
<span class="cp">#define BATT_OVV_TH_3P7			0x00</span>
<span class="cp">#define BATT_OVV_TH_4P75		0x01</span>

<span class="cm">/* A value to indicate over voltage */</span>
<span class="cp">#define BATT_OVV_VALUE			4750</span>

<span class="cm">/* VBUS OVV constants */</span>
<span class="cp">#define VBUS_OVV_SELECT_MASK		0x78</span>
<span class="cp">#define VBUS_OVV_SELECT_5P6V		0x00</span>
<span class="cp">#define VBUS_OVV_SELECT_5P7V		0x08</span>
<span class="cp">#define VBUS_OVV_SELECT_5P8V		0x10</span>
<span class="cp">#define VBUS_OVV_SELECT_5P9V		0x18</span>
<span class="cp">#define VBUS_OVV_SELECT_6P0V		0x20</span>
<span class="cp">#define VBUS_OVV_SELECT_6P1V		0x28</span>
<span class="cp">#define VBUS_OVV_SELECT_6P2V		0x30</span>
<span class="cp">#define VBUS_OVV_SELECT_6P3V		0x38</span>

<span class="cp">#define VBUS_AUTO_IN_CURR_LIM_ENA	0x04</span>

<span class="cm">/* Fuel Gauge constants */</span>
<span class="cp">#define RESET_ACCU			0x02</span>
<span class="cp">#define READ_REQ			0x01</span>
<span class="cp">#define CC_DEEP_SLEEP_ENA		0x02</span>
<span class="cp">#define CC_PWR_UP_ENA			0x01</span>
<span class="cp">#define CC_SAMPLES_40			0x28</span>
<span class="cp">#define RD_NCONV_ACCU_REQ		0x01</span>
<span class="cp">#define CC_CALIB			0x08</span>
<span class="cp">#define CC_INTAVGOFFSET_ENA		0x10</span>
<span class="cp">#define CC_MUXOFFSET			0x80</span>
<span class="cp">#define CC_INT_CAL_N_AVG_MASK		0x60</span>
<span class="cp">#define CC_INT_CAL_SAMPLES_16		0x40</span>
<span class="cp">#define CC_INT_CAL_SAMPLES_8		0x20</span>
<span class="cp">#define CC_INT_CAL_SAMPLES_4		0x00</span>

<span class="cm">/* RTC constants */</span>
<span class="cp">#define RTC_BUP_CH_ENA			0x10</span>

<span class="cm">/* BatCtrl Current Source Constants */</span>
<span class="cp">#define BAT_CTRL_7U_ENA			0x01</span>
<span class="cp">#define BAT_CTRL_20U_ENA		0x02</span>
<span class="cp">#define BAT_CTRL_CMP_ENA		0x04</span>
<span class="cp">#define FORCE_BAT_CTRL_CMP_HIGH		0x08</span>
<span class="cp">#define BAT_CTRL_PULL_UP_ENA		0x10</span>

<span class="cm">/* Battery type */</span>
<span class="cp">#define BATTERY_UNKNOWN			00</span>

<span class="cm">/**</span>
<span class="cm"> * struct res_to_temp - defines one point in a temp to res curve. To</span>
<span class="cm"> * be used in battery packs that combines the identification resistor with a</span>
<span class="cm"> * NTC resistor.</span>
<span class="cm"> * @temp:			battery pack temperature in Celcius</span>
<span class="cm"> * @resist:			NTC resistor net total resistance</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">res_to_temp</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">resist</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct batres_vs_temp - defines one point in a temp vs battery internal</span>
<span class="cm"> * resistance curve.</span>
<span class="cm"> * @temp:			battery pack temperature in Celcius</span>
<span class="cm"> * @resist:			battery internal reistance in mOhm</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">batres_vs_temp</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">resist</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Forward declaration */</span>
<span class="k">struct</span> <span class="n">ab8500_fg</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500_fg_parameters - Fuel gauge algorithm parameters, in seconds</span>
<span class="cm"> * if not specified</span>
<span class="cm"> * @recovery_sleep_timer:	Time between measurements while recovering</span>
<span class="cm"> * @recovery_total_time:	Total recovery time</span>
<span class="cm"> * @init_timer:			Measurement interval during startup</span>
<span class="cm"> * @init_discard_time:		Time we discard voltage measurement at startup</span>
<span class="cm"> * @init_total_time:		Total init time during startup</span>
<span class="cm"> * @high_curr_time:		Time current has to be high to go to recovery</span>
<span class="cm"> * @accu_charging:		FG accumulation time while charging</span>
<span class="cm"> * @accu_high_curr:		FG accumulation time in high current mode</span>
<span class="cm"> * @high_curr_threshold:	High current threshold, in mA</span>
<span class="cm"> * @lowbat_threshold:		Low battery threshold, in mV</span>
<span class="cm"> * @battok_falling_th_sel0	Threshold in mV for battOk signal sel0</span>
<span class="cm"> *				Resolution in 50 mV step.</span>
<span class="cm"> * @battok_raising_th_sel1	Threshold in mV for battOk signal sel1</span>
<span class="cm"> *				Resolution in 50 mV step.</span>
<span class="cm"> * @user_cap_limit		Capacity reported from user must be within this</span>
<span class="cm"> *				limit to be considered as sane, in percentage</span>
<span class="cm"> *				points.</span>
<span class="cm"> * @maint_thres			This is the threshold where we stop reporting</span>
<span class="cm"> *				battery full while in maintenance, in per cent</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500_fg_parameters</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">recovery_sleep_timer</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">recovery_total_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">init_timer</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">init_discard_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">init_total_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">high_curr_time</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">accu_charging</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">accu_high_curr</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">high_curr_threshold</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">lowbat_threshold</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">battok_falling_th_sel0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">battok_raising_th_sel1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">user_cap_limit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">maint_thres</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500_charger_maximization - struct used by the board config.</span>
<span class="cm"> * @use_maxi:		Enable maximization for this battery type</span>
<span class="cm"> * @maxi_chg_curr:	Maximum charger current allowed</span>
<span class="cm"> * @maxi_wait_cycles:	cycles to wait before setting charger current</span>
<span class="cm"> * @charger_curr_step	delta between two charger current settings (mA)</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500_maxim_parameters</span> <span class="p">{</span>
	<span class="n">bool</span> <span class="n">ena_maxi</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">chg_curr</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">wait_cycles</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">charger_curr_step</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500_bm_capacity_levels - ab8500 capacity level data</span>
<span class="cm"> * @critical:		critical capacity level in percent</span>
<span class="cm"> * @low:		low capacity level in percent</span>
<span class="cm"> * @normal:		normal capacity level in percent</span>
<span class="cm"> * @high:		high capacity level in percent</span>
<span class="cm"> * @full:		full capacity level in percent</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500_bm_capacity_levels</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">critical</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">low</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">normal</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">high</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">full</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500_bm_charger_parameters - Charger specific parameters</span>
<span class="cm"> * @usb_volt_max:	maximum allowed USB charger voltage in mV</span>
<span class="cm"> * @usb_curr_max:	maximum allowed USB charger current in mA</span>
<span class="cm"> * @ac_volt_max:	maximum allowed AC charger voltage in mV</span>
<span class="cm"> * @ac_curr_max:	maximum allowed AC charger current in mA</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500_bm_charger_parameters</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">usb_volt_max</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">usb_curr_max</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ac_volt_max</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ac_curr_max</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct ab8500_bm_data - ab8500 battery management data</span>
<span class="cm"> * @temp_under		under this temp, charging is stopped</span>
<span class="cm"> * @temp_low		between this temp and temp_under charging is reduced</span>
<span class="cm"> * @temp_high		between this temp and temp_over charging is reduced</span>
<span class="cm"> * @temp_over		over this temp, charging is stopped</span>
<span class="cm"> * @temp_interval_chg	temperature measurement interval in s when charging</span>
<span class="cm"> * @temp_interval_nochg	temperature measurement interval in s when not charging</span>
<span class="cm"> * @main_safety_tmr_h	safety timer for main charger</span>
<span class="cm"> * @usb_safety_tmr_h	safety timer for usb charger</span>
<span class="cm"> * @bkup_bat_v		voltage which we charge the backup battery with</span>
<span class="cm"> * @bkup_bat_i		current which we charge the backup battery with</span>
<span class="cm"> * @no_maintenance	indicates that maintenance charging is disabled</span>
<span class="cm"> * @adc_therm		placement of thermistor, batctrl or battemp adc</span>
<span class="cm"> * @chg_unknown_bat	flag to enable charging of unknown batteries</span>
<span class="cm"> * @enable_overshoot	flag to enable VBAT overshoot control</span>
<span class="cm"> * @fg_res		resistance of FG resistor in 0.1mOhm</span>
<span class="cm"> * @n_btypes		number of elements in array bat_type</span>
<span class="cm"> * @batt_id		index of the identified battery in array bat_type</span>
<span class="cm"> * @interval_charging	charge alg cycle period time when charging (sec)</span>
<span class="cm"> * @interval_not_charging charge alg cycle period time when not charging (sec)</span>
<span class="cm"> * @temp_hysteresis	temperature hysteresis</span>
<span class="cm"> * @gnd_lift_resistance	Battery ground to phone ground resistance (mOhm)</span>
<span class="cm"> * @maxi:		maximization parameters</span>
<span class="cm"> * @cap_levels		capacity in percent for the different capacity levels</span>
<span class="cm"> * @bat_type		table of supported battery types</span>
<span class="cm"> * @chg_params		charger parameters</span>
<span class="cm"> * @fg_params		fuel gauge parameters</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">ab8500_bm_data</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">temp_under</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">temp_low</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">temp_high</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">temp_over</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">temp_interval_chg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">temp_interval_nochg</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">main_safety_tmr_h</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">usb_safety_tmr_h</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bkup_bat_v</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">bkup_bat_i</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">no_maintenance</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">chg_unknown_bat</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">enable_overshoot</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">abx500_adc_therm</span> <span class="n">adc_therm</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">fg_res</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">n_btypes</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">batt_id</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">interval_charging</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">interval_not_charging</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">temp_hysteresis</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">gnd_lift_resistance</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">ab8500_maxim_parameters</span> <span class="o">*</span><span class="n">maxi</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">ab8500_bm_capacity_levels</span> <span class="o">*</span><span class="n">cap_levels</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">ab8500_bm_charger_parameters</span> <span class="o">*</span><span class="n">chg_params</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">ab8500_fg_parameters</span> <span class="o">*</span><span class="n">fg_params</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ab8500_charger_platform_data</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="o">**</span><span class="n">supplied_to</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">num_supplicants</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">autopower_cfg</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ab8500_btemp_platform_data</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="o">**</span><span class="n">supplied_to</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">num_supplicants</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ab8500_fg_platform_data</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="o">**</span><span class="n">supplied_to</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">num_supplicants</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ab8500_chargalg_platform_data</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="o">**</span><span class="n">supplied_to</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">num_supplicants</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">ab8500_btemp</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">ab8500_gpadc</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">ab8500_fg</span><span class="p">;</span>
<span class="cp">#ifdef CONFIG_AB8500_BM</span>
<span class="kt">void</span> <span class="n">ab8500_fg_reinit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">ab8500_charger_usb_state_changed</span><span class="p">(</span><span class="n">u8</span> <span class="n">bm_usb_state</span><span class="p">,</span> <span class="n">u16</span> <span class="n">mA</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">ab8500_btemp</span> <span class="o">*</span><span class="n">ab8500_btemp_get</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ab8500_btemp_get_batctrl_temp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_btemp</span> <span class="o">*</span><span class="n">btemp</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">ab8500_fg_get</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ab8500_fg_inst_curr_blocking</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ab8500_fg_inst_curr_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">di</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ab8500_fg_inst_curr_finalize</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">di</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">res</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ab8500_fg_inst_curr_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">di</span><span class="p">);</span>

<span class="cp">#else</span>
<span class="kt">int</span> <span class="nf">ab8500_fg_inst_curr_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">di</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ab8500_fg_reinit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">ab8500_charger_usb_state_changed</span><span class="p">(</span><span class="n">u8</span> <span class="n">bm_usb_state</span><span class="p">,</span> <span class="n">u16</span> <span class="n">mA</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">ab8500_btemp</span> <span class="o">*</span><span class="nf">ab8500_btemp_get</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">ab8500_btemp_get_batctrl_temp</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_btemp</span> <span class="o">*</span><span class="n">btemp</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="nf">ab8500_fg_get</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">ab8500_fg_inst_curr_blocking</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">ab8500_fg_inst_curr_start</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">di</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">ab8500_fg_inst_curr_finalize</span><span class="p">(</span><span class="k">struct</span> <span class="n">ab8500_fg</span> <span class="o">*</span><span class="n">di</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">res</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#endif</span>
<span class="cp">#endif </span><span class="cm">/* _AB8500_BM_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
