<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › rc5t583.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>rc5t583.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Core driver interface to access RICOH_RC5T583 power management chip.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2011-2012, NVIDIA CORPORATION.  All rights reserved.</span>
<span class="cm"> * Author: Laxman dewangan &lt;ldewangan@nvidia.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Based on code</span>
<span class="cm"> *      Copyright (C) 2011 RICOH COMPANY,LTD</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify it</span>
<span class="cm"> * under the terms and conditions of the GNU General Public License,</span>
<span class="cm"> * version 2, as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope it will be useful, but WITHOUT</span>
<span class="cm"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for</span>
<span class="cm"> * more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __LINUX_MFD_RC5T583_H</span>
<span class="cp">#define __LINUX_MFD_RC5T583_H</span>

<span class="cp">#include &lt;linux/mutex.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/regmap.h&gt;</span>

<span class="cp">#define RC5T583_MAX_REGS		0xF8</span>

<span class="cm">/* Maximum number of main interrupts */</span>
<span class="cp">#define MAX_MAIN_INTERRUPT		5</span>
<span class="cp">#define RC5T583_MAX_GPEDGE_REG		2</span>
<span class="cp">#define RC5T583_MAX_INTERRUPT_MASK_REGS	9</span>

<span class="cm">/* Interrupt enable register */</span>
<span class="cp">#define RC5T583_INT_EN_SYS1	0x19</span>
<span class="cp">#define RC5T583_INT_EN_SYS2	0x1D</span>
<span class="cp">#define RC5T583_INT_EN_DCDC	0x41</span>
<span class="cp">#define RC5T583_INT_EN_RTC	0xED</span>
<span class="cp">#define RC5T583_INT_EN_ADC1	0x90</span>
<span class="cp">#define RC5T583_INT_EN_ADC2	0x91</span>
<span class="cp">#define RC5T583_INT_EN_ADC3	0x92</span>

<span class="cm">/* Interrupt status registers (monitor regs in Ricoh)*/</span>
<span class="cp">#define RC5T583_INTC_INTPOL	0xAD</span>
<span class="cp">#define RC5T583_INTC_INTEN	0xAE</span>
<span class="cp">#define RC5T583_INTC_INTMON	0xAF</span>

<span class="cp">#define RC5T583_INT_MON_GRP	0xAF</span>
<span class="cp">#define RC5T583_INT_MON_SYS1	0x1B</span>
<span class="cp">#define RC5T583_INT_MON_SYS2	0x1F</span>
<span class="cp">#define RC5T583_INT_MON_DCDC	0x43</span>
<span class="cp">#define RC5T583_INT_MON_RTC	0xEE</span>

<span class="cm">/* Interrupt clearing registers */</span>
<span class="cp">#define RC5T583_INT_IR_SYS1	0x1A</span>
<span class="cp">#define RC5T583_INT_IR_SYS2	0x1E</span>
<span class="cp">#define RC5T583_INT_IR_DCDC	0x42</span>
<span class="cp">#define RC5T583_INT_IR_RTC	0xEE</span>
<span class="cp">#define RC5T583_INT_IR_ADCL	0x94</span>
<span class="cp">#define RC5T583_INT_IR_ADCH	0x95</span>
<span class="cp">#define RC5T583_INT_IR_ADCEND	0x96</span>
<span class="cp">#define RC5T583_INT_IR_GPIOR	0xA9</span>
<span class="cp">#define RC5T583_INT_IR_GPIOF	0xAA</span>

<span class="cm">/* Sleep sequence registers */</span>
<span class="cp">#define RC5T583_SLPSEQ1		0x21</span>
<span class="cp">#define RC5T583_SLPSEQ2		0x22</span>
<span class="cp">#define RC5T583_SLPSEQ3		0x23</span>
<span class="cp">#define RC5T583_SLPSEQ4		0x24</span>
<span class="cp">#define RC5T583_SLPSEQ5		0x25</span>
<span class="cp">#define RC5T583_SLPSEQ6		0x26</span>
<span class="cp">#define RC5T583_SLPSEQ7		0x27</span>
<span class="cp">#define RC5T583_SLPSEQ8		0x28</span>
<span class="cp">#define RC5T583_SLPSEQ9		0x29</span>
<span class="cp">#define RC5T583_SLPSEQ10	0x2A</span>
<span class="cp">#define RC5T583_SLPSEQ11	0x2B</span>

<span class="cm">/* Regulator registers */</span>
<span class="cp">#define RC5T583_REG_DC0CTL	0x30</span>
<span class="cp">#define RC5T583_REG_DC0DAC	0x31</span>
<span class="cp">#define RC5T583_REG_DC0LATCTL	0x32</span>
<span class="cp">#define RC5T583_REG_SR0CTL	0x33</span>

<span class="cp">#define RC5T583_REG_DC1CTL	0x34</span>
<span class="cp">#define RC5T583_REG_DC1DAC	0x35</span>
<span class="cp">#define RC5T583_REG_DC1LATCTL	0x36</span>
<span class="cp">#define RC5T583_REG_SR1CTL	0x37</span>

<span class="cp">#define RC5T583_REG_DC2CTL	0x38</span>
<span class="cp">#define RC5T583_REG_DC2DAC	0x39</span>
<span class="cp">#define RC5T583_REG_DC2LATCTL	0x3A</span>
<span class="cp">#define RC5T583_REG_SR2CTL	0x3B</span>

<span class="cp">#define RC5T583_REG_DC3CTL	0x3C</span>
<span class="cp">#define RC5T583_REG_DC3DAC	0x3D</span>
<span class="cp">#define RC5T583_REG_DC3LATCTL	0x3E</span>
<span class="cp">#define RC5T583_REG_SR3CTL	0x3F</span>


<span class="cp">#define RC5T583_REG_LDOEN1	0x50</span>
<span class="cp">#define RC5T583_REG_LDOEN2	0x51</span>
<span class="cp">#define RC5T583_REG_LDODIS1	0x52</span>
<span class="cp">#define RC5T583_REG_LDODIS2	0x53</span>

<span class="cp">#define RC5T583_REG_LDO0DAC	0x54</span>
<span class="cp">#define RC5T583_REG_LDO1DAC	0x55</span>
<span class="cp">#define RC5T583_REG_LDO2DAC	0x56</span>
<span class="cp">#define RC5T583_REG_LDO3DAC	0x57</span>
<span class="cp">#define RC5T583_REG_LDO4DAC	0x58</span>
<span class="cp">#define RC5T583_REG_LDO5DAC	0x59</span>
<span class="cp">#define RC5T583_REG_LDO6DAC	0x5A</span>
<span class="cp">#define RC5T583_REG_LDO7DAC	0x5B</span>
<span class="cp">#define RC5T583_REG_LDO8DAC	0x5C</span>
<span class="cp">#define RC5T583_REG_LDO9DAC	0x5D</span>

<span class="cp">#define RC5T583_REG_DC0DAC_DS	0x60</span>
<span class="cp">#define RC5T583_REG_DC1DAC_DS	0x61</span>
<span class="cp">#define RC5T583_REG_DC2DAC_DS	0x62</span>
<span class="cp">#define RC5T583_REG_DC3DAC_DS	0x63</span>

<span class="cp">#define RC5T583_REG_LDO0DAC_DS	0x64</span>
<span class="cp">#define RC5T583_REG_LDO1DAC_DS	0x65</span>
<span class="cp">#define RC5T583_REG_LDO2DAC_DS	0x66</span>
<span class="cp">#define RC5T583_REG_LDO3DAC_DS	0x67</span>
<span class="cp">#define RC5T583_REG_LDO4DAC_DS	0x68</span>
<span class="cp">#define RC5T583_REG_LDO5DAC_DS	0x69</span>
<span class="cp">#define RC5T583_REG_LDO6DAC_DS	0x6A</span>
<span class="cp">#define RC5T583_REG_LDO7DAC_DS	0x6B</span>
<span class="cp">#define RC5T583_REG_LDO8DAC_DS	0x6C</span>
<span class="cp">#define RC5T583_REG_LDO9DAC_DS	0x6D</span>

<span class="cm">/* GPIO register base address */</span>
<span class="cp">#define RC5T583_GPIO_IOSEL	0xA0</span>
<span class="cp">#define RC5T583_GPIO_PDEN	0xA1</span>
<span class="cp">#define RC5T583_GPIO_IOOUT	0xA2</span>
<span class="cp">#define RC5T583_GPIO_PGSEL	0xA3</span>
<span class="cp">#define RC5T583_GPIO_GPINV	0xA4</span>
<span class="cp">#define RC5T583_GPIO_GPDEB	0xA5</span>
<span class="cp">#define RC5T583_GPIO_GPEDGE1	0xA6</span>
<span class="cp">#define RC5T583_GPIO_GPEDGE2	0xA7</span>
<span class="cp">#define RC5T583_GPIO_EN_INT	0xA8</span>
<span class="cp">#define RC5T583_GPIO_MON_IOIN	0xAB</span>
<span class="cp">#define RC5T583_GPIO_GPOFUNC	0xAC</span>

<span class="cm">/* RICOH_RC5T583 IRQ definitions */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RC5T583_IRQ_ONKEY</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_ACOK</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_LIDOPEN</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_PREOT</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_CLKSTP</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_ONKEY_OFF</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_WD</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_EN_PWRREQ1</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_EN_PWRREQ2</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_PRE_VINDET</span><span class="p">,</span>

	<span class="n">RC5T583_IRQ_DC0LIM</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_DC1LIM</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_DC2LIM</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_DC3LIM</span><span class="p">,</span>

	<span class="n">RC5T583_IRQ_CTC</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_YALE</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_DALE</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_WALE</span><span class="p">,</span>

	<span class="n">RC5T583_IRQ_AIN1L</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_AIN2L</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_AIN3L</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_VBATL</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_VIN3L</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_VIN8L</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_AIN1H</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_AIN2H</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_AIN3H</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_VBATH</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_VIN3H</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_VIN8H</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_ADCEND</span><span class="p">,</span>

	<span class="n">RC5T583_IRQ_GPIO0</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO1</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO2</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO3</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO4</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO5</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO6</span><span class="p">,</span>
	<span class="n">RC5T583_IRQ_GPIO7</span><span class="p">,</span>

	<span class="cm">/* Should be last entry */</span>
	<span class="n">RC5T583_MAX_IRQS</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* Ricoh583 gpio definitions */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RC5T583_GPIO0</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO1</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO2</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO3</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO4</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO5</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO6</span><span class="p">,</span>
	<span class="n">RC5T583_GPIO7</span><span class="p">,</span>

	<span class="cm">/* Should be last entry */</span>
	<span class="n">RC5T583_MAX_GPIO</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RC5T583_DS_NONE</span><span class="p">,</span>
	<span class="n">RC5T583_DS_DC0</span><span class="p">,</span>
	<span class="n">RC5T583_DS_DC1</span><span class="p">,</span>
	<span class="n">RC5T583_DS_DC2</span><span class="p">,</span>
	<span class="n">RC5T583_DS_DC3</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO0</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO1</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO2</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO3</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO4</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO5</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO6</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO7</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO8</span><span class="p">,</span>
	<span class="n">RC5T583_DS_LDO9</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO0</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO1</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO2</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO3</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO4</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO5</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO6</span><span class="p">,</span>
	<span class="n">RC5T583_DS_PSO7</span><span class="p">,</span>

	<span class="cm">/* Should be last entry */</span>
	<span class="n">RC5T583_DS_MAX</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Ricoh pmic RC5T583 supports sleep through two external controls.</span>
<span class="cm"> * The output of gpios and regulator can be enable/disable through</span>
<span class="cm"> * this external signals.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RC5T583_EXT_PWRREQ1_CONTROL</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="n">RC5T583_EXT_PWRREQ2_CONTROL</span> <span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">RC5T583_REGULATOR_DC0</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_DC1</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_DC2</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_DC3</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO0</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO1</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO2</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO3</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO4</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO5</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO6</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO7</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO8</span><span class="p">,</span>
	<span class="n">RC5T583_REGULATOR_LDO9</span><span class="p">,</span>

	<span class="cm">/* Should be last entry */</span>
	<span class="n">RC5T583_REGULATOR_MAX</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">rc5t583</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regmap</span>	<span class="o">*</span><span class="n">regmap</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">chip_irq</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">irq_base</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>	<span class="n">irq_lock</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">group_irq_en</span><span class="p">[</span><span class="n">MAX_MAIN_INTERRUPT</span><span class="p">];</span>

	<span class="cm">/* For main interrupt bits in INTC */</span>
	<span class="kt">uint8_t</span>		<span class="n">intc_inten_reg</span><span class="p">;</span>

	<span class="cm">/* For group interrupt bits and address */</span>
	<span class="kt">uint8_t</span>		<span class="n">irq_en_reg</span><span class="p">[</span><span class="n">RC5T583_MAX_INTERRUPT_MASK_REGS</span><span class="p">];</span>

	<span class="cm">/* For gpio edge */</span>
	<span class="kt">uint8_t</span>		<span class="n">gpedge_reg</span><span class="p">[</span><span class="n">RC5T583_MAX_GPEDGE_REG</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * rc5t583_platform_data: Platform data for ricoh rc5t583 pmu.</span>
<span class="cm"> * The board specific data is provided through this structure.</span>
<span class="cm"> * @irq_base: Irq base number on which this device registers their interrupts.</span>
<span class="cm"> * @gpio_base: GPIO base from which gpio of this device will start.</span>
<span class="cm"> * @enable_shutdown: Enable shutdown through the input pin &quot;shutdown&quot;.</span>
<span class="cm"> * @regulator_deepsleep_slot: The slot number on which device goes to sleep</span>
<span class="cm"> *		in device sleep mode.</span>
<span class="cm"> * @regulator_ext_pwr_control: External power request regulator control. The</span>
<span class="cm"> *		regulator output enable/disable is controlled by the external</span>
<span class="cm"> *		power request input state.</span>
<span class="cm"> * @reg_init_data: Regulator init data.</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">rc5t583_platform_data</span> <span class="p">{</span>
	<span class="kt">int</span>		<span class="n">irq_base</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">gpio_base</span><span class="p">;</span>
	<span class="n">bool</span>		<span class="n">enable_shutdown</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">regulator_deepsleep_slot</span><span class="p">[</span><span class="n">RC5T583_REGULATOR_MAX</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">regulator_ext_pwr_control</span><span class="p">[</span><span class="n">RC5T583_REGULATOR_MAX</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="o">*</span><span class="n">reg_init_data</span><span class="p">[</span><span class="n">RC5T583_REGULATOR_MAX</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">rc5t583_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">regmap_write</span><span class="p">(</span><span class="n">rc5t583</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">rc5t583_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ival</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>
	<span class="n">ret</span> <span class="o">=</span> <span class="n">regmap_read</span><span class="p">(</span><span class="n">rc5t583</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ival</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ret</span><span class="p">)</span>
		<span class="o">*</span><span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="n">ival</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">rc5t583_set_bits</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bit_mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">regmap_update_bits</span><span class="p">(</span><span class="n">rc5t583</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">rc5t583_clear_bits</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span>
			<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bit_mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">regmap_update_bits</span><span class="p">(</span><span class="n">rc5t583</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">bit_mask</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">rc5t583_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span> <span class="o">=</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">regmap_update_bits</span><span class="p">(</span><span class="n">rc5t583</span><span class="o">-&gt;</span><span class="n">regmap</span><span class="p">,</span> <span class="n">reg</span><span class="p">,</span> <span class="n">mask</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">rc5t583_ext_power_req_config</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">deepsleep_id</span><span class="p">,</span>
	<span class="kt">int</span> <span class="n">ext_pwr_req</span><span class="p">,</span> <span class="kt">int</span> <span class="n">deepsleep_slot_nr</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">rc5t583_irq_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span><span class="p">,</span> <span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="kt">int</span> <span class="n">irq_base</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">rc5t583_irq_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">rc5t583</span> <span class="o">*</span><span class="n">rc5t583</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
