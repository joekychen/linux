<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › pcf50633 › mbc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mbc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * mbc.h  -- Driver for NXP PCF50633 Main Battery Charger</span>
<span class="cm"> *</span>
<span class="cm"> * (C) 2006-2008 by Openmoko, Inc.</span>
<span class="cm"> * All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute  it and/or modify it</span>
<span class="cm"> * under  the terms of  the GNU General  Public License as published by the</span>
<span class="cm"> * Free Software Foundation;  either version 2 of the  License, or (at your</span>
<span class="cm"> * option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __LINUX_MFD_PCF50633_MBC_H</span>
<span class="cp">#define __LINUX_MFD_PCF50633_MBC_H</span>

<span class="cp">#include &lt;linux/mfd/pcf50633/core.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>

<span class="cp">#define PCF50633_REG_MBCC1	0x43</span>
<span class="cp">#define PCF50633_REG_MBCC2	0x44</span>
<span class="cp">#define PCF50633_REG_MBCC3	0x45</span>
<span class="cp">#define PCF50633_REG_MBCC4	0x46</span>
<span class="cp">#define PCF50633_REG_MBCC5	0x47</span>
<span class="cp">#define PCF50633_REG_MBCC6	0x48</span>
<span class="cp">#define PCF50633_REG_MBCC7	0x49</span>
<span class="cp">#define PCF50633_REG_MBCC8	0x4a</span>
<span class="cp">#define PCF50633_REG_MBCS1	0x4b</span>
<span class="cp">#define PCF50633_REG_MBCS2	0x4c</span>
<span class="cp">#define PCF50633_REG_MBCS3	0x4d</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcc1</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCC1_CHGENA</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>	<span class="cm">/* Charger enable */</span>
	<span class="n">PCF50633_MBCC1_AUTOSTOP</span>		<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC1_AUTORES</span>		<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span> <span class="cm">/* automatic resume */</span>
	<span class="n">PCF50633_MBCC1_RESUME</span>		<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span> <span class="cm">/* explicit resume cmd */</span>
	<span class="n">PCF50633_MBCC1_RESTART</span>		<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span> <span class="cm">/* restart charging */</span>
	<span class="n">PCF50633_MBCC1_PREWDTIME_60M</span>	<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>	<span class="cm">/* max. precharging time */</span>
	<span class="n">PCF50633_MBCC1_WDTIME_1H</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC1_WDTIME_2H</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC1_WDTIME_4H</span>	<span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC1_WDTIME_6H</span>	<span class="o">=</span> <span class="mh">0xc0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#define PCF50633_MBCC1_WDTIME_MASK	  0xc0</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcc2</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCC2_VBATCOND_2V7</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC2_VBATCOND_2V85</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC2_VBATCOND_3V0</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC2_VBATCOND_3V15</span>	<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC2_VMAX_4V</span>		<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC2_VMAX_4V20</span>	<span class="o">=</span> <span class="mh">0x28</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC2_VRESDEBTIME_64S</span>	<span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>	<span class="cm">/* debounce time (32/64sec) */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcc7</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCC7_USB_100mA</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_USB_500mA</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_USB_1000mA</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_USB_SUSPEND</span>	<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_BATTEMP_EN</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_BATSYSIMAX_1A6</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_BATSYSIMAX_1A8</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_BATSYSIMAX_2A0</span>	<span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
	<span class="n">PCF50633_MBCC7_BATSYSIMAX_2A2</span>	<span class="o">=</span> <span class="mh">0xc0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#define PCF50633_MBCC7_USB_MASK 0x03</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcc8</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCC8_USBENASUS</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcs1</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCS1_USBPRES</span>		<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_USBOK</span>		<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_ADAPTPRES</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_ADAPTOK</span>		<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_TBAT_OK</span>		<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_TBAT_ABOVE</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_TBAT_BELOW</span>	<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_TBAT_UNDEF</span>	<span class="o">=</span> <span class="mh">0x30</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_PREWDTEXP</span>	<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS1_WDTEXP</span>		<span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcs2_mbcmod</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCS2_MBC_PLAY</span>		<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_USB_PRE</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_USB_PRE_WAIT</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_USB_FAST</span>	<span class="o">=</span> <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_USB_FAST_WAIT</span> <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_USB_SUSPEND</span>	<span class="o">=</span> <span class="mh">0x05</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_ADP_PRE</span>	<span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_ADP_PRE_WAIT</span>	<span class="o">=</span> <span class="mh">0x07</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_ADP_FAST</span>	<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_ADP_FAST_WAIT</span> <span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_BAT_FULL</span>	<span class="o">=</span> <span class="mh">0x0a</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_MBC_HALT</span>		<span class="o">=</span> <span class="mh">0x0b</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#define PCF50633_MBCS2_MBC_MASK		0x0f</span>
<span class="k">enum</span> <span class="n">pcf50633_reg_mbcs2_chgstat</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCS2_CHGS_NONE</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_CHGS_ADAPTER</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_CHGS_USB</span>		<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS2_CHGS_BOTH</span>	<span class="o">=</span> <span class="mh">0x30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#define PCF50633_MBCS2_RESSTAT_AUTO	0x40</span>

<span class="k">enum</span> <span class="n">pcf50633_reg_mbcs3</span> <span class="p">{</span>
	<span class="n">PCF50633_MBCS3_USBLIM_PLAY</span>	<span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS3_USBLIM_CGH</span>	<span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS3_TLIM_PLAY</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS3_TLIM_CHG</span>		<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">PCF50633_MBCS3_ILIM</span>		<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>	<span class="cm">/* 1: Ibat &gt; Icutoff */</span>
	<span class="n">PCF50633_MBCS3_VLIM</span>		<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>	<span class="cm">/* 1: Vbat == Vmax */</span>
	<span class="n">PCF50633_MBCS3_VBATSTAT</span>		<span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span>	<span class="cm">/* 1: Vbat &gt; Vbatcond */</span>
	<span class="n">PCF50633_MBCS3_VRES</span>		<span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span> <span class="cm">/* 1: Vbat &gt; Vth(RES) */</span>
<span class="p">};</span>

<span class="cp">#define PCF50633_MBCC2_VBATCOND_MASK	  0x03</span>
<span class="cp">#define PCF50633_MBCC2_VMAX_MASK	  0x3c</span>

<span class="cm">/* Charger status */</span>
<span class="cp">#define PCF50633_MBC_USB_ONLINE		0x01</span>
<span class="cp">#define PCF50633_MBC_USB_ACTIVE		0x02</span>
<span class="cp">#define PCF50633_MBC_ADAPTER_ONLINE	0x04</span>
<span class="cp">#define PCF50633_MBC_ADAPTER_ACTIVE	0x08</span>

<span class="kt">int</span> <span class="n">pcf50633_mbc_usb_curlim_set</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcf50633</span> <span class="o">*</span><span class="n">pcf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ma</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">pcf50633_mbc_get_status</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcf50633</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">pcf50633_mbc_get_usb_online_status</span><span class="p">(</span><span class="k">struct</span> <span class="n">pcf50633</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
