<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › wm8350 › comparator.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>comparator.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * comparator.h  --  Comparator Aux ADC for Wolfson WM8350 PMIC</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2007 Wolfson Microelectronics PLC</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute  it and/or modify it</span>
<span class="cm"> *  under  the terms of  the GNU General  Public License as published by the</span>
<span class="cm"> *  Free Software Foundation;  either version 2 of the  License, or (at your</span>
<span class="cm"> *  option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __LINUX_MFD_WM8350_COMPARATOR_H_</span>
<span class="cp">#define __LINUX_MFD_WM8350_COMPARATOR_H_</span>

<span class="cm">/*</span>
<span class="cm"> * Registers</span>
<span class="cm"> */</span>

<span class="cp">#define WM8350_DIGITISER_CONTROL_1              0x90</span>
<span class="cp">#define WM8350_DIGITISER_CONTROL_2              0x91</span>
<span class="cp">#define WM8350_AUX1_READBACK                    0x98</span>
<span class="cp">#define WM8350_AUX2_READBACK                    0x99</span>
<span class="cp">#define WM8350_AUX3_READBACK                    0x9A</span>
<span class="cp">#define WM8350_AUX4_READBACK                    0x9B</span>
<span class="cp">#define WM8350_CHIP_TEMP_READBACK               0x9F</span>
<span class="cp">#define WM8350_GENERIC_COMPARATOR_CONTROL       0xA3</span>
<span class="cp">#define WM8350_GENERIC_COMPARATOR_1             0xA4</span>
<span class="cp">#define WM8350_GENERIC_COMPARATOR_2             0xA5</span>
<span class="cp">#define WM8350_GENERIC_COMPARATOR_3             0xA6</span>
<span class="cp">#define WM8350_GENERIC_COMPARATOR_4             0xA7</span>

<span class="cm">/*</span>
<span class="cm"> * R144 (0x90) - Digitiser Control (1)</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_CTC                       0x4000</span>
<span class="cp">#define WM8350_AUXADC_POLL                      0x2000</span>
<span class="cp">#define WM8350_AUXADC_HIB_MODE                  0x1000</span>
<span class="cp">#define WM8350_AUXADC_SEL8                      0x0080</span>
<span class="cp">#define WM8350_AUXADC_SEL7                      0x0040</span>
<span class="cp">#define WM8350_AUXADC_SEL6                      0x0020</span>
<span class="cp">#define WM8350_AUXADC_SEL5                      0x0010</span>
<span class="cp">#define WM8350_AUXADC_SEL4                      0x0008</span>
<span class="cp">#define WM8350_AUXADC_SEL3                      0x0004</span>
<span class="cp">#define WM8350_AUXADC_SEL2                      0x0002</span>
<span class="cp">#define WM8350_AUXADC_SEL1                      0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R145 (0x91) - Digitiser Control (2)</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_MASKMODE_MASK             0x3000</span>
<span class="cp">#define WM8350_AUXADC_CRATE_MASK                0x0700</span>
<span class="cp">#define WM8350_AUXADC_CAL                       0x0004</span>
<span class="cp">#define WM8350_AUX_RBMODE                       0x0002</span>
<span class="cp">#define WM8350_AUXADC_WAIT                      0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R152 (0x98) - AUX1 Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_SCALE1_MASK               0x6000</span>
<span class="cp">#define WM8350_AUXADC_REF1                      0x1000</span>
<span class="cp">#define WM8350_AUXADC_DATA1_MASK                0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R153 (0x99) - AUX2 Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_SCALE2_MASK               0x6000</span>
<span class="cp">#define WM8350_AUXADC_REF2                      0x1000</span>
<span class="cp">#define WM8350_AUXADC_DATA2_MASK                0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R154 (0x9A) - AUX3 Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_SCALE3_MASK               0x6000</span>
<span class="cp">#define WM8350_AUXADC_REF3                      0x1000</span>
<span class="cp">#define WM8350_AUXADC_DATA3_MASK                0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R155 (0x9B) - AUX4 Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_SCALE4_MASK               0x6000</span>
<span class="cp">#define WM8350_AUXADC_REF4                      0x1000</span>
<span class="cp">#define WM8350_AUXADC_DATA4_MASK                0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R156 (0x9C) - USB Voltage Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_DATA_USB_MASK             0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R157 (0x9D) - LINE Voltage Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_DATA_LINE_MASK            0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R158 (0x9E) - BATT Voltage Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_DATA_BATT_MASK            0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R159 (0x9F) - Chip Temp Readback</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUXADC_DATA_CHIPTEMP_MASK        0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R163 (0xA3) - Generic Comparator Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCMP4_ENA                        0x0008</span>
<span class="cp">#define WM8350_DCMP3_ENA                        0x0004</span>
<span class="cp">#define WM8350_DCMP2_ENA                        0x0002</span>
<span class="cp">#define WM8350_DCMP1_ENA                        0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R164 (0xA4) - Generic comparator 1</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCMP1_SRCSEL_MASK                0xE000</span>
<span class="cp">#define WM8350_DCMP1_GT                         0x1000</span>
<span class="cp">#define WM8350_DCMP1_THR_MASK                   0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R165 (0xA5) - Generic comparator 2</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCMP2_SRCSEL_MASK                0xE000</span>
<span class="cp">#define WM8350_DCMP2_GT                         0x1000</span>
<span class="cp">#define WM8350_DCMP2_THR_MASK                   0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R166 (0xA6) - Generic comparator 3</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCMP3_SRCSEL_MASK                0xE000</span>
<span class="cp">#define WM8350_DCMP3_GT                         0x1000</span>
<span class="cp">#define WM8350_DCMP3_THR_MASK                   0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * R167 (0xA7) - Generic comparator 4</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCMP4_SRCSEL_MASK                0xE000</span>
<span class="cp">#define WM8350_DCMP4_GT                         0x1000</span>
<span class="cp">#define WM8350_DCMP4_THR_MASK                   0x0FFF</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupts.</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_IRQ_AUXADC_DATARDY		16</span>
<span class="cp">#define WM8350_IRQ_AUXADC_DCOMP4		17</span>
<span class="cp">#define WM8350_IRQ_AUXADC_DCOMP3		18</span>
<span class="cp">#define WM8350_IRQ_AUXADC_DCOMP2		19</span>
<span class="cp">#define WM8350_IRQ_AUXADC_DCOMP1		20</span>
<span class="cp">#define WM8350_IRQ_SYS_HYST_COMP_FAIL		21</span>
<span class="cp">#define WM8350_IRQ_SYS_CHIP_GT115		22</span>
<span class="cp">#define WM8350_IRQ_SYS_CHIP_GT140		23</span>

<span class="cm">/*</span>
<span class="cm"> * USB/2, LINE &amp; BATT = ((VRTC * 2) / 4095)) * 10e6 uV</span>
<span class="cm"> * Where VRTC = 2.7 V</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_AUX_COEFF			1319</span>

<span class="cp">#define WM8350_AUXADC_AUX1			0</span>
<span class="cp">#define WM8350_AUXADC_AUX2			1</span>
<span class="cp">#define WM8350_AUXADC_AUX3			2</span>
<span class="cp">#define WM8350_AUXADC_AUX4			3</span>
<span class="cp">#define WM8350_AUXADC_USB			4</span>
<span class="cp">#define WM8350_AUXADC_LINE			5</span>
<span class="cp">#define WM8350_AUXADC_BATT			6</span>
<span class="cp">#define WM8350_AUXADC_TEMP			7</span>

<span class="k">struct</span> <span class="n">wm8350</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * AUX ADC Readback</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">wm8350_read_auxadc</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">channel</span><span class="p">,</span> <span class="kt">int</span> <span class="n">scale</span><span class="p">,</span>
		       <span class="kt">int</span> <span class="n">vref</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
