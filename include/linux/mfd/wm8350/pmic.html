<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mfd › wm8350 › pmic.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>pmic.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * pmic.h  --  Power Management Driver for Wolfson WM8350 PMIC</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2007 Wolfson Microelectronics PLC</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute  it and/or modify it</span>
<span class="cm"> *  under  the terms of  the GNU General  Public License as published by the</span>
<span class="cm"> *  Free Software Foundation;  either version 2 of the  License, or (at your</span>
<span class="cm"> *  option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __LINUX_MFD_WM8350_PMIC_H</span>
<span class="cp">#define __LINUX_MFD_WM8350_PMIC_H</span>

<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/leds.h&gt;</span>
<span class="cp">#include &lt;linux/regulator/machine.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Register values.</span>
<span class="cm"> */</span>

<span class="cp">#define WM8350_CURRENT_SINK_DRIVER_A            0xAC</span>
<span class="cp">#define WM8350_CSA_FLASH_CONTROL                0xAD</span>
<span class="cp">#define WM8350_CURRENT_SINK_DRIVER_B            0xAE</span>
<span class="cp">#define WM8350_CSB_FLASH_CONTROL                0xAF</span>
<span class="cp">#define WM8350_DCDC_LDO_REQUESTED               0xB0</span>
<span class="cp">#define WM8350_DCDC_ACTIVE_OPTIONS              0xB1</span>
<span class="cp">#define WM8350_DCDC_SLEEP_OPTIONS               0xB2</span>
<span class="cp">#define WM8350_POWER_CHECK_COMPARATOR           0xB3</span>
<span class="cp">#define WM8350_DCDC1_CONTROL                    0xB4</span>
<span class="cp">#define WM8350_DCDC1_TIMEOUTS                   0xB5</span>
<span class="cp">#define WM8350_DCDC1_LOW_POWER                  0xB6</span>
<span class="cp">#define WM8350_DCDC2_CONTROL                    0xB7</span>
<span class="cp">#define WM8350_DCDC2_TIMEOUTS                   0xB8</span>
<span class="cp">#define WM8350_DCDC3_CONTROL                    0xBA</span>
<span class="cp">#define WM8350_DCDC3_TIMEOUTS                   0xBB</span>
<span class="cp">#define WM8350_DCDC3_LOW_POWER                  0xBC</span>
<span class="cp">#define WM8350_DCDC4_CONTROL                    0xBD</span>
<span class="cp">#define WM8350_DCDC4_TIMEOUTS                   0xBE</span>
<span class="cp">#define WM8350_DCDC4_LOW_POWER                  0xBF</span>
<span class="cp">#define WM8350_DCDC5_CONTROL                    0xC0</span>
<span class="cp">#define WM8350_DCDC5_TIMEOUTS                   0xC1</span>
<span class="cp">#define WM8350_DCDC6_CONTROL                    0xC3</span>
<span class="cp">#define WM8350_DCDC6_TIMEOUTS                   0xC4</span>
<span class="cp">#define WM8350_DCDC6_LOW_POWER                  0xC5</span>
<span class="cp">#define WM8350_LIMIT_SWITCH_CONTROL             0xC7</span>
<span class="cp">#define WM8350_LDO1_CONTROL                     0xC8</span>
<span class="cp">#define WM8350_LDO1_TIMEOUTS                    0xC9</span>
<span class="cp">#define WM8350_LDO1_LOW_POWER                   0xCA</span>
<span class="cp">#define WM8350_LDO2_CONTROL                     0xCB</span>
<span class="cp">#define WM8350_LDO2_TIMEOUTS                    0xCC</span>
<span class="cp">#define WM8350_LDO2_LOW_POWER                   0xCD</span>
<span class="cp">#define WM8350_LDO3_CONTROL                     0xCE</span>
<span class="cp">#define WM8350_LDO3_TIMEOUTS                    0xCF</span>
<span class="cp">#define WM8350_LDO3_LOW_POWER                   0xD0</span>
<span class="cp">#define WM8350_LDO4_CONTROL                     0xD1</span>
<span class="cp">#define WM8350_LDO4_TIMEOUTS                    0xD2</span>
<span class="cp">#define WM8350_LDO4_LOW_POWER                   0xD3</span>
<span class="cp">#define WM8350_VCC_FAULT_MASKS                  0xD7</span>
<span class="cp">#define WM8350_MAIN_BANDGAP_CONTROL             0xD8</span>
<span class="cp">#define WM8350_OSC_CONTROL                      0xD9</span>
<span class="cp">#define WM8350_RTC_TICK_CONTROL                 0xDA</span>
<span class="cp">#define WM8350_SECURITY                         0xDB</span>
<span class="cp">#define WM8350_RAM_BIST_1                       0xDC</span>
<span class="cp">#define WM8350_DCDC_LDO_STATUS                  0xE1</span>
<span class="cp">#define WM8350_GPIO_PIN_STATUS                  0xE6</span>

<span class="cp">#define WM8350_DCDC1_FORCE_PWM                  0xF8</span>
<span class="cp">#define WM8350_DCDC3_FORCE_PWM                  0xFA</span>
<span class="cp">#define WM8350_DCDC4_FORCE_PWM                  0xFB</span>
<span class="cp">#define WM8350_DCDC6_FORCE_PWM                  0xFD</span>

<span class="cm">/*</span>
<span class="cm"> * R172 (0xAC) - Current Sink Driver A</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_CS1_HIB_MODE                     0x1000</span>
<span class="cp">#define WM8350_CS1_HIB_MODE_MASK                0x1000</span>
<span class="cp">#define WM8350_CS1_HIB_MODE_SHIFT                   12</span>
<span class="cp">#define WM8350_CS1_ISEL_MASK                    0x003F</span>
<span class="cp">#define WM8350_CS1_ISEL_SHIFT                        0</span>

<span class="cm">/* Bit values for R172 (0xAC) */</span>
<span class="cp">#define WM8350_CS1_HIB_MODE_DISABLE                  0</span>
<span class="cp">#define WM8350_CS1_HIB_MODE_LEAVE                    1</span>

<span class="cp">#define WM8350_CS1_ISEL_220M                      0x3F</span>

<span class="cm">/*</span>
<span class="cm"> * R173 (0xAD) - CSA Flash control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_CS1_FLASH_MODE                   0x8000</span>
<span class="cp">#define WM8350_CS1_TRIGSRC                      0x4000</span>
<span class="cp">#define WM8350_CS1_DRIVE                        0x2000</span>
<span class="cp">#define WM8350_CS1_FLASH_DUR_MASK               0x0300</span>
<span class="cp">#define WM8350_CS1_OFF_RAMP_MASK                0x0030</span>
<span class="cp">#define WM8350_CS1_ON_RAMP_MASK                 0x0003</span>

<span class="cm">/*</span>
<span class="cm"> * R174 (0xAE) - Current Sink Driver B</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_CS2_HIB_MODE                     0x1000</span>
<span class="cp">#define WM8350_CS2_ISEL_MASK                    0x003F</span>

<span class="cm">/*</span>
<span class="cm"> * R175 (0xAF) - CSB Flash control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_CS2_FLASH_MODE                   0x8000</span>
<span class="cp">#define WM8350_CS2_TRIGSRC                      0x4000</span>
<span class="cp">#define WM8350_CS2_DRIVE                        0x2000</span>
<span class="cp">#define WM8350_CS2_FLASH_DUR_MASK               0x0300</span>
<span class="cp">#define WM8350_CS2_OFF_RAMP_MASK                0x0030</span>
<span class="cp">#define WM8350_CS2_ON_RAMP_MASK                 0x0003</span>

<span class="cm">/*</span>
<span class="cm"> * R176 (0xB0) - DCDC/LDO requested</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LS_ENA                           0x8000</span>
<span class="cp">#define WM8350_LDO4_ENA                         0x0800</span>
<span class="cp">#define WM8350_LDO3_ENA                         0x0400</span>
<span class="cp">#define WM8350_LDO2_ENA                         0x0200</span>
<span class="cp">#define WM8350_LDO1_ENA                         0x0100</span>
<span class="cp">#define WM8350_DC6_ENA                          0x0020</span>
<span class="cp">#define WM8350_DC5_ENA                          0x0010</span>
<span class="cp">#define WM8350_DC4_ENA                          0x0008</span>
<span class="cp">#define WM8350_DC3_ENA                          0x0004</span>
<span class="cp">#define WM8350_DC2_ENA                          0x0002</span>
<span class="cp">#define WM8350_DC1_ENA                          0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R177 (0xB1) - DCDC Active options</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_PUTO_MASK                        0x3000</span>
<span class="cp">#define WM8350_PWRUP_DELAY_MASK                 0x0300</span>
<span class="cp">#define WM8350_DC6_ACTIVE                       0x0020</span>
<span class="cp">#define WM8350_DC4_ACTIVE                       0x0008</span>
<span class="cp">#define WM8350_DC3_ACTIVE                       0x0004</span>
<span class="cp">#define WM8350_DC1_ACTIVE                       0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R178 (0xB2) - DCDC Sleep options</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC6_SLEEP                        0x0020</span>
<span class="cp">#define WM8350_DC4_SLEEP                        0x0008</span>
<span class="cp">#define WM8350_DC3_SLEEP                        0x0004</span>
<span class="cp">#define WM8350_DC1_SLEEP                        0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R179 (0xB3) - Power-check comparator</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_PCCMP_ERRACT                     0x4000</span>
<span class="cp">#define WM8350_PCCMP_RAIL                       0x0100</span>
<span class="cp">#define WM8350_PCCMP_OFF_THR_MASK               0x0070</span>
<span class="cp">#define WM8350_PCCMP_ON_THR_MASK                0x0007</span>

<span class="cm">/*</span>
<span class="cm"> * R180 (0xB4) - DCDC1 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC1_OPFLT                        0x0400</span>
<span class="cp">#define WM8350_DC1_VSEL_MASK                    0x007F</span>
<span class="cp">#define WM8350_DC1_VSEL_SHIFT                        0</span>

<span class="cm">/*</span>
<span class="cm"> * R181 (0xB5) - DCDC1 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC1_ERRACT_MASK                  0xC000</span>
<span class="cp">#define WM8350_DC1_ERRACT_SHIFT                     14</span>
<span class="cp">#define WM8350_DC1_ENSLOT_MASK                  0x3C00</span>
<span class="cp">#define WM8350_DC1_ENSLOT_SHIFT                     10</span>
<span class="cp">#define WM8350_DC1_SDSLOT_MASK                  0x03C0</span>
<span class="cp">#define WM8350_DC1_UVTO_MASK                    0x0030</span>
<span class="cp">#define WM8350_DC1_SDSLOT_SHIFT                      6</span>

<span class="cm">/* Bit values for R181 (0xB5) */</span>
<span class="cp">#define WM8350_DC1_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_DC1_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_DC1_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R182 (0xB6) - DCDC1 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC1_HIB_MODE_MASK                0x7000</span>
<span class="cp">#define WM8350_DC1_HIB_TRIG_MASK                0x0300</span>
<span class="cp">#define WM8350_DC1_VIMG_MASK                    0x007F</span>

<span class="cm">/*</span>
<span class="cm"> * R183 (0xB7) - DCDC2 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC2_MODE                         0x4000</span>
<span class="cp">#define WM8350_DC2_MODE_MASK                    0x4000</span>
<span class="cp">#define WM8350_DC2_MODE_SHIFT                       14</span>
<span class="cp">#define WM8350_DC2_HIB_MODE                     0x1000</span>
<span class="cp">#define WM8350_DC2_HIB_MODE_MASK                0x1000</span>
<span class="cp">#define WM8350_DC2_HIB_MODE_SHIFT                   12</span>
<span class="cp">#define WM8350_DC2_HIB_TRIG_MASK                0x0300</span>
<span class="cp">#define WM8350_DC2_HIB_TRIG_SHIFT                    8</span>
<span class="cp">#define WM8350_DC2_ILIM                         0x0040</span>
<span class="cp">#define WM8350_DC2_ILIM_MASK                    0x0040</span>
<span class="cp">#define WM8350_DC2_ILIM_SHIFT                        6</span>
<span class="cp">#define WM8350_DC2_RMP_MASK                     0x0018</span>
<span class="cp">#define WM8350_DC2_RMP_SHIFT                         3</span>
<span class="cp">#define WM8350_DC2_FBSRC_MASK                   0x0003</span>
<span class="cp">#define WM8350_DC2_FBSRC_SHIFT                       0</span>

<span class="cm">/* Bit values for R183 (0xB7) */</span>
<span class="cp">#define WM8350_DC2_MODE_BOOST                        0</span>
<span class="cp">#define WM8350_DC2_MODE_SWITCH                       1</span>

<span class="cp">#define WM8350_DC2_HIB_MODE_ACTIVE                   1</span>
<span class="cp">#define WM8350_DC2_HIB_MODE_DISABLE                  0</span>

<span class="cp">#define WM8350_DC2_HIB_TRIG_NONE                     0</span>
<span class="cp">#define WM8350_DC2_HIB_TRIG_LPWR1                    1</span>
<span class="cp">#define WM8350_DC2_HIB_TRIG_LPWR2                    2</span>
<span class="cp">#define WM8350_DC2_HIB_TRIG_LPWR3                    3</span>

<span class="cp">#define WM8350_DC2_ILIM_HIGH                         0</span>
<span class="cp">#define WM8350_DC2_ILIM_LOW                          1</span>

<span class="cp">#define WM8350_DC2_RMP_30V                           0</span>
<span class="cp">#define WM8350_DC2_RMP_20V                           1</span>
<span class="cp">#define WM8350_DC2_RMP_10V                           2</span>
<span class="cp">#define WM8350_DC2_RMP_5V                            3</span>

<span class="cp">#define WM8350_DC2_FBSRC_FB2                         0</span>
<span class="cp">#define WM8350_DC2_FBSRC_ISINKA                      1</span>
<span class="cp">#define WM8350_DC2_FBSRC_ISINKB                      2</span>
<span class="cp">#define WM8350_DC2_FBSRC_USB                         3</span>

<span class="cm">/*</span>
<span class="cm"> * R184 (0xB8) - DCDC2 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC2_ERRACT_MASK                  0xC000</span>
<span class="cp">#define WM8350_DC2_ERRACT_SHIFT                     14</span>
<span class="cp">#define WM8350_DC2_ENSLOT_MASK                  0x3C00</span>
<span class="cp">#define WM8350_DC2_ENSLOT_SHIFT                     10</span>
<span class="cp">#define WM8350_DC2_SDSLOT_MASK                  0x03C0</span>
<span class="cp">#define WM8350_DC2_UVTO_MASK                    0x0030</span>

<span class="cm">/* Bit values for R184 (0xB8) */</span>
<span class="cp">#define WM8350_DC2_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_DC2_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_DC2_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R186 (0xBA) - DCDC3 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC3_OPFLT                        0x0400</span>
<span class="cp">#define WM8350_DC3_VSEL_MASK                    0x007F</span>
<span class="cp">#define WM8350_DC3_VSEL_SHIFT                        0</span>

<span class="cm">/*</span>
<span class="cm"> * R187 (0xBB) - DCDC3 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC3_ERRACT_MASK                  0xC000</span>
<span class="cp">#define WM8350_DC3_ERRACT_SHIFT                     14</span>
<span class="cp">#define WM8350_DC3_ENSLOT_MASK                  0x3C00</span>
<span class="cp">#define WM8350_DC3_ENSLOT_SHIFT                     10</span>
<span class="cp">#define WM8350_DC3_SDSLOT_MASK                  0x03C0</span>
<span class="cp">#define WM8350_DC3_UVTO_MASK                    0x0030</span>
<span class="cp">#define WM8350_DC3_SDSLOT_SHIFT                      6</span>

<span class="cm">/* Bit values for R187 (0xBB) */</span>
<span class="cp">#define WM8350_DC3_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_DC3_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_DC3_ERRACT_SHUTDOWN_SYS               2</span>
<span class="cm">/*</span>
<span class="cm"> * R188 (0xBC) - DCDC3 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC3_HIB_MODE_MASK                0x7000</span>
<span class="cp">#define WM8350_DC3_HIB_TRIG_MASK                0x0300</span>
<span class="cp">#define WM8350_DC3_VIMG_MASK                    0x007F</span>

<span class="cm">/*</span>
<span class="cm"> * R189 (0xBD) - DCDC4 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC4_OPFLT                        0x0400</span>
<span class="cp">#define WM8350_DC4_VSEL_MASK                    0x007F</span>
<span class="cp">#define WM8350_DC4_VSEL_SHIFT                        0</span>

<span class="cm">/*</span>
<span class="cm"> * R190 (0xBE) - DCDC4 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC4_ERRACT_MASK                  0xC000</span>
<span class="cp">#define WM8350_DC4_ERRACT_SHIFT                     14</span>
<span class="cp">#define WM8350_DC4_ENSLOT_MASK                  0x3C00</span>
<span class="cp">#define WM8350_DC4_ENSLOT_SHIFT                     10</span>
<span class="cp">#define WM8350_DC4_SDSLOT_MASK                  0x03C0</span>
<span class="cp">#define WM8350_DC4_UVTO_MASK                    0x0030</span>
<span class="cp">#define WM8350_DC4_SDSLOT_SHIFT                      6</span>

<span class="cm">/* Bit values for R190 (0xBE) */</span>
<span class="cp">#define WM8350_DC4_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_DC4_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_DC4_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R191 (0xBF) - DCDC4 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC4_HIB_MODE_MASK                0x7000</span>
<span class="cp">#define WM8350_DC4_HIB_TRIG_MASK                0x0300</span>
<span class="cp">#define WM8350_DC4_VIMG_MASK                    0x007F</span>

<span class="cm">/*</span>
<span class="cm"> * R192 (0xC0) - DCDC5 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC5_MODE                         0x4000</span>
<span class="cp">#define WM8350_DC5_MODE_MASK                    0x4000</span>
<span class="cp">#define WM8350_DC5_MODE_SHIFT                       14</span>
<span class="cp">#define WM8350_DC5_HIB_MODE                     0x1000</span>
<span class="cp">#define WM8350_DC5_HIB_MODE_MASK                0x1000</span>
<span class="cp">#define WM8350_DC5_HIB_MODE_SHIFT                   12</span>
<span class="cp">#define WM8350_DC5_HIB_TRIG_MASK                0x0300</span>
<span class="cp">#define WM8350_DC5_HIB_TRIG_SHIFT                    8</span>
<span class="cp">#define WM8350_DC5_ILIM                         0x0040</span>
<span class="cp">#define WM8350_DC5_ILIM_MASK                    0x0040</span>
<span class="cp">#define WM8350_DC5_ILIM_SHIFT                        6</span>
<span class="cp">#define WM8350_DC5_RMP_MASK                     0x0018</span>
<span class="cp">#define WM8350_DC5_RMP_SHIFT                         3</span>
<span class="cp">#define WM8350_DC5_FBSRC_MASK                   0x0003</span>
<span class="cp">#define WM8350_DC5_FBSRC_SHIFT                       0</span>

<span class="cm">/* Bit values for R192 (0xC0) */</span>
<span class="cp">#define WM8350_DC5_MODE_BOOST                        0</span>
<span class="cp">#define WM8350_DC5_MODE_SWITCH                       1</span>

<span class="cp">#define WM8350_DC5_HIB_MODE_ACTIVE                   1</span>
<span class="cp">#define WM8350_DC5_HIB_MODE_DISABLE                  0</span>

<span class="cp">#define WM8350_DC5_HIB_TRIG_NONE                     0</span>
<span class="cp">#define WM8350_DC5_HIB_TRIG_LPWR1                    1</span>
<span class="cp">#define WM8350_DC5_HIB_TRIG_LPWR2                    2</span>
<span class="cp">#define WM8350_DC5_HIB_TRIG_LPWR3                    3</span>

<span class="cp">#define WM8350_DC5_ILIM_HIGH                         0</span>
<span class="cp">#define WM8350_DC5_ILIM_LOW                          1</span>

<span class="cp">#define WM8350_DC5_RMP_30V                           0</span>
<span class="cp">#define WM8350_DC5_RMP_20V                           1</span>
<span class="cp">#define WM8350_DC5_RMP_10V                           2</span>
<span class="cp">#define WM8350_DC5_RMP_5V                            3</span>

<span class="cp">#define WM8350_DC5_FBSRC_FB2                         0</span>
<span class="cp">#define WM8350_DC5_FBSRC_ISINKA                      1</span>
<span class="cp">#define WM8350_DC5_FBSRC_ISINKB                      2</span>
<span class="cp">#define WM8350_DC5_FBSRC_USB                         3</span>

<span class="cm">/*</span>
<span class="cm"> * R193 (0xC1) - DCDC5 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC5_ERRACT_MASK                  0xC000</span>
<span class="cp">#define WM8350_DC5_ERRACT_SHIFT                     14</span>
<span class="cp">#define WM8350_DC5_ENSLOT_MASK                  0x3C00</span>
<span class="cp">#define WM8350_DC5_ENSLOT_SHIFT                     10</span>
<span class="cp">#define WM8350_DC5_SDSLOT_MASK                  0x03C0</span>
<span class="cp">#define WM8350_DC5_UVTO_MASK                    0x0030</span>
<span class="cp">#define WM8350_DC5_SDSLOT_SHIFT                      6</span>

<span class="cm">/* Bit values for R193 (0xC1) */</span>
<span class="cp">#define WM8350_DC5_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_DC5_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_DC5_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R195 (0xC3) - DCDC6 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC6_OPFLT                        0x0400</span>
<span class="cp">#define WM8350_DC6_VSEL_MASK                    0x007F</span>
<span class="cp">#define WM8350_DC6_VSEL_SHIFT                        0</span>

<span class="cm">/*</span>
<span class="cm"> * R196 (0xC4) - DCDC6 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC6_ERRACT_MASK                  0xC000</span>
<span class="cp">#define WM8350_DC6_ERRACT_SHIFT                     14</span>
<span class="cp">#define WM8350_DC6_ENSLOT_MASK                  0x3C00</span>
<span class="cp">#define WM8350_DC6_ENSLOT_SHIFT                     10</span>
<span class="cp">#define WM8350_DC6_SDSLOT_MASK                  0x03C0</span>
<span class="cp">#define WM8350_DC6_UVTO_MASK                    0x0030</span>
<span class="cp">#define WM8350_DC6_SDSLOT_SHIFT                      6</span>

<span class="cm">/* Bit values for R196 (0xC4) */</span>
<span class="cp">#define WM8350_DC6_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_DC6_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_DC6_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R197 (0xC5) - DCDC6 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DC6_HIB_MODE_MASK                0x7000</span>
<span class="cp">#define WM8350_DC6_HIB_TRIG_MASK                0x0300</span>
<span class="cp">#define WM8350_DC6_VIMG_MASK                    0x007F</span>

<span class="cm">/*</span>
<span class="cm"> * R199 (0xC7) - Limit Switch Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LS_ERRACT_MASK                   0xC000</span>
<span class="cp">#define WM8350_LS_ERRACT_SHIFT                      14</span>
<span class="cp">#define WM8350_LS_ENSLOT_MASK                   0x3C00</span>
<span class="cp">#define WM8350_LS_ENSLOT_SHIFT                      10</span>
<span class="cp">#define WM8350_LS_SDSLOT_MASK                   0x03C0</span>
<span class="cp">#define WM8350_LS_SDSLOT_SHIFT                       6</span>
<span class="cp">#define WM8350_LS_HIB_MODE                      0x0010</span>
<span class="cp">#define WM8350_LS_HIB_MODE_MASK                 0x0010</span>
<span class="cp">#define WM8350_LS_HIB_MODE_SHIFT                     4</span>
<span class="cp">#define WM8350_LS_HIB_PROT                      0x0002</span>
<span class="cp">#define WM8350_LS_HIB_PROT_MASK                 0x0002</span>
<span class="cp">#define WM8350_LS_HIB_PROT_SHIFT                     1</span>
<span class="cp">#define WM8350_LS_PROT                          0x0001</span>
<span class="cp">#define WM8350_LS_PROT_MASK                     0x0001</span>
<span class="cp">#define WM8350_LS_PROT_SHIFT                         0</span>

<span class="cm">/* Bit values for R199 (0xC7) */</span>
<span class="cp">#define WM8350_LS_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_LS_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_LS_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R200 (0xC8) - LDO1 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO1_SWI                         0x4000</span>
<span class="cp">#define WM8350_LDO1_OPFLT                       0x0400</span>
<span class="cp">#define WM8350_LDO1_VSEL_MASK                   0x001F</span>
<span class="cp">#define WM8350_LDO1_VSEL_SHIFT                       0</span>

<span class="cm">/*</span>
<span class="cm"> * R201 (0xC9) - LDO1 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO1_ERRACT_MASK                 0xC000</span>
<span class="cp">#define WM8350_LDO1_ERRACT_SHIFT                    14</span>
<span class="cp">#define WM8350_LDO1_ENSLOT_MASK                 0x3C00</span>
<span class="cp">#define WM8350_LDO1_ENSLOT_SHIFT                    10</span>
<span class="cp">#define WM8350_LDO1_SDSLOT_MASK                 0x03C0</span>
<span class="cp">#define WM8350_LDO1_UVTO_MASK                   0x0030</span>
<span class="cp">#define WM8350_LDO1_SDSLOT_SHIFT                     6</span>

<span class="cm">/* Bit values for R201 (0xC9) */</span>
<span class="cp">#define WM8350_LDO1_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_LDO1_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_LDO1_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R202 (0xCA) - LDO1 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO1_HIB_MODE_MASK               0x3000</span>
<span class="cp">#define WM8350_LDO1_HIB_TRIG_MASK               0x0300</span>
<span class="cp">#define WM8350_LDO1_VIMG_MASK                   0x001F</span>
<span class="cp">#define WM8350_LDO1_HIB_MODE_DIS		(0x1 &lt;&lt; 12)</span>


<span class="cm">/*</span>
<span class="cm"> * R203 (0xCB) - LDO2 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO2_SWI                         0x4000</span>
<span class="cp">#define WM8350_LDO2_OPFLT                       0x0400</span>
<span class="cp">#define WM8350_LDO2_VSEL_MASK                   0x001F</span>
<span class="cp">#define WM8350_LDO2_VSEL_SHIFT                       0</span>

<span class="cm">/*</span>
<span class="cm"> * R204 (0xCC) - LDO2 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO2_ERRACT_MASK                 0xC000</span>
<span class="cp">#define WM8350_LDO2_ERRACT_SHIFT                    14</span>
<span class="cp">#define WM8350_LDO2_ENSLOT_MASK                 0x3C00</span>
<span class="cp">#define WM8350_LDO2_ENSLOT_SHIFT                    10</span>
<span class="cp">#define WM8350_LDO2_SDSLOT_MASK                 0x03C0</span>
<span class="cp">#define WM8350_LDO2_SDSLOT_SHIFT                     6</span>

<span class="cm">/* Bit values for R204 (0xCC) */</span>
<span class="cp">#define WM8350_LDO2_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_LDO2_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_LDO2_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R205 (0xCD) - LDO2 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO2_HIB_MODE_MASK               0x3000</span>
<span class="cp">#define WM8350_LDO2_HIB_TRIG_MASK               0x0300</span>
<span class="cp">#define WM8350_LDO2_VIMG_MASK                   0x001F</span>

<span class="cm">/*</span>
<span class="cm"> * R206 (0xCE) - LDO3 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO3_SWI                         0x4000</span>
<span class="cp">#define WM8350_LDO3_OPFLT                       0x0400</span>
<span class="cp">#define WM8350_LDO3_VSEL_MASK                   0x001F</span>
<span class="cp">#define WM8350_LDO3_VSEL_SHIFT                       0</span>

<span class="cm">/*</span>
<span class="cm"> * R207 (0xCF) - LDO3 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO3_ERRACT_MASK                 0xC000</span>
<span class="cp">#define WM8350_LDO3_ERRACT_SHIFT                    14</span>
<span class="cp">#define WM8350_LDO3_ENSLOT_MASK                 0x3C00</span>
<span class="cp">#define WM8350_LDO3_ENSLOT_SHIFT                    10</span>
<span class="cp">#define WM8350_LDO3_SDSLOT_MASK                 0x03C0</span>
<span class="cp">#define WM8350_LDO3_UVTO_MASK                   0x0030</span>
<span class="cp">#define WM8350_LDO3_SDSLOT_SHIFT                     6</span>

<span class="cm">/* Bit values for R207 (0xCF) */</span>
<span class="cp">#define WM8350_LDO3_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_LDO3_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_LDO3_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R208 (0xD0) - LDO3 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO3_HIB_MODE_MASK               0x3000</span>
<span class="cp">#define WM8350_LDO3_HIB_TRIG_MASK               0x0300</span>
<span class="cp">#define WM8350_LDO3_VIMG_MASK                   0x001F</span>

<span class="cm">/*</span>
<span class="cm"> * R209 (0xD1) - LDO4 Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO4_SWI                         0x4000</span>
<span class="cp">#define WM8350_LDO4_OPFLT                       0x0400</span>
<span class="cp">#define WM8350_LDO4_VSEL_MASK                   0x001F</span>
<span class="cp">#define WM8350_LDO4_VSEL_SHIFT                       0</span>

<span class="cm">/*</span>
<span class="cm"> * R210 (0xD2) - LDO4 Timeouts</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO4_ERRACT_MASK                 0xC000</span>
<span class="cp">#define WM8350_LDO4_ERRACT_SHIFT                    14</span>
<span class="cp">#define WM8350_LDO4_ENSLOT_MASK                 0x3C00</span>
<span class="cp">#define WM8350_LDO4_ENSLOT_SHIFT                    10</span>
<span class="cp">#define WM8350_LDO4_SDSLOT_MASK                 0x03C0</span>
<span class="cp">#define WM8350_LDO4_UVTO_MASK                   0x0030</span>
<span class="cp">#define WM8350_LDO4_SDSLOT_SHIFT                     6</span>

<span class="cm">/* Bit values for R210 (0xD2) */</span>
<span class="cp">#define WM8350_LDO4_ERRACT_NONE                       0</span>
<span class="cp">#define WM8350_LDO4_ERRACT_SHUTDOWN_CONV              1</span>
<span class="cp">#define WM8350_LDO4_ERRACT_SHUTDOWN_SYS               2</span>

<span class="cm">/*</span>
<span class="cm"> * R211 (0xD3) - LDO4 Low Power</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO4_HIB_MODE_MASK               0x3000</span>
<span class="cp">#define WM8350_LDO4_HIB_TRIG_MASK               0x0300</span>
<span class="cp">#define WM8350_LDO4_VIMG_MASK                   0x001F</span>

<span class="cm">/*</span>
<span class="cm"> * R215 (0xD7) - VCC_FAULT Masks</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LS_FAULT                         0x8000</span>
<span class="cp">#define WM8350_LDO4_FAULT                       0x0800</span>
<span class="cp">#define WM8350_LDO3_FAULT                       0x0400</span>
<span class="cp">#define WM8350_LDO2_FAULT                       0x0200</span>
<span class="cp">#define WM8350_LDO1_FAULT                       0x0100</span>
<span class="cp">#define WM8350_DC6_FAULT                        0x0020</span>
<span class="cp">#define WM8350_DC5_FAULT                        0x0010</span>
<span class="cp">#define WM8350_DC4_FAULT                        0x0008</span>
<span class="cp">#define WM8350_DC3_FAULT                        0x0004</span>
<span class="cp">#define WM8350_DC2_FAULT                        0x0002</span>
<span class="cp">#define WM8350_DC1_FAULT                        0x0001</span>

<span class="cm">/*</span>
<span class="cm"> * R216 (0xD8) - Main Bandgap Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_MBG_LOAD_FUSES                   0x8000</span>
<span class="cp">#define WM8350_MBG_FUSE_WPREP                   0x4000</span>
<span class="cp">#define WM8350_MBG_FUSE_WRITE                   0x2000</span>
<span class="cp">#define WM8350_MBG_FUSE_TRIM_MASK               0x1F00</span>
<span class="cp">#define WM8350_MBG_TRIM_SRC                     0x0020</span>
<span class="cp">#define WM8350_MBG_USER_TRIM_MASK               0x001F</span>

<span class="cm">/*</span>
<span class="cm"> * R217 (0xD9) - OSC Control</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_OSC_LOAD_FUSES                   0x8000</span>
<span class="cp">#define WM8350_OSC_FUSE_WPREP                   0x4000</span>
<span class="cp">#define WM8350_OSC_FUSE_WRITE                   0x2000</span>
<span class="cp">#define WM8350_OSC_FUSE_TRIM_MASK               0x0F00</span>
<span class="cp">#define WM8350_OSC_TRIM_SRC                     0x0020</span>
<span class="cp">#define WM8350_OSC_USER_TRIM_MASK               0x000F</span>

<span class="cm">/*</span>
<span class="cm"> * R248 (0xF8) - DCDC1 Force PWM</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCDC1_FORCE_PWM_ENA              0x0010</span>

<span class="cm">/*</span>
<span class="cm"> * R250 (0xFA) - DCDC3 Force PWM</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCDC3_FORCE_PWM_ENA              0x0010</span>

<span class="cm">/*</span>
<span class="cm"> * R251 (0xFB) - DCDC4 Force PWM</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCDC4_FORCE_PWM_ENA              0x0010</span>

<span class="cm">/*</span>
<span class="cm"> * R253 (0xFD) - DCDC1 Force PWM</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCDC6_FORCE_PWM_ENA              0x0010</span>

<span class="cm">/*</span>
<span class="cm"> * DCDC&#39;s</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_DCDC_1				0</span>
<span class="cp">#define WM8350_DCDC_2				1</span>
<span class="cp">#define WM8350_DCDC_3				2</span>
<span class="cp">#define WM8350_DCDC_4				3</span>
<span class="cp">#define WM8350_DCDC_5				4</span>
<span class="cp">#define WM8350_DCDC_6				5</span>

<span class="cm">/* DCDC modes */</span>
<span class="cp">#define WM8350_DCDC_ACTIVE_STANDBY		0</span>
<span class="cp">#define WM8350_DCDC_ACTIVE_PULSE		1</span>
<span class="cp">#define WM8350_DCDC_SLEEP_NORMAL		0</span>
<span class="cp">#define WM8350_DCDC_SLEEP_LOW			1</span>

<span class="cm">/* DCDC Low power (Hibernate) mode */</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_CUR		(0 &lt;&lt; 12)</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_IMAGE		(1 &lt;&lt; 12)</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_STANDBY		(2 &lt;&lt; 12)</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_LDO		(4 &lt;&lt; 12)</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_LDO_IM		(5 &lt;&lt; 12)</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_DIS		(7 &lt;&lt; 12)</span>
<span class="cp">#define WM8350_DCDC_HIB_MODE_MASK		(7 &lt;&lt; 12)</span>

<span class="cm">/* DCDC Low Power (Hibernate) signal */</span>
<span class="cp">#define WM8350_DCDC_HIB_SIG_REG			(0 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_DCDC_HIB_SIG_LPWR1		(1 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_DCDC_HIB_SIG_LPWR2		(2 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_DCDC_HIB_SIG_LPWR3		(3 &lt;&lt; 8)</span>

<span class="cm">/* LDO Low power (Hibernate) mode */</span>
<span class="cp">#define WM8350_LDO_HIB_MODE_IMAGE		(0 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_LDO_HIB_MODE_DIS			(1 &lt;&lt; 0)</span>

<span class="cm">/* LDO Low Power (Hibernate) signal */</span>
<span class="cp">#define WM8350_LDO_HIB_SIG_REG			(0 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_LDO_HIB_SIG_LPWR1		(1 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_LDO_HIB_SIG_LPWR2		(2 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_LDO_HIB_SIG_LPWR3		(3 &lt;&lt; 8)</span>

<span class="cm">/*</span>
<span class="cm"> * LDOs</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_LDO_1				6</span>
<span class="cp">#define WM8350_LDO_2				7</span>
<span class="cp">#define WM8350_LDO_3				8</span>
<span class="cp">#define WM8350_LDO_4				9</span>

<span class="cm">/*</span>
<span class="cm"> * ISINKs</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_ISINK_A				10</span>
<span class="cp">#define WM8350_ISINK_B				11</span>

<span class="cp">#define WM8350_ISINK_MODE_BOOST			0</span>
<span class="cp">#define WM8350_ISINK_MODE_SWITCH		1</span>
<span class="cp">#define WM8350_ISINK_ILIM_NORMAL		0</span>
<span class="cp">#define WM8350_ISINK_ILIM_LOW			1</span>

<span class="cp">#define WM8350_ISINK_FLASH_DISABLE		0</span>
<span class="cp">#define WM8350_ISINK_FLASH_ENABLE		1</span>
<span class="cp">#define WM8350_ISINK_FLASH_TRIG_BIT		0</span>
<span class="cp">#define WM8350_ISINK_FLASH_TRIG_GPIO		1</span>
<span class="cp">#define WM8350_ISINK_FLASH_MODE_EN		(1 &lt;&lt; 13)</span>
<span class="cp">#define WM8350_ISINK_FLASH_MODE_DIS		(0 &lt;&lt; 13)</span>
<span class="cp">#define WM8350_ISINK_FLASH_DUR_32MS		(0 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_ISINK_FLASH_DUR_64MS		(1 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_ISINK_FLASH_DUR_96MS		(2 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_ISINK_FLASH_DUR_1024MS		(3 &lt;&lt; 8)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_INSTANT		(0 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_0_25S		(1 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_0_50S		(2 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_1_00S		(3 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_1_95S		(1 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_3_91S		(2 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_ON_7_80S		(3 &lt;&lt; 0)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_INSTANT		(0 &lt;&lt; 4)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_0_25S		(1 &lt;&lt; 4)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_0_50S		(2 &lt;&lt; 4)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_1_00S		(3 &lt;&lt; 4)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_1_95S		(1 &lt;&lt; 4)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_3_91S		(2 &lt;&lt; 4)</span>
<span class="cp">#define WM8350_ISINK_FLASH_OFF_7_80S		(3 &lt;&lt; 4)</span>

<span class="cm">/*</span>
<span class="cm"> * Regulator Interrupts.</span>
<span class="cm"> */</span>
<span class="cp">#define WM8350_IRQ_CS1				13</span>
<span class="cp">#define WM8350_IRQ_CS2				14</span>
<span class="cp">#define WM8350_IRQ_UV_LDO4			25</span>
<span class="cp">#define WM8350_IRQ_UV_LDO3			26</span>
<span class="cp">#define WM8350_IRQ_UV_LDO2			27</span>
<span class="cp">#define WM8350_IRQ_UV_LDO1			28</span>
<span class="cp">#define WM8350_IRQ_UV_DC6			29</span>
<span class="cp">#define WM8350_IRQ_UV_DC5			30</span>
<span class="cp">#define WM8350_IRQ_UV_DC4			31</span>
<span class="cp">#define WM8350_IRQ_UV_DC3			32</span>
<span class="cp">#define WM8350_IRQ_UV_DC2			33</span>
<span class="cp">#define WM8350_IRQ_UV_DC1			34</span>
<span class="cp">#define WM8350_IRQ_OC_LS			35</span>

<span class="cp">#define NUM_WM8350_REGULATORS			12</span>

<span class="k">struct</span> <span class="n">wm8350</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">platform_device</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">regulator_init_data</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * WM8350 LED platform data</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">wm8350_led_platform_data</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">default_trigger</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max_uA</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">wm8350_led</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">pdev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">mutex</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">work_struct</span> <span class="n">work</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">value_lock</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">led_brightness</span> <span class="n">value</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">led_classdev</span> <span class="n">cdev</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max_uA_index</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">enabled</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">regulator</span> <span class="o">*</span><span class="n">isink</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regulator_consumer_supply</span> <span class="n">isink_consumer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="n">isink_init</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regulator</span> <span class="o">*</span><span class="n">dcdc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regulator_consumer_supply</span> <span class="n">dcdc_consumer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="n">dcdc_init</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">wm8350_pmic</span> <span class="p">{</span>
	<span class="cm">/* Number of regulators of each type on this device */</span>
	<span class="kt">int</span> <span class="n">max_dcdc</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">max_isink</span><span class="p">;</span>

	<span class="cm">/* ISINK to DCDC mapping */</span>
	<span class="kt">int</span> <span class="n">isink_A_dcdc</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">isink_B_dcdc</span><span class="p">;</span>

	<span class="cm">/* hibernate configs */</span>
	<span class="n">u16</span> <span class="n">dcdc1_hib_mode</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">dcdc3_hib_mode</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">dcdc4_hib_mode</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">dcdc6_hib_mode</span><span class="p">;</span>

	<span class="cm">/* regulator devices */</span>
	<span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">pdev</span><span class="p">[</span><span class="n">NUM_WM8350_REGULATORS</span><span class="p">];</span>

	<span class="cm">/* LED devices */</span>
	<span class="k">struct</span> <span class="n">wm8350_led</span> <span class="n">led</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">wm8350_register_regulator</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="o">*</span><span class="n">initdata</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">wm8350_register_led</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lednum</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dcdc</span><span class="p">,</span> <span class="kt">int</span> <span class="n">isink</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">wm8350_led_platform_data</span> <span class="o">*</span><span class="n">pdata</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Additional DCDC control not supported via regulator API</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">wm8350_dcdc_set_slot</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dcdc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">start</span><span class="p">,</span>
			 <span class="n">u16</span> <span class="n">stop</span><span class="p">,</span> <span class="n">u16</span> <span class="n">fault</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">wm8350_dcdc25_set_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dcdc</span><span class="p">,</span> <span class="n">u16</span> <span class="n">mode</span><span class="p">,</span>
			   <span class="n">u16</span> <span class="n">ilim</span><span class="p">,</span> <span class="n">u16</span> <span class="n">ramp</span><span class="p">,</span> <span class="n">u16</span> <span class="n">feedback</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Additional LDO control not supported via regulator API</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">wm8350_ldo_set_slot</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ldo</span><span class="p">,</span> <span class="n">u16</span> <span class="n">start</span><span class="p">,</span> <span class="n">u16</span> <span class="n">stop</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Additional ISINK control not supported via regulator API</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">wm8350_isink_set_flash</span><span class="p">(</span><span class="k">struct</span> <span class="n">wm8350</span> <span class="o">*</span><span class="n">wm8350</span><span class="p">,</span> <span class="kt">int</span> <span class="n">isink</span><span class="p">,</span> <span class="n">u16</span> <span class="n">mode</span><span class="p">,</span>
			   <span class="n">u16</span> <span class="n">trigger</span><span class="p">,</span> <span class="n">u16</span> <span class="n">duration</span><span class="p">,</span> <span class="n">u16</span> <span class="n">on_ramp</span><span class="p">,</span>
			   <span class="n">u16</span> <span class="n">off_ramp</span><span class="p">,</span> <span class="n">u16</span> <span class="n">drive</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
