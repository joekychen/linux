<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › chio.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>chio.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * ioctl interface for the scsi media changer driver</span>
<span class="cm"> */</span>

<span class="cm">/* changer element types */</span>
<span class="cp">#define CHET_MT   0	</span><span class="cm">/* media transport element (robot) */</span><span class="cp"></span>
<span class="cp">#define CHET_ST   1	</span><span class="cm">/* storage element (media slots) */</span><span class="cp"></span>
<span class="cp">#define CHET_IE   2	</span><span class="cm">/* import/export element */</span><span class="cp"></span>
<span class="cp">#define CHET_DT   3	</span><span class="cm">/* data transfer element (tape/cdrom/whatever) */</span><span class="cp"></span>
<span class="cp">#define CHET_V1   4	</span><span class="cm">/* vendor specific #1 */</span><span class="cp"></span>
<span class="cp">#define CHET_V2   5	</span><span class="cm">/* vendor specific #2 */</span><span class="cp"></span>
<span class="cp">#define CHET_V3   6	</span><span class="cm">/* vendor specific #3 */</span><span class="cp"></span>
<span class="cp">#define CHET_V4   7	</span><span class="cm">/* vendor specific #4 */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * CHIOGPARAMS</span>
<span class="cm"> *    query changer properties</span>
<span class="cm"> *</span>
<span class="cm"> * CHIOVGPARAMS</span>
<span class="cm"> *    query vendor-specific element types</span>
<span class="cm"> *</span>
<span class="cm"> *    accessing elements works by specifing type and unit of the element.</span>
<span class="cm"> *    for example, storage elements are addressed with type = CHET_ST and</span>
<span class="cm"> *    unit = 0 .. cp_nslots-1</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_params</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">cp_curpicker</span><span class="p">;</span>  <span class="cm">/* current transport element */</span>
	<span class="kt">int</span> <span class="n">cp_npickers</span><span class="p">;</span>   <span class="cm">/* number of transport elements      (CHET_MT) */</span>
	<span class="kt">int</span> <span class="n">cp_nslots</span><span class="p">;</span>     <span class="cm">/* number of storage elements        (CHET_ST) */</span>
	<span class="kt">int</span> <span class="n">cp_nportals</span><span class="p">;</span>   <span class="cm">/* number of import/export elements  (CHET_IE) */</span>
	<span class="kt">int</span> <span class="n">cp_ndrives</span><span class="p">;</span>    <span class="cm">/* number of data transfer elements  (CHET_DT) */</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">changer_vendor_params</span> <span class="p">{</span>
	<span class="kt">int</span>  <span class="n">cvp_n1</span><span class="p">;</span>       <span class="cm">/* number of vendor specific elems   (CHET_V1) */</span>
	<span class="kt">char</span> <span class="n">cvp_label1</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">int</span>  <span class="n">cvp_n2</span><span class="p">;</span>       <span class="cm">/* number of vendor specific elems   (CHET_V2) */</span>
	<span class="kt">char</span> <span class="n">cvp_label2</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">int</span>  <span class="n">cvp_n3</span><span class="p">;</span>       <span class="cm">/* number of vendor specific elems   (CHET_V3) */</span>
	<span class="kt">char</span> <span class="n">cvp_label3</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">int</span>  <span class="n">cvp_n4</span><span class="p">;</span>       <span class="cm">/* number of vendor specific elems   (CHET_V4) */</span>
	<span class="kt">char</span> <span class="n">cvp_label4</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="kt">int</span>  <span class="n">reserved</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>


<span class="cm">/*</span>
<span class="cm"> * CHIOMOVE</span>
<span class="cm"> *    move a medium from one element to another</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_move</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">cm_fromtype</span><span class="p">;</span>	<span class="cm">/* type/unit of source element */</span>
	<span class="kt">int</span> <span class="n">cm_fromunit</span><span class="p">;</span>	
	<span class="kt">int</span> <span class="n">cm_totype</span><span class="p">;</span>	<span class="cm">/* type/unit of destination element */</span>
	<span class="kt">int</span> <span class="n">cm_tounit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cm_flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define CM_INVERT   1   </span><span class="cm">/* flag: rotate media (for double-sided like MOD) */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * CHIOEXCHANGE</span>
<span class="cm"> *    move one medium from element #1 to element #2,</span>
<span class="cm"> *    and another one from element #2 to element #3.</span>
<span class="cm"> *    element #1 and #3 are allowed to be identical.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_exchange</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">ce_srctype</span><span class="p">;</span>	    <span class="cm">/* type/unit of element #1 */</span>
	<span class="kt">int</span> <span class="n">ce_srcunit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ce_fdsttype</span><span class="p">;</span>    <span class="cm">/* type/unit of element #2 */</span>
	<span class="kt">int</span> <span class="n">ce_fdstunit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ce_sdsttype</span><span class="p">;</span>    <span class="cm">/* type/unit of element #3 */</span>
	<span class="kt">int</span> <span class="n">ce_sdstunit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ce_flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define CE_INVERT1   1</span>
<span class="cp">#define CE_INVERT2   2</span>


<span class="cm">/*</span>
<span class="cm"> * CHIOPOSITION</span>
<span class="cm"> *    move the transport element (robot arm) to a specific element.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_position</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">cp_type</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cp_unit</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cp_flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define CP_INVERT   1</span>


<span class="cm">/*</span>
<span class="cm"> * CHIOGSTATUS</span>
<span class="cm"> *    get element status for all elements of a specific type</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_element_status</span> <span class="p">{</span>
	<span class="kt">int</span>             <span class="n">ces_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>   <span class="n">__user</span> <span class="o">*</span><span class="n">ces_data</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define CESTATUS_FULL     0x01 </span><span class="cm">/* full */</span><span class="cp"></span>
<span class="cp">#define CESTATUS_IMPEXP   0x02	</span><span class="cm">/* media was imported (inserted by sysop) */</span><span class="cp"></span>
<span class="cp">#define CESTATUS_EXCEPT   0x04	</span><span class="cm">/* error condition */</span><span class="cp"></span>
<span class="cp">#define CESTATUS_ACCESS   0x08	</span><span class="cm">/* access allowed */</span><span class="cp"></span>
<span class="cp">#define CESTATUS_EXENAB   0x10	</span><span class="cm">/* element can export media */</span><span class="cp"></span>
<span class="cp">#define CESTATUS_INENAB   0x20	</span><span class="cm">/* element can import media */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * CHIOGELEM</span>
<span class="cm"> *    get more detailed status information for a single element</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_get_element</span> <span class="p">{</span>
	<span class="kt">int</span>	<span class="n">cge_type</span><span class="p">;</span>	 <span class="cm">/* type/unit */</span>
	<span class="kt">int</span>	<span class="n">cge_unit</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">cge_status</span><span class="p">;</span>      <span class="cm">/* status */</span>
	<span class="kt">int</span>     <span class="n">cge_errno</span><span class="p">;</span>       <span class="cm">/* errno */</span>
	<span class="kt">int</span>     <span class="n">cge_srctype</span><span class="p">;</span>     <span class="cm">/* source element of the last move/exchange */</span>
	<span class="kt">int</span>     <span class="n">cge_srcunit</span><span class="p">;</span>
	<span class="kt">int</span>     <span class="n">cge_id</span><span class="p">;</span>          <span class="cm">/* scsi id  (for data transfer elements) */</span>
	<span class="kt">int</span>     <span class="n">cge_lun</span><span class="p">;</span>         <span class="cm">/* scsi lun (for data transfer elements) */</span>
	<span class="kt">char</span>    <span class="n">cge_pvoltag</span><span class="p">[</span><span class="mi">36</span><span class="p">];</span> <span class="cm">/* primary volume tag */</span>
	<span class="kt">char</span>    <span class="n">cge_avoltag</span><span class="p">[</span><span class="mi">36</span><span class="p">];</span> <span class="cm">/* alternate volume tag */</span>
	<span class="kt">int</span>     <span class="n">cge_flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cm">/* flags */</span>
<span class="cp">#define CGE_ERRNO     0x01       </span><span class="cm">/* errno available       */</span><span class="cp"></span>
<span class="cp">#define CGE_INVERT    0x02       </span><span class="cm">/* media inverted        */</span><span class="cp"></span>
<span class="cp">#define CGE_SRC       0x04       </span><span class="cm">/* media src available   */</span><span class="cp"></span>
<span class="cp">#define CGE_IDLUN     0x08       </span><span class="cm">/* ID+LUN available      */</span><span class="cp"></span>
<span class="cp">#define CGE_PVOLTAG   0x10       </span><span class="cm">/* primary volume tag available */</span><span class="cp"></span>
<span class="cp">#define CGE_AVOLTAG   0x20       </span><span class="cm">/* alternate volume tag available */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> * CHIOSVOLTAG</span>
<span class="cm"> *    set volume tag</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">changer_set_voltag</span> <span class="p">{</span>
	<span class="kt">int</span>	<span class="n">csv_type</span><span class="p">;</span>	 <span class="cm">/* type/unit */</span>
	<span class="kt">int</span>	<span class="n">csv_unit</span><span class="p">;</span>
	<span class="kt">char</span>    <span class="n">csv_voltag</span><span class="p">[</span><span class="mi">36</span><span class="p">];</span>  <span class="cm">/* volume tag */</span>
	<span class="kt">int</span>     <span class="n">csv_flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define CSV_PVOLTAG   0x01       </span><span class="cm">/* primary volume tag */</span><span class="cp"></span>
<span class="cp">#define CSV_AVOLTAG   0x02       </span><span class="cm">/* alternate volume tag */</span><span class="cp"></span>
<span class="cp">#define CSV_CLEARTAG  0x04       </span><span class="cm">/* clear volume tag */</span><span class="cp"></span>

<span class="cm">/* ioctls */</span>
<span class="cp">#define CHIOMOVE       _IOW(&#39;c&#39;, 1,struct changer_move)</span>
<span class="cp">#define CHIOEXCHANGE   _IOW(&#39;c&#39;, 2,struct changer_exchange)</span>
<span class="cp">#define CHIOPOSITION   _IOW(&#39;c&#39;, 3,struct changer_position)</span>
<span class="cp">#define CHIOGPICKER    _IOR(&#39;c&#39;, 4,int)                        </span><span class="cm">/* not impl. */</span><span class="cp"></span>
<span class="cp">#define CHIOSPICKER    _IOW(&#39;c&#39;, 5,int)                        </span><span class="cm">/* not impl. */</span><span class="cp"></span>
<span class="cp">#define CHIOGPARAMS    _IOR(&#39;c&#39;, 6,struct changer_params)</span>
<span class="cp">#define CHIOGSTATUS    _IOW(&#39;c&#39;, 8,struct changer_element_status)</span>
<span class="cp">#define CHIOGELEM      _IOW(&#39;c&#39;,16,struct changer_get_element)</span>
<span class="cp">#define CHIOINITELEM   _IO(&#39;c&#39;,17)</span>
<span class="cp">#define CHIOSVOLTAG    _IOW(&#39;c&#39;,18,struct changer_set_voltag)</span>
<span class="cp">#define CHIOGVPARAMS   _IOR(&#39;c&#39;,19,struct changer_vendor_params)</span>

<span class="cm">/* ---------------------------------------------------------------------- */</span>

<span class="cm">/*</span>
<span class="cm"> * Local variables:</span>
<span class="cm"> * c-basic-offset: 8</span>
<span class="cm"> * End:</span>
<span class="cm"> */</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
