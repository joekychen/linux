<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › led-lm3530.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>led-lm3530.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2011 ST-Ericsson SA.</span>
<span class="cm"> * Copyright (C) 2009 Motorola, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * License Terms: GNU General Public License v2</span>
<span class="cm"> *</span>
<span class="cm"> * Simple driver for National Semiconductor LM35330 Backlight driver chip</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Shreshtha Kumar SAHU &lt;shreshthakumar.sahu@stericsson.com&gt;</span>
<span class="cm"> * based on leds-lm3530.c by Dan Murphy &lt;D.Murphy@motorola.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _LINUX_LED_LM3530_H__</span>
<span class="cp">#define _LINUX_LED_LM3530_H__</span>

<span class="cp">#define LM3530_FS_CURR_5mA		(0) </span><span class="cm">/* Full Scale Current */</span><span class="cp"></span>
<span class="cp">#define LM3530_FS_CURR_8mA		(1)</span>
<span class="cp">#define LM3530_FS_CURR_12mA		(2)</span>
<span class="cp">#define LM3530_FS_CURR_15mA		(3)</span>
<span class="cp">#define LM3530_FS_CURR_19mA		(4)</span>
<span class="cp">#define LM3530_FS_CURR_22mA		(5)</span>
<span class="cp">#define LM3530_FS_CURR_26mA		(6)</span>
<span class="cp">#define LM3530_FS_CURR_29mA		(7)</span>

<span class="cp">#define LM3530_ALS_AVRG_TIME_32ms	(0) </span><span class="cm">/* ALS Averaging Time */</span><span class="cp"></span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_64ms	(1)</span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_128ms	(2)</span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_256ms	(3)</span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_512ms	(4)</span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_1024ms	(5)</span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_2048ms	(6)</span>
<span class="cp">#define LM3530_ALS_AVRG_TIME_4096ms	(7)</span>

<span class="cp">#define LM3530_RAMP_TIME_1ms		(0) </span><span class="cm">/* Brigtness Ramp Time */</span><span class="cp"></span>
<span class="cp">#define LM3530_RAMP_TIME_130ms		(1) </span><span class="cm">/* Max to 0 and vice versa */</span><span class="cp"></span>
<span class="cp">#define LM3530_RAMP_TIME_260ms		(2)</span>
<span class="cp">#define LM3530_RAMP_TIME_520ms		(3)</span>
<span class="cp">#define LM3530_RAMP_TIME_1s		(4)</span>
<span class="cp">#define LM3530_RAMP_TIME_2s		(5)</span>
<span class="cp">#define LM3530_RAMP_TIME_4s		(6)</span>
<span class="cp">#define LM3530_RAMP_TIME_8s		(7)</span>

<span class="cm">/* ALS Resistor Select */</span>
<span class="cp">#define LM3530_ALS_IMPD_Z		(0x00) </span><span class="cm">/* ALS Impedance */</span><span class="cp"></span>
<span class="cp">#define LM3530_ALS_IMPD_13_53kOhm	(0x01)</span>
<span class="cp">#define LM3530_ALS_IMPD_9_01kOhm	(0x02)</span>
<span class="cp">#define LM3530_ALS_IMPD_5_41kOhm	(0x03)</span>
<span class="cp">#define LM3530_ALS_IMPD_2_27kOhm	(0x04)</span>
<span class="cp">#define LM3530_ALS_IMPD_1_94kOhm	(0x05)</span>
<span class="cp">#define LM3530_ALS_IMPD_1_81kOhm	(0x06)</span>
<span class="cp">#define LM3530_ALS_IMPD_1_6kOhm		(0x07)</span>
<span class="cp">#define LM3530_ALS_IMPD_1_138kOhm	(0x08)</span>
<span class="cp">#define LM3530_ALS_IMPD_1_05kOhm	(0x09)</span>
<span class="cp">#define LM3530_ALS_IMPD_1_011kOhm	(0x0A)</span>
<span class="cp">#define LM3530_ALS_IMPD_941Ohm		(0x0B)</span>
<span class="cp">#define LM3530_ALS_IMPD_759Ohm		(0x0C)</span>
<span class="cp">#define LM3530_ALS_IMPD_719Ohm		(0x0D)</span>
<span class="cp">#define LM3530_ALS_IMPD_700Ohm		(0x0E)</span>
<span class="cp">#define LM3530_ALS_IMPD_667Ohm		(0x0F)</span>

<span class="k">enum</span> <span class="n">lm3530_mode</span> <span class="p">{</span>
	<span class="n">LM3530_BL_MODE_MANUAL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* &quot;man&quot; */</span>
	<span class="n">LM3530_BL_MODE_ALS</span><span class="p">,</span>		<span class="cm">/* &quot;als&quot; */</span>
	<span class="n">LM3530_BL_MODE_PWM</span><span class="p">,</span>		<span class="cm">/* &quot;pwm&quot; */</span>
<span class="p">};</span>

<span class="cm">/* ALS input select */</span>
<span class="k">enum</span> <span class="n">lm3530_als_mode</span> <span class="p">{</span>
	<span class="n">LM3530_INPUT_AVRG</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* ALS1 and ALS2 input average */</span>
	<span class="n">LM3530_INPUT_ALS1</span><span class="p">,</span>	<span class="cm">/* ALS1 Input */</span>
	<span class="n">LM3530_INPUT_ALS2</span><span class="p">,</span>	<span class="cm">/* ALS2 Input */</span>
	<span class="n">LM3530_INPUT_CEIL</span><span class="p">,</span>	<span class="cm">/* Max of ALS1 and ALS2 */</span>
<span class="p">};</span>

<span class="cm">/* PWM Platform Specific Data */</span>
<span class="k">struct</span> <span class="n">lm3530_pwm_data</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">pwm_set_intensity</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span> <span class="n">brightness</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_brightness</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">pwm_get_intensity</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span> <span class="n">max_brightness</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct lm3530_platform_data</span>
<span class="cm"> * @mode: mode of operation i.e. Manual, ALS or PWM</span>
<span class="cm"> * @als_input_mode: select source of ALS input - ALS1/2 or average</span>
<span class="cm"> * @max_current: full scale LED current</span>
<span class="cm"> * @pwm_pol_hi: PWM input polarity - active high/active low</span>
<span class="cm"> * @als_avrg_time: ALS input averaging time</span>
<span class="cm"> * @brt_ramp_law: brightness mapping mode - exponential/linear</span>
<span class="cm"> * @brt_ramp_fall: rate of fall of led current</span>
<span class="cm"> * @brt_ramp_rise: rate of rise of led current</span>
<span class="cm"> * @als1_resistor_sel: internal resistance from ALS1 input to ground</span>
<span class="cm"> * @als2_resistor_sel: internal resistance from ALS2 input to ground</span>
<span class="cm"> * @als_vmin: als input voltage calibrated for max brightness in mV</span>
<span class="cm"> * @als_vmax: als input voltage calibrated for min brightness in mV</span>
<span class="cm"> * @brt_val: brightness value (0-127)</span>
<span class="cm"> * @pwm_data: PWM control functions (only valid when the mode is PWM)</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">lm3530_platform_data</span> <span class="p">{</span>
	<span class="k">enum</span> <span class="n">lm3530_mode</span> <span class="n">mode</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">lm3530_als_mode</span> <span class="n">als_input_mode</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">max_current</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">pwm_pol_hi</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">als_avrg_time</span><span class="p">;</span>

	<span class="n">bool</span> <span class="n">brt_ramp_law</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">brt_ramp_fall</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">brt_ramp_rise</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">als1_resistor_sel</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">als2_resistor_sel</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">als_vmin</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">als_vmax</span><span class="p">;</span>

	<span class="n">u8</span> <span class="n">brt_val</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">lm3530_pwm_data</span> <span class="n">pwm_data</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif	</span><span class="cm">/* _LINUX_LED_LM3530_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
