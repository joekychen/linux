<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mISDNif.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>mISDNif.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *</span>
<span class="cm"> * Author	Karsten Keil &lt;kkeil@novell.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2008  by Karsten Keil &lt;kkeil@novell.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This code is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU LESSER GENERAL PUBLIC LICENSE</span>
<span class="cm"> * version 2.1 as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This code is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU LESSER GENERAL PUBLIC LICENSE for more details.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef mISDNIF_H</span>
<span class="cp">#define mISDNIF_H</span>

<span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/socket.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * ABI Version 32 bit</span>
<span class="cm"> *</span>
<span class="cm"> * &lt;8 bit&gt; Major version</span>
<span class="cm"> *		- changed if any interface become backwards incompatible</span>
<span class="cm"> *</span>
<span class="cm"> * &lt;8 bit&gt; Minor version</span>
<span class="cm"> *              - changed if any interface is extended but backwards compatible</span>
<span class="cm"> *</span>
<span class="cm"> * &lt;16 bit&gt; Release number</span>
<span class="cm"> *              - should be incremented on every checkin</span>
<span class="cm"> */</span>
<span class="cp">#define	MISDN_MAJOR_VERSION	1</span>
<span class="cp">#define	MISDN_MINOR_VERSION	1</span>
<span class="cp">#define MISDN_RELEASE		29</span>

<span class="cm">/* primitives for information exchange</span>
<span class="cm"> * generell format</span>
<span class="cm"> * &lt;16  bit  0 &gt;</span>
<span class="cm"> * &lt;8  bit command&gt;</span>
<span class="cm"> *    BIT 8 = 1 LAYER private</span>
<span class="cm"> *    BIT 7 = 1 answer</span>
<span class="cm"> *    BIT 6 = 1 DATA</span>
<span class="cm"> * &lt;8  bit target layer mask&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Layer = 00 is reserved for general commands</span>
<span class="cm">   Layer = 01  L2 -&gt; HW</span>
<span class="cm">   Layer = 02  HW -&gt; L2</span>
<span class="cm">   Layer = 04  L3 -&gt; L2</span>
<span class="cm">   Layer = 08  L2 -&gt; L3</span>
<span class="cm"> * Layer = FF is reserved for broadcast commands</span>
<span class="cm"> */</span>

<span class="cp">#define MISDN_CMDMASK		0xff00</span>
<span class="cp">#define MISDN_LAYERMASK		0x00ff</span>

<span class="cm">/* generell commands */</span>
<span class="cp">#define OPEN_CHANNEL		0x0100</span>
<span class="cp">#define CLOSE_CHANNEL		0x0200</span>
<span class="cp">#define CONTROL_CHANNEL		0x0300</span>
<span class="cp">#define CHECK_DATA		0x0400</span>

<span class="cm">/* layer 2 -&gt; layer 1 */</span>
<span class="cp">#define PH_ACTIVATE_REQ		0x0101</span>
<span class="cp">#define PH_DEACTIVATE_REQ	0x0201</span>
<span class="cp">#define PH_DATA_REQ		0x2001</span>
<span class="cp">#define MPH_ACTIVATE_REQ	0x0501</span>
<span class="cp">#define MPH_DEACTIVATE_REQ	0x0601</span>
<span class="cp">#define MPH_INFORMATION_REQ	0x0701</span>
<span class="cp">#define PH_CONTROL_REQ		0x0801</span>

<span class="cm">/* layer 1 -&gt; layer 2 */</span>
<span class="cp">#define PH_ACTIVATE_IND		0x0102</span>
<span class="cp">#define PH_ACTIVATE_CNF		0x4102</span>
<span class="cp">#define PH_DEACTIVATE_IND	0x0202</span>
<span class="cp">#define PH_DEACTIVATE_CNF	0x4202</span>
<span class="cp">#define PH_DATA_IND		0x2002</span>
<span class="cp">#define PH_DATA_E_IND		0x3002</span>
<span class="cp">#define MPH_ACTIVATE_IND	0x0502</span>
<span class="cp">#define MPH_DEACTIVATE_IND	0x0602</span>
<span class="cp">#define MPH_INFORMATION_IND	0x0702</span>
<span class="cp">#define PH_DATA_CNF		0x6002</span>
<span class="cp">#define PH_CONTROL_IND		0x0802</span>
<span class="cp">#define PH_CONTROL_CNF		0x4802</span>

<span class="cm">/* layer 3 -&gt; layer 2 */</span>
<span class="cp">#define DL_ESTABLISH_REQ	0x1004</span>
<span class="cp">#define DL_RELEASE_REQ		0x1104</span>
<span class="cp">#define DL_DATA_REQ		0x3004</span>
<span class="cp">#define DL_UNITDATA_REQ		0x3104</span>
<span class="cp">#define DL_INFORMATION_REQ	0x0004</span>

<span class="cm">/* layer 2 -&gt; layer 3 */</span>
<span class="cp">#define DL_ESTABLISH_IND	0x1008</span>
<span class="cp">#define DL_ESTABLISH_CNF	0x5008</span>
<span class="cp">#define DL_RELEASE_IND		0x1108</span>
<span class="cp">#define DL_RELEASE_CNF		0x5108</span>
<span class="cp">#define DL_DATA_IND		0x3008</span>
<span class="cp">#define DL_UNITDATA_IND		0x3108</span>
<span class="cp">#define DL_INFORMATION_IND	0x0008</span>

<span class="cm">/* intern layer 2 management */</span>
<span class="cp">#define MDL_ASSIGN_REQ		0x1804</span>
<span class="cp">#define MDL_ASSIGN_IND		0x1904</span>
<span class="cp">#define MDL_REMOVE_REQ		0x1A04</span>
<span class="cp">#define MDL_REMOVE_IND		0x1B04</span>
<span class="cp">#define MDL_STATUS_UP_IND	0x1C04</span>
<span class="cp">#define MDL_STATUS_DOWN_IND	0x1D04</span>
<span class="cp">#define MDL_STATUS_UI_IND	0x1E04</span>
<span class="cp">#define MDL_ERROR_IND		0x1F04</span>
<span class="cp">#define MDL_ERROR_RSP		0x5F04</span>

<span class="cm">/* intern layer 2 */</span>
<span class="cp">#define DL_TIMER200_IND		0x7004</span>
<span class="cp">#define DL_TIMER203_IND		0x7304</span>
<span class="cp">#define DL_INTERN_MSG		0x7804</span>

<span class="cm">/* DL_INFORMATION_IND types */</span>
<span class="cp">#define DL_INFO_L2_CONNECT	0x0001</span>
<span class="cp">#define DL_INFO_L2_REMOVED	0x0002</span>

<span class="cm">/* PH_CONTROL types */</span>
<span class="cm">/* TOUCH TONE IS 0x20XX  XX &quot;0&quot;...&quot;9&quot;, &quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;*&quot;,&quot;#&quot; */</span>
<span class="cp">#define DTMF_TONE_VAL		0x2000</span>
<span class="cp">#define DTMF_TONE_MASK		0x007F</span>
<span class="cp">#define DTMF_TONE_START		0x2100</span>
<span class="cp">#define DTMF_TONE_STOP		0x2200</span>
<span class="cp">#define DTMF_HFC_COEF		0x4000</span>
<span class="cp">#define DSP_CONF_JOIN		0x2403</span>
<span class="cp">#define DSP_CONF_SPLIT		0x2404</span>
<span class="cp">#define DSP_RECEIVE_OFF		0x2405</span>
<span class="cp">#define DSP_RECEIVE_ON		0x2406</span>
<span class="cp">#define DSP_ECHO_ON		0x2407</span>
<span class="cp">#define DSP_ECHO_OFF		0x2408</span>
<span class="cp">#define DSP_MIX_ON		0x2409</span>
<span class="cp">#define DSP_MIX_OFF		0x240a</span>
<span class="cp">#define DSP_DELAY		0x240b</span>
<span class="cp">#define DSP_JITTER		0x240c</span>
<span class="cp">#define DSP_TXDATA_ON		0x240d</span>
<span class="cp">#define DSP_TXDATA_OFF		0x240e</span>
<span class="cp">#define DSP_TX_DEJITTER		0x240f</span>
<span class="cp">#define DSP_TX_DEJ_OFF		0x2410</span>
<span class="cp">#define DSP_TONE_PATT_ON	0x2411</span>
<span class="cp">#define DSP_TONE_PATT_OFF	0x2412</span>
<span class="cp">#define DSP_VOL_CHANGE_TX	0x2413</span>
<span class="cp">#define DSP_VOL_CHANGE_RX	0x2414</span>
<span class="cp">#define DSP_BF_ENABLE_KEY	0x2415</span>
<span class="cp">#define DSP_BF_DISABLE		0x2416</span>
<span class="cp">#define DSP_BF_ACCEPT		0x2416</span>
<span class="cp">#define DSP_BF_REJECT		0x2417</span>
<span class="cp">#define DSP_PIPELINE_CFG	0x2418</span>
<span class="cp">#define HFC_VOL_CHANGE_TX	0x2601</span>
<span class="cp">#define HFC_VOL_CHANGE_RX	0x2602</span>
<span class="cp">#define HFC_SPL_LOOP_ON		0x2603</span>
<span class="cp">#define HFC_SPL_LOOP_OFF	0x2604</span>
<span class="cm">/* for T30 FAX and analog modem */</span>
<span class="cp">#define HW_MOD_FRM		0x4000</span>
<span class="cp">#define HW_MOD_FRH		0x4001</span>
<span class="cp">#define HW_MOD_FTM		0x4002</span>
<span class="cp">#define HW_MOD_FTH		0x4003</span>
<span class="cp">#define HW_MOD_FTS		0x4004</span>
<span class="cp">#define HW_MOD_CONNECT		0x4010</span>
<span class="cp">#define HW_MOD_OK		0x4011</span>
<span class="cp">#define HW_MOD_NOCARR		0x4012</span>
<span class="cp">#define HW_MOD_FCERROR		0x4013</span>
<span class="cp">#define HW_MOD_READY		0x4014</span>
<span class="cp">#define HW_MOD_LASTDATA		0x4015</span>

<span class="cm">/* DSP_TONE_PATT_ON parameter */</span>
<span class="cp">#define TONE_OFF			0x0000</span>
<span class="cp">#define TONE_GERMAN_DIALTONE		0x0001</span>
<span class="cp">#define TONE_GERMAN_OLDDIALTONE		0x0002</span>
<span class="cp">#define TONE_AMERICAN_DIALTONE		0x0003</span>
<span class="cp">#define TONE_GERMAN_DIALPBX		0x0004</span>
<span class="cp">#define TONE_GERMAN_OLDDIALPBX		0x0005</span>
<span class="cp">#define TONE_AMERICAN_DIALPBX		0x0006</span>
<span class="cp">#define TONE_GERMAN_RINGING		0x0007</span>
<span class="cp">#define TONE_GERMAN_OLDRINGING		0x0008</span>
<span class="cp">#define TONE_AMERICAN_RINGPBX		0x000b</span>
<span class="cp">#define TONE_GERMAN_RINGPBX		0x000c</span>
<span class="cp">#define TONE_GERMAN_OLDRINGPBX		0x000d</span>
<span class="cp">#define TONE_AMERICAN_RINGING		0x000e</span>
<span class="cp">#define TONE_GERMAN_BUSY		0x000f</span>
<span class="cp">#define TONE_GERMAN_OLDBUSY		0x0010</span>
<span class="cp">#define TONE_AMERICAN_BUSY		0x0011</span>
<span class="cp">#define TONE_GERMAN_HANGUP		0x0012</span>
<span class="cp">#define TONE_GERMAN_OLDHANGUP		0x0013</span>
<span class="cp">#define TONE_AMERICAN_HANGUP		0x0014</span>
<span class="cp">#define TONE_SPECIAL_INFO		0x0015</span>
<span class="cp">#define TONE_GERMAN_GASSENBESETZT	0x0016</span>
<span class="cp">#define TONE_GERMAN_AUFSCHALTTON	0x0016</span>

<span class="cm">/* MPH_INFORMATION_IND */</span>
<span class="cp">#define L1_SIGNAL_LOS_OFF	0x0010</span>
<span class="cp">#define L1_SIGNAL_LOS_ON	0x0011</span>
<span class="cp">#define L1_SIGNAL_AIS_OFF	0x0012</span>
<span class="cp">#define L1_SIGNAL_AIS_ON	0x0013</span>
<span class="cp">#define L1_SIGNAL_RDI_OFF	0x0014</span>
<span class="cp">#define L1_SIGNAL_RDI_ON	0x0015</span>
<span class="cp">#define L1_SIGNAL_SLIP_RX	0x0020</span>
<span class="cp">#define L1_SIGNAL_SLIP_TX	0x0021</span>

<span class="cm">/*</span>
<span class="cm"> * protocol ids</span>
<span class="cm"> * D channel 1-31</span>
<span class="cm"> * B channel 33 - 63</span>
<span class="cm"> */</span>

<span class="cp">#define ISDN_P_NONE		0</span>
<span class="cp">#define ISDN_P_BASE		0</span>
<span class="cp">#define ISDN_P_TE_S0		0x01</span>
<span class="cp">#define ISDN_P_NT_S0  		0x02</span>
<span class="cp">#define ISDN_P_TE_E1		0x03</span>
<span class="cp">#define ISDN_P_NT_E1  		0x04</span>
<span class="cp">#define ISDN_P_TE_UP0		0x05</span>
<span class="cp">#define ISDN_P_NT_UP0		0x06</span>

<span class="cp">#define IS_ISDN_P_TE(p) ((p == ISDN_P_TE_S0) || (p == ISDN_P_TE_E1) || \</span>
<span class="cp">				(p == ISDN_P_TE_UP0) || (p == ISDN_P_LAPD_TE))</span>
<span class="cp">#define IS_ISDN_P_NT(p) ((p == ISDN_P_NT_S0) || (p == ISDN_P_NT_E1) || \</span>
<span class="cp">				(p == ISDN_P_NT_UP0) || (p == ISDN_P_LAPD_NT))</span>
<span class="cp">#define IS_ISDN_P_S0(p) ((p == ISDN_P_TE_S0) || (p == ISDN_P_NT_S0))</span>
<span class="cp">#define IS_ISDN_P_E1(p) ((p == ISDN_P_TE_E1) || (p == ISDN_P_NT_E1))</span>
<span class="cp">#define IS_ISDN_P_UP0(p) ((p == ISDN_P_TE_UP0) || (p == ISDN_P_NT_UP0))</span>


<span class="cp">#define ISDN_P_LAPD_TE		0x10</span>
<span class="cp">#define	ISDN_P_LAPD_NT		0x11</span>

<span class="cp">#define ISDN_P_B_MASK		0x1f</span>
<span class="cp">#define ISDN_P_B_START		0x20</span>

<span class="cp">#define ISDN_P_B_RAW		0x21</span>
<span class="cp">#define ISDN_P_B_HDLC		0x22</span>
<span class="cp">#define ISDN_P_B_X75SLP		0x23</span>
<span class="cp">#define ISDN_P_B_L2DTMF		0x24</span>
<span class="cp">#define ISDN_P_B_L2DSP		0x25</span>
<span class="cp">#define ISDN_P_B_L2DSPHDLC	0x26</span>
<span class="cp">#define ISDN_P_B_T30_FAX	0x27</span>
<span class="cp">#define ISDN_P_B_MODEM_ASYNC	0x28</span>

<span class="cp">#define OPTION_L2_PMX		1</span>
<span class="cp">#define OPTION_L2_PTP		2</span>
<span class="cp">#define OPTION_L2_FIXEDTEI	3</span>
<span class="cp">#define OPTION_L2_CLEANUP	4</span>
<span class="cp">#define OPTION_L1_HOLD		5</span>

<span class="cm">/* should be in sync with linux/kobject.h:KOBJ_NAME_LEN */</span>
<span class="cp">#define MISDN_MAX_IDLEN		20</span>

<span class="k">struct</span> <span class="n">mISDNhead</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">prim</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">id</span><span class="p">;</span>
<span class="p">}</span>  <span class="n">__packed</span><span class="p">;</span>

<span class="cp">#define MISDN_HEADER_LEN	sizeof(struct mISDNhead)</span>
<span class="cp">#define MAX_DATA_SIZE		2048</span>
<span class="cp">#define MAX_DATA_MEM		(MAX_DATA_SIZE + MISDN_HEADER_LEN)</span>
<span class="cp">#define MAX_DFRAME_LEN		260</span>

<span class="cp">#define MISDN_ID_ADDR_MASK	0xFFFF</span>
<span class="cp">#define MISDN_ID_TEI_MASK	0xFF00</span>
<span class="cp">#define MISDN_ID_SAPI_MASK	0x00FF</span>
<span class="cp">#define MISDN_ID_TEI_ANY	0x7F00</span>

<span class="cp">#define MISDN_ID_ANY		0xFFFF</span>
<span class="cp">#define MISDN_ID_NONE		0xFFFE</span>

<span class="cp">#define GROUP_TEI		127</span>
<span class="cp">#define TEI_SAPI		63</span>
<span class="cp">#define CTRL_SAPI		0</span>

<span class="cp">#define MISDN_MAX_CHANNEL	127</span>
<span class="cp">#define MISDN_CHMAP_SIZE	((MISDN_MAX_CHANNEL + 1) &gt;&gt; 3)</span>

<span class="cp">#define SOL_MISDN	0</span>

<span class="k">struct</span> <span class="n">sockaddr_mISDN</span> <span class="p">{</span>
	<span class="n">sa_family_t</span>    <span class="n">family</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">channel</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">sapi</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">tei</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDNversion</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">major</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>	<span class="n">minor</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>	<span class="n">release</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDN_devinfo</span> <span class="p">{</span>
	<span class="n">u_int</span>			<span class="n">id</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">Dprotocols</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">Bprotocols</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">protocol</span><span class="p">;</span>
	<span class="n">u_char</span>			<span class="n">channelmap</span><span class="p">[</span><span class="n">MISDN_CHMAP_SIZE</span><span class="p">];</span>
	<span class="n">u_int</span>			<span class="n">nrbchan</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="n">name</span><span class="p">[</span><span class="n">MISDN_MAX_IDLEN</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDN_devrename</span> <span class="p">{</span>
	<span class="n">u_int</span>			<span class="n">id</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="n">name</span><span class="p">[</span><span class="n">MISDN_MAX_IDLEN</span><span class="p">];</span> <span class="cm">/* new name */</span>
<span class="p">};</span>

<span class="cm">/* MPH_INFORMATION_REQ payload */</span>
<span class="k">struct</span> <span class="n">ph_info_ch</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">protocol</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">Flags</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ph_info_dch</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ph_info_ch</span> <span class="n">ch</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">state</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">num_bch</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ph_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ph_info_dch</span> <span class="n">dch</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ph_info_ch</span>  <span class="n">bch</span><span class="p">[];</span>
<span class="p">};</span>

<span class="cm">/* timer device ioctl */</span>
<span class="cp">#define IMADDTIMER	_IOR(&#39;I&#39;, 64, int)</span>
<span class="cp">#define IMDELTIMER	_IOR(&#39;I&#39;, 65, int)</span>

<span class="cm">/* socket ioctls */</span>
<span class="cp">#define	IMGETVERSION	_IOR(&#39;I&#39;, 66, int)</span>
<span class="cp">#define	IMGETCOUNT	_IOR(&#39;I&#39;, 67, int)</span>
<span class="cp">#define IMGETDEVINFO	_IOR(&#39;I&#39;, 68, int)</span>
<span class="cp">#define IMCTRLREQ	_IOR(&#39;I&#39;, 69, int)</span>
<span class="cp">#define IMCLEAR_L2	_IOR(&#39;I&#39;, 70, int)</span>
<span class="cp">#define IMSETDEVNAME	_IOR(&#39;I&#39;, 71, struct mISDN_devrename)</span>
<span class="cp">#define IMHOLD_L1	_IOR(&#39;I&#39;, 72, int)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span>
<span class="nf">test_channelmap</span><span class="p">(</span><span class="n">u_int</span> <span class="n">nr</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="n">map</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">nr</span> <span class="o">&lt;=</span> <span class="n">MISDN_MAX_CHANNEL</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">map</span><span class="p">[</span><span class="n">nr</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">nr</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">));</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">set_channelmap</span><span class="p">(</span><span class="n">u_int</span> <span class="n">nr</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="n">map</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">map</span><span class="p">[</span><span class="n">nr</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">]</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">nr</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">clear_channelmap</span><span class="p">(</span><span class="n">u_int</span> <span class="n">nr</span><span class="p">,</span> <span class="n">u_char</span> <span class="o">*</span><span class="n">map</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">map</span><span class="p">[</span><span class="n">nr</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">nr</span> <span class="o">&amp;</span> <span class="mi">7</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* CONTROL_CHANNEL parameters */</span>
<span class="cp">#define MISDN_CTRL_GETOP		0x0000</span>
<span class="cp">#define MISDN_CTRL_LOOP			0x0001</span>
<span class="cp">#define MISDN_CTRL_CONNECT		0x0002</span>
<span class="cp">#define MISDN_CTRL_DISCONNECT		0x0004</span>
<span class="cp">#define MISDN_CTRL_RX_BUFFER		0x0008</span>
<span class="cp">#define MISDN_CTRL_PCMCONNECT		0x0010</span>
<span class="cp">#define MISDN_CTRL_PCMDISCONNECT	0x0020</span>
<span class="cp">#define MISDN_CTRL_SETPEER		0x0040</span>
<span class="cp">#define MISDN_CTRL_UNSETPEER		0x0080</span>
<span class="cp">#define MISDN_CTRL_RX_OFF		0x0100</span>
<span class="cp">#define MISDN_CTRL_FILL_EMPTY		0x0200</span>
<span class="cp">#define MISDN_CTRL_GETPEER		0x0400</span>
<span class="cp">#define MISDN_CTRL_L1_TIMER3		0x0800</span>
<span class="cp">#define MISDN_CTRL_HW_FEATURES_OP	0x2000</span>
<span class="cp">#define MISDN_CTRL_HW_FEATURES		0x2001</span>
<span class="cp">#define MISDN_CTRL_HFC_OP		0x4000</span>
<span class="cp">#define MISDN_CTRL_HFC_PCM_CONN		0x4001</span>
<span class="cp">#define MISDN_CTRL_HFC_PCM_DISC		0x4002</span>
<span class="cp">#define MISDN_CTRL_HFC_CONF_JOIN	0x4003</span>
<span class="cp">#define MISDN_CTRL_HFC_CONF_SPLIT	0x4004</span>
<span class="cp">#define MISDN_CTRL_HFC_RECEIVE_OFF	0x4005</span>
<span class="cp">#define MISDN_CTRL_HFC_RECEIVE_ON	0x4006</span>
<span class="cp">#define MISDN_CTRL_HFC_ECHOCAN_ON 	0x4007</span>
<span class="cp">#define MISDN_CTRL_HFC_ECHOCAN_OFF 	0x4008</span>
<span class="cp">#define MISDN_CTRL_HFC_WD_INIT		0x4009</span>
<span class="cp">#define MISDN_CTRL_HFC_WD_RESET		0x400A</span>

<span class="cm">/* special RX buffer value for MISDN_CTRL_RX_BUFFER request.p1 is the minimum</span>
<span class="cm"> * buffer size request.p2 the maximum. Using  MISDN_CTRL_RX_SIZE_IGNORE will</span>
<span class="cm"> * not change the value, but still read back the actual stetting.</span>
<span class="cm"> */</span>
<span class="cp">#define MISDN_CTRL_RX_SIZE_IGNORE	-1</span>

<span class="cm">/* socket options */</span>
<span class="cp">#define MISDN_TIME_STAMP		0x0001</span>

<span class="k">struct</span> <span class="n">mISDN_ctrl_req</span> <span class="p">{</span>
	<span class="kt">int</span>		<span class="n">op</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">channel</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">p1</span><span class="p">;</span>
	<span class="kt">int</span>		<span class="n">p2</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* muxer options */</span>
<span class="cp">#define MISDN_OPT_ALL		1</span>
<span class="cp">#define MISDN_OPT_TEIMGR	2</span>

<span class="cp">#ifdef __KERNEL__</span>
<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/skbuff.h&gt;</span>
<span class="cp">#include &lt;linux/net.h&gt;</span>
<span class="cp">#include &lt;net/sock.h&gt;</span>
<span class="cp">#include &lt;linux/completion.h&gt;</span>

<span class="cp">#define DEBUG_CORE		0x000000ff</span>
<span class="cp">#define DEBUG_CORE_FUNC		0x00000002</span>
<span class="cp">#define DEBUG_SOCKET		0x00000004</span>
<span class="cp">#define DEBUG_MANAGER		0x00000008</span>
<span class="cp">#define DEBUG_SEND_ERR		0x00000010</span>
<span class="cp">#define DEBUG_MSG_THREAD	0x00000020</span>
<span class="cp">#define DEBUG_QUEUE_FUNC	0x00000040</span>
<span class="cp">#define DEBUG_L1		0x0000ff00</span>
<span class="cp">#define DEBUG_L1_FSM		0x00000200</span>
<span class="cp">#define DEBUG_L2		0x00ff0000</span>
<span class="cp">#define DEBUG_L2_FSM		0x00020000</span>
<span class="cp">#define DEBUG_L2_CTRL		0x00040000</span>
<span class="cp">#define DEBUG_L2_RECV		0x00080000</span>
<span class="cp">#define DEBUG_L2_TEI		0x00100000</span>
<span class="cp">#define DEBUG_L2_TEIFSM		0x00200000</span>
<span class="cp">#define DEBUG_TIMER		0x01000000</span>
<span class="cp">#define DEBUG_CLOCK		0x02000000</span>

<span class="cp">#define mISDN_HEAD_P(s)		((struct mISDNhead *)&amp;s-&gt;cb[0])</span>
<span class="cp">#define mISDN_HEAD_PRIM(s)	(((struct mISDNhead *)&amp;s-&gt;cb[0])-&gt;prim)</span>
<span class="cp">#define mISDN_HEAD_ID(s)	(((struct mISDNhead *)&amp;s-&gt;cb[0])-&gt;id)</span>

<span class="cm">/* socket states */</span>
<span class="cp">#define MISDN_OPEN	1</span>
<span class="cp">#define MISDN_BOUND	2</span>
<span class="cp">#define MISDN_CLOSED	3</span>

<span class="k">struct</span> <span class="n">mISDNchannel</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">mISDNdevice</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">mISDNstack</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">mISDNclock</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">channel_req</span> <span class="p">{</span>
	<span class="n">u_int</span>			<span class="n">protocol</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sockaddr_mISDN</span>	<span class="n">adr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="o">*</span><span class="n">ch</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span>	<span class="kt">int</span>	<span class="p">(</span><span class="n">ctrl_func_t</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mISDNchannel</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">typedef</span>	<span class="kt">int</span>	<span class="p">(</span><span class="n">send_func_t</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mISDNchannel</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">typedef</span> <span class="kt">int</span>	<span class="p">(</span><span class="n">create_func_t</span><span class="p">)(</span><span class="k">struct</span> <span class="n">channel_req</span> <span class="o">*</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">Bprotocol</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">list</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">Bprotocols</span><span class="p">;</span>
	<span class="n">create_func_t</span>		<span class="o">*</span><span class="n">create</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDNchannel</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">list</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">protocol</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">nr</span><span class="p">;</span>
	<span class="n">u_long</span>			<span class="n">opt</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNstack</span>	<span class="o">*</span><span class="n">st</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="o">*</span><span class="n">peer</span><span class="p">;</span>
	<span class="n">send_func_t</span>		<span class="o">*</span><span class="n">send</span><span class="p">;</span>
	<span class="n">send_func_t</span>		<span class="o">*</span><span class="n">recv</span><span class="p">;</span>
	<span class="n">ctrl_func_t</span>		<span class="o">*</span><span class="n">ctrl</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDN_sock_list</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_head</span>	<span class="n">head</span><span class="p">;</span>
	<span class="n">rwlock_t</span>		<span class="n">lock</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDN_sock</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sock</span>		<span class="n">sk</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="n">ch</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">cmask</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNdevice</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
<span class="p">};</span>



<span class="k">struct</span> <span class="n">mISDNdevice</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="n">D</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">id</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">Dprotocols</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">Bprotocols</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">nrbchan</span><span class="p">;</span>
	<span class="n">u_char</span>			<span class="n">channelmap</span><span class="p">[</span><span class="n">MISDN_CHMAP_SIZE</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">bchannels</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="o">*</span><span class="n">teimgr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">device</span>		<span class="n">dev</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mISDNstack</span> <span class="p">{</span>
	<span class="n">u_long</span>			<span class="n">status</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNdevice</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">task_struct</span>	<span class="o">*</span><span class="kr">thread</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">completion</span>	<span class="o">*</span><span class="n">notify</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">workq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">msgq</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">layer2</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="o">*</span><span class="n">layer1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mISDNchannel</span>	<span class="n">own</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">mutex</span>		<span class="n">lmutex</span><span class="p">;</span> <span class="cm">/* protect lists */</span>
	<span class="k">struct</span> <span class="n">mISDN_sock_list</span>	<span class="n">l1sock</span><span class="p">;</span>
<span class="cp">#ifdef MISDN_MSG_STATS</span>
	<span class="n">u_int</span>			<span class="n">msg_cnt</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">sleep_cnt</span><span class="p">;</span>
	<span class="n">u_int</span>			<span class="n">stopped_cnt</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">typedef</span>	<span class="kt">int</span>	<span class="p">(</span><span class="n">clockctl_func_t</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">struct</span>	<span class="n">mISDNclock</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">list</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="n">name</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="kt">int</span>			<span class="n">pri</span><span class="p">;</span>
	<span class="n">clockctl_func_t</span>		<span class="o">*</span><span class="n">ctl</span><span class="p">;</span>
	<span class="kt">void</span>			<span class="o">*</span><span class="n">priv</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* global alloc/queue functions */</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span>
<span class="nf">mI_alloc_skb</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">gfp_mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>	<span class="o">*</span><span class="n">skb</span><span class="p">;</span>

	<span class="n">skb</span> <span class="o">=</span> <span class="n">alloc_skb</span><span class="p">(</span><span class="n">len</span> <span class="o">+</span> <span class="n">MISDN_HEADER_LEN</span><span class="p">,</span> <span class="n">gfp_mask</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">likely</span><span class="p">(</span><span class="n">skb</span><span class="p">))</span>
		<span class="n">skb_reserve</span><span class="p">(</span><span class="n">skb</span><span class="p">,</span> <span class="n">MISDN_HEADER_LEN</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">skb</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span>
<span class="nf">_alloc_mISDN_skb</span><span class="p">(</span><span class="n">u_int</span> <span class="n">prim</span><span class="p">,</span> <span class="n">u_int</span> <span class="n">id</span><span class="p">,</span> <span class="n">u_int</span> <span class="n">len</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">dp</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">gfp_mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>	<span class="o">*</span><span class="n">skb</span> <span class="o">=</span> <span class="n">mI_alloc_skb</span><span class="p">(</span><span class="n">len</span><span class="p">,</span> <span class="n">gfp_mask</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">mISDNhead</span> <span class="o">*</span><span class="n">hh</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">skb</span><span class="p">)</span>
		<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">len</span><span class="p">)</span>
		<span class="n">memcpy</span><span class="p">(</span><span class="n">skb_put</span><span class="p">(</span><span class="n">skb</span><span class="p">,</span> <span class="n">len</span><span class="p">),</span> <span class="n">dp</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
	<span class="n">hh</span> <span class="o">=</span> <span class="n">mISDN_HEAD_P</span><span class="p">(</span><span class="n">skb</span><span class="p">);</span>
	<span class="n">hh</span><span class="o">-&gt;</span><span class="n">prim</span> <span class="o">=</span> <span class="n">prim</span><span class="p">;</span>
	<span class="n">hh</span><span class="o">-&gt;</span><span class="n">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">skb</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">_queue_data</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNchannel</span> <span class="o">*</span><span class="n">ch</span><span class="p">,</span> <span class="n">u_int</span> <span class="n">prim</span><span class="p">,</span>
    <span class="n">u_int</span> <span class="n">id</span><span class="p">,</span> <span class="n">u_int</span> <span class="n">len</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">dp</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">gfp_mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">sk_buff</span>		<span class="o">*</span><span class="n">skb</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ch</span><span class="o">-&gt;</span><span class="n">peer</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="n">skb</span> <span class="o">=</span> <span class="n">_alloc_mISDN_skb</span><span class="p">(</span><span class="n">prim</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">dp</span><span class="p">,</span> <span class="n">gfp_mask</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">skb</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ch</span><span class="o">-&gt;</span><span class="n">recv</span><span class="p">(</span><span class="n">ch</span><span class="o">-&gt;</span><span class="n">peer</span><span class="p">,</span> <span class="n">skb</span><span class="p">))</span>
		<span class="n">dev_kfree_skb</span><span class="p">(</span><span class="n">skb</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* global register/unregister functions */</span>

<span class="k">extern</span> <span class="kt">int</span>	<span class="n">mISDN_register_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNdevice</span> <span class="o">*</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span>	<span class="n">mISDN_unregister_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNdevice</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>	<span class="n">mISDN_register_Bprotocol</span><span class="p">(</span><span class="k">struct</span> <span class="n">Bprotocol</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span>	<span class="n">mISDN_unregister_Bprotocol</span><span class="p">(</span><span class="k">struct</span> <span class="n">Bprotocol</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mISDNclock</span> <span class="o">*</span><span class="n">mISDN_register_clock</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">clockctl_func_t</span> <span class="o">*</span><span class="p">,</span>
						<span class="kt">void</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span>	<span class="n">mISDN_unregister_clock</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNclock</span> <span class="o">*</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">mISDNdevice</span> <span class="o">*</span><span class="nf">dev_to_mISDN</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">dev</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">dev_get_drvdata</span><span class="p">(</span><span class="n">dev</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">void</span>	<span class="n">set_channel_address</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNchannel</span> <span class="o">*</span><span class="p">,</span> <span class="n">u_int</span><span class="p">,</span> <span class="n">u_int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span>	<span class="n">mISDN_clock_update</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNclock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">timeval</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">mISDN_clock_get</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">mISDNDevName4ch</span><span class="p">(</span><span class="k">struct</span> <span class="n">mISDNchannel</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* mISDNIF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
