<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › lp855x.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>lp855x.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * LP855x Backlight Driver</span>
<span class="cm"> *</span>
<span class="cm"> *			Copyright (C) 2011 Texas Instruments</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _LP855X_H</span>
<span class="cp">#define _LP855X_H</span>

<span class="cp">#define BL_CTL_SHFT	(0)</span>
<span class="cp">#define BRT_MODE_SHFT	(1)</span>
<span class="cp">#define BRT_MODE_MASK	(0x06)</span>

<span class="cm">/* Enable backlight. Only valid when BRT_MODE=10(I2C only) */</span>
<span class="cp">#define ENABLE_BL	(1)</span>
<span class="cp">#define DISABLE_BL	(0)</span>

<span class="cp">#define I2C_CONFIG(id)	id ## _I2C_CONFIG</span>
<span class="cp">#define PWM_CONFIG(id)	id ## _PWM_CONFIG</span>

<span class="cm">/* DEVICE CONTROL register - LP8550 */</span>
<span class="cp">#define LP8550_PWM_CONFIG	(LP8550_PWM_ONLY &lt;&lt; BRT_MODE_SHFT)</span>
<span class="cp">#define LP8550_I2C_CONFIG	((ENABLE_BL &lt;&lt; BL_CTL_SHFT) | \</span>
<span class="cp">				(LP8550_I2C_ONLY &lt;&lt; BRT_MODE_SHFT))</span>

<span class="cm">/* DEVICE CONTROL register - LP8551 */</span>
<span class="cp">#define LP8551_PWM_CONFIG	LP8550_PWM_CONFIG</span>
<span class="cp">#define LP8551_I2C_CONFIG	LP8550_I2C_CONFIG</span>

<span class="cm">/* DEVICE CONTROL register - LP8552 */</span>
<span class="cp">#define LP8552_PWM_CONFIG	LP8550_PWM_CONFIG</span>
<span class="cp">#define LP8552_I2C_CONFIG	LP8550_I2C_CONFIG</span>

<span class="cm">/* DEVICE CONTROL register - LP8553 */</span>
<span class="cp">#define LP8553_PWM_CONFIG	LP8550_PWM_CONFIG</span>
<span class="cp">#define LP8553_I2C_CONFIG	LP8550_I2C_CONFIG</span>

<span class="cm">/* DEVICE CONTROL register - LP8556 */</span>
<span class="cp">#define LP8556_PWM_CONFIG	(LP8556_PWM_ONLY &lt;&lt; BRT_MODE_SHFT)</span>
<span class="cp">#define LP8556_COMB1_CONFIG	(LP8556_COMBINED1 &lt;&lt; BRT_MODE_SHFT)</span>
<span class="cp">#define LP8556_I2C_CONFIG	((ENABLE_BL &lt;&lt; BL_CTL_SHFT) | \</span>
<span class="cp">				(LP8556_I2C_ONLY &lt;&lt; BRT_MODE_SHFT))</span>
<span class="cp">#define LP8556_COMB2_CONFIG	(LP8556_COMBINED2 &lt;&lt; BRT_MODE_SHFT)</span>

<span class="cm">/* ROM area boundary */</span>
<span class="cp">#define EEPROM_START	(0xA0)</span>
<span class="cp">#define EEPROM_END	(0xA7)</span>
<span class="cp">#define EPROM_START	(0xA0)</span>
<span class="cp">#define EPROM_END	(0xAF)</span>

<span class="k">enum</span> <span class="n">lp855x_chip_id</span> <span class="p">{</span>
	<span class="n">LP8550</span><span class="p">,</span>
	<span class="n">LP8551</span><span class="p">,</span>
	<span class="n">LP8552</span><span class="p">,</span>
	<span class="n">LP8553</span><span class="p">,</span>
	<span class="n">LP8556</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">lp855x_brightness_ctrl_mode</span> <span class="p">{</span>
	<span class="n">PWM_BASED</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">REGISTER_BASED</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">lp8550_brighntess_source</span> <span class="p">{</span>
	<span class="n">LP8550_PWM_ONLY</span><span class="p">,</span>
	<span class="n">LP8550_I2C_ONLY</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">lp8551_brighntess_source</span> <span class="p">{</span>
	<span class="n">LP8551_PWM_ONLY</span> <span class="o">=</span> <span class="n">LP8550_PWM_ONLY</span><span class="p">,</span>
	<span class="n">LP8551_I2C_ONLY</span> <span class="o">=</span> <span class="n">LP8550_I2C_ONLY</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">lp8552_brighntess_source</span> <span class="p">{</span>
	<span class="n">LP8552_PWM_ONLY</span> <span class="o">=</span> <span class="n">LP8550_PWM_ONLY</span><span class="p">,</span>
	<span class="n">LP8552_I2C_ONLY</span> <span class="o">=</span> <span class="n">LP8550_I2C_ONLY</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">lp8553_brighntess_source</span> <span class="p">{</span>
	<span class="n">LP8553_PWM_ONLY</span> <span class="o">=</span> <span class="n">LP8550_PWM_ONLY</span><span class="p">,</span>
	<span class="n">LP8553_I2C_ONLY</span> <span class="o">=</span> <span class="n">LP8550_I2C_ONLY</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">lp8556_brightness_source</span> <span class="p">{</span>
	<span class="n">LP8556_PWM_ONLY</span><span class="p">,</span>
	<span class="n">LP8556_COMBINED1</span><span class="p">,</span>	<span class="cm">/* pwm + i2c before the shaper block */</span>
	<span class="n">LP8556_I2C_ONLY</span><span class="p">,</span>
	<span class="n">LP8556_COMBINED2</span><span class="p">,</span>	<span class="cm">/* pwm + i2c after the shaper block */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lp855x_pwm_data</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">pwm_set_intensity</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span> <span class="n">brightness</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_brightness</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">pwm_get_intensity</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span> <span class="n">max_brightness</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">lp855x_rom_data</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">val</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct lp855x_platform_data</span>
<span class="cm"> * @name : Backlight driver name. If it is not defined, default name is set.</span>
<span class="cm"> * @mode : brightness control by pwm or lp855x register</span>
<span class="cm"> * @device_control : value of DEVICE CONTROL register</span>
<span class="cm"> * @initial_brightness : initial value of backlight brightness</span>
<span class="cm"> * @pwm_data : platform specific pwm generation functions.</span>
<span class="cm">		Only valid when mode is PWM_BASED.</span>
<span class="cm"> * @load_new_rom_data :</span>
<span class="cm">	0 : use default configuration data</span>
<span class="cm">	1 : update values of eeprom or eprom registers on loading driver</span>
<span class="cm"> * @size_program : total size of lp855x_rom_data</span>
<span class="cm"> * @rom_data : list of new eeprom/eprom registers</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">lp855x_platform_data</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">lp855x_brightness_ctrl_mode</span> <span class="n">mode</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">device_control</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">initial_brightness</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lp855x_pwm_data</span> <span class="n">pwm_data</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">load_new_rom_data</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">size_program</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">lp855x_rom_data</span> <span class="o">*</span><span class="n">rom_data</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
