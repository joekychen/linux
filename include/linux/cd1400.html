<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › cd1400.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>cd1400.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	cd1400.h  -- cd1400 UART hardware info.</span>
<span class="cm"> *</span>
<span class="cm"> *	Copyright (C) 1996-1998  Stallion Technologies</span>
<span class="cm"> *	Copyright (C) 1994-1996  Greg Ungerer.</span>
<span class="cm"> *</span>
<span class="cm"> *	This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *	it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *	the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *	(at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *	This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *	but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *	GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *	You should have received a copy of the GNU General Public License</span>
<span class="cm"> *	along with this program; if not, write to the Free Software</span>
<span class="cm"> *	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cm">/*****************************************************************************/</span>
<span class="cp">#ifndef	_CD1400_H</span>
<span class="cp">#define	_CD1400_H</span>
<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the number of async ports per cd1400 uart chip.</span>
<span class="cm"> */</span>
<span class="cp">#define	CD1400_PORTS		4</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the cd1400 uarts internal FIFO sizes.</span>
<span class="cm"> */</span>
<span class="cp">#define	CD1400_TXFIFOSIZE	12</span>
<span class="cp">#define	CD1400_RXFIFOSIZE	12</span>

<span class="cm">/*</span>
<span class="cm"> *	Local RX FIFO thresh hold level. Also define the RTS thresh hold</span>
<span class="cm"> *	based on the RX thresh hold.</span>
<span class="cm"> */</span>
<span class="cp">#define	FIFO_RXTHRESHOLD	6</span>
<span class="cp">#define	FIFO_RTSTHRESHOLD	7</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the cd1400 register addresses. These are all the valid</span>
<span class="cm"> *	registers with the cd1400. Some are global, some virtual, some</span>
<span class="cm"> *	per port.</span>
<span class="cm"> */</span>
<span class="cp">#define	GFRCR		0x40</span>
<span class="cp">#define	CAR		0x68</span>
<span class="cp">#define	GCR		0x4b</span>
<span class="cp">#define	SVRR		0x67</span>
<span class="cp">#define	RICR		0x44</span>
<span class="cp">#define	TICR		0x45</span>
<span class="cp">#define	MICR		0x46</span>
<span class="cp">#define	RIR		0x6b</span>
<span class="cp">#define	TIR		0x6a</span>
<span class="cp">#define	MIR		0x69</span>
<span class="cp">#define	PPR		0x7e</span>

<span class="cp">#define	RIVR		0x43</span>
<span class="cp">#define	TIVR		0x42</span>
<span class="cp">#define	MIVR		0x41</span>
<span class="cp">#define	TDR		0x63</span>
<span class="cp">#define	RDSR		0x62</span>
<span class="cp">#define	MISR		0x4c</span>
<span class="cp">#define	EOSRR		0x60</span>

<span class="cp">#define	LIVR		0x18</span>
<span class="cp">#define	CCR		0x05</span>
<span class="cp">#define	SRER		0x06</span>
<span class="cp">#define	COR1		0x08</span>
<span class="cp">#define	COR2		0x09</span>
<span class="cp">#define	COR3		0x0a</span>
<span class="cp">#define	COR4		0x1e</span>
<span class="cp">#define	COR5		0x1f</span>
<span class="cp">#define	CCSR		0x0b</span>
<span class="cp">#define	RDCR		0x0e</span>
<span class="cp">#define	SCHR1		0x1a</span>
<span class="cp">#define	SCHR2		0x1b</span>
<span class="cp">#define	SCHR3		0x1c</span>
<span class="cp">#define	SCHR4		0x1d</span>
<span class="cp">#define	SCRL		0x22</span>
<span class="cp">#define	SCRH		0x23</span>
<span class="cp">#define	LNC		0x24</span>
<span class="cp">#define	MCOR1		0x15</span>
<span class="cp">#define	MCOR2		0x16</span>
<span class="cp">#define	RTPR		0x21</span>
<span class="cp">#define	MSVR1		0x6c</span>
<span class="cp">#define	MSVR2		0x6d</span>
<span class="cp">#define	PSVR		0x6f</span>
<span class="cp">#define	RBPR		0x78</span>
<span class="cp">#define	RCOR		0x7c</span>
<span class="cp">#define	TBPR		0x72</span>
<span class="cp">#define	TCOR		0x76</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the set of baud rate clock divisors.</span>
<span class="cm"> */</span>
<span class="cp">#define	CD1400_CLK0	8</span>
<span class="cp">#define	CD1400_CLK1	32</span>
<span class="cp">#define	CD1400_CLK2	128</span>
<span class="cp">#define	CD1400_CLK3	512</span>
<span class="cp">#define	CD1400_CLK4	2048</span>

<span class="cp">#define	CD1400_NUMCLKS	5</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the clock pre-scalar value to be a 5 ms clock. This should be</span>
<span class="cm"> *	OK for now. It would probably be better to make it 10 ms, but we</span>
<span class="cm"> *	can&#39;t fit that divisor into 8 bits!</span>
<span class="cm"> */</span>
<span class="cp">#define	PPR_SCALAR	244</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define values used to set character size options.</span>
<span class="cm"> */</span>
<span class="cp">#define	COR1_CHL5	0x00</span>
<span class="cp">#define	COR1_CHL6	0x01</span>
<span class="cp">#define	COR1_CHL7	0x02</span>
<span class="cp">#define	COR1_CHL8	0x03</span>

<span class="cm">/*</span>
<span class="cm"> *	Define values used to set the number of stop bits.</span>
<span class="cm"> */</span>
<span class="cp">#define	COR1_STOP1	0x00</span>
<span class="cp">#define	COR1_STOP15	0x04</span>
<span class="cp">#define	COR1_STOP2	0x08</span>

<span class="cm">/*</span>
<span class="cm"> *	Define values used to set the parity scheme in use.</span>
<span class="cm"> */</span>
<span class="cp">#define	COR1_PARNONE	0x00</span>
<span class="cp">#define	COR1_PARFORCE	0x20</span>
<span class="cp">#define	COR1_PARENB	0x40</span>
<span class="cp">#define	COR1_PARIGNORE	0x10</span>

<span class="cp">#define	COR1_PARODD	0x80</span>
<span class="cp">#define	COR1_PAREVEN	0x00</span>

<span class="cp">#define	COR2_IXM	0x80</span>
<span class="cp">#define	COR2_TXIBE	0x40</span>
<span class="cp">#define	COR2_ETC	0x20</span>
<span class="cp">#define	COR2_LLM	0x10</span>
<span class="cp">#define	COR2_RLM	0x08</span>
<span class="cp">#define	COR2_RTSAO	0x04</span>
<span class="cp">#define	COR2_CTSAE	0x02</span>

<span class="cp">#define	COR3_SCDRNG	0x80</span>
<span class="cp">#define	COR3_SCD34	0x40</span>
<span class="cp">#define	COR3_FCT	0x20</span>
<span class="cp">#define	COR3_SCD12	0x10</span>

<span class="cm">/*</span>
<span class="cm"> *	Define values used by COR4.</span>
<span class="cm"> */</span>
<span class="cp">#define	COR4_BRKINT	0x08</span>
<span class="cp">#define	COR4_IGNBRK	0x18</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the modem control register values.</span>
<span class="cm"> *	Note that the actual hardware is a little different to the conventional</span>
<span class="cm"> *	pin names on the cd1400.</span>
<span class="cm"> */</span>
<span class="cp">#define	MSVR1_DTR	0x01</span>
<span class="cp">#define	MSVR1_DSR	0x10</span>
<span class="cp">#define	MSVR1_RI	0x20</span>
<span class="cp">#define	MSVR1_CTS	0x40</span>
<span class="cp">#define	MSVR1_DCD	0x80</span>

<span class="cp">#define	MSVR2_RTS	0x02</span>
<span class="cp">#define	MSVR2_DSR	0x10</span>
<span class="cp">#define	MSVR2_RI	0x20</span>
<span class="cp">#define	MSVR2_CTS	0x40</span>
<span class="cp">#define	MSVR2_DCD	0x80</span>

<span class="cp">#define	MCOR1_DCD	0x80</span>
<span class="cp">#define	MCOR1_CTS	0x40</span>
<span class="cp">#define	MCOR1_RI	0x20</span>
<span class="cp">#define	MCOR1_DSR	0x10</span>

<span class="cp">#define	MCOR2_DCD	0x80</span>
<span class="cp">#define	MCOR2_CTS	0x40</span>
<span class="cp">#define	MCOR2_RI	0x20</span>
<span class="cp">#define	MCOR2_DSR	0x10</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the bits used with the service (interrupt) enable register.</span>
<span class="cm"> */</span>
<span class="cp">#define	SRER_NNDT	0x01</span>
<span class="cp">#define	SRER_TXEMPTY	0x02</span>
<span class="cp">#define	SRER_TXDATA	0x04</span>
<span class="cp">#define	SRER_RXDATA	0x10</span>
<span class="cp">#define	SRER_MODEM	0x80</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define operational commands for the command register.</span>
<span class="cm"> */</span>
<span class="cp">#define	CCR_RESET	0x80</span>
<span class="cp">#define	CCR_CORCHANGE	0x4e</span>
<span class="cp">#define	CCR_SENDCH	0x20</span>
<span class="cp">#define	CCR_CHANCTRL	0x10</span>

<span class="cp">#define	CCR_TXENABLE	(CCR_CHANCTRL | 0x08)</span>
<span class="cp">#define	CCR_TXDISABLE	(CCR_CHANCTRL | 0x04)</span>
<span class="cp">#define	CCR_RXENABLE	(CCR_CHANCTRL | 0x02)</span>
<span class="cp">#define	CCR_RXDISABLE	(CCR_CHANCTRL | 0x01)</span>

<span class="cp">#define	CCR_SENDSCHR1	(CCR_SENDCH | 0x01)</span>
<span class="cp">#define	CCR_SENDSCHR2	(CCR_SENDCH | 0x02)</span>
<span class="cp">#define	CCR_SENDSCHR3	(CCR_SENDCH | 0x03)</span>
<span class="cp">#define	CCR_SENDSCHR4	(CCR_SENDCH | 0x04)</span>

<span class="cp">#define	CCR_RESETCHAN	(CCR_RESET | 0x00)</span>
<span class="cp">#define	CCR_RESETFULL	(CCR_RESET | 0x01)</span>
<span class="cp">#define	CCR_TXFLUSHFIFO	(CCR_RESET | 0x02)</span>

<span class="cp">#define	CCR_MAXWAIT	10000</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the valid acknowledgement types (for hw ack cycle).</span>
<span class="cm"> */</span>
<span class="cp">#define	ACK_TYPMASK	0x07</span>
<span class="cp">#define	ACK_TYPTX	0x02</span>
<span class="cp">#define	ACK_TYPMDM	0x01</span>
<span class="cp">#define	ACK_TYPRXGOOD	0x03</span>
<span class="cp">#define	ACK_TYPRXBAD	0x07</span>

<span class="cp">#define	SVRR_RX		0x01</span>
<span class="cp">#define	SVRR_TX		0x02</span>
<span class="cp">#define	SVRR_MDM	0x04</span>

<span class="cp">#define	ST_OVERRUN	0x01</span>
<span class="cp">#define	ST_FRAMING	0x02</span>
<span class="cp">#define	ST_PARITY	0x04</span>
<span class="cp">#define	ST_BREAK	0x08</span>
<span class="cp">#define	ST_SCHAR1	0x10</span>
<span class="cp">#define	ST_SCHAR2	0x20</span>
<span class="cp">#define	ST_SCHAR3	0x30</span>
<span class="cp">#define	ST_SCHAR4	0x40</span>
<span class="cp">#define	ST_RANGE	0x70</span>
<span class="cp">#define	ST_SCHARMASK	0x70</span>
<span class="cp">#define	ST_TIMEOUT	0x80</span>

<span class="cp">#define	MISR_DCD	0x80</span>
<span class="cp">#define	MISR_CTS	0x40</span>
<span class="cp">#define	MISR_RI		0x20</span>
<span class="cp">#define	MISR_DSR	0x10</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Defines for the CCSR status register.</span>
<span class="cm"> */</span>
<span class="cp">#define	CCSR_RXENABLED	0x80</span>
<span class="cp">#define	CCSR_RXFLOWON	0x40</span>
<span class="cp">#define	CCSR_RXFLOWOFF	0x20</span>
<span class="cp">#define	CCSR_TXENABLED	0x08</span>
<span class="cp">#define	CCSR_TXFLOWON	0x04</span>
<span class="cp">#define	CCSR_TXFLOWOFF	0x02</span>

<span class="cm">/*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the embedded commands.</span>
<span class="cm"> */</span>
<span class="cp">#define	ETC_CMD		0x00</span>
<span class="cp">#define	ETC_STARTBREAK	0x81</span>
<span class="cp">#define	ETC_DELAY	0x82</span>
<span class="cp">#define	ETC_STOPBREAK	0x83</span>

<span class="cm">/*****************************************************************************/</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
