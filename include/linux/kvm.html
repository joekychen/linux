<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › kvm.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>kvm.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __LINUX_KVM_H</span>
<span class="cp">#define __LINUX_KVM_H</span>

<span class="cm">/*</span>
<span class="cm"> * Userspace interface for /dev/kvm - kernel based virtual machine</span>
<span class="cm"> *</span>
<span class="cm"> * Note: you must update KVM_API_VERSION if you change this interface.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/compiler.h&gt;</span>
<span class="cp">#include &lt;linux/ioctl.h&gt;</span>
<span class="cp">#include &lt;asm/kvm.h&gt;</span>

<span class="cp">#define KVM_API_VERSION 12</span>

<span class="cm">/* *** Deprecated interfaces *** */</span>

<span class="cp">#define KVM_TRC_SHIFT           16</span>

<span class="cp">#define KVM_TRC_ENTRYEXIT       (1 &lt;&lt; KVM_TRC_SHIFT)</span>
<span class="cp">#define KVM_TRC_HANDLER         (1 &lt;&lt; (KVM_TRC_SHIFT + 1))</span>

<span class="cp">#define KVM_TRC_VMENTRY         (KVM_TRC_ENTRYEXIT + 0x01)</span>
<span class="cp">#define KVM_TRC_VMEXIT          (KVM_TRC_ENTRYEXIT + 0x02)</span>
<span class="cp">#define KVM_TRC_PAGE_FAULT      (KVM_TRC_HANDLER + 0x01)</span>

<span class="cp">#define KVM_TRC_HEAD_SIZE       12</span>
<span class="cp">#define KVM_TRC_CYCLE_SIZE      8</span>
<span class="cp">#define KVM_TRC_EXTRA_MAX       7</span>

<span class="cp">#define KVM_TRC_INJ_VIRQ         (KVM_TRC_HANDLER + 0x02)</span>
<span class="cp">#define KVM_TRC_REDELIVER_EVT    (KVM_TRC_HANDLER + 0x03)</span>
<span class="cp">#define KVM_TRC_PEND_INTR        (KVM_TRC_HANDLER + 0x04)</span>
<span class="cp">#define KVM_TRC_IO_READ          (KVM_TRC_HANDLER + 0x05)</span>
<span class="cp">#define KVM_TRC_IO_WRITE         (KVM_TRC_HANDLER + 0x06)</span>
<span class="cp">#define KVM_TRC_CR_READ          (KVM_TRC_HANDLER + 0x07)</span>
<span class="cp">#define KVM_TRC_CR_WRITE         (KVM_TRC_HANDLER + 0x08)</span>
<span class="cp">#define KVM_TRC_DR_READ          (KVM_TRC_HANDLER + 0x09)</span>
<span class="cp">#define KVM_TRC_DR_WRITE         (KVM_TRC_HANDLER + 0x0A)</span>
<span class="cp">#define KVM_TRC_MSR_READ         (KVM_TRC_HANDLER + 0x0B)</span>
<span class="cp">#define KVM_TRC_MSR_WRITE        (KVM_TRC_HANDLER + 0x0C)</span>
<span class="cp">#define KVM_TRC_CPUID            (KVM_TRC_HANDLER + 0x0D)</span>
<span class="cp">#define KVM_TRC_INTR             (KVM_TRC_HANDLER + 0x0E)</span>
<span class="cp">#define KVM_TRC_NMI              (KVM_TRC_HANDLER + 0x0F)</span>
<span class="cp">#define KVM_TRC_VMMCALL          (KVM_TRC_HANDLER + 0x10)</span>
<span class="cp">#define KVM_TRC_HLT              (KVM_TRC_HANDLER + 0x11)</span>
<span class="cp">#define KVM_TRC_CLTS             (KVM_TRC_HANDLER + 0x12)</span>
<span class="cp">#define KVM_TRC_LMSW             (KVM_TRC_HANDLER + 0x13)</span>
<span class="cp">#define KVM_TRC_APIC_ACCESS      (KVM_TRC_HANDLER + 0x14)</span>
<span class="cp">#define KVM_TRC_TDP_FAULT        (KVM_TRC_HANDLER + 0x15)</span>
<span class="cp">#define KVM_TRC_GTLB_WRITE       (KVM_TRC_HANDLER + 0x16)</span>
<span class="cp">#define KVM_TRC_STLB_WRITE       (KVM_TRC_HANDLER + 0x17)</span>
<span class="cp">#define KVM_TRC_STLB_INVAL       (KVM_TRC_HANDLER + 0x18)</span>
<span class="cp">#define KVM_TRC_PPC_INSTR        (KVM_TRC_HANDLER + 0x19)</span>

<span class="k">struct</span> <span class="n">kvm_user_trace_setup</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">buf_size</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">buf_nr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define __KVM_DEPRECATED_MAIN_W_0x06 \</span>
<span class="cp">	_IOW(KVMIO, 0x06, struct kvm_user_trace_setup)</span>
<span class="cp">#define __KVM_DEPRECATED_MAIN_0x07 _IO(KVMIO, 0x07)</span>
<span class="cp">#define __KVM_DEPRECATED_MAIN_0x08 _IO(KVMIO, 0x08)</span>

<span class="cp">#define __KVM_DEPRECATED_VM_R_0x70 _IOR(KVMIO, 0x70, struct kvm_assigned_irq)</span>

<span class="k">struct</span> <span class="n">kvm_breakpoint</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">enabled</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">padding</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">address</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_debug_guest</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">enabled</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kvm_breakpoint</span> <span class="n">breakpoints</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__u32</span> <span class="n">singlestep</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define __KVM_DEPRECATED_VCPU_W_0x87 _IOW(KVMIO, 0x87, struct kvm_debug_guest)</span>

<span class="cm">/* *** End of deprecated interfaces *** */</span>


<span class="cm">/* for KVM_CREATE_MEMORY_REGION */</span>
<span class="k">struct</span> <span class="n">kvm_memory_region</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">slot</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">guest_phys_addr</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">memory_size</span><span class="p">;</span> <span class="cm">/* bytes */</span>
<span class="p">};</span>

<span class="cm">/* for KVM_SET_USER_MEMORY_REGION */</span>
<span class="k">struct</span> <span class="n">kvm_userspace_memory_region</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">slot</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">guest_phys_addr</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">memory_size</span><span class="p">;</span> <span class="cm">/* bytes */</span>
	<span class="n">__u64</span> <span class="n">userspace_addr</span><span class="p">;</span> <span class="cm">/* start of the userspace allocated memory */</span>
<span class="p">};</span>

<span class="cm">/* for kvm_memory_region::flags */</span>
<span class="cp">#define KVM_MEM_LOG_DIRTY_PAGES  1UL</span>
<span class="cp">#define KVM_MEMSLOT_INVALID      (1UL &lt;&lt; 1)</span>

<span class="cm">/* for KVM_IRQ_LINE */</span>
<span class="k">struct</span> <span class="n">kvm_irq_level</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * ACPI gsi notion of irq.</span>
<span class="cm">	 * For IA-64 (APIC model) IOAPIC0: irq 0-23; IOAPIC1: irq 24-47..</span>
<span class="cm">	 * For X86 (standard AT mode) PIC0/1: irq 0-15. IOAPIC0: 0-23..</span>
<span class="cm">	 */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">__u32</span> <span class="n">irq</span><span class="p">;</span>
		<span class="n">__s32</span> <span class="n">status</span><span class="p">;</span>
	<span class="p">};</span>
	<span class="n">__u32</span> <span class="n">level</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">struct</span> <span class="n">kvm_irqchip</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">chip_id</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
        <span class="k">union</span> <span class="p">{</span>
		<span class="kt">char</span> <span class="n">dummy</span><span class="p">[</span><span class="mi">512</span><span class="p">];</span>  <span class="cm">/* reserving space */</span>
<span class="cp">#ifdef __KVM_HAVE_PIT</span>
		<span class="k">struct</span> <span class="n">kvm_pic_state</span> <span class="n">pic</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __KVM_HAVE_IOAPIC</span>
		<span class="k">struct</span> <span class="n">kvm_ioapic_state</span> <span class="n">ioapic</span><span class="p">;</span>
<span class="cp">#endif</span>
	<span class="p">}</span> <span class="n">chip</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* for KVM_CREATE_PIT2 */</span>
<span class="k">struct</span> <span class="n">kvm_pit_config</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define KVM_PIT_SPEAKER_DUMMY     1</span>

<span class="cp">#define KVM_EXIT_UNKNOWN          0</span>
<span class="cp">#define KVM_EXIT_EXCEPTION        1</span>
<span class="cp">#define KVM_EXIT_IO               2</span>
<span class="cp">#define KVM_EXIT_HYPERCALL        3</span>
<span class="cp">#define KVM_EXIT_DEBUG            4</span>
<span class="cp">#define KVM_EXIT_HLT              5</span>
<span class="cp">#define KVM_EXIT_MMIO             6</span>
<span class="cp">#define KVM_EXIT_IRQ_WINDOW_OPEN  7</span>
<span class="cp">#define KVM_EXIT_SHUTDOWN         8</span>
<span class="cp">#define KVM_EXIT_FAIL_ENTRY       9</span>
<span class="cp">#define KVM_EXIT_INTR             10</span>
<span class="cp">#define KVM_EXIT_SET_TPR          11</span>
<span class="cp">#define KVM_EXIT_TPR_ACCESS       12</span>
<span class="cp">#define KVM_EXIT_S390_SIEIC       13</span>
<span class="cp">#define KVM_EXIT_S390_RESET       14</span>
<span class="cp">#define KVM_EXIT_DCR              15</span>
<span class="cp">#define KVM_EXIT_NMI              16</span>
<span class="cp">#define KVM_EXIT_INTERNAL_ERROR   17</span>
<span class="cp">#define KVM_EXIT_OSI              18</span>
<span class="cp">#define KVM_EXIT_PAPR_HCALL	  19</span>
<span class="cp">#define KVM_EXIT_S390_UCONTROL	  20</span>

<span class="cm">/* For KVM_EXIT_INTERNAL_ERROR */</span>
<span class="cp">#define KVM_INTERNAL_ERROR_EMULATION 1</span>
<span class="cp">#define KVM_INTERNAL_ERROR_SIMUL_EX 2</span>

<span class="cm">/* for KVM_RUN, returned by mmap(vcpu_fd, offset=0) */</span>
<span class="k">struct</span> <span class="n">kvm_run</span> <span class="p">{</span>
	<span class="cm">/* in */</span>
	<span class="n">__u8</span> <span class="n">request_interrupt_window</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">padding1</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>

	<span class="cm">/* out */</span>
	<span class="n">__u32</span> <span class="n">exit_reason</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">ready_for_interrupt_injection</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">if_flag</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">padding2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

	<span class="cm">/* in (pre_kvm_run), out (post_kvm_run) */</span>
	<span class="n">__u64</span> <span class="n">cr8</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">apic_base</span><span class="p">;</span>

<span class="cp">#ifdef __KVM_S390</span>
	<span class="cm">/* the processor status word for s390 */</span>
	<span class="n">__u64</span> <span class="n">psw_mask</span><span class="p">;</span> <span class="cm">/* psw upper half */</span>
	<span class="n">__u64</span> <span class="n">psw_addr</span><span class="p">;</span> <span class="cm">/* psw lower half */</span>
<span class="cp">#endif</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="cm">/* KVM_EXIT_UNKNOWN */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">hardware_exit_reason</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">hw</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_FAIL_ENTRY */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">hardware_entry_failure_reason</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">fail_entry</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_EXCEPTION */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u32</span> <span class="n">exception</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">error_code</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">ex</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_IO */</span>
		<span class="k">struct</span> <span class="p">{</span>
<span class="cp">#define KVM_EXIT_IO_IN  0</span>
<span class="cp">#define KVM_EXIT_IO_OUT 1</span>
			<span class="n">__u8</span> <span class="n">direction</span><span class="p">;</span>
			<span class="n">__u8</span> <span class="n">size</span><span class="p">;</span> <span class="cm">/* bytes */</span>
			<span class="n">__u16</span> <span class="n">port</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">count</span><span class="p">;</span>
			<span class="n">__u64</span> <span class="n">data_offset</span><span class="p">;</span> <span class="cm">/* relative to kvm_run start */</span>
		<span class="p">}</span> <span class="n">io</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">kvm_debug_exit_arch</span> <span class="n">arch</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">debug</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_MMIO */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">phys_addr</span><span class="p">;</span>
			<span class="n">__u8</span>  <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
			<span class="n">__u32</span> <span class="n">len</span><span class="p">;</span>
			<span class="n">__u8</span>  <span class="n">is_write</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">mmio</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_HYPERCALL */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">nr</span><span class="p">;</span>
			<span class="n">__u64</span> <span class="n">args</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
			<span class="n">__u64</span> <span class="n">ret</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">longmode</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">hypercall</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_TPR_ACCESS */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">rip</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">is_write</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">tpr_access</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_S390_SIEIC */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u8</span> <span class="n">icptcode</span><span class="p">;</span>
			<span class="n">__u16</span> <span class="n">ipa</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">ipb</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">s390_sieic</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_S390_RESET */</span>
<span class="cp">#define KVM_S390_RESET_POR       1</span>
<span class="cp">#define KVM_S390_RESET_CLEAR     2</span>
<span class="cp">#define KVM_S390_RESET_SUBSYSTEM 4</span>
<span class="cp">#define KVM_S390_RESET_CPU_INIT  8</span>
<span class="cp">#define KVM_S390_RESET_IPL       16</span>
		<span class="n">__u64</span> <span class="n">s390_reset_flags</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_S390_UCONTROL */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">trans_exc_code</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">pgm_code</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">s390_ucontrol</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_DCR */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u32</span> <span class="n">dcrn</span><span class="p">;</span>
			<span class="n">__u32</span> <span class="n">data</span><span class="p">;</span>
			<span class="n">__u8</span>  <span class="n">is_write</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">dcr</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u32</span> <span class="n">suberror</span><span class="p">;</span>
			<span class="cm">/* Available with KVM_CAP_INTERNAL_ERROR_DATA: */</span>
			<span class="n">__u32</span> <span class="n">ndata</span><span class="p">;</span>
			<span class="n">__u64</span> <span class="n">data</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">internal</span><span class="p">;</span>
		<span class="cm">/* KVM_EXIT_OSI */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">gprs</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">osi</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u64</span> <span class="n">nr</span><span class="p">;</span>
			<span class="n">__u64</span> <span class="n">ret</span><span class="p">;</span>
			<span class="n">__u64</span> <span class="n">args</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">papr_hcall</span><span class="p">;</span>
		<span class="cm">/* Fix the size of the union. */</span>
		<span class="kt">char</span> <span class="n">padding</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
	<span class="p">};</span>

	<span class="cm">/*</span>
<span class="cm">	 * shared registers between kvm and userspace.</span>
<span class="cm">	 * kvm_valid_regs specifies the register classes set by the host</span>
<span class="cm">	 * kvm_dirty_regs specified the register classes dirtied by userspace</span>
<span class="cm">	 * struct kvm_sync_regs is architecture specific, as well as the</span>
<span class="cm">	 * bits for kvm_valid_regs and kvm_dirty_regs</span>
<span class="cm">	 */</span>
	<span class="n">__u64</span> <span class="n">kvm_valid_regs</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">kvm_dirty_regs</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">kvm_sync_regs</span> <span class="n">regs</span><span class="p">;</span>
		<span class="kt">char</span> <span class="n">padding</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">s</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* for KVM_REGISTER_COALESCED_MMIO / KVM_UNREGISTER_COALESCED_MMIO */</span>

<span class="k">struct</span> <span class="n">kvm_coalesced_mmio_zone</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">size</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_coalesced_mmio</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">phys_addr</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_coalesced_mmio_ring</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kvm_coalesced_mmio</span> <span class="n">coalesced_mmio</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define KVM_COALESCED_MMIO_MAX \</span>
<span class="cp">	((PAGE_SIZE - sizeof(struct kvm_coalesced_mmio_ring)) / \</span>
<span class="cp">	 sizeof(struct kvm_coalesced_mmio))</span>

<span class="cm">/* for KVM_TRANSLATE */</span>
<span class="k">struct</span> <span class="n">kvm_translation</span> <span class="p">{</span>
	<span class="cm">/* in */</span>
	<span class="n">__u64</span> <span class="n">linear_address</span><span class="p">;</span>

	<span class="cm">/* out */</span>
	<span class="n">__u64</span> <span class="n">physical_address</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">valid</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">writeable</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">usermode</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">pad</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* for KVM_INTERRUPT */</span>
<span class="k">struct</span> <span class="n">kvm_interrupt</span> <span class="p">{</span>
	<span class="cm">/* in */</span>
	<span class="n">__u32</span> <span class="n">irq</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* for KVM_GET_DIRTY_LOG */</span>
<span class="k">struct</span> <span class="n">kvm_dirty_log</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">slot</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">padding1</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">dirty_bitmap</span><span class="p">;</span> <span class="cm">/* one bit per page */</span>
		<span class="n">__u64</span> <span class="n">padding2</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="cm">/* for KVM_SET_SIGNAL_MASK */</span>
<span class="k">struct</span> <span class="n">kvm_signal_mask</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">sigset</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* for KVM_TPR_ACCESS_REPORTING */</span>
<span class="k">struct</span> <span class="n">kvm_tpr_access_ctl</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">enabled</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* for KVM_SET_VAPIC_ADDR */</span>
<span class="k">struct</span> <span class="n">kvm_vapic_addr</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">vapic_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* for KVM_SET_MPSTATE */</span>

<span class="cp">#define KVM_MP_STATE_RUNNABLE          0</span>
<span class="cp">#define KVM_MP_STATE_UNINITIALIZED     1</span>
<span class="cp">#define KVM_MP_STATE_INIT_RECEIVED     2</span>
<span class="cp">#define KVM_MP_STATE_HALTED            3</span>
<span class="cp">#define KVM_MP_STATE_SIPI_RECEIVED     4</span>

<span class="k">struct</span> <span class="n">kvm_mp_state</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">mp_state</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_s390_psw</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* valid values for type in kvm_s390_interrupt */</span>
<span class="cp">#define KVM_S390_SIGP_STOP		0xfffe0000u</span>
<span class="cp">#define KVM_S390_PROGRAM_INT		0xfffe0001u</span>
<span class="cp">#define KVM_S390_SIGP_SET_PREFIX	0xfffe0002u</span>
<span class="cp">#define KVM_S390_RESTART		0xfffe0003u</span>
<span class="cp">#define KVM_S390_INT_VIRTIO		0xffff2603u</span>
<span class="cp">#define KVM_S390_INT_SERVICE		0xffff2401u</span>
<span class="cp">#define KVM_S390_INT_EMERGENCY		0xffff1201u</span>
<span class="cp">#define KVM_S390_INT_EXTERNAL_CALL	0xffff1202u</span>

<span class="k">struct</span> <span class="n">kvm_s390_interrupt</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">parm</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">parm64</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* for KVM_SET_GUEST_DEBUG */</span>

<span class="cp">#define KVM_GUESTDBG_ENABLE		0x00000001</span>
<span class="cp">#define KVM_GUESTDBG_SINGLESTEP		0x00000002</span>

<span class="k">struct</span> <span class="n">kvm_guest_debug</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">control</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kvm_guest_debug_arch</span> <span class="n">arch</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">kvm_ioeventfd_flag_nr_datamatch</span><span class="p">,</span>
	<span class="n">kvm_ioeventfd_flag_nr_pio</span><span class="p">,</span>
	<span class="n">kvm_ioeventfd_flag_nr_deassign</span><span class="p">,</span>
	<span class="n">kvm_ioeventfd_flag_nr_max</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define KVM_IOEVENTFD_FLAG_DATAMATCH (1 &lt;&lt; kvm_ioeventfd_flag_nr_datamatch)</span>
<span class="cp">#define KVM_IOEVENTFD_FLAG_PIO       (1 &lt;&lt; kvm_ioeventfd_flag_nr_pio)</span>
<span class="cp">#define KVM_IOEVENTFD_FLAG_DEASSIGN  (1 &lt;&lt; kvm_ioeventfd_flag_nr_deassign)</span>

<span class="cp">#define KVM_IOEVENTFD_VALID_FLAG_MASK  ((1 &lt;&lt; kvm_ioeventfd_flag_nr_max) - 1)</span>

<span class="k">struct</span> <span class="n">kvm_ioeventfd</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">datamatch</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">addr</span><span class="p">;</span>        <span class="cm">/* legal pio/mmio address */</span>
	<span class="n">__u32</span> <span class="n">len</span><span class="p">;</span>         <span class="cm">/* 1, 2, 4, or 8 bytes    */</span>
	<span class="n">__s32</span> <span class="n">fd</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">pad</span><span class="p">[</span><span class="mi">36</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* for KVM_ENABLE_CAP */</span>
<span class="k">struct</span> <span class="n">kvm_enable_cap</span> <span class="p">{</span>
	<span class="cm">/* in */</span>
	<span class="n">__u32</span> <span class="n">cap</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">pad</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* for KVM_PPC_GET_PVINFO */</span>
<span class="k">struct</span> <span class="n">kvm_ppc_pvinfo</span> <span class="p">{</span>
	<span class="cm">/* out */</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">hcall</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__u8</span>  <span class="n">pad</span><span class="p">[</span><span class="mi">108</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* for KVM_PPC_GET_SMMU_INFO */</span>
<span class="cp">#define KVM_PPC_PAGE_SIZES_MAX_SZ	8</span>

<span class="k">struct</span> <span class="n">kvm_ppc_one_page_size</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">page_shift</span><span class="p">;</span>	<span class="cm">/* Page shift (or 0) */</span>
	<span class="n">__u32</span> <span class="n">pte_enc</span><span class="p">;</span>		<span class="cm">/* Encoding in the HPTE (&gt;&gt;12) */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_ppc_one_seg_page_size</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">page_shift</span><span class="p">;</span>	<span class="cm">/* Base page shift of segment (or 0) */</span>
	<span class="n">__u32</span> <span class="n">slb_enc</span><span class="p">;</span>		<span class="cm">/* SLB encoding for BookS */</span>
	<span class="k">struct</span> <span class="n">kvm_ppc_one_page_size</span> <span class="n">enc</span><span class="p">[</span><span class="n">KVM_PPC_PAGE_SIZES_MAX_SZ</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define KVM_PPC_PAGE_SIZES_REAL		0x00000001</span>
<span class="cp">#define KVM_PPC_1T_SEGMENTS		0x00000002</span>

<span class="k">struct</span> <span class="n">kvm_ppc_smmu_info</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">slb_size</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kvm_ppc_one_seg_page_size</span> <span class="n">sps</span><span class="p">[</span><span class="n">KVM_PPC_PAGE_SIZES_MAX_SZ</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define KVMIO 0xAE</span>

<span class="cm">/* machine type bits, to be used as argument to KVM_CREATE_VM */</span>
<span class="cp">#define KVM_VM_S390_UCONTROL	1</span>

<span class="cp">#define KVM_S390_SIE_PAGE_OFFSET 1</span>

<span class="cm">/*</span>
<span class="cm"> * ioctls for /dev/kvm fds:</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_GET_API_VERSION       _IO(KVMIO,   0x00)</span>
<span class="cp">#define KVM_CREATE_VM             _IO(KVMIO,   0x01) </span><span class="cm">/* returns a VM fd */</span><span class="cp"></span>
<span class="cp">#define KVM_GET_MSR_INDEX_LIST    _IOWR(KVMIO, 0x02, struct kvm_msr_list)</span>

<span class="cp">#define KVM_S390_ENABLE_SIE       _IO(KVMIO,   0x06)</span>
<span class="cm">/*</span>
<span class="cm"> * Check if a kvm extension is available.  Argument is extension number,</span>
<span class="cm"> * return is 1 (yes) or 0 (no, sorry).</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_CHECK_EXTENSION       _IO(KVMIO,   0x03)</span>
<span class="cm">/*</span>
<span class="cm"> * Get size for mmap(vcpu_fd)</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_GET_VCPU_MMAP_SIZE    _IO(KVMIO,   0x04) </span><span class="cm">/* in bytes */</span><span class="cp"></span>
<span class="cp">#define KVM_GET_SUPPORTED_CPUID   _IOWR(KVMIO, 0x05, struct kvm_cpuid2)</span>
<span class="cp">#define KVM_TRACE_ENABLE          __KVM_DEPRECATED_MAIN_W_0x06</span>
<span class="cp">#define KVM_TRACE_PAUSE           __KVM_DEPRECATED_MAIN_0x07</span>
<span class="cp">#define KVM_TRACE_DISABLE         __KVM_DEPRECATED_MAIN_0x08</span>

<span class="cm">/*</span>
<span class="cm"> * Extension capability list.</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_CAP_IRQCHIP	  0</span>
<span class="cp">#define KVM_CAP_HLT	  1</span>
<span class="cp">#define KVM_CAP_MMU_SHADOW_CACHE_CONTROL 2</span>
<span class="cp">#define KVM_CAP_USER_MEMORY 3</span>
<span class="cp">#define KVM_CAP_SET_TSS_ADDR 4</span>
<span class="cp">#define KVM_CAP_VAPIC 6</span>
<span class="cp">#define KVM_CAP_EXT_CPUID 7</span>
<span class="cp">#define KVM_CAP_CLOCKSOURCE 8</span>
<span class="cp">#define KVM_CAP_NR_VCPUS 9       </span><span class="cm">/* returns recommended max vcpus per vm */</span><span class="cp"></span>
<span class="cp">#define KVM_CAP_NR_MEMSLOTS 10   </span><span class="cm">/* returns max memory slots per vm */</span><span class="cp"></span>
<span class="cp">#define KVM_CAP_PIT 11</span>
<span class="cp">#define KVM_CAP_NOP_IO_DELAY 12</span>
<span class="cp">#define KVM_CAP_PV_MMU 13</span>
<span class="cp">#define KVM_CAP_MP_STATE 14</span>
<span class="cp">#define KVM_CAP_COALESCED_MMIO 15</span>
<span class="cp">#define KVM_CAP_SYNC_MMU 16  </span><span class="cm">/* Changes to host mmap are reflected in guest */</span><span class="cp"></span>
<span class="cp">#ifdef __KVM_HAVE_DEVICE_ASSIGNMENT</span>
<span class="cp">#define KVM_CAP_DEVICE_ASSIGNMENT 17</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_IOMMU 18</span>
<span class="cp">#ifdef __KVM_HAVE_MSI</span>
<span class="cp">#define KVM_CAP_DEVICE_MSI 20</span>
<span class="cp">#endif</span>
<span class="cm">/* Bug in KVM_SET_USER_MEMORY_REGION fixed: */</span>
<span class="cp">#define KVM_CAP_DESTROY_MEMORY_REGION_WORKS 21</span>
<span class="cp">#ifdef __KVM_HAVE_USER_NMI</span>
<span class="cp">#define KVM_CAP_USER_NMI 22</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __KVM_HAVE_GUEST_DEBUG</span>
<span class="cp">#define KVM_CAP_SET_GUEST_DEBUG 23</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __KVM_HAVE_PIT</span>
<span class="cp">#define KVM_CAP_REINJECT_CONTROL 24</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __KVM_HAVE_IOAPIC</span>
<span class="cp">#define KVM_CAP_IRQ_ROUTING 25</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_IRQ_INJECT_STATUS 26</span>
<span class="cp">#ifdef __KVM_HAVE_DEVICE_ASSIGNMENT</span>
<span class="cp">#define KVM_CAP_DEVICE_DEASSIGNMENT 27</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __KVM_HAVE_MSIX</span>
<span class="cp">#define KVM_CAP_DEVICE_MSIX 28</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_ASSIGN_DEV_IRQ 29</span>
<span class="cm">/* Another bug in KVM_SET_USER_MEMORY_REGION fixed: */</span>
<span class="cp">#define KVM_CAP_JOIN_MEMORY_REGIONS_WORKS 30</span>
<span class="cp">#ifdef __KVM_HAVE_MCE</span>
<span class="cp">#define KVM_CAP_MCE 31</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_IRQFD 32</span>
<span class="cp">#ifdef __KVM_HAVE_PIT</span>
<span class="cp">#define KVM_CAP_PIT2 33</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_SET_BOOT_CPU_ID 34</span>
<span class="cp">#ifdef __KVM_HAVE_PIT_STATE2</span>
<span class="cp">#define KVM_CAP_PIT_STATE2 35</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_IOEVENTFD 36</span>
<span class="cp">#define KVM_CAP_SET_IDENTITY_MAP_ADDR 37</span>
<span class="cp">#ifdef __KVM_HAVE_XEN_HVM</span>
<span class="cp">#define KVM_CAP_XEN_HVM 38</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_ADJUST_CLOCK 39</span>
<span class="cp">#define KVM_CAP_INTERNAL_ERROR_DATA 40</span>
<span class="cp">#ifdef __KVM_HAVE_VCPU_EVENTS</span>
<span class="cp">#define KVM_CAP_VCPU_EVENTS 41</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_S390_PSW 42</span>
<span class="cp">#define KVM_CAP_PPC_SEGSTATE 43</span>
<span class="cp">#define KVM_CAP_HYPERV 44</span>
<span class="cp">#define KVM_CAP_HYPERV_VAPIC 45</span>
<span class="cp">#define KVM_CAP_HYPERV_SPIN 46</span>
<span class="cp">#define KVM_CAP_PCI_SEGMENT 47</span>
<span class="cp">#define KVM_CAP_PPC_PAIRED_SINGLES 48</span>
<span class="cp">#define KVM_CAP_INTR_SHADOW 49</span>
<span class="cp">#ifdef __KVM_HAVE_DEBUGREGS</span>
<span class="cp">#define KVM_CAP_DEBUGREGS 50</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_X86_ROBUST_SINGLESTEP 51</span>
<span class="cp">#define KVM_CAP_PPC_OSI 52</span>
<span class="cp">#define KVM_CAP_PPC_UNSET_IRQ 53</span>
<span class="cp">#define KVM_CAP_ENABLE_CAP 54</span>
<span class="cp">#ifdef __KVM_HAVE_XSAVE</span>
<span class="cp">#define KVM_CAP_XSAVE 55</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef __KVM_HAVE_XCRS</span>
<span class="cp">#define KVM_CAP_XCRS 56</span>
<span class="cp">#endif</span>
<span class="cp">#define KVM_CAP_PPC_GET_PVINFO 57</span>
<span class="cp">#define KVM_CAP_PPC_IRQ_LEVEL 58</span>
<span class="cp">#define KVM_CAP_ASYNC_PF 59</span>
<span class="cp">#define KVM_CAP_TSC_CONTROL 60</span>
<span class="cp">#define KVM_CAP_GET_TSC_KHZ 61</span>
<span class="cp">#define KVM_CAP_PPC_BOOKE_SREGS 62</span>
<span class="cp">#define KVM_CAP_SPAPR_TCE 63</span>
<span class="cp">#define KVM_CAP_PPC_SMT 64</span>
<span class="cp">#define KVM_CAP_PPC_RMA	65</span>
<span class="cp">#define KVM_CAP_MAX_VCPUS 66       </span><span class="cm">/* returns max vcpus per vm */</span><span class="cp"></span>
<span class="cp">#define KVM_CAP_PPC_HIOR 67</span>
<span class="cp">#define KVM_CAP_PPC_PAPR 68</span>
<span class="cp">#define KVM_CAP_SW_TLB 69</span>
<span class="cp">#define KVM_CAP_ONE_REG 70</span>
<span class="cp">#define KVM_CAP_S390_GMAP 71</span>
<span class="cp">#define KVM_CAP_TSC_DEADLINE_TIMER 72</span>
<span class="cp">#define KVM_CAP_S390_UCONTROL 73</span>
<span class="cp">#define KVM_CAP_SYNC_REGS 74</span>
<span class="cp">#define KVM_CAP_PCI_2_3 75</span>
<span class="cp">#define KVM_CAP_KVMCLOCK_CTRL 76</span>
<span class="cp">#define KVM_CAP_SIGNAL_MSI 77</span>
<span class="cp">#define KVM_CAP_PPC_GET_SMMU_INFO 78</span>
<span class="cp">#define KVM_CAP_S390_COW 79</span>

<span class="cp">#ifdef KVM_CAP_IRQ_ROUTING</span>

<span class="k">struct</span> <span class="n">kvm_irq_routing_irqchip</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">irqchip</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pin</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_irq_routing_msi</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">address_lo</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">address_hi</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">data</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* gsi routing entry types */</span>
<span class="cp">#define KVM_IRQ_ROUTING_IRQCHIP 1</span>
<span class="cp">#define KVM_IRQ_ROUTING_MSI 2</span>

<span class="k">struct</span> <span class="n">kvm_irq_routing_entry</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">gsi</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">kvm_irq_routing_irqchip</span> <span class="n">irqchip</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">kvm_irq_routing_msi</span> <span class="n">msi</span><span class="p">;</span>
		<span class="n">__u32</span> <span class="n">pad</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">u</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_irq_routing</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">nr</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">kvm_irq_routing_entry</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#endif</span>

<span class="cp">#ifdef KVM_CAP_MCE</span>
<span class="cm">/* x86 MCE */</span>
<span class="k">struct</span> <span class="n">kvm_x86_mce</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">addr</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">misc</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">mcg_status</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">bank</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">pad1</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
	<span class="n">__u64</span> <span class="n">pad2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef KVM_CAP_XEN_HVM</span>
<span class="k">struct</span> <span class="n">kvm_xen_hvm_config</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">msr</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">blob_addr_32</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">blob_addr_64</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">blob_size_32</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">blob_size_64</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">pad2</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#define KVM_IRQFD_FLAG_DEASSIGN (1 &lt;&lt; 0)</span>

<span class="k">struct</span> <span class="n">kvm_irqfd</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">fd</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">gsi</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">pad</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_clock_data</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">clock</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pad</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define KVM_MMU_FSL_BOOKE_NOHV		0</span>
<span class="cp">#define KVM_MMU_FSL_BOOKE_HV		1</span>

<span class="k">struct</span> <span class="n">kvm_config_tlb</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">params</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">array</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">mmu_type</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">array_len</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_dirty_tlb</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">bitmap</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">num_dirty</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Available with KVM_CAP_ONE_REG */</span>

<span class="cp">#define KVM_REG_ARCH_MASK	0xff00000000000000ULL</span>
<span class="cp">#define KVM_REG_GENERIC		0x0000000000000000ULL</span>

<span class="cm">/*</span>
<span class="cm"> * Architecture specific registers are to be defined in arch headers and</span>
<span class="cm"> * ORed with the arch identifier.</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_REG_PPC		0x1000000000000000ULL</span>
<span class="cp">#define KVM_REG_X86		0x2000000000000000ULL</span>
<span class="cp">#define KVM_REG_IA64		0x3000000000000000ULL</span>
<span class="cp">#define KVM_REG_ARM		0x4000000000000000ULL</span>
<span class="cp">#define KVM_REG_S390		0x5000000000000000ULL</span>

<span class="cp">#define KVM_REG_SIZE_SHIFT	52</span>
<span class="cp">#define KVM_REG_SIZE_MASK	0x00f0000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U8		0x0000000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U16	0x0010000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U32	0x0020000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U64	0x0030000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U128	0x0040000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U256	0x0050000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U512	0x0060000000000000ULL</span>
<span class="cp">#define KVM_REG_SIZE_U1024	0x0070000000000000ULL</span>

<span class="k">struct</span> <span class="n">kvm_one_reg</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_msi</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">address_lo</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">address_hi</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">data</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">pad</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * ioctls for VM fds</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_SET_MEMORY_REGION     _IOW(KVMIO,  0x40, struct kvm_memory_region)</span>
<span class="cm">/*</span>
<span class="cm"> * KVM_CREATE_VCPU receives as a parameter the vcpu slot, and returns</span>
<span class="cm"> * a vcpu fd.</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_CREATE_VCPU           _IO(KVMIO,   0x41)</span>
<span class="cp">#define KVM_GET_DIRTY_LOG         _IOW(KVMIO,  0x42, struct kvm_dirty_log)</span>
<span class="cm">/* KVM_SET_MEMORY_ALIAS is obsolete: */</span>
<span class="cp">#define KVM_SET_MEMORY_ALIAS      _IOW(KVMIO,  0x43, struct kvm_memory_alias)</span>
<span class="cp">#define KVM_SET_NR_MMU_PAGES      _IO(KVMIO,   0x44)</span>
<span class="cp">#define KVM_GET_NR_MMU_PAGES      _IO(KVMIO,   0x45)</span>
<span class="cp">#define KVM_SET_USER_MEMORY_REGION _IOW(KVMIO, 0x46, \</span>
<span class="cp">					struct kvm_userspace_memory_region)</span>
<span class="cp">#define KVM_SET_TSS_ADDR          _IO(KVMIO,   0x47)</span>
<span class="cp">#define KVM_SET_IDENTITY_MAP_ADDR _IOW(KVMIO,  0x48, __u64)</span>

<span class="cm">/* enable ucontrol for s390 */</span>
<span class="k">struct</span> <span class="n">kvm_s390_ucas_mapping</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">user_addr</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">vcpu_addr</span><span class="p">;</span>
	<span class="n">__u64</span> <span class="n">length</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define KVM_S390_UCAS_MAP        _IOW(KVMIO, 0x50, struct kvm_s390_ucas_mapping)</span>
<span class="cp">#define KVM_S390_UCAS_UNMAP      _IOW(KVMIO, 0x51, struct kvm_s390_ucas_mapping)</span>
<span class="cp">#define KVM_S390_VCPU_FAULT	 _IOW(KVMIO, 0x52, unsigned long)</span>

<span class="cm">/* Device model IOC */</span>
<span class="cp">#define KVM_CREATE_IRQCHIP        _IO(KVMIO,   0x60)</span>
<span class="cp">#define KVM_IRQ_LINE              _IOW(KVMIO,  0x61, struct kvm_irq_level)</span>
<span class="cp">#define KVM_GET_IRQCHIP           _IOWR(KVMIO, 0x62, struct kvm_irqchip)</span>
<span class="cp">#define KVM_SET_IRQCHIP           _IOR(KVMIO,  0x63, struct kvm_irqchip)</span>
<span class="cp">#define KVM_CREATE_PIT            _IO(KVMIO,   0x64)</span>
<span class="cp">#define KVM_GET_PIT               _IOWR(KVMIO, 0x65, struct kvm_pit_state)</span>
<span class="cp">#define KVM_SET_PIT               _IOR(KVMIO,  0x66, struct kvm_pit_state)</span>
<span class="cp">#define KVM_IRQ_LINE_STATUS       _IOWR(KVMIO, 0x67, struct kvm_irq_level)</span>
<span class="cp">#define KVM_REGISTER_COALESCED_MMIO \</span>
<span class="cp">			_IOW(KVMIO,  0x67, struct kvm_coalesced_mmio_zone)</span>
<span class="cp">#define KVM_UNREGISTER_COALESCED_MMIO \</span>
<span class="cp">			_IOW(KVMIO,  0x68, struct kvm_coalesced_mmio_zone)</span>
<span class="cp">#define KVM_ASSIGN_PCI_DEVICE     _IOR(KVMIO,  0x69, \</span>
<span class="cp">				       struct kvm_assigned_pci_dev)</span>
<span class="cp">#define KVM_SET_GSI_ROUTING       _IOW(KVMIO,  0x6a, struct kvm_irq_routing)</span>
<span class="cm">/* deprecated, replaced by KVM_ASSIGN_DEV_IRQ */</span>
<span class="cp">#define KVM_ASSIGN_IRQ            __KVM_DEPRECATED_VM_R_0x70</span>
<span class="cp">#define KVM_ASSIGN_DEV_IRQ        _IOW(KVMIO,  0x70, struct kvm_assigned_irq)</span>
<span class="cp">#define KVM_REINJECT_CONTROL      _IO(KVMIO,   0x71)</span>
<span class="cp">#define KVM_DEASSIGN_PCI_DEVICE   _IOW(KVMIO,  0x72, \</span>
<span class="cp">				       struct kvm_assigned_pci_dev)</span>
<span class="cp">#define KVM_ASSIGN_SET_MSIX_NR    _IOW(KVMIO,  0x73, \</span>
<span class="cp">				       struct kvm_assigned_msix_nr)</span>
<span class="cp">#define KVM_ASSIGN_SET_MSIX_ENTRY _IOW(KVMIO,  0x74, \</span>
<span class="cp">				       struct kvm_assigned_msix_entry)</span>
<span class="cp">#define KVM_DEASSIGN_DEV_IRQ      _IOW(KVMIO,  0x75, struct kvm_assigned_irq)</span>
<span class="cp">#define KVM_IRQFD                 _IOW(KVMIO,  0x76, struct kvm_irqfd)</span>
<span class="cp">#define KVM_CREATE_PIT2		  _IOW(KVMIO,  0x77, struct kvm_pit_config)</span>
<span class="cp">#define KVM_SET_BOOT_CPU_ID       _IO(KVMIO,   0x78)</span>
<span class="cp">#define KVM_IOEVENTFD             _IOW(KVMIO,  0x79, struct kvm_ioeventfd)</span>
<span class="cp">#define KVM_XEN_HVM_CONFIG        _IOW(KVMIO,  0x7a, struct kvm_xen_hvm_config)</span>
<span class="cp">#define KVM_SET_CLOCK             _IOW(KVMIO,  0x7b, struct kvm_clock_data)</span>
<span class="cp">#define KVM_GET_CLOCK             _IOR(KVMIO,  0x7c, struct kvm_clock_data)</span>
<span class="cm">/* Available with KVM_CAP_PIT_STATE2 */</span>
<span class="cp">#define KVM_GET_PIT2              _IOR(KVMIO,  0x9f, struct kvm_pit_state2)</span>
<span class="cp">#define KVM_SET_PIT2              _IOW(KVMIO,  0xa0, struct kvm_pit_state2)</span>
<span class="cm">/* Available with KVM_CAP_PPC_GET_PVINFO */</span>
<span class="cp">#define KVM_PPC_GET_PVINFO	  _IOW(KVMIO,  0xa1, struct kvm_ppc_pvinfo)</span>
<span class="cm">/* Available with KVM_CAP_TSC_CONTROL */</span>
<span class="cp">#define KVM_SET_TSC_KHZ           _IO(KVMIO,  0xa2)</span>
<span class="cp">#define KVM_GET_TSC_KHZ           _IO(KVMIO,  0xa3)</span>
<span class="cm">/* Available with KVM_CAP_PCI_2_3 */</span>
<span class="cp">#define KVM_ASSIGN_SET_INTX_MASK  _IOW(KVMIO,  0xa4, \</span>
<span class="cp">				       struct kvm_assigned_pci_dev)</span>
<span class="cm">/* Available with KVM_CAP_SIGNAL_MSI */</span>
<span class="cp">#define KVM_SIGNAL_MSI            _IOW(KVMIO,  0xa5, struct kvm_msi)</span>
<span class="cm">/* Available with KVM_CAP_PPC_GET_SMMU_INFO */</span>
<span class="cp">#define KVM_PPC_GET_SMMU_INFO	  _IOR(KVMIO,  0xa6, struct kvm_ppc_smmu_info)</span>

<span class="cm">/*</span>
<span class="cm"> * ioctls for vcpu fds</span>
<span class="cm"> */</span>
<span class="cp">#define KVM_RUN                   _IO(KVMIO,   0x80)</span>
<span class="cp">#define KVM_GET_REGS              _IOR(KVMIO,  0x81, struct kvm_regs)</span>
<span class="cp">#define KVM_SET_REGS              _IOW(KVMIO,  0x82, struct kvm_regs)</span>
<span class="cp">#define KVM_GET_SREGS             _IOR(KVMIO,  0x83, struct kvm_sregs)</span>
<span class="cp">#define KVM_SET_SREGS             _IOW(KVMIO,  0x84, struct kvm_sregs)</span>
<span class="cp">#define KVM_TRANSLATE             _IOWR(KVMIO, 0x85, struct kvm_translation)</span>
<span class="cp">#define KVM_INTERRUPT             _IOW(KVMIO,  0x86, struct kvm_interrupt)</span>
<span class="cm">/* KVM_DEBUG_GUEST is no longer supported, use KVM_SET_GUEST_DEBUG instead */</span>
<span class="cp">#define KVM_DEBUG_GUEST           __KVM_DEPRECATED_VCPU_W_0x87</span>
<span class="cp">#define KVM_GET_MSRS              _IOWR(KVMIO, 0x88, struct kvm_msrs)</span>
<span class="cp">#define KVM_SET_MSRS              _IOW(KVMIO,  0x89, struct kvm_msrs)</span>
<span class="cp">#define KVM_SET_CPUID             _IOW(KVMIO,  0x8a, struct kvm_cpuid)</span>
<span class="cp">#define KVM_SET_SIGNAL_MASK       _IOW(KVMIO,  0x8b, struct kvm_signal_mask)</span>
<span class="cp">#define KVM_GET_FPU               _IOR(KVMIO,  0x8c, struct kvm_fpu)</span>
<span class="cp">#define KVM_SET_FPU               _IOW(KVMIO,  0x8d, struct kvm_fpu)</span>
<span class="cp">#define KVM_GET_LAPIC             _IOR(KVMIO,  0x8e, struct kvm_lapic_state)</span>
<span class="cp">#define KVM_SET_LAPIC             _IOW(KVMIO,  0x8f, struct kvm_lapic_state)</span>
<span class="cp">#define KVM_SET_CPUID2            _IOW(KVMIO,  0x90, struct kvm_cpuid2)</span>
<span class="cp">#define KVM_GET_CPUID2            _IOWR(KVMIO, 0x91, struct kvm_cpuid2)</span>
<span class="cm">/* Available with KVM_CAP_VAPIC */</span>
<span class="cp">#define KVM_TPR_ACCESS_REPORTING  _IOWR(KVMIO, 0x92, struct kvm_tpr_access_ctl)</span>
<span class="cm">/* Available with KVM_CAP_VAPIC */</span>
<span class="cp">#define KVM_SET_VAPIC_ADDR        _IOW(KVMIO,  0x93, struct kvm_vapic_addr)</span>
<span class="cm">/* valid for virtual machine (for floating interrupt)_and_ vcpu */</span>
<span class="cp">#define KVM_S390_INTERRUPT        _IOW(KVMIO,  0x94, struct kvm_s390_interrupt)</span>
<span class="cm">/* store status for s390 */</span>
<span class="cp">#define KVM_S390_STORE_STATUS_NOADDR    (-1ul)</span>
<span class="cp">#define KVM_S390_STORE_STATUS_PREFIXED  (-2ul)</span>
<span class="cp">#define KVM_S390_STORE_STATUS	  _IOW(KVMIO,  0x95, unsigned long)</span>
<span class="cm">/* initial ipl psw for s390 */</span>
<span class="cp">#define KVM_S390_SET_INITIAL_PSW  _IOW(KVMIO,  0x96, struct kvm_s390_psw)</span>
<span class="cm">/* initial reset for s390 */</span>
<span class="cp">#define KVM_S390_INITIAL_RESET    _IO(KVMIO,   0x97)</span>
<span class="cp">#define KVM_GET_MP_STATE          _IOR(KVMIO,  0x98, struct kvm_mp_state)</span>
<span class="cp">#define KVM_SET_MP_STATE          _IOW(KVMIO,  0x99, struct kvm_mp_state)</span>
<span class="cm">/* Available with KVM_CAP_NMI */</span>
<span class="cp">#define KVM_NMI                   _IO(KVMIO,   0x9a)</span>
<span class="cm">/* Available with KVM_CAP_SET_GUEST_DEBUG */</span>
<span class="cp">#define KVM_SET_GUEST_DEBUG       _IOW(KVMIO,  0x9b, struct kvm_guest_debug)</span>
<span class="cm">/* MCE for x86 */</span>
<span class="cp">#define KVM_X86_SETUP_MCE         _IOW(KVMIO,  0x9c, __u64)</span>
<span class="cp">#define KVM_X86_GET_MCE_CAP_SUPPORTED _IOR(KVMIO,  0x9d, __u64)</span>
<span class="cp">#define KVM_X86_SET_MCE           _IOW(KVMIO,  0x9e, struct kvm_x86_mce)</span>
<span class="cm">/* IA64 stack access */</span>
<span class="cp">#define KVM_IA64_VCPU_GET_STACK   _IOR(KVMIO,  0x9a, void *)</span>
<span class="cp">#define KVM_IA64_VCPU_SET_STACK   _IOW(KVMIO,  0x9b, void *)</span>
<span class="cm">/* Available with KVM_CAP_VCPU_EVENTS */</span>
<span class="cp">#define KVM_GET_VCPU_EVENTS       _IOR(KVMIO,  0x9f, struct kvm_vcpu_events)</span>
<span class="cp">#define KVM_SET_VCPU_EVENTS       _IOW(KVMIO,  0xa0, struct kvm_vcpu_events)</span>
<span class="cm">/* Available with KVM_CAP_DEBUGREGS */</span>
<span class="cp">#define KVM_GET_DEBUGREGS         _IOR(KVMIO,  0xa1, struct kvm_debugregs)</span>
<span class="cp">#define KVM_SET_DEBUGREGS         _IOW(KVMIO,  0xa2, struct kvm_debugregs)</span>
<span class="cp">#define KVM_ENABLE_CAP            _IOW(KVMIO,  0xa3, struct kvm_enable_cap)</span>
<span class="cm">/* Available with KVM_CAP_XSAVE */</span>
<span class="cp">#define KVM_GET_XSAVE		  _IOR(KVMIO,  0xa4, struct kvm_xsave)</span>
<span class="cp">#define KVM_SET_XSAVE		  _IOW(KVMIO,  0xa5, struct kvm_xsave)</span>
<span class="cm">/* Available with KVM_CAP_XCRS */</span>
<span class="cp">#define KVM_GET_XCRS		  _IOR(KVMIO,  0xa6, struct kvm_xcrs)</span>
<span class="cp">#define KVM_SET_XCRS		  _IOW(KVMIO,  0xa7, struct kvm_xcrs)</span>
<span class="cp">#define KVM_CREATE_SPAPR_TCE	  _IOW(KVMIO,  0xa8, struct kvm_create_spapr_tce)</span>
<span class="cm">/* Available with KVM_CAP_RMA */</span>
<span class="cp">#define KVM_ALLOCATE_RMA	  _IOR(KVMIO,  0xa9, struct kvm_allocate_rma)</span>
<span class="cm">/* Available with KVM_CAP_SW_TLB */</span>
<span class="cp">#define KVM_DIRTY_TLB		  _IOW(KVMIO,  0xaa, struct kvm_dirty_tlb)</span>
<span class="cm">/* Available with KVM_CAP_ONE_REG */</span>
<span class="cp">#define KVM_GET_ONE_REG		  _IOW(KVMIO,  0xab, struct kvm_one_reg)</span>
<span class="cp">#define KVM_SET_ONE_REG		  _IOW(KVMIO,  0xac, struct kvm_one_reg)</span>
<span class="cm">/* VM is being stopped by host */</span>
<span class="cp">#define KVM_KVMCLOCK_CTRL	  _IO(KVMIO,   0xad)</span>

<span class="cp">#define KVM_DEV_ASSIGN_ENABLE_IOMMU	(1 &lt;&lt; 0)</span>
<span class="cp">#define KVM_DEV_ASSIGN_PCI_2_3		(1 &lt;&lt; 1)</span>
<span class="cp">#define KVM_DEV_ASSIGN_MASK_INTX	(1 &lt;&lt; 2)</span>

<span class="k">struct</span> <span class="n">kvm_assigned_pci_dev</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">assigned_dev_id</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">busnr</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">devfn</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">segnr</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">__u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="cp">#define KVM_DEV_IRQ_HOST_INTX    (1 &lt;&lt; 0)</span>
<span class="cp">#define KVM_DEV_IRQ_HOST_MSI     (1 &lt;&lt; 1)</span>
<span class="cp">#define KVM_DEV_IRQ_HOST_MSIX    (1 &lt;&lt; 2)</span>

<span class="cp">#define KVM_DEV_IRQ_GUEST_INTX   (1 &lt;&lt; 8)</span>
<span class="cp">#define KVM_DEV_IRQ_GUEST_MSI    (1 &lt;&lt; 9)</span>
<span class="cp">#define KVM_DEV_IRQ_GUEST_MSIX   (1 &lt;&lt; 10)</span>

<span class="cp">#define KVM_DEV_IRQ_HOST_MASK	 0x00ff</span>
<span class="cp">#define KVM_DEV_IRQ_GUEST_MASK   0xff00</span>

<span class="k">struct</span> <span class="n">kvm_assigned_irq</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">assigned_dev_id</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">host_irq</span><span class="p">;</span> <span class="cm">/* ignored (legacy field) */</span>
	<span class="n">__u32</span> <span class="n">guest_irq</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">__u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">kvm_assigned_msix_nr</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">assigned_dev_id</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">entry_nr</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">padding</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define KVM_MAX_MSIX_PER_DEV		256</span>
<span class="k">struct</span> <span class="n">kvm_assigned_msix_entry</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">assigned_dev_id</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">gsi</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">entry</span><span class="p">;</span> <span class="cm">/* The index of entry in the MSI-X table */</span>
	<span class="n">__u16</span> <span class="n">padding</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* __LINUX_KVM_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
