<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › mmc › sdio.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>sdio.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  include/linux/mmc/sdio.h</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright 2006-2007 Pierre Ossman</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or (at</span>
<span class="cm"> * your option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef LINUX_MMC_SDIO_H</span>
<span class="cp">#define LINUX_MMC_SDIO_H</span>

<span class="cm">/* SDIO commands                         type  argument     response */</span>
<span class="cp">#define SD_IO_SEND_OP_COND          5 </span><span class="cm">/* bcr  [23:0] OCR         R4  */</span><span class="cp"></span>
<span class="cp">#define SD_IO_RW_DIRECT            52 </span><span class="cm">/* ac   [31:0] See below   R5  */</span><span class="cp"></span>
<span class="cp">#define SD_IO_RW_EXTENDED          53 </span><span class="cm">/* adtc [31:0] See below   R5  */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * SD_IO_RW_DIRECT argument format:</span>
<span class="cm"> *</span>
<span class="cm"> *      [31] R/W flag</span>
<span class="cm"> *      [30:28] Function number</span>
<span class="cm"> *      [27] RAW flag</span>
<span class="cm"> *      [25:9] Register address</span>
<span class="cm"> *      [7:0] Data</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * SD_IO_RW_EXTENDED argument format:</span>
<span class="cm"> *</span>
<span class="cm"> *      [31] R/W flag</span>
<span class="cm"> *      [30:28] Function number</span>
<span class="cm"> *      [27] Block mode</span>
<span class="cm"> *      [26] Increment address</span>
<span class="cm"> *      [25:9] Register address</span>
<span class="cm"> *      [8:0] Byte/block count</span>
<span class="cm"> */</span>

<span class="cp">#define R4_18V_PRESENT (1&lt;&lt;24)</span>
<span class="cp">#define R4_MEMORY_PRESENT (1 &lt;&lt; 27)</span>

<span class="cm">/*</span>
<span class="cm">  SDIO status in R5</span>
<span class="cm">  Type</span>
<span class="cm">	e : error bit</span>
<span class="cm">	s : status bit</span>
<span class="cm">	r : detected and set for the actual command response</span>
<span class="cm">	x : detected and set during command execution. the host must poll</span>
<span class="cm">            the card by sending status command in order to read these bits.</span>
<span class="cm">  Clear condition</span>
<span class="cm">	a : according to the card state</span>
<span class="cm">	b : always related to the previous command. Reception of</span>
<span class="cm">            a valid command will clear it (with a delay of one command)</span>
<span class="cm">	c : clear by read</span>
<span class="cm"> */</span>

<span class="cp">#define R5_COM_CRC_ERROR	(1 &lt;&lt; 15)	</span><span class="cm">/* er, b */</span><span class="cp"></span>
<span class="cp">#define R5_ILLEGAL_COMMAND	(1 &lt;&lt; 14)	</span><span class="cm">/* er, b */</span><span class="cp"></span>
<span class="cp">#define R5_ERROR		(1 &lt;&lt; 11)	</span><span class="cm">/* erx, c */</span><span class="cp"></span>
<span class="cp">#define R5_FUNCTION_NUMBER	(1 &lt;&lt; 9)	</span><span class="cm">/* er, c */</span><span class="cp"></span>
<span class="cp">#define R5_OUT_OF_RANGE		(1 &lt;&lt; 8)	</span><span class="cm">/* er, c */</span><span class="cp"></span>
<span class="cp">#define R5_STATUS(x)		(x &amp; 0xCB00)</span>
<span class="cp">#define R5_IO_CURRENT_STATE(x)	((x &amp; 0x3000) &gt;&gt; 12) </span><span class="cm">/* s, b */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Card Common Control Registers (CCCR)</span>
<span class="cm"> */</span>

<span class="cp">#define SDIO_CCCR_CCCR		0x00</span>

<span class="cp">#define  SDIO_CCCR_REV_1_00	0	</span><span class="cm">/* CCCR/FBR Version 1.00 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_REV_1_10	1	</span><span class="cm">/* CCCR/FBR Version 1.10 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_REV_1_20	2	</span><span class="cm">/* CCCR/FBR Version 1.20 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_REV_3_00	3	</span><span class="cm">/* CCCR/FBR Version 3.00 */</span><span class="cp"></span>

<span class="cp">#define  SDIO_SDIO_REV_1_00	0	</span><span class="cm">/* SDIO Spec Version 1.00 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SDIO_REV_1_10	1	</span><span class="cm">/* SDIO Spec Version 1.10 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SDIO_REV_1_20	2	</span><span class="cm">/* SDIO Spec Version 1.20 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SDIO_REV_2_00	3	</span><span class="cm">/* SDIO Spec Version 2.00 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SDIO_REV_3_00	4	</span><span class="cm">/* SDIO Spec Version 3.00 */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_SD		0x01</span>

<span class="cp">#define  SDIO_SD_REV_1_01	0	</span><span class="cm">/* SD Physical Spec Version 1.01 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SD_REV_1_10	1	</span><span class="cm">/* SD Physical Spec Version 1.10 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SD_REV_2_00	2	</span><span class="cm">/* SD Physical Spec Version 2.00 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SD_REV_3_00	3	</span><span class="cm">/* SD Physical Spev Version 3.00 */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_IOEx		0x02</span>
<span class="cp">#define SDIO_CCCR_IORx		0x03</span>

<span class="cp">#define SDIO_CCCR_IENx		0x04	</span><span class="cm">/* Function/Master Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define SDIO_CCCR_INTx		0x05	</span><span class="cm">/* Function Interrupt Pending */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_ABORT		0x06	</span><span class="cm">/* function abort/card reset */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_IF		0x07	</span><span class="cm">/* bus interface controls */</span><span class="cp"></span>

<span class="cp">#define  SDIO_BUS_WIDTH_MASK	0x03	</span><span class="cm">/* data bus width setting */</span><span class="cp"></span>
<span class="cp">#define  SDIO_BUS_WIDTH_1BIT	0x00</span>
<span class="cp">#define  SDIO_BUS_WIDTH_RESERVED 0x01</span>
<span class="cp">#define  SDIO_BUS_WIDTH_4BIT	0x02</span>
<span class="cp">#define  SDIO_BUS_ECSI		0x20	</span><span class="cm">/* Enable continuous SPI interrupt */</span><span class="cp"></span>
<span class="cp">#define  SDIO_BUS_SCSI		0x40	</span><span class="cm">/* Support continuous SPI interrupt */</span><span class="cp"></span>

<span class="cp">#define  SDIO_BUS_ASYNC_INT	0x20</span>

<span class="cp">#define  SDIO_BUS_CD_DISABLE     0x80	</span><span class="cm">/* disable pull-up on DAT3 (pin 1) */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_CAPS		0x08</span>

<span class="cp">#define  SDIO_CCCR_CAP_SDC	0x01	</span><span class="cm">/* can do CMD52 while data transfer */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_SMB	0x02	</span><span class="cm">/* can do multi-block xfers (CMD53) */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_SRW	0x04	</span><span class="cm">/* supports read-wait protocol */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_SBS	0x08	</span><span class="cm">/* supports suspend/resume */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_S4MI	0x10	</span><span class="cm">/* interrupt during 4-bit CMD53 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_E4MI	0x20	</span><span class="cm">/* enable ints during 4-bit CMD53 */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_LSC	0x40	</span><span class="cm">/* low speed card */</span><span class="cp"></span>
<span class="cp">#define  SDIO_CCCR_CAP_4BLS	0x80	</span><span class="cm">/* 4 bit low speed card */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_CIS		0x09	</span><span class="cm">/* common CIS pointer (3 bytes) */</span><span class="cp"></span>

<span class="cm">/* Following 4 regs are valid only if SBS is set */</span>
<span class="cp">#define SDIO_CCCR_SUSPEND	0x0c</span>
<span class="cp">#define SDIO_CCCR_SELx		0x0d</span>
<span class="cp">#define SDIO_CCCR_EXECx		0x0e</span>
<span class="cp">#define SDIO_CCCR_READYx	0x0f</span>

<span class="cp">#define SDIO_CCCR_BLKSIZE	0x10</span>

<span class="cp">#define SDIO_CCCR_POWER		0x12</span>

<span class="cp">#define  SDIO_POWER_SMPC	0x01	</span><span class="cm">/* Supports Master Power Control */</span><span class="cp"></span>
<span class="cp">#define  SDIO_POWER_EMPC	0x02	</span><span class="cm">/* Enable Master Power Control */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_SPEED		0x13</span>

<span class="cp">#define  SDIO_SPEED_SHS		0x01	</span><span class="cm">/* Supports High-Speed mode */</span><span class="cp"></span>
<span class="cp">#define  SDIO_SPEED_BSS_SHIFT	1</span>
<span class="cp">#define  SDIO_SPEED_BSS_MASK	(7&lt;&lt;SDIO_SPEED_BSS_SHIFT)</span>
<span class="cp">#define  SDIO_SPEED_SDR12	(0&lt;&lt;SDIO_SPEED_BSS_SHIFT)</span>
<span class="cp">#define  SDIO_SPEED_SDR25	(1&lt;&lt;SDIO_SPEED_BSS_SHIFT)</span>
<span class="cp">#define  SDIO_SPEED_SDR50	(2&lt;&lt;SDIO_SPEED_BSS_SHIFT)</span>
<span class="cp">#define  SDIO_SPEED_SDR104	(3&lt;&lt;SDIO_SPEED_BSS_SHIFT)</span>
<span class="cp">#define  SDIO_SPEED_DDR50	(4&lt;&lt;SDIO_SPEED_BSS_SHIFT)</span>
<span class="cp">#define  SDIO_SPEED_EHS		SDIO_SPEED_SDR25	</span><span class="cm">/* Enable High-Speed */</span><span class="cp"></span>

<span class="cp">#define SDIO_CCCR_UHS		0x14</span>
<span class="cp">#define  SDIO_UHS_SDR50		0x01</span>
<span class="cp">#define  SDIO_UHS_SDR104	0x02</span>
<span class="cp">#define  SDIO_UHS_DDR50		0x04</span>

<span class="cp">#define SDIO_CCCR_DRIVE_STRENGTH 0x15</span>
<span class="cp">#define  SDIO_SDTx_MASK		0x07</span>
<span class="cp">#define  SDIO_DRIVE_SDTA	(1&lt;&lt;0)</span>
<span class="cp">#define  SDIO_DRIVE_SDTC	(1&lt;&lt;1)</span>
<span class="cp">#define  SDIO_DRIVE_SDTD	(1&lt;&lt;2)</span>
<span class="cp">#define  SDIO_DRIVE_DTSx_MASK	0x03</span>
<span class="cp">#define  SDIO_DRIVE_DTSx_SHIFT	4</span>
<span class="cp">#define  SDIO_DTSx_SET_TYPE_B	(0 &lt;&lt; SDIO_DRIVE_DTSx_SHIFT)</span>
<span class="cp">#define  SDIO_DTSx_SET_TYPE_A	(1 &lt;&lt; SDIO_DRIVE_DTSx_SHIFT)</span>
<span class="cp">#define  SDIO_DTSx_SET_TYPE_C	(2 &lt;&lt; SDIO_DRIVE_DTSx_SHIFT)</span>
<span class="cp">#define  SDIO_DTSx_SET_TYPE_D	(3 &lt;&lt; SDIO_DRIVE_DTSx_SHIFT)</span>
<span class="cm">/*</span>
<span class="cm"> * Function Basic Registers (FBR)</span>
<span class="cm"> */</span>

<span class="cp">#define SDIO_FBR_BASE(f)	((f) * 0x100) </span><span class="cm">/* base of function f&#39;s FBRs */</span><span class="cp"></span>

<span class="cp">#define SDIO_FBR_STD_IF		0x00</span>

<span class="cp">#define  SDIO_FBR_SUPPORTS_CSA	0x40	</span><span class="cm">/* supports Code Storage Area */</span><span class="cp"></span>
<span class="cp">#define  SDIO_FBR_ENABLE_CSA	0x80	</span><span class="cm">/* enable Code Storage Area */</span><span class="cp"></span>

<span class="cp">#define SDIO_FBR_STD_IF_EXT	0x01</span>

<span class="cp">#define SDIO_FBR_POWER		0x02</span>

<span class="cp">#define  SDIO_FBR_POWER_SPS	0x01	</span><span class="cm">/* Supports Power Selection */</span><span class="cp"></span>
<span class="cp">#define  SDIO_FBR_POWER_EPS	0x02	</span><span class="cm">/* Enable (low) Power Selection */</span><span class="cp"></span>

<span class="cp">#define SDIO_FBR_CIS		0x09	</span><span class="cm">/* CIS pointer (3 bytes) */</span><span class="cp"></span>


<span class="cp">#define SDIO_FBR_CSA		0x0C	</span><span class="cm">/* CSA pointer (3 bytes) */</span><span class="cp"></span>

<span class="cp">#define SDIO_FBR_CSA_DATA	0x0F</span>

<span class="cp">#define SDIO_FBR_BLKSIZE	0x10	</span><span class="cm">/* block size (2 bytes) */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* LINUX_MMC_SDIO_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
