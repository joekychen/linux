<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › netdev_features.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>netdev_features.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Network device features.</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version</span>
<span class="cm"> * 2 of the License, or (at your option) any later version.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _LINUX_NETDEV_FEATURES_H</span>
<span class="cp">#define _LINUX_NETDEV_FEATURES_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="k">typedef</span> <span class="n">u64</span> <span class="n">netdev_features_t</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NETIF_F_SG_BIT</span><span class="p">,</span>			<span class="cm">/* Scatter/gather IO. */</span>
	<span class="n">NETIF_F_IP_CSUM_BIT</span><span class="p">,</span>		<span class="cm">/* Can checksum TCP/UDP over IPv4. */</span>
	<span class="n">__UNUSED_NETIF_F_1</span><span class="p">,</span>
	<span class="n">NETIF_F_HW_CSUM_BIT</span><span class="p">,</span>		<span class="cm">/* Can checksum all the packets. */</span>
	<span class="n">NETIF_F_IPV6_CSUM_BIT</span><span class="p">,</span>		<span class="cm">/* Can checksum TCP/UDP over IPV6 */</span>
	<span class="n">NETIF_F_HIGHDMA_BIT</span><span class="p">,</span>		<span class="cm">/* Can DMA to high memory. */</span>
	<span class="n">NETIF_F_FRAGLIST_BIT</span><span class="p">,</span>		<span class="cm">/* Scatter/gather IO. */</span>
	<span class="n">NETIF_F_HW_VLAN_TX_BIT</span><span class="p">,</span>		<span class="cm">/* Transmit VLAN hw acceleration */</span>
	<span class="n">NETIF_F_HW_VLAN_RX_BIT</span><span class="p">,</span>		<span class="cm">/* Receive VLAN hw acceleration */</span>
	<span class="n">NETIF_F_HW_VLAN_FILTER_BIT</span><span class="p">,</span>	<span class="cm">/* Receive filtering on VLAN */</span>
	<span class="n">NETIF_F_VLAN_CHALLENGED_BIT</span><span class="p">,</span>	<span class="cm">/* Device cannot handle VLAN packets */</span>
	<span class="n">NETIF_F_GSO_BIT</span><span class="p">,</span>		<span class="cm">/* Enable software GSO. */</span>
	<span class="n">NETIF_F_LLTX_BIT</span><span class="p">,</span>		<span class="cm">/* LockLess TX - deprecated. Please */</span>
					<span class="cm">/* do not use LLTX in new drivers */</span>
	<span class="n">NETIF_F_NETNS_LOCAL_BIT</span><span class="p">,</span>	<span class="cm">/* Does not change network namespaces */</span>
	<span class="n">NETIF_F_GRO_BIT</span><span class="p">,</span>		<span class="cm">/* Generic receive offload */</span>
	<span class="n">NETIF_F_LRO_BIT</span><span class="p">,</span>		<span class="cm">/* large receive offload */</span>

	<span class="cm">/**/</span><span class="n">NETIF_F_GSO_SHIFT</span><span class="p">,</span>		<span class="cm">/* keep the order of SKB_GSO_* bits */</span>
	<span class="n">NETIF_F_TSO_BIT</span>			<span class="cm">/* ... TCPv4 segmentation */</span>
		<span class="o">=</span> <span class="n">NETIF_F_GSO_SHIFT</span><span class="p">,</span>
	<span class="n">NETIF_F_UFO_BIT</span><span class="p">,</span>		<span class="cm">/* ... UDPv4 fragmentation */</span>
	<span class="n">NETIF_F_GSO_ROBUST_BIT</span><span class="p">,</span>		<span class="cm">/* ... -&gt;SKB_GSO_DODGY */</span>
	<span class="n">NETIF_F_TSO_ECN_BIT</span><span class="p">,</span>		<span class="cm">/* ... TCP ECN support */</span>
	<span class="n">NETIF_F_TSO6_BIT</span><span class="p">,</span>		<span class="cm">/* ... TCPv6 segmentation */</span>
	<span class="n">NETIF_F_FSO_BIT</span><span class="p">,</span>		<span class="cm">/* ... FCoE segmentation */</span>
	<span class="n">NETIF_F_GSO_RESERVED1</span><span class="p">,</span>		<span class="cm">/* ... free (fill GSO_MASK to 8 bits) */</span>
	<span class="cm">/**/</span><span class="n">NETIF_F_GSO_LAST</span><span class="p">,</span>		<span class="cm">/* [can&#39;t be last bit, see GSO_MASK] */</span>
	<span class="n">NETIF_F_GSO_RESERVED2</span>		<span class="cm">/* ... free (fill GSO_MASK to 8 bits) */</span>
		<span class="o">=</span> <span class="n">NETIF_F_GSO_LAST</span><span class="p">,</span>

	<span class="n">NETIF_F_FCOE_CRC_BIT</span><span class="p">,</span>		<span class="cm">/* FCoE CRC32 */</span>
	<span class="n">NETIF_F_SCTP_CSUM_BIT</span><span class="p">,</span>		<span class="cm">/* SCTP checksum offload */</span>
	<span class="n">NETIF_F_FCOE_MTU_BIT</span><span class="p">,</span>		<span class="cm">/* Supports max FCoE MTU, 2158 bytes*/</span>
	<span class="n">NETIF_F_NTUPLE_BIT</span><span class="p">,</span>		<span class="cm">/* N-tuple filters supported */</span>
	<span class="n">NETIF_F_RXHASH_BIT</span><span class="p">,</span>		<span class="cm">/* Receive hashing offload */</span>
	<span class="n">NETIF_F_RXCSUM_BIT</span><span class="p">,</span>		<span class="cm">/* Receive checksumming offload */</span>
	<span class="n">NETIF_F_NOCACHE_COPY_BIT</span><span class="p">,</span>	<span class="cm">/* Use no-cache copyfromuser */</span>
	<span class="n">NETIF_F_LOOPBACK_BIT</span><span class="p">,</span>		<span class="cm">/* Enable loopback */</span>
	<span class="n">NETIF_F_RXFCS_BIT</span><span class="p">,</span>		<span class="cm">/* Append FCS to skb pkt data */</span>
	<span class="n">NETIF_F_RXALL_BIT</span><span class="p">,</span>		<span class="cm">/* Receive errored frames too */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Add your fresh new feature above and remember to update</span>
<span class="cm">	 * netdev_features_strings[] in net/core/ethtool.c and maybe</span>
<span class="cm">	 * some feature mask #defines below. Please also describe it</span>
<span class="cm">	 * in Documentation/networking/netdev-features.txt.</span>
<span class="cm">	 */</span>

	<span class="cm">/**/</span><span class="n">NETDEV_FEATURE_COUNT</span>
<span class="p">};</span>

<span class="cm">/* copy&#39;n&#39;paste compression ;) */</span>
<span class="cp">#define __NETIF_F_BIT(bit)	((netdev_features_t)1 &lt;&lt; (bit))</span>
<span class="cp">#define __NETIF_F(name)		__NETIF_F_BIT(NETIF_F_##name##_BIT)</span>

<span class="cp">#define NETIF_F_FCOE_CRC	__NETIF_F(FCOE_CRC)</span>
<span class="cp">#define NETIF_F_FCOE_MTU	__NETIF_F(FCOE_MTU)</span>
<span class="cp">#define NETIF_F_FRAGLIST	__NETIF_F(FRAGLIST)</span>
<span class="cp">#define NETIF_F_FSO		__NETIF_F(FSO)</span>
<span class="cp">#define NETIF_F_GRO		__NETIF_F(GRO)</span>
<span class="cp">#define NETIF_F_GSO		__NETIF_F(GSO)</span>
<span class="cp">#define NETIF_F_GSO_ROBUST	__NETIF_F(GSO_ROBUST)</span>
<span class="cp">#define NETIF_F_HIGHDMA		__NETIF_F(HIGHDMA)</span>
<span class="cp">#define NETIF_F_HW_CSUM		__NETIF_F(HW_CSUM)</span>
<span class="cp">#define NETIF_F_HW_VLAN_FILTER	__NETIF_F(HW_VLAN_FILTER)</span>
<span class="cp">#define NETIF_F_HW_VLAN_RX	__NETIF_F(HW_VLAN_RX)</span>
<span class="cp">#define NETIF_F_HW_VLAN_TX	__NETIF_F(HW_VLAN_TX)</span>
<span class="cp">#define NETIF_F_IP_CSUM		__NETIF_F(IP_CSUM)</span>
<span class="cp">#define NETIF_F_IPV6_CSUM	__NETIF_F(IPV6_CSUM)</span>
<span class="cp">#define NETIF_F_LLTX		__NETIF_F(LLTX)</span>
<span class="cp">#define NETIF_F_LOOPBACK	__NETIF_F(LOOPBACK)</span>
<span class="cp">#define NETIF_F_LRO		__NETIF_F(LRO)</span>
<span class="cp">#define NETIF_F_NETNS_LOCAL	__NETIF_F(NETNS_LOCAL)</span>
<span class="cp">#define NETIF_F_NOCACHE_COPY	__NETIF_F(NOCACHE_COPY)</span>
<span class="cp">#define NETIF_F_NTUPLE		__NETIF_F(NTUPLE)</span>
<span class="cp">#define NETIF_F_RXCSUM		__NETIF_F(RXCSUM)</span>
<span class="cp">#define NETIF_F_RXHASH		__NETIF_F(RXHASH)</span>
<span class="cp">#define NETIF_F_SCTP_CSUM	__NETIF_F(SCTP_CSUM)</span>
<span class="cp">#define NETIF_F_SG		__NETIF_F(SG)</span>
<span class="cp">#define NETIF_F_TSO6		__NETIF_F(TSO6)</span>
<span class="cp">#define NETIF_F_TSO_ECN		__NETIF_F(TSO_ECN)</span>
<span class="cp">#define NETIF_F_TSO		__NETIF_F(TSO)</span>
<span class="cp">#define NETIF_F_UFO		__NETIF_F(UFO)</span>
<span class="cp">#define NETIF_F_VLAN_CHALLENGED	__NETIF_F(VLAN_CHALLENGED)</span>
<span class="cp">#define NETIF_F_RXFCS		__NETIF_F(RXFCS)</span>
<span class="cp">#define NETIF_F_RXALL		__NETIF_F(RXALL)</span>

<span class="cm">/* Features valid for ethtool to change */</span>
<span class="cm">/* = all defined minus driver/device-class-related */</span>
<span class="cp">#define NETIF_F_NEVER_CHANGE	(NETIF_F_VLAN_CHALLENGED | \</span>
<span class="cp">				 NETIF_F_LLTX | NETIF_F_NETNS_LOCAL)</span>

<span class="cm">/* remember that ((t)1 &lt;&lt; t_BITS) is undefined in C99 */</span>
<span class="cp">#define NETIF_F_ETHTOOL_BITS	((__NETIF_F_BIT(NETDEV_FEATURE_COUNT - 1) | \</span>
<span class="cp">		(__NETIF_F_BIT(NETDEV_FEATURE_COUNT - 1) - 1)) &amp; \</span>
<span class="cp">		~NETIF_F_NEVER_CHANGE)</span>

<span class="cm">/* Segmentation offload feature mask */</span>
<span class="cp">#define NETIF_F_GSO_MASK	(__NETIF_F_BIT(NETIF_F_GSO_LAST + 1) - \</span>
<span class="cp">		__NETIF_F_BIT(NETIF_F_GSO_SHIFT))</span>

<span class="cm">/* List of features with software fallbacks. */</span>
<span class="cp">#define NETIF_F_GSO_SOFTWARE	(NETIF_F_TSO | NETIF_F_TSO_ECN | \</span>
<span class="cp">				 NETIF_F_TSO6 | NETIF_F_UFO)</span>

<span class="cp">#define NETIF_F_GEN_CSUM	NETIF_F_HW_CSUM</span>
<span class="cp">#define NETIF_F_V4_CSUM		(NETIF_F_GEN_CSUM | NETIF_F_IP_CSUM)</span>
<span class="cp">#define NETIF_F_V6_CSUM		(NETIF_F_GEN_CSUM | NETIF_F_IPV6_CSUM)</span>
<span class="cp">#define NETIF_F_ALL_CSUM	(NETIF_F_V4_CSUM | NETIF_F_V6_CSUM)</span>

<span class="cp">#define NETIF_F_ALL_TSO 	(NETIF_F_TSO | NETIF_F_TSO6 | NETIF_F_TSO_ECN)</span>

<span class="cp">#define NETIF_F_ALL_FCOE	(NETIF_F_FCOE_CRC | NETIF_F_FCOE_MTU | \</span>
<span class="cp">				 NETIF_F_FSO)</span>

<span class="cm">/*</span>
<span class="cm"> * If one device supports one of these features, then enable them</span>
<span class="cm"> * for all in netdev_increment_features.</span>
<span class="cm"> */</span>
<span class="cp">#define NETIF_F_ONE_FOR_ALL	(NETIF_F_GSO_SOFTWARE | NETIF_F_GSO_ROBUST | \</span>
<span class="cp">				 NETIF_F_SG | NETIF_F_HIGHDMA |		\</span>
<span class="cp">				 NETIF_F_FRAGLIST | NETIF_F_VLAN_CHALLENGED)</span>
<span class="cm">/*</span>
<span class="cm"> * If one device doesn&#39;t support one of these features, then disable it</span>
<span class="cm"> * for all in netdev_increment_features.</span>
<span class="cm"> */</span>
<span class="cp">#define NETIF_F_ALL_FOR_ALL	(NETIF_F_NOCACHE_COPY | NETIF_F_FSO)</span>

<span class="cm">/* changeable features with no special hardware requirements */</span>
<span class="cp">#define NETIF_F_SOFT_FEATURES	(NETIF_F_GSO | NETIF_F_GRO)</span>

<span class="cp">#endif	</span><span class="cm">/* _LINUX_NETDEV_FEATURES_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
