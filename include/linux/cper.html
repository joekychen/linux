<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › cper.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>cper.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * UEFI Common Platform Error Record</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2010, Intel Corp.</span>
<span class="cm"> *	Author: Huang Ying &lt;ying.huang@intel.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License version</span>
<span class="cm"> * 2 as published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>

<span class="cp">#ifndef LINUX_CPER_H</span>
<span class="cp">#define LINUX_CPER_H</span>

<span class="cp">#include &lt;linux/uuid.h&gt;</span>

<span class="cm">/* CPER record signature and the size */</span>
<span class="cp">#define CPER_SIG_RECORD				&quot;CPER&quot;</span>
<span class="cp">#define CPER_SIG_SIZE				4</span>
<span class="cm">/* Used in signature_end field in struct cper_record_header */</span>
<span class="cp">#define CPER_SIG_END				0xffffffff</span>

<span class="cm">/*</span>
<span class="cm"> * CPER record header revision, used in revision field in struct</span>
<span class="cm"> * cper_record_header</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_RECORD_REV				0x0100</span>

<span class="cm">/*</span>
<span class="cm"> * Severity difinition for error_severity in struct cper_record_header</span>
<span class="cm"> * and section_severity in struct cper_section_descriptor</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CPER_SEV_RECOVERABLE</span><span class="p">,</span>
	<span class="n">CPER_SEV_FATAL</span><span class="p">,</span>
	<span class="n">CPER_SEV_CORRECTED</span><span class="p">,</span>
	<span class="n">CPER_SEV_INFORMATIONAL</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Validation bits difinition for validation_bits in struct</span>
<span class="cm"> * cper_record_header. If set, corresponding fields in struct</span>
<span class="cm"> * cper_record_header contain valid information.</span>
<span class="cm"> *</span>
<span class="cm"> * corresponds platform_id</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_VALID_PLATFORM_ID			0x0001</span>
<span class="cm">/* corresponds timestamp */</span>
<span class="cp">#define CPER_VALID_TIMESTAMP			0x0002</span>
<span class="cm">/* corresponds partition_id */</span>
<span class="cp">#define CPER_VALID_PARTITION_ID			0x0004</span>

<span class="cm">/*</span>
<span class="cm"> * Notification type used to generate error record, used in</span>
<span class="cm"> * notification_type in struct cper_record_header</span>
<span class="cm"> *</span>
<span class="cm"> * Corrected Machine Check</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_NOTIFY_CMC							\</span>
<span class="cp">	UUID_LE(0x2DCE8BB1, 0xBDD7, 0x450e, 0xB9, 0xAD, 0x9C, 0xF4,	\</span>
<span class="cp">		0xEB, 0xD4, 0xF8, 0x90)</span>
<span class="cm">/* Corrected Platform Error */</span>
<span class="cp">#define CPER_NOTIFY_CPE							\</span>
<span class="cp">	UUID_LE(0x4E292F96, 0xD843, 0x4a55, 0xA8, 0xC2, 0xD4, 0x81,	\</span>
<span class="cp">		0xF2, 0x7E, 0xBE, 0xEE)</span>
<span class="cm">/* Machine Check Exception */</span>
<span class="cp">#define CPER_NOTIFY_MCE							\</span>
<span class="cp">	UUID_LE(0xE8F56FFE, 0x919C, 0x4cc5, 0xBA, 0x88, 0x65, 0xAB,	\</span>
<span class="cp">		0xE1, 0x49, 0x13, 0xBB)</span>
<span class="cm">/* PCI Express Error */</span>
<span class="cp">#define CPER_NOTIFY_PCIE						\</span>
<span class="cp">	UUID_LE(0xCF93C01F, 0x1A16, 0x4dfc, 0xB8, 0xBC, 0x9C, 0x4D,	\</span>
<span class="cp">		0xAF, 0x67, 0xC1, 0x04)</span>
<span class="cm">/* INIT Record (for IPF) */</span>
<span class="cp">#define CPER_NOTIFY_INIT						\</span>
<span class="cp">	UUID_LE(0xCC5263E8, 0x9308, 0x454a, 0x89, 0xD0, 0x34, 0x0B,	\</span>
<span class="cp">		0xD3, 0x9B, 0xC9, 0x8E)</span>
<span class="cm">/* Non-Maskable Interrupt */</span>
<span class="cp">#define CPER_NOTIFY_NMI							\</span>
<span class="cp">	UUID_LE(0x5BAD89FF, 0xB7E6, 0x42c9, 0x81, 0x4A, 0xCF, 0x24,	\</span>
<span class="cp">		0x85, 0xD6, 0xE9, 0x8A)</span>
<span class="cm">/* BOOT Error Record */</span>
<span class="cp">#define CPER_NOTIFY_BOOT						\</span>
<span class="cp">	UUID_LE(0x3D61A466, 0xAB40, 0x409a, 0xA6, 0x98, 0xF3, 0x62,	\</span>
<span class="cp">		0xD4, 0x64, 0xB3, 0x8F)</span>
<span class="cm">/* DMA Remapping Error */</span>
<span class="cp">#define CPER_NOTIFY_DMAR						\</span>
<span class="cp">	UUID_LE(0x667DD791, 0xC6B3, 0x4c27, 0x8A, 0x6B, 0x0F, 0x8E,	\</span>
<span class="cp">		0x72, 0x2D, 0xEB, 0x41)</span>

<span class="cm">/*</span>
<span class="cm"> * Flags bits definitions for flags in struct cper_record_header</span>
<span class="cm"> * If set, the error has been recovered</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_HW_ERROR_FLAGS_RECOVERED		0x1</span>
<span class="cm">/* If set, the error is for previous boot */</span>
<span class="cp">#define CPER_HW_ERROR_FLAGS_PREVERR		0x2</span>
<span class="cm">/* If set, the error is injected for testing */</span>
<span class="cp">#define CPER_HW_ERROR_FLAGS_SIMULATED		0x4</span>

<span class="cm">/*</span>
<span class="cm"> * CPER section header revision, used in revision field in struct</span>
<span class="cm"> * cper_section_descriptor</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_REV				0x0100</span>

<span class="cm">/*</span>
<span class="cm"> * Validation bits difinition for validation_bits in struct</span>
<span class="cm"> * cper_section_descriptor. If set, corresponding fields in struct</span>
<span class="cm"> * cper_section_descriptor contain valid information.</span>
<span class="cm"> *</span>
<span class="cm"> * corresponds fru_id</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_VALID_FRU_ID			0x1</span>
<span class="cm">/* corresponds fru_text */</span>
<span class="cp">#define CPER_SEC_VALID_FRU_TEXT			0x2</span>

<span class="cm">/*</span>
<span class="cm"> * Flags bits definitions for flags in struct cper_section_descriptor</span>
<span class="cm"> *</span>
<span class="cm"> * If set, the section is associated with the error condition</span>
<span class="cm"> * directly, and should be focused on</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_PRIMARY			0x0001</span>
<span class="cm">/*</span>
<span class="cm"> * If set, the error was not contained within the processor or memory</span>
<span class="cm"> * hierarchy and the error may have propagated to persistent storage</span>
<span class="cm"> * or network</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_CONTAINMENT_WARNING		0x0002</span>
<span class="cm">/* If set, the component must be re-initialized or re-enabled prior to use */</span>
<span class="cp">#define CPER_SEC_RESET				0x0004</span>
<span class="cm">/* If set, Linux may choose to discontinue use of the resource */</span>
<span class="cp">#define CPER_SEC_ERROR_THRESHOLD_EXCEEDED	0x0008</span>
<span class="cm">/*</span>
<span class="cm"> * If set, resource could not be queried for error information due to</span>
<span class="cm"> * conflicts with other system software or resources. Some fields of</span>
<span class="cm"> * the section will be invalid</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_RESOURCE_NOT_ACCESSIBLE	0x0010</span>
<span class="cm">/*</span>
<span class="cm"> * If set, action has been taken to ensure error containment (such as</span>
<span class="cm"> * poisoning data), but the error has not been fully corrected and the</span>
<span class="cm"> * data has not been consumed. Linux may choose to take further</span>
<span class="cm"> * corrective action before the data is consumed</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_LATENT_ERROR			0x0020</span>

<span class="cm">/*</span>
<span class="cm"> * Section type definitions, used in section_type field in struct</span>
<span class="cm"> * cper_section_descriptor</span>
<span class="cm"> *</span>
<span class="cm"> * Processor Generic</span>
<span class="cm"> */</span>
<span class="cp">#define CPER_SEC_PROC_GENERIC						\</span>
<span class="cp">	UUID_LE(0x9876CCAD, 0x47B4, 0x4bdb, 0xB6, 0x5E, 0x16, 0xF1,	\</span>
<span class="cp">		0x93, 0xC4, 0xF3, 0xDB)</span>
<span class="cm">/* Processor Specific: X86/X86_64 */</span>
<span class="cp">#define CPER_SEC_PROC_IA						\</span>
<span class="cp">	UUID_LE(0xDC3EA0B0, 0xA144, 0x4797, 0xB9, 0x5B, 0x53, 0xFA,	\</span>
<span class="cp">		0x24, 0x2B, 0x6E, 0x1D)</span>
<span class="cm">/* Processor Specific: IA64 */</span>
<span class="cp">#define CPER_SEC_PROC_IPF						\</span>
<span class="cp">	UUID_LE(0xE429FAF1, 0x3CB7, 0x11D4, 0x0B, 0xCA, 0x07, 0x00,	\</span>
<span class="cp">		0x80, 0xC7, 0x3C, 0x88, 0x81)</span>
<span class="cm">/* Platform Memory */</span>
<span class="cp">#define CPER_SEC_PLATFORM_MEM						\</span>
<span class="cp">	UUID_LE(0xA5BC1114, 0x6F64, 0x4EDE, 0xB8, 0x63, 0x3E, 0x83,	\</span>
<span class="cp">		0xED, 0x7C, 0x83, 0xB1)</span>
<span class="cp">#define CPER_SEC_PCIE							\</span>
<span class="cp">	UUID_LE(0xD995E954, 0xBBC1, 0x430F, 0xAD, 0x91, 0xB4, 0x4D,	\</span>
<span class="cp">		0xCB, 0x3C, 0x6F, 0x35)</span>
<span class="cm">/* Firmware Error Record Reference */</span>
<span class="cp">#define CPER_SEC_FW_ERR_REC_REF						\</span>
<span class="cp">	UUID_LE(0x81212A96, 0x09ED, 0x4996, 0x94, 0x71, 0x8D, 0x72,	\</span>
<span class="cp">		0x9C, 0x8E, 0x69, 0xED)</span>
<span class="cm">/* PCI/PCI-X Bus */</span>
<span class="cp">#define CPER_SEC_PCI_X_BUS						\</span>
<span class="cp">	UUID_LE(0xC5753963, 0x3B84, 0x4095, 0xBF, 0x78, 0xED, 0xDA,	\</span>
<span class="cp">		0xD3, 0xF9, 0xC9, 0xDD)</span>
<span class="cm">/* PCI Component/Device */</span>
<span class="cp">#define CPER_SEC_PCI_DEV						\</span>
<span class="cp">	UUID_LE(0xEB5E4685, 0xCA66, 0x4769, 0xB6, 0xA2, 0x26, 0x06,	\</span>
<span class="cp">		0x8B, 0x00, 0x13, 0x26)</span>
<span class="cp">#define CPER_SEC_DMAR_GENERIC						\</span>
<span class="cp">	UUID_LE(0x5B51FEF7, 0xC79D, 0x4434, 0x8F, 0x1B, 0xAA, 0x62,	\</span>
<span class="cp">		0xDE, 0x3E, 0x2C, 0x64)</span>
<span class="cm">/* Intel VT for Directed I/O specific DMAr */</span>
<span class="cp">#define CPER_SEC_DMAR_VT						\</span>
<span class="cp">	UUID_LE(0x71761D37, 0x32B2, 0x45cd, 0xA7, 0xD0, 0xB0, 0xFE,	\</span>
<span class="cp">		0xDD, 0x93, 0xE8, 0xCF)</span>
<span class="cm">/* IOMMU specific DMAr */</span>
<span class="cp">#define CPER_SEC_DMAR_IOMMU						\</span>
<span class="cp">	UUID_LE(0x036F84E1, 0x7F37, 0x428c, 0xA7, 0x9E, 0x57, 0x5F,	\</span>
<span class="cp">		0xDF, 0xAA, 0x84, 0xEC)</span>

<span class="cp">#define CPER_PROC_VALID_TYPE			0x0001</span>
<span class="cp">#define CPER_PROC_VALID_ISA			0x0002</span>
<span class="cp">#define CPER_PROC_VALID_ERROR_TYPE		0x0004</span>
<span class="cp">#define CPER_PROC_VALID_OPERATION		0x0008</span>
<span class="cp">#define CPER_PROC_VALID_FLAGS			0x0010</span>
<span class="cp">#define CPER_PROC_VALID_LEVEL			0x0020</span>
<span class="cp">#define CPER_PROC_VALID_VERSION			0x0040</span>
<span class="cp">#define CPER_PROC_VALID_BRAND_INFO		0x0080</span>
<span class="cp">#define CPER_PROC_VALID_ID			0x0100</span>
<span class="cp">#define CPER_PROC_VALID_TARGET_ADDRESS		0x0200</span>
<span class="cp">#define CPER_PROC_VALID_REQUESTOR_ID		0x0400</span>
<span class="cp">#define CPER_PROC_VALID_RESPONDER_ID		0x0800</span>
<span class="cp">#define CPER_PROC_VALID_IP			0x1000</span>

<span class="cp">#define CPER_MEM_VALID_ERROR_STATUS		0x0001</span>
<span class="cp">#define CPER_MEM_VALID_PHYSICAL_ADDRESS		0x0002</span>
<span class="cp">#define CPER_MEM_VALID_PHYSICAL_ADDRESS_MASK	0x0004</span>
<span class="cp">#define CPER_MEM_VALID_NODE			0x0008</span>
<span class="cp">#define CPER_MEM_VALID_CARD			0x0010</span>
<span class="cp">#define CPER_MEM_VALID_MODULE			0x0020</span>
<span class="cp">#define CPER_MEM_VALID_BANK			0x0040</span>
<span class="cp">#define CPER_MEM_VALID_DEVICE			0x0080</span>
<span class="cp">#define CPER_MEM_VALID_ROW			0x0100</span>
<span class="cp">#define CPER_MEM_VALID_COLUMN			0x0200</span>
<span class="cp">#define CPER_MEM_VALID_BIT_POSITION		0x0400</span>
<span class="cp">#define CPER_MEM_VALID_REQUESTOR_ID		0x0800</span>
<span class="cp">#define CPER_MEM_VALID_RESPONDER_ID		0x1000</span>
<span class="cp">#define CPER_MEM_VALID_TARGET_ID		0x2000</span>
<span class="cp">#define CPER_MEM_VALID_ERROR_TYPE		0x4000</span>

<span class="cp">#define CPER_PCIE_VALID_PORT_TYPE		0x0001</span>
<span class="cp">#define CPER_PCIE_VALID_VERSION			0x0002</span>
<span class="cp">#define CPER_PCIE_VALID_COMMAND_STATUS		0x0004</span>
<span class="cp">#define CPER_PCIE_VALID_DEVICE_ID		0x0008</span>
<span class="cp">#define CPER_PCIE_VALID_SERIAL_NUMBER		0x0010</span>
<span class="cp">#define CPER_PCIE_VALID_BRIDGE_CONTROL_STATUS	0x0020</span>
<span class="cp">#define CPER_PCIE_VALID_CAPABILITY		0x0040</span>
<span class="cp">#define CPER_PCIE_VALID_AER_INFO		0x0080</span>

<span class="cp">#define CPER_PCIE_SLOT_SHIFT			3</span>

<span class="cm">/*</span>
<span class="cm"> * All tables and structs must be byte-packed to match CPER</span>
<span class="cm"> * specification, since the tables are provided by the system BIOS</span>
<span class="cm"> */</span>
<span class="cp">#pragma pack(1)</span>

<span class="k">struct</span> <span class="n">cper_record_header</span> <span class="p">{</span>
	<span class="kt">char</span>	<span class="n">signature</span><span class="p">[</span><span class="n">CPER_SIG_SIZE</span><span class="p">];</span>	<span class="cm">/* must be CPER_SIG_RECORD */</span>
	<span class="n">__u16</span>	<span class="n">revision</span><span class="p">;</span>			<span class="cm">/* must be CPER_RECORD_REV */</span>
	<span class="n">__u32</span>	<span class="n">signature_end</span><span class="p">;</span>			<span class="cm">/* must be CPER_SIG_END */</span>
	<span class="n">__u16</span>	<span class="n">section_count</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">error_severity</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">record_length</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">timestamp</span><span class="p">;</span>
	<span class="n">uuid_le</span>	<span class="n">platform_id</span><span class="p">;</span>
	<span class="n">uuid_le</span>	<span class="n">partition_id</span><span class="p">;</span>
	<span class="n">uuid_le</span>	<span class="n">creator_id</span><span class="p">;</span>
	<span class="n">uuid_le</span>	<span class="n">notification_type</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">record_id</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">flags</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">persistence_information</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">reserved</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>			<span class="cm">/* must be zero */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cper_section_descriptor</span> <span class="p">{</span>
	<span class="n">__u32</span>	<span class="n">section_offset</span><span class="p">;</span>		<span class="cm">/* Offset in bytes of the</span>
<span class="cm">					 *  section body from the base</span>
<span class="cm">					 *  of the record header */</span>
	<span class="n">__u32</span>	<span class="n">section_length</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">revision</span><span class="p">;</span>		<span class="cm">/* must be CPER_RECORD_REV */</span>
	<span class="n">__u8</span>	<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">reserved</span><span class="p">;</span>		<span class="cm">/* must be zero */</span>
	<span class="n">__u32</span>	<span class="n">flags</span><span class="p">;</span>
	<span class="n">uuid_le</span>	<span class="n">section_type</span><span class="p">;</span>
	<span class="n">uuid_le</span>	<span class="n">fru_id</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">section_severity</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">fru_text</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Generic Processor Error Section */</span>
<span class="k">struct</span> <span class="n">cper_sec_proc_generic</span> <span class="p">{</span>
	<span class="n">__u64</span>	<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">proc_type</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">proc_isa</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">proc_error_type</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">operation</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">flags</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">level</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">reserved</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">cpu_version</span><span class="p">;</span>
	<span class="kt">char</span>	<span class="n">cpu_brand</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
	<span class="n">__u64</span>	<span class="n">proc_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">target_addr</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">requestor_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">responder_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">ip</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* IA32/X64 Processor Error Section */</span>
<span class="k">struct</span> <span class="n">cper_sec_proc_ia</span> <span class="p">{</span>
	<span class="n">__u64</span>	<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">lapic_id</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">cpuid</span><span class="p">[</span><span class="mi">48</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* IA32/X64 Processor Error Information Structure */</span>
<span class="k">struct</span> <span class="n">cper_ia_err_info</span> <span class="p">{</span>
	<span class="n">uuid_le</span>	<span class="n">err_type</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">check_info</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">target_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">requestor_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">responder_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">ip</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* IA32/X64 Processor Context Information Structure */</span>
<span class="k">struct</span> <span class="n">cper_ia_proc_ctx</span> <span class="p">{</span>
	<span class="n">__u16</span>	<span class="n">reg_ctx_type</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">reg_arr_size</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">msr_addr</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">mm_reg_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Memory Error Section */</span>
<span class="k">struct</span> <span class="n">cper_sec_mem_err</span> <span class="p">{</span>
	<span class="n">__u64</span>	<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">error_status</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">physical_addr</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">physical_addr_mask</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">node</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">card</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">module</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">bank</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">device</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">row</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">column</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">bit_pos</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">requestor_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">responder_id</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">target_id</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">error_type</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cper_sec_pcie</span> <span class="p">{</span>
	<span class="n">__u64</span>		<span class="n">validation_bits</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">port_type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__u8</span>	<span class="n">minor</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">major</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">reserved</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="p">}</span>		<span class="n">version</span><span class="p">;</span>
	<span class="n">__u16</span>		<span class="n">command</span><span class="p">;</span>
	<span class="n">__u16</span>		<span class="n">status</span><span class="p">;</span>
	<span class="n">__u32</span>		<span class="n">reserved</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__u16</span>	<span class="n">vendor_id</span><span class="p">;</span>
		<span class="n">__u16</span>	<span class="n">device_id</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">class_code</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
		<span class="n">__u8</span>	<span class="n">function</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">device</span><span class="p">;</span>
		<span class="n">__u16</span>	<span class="n">segment</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">bus</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">secondary_bus</span><span class="p">;</span>
		<span class="n">__u16</span>	<span class="n">slot</span><span class="p">;</span>
		<span class="n">__u8</span>	<span class="n">reserved</span><span class="p">;</span>
	<span class="p">}</span>		<span class="n">device_id</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__u32</span>	<span class="n">lower</span><span class="p">;</span>
		<span class="n">__u32</span>	<span class="n">upper</span><span class="p">;</span>
	<span class="p">}</span>		<span class="n">serial_number</span><span class="p">;</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__u16</span>	<span class="n">secondary_status</span><span class="p">;</span>
		<span class="n">__u16</span>	<span class="n">control</span><span class="p">;</span>
	<span class="p">}</span>		<span class="n">bridge</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">capability</span><span class="p">[</span><span class="mi">60</span><span class="p">];</span>
	<span class="n">__u8</span>	<span class="n">aer_info</span><span class="p">[</span><span class="mi">96</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Reset to default packing */</span>
<span class="cp">#pragma pack()</span>

<span class="n">u64</span> <span class="n">cper_next_record_id</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">cper_print_bits</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">prefix</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bits</span><span class="p">,</span>
		     <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">strs</span><span class="p">[],</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">strs_size</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
