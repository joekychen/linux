<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › irda.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>irda.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*********************************************************************</span>
<span class="cm"> *                </span>
<span class="cm"> * Filename:      irda.h</span>
<span class="cm"> * Version:       </span>
<span class="cm"> * Description:   </span>
<span class="cm"> * Status:        Experimental.</span>
<span class="cm"> * Author:        Dag Brattli &lt;dagb@cs.uit.no&gt;</span>
<span class="cm"> * Created at:    Mon Mar  8 14:06:12 1999</span>
<span class="cm"> * Modified at:   Sat Dec 25 16:06:42 1999</span>
<span class="cm"> * Modified by:   Dag Brattli &lt;dagb@cs.uit.no&gt;</span>
<span class="cm"> * </span>
<span class="cm"> *     Copyright (c) 1999 Dag Brattli, All Rights Reserved.</span>
<span class="cm"> *      </span>
<span class="cm"> *     This program is free software; you can redistribute it and/or </span>
<span class="cm"> *     modify it under the terms of the GNU General Public License as </span>
<span class="cm"> *     published by the Free Software Foundation; either version 2 of </span>
<span class="cm"> *     the License, or (at your option) any later version.</span>
<span class="cm"> *  </span>
<span class="cm"> *     Neither Dag Brattli nor University of Tromsø admit liability nor</span>
<span class="cm"> *     provide warranty for any of this software. This material is </span>
<span class="cm"> *     provided &quot;AS-IS&quot; and at no charge.</span>
<span class="cm"> *</span>
<span class="cm"> ********************************************************************/</span>

<span class="cp">#ifndef KERNEL_IRDA_H</span>
<span class="cp">#define KERNEL_IRDA_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/socket.h&gt;</span>

<span class="cm">/* Note that this file is shared with user space. */</span>

<span class="cm">/* Hint bit positions for first hint byte */</span>
<span class="cp">#define HINT_PNP         0x01</span>
<span class="cp">#define HINT_PDA         0x02</span>
<span class="cp">#define HINT_COMPUTER    0x04</span>
<span class="cp">#define HINT_PRINTER     0x08</span>
<span class="cp">#define HINT_MODEM       0x10</span>
<span class="cp">#define HINT_FAX         0x20</span>
<span class="cp">#define HINT_LAN         0x40</span>
<span class="cp">#define HINT_EXTENSION   0x80</span>

<span class="cm">/* Hint bit positions for second hint byte (first extension byte) */</span>
<span class="cp">#define HINT_TELEPHONY   0x01</span>
<span class="cp">#define HINT_FILE_SERVER 0x02</span>
<span class="cp">#define HINT_COMM        0x04</span>
<span class="cp">#define HINT_MESSAGE     0x08</span>
<span class="cp">#define HINT_HTTP        0x10</span>
<span class="cp">#define HINT_OBEX        0x20</span>

<span class="cm">/* IrLMP character code values */</span>
<span class="cp">#define CS_ASCII         0x00</span>
<span class="cp">#define	CS_ISO_8859_1    0x01</span>
<span class="cp">#define	CS_ISO_8859_2    0x02</span>
<span class="cp">#define	CS_ISO_8859_3    0x03</span>
<span class="cp">#define	CS_ISO_8859_4    0x04</span>
<span class="cp">#define	CS_ISO_8859_5    0x05</span>
<span class="cp">#define	CS_ISO_8859_6    0x06</span>
<span class="cp">#define	CS_ISO_8859_7    0x07</span>
<span class="cp">#define	CS_ISO_8859_8    0x08</span>
<span class="cp">#define	CS_ISO_8859_9    0x09</span>
<span class="cp">#define CS_UNICODE       0xff</span>

<span class="cm">/* These are the currently known dongles */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">IRDA_TEKRAM_DONGLE</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">IRDA_ESI_DONGLE</span>          <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">IRDA_ACTISYS_DONGLE</span>      <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">IRDA_ACTISYS_PLUS_DONGLE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">IRDA_GIRBIL_DONGLE</span>       <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">IRDA_LITELINK_DONGLE</span>     <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">IRDA_AIRPORT_DONGLE</span>      <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">IRDA_OLD_BELKIN_DONGLE</span>   <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">IRDA_EP7211_IR</span>           <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">IRDA_MCP2120_DONGLE</span>      <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">IRDA_ACT200L_DONGLE</span>      <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">IRDA_MA600_DONGLE</span>        <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">IRDA_TOIM3232_DONGLE</span>     <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">IRDA_EP7211_DONGLE</span>       <span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
<span class="p">}</span> <span class="n">IRDA_DONGLE</span><span class="p">;</span>

<span class="cm">/* Protocol types to be used for SOCK_DGRAM */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">IRDAPROTO_UNITDATA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">IRDAPROTO_ULTRA</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">IRDAPROTO_MAX</span>
<span class="p">};</span>

<span class="cp">#define SOL_IRLMP      266 </span><span class="cm">/* Same as SOL_IRDA for now */</span><span class="cp"></span>
<span class="cp">#define SOL_IRTTP      266 </span><span class="cm">/* Same as SOL_IRDA for now */</span><span class="cp"></span>

<span class="cp">#define IRLMP_ENUMDEVICES        1	</span><span class="cm">/* Return discovery log */</span><span class="cp"></span>
<span class="cp">#define IRLMP_IAS_SET            2	</span><span class="cm">/* Set an attribute in local IAS */</span><span class="cp"></span>
<span class="cp">#define IRLMP_IAS_QUERY          3	</span><span class="cm">/* Query remote IAS for attribute */</span><span class="cp"></span>
<span class="cp">#define IRLMP_HINTS_SET          4	</span><span class="cm">/* Set hint bits advertised */</span><span class="cp"></span>
<span class="cp">#define IRLMP_QOS_SET            5</span>
<span class="cp">#define IRLMP_QOS_GET            6</span>
<span class="cp">#define IRLMP_MAX_SDU_SIZE       7</span>
<span class="cp">#define IRLMP_IAS_GET            8	</span><span class="cm">/* Get an attribute from local IAS */</span><span class="cp"></span>
<span class="cp">#define IRLMP_IAS_DEL		 9	</span><span class="cm">/* Remove attribute from local IAS */</span><span class="cp"></span>
<span class="cp">#define IRLMP_HINT_MASK_SET	10	</span><span class="cm">/* Set discovery filter */</span><span class="cp"></span>
<span class="cp">#define IRLMP_WAITDEVICE	11	</span><span class="cm">/* Wait for a new discovery */</span><span class="cp"></span>

<span class="cp">#define IRTTP_MAX_SDU_SIZE IRLMP_MAX_SDU_SIZE </span><span class="cm">/* Compatibility */</span><span class="cp"></span>

<span class="cp">#define IAS_MAX_STRING         256	</span><span class="cm">/* See IrLMP 1.1, 4.3.3.2 */</span><span class="cp"></span>
<span class="cp">#define IAS_MAX_OCTET_STRING  1024	</span><span class="cm">/* See IrLMP 1.1, 4.3.3.2 */</span><span class="cp"></span>
<span class="cp">#define IAS_MAX_CLASSNAME       60	</span><span class="cm">/* See IrLMP 1.1, 4.3.1 */</span><span class="cp"></span>
<span class="cp">#define IAS_MAX_ATTRIBNAME      60	</span><span class="cm">/* See IrLMP 1.1, 4.3.3.1 */</span><span class="cp"></span>
<span class="cp">#define IAS_MAX_ATTRIBNUMBER   256	</span><span class="cm">/* See IrLMP 1.1, 4.3.3.1 */</span><span class="cp"></span>
<span class="cm">/* For user space backward compatibility - may be fixed in kernel 2.5.X</span>
<span class="cm"> * Note : need 60+1 (&#39;\0&#39;), make it 64 for alignement - Jean II */</span>
<span class="cp">#define IAS_EXPORT_CLASSNAME       64</span>
<span class="cp">#define IAS_EXPORT_ATTRIBNAME     256</span>

<span class="cm">/* Attribute type needed for struct irda_ias_set */</span>
<span class="cp">#define IAS_MISSING 0</span>
<span class="cp">#define IAS_INTEGER 1</span>
<span class="cp">#define IAS_OCT_SEQ 2</span>
<span class="cp">#define IAS_STRING  3</span>

<span class="cp">#define LSAP_ANY              0xff</span>

<span class="k">struct</span> <span class="n">sockaddr_irda</span> <span class="p">{</span>
	<span class="n">__kernel_sa_family_t</span> <span class="n">sir_family</span><span class="p">;</span> <span class="cm">/* AF_IRDA */</span>
	<span class="n">__u8</span>        <span class="n">sir_lsap_sel</span><span class="p">;</span> <span class="cm">/* LSAP selector */</span>
	<span class="n">__u32</span>       <span class="n">sir_addr</span><span class="p">;</span>     <span class="cm">/* Device address */</span>
	<span class="kt">char</span>        <span class="n">sir_name</span><span class="p">[</span><span class="mi">25</span><span class="p">];</span> <span class="cm">/* Usually &lt;service&gt;:IrDA:TinyTP */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">irda_device_info</span> <span class="p">{</span>
	<span class="n">__u32</span>       <span class="n">saddr</span><span class="p">;</span>    <span class="cm">/* Address of local interface */</span>
	<span class="n">__u32</span>       <span class="n">daddr</span><span class="p">;</span>    <span class="cm">/* Address of remote device */</span>
	<span class="kt">char</span>        <span class="n">info</span><span class="p">[</span><span class="mi">22</span><span class="p">];</span> <span class="cm">/* Description */</span>
	<span class="n">__u8</span>        <span class="n">charset</span><span class="p">;</span>  <span class="cm">/* Charset used for description */</span>
	<span class="n">__u8</span>        <span class="n">hints</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span> <span class="cm">/* Hint bits */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">irda_device_list</span> <span class="p">{</span>
       <span class="n">__u32</span> <span class="n">len</span><span class="p">;</span>
       <span class="k">struct</span> <span class="n">irda_device_info</span> <span class="n">dev</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">irda_ias_set</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">irda_class_name</span><span class="p">[</span><span class="n">IAS_EXPORT_CLASSNAME</span><span class="p">];</span>
	<span class="kt">char</span> <span class="n">irda_attrib_name</span><span class="p">[</span><span class="n">IAS_EXPORT_ATTRIBNAME</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irda_attrib_type</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irda_attrib_int</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">len</span><span class="p">;</span>
			<span class="n">__u8</span> <span class="n">octet_seq</span><span class="p">[</span><span class="n">IAS_MAX_OCTET_STRING</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">irda_attrib_octet_seq</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">__u8</span> <span class="n">len</span><span class="p">;</span>
			<span class="n">__u8</span> <span class="n">charset</span><span class="p">;</span>
			<span class="n">__u8</span> <span class="n">string</span><span class="p">[</span><span class="n">IAS_MAX_STRING</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">irda_attrib_string</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">attribute</span><span class="p">;</span>
	<span class="n">__u32</span>       <span class="n">daddr</span><span class="p">;</span>    <span class="cm">/* Address of device (for some queries only) */</span>
<span class="p">};</span>

<span class="cm">/* Some private IOCTL&#39;s (max 16) */</span>
<span class="cp">#define SIOCSDONGLE    (SIOCDEVPRIVATE + 0)</span>
<span class="cp">#define SIOCGDONGLE    (SIOCDEVPRIVATE + 1)</span>
<span class="cp">#define SIOCSBANDWIDTH (SIOCDEVPRIVATE + 2)</span>
<span class="cp">#define SIOCSMEDIABUSY (SIOCDEVPRIVATE + 3)</span>
<span class="cp">#define SIOCGMEDIABUSY (SIOCDEVPRIVATE + 4)</span>
<span class="cp">#define SIOCGRECEIVING (SIOCDEVPRIVATE + 5)</span>
<span class="cp">#define SIOCSMODE      (SIOCDEVPRIVATE + 6)</span>
<span class="cp">#define SIOCGMODE      (SIOCDEVPRIVATE + 7)</span>
<span class="cp">#define SIOCSDTRRTS    (SIOCDEVPRIVATE + 8)</span>
<span class="cp">#define SIOCGQOS       (SIOCDEVPRIVATE + 9)</span>

<span class="cm">/* No reason to include &lt;linux/if.h&gt; just because of this one ;-) */</span>
<span class="cp">#define IRNAMSIZ 16 </span>

<span class="cm">/* IrDA quality of service information (must not exceed 16 bytes) */</span>
<span class="k">struct</span> <span class="n">if_irda_qos</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>  <span class="n">baudrate</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">data_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">window_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">min_turn_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">max_turn_time</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">add_bofs</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">link_disc</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* For setting RTS and DTR lines of a dongle */</span>
<span class="k">struct</span> <span class="n">if_irda_line</span> <span class="p">{</span>
	<span class="n">__u8</span> <span class="n">dtr</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">rts</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* IrDA interface configuration (data part must not exceed 16 bytes) */</span>
<span class="k">struct</span> <span class="n">if_irda_req</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">char</span> <span class="n">ifrn_name</span><span class="p">[</span><span class="n">IRNAMSIZ</span><span class="p">];</span>  <span class="cm">/* if name, e.g. &quot;irda0&quot; */</span>
	<span class="p">}</span> <span class="n">ifr_ifrn</span><span class="p">;</span>
	
	<span class="cm">/* Data part */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">if_irda_line</span> <span class="n">ifru_line</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">if_irda_qos</span>  <span class="n">ifru_qos</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">short</span>      <span class="n">ifru_flags</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">int</span>        <span class="n">ifru_receiving</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">int</span>        <span class="n">ifru_mode</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="kt">int</span>        <span class="n">ifru_dongle</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ifr_ifru</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ifr_baudrate  ifr_ifru.ifru_qos.baudrate</span>
<span class="cp">#define ifr_receiving ifr_ifru.ifru_receiving </span>
<span class="cp">#define ifr_dongle    ifr_ifru.ifru_dongle</span>
<span class="cp">#define ifr_mode      ifr_ifru.ifru_mode</span>
<span class="cp">#define ifr_dtr       ifr_ifru.ifru_line.dtr</span>
<span class="cp">#define ifr_rts       ifr_ifru.ifru_line.rts</span>


<span class="cm">/* IrDA netlink definitions */</span>
<span class="cp">#define IRDA_NL_NAME &quot;irda&quot;</span>
<span class="cp">#define IRDA_NL_VERSION 1</span>

<span class="k">enum</span> <span class="n">irda_nl_commands</span> <span class="p">{</span>
	<span class="n">IRDA_NL_CMD_UNSPEC</span><span class="p">,</span>
	<span class="n">IRDA_NL_CMD_SET_MODE</span><span class="p">,</span>
	<span class="n">IRDA_NL_CMD_GET_MODE</span><span class="p">,</span>

	<span class="n">__IRDA_NL_CMD_AFTER_LAST</span>
<span class="p">};</span>
<span class="cp">#define IRDA_NL_CMD_MAX (__IRDA_NL_CMD_AFTER_LAST - 1)</span>

<span class="k">enum</span> <span class="n">nl80211_attrs</span> <span class="p">{</span>
	<span class="n">IRDA_NL_ATTR_UNSPEC</span><span class="p">,</span>
	<span class="n">IRDA_NL_ATTR_IFNAME</span><span class="p">,</span>
	<span class="n">IRDA_NL_ATTR_MODE</span><span class="p">,</span>

	<span class="n">__IRDA_NL_ATTR_AFTER_LAST</span>
<span class="p">};</span>
<span class="cp">#define IRDA_NL_ATTR_MAX (__IRDA_NL_ATTR_AFTER_LAST - 1)</span>

<span class="cm">/* IrDA modes */</span>
<span class="cp">#define IRDA_MODE_PRIMARY   0x1</span>
<span class="cp">#define IRDA_MODE_SECONDARY 0x2</span>
<span class="cp">#define IRDA_MODE_MONITOR   0x4</span>

<span class="cp">#endif </span><span class="cm">/* KERNEL_IRDA_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
