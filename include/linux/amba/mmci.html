<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › amba › mmci.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>mmci.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  include/linux/amba/mmci.h</span>
<span class="cm"> */</span>
<span class="cp">#ifndef AMBA_MMCI_H</span>
<span class="cp">#define AMBA_MMCI_H</span>

<span class="cp">#include &lt;linux/mmc/host.h&gt;</span>


<span class="cm">/*</span>
<span class="cm"> * These defines is places here due to access is needed from machine</span>
<span class="cm"> * configuration files. The ST Micro version does not have ROD and</span>
<span class="cm"> * reuse the voltage registers for direction settings.</span>
<span class="cm"> */</span>
<span class="cp">#define MCI_ST_DATA2DIREN	(1 &lt;&lt; 2)</span>
<span class="cp">#define MCI_ST_CMDDIREN		(1 &lt;&lt; 3)</span>
<span class="cp">#define MCI_ST_DATA0DIREN	(1 &lt;&lt; 4)</span>
<span class="cp">#define MCI_ST_DATA31DIREN	(1 &lt;&lt; 5)</span>
<span class="cp">#define MCI_ST_FBCLKEN		(1 &lt;&lt; 7)</span>
<span class="cp">#define MCI_ST_DATA74DIREN	(1 &lt;&lt; 8)</span>

<span class="cm">/* Just some dummy forwarding */</span>
<span class="k">struct</span> <span class="n">dma_chan</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * struct mmci_platform_data - platform configuration for the MMCI</span>
<span class="cm"> * (also known as PL180) block.</span>
<span class="cm"> * @f_max: the maximum operational frequency for this host in this</span>
<span class="cm"> * platform configuration. When this is specified it takes precedence</span>
<span class="cm"> * over the module parameter for the same frequency.</span>
<span class="cm"> * @ocr_mask: available voltages on the 4 pins from the block, this</span>
<span class="cm"> * is ignored if a regulator is used, see the MMC_VDD_* masks in</span>
<span class="cm"> * mmc/host.h</span>
<span class="cm"> * @ios_handler: a callback function to act on specfic ios changes,</span>
<span class="cm"> * used for example to control a levelshifter</span>
<span class="cm"> * mask into a value to be binary (or set some other custom bits</span>
<span class="cm"> * in MMCIPWR) or:ed and written into the MMCIPWR register of the</span>
<span class="cm"> * block.  May also control external power based on the power_mode.</span>
<span class="cm"> * @status: if no GPIO read function was given to the block in</span>
<span class="cm"> * gpio_wp (below) this function will be called to determine</span>
<span class="cm"> * whether a card is present in the MMC slot or not</span>
<span class="cm"> * @gpio_wp: read this GPIO pin to see if the card is write protected</span>
<span class="cm"> * @gpio_cd: read this GPIO pin to detect card insertion</span>
<span class="cm"> * @cd_invert: true if the gpio_cd pin value is active low</span>
<span class="cm"> * @capabilities: the capabilities of the block as implemented in</span>
<span class="cm"> * this platform, signify anything MMC_CAP_* from mmc/host.h</span>
<span class="cm"> * @capabilities2: more capabilities, MMC_CAP2_* from mmc/host.h</span>
<span class="cm"> * @sigdir: a bit field indicating for what bits in the MMC bus the host</span>
<span class="cm"> * should enable signal direction indication.</span>
<span class="cm"> * @dma_filter: function used to select an appropriate RX and TX</span>
<span class="cm"> * DMA channel to be used for DMA, if and only if you&#39;re deploying the</span>
<span class="cm"> * generic DMA engine</span>
<span class="cm"> * @dma_rx_param: parameter passed to the DMA allocation</span>
<span class="cm"> * filter in order to select an appropriate RX channel. If</span>
<span class="cm"> * there is a bidirectional RX+TX channel, then just specify</span>
<span class="cm"> * this and leave dma_tx_param set to NULL</span>
<span class="cm"> * @dma_tx_param: parameter passed to the DMA allocation</span>
<span class="cm"> * filter in order to select an appropriate TX channel. If this</span>
<span class="cm"> * is NULL the driver will attempt to use the RX channel as a</span>
<span class="cm"> * bidirectional channel</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">mmci_platform_data</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">f_max</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ocr_mask</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">ios_handler</span><span class="p">)(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">mmc_ios</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">status</span><span class="p">)(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span>	<span class="n">gpio_wp</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="n">gpio_cd</span><span class="p">;</span>
	<span class="n">bool</span>	<span class="n">cd_invert</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">capabilities</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">capabilities2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">sigdir</span><span class="p">;</span>
	<span class="n">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">dma_filter</span><span class="p">)(</span><span class="k">struct</span> <span class="n">dma_chan</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">filter_param</span><span class="p">);</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">dma_rx_param</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">dma_tx_param</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
