<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › telephony.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>telephony.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> *		telephony.h</span>
<span class="cm"> *</span>
<span class="cm"> *		Basic Linux Telephony Interface</span>
<span class="cm"> *</span>
<span class="cm"> *		(c) Copyright 1999-2001 Quicknet Technologies, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> *		This program is free software; you can redistribute it and/or</span>
<span class="cm"> *		modify it under the terms of the GNU General Public License</span>
<span class="cm"> *		as published by the Free Software Foundation; either version</span>
<span class="cm"> *		2 of the License, or (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *    Authors:       Ed Okerson, &lt;eokerson@quicknet.net&gt;</span>
<span class="cm"> *                   Greg Herlein, &lt;gherlein@quicknet.net&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *    Contributors:  Alan Cox, &lt;alan@lxorguk.ukuu.org.uk&gt;</span>
<span class="cm"> *                   David W. Erhart, &lt;derhart@quicknet.net&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * IN NO EVENT SHALL QUICKNET TECHNOLOGIES, INC. BE LIABLE TO ANY PARTY FOR</span>
<span class="cm"> * DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT</span>
<span class="cm"> * OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF QUICKNET</span>
<span class="cm"> * TECHNOLOGIES, INC. HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> * QUICKNET TECHNOLOGIES, INC. SPECIFICALLY DISCLAIMS ANY WARRANTIES,</span>
<span class="cm"> * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY</span>
<span class="cm"> * AND FITNESS FOR A PARTICULAR PURPOSE.  THE SOFTWARE PROVIDED HEREUNDER IS</span>
<span class="cm"> * ON AN &quot;AS IS&quot; BASIS, AND QUICKNET TECHNOLOGIES, INC. HAS NO OBLIGATION</span>
<span class="cm"> * TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>

<span class="cp">#ifndef TELEPHONY_H</span>
<span class="cp">#define TELEPHONY_H</span>

<span class="cp">#define TELEPHONY_VERSION 3013</span>

<span class="cp">#define PHONE_VENDOR_IXJ          1</span>
<span class="cp">#define PHONE_VENDOR_QUICKNET	  PHONE_VENDOR_IXJ</span>
<span class="cp">#define PHONE_VENDOR_VOICETRONIX  2</span>
<span class="cp">#define PHONE_VENDOR_ACULAB       3</span>
<span class="cp">#define PHONE_VENDOR_DIGI         4</span>
<span class="cp">#define PHONE_VENDOR_FRANKLIN     5</span>

<span class="cm">/******************************************************************************</span>
<span class="cm"> *  Vendor Summary Information Area</span>
<span class="cm"> *</span>
<span class="cm"> *  Quicknet Technologies, Inc. - makes low density analog telephony cards</span>
<span class="cm"> *    with audio compression, POTS and PSTN interfaces (www.quicknet.net)</span>
<span class="cm"> *</span>
<span class="cm"> *  (other vendors following this API shuld add a short description of</span>
<span class="cm"> *  the telephony products they support under Linux)</span>
<span class="cm"> *</span>
<span class="cm"> *****************************************************************************/</span>
<span class="cp">#define QTI_PHONEJACK		100</span>
<span class="cp">#define QTI_LINEJACK		300</span>
<span class="cp">#define QTI_PHONEJACK_LITE	400</span>
<span class="cp">#define QTI_PHONEJACK_PCI	500</span>
<span class="cp">#define QTI_PHONECARD		600</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* The capabilities ioctls can inform you of the capabilities of each phone</span>
<span class="cm">* device installed in your system.  The PHONECTL_CAPABILITIES ioctl</span>
<span class="cm">* returns an integer value indicating the number of capabilities the   </span>
<span class="cm">* device has.  The PHONECTL_CAPABILITIES_LIST will fill an array of </span>
<span class="cm">* capability structs with all of its capabilities.  The</span>
<span class="cm">* PHONECTL_CAPABILITIES_CHECK takes a single capability struct and returns</span>
<span class="cm">* a TRUE if the device has that capability, otherwise it returns false.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">vendor</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">device</span><span class="p">,</span>
	<span class="n">port</span><span class="p">,</span>
	<span class="n">codec</span><span class="p">,</span>
	<span class="n">dsp</span>
<span class="p">}</span> <span class="n">phone_cap</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">phone_capability</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">desc</span><span class="p">[</span><span class="mi">80</span><span class="p">];</span>
	<span class="n">phone_cap</span> <span class="n">captype</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">cap</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">pots</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">pstn</span><span class="p">,</span>
	<span class="n">handset</span><span class="p">,</span>
	<span class="n">speaker</span>
<span class="p">}</span> <span class="n">phone_ports</span><span class="p">;</span>

<span class="cp">#define PHONE_CAPABILITIES              _IO  (&#39;q&#39;, 0x80)</span>
<span class="cp">#define PHONE_CAPABILITIES_LIST         _IOR (&#39;q&#39;, 0x81, struct phone_capability *)</span>
<span class="cp">#define PHONE_CAPABILITIES_CHECK        _IOW (&#39;q&#39;, 0x82, struct phone_capability *)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="kt">char</span> <span class="n">month</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">day</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">hour</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kt">char</span> <span class="n">min</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">numlen</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">number</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
        <span class="kt">int</span> <span class="n">namelen</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">80</span><span class="p">];</span>
<span class="p">}</span> <span class="n">PHONE_CID</span><span class="p">;</span>
 
<span class="cp">#define PHONE_RING			_IO  (&#39;q&#39;, 0x83)</span>
<span class="cp">#define PHONE_HOOKSTATE			_IO  (&#39;q&#39;, 0x84)</span>
<span class="cp">#define PHONE_MAXRINGS			_IOW (&#39;q&#39;, 0x85, char)</span>
<span class="cp">#define PHONE_RING_CADENCE		_IOW (&#39;q&#39;, 0x86, short)</span>
<span class="cp">#define OLD_PHONE_RING_START            _IO  (&#39;q&#39;, 0x87)</span>
<span class="cp">#define PHONE_RING_START		_IOW (&#39;q&#39;, 0x87, PHONE_CID *)</span>
<span class="cp">#define PHONE_RING_STOP			_IO  (&#39;q&#39;, 0x88)</span>

<span class="cp">#define USA_RING_CADENCE	 0xC0C0</span>

<span class="cp">#define PHONE_REC_CODEC			_IOW (&#39;q&#39;, 0x89, int)</span>
<span class="cp">#define PHONE_REC_START			_IO  (&#39;q&#39;, 0x8A)</span>
<span class="cp">#define PHONE_REC_STOP			_IO  (&#39;q&#39;, 0x8B)</span>
<span class="cp">#define PHONE_REC_DEPTH			_IOW (&#39;q&#39;, 0x8C, int)</span>
<span class="cp">#define PHONE_FRAME			_IOW (&#39;q&#39;, 0x8D, int)</span>
<span class="cp">#define PHONE_REC_VOLUME		_IOW (&#39;q&#39;, 0x8E, int)</span>
<span class="cp">#define PHONE_REC_VOLUME_LINEAR		_IOW (&#39;q&#39;, 0xDB, int)</span>
<span class="cp">#define PHONE_REC_LEVEL			_IO  (&#39;q&#39;, 0x8F)</span>

<span class="cp">#define PHONE_PLAY_CODEC		_IOW (&#39;q&#39;, 0x90, int)</span>
<span class="cp">#define PHONE_PLAY_START		_IO  (&#39;q&#39;, 0x91)</span>
<span class="cp">#define PHONE_PLAY_STOP			_IO  (&#39;q&#39;, 0x92)</span>
<span class="cp">#define PHONE_PLAY_DEPTH		_IOW (&#39;q&#39;, 0x93, int)</span>
<span class="cp">#define PHONE_PLAY_VOLUME		_IOW (&#39;q&#39;, 0x94, int)</span>
<span class="cp">#define PHONE_PLAY_VOLUME_LINEAR	_IOW (&#39;q&#39;, 0xDC, int)</span>
<span class="cp">#define PHONE_PLAY_LEVEL		_IO  (&#39;q&#39;, 0x95)</span>
<span class="cp">#define PHONE_DTMF_READY		_IOR (&#39;q&#39;, 0x96, int)</span>
<span class="cp">#define PHONE_GET_DTMF			_IOR (&#39;q&#39;, 0x97, int)</span>
<span class="cp">#define PHONE_GET_DTMF_ASCII		_IOR (&#39;q&#39;, 0x98, int)</span>
<span class="cp">#define PHONE_DTMF_OOB			_IOW (&#39;q&#39;, 0x99, int)</span>
<span class="cp">#define PHONE_EXCEPTION			_IOR (&#39;q&#39;, 0x9A, int)</span>
<span class="cp">#define PHONE_PLAY_TONE			_IOW (&#39;q&#39;, 0x9B, char)</span>
<span class="cp">#define PHONE_SET_TONE_ON_TIME		_IOW (&#39;q&#39;, 0x9C, int)</span>
<span class="cp">#define PHONE_SET_TONE_OFF_TIME		_IOW (&#39;q&#39;, 0x9D, int)</span>
<span class="cp">#define PHONE_GET_TONE_ON_TIME		_IO  (&#39;q&#39;, 0x9E)</span>
<span class="cp">#define PHONE_GET_TONE_OFF_TIME		_IO  (&#39;q&#39;, 0x9F)</span>
<span class="cp">#define PHONE_GET_TONE_STATE		_IO  (&#39;q&#39;, 0xA0)</span>
<span class="cp">#define PHONE_BUSY			_IO  (&#39;q&#39;, 0xA1)</span>
<span class="cp">#define PHONE_RINGBACK			_IO  (&#39;q&#39;, 0xA2)</span>
<span class="cp">#define PHONE_DIALTONE			_IO  (&#39;q&#39;, 0xA3)</span>
<span class="cp">#define PHONE_CPT_STOP			_IO  (&#39;q&#39;, 0xA4)</span>

<span class="cp">#define PHONE_PSTN_SET_STATE		_IOW (&#39;q&#39;, 0xA4, int)</span>
<span class="cp">#define PHONE_PSTN_GET_STATE		_IO  (&#39;q&#39;, 0xA5)</span>

<span class="cp">#define PSTN_ON_HOOK		0</span>
<span class="cp">#define PSTN_RINGING		1</span>
<span class="cp">#define PSTN_OFF_HOOK		2</span>
<span class="cp">#define PSTN_PULSE_DIAL		3</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* The wink duration is tunable with this ioctl.  The default wink duration  </span>
<span class="cm">* is 320ms.  You do not need to use this ioctl if you do not require a</span>
<span class="cm">* different wink duration.</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define PHONE_WINK_DURATION		_IOW (&#39;q&#39;, 0xA6, int)</span>
<span class="cp">#define PHONE_WINK			_IOW (&#39;q&#39;, 0xAA, int)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">*  Codec Definitions</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">G723_63</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">G723_53</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">TS85</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">TS48</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">TS41</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">G728</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">G729</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">ULAW</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">ALAW</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">LINEAR16</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">LINEAR8</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">WSS</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">G729B</span> <span class="o">=</span> <span class="mi">13</span>
<span class="p">}</span> <span class="n">phone_codec</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">phone_codec_data</span>
<span class="p">{</span>
        <span class="n">phone_codec</span> <span class="n">type</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">buf_min</span><span class="p">,</span> <span class="n">buf_opt</span><span class="p">,</span> <span class="n">buf_max</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define PHONE_QUERY_CODEC               _IOWR (&#39;q&#39;, 0xA7, struct phone_codec_data *)</span>
<span class="cp">#define PHONE_PSTN_LINETEST             _IO (&#39;q&#39;, 0xA8)</span>

<span class="cm">/******************************************************************************</span>
<span class="cm">* </span>
<span class="cm">* This controls the VAD/CNG functionality of G.723.1.  The driver will</span>
<span class="cm">* always pass full size frames, any unused bytes will be padded with zeros,</span>
<span class="cm">* and frames passed to the driver should also be padded with zeros.  The</span>
<span class="cm">* frame type is encoded in the least significant two bits of the first</span>
<span class="cm">* WORD of the frame as follows:</span>
<span class="cm">*</span>
<span class="cm">* bits 1-0	Frame Type	Data Rate		Significant Words</span>
<span class="cm">* 00		0		G.723.1 6.3		12</span>
<span class="cm">* 01		1		G.723.1 5.3		10</span>
<span class="cm">* 10		2		VAD/CNG			 2</span>
<span class="cm">* 11		3		Repeat last CNG		 2 bits</span>
<span class="cm">* </span>
<span class="cm">******************************************************************************/</span>
<span class="cp">#define PHONE_VAD			_IOW (&#39;q&#39;, 0xA9, int)</span>


<span class="cm">/******************************************************************************</span>
<span class="cm">*</span>
<span class="cm">* The exception structure allows us to multiplex multiple events onto the</span>
<span class="cm">* select() exception set.  If any of these flags are set select() will</span>
<span class="cm">* return with a positive indication on the exception set.  The dtmf_ready</span>
<span class="cm">* bit indicates if there is data waiting in the DTMF buffer.  The</span>
<span class="cm">* hookstate bit is set if there is a change in hookstate status, it does not</span>
<span class="cm">* indicate the current state of the hookswitch.  The pstn_ring bit</span>
<span class="cm">* indicates that the DAA on a LineJACK card has detected ring voltage on</span>
<span class="cm">* the PSTN port.  The caller_id bit indicates that caller_id data has been</span>
<span class="cm">* received and is available.  The pstn_wink bit indicates that the DAA on</span>
<span class="cm">* the LineJACK has received a wink from the telco switch.  The f0, f1, f2</span>
<span class="cm">* and f3 bits indicate that the filter has been triggered by detecting the</span>
<span class="cm">* frequency programmed into that filter.</span>
<span class="cm">*</span>
<span class="cm">* The remaining bits should be set to zero. They will become defined over time</span>
<span class="cm">* for other interface cards and their needs.</span>
<span class="cm">*</span>
<span class="cm">******************************************************************************/</span>
<span class="k">struct</span> <span class="n">phone_except</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dtmf_ready</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hookstate</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pstn_ring</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">caller_id</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pstn_wink</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">f0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">f1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">f2</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">f3</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flash</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fc0</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fc1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fc2</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fc3</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reserved</span><span class="o">:</span><span class="mi">18</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">union</span> <span class="n">telephony_exception</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">phone_except</span> <span class="n">bits</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bytes</span><span class="p">;</span>
<span class="p">};</span>


<span class="cp">#endif		</span><span class="cm">/* TELEPHONY_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
