<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › serial167.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>serial167.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * serial167.h</span>
<span class="cm"> *</span>
<span class="cm"> * Richard Hirst [richard@sleepie.demon.co.uk]</span>
<span class="cm"> *</span>
<span class="cm"> * Based on cyclades.h</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">cyclades_monitor</span> <span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">long</span>           <span class="n">int_count</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">long</span>           <span class="n">char_count</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">long</span>           <span class="n">char_max</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">long</span>           <span class="n">char_last</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * This is our internal structure for each serial port&#39;s state.</span>
<span class="cm"> * </span>
<span class="cm"> * Many fields are paralleled by the structure used by the serial_struct</span>
<span class="cm"> * structure.</span>
<span class="cm"> *</span>
<span class="cm"> * For definitions of the flags field, see tty.h</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">cyclades_port</span> <span class="p">{</span>
	<span class="kt">int</span>                     <span class="n">magic</span><span class="p">;</span>
	<span class="kt">int</span>                     <span class="n">type</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">card</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">line</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">flags</span><span class="p">;</span> 		<span class="cm">/* defined in tty.h */</span>
	<span class="k">struct</span> <span class="n">tty_struct</span> 	<span class="o">*</span><span class="n">tty</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">read_status_mask</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">timeout</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">xmit_fifo_size</span><span class="p">;</span>
	<span class="kt">int</span>                     <span class="n">cor1</span><span class="p">,</span><span class="n">cor2</span><span class="p">,</span><span class="n">cor3</span><span class="p">,</span><span class="n">cor4</span><span class="p">,</span><span class="n">cor5</span><span class="p">,</span><span class="n">cor6</span><span class="p">,</span><span class="n">cor7</span><span class="p">;</span>
	<span class="kt">int</span>                     <span class="n">tbpr</span><span class="p">,</span><span class="n">tco</span><span class="p">,</span><span class="n">rbpr</span><span class="p">,</span><span class="n">rco</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">ignore_status_mask</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">close_delay</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">IER</span><span class="p">;</span> 	<span class="cm">/* Interrupt Enable Register */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">last_active</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">count</span><span class="p">;</span>	<span class="cm">/* # of fd on device */</span>
	<span class="kt">int</span>                     <span class="n">x_char</span><span class="p">;</span> <span class="cm">/* to be pushed out ASAP */</span>
	<span class="kt">int</span>                     <span class="n">x_break</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">blocked_open</span><span class="p">;</span> <span class="cm">/* # of blocked opens */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> 		<span class="o">*</span><span class="n">xmit_buf</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">xmit_head</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">xmit_tail</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">xmit_cnt</span><span class="p">;</span>
        <span class="kt">int</span>                     <span class="n">default_threshold</span><span class="p">;</span>
        <span class="kt">int</span>                     <span class="n">default_timeout</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">open_wait</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span>	<span class="n">close_wait</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">cyclades_monitor</span> <span class="n">mon</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define CYCLADES_MAGIC  0x4359</span>

<span class="cp">#define CYGETMON                0x435901</span>
<span class="cp">#define CYGETTHRESH             0x435902</span>
<span class="cp">#define CYSETTHRESH             0x435903</span>
<span class="cp">#define CYGETDEFTHRESH          0x435904</span>
<span class="cp">#define CYSETDEFTHRESH          0x435905</span>
<span class="cp">#define CYGETTIMEOUT            0x435906</span>
<span class="cp">#define CYSETTIMEOUT            0x435907</span>
<span class="cp">#define CYGETDEFTIMEOUT         0x435908</span>
<span class="cp">#define CYSETDEFTIMEOUT         0x435909</span>

<span class="cp">#define CyMaxChipsPerCard 1</span>

<span class="cm">/**** cd2401 registers ****/</span>

<span class="cp">#define CyGFRCR         (0x81)</span>
<span class="cp">#define CyCCR		(0x13)</span>
<span class="cp">#define      CyCLR_CHAN		(0x40)</span>
<span class="cp">#define      CyINIT_CHAN	(0x20)</span>
<span class="cp">#define      CyCHIP_RESET	(0x10)</span>
<span class="cp">#define      CyENB_XMTR		(0x08)</span>
<span class="cp">#define      CyDIS_XMTR		(0x04)</span>
<span class="cp">#define      CyENB_RCVR		(0x02)</span>
<span class="cp">#define      CyDIS_RCVR		(0x01)</span>
<span class="cp">#define CyCAR		(0xee)</span>
<span class="cp">#define CyIER		(0x11)</span>
<span class="cp">#define      CyMdmCh		(0x80)</span>
<span class="cp">#define      CyRxExc		(0x20)</span>
<span class="cp">#define      CyRxData		(0x08)</span>
<span class="cp">#define      CyTxMpty		(0x02)</span>
<span class="cp">#define      CyTxRdy		(0x01)</span>
<span class="cp">#define CyLICR		(0x26)</span>
<span class="cp">#define CyRISR		(0x89)</span>
<span class="cp">#define      CyTIMEOUT		(0x80)</span>
<span class="cp">#define      CySPECHAR		(0x70)</span>
<span class="cp">#define      CyOVERRUN		(0x08)</span>
<span class="cp">#define      CyPARITY		(0x04)</span>
<span class="cp">#define      CyFRAME		(0x02)</span>
<span class="cp">#define      CyBREAK		(0x01)</span>
<span class="cp">#define CyREOIR		(0x84)</span>
<span class="cp">#define CyTEOIR		(0x85)</span>
<span class="cp">#define CyMEOIR		(0x86)</span>
<span class="cp">#define      CyNOTRANS		(0x08)</span>
<span class="cp">#define CyRFOC		(0x30)</span>
<span class="cp">#define CyRDR		(0xf8)</span>
<span class="cp">#define CyTDR		(0xf8)</span>
<span class="cp">#define CyMISR		(0x8b)</span>
<span class="cp">#define CyRISR		(0x89)</span>
<span class="cp">#define CyTISR		(0x8a)</span>
<span class="cp">#define CyMSVR1		(0xde)</span>
<span class="cp">#define CyMSVR2		(0xdf)</span>
<span class="cp">#define      CyDSR		(0x80)</span>
<span class="cp">#define      CyDCD		(0x40)</span>
<span class="cp">#define      CyCTS		(0x20)</span>
<span class="cp">#define      CyDTR		(0x02)</span>
<span class="cp">#define      CyRTS		(0x01)</span>
<span class="cp">#define CyRTPRL		(0x25)</span>
<span class="cp">#define CyRTPRH		(0x24)</span>
<span class="cp">#define CyCOR1		(0x10)</span>
<span class="cp">#define      CyPARITY_NONE	(0x00)</span>
<span class="cp">#define      CyPARITY_E		(0x40)</span>
<span class="cp">#define      CyPARITY_O		(0xC0)</span>
<span class="cp">#define      Cy_5_BITS		(0x04)</span>
<span class="cp">#define      Cy_6_BITS		(0x05)</span>
<span class="cp">#define      Cy_7_BITS		(0x06)</span>
<span class="cp">#define      Cy_8_BITS		(0x07)</span>
<span class="cp">#define CyCOR2		(0x17)</span>
<span class="cp">#define      CyETC		(0x20)</span>
<span class="cp">#define      CyCtsAE		(0x02)</span>
<span class="cp">#define CyCOR3		(0x16)</span>
<span class="cp">#define      Cy_1_STOP		(0x02)</span>
<span class="cp">#define      Cy_2_STOP		(0x04)</span>
<span class="cp">#define CyCOR4		(0x15)</span>
<span class="cp">#define      CyREC_FIFO		(0x0F)  </span><span class="cm">/* Receive FIFO threshold */</span><span class="cp"></span>
<span class="cp">#define CyCOR5		(0x14)</span>
<span class="cp">#define CyCOR6		(0x18)</span>
<span class="cp">#define CyCOR7		(0x07)</span>
<span class="cp">#define CyRBPR		(0xcb)</span>
<span class="cp">#define CyRCOR		(0xc8)</span>
<span class="cp">#define CyTBPR		(0xc3)</span>
<span class="cp">#define CyTCOR		(0xc0)</span>
<span class="cp">#define CySCHR1		(0x1f)</span>
<span class="cp">#define CySCHR2 	(0x1e)</span>
<span class="cp">#define CyTPR		(0xda)</span>
<span class="cp">#define CyPILR1		(0xe3)</span>
<span class="cp">#define CyPILR2		(0xe0)</span>
<span class="cp">#define CyPILR3		(0xe1)</span>
<span class="cp">#define CyCMR		(0x1b)</span>
<span class="cp">#define      CyASYNC		(0x02)</span>
<span class="cp">#define CyLICR          (0x26)</span>
<span class="cp">#define CyLIVR          (0x09)</span>
<span class="cp">#define CySCRL		(0x23)</span>
<span class="cp">#define CySCRH		(0x22)</span>
<span class="cp">#define CyTFTC		(0x80)</span>


<span class="cm">/* max number of chars in the FIFO */</span>

<span class="cp">#define CyMAX_CHAR_FIFO	12</span>

<span class="cm">/***************************************************************************/</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
