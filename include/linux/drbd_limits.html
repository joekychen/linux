<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › drbd_limits.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>drbd_limits.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">  drbd_limits.h</span>
<span class="cm">  This file is part of DRBD by Philipp Reisner and Lars Ellenberg.</span>
<span class="cm">*/</span>

<span class="cm">/*</span>
<span class="cm"> * Our current limitations.</span>
<span class="cm"> * Some of them are hard limits,</span>
<span class="cm"> * some of them are arbitrary range limits, that make it easier to provide</span>
<span class="cm"> * feedback about nonsense settings for certain configurable values.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef DRBD_LIMITS_H</span>
<span class="cp">#define DRBD_LIMITS_H 1</span>

<span class="cp">#define DEBUG_RANGE_CHECK 0</span>

<span class="cp">#define DRBD_MINOR_COUNT_MIN 1</span>
<span class="cp">#define DRBD_MINOR_COUNT_MAX 256</span>
<span class="cp">#define DRBD_MINOR_COUNT_DEF 32</span>

<span class="cp">#define DRBD_DIALOG_REFRESH_MIN 0</span>
<span class="cp">#define DRBD_DIALOG_REFRESH_MAX 600</span>

<span class="cm">/* valid port number */</span>
<span class="cp">#define DRBD_PORT_MIN 1</span>
<span class="cp">#define DRBD_PORT_MAX 0xffff</span>

<span class="cm">/* startup { */</span>
  <span class="cm">/* if you want more than 3.4 days, disable */</span>
<span class="cp">#define DRBD_WFC_TIMEOUT_MIN 0</span>
<span class="cp">#define DRBD_WFC_TIMEOUT_MAX 300000</span>
<span class="cp">#define DRBD_WFC_TIMEOUT_DEF 0</span>

<span class="cp">#define DRBD_DEGR_WFC_TIMEOUT_MIN 0</span>
<span class="cp">#define DRBD_DEGR_WFC_TIMEOUT_MAX 300000</span>
<span class="cp">#define DRBD_DEGR_WFC_TIMEOUT_DEF 0</span>

<span class="cp">#define DRBD_OUTDATED_WFC_TIMEOUT_MIN 0</span>
<span class="cp">#define DRBD_OUTDATED_WFC_TIMEOUT_MAX 300000</span>
<span class="cp">#define DRBD_OUTDATED_WFC_TIMEOUT_DEF 0</span>
<span class="cm">/* }*/</span>

<span class="cm">/* net { */</span>
  <span class="cm">/* timeout, unit centi seconds</span>
<span class="cm">   * more than one minute timeout is not useful */</span>
<span class="cp">#define DRBD_TIMEOUT_MIN 1</span>
<span class="cp">#define DRBD_TIMEOUT_MAX 600</span>
<span class="cp">#define DRBD_TIMEOUT_DEF 60       </span><span class="cm">/* 6 seconds */</span><span class="cp"></span>

 <span class="cm">/* If backing disk takes longer than disk_timeout, mark the disk as failed */</span>
<span class="cp">#define DRBD_DISK_TIMEOUT_MIN 0    </span><span class="cm">/* 0 = disabled */</span><span class="cp"></span>
<span class="cp">#define DRBD_DISK_TIMEOUT_MAX 6000 </span><span class="cm">/* 10 Minutes */</span><span class="cp"></span>
<span class="cp">#define DRBD_DISK_TIMEOUT_DEF 0    </span><span class="cm">/* disabled */</span><span class="cp"></span>

  <span class="cm">/* active connection retries when C_WF_CONNECTION */</span>
<span class="cp">#define DRBD_CONNECT_INT_MIN 1</span>
<span class="cp">#define DRBD_CONNECT_INT_MAX 120</span>
<span class="cp">#define DRBD_CONNECT_INT_DEF 10   </span><span class="cm">/* seconds */</span><span class="cp"></span>

  <span class="cm">/* keep-alive probes when idle */</span>
<span class="cp">#define DRBD_PING_INT_MIN 1</span>
<span class="cp">#define DRBD_PING_INT_MAX 120</span>
<span class="cp">#define DRBD_PING_INT_DEF 10</span>

 <span class="cm">/* timeout for the ping packets.*/</span>
<span class="cp">#define DRBD_PING_TIMEO_MIN  1</span>
<span class="cp">#define DRBD_PING_TIMEO_MAX  300</span>
<span class="cp">#define DRBD_PING_TIMEO_DEF  5</span>

  <span class="cm">/* max number of write requests between write barriers */</span>
<span class="cp">#define DRBD_MAX_EPOCH_SIZE_MIN 1</span>
<span class="cp">#define DRBD_MAX_EPOCH_SIZE_MAX 20000</span>
<span class="cp">#define DRBD_MAX_EPOCH_SIZE_DEF 2048</span>

  <span class="cm">/* I don&#39;t think that a tcp send buffer of more than 10M is useful */</span>
<span class="cp">#define DRBD_SNDBUF_SIZE_MIN  0</span>
<span class="cp">#define DRBD_SNDBUF_SIZE_MAX  (10&lt;&lt;20)</span>
<span class="cp">#define DRBD_SNDBUF_SIZE_DEF  0</span>

<span class="cp">#define DRBD_RCVBUF_SIZE_MIN  0</span>
<span class="cp">#define DRBD_RCVBUF_SIZE_MAX  (10&lt;&lt;20)</span>
<span class="cp">#define DRBD_RCVBUF_SIZE_DEF  0</span>

  <span class="cm">/* @4k PageSize -&gt; 128kB - 512MB */</span>
<span class="cp">#define DRBD_MAX_BUFFERS_MIN  32</span>
<span class="cp">#define DRBD_MAX_BUFFERS_MAX  131072</span>
<span class="cp">#define DRBD_MAX_BUFFERS_DEF  2048</span>

  <span class="cm">/* @4k PageSize -&gt; 4kB - 512MB */</span>
<span class="cp">#define DRBD_UNPLUG_WATERMARK_MIN  1</span>
<span class="cp">#define DRBD_UNPLUG_WATERMARK_MAX  131072</span>
<span class="cp">#define DRBD_UNPLUG_WATERMARK_DEF (DRBD_MAX_BUFFERS_DEF/16)</span>

  <span class="cm">/* 0 is disabled.</span>
<span class="cm">   * 200 should be more than enough even for very short timeouts */</span>
<span class="cp">#define DRBD_KO_COUNT_MIN  0</span>
<span class="cp">#define DRBD_KO_COUNT_MAX  200</span>
<span class="cp">#define DRBD_KO_COUNT_DEF  0</span>
<span class="cm">/* } */</span>

<span class="cm">/* syncer { */</span>
  <span class="cm">/* FIXME allow rate to be zero? */</span>
<span class="cp">#define DRBD_RATE_MIN 1</span>
<span class="cm">/* channel bonding 10 GbE, or other hardware */</span>
<span class="cp">#define DRBD_RATE_MAX (4 &lt;&lt; 20)</span>
<span class="cp">#define DRBD_RATE_DEF 250  </span><span class="cm">/* kb/second */</span><span class="cp"></span>

  <span class="cm">/* less than 7 would hit performance unnecessarily.</span>
<span class="cm">   * 3833 is the largest prime that still does fit</span>
<span class="cm">   * into 64 sectors of activity log */</span>
<span class="cp">#define DRBD_AL_EXTENTS_MIN  7</span>
<span class="cp">#define DRBD_AL_EXTENTS_MAX  3833</span>
<span class="cp">#define DRBD_AL_EXTENTS_DEF  127</span>

<span class="cp">#define DRBD_AFTER_MIN  -1</span>
<span class="cp">#define DRBD_AFTER_MAX  255</span>
<span class="cp">#define DRBD_AFTER_DEF  -1</span>

<span class="cm">/* } */</span>

<span class="cm">/* drbdsetup XY resize -d Z</span>
<span class="cm"> * you are free to reduce the device size to nothing, if you want to.</span>
<span class="cm"> * the upper limit with 64bit kernel, enough ram and flexible meta data</span>
<span class="cm"> * is 1 PiB, currently. */</span>
<span class="cm">/* DRBD_MAX_SECTORS */</span>
<span class="cp">#define DRBD_DISK_SIZE_SECT_MIN  0</span>
<span class="cp">#define DRBD_DISK_SIZE_SECT_MAX  (1 * (2LLU &lt;&lt; 40))</span>
<span class="cp">#define DRBD_DISK_SIZE_SECT_DEF  0 </span><span class="cm">/* = disabled = no user size... */</span><span class="cp"></span>

<span class="cp">#define DRBD_ON_IO_ERROR_DEF EP_PASS_ON</span>
<span class="cp">#define DRBD_FENCING_DEF FP_DONT_CARE</span>
<span class="cp">#define DRBD_AFTER_SB_0P_DEF ASB_DISCONNECT</span>
<span class="cp">#define DRBD_AFTER_SB_1P_DEF ASB_DISCONNECT</span>
<span class="cp">#define DRBD_AFTER_SB_2P_DEF ASB_DISCONNECT</span>
<span class="cp">#define DRBD_RR_CONFLICT_DEF ASB_DISCONNECT</span>
<span class="cp">#define DRBD_ON_NO_DATA_DEF OND_IO_ERROR</span>
<span class="cp">#define DRBD_ON_CONGESTION_DEF OC_BLOCK</span>

<span class="cp">#define DRBD_MAX_BIO_BVECS_MIN 0</span>
<span class="cp">#define DRBD_MAX_BIO_BVECS_MAX 128</span>
<span class="cp">#define DRBD_MAX_BIO_BVECS_DEF 0</span>

<span class="cp">#define DRBD_C_PLAN_AHEAD_MIN  0</span>
<span class="cp">#define DRBD_C_PLAN_AHEAD_MAX  300</span>
<span class="cp">#define DRBD_C_PLAN_AHEAD_DEF  0 </span><span class="cm">/* RS rate controller disabled by default */</span><span class="cp"></span>

<span class="cp">#define DRBD_C_DELAY_TARGET_MIN 1</span>
<span class="cp">#define DRBD_C_DELAY_TARGET_MAX 100</span>
<span class="cp">#define DRBD_C_DELAY_TARGET_DEF 10</span>

<span class="cp">#define DRBD_C_FILL_TARGET_MIN 0</span>
<span class="cp">#define DRBD_C_FILL_TARGET_MAX (1&lt;&lt;20) </span><span class="cm">/* 500MByte in sec */</span><span class="cp"></span>
<span class="cp">#define DRBD_C_FILL_TARGET_DEF 0 </span><span class="cm">/* By default disabled -&gt; controlled by delay_target */</span><span class="cp"></span>

<span class="cp">#define DRBD_C_MAX_RATE_MIN     250 </span><span class="cm">/* kByte/sec */</span><span class="cp"></span>
<span class="cp">#define DRBD_C_MAX_RATE_MAX     (4 &lt;&lt; 20)</span>
<span class="cp">#define DRBD_C_MAX_RATE_DEF     102400</span>

<span class="cp">#define DRBD_C_MIN_RATE_MIN     0 </span><span class="cm">/* kByte/sec */</span><span class="cp"></span>
<span class="cp">#define DRBD_C_MIN_RATE_MAX     (4 &lt;&lt; 20)</span>
<span class="cp">#define DRBD_C_MIN_RATE_DEF     4096</span>

<span class="cp">#define DRBD_CONG_FILL_MIN	0</span>
<span class="cp">#define DRBD_CONG_FILL_MAX	(10&lt;&lt;21) </span><span class="cm">/* 10GByte in sectors */</span><span class="cp"></span>
<span class="cp">#define DRBD_CONG_FILL_DEF	0</span>

<span class="cp">#define DRBD_CONG_EXTENTS_MIN	DRBD_AL_EXTENTS_MIN</span>
<span class="cp">#define DRBD_CONG_EXTENTS_MAX	DRBD_AL_EXTENTS_MAX</span>
<span class="cp">#define DRBD_CONG_EXTENTS_DEF	DRBD_AL_EXTENTS_DEF</span>

<span class="cp">#undef RANGE</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
