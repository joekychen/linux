<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › input › adxl34x.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>adxl34x.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * include/linux/input/adxl34x.h</span>
<span class="cm"> *</span>
<span class="cm"> * Digital Accelerometer characteristics are highly application specific</span>
<span class="cm"> * and may vary between boards and models. The platform_data for the</span>
<span class="cm"> * device&#39;s &quot;struct device&quot; holds this information.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2009 Analog Devices Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Licensed under the GPL-2 or later.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __LINUX_INPUT_ADXL34X_H__</span>
<span class="cp">#define __LINUX_INPUT_ADXL34X_H__</span>

<span class="k">struct</span> <span class="n">adxl34x_platform_data</span> <span class="p">{</span>

	<span class="cm">/*</span>
<span class="cm">	 * X,Y,Z Axis Offset:</span>
<span class="cm">	 * offer user offset adjustments in twoscompliment</span>
<span class="cm">	 * form with a scale factor of 15.6 mg/LSB (i.e. 0x7F = +2 g)</span>
<span class="cm">	 */</span>

	<span class="n">s8</span> <span class="n">x_axis_offset</span><span class="p">;</span>
	<span class="n">s8</span> <span class="n">y_axis_offset</span><span class="p">;</span>
	<span class="n">s8</span> <span class="n">z_axis_offset</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * TAP_X/Y/Z Enable: Setting TAP_X, Y, or Z Enable enables X,</span>
<span class="cm">	 * Y, or Z participation in Tap detection. A &#39;0&#39; excludes the</span>
<span class="cm">	 * selected axis from participation in Tap detection.</span>
<span class="cm">	 * Setting the SUPPRESS bit suppresses Double Tap detection if</span>
<span class="cm">	 * acceleration greater than tap_threshold is present during the</span>
<span class="cm">	 * tap_latency period, i.e. after the first tap but before the</span>
<span class="cm">	 * opening of the second tap window.</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_SUPPRESS	(1 &lt;&lt; 3)</span>
<span class="cp">#define ADXL_TAP_X_EN	(1 &lt;&lt; 2)</span>
<span class="cp">#define ADXL_TAP_Y_EN	(1 &lt;&lt; 1)</span>
<span class="cp">#define ADXL_TAP_Z_EN	(1 &lt;&lt; 0)</span>

	<span class="n">u8</span> <span class="n">tap_axis_control</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * tap_threshold:</span>
<span class="cm">	 * holds the threshold value for tap detection/interrupts.</span>
<span class="cm">	 * The data format is unsigned. The scale factor is 62.5 mg/LSB</span>
<span class="cm">	 * (i.e. 0xFF = +16 g). A zero value may result in undesirable</span>
<span class="cm">	 * behavior if Tap/Double Tap is enabled.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">tap_threshold</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * tap_duration:</span>
<span class="cm">	 * is an unsigned time value representing the maximum</span>
<span class="cm">	 * time that an event must be above the tap_threshold threshold</span>
<span class="cm">	 * to qualify as a tap event. The scale factor is 625 us/LSB. A zero</span>
<span class="cm">	 * value will prevent Tap/Double Tap functions from working.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">tap_duration</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * tap_latency:</span>
<span class="cm">	 * is an unsigned time value representing the wait time</span>
<span class="cm">	 * from the detection of a tap event to the opening of the time</span>
<span class="cm">	 * window tap_window for a possible second tap event. The scale</span>
<span class="cm">	 * factor is 1.25 ms/LSB. A zero value will disable the Double Tap</span>
<span class="cm">	 * function.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">tap_latency</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * tap_window:</span>
<span class="cm">	 * is an unsigned time value representing the amount</span>
<span class="cm">	 * of time after the expiration of tap_latency during which a second</span>
<span class="cm">	 * tap can begin. The scale factor is 1.25 ms/LSB. A zero value will</span>
<span class="cm">	 * disable the Double Tap function.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">tap_window</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * act_axis_control:</span>
<span class="cm">	 * X/Y/Z Enable: A &#39;1&#39; enables X, Y, or Z participation in activity</span>
<span class="cm">	 * or inactivity detection. A &#39;0&#39; excludes the selected axis from</span>
<span class="cm">	 * participation. If all of the axes are excluded, the function is</span>
<span class="cm">	 * disabled.</span>
<span class="cm">	 * AC/DC: A &#39;0&#39; = DC coupled operation and a &#39;1&#39; = AC coupled</span>
<span class="cm">	 * operation. In DC coupled operation, the current acceleration is</span>
<span class="cm">	 * compared with activity_threshold and inactivity_threshold directly</span>
<span class="cm">	 * to determine whether activity or inactivity is detected. In AC</span>
<span class="cm">	 * coupled operation for activity detection, the acceleration value</span>
<span class="cm">	 * at the start of activity detection is taken as a reference value.</span>
<span class="cm">	 * New samples of acceleration are then compared to this</span>
<span class="cm">	 * reference value and if the magnitude of the difference exceeds</span>
<span class="cm">	 * activity_threshold the device will trigger an activity interrupt. In</span>
<span class="cm">	 * AC coupled operation for inactivity detection, a reference value</span>
<span class="cm">	 * is used again for comparison and is updated whenever the</span>
<span class="cm">	 * device exceeds the inactivity threshold. Once the reference</span>
<span class="cm">	 * value is selected, the device compares the magnitude of the</span>
<span class="cm">	 * difference between the reference value and the current</span>
<span class="cm">	 * acceleration with inactivity_threshold. If the difference is below</span>
<span class="cm">	 * inactivity_threshold for a total of inactivity_time, the device is</span>
<span class="cm">	 * considered inactive and the inactivity interrupt is triggered.</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_ACT_ACDC		(1 &lt;&lt; 7)</span>
<span class="cp">#define ADXL_ACT_X_EN		(1 &lt;&lt; 6)</span>
<span class="cp">#define ADXL_ACT_Y_EN		(1 &lt;&lt; 5)</span>
<span class="cp">#define ADXL_ACT_Z_EN		(1 &lt;&lt; 4)</span>
<span class="cp">#define ADXL_INACT_ACDC		(1 &lt;&lt; 3)</span>
<span class="cp">#define ADXL_INACT_X_EN		(1 &lt;&lt; 2)</span>
<span class="cp">#define ADXL_INACT_Y_EN		(1 &lt;&lt; 1)</span>
<span class="cp">#define ADXL_INACT_Z_EN		(1 &lt;&lt; 0)</span>

	<span class="n">u8</span> <span class="n">act_axis_control</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * activity_threshold:</span>
<span class="cm">	 * holds the threshold value for activity detection.</span>
<span class="cm">	 * The data format is unsigned. The scale factor is</span>
<span class="cm">	 * 62.5 mg/LSB. A zero value may result in undesirable behavior if</span>
<span class="cm">	 * Activity interrupt is enabled.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">activity_threshold</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * inactivity_threshold:</span>
<span class="cm">	 * holds the threshold value for inactivity</span>
<span class="cm">	 * detection. The data format is unsigned. The scale</span>
<span class="cm">	 * factor is 62.5 mg/LSB. A zero value may result in undesirable</span>
<span class="cm">	 * behavior if Inactivity interrupt is enabled.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">inactivity_threshold</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * inactivity_time:</span>
<span class="cm">	 * is an unsigned time value representing the</span>
<span class="cm">	 * amount of time that acceleration must be below the value in</span>
<span class="cm">	 * inactivity_threshold for inactivity to be declared. The scale factor</span>
<span class="cm">	 * is 1 second/LSB. Unlike the other interrupt functions, which</span>
<span class="cm">	 * operate on unfiltered data, the inactivity function operates on the</span>
<span class="cm">	 * filtered output data. At least one output sample must be</span>
<span class="cm">	 * generated for the inactivity interrupt to be triggered. This will</span>
<span class="cm">	 * result in the function appearing un-responsive if the</span>
<span class="cm">	 * inactivity_time register is set with a value less than the time</span>
<span class="cm">	 * constant of the Output Data Rate. A zero value will result in an</span>
<span class="cm">	 * interrupt when the output data is below inactivity_threshold.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">inactivity_time</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * free_fall_threshold:</span>
<span class="cm">	 * holds the threshold value for Free-Fall detection.</span>
<span class="cm">	 * The data format is unsigned. The root-sum-square(RSS) value</span>
<span class="cm">	 * of all axes is calculated and compared to the value in</span>
<span class="cm">	 * free_fall_threshold to determine if a free fall event may be</span>
<span class="cm">	 * occurring.  The scale factor is 62.5 mg/LSB. A zero value may</span>
<span class="cm">	 * result in undesirable behavior if Free-Fall interrupt is</span>
<span class="cm">	 * enabled. Values between 300 and 600 mg (0x05 to 0x09) are</span>
<span class="cm">	 * recommended.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">free_fall_threshold</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * free_fall_time:</span>
<span class="cm">	 * is an unsigned time value representing the minimum</span>
<span class="cm">	 * time that the RSS value of all axes must be less than</span>
<span class="cm">	 * free_fall_threshold to generate a Free-Fall interrupt. The</span>
<span class="cm">	 * scale factor is 5 ms/LSB. A zero value may result in</span>
<span class="cm">	 * undesirable behavior if Free-Fall interrupt is enabled.</span>
<span class="cm">	 * Values between 100 to 350 ms (0x14 to 0x46) are recommended.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">free_fall_time</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * data_rate:</span>
<span class="cm">	 * Selects device bandwidth and output data rate.</span>
<span class="cm">	 * RATE = 3200 Hz / (2^(15 - x)). Default value is 0x0A, or 100 Hz</span>
<span class="cm">	 * Output Data Rate. An Output Data Rate should be selected that</span>
<span class="cm">	 * is appropriate for the communication protocol and frequency</span>
<span class="cm">	 * selected. Selecting too high of an Output Data Rate with a low</span>
<span class="cm">	 * communication speed will result in samples being discarded.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">data_rate</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * data_range:</span>
<span class="cm">	 * FULL_RES: When this bit is set with the device is</span>
<span class="cm">	 * in Full-Resolution Mode, where the output resolution increases</span>
<span class="cm">	 * with RANGE to maintain a 4 mg/LSB scale factor. When this</span>
<span class="cm">	 * bit is cleared the device is in 10-bit Mode and RANGE determine the</span>
<span class="cm">	 * maximum g-Range and scale factor.</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_FULL_RES		(1 &lt;&lt; 3)</span>
<span class="cp">#define ADXL_RANGE_PM_2g	0</span>
<span class="cp">#define ADXL_RANGE_PM_4g	1</span>
<span class="cp">#define ADXL_RANGE_PM_8g	2</span>
<span class="cp">#define ADXL_RANGE_PM_16g	3</span>

	<span class="n">u8</span> <span class="n">data_range</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * low_power_mode:</span>
<span class="cm">	 * A &#39;0&#39; = Normal operation and a &#39;1&#39; = Reduced</span>
<span class="cm">	 * power operation with somewhat higher noise.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">low_power_mode</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * power_mode:</span>
<span class="cm">	 * LINK: A &#39;1&#39; with both the activity and inactivity functions</span>
<span class="cm">	 * enabled will delay the start of the activity function until</span>
<span class="cm">	 * inactivity is detected. Once activity is detected, inactivity</span>
<span class="cm">	 * detection will begin and prevent the detection of activity. This</span>
<span class="cm">	 * bit serially links the activity and inactivity functions. When &#39;0&#39;</span>
<span class="cm">	 * the inactivity and activity functions are concurrent. Additional</span>
<span class="cm">	 * information can be found in the ADXL34x datasheet&#39;s Application</span>
<span class="cm">	 * section under Link Mode.</span>
<span class="cm">	 * AUTO_SLEEP: A &#39;1&#39; sets the ADXL34x to switch to Sleep Mode</span>
<span class="cm">	 * when inactivity (acceleration has been below inactivity_threshold</span>
<span class="cm">	 * for at least inactivity_time) is detected and the LINK bit is set.</span>
<span class="cm">	 * A &#39;0&#39; disables automatic switching to Sleep Mode. See the</span>
<span class="cm">	 * Sleep Bit section of the ADXL34x datasheet for more information.</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_LINK	(1 &lt;&lt; 5)</span>
<span class="cp">#define ADXL_AUTO_SLEEP	(1 &lt;&lt; 4)</span>

	<span class="n">u8</span> <span class="n">power_mode</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * fifo_mode:</span>
<span class="cm">	 * BYPASS The FIFO is bypassed</span>
<span class="cm">	 * FIFO   FIFO collects up to 32 values then stops collecting data</span>
<span class="cm">	 * STREAM FIFO holds the last 32 data values. Once full, the FIFO&#39;s</span>
<span class="cm">	 *        oldest data is lost as it is replaced with newer data</span>
<span class="cm">	 *</span>
<span class="cm">	 * DEFAULT should be ADXL_FIFO_STREAM</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_FIFO_BYPASS	0</span>
<span class="cp">#define ADXL_FIFO_FIFO		1</span>
<span class="cp">#define ADXL_FIFO_STREAM	2</span>

	<span class="n">u8</span> <span class="n">fifo_mode</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * watermark:</span>
<span class="cm">	 * The Watermark feature can be used to reduce the interrupt load</span>
<span class="cm">	 * of the system. The FIFO fills up to the value stored in watermark</span>
<span class="cm">	 * [1..32] and then generates an interrupt.</span>
<span class="cm">	 * A &#39;0&#39; disables the watermark feature.</span>
<span class="cm">	 */</span>

	<span class="n">u8</span> <span class="n">watermark</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * When acceleration measurements are received from the ADXL34x</span>
<span class="cm">	 * events are sent to the event subsystem. The following settings</span>
<span class="cm">	 * select the event type and event code for new x, y and z axis data</span>
<span class="cm">	 * respectively.</span>
<span class="cm">	 */</span>
	<span class="n">u32</span> <span class="n">ev_type</span><span class="p">;</span>	<span class="cm">/* EV_ABS or EV_REL */</span>

	<span class="n">u32</span> <span class="n">ev_code_x</span><span class="p">;</span>	<span class="cm">/* ABS_X,Y,Z or REL_X,Y,Z */</span>
	<span class="n">u32</span> <span class="n">ev_code_y</span><span class="p">;</span>	<span class="cm">/* ABS_X,Y,Z or REL_X,Y,Z */</span>
	<span class="n">u32</span> <span class="n">ev_code_z</span><span class="p">;</span>	<span class="cm">/* ABS_X,Y,Z or REL_X,Y,Z */</span>

	<span class="cm">/*</span>
<span class="cm">	 * A valid BTN or KEY Code; use tap_axis_control to disable</span>
<span class="cm">	 * event reporting</span>
<span class="cm">	 */</span>

	<span class="n">u32</span> <span class="n">ev_code_tap</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* EV_KEY {X-Axis, Y-Axis, Z-Axis} */</span>

	<span class="cm">/*</span>
<span class="cm">	 * A valid BTN or KEY Code for Free-Fall or Activity enables</span>
<span class="cm">	 * input event reporting. A &#39;0&#39; disables the Free-Fall or</span>
<span class="cm">	 * Activity reporting.</span>
<span class="cm">	 */</span>

	<span class="n">u32</span> <span class="n">ev_code_ff</span><span class="p">;</span>	<span class="cm">/* EV_KEY */</span>
	<span class="n">u32</span> <span class="n">ev_code_act_inactivity</span><span class="p">;</span>	<span class="cm">/* EV_KEY */</span>

	<span class="cm">/*</span>
<span class="cm">	 * Use ADXL34x INT2 pin instead of INT1 pin for interrupt output</span>
<span class="cm">	 */</span>
	<span class="n">u8</span> <span class="n">use_int2</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * ADXL346 only ORIENTATION SENSING feature</span>
<span class="cm">	 * The orientation function of the ADXL346 reports both 2-D and</span>
<span class="cm">	 * 3-D orientation concurrently.</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_EN_ORIENTATION_2D		1</span>
<span class="cp">#define ADXL_EN_ORIENTATION_3D		2</span>
<span class="cp">#define ADXL_EN_ORIENTATION_2D_3D	3</span>

	<span class="n">u8</span> <span class="n">orientation_enable</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * The width of the deadzone region between two or more</span>
<span class="cm">	 * orientation positions is determined by setting the Deadzone</span>
<span class="cm">	 * value. The deadzone region size can be specified with a</span>
<span class="cm">	 * resolution of 3.6deg. The deadzone angle represents the total</span>
<span class="cm">	 * angle where the orientation is considered invalid.</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_DEADZONE_ANGLE_0p0		0	</span><span class="cm">/* !!!0.0 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_3p6		1	</span><span class="cm">/* 3.6 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_7p2		2	</span><span class="cm">/* 7.2 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_10p8	3	</span><span class="cm">/* 10.8 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_14p4	4	</span><span class="cm">/* 14.4 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_18p0	5	</span><span class="cm">/* 18.0 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_21p6	6	</span><span class="cm">/* 21.6 [deg] */</span><span class="cp"></span>
<span class="cp">#define ADXL_DEADZONE_ANGLE_25p2	7	</span><span class="cm">/* 25.2 [deg] */</span><span class="cp"></span>

	<span class="n">u8</span> <span class="n">deadzone_angle</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * To eliminate most human motion such as walking or shaking,</span>
<span class="cm">	 * a Divisor value should be selected to effectively limit the</span>
<span class="cm">	 * orientation bandwidth. Set the depth of the filter used to</span>
<span class="cm">	 * low-pass filter the measured acceleration for stable</span>
<span class="cm">	 * orientation sensing</span>
<span class="cm">	 */</span>

<span class="cp">#define ADXL_LP_FILTER_DIVISOR_2	0</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_4	1</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_8	2</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_16	3</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_32	4</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_64	5</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_128	6</span>
<span class="cp">#define ADXL_LP_FILTER_DIVISOR_256	7</span>

	<span class="n">u8</span> <span class="n">divisor_length</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">ev_codes_orient_2d</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* EV_KEY {+X, -X, +Y, -Y} */</span>
	<span class="n">u32</span> <span class="n">ev_codes_orient_3d</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>	<span class="cm">/* EV_KEY {+Z, +Y, +X, -X, -Y, -Z} */</span>
<span class="p">};</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
