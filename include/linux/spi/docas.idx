f | ads7846.h | s | 1.9K | 52 | Alexander Stein | alexander.stein@systec-electronic.com | 1305214136 |  | Input: ads7846 - add possibility to use external vref on ads7846  Just set vref_mv in your platform config to use external vref. Otherwise the internal one is used.  Signed-off-by: Alexander Stein <alexander.stein@systec-electronic.com> Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | 74x164.h | s | 162B | 7 | H Hartley Sweeten | hartleys@visionengravers.com | 1307124856 |  | gpio/74x164: remove unnecessary defines and prototype  Remove the #define GEN_74X164_GPIO_COUNT since it's only used in one place and it's meaning is obvious.  Also remove the #define GEN_74X164_DRIVER_NAME and use spi->modalias to set the gpio chip's label and the string "74x164" for the driver name.  Reorder the code slightly to remove the need to prototype gen_74x164_set_value.  Signed-off-by: H Hartley Sweeten <hsweeten@visionengravers.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | l4f00242t03.h | s | 1.0K | 26 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1320107454 |  | backlight: fix broken regulator API usage in l4f00242t03  The regulator support in the l4f00242t03 is very non-idiomatic.  Rather than requesting the regulators based on the device name and the supply names used by the device the driver requires boards to pass system specific supply names around through platform data.  The driver also conditionally requests the regulators based on this platform data, adding unneeded conditional code to the driver.  Fix this by removing the platform data and converting to the standard idiom, also updating all in tree users of the driver.  As no datasheet appears to be available for the LCD I'm guessing the names for the supplies based on the existing users and I've no ability to do anything more than compile test.  The use of regulator_set_voltage() in the driver is also problematic, since fixed voltages are required the expectation would be that the voltages would be fixed in the constraints set by the machines rather than manually configured by the driver, but is less problematic.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Tested-by: Fabio Estevam <fabio.estevam@freescale.com> Cc: Richard Purdie <rpurdie@rpsys.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tsc2005.h | s | 1.2K | 37 | Lauri Leukkunen | lauri.leukkunen@nokia.com | 1300343259 |  | Input: introduce tsc2005 driver  Discussions:  http://www.mail-archive.com/linux-omap@vger.kernel.org/msg26748.html  Introduce a driver for the Texas Instruments TSC2005 touchscreen controller (http://focus.ti.com/docs/prod/folders/print/tsc2005.html).  The patch is based on a driver by Lauri Leukkunen, with modifications by David Brownell, Phil Carmody, Imre Deak, Hiroshi DOYU, Ari Kauppi, Tony Lindgren, Jarkko Nikula, Eero Nurkkala and Roman Tereshonkov.  Signed-off-by: Lauri Leukkunen <lauri.leukkunen@nokia.com> [aaro.koskinen@nokia.com: patch description, rebasing & cleanup] Signed-off-by: Aaro Koskinen <aaro.koskinen@nokia.com> [ext-srikar.1.bhavanarayana@nokia.com: various fixes] Signed-off-by: Srikar <ext-srikar.1.bhavanarayana@nokia.com> Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | max7301.h | s | 900B | 31 | Marc Kleine-Budde | mkl@pengutronix.de | 1281542348 |  | gpio: max730x: make pullups configurable via platformdata  The gpios on the max730x chips have support for internal pullups while in input mode.  This patch adds support for configuring these pullups via platform data. A new member ("input_pullup_active") to the platform data struct is introduced.  A set bit in this variable activates the pullups while the respective port is in input mode.  This is a compatible enhancement since unset bits lead to disables pullups which was the default in the original driver.  _Note_: the 4 lowest bits in "input_pullup_active" are unused because the first 4 ports of the controller are not used, too.  Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de> Reviewed-by: Wolfram Sang <w.sang@pengutronix.de> Cc: David Brownell <david-b@pacbell.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmc_spi.h | s | 1.6K | 47 | Paul Gortmaker | paul.gortmaker@windriver.com | 1331908704 |  | device.h: audit and cleanup users in main include dir  The <linux/device.h> header includes a lot of stuff, and it in turn gets a lot of use just for the basic "struct device" which appears so often.  Clean up the users as follows:  1) For those headers only needing "struct device" as a pointer in fcn args, replace the include with exactly that.  2) For headers not really using anything from device.h, simply delete the include altogether.  3) For headers relying on getting device.h implicitly before being included themselves, now explicitly include device.h  4) For files in which doing #1 or #2 uncovers an implicit dependency on some other header, fix by explicitly adding the required header(s).  Any C files that were implicitly relying on device.h to be present have already been dealt with in advance.  Total removals from #1 and #2: 51.  Total additions coming from #3: 9.  Total other implicit dependencies from #4: 7.  As of 3.3-rc1, there were 110, so a net removal of 42 gives about a 38% reduction in device.h presence in include/*  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | ds1305.h | s | 1.0K | 29 | David Brownell | david-b@pacbell.net | 1216921653 |  | rtc: ds1305/ds1306 driver  Support the Dallas/Maxim DS1305 and DS1306 RTC chips.  These use SPI, and support alarms, NVRAM, and a trickle charger for use when their backup power supply is a supercap or rechargeable cell.  This basic driver doesn't yet support suspend/resume or wakealarms.  Signed-off-by: David Brownell <dbrownell@users.sourceforge.net> Cc: Alessandro Zummo <a.zummo@towertech.it> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tle62x0.h | s | 872B | 23 | Ben Dooks | ben@trinity.fluff.org | 1184692985 |  | SPI: tle620x power switch driver  Add support for the Infineon TLE62x0 series of low-side driver chips, such as the TLE6220 or TLE6230.  These can be viewed as output GPIOs specialized for power switching applications.  The driver provides a userspace interface to those GPIOs, and to the switch status they provide.  Signed-off-by: Ben Dooks <ben-linux@fluff.org> Signed-off-by: David Brownell <dbrownell@users.sourceforge.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pxa2xx_spi.h | s | 4.6K | 129 | Qiao Zhou | zhouqiao@marvell.com | 1339388750 |  | ARM: MMP: add pxa910-ssp into ssp_id_table  add pxa910-ssp into ssp_id_table, and fix pxa-ssp compiling issue under mach-mmp architect.  Signed-off-by: Qiao Zhou <zhouqiao@marvell.com> Acked-by: Haojian Zhuang <haojian.zhuang@gmail.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | ad7879.h | s | 1.1K | 37 | Michael Hennerich | michael.hennerich@analog.com | 1263889911 |  | Input: ad7879 - support auxiliary GPIOs via gpiolib  Drop the simple fancy sysfs hooks for the aux GPIOs and expose these via the gpiolib interface so that other drivers can use them.  Signed-off-by: Michael Hennerich <michael.hennerich@analog.com> Signed-off-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | spi_gpio.h | s | 2.5K | 66 | Marek Szyprowski | m.szyprowski@samsung.com | 1278218744 |  | spi/spi-gpio: add support for controllers without MISO or MOSI pin  There are some boards that do not strictly follow SPI standard and use only 3 wires (SCLK, MOSI or MISO, SS) for connecting some simple auxiliary chips and controls them with GPIO based 'spi controller'. In this configuration the MISO or MOSI line is missing (it is not required if the chip does not transfer any data back to host or host only reads data from chip).  This patch adds support for such non-standard configuration in GPIO-based SPI controller. It has been tested in configuration without MISO pin.  Reviewed-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Acked-by: David Brownell <dbrownell@users.sourceforge.net> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | mc33880.h | s | 157B | 7 | Richard Röjfors | richard.rojfors.ext@mocean-labs.com | 1253716786 |  | gpio: add MC33880 driver  A GPIO driver for the Freescale MC33880 High/Low side switch  Signed-off-by: Richard Röjfors <richard.rojfors.ext@mocean-labs.com> Cc: David Brownell <david-b@pacbell.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sh_hspi.h | s | 785B | 21 | Kuninori Morimoto | kuninori.morimoto.gx@renesas.com | 1331804461 |  | spi: sh-hspi: control spi clock more correctly  Current sh-hspi had used platform-specific speed. This patch remove it, and use spi_transfer specific speed. It removes unnecessary flags from struct sh_hspi_info, but struct sh_hspi_info is still exist, since sh-hspi needs platform info in the future.  Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | spi.h | s | 31K | 764 | Randy Dunlap | rdunlap@xenotime.net | 1335546218 |  | spi: fix spi.h kernel-doc warning  Fix kernel-doc warning in spi.h (copy/paste):  Warning(include/linux/spi/spi.h:365): No description found for parameter 'unprepare_transfer_hardware'  Signed-off-by: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | eeprom.h | s | 1.3K | 33 | Ivo Sieben | meltedpianoman@gmail.com | 1334786277 |  | Support M95040 SPI EEPROM  Updated the generic SPI EEPROM driver AT25 for support of an additional address bit in the instruction byte. Certain EEPROMS have a size that is larger than the number of address bytes would allow (e.g. like M95040 from ST that has 512 Byte size but uses only one address byte (A0 to A7) for addressing.) For the extra address bit (A8, A16 or A24) bit 3 of the instruction byte is used. This instruction bit is normally defined as don't care for other AT25 like chips.  Reviewed-by: Wolfram Sang <w.sang@pengutronix.de> Signed-off-by: Ivo Sieben <meltedpianoman@gmail.com> Acked-by: Chris Wright <chrisw@sous-sol.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | spi_bitbang.h | s | 1.6K | 41 | hartleys | hartleys@visionengravers.com | 1274768597 |  | spi: move bitbang txrx utility functions to private header  A number of files in drivers/spi fail checkincludes.pl due to the double include of <linux/spi/spi_bitbang.h>.  The first include is needed to get the struct spi_bitbang definition and the spi_bitbang_* function prototypes.  The second include happens after defining EXPAND_BITBANG_TXRX to get the inlined bitbang_txrx_* utility functions.  The <linux/spi/spi_bitbang.h> header is also included by a number of other spi drivers, as well as some arch/ code, in order to use struct spi_bitbang and the associated functions.  To fix the double include, and remove any potential confusion about it, move the inlined bitbang_txrx_* functions to a new private header in drivers/spi and also remove the need to define EXPAND_BITBANG_TXRX.  Signed-off-by: H Hartley Sweeten <hsweeten@visionengravers.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | at73c213.h | s | 789B | 22 | Hans-Christian Egtvedt | hcegtvedt@atmel.com | 1192543070 |  | [ALSA] ALSA sound driver for the AT73C213 DAC using Atmel SSC driver  This patch adds support for the AT73C213 DAC using the misc Atmel SSC driver in I2S mode. The driver also requires a SPI to setup the registers and control volume. It has been tested with an AT32AP7000 on the ATSTK1000 development board. The driver should also work with any Atmel device with an SSC module supported by the Atmel SSC driver (atmel-ssc). The atmel-ssc driver is just submitted to the Linux kernel. Please see mail thread http://lkml.org/lkml/2007/7/16/32  Signed-off-by: Hans-Christian Egtvedt <hcegtvedt@atmel.com> Signed-off-by: Takashi Iwai <tiwai@suse.de> Signed-off-by: Jaroslav Kysela <perex@suse.cz>
f | s3c24xx.h | s | 760B | 21 | Heiko Stuebner | heiko@sntech.de | 1328007987 |  | ARM: S3C24XX: move spi-s3c24xx platdata out of mach  spi.h now only contains the definition of the platform data structure for the driver in spi-s3c24xx.c . Therefore it does not need to stay in include/mach but can instead live in linux/spi/s3c24xx.h .  Signed-off-by: Heiko Stuebner <heiko@sntech.de> Cc: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Kukjin Kim <kgene.kim@samsung.com>
f | flash.h | s | 983B | 26 | Mike Lavender | mike@steroidmicros.com | 1137198595 |  | [PATCH] spi: M25 series SPI flash  This was originally a driver for the ST M25P80 SPI flash.  It's been updated slightly to handle other M25P series chips.  For many of these chips, the specific type could be probed, but for now this just requires static setup with flash_platform_data that lists the chip type (size, format) and any default partitioning to use.  Signed-off-by: David Brownell <dbrownell@users.sourceforge.net> Cc: Mike Lavender <mike@steroidmicros.com> Cc: David Brownell <dbrownell@users.sourceforge.net> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | rspi.h | s | 976B | 27 | Shimoda, Yoshihiro | yoshihiro.shimoda.uh@renesas.com | 1337488636 |  | spi/rspi: add dmaengine support  This patch adds dmaengine supporting using sh_dma driver. The module receives data by DMAC, it also needs TX DMAC to generate SPI's clocks.  Signed-off-by: Yoshihiro Shimoda <yoshihiro.shimoda.uh@renesas.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | mcp23s08.h | s | 871B | 21 | Peter Korsgaard | jacmet@sunsite.dk | 1310759657 |  | mcp23s08: get rid of setup/teardown callbacks  There's no in-tree users, and bus notifiers are more generic anyway.  Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | spidev.h | s | 4.6K | 109 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | Kbuild | g | 21B |  | Andrea Paterniani | a.paterniani@swapp-eng.it | 1178648115 |  | /dev/spidevB.C interface  Add a filesystem API for <linux/spi/spi.h> stack.  The initial version of this interface is purely synchronous.  dbrownell@users.sourceforge.net:   Cleaned up, bugfixed; much simplified; added preliminary documentation.   Works with mdev given CONFIG_SYSFS_DEPRECATED; and presumably udev.   Updated SPI_IOC_MESSAGE ioctl to full spi_message semantics, supporting  groups of one or more transfers (each of which may be full duplex if  desired).   This is marked as EXPERIMENTAL with an explicit disclaimer that the API  (notably the ioctls) is subject to change.  Signed-off-by: Andrea Paterniani <a.paterniani@swapp-eng.it> Signed-off-by: David Brownell <dbrownell@users.sourceforge.net> Cc: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | spi_oc_tiny.h | s | 589B | 18 | Thomas Chou | thomas@wytron.com.tw | 1298411993 |  | spi: add OpenCores tiny SPI driver  This patch adds support of OpenCores tiny SPI driver.  http://opencores.org/project,tiny_spi  Signed-off-by: Thomas Chou <thomas@wytron.com.tw> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | libertas_spi.h | s | 907B | 26 | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1244654870 |  | net/libertas: remove GPIO-CS handling in SPI interface code  This removes the dependency on GPIO framework and lets the SPI host driver handle the chip select. The SPI host driver is required to keep the CS active for the entire message unless cs_change says otherwise. This patch collects the two/three single SPI transfers into a message. Also the delay in read path in case use_dummy_writes are not used is moved into the SPI host driver.  Tested-by: Mike Rapoport <mike@compulab.co.il> Tested-by: Andrey Yurovsky <andrey@cozybit.com> Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Acked-by: Dan Williams <dcbw@redhat.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | lms283gf05.h | s | 987B | 25 | Marek Vasut | marek.vasut@gmail.com | 1252332486 |  | backlight: spi driver for LMS283GF05 LCD  ADd support for the SPI part of LMS283GF05 LCD.  The LCD uses SPI for initialization and powerdown sequences.  No further defails are specified in the datasheet about the initialization/powerdown sequence, just the magic numbers that have to be sent over SPI bus.  This LCD can be found in the Aeronix Zipit Z2 handheld.  Signed-off-by: Marek Vasut <marek.vasut@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Richard Purdie <rpurdie@linux.intel.com>
f | ad7877.h | s | 796B | 21 | Bryan Wu | bryan.wu@analog.com | 1178565178 |  | blackfin architecture  This adds support for the Analog Devices Blackfin processor architecture, and currently supports the BF533, BF532, BF531, BF537, BF536, BF534, and BF561 (Dual Core) devices, with a variety of development platforms including those avaliable from Analog Devices (BF533-EZKit, BF533-STAMP, BF537-STAMP, BF561-EZKIT), and Bluetechnix!  Tinyboards.  The Blackfin architecture was jointly developed by Intel and Analog Devices Inc.  (ADI) as the Micro Signal Architecture (MSA) core and introduced it in December of 2000.  Since then ADI has put this core into its Blackfin processor family of devices.  The Blackfin core has the advantages of a clean, orthogonal,RISC-like microprocessor instruction set.  It combines a dual-MAC (Multiply/Accumulate), state-of-the-art signal processing engine and single-instruction, multiple-data (SIMD) multimedia capabilities into a single instruction-set architecture.  The Blackfin architecture, including the instruction set, is described by the ADSP-BF53x/BF56x Blackfin Processor Programming Reference http://blackfin.uclinux.org/gf/download/frsrelease/29/2549/Blackfin_PRM.pdf  The Blackfin processor is already supported by major releases of gcc, and there are binary and source rpms/tarballs for many architectures at: http://blackfin.uclinux.org/gf/project/toolchain/frs There is complete documentation, including "getting started" guides available at: http://docs.blackfin.uclinux.org/ which provides links to the sources and patches you will need in order to set up a cross-compiling environment for bfin-linux-uclibc  This patch, as well as the other patches (toolchain, distribution, uClibc) are actively supported by Analog Devices Inc, at: http://blackfin.uclinux.org/  We have tested this on LTP, and our test plan (including pass/fails) can be found at: http://docs.blackfin.uclinux.org/doku.php?id=testing_the_linux_kernel  [m.kozlowski@tuxland.pl: balance parenthesis in blackfin header files] Signed-off-by: Bryan Wu <bryan.wu@analog.com> Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl> Signed-off-by: Aubrey Li <aubrey.li@analog.com> Signed-off-by: Jie Zhang <jie.zhang@analog.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tdo24m.h | s | 171B | 10 | Mike Rapoport | mike@compulab.co.il | 1231445467 |  | backlight: add support for Toppoly TDO35S series to tdo24m lcd driver  Signed-off-by: Mike Rapoport <mike@compulab.co.il> Acked-by: Eric Miao <eric.miao@marvell.com> Signed-off-by: Richard Purdie <rpurdie@linux.intel.com>
f | ifx_modem.h | s | 577B | 17 | Russ Gorby | russ.gorby@intel.com | 1296762190 |  | serial: ifx6x60: expanded info available from platform data  Some platform attributes (e.g. max_hz, use_dma) were being intuited from the modem type. These things should be specified by the platform data.  Added max_hz, use_dma to ifx_modem_platform_data definition, replaced is_6160 w/ modem_type, and changed clients accordingly  Signed-off-by: Russ Gorby <russ.gorby@intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | xilinx_spi.h | s | 609B | 18 | Richard Röjfors | richard.rojfors@mocean-labs.com | 1260323294 |  | xilinx_spi: add support for the DS570 IP.  This patch adds in support for the DS570 IP.  It's register compatible with the DS464, but adds support for 8/16/32 SPI.  The 8/16/32 support is added by attaching callbacks reading/writing the proper amount of data. To indicate to the driver which amount of bits to use a new field is introduced in the platform data struct.  Acked-by: Grant Likely <grant.likely@secretlab.ca> Tested-by: John Linn <John.Linn@xilinx.com> Signed-off-by: Richard Röjfors <richard.rojfors@mocean-labs.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | corgi_lcd.h | s | 421B | 15 | Eric Miao | eric.miao@marvell.com | 1222331894 |  | [ARM] corgi_lcd: use GPIO API for BACKLIGHT_ON and BACKLIGHT_CONT  Signed-off-by: Eric Miao <eric.miao@marvell.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | sh_msiof.h | s | 185B | 8 | Magnus Damm | damm@opensource.se | 1260690507 |  | spi: SuperH MSIOF SPI Master driver V2  This patch is V2 of SPI Master support for the SuperH MSIOF. Full duplex, spi mode 0-3, active high cs, 3-wire and lsb first should all be supported, but the driver has so far only been tested with "mmc_spi".  The MSIOF hardware comes with 32-bit FIFOs for receive and transmit, and this driver simply breaks the SPI messages into FIFO-sized chunks. The MSIOF hardware manages the pins for clock, receive and transmit (sck/miso/mosi), but the chip select pin is managed by software and must be configured as a regular GPIO pin by the board code.  Performance wise there is still room for improvement, but on a Ecovec board with the built-in sh7724 MSIOF0 this driver gets Mini-sd read speeds of about half a megabyte per second.  Future work include better clock setup and merging of 8-bit transfers into 32-bit words to reduce interrupt load and improve throughput.  Signed-off-by: Magnus Damm <damm@opensource.se> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
