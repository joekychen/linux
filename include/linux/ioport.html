<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › ioport.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>ioport.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * ioport.h	Definitions of routines for detecting, reserving and</span>
<span class="cm"> *		allocating system resources.</span>
<span class="cm"> *</span>
<span class="cm"> * Authors:	Linus Torvalds</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _LINUX_IOPORT_H</span>
<span class="cp">#define _LINUX_IOPORT_H</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#include &lt;linux/compiler.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cm">/*</span>
<span class="cm"> * Resources are tree-like, allowing</span>
<span class="cm"> * nesting etc..</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">resource</span> <span class="p">{</span>
	<span class="n">resource_size_t</span> <span class="n">start</span><span class="p">;</span>
	<span class="n">resource_size_t</span> <span class="n">end</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">sibling</span><span class="p">,</span> <span class="o">*</span><span class="n">child</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IO resources have these defined flags.</span>
<span class="cm"> */</span>
<span class="cp">#define IORESOURCE_BITS		0x000000ff	</span><span class="cm">/* Bus-specific bits */</span><span class="cp"></span>

<span class="cp">#define IORESOURCE_TYPE_BITS	0x00001f00	</span><span class="cm">/* Resource type */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_IO		0x00000100</span>
<span class="cp">#define IORESOURCE_MEM		0x00000200</span>
<span class="cp">#define IORESOURCE_IRQ		0x00000400</span>
<span class="cp">#define IORESOURCE_DMA		0x00000800</span>
<span class="cp">#define IORESOURCE_BUS		0x00001000</span>

<span class="cp">#define IORESOURCE_PREFETCH	0x00002000	</span><span class="cm">/* No side effects */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_READONLY	0x00004000</span>
<span class="cp">#define IORESOURCE_CACHEABLE	0x00008000</span>
<span class="cp">#define IORESOURCE_RANGELENGTH	0x00010000</span>
<span class="cp">#define IORESOURCE_SHADOWABLE	0x00020000</span>

<span class="cp">#define IORESOURCE_SIZEALIGN	0x00040000	</span><span class="cm">/* size indicates alignment */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_STARTALIGN	0x00080000	</span><span class="cm">/* start field is alignment */</span><span class="cp"></span>

<span class="cp">#define IORESOURCE_MEM_64	0x00100000</span>
<span class="cp">#define IORESOURCE_WINDOW	0x00200000	</span><span class="cm">/* forwarded by bridge */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_MUXED	0x00400000	</span><span class="cm">/* Resource is software muxed */</span><span class="cp"></span>

<span class="cp">#define IORESOURCE_EXCLUSIVE	0x08000000	</span><span class="cm">/* Userland may not map this resource */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_DISABLED	0x10000000</span>
<span class="cp">#define IORESOURCE_UNSET	0x20000000</span>
<span class="cp">#define IORESOURCE_AUTO		0x40000000</span>
<span class="cp">#define IORESOURCE_BUSY		0x80000000	</span><span class="cm">/* Driver has marked this resource busy */</span><span class="cp"></span>

<span class="cm">/* PnP IRQ specific bits (IORESOURCE_BITS) */</span>
<span class="cp">#define IORESOURCE_IRQ_HIGHEDGE		(1&lt;&lt;0)</span>
<span class="cp">#define IORESOURCE_IRQ_LOWEDGE		(1&lt;&lt;1)</span>
<span class="cp">#define IORESOURCE_IRQ_HIGHLEVEL	(1&lt;&lt;2)</span>
<span class="cp">#define IORESOURCE_IRQ_LOWLEVEL		(1&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_IRQ_SHAREABLE	(1&lt;&lt;4)</span>
<span class="cp">#define IORESOURCE_IRQ_OPTIONAL 	(1&lt;&lt;5)</span>

<span class="cm">/* PnP DMA specific bits (IORESOURCE_BITS) */</span>
<span class="cp">#define IORESOURCE_DMA_TYPE_MASK	(3&lt;&lt;0)</span>
<span class="cp">#define IORESOURCE_DMA_8BIT		(0&lt;&lt;0)</span>
<span class="cp">#define IORESOURCE_DMA_8AND16BIT	(1&lt;&lt;0)</span>
<span class="cp">#define IORESOURCE_DMA_16BIT		(2&lt;&lt;0)</span>

<span class="cp">#define IORESOURCE_DMA_MASTER		(1&lt;&lt;2)</span>
<span class="cp">#define IORESOURCE_DMA_BYTE		(1&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_DMA_WORD		(1&lt;&lt;4)</span>

<span class="cp">#define IORESOURCE_DMA_SPEED_MASK	(3&lt;&lt;6)</span>
<span class="cp">#define IORESOURCE_DMA_COMPATIBLE	(0&lt;&lt;6)</span>
<span class="cp">#define IORESOURCE_DMA_TYPEA		(1&lt;&lt;6)</span>
<span class="cp">#define IORESOURCE_DMA_TYPEB		(2&lt;&lt;6)</span>
<span class="cp">#define IORESOURCE_DMA_TYPEF		(3&lt;&lt;6)</span>

<span class="cm">/* PnP memory I/O specific bits (IORESOURCE_BITS) */</span>
<span class="cp">#define IORESOURCE_MEM_WRITEABLE	(1&lt;&lt;0)	</span><span class="cm">/* dup: IORESOURCE_READONLY */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_MEM_CACHEABLE	(1&lt;&lt;1)	</span><span class="cm">/* dup: IORESOURCE_CACHEABLE */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_MEM_RANGELENGTH	(1&lt;&lt;2)	</span><span class="cm">/* dup: IORESOURCE_RANGELENGTH */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_MEM_TYPE_MASK	(3&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_MEM_8BIT		(0&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_MEM_16BIT		(1&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_MEM_8AND16BIT	(2&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_MEM_32BIT		(3&lt;&lt;3)</span>
<span class="cp">#define IORESOURCE_MEM_SHADOWABLE	(1&lt;&lt;5)	</span><span class="cm">/* dup: IORESOURCE_SHADOWABLE */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_MEM_EXPANSIONROM	(1&lt;&lt;6)</span>

<span class="cm">/* PnP I/O specific bits (IORESOURCE_BITS) */</span>
<span class="cp">#define IORESOURCE_IO_16BIT_ADDR	(1&lt;&lt;0)</span>
<span class="cp">#define IORESOURCE_IO_FIXED		(1&lt;&lt;1)</span>

<span class="cm">/* PCI ROM control bits (IORESOURCE_BITS) */</span>
<span class="cp">#define IORESOURCE_ROM_ENABLE		(1&lt;&lt;0)	</span><span class="cm">/* ROM is enabled, same as PCI_ROM_ADDRESS_ENABLE */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_ROM_SHADOW		(1&lt;&lt;1)	</span><span class="cm">/* ROM is copy at C000:0 */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_ROM_COPY		(1&lt;&lt;2)	</span><span class="cm">/* ROM is alloc&#39;d copy, resource field overlaid */</span><span class="cp"></span>
<span class="cp">#define IORESOURCE_ROM_BIOS_COPY	(1&lt;&lt;3)	</span><span class="cm">/* ROM is BIOS copy, resource field overlaid */</span><span class="cp"></span>

<span class="cm">/* PCI control bits.  Shares IORESOURCE_BITS with above PCI ROM.  */</span>
<span class="cp">#define IORESOURCE_PCI_FIXED		(1&lt;&lt;4)	</span><span class="cm">/* Do not move resource */</span><span class="cp"></span>


<span class="cm">/* helpers to define resources */</span>
<span class="cp">#define DEFINE_RES_NAMED(_start, _size, _name, _flags)			\</span>
<span class="cp">	{								\</span>
<span class="cp">		.start = (_start),					\</span>
<span class="cp">		.end = (_start) + (_size) - 1,				\</span>
<span class="cp">		.name = (_name),					\</span>
<span class="cp">		.flags = (_flags),					\</span>
<span class="cp">	}</span>

<span class="cp">#define DEFINE_RES_IO_NAMED(_start, _size, _name)			\</span>
<span class="cp">	DEFINE_RES_NAMED((_start), (_size), (_name), IORESOURCE_IO)</span>
<span class="cp">#define DEFINE_RES_IO(_start, _size)					\</span>
<span class="cp">	DEFINE_RES_IO_NAMED((_start), (_size), NULL)</span>

<span class="cp">#define DEFINE_RES_MEM_NAMED(_start, _size, _name)			\</span>
<span class="cp">	DEFINE_RES_NAMED((_start), (_size), (_name), IORESOURCE_MEM)</span>
<span class="cp">#define DEFINE_RES_MEM(_start, _size)					\</span>
<span class="cp">	DEFINE_RES_MEM_NAMED((_start), (_size), NULL)</span>

<span class="cp">#define DEFINE_RES_IRQ_NAMED(_irq, _name)				\</span>
<span class="cp">	DEFINE_RES_NAMED((_irq), 1, (_name), IORESOURCE_IRQ)</span>
<span class="cp">#define DEFINE_RES_IRQ(_irq)						\</span>
<span class="cp">	DEFINE_RES_IRQ_NAMED((_irq), NULL)</span>

<span class="cp">#define DEFINE_RES_DMA_NAMED(_dma, _name)				\</span>
<span class="cp">	DEFINE_RES_NAMED((_dma), 1, (_name), IORESOURCE_DMA)</span>
<span class="cp">#define DEFINE_RES_DMA(_dma)						\</span>
<span class="cp">	DEFINE_RES_DMA_NAMED((_dma), NULL)</span>

<span class="cm">/* PC/ISA/whatever - the normal PC address spaces: IO and memory */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">ioport_resource</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">iomem_resource</span><span class="p">;</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">request_resource_conflict</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">request_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">release_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">release_child_resources</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">reserve_region_with_split</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span>
			     <span class="n">resource_size_t</span> <span class="n">start</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">end</span><span class="p">,</span>
			     <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">insert_resource_conflict</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">insert_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">insert_resource_expand_to_fit</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">arch_remove_reservations</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">avail</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">allocate_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">new</span><span class="p">,</span>
			     <span class="n">resource_size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">min</span><span class="p">,</span>
			     <span class="n">resource_size_t</span> <span class="n">max</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">align</span><span class="p">,</span>
			     <span class="n">resource_size_t</span> <span class="p">(</span><span class="o">*</span><span class="n">alignf</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span>
						       <span class="k">const</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="p">,</span>
						       <span class="n">resource_size_t</span><span class="p">,</span>
						       <span class="n">resource_size_t</span><span class="p">),</span>
			     <span class="kt">void</span> <span class="o">*</span><span class="n">alignf_data</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">lookup_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">root</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">start</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">adjust_resource</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">res</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">start</span><span class="p">,</span>
		    <span class="n">resource_size_t</span> <span class="n">size</span><span class="p">);</span>
<span class="n">resource_size_t</span> <span class="n">resource_alignment</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">res</span><span class="p">);</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">resource_size_t</span> <span class="nf">resource_size</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">res</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">-</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="nf">resource_type</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">res</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;</span> <span class="n">IORESOURCE_TYPE_BITS</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* Convenience shorthand with allocation */</span>
<span class="cp">#define request_region(start,n,name)		__request_region(&amp;ioport_resource, (start), (n), (name), 0)</span>
<span class="cp">#define request_muxed_region(start,n,name)	__request_region(&amp;ioport_resource, (start), (n), (name), IORESOURCE_MUXED)</span>
<span class="cp">#define __request_mem_region(start,n,name, excl) __request_region(&amp;iomem_resource, (start), (n), (name), excl)</span>
<span class="cp">#define request_mem_region(start,n,name) __request_region(&amp;iomem_resource, (start), (n), (name), 0)</span>
<span class="cp">#define request_mem_region_exclusive(start,n,name) \</span>
<span class="cp">	__request_region(&amp;iomem_resource, (start), (n), (name), IORESOURCE_EXCLUSIVE)</span>
<span class="cp">#define rename_region(region, newname) do { (region)-&gt;name = (newname); } while (0)</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span> <span class="n">__request_region</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="p">,</span>
					<span class="n">resource_size_t</span> <span class="n">start</span><span class="p">,</span>
					<span class="n">resource_size_t</span> <span class="n">n</span><span class="p">,</span>
					<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>

<span class="cm">/* Compatibility cruft */</span>
<span class="cp">#define release_region(start,n)	__release_region(&amp;ioport_resource, (start), (n))</span>
<span class="cp">#define check_mem_region(start,n)	__check_region(&amp;iomem_resource, (start), (n))</span>
<span class="cp">#define release_mem_region(start,n)	__release_region(&amp;iomem_resource, (start), (n))</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">__check_region</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="p">,</span> <span class="n">resource_size_t</span><span class="p">,</span> <span class="n">resource_size_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__release_region</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="p">,</span> <span class="n">resource_size_t</span><span class="p">,</span>
				<span class="n">resource_size_t</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="n">__deprecated</span> <span class="nf">check_region</span><span class="p">(</span><span class="n">resource_size_t</span> <span class="n">s</span><span class="p">,</span>
						<span class="n">resource_size_t</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">__check_region</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ioport_resource</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Wrappers for managed devices */</span>
<span class="k">struct</span> <span class="n">device</span><span class="p">;</span>
<span class="cp">#define devm_request_region(dev,start,n,name) \</span>
<span class="cp">	__devm_request_region(dev, &amp;ioport_resource, (start), (n), (name))</span>
<span class="cp">#define devm_request_mem_region(dev,start,n,name) \</span>
<span class="cp">	__devm_request_region(dev, &amp;iomem_resource, (start), (n), (name))</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span> <span class="n">__devm_request_region</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">start</span><span class="p">,</span>
				<span class="n">resource_size_t</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span>

<span class="cp">#define devm_release_region(dev, start, n) \</span>
<span class="cp">	__devm_release_region(dev, &amp;ioport_resource, (start), (n))</span>
<span class="cp">#define devm_release_mem_region(dev, start, n) \</span>
<span class="cp">	__devm_release_region(dev, &amp;iomem_resource, (start), (n))</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">__devm_release_region</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">parent</span><span class="p">,</span>
				  <span class="n">resource_size_t</span> <span class="n">start</span><span class="p">,</span> <span class="n">resource_size_t</span> <span class="n">n</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">iomem_map_sanity_check</span><span class="p">(</span><span class="n">resource_size_t</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">size</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">iomem_is_exclusive</span><span class="p">(</span><span class="n">u64</span> <span class="n">addr</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span>
<span class="n">walk_system_ram_range</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">start_pfn</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr_pages</span><span class="p">,</span>
		<span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">,</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">));</span>

<span class="cm">/* True if any part of r1 overlaps r2 */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">bool</span> <span class="nf">resource_overlaps</span><span class="p">(</span><span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">r1</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">r2</span><span class="p">)</span>
<span class="p">{</span>
       <span class="k">return</span> <span class="p">(</span><span class="n">r1</span><span class="o">-&gt;</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">r2</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">r1</span><span class="o">-&gt;</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">r2</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">);</span>
<span class="p">}</span>


<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>
<span class="cp">#endif	</span><span class="cm">/* _LINUX_IOPORT_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
