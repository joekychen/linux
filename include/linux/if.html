<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › if.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>if.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * INET		An implementation of the TCP/IP protocol suite for the LINUX</span>
<span class="cm"> *		operating system.  INET is implemented using the  BSD Socket</span>
<span class="cm"> *		interface as the means of communication with the user level.</span>
<span class="cm"> *</span>
<span class="cm"> *		Global definitions for the INET interface module.</span>
<span class="cm"> *</span>
<span class="cm"> * Version:	@(#)if.h	1.0.2	04/18/93</span>
<span class="cm"> *</span>
<span class="cm"> * Authors:	Original taken from Berkeley UNIX 4.3, (c) UCB 1982-1988</span>
<span class="cm"> *		Ross Biro</span>
<span class="cm"> *		Fred N. van Kempen, &lt;waltje@uWalt.NL.Mugnet.ORG&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *		This program is free software; you can redistribute it and/or</span>
<span class="cm"> *		modify it under the terms of the GNU General Public License</span>
<span class="cm"> *		as published by the Free Software Foundation; either version</span>
<span class="cm"> *		2 of the License, or (at your option) any later version.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _LINUX_IF_H</span>
<span class="cp">#define _LINUX_IF_H</span>

<span class="cp">#include &lt;linux/types.h&gt;		</span><span class="cm">/* for &quot;__kernel_caddr_t&quot; et al	*/</span><span class="cp"></span>
<span class="cp">#include &lt;linux/socket.h&gt;		</span><span class="cm">/* for &quot;struct sockaddr&quot; et al	*/</span><span class="cp"></span>
<span class="cp">#include &lt;linux/compiler.h&gt;		</span><span class="cm">/* for &quot;__user&quot; et al           */</span><span class="cp"></span>

<span class="cp">#define	IFNAMSIZ	16</span>
<span class="cp">#define	IFALIASZ	256</span>
<span class="cp">#include &lt;linux/hdlc/ioctl.h&gt;</span>

<span class="cm">/* Standard interface flags (netdevice-&gt;flags). */</span>
<span class="cp">#define	IFF_UP		0x1		</span><span class="cm">/* interface is up		*/</span><span class="cp"></span>
<span class="cp">#define	IFF_BROADCAST	0x2		</span><span class="cm">/* broadcast address valid	*/</span><span class="cp"></span>
<span class="cp">#define	IFF_DEBUG	0x4		</span><span class="cm">/* turn on debugging		*/</span><span class="cp"></span>
<span class="cp">#define	IFF_LOOPBACK	0x8		</span><span class="cm">/* is a loopback net		*/</span><span class="cp"></span>
<span class="cp">#define	IFF_POINTOPOINT	0x10		</span><span class="cm">/* interface is has p-p link	*/</span><span class="cp"></span>
<span class="cp">#define	IFF_NOTRAILERS	0x20		</span><span class="cm">/* avoid use of trailers	*/</span><span class="cp"></span>
<span class="cp">#define	IFF_RUNNING	0x40		</span><span class="cm">/* interface RFC2863 OPER_UP	*/</span><span class="cp"></span>
<span class="cp">#define	IFF_NOARP	0x80		</span><span class="cm">/* no ARP protocol		*/</span><span class="cp"></span>
<span class="cp">#define	IFF_PROMISC	0x100		</span><span class="cm">/* receive all packets		*/</span><span class="cp"></span>
<span class="cp">#define	IFF_ALLMULTI	0x200		</span><span class="cm">/* receive all multicast packets*/</span><span class="cp"></span>

<span class="cp">#define IFF_MASTER	0x400		</span><span class="cm">/* master of a load balancer 	*/</span><span class="cp"></span>
<span class="cp">#define IFF_SLAVE	0x800		</span><span class="cm">/* slave of a load balancer	*/</span><span class="cp"></span>

<span class="cp">#define IFF_MULTICAST	0x1000		</span><span class="cm">/* Supports multicast		*/</span><span class="cp"></span>

<span class="cp">#define IFF_PORTSEL	0x2000          </span><span class="cm">/* can set media type		*/</span><span class="cp"></span>
<span class="cp">#define IFF_AUTOMEDIA	0x4000		</span><span class="cm">/* auto media select active	*/</span><span class="cp"></span>
<span class="cp">#define IFF_DYNAMIC	0x8000		</span><span class="cm">/* dialup device with changing addresses*/</span><span class="cp"></span>

<span class="cp">#define IFF_LOWER_UP	0x10000		</span><span class="cm">/* driver signals L1 up		*/</span><span class="cp"></span>
<span class="cp">#define IFF_DORMANT	0x20000		</span><span class="cm">/* driver signals dormant	*/</span><span class="cp"></span>

<span class="cp">#define IFF_ECHO	0x40000		</span><span class="cm">/* echo sent packets		*/</span><span class="cp"></span>

<span class="cp">#define IFF_VOLATILE	(IFF_LOOPBACK|IFF_POINTOPOINT|IFF_BROADCAST|IFF_ECHO|\</span>
<span class="cp">		IFF_MASTER|IFF_SLAVE|IFF_RUNNING|IFF_LOWER_UP|IFF_DORMANT)</span>

<span class="cm">/* Private (from user) interface flags (netdevice-&gt;priv_flags). */</span>
<span class="cp">#define IFF_802_1Q_VLAN 0x1             </span><span class="cm">/* 802.1Q VLAN device.          */</span><span class="cp"></span>
<span class="cp">#define IFF_EBRIDGE	0x2		</span><span class="cm">/* Ethernet bridging device.	*/</span><span class="cp"></span>
<span class="cp">#define IFF_SLAVE_INACTIVE	0x4	</span><span class="cm">/* bonding slave not the curr. active */</span><span class="cp"></span>
<span class="cp">#define IFF_MASTER_8023AD	0x8	</span><span class="cm">/* bonding master, 802.3ad. 	*/</span><span class="cp"></span>
<span class="cp">#define IFF_MASTER_ALB	0x10		</span><span class="cm">/* bonding master, balance-alb.	*/</span><span class="cp"></span>
<span class="cp">#define IFF_BONDING	0x20		</span><span class="cm">/* bonding master or slave	*/</span><span class="cp"></span>
<span class="cp">#define IFF_SLAVE_NEEDARP 0x40		</span><span class="cm">/* need ARPs for validation	*/</span><span class="cp"></span>
<span class="cp">#define IFF_ISATAP	0x80		</span><span class="cm">/* ISATAP interface (RFC4214)	*/</span><span class="cp"></span>
<span class="cp">#define IFF_MASTER_ARPMON 0x100		</span><span class="cm">/* bonding master, ARP mon in use */</span><span class="cp"></span>
<span class="cp">#define IFF_WAN_HDLC	0x200		</span><span class="cm">/* WAN HDLC device		*/</span><span class="cp"></span>
<span class="cp">#define IFF_XMIT_DST_RELEASE 0x400	</span><span class="cm">/* dev_hard_start_xmit() is allowed to</span>
<span class="cm">					 * release skb-&gt;dst</span>
<span class="cm">					 */</span><span class="cp"></span>
<span class="cp">#define IFF_DONT_BRIDGE 0x800		</span><span class="cm">/* disallow bridging this ether dev */</span><span class="cp"></span>
<span class="cp">#define IFF_DISABLE_NETPOLL	0x1000	</span><span class="cm">/* disable netpoll at run-time */</span><span class="cp"></span>
<span class="cp">#define IFF_MACVLAN_PORT	0x2000	</span><span class="cm">/* device used as macvlan port */</span><span class="cp"></span>
<span class="cp">#define IFF_BRIDGE_PORT	0x4000		</span><span class="cm">/* device used as bridge port */</span><span class="cp"></span>
<span class="cp">#define IFF_OVS_DATAPATH	0x8000	</span><span class="cm">/* device used as Open vSwitch</span>
<span class="cm">					 * datapath port */</span><span class="cp"></span>
<span class="cp">#define IFF_TX_SKB_SHARING	0x10000	</span><span class="cm">/* The interface supports sharing</span>
<span class="cm">					 * skbs on transmit */</span><span class="cp"></span>
<span class="cp">#define IFF_UNICAST_FLT	0x20000		</span><span class="cm">/* Supports unicast filtering	*/</span><span class="cp"></span>
<span class="cp">#define IFF_TEAM_PORT	0x40000		</span><span class="cm">/* device used as team port */</span><span class="cp"></span>
<span class="cp">#define IFF_SUPP_NOFCS	0x80000		</span><span class="cm">/* device supports sending custom FCS */</span><span class="cp"></span>


<span class="cp">#define IF_GET_IFACE	0x0001		</span><span class="cm">/* for querying only */</span><span class="cp"></span>
<span class="cp">#define IF_GET_PROTO	0x0002</span>

<span class="cm">/* For definitions see hdlc.h */</span>
<span class="cp">#define IF_IFACE_V35	0x1000		</span><span class="cm">/* V.35 serial interface	*/</span><span class="cp"></span>
<span class="cp">#define IF_IFACE_V24	0x1001		</span><span class="cm">/* V.24 serial interface	*/</span><span class="cp"></span>
<span class="cp">#define IF_IFACE_X21	0x1002		</span><span class="cm">/* X.21 serial interface	*/</span><span class="cp"></span>
<span class="cp">#define IF_IFACE_T1	0x1003		</span><span class="cm">/* T1 telco serial interface	*/</span><span class="cp"></span>
<span class="cp">#define IF_IFACE_E1	0x1004		</span><span class="cm">/* E1 telco serial interface	*/</span><span class="cp"></span>
<span class="cp">#define IF_IFACE_SYNC_SERIAL 0x1005	</span><span class="cm">/* can&#39;t be set by software	*/</span><span class="cp"></span>
<span class="cp">#define IF_IFACE_X21D   0x1006          </span><span class="cm">/* X.21 Dual Clocking (FarSite) */</span><span class="cp"></span>

<span class="cm">/* For definitions see hdlc.h */</span>
<span class="cp">#define IF_PROTO_HDLC	0x2000		</span><span class="cm">/* raw HDLC protocol		*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_PPP	0x2001		</span><span class="cm">/* PPP protocol			*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_CISCO	0x2002		</span><span class="cm">/* Cisco HDLC protocol		*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR	0x2003		</span><span class="cm">/* Frame Relay protocol		*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR_ADD_PVC 0x2004	</span><span class="cm">/*    Create FR PVC		*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR_DEL_PVC 0x2005	</span><span class="cm">/*    Delete FR PVC		*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_X25	0x2006		</span><span class="cm">/* X.25				*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_HDLC_ETH 0x2007	</span><span class="cm">/* raw HDLC, Ethernet emulation	*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR_ADD_ETH_PVC 0x2008	</span><span class="cm">/*  Create FR Ethernet-bridged PVC */</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR_DEL_ETH_PVC 0x2009	</span><span class="cm">/*  Delete FR Ethernet-bridged PVC */</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR_PVC	0x200A		</span><span class="cm">/* for reading PVC status	*/</span><span class="cp"></span>
<span class="cp">#define IF_PROTO_FR_ETH_PVC 0x200B</span>
<span class="cp">#define IF_PROTO_RAW    0x200C          </span><span class="cm">/* RAW Socket                   */</span><span class="cp"></span>

<span class="cm">/* RFC 2863 operational status */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">IF_OPER_UNKNOWN</span><span class="p">,</span>
	<span class="n">IF_OPER_NOTPRESENT</span><span class="p">,</span>
	<span class="n">IF_OPER_DOWN</span><span class="p">,</span>
	<span class="n">IF_OPER_LOWERLAYERDOWN</span><span class="p">,</span>
	<span class="n">IF_OPER_TESTING</span><span class="p">,</span>
	<span class="n">IF_OPER_DORMANT</span><span class="p">,</span>
	<span class="n">IF_OPER_UP</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* link modes */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">IF_LINK_MODE_DEFAULT</span><span class="p">,</span>
	<span class="n">IF_LINK_MODE_DORMANT</span><span class="p">,</span>	<span class="cm">/* limit upward transition to dormant */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Device mapping structure. I&#39;d just gone off and designed a </span>
<span class="cm"> *	beautiful scheme using only loadable modules with arguments</span>
<span class="cm"> *	for driver options and along come the PCMCIA people 8)</span>
<span class="cm"> *</span>
<span class="cm"> *	Ah well. The get() side of this is good for WDSETUP, and it&#39;ll</span>
<span class="cm"> *	be handy for debugging things. The set side is fine for now and</span>
<span class="cm"> *	being very small might be worth keeping for clean configuration.</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">ifmap</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mem_start</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mem_end</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">base_addr</span><span class="p">;</span> 
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">irq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dma</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">port</span><span class="p">;</span>
	<span class="cm">/* 3 bytes spare */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">if_settings</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">type</span><span class="p">;</span>	<span class="cm">/* Type of physical device or protocol */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>	<span class="cm">/* Size of the data allocated by the caller */</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="cm">/* {atm/eth/dsl}_settings anyone ? */</span>
		<span class="n">raw_hdlc_proto</span>		<span class="n">__user</span> <span class="o">*</span><span class="n">raw_hdlc</span><span class="p">;</span>
		<span class="n">cisco_proto</span>		<span class="n">__user</span> <span class="o">*</span><span class="n">cisco</span><span class="p">;</span>
		<span class="n">fr_proto</span>		<span class="n">__user</span> <span class="o">*</span><span class="n">fr</span><span class="p">;</span>
		<span class="n">fr_proto_pvc</span>		<span class="n">__user</span> <span class="o">*</span><span class="n">fr_pvc</span><span class="p">;</span>
		<span class="n">fr_proto_pvc_info</span>	<span class="n">__user</span> <span class="o">*</span><span class="n">fr_pvc_info</span><span class="p">;</span>

		<span class="cm">/* interface settings */</span>
		<span class="n">sync_serial_settings</span>	<span class="n">__user</span> <span class="o">*</span><span class="n">sync</span><span class="p">;</span>
		<span class="n">te1_settings</span>		<span class="n">__user</span> <span class="o">*</span><span class="n">te1</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ifs_ifsu</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Interface request structure used for socket</span>
<span class="cm"> * ioctl&#39;s.  All interface ioctl&#39;s must have parameter</span>
<span class="cm"> * definitions which begin with ifr_name.  The</span>
<span class="cm"> * remainder may be interface specific.</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">ifreq</span> <span class="p">{</span>
<span class="cp">#define IFHWADDRLEN	6</span>
	<span class="k">union</span>
	<span class="p">{</span>
		<span class="kt">char</span>	<span class="n">ifrn_name</span><span class="p">[</span><span class="n">IFNAMSIZ</span><span class="p">];</span>		<span class="cm">/* if name, e.g. &quot;en0&quot; */</span>
	<span class="p">}</span> <span class="n">ifr_ifrn</span><span class="p">;</span>
	
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_addr</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_dstaddr</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_broadaddr</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_netmask</span><span class="p">;</span>
		<span class="k">struct</span>  <span class="n">sockaddr</span> <span class="n">ifru_hwaddr</span><span class="p">;</span>
		<span class="kt">short</span>	<span class="n">ifru_flags</span><span class="p">;</span>
		<span class="kt">int</span>	<span class="n">ifru_ivalue</span><span class="p">;</span>
		<span class="kt">int</span>	<span class="n">ifru_mtu</span><span class="p">;</span>
		<span class="k">struct</span>  <span class="n">ifmap</span> <span class="n">ifru_map</span><span class="p">;</span>
		<span class="kt">char</span>	<span class="n">ifru_slave</span><span class="p">[</span><span class="n">IFNAMSIZ</span><span class="p">];</span>	<span class="cm">/* Just fits the size */</span>
		<span class="kt">char</span>	<span class="n">ifru_newname</span><span class="p">[</span><span class="n">IFNAMSIZ</span><span class="p">];</span>
		<span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span>	<span class="n">ifru_data</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">if_settings</span> <span class="n">ifru_settings</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ifr_ifru</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define ifr_name	ifr_ifrn.ifrn_name	</span><span class="cm">/* interface name 	*/</span><span class="cp"></span>
<span class="cp">#define ifr_hwaddr	ifr_ifru.ifru_hwaddr	</span><span class="cm">/* MAC address 		*/</span><span class="cp"></span>
<span class="cp">#define	ifr_addr	ifr_ifru.ifru_addr	</span><span class="cm">/* address		*/</span><span class="cp"></span>
<span class="cp">#define	ifr_dstaddr	ifr_ifru.ifru_dstaddr	</span><span class="cm">/* other end of p-p lnk	*/</span><span class="cp"></span>
<span class="cp">#define	ifr_broadaddr	ifr_ifru.ifru_broadaddr	</span><span class="cm">/* broadcast address	*/</span><span class="cp"></span>
<span class="cp">#define	ifr_netmask	ifr_ifru.ifru_netmask	</span><span class="cm">/* interface net mask	*/</span><span class="cp"></span>
<span class="cp">#define	ifr_flags	ifr_ifru.ifru_flags	</span><span class="cm">/* flags		*/</span><span class="cp"></span>
<span class="cp">#define	ifr_metric	ifr_ifru.ifru_ivalue	</span><span class="cm">/* metric		*/</span><span class="cp"></span>
<span class="cp">#define	ifr_mtu		ifr_ifru.ifru_mtu	</span><span class="cm">/* mtu			*/</span><span class="cp"></span>
<span class="cp">#define ifr_map		ifr_ifru.ifru_map	</span><span class="cm">/* device map		*/</span><span class="cp"></span>
<span class="cp">#define ifr_slave	ifr_ifru.ifru_slave	</span><span class="cm">/* slave device		*/</span><span class="cp"></span>
<span class="cp">#define	ifr_data	ifr_ifru.ifru_data	</span><span class="cm">/* for use by interface	*/</span><span class="cp"></span>
<span class="cp">#define ifr_ifindex	ifr_ifru.ifru_ivalue	</span><span class="cm">/* interface index	*/</span><span class="cp"></span>
<span class="cp">#define ifr_bandwidth	ifr_ifru.ifru_ivalue    </span><span class="cm">/* link bandwidth	*/</span><span class="cp"></span>
<span class="cp">#define ifr_qlen	ifr_ifru.ifru_ivalue	</span><span class="cm">/* Queue length 	*/</span><span class="cp"></span>
<span class="cp">#define ifr_newname	ifr_ifru.ifru_newname	</span><span class="cm">/* New name		*/</span><span class="cp"></span>
<span class="cp">#define ifr_settings	ifr_ifru.ifru_settings	</span><span class="cm">/* Device/proto settings*/</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Structure used in SIOCGIFCONF request.</span>
<span class="cm"> * Used to retrieve interface configuration</span>
<span class="cm"> * for machine (useful for programs which</span>
<span class="cm"> * must know all networks accessible).</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">ifconf</span>  <span class="p">{</span>
	<span class="kt">int</span>	<span class="n">ifc_len</span><span class="p">;</span>			<span class="cm">/* size of buffer	*/</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ifcu_buf</span><span class="p">;</span>
		<span class="k">struct</span> <span class="n">ifreq</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ifcu_req</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ifc_ifcu</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define	ifc_buf	ifc_ifcu.ifcu_buf		</span><span class="cm">/* buffer address	*/</span><span class="cp"></span>
<span class="cp">#define	ifc_req	ifc_ifcu.ifcu_req		</span><span class="cm">/* array of structures	*/</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* _LINUX_IF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
