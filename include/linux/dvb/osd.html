<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › dvb › osd.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>osd.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * osd.h</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2001 Ralph  Metzler &lt;ralph@convergence.de&gt;</span>
<span class="cm"> *                  &amp; Marcus Metzler &lt;marcus@convergence.de&gt;</span>
<span class="cm"> *                    for convergence integrated media GmbH</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Lesser Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version 2.1</span>
<span class="cm"> * of the License, or (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU Lesser General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _DVBOSD_H_</span>
<span class="cp">#define _DVBOSD_H_</span>

<span class="cp">#include &lt;linux/compiler.h&gt;</span>

<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>All functions return -2 on "not open"</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Close</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>    <span class="c1">// ()</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>Disables OSD and releases the buffers
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Open</span><span class="p">,</span>       <span class="c1">// (x0,y0,x1,y1,BitPerPixel[2/4/8](color&amp;0x0F),mix[0..15](color&amp;0xF0))</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Opens OSD with this size and bit depth
returns 0 on success, -1 on DRAM allocation error, -2 on "already open"</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Show</span><span class="p">,</span>       <span class="c1">// ()</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>enables OSD mode
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Hide</span><span class="p">,</span>       <span class="c1">// ()</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>disables OSD mode
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Clear</span><span class="p">,</span>      <span class="c1">// ()</span></pre></div></td></tr>


<tr id="section-7"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-7">&#182;</a></div><p>Sets all pixel to color 0
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Fill</span><span class="p">,</span>       <span class="c1">// (color)</span></pre></div></td></tr>


<tr id="section-8"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-8">&#182;</a></div><p>Sets all pixel to color <col>
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_SetColor</span><span class="p">,</span>   <span class="c1">// (color,R{x0},G{y0},B{x1},opacity{y1})</span></pre></div></td></tr>


<tr id="section-9"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-9">&#182;</a></div><p>set palette entry <num> to <r,g,b>, <mix> and <trans> apply
R,G,B: 0..255
R=Red, G=Green, B=Blue
opacity=0:      pixel opacity 0% (only video pixel shows)
opacity=1..254: pixel opacity as specified in header
opacity=255:    pixel opacity 100% (only OSD pixel shows)
returns 0 on success, -1 on error</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_SetPalette</span><span class="p">,</span> <span class="c1">// (firstcolor{color},lastcolor{x0},data)</span></pre></div></td></tr>


<tr id="section-10"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-10">&#182;</a></div><p>Set a number of entries in the palette
sets the entries "firstcolor" through "lastcolor" from the array "data"
data has 4 byte for each color:
R,G,B, and a opacity value: 0->transparent, 1..254->mix, 255->pixel</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_SetTrans</span><span class="p">,</span>   <span class="c1">// (transparency{color})</span></pre></div></td></tr>


<tr id="section-11"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-11">&#182;</a></div><p>Sets transparency of mixed pixel (0..15)
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_SetPixel</span><span class="p">,</span>   <span class="c1">// (x0,y0,color)</span></pre></div></td></tr>


<tr id="section-12"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-12">&#182;</a></div><p>sets pixel <x>,<y> to color number <col>
returns 0 on success, -1 on error</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_GetPixel</span><span class="p">,</span>   <span class="c1">// (x0,y0)</span></pre></div></td></tr>


<tr id="section-13"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-13">&#182;</a></div><p>returns color number of pixel <x>,<y>,  or -1</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_SetRow</span><span class="p">,</span>     <span class="c1">// (x0,y0,x1,data)</span></pre></div></td></tr>


<tr id="section-14"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-14">&#182;</a></div><p>fills pixels x0,y through  x1,y with the content of data[]
returns 0 on success, -1 on clipping all pixel (no pixel drawn)</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_SetBlock</span><span class="p">,</span>   <span class="c1">// (x0,y0,x1,y1,increment{color},data)</span></pre></div></td></tr>


<tr id="section-15"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-15">&#182;</a></div><p>fills pixels x0,y0 through  x1,y1 with the content of data[]
inc contains the width of one line in the data block,
inc&lt;=0 uses blockwidth as linewidth
returns 0 on success, -1 on clipping all pixel</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_FillRow</span><span class="p">,</span>    <span class="c1">// (x0,y0,x1,color)</span></pre></div></td></tr>


<tr id="section-16"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-16">&#182;</a></div><p>fills pixels x0,y through  x1,y with the color <col>
returns 0 on success, -1 on clipping all pixel</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_FillBlock</span><span class="p">,</span>  <span class="c1">// (x0,y0,x1,y1,color)</span></pre></div></td></tr>


<tr id="section-17"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-17">&#182;</a></div><p>fills pixels x0,y0 through  x1,y1 with the color <col>
returns 0 on success, -1 on clipping all pixel</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Line</span><span class="p">,</span>       <span class="c1">// (x0,y0,x1,y1,color)</span></pre></div></td></tr>


<tr id="section-18"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-18">&#182;</a></div><p>draw a line from x0,y0 to x1,y1 with the color <col>
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Query</span><span class="p">,</span>      <span class="c1">// (x0,y0,x1,y1,xasp{color}}), yasp=11</span></pre></div></td></tr>


<tr id="section-19"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-19">&#182;</a></div><p>fills parameters with the picture dimensions and the pixel aspect ratio
returns 0 on success</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Test</span><span class="p">,</span>       <span class="c1">// ()</span></pre></div></td></tr>


<tr id="section-20"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-20">&#182;</a></div><p>draws a test picture. for debugging purposes only
returns 0 on success
TODO: remove "test" in final version</p></td><td class="code"><div class="highlight"><pre>  <span class="n">OSD_Text</span><span class="p">,</span>       <span class="c1">// (x0,y0,size,color,text)</span>
  <span class="n">OSD_SetWindow</span><span class="p">,</span> <span class="c1">//  (x0) set window with number 0&lt;x0&lt;8 as current</span>
  <span class="n">OSD_MoveWindow</span><span class="p">,</span> <span class="c1">//  move current window to (x0, y0)</span>
  <span class="n">OSD_OpenRaw</span><span class="p">,</span>	<span class="c1">// Open other types of OSD windows</span>
<span class="p">}</span> <span class="n">OSD_Command</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">osd_cmd_s</span> <span class="p">{</span>
	<span class="n">OSD_Command</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">x0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">y0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">x1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">y1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">color</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="p">}</span> <span class="n">osd_cmd_t</span><span class="p">;</span>

<span class="cm">/* OSD_OpenRaw: set &#39;color&#39; to desired window type */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">OSD_BITMAP1</span><span class="p">,</span>           <span class="cm">/* 1 bit bitmap */</span>
	<span class="n">OSD_BITMAP2</span><span class="p">,</span>           <span class="cm">/* 2 bit bitmap */</span>
	<span class="n">OSD_BITMAP4</span><span class="p">,</span>           <span class="cm">/* 4 bit bitmap */</span>
	<span class="n">OSD_BITMAP8</span><span class="p">,</span>           <span class="cm">/* 8 bit bitmap */</span>
	<span class="n">OSD_BITMAP1HR</span><span class="p">,</span>         <span class="cm">/* 1 Bit bitmap half resolution */</span>
	<span class="n">OSD_BITMAP2HR</span><span class="p">,</span>         <span class="cm">/* 2 bit bitmap half resolution */</span>
	<span class="n">OSD_BITMAP4HR</span><span class="p">,</span>         <span class="cm">/* 4 bit bitmap half resolution */</span>
	<span class="n">OSD_BITMAP8HR</span><span class="p">,</span>         <span class="cm">/* 8 bit bitmap half resolution */</span>
	<span class="n">OSD_YCRCB422</span><span class="p">,</span>          <span class="cm">/* 4:2:2 YCRCB Graphic Display */</span>
	<span class="n">OSD_YCRCB444</span><span class="p">,</span>          <span class="cm">/* 4:4:4 YCRCB Graphic Display */</span>
	<span class="n">OSD_YCRCB444HR</span><span class="p">,</span>        <span class="cm">/* 4:4:4 YCRCB graphic half resolution */</span>
	<span class="n">OSD_VIDEOTSIZE</span><span class="p">,</span>        <span class="cm">/* True Size Normal MPEG Video Display */</span>
	<span class="n">OSD_VIDEOHSIZE</span><span class="p">,</span>        <span class="cm">/* MPEG Video Display Half Resolution */</span>
	<span class="n">OSD_VIDEOQSIZE</span><span class="p">,</span>        <span class="cm">/* MPEG Video Display Quarter Resolution */</span>
	<span class="n">OSD_VIDEODSIZE</span><span class="p">,</span>        <span class="cm">/* MPEG Video Display Double Resolution */</span>
	<span class="n">OSD_VIDEOTHSIZE</span><span class="p">,</span>       <span class="cm">/* True Size MPEG Video Display Half Resolution */</span>
	<span class="n">OSD_VIDEOTQSIZE</span><span class="p">,</span>       <span class="cm">/* True Size MPEG Video Display Quarter Resolution*/</span>
	<span class="n">OSD_VIDEOTDSIZE</span><span class="p">,</span>       <span class="cm">/* True Size MPEG Video Display Double Resolution */</span>
	<span class="n">OSD_VIDEONSIZE</span><span class="p">,</span>        <span class="cm">/* Full Size MPEG Video Display */</span>
	<span class="n">OSD_CURSOR</span>             <span class="cm">/* Cursor */</span>
<span class="p">}</span> <span class="n">osd_raw_window_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">osd_cap_s</span> <span class="p">{</span>
	<span class="kt">int</span>  <span class="n">cmd</span><span class="p">;</span>
<span class="cp">#define OSD_CAP_MEMSIZE         1  </span><span class="cm">/* memory size */</span><span class="cp"></span>
	<span class="kt">long</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span> <span class="n">osd_cap_t</span><span class="p">;</span>


<span class="cp">#define OSD_SEND_CMD            _IOW(&#39;o&#39;, 160, osd_cmd_t)</span>
<span class="cp">#define OSD_GET_CAPABILITY      _IOR(&#39;o&#39;, 161, osd_cap_t)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
