<!DOCTYPE html>
<html><head><title>joekychen/linux » include › linux › compat.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>compat.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _LINUX_COMPAT_H</span>
<span class="cp">#define _LINUX_COMPAT_H</span>
<span class="cm">/*</span>
<span class="cm"> * These are the type definitions for the architecture specific</span>
<span class="cm"> * syscall compatibility layer.</span>
<span class="cm"> */</span>

<span class="cp">#ifdef CONFIG_COMPAT</span>

<span class="cp">#include &lt;linux/stat.h&gt;</span>
<span class="cp">#include &lt;linux/param.h&gt;	</span><span class="cm">/* for HZ */</span><span class="cp"></span>
<span class="cp">#include &lt;linux/sem.h&gt;</span>
<span class="cp">#include &lt;linux/socket.h&gt;</span>
<span class="cp">#include &lt;linux/if.h&gt;</span>
<span class="cp">#include &lt;linux/fs.h&gt;</span>
<span class="cp">#include &lt;linux/aio_abi.h&gt;	</span><span class="cm">/* for aio_context_t */</span><span class="cp"></span>

<span class="cp">#include &lt;asm/compat.h&gt;</span>
<span class="cp">#include &lt;asm/siginfo.h&gt;</span>
<span class="cp">#include &lt;asm/signal.h&gt;</span>

<span class="cp">#ifndef COMPAT_USE_64BIT_TIME</span>
<span class="cp">#define COMPAT_USE_64BIT_TIME 0</span>
<span class="cp">#endif</span>

<span class="cp">#define compat_jiffies_to_clock_t(x)	\</span>
<span class="cp">		(((unsigned long)(x) * COMPAT_USER_HZ) / HZ)</span>

<span class="k">typedef</span> <span class="n">__compat_uid32_t</span>	<span class="n">compat_uid_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">__compat_gid32_t</span>	<span class="n">compat_gid_t</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">compat_sel_arg_struct</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">rusage</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">it_interval</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">it_value</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_utimbuf</span> <span class="p">{</span>
	<span class="n">compat_time_t</span>		<span class="n">actime</span><span class="p">;</span>
	<span class="n">compat_time_t</span>		<span class="n">modtime</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_itimerval</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">compat_timeval</span>	<span class="n">it_interval</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">compat_timeval</span>	<span class="n">it_value</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_tms</span> <span class="p">{</span>
	<span class="n">compat_clock_t</span>		<span class="n">tms_utime</span><span class="p">;</span>
	<span class="n">compat_clock_t</span>		<span class="n">tms_stime</span><span class="p">;</span>
	<span class="n">compat_clock_t</span>		<span class="n">tms_cutime</span><span class="p">;</span>
	<span class="n">compat_clock_t</span>		<span class="n">tms_cstime</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_timex</span> <span class="p">{</span>
	<span class="n">compat_uint_t</span> <span class="n">modes</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">freq</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">maxerror</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">esterror</span><span class="p">;</span>
	<span class="n">compat_int_t</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">constant</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">precision</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">tolerance</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">time</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">tick</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">ppsfreq</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">jitter</span><span class="p">;</span>
	<span class="n">compat_int_t</span> <span class="n">shift</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">stabil</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">jitcnt</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">calcnt</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">errcnt</span><span class="p">;</span>
	<span class="n">compat_long_t</span> <span class="n">stbcnt</span><span class="p">;</span>
	<span class="n">compat_int_t</span> <span class="n">tai</span><span class="p">;</span>

	<span class="nl">compat_int_t:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span>
	<span class="nl">compat_int_t:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span>
	<span class="nl">compat_int_t:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span> <span class="n">compat_int_t</span><span class="o">:</span><span class="mi">32</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define _COMPAT_NSIG_WORDS	(_COMPAT_NSIG / _COMPAT_NSIG_BPW)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">compat_sigset_word</span>	<span class="n">sig</span><span class="p">[</span><span class="n">_COMPAT_NSIG_WORDS</span><span class="p">];</span>
<span class="p">}</span> <span class="n">compat_sigset_t</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * These functions operate strictly on struct compat_time*</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">get_compat_timespec</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span> <span class="o">*</span><span class="p">,</span>
			       <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">put_compat_timespec</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">timespec</span> <span class="o">*</span><span class="p">,</span>
			       <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">get_compat_timeval</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span> <span class="o">*</span><span class="p">,</span>
			      <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">put_compat_timeval</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">timeval</span> <span class="o">*</span><span class="p">,</span>
			      <span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="cm">/*</span>
<span class="cm"> * These functions operate on 32- or 64-bit specs depending on</span>
<span class="cm"> * COMPAT_USE_64BIT_TIME, hence the void user pointer arguments and the</span>
<span class="cm"> * naming as compat_get/put_ rather than get/put_compat_.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">compat_get_timespec</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">compat_put_timespec</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">timespec</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">compat_get_timeval</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">compat_put_timeval</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">timeval</span> <span class="o">*</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">compat_iovec</span> <span class="p">{</span>
	<span class="n">compat_uptr_t</span>	<span class="n">iov_base</span><span class="p">;</span>
	<span class="n">compat_size_t</span>	<span class="n">iov_len</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_rlimit</span> <span class="p">{</span>
	<span class="n">compat_ulong_t</span>	<span class="n">rlim_cur</span><span class="p">;</span>
	<span class="n">compat_ulong_t</span>	<span class="n">rlim_max</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_rusage</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">ru_utime</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">ru_stime</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_maxrss</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_ixrss</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_idrss</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_isrss</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_minflt</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_majflt</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_nswap</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_inblock</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_oublock</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_msgsnd</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_msgrcv</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_nsignals</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_nvcsw</span><span class="p">;</span>
	<span class="n">compat_long_t</span>	<span class="n">ru_nivcsw</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">put_compat_rusage</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">rusage</span> <span class="o">*</span><span class="p">,</span>
			     <span class="k">struct</span> <span class="n">compat_rusage</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">compat_siginfo</span><span class="p">;</span>

<span class="k">extern</span> <span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_waitid</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">compat_pid_t</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">compat_siginfo</span> <span class="n">__user</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">compat_rusage</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">compat_dirent</span> <span class="p">{</span>
	<span class="n">u32</span>		<span class="n">d_ino</span><span class="p">;</span>
	<span class="n">compat_off_t</span>	<span class="n">d_off</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">d_reclen</span><span class="p">;</span>
	<span class="kt">char</span>		<span class="n">d_name</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_ustat</span> <span class="p">{</span>
	<span class="n">compat_daddr_t</span>		<span class="n">f_tfree</span><span class="p">;</span>
	<span class="n">compat_ino_t</span>		<span class="n">f_tinode</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="n">f_fname</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="kt">char</span>			<span class="n">f_fpack</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">compat_sigval</span> <span class="p">{</span>
	<span class="n">compat_int_t</span>	<span class="n">sival_int</span><span class="p">;</span>
	<span class="n">compat_uptr_t</span>	<span class="n">sival_ptr</span><span class="p">;</span>
<span class="p">}</span> <span class="n">compat_sigval_t</span><span class="p">;</span>

<span class="cp">#define COMPAT_SIGEV_PAD_SIZE	((SIGEV_MAX_SIZE/sizeof(int)) - 3)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">compat_sigevent</span> <span class="p">{</span>
	<span class="n">compat_sigval_t</span> <span class="n">sigev_value</span><span class="p">;</span>
	<span class="n">compat_int_t</span> <span class="n">sigev_signo</span><span class="p">;</span>
	<span class="n">compat_int_t</span> <span class="n">sigev_notify</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="n">compat_int_t</span> <span class="n">_pad</span><span class="p">[</span><span class="n">COMPAT_SIGEV_PAD_SIZE</span><span class="p">];</span>
		<span class="n">compat_int_t</span> <span class="n">_tid</span><span class="p">;</span>

		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">compat_uptr_t</span> <span class="n">_function</span><span class="p">;</span>
			<span class="n">compat_uptr_t</span> <span class="n">_attribute</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">_sigev_thread</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">_sigev_un</span><span class="p">;</span>
<span class="p">}</span> <span class="n">compat_sigevent_t</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">compat_ifmap</span> <span class="p">{</span>
	<span class="n">compat_ulong_t</span> <span class="n">mem_start</span><span class="p">;</span>
	<span class="n">compat_ulong_t</span> <span class="n">mem_end</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">base_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">irq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dma</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">port</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_if_settings</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">type</span><span class="p">;</span>	<span class="cm">/* Type of physical device or protocol */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>	<span class="cm">/* Size of the data allocated by the caller */</span>
	<span class="n">compat_uptr_t</span> <span class="n">ifs_ifsu</span><span class="p">;</span>	<span class="cm">/* union of pointers */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_ifreq</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="kt">char</span>	<span class="n">ifrn_name</span><span class="p">[</span><span class="n">IFNAMSIZ</span><span class="p">];</span>    <span class="cm">/* if name, e.g. &quot;en0&quot; */</span>
	<span class="p">}</span> <span class="n">ifr_ifrn</span><span class="p">;</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_addr</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_dstaddr</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_broadaddr</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_netmask</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">sockaddr</span> <span class="n">ifru_hwaddr</span><span class="p">;</span>
		<span class="kt">short</span>	<span class="n">ifru_flags</span><span class="p">;</span>
		<span class="n">compat_int_t</span>	<span class="n">ifru_ivalue</span><span class="p">;</span>
		<span class="n">compat_int_t</span>	<span class="n">ifru_mtu</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">compat_ifmap</span> <span class="n">ifru_map</span><span class="p">;</span>
		<span class="kt">char</span>	<span class="n">ifru_slave</span><span class="p">[</span><span class="n">IFNAMSIZ</span><span class="p">];</span>   <span class="cm">/* Just fits the size */</span>
		<span class="kt">char</span>	<span class="n">ifru_newname</span><span class="p">[</span><span class="n">IFNAMSIZ</span><span class="p">];</span>
		<span class="n">compat_caddr_t</span>	<span class="n">ifru_data</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">compat_if_settings</span> <span class="n">ifru_settings</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">ifr_ifru</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_ifconf</span> <span class="p">{</span>
	<span class="n">compat_int_t</span>	<span class="n">ifc_len</span><span class="p">;</span>                <span class="cm">/* size of buffer */</span>
	<span class="n">compat_caddr_t</span>  <span class="n">ifcbuf</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_robust_list</span> <span class="p">{</span>
	<span class="n">compat_uptr_t</span>			<span class="n">next</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_robust_list_head</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">compat_robust_list</span>	<span class="n">list</span><span class="p">;</span>
	<span class="n">compat_long_t</span>			<span class="n">futex_offset</span><span class="p">;</span>
	<span class="n">compat_uptr_t</span>			<span class="n">list_op_pending</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">compat_statfs</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_statfs64</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_old_linux_dirent</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_linux_dirent</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">linux_dirent64</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_msghdr</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_mmsghdr</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_sysinfo</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_sysctl_args</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_kexec_segment</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_mq_attr</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">compat_msgbuf</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">compat_exit_robust_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">curr</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span>
<span class="n">compat_sys_set_robust_list</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_robust_list_head</span> <span class="n">__user</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span>
			   <span class="n">compat_size_t</span> <span class="n">len</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span>
<span class="n">compat_sys_get_robust_list</span><span class="p">(</span><span class="kt">int</span> <span class="n">pid</span><span class="p">,</span> <span class="n">compat_uptr_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">head_ptr</span><span class="p">,</span>
			   <span class="n">compat_size_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">len_ptr</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_ARCH_WANT_OLD_COMPAT_IPC</span>
<span class="kt">long</span> <span class="n">compat_sys_semctl</span><span class="p">(</span><span class="kt">int</span> <span class="n">first</span><span class="p">,</span> <span class="kt">int</span> <span class="n">second</span><span class="p">,</span> <span class="kt">int</span> <span class="n">third</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uptr</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_msgsnd</span><span class="p">(</span><span class="kt">int</span> <span class="n">first</span><span class="p">,</span> <span class="kt">int</span> <span class="n">second</span><span class="p">,</span> <span class="kt">int</span> <span class="n">third</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uptr</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_msgrcv</span><span class="p">(</span><span class="kt">int</span> <span class="n">first</span><span class="p">,</span> <span class="kt">int</span> <span class="n">second</span><span class="p">,</span> <span class="kt">int</span> <span class="n">msgtyp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">third</span><span class="p">,</span>
		<span class="kt">int</span> <span class="n">version</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uptr</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_shmat</span><span class="p">(</span><span class="kt">int</span> <span class="n">first</span><span class="p">,</span> <span class="kt">int</span> <span class="n">second</span><span class="p">,</span> <span class="n">compat_uptr_t</span> <span class="n">third</span><span class="p">,</span> <span class="kt">int</span> <span class="n">version</span><span class="p">,</span>
		<span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uptr</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="kt">long</span> <span class="n">compat_sys_semctl</span><span class="p">(</span><span class="kt">int</span> <span class="n">semid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">semnum</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_msgsnd</span><span class="p">(</span><span class="kt">int</span> <span class="n">msqid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_msgbuf</span> <span class="n">__user</span> <span class="o">*</span><span class="n">msgp</span><span class="p">,</span>
		<span class="kt">size_t</span> <span class="n">msgsz</span><span class="p">,</span> <span class="kt">int</span> <span class="n">msgflg</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_msgrcv</span><span class="p">(</span><span class="kt">int</span> <span class="n">msqid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_msgbuf</span> <span class="n">__user</span> <span class="o">*</span><span class="n">msgp</span><span class="p">,</span>
		<span class="kt">size_t</span> <span class="n">msgsz</span><span class="p">,</span> <span class="kt">long</span> <span class="n">msgtyp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">msgflg</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_shmat</span><span class="p">(</span><span class="kt">int</span> <span class="n">shmid</span><span class="p">,</span> <span class="n">compat_uptr_t</span> <span class="n">shmaddr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">shmflg</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="kt">long</span> <span class="n">compat_sys_msgctl</span><span class="p">(</span><span class="kt">int</span> <span class="n">first</span><span class="p">,</span> <span class="kt">int</span> <span class="n">second</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uptr</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_shmctl</span><span class="p">(</span><span class="kt">int</span> <span class="n">first</span><span class="p">,</span> <span class="kt">int</span> <span class="n">second</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uptr</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_semtimedop</span><span class="p">(</span><span class="kt">int</span> <span class="n">semid</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sembuf</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tsems</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="n">nsems</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">timeout</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_keyctl</span><span class="p">(</span><span class="n">u32</span> <span class="n">option</span><span class="p">,</span>
			      <span class="n">u32</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">u32</span> <span class="n">arg3</span><span class="p">,</span> <span class="n">u32</span> <span class="n">arg4</span><span class="p">,</span> <span class="n">u32</span> <span class="n">arg5</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_ustat</span><span class="p">(</span><span class="kt">unsigned</span> <span class="n">dev</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_ustat</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u32</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_readv</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fd</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">vec</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">vlen</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_writev</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fd</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">vec</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">vlen</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_preadv</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fd</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">vec</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">vlen</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pos_low</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pos_high</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_pwritev</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fd</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">vec</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">vlen</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pos_low</span><span class="p">,</span> <span class="n">u32</span> <span class="n">pos_high</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">compat_do_execve</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span> <span class="n">compat_uptr_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">argv</span><span class="p">,</span>
		     <span class="n">compat_uptr_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">envp</span><span class="p">,</span> <span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_select</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">inp</span><span class="p">,</span>
		<span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">outp</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">exp</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tvp</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_old_select</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_sel_arg_struct</span> <span class="n">__user</span> <span class="o">*</span><span class="n">arg</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_wait4</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span>
				 <span class="n">compat_uint_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">stat_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">options</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">compat_rusage</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ru</span><span class="p">);</span>

<span class="cp">#define BITS_PER_COMPAT_LONG    (8*sizeof(compat_long_t))</span>

<span class="cp">#define BITS_TO_COMPAT_LONGS(bits) \</span>
<span class="cp">	(((bits)+BITS_PER_COMPAT_LONG-1)/BITS_PER_COMPAT_LONG)</span>

<span class="kt">long</span> <span class="n">compat_get_bitmap</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">mask</span><span class="p">,</span> <span class="k">const</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">umask</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">bitmap_size</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_put_bitmap</span><span class="p">(</span><span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">umask</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">mask</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">bitmap_size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">copy_siginfo_from_user32</span><span class="p">(</span><span class="n">siginfo_t</span> <span class="o">*</span><span class="n">to</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_siginfo</span> <span class="n">__user</span> <span class="o">*</span><span class="n">from</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">copy_siginfo_to_user32</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_siginfo</span> <span class="n">__user</span> <span class="o">*</span><span class="n">to</span><span class="p">,</span> <span class="n">siginfo_t</span> <span class="o">*</span><span class="n">from</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">get_compat_sigevent</span><span class="p">(</span><span class="k">struct</span> <span class="n">sigevent</span> <span class="o">*</span><span class="n">event</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_sigevent</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_event</span><span class="p">);</span>
<span class="kt">long</span> <span class="n">compat_sys_rt_tgsigqueueinfo</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">tgid</span><span class="p">,</span> <span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sig</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">compat_siginfo</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uinfo</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">compat_timeval_compare</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timeval</span> <span class="o">*</span><span class="n">lhs</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">compat_timeval</span> <span class="o">*</span><span class="n">rhs</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">lhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">lhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span> <span class="o">&gt;</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">lhs</span><span class="o">-&gt;</span><span class="n">tv_usec</span> <span class="o">-</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">tv_usec</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">compat_timespec_compare</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timespec</span> <span class="o">*</span><span class="n">lhs</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="o">*</span><span class="n">rhs</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">lhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">lhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span> <span class="o">&gt;</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">tv_sec</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">lhs</span><span class="o">-&gt;</span><span class="n">tv_nsec</span> <span class="o">-</span> <span class="n">rhs</span><span class="o">-&gt;</span><span class="n">tv_nsec</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">get_compat_itimerspec</span><span class="p">(</span><span class="k">struct</span> <span class="n">itimerspec</span> <span class="o">*</span><span class="n">dst</span><span class="p">,</span>
				 <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">src</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">put_compat_itimerspec</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">dst</span><span class="p">,</span>
				 <span class="k">const</span> <span class="k">struct</span> <span class="n">itimerspec</span> <span class="o">*</span><span class="n">src</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_gettimeofday</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tv</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">timezone</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tz</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_settimeofday</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tv</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">timezone</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tz</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_adjtimex</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timex</span> <span class="n">__user</span> <span class="o">*</span><span class="n">utp</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">compat_printk</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">sigset_from_compat</span><span class="p">(</span><span class="n">sigset_t</span> <span class="o">*</span><span class="n">set</span><span class="p">,</span> <span class="n">compat_sigset_t</span> <span class="o">*</span><span class="n">compat</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_migrate_pages</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span>
		<span class="n">compat_ulong_t</span> <span class="n">maxnode</span><span class="p">,</span> <span class="k">const</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">old_nodes</span><span class="p">,</span>
		<span class="k">const</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">new_nodes</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">compat_ptrace_request</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">child</span><span class="p">,</span>
				 <span class="n">compat_long_t</span> <span class="n">request</span><span class="p">,</span>
				 <span class="n">compat_ulong_t</span> <span class="n">addr</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">data</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">long</span> <span class="n">compat_arch_ptrace</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">child</span><span class="p">,</span> <span class="n">compat_long_t</span> <span class="n">request</span><span class="p">,</span>
			       <span class="n">compat_ulong_t</span> <span class="n">addr</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">data</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_ptrace</span><span class="p">(</span><span class="n">compat_long_t</span> <span class="n">request</span><span class="p">,</span> <span class="n">compat_long_t</span> <span class="n">pid</span><span class="p">,</span>
				  <span class="n">compat_long_t</span> <span class="n">addr</span><span class="p">,</span> <span class="n">compat_long_t</span> <span class="n">data</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * epoll (fs/eventpoll.c) compat bits follow ...</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">epoll_event</span><span class="p">;</span>
<span class="cp">#define compat_epoll_event	epoll_event</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_epoll_pwait</span><span class="p">(</span><span class="kt">int</span> <span class="n">epfd</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">compat_epoll_event</span> <span class="n">__user</span> <span class="o">*</span><span class="n">events</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">maxevents</span><span class="p">,</span> <span class="kt">int</span> <span class="n">timeout</span><span class="p">,</span>
			<span class="k">const</span> <span class="n">compat_sigset_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">sigmask</span><span class="p">,</span>
			<span class="n">compat_size_t</span> <span class="n">sigsetsize</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_utime</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">compat_utimbuf</span> <span class="n">__user</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_utimensat</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dfd</span><span class="p">,</span>
				     <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">t</span><span class="p">,</span>
				     <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_time</span><span class="p">(</span><span class="n">compat_time_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tloc</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_stime</span><span class="p">(</span><span class="n">compat_time_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tptr</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_signalfd</span><span class="p">(</span><span class="kt">int</span> <span class="n">ufd</span><span class="p">,</span>
				    <span class="k">const</span> <span class="n">compat_sigset_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">sigmask</span><span class="p">,</span>
				    <span class="n">compat_size_t</span> <span class="n">sigsetsize</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_timerfd_settime</span><span class="p">(</span><span class="kt">int</span> <span class="n">ufd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
				   <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">utmr</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">otmr</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_timerfd_gettime</span><span class="p">(</span><span class="kt">int</span> <span class="n">ufd</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">otmr</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_move_pages</span><span class="p">(</span><span class="n">pid_t</span> <span class="n">pid</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr_page</span><span class="p">,</span>
				      <span class="n">__u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pages</span><span class="p">,</span>
				      <span class="k">const</span> <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">nodes</span><span class="p">,</span>
				      <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">status</span><span class="p">,</span>
				      <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_futimesat</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dfd</span><span class="p">,</span>
				     <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_utimes</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">compat_timeval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">t</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_newstat</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">compat_stat</span> <span class="n">__user</span> <span class="o">*</span><span class="n">statbuf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_newlstat</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">compat_stat</span> <span class="n">__user</span> <span class="o">*</span><span class="n">statbuf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_newfstatat</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dfd</span><span class="p">,</span>
				      <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">compat_stat</span> <span class="n">__user</span> <span class="o">*</span><span class="n">statbuf</span><span class="p">,</span>
				      <span class="kt">int</span> <span class="n">flag</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_newfstat</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">compat_stat</span> <span class="n">__user</span> <span class="o">*</span><span class="n">statbuf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_statfs</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">compat_statfs</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_fstatfs</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span>
				   <span class="k">struct</span> <span class="n">compat_statfs</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_statfs64</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">pathname</span><span class="p">,</span>
				    <span class="n">compat_size_t</span> <span class="n">sz</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">compat_statfs64</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_fstatfs64</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="n">compat_size_t</span> <span class="n">sz</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_statfs64</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_fcntl64</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">,</span>
				   <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">arg</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_fcntl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">,</span>
				 <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">arg</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_io_setup</span><span class="p">(</span><span class="kt">unsigned</span> <span class="n">nr_reqs</span><span class="p">,</span> <span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ctx32p</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_io_getevents</span><span class="p">(</span><span class="n">aio_context_t</span> <span class="n">ctx_id</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">min_nr</span><span class="p">,</span>
					<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">io_event</span> <span class="n">__user</span> <span class="o">*</span><span class="n">events</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">timeout</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_io_submit</span><span class="p">(</span><span class="n">aio_context_t</span> <span class="n">ctx_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nr</span><span class="p">,</span>
				     <span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">iocb</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_mount</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">dev_name</span><span class="p">,</span>
				 <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">dir_name</span><span class="p">,</span>
				 <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">type</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">,</span>
				 <span class="k">const</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_old_readdir</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span>
				       <span class="k">struct</span> <span class="n">compat_old_linux_dirent</span> <span class="n">__user</span> <span class="o">*</span><span class="p">,</span>
				       <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_getdents</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">compat_linux_dirent</span> <span class="n">__user</span> <span class="o">*</span><span class="n">dirent</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_getdents64</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">linux_dirent64</span> <span class="n">__user</span> <span class="o">*</span><span class="n">dirent</span><span class="p">,</span>
				      <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_vmsplice</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nr_segs</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_open</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
				<span class="n">umode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_openat</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dfd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span> <span class="n">umode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_open_by_handle_at</span><span class="p">(</span><span class="kt">int</span> <span class="n">mountdirfd</span><span class="p">,</span>
					     <span class="k">struct</span> <span class="n">file_handle</span> <span class="n">__user</span> <span class="o">*</span><span class="n">handle</span><span class="p">,</span>
					     <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_pselect6</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">inp</span><span class="p">,</span>
				    <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">outp</span><span class="p">,</span>
				    <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">exp</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tsp</span><span class="p">,</span>
				    <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">sig</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_ppoll</span><span class="p">(</span><span class="k">struct</span> <span class="n">pollfd</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ufds</span><span class="p">,</span>
				 <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nfds</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tsp</span><span class="p">,</span>
				 <span class="k">const</span> <span class="n">compat_sigset_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">sigmask</span><span class="p">,</span>
				 <span class="n">compat_size_t</span> <span class="n">sigsetsize</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_signalfd4</span><span class="p">(</span><span class="kt">int</span> <span class="n">ufd</span><span class="p">,</span>
				     <span class="k">const</span> <span class="n">compat_sigset_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">sigmask</span><span class="p">,</span>
				     <span class="n">compat_size_t</span> <span class="n">sigsetsize</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_get_mempolicy</span><span class="p">(</span><span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">policy</span><span class="p">,</span>
					 <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">nmask</span><span class="p">,</span>
					 <span class="n">compat_ulong_t</span> <span class="n">maxnode</span><span class="p">,</span>
					 <span class="n">compat_ulong_t</span> <span class="n">addr</span><span class="p">,</span>
					 <span class="n">compat_ulong_t</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_set_mempolicy</span><span class="p">(</span><span class="kt">int</span> <span class="n">mode</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">nmask</span><span class="p">,</span>
					 <span class="n">compat_ulong_t</span> <span class="n">maxnode</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_mbind</span><span class="p">(</span><span class="n">compat_ulong_t</span> <span class="n">start</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">len</span><span class="p">,</span>
				 <span class="n">compat_ulong_t</span> <span class="n">mode</span><span class="p">,</span>
				 <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">nmask</span><span class="p">,</span>
				 <span class="n">compat_ulong_t</span> <span class="n">maxnode</span><span class="p">,</span> <span class="n">compat_ulong_t</span> <span class="n">flags</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_setsockopt</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">,</span> <span class="kt">int</span> <span class="n">optname</span><span class="p">,</span>
				      <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">optval</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">optlen</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_sendmsg</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_msghdr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">msg</span><span class="p">,</span>
				   <span class="kt">unsigned</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_sendmmsg</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_mmsghdr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">mmsg</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="n">vlen</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_recvmsg</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_msghdr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">msg</span><span class="p">,</span>
				   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_recv</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
				<span class="kt">unsigned</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_recvfrom</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="n">flags</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span>
			    <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">addrlen</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_recvmmsg</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_mmsghdr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">mmsg</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="n">vlen</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
				    <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">timeout</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_nanosleep</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rqtp</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rmtp</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_getitimer</span><span class="p">(</span><span class="kt">int</span> <span class="n">which</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_itimerval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">it</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_setitimer</span><span class="p">(</span><span class="kt">int</span> <span class="n">which</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_itimerval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">in</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_itimerval</span> <span class="n">__user</span> <span class="o">*</span><span class="n">out</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_times</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_tms</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tbuf</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_setrlimit</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">resource</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_rlimit</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rlim</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_getrlimit</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">resource</span><span class="p">,</span>
				     <span class="k">struct</span> <span class="n">compat_rlimit</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rlim</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_getrusage</span><span class="p">(</span><span class="kt">int</span> <span class="n">who</span><span class="p">,</span> <span class="k">struct</span> <span class="n">compat_rusage</span> <span class="n">__user</span> <span class="o">*</span><span class="n">ru</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_sched_setaffinity</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span>
				     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span>
				     <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">user_mask_ptr</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_sched_getaffinity</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span>
				     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">len</span><span class="p">,</span>
				     <span class="n">compat_ulong_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">user_mask_ptr</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_timer_create</span><span class="p">(</span><span class="n">clockid_t</span> <span class="n">which_clock</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">compat_sigevent</span> <span class="n">__user</span> <span class="o">*</span><span class="n">timer_event_spec</span><span class="p">,</span>
			<span class="n">timer_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">created_timer_id</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_timer_settime</span><span class="p">(</span><span class="n">timer_t</span> <span class="n">timer_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">new</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">old</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_timer_gettime</span><span class="p">(</span><span class="n">timer_t</span> <span class="n">timer_id</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">compat_itimerspec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">setting</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_clock_settime</span><span class="p">(</span><span class="n">clockid_t</span> <span class="n">which_clock</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tp</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_clock_gettime</span><span class="p">(</span><span class="n">clockid_t</span> <span class="n">which_clock</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tp</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_clock_adjtime</span><span class="p">(</span><span class="n">clockid_t</span> <span class="n">which_clock</span><span class="p">,</span>
					 <span class="k">struct</span> <span class="n">compat_timex</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tp</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_clock_getres</span><span class="p">(</span><span class="n">clockid_t</span> <span class="n">which_clock</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tp</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_clock_nanosleep</span><span class="p">(</span><span class="n">clockid_t</span> <span class="n">which_clock</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
					   <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rqtp</span><span class="p">,</span>
					   <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rmtp</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_rt_sigtimedwait</span><span class="p">(</span><span class="n">compat_sigset_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uthese</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">compat_siginfo</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uinfo</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uts</span><span class="p">,</span> <span class="n">compat_size_t</span> <span class="n">sigsetsize</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_rt_sigsuspend</span><span class="p">(</span><span class="n">compat_sigset_t</span> <span class="n">__user</span> <span class="o">*</span><span class="n">unewset</span><span class="p">,</span>
					 <span class="n">compat_size_t</span> <span class="n">sigsetsize</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_sysinfo</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_sysinfo</span> <span class="n">__user</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_ioctl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">,</span>
				 <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">arg</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_futex</span><span class="p">(</span><span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uaddr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">op</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">utime</span><span class="p">,</span> <span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uaddr2</span><span class="p">,</span>
		<span class="n">u32</span> <span class="n">val3</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_getsockopt</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">level</span><span class="p">,</span> <span class="kt">int</span> <span class="n">optname</span><span class="p">,</span>
				      <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">optval</span><span class="p">,</span> <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">optlen</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_kexec_load</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">entry</span><span class="p">,</span>
				      <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr_segments</span><span class="p">,</span>
				      <span class="k">struct</span> <span class="n">compat_kexec_segment</span> <span class="n">__user</span> <span class="o">*</span><span class="p">,</span>
				      <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_mq_getsetattr</span><span class="p">(</span><span class="n">mqd_t</span> <span class="n">mqdes</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_mq_attr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_mqstat</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">compat_mq_attr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_omqstat</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_mq_notify</span><span class="p">(</span><span class="n">mqd_t</span> <span class="n">mqdes</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_sigevent</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_notification</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_mq_open</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_name</span><span class="p">,</span>
			<span class="kt">int</span> <span class="n">oflag</span><span class="p">,</span> <span class="n">compat_mode_t</span> <span class="n">mode</span><span class="p">,</span>
			<span class="k">struct</span> <span class="n">compat_mq_attr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_attr</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_mq_timedsend</span><span class="p">(</span><span class="n">mqd_t</span> <span class="n">mqdes</span><span class="p">,</span>
			<span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_msg_ptr</span><span class="p">,</span>
			<span class="kt">size_t</span> <span class="n">msg_len</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">msg_prio</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_abs_timeout</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_mq_timedreceive</span><span class="p">(</span><span class="n">mqd_t</span> <span class="n">mqdes</span><span class="p">,</span>
			<span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_msg_ptr</span><span class="p">,</span>
			<span class="kt">size_t</span> <span class="n">msg_len</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_msg_prio</span><span class="p">,</span>
			<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_timespec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">u_abs_timeout</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_socketcall</span><span class="p">(</span><span class="kt">int</span> <span class="n">call</span><span class="p">,</span> <span class="n">u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">args</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">long</span> <span class="n">compat_sys_sysctl</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_sysctl_args</span> <span class="n">__user</span> <span class="o">*</span><span class="n">args</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">ssize_t</span> <span class="n">compat_rw_copy_check_uvector</span><span class="p">(</span><span class="kt">int</span> <span class="n">type</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">uvector</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">nr_segs</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fast_segs</span><span class="p">,</span> <span class="k">struct</span> <span class="n">iovec</span> <span class="o">*</span><span class="n">fast_pointer</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">iovec</span> <span class="o">**</span><span class="n">ret_pointer</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="n">compat_alloc_user_space</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">len</span><span class="p">);</span>

<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_process_vm_readv</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">lvec</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">liovcnt</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rvec</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">riovcnt</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">);</span>
<span class="n">asmlinkage</span> <span class="kt">ssize_t</span> <span class="n">compat_sys_process_vm_writev</span><span class="p">(</span><span class="n">compat_pid_t</span> <span class="n">pid</span><span class="p">,</span>
		<span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">lvec</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">liovcnt</span><span class="p">,</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">compat_iovec</span> <span class="n">__user</span> <span class="o">*</span><span class="n">rvec</span><span class="p">,</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">riovcnt</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">);</span>

<span class="cp">#else</span>

<span class="cp">#define is_compat_task() (0)</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_COMPAT */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* _LINUX_COMPAT_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
