<!DOCTYPE html>
<html><head><title>joekychen/linux » include › net › netrom.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>netrom.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *	Declarations of NET/ROM type objects.</span>
<span class="cm"> *</span>
<span class="cm"> *	Jonathan Naylor G4KLX	9/4/95</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _NETROM_H</span>
<span class="cp">#define _NETROM_H </span>

<span class="cp">#include &lt;linux/netrom.h&gt;</span>
<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;net/sock.h&gt;</span>

<span class="cp">#define	NR_NETWORK_LEN			15</span>
<span class="cp">#define	NR_TRANSPORT_LEN		5</span>

<span class="cp">#define	NR_PROTO_IP			0x0C</span>

<span class="cp">#define	NR_PROTOEXT			0x00</span>
<span class="cp">#define	NR_CONNREQ			0x01</span>
<span class="cp">#define	NR_CONNACK			0x02</span>
<span class="cp">#define	NR_DISCREQ			0x03</span>
<span class="cp">#define	NR_DISCACK			0x04</span>
<span class="cp">#define	NR_INFO				0x05</span>
<span class="cp">#define	NR_INFOACK			0x06</span>
<span class="cp">#define	NR_RESET			0x07</span>

<span class="cp">#define	NR_CHOKE_FLAG			0x80</span>
<span class="cp">#define	NR_NAK_FLAG			0x40</span>
<span class="cp">#define	NR_MORE_FLAG			0x20</span>

<span class="cm">/* Define Link State constants. */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">NR_STATE_0</span><span class="p">,</span>
	<span class="n">NR_STATE_1</span><span class="p">,</span>
	<span class="n">NR_STATE_2</span><span class="p">,</span>
	<span class="n">NR_STATE_3</span>
<span class="p">};</span>

<span class="cp">#define	NR_COND_ACK_PENDING		0x01</span>
<span class="cp">#define	NR_COND_REJECT			0x02</span>
<span class="cp">#define	NR_COND_PEER_RX_BUSY		0x04</span>
<span class="cp">#define	NR_COND_OWN_RX_BUSY		0x08</span>

<span class="cp">#define NR_DEFAULT_T1			120000		</span><span class="cm">/* Outstanding frames - 120 seconds */</span><span class="cp"></span>
<span class="cp">#define NR_DEFAULT_T2			5000		</span><span class="cm">/* Response delay     - 5 seconds */</span><span class="cp"></span>
<span class="cp">#define NR_DEFAULT_N2			3		</span><span class="cm">/* Number of Retries - 3 */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_T4			180000		</span><span class="cm">/* Busy Delay - 180 seconds */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_IDLE			0		</span><span class="cm">/* No Activity Timeout - none */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_WINDOW		4		</span><span class="cm">/* Default Window Size - 4 */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_OBS			6		</span><span class="cm">/* Default Obsolescence Count - 6 */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_QUAL			10		</span><span class="cm">/* Default Neighbour Quality - 10 */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_TTL			16		</span><span class="cm">/* Default Time To Live - 16 */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_ROUTING		1		</span><span class="cm">/* Is routing enabled ? */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_FAILS		2		</span><span class="cm">/* Link fails until route fails */</span><span class="cp"></span>
<span class="cp">#define	NR_DEFAULT_RESET		0		</span><span class="cm">/* Sent / accept reset cmds? */</span><span class="cp"></span>

<span class="cp">#define NR_MODULUS 			256</span>
<span class="cp">#define NR_MAX_WINDOW_SIZE		127			</span><span class="cm">/* Maximum Window Allowable - 127 */</span><span class="cp"></span>
<span class="cp">#define	NR_MAX_PACKET_SIZE		236			</span><span class="cm">/* Maximum Packet Length - 236 */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">nr_sock</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sock</span>		<span class="n">sock</span><span class="p">;</span>
	<span class="n">ax25_address</span>		<span class="n">user_addr</span><span class="p">,</span> <span class="n">source_addr</span><span class="p">,</span> <span class="n">dest_addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>		<span class="o">*</span><span class="n">device</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">my_index</span><span class="p">,</span>   <span class="n">my_id</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">your_index</span><span class="p">,</span> <span class="n">your_id</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">state</span><span class="p">,</span> <span class="n">condition</span><span class="p">,</span> <span class="n">bpqext</span><span class="p">,</span> <span class="n">window</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">vs</span><span class="p">,</span> <span class="n">vr</span><span class="p">,</span> <span class="n">va</span><span class="p">,</span> <span class="n">vl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">n2</span><span class="p">,</span> <span class="n">n2count</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">idle</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">fraglen</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">t1timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">t2timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">t4timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">idletimer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">ack_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">reseq_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">frag_queue</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define nr_sk(sk) ((struct nr_sock *)(sk))</span>

<span class="k">struct</span> <span class="n">nr_neigh</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_node</span>	<span class="n">neigh_node</span><span class="p">;</span>
	<span class="n">ax25_address</span>		<span class="n">callsign</span><span class="p">;</span>
	<span class="n">ax25_digi</span>		<span class="o">*</span><span class="n">digipeat</span><span class="p">;</span>
	<span class="n">ax25_cb</span>			<span class="o">*</span><span class="n">ax25</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">quality</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">locked</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">count</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">number</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">failed</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">refcount</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nr_route</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>   <span class="n">quality</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>   <span class="n">obs_count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nr_neigh</span> <span class="o">*</span><span class="n">neighbour</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">nr_node</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_node</span>	<span class="n">node_node</span><span class="p">;</span>
	<span class="n">ax25_address</span>		<span class="n">callsign</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="n">mnemonic</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">which</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">nr_route</span>		<span class="n">routes</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">atomic_t</span>		<span class="n">refcount</span><span class="p">;</span>
	<span class="n">spinlock_t</span>		<span class="n">node_lock</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*********************************************************************</span>
<span class="cm"> *	nr_node &amp; nr_neigh lists, refcounting and locking</span>
<span class="cm"> *********************************************************************/</span>

<span class="cp">#define nr_node_hold(__nr_node) \</span>
<span class="cp">	atomic_inc(&amp;((__nr_node)-&gt;refcount))</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">nr_node_put</span><span class="p">(</span><span class="k">struct</span> <span class="n">nr_node</span> <span class="o">*</span><span class="n">nr_node</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nr_node</span><span class="o">-&gt;</span><span class="n">refcount</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">nr_node</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cp">#define nr_neigh_hold(__nr_neigh) \</span>
<span class="cp">	atomic_inc(&amp;((__nr_neigh)-&gt;refcount))</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">nr_neigh_put</span><span class="p">(</span><span class="k">struct</span> <span class="n">nr_neigh</span> <span class="o">*</span><span class="n">nr_neigh</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nr_neigh</span><span class="o">-&gt;</span><span class="n">refcount</span><span class="p">))</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">nr_neigh</span><span class="o">-&gt;</span><span class="n">ax25</span><span class="p">)</span>
			<span class="n">ax25_cb_put</span><span class="p">(</span><span class="n">nr_neigh</span><span class="o">-&gt;</span><span class="n">ax25</span><span class="p">);</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">nr_neigh</span><span class="o">-&gt;</span><span class="n">digipeat</span><span class="p">);</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">nr_neigh</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* nr_node_lock and nr_node_unlock also hold/put the node&#39;s refcounter.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">nr_node_lock</span><span class="p">(</span><span class="k">struct</span> <span class="n">nr_node</span> <span class="o">*</span><span class="n">nr_node</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">nr_node_hold</span><span class="p">(</span><span class="n">nr_node</span><span class="p">);</span>
	<span class="n">spin_lock_bh</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nr_node</span><span class="o">-&gt;</span><span class="n">node_lock</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">nr_node_unlock</span><span class="p">(</span><span class="k">struct</span> <span class="n">nr_node</span> <span class="o">*</span><span class="n">nr_node</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">spin_unlock_bh</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nr_node</span><span class="o">-&gt;</span><span class="n">node_lock</span><span class="p">);</span>
	<span class="n">nr_node_put</span><span class="p">(</span><span class="n">nr_node</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#define nr_neigh_for_each(__nr_neigh, node, list) \</span>
<span class="cp">	hlist_for_each_entry(__nr_neigh, node, list, neigh_node)</span>

<span class="cp">#define nr_neigh_for_each_safe(__nr_neigh, node, node2, list) \</span>
<span class="cp">	hlist_for_each_entry_safe(__nr_neigh, node, node2, list, neigh_node)</span>

<span class="cp">#define nr_node_for_each(__nr_node, node, list) \</span>
<span class="cp">	hlist_for_each_entry(__nr_node, node, list, node_node)</span>

<span class="cp">#define nr_node_for_each_safe(__nr_node, node, node2, list) \</span>
<span class="cp">	hlist_for_each_entry_safe(__nr_node, node, node2, list, node_node)</span>


<span class="cm">/*********************************************************************/</span>

<span class="cm">/* af_netrom.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_default_path_quality</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_obsolescence_count_initialiser</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_network_ttl_initialiser</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_transport_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_transport_maximum_tries</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_transport_acknowledge_delay</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_transport_busy_delay</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_transport_requested_window_size</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_transport_no_activity_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_routing_control</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_link_fails_count</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_netrom_reset_circuit</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_rx_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_destroy_socket</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* nr_dev.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_rx_ip</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* nr_in.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_process_rx_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* nr_loopback.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_loopback_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_loopback_clear</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_loopback_queue</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* nr_out.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_send_nak_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_kick</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_transmit_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_establish_data_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_enquiry_response</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_check_iframes_acked</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>

<span class="cm">/* nr_route.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_rt_device_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">nr_dev_first</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">nr_dev_get</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_rt_ioctl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_link_failed</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_route_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">nr_nodes_fops</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">nr_neigh_fops</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_rt_free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* nr_subr.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_clear_queues</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_frames_acked</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_requeue_frames</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_validate_nr</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_in_rx_window</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_write_internal</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">__nr_transmit_reply</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mine</span><span class="p">,</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cmdflags</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * This routine is called when a Connect Acknowledge with the Choke Flag</span>
<span class="cm"> * set is needed to refuse a connection.</span>
<span class="cm"> */</span>
<span class="cp">#define nr_transmit_refusal(skb, mine)					\</span>
<span class="cp">do {									\</span>
<span class="cp">	__nr_transmit_reply((skb), (mine), NR_CONNACK | NR_CHOKE_FLAG);	\</span>
<span class="cp">} while (0)</span>

<span class="cm">/*</span>
<span class="cm"> * This routine is called when we don&#39;t have a circuit matching an incoming</span>
<span class="cm"> * NET/ROM packet.  This is an G8PZT Xrouter extension.</span>
<span class="cm"> */</span>
<span class="cp">#define nr_transmit_reset(skb, mine)					\</span>
<span class="cp">do {									\</span>
<span class="cp">	__nr_transmit_reply((skb), (mine), NR_RESET);			\</span>
<span class="cp">} while (0)</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_disconnect</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* nr_timer.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_init_timers</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">sk</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_start_heartbeat</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_start_t1timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_start_t2timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_start_t4timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_start_idletimer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_stop_heartbeat</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_stop_t1timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_stop_t2timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_stop_t4timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_stop_idletimer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">nr_t1timer_running</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* sysctl_net_netrom.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_register_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">nr_unregister_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
