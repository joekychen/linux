<!DOCTYPE html>
<html><head><title>joekychen/linux » include › net › ax25.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>ax25.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *	Declarations of AX.25 type objects.</span>
<span class="cm"> *</span>
<span class="cm"> *	Alan Cox (GW4PTS) 	10/11/93</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _AX25_H</span>
<span class="cp">#define _AX25_H </span>

<span class="cp">#include &lt;linux/ax25.h&gt;</span>
<span class="cp">#include &lt;linux/spinlock.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;linux/atomic.h&gt;</span>

<span class="cp">#define	AX25_T1CLAMPLO  		1</span>
<span class="cp">#define	AX25_T1CLAMPHI 			(30 * HZ)</span>

<span class="cp">#define	AX25_BPQ_HEADER_LEN		16</span>
<span class="cp">#define	AX25_KISS_HEADER_LEN		1</span>

<span class="cp">#define	AX25_HEADER_LEN			17</span>
<span class="cp">#define	AX25_ADDR_LEN			7</span>
<span class="cp">#define	AX25_DIGI_HEADER_LEN		(AX25_MAX_DIGIS * AX25_ADDR_LEN)</span>
<span class="cp">#define	AX25_MAX_HEADER_LEN		(AX25_HEADER_LEN + AX25_DIGI_HEADER_LEN)</span>

<span class="cm">/* AX.25 Protocol IDs */</span>
<span class="cp">#define AX25_P_ROSE			0x01</span>
<span class="cp">#define AX25_P_VJCOMP			0x06	</span><span class="cm">/* Compressed TCP/IP packet   */</span><span class="cp"></span>
						<span class="cm">/* Van Jacobsen (RFC 1144)    */</span>
<span class="cp">#define AX25_P_VJUNCOMP			0x07	</span><span class="cm">/* Uncompressed TCP/IP packet */</span><span class="cp"></span>
						<span class="cm">/* Van Jacobsen (RFC 1144)    */</span>
<span class="cp">#define	AX25_P_SEGMENT			0x08	</span><span class="cm">/* Segmentation fragment      */</span><span class="cp"></span>
<span class="cp">#define AX25_P_TEXNET			0xc3	</span><span class="cm">/* TEXTNET datagram protocol  */</span><span class="cp"></span>
<span class="cp">#define AX25_P_LQ			0xc4	</span><span class="cm">/* Link Quality Protocol      */</span><span class="cp"></span>
<span class="cp">#define AX25_P_ATALK			0xca	</span><span class="cm">/* Appletalk                  */</span><span class="cp"></span>
<span class="cp">#define AX25_P_ATALK_ARP		0xcb	</span><span class="cm">/* Appletalk ARP              */</span><span class="cp"></span>
<span class="cp">#define AX25_P_IP			0xcc	</span><span class="cm">/* ARPA Internet Protocol     */</span><span class="cp"></span>
<span class="cp">#define AX25_P_ARP			0xcd	</span><span class="cm">/* ARPA Address Resolution    */</span><span class="cp"></span>
<span class="cp">#define AX25_P_FLEXNET			0xce	</span><span class="cm">/* FlexNet                    */</span><span class="cp"></span>
<span class="cp">#define AX25_P_NETROM 			0xcf	</span><span class="cm">/* NET/ROM                    */</span><span class="cp"></span>
<span class="cp">#define AX25_P_TEXT 			0xF0	</span><span class="cm">/* No layer 3 protocol impl.  */</span><span class="cp"></span>

<span class="cm">/* AX.25 Segment control values */</span>
<span class="cp">#define	AX25_SEG_REM			0x7F</span>
<span class="cp">#define	AX25_SEG_FIRST			0x80</span>

<span class="cp">#define AX25_CBIT			0x80	</span><span class="cm">/* Command/Response bit */</span><span class="cp"></span>
<span class="cp">#define AX25_EBIT			0x01	</span><span class="cm">/* HDLC Address Extension bit */</span><span class="cp"></span>
<span class="cp">#define AX25_HBIT			0x80	</span><span class="cm">/* Has been repeated bit */</span><span class="cp"></span>

<span class="cp">#define AX25_SSSID_SPARE		0x60	</span><span class="cm">/* Unused bits in SSID for standard AX.25 */</span><span class="cp"></span>
<span class="cp">#define AX25_ESSID_SPARE		0x20	</span><span class="cm">/* Unused bits in SSID for extended AX.25 */</span><span class="cp"></span>
<span class="cp">#define AX25_DAMA_FLAG			0x20	</span><span class="cm">/* Well, it is *NOT* unused! (dl1bke 951121 */</span><span class="cp"></span>

<span class="cp">#define	AX25_COND_ACK_PENDING		0x01</span>
<span class="cp">#define	AX25_COND_REJECT		0x02</span>
<span class="cp">#define	AX25_COND_PEER_RX_BUSY		0x04</span>
<span class="cp">#define	AX25_COND_OWN_RX_BUSY		0x08</span>
<span class="cp">#define	AX25_COND_DAMA_MODE		0x10</span>

<span class="cp">#ifndef _LINUX_NETDEVICE_H</span>
<span class="cp">#include &lt;linux/netdevice.h&gt;</span>
<span class="cp">#endif</span>

<span class="cm">/* Upper sub-layer (LAPB) definitions */</span>

<span class="cm">/* Control field templates */</span>
<span class="cp">#define	AX25_I			0x00	</span><span class="cm">/* Information frames */</span><span class="cp"></span>
<span class="cp">#define	AX25_S			0x01	</span><span class="cm">/* Supervisory frames */</span><span class="cp"></span>
<span class="cp">#define	AX25_RR			0x01	</span><span class="cm">/* Receiver ready */</span><span class="cp"></span>
<span class="cp">#define	AX25_RNR		0x05	</span><span class="cm">/* Receiver not ready */</span><span class="cp"></span>
<span class="cp">#define	AX25_REJ		0x09	</span><span class="cm">/* Reject */</span><span class="cp"></span>
<span class="cp">#define	AX25_U			0x03	</span><span class="cm">/* Unnumbered frames */</span><span class="cp"></span>
<span class="cp">#define	AX25_SABM		0x2f	</span><span class="cm">/* Set Asynchronous Balanced Mode */</span><span class="cp"></span>
<span class="cp">#define	AX25_SABME		0x6f	</span><span class="cm">/* Set Asynchronous Balanced Mode Extended */</span><span class="cp"></span>
<span class="cp">#define	AX25_DISC		0x43	</span><span class="cm">/* Disconnect */</span><span class="cp"></span>
<span class="cp">#define	AX25_DM			0x0f	</span><span class="cm">/* Disconnected mode */</span><span class="cp"></span>
<span class="cp">#define	AX25_UA			0x63	</span><span class="cm">/* Unnumbered acknowledge */</span><span class="cp"></span>
<span class="cp">#define	AX25_FRMR		0x87	</span><span class="cm">/* Frame reject */</span><span class="cp"></span>
<span class="cp">#define	AX25_UI			0x03	</span><span class="cm">/* Unnumbered information */</span><span class="cp"></span>
<span class="cp">#define	AX25_XID		0xaf	</span><span class="cm">/* Exchange information */</span><span class="cp"></span>
<span class="cp">#define	AX25_TEST		0xe3	</span><span class="cm">/* Test */</span><span class="cp"></span>

<span class="cp">#define	AX25_PF			0x10	</span><span class="cm">/* Poll/final bit for standard AX.25 */</span><span class="cp"></span>
<span class="cp">#define	AX25_EPF		0x01	</span><span class="cm">/* Poll/final bit for extended AX.25 */</span><span class="cp"></span>

<span class="cp">#define AX25_ILLEGAL		0x100	</span><span class="cm">/* Impossible to be a real frame type */</span><span class="cp"></span>

<span class="cp">#define	AX25_POLLOFF		0</span>
<span class="cp">#define	AX25_POLLON		1</span>

<span class="cm">/* AX25 L2 C-bit */</span>
<span class="cp">#define AX25_COMMAND		1</span>
<span class="cp">#define AX25_RESPONSE		2</span>

<span class="cm">/* Define Link State constants. */</span>

<span class="k">enum</span> <span class="p">{</span> 
	<span class="n">AX25_STATE_0</span><span class="p">,</span>			<span class="cm">/* Listening */</span>
	<span class="n">AX25_STATE_1</span><span class="p">,</span>			<span class="cm">/* SABM sent */</span>
	<span class="n">AX25_STATE_2</span><span class="p">,</span>			<span class="cm">/* DISC sent */</span>
	<span class="n">AX25_STATE_3</span><span class="p">,</span>			<span class="cm">/* Established */</span>
	<span class="n">AX25_STATE_4</span>			<span class="cm">/* Recovery */</span>
<span class="p">};</span>

<span class="cp">#define AX25_MODULUS 		8	</span><span class="cm">/*  Standard AX.25 modulus */</span><span class="cp"></span>
<span class="cp">#define	AX25_EMODULUS		128	</span><span class="cm">/*  Extended AX.25 modulus */</span><span class="cp"></span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">AX25_PROTO_STD_SIMPLEX</span><span class="p">,</span>
	<span class="n">AX25_PROTO_STD_DUPLEX</span><span class="p">,</span>
<span class="cp">#ifdef CONFIG_AX25_DAMA_SLAVE</span>
	<span class="n">AX25_PROTO_DAMA_SLAVE</span><span class="p">,</span>
<span class="cp">#ifdef CONFIG_AX25_DAMA_MASTER</span>
	<span class="n">AX25_PROTO_DAMA_MASTER</span><span class="p">,</span>
<span class="cp">#define AX25_PROTO_MAX AX25_PROTO_DAMA_MASTER</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
	<span class="n">__AX25_PROTO_MAX</span><span class="p">,</span>
	<span class="n">AX25_PROTO_MAX</span> <span class="o">=</span> <span class="n">__AX25_PROTO_MAX</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">AX25_VALUES_IPDEFMODE</span><span class="p">,</span>	<span class="cm">/* 0=DG 1=VC */</span>
	<span class="n">AX25_VALUES_AXDEFMODE</span><span class="p">,</span>	<span class="cm">/* 0=Normal 1=Extended Seq Nos */</span>
	<span class="n">AX25_VALUES_BACKOFF</span><span class="p">,</span>	<span class="cm">/* 0=None 1=Linear 2=Exponential */</span>
	<span class="n">AX25_VALUES_CONMODE</span><span class="p">,</span>	<span class="cm">/* Allow connected modes - 0=No 1=no &quot;PID text&quot; 2=all PIDs */</span>
	<span class="n">AX25_VALUES_WINDOW</span><span class="p">,</span>	<span class="cm">/* Default window size for standard AX.25 */</span>
	<span class="n">AX25_VALUES_EWINDOW</span><span class="p">,</span>	<span class="cm">/* Default window size for extended AX.25 */</span>
	<span class="n">AX25_VALUES_T1</span><span class="p">,</span>		<span class="cm">/* Default T1 timeout value */</span>
	<span class="n">AX25_VALUES_T2</span><span class="p">,</span>		<span class="cm">/* Default T2 timeout value */</span>
	<span class="n">AX25_VALUES_T3</span><span class="p">,</span>		<span class="cm">/* Default T3 timeout value */</span>
	<span class="n">AX25_VALUES_IDLE</span><span class="p">,</span>	<span class="cm">/* Connected mode idle timer */</span>
	<span class="n">AX25_VALUES_N2</span><span class="p">,</span>		<span class="cm">/* Default N2 value */</span>
	<span class="n">AX25_VALUES_PACLEN</span><span class="p">,</span>	<span class="cm">/* AX.25 MTU */</span>
	<span class="n">AX25_VALUES_PROTOCOL</span><span class="p">,</span>	<span class="cm">/* Std AX.25, DAMA Slave, DAMA Master */</span>
	<span class="n">AX25_VALUES_DS_TIMEOUT</span><span class="p">,</span>	<span class="cm">/* DAMA Slave timeout */</span>
	<span class="n">AX25_MAX_VALUES</span>		<span class="cm">/* THIS MUST REMAIN THE LAST ENTRY OF THIS LIST */</span>
<span class="p">};</span>

<span class="cp">#define	AX25_DEF_IPDEFMODE	0			</span><span class="cm">/* Datagram */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_AXDEFMODE	0			</span><span class="cm">/* Normal */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_BACKOFF	1			</span><span class="cm">/* Linear backoff */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_CONMODE	2			</span><span class="cm">/* Connected mode allowed */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_WINDOW		2			</span><span class="cm">/* Window=2 */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_EWINDOW	32			</span><span class="cm">/* Module-128 Window=32 */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_T1		10000			</span><span class="cm">/* T1=10s */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_T2		3000			</span><span class="cm">/* T2=3s  */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_T3		300000			</span><span class="cm">/* T3=300s */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_N2		10			</span><span class="cm">/* N2=10 */</span><span class="cp"></span>
<span class="cp">#define AX25_DEF_IDLE		0			</span><span class="cm">/* Idle=None */</span><span class="cp"></span>
<span class="cp">#define AX25_DEF_PACLEN		256			</span><span class="cm">/* Paclen=256 */</span><span class="cp"></span>
<span class="cp">#define	AX25_DEF_PROTOCOL	AX25_PROTO_STD_SIMPLEX	</span><span class="cm">/* Standard AX.25 */</span><span class="cp"></span>
<span class="cp">#define AX25_DEF_DS_TIMEOUT	180000			</span><span class="cm">/* DAMA timeout 3 minutes */</span><span class="cp"></span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">ax25_uid_assoc</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_node</span>	<span class="n">uid_node</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">refcount</span><span class="p">;</span>
	<span class="n">uid_t</span>			<span class="n">uid</span><span class="p">;</span>
	<span class="n">ax25_address</span>		<span class="n">call</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ax25_uid_assoc</span><span class="p">;</span>

<span class="cp">#define ax25_uid_for_each(__ax25, node, list) \</span>
<span class="cp">	hlist_for_each_entry(__ax25, node, list, uid_node)</span>

<span class="cp">#define ax25_uid_hold(ax25) \</span>
<span class="cp">	atomic_inc(&amp;((ax25)-&gt;refcount))</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">ax25_uid_put</span><span class="p">(</span><span class="n">ax25_uid_assoc</span> <span class="o">*</span><span class="n">assoc</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">assoc</span><span class="o">-&gt;</span><span class="n">refcount</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">assoc</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">ax25_address</span>		<span class="n">calls</span><span class="p">[</span><span class="n">AX25_MAX_DIGIS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">repeated</span><span class="p">[</span><span class="n">AX25_MAX_DIGIS</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">ndigi</span><span class="p">;</span>
	<span class="kt">signed</span> <span class="kt">char</span>		<span class="n">lastrepeat</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ax25_digi</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">ax25_route</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ax25_route</span>	<span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">refcount</span><span class="p">;</span>
	<span class="n">ax25_address</span>		<span class="n">callsign</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">ax25_digi</span>		<span class="o">*</span><span class="n">digipeat</span><span class="p">;</span>
	<span class="kt">char</span>			<span class="n">ip_mode</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ax25_route</span><span class="p">;</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">ax25_hold_route</span><span class="p">(</span><span class="n">ax25_route</span> <span class="o">*</span><span class="n">ax25_rt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">atomic_inc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ax25_rt</span><span class="o">-&gt;</span><span class="n">refcount</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">__ax25_put_route</span><span class="p">(</span><span class="n">ax25_route</span> <span class="o">*</span><span class="n">ax25_rt</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">ax25_put_route</span><span class="p">(</span><span class="n">ax25_route</span> <span class="o">*</span><span class="n">ax25_rt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ax25_rt</span><span class="o">-&gt;</span><span class="n">refcount</span><span class="p">))</span>
		<span class="n">__ax25_put_route</span><span class="p">(</span><span class="n">ax25_rt</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">char</span>			<span class="n">slave</span><span class="p">;</span>			<span class="cm">/* slave_mode?   */</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">slave_timer</span><span class="p">;</span>		<span class="cm">/* timeout timer */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">slave_timeout</span><span class="p">;</span>		<span class="cm">/* when? */</span>
<span class="p">}</span> <span class="n">ax25_dama_info</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ctl_table</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">ax25_dev</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ax25_dev</span>		<span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">forward</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ctl_table_header</span> <span class="o">*</span><span class="n">sysheader</span><span class="p">;</span>
	<span class="kt">int</span>			<span class="n">values</span><span class="p">[</span><span class="n">AX25_MAX_VALUES</span><span class="p">];</span>
<span class="cp">#if defined(CONFIG_AX25_DAMA_SLAVE) || defined(CONFIG_AX25_DAMA_MASTER)</span>
	<span class="n">ax25_dama_info</span>		<span class="n">dama</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span> <span class="n">ax25_dev</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">ax25_cb</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_node</span>	<span class="n">ax25_node</span><span class="p">;</span>
	<span class="n">ax25_address</span>		<span class="n">source_addr</span><span class="p">,</span> <span class="n">dest_addr</span><span class="p">;</span>
	<span class="n">ax25_digi</span>		<span class="o">*</span><span class="n">digipeat</span><span class="p">;</span>
	<span class="n">ax25_dev</span>		<span class="o">*</span><span class="n">ax25_dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">iamdigi</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">state</span><span class="p">,</span> <span class="n">modulus</span><span class="p">,</span> <span class="n">pidincl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">vs</span><span class="p">,</span> <span class="n">vr</span><span class="p">,</span> <span class="n">va</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">condition</span><span class="p">,</span> <span class="n">backoff</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">n2</span><span class="p">,</span> <span class="n">n2count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">t1timer</span><span class="p">,</span> <span class="n">t2timer</span><span class="p">,</span> <span class="n">t3timer</span><span class="p">,</span> <span class="n">idletimer</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">idle</span><span class="p">,</span> <span class="n">rtt</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">paclen</span><span class="p">,</span> <span class="n">fragno</span><span class="p">,</span> <span class="n">fraglen</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">write_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">reseq_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">ack_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">frag_queue</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">window</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">timer</span><span class="p">,</span> <span class="n">dtimer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sock</span>		<span class="o">*</span><span class="n">sk</span><span class="p">;</span>		<span class="cm">/* Backlink to socket */</span>
	<span class="n">atomic_t</span>		<span class="n">refcount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">ax25_cb</span><span class="p">;</span>

<span class="cp">#define ax25_sk(__sk) ((ax25_cb *)(__sk)-&gt;sk_protinfo)</span>

<span class="cp">#define ax25_for_each(__ax25, node, list) \</span>
<span class="cp">	hlist_for_each_entry(__ax25, node, list, ax25_node)</span>

<span class="cp">#define ax25_cb_hold(__ax25) \</span>
<span class="cp">	atomic_inc(&amp;((__ax25)-&gt;refcount))</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">ax25_cb_put</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="n">ax25</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ax25</span><span class="o">-&gt;</span><span class="n">refcount</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">ax25</span><span class="o">-&gt;</span><span class="n">digipeat</span><span class="p">);</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">ax25</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">__be16</span> <span class="nf">ax25_type_trans</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">skb</span><span class="o">-&gt;</span><span class="n">dev</span>      <span class="o">=</span> <span class="n">dev</span><span class="p">;</span>
	<span class="n">skb_reset_mac_header</span><span class="p">(</span><span class="n">skb</span><span class="p">);</span>
	<span class="n">skb</span><span class="o">-&gt;</span><span class="n">pkt_type</span> <span class="o">=</span> <span class="n">PACKET_HOST</span><span class="p">;</span>
	<span class="k">return</span> <span class="n">htons</span><span class="p">(</span><span class="n">ETH_P_AX25</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* af_ax25.c */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">hlist_head</span> <span class="n">ax25_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">spinlock_t</span> <span class="n">ax25_list_lock</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_cb_add</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">ax25_find_listener</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">ax25_get_socket</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">ax25_cb</span> <span class="o">*</span><span class="n">ax25_find_cb</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_send_to_raw</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_destroy_socket</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">ax25_cb</span> <span class="o">*</span> <span class="n">__must_check</span> <span class="n">ax25_create_cb</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_fillin_cb</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">ax25_make_new</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ax25_dev</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_addr.c */</span>
<span class="k">extern</span> <span class="k">const</span> <span class="n">ax25_address</span> <span class="n">ax25_bcast</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="n">ax25_address</span> <span class="n">ax25_defaddr</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="n">ax25_address</span> <span class="n">null_ax25_address</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ax2asc</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="k">const</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">asc2ax</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">callsign</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ax25cmp</span><span class="p">(</span><span class="k">const</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ax25digicmp</span><span class="p">(</span><span class="k">const</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">ax25_addr_parse</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span>
	<span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_addr_build</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span>
	<span class="k">const</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_addr_size</span><span class="p">(</span><span class="k">const</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_digi_invert</span><span class="p">(</span><span class="k">const</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_dev.c */</span>
<span class="k">extern</span> <span class="n">ax25_dev</span> <span class="o">*</span><span class="n">ax25_dev_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">spinlock_t</span> <span class="n">ax25_dev_lock</span><span class="p">;</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">ax25_dev</span> <span class="o">*</span><span class="nf">ax25_dev_ax25dev</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">ax25_ptr</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="n">ax25_dev</span> <span class="o">*</span><span class="n">ax25_addr_ax25dev</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_dev_device_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_dev_device_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_fwd_ioctl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ax25_fwd_struct</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">ax25_fwd_dev</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_dev_free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* ax25_ds_in.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_ds_frame_in</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* ax25_ds_subr.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_nr_error_recovery</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_enquiry_response</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_establish_data_link</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_dev_dama_off</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_dama_on</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_dama_off</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_ds_timer.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_setup_timer</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_set_timer</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_del_timer</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_t1_timeout</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_heartbeat_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_t3timer_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_ds_idletimer_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_iface.c */</span>

<span class="k">struct</span> <span class="n">ax25_protocol</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ax25_protocol</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pid</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_register_pid</span><span class="p">(</span><span class="k">struct</span> <span class="n">ax25_protocol</span> <span class="o">*</span><span class="n">ap</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_protocol_release</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">ax25_linkfail</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">hlist_node</span> <span class="n">lf_node</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_linkfail_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">ax25_linkfail</span> <span class="o">*</span><span class="n">lf</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_linkfail_release</span><span class="p">(</span><span class="k">struct</span> <span class="n">ax25_linkfail</span> <span class="o">*</span><span class="n">lf</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__must_check</span> <span class="n">ax25_listen_register</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span>
	<span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_listen_release</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="p">(</span><span class="o">*</span><span class="n">ax25_protocol_function</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">))(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_listen_mine</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_link_failed</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_protocol_is_registered</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* ax25_in.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_rx_iframe</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_kiss_rcv</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">packet_type</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_ip.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ax25_hard_header</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span>
			    <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_rebuild_header</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">header_ops</span> <span class="n">ax25_header_ops</span><span class="p">;</span>

<span class="cm">/* ax25_out.c */</span>
<span class="k">extern</span> <span class="n">ax25_cb</span> <span class="o">*</span><span class="n">ax25_send_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_output</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_kick</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_transmit_buffer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_queue_xmit</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_check_iframes_acked</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>

<span class="cm">/* ax25_route.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_rt_device_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_rt_ioctl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">ax25_route_fops</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">ax25_route</span> <span class="o">*</span><span class="n">ax25_get_route</span><span class="p">(</span><span class="n">ax25_address</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_rt_autobind</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">ax25_rt_build_path</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_rt_free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* ax25_std_in.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_std_frame_in</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* ax25_std_subr.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_nr_error_recovery</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_establish_data_link</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_transmit_enquiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_enquiry_response</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_timeout_response</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_std_timer.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_heartbeat_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_t1timer_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_t2timer_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_t3timer_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_std_idletimer_expiry</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_subr.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_clear_queues</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_frames_acked</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_requeue_frames</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_validate_nr</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_decode</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_send_control</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_return_dm</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_address</span> <span class="o">*</span><span class="p">,</span> <span class="n">ax25_digi</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_calculate_t1</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_calculate_rtt</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_disconnect</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* ax25_timer.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_setup_timers</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_start_heartbeat</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_start_t1timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_start_t2timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_start_t3timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_start_idletimer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_stop_heartbeat</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_stop_t1timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_stop_t2timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_stop_t3timer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_stop_idletimer</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_t1timer_running</span><span class="p">(</span><span class="n">ax25_cb</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ax25_display_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">timer_list</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* ax25_uid.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">ax25_uid_policy</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">ax25_uid_assoc</span> <span class="o">*</span><span class="n">ax25_findbyuid</span><span class="p">(</span><span class="n">uid_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__must_check</span> <span class="n">ax25_uid_ioctl</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sockaddr_ax25</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">file_operations</span> <span class="n">ax25_uid_fops</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_uid_free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* sysctl_net_ax25.c */</span>
<span class="cp">#ifdef CONFIG_SYSCTL</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ax25_register_dev_sysctl</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="n">ax25_dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ax25_unregister_dev_sysctl</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="n">ax25_dev</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">ax25_register_dev_sysctl</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="n">ax25_dev</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">ax25_unregister_dev_sysctl</span><span class="p">(</span><span class="n">ax25_dev</span> <span class="o">*</span><span class="n">ax25_dev</span><span class="p">)</span> <span class="p">{}</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_SYSCTL */</span><span class="cp"></span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
