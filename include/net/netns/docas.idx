f | conntrack.h | s | 1.1K | 37 | Eric Leblond | eric@regit.org | 1336498518 |  | netfilter: nf_ct_helper: allow to disable automatic helper assignment  This patch allows you to disable automatic conntrack helper lookup based on TCP/UDP ports, eg.  echo 0 > /proc/sys/net/netfilter/nf_conntrack_helper  [ Note: flows that already got a helper will keep using it even   if automatic helper assignment has been disabled ]  Once this behaviour has been disabled, you have to explicitly use the iptables CT target to attach helper to flows.  There are good reasons to stop supporting automatic helper assignment, for further information, please read:  http://www.netfilter.org/news.html#2012-04-03  This patch also adds one message to inform that automatic helper assignment is deprecated and it will be removed soon (this is spotted only once, with the first flow that gets a helper attached to make it as less annoying as possible).  Signed-off-by: Eric Leblond <eric@regit.org> Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
f | x_tables.h | s | 393B | 15 | Cyrill Gorcunov | gorcunov@openvz.org | 1246846578 |  | net, netns_xt: shrink netns_xt members  In case if kernel was compiled without ebtables support there is no need to keep ebt_table pointers in netns_xt structure.  Make it config dependent.  Signed-off-by: Cyrill Gorcunov <gorcunov@openvz.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | dccp.h | s | 146B | 8 | Pavel Emelyanov | xemul@openvz.org | 1208151145 |  | [NETNS][DCCPV6]: Move the dccp_v6_ctl_sk on the struct net.  And replace all its usage with init_net's socket.  Signed-off-by: Pavel Emelyanov <xemul@openvz.org> Acked-by: Arnaldo Carvalho de Melo <acme@redhat.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | hash.h | s | 340B | 17 | Eric Dumazet | eric.dumazet@gmail.com | 1334508280 |  | net: cleanup unsigned to unsigned int  Use of "unsigned int" is preferred to bare "unsigned" in net tree.  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | xfrm.h | s | 1.5K | 53 | Eric Dumazet | eric.dumazet@gmail.com | 1323645916 |  | net: use IS_ENABLED(CONFIG_IPV6)  Instead of testing defined(CONFIG_IPV6) |||| defined(CONFIG_IPV6_MODULE)  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | core.h | s | 246B | 11 | Tejun Heo | tj@kernel.org | 1266390338 |  | percpu: add __percpu sparse annotations to net  Add __percpu sparse annotations to net.  These annotations are to make sparse consider percpu variables to be in a different address space and warn if accessed without going through percpu accessors.  This patch doesn't affect normal builds.  The macro and type tricks around snmp stats make things a bit interesting.  DEFINE/DECLARE_SNMP_STAT() macros mark the target field as __percpu and SNMP_UPD_PO_STATS() macro is updated accordingly.  All snmp_mib_*() users which used to cast the argument to (void **) are updated to cast it to (void __percpu **).  Signed-off-by: Tejun Heo <tj@kernel.org> Acked-by: David S. Miller <davem@davemloft.net> Cc: Patrick McHardy <kaber@trash.net> Cc: Arnaldo Carvalho de Melo <acme@ghostprotocols.net> Cc: Vlad Yasevich <vladislav.yasevich@hp.com> Cc: netdev@vger.kernel.org Signed-off-by: David S. Miller <davem@davemloft.net>
f | packet.h | s | 257B | 12 | stephen hemminger | shemminger@vyatta.com | 1266882356 |  | packet: convert socket list to RCU (v3)  Convert AF_PACKET to use RCU, eliminating one more reader/writer lock.  There is no need for a real sk_del_node_init_rcu(), because sk_del_node_init is doing the equivalent thing to hlst_del_init_rcu already; but added some comments to try and make that obvious.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | unix.h | s | 224B | 11 | Denis V. Lunev | den@openvz.org | 1201561034 |  | [NETNS]: struct net content re-work (v3)  Recently David Miller and Herbert Xu pointed out that struct net becomes overbloated and un-maintainable. There are two solutions: - provide a pointer to a network subsystem definition from struct net.   This costs an additional dereferrence - place sub-system definition into the structure itself. This will speedup   run-time access at the cost of recompilation time  The second approach looks better for us. Other sub-systems will follow.  Signed-off-by: Denis V. Lunev <den@openvz.org> Acked-by: Daniel Lezcano <dlezcano@fr.ibm.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | mib.h | s | 947B | 24 | Eric Dumazet | eric.dumazet@gmail.com | 1323645916 |  | net: use IS_ENABLED(CONFIG_IPV6)  Instead of testing defined(CONFIG_IPV6) |||| defined(CONFIG_IPV6_MODULE)  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | generic.h | s | 1.1K | 40 | Paul Gortmaker | paul.gortmaker@windriver.com | 1330901674 |  | BUG: headers with BUG/BUG_ON etc. need linux/bug.h  If a header file is making use of BUG, BUG_ON, BUILD_BUG_ON, or any other BUG variant in a static inline (i.e. not in a #define) then that header really should be including <linux/bug.h> and not just expecting it to be implicitly present.  We can make this change risk-free, since if the files using these headers didn't have exposure to linux/bug.h already, they would have been causing compile failures/warnings.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | ipv4.h | s | 1.6K | 62 | Glauber Costa | glommer@parallels.com | 1323734651 |  | per-netns ipv4 sysctl_tcp_mem  This patch allows each namespace to independently set up its levels for tcp memory pressure thresholds. This patch alone does not buy much: we need to make this values per group of process somehow. This is achieved in the patches that follows in this patchset.  Signed-off-by: Glauber Costa <glommer@parallels.com> Reviewed-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com> CC: David S. Miller <davem@davemloft.net> CC: Eric W. Biederman <ebiederm@xmission.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | ipv6.h | s | 1.7K | 67 | Eric W. Biederman | ebiederm@xmission.com | 1334971349 |  | net ipv6: Don't use sysctl tables with .child entries.  The sysctl core no longer natively understands sysctl tables with .child entries.  Split the ipv6_table to remove the .child entries.  Signed-off-by: Eric W. Biederman <ebiederm@xmission.com> Acked-by: Pavel Emelyanov <xemul@parallels.com> Signed-off-by: David S. Miller <davem@davemloft.net>
