<!DOCTYPE html>
<html><head><title>joekychen/linux » include › net › sctp › command.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>command.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* SCTP kernel Implementation</span>
<span class="cm"> * (C) Copyright IBM Corp. 2001, 2004</span>
<span class="cm"> * Copyright (C) 1999-2001 Cisco, Motorola</span>
<span class="cm"> *</span>
<span class="cm"> * This file is part of the SCTP kernel implementation</span>
<span class="cm"> *</span>
<span class="cm"> * These are the definitions needed for the command object.</span>
<span class="cm"> *</span>
<span class="cm"> * This SCTP implementation  is free software;</span>
<span class="cm"> * you can redistribute it and/or modify it under the terms of</span>
<span class="cm"> * the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2, or (at your option)</span>
<span class="cm"> * any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This SCTP implementation  is distributed in the hope that it</span>
<span class="cm"> * will be useful, but WITHOUT ANY WARRANTY; without even the implied</span>
<span class="cm"> *                 ************************</span>
<span class="cm"> * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span>
<span class="cm"> * See the GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with GNU CC; see the file COPYING.  If not, write to</span>
<span class="cm"> * the Free Software Foundation, 59 Temple Place - Suite 330,</span>
<span class="cm"> * Boston, MA 02111-1307, USA.</span>
<span class="cm"> *</span>
<span class="cm"> * Please send any bug reports or fixes you make to one of the</span>
<span class="cm"> * following email addresses:</span>
<span class="cm"> *</span>
<span class="cm"> * La Monte H.P. Yarroll &lt;piggy@acm.org&gt;</span>
<span class="cm"> * Karl Knutson &lt;karl@athena.chicago.il.us&gt;</span>
<span class="cm"> * Ardelle Fan &lt;ardelle.fan@intel.com&gt;</span>
<span class="cm"> * Sridhar Samudrala &lt;sri@us.ibm.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Any bugs reported given to us we will try to fix... any fixes shared will</span>
<span class="cm"> * be incorporated into the next SCTP release.</span>
<span class="cm"> */</span>


<span class="cp">#ifndef __net_sctp_command_h__</span>
<span class="cp">#define __net_sctp_command_h__</span>

<span class="cp">#include &lt;net/sctp/constants.h&gt;</span>
<span class="cp">#include &lt;net/sctp/structs.h&gt;</span>


<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">SCTP_CMD_NOP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* Do nothing. */</span>
	<span class="n">SCTP_CMD_NEW_ASOC</span><span class="p">,</span>	<span class="cm">/* Register a new association.  */</span>
	<span class="n">SCTP_CMD_DELETE_TCB</span><span class="p">,</span>	<span class="cm">/* Delete the current association. */</span>
	<span class="n">SCTP_CMD_NEW_STATE</span><span class="p">,</span>	<span class="cm">/* Enter a new state.  */</span>
	<span class="n">SCTP_CMD_REPORT_TSN</span><span class="p">,</span>	<span class="cm">/* Record the arrival of a TSN.  */</span>
	<span class="n">SCTP_CMD_GEN_SACK</span><span class="p">,</span>	<span class="cm">/* Send a Selective ACK (maybe).  */</span>
	<span class="n">SCTP_CMD_PROCESS_SACK</span><span class="p">,</span>	<span class="cm">/* Process an inbound SACK.  */</span>
	<span class="n">SCTP_CMD_GEN_INIT_ACK</span><span class="p">,</span>	<span class="cm">/* Generate an INIT ACK chunk.  */</span>
	<span class="n">SCTP_CMD_PEER_INIT</span><span class="p">,</span>	<span class="cm">/* Process a INIT from the peer.  */</span>
	<span class="n">SCTP_CMD_GEN_COOKIE_ECHO</span><span class="p">,</span> <span class="cm">/* Generate a COOKIE ECHO chunk. */</span>
	<span class="n">SCTP_CMD_CHUNK_ULP</span><span class="p">,</span>	<span class="cm">/* Send a chunk to the sockets layer.  */</span>
	<span class="n">SCTP_CMD_EVENT_ULP</span><span class="p">,</span>	<span class="cm">/* Send a notification to the sockets layer. */</span>
	<span class="n">SCTP_CMD_REPLY</span><span class="p">,</span>		<span class="cm">/* Send a chunk to our peer.  */</span>
	<span class="n">SCTP_CMD_SEND_PKT</span><span class="p">,</span>	<span class="cm">/* Send a full packet to our peer.  */</span>
	<span class="n">SCTP_CMD_RETRAN</span><span class="p">,</span>	<span class="cm">/* Mark a transport for retransmission.  */</span>
	<span class="n">SCTP_CMD_ECN_CE</span><span class="p">,</span>        <span class="cm">/* Do delayed CE processing.   */</span>
	<span class="n">SCTP_CMD_ECN_ECNE</span><span class="p">,</span>	<span class="cm">/* Do delayed ECNE processing. */</span>
	<span class="n">SCTP_CMD_ECN_CWR</span><span class="p">,</span>	<span class="cm">/* Do delayed CWR processing.  */</span>
	<span class="n">SCTP_CMD_TIMER_START</span><span class="p">,</span>	<span class="cm">/* Start a timer.  */</span>
	<span class="n">SCTP_CMD_TIMER_START_ONCE</span><span class="p">,</span> <span class="cm">/* Start a timer once */</span>
	<span class="n">SCTP_CMD_TIMER_RESTART</span><span class="p">,</span>	<span class="cm">/* Restart a timer. */</span>
	<span class="n">SCTP_CMD_TIMER_STOP</span><span class="p">,</span>	<span class="cm">/* Stop a timer. */</span>
	<span class="n">SCTP_CMD_INIT_CHOOSE_TRANSPORT</span><span class="p">,</span> <span class="cm">/* Choose transport for an INIT. */</span>
	<span class="n">SCTP_CMD_INIT_COUNTER_RESET</span><span class="p">,</span> <span class="cm">/* Reset init counter. */</span>
	<span class="n">SCTP_CMD_INIT_COUNTER_INC</span><span class="p">,</span>   <span class="cm">/* Increment init counter. */</span>
	<span class="n">SCTP_CMD_INIT_RESTART</span><span class="p">,</span>  <span class="cm">/* High level, do init timer work. */</span>
	<span class="n">SCTP_CMD_COOKIEECHO_RESTART</span><span class="p">,</span>  <span class="cm">/* High level, do cookie-echo timer work. */</span>
	<span class="n">SCTP_CMD_INIT_FAILED</span><span class="p">,</span>   <span class="cm">/* High level, do init failure work. */</span>
	<span class="n">SCTP_CMD_REPORT_DUP</span><span class="p">,</span>	<span class="cm">/* Report a duplicate TSN.  */</span>
	<span class="n">SCTP_CMD_STRIKE</span><span class="p">,</span>	<span class="cm">/* Mark a strike against a transport.  */</span>
	<span class="n">SCTP_CMD_HB_TIMERS_START</span><span class="p">,</span>    <span class="cm">/* Start the heartbeat timers. */</span>
	<span class="n">SCTP_CMD_HB_TIMER_UPDATE</span><span class="p">,</span>    <span class="cm">/* Update a heartbeat timers.  */</span>
	<span class="n">SCTP_CMD_HB_TIMERS_STOP</span><span class="p">,</span>     <span class="cm">/* Stop the heartbeat timers.  */</span>
	<span class="n">SCTP_CMD_TRANSPORT_HB_SENT</span><span class="p">,</span>  <span class="cm">/* Reset the status of a transport. */</span>
	<span class="n">SCTP_CMD_TRANSPORT_IDLE</span><span class="p">,</span>     <span class="cm">/* Do manipulations on idle transport */</span>
	<span class="n">SCTP_CMD_TRANSPORT_ON</span><span class="p">,</span>       <span class="cm">/* Mark the transport as active. */</span>
	<span class="n">SCTP_CMD_REPORT_ERROR</span><span class="p">,</span>   <span class="cm">/* Pass this error back out of the sm. */</span>
	<span class="n">SCTP_CMD_REPORT_BAD_TAG</span><span class="p">,</span> <span class="cm">/* Verification tags didn&#39;t match. */</span>
	<span class="n">SCTP_CMD_PROCESS_CTSN</span><span class="p">,</span>   <span class="cm">/* Sideeffect from shutdown. */</span>
	<span class="n">SCTP_CMD_ASSOC_FAILED</span><span class="p">,</span>	 <span class="cm">/* Handle association failure. */</span>
	<span class="n">SCTP_CMD_DISCARD_PACKET</span><span class="p">,</span> <span class="cm">/* Discard the whole packet. */</span>
	<span class="n">SCTP_CMD_GEN_SHUTDOWN</span><span class="p">,</span>   <span class="cm">/* Generate a SHUTDOWN chunk. */</span>
	<span class="n">SCTP_CMD_UPDATE_ASSOC</span><span class="p">,</span>   <span class="cm">/* Update association information. */</span>
	<span class="n">SCTP_CMD_PURGE_OUTQUEUE</span><span class="p">,</span> <span class="cm">/* Purge all data waiting to be sent. */</span>
	<span class="n">SCTP_CMD_SETUP_T2</span><span class="p">,</span>       <span class="cm">/* Hi-level, setup T2-shutdown parms.  */</span>
	<span class="n">SCTP_CMD_RTO_PENDING</span><span class="p">,</span>	 <span class="cm">/* Set transport&#39;s rto_pending. */</span>
	<span class="n">SCTP_CMD_PART_DELIVER</span><span class="p">,</span>	 <span class="cm">/* Partial data delivery considerations. */</span>
	<span class="n">SCTP_CMD_RENEGE</span><span class="p">,</span>         <span class="cm">/* Renege data on an association. */</span>
	<span class="n">SCTP_CMD_SETUP_T4</span><span class="p">,</span>	 <span class="cm">/* ADDIP, setup T4 RTO timer parms. */</span>
	<span class="n">SCTP_CMD_PROCESS_OPERR</span><span class="p">,</span>  <span class="cm">/* Process an ERROR chunk. */</span>
	<span class="n">SCTP_CMD_REPORT_FWDTSN</span><span class="p">,</span>	 <span class="cm">/* Report new cumulative TSN Ack. */</span>
	<span class="n">SCTP_CMD_PROCESS_FWDTSN</span><span class="p">,</span> <span class="cm">/* Skips were reported, so process further. */</span>
	<span class="n">SCTP_CMD_CLEAR_INIT_TAG</span><span class="p">,</span> <span class="cm">/* Clears association peer&#39;s inittag. */</span>
	<span class="n">SCTP_CMD_DEL_NON_PRIMARY</span><span class="p">,</span> <span class="cm">/* Removes non-primary peer transports. */</span>
	<span class="n">SCTP_CMD_T3_RTX_TIMERS_STOP</span><span class="p">,</span> <span class="cm">/* Stops T3-rtx pending timers */</span>
	<span class="n">SCTP_CMD_FORCE_PRIM_RETRAN</span><span class="p">,</span>  <span class="cm">/* Forces retrans. over primary path. */</span>
	<span class="n">SCTP_CMD_SET_SK_ERR</span><span class="p">,</span>	 <span class="cm">/* Set sk_err */</span>
	<span class="n">SCTP_CMD_ASSOC_CHANGE</span><span class="p">,</span>	 <span class="cm">/* generate and send assoc_change event */</span>
	<span class="n">SCTP_CMD_ADAPTATION_IND</span><span class="p">,</span> <span class="cm">/* generate and send adaptation event */</span>
	<span class="n">SCTP_CMD_ASSOC_SHKEY</span><span class="p">,</span>    <span class="cm">/* generate the association shared keys */</span>
	<span class="n">SCTP_CMD_T1_RETRAN</span><span class="p">,</span>	 <span class="cm">/* Mark for retransmission after T1 timeout  */</span>
	<span class="n">SCTP_CMD_UPDATE_INITTAG</span><span class="p">,</span> <span class="cm">/* Update peer inittag */</span>
	<span class="n">SCTP_CMD_SEND_MSG</span><span class="p">,</span>	 <span class="cm">/* Send the whole use message */</span>
	<span class="n">SCTP_CMD_SEND_NEXT_ASCONF</span><span class="p">,</span> <span class="cm">/* Send the next ASCONF after ACK */</span>
	<span class="n">SCTP_CMD_PURGE_ASCONF_QUEUE</span><span class="p">,</span> <span class="cm">/* Purge all asconf queues.*/</span>
	<span class="n">SCTP_CMD_SET_ASOC</span><span class="p">,</span>	 <span class="cm">/* Restore association context */</span>
	<span class="n">SCTP_CMD_LAST</span>
<span class="p">}</span> <span class="n">sctp_verb_t</span><span class="p">;</span>

<span class="cm">/* How many commands can you put in an sctp_cmd_seq_t?</span>
<span class="cm"> * This is a rather arbitrary number, ideally derived from a careful</span>
<span class="cm"> * analysis of the state functions, but in reality just taken from</span>
<span class="cm"> * thin air in the hopes othat we don&#39;t trigger a kernel panic.</span>
<span class="cm"> */</span>
<span class="cp">#define SCTP_MAX_NUM_COMMANDS 14</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
	<span class="n">__s32</span> <span class="n">i32</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">u32</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">be32</span><span class="p">;</span>
	<span class="n">__u16</span> <span class="n">u16</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">u8</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">error</span><span class="p">;</span>
	<span class="n">__be16</span> <span class="n">err</span><span class="p">;</span>
	<span class="n">sctp_state_t</span> <span class="n">state</span><span class="p">;</span>
	<span class="n">sctp_event_timeout_t</span> <span class="n">to</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">zero</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_chunk</span> <span class="o">*</span><span class="n">chunk</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_association</span> <span class="o">*</span><span class="n">asoc</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_transport</span> <span class="o">*</span><span class="n">transport</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_bind_addr</span> <span class="o">*</span><span class="n">bp</span><span class="p">;</span>
	<span class="n">sctp_init_chunk_t</span> <span class="o">*</span><span class="n">init</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_ulpevent</span> <span class="o">*</span><span class="n">ulpevent</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_packet</span> <span class="o">*</span><span class="n">packet</span><span class="p">;</span>
	<span class="n">sctp_sackhdr_t</span> <span class="o">*</span><span class="n">sackh</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sctp_datamsg</span> <span class="o">*</span><span class="n">msg</span><span class="p">;</span>
<span class="p">}</span> <span class="n">sctp_arg_t</span><span class="p">;</span>

<span class="cm">/* We are simulating ML type constructors here.</span>
<span class="cm"> *</span>
<span class="cm"> * SCTP_ARG_CONSTRUCTOR(NAME, TYPE, ELT) builds a function called</span>
<span class="cm"> * SCTP_NAME() which takes an argument of type TYPE and returns an</span>
<span class="cm"> * sctp_arg_t.  It does this by inserting the sole argument into the</span>
<span class="cm"> * ELT union element of a local sctp_arg_t.</span>
<span class="cm"> *</span>
<span class="cm"> * E.g., SCTP_ARG_CONSTRUCTOR(I32, __s32, i32) builds SCTP_I32(arg),</span>
<span class="cm"> * which takes an __s32 and returns a sctp_arg_t containing the</span>
<span class="cm"> * __s32.  So, after foo = SCTP_I32(arg), foo.i32 == arg.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">sctp_arg_t</span> <span class="nf">SCTP_NULL</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">sctp_arg_t</span> <span class="n">retval</span><span class="p">;</span> <span class="n">retval</span><span class="p">.</span><span class="n">ptr</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">sctp_arg_t</span> <span class="nf">SCTP_NOFORCE</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">sctp_arg_t</span> <span class="n">retval</span> <span class="o">=</span> <span class="p">{.</span><span class="n">zero</span> <span class="o">=</span> <span class="mi">0UL</span><span class="p">};</span> <span class="n">retval</span><span class="p">.</span><span class="n">i32</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">sctp_arg_t</span> <span class="nf">SCTP_FORCE</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">sctp_arg_t</span> <span class="n">retval</span> <span class="o">=</span> <span class="p">{.</span><span class="n">zero</span> <span class="o">=</span> <span class="mi">0UL</span><span class="p">};</span> <span class="n">retval</span><span class="p">.</span><span class="n">i32</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">return</span> <span class="n">retval</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#define SCTP_ARG_CONSTRUCTOR(name, type, elt) \</span>
<span class="cp">static inline sctp_arg_t	\</span>
<span class="cp">SCTP_## name (type arg)		\</span>
<span class="cp">{ sctp_arg_t retval = {.zero = 0UL}; retval.elt = arg; return retval; }</span>

<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">I32</span><span class="p">,</span>	<span class="n">__s32</span><span class="p">,</span> <span class="n">i32</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">U32</span><span class="p">,</span>	<span class="n">__u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">BE32</span><span class="p">,</span>	<span class="n">__be32</span><span class="p">,</span> <span class="n">be32</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">U16</span><span class="p">,</span>	<span class="n">__u16</span><span class="p">,</span> <span class="n">u16</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">U8</span><span class="p">,</span>	<span class="n">__u8</span><span class="p">,</span> <span class="n">u8</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">ERROR</span><span class="p">,</span>     <span class="kt">int</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">PERR</span><span class="p">,</span>      <span class="n">__be16</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>	<span class="cm">/* protocol error */</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">STATE</span><span class="p">,</span>	<span class="n">sctp_state_t</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">TO</span><span class="p">,</span>	<span class="n">sctp_event_timeout_t</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">PTR</span><span class="p">,</span>	<span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">ptr</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">CHUNK</span><span class="p">,</span>	<span class="k">struct</span> <span class="n">sctp_chunk</span> <span class="o">*</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">ASOC</span><span class="p">,</span>	<span class="k">struct</span> <span class="n">sctp_association</span> <span class="o">*</span><span class="p">,</span> <span class="n">asoc</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">TRANSPORT</span><span class="p">,</span>	<span class="k">struct</span> <span class="n">sctp_transport</span> <span class="o">*</span><span class="p">,</span> <span class="n">transport</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span>	<span class="k">struct</span> <span class="n">sctp_bind_addr</span> <span class="o">*</span><span class="p">,</span> <span class="n">bp</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">PEER_INIT</span><span class="p">,</span>	<span class="n">sctp_init_chunk_t</span> <span class="o">*</span><span class="p">,</span> <span class="n">init</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">ULPEVENT</span><span class="p">,</span>  <span class="k">struct</span> <span class="n">sctp_ulpevent</span> <span class="o">*</span><span class="p">,</span> <span class="n">ulpevent</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">PACKET</span><span class="p">,</span>	<span class="k">struct</span> <span class="n">sctp_packet</span> <span class="o">*</span><span class="p">,</span> <span class="n">packet</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">SACKH</span><span class="p">,</span>	<span class="n">sctp_sackhdr_t</span> <span class="o">*</span><span class="p">,</span> <span class="n">sackh</span><span class="p">)</span>
<span class="n">SCTP_ARG_CONSTRUCTOR</span><span class="p">(</span><span class="n">DATAMSG</span><span class="p">,</span>	<span class="k">struct</span> <span class="n">sctp_datamsg</span> <span class="o">*</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">sctp_arg_t</span> <span class="n">obj</span><span class="p">;</span>
	<span class="n">sctp_verb_t</span> <span class="n">verb</span><span class="p">;</span>
<span class="p">}</span> <span class="n">sctp_cmd_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">sctp_cmd_t</span> <span class="n">cmds</span><span class="p">[</span><span class="n">SCTP_MAX_NUM_COMMANDS</span><span class="p">];</span>
	<span class="n">__u8</span> <span class="n">next_free_slot</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">next_cmd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">sctp_cmd_seq_t</span><span class="p">;</span>


<span class="cm">/* Initialize a block of memory as a command sequence.</span>
<span class="cm"> * Return 0 if the initialization fails.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">sctp_init_cmd_seq</span><span class="p">(</span><span class="n">sctp_cmd_seq_t</span> <span class="o">*</span><span class="n">seq</span><span class="p">);</span>

<span class="cm">/* Add a command to an sctp_cmd_seq_t.</span>
<span class="cm"> *</span>
<span class="cm"> * Use the SCTP_* constructors defined by SCTP_ARG_CONSTRUCTOR() above</span>
<span class="cm"> * to wrap data which goes in the obj argument.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">sctp_add_cmd_sf</span><span class="p">(</span><span class="n">sctp_cmd_seq_t</span> <span class="o">*</span><span class="n">seq</span><span class="p">,</span> <span class="n">sctp_verb_t</span> <span class="n">verb</span><span class="p">,</span> <span class="n">sctp_arg_t</span> <span class="n">obj</span><span class="p">);</span>

<span class="cm">/* Return the next command structure in an sctp_cmd_seq.</span>
<span class="cm"> * Return NULL at the end of the sequence.</span>
<span class="cm"> */</span>
<span class="n">sctp_cmd_t</span> <span class="o">*</span><span class="n">sctp_next_cmd</span><span class="p">(</span><span class="n">sctp_cmd_seq_t</span> <span class="o">*</span><span class="n">seq</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __net_sctp_command_h__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
