f | pn_dev.h | s | 1.9K | 52 | Eric Dumazet | eric.dumazet@gmail.com | 1304375188 |  | net: dont hold rtnl mutex during netlink dump callbacks  Four years ago, Patrick made a change to hold rtnl mutex during netlink dump callbacks.  I believe it was a wrong move. This slows down concurrent dumps, making good old /proc/net/ files faster than rtnetlink in some situations.  This occurred to me because one "ip link show dev ..." was _very_ slow on a workload adding/removing network devices in background.  All dump callbacks are able to use RCU locking now, so this patch does roughly a revert of commits :  1c2d670f366 : [RTNETLINK]: Hold rtnl_mutex during netlink dump callbacks 6313c1e0992 : [RTNETLINK]: Remove unnecessary locking in dump callbacks  This let writers fight for rtnl mutex and readers going full speed.  It also takes care of phonet : phonet_route_get() is now called from rcu read section. I renamed it to phonet_route_get_rcu()  Signed-off-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Patrick McHardy <kaber@trash.net> Cc: Remi Denis-Courmont <remi.denis-courmont@nokia.com> Acked-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | pep.h | s | 3.7K | 145 | Rémi Denis-Courmont | remi.denis-courmont@nokia.com | 1299700772 |  | Phonet: allocate sock from accept syscall rather than soft IRQ  This moves most of the accept logic to process context like other socket stacks do. Then we can use a few more common socket helpers and simplify a bit.  Signed-off-by: Rémi Denis-Courmont <remi.denis-courmont@nokia.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | phonet.h | s | 3.3K | 101 | Rémi Denis-Courmont | remi.denis-courmont@nokia.com | 1298661575 |  | Phonet: implement per-socket destination/peer address  Signed-off-by: Rémi Denis-Courmont <remi.denis-courmont@nokia.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | gprs.h | s | 1.1K | 33 | Rémi Denis-Courmont | remi.denis-courmont@nokia.com | 1339975778 |  | net: remove my future former mail address  Signed-off-by: Rémi Denis-Courmont <remi@remlab.net> Cc: Sakari Ailus <sakari.ailus@nokia.com> Signed-off-by: David S. Miller <davem@davemloft.net>
