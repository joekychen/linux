<!DOCTYPE html>
<html><head><title>joekychen/linux » include › net › x25.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>x25.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *	Declarations of X.25 Packet Layer type objects.</span>
<span class="cm"> *</span>
<span class="cm"> * 	History</span>
<span class="cm"> *	nov/17/96	Jonathan Naylor	  Initial version.		</span>
<span class="cm"> *	mar/20/00	Daniela Squassoni Disabling/enabling of facilities </span>
<span class="cm"> *					  negotiation.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _X25_H</span>
<span class="cp">#define _X25_H </span>
<span class="cp">#include &lt;linux/x25.h&gt;</span>
<span class="cp">#include &lt;linux/slab.h&gt;</span>
<span class="cp">#include &lt;net/sock.h&gt;</span>

<span class="cp">#define	X25_ADDR_LEN			16</span>

<span class="cp">#define	X25_MAX_L2_LEN			18	</span><span class="cm">/* 802.2 LLC */</span><span class="cp"></span>

<span class="cp">#define	X25_STD_MIN_LEN			3</span>
<span class="cp">#define	X25_EXT_MIN_LEN			4</span>

<span class="cp">#define	X25_GFI_SEQ_MASK		0x30</span>
<span class="cp">#define	X25_GFI_STDSEQ			0x10</span>
<span class="cp">#define	X25_GFI_EXTSEQ			0x20</span>

<span class="cp">#define	X25_Q_BIT			0x80</span>
<span class="cp">#define	X25_D_BIT			0x40</span>
<span class="cp">#define	X25_STD_M_BIT			0x10</span>
<span class="cp">#define	X25_EXT_M_BIT			0x01</span>

<span class="cp">#define	X25_CALL_REQUEST		0x0B</span>
<span class="cp">#define	X25_CALL_ACCEPTED		0x0F</span>
<span class="cp">#define	X25_CLEAR_REQUEST		0x13</span>
<span class="cp">#define	X25_CLEAR_CONFIRMATION		0x17</span>
<span class="cp">#define	X25_DATA			0x00</span>
<span class="cp">#define	X25_INTERRUPT			0x23</span>
<span class="cp">#define	X25_INTERRUPT_CONFIRMATION	0x27</span>
<span class="cp">#define	X25_RR				0x01</span>
<span class="cp">#define	X25_RNR				0x05</span>
<span class="cp">#define	X25_REJ				0x09</span>
<span class="cp">#define	X25_RESET_REQUEST		0x1B</span>
<span class="cp">#define	X25_RESET_CONFIRMATION		0x1F</span>
<span class="cp">#define	X25_REGISTRATION_REQUEST	0xF3</span>
<span class="cp">#define	X25_REGISTRATION_CONFIRMATION	0xF7</span>
<span class="cp">#define	X25_RESTART_REQUEST		0xFB</span>
<span class="cp">#define	X25_RESTART_CONFIRMATION	0xFF</span>
<span class="cp">#define	X25_DIAGNOSTIC			0xF1</span>
<span class="cp">#define	X25_ILLEGAL			0xFD</span>

<span class="cm">/* Define the various conditions that may exist */</span>

<span class="cp">#define	X25_COND_ACK_PENDING	0x01</span>
<span class="cp">#define	X25_COND_OWN_RX_BUSY	0x02</span>
<span class="cp">#define	X25_COND_PEER_RX_BUSY	0x04</span>

<span class="cm">/* Define Link State constants. */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">X25_STATE_0</span><span class="p">,</span>		<span class="cm">/* Ready */</span>
	<span class="n">X25_STATE_1</span><span class="p">,</span>		<span class="cm">/* Awaiting Call Accepted */</span>
	<span class="n">X25_STATE_2</span><span class="p">,</span>		<span class="cm">/* Awaiting Clear Confirmation */</span>
	<span class="n">X25_STATE_3</span><span class="p">,</span>		<span class="cm">/* Data Transfer */</span>
	<span class="n">X25_STATE_4</span>		<span class="cm">/* Awaiting Reset Confirmation */</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">X25_LINK_STATE_0</span><span class="p">,</span>
	<span class="n">X25_LINK_STATE_1</span><span class="p">,</span>
	<span class="n">X25_LINK_STATE_2</span><span class="p">,</span>
	<span class="n">X25_LINK_STATE_3</span>
<span class="p">};</span>

<span class="cp">#define X25_DEFAULT_T20		(180 * HZ)		</span><span class="cm">/* Default T20 value */</span><span class="cp"></span>
<span class="cp">#define X25_DEFAULT_T21		(200 * HZ)		</span><span class="cm">/* Default T21 value */</span><span class="cp"></span>
<span class="cp">#define X25_DEFAULT_T22		(180 * HZ)		</span><span class="cm">/* Default T22 value */</span><span class="cp"></span>
<span class="cp">#define	X25_DEFAULT_T23		(180 * HZ)		</span><span class="cm">/* Default T23 value */</span><span class="cp"></span>
<span class="cp">#define	X25_DEFAULT_T2		(3   * HZ)		</span><span class="cm">/* Default ack holdback value */</span><span class="cp"></span>

<span class="cp">#define	X25_DEFAULT_WINDOW_SIZE	2			</span><span class="cm">/* Default Window Size	*/</span><span class="cp"></span>
<span class="cp">#define	X25_DEFAULT_PACKET_SIZE	X25_PS128		</span><span class="cm">/* Default Packet Size */</span><span class="cp"></span>
<span class="cp">#define	X25_DEFAULT_THROUGHPUT	0x0A			</span><span class="cm">/* Deafult Throughput */</span><span class="cp"></span>
<span class="cp">#define	X25_DEFAULT_REVERSE	0x00			</span><span class="cm">/* Default Reverse Charging */</span><span class="cp"></span>

<span class="cp">#define X25_SMODULUS 		8</span>
<span class="cp">#define	X25_EMODULUS		128</span>

<span class="cm">/*</span>
<span class="cm"> *	X.25 Facilities constants.</span>
<span class="cm"> */</span>

<span class="cp">#define	X25_FAC_CLASS_MASK	0xC0</span>

<span class="cp">#define	X25_FAC_CLASS_A		0x00</span>
<span class="cp">#define	X25_FAC_CLASS_B		0x40</span>
<span class="cp">#define	X25_FAC_CLASS_C		0x80</span>
<span class="cp">#define	X25_FAC_CLASS_D		0xC0</span>

<span class="cp">#define	X25_FAC_REVERSE		0x01			</span><span class="cm">/* also fast select */</span><span class="cp"></span>
<span class="cp">#define	X25_FAC_THROUGHPUT	0x02</span>
<span class="cp">#define	X25_FAC_PACKET_SIZE	0x42</span>
<span class="cp">#define	X25_FAC_WINDOW_SIZE	0x43</span>

<span class="cp">#define X25_MAX_FAC_LEN 	60</span>
<span class="cp">#define	X25_MAX_CUD_LEN		128</span>

<span class="cp">#define X25_FAC_CALLING_AE 	0xCB</span>
<span class="cp">#define X25_FAC_CALLED_AE 	0xC9</span>

<span class="cp">#define X25_MARKER 		0x00</span>
<span class="cp">#define X25_DTE_SERVICES 	0x0F</span>
<span class="cp">#define X25_MAX_AE_LEN 		40			</span><span class="cm">/* Max num of semi-octets in AE - OSI Nw */</span><span class="cp"></span>
<span class="cp">#define X25_MAX_DTE_FACIL_LEN	21			</span><span class="cm">/* Max length of DTE facility params */</span><span class="cp"></span>

<span class="cm">/* Bitset in x25_sock-&gt;flags for misc flags */</span>
<span class="cp">#define X25_Q_BIT_FLAG		0</span>
<span class="cp">#define X25_INTERRUPT_FLAG	1</span>
<span class="cp">#define X25_ACCPT_APPRV_FLAG	2</span>

<span class="cm">/**</span>
<span class="cm"> *	struct x25_route - x25 routing entry</span>
<span class="cm"> *	@node - entry in x25_list_lock</span>
<span class="cm"> *	@address - Start of address range</span>
<span class="cm"> *	@sigdigits - Number of sig digits</span>
<span class="cm"> *	@dev - More than one for MLP</span>
<span class="cm"> *	@refcnt - reference counter</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">x25_route</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">node</span><span class="p">;</span>		
	<span class="k">struct</span> <span class="n">x25_address</span>	<span class="n">address</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">sigdigits</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">refcnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">x25_neigh</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">node</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">state</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">extended</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">queue</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">t20</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">t20timer</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">global_facil_mask</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">refcnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">x25_sock</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sock</span>		<span class="n">sk</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">x25_address</span>	<span class="n">source_addr</span><span class="p">,</span> <span class="n">dest_addr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">x25_neigh</span>	<span class="o">*</span><span class="n">neighbour</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">lci</span><span class="p">,</span> <span class="n">cudmatchlength</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>		<span class="n">state</span><span class="p">,</span> <span class="n">condition</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">vs</span><span class="p">,</span> <span class="n">vr</span><span class="p">,</span> <span class="n">va</span><span class="p">,</span> <span class="n">vl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">t2</span><span class="p">,</span> <span class="n">t21</span><span class="p">,</span> <span class="n">t22</span><span class="p">,</span> <span class="n">t23</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>		<span class="n">fraglen</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>		<span class="n">flags</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">ack_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">fragment_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">interrupt_in_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sk_buff_head</span>	<span class="n">interrupt_out_queue</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">timer_list</span>	<span class="n">timer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">x25_causediag</span>	<span class="n">causediag</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">x25_facilities</span>	<span class="n">facilities</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">x25_dte_facilities</span> <span class="n">dte_facilities</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">x25_calluserdata</span>	<span class="n">calluserdata</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> 		<span class="n">vc_facil_mask</span><span class="p">;</span>	<span class="cm">/* inc_call facilities mask */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">x25_forward</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span>	<span class="n">node</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">lci</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">net_device</span>	<span class="o">*</span><span class="n">dev2</span><span class="p">;</span>
	<span class="n">atomic_t</span>		<span class="n">refcnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="k">struct</span> <span class="n">x25_sock</span> <span class="o">*</span><span class="nf">x25_sk</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">sk</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="k">struct</span> <span class="n">x25_sock</span> <span class="o">*</span><span class="p">)</span><span class="n">sk</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* af_x25.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_x25_restart_request_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_x25_call_request_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_x25_reset_request_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_x25_clear_request_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_x25_ack_holdback_timeout</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">sysctl_x25_forward</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_parse_address_block</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="n">skb</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="n">called_addr</span><span class="p">,</span>
		<span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="n">calling_addr</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_addr_ntoa</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_addr_aton</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="p">,</span>
			  <span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">x25_find_socket</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_destroy_socket_from_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_rx_call_request</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_kill_by_neigh</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* x25_dev.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_send_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_lapb_receive_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">packet_type</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_establish_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_terminate_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* x25_facilities.c */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_parse_facilities</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_facilities</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">x25_dte_facilities</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_create_facilities</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_facilities</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">x25_dte_facilities</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_negotiate_facilities</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">x25_facilities</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">x25_dte_facilities</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_limit_facilities</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_facilities</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* x25_forward.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_clear_forward_by_lci</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">lci</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_clear_forward_by_dev</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_forward_data</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_forward_call</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="cm">/* x25_in.c */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_process_rx_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_backlog_rcv</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* x25_link.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_link_control</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_link_device_up</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_link_device_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_link_established</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_link_terminated</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_transmit_clear_request</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_transmit_link</span><span class="p">(</span><span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_subscr_ioctl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="n">x25_get_neigh</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_link_free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* x25_neigh.c */</span>
<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">x25_neigh_hold</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="n">nb</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">atomic_inc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nb</span><span class="o">-&gt;</span><span class="n">refcnt</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">x25_neigh_put</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_neigh</span> <span class="o">*</span><span class="n">nb</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nb</span><span class="o">-&gt;</span><span class="n">refcnt</span><span class="p">))</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">nb</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* x25_out.c */</span>
<span class="k">extern</span>  <span class="kt">int</span> <span class="n">x25_output</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_kick</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_enquiry_response</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* x25_route.c */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">x25_route</span> <span class="o">*</span><span class="n">x25_get_route</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_address</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">x25_dev_get</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_route_device_down</span><span class="p">(</span><span class="k">struct</span> <span class="n">net_device</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_route_ioctl</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="n">__user</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_route_free</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">x25_route_hold</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_route</span> <span class="o">*</span><span class="n">rt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">atomic_inc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rt</span><span class="o">-&gt;</span><span class="n">refcnt</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">__inline__</span> <span class="kt">void</span> <span class="nf">x25_route_put</span><span class="p">(</span><span class="k">struct</span> <span class="n">x25_route</span> <span class="o">*</span><span class="n">rt</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">atomic_dec_and_test</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rt</span><span class="o">-&gt;</span><span class="n">refcnt</span><span class="p">))</span>
		<span class="n">kfree</span><span class="p">(</span><span class="n">rt</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* x25_subr.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_clear_queues</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_frames_acked</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_requeue_frames</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_validate_nr</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_write_internal</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">x25_decode</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">sk_buff</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_disconnect</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">);</span>

<span class="cm">/* x25_timer.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_init_timers</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="n">sk</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_start_heartbeat</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_start_t2timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_start_t21timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_start_t22timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_start_t23timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_stop_heartbeat</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_stop_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">x25_display_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_check_rbuf</span><span class="p">(</span><span class="k">struct</span> <span class="n">sock</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* sysctl_net_x25.c */</span>
<span class="cp">#ifdef CONFIG_SYSCTL</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_register_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_unregister_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">x25_register_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{};</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">x25_unregister_sysctl</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_SYSCTL */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">x25_skb_cb</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#define X25_SKB_CB(s) ((struct x25_skb_cb *) ((s)-&gt;cb))</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">hlist_head</span> <span class="n">x25_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">rwlock_t</span> <span class="n">x25_list_lock</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">list_head</span> <span class="n">x25_route_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">rwlock_t</span> <span class="n">x25_route_list_lock</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">list_head</span> <span class="n">x25_forward_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">rwlock_t</span> <span class="n">x25_forward_list_lock</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">list_head</span> <span class="n">x25_neigh_list</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">rwlock_t</span> <span class="n">x25_neigh_list_lock</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">x25_proc_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">x25_proc_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
