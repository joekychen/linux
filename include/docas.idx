d | net |  | 141 items |  | Neil Horman | nhorman@tuxdriver.com | 1341121475 |  | sctp: be more restrictive in transport selection on bundled sacks  It was noticed recently that when we send data on a transport, its possible that we might bundle a sack that arrived on a different transport.  While this isn't a major problem, it does go against the SHOULD requirement in section 6.4 of RFC 2960:   An endpoint SHOULD transmit reply chunks (e.g., SACK, HEARTBEAT ACK,    etc.) to the same destination transport address from which it    received the DATA or control chunk to which it is replying.  This    rule should also be followed if the endpoint is bundling DATA chunks    together with the reply chunk.  This patch seeks to correct that.  It restricts the bundling of sack operations to only those transports which have moved the ctsn of the association forward since the last sack.  By doing this we guarantee that we only bundle outbound saks on a transport that has received a chunk since the last sack.  This brings us into stricter compliance with the RFC.  Vlad had initially suggested that we strictly allow only sack bundling on the transport that last moved the ctsn forward.  While this makes sense, I was concerned that doing so prevented us from bundling in the case where we had received chunks that moved the ctsn on multiple transports.  In those cases, the RFC allows us to select any of the transports having received chunks to bundle the sack on.  so I've modified the approach to allow for that, by adding a state variable to each transport that tracks weather it has moved the ctsn since the last sack.  This I think keeps our behavior (and performance), close enough to our current profile that I think we can do this without a sysctl knob to enable/disable it.  Signed-off-by: Neil Horman <nhorman@tuxdriver.com> CC: Vlad Yaseivch <vyasevich@gmail.com> CC: David S. Miller <davem@davemloft.net> CC: linux-sctp@vger.kernel.org Reported-by: Michele Baldessari <michele@redhat.com> Reported-by: sorin serban <sserban@redhat.com> Acked-by: Vlad Yasevich <vyasevich@gmail.com> Signed-off-by: David S. Miller <davem@davemloft.net>
d | rdma |  | 22 items |  | Roland Dreier | roland@purestorage.com | 1337616047 |  | Merge branches 'core', 'cxgb4', 'ipath', 'iser', 'lockdep', 'mlx4', 'nes', 'ocrdma', 'qib' and 'raw-qp' into for-linus
d | xen |  | 22 items |  | Stefano Stabellini | stefano.stabellini@eu.citrix.com | 1337623896 |  | xen: do not map the same GSI twice in PVHVM guests.  PV on HVM guests map GSIs into event channels. At restore time the event channels are resumed by restore_pirqs.  Device drivers might try to register the same GSI again through ACPI at restore time, but the GSI has already been mapped and bound by restore_pirqs. This patch detects these situations and avoids  mapping the same GSI multiple times.  Without this patch we get: (XEN) irq.c:2235: dom4: pirq 23 or emuirq 28 already mapped and waste a pirq.  CC: stable@kernel.org Signed-off-by: Stefano Stabellini <stefano.stabellini@eu.citrix.com> Signed-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
d | media |  | 94 items |  | remi schwartz | remi.schwartz@gmail.com | 1337540702 |  | [media] patch for Asus My Cinema PS3-100 (1043:48cd)  Signed-off-by: Remi Schwartz <remi.schwartz@gmail.com> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
d | asm-generic |  | 135 items |  | Paul Mundt | lethal@linux-sh.org | 1340645569 |  | bug.h: Fix up CONFIG_BUG=n implicit function declarations.  Commit 2603efa31a03 ("bug.h: Fix up powerpc build regression") corrected the powerpc build case and extended the __ASSEMBLY__ guards, but it also got caught in pre-processor hell accidentally matching the else case of CONFIG_BUG resulting in the BUG disabled case tripping up on -Werror=implicit-function-declaration.  It's not possible to __ASSEMBLY__ guard the entire file as architecture code needs to get at the BUGFLAG_WARNING definition in the GENERIC_BUG case, but the rest of the CONFIG_BUG=y/n case needs to be guarded.  Rather than littering endless __ASSEMBLY__ checks in each of the if/else cases we just move the BUGFLAG definitions up under their own GENERIC_BUG test and then shove everything else under one big __ASSEMBLY__ guard.  Build tested on all of x86 CONFIG_BUG=y, CONFIG_BUG=n, powerpc (due to it's dependence on BUGFLAG definitions in assembly code), and sh (due to not bringing in linux/kernel.h to satisfy the taint flag definitions used by the generic bug code).  Hopefully that's the end of the corner cases and I can abstain from ever having to touch this infernal header ever again.  Reported-by: Fengguang Wu <fengguang.wu@intel.com> Tested-by: Fengguang Wu <wfg@linux.intel.com> Acked-by: Randy Dunlap <rdunlap@xenotime.net> Cc: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | trace |  | 4 items |  | Paul E. McKenney | paul.mckenney@linaro.org | 1339040607 |  | rcu: Update RCU_FAST_NO_HZ tracing for lazy callbacks  In the current code, a short dyntick-idle interval (where there is at least one non-lazy callback on the CPU) and a long dyntick-idle interval (where there are only lazy callbacks on the CPU) are traced identically, which can be less than helpful.  This commit therefore emits different event traces in these two cases.  Signed-off-by: Paul E. McKenney <paul.mckenney@linaro.org> Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com> Tested-by: Heiko Carstens <heiko.carstens@de.ibm.com> Tested-by: Pascal Chapperon <pascal.chapperon@wanadoo.fr>
d | crypto |  | 27 items |  | Steffen Klassert | steffen.klassert@secunet.com | 1333021967 |  | crypto: user - Fix lookup of algorithms with IV generator  We lookup algorithms with crypto_alg_mod_lookup() when instantiating via crypto_add_alg(). However, algorithms that are wrapped by an IV genearator (e.g. aead or genicv type algorithms) need special care. The userspace process hangs until it gets a timeout when we use crypto_alg_mod_lookup() to lookup these algorithms. So export the lookup functions for these algorithms and use them in crypto_add_alg().  Signed-off-by: Steffen Klassert <steffen.klassert@secunet.com> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
d | keys |  | 7 items |  | David Howells | dhowells@redhat.com | 1336730216 |  | KEYS: Permit in-place link replacement in keyring list  Make use of the previous patch that makes the garbage collector perform RCU synchronisation before destroying defunct keys.  Key pointers can now be replaced in-place without creating a new keyring payload and replacing the whole thing as the discarded keys will not be destroyed until all currently held RCU read locks are released.  If the keyring payload space needs to be expanded or contracted, then a replacement will still need allocating, and the original will still have to be freed by RCU.  Signed-off-by: David Howells <dhowells@redhat.com>
d | linux |  | 1181 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1341355510 |  | Merge branch 'for-linus' of git://git.kernel.dk/linux-block  Pull block bits from Jens Axboe:  "As vacation is coming up, thought I'd better get rid of my pending   changes in my for-linus branch for this iteration.  It contains:     - Two patches for mtip32xx.  Killing a non-compliant sysfs interface      and moving it to debugfs, where it belongs.     - A few patches from Asias.  Two legit bug fixes, and one killing an      interface that is no longer in use.     - A patch from Jan, making the annoying partition ioctl warning a bit      less annoying, by restricting it to !CAP_SYS_RAWIO only.     - Three bug fixes for drbd from Lars Ellenberg.     - A fix for an old regression for umem, it hasn't really worked since      the plugging scheme was changed in 3.0.     - A few fixes from Tejun.     - A splice fix from Eric Dumazet, fixing an issue with pipe      resizing."  * 'for-linus' of git://git.kernel.dk/linux-block:   scsi: Silence unnecessary warnings about ioctl to partition   block: Drop dead function blk_abort_queue()   block: Mitigate lock unbalance caused by lock switching   block: Avoid missed wakeup in request waitqueue   umem: fix up unplugging   splice: fix racy pipe->buffers uses   drbd: fix null pointer dereference with on-congestion policy when diskless   drbd: fix list corruption by failing but already aborted reads   drbd: fix access of unallocated pages and kernel panic   xen/blkfront: Add WARN to deal with misbehaving backends.   blkcg: drop local variable @q from blkg_destroy()   mtip32xx: Create debugfs entries for troubleshooting   mtip32xx: Remove 'registers' and 'flags' from sysfs   blkcg: fix blkg_alloc() failure path   block: blkcg_policy_cfq shouldn't be used if !CONFIG_CFQ_GROUP_IOSCHED   block: fix return value on cfq_init() failure   mtip32xx: Remove version.h header file inclusion   xen/blkback: Copy id field when doing BLKIF_DISCARD.
d | pcmcia |  | 6 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1312129388 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/brodo/pcmcia-2.6  * git://git.kernel.org/pub/scm/linux/kernel/git/brodo/pcmcia-2.6:   smc91c92_cs.c: fix bogus compiler warning   orinoco_cs: be more careful when matching cards with ID 0x0156:0x0002   hostap_cs: support cards with "Version 01.02" as third product ID   pcmcia: add PCMCIA_DEVICE_MANF_CARD_PROD_ID3   pxa2xx pcmcia - stargate 2 use gpio array.   pcmcia: pxa2xx: remove empty socket_init / socket_resume functions.   drivers:pcmcia:soc_common: make socket_init and socket_suspend optional
d | math-emu |  | 9 items |  | Mikael Pettersson | mikpe@it.uu.se | 1279676714 |  | math-emu: correct test for downshifting fraction in _FP_FROM_INT()  The kernel's math-emu code contains a macro _FP_FROM_INT() which is used to convert an integer to a raw normalized floating-point value. It does this basically in three steps:  1. Compute the exponent from the number of leading zero bits. 2. Downshift large fractions to put the MSB in the right position    for normalized fractions. 3. Upshift small fractions to put the MSB in the right position.  There is an boundary error in step 2, causing a fraction with its MSB exactly one bit above the normalized MSB position to not be downshifted.  This results in a non-normalized raw float, which when packed becomes a massively inaccurate representation for that input.  The impact of this depends on a number of arch-specific factors, but it is known to have broken emulation of FXTOD instructions on UltraSPARC III, which was originally reported as GCC bug 44631 <http://gcc.gnu.org/bugzilla/show_bug.cgi?id=44631>.  Any arch which uses math-emu to emulate conversions from integers to same-size floats may be affected.  The fix is simple: the exponent comparison used to determine if the fraction should be downshifted must be "<=" not "<".  I'm sending a kernel module to test this as a reply to this message. There are also SPARC user-space test cases in the GCC bug entry.  Signed-off-by: Mikael Pettersson <mikpe@it.uu.se> Signed-off-by: David S. Miller <davem@davemloft.net>
d | misc |  | 1 items |  | Igor M. Liplianin | liplianin@netup.ru | 1316800857 |  | [media] altera-stapl: it is time to move out from staging  [mchehab@redhat.com: Fix a merge conflict] Signed-off-by: Igor M. Liplianin <liplianin@netup.ru> Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
d | drm |  | 40 items |  | Dave Airlie | airlied@redhat.com | 1340359495 |  | drm: drop comment about this header being autogenerated.  This comment is well out of date.  Signed-off-by: Dave Airlie <airlied@redhat.com>
d | sound |  | 119 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1340661189 |  | Merge branch 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media  Pull media fixes from Mauro Carvalho Chehab.  Trivial conflict due to new USB HID ID's being added next to each other (Baanto vs Axentia).  * 'v4l_for_linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media: (44 commits)   [media] smia: Fix compile failures   [media]  Fix VIDIOC_DQEVENT docbook entry   [media] s5p-fimc: Fix control creation function   [media] s5p-mfc: Fix checkpatch error in s5p_mfc_shm.h file   [media] s5p-mfc: Fix setting controls   [media] v4l/s5p-mfc: added image size align in VIDIOC_TRY_FMT   [media] v4l/s5p-mfc: corrected encoder v4l control definitions   [media] v4l: mem2mem_testdev: Fix race conditions in driver   [media] s5p-mfc: Bug fix of timestamp/timecode copy mechanism   [media] cxd2820r: Fix an incorrect modulation type bitmask   [media] em28xx: Show a warning if the board does not support remote controls   [media] em28xx: Add remote control support for Terratec's Cinergy HTC Stick HD   [media] USB: Staging: media: lirc: initialize spinlocks before usage   [media] Revert "[media] media: mx2_camera: Fix mbus format handling"   [media] bw-qcam: driver and pixfmt documentation fixes   [media] cx88: fix firmware load on big-endian systems   [media] cx18: support big-endian systems   [media] ivtv: fix support for big-endian systems   [media] tuner-core: return the frequency range of the correct tuner   [media] v4l2-dev.c: fix g_parm regression in determine_valid_ioctls()   ...
d | target |  | 6 items |  | Joern Engel | joern@logfs.org | 1339554785 |  | target: Add TFO->put_session() caller for HW fabric session shutdown  This patch adds an optional target_core_fabric_ops->put_session() caller within the existing target_put_session() code path.  This is required by tcm_qla2xxx code in order to invoke it's own fabric specific session shutdown handler using se_session->sess_kref.  Signed-off-by: Joern Engel <joern@logfs.org> Cc: Roland Dreier <roland@purestorage.com> Cc: Arun Easi <arun.easi@qlogic.com> Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
f | Kbuild | g | 253B |  | James Smart | James.Smart@Emulex.Com | 1244834405 |  | [SCSI] FC Pass Thru support  Attached is the ELS/CT pass-thru patch for the FC Transport. The patch creates a generic framework that lays on top of bsg and the SGIO v4 ioctl in order to pass transaction requests to LLDD's.  The interface supports the following operations:   On an fc_host basis:     Request login to the specified N_Port_ID, creating an fc_rport.     Request logout of the specified N_Port_ID, deleting an fc_rport     Send ELS request to specified N_Port_ID w/o requiring a login, and       wait for ELS response.     Send CT request to specified N_Port_ID and wait for CT response.       Login is required, but LLDD is allowed to manage login and decide       whether it stays in place after the request is satisfied.     Vendor-Unique request. Allows a LLDD-specific request to be passed       to the LLDD, and the passing of a response back to the application.   On an fc_rport basis:     Send ELS request to nport and wait for ELS response.     Send CT request to nport and wait for CT response.  The patch also exports several headers from include/scsi such that they can be available to user-space applications:   include/scsi/scsi.h   include/scsi/scsi_netlink.h   include/scsi/scsi_netlink_fc.h   include/scsi/scsi_bsg_fc.h  For further information, refer to the last RFC: http://marc.info/?l=linux-scsi&m=123436574018579&w=2  Note: Documentation is still spotty and will be added later.  [bharrosh@panasas.com: update for new block API] Signed-off-by: James Smart <james.smart@emulex.com> Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
d | mtd |  | 6 items |  | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1337534759 |  | UBI: amend commentaries WRT dtype  Richard removed the "dtype" hint, but few commentaries were left and this patch removes them. I've also added a better description about the "dtype" field in the ubi-user.h for people who may ever wonder what was that dtype thing about.  This patch also adds an important note that it is better to use value "3" for the "dtype" field.  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com>
d | scsi |  | 49 items |  | Alan Stern | stern@rowland.harvard.edu | 1340427931 |  | SCSI & usb-storage: add try_rc_10_first flag  Several bug reports have been received recently for USB mass-storage devices that don't handle READ CAPACITY(16) commands properly.  They report bogus sizes, in some cases becoming unusable as a result.  The bugs were triggered by commit 09b6b51b0b6c1b9bb61815baf205e4d74c89ff04 (SCSI & usb-storage: add flags for VPD pages and REPORT LUNS), which caused usb-storage to stop overriding the SCSI level reported by devices.  By default, the sd driver will try READ CAPACITY(16) first for any device whose level is above SCSI_SPC_2.  It seems likely that any device large enough to require the use of READ CAPACITY(16) (i.e., 2 TB or more) would be able to handle READ CAPACITY(10) commands properly.  Indeed, I don't know of any devices that don't handle READ CAPACITY(10) properly.  Therefore this patch (as1559) adds a new flag telling the sd driver to try READ CAPACITY(10) before READ CAPACITY(16), and sets this flag for every USB mass-storage device.  If a device really is larger than 2 TB, sd will fall back to READ CAPACITY(16) just as it used to.  This fixes Bugzilla #43391.  Signed-off-by: Alan Stern <stern@rowland.harvard.edu> Acked-by: Hans de Goede <hdegoede@redhat.com> CC: "James E.J. Bottomley" <JBottomley@parallels.com> CC: Matthew Dharm <mdharm-usb@one-eyed-alien.net> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | video |  | 53 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338595071 |  | 
d | acpi |  | 25 items |  | Len Brown | len.brown@intel.com | 1338784151 |  | ACPI: fix acpi_bus.h build warnings when ACPI is not enabled  introduced in Linux-3.5-rc1 by 66886d6f8c9bcdee3d7fce5796dcffd6b4bc0b48 (ACPI: Add stubs for (un)register_acpi_bus_type)  Fix header file warnings when CONFIG_ACPI is not enabled:  include/acpi/acpi_bus.h:443:42: warning: 'struct acpi_bus_type' declared inside parameter list include/acpi/acpi_bus.h:443:42: warning: its scope is only this definition or declaration, which is probably not include/acpi/acpi_bus.h:444:44: warning: 'struct acpi_bus_type' declared inside parameter list  Signed-off-by: Len Brown <len.brown@intel.com>
d | rxrpc |  | 2 items |  | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | memory |  | 1 items |  | Aneesh V | aneesh@ti.com | 1335942246 |  | ddr: add LPDDR2 data from JESD209-2  add LPDDR2 data from the JEDEC spec JESD209-2. The data includes:  1. Addressing information for LPDDR2 memories of different    densities and types(S2/S4) 2. AC timing data.  This data will useful for memory controller device drivers. Right now this is used by the TI EMIF SDRAM controller driver.  Signed-off-by: Aneesh V <aneesh@ti.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Reviewed-by: Benoit Cousson <b-cousson@ti.com> [santosh.shilimkar@ti.com: Moved to drivers/memory from drivers/misc] Signed-off-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Lokesh Vutla <lokeshvutla@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
