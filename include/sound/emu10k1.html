<!DOCTYPE html>
<html><head><title>joekychen/linux » include › sound › emu10k1.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../index.html"></a><h1>emu10k1.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __SOUND_EMU10K1_H</span>
<span class="cp">#define __SOUND_EMU10K1_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> *  Copyright (c) by Jaroslav Kysela &lt;perex@perex.cz&gt;,</span>
<span class="cm"> *		     Creative Labs, Inc.</span>
<span class="cm"> *  Definitions for EMU10K1 (SB Live!) chips</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> *   This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *   it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *   the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *   (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *   This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *   GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *   You should have received a copy of the GNU General Public License</span>
<span class="cm"> *   along with this program; if not, write to the Free Software</span>
<span class="cm"> *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#include &lt;sound/pcm.h&gt;</span>
<span class="cp">#include &lt;sound/rawmidi.h&gt;</span>
<span class="cp">#include &lt;sound/hwdep.h&gt;</span>
<span class="cp">#include &lt;sound/ac97_codec.h&gt;</span>
<span class="cp">#include &lt;sound/util_mem.h&gt;</span>
<span class="cp">#include &lt;sound/pcm-indirect.h&gt;</span>
<span class="cp">#include &lt;sound/timer.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/mutex.h&gt;</span>

<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cm">/* ------------------- DEFINES -------------------- */</span>

<span class="cp">#define EMUPAGESIZE     4096</span>
<span class="cp">#define MAXREQVOICES    8</span>
<span class="cp">#define MAXPAGES        8192</span>
<span class="cp">#define RESERVED        0</span>
<span class="cp">#define NUM_MIDI        16</span>
<span class="cp">#define NUM_G           64              </span><span class="cm">/* use all channels */</span><span class="cp"></span>
<span class="cp">#define NUM_FXSENDS     4</span>
<span class="cp">#define NUM_EFX_PLAYBACK    16</span>

<span class="cm">/* FIXME? - according to the OSS driver the EMU10K1 needs a 29 bit DMA mask */</span>
<span class="cp">#define EMU10K1_DMA_MASK	0x7fffffffUL	</span><span class="cm">/* 31bit */</span><span class="cp"></span>
<span class="cp">#define AUDIGY_DMA_MASK		0x7fffffffUL	</span><span class="cm">/* 31bit FIXME - 32 should work? */</span><span class="cp"></span>
						<span class="cm">/* See ALSA bug #1276 - rlrevell */</span>

<span class="cp">#define TMEMSIZE        256*1024</span>
<span class="cp">#define TMEMSIZEREG     4</span>

<span class="cp">#define IP_TO_CP(ip) ((ip == 0) ? 0 : (((0x00001000uL | (ip &amp; 0x00000FFFL)) &lt;&lt; (((ip &gt;&gt; 12) &amp; 0x000FL) + 4)) &amp; 0xFFFF0000uL))</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>Audigy specify registers are prefixed with 'A_'</p></td><td class="code"><div class="highlight"><pre><span class="cm">/************************************************************************************************/</span>
<span class="cm">/* PCI function 0 registers, address = &lt;val&gt; + PCIBASE0						*/</span>
<span class="cm">/************************************************************************************************/</span>

<span class="cp">#define PTR			0x00		</span><span class="cm">/* Indexed register set pointer register	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: The CHANNELNUM and ADDRESS words can	*/</span>
						<span class="cm">/* be modified independently of each other.	*/</span>
<span class="cp">#define PTR_CHANNELNUM_MASK	0x0000003f	</span><span class="cm">/* For each per-channel register, indicates the	*/</span><span class="cp"></span>
						<span class="cm">/* channel number of the register to be		*/</span>
						<span class="cm">/* accessed.  For non per-channel registers the	*/</span>
						<span class="cm">/* value should be set to zero.			*/</span>
<span class="cp">#define PTR_ADDRESS_MASK	0x07ff0000	</span><span class="cm">/* Register index				*/</span><span class="cp"></span>
<span class="cp">#define A_PTR_ADDRESS_MASK	0x0fff0000</span>

<span class="cp">#define DATA			0x04		</span><span class="cm">/* Indexed register set data register		*/</span><span class="cp"></span>

<span class="cp">#define IPR			0x08		</span><span class="cm">/* Global interrupt pending register		*/</span><span class="cp"></span>
						<span class="cm">/* Clear pending interrupts by writing a 1 to	*/</span>
						<span class="cm">/* the relevant bits and zero to the other bits	*/</span>
<span class="cp">#define IPR_P16V		0x80000000	</span><span class="cm">/* Bit set when the CA0151 P16V chip wishes</span>
<span class="cm">						   to interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_GPIOMSG		0x20000000	</span><span class="cm">/* GPIO message interrupt (RE&#39;d, still not sure </span>
<span class="cm">						   which INTE bits enable it)			*/</span><span class="cp"></span>

<span class="cm">/* The next two interrupts are for the midi port on the Audigy Drive (A_MPU1)			*/</span>
<span class="cp">#define IPR_A_MIDITRANSBUFEMPTY2 0x10000000	</span><span class="cm">/* MIDI UART transmit buffer empty		*/</span><span class="cp"></span>
<span class="cp">#define IPR_A_MIDIRECVBUFEMPTY2	0x08000000	</span><span class="cm">/* MIDI UART receive buffer empty		*/</span><span class="cp"></span>

<span class="cp">#define IPR_SPDIFBUFFULL	0x04000000	</span><span class="cm">/* SPDIF capture related, 10k2 only? (RE)	*/</span><span class="cp"></span>
<span class="cp">#define IPR_SPDIFBUFHALFFULL	0x02000000	</span><span class="cm">/* SPDIF capture related? (RE)			*/</span><span class="cp"></span>

<span class="cp">#define IPR_SAMPLERATETRACKER	0x01000000	</span><span class="cm">/* Sample rate tracker lock status change	*/</span><span class="cp"></span>
<span class="cp">#define IPR_FXDSP		0x00800000	</span><span class="cm">/* Enable FX DSP interrupts			*/</span><span class="cp"></span>
<span class="cp">#define IPR_FORCEINT		0x00400000	</span><span class="cm">/* Force Sound Blaster interrupt		*/</span><span class="cp"></span>
<span class="cp">#define IPR_PCIERROR		0x00200000	</span><span class="cm">/* PCI bus error				*/</span><span class="cp"></span>
<span class="cp">#define IPR_VOLINCR		0x00100000	</span><span class="cm">/* Volume increment button pressed		*/</span><span class="cp"></span>
<span class="cp">#define IPR_VOLDECR		0x00080000	</span><span class="cm">/* Volume decrement button pressed		*/</span><span class="cp"></span>
<span class="cp">#define IPR_MUTE		0x00040000	</span><span class="cm">/* Mute button pressed				*/</span><span class="cp"></span>
<span class="cp">#define IPR_MICBUFFULL		0x00020000	</span><span class="cm">/* Microphone buffer full			*/</span><span class="cp"></span>
<span class="cp">#define IPR_MICBUFHALFFULL	0x00010000	</span><span class="cm">/* Microphone buffer half full			*/</span><span class="cp"></span>
<span class="cp">#define IPR_ADCBUFFULL		0x00008000	</span><span class="cm">/* ADC buffer full				*/</span><span class="cp"></span>
<span class="cp">#define IPR_ADCBUFHALFFULL	0x00004000	</span><span class="cm">/* ADC buffer half full				*/</span><span class="cp"></span>
<span class="cp">#define IPR_EFXBUFFULL		0x00002000	</span><span class="cm">/* Effects buffer full				*/</span><span class="cp"></span>
<span class="cp">#define IPR_EFXBUFHALFFULL	0x00001000	</span><span class="cm">/* Effects buffer half full			*/</span><span class="cp"></span>
<span class="cp">#define IPR_GPSPDIFSTATUSCHANGE	0x00000800	</span><span class="cm">/* GPSPDIF channel status change		*/</span><span class="cp"></span>
<span class="cp">#define IPR_CDROMSTATUSCHANGE	0x00000400	</span><span class="cm">/* CD-ROM channel status change			*/</span><span class="cp"></span>
<span class="cp">#define IPR_INTERVALTIMER	0x00000200	</span><span class="cm">/* Interval timer terminal count		*/</span><span class="cp"></span>
<span class="cp">#define IPR_MIDITRANSBUFEMPTY	0x00000100	</span><span class="cm">/* MIDI UART transmit buffer empty		*/</span><span class="cp"></span>
<span class="cp">#define IPR_MIDIRECVBUFEMPTY	0x00000080	</span><span class="cm">/* MIDI UART receive buffer empty		*/</span><span class="cp"></span>
<span class="cp">#define IPR_CHANNELLOOP		0x00000040	</span><span class="cm">/* Channel (half) loop interrupt(s) pending	*/</span><span class="cp"></span>
<span class="cp">#define IPR_CHANNELNUMBERMASK	0x0000003f	</span><span class="cm">/* When IPR_CHANNELLOOP is set, indicates the	*/</span><span class="cp"></span>
						<span class="cm">/* highest set channel in CLIPL, CLIPH, HLIPL,  */</span>
						<span class="cm">/* or HLIPH.  When IP is written with CL set,	*/</span>
						<span class="cm">/* the bit in H/CLIPL or H/CLIPH corresponding	*/</span>
						<span class="cm">/* to the CIN value written will be cleared.	*/</span>

<span class="cp">#define INTE			0x0c		</span><span class="cm">/* Interrupt enable register			*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALSB_MASK	0xc0000000	</span><span class="cm">/* Virtual Soundblaster I/O port capture	*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALSB_220	0x00000000	</span><span class="cm">/* Capture at I/O base address 0x220-0x22f	*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALSB_240	0x40000000	</span><span class="cm">/* Capture at I/O base address 0x240		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALSB_260	0x80000000	</span><span class="cm">/* Capture at I/O base address 0x260		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALSB_280	0xc0000000	</span><span class="cm">/* Capture at I/O base address 0x280		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALMPU_MASK	0x30000000	</span><span class="cm">/* Virtual MPU I/O port capture			*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALMPU_300	0x00000000	</span><span class="cm">/* Capture at I/O base address 0x300-0x301	*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALMPU_310	0x10000000	</span><span class="cm">/* Capture at I/O base address 0x310		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALMPU_320	0x20000000	</span><span class="cm">/* Capture at I/O base address 0x320		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VIRTUALMPU_330	0x30000000	</span><span class="cm">/* Capture at I/O base address 0x330		*/</span><span class="cp"></span>
<span class="cp">#define INTE_MASTERDMAENABLE	0x08000000	</span><span class="cm">/* Master DMA emulation at 0x000-0x00f		*/</span><span class="cp"></span>
<span class="cp">#define INTE_SLAVEDMAENABLE	0x04000000	</span><span class="cm">/* Slave DMA emulation at 0x0c0-0x0df		*/</span><span class="cp"></span>
<span class="cp">#define INTE_MASTERPICENABLE	0x02000000	</span><span class="cm">/* Master PIC emulation at 0x020-0x021		*/</span><span class="cp"></span>
<span class="cp">#define INTE_SLAVEPICENABLE	0x01000000	</span><span class="cm">/* Slave PIC emulation at 0x0a0-0x0a1		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VSBENABLE		0x00800000	</span><span class="cm">/* Enable virtual Soundblaster			*/</span><span class="cp"></span>
<span class="cp">#define INTE_ADLIBENABLE	0x00400000	</span><span class="cm">/* Enable AdLib emulation at 0x388-0x38b	*/</span><span class="cp"></span>
<span class="cp">#define INTE_MPUENABLE		0x00200000	</span><span class="cm">/* Enable virtual MPU				*/</span><span class="cp"></span>
<span class="cp">#define INTE_FORCEINT		0x00100000	</span><span class="cm">/* Continuously assert INTAN			*/</span><span class="cp"></span>

<span class="cp">#define INTE_MRHANDENABLE	0x00080000	</span><span class="cm">/* Enable the &quot;Mr. Hand&quot; logic			*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: There is no reason to use this under	*/</span>
						<span class="cm">/* Linux, and it will cause odd hardware 	*/</span>
						<span class="cm">/* behavior and possibly random segfaults and	*/</span>
						<span class="cm">/* lockups if enabled.				*/</span>

<span class="cm">/* The next two interrupts are for the midi port on the Audigy Drive (A_MPU1)			*/</span>
<span class="cp">#define INTE_A_MIDITXENABLE2	0x00020000	</span><span class="cm">/* Enable MIDI transmit-buffer-empty interrupts	*/</span><span class="cp"></span>
<span class="cp">#define INTE_A_MIDIRXENABLE2	0x00010000	</span><span class="cm">/* Enable MIDI receive-buffer-empty interrupts	*/</span><span class="cp"></span>


<span class="cp">#define INTE_SAMPLERATETRACKER	0x00002000	</span><span class="cm">/* Enable sample rate tracker interrupts	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: This bit must always be enabled       	*/</span>
<span class="cp">#define INTE_FXDSPENABLE	0x00001000	</span><span class="cm">/* Enable FX DSP interrupts			*/</span><span class="cp"></span>
<span class="cp">#define INTE_PCIERRORENABLE	0x00000800	</span><span class="cm">/* Enable PCI bus error interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_VOLINCRENABLE	0x00000400	</span><span class="cm">/* Enable volume increment button interrupts	*/</span><span class="cp"></span>
<span class="cp">#define INTE_VOLDECRENABLE	0x00000200	</span><span class="cm">/* Enable volume decrement button interrupts	*/</span><span class="cp"></span>
<span class="cp">#define INTE_MUTEENABLE		0x00000100	</span><span class="cm">/* Enable mute button interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_MICBUFENABLE	0x00000080	</span><span class="cm">/* Enable microphone buffer interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_ADCBUFENABLE	0x00000040	</span><span class="cm">/* Enable ADC buffer interrupts			*/</span><span class="cp"></span>
<span class="cp">#define INTE_EFXBUFENABLE	0x00000020	</span><span class="cm">/* Enable Effects buffer interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_GPSPDIFENABLE	0x00000010	</span><span class="cm">/* Enable GPSPDIF status interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_CDSPDIFENABLE	0x00000008	</span><span class="cm">/* Enable CDSPDIF status interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_INTERVALTIMERENB	0x00000004	</span><span class="cm">/* Enable interval timer interrupts		*/</span><span class="cp"></span>
<span class="cp">#define INTE_MIDITXENABLE	0x00000002	</span><span class="cm">/* Enable MIDI transmit-buffer-empty interrupts	*/</span><span class="cp"></span>
<span class="cp">#define INTE_MIDIRXENABLE	0x00000001	</span><span class="cm">/* Enable MIDI receive-buffer-empty interrupts	*/</span><span class="cp"></span>

<span class="cp">#define WC			0x10		</span><span class="cm">/* Wall Clock register				*/</span><span class="cp"></span>
<span class="cp">#define WC_SAMPLECOUNTER_MASK	0x03FFFFC0	</span><span class="cm">/* Sample periods elapsed since reset		*/</span><span class="cp"></span>
<span class="cp">#define WC_SAMPLECOUNTER	0x14060010</span>
<span class="cp">#define WC_CURRENTCHANNEL	0x0000003F	</span><span class="cm">/* Channel [0..63] currently being serviced	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: Each channel takes 1/64th of a sample	*/</span>
						<span class="cm">/* period to be serviced.			*/</span>

<span class="cp">#define HCFG			0x14		</span><span class="cm">/* Hardware config register			*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: There is no reason to use the legacy	*/</span>
						<span class="cm">/* SoundBlaster emulation stuff described below	*/</span>
						<span class="cm">/* under Linux, and all kinds of weird hardware	*/</span>
						<span class="cm">/* behavior can result if you try.  Don&#39;t.	*/</span>
<span class="cp">#define HCFG_LEGACYFUNC_MASK	0xe0000000	</span><span class="cm">/* Legacy function number 			*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_MPU	0x00000000	</span><span class="cm">/* Legacy MPU	 				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_SB	0x40000000	</span><span class="cm">/* Legacy SB					*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_AD	0x60000000	</span><span class="cm">/* Legacy AD					*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_MPIC	0x80000000	</span><span class="cm">/* Legacy MPIC					*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_MDMA	0xa0000000	</span><span class="cm">/* Legacy MDMA					*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_SPCI	0xc0000000	</span><span class="cm">/* Legacy SPCI					*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYFUNC_SDMA	0xe0000000	</span><span class="cm">/* Legacy SDMA					*/</span><span class="cp"></span>
<span class="cp">#define HCFG_IOCAPTUREADDR	0x1f000000	</span><span class="cm">/* The 4 LSBs of the captured I/O address.	*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYWRITE	0x00800000	</span><span class="cm">/* 1 = write, 0 = read 				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYWORD		0x00400000	</span><span class="cm">/* 1 = word, 0 = byte 				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_LEGACYINT		0x00200000	</span><span class="cm">/* 1 = legacy event captured. Write 1 to clear.	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: The rest of the bits in this register	*/</span>
						<span class="cm">/* _are_ relevant under Linux.			*/</span>
<span class="cp">#define HCFG_PUSH_BUTTON_ENABLE 0x00100000	</span><span class="cm">/* Enables Volume Inc/Dec and Mute functions    */</span><span class="cp"></span>
<span class="cp">#define HCFG_BAUD_RATE		0x00080000	</span><span class="cm">/* 0 = 48kHz, 1 = 44.1kHz			*/</span><span class="cp"></span>
<span class="cp">#define HCFG_EXPANDED_MEM	0x00040000	</span><span class="cm">/* 1 = any 16M of 4G addr, 0 = 32M of 2G addr	*/</span><span class="cp"></span>
<span class="cp">#define HCFG_CODECFORMAT_MASK	0x00030000	</span><span class="cm">/* CODEC format					*/</span><span class="cp"></span>

<span class="cm">/* Specific to Alice2, CA0102 */</span>
<span class="cp">#define HCFG_CODECFORMAT_AC97_1	0x00000000	</span><span class="cm">/* AC97 CODEC format -- Ver 1.03		*/</span><span class="cp"></span>
<span class="cp">#define HCFG_CODECFORMAT_AC97_2	0x00010000	</span><span class="cm">/* AC97 CODEC format -- Ver 2.1			*/</span><span class="cp"></span>
<span class="cp">#define HCFG_AUTOMUTE_ASYNC	0x00008000	</span><span class="cm">/* When set, the async sample rate convertors	*/</span><span class="cp"></span>
						<span class="cm">/* will automatically mute their output when	*/</span>
						<span class="cm">/* they are not rate-locked to the external	*/</span>
						<span class="cm">/* async audio source  				*/</span>
<span class="cp">#define HCFG_AUTOMUTE_SPDIF	0x00004000	</span><span class="cm">/* When set, the async sample rate convertors	*/</span><span class="cp"></span>
						<span class="cm">/* will automatically mute their output when	*/</span>
						<span class="cm">/* the SPDIF V-bit indicates invalid audio	*/</span>
<span class="cp">#define HCFG_EMU32_SLAVE	0x00002000	</span><span class="cm">/* 0 = Master, 1 = Slave. Slave for EMU1010	*/</span><span class="cp"></span>
<span class="cp">#define HCFG_SLOW_RAMP		0x00001000	</span><span class="cm">/* Increases Send Smoothing time constant	*/</span><span class="cp"></span>
<span class="cm">/* 0x00000800 not used on Alice2 */</span>
<span class="cp">#define HCFG_PHASE_TRACK_MASK	0x00000700	</span><span class="cm">/* When set, forces corresponding input to	*/</span><span class="cp"></span>
						<span class="cm">/* phase track the previous input.		*/</span>
						<span class="cm">/* I2S0 can phase track the last S/PDIF input	*/</span>
<span class="cp">#define HCFG_I2S_ASRC_ENABLE	0x00000070	</span><span class="cm">/* When set, enables asynchronous sample rate   */</span><span class="cp"></span>
						<span class="cm">/* conversion for the corresponding		*/</span>
 						<span class="cm">/* I2S format input				*/</span>
<span class="cm">/* Rest of HCFG 0x0000000f same as below. LOCKSOUNDCACHE etc.  */</span>



<span class="cm">/* Older chips */</span>
<span class="cp">#define HCFG_CODECFORMAT_AC97	0x00000000	</span><span class="cm">/* AC97 CODEC format -- Primary Output		*/</span><span class="cp"></span>
<span class="cp">#define HCFG_CODECFORMAT_I2S	0x00010000	</span><span class="cm">/* I2S CODEC format -- Secondary (Rear) Output	*/</span><span class="cp"></span>
<span class="cp">#define HCFG_GPINPUT0		0x00004000	</span><span class="cm">/* External pin112				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_GPINPUT1		0x00002000	</span><span class="cm">/* External pin110				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_GPOUTPUT_MASK	0x00001c00	</span><span class="cm">/* External pins which may be controlled	*/</span><span class="cp"></span>
<span class="cp">#define HCFG_GPOUT0		0x00001000	</span><span class="cm">/* External pin? (spdif enable on 5.1)		*/</span><span class="cp"></span>
<span class="cp">#define HCFG_GPOUT1		0x00000800	</span><span class="cm">/* External pin? (IR)				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_GPOUT2		0x00000400	</span><span class="cm">/* External pin? (IR)				*/</span><span class="cp"></span>
<span class="cp">#define HCFG_JOYENABLE      	0x00000200	</span><span class="cm">/* Internal joystick enable    			*/</span><span class="cp"></span>
<span class="cp">#define HCFG_PHASETRACKENABLE	0x00000100	</span><span class="cm">/* Phase tracking enable			*/</span><span class="cp"></span>
						<span class="cm">/* 1 = Force all 3 async digital inputs to use	*/</span>
						<span class="cm">/* the same async sample rate tracker (ZVIDEO)	*/</span>
<span class="cp">#define HCFG_AC3ENABLE_MASK	0x000000e0	</span><span class="cm">/* AC3 async input control - Not implemented	*/</span><span class="cp"></span>
<span class="cp">#define HCFG_AC3ENABLE_ZVIDEO	0x00000080	</span><span class="cm">/* Channels 0 and 1 replace ZVIDEO		*/</span><span class="cp"></span>
<span class="cp">#define HCFG_AC3ENABLE_CDSPDIF	0x00000040	</span><span class="cm">/* Channels 0 and 1 replace CDSPDIF		*/</span><span class="cp"></span>
<span class="cp">#define HCFG_AC3ENABLE_GPSPDIF  0x00000020      </span><span class="cm">/* Channels 0 and 1 replace GPSPDIF             */</span><span class="cp"></span>
<span class="cp">#define HCFG_AUTOMUTE		0x00000010	</span><span class="cm">/* When set, the async sample rate convertors	*/</span><span class="cp"></span>
						<span class="cm">/* will automatically mute their output when	*/</span>
						<span class="cm">/* they are not rate-locked to the external	*/</span>
						<span class="cm">/* async audio source  				*/</span>
<span class="cp">#define HCFG_LOCKSOUNDCACHE	0x00000008	</span><span class="cm">/* 1 = Cancel bustmaster accesses to soundcache */</span><span class="cp"></span>
						<span class="cm">/* NOTE: This should generally never be used.  	*/</span>
<span class="cp">#define HCFG_LOCKTANKCACHE_MASK	0x00000004	</span><span class="cm">/* 1 = Cancel bustmaster accesses to tankcache	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: This should generally never be used.  	*/</span>
<span class="cp">#define HCFG_LOCKTANKCACHE	0x01020014</span>
<span class="cp">#define HCFG_MUTEBUTTONENABLE	0x00000002	</span><span class="cm">/* 1 = Master mute button sets AUDIOENABLE = 0.	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: This is a &#39;cheap&#39; way to implement a	*/</span>
						<span class="cm">/* master mute function on the mute button, and	*/</span>
						<span class="cm">/* in general should not be used unless a more	*/</span>
						<span class="cm">/* sophisticated master mute function has not	*/</span>
						<span class="cm">/* been written.       				*/</span>
<span class="cp">#define HCFG_AUDIOENABLE	0x00000001	</span><span class="cm">/* 0 = CODECs transmit zero-valued samples	*/</span><span class="cp"></span>
						<span class="cm">/* Should be set to 1 when the EMU10K1 is	*/</span>
						<span class="cm">/* completely initialized.			*/</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>For Audigy, MPU port move to 0x70-0x74 ptr register</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define MUDATA			0x18		</span><span class="cm">/* MPU401 data register (8 bits)       		*/</span><span class="cp"></span>

<span class="cp">#define MUCMD			0x19		</span><span class="cm">/* MPU401 command register (8 bits)    		*/</span><span class="cp"></span>
<span class="cp">#define MUCMD_RESET		0xff		</span><span class="cm">/* RESET command				*/</span><span class="cp"></span>
<span class="cp">#define MUCMD_ENTERUARTMODE	0x3f		</span><span class="cm">/* Enter_UART_mode command			*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: All other commands are ignored		*/</span>

<span class="cp">#define MUSTAT			MUCMD		</span><span class="cm">/* MPU401 status register (8 bits)     		*/</span><span class="cp"></span>
<span class="cp">#define MUSTAT_IRDYN		0x80		</span><span class="cm">/* 0 = MIDI data or command ACK			*/</span><span class="cp"></span>
<span class="cp">#define MUSTAT_ORDYN		0x40		</span><span class="cm">/* 0 = MUDATA can accept a command or data	*/</span><span class="cp"></span>

<span class="cp">#define A_IOCFG			0x18		</span><span class="cm">/* GPIO on Audigy card (16bits)			*/</span><span class="cp"></span>
<span class="cp">#define A_GPINPUT_MASK		0xff00</span>
<span class="cp">#define A_GPOUTPUT_MASK		0x00ff</span></pre></div></td></tr>


<tr id="section-4"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-4">&#182;</a></div><p>Audigy output/GPIO stuff taken from the kX drivers</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define A_IOCFG_GPOUT0		0x0044		</span><span class="cm">/* analog/digital				*/</span><span class="cp"></span>
<span class="cp">#define A_IOCFG_DISABLE_ANALOG	0x0040		</span><span class="cm">/* = &#39;enable&#39; for Audigy2 (chiprev=4)		*/</span><span class="cp"></span>
<span class="cp">#define A_IOCFG_ENABLE_DIGITAL	0x0004</span>
<span class="cp">#define A_IOCFG_ENABLE_DIGITAL_AUDIGY4	0x0080</span>
<span class="cp">#define A_IOCFG_UNKNOWN_20      0x0020</span>
<span class="cp">#define A_IOCFG_DISABLE_AC97_FRONT      0x0080  </span><span class="cm">/* turn off ac97 front -&gt; front (10k2.1)	*/</span><span class="cp"></span>
<span class="cp">#define A_IOCFG_GPOUT1		0x0002		</span><span class="cm">/* IR? drive&#39;s internal bypass (?)		*/</span><span class="cp"></span>
<span class="cp">#define A_IOCFG_GPOUT2		0x0001		</span><span class="cm">/* IR */</span><span class="cp"></span>
<span class="cp">#define A_IOCFG_MULTIPURPOSE_JACK	0x2000  </span><span class="cm">/* center+lfe+rear_center (a2/a2ex)		*/</span><span class="cp"></span>
                                                <span class="cm">/* + digital for generic 10k2			*/</span>
<span class="cp">#define A_IOCFG_DIGITAL_JACK    0x1000          </span><span class="cm">/* digital for a2 platinum			*/</span><span class="cp"></span>
<span class="cp">#define A_IOCFG_FRONT_JACK      0x4000</span>
<span class="cp">#define A_IOCFG_REAR_JACK       0x8000</span>
<span class="cp">#define A_IOCFG_PHONES_JACK     0x0100          </span><span class="cm">/* LiveDrive					*/</span><span class="cp"></span>

<span class="cm">/* outputs:</span>
<span class="cm"> *	for audigy2 platinum:	0xa00</span>
<span class="cm"> *	for a2 platinum ex:	0x1c00</span>
<span class="cm"> *	for a1 platinum:	0x0</span>
<span class="cm"> */</span>

<span class="cp">#define TIMER			0x1a		</span><span class="cm">/* Timer terminal count register		*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: After the rate is changed, a maximum	*/</span>
						<span class="cm">/* of 1024 sample periods should be allowed	*/</span>
						<span class="cm">/* before the new rate is guaranteed accurate.	*/</span>
<span class="cp">#define TIMER_RATE_MASK		0x000003ff	</span><span class="cm">/* Timer interrupt rate in sample periods	*/</span><span class="cp"></span>
						<span class="cm">/* 0 == 1024 periods, [1..4] are not useful	*/</span>
<span class="cp">#define TIMER_RATE		0x0a00001a</span>

<span class="cp">#define AC97DATA		0x1c		</span><span class="cm">/* AC97 register set data register (16 bit)	*/</span><span class="cp"></span>

<span class="cp">#define AC97ADDRESS		0x1e		</span><span class="cm">/* AC97 register set address register (8 bit)	*/</span><span class="cp"></span>
<span class="cp">#define AC97ADDRESS_READY	0x80		</span><span class="cm">/* Read-only bit, reflects CODEC READY signal	*/</span><span class="cp"></span>
<span class="cp">#define AC97ADDRESS_ADDRESS	0x7f		</span><span class="cm">/* Address of indexed AC97 register		*/</span><span class="cp"></span>

<span class="cm">/* Available on the Audigy 2 and Audigy 4 only. This is the P16V chip. */</span>
<span class="cp">#define PTR2			0x20		</span><span class="cm">/* Indexed register set pointer register	*/</span><span class="cp"></span>
<span class="cp">#define DATA2			0x24		</span><span class="cm">/* Indexed register set data register		*/</span><span class="cp"></span>
<span class="cp">#define IPR2			0x28		</span><span class="cm">/* P16V interrupt pending register		*/</span><span class="cp"></span>
<span class="cp">#define IPR2_PLAYBACK_CH_0_LOOP      0x00001000 </span><span class="cm">/* Playback Channel 0 loop                               */</span><span class="cp"></span>
<span class="cp">#define IPR2_PLAYBACK_CH_0_HALF_LOOP 0x00000100 </span><span class="cm">/* Playback Channel 0 half loop                          */</span><span class="cp"></span>
<span class="cp">#define IPR2_CAPTURE_CH_0_LOOP       0x00100000 </span><span class="cm">/* Capture Channel 0 loop                               */</span><span class="cp"></span>
<span class="cp">#define IPR2_CAPTURE_CH_0_HALF_LOOP  0x00010000 </span><span class="cm">/* Capture Channel 0 half loop                          */</span><span class="cp"></span>
						<span class="cm">/* 0x00000100 Playback. Only in once per period.</span>
<span class="cm">						 * 0x00110000 Capture. Int on half buffer.</span>
<span class="cm">						 */</span>
<span class="cp">#define INTE2			0x2c		</span><span class="cm">/* P16V Interrupt enable register. 	*/</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_0_LOOP      0x00001000 </span><span class="cm">/* Playback Channel 0 loop                               */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_0_HALF_LOOP 0x00000100 </span><span class="cm">/* Playback Channel 0 half loop                          */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_1_LOOP      0x00002000 </span><span class="cm">/* Playback Channel 1 loop                               */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_1_HALF_LOOP 0x00000200 </span><span class="cm">/* Playback Channel 1 half loop                          */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_2_LOOP      0x00004000 </span><span class="cm">/* Playback Channel 2 loop                               */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_2_HALF_LOOP 0x00000400 </span><span class="cm">/* Playback Channel 2 half loop                          */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_3_LOOP      0x00008000 </span><span class="cm">/* Playback Channel 3 loop                               */</span><span class="cp"></span>
<span class="cp">#define INTE2_PLAYBACK_CH_3_HALF_LOOP 0x00000800 </span><span class="cm">/* Playback Channel 3 half loop                          */</span><span class="cp"></span>
<span class="cp">#define INTE2_CAPTURE_CH_0_LOOP       0x00100000 </span><span class="cm">/* Capture Channel 0 loop                               */</span><span class="cp"></span>
<span class="cp">#define INTE2_CAPTURE_CH_0_HALF_LOOP  0x00010000 </span><span class="cm">/* Caputre Channel 0 half loop                          */</span><span class="cp"></span>
<span class="cp">#define HCFG2			0x34		</span><span class="cm">/* Defaults: 0, win2000 sets it to 00004201 */</span><span class="cp"></span>
						<span class="cm">/* 0x00000000 2-channel output. */</span>
						<span class="cm">/* 0x00000200 8-channel output. */</span>
						<span class="cm">/* 0x00000004 pauses stream/irq fail. */</span>
						<span class="cm">/* Rest of bits no nothing to sound output */</span>
						<span class="cm">/* bit 0: Enable P16V audio.</span>
<span class="cm">						 * bit 1: Lock P16V record memory cache.</span>
<span class="cm">						 * bit 2: Lock P16V playback memory cache.</span>
<span class="cm">						 * bit 3: Dummy record insert zero samples.</span>
<span class="cm">						 * bit 8: Record 8-channel in phase.</span>
<span class="cm">						 * bit 9: Playback 8-channel in phase.</span>
<span class="cm">						 * bit 11-12: Playback mixer attenuation: 0=0dB, 1=-6dB, 2=-12dB, 3=Mute.</span>
<span class="cm">						 * bit 13: Playback mixer enable.</span>
<span class="cm">						 * bit 14: Route SRC48 mixer output to fx engine.</span>
<span class="cm">						 * bit 15: Enable IEEE 1394 chip.</span>
<span class="cm">						 */</span>
<span class="cp">#define IPR3			0x38		</span><span class="cm">/* Cdif interrupt pending register		*/</span><span class="cp"></span>
<span class="cp">#define INTE3			0x3c		</span><span class="cm">/* Cdif interrupt enable register. 	*/</span><span class="cp"></span>
<span class="cm">/************************************************************************************************/</span>
<span class="cm">/* PCI function 1 registers, address = &lt;val&gt; + PCIBASE1						*/</span>
<span class="cm">/************************************************************************************************/</span>

<span class="cp">#define JOYSTICK1		0x00		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK2		0x01		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK3		0x02		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK4		0x03		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK5		0x04		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK6		0x05		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK7		0x06		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK8		0x07		</span><span class="cm">/* Analog joystick port register		*/</span><span class="cp"></span>

<span class="cm">/* When writing, any write causes JOYSTICK_COMPARATOR output enable to be pulsed on write.	*/</span>
<span class="cm">/* When reading, use these bitfields: */</span>
<span class="cp">#define JOYSTICK_BUTTONS	0x0f		</span><span class="cm">/* Joystick button data				*/</span><span class="cp"></span>
<span class="cp">#define JOYSTICK_COMPARATOR	0xf0		</span><span class="cm">/* Joystick comparator data			*/</span><span class="cp"></span>


<span class="cm">/********************************************************************************************************/</span>
<span class="cm">/* Emu10k1 pointer-offset register set, accessed through the PTR and DATA registers			*/</span>
<span class="cm">/********************************************************************************************************/</span>

<span class="cp">#define CPF			0x00		</span><span class="cm">/* Current pitch and fraction register			*/</span><span class="cp"></span>
<span class="cp">#define CPF_CURRENTPITCH_MASK	0xffff0000	</span><span class="cm">/* Current pitch (linear, 0x4000 == unity pitch shift) 	*/</span><span class="cp"></span>
<span class="cp">#define CPF_CURRENTPITCH	0x10100000</span>
<span class="cp">#define CPF_STEREO_MASK		0x00008000	</span><span class="cm">/* 1 = Even channel interleave, odd channel locked	*/</span><span class="cp"></span>
<span class="cp">#define CPF_STOP_MASK		0x00004000	</span><span class="cm">/* 1 = Current pitch forced to 0			*/</span><span class="cp"></span>
<span class="cp">#define CPF_FRACADDRESS_MASK	0x00003fff	</span><span class="cm">/* Linear fractional address of the current channel	*/</span><span class="cp"></span>

<span class="cp">#define PTRX			0x01		</span><span class="cm">/* Pitch target and send A/B amounts register		*/</span><span class="cp"></span>
<span class="cp">#define PTRX_PITCHTARGET_MASK	0xffff0000	</span><span class="cm">/* Pitch target of specified channel			*/</span><span class="cp"></span>
<span class="cp">#define PTRX_PITCHTARGET	0x10100001</span>
<span class="cp">#define PTRX_FXSENDAMOUNT_A_MASK 0x0000ff00	</span><span class="cm">/* Linear level of channel output sent to FX send bus A	*/</span><span class="cp"></span>
<span class="cp">#define PTRX_FXSENDAMOUNT_A	0x08080001</span>
<span class="cp">#define PTRX_FXSENDAMOUNT_B_MASK 0x000000ff	</span><span class="cm">/* Linear level of channel output sent to FX send bus B	*/</span><span class="cp"></span>
<span class="cp">#define PTRX_FXSENDAMOUNT_B	0x08000001</span>

<span class="cp">#define CVCF			0x02		</span><span class="cm">/* Current volume and filter cutoff register		*/</span><span class="cp"></span>
<span class="cp">#define CVCF_CURRENTVOL_MASK	0xffff0000	</span><span class="cm">/* Current linear volume of specified channel		*/</span><span class="cp"></span>
<span class="cp">#define CVCF_CURRENTVOL		0x10100002</span>
<span class="cp">#define CVCF_CURRENTFILTER_MASK	0x0000ffff	</span><span class="cm">/* Current filter cutoff frequency of specified channel	*/</span><span class="cp"></span>
<span class="cp">#define CVCF_CURRENTFILTER	0x10000002</span>

<span class="cp">#define VTFT			0x03		</span><span class="cm">/* Volume target and filter cutoff target register	*/</span><span class="cp"></span>
<span class="cp">#define VTFT_VOLUMETARGET_MASK	0xffff0000	</span><span class="cm">/* Volume target of specified channel			*/</span><span class="cp"></span>
<span class="cp">#define VTFT_VOLUMETARGET	0x10100003</span>
<span class="cp">#define VTFT_FILTERTARGET_MASK	0x0000ffff	</span><span class="cm">/* Filter cutoff target of specified channel		*/</span><span class="cp"></span>
<span class="cp">#define VTFT_FILTERTARGET	0x10000003</span>

<span class="cp">#define Z1			0x05		</span><span class="cm">/* Filter delay memory 1 register			*/</span><span class="cp"></span>

<span class="cp">#define Z2			0x04		</span><span class="cm">/* Filter delay memory 2 register			*/</span><span class="cp"></span>

<span class="cp">#define PSST			0x06		</span><span class="cm">/* Send C amount and loop start address register	*/</span><span class="cp"></span>
<span class="cp">#define PSST_FXSENDAMOUNT_C_MASK 0xff000000	</span><span class="cm">/* Linear level of channel output sent to FX send bus C	*/</span><span class="cp"></span>

<span class="cp">#define PSST_FXSENDAMOUNT_C	0x08180006</span>

<span class="cp">#define PSST_LOOPSTARTADDR_MASK	0x00ffffff	</span><span class="cm">/* Loop start address of the specified channel		*/</span><span class="cp"></span>
<span class="cp">#define PSST_LOOPSTARTADDR	0x18000006</span>

<span class="cp">#define DSL			0x07		</span><span class="cm">/* Send D amount and loop start address register	*/</span><span class="cp"></span>
<span class="cp">#define DSL_FXSENDAMOUNT_D_MASK	0xff000000	</span><span class="cm">/* Linear level of channel output sent to FX send bus D	*/</span><span class="cp"></span>

<span class="cp">#define DSL_FXSENDAMOUNT_D	0x08180007</span>

<span class="cp">#define DSL_LOOPENDADDR_MASK	0x00ffffff	</span><span class="cm">/* Loop end address of the specified channel		*/</span><span class="cp"></span>
<span class="cp">#define DSL_LOOPENDADDR		0x18000007</span>

<span class="cp">#define CCCA			0x08		</span><span class="cm">/* Filter Q, interp. ROM, byte size, cur. addr register */</span><span class="cp"></span>
<span class="cp">#define CCCA_RESONANCE		0xf0000000	</span><span class="cm">/* Lowpass filter resonance (Q) height			*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROMMASK	0x0e000000	</span><span class="cm">/* Selects passband of interpolation ROM		*/</span><span class="cp"></span>
						<span class="cm">/* 1 == full band, 7 == lowpass				*/</span>
						<span class="cm">/* ROM 0 is used when pitch shifting downward or less	*/</span>
						<span class="cm">/* then 3 semitones upward.  Increasingly higher ROM	*/</span>
						<span class="cm">/* numbers are used, typically in steps of 3 semitones,	*/</span>
						<span class="cm">/* as upward pitch shifting is performed.		*/</span>
<span class="cp">#define CCCA_INTERPROM_0	0x00000000	</span><span class="cm">/* Select interpolation ROM 0				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_1	0x02000000	</span><span class="cm">/* Select interpolation ROM 1				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_2	0x04000000	</span><span class="cm">/* Select interpolation ROM 2				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_3	0x06000000	</span><span class="cm">/* Select interpolation ROM 3				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_4	0x08000000	</span><span class="cm">/* Select interpolation ROM 4				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_5	0x0a000000	</span><span class="cm">/* Select interpolation ROM 5				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_6	0x0c000000	</span><span class="cm">/* Select interpolation ROM 6				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_INTERPROM_7	0x0e000000	</span><span class="cm">/* Select interpolation ROM 7				*/</span><span class="cp"></span>
<span class="cp">#define CCCA_8BITSELECT		0x01000000	</span><span class="cm">/* 1 = Sound memory for this channel uses 8-bit samples	*/</span><span class="cp"></span>
<span class="cp">#define CCCA_CURRADDR_MASK	0x00ffffff	</span><span class="cm">/* Current address of the selected channel		*/</span><span class="cp"></span>
<span class="cp">#define CCCA_CURRADDR		0x18000008</span>

<span class="cm">/* undefine CCR to avoid conflict with the definition for SH */</span>
<span class="cp">#undef CCR</span>
<span class="cp">#define CCR			0x09		</span><span class="cm">/* Cache control register				*/</span><span class="cp"></span>
<span class="cp">#define CCR_CACHEINVALIDSIZE	0x07190009</span>
<span class="cp">#define CCR_CACHEINVALIDSIZE_MASK	0xfe000000	</span><span class="cm">/* Number of invalid samples cache for this channel    	*/</span><span class="cp"></span>
<span class="cp">#define CCR_CACHELOOPFLAG	0x01000000	</span><span class="cm">/* 1 = Cache has a loop service pending			*/</span><span class="cp"></span>
<span class="cp">#define CCR_INTERLEAVEDSAMPLES	0x00800000	</span><span class="cm">/* 1 = A cache service will fetch interleaved samples	*/</span><span class="cp"></span>
<span class="cp">#define CCR_WORDSIZEDSAMPLES	0x00400000	</span><span class="cm">/* 1 = A cache service will fetch word sized samples	*/</span><span class="cp"></span>
<span class="cp">#define CCR_READADDRESS		0x06100009</span>
<span class="cp">#define CCR_READADDRESS_MASK	0x003f0000	</span><span class="cm">/* Location of cache just beyond current cache service	*/</span><span class="cp"></span>
<span class="cp">#define CCR_LOOPINVALSIZE	0x0000fe00	</span><span class="cm">/* Number of invalid samples in cache prior to loop	*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: This is valid only if CACHELOOPFLAG is set	*/</span>
<span class="cp">#define CCR_LOOPFLAG		0x00000100	</span><span class="cm">/* Set for a single sample period when a loop occurs	*/</span><span class="cp"></span>
<span class="cp">#define CCR_CACHELOOPADDRHI	0x000000ff	</span><span class="cm">/* DSL_LOOPSTARTADDR&#39;s hi byte if CACHELOOPFLAG is set	*/</span><span class="cp"></span>

<span class="cp">#define CLP			0x0a		</span><span class="cm">/* Cache loop register (valid if CCR_CACHELOOPFLAG = 1) */</span><span class="cp"></span>
						<span class="cm">/* NOTE: This register is normally not used		*/</span>
<span class="cp">#define CLP_CACHELOOPADDR	0x0000ffff	</span><span class="cm">/* Cache loop address (DSL_LOOPSTARTADDR [0..15])	*/</span><span class="cp"></span>

<span class="cp">#define FXRT			0x0b		</span><span class="cm">/* Effects send routing register			*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: It is illegal to assign the same routing to	*/</span>
						<span class="cm">/* two effects sends.					*/</span>
<span class="cp">#define FXRT_CHANNELA		0x000f0000	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send A	*/</span><span class="cp"></span>
<span class="cp">#define FXRT_CHANNELB		0x00f00000	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send B	*/</span><span class="cp"></span>
<span class="cp">#define FXRT_CHANNELC		0x0f000000	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send C	*/</span><span class="cp"></span>
<span class="cp">#define FXRT_CHANNELD		0xf0000000	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send D	*/</span><span class="cp"></span>

<span class="cp">#define A_HR			0x0b	</span><span class="cm">/* High Resolution. 24bit playback from host to DSP. */</span><span class="cp"></span>
<span class="cp">#define MAPA			0x0c		</span><span class="cm">/* Cache map A						*/</span><span class="cp"></span>

<span class="cp">#define MAPB			0x0d		</span><span class="cm">/* Cache map B						*/</span><span class="cp"></span>

<span class="cp">#define MAP_PTE_MASK		0xffffe000	</span><span class="cm">/* The 19 MSBs of the PTE indexed by the PTI		*/</span><span class="cp"></span>
<span class="cp">#define MAP_PTI_MASK		0x00001fff	</span><span class="cm">/* The 13 bit index to one of the 8192 PTE dwords      	*/</span><span class="cp"></span>

<span class="cm">/* 0x0e, 0x0f: Not used */</span>

<span class="cp">#define ENVVOL			0x10		</span><span class="cm">/* Volume envelope register				*/</span><span class="cp"></span>
<span class="cp">#define ENVVOL_MASK		0x0000ffff	</span><span class="cm">/* Current value of volume envelope state variable	*/</span><span class="cp">  </span>
						<span class="cm">/* 0x8000-n == 666*n usec delay	       			*/</span>

<span class="cp">#define ATKHLDV 		0x11		</span><span class="cm">/* Volume envelope hold and attack register		*/</span><span class="cp"></span>
<span class="cp">#define ATKHLDV_PHASE0		0x00008000	</span><span class="cm">/* 0 = Begin attack phase				*/</span><span class="cp"></span>
<span class="cp">#define ATKHLDV_HOLDTIME_MASK	0x00007f00	</span><span class="cm">/* Envelope hold time (127-n == n*88.2msec)		*/</span><span class="cp"></span>
<span class="cp">#define ATKHLDV_ATTACKTIME_MASK	0x0000007f	</span><span class="cm">/* Envelope attack time, log encoded			*/</span><span class="cp"></span>
						<span class="cm">/* 0 = infinite, 1 = 10.9msec, ... 0x7f = 5.5msec	*/</span>

<span class="cp">#define DCYSUSV 		0x12		</span><span class="cm">/* Volume envelope sustain and decay register		*/</span><span class="cp"></span>
<span class="cp">#define DCYSUSV_PHASE1_MASK	0x00008000	</span><span class="cm">/* 0 = Begin attack phase, 1 = begin release phase	*/</span><span class="cp"></span>
<span class="cp">#define DCYSUSV_SUSTAINLEVEL_MASK 0x00007f00	</span><span class="cm">/* 127 = full, 0 = off, 0.75dB increments		*/</span><span class="cp"></span>
<span class="cp">#define DCYSUSV_CHANNELENABLE_MASK 0x00000080	</span><span class="cm">/* 1 = Inhibit envelope engine from writing values in	*/</span><span class="cp"></span>
						<span class="cm">/* this channel and from writing to pitch, filter and	*/</span>
						<span class="cm">/* volume targets.					*/</span>
<span class="cp">#define DCYSUSV_DECAYTIME_MASK	0x0000007f	</span><span class="cm">/* Volume envelope decay time, log encoded     		*/</span><span class="cp"></span>
						<span class="cm">/* 0 = 43.7msec, 1 = 21.8msec, 0x7f = 22msec		*/</span>

<span class="cp">#define LFOVAL1 		0x13		</span><span class="cm">/* Modulation LFO value					*/</span><span class="cp"></span>
<span class="cp">#define LFOVAL_MASK		0x0000ffff	</span><span class="cm">/* Current value of modulation LFO state variable	*/</span><span class="cp"></span>
						<span class="cm">/* 0x8000-n == 666*n usec delay				*/</span>

<span class="cp">#define ENVVAL			0x14		</span><span class="cm">/* Modulation envelope register				*/</span><span class="cp"></span>
<span class="cp">#define ENVVAL_MASK		0x0000ffff	</span><span class="cm">/* Current value of modulation envelope state variable 	*/</span><span class="cp"></span>
						<span class="cm">/* 0x8000-n == 666*n usec delay				*/</span>

<span class="cp">#define ATKHLDM			0x15		</span><span class="cm">/* Modulation envelope hold and attack register		*/</span><span class="cp"></span>
<span class="cp">#define ATKHLDM_PHASE0		0x00008000	</span><span class="cm">/* 0 = Begin attack phase				*/</span><span class="cp"></span>
<span class="cp">#define ATKHLDM_HOLDTIME	0x00007f00	</span><span class="cm">/* Envelope hold time (127-n == n*42msec)		*/</span><span class="cp"></span>
<span class="cp">#define ATKHLDM_ATTACKTIME	0x0000007f	</span><span class="cm">/* Envelope attack time, log encoded			*/</span><span class="cp"></span>
						<span class="cm">/* 0 = infinite, 1 = 11msec, ... 0x7f = 5.5msec		*/</span>

<span class="cp">#define DCYSUSM			0x16		</span><span class="cm">/* Modulation envelope decay and sustain register	*/</span><span class="cp"></span>
<span class="cp">#define DCYSUSM_PHASE1_MASK	0x00008000	</span><span class="cm">/* 0 = Begin attack phase, 1 = begin release phase	*/</span><span class="cp"></span>
<span class="cp">#define DCYSUSM_SUSTAINLEVEL_MASK 0x00007f00	</span><span class="cm">/* 127 = full, 0 = off, 0.75dB increments		*/</span><span class="cp"></span>
<span class="cp">#define DCYSUSM_DECAYTIME_MASK	0x0000007f	</span><span class="cm">/* Envelope decay time, log encoded			*/</span><span class="cp"></span>
						<span class="cm">/* 0 = 43.7msec, 1 = 21.8msec, 0x7f = 22msec		*/</span>

<span class="cp">#define LFOVAL2 		0x17		</span><span class="cm">/* Vibrato LFO register					*/</span><span class="cp"></span>
<span class="cp">#define LFOVAL2_MASK		0x0000ffff	</span><span class="cm">/* Current value of vibrato LFO state variable 		*/</span><span class="cp"></span>
						<span class="cm">/* 0x8000-n == 666*n usec delay				*/</span>

<span class="cp">#define IP			0x18		</span><span class="cm">/* Initial pitch register				*/</span><span class="cp"></span>
<span class="cp">#define IP_MASK			0x0000ffff	</span><span class="cm">/* Exponential initial pitch shift			*/</span><span class="cp"></span>
						<span class="cm">/* 4 bits of octave, 12 bits of fractional octave	*/</span>
<span class="cp">#define IP_UNITY		0x0000e000	</span><span class="cm">/* Unity pitch shift					*/</span><span class="cp"></span>

<span class="cp">#define IFATN			0x19		</span><span class="cm">/* Initial filter cutoff and attenuation register	*/</span><span class="cp"></span>
<span class="cp">#define IFATN_FILTERCUTOFF_MASK	0x0000ff00	</span><span class="cm">/* Initial filter cutoff frequency in exponential units	*/</span><span class="cp"></span>
						<span class="cm">/* 6 most significant bits are semitones		*/</span>
						<span class="cm">/* 2 least significant bits are fractions		*/</span>
<span class="cp">#define IFATN_FILTERCUTOFF	0x08080019</span>
<span class="cp">#define IFATN_ATTENUATION_MASK	0x000000ff	</span><span class="cm">/* Initial attenuation in 0.375dB steps			*/</span><span class="cp"></span>
<span class="cp">#define IFATN_ATTENUATION	0x08000019</span>


<span class="cp">#define PEFE			0x1a		</span><span class="cm">/* Pitch envelope and filter envelope amount register	*/</span><span class="cp"></span>
<span class="cp">#define PEFE_PITCHAMOUNT_MASK	0x0000ff00	</span><span class="cm">/* Pitch envlope amount					*/</span><span class="cp"></span>
						<span class="cm">/* Signed 2&#39;s complement, +/- one octave peak extremes	*/</span>
<span class="cp">#define PEFE_PITCHAMOUNT	0x0808001a</span>
<span class="cp">#define PEFE_FILTERAMOUNT_MASK	0x000000ff	</span><span class="cm">/* Filter envlope amount				*/</span><span class="cp"></span>
						<span class="cm">/* Signed 2&#39;s complement, +/- six octaves peak extremes */</span>
<span class="cp">#define PEFE_FILTERAMOUNT	0x0800001a</span>
<span class="cp">#define FMMOD			0x1b		</span><span class="cm">/* Vibrato/filter modulation from LFO register		*/</span><span class="cp"></span>
<span class="cp">#define FMMOD_MODVIBRATO	0x0000ff00	</span><span class="cm">/* Vibrato LFO modulation depth				*/</span><span class="cp"></span>
						<span class="cm">/* Signed 2&#39;s complement, +/- one octave extremes	*/</span>
<span class="cp">#define FMMOD_MOFILTER		0x000000ff	</span><span class="cm">/* Filter LFO modulation depth				*/</span><span class="cp"></span>
						<span class="cm">/* Signed 2&#39;s complement, +/- three octave extremes	*/</span>


<span class="cp">#define TREMFRQ 		0x1c		</span><span class="cm">/* Tremolo amount and modulation LFO frequency register	*/</span><span class="cp"></span>
<span class="cp">#define TREMFRQ_DEPTH		0x0000ff00	</span><span class="cm">/* Tremolo depth					*/</span><span class="cp"></span>
						<span class="cm">/* Signed 2&#39;s complement, with +/- 12dB extremes	*/</span>

<span class="cp">#define TREMFRQ_FREQUENCY	0x000000ff	</span><span class="cm">/* Tremolo LFO frequency				*/</span><span class="cp"></span>
						<span class="cm">/* ??Hz steps, maximum of ?? Hz.			*/</span>
<span class="cp">#define FM2FRQ2 		0x1d		</span><span class="cm">/* Vibrato amount and vibrato LFO frequency register	*/</span><span class="cp"></span>
<span class="cp">#define FM2FRQ2_DEPTH		0x0000ff00	</span><span class="cm">/* Vibrato LFO vibrato depth				*/</span><span class="cp"></span>
						<span class="cm">/* Signed 2&#39;s complement, +/- one octave extremes	*/</span>
<span class="cp">#define FM2FRQ2_FREQUENCY	0x000000ff	</span><span class="cm">/* Vibrato LFO frequency				*/</span><span class="cp"></span>
						<span class="cm">/* 0.039Hz steps, maximum of 9.85 Hz.			*/</span>

<span class="cp">#define TEMPENV 		0x1e		</span><span class="cm">/* Tempory envelope register				*/</span><span class="cp"></span>
<span class="cp">#define TEMPENV_MASK		0x0000ffff	</span><span class="cm">/* 16-bit value						*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: All channels contain internal variables; do	*/</span>
						<span class="cm">/* not write to these locations.			*/</span>

<span class="cm">/* 0x1f: not used */</span>

<span class="cp">#define CD0			0x20		</span><span class="cm">/* Cache data 0 register				*/</span><span class="cp"></span>
<span class="cp">#define CD1			0x21		</span><span class="cm">/* Cache data 1 register				*/</span><span class="cp"></span>
<span class="cp">#define CD2			0x22		</span><span class="cm">/* Cache data 2 register				*/</span><span class="cp"></span>
<span class="cp">#define CD3			0x23		</span><span class="cm">/* Cache data 3 register				*/</span><span class="cp"></span>
<span class="cp">#define CD4			0x24		</span><span class="cm">/* Cache data 4 register				*/</span><span class="cp"></span>
<span class="cp">#define CD5			0x25		</span><span class="cm">/* Cache data 5 register				*/</span><span class="cp"></span>
<span class="cp">#define CD6			0x26		</span><span class="cm">/* Cache data 6 register				*/</span><span class="cp"></span>
<span class="cp">#define CD7			0x27		</span><span class="cm">/* Cache data 7 register				*/</span><span class="cp"></span>
<span class="cp">#define CD8			0x28		</span><span class="cm">/* Cache data 8 register				*/</span><span class="cp"></span>
<span class="cp">#define CD9			0x29		</span><span class="cm">/* Cache data 9 register				*/</span><span class="cp"></span>
<span class="cp">#define CDA			0x2a		</span><span class="cm">/* Cache data A register				*/</span><span class="cp"></span>
<span class="cp">#define CDB			0x2b		</span><span class="cm">/* Cache data B register				*/</span><span class="cp"></span>
<span class="cp">#define CDC			0x2c		</span><span class="cm">/* Cache data C register				*/</span><span class="cp"></span>
<span class="cp">#define CDD			0x2d		</span><span class="cm">/* Cache data D register				*/</span><span class="cp"></span>
<span class="cp">#define CDE			0x2e		</span><span class="cm">/* Cache data E register				*/</span><span class="cp"></span>
<span class="cp">#define CDF			0x2f		</span><span class="cm">/* Cache data F register				*/</span><span class="cp"></span>

<span class="cm">/* 0x30-3f seem to be the same as 0x20-2f */</span>

<span class="cp">#define PTB			0x40		</span><span class="cm">/* Page table base register				*/</span><span class="cp"></span>
<span class="cp">#define PTB_MASK		0xfffff000	</span><span class="cm">/* Physical address of the page table in host memory	*/</span><span class="cp"></span>

<span class="cp">#define TCB			0x41		</span><span class="cm">/* Tank cache base register    				*/</span><span class="cp"></span>
<span class="cp">#define TCB_MASK		0xfffff000	</span><span class="cm">/* Physical address of the bottom of host based TRAM	*/</span><span class="cp"></span>

<span class="cp">#define ADCCR			0x42		</span><span class="cm">/* ADC sample rate/stereo control register		*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_RCHANENABLE	0x00000010	</span><span class="cm">/* Enables right channel for writing to the host       	*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_LCHANENABLE	0x00000008	</span><span class="cm">/* Enables left channel for writing to the host		*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: To guarantee phase coherency, both channels	*/</span>
						<span class="cm">/* must be disabled prior to enabling both channels.	*/</span>
<span class="cp">#define A_ADCCR_RCHANENABLE	0x00000020</span>
<span class="cp">#define A_ADCCR_LCHANENABLE	0x00000010</span>

<span class="cp">#define A_ADCCR_SAMPLERATE_MASK 0x0000000F      </span><span class="cm">/* Audigy sample rate convertor output rate		*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_MASK	0x00000007	</span><span class="cm">/* Sample rate convertor output rate			*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_48	0x00000000	</span><span class="cm">/* 48kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_44	0x00000001	</span><span class="cm">/* 44.1kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_32	0x00000002	</span><span class="cm">/* 32kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_24	0x00000003	</span><span class="cm">/* 24kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_22	0x00000004	</span><span class="cm">/* 22.05kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_16	0x00000005	</span><span class="cm">/* 16kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_11	0x00000006	</span><span class="cm">/* 11.025kHz sample rate				*/</span><span class="cp"></span>
<span class="cp">#define ADCCR_SAMPLERATE_8	0x00000007	</span><span class="cm">/* 8kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define A_ADCCR_SAMPLERATE_12	0x00000006	</span><span class="cm">/* 12kHz sample rate					*/</span><span class="cp"></span>
<span class="cp">#define A_ADCCR_SAMPLERATE_11	0x00000007	</span><span class="cm">/* 11.025kHz sample rate				*/</span><span class="cp"></span>
<span class="cp">#define A_ADCCR_SAMPLERATE_8	0x00000008	</span><span class="cm">/* 8kHz sample rate					*/</span><span class="cp"></span>

<span class="cp">#define FXWC			0x43		</span><span class="cm">/* FX output write channels register			*/</span><span class="cp"></span>
						<span class="cm">/* When set, each bit enables the writing of the	*/</span>
						<span class="cm">/* corresponding FX output channel (internal registers  */</span>
						<span class="cm">/* 0x20-0x3f) to host memory.  This mode of recording   */</span>
						<span class="cm">/* is 16bit, 48KHz only. All 32 channels can be enabled */</span>
						<span class="cm">/* simultaneously.					*/</span>

<span class="cp">#define FXWC_DEFAULTROUTE_C     (1&lt;&lt;0)		</span><span class="cm">/* left emu out? */</span><span class="cp"></span>
<span class="cp">#define FXWC_DEFAULTROUTE_B     (1&lt;&lt;1)		</span><span class="cm">/* right emu out? */</span><span class="cp"></span>
<span class="cp">#define FXWC_DEFAULTROUTE_A     (1&lt;&lt;12)</span>
<span class="cp">#define FXWC_DEFAULTROUTE_D     (1&lt;&lt;13)</span>
<span class="cp">#define FXWC_ADCLEFT            (1&lt;&lt;18)</span>
<span class="cp">#define FXWC_CDROMSPDIFLEFT     (1&lt;&lt;18)</span>
<span class="cp">#define FXWC_ADCRIGHT           (1&lt;&lt;19)</span>
<span class="cp">#define FXWC_CDROMSPDIFRIGHT    (1&lt;&lt;19)</span>
<span class="cp">#define FXWC_MIC                (1&lt;&lt;20)</span>
<span class="cp">#define FXWC_ZOOMLEFT           (1&lt;&lt;20)</span>
<span class="cp">#define FXWC_ZOOMRIGHT          (1&lt;&lt;21)</span>
<span class="cp">#define FXWC_SPDIFLEFT          (1&lt;&lt;22)		</span><span class="cm">/* 0x00400000 */</span><span class="cp"></span>
<span class="cp">#define FXWC_SPDIFRIGHT         (1&lt;&lt;23)		</span><span class="cm">/* 0x00800000 */</span><span class="cp"></span>

<span class="cp">#define A_TBLSZ			0x43	</span><span class="cm">/* Effects Tank Internal Table Size. Only low byte or register used */</span><span class="cp"></span>

<span class="cp">#define TCBS			0x44		</span><span class="cm">/* Tank cache buffer size register			*/</span><span class="cp"></span>
<span class="cp">#define TCBS_MASK		0x00000007	</span><span class="cm">/* Tank cache buffer size field				*/</span><span class="cp"></span>
<span class="cp">#define TCBS_BUFFSIZE_16K	0x00000000</span>
<span class="cp">#define TCBS_BUFFSIZE_32K	0x00000001</span>
<span class="cp">#define TCBS_BUFFSIZE_64K	0x00000002</span>
<span class="cp">#define TCBS_BUFFSIZE_128K	0x00000003</span>
<span class="cp">#define TCBS_BUFFSIZE_256K	0x00000004</span>
<span class="cp">#define TCBS_BUFFSIZE_512K	0x00000005</span>
<span class="cp">#define TCBS_BUFFSIZE_1024K	0x00000006</span>
<span class="cp">#define TCBS_BUFFSIZE_2048K	0x00000007</span>

<span class="cp">#define MICBA			0x45		</span><span class="cm">/* AC97 microphone buffer address register		*/</span><span class="cp"></span>
<span class="cp">#define MICBA_MASK		0xfffff000	</span><span class="cm">/* 20 bit base address					*/</span><span class="cp"></span>

<span class="cp">#define ADCBA			0x46		</span><span class="cm">/* ADC buffer address register				*/</span><span class="cp"></span>
<span class="cp">#define ADCBA_MASK		0xfffff000	</span><span class="cm">/* 20 bit base address					*/</span><span class="cp"></span>

<span class="cp">#define FXBA			0x47		</span><span class="cm">/* FX Buffer Address */</span><span class="cp"></span>
<span class="cp">#define FXBA_MASK		0xfffff000	</span><span class="cm">/* 20 bit base address					*/</span><span class="cp"></span>

<span class="cp">#define A_HWM			0x48	</span><span class="cm">/* High PCI Water Mark - word access, defaults to 3f */</span><span class="cp"></span>

<span class="cp">#define MICBS			0x49		</span><span class="cm">/* Microphone buffer size register			*/</span><span class="cp"></span>

<span class="cp">#define ADCBS			0x4a		</span><span class="cm">/* ADC buffer size register				*/</span><span class="cp"></span>

<span class="cp">#define FXBS			0x4b		</span><span class="cm">/* FX buffer size register				*/</span><span class="cp"></span>

<span class="cm">/* register: 0x4c..4f: ffff-ffff current amounts, per-channel */</span>

<span class="cm">/* The following mask values define the size of the ADC, MIX and FX buffers in bytes */</span>
<span class="cp">#define ADCBS_BUFSIZE_NONE	0x00000000</span>
<span class="cp">#define ADCBS_BUFSIZE_384	0x00000001</span>
<span class="cp">#define ADCBS_BUFSIZE_448	0x00000002</span>
<span class="cp">#define ADCBS_BUFSIZE_512	0x00000003</span>
<span class="cp">#define ADCBS_BUFSIZE_640	0x00000004</span>
<span class="cp">#define ADCBS_BUFSIZE_768	0x00000005</span>
<span class="cp">#define ADCBS_BUFSIZE_896	0x00000006</span>
<span class="cp">#define ADCBS_BUFSIZE_1024	0x00000007</span>
<span class="cp">#define ADCBS_BUFSIZE_1280	0x00000008</span>
<span class="cp">#define ADCBS_BUFSIZE_1536	0x00000009</span>
<span class="cp">#define ADCBS_BUFSIZE_1792	0x0000000a</span>
<span class="cp">#define ADCBS_BUFSIZE_2048	0x0000000b</span>
<span class="cp">#define ADCBS_BUFSIZE_2560	0x0000000c</span>
<span class="cp">#define ADCBS_BUFSIZE_3072	0x0000000d</span>
<span class="cp">#define ADCBS_BUFSIZE_3584	0x0000000e</span>
<span class="cp">#define ADCBS_BUFSIZE_4096	0x0000000f</span>
<span class="cp">#define ADCBS_BUFSIZE_5120	0x00000010</span>
<span class="cp">#define ADCBS_BUFSIZE_6144	0x00000011</span>
<span class="cp">#define ADCBS_BUFSIZE_7168	0x00000012</span>
<span class="cp">#define ADCBS_BUFSIZE_8192	0x00000013</span>
<span class="cp">#define ADCBS_BUFSIZE_10240	0x00000014</span>
<span class="cp">#define ADCBS_BUFSIZE_12288	0x00000015</span>
<span class="cp">#define ADCBS_BUFSIZE_14366	0x00000016</span>
<span class="cp">#define ADCBS_BUFSIZE_16384	0x00000017</span>
<span class="cp">#define ADCBS_BUFSIZE_20480	0x00000018</span>
<span class="cp">#define ADCBS_BUFSIZE_24576	0x00000019</span>
<span class="cp">#define ADCBS_BUFSIZE_28672	0x0000001a</span>
<span class="cp">#define ADCBS_BUFSIZE_32768	0x0000001b</span>
<span class="cp">#define ADCBS_BUFSIZE_40960	0x0000001c</span>
<span class="cp">#define ADCBS_BUFSIZE_49152	0x0000001d</span>
<span class="cp">#define ADCBS_BUFSIZE_57344	0x0000001e</span>
<span class="cp">#define ADCBS_BUFSIZE_65536	0x0000001f</span>

<span class="cm">/* Current Send B, A Amounts */</span>
<span class="cp">#define A_CSBA			0x4c</span>

<span class="cm">/* Current Send D, C Amounts */</span>
<span class="cp">#define A_CSDC			0x4d</span>

<span class="cm">/* Current Send F, E Amounts */</span>
<span class="cp">#define A_CSFE			0x4e</span>

<span class="cm">/* Current Send H, G Amounts */</span>
<span class="cp">#define A_CSHG			0x4f</span>


<span class="cp">#define CDCS			0x50		</span><span class="cm">/* CD-ROM digital channel status register	*/</span><span class="cp"></span>

<span class="cp">#define GPSCS			0x51		</span><span class="cm">/* General Purpose SPDIF channel status register*/</span><span class="cp"></span>

<span class="cp">#define DBG			0x52		</span><span class="cm">/* DO NOT PROGRAM THIS REGISTER!!! MAY DESTROY CHIP */</span><span class="cp"></span>

<span class="cm">/* S/PDIF Input C Channel Status */</span>
<span class="cp">#define A_SPSC			0x52</span>

<span class="cp">#define REG53			0x53		</span><span class="cm">/* DO NOT PROGRAM THIS REGISTER!!! MAY DESTROY CHIP */</span><span class="cp"></span>

<span class="cp">#define A_DBG			 0x53</span>
<span class="cp">#define A_DBG_SINGLE_STEP	 0x00020000	</span><span class="cm">/* Set to zero to start dsp */</span><span class="cp"></span>
<span class="cp">#define A_DBG_ZC		 0x40000000	</span><span class="cm">/* zero tram counter */</span><span class="cp"></span>
<span class="cp">#define A_DBG_STEP_ADDR		 0x000003ff</span>
<span class="cp">#define A_DBG_SATURATION_OCCURED 0x20000000</span>
<span class="cp">#define A_DBG_SATURATION_ADDR	 0x0ffc0000</span></pre></div></td></tr>


<tr id="section-5"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-5">&#182;</a></div><p>NOTE: 0x54,55,56: 64-bit</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define SPCS0			0x54		</span><span class="cm">/* SPDIF output Channel Status 0 register	*/</span><span class="cp"></span>

<span class="cp">#define SPCS1			0x55		</span><span class="cm">/* SPDIF output Channel Status 1 register	*/</span><span class="cp"></span>

<span class="cp">#define SPCS2			0x56		</span><span class="cm">/* SPDIF output Channel Status 2 register	*/</span><span class="cp"></span>

<span class="cp">#define SPCS_CLKACCYMASK	0x30000000	</span><span class="cm">/* Clock accuracy				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CLKACCY_1000PPM	0x00000000	</span><span class="cm">/* 1000 parts per million			*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CLKACCY_50PPM	0x10000000	</span><span class="cm">/* 50 parts per million				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CLKACCY_VARIABLE	0x20000000	</span><span class="cm">/* Variable accuracy				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_SAMPLERATEMASK	0x0f000000	</span><span class="cm">/* Sample rate					*/</span><span class="cp"></span>
<span class="cp">#define SPCS_SAMPLERATE_44	0x00000000	</span><span class="cm">/* 44.1kHz sample rate				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_SAMPLERATE_48	0x02000000	</span><span class="cm">/* 48kHz sample rate				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_SAMPLERATE_32	0x03000000	</span><span class="cm">/* 32kHz sample rate				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CHANNELNUMMASK	0x00f00000	</span><span class="cm">/* Channel number				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CHANNELNUM_UNSPEC	0x00000000	</span><span class="cm">/* Unspecified channel number			*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CHANNELNUM_LEFT	0x00100000	</span><span class="cm">/* Left channel					*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CHANNELNUM_RIGHT	0x00200000	</span><span class="cm">/* Right channel				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_SOURCENUMMASK	0x000f0000	</span><span class="cm">/* Source number				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_SOURCENUM_UNSPEC	0x00000000	</span><span class="cm">/* Unspecified source number			*/</span><span class="cp"></span>
<span class="cp">#define SPCS_GENERATIONSTATUS	0x00008000	</span><span class="cm">/* Originality flag (see IEC-958 spec)		*/</span><span class="cp"></span>
<span class="cp">#define SPCS_CATEGORYCODEMASK	0x00007f00	</span><span class="cm">/* Category code (see IEC-958 spec)		*/</span><span class="cp"></span>
<span class="cp">#define SPCS_MODEMASK		0x000000c0	</span><span class="cm">/* Mode (see IEC-958 spec)			*/</span><span class="cp"></span>
<span class="cp">#define SPCS_EMPHASISMASK	0x00000038	</span><span class="cm">/* Emphasis					*/</span><span class="cp"></span>
<span class="cp">#define SPCS_EMPHASIS_NONE	0x00000000	</span><span class="cm">/* No emphasis					*/</span><span class="cp"></span>
<span class="cp">#define SPCS_EMPHASIS_50_15	0x00000008	</span><span class="cm">/* 50/15 usec 2 channel				*/</span><span class="cp"></span>
<span class="cp">#define SPCS_COPYRIGHT		0x00000004	</span><span class="cm">/* Copyright asserted flag -- do not modify	*/</span><span class="cp"></span>
<span class="cp">#define SPCS_NOTAUDIODATA	0x00000002	</span><span class="cm">/* 0 = Digital audio, 1 = not audio		*/</span><span class="cp"></span>
<span class="cp">#define SPCS_PROFESSIONAL	0x00000001	</span><span class="cm">/* 0 = Consumer (IEC-958), 1 = pro (AES3-1992)	*/</span><span class="cp"></span>

<span class="cm">/* 0x57: Not used */</span>

<span class="cm">/* The 32-bit CLIx and SOLx registers all have one bit per channel control/status      		*/</span>
<span class="cp">#define CLIEL			0x58		</span><span class="cm">/* Channel loop interrupt enable low register	*/</span><span class="cp"></span>

<span class="cp">#define CLIEH			0x59		</span><span class="cm">/* Channel loop interrupt enable high register	*/</span><span class="cp"></span>

<span class="cp">#define CLIPL			0x5a		</span><span class="cm">/* Channel loop interrupt pending low register	*/</span><span class="cp"></span>

<span class="cp">#define CLIPH			0x5b		</span><span class="cm">/* Channel loop interrupt pending high register	*/</span><span class="cp"></span>

<span class="cp">#define SOLEL			0x5c		</span><span class="cm">/* Stop on loop enable low register		*/</span><span class="cp"></span>

<span class="cp">#define SOLEH			0x5d		</span><span class="cm">/* Stop on loop enable high register		*/</span><span class="cp"></span>

<span class="cp">#define SPBYPASS		0x5e		</span><span class="cm">/* SPDIF BYPASS mode register			*/</span><span class="cp"></span>
<span class="cp">#define SPBYPASS_SPDIF0_MASK	0x00000003	</span><span class="cm">/* SPDIF 0 bypass mode				*/</span><span class="cp"></span>
<span class="cp">#define SPBYPASS_SPDIF1_MASK	0x0000000c	</span><span class="cm">/* SPDIF 1 bypass mode				*/</span><span class="cp"></span>
<span class="cm">/* bypass mode: 0 - DSP; 1 - SPDIF A, 2 - SPDIF B, 3 - SPDIF C					*/</span>
<span class="cp">#define SPBYPASS_FORMAT		0x00000f00      </span><span class="cm">/* If 1, SPDIF XX uses 24 bit, if 0 - 20 bit	*/</span><span class="cp"></span>

<span class="cp">#define AC97SLOT		0x5f            </span><span class="cm">/* additional AC97 slots enable bits		*/</span><span class="cp"></span>
<span class="cp">#define AC97SLOT_REAR_RIGHT	0x01		</span><span class="cm">/* Rear left */</span><span class="cp"></span>
<span class="cp">#define AC97SLOT_REAR_LEFT	0x02		</span><span class="cm">/* Rear right */</span><span class="cp"></span>
<span class="cp">#define AC97SLOT_CNTR		0x10            </span><span class="cm">/* Center enable */</span><span class="cp"></span>
<span class="cp">#define AC97SLOT_LFE		0x20            </span><span class="cm">/* LFE enable */</span><span class="cp"></span>

<span class="cm">/* PCB Revision */</span>
<span class="cp">#define A_PCB			0x5f</span></pre></div></td></tr>


<tr id="section-6"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-6">&#182;</a></div><p>NOTE: 0x60,61,62: 64-bit</p></td><td class="code"><div class="highlight"><pre><span class="cp">#define CDSRCS			0x60		</span><span class="cm">/* CD-ROM Sample Rate Converter status register	*/</span><span class="cp"></span>

<span class="cp">#define GPSRCS			0x61		</span><span class="cm">/* General Purpose SPDIF sample rate cvt status */</span><span class="cp"></span>

<span class="cp">#define ZVSRCS			0x62		</span><span class="cm">/* ZVideo sample rate converter status		*/</span><span class="cp"></span>
						<span class="cm">/* NOTE: This one has no SPDIFLOCKED field	*/</span>
						<span class="cm">/* Assumes sample lock				*/</span>

<span class="cm">/* These three bitfields apply to CDSRCS, GPSRCS, and (except as noted) ZVSRCS.			*/</span>
<span class="cp">#define SRCS_SPDIFVALID		0x04000000	</span><span class="cm">/* SPDIF stream valid				*/</span><span class="cp"></span>
<span class="cp">#define SRCS_SPDIFLOCKED	0x02000000	</span><span class="cm">/* SPDIF stream locked				*/</span><span class="cp"></span>
<span class="cp">#define SRCS_RATELOCKED		0x01000000	</span><span class="cm">/* Sample rate locked				*/</span><span class="cp"></span>
<span class="cp">#define SRCS_ESTSAMPLERATE	0x0007ffff	</span><span class="cm">/* Do not modify this field.			*/</span><span class="cp"></span>

<span class="cm">/* Note that these values can vary +/- by a small amount                                        */</span>
<span class="cp">#define SRCS_SPDIFRATE_44	0x0003acd9</span>
<span class="cp">#define SRCS_SPDIFRATE_48	0x00040000</span>
<span class="cp">#define SRCS_SPDIFRATE_96	0x00080000</span>

<span class="cp">#define MICIDX                  0x63            </span><span class="cm">/* Microphone recording buffer index register   */</span><span class="cp"></span>
<span class="cp">#define MICIDX_MASK             0x0000ffff      </span><span class="cm">/* 16-bit value                                 */</span><span class="cp"></span>
<span class="cp">#define MICIDX_IDX		0x10000063</span>

<span class="cp">#define ADCIDX			0x64		</span><span class="cm">/* ADC recording buffer index register		*/</span><span class="cp"></span>
<span class="cp">#define ADCIDX_MASK		0x0000ffff	</span><span class="cm">/* 16 bit index field				*/</span><span class="cp"></span>
<span class="cp">#define ADCIDX_IDX		0x10000064</span>

<span class="cp">#define A_ADCIDX		0x63</span>
<span class="cp">#define A_ADCIDX_IDX		0x10000063</span>

<span class="cp">#define A_MICIDX		0x64</span>
<span class="cp">#define A_MICIDX_IDX		0x10000064</span>

<span class="cp">#define FXIDX			0x65		</span><span class="cm">/* FX recording buffer index register		*/</span><span class="cp"></span>
<span class="cp">#define FXIDX_MASK		0x0000ffff	</span><span class="cm">/* 16-bit value					*/</span><span class="cp"></span>
<span class="cp">#define FXIDX_IDX		0x10000065</span>

<span class="cm">/* The 32-bit HLIx and HLIPx registers all have one bit per channel control/status      		*/</span>
<span class="cp">#define HLIEL			0x66		</span><span class="cm">/* Channel half loop interrupt enable low register	*/</span><span class="cp"></span>

<span class="cp">#define HLIEH			0x67		</span><span class="cm">/* Channel half loop interrupt enable high register	*/</span><span class="cp"></span>

<span class="cp">#define HLIPL			0x68		</span><span class="cm">/* Channel half loop interrupt pending low register	*/</span><span class="cp"></span>

<span class="cp">#define HLIPH			0x69		</span><span class="cm">/* Channel half loop interrupt pending high register	*/</span><span class="cp"></span>

<span class="cm">/* S/PDIF Host Record Index (bypasses SRC) */</span>
<span class="cp">#define A_SPRI			0x6a</span>
<span class="cm">/* S/PDIF Host Record Address */</span>
<span class="cp">#define A_SPRA			0x6b</span>
<span class="cm">/* S/PDIF Host Record Control */</span>
<span class="cp">#define A_SPRC			0x6c</span>
<span class="cm">/* Delayed Interrupt Counter &amp; Enable */</span>
<span class="cp">#define A_DICE			0x6d</span>
<span class="cm">/* Tank Table Base */</span>
<span class="cp">#define A_TTB			0x6e</span>
<span class="cm">/* Tank Delay Offset */</span>
<span class="cp">#define A_TDOF			0x6f</span>

<span class="cm">/* This is the MPU port on the card (via the game port)						*/</span>
<span class="cp">#define A_MUDATA1		0x70</span>
<span class="cp">#define A_MUCMD1		0x71</span>
<span class="cp">#define A_MUSTAT1		A_MUCMD1</span>

<span class="cm">/* This is the MPU port on the Audigy Drive 							*/</span>
<span class="cp">#define A_MUDATA2		0x72</span>
<span class="cp">#define A_MUCMD2		0x73</span>
<span class="cp">#define A_MUSTAT2		A_MUCMD2	</span>

<span class="cm">/* The next two are the Audigy equivalent of FXWC						*/</span>
<span class="cm">/* the Audigy can record any output (16bit, 48kHz, up to 64 channel simultaneously) 		*/</span>
<span class="cm">/* Each bit selects a channel for recording */</span>
<span class="cp">#define A_FXWC1			0x74            </span><span class="cm">/* Selects 0x7f-0x60 for FX recording           */</span><span class="cp"></span>
<span class="cp">#define A_FXWC2			0x75		</span><span class="cm">/* Selects 0x9f-0x80 for FX recording           */</span><span class="cp"></span>

<span class="cm">/* Extended Hardware Control */</span>
<span class="cp">#define A_SPDIF_SAMPLERATE	0x76		</span><span class="cm">/* Set the sample rate of SPDIF output		*/</span><span class="cp"></span>
<span class="cp">#define A_SAMPLE_RATE		0x76		</span><span class="cm">/* Various sample rate settings. */</span><span class="cp"></span>
<span class="cp">#define A_SAMPLE_RATE_NOT_USED  0x0ffc111e	</span><span class="cm">/* Bits that are not used and cannot be set. 	*/</span><span class="cp"></span>
<span class="cp">#define A_SAMPLE_RATE_UNKNOWN	0xf0030001	</span><span class="cm">/* Bits that can be set, but have unknown use. 	*/</span><span class="cp"></span>
<span class="cp">#define A_SPDIF_RATE_MASK	0x000000e0	</span><span class="cm">/* Any other values for rates, just use 48000	*/</span><span class="cp"></span>
<span class="cp">#define A_SPDIF_48000		0x00000000</span>
<span class="cp">#define A_SPDIF_192000		0x00000020</span>
<span class="cp">#define A_SPDIF_96000		0x00000040</span>
<span class="cp">#define A_SPDIF_44100		0x00000080</span>

<span class="cp">#define A_I2S_CAPTURE_RATE_MASK	0x00000e00	</span><span class="cm">/* This sets the capture PCM rate, but it is    */</span><span class="cp"></span>
<span class="cp">#define A_I2S_CAPTURE_48000	0x00000000	</span><span class="cm">/* unclear if this sets the ADC rate as well.	*/</span><span class="cp"></span>
<span class="cp">#define A_I2S_CAPTURE_192000	0x00000200</span>
<span class="cp">#define A_I2S_CAPTURE_96000	0x00000400</span>
<span class="cp">#define A_I2S_CAPTURE_44100	0x00000800</span>

<span class="cp">#define A_PCM_RATE_MASK		0x0000e000	</span><span class="cm">/* This sets the playback PCM rate on the P16V	*/</span><span class="cp"></span>
<span class="cp">#define A_PCM_48000		0x00000000</span>
<span class="cp">#define A_PCM_192000		0x00002000</span>
<span class="cp">#define A_PCM_96000		0x00004000</span>
<span class="cp">#define A_PCM_44100		0x00008000</span>

<span class="cm">/* I2S0 Sample Rate Tracker Status */</span>
<span class="cp">#define A_SRT3			0x77</span>

<span class="cm">/* I2S1 Sample Rate Tracker Status */</span>
<span class="cp">#define A_SRT4			0x78</span>

<span class="cm">/* I2S2 Sample Rate Tracker Status */</span>
<span class="cp">#define A_SRT5			0x79</span>
<span class="cm">/* - default to 0x01080000 on my audigy 2 ZS --rlrevell	*/</span>

<span class="cm">/* Tank Table DMA Address */</span>
<span class="cp">#define A_TTDA			0x7a</span>
<span class="cm">/* Tank Table DMA Data */</span>
<span class="cp">#define A_TTDD			0x7b</span>

<span class="cp">#define A_FXRT2			0x7c</span>
<span class="cp">#define A_FXRT_CHANNELE		0x0000003f	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send E	*/</span><span class="cp"></span>
<span class="cp">#define A_FXRT_CHANNELF		0x00003f00	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send F	*/</span><span class="cp"></span>
<span class="cp">#define A_FXRT_CHANNELG		0x003f0000	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send G	*/</span><span class="cp"></span>
<span class="cp">#define A_FXRT_CHANNELH		0x3f000000	</span><span class="cm">/* Effects send bus number for channel&#39;s effects send H	*/</span><span class="cp"></span>

<span class="cp">#define A_SENDAMOUNTS		0x7d</span>
<span class="cp">#define A_FXSENDAMOUNT_E_MASK	0xFF000000</span>
<span class="cp">#define A_FXSENDAMOUNT_F_MASK	0x00FF0000</span>
<span class="cp">#define A_FXSENDAMOUNT_G_MASK	0x0000FF00</span>
<span class="cp">#define A_FXSENDAMOUNT_H_MASK	0x000000FF</span>
<span class="cm">/* 0x7c, 0x7e &quot;high bit is used for filtering&quot; */</span>
 
<span class="cm">/* The send amounts for this one are the same as used with the emu10k1 */</span>
<span class="cp">#define A_FXRT1			0x7e</span>
<span class="cp">#define A_FXRT_CHANNELA		0x0000003f</span>
<span class="cp">#define A_FXRT_CHANNELB		0x00003f00</span>
<span class="cp">#define A_FXRT_CHANNELC		0x003f0000</span>
<span class="cp">#define A_FXRT_CHANNELD		0x3f000000</span>

<span class="cm">/* 0x7f: Not used */</span>
<span class="cm">/* Each FX general purpose register is 32 bits in length, all bits are used			*/</span>
<span class="cp">#define FXGPREGBASE		0x100		</span><span class="cm">/* FX general purpose registers base       	*/</span><span class="cp"></span>
<span class="cp">#define A_FXGPREGBASE		0x400		</span><span class="cm">/* Audigy GPRs, 0x400 to 0x5ff			*/</span><span class="cp"></span>

<span class="cp">#define A_TANKMEMCTLREGBASE	0x100		</span><span class="cm">/* Tank memory control registers base - only for Audigy */</span><span class="cp"></span>
<span class="cp">#define A_TANKMEMCTLREG_MASK	0x1f		</span><span class="cm">/* only 5 bits used - only for Audigy */</span><span class="cp"></span>

<span class="cm">/* Tank audio data is logarithmically compressed down to 16 bits before writing to TRAM and is	*/</span>
<span class="cm">/* decompressed back to 20 bits on a read.  There are a total of 160 locations, the last 32	*/</span>
<span class="cm">/* locations are for external TRAM. 								*/</span>
<span class="cp">#define TANKMEMDATAREGBASE	0x200		</span><span class="cm">/* Tank memory data registers base     		*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMDATAREG_MASK	0x000fffff	</span><span class="cm">/* 20 bit tank audio data field			*/</span><span class="cp"></span>

<span class="cm">/* Combined address field and memory opcode or flag field.  160 locations, last 32 are external	*/</span>
<span class="cp">#define TANKMEMADDRREGBASE	0x300		</span><span class="cm">/* Tank memory address registers base		*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_ADDR_MASK 0x000fffff	</span><span class="cm">/* 20 bit tank address field			*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_CLEAR	0x00800000	</span><span class="cm">/* Clear tank memory				*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_ALIGN	0x00400000	</span><span class="cm">/* Align read or write relative to tank access	*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_WRITE	0x00200000	</span><span class="cm">/* Write to tank memory				*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_READ	0x00100000	</span><span class="cm">/* Read from tank memory			*/</span><span class="cp"></span>

<span class="cp">#define MICROCODEBASE		0x400		</span><span class="cm">/* Microcode data base address			*/</span><span class="cp"></span>

<span class="cm">/* Each DSP microcode instruction is mapped into 2 doublewords 					*/</span>
<span class="cm">/* NOTE: When writing, always write the LO doubleword first.  Reads can be in either order.	*/</span>
<span class="cp">#define LOWORD_OPX_MASK		0x000ffc00	</span><span class="cm">/* Instruction operand X			*/</span><span class="cp"></span>
<span class="cp">#define LOWORD_OPY_MASK		0x000003ff	</span><span class="cm">/* Instruction operand Y			*/</span><span class="cp"></span>
<span class="cp">#define HIWORD_OPCODE_MASK	0x00f00000	</span><span class="cm">/* Instruction opcode				*/</span><span class="cp"></span>
<span class="cp">#define HIWORD_RESULT_MASK	0x000ffc00	</span><span class="cm">/* Instruction result				*/</span><span class="cp"></span>
<span class="cp">#define HIWORD_OPA_MASK		0x000003ff	</span><span class="cm">/* Instruction operand A			*/</span><span class="cp"></span>


<span class="cm">/* Audigy Soundcard have a different instruction format */</span>
<span class="cp">#define A_MICROCODEBASE		0x600</span>
<span class="cp">#define A_LOWORD_OPY_MASK	0x000007ff</span>
<span class="cp">#define A_LOWORD_OPX_MASK	0x007ff000</span>
<span class="cp">#define A_HIWORD_OPCODE_MASK	0x0f000000</span>
<span class="cp">#define A_HIWORD_RESULT_MASK	0x007ff000</span>
<span class="cp">#define A_HIWORD_OPA_MASK	0x000007ff</span>

<span class="cm">/************************************************************************************************/</span>
<span class="cm">/* EMU1010m HANA FPGA registers									*/</span>
<span class="cm">/************************************************************************************************/</span>
<span class="cp">#define EMU_HANA_DESTHI		0x00	</span><span class="cm">/* 0000xxx  3 bits Link Destination */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DESTLO		0x01	</span><span class="cm">/* 00xxxxx  5 bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_SRCHI		0x02	</span><span class="cm">/* 0000xxx  3 bits Link Source */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_SRCLO		0x03	</span><span class="cm">/* 00xxxxx  5 bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_PWR	0x04	</span><span class="cm">/* 000000x  1 bits Audio Dock power */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_PWR_ON		0x01 </span><span class="cm">/* Audio Dock power on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_WCLOCK		0x05	</span><span class="cm">/* 0000xxx  3 bits Word Clock source select  */</span><span class="cp"></span>
					<span class="cm">/* Must be written after power on to reset DLL */</span>
					<span class="cm">/* One is unable to detect the Audio dock without this */</span>
<span class="cp">#define EMU_HANA_WCLOCK_SRC_MASK	0x07</span>
<span class="cp">#define EMU_HANA_WCLOCK_INT_48K		0x00</span>
<span class="cp">#define EMU_HANA_WCLOCK_INT_44_1K	0x01</span>
<span class="cp">#define EMU_HANA_WCLOCK_HANA_SPDIF_IN	0x02</span>
<span class="cp">#define EMU_HANA_WCLOCK_HANA_ADAT_IN	0x03</span>
<span class="cp">#define EMU_HANA_WCLOCK_SYNC_BNCN	0x04</span>
<span class="cp">#define EMU_HANA_WCLOCK_2ND_HANA	0x05</span>
<span class="cp">#define EMU_HANA_WCLOCK_SRC_RESERVED	0x06</span>
<span class="cp">#define EMU_HANA_WCLOCK_OFF		0x07 </span><span class="cm">/* For testing, forces fallback to DEFCLOCK */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_WCLOCK_MULT_MASK	0x18</span>
<span class="cp">#define EMU_HANA_WCLOCK_1X		0x00</span>
<span class="cp">#define EMU_HANA_WCLOCK_2X		0x08</span>
<span class="cp">#define EMU_HANA_WCLOCK_4X		0x10</span>
<span class="cp">#define EMU_HANA_WCLOCK_MULT_RESERVED	0x18</span>

<span class="cp">#define EMU_HANA_DEFCLOCK	0x06	</span><span class="cm">/* 000000x  1 bits Default Word Clock  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DEFCLOCK_48K		0x00</span>
<span class="cp">#define EMU_HANA_DEFCLOCK_44_1K		0x01</span>

<span class="cp">#define EMU_HANA_UNMUTE		0x07	</span><span class="cm">/* 000000x  1 bits Mute all audio outputs  */</span><span class="cp"></span>
<span class="cp">#define EMU_MUTE			0x00</span>
<span class="cp">#define EMU_UNMUTE			0x01</span>

<span class="cp">#define EMU_HANA_FPGA_CONFIG	0x08	</span><span class="cm">/* 00000xx  2 bits Config control of FPGAs  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_FPGA_CONFIG_AUDIODOCK	0x01 </span><span class="cm">/* Set in order to program FPGA on Audio Dock */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_FPGA_CONFIG_HANA	0x02 </span><span class="cm">/* Set in order to program FPGA on Hana */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_IRQ_ENABLE	0x09	</span><span class="cm">/* 000xxxx  4 bits IRQ Enable  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_IRQ_WCLK_CHANGED	0x01</span>
<span class="cp">#define EMU_HANA_IRQ_ADAT		0x02</span>
<span class="cp">#define EMU_HANA_IRQ_DOCK		0x04</span>
<span class="cp">#define EMU_HANA_IRQ_DOCK_LOST		0x08</span>

<span class="cp">#define EMU_HANA_SPDIF_MODE	0x0a	</span><span class="cm">/* 00xxxxx  5 bits SPDIF MODE  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_TX_COMSUMER	0x00</span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_TX_PRO	0x01</span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_TX_NOCOPY	0x02</span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_RX_COMSUMER	0x00</span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_RX_PRO	0x04</span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_RX_NOCOPY	0x08</span>
<span class="cp">#define EMU_HANA_SPDIF_MODE_RX_INVALID	0x10</span>

<span class="cp">#define EMU_HANA_OPTICAL_TYPE	0x0b	</span><span class="cm">/* 00000xx  2 bits ADAT or SPDIF in/out  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_OPTICAL_IN_SPDIF	0x00</span>
<span class="cp">#define EMU_HANA_OPTICAL_IN_ADAT	0x01</span>
<span class="cp">#define EMU_HANA_OPTICAL_OUT_SPDIF	0x00</span>
<span class="cp">#define EMU_HANA_OPTICAL_OUT_ADAT	0x02</span>

<span class="cp">#define EMU_HANA_MIDI_IN		0x0c	</span><span class="cm">/* 000000x  1 bit  Control MIDI  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_IN_FROM_HAMOA	0x00 </span><span class="cm">/* HAMOA MIDI in to Alice 2 MIDI B */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_IN_FROM_DOCK	0x01 </span><span class="cm">/* Audio Dock MIDI in to Alice 2 MIDI B */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_DOCK_LEDS_1	0x0d	</span><span class="cm">/* 000xxxx  4 bit  Audio Dock LEDs  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_1_MIDI1	0x01	</span><span class="cm">/* MIDI 1 LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_1_MIDI2	0x02	</span><span class="cm">/* MIDI 2 LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_1_SMPTE_IN	0x04	</span><span class="cm">/* SMPTE IN LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_1_SMPTE_OUT	0x08	</span><span class="cm">/* SMPTE OUT LED on */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_DOCK_LEDS_2	0x0e	</span><span class="cm">/* 0xxxxxx  6 bit  Audio Dock LEDs  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_2_44K	0x01	</span><span class="cm">/* 44.1 kHz LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_2_48K	0x02	</span><span class="cm">/* 48 kHz LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_2_96K	0x04	</span><span class="cm">/* 96 kHz LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_2_192K	0x08	</span><span class="cm">/* 192 kHz LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_2_LOCK	0x10	</span><span class="cm">/* LOCK LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_2_EXT	0x20	</span><span class="cm">/* EXT LED on */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_DOCK_LEDS_3	0x0f	</span><span class="cm">/* 0xxxxxx  6 bit  Audio Dock LEDs  */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_3_CLIP_A	0x01	</span><span class="cm">/* Mic A Clip LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_3_CLIP_B	0x02	</span><span class="cm">/* Mic B Clip LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_3_SIGNAL_A	0x04	</span><span class="cm">/* Signal A Clip LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_3_SIGNAL_B	0x08	</span><span class="cm">/* Signal B Clip LED on */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_3_MANUAL_CLIP	0x10	</span><span class="cm">/* Manual Clip detection */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_LEDS_3_MANUAL_SIGNAL	0x20	</span><span class="cm">/* Manual Signal detection */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_ADC_PADS	0x10	</span><span class="cm">/* 0000xxx  3 bit  Audio Dock ADC 14dB pads */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_ADC_PAD1	0x01	</span><span class="cm">/* 14dB Attenuation on Audio Dock ADC 1 */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_ADC_PAD2	0x02	</span><span class="cm">/* 14dB Attenuation on Audio Dock ADC 2 */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_ADC_PAD3	0x04	</span><span class="cm">/* 14dB Attenuation on Audio Dock ADC 3 */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_0202_ADC_PAD1	0x08	</span><span class="cm">/* 14dB Attenuation on 0202 ADC 1 */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_DOCK_MISC	0x11	</span><span class="cm">/* 0xxxxxx  6 bit  Audio Dock misc bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC1_MUTE	0x01	</span><span class="cm">/* DAC 1 Mute */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC2_MUTE	0x02	</span><span class="cm">/* DAC 2 Mute */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC3_MUTE	0x04	</span><span class="cm">/* DAC 3 Mute */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC4_MUTE	0x08	</span><span class="cm">/* DAC 4 Mute */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_PHONES_192_DAC1	0x00	</span><span class="cm">/* DAC 1 Headphones source at 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_PHONES_192_DAC2	0x10	</span><span class="cm">/* DAC 2 Headphones source at 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_PHONES_192_DAC3	0x20	</span><span class="cm">/* DAC 3 Headphones source at 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_PHONES_192_DAC4	0x30	</span><span class="cm">/* DAC 4 Headphones source at 192kHz */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_MIDI_OUT	0x12	</span><span class="cm">/* 00xxxxx  5 bit  Source for each MIDI out port */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_OUT_0202	0x01 </span><span class="cm">/* 0202 MIDI from Alice 2. 0 = A, 1 = B */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_OUT_DOCK1	0x02 </span><span class="cm">/* Audio Dock MIDI1 front, from Alice 2. 0 = A, 1 = B */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_OUT_DOCK2	0x04 </span><span class="cm">/* Audio Dock MIDI2 rear, from Alice 2. 0 = A, 1 = B */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_OUT_SYNC2	0x08 </span><span class="cm">/* Sync card. Not the actual MIDI out jack. 0 = A, 1 = B */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MIDI_OUT_LOOP	0x10 </span><span class="cm">/* 0 = bits (3:0) normal. 1 = MIDI loopback enabled. */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_DAC_PADS	0x13	</span><span class="cm">/* 00xxxxx  5 bit  DAC 14dB attenuation pads */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC_PAD1	0x01	</span><span class="cm">/* 14dB Attenuation on AudioDock DAC 1. Left and Right */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC_PAD2	0x02	</span><span class="cm">/* 14dB Attenuation on AudioDock DAC 2. Left and Right */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC_PAD3	0x04	</span><span class="cm">/* 14dB Attenuation on AudioDock DAC 3. Left and Right */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_DOCK_DAC_PAD4	0x08	</span><span class="cm">/* 14dB Attenuation on AudioDock DAC 4. Left and Right */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_0202_DAC_PAD1	0x10	</span><span class="cm">/* 14dB Attenuation on 0202 DAC 1. Left and Right */</span><span class="cp"></span>

<span class="cm">/* 0x14 - 0x1f Unused R/W registers */</span>
<span class="cp">#define EMU_HANA_IRQ_STATUS	0x20	</span><span class="cm">/* 000xxxx  4 bits IRQ Status  */</span><span class="cp"></span>
<span class="cp">#if 0</span><span class="c">  /* Already defined for reg 0x09 IRQ_ENABLE */</span>
<span class="c">#define EMU_HANA_IRQ_WCLK_CHANGED	0x01</span>
<span class="c">#define EMU_HANA_IRQ_ADAT		0x02</span>
<span class="c">#define EMU_HANA_IRQ_DOCK		0x04</span>
<span class="c">#define EMU_HANA_IRQ_DOCK_LOST		0x08</span>
<span class="cp">#endif</span>

<span class="cp">#define EMU_HANA_OPTION_CARDS	0x21	</span><span class="cm">/* 000xxxx  4 bits Presence of option cards */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_OPTION_HAMOA	0x01	</span><span class="cm">/* HAMOA card present */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_OPTION_SYNC	0x02	</span><span class="cm">/* Sync card present */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_OPTION_DOCK_ONLINE	0x04	</span><span class="cm">/* Audio Dock online and FPGA configured */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_OPTION_DOCK_OFFLINE	0x08	</span><span class="cm">/* Audio Dock online and FPGA not configured */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_ID		0x22	</span><span class="cm">/* 1010101  7 bits ID byte &amp; 0x7f = 0x55 */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_MAJOR_REV	0x23	</span><span class="cm">/* 0000xxx  3 bit  Hana FPGA Major rev */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_MINOR_REV	0x24	</span><span class="cm">/* 0000xxx  3 bit  Hana FPGA Minor rev */</span><span class="cp"></span>

<span class="cp">#define EMU_DOCK_MAJOR_REV	0x25	</span><span class="cm">/* 0000xxx  3 bit  Audio Dock FPGA Major rev */</span><span class="cp"></span>
<span class="cp">#define EMU_DOCK_MINOR_REV	0x26	</span><span class="cm">/* 0000xxx  3 bit  Audio Dock FPGA Minor rev */</span><span class="cp"></span>

<span class="cp">#define EMU_DOCK_BOARD_ID	0x27	</span><span class="cm">/* 00000xx  2 bits Audio Dock ID pins */</span><span class="cp"></span>
<span class="cp">#define EMU_DOCK_BOARD_ID0	0x00	</span><span class="cm">/* ID bit 0 */</span><span class="cp"></span>
<span class="cp">#define EMU_DOCK_BOARD_ID1	0x03	</span><span class="cm">/* ID bit 1 */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_WC_SPDIF_HI	0x28	</span><span class="cm">/* 0xxxxxx  6 bit  SPDIF IN Word clock, upper 6 bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_WC_SPDIF_LO	0x29	</span><span class="cm">/* 0xxxxxx  6 bit  SPDIF IN Word clock, lower 6 bits */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_WC_ADAT_HI	0x2a	</span><span class="cm">/* 0xxxxxx  6 bit  ADAT IN Word clock, upper 6 bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_WC_ADAT_LO	0x2b	</span><span class="cm">/* 0xxxxxx  6 bit  ADAT IN Word clock, lower 6 bits */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA_WC_BNC_LO	0x2c	</span><span class="cm">/* 0xxxxxx  6 bit  BNC IN Word clock, lower 6 bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA_WC_BNC_HI	0x2d	</span><span class="cm">/* 0xxxxxx  6 bit  BNC IN Word clock, upper 6 bits */</span><span class="cp"></span>

<span class="cp">#define EMU_HANA2_WC_SPDIF_HI	0x2e	</span><span class="cm">/* 0xxxxxx  6 bit  HANA2 SPDIF IN Word clock, upper 6 bits */</span><span class="cp"></span>
<span class="cp">#define EMU_HANA2_WC_SPDIF_LO	0x2f	</span><span class="cm">/* 0xxxxxx  6 bit  HANA2 SPDIF IN Word clock, lower 6 bits */</span><span class="cp"></span>
<span class="cm">/* 0x30 - 0x3f Unused Read only registers */</span>

<span class="cm">/************************************************************************************************/</span>
<span class="cm">/* EMU1010m HANA Destinations									*/</span>
<span class="cm">/************************************************************************************************/</span>
<span class="cm">/* Hana, original 1010,1212,1820 using Alice2</span>
<span class="cm"> * Destiniations for SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00, 0x00-0x0f: 16 EMU32 channels to Alice2</span>
<span class="cm"> * 0x01, 0x10-0x1f: 32 Elink channels to Audio Dock</span>
<span class="cm"> * 0x01, 0x00: Dock DAC 1 Left</span>
<span class="cm"> * 0x01, 0x04: Dock DAC 1 Right</span>
<span class="cm"> * 0x01, 0x08: Dock DAC 2 Left</span>
<span class="cm"> * 0x01, 0x0c: Dock DAC 2 Right</span>
<span class="cm"> * 0x01, 0x10: Dock DAC 3 Left</span>
<span class="cm"> * 0x01, 0x12: PHONES Left</span>
<span class="cm"> * 0x01, 0x14: Dock DAC 3 Right</span>
<span class="cm"> * 0x01, 0x16: PHONES Right</span>
<span class="cm"> * 0x01, 0x18: Dock DAC 4 Left</span>
<span class="cm"> * 0x01, 0x1a: S/PDIF Left</span>
<span class="cm"> * 0x01, 0x1c: Dock DAC 4 Right</span>
<span class="cm"> * 0x01, 0x1e: S/PDIF Right</span>
<span class="cm"> * 0x02, 0x00: Hana S/PDIF Left</span>
<span class="cm"> * 0x02, 0x01: Hana S/PDIF Right</span>
<span class="cm"> * 0x03, 0x00: Hanoa DAC Left</span>
<span class="cm"> * 0x03, 0x01: Hanoa DAC Right</span>
<span class="cm"> * 0x04, 0x00-0x07: Hana ADAT</span>
<span class="cm"> * 0x05, 0x00: I2S0 Left to Alice2</span>
<span class="cm"> * 0x05, 0x01: I2S0 Right to Alice2</span>
<span class="cm"> * 0x06, 0x00: I2S0 Left to Alice2</span>
<span class="cm"> * 0x06, 0x01: I2S0 Right to Alice2</span>
<span class="cm"> * 0x07, 0x00: I2S0 Left to Alice2</span>
<span class="cm"> * 0x07, 0x01: I2S0 Right to Alice2</span>
<span class="cm"> *</span>
<span class="cm"> * Hana2 never released, but used Tina</span>
<span class="cm"> * Not needed.</span>
<span class="cm"> *</span>
<span class="cm"> * Hana3, rev2 1010,1212,1616 using Tina</span>
<span class="cm"> * Destinations for SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00, 0x00-0x0f: 16 EMU32A channels to Tina</span>
<span class="cm"> * 0x01, 0x10-0x1f: 32 EDI channels to Micro Dock</span>
<span class="cm"> * 0x01, 0x00: Dock DAC 1 Left</span>
<span class="cm"> * 0x01, 0x04: Dock DAC 1 Right</span>
<span class="cm"> * 0x01, 0x08: Dock DAC 2 Left</span>
<span class="cm"> * 0x01, 0x0c: Dock DAC 2 Right</span>
<span class="cm"> * 0x01, 0x10: Dock DAC 3 Left</span>
<span class="cm"> * 0x01, 0x12: Dock S/PDIF Left</span>
<span class="cm"> * 0x01, 0x14: Dock DAC 3 Right</span>
<span class="cm"> * 0x01, 0x16: Dock S/PDIF Right</span>
<span class="cm"> * 0x01, 0x18-0x1f: Dock ADAT 0-7</span>
<span class="cm"> * 0x02, 0x00: Hana3 S/PDIF Left</span>
<span class="cm"> * 0x02, 0x01: Hana3 S/PDIF Right</span>
<span class="cm"> * 0x03, 0x00: Hanoa DAC Left</span>
<span class="cm"> * 0x03, 0x01: Hanoa DAC Right</span>
<span class="cm"> * 0x04, 0x00-0x07: Hana3 ADAT 0-7</span>
<span class="cm"> * 0x05, 0x00-0x0f: 16 EMU32B channels to Tina</span>
<span class="cm"> * 0x06-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * HanaLite, rev1 0404 using Alice2</span>
<span class="cm"> * Destiniations for SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00, 0x00-0x0f: 16 EMU32 channels to Alice2</span>
<span class="cm"> * 0x01: Not used</span>
<span class="cm"> * 0x02, 0x00: S/PDIF Left</span>
<span class="cm"> * 0x02, 0x01: S/PDIF Right</span>
<span class="cm"> * 0x03, 0x00: DAC Left</span>
<span class="cm"> * 0x03, 0x01: DAC Right</span>
<span class="cm"> * 0x04-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * HanaLiteLite, rev2 0404 using Alice2</span>
<span class="cm"> * Destiniations for SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00, 0x00-0x0f: 16 EMU32 channels to Alice2</span>
<span class="cm"> * 0x01: Not used</span>
<span class="cm"> * 0x02, 0x00: S/PDIF Left</span>
<span class="cm"> * 0x02, 0x01: S/PDIF Right</span>
<span class="cm"> * 0x03, 0x00: DAC Left</span>
<span class="cm"> * 0x03, 0x01: DAC Right</span>
<span class="cm"> * 0x04-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * Mana, Cardbus 1616 using Tina2</span>
<span class="cm"> * Destinations for SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00, 0x00-0x0f: 16 EMU32A channels to Tina2</span>
<span class="cm"> * 0x01, 0x10-0x1f: 32 EDI channels to Micro Dock</span>
<span class="cm"> * 0x01, 0x00: Dock DAC 1 Left</span>
<span class="cm"> * 0x01, 0x04: Dock DAC 1 Right</span>
<span class="cm"> * 0x01, 0x08: Dock DAC 2 Left</span>
<span class="cm"> * 0x01, 0x0c: Dock DAC 2 Right</span>
<span class="cm"> * 0x01, 0x10: Dock DAC 3 Left</span>
<span class="cm"> * 0x01, 0x12: Dock S/PDIF Left</span>
<span class="cm"> * 0x01, 0x14: Dock DAC 3 Right</span>
<span class="cm"> * 0x01, 0x16: Dock S/PDIF Right</span>
<span class="cm"> * 0x01, 0x18-0x1f: Dock ADAT 0-7</span>
<span class="cm"> * 0x02: Not used</span>
<span class="cm"> * 0x03, 0x00: Mana DAC Left</span>
<span class="cm"> * 0x03, 0x01: Mana DAC Right</span>
<span class="cm"> * 0x04, 0x00-0x0f: 16 EMU32B channels to Tina2</span>
<span class="cm"> * 0x05-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cm">/* 32-bit destinations of signal in the Hana FPGA. Destinations are either</span>
<span class="cm"> * physical outputs of Hana, or outputs going to Alice2 (audigy) for capture</span>
<span class="cm"> * - 16 x EMU_DST_ALICE2_EMU32_X.</span>
<span class="cm"> */</span>
<span class="cm">/* EMU32 = 32-bit serial channel between Alice2 (audigy) and Hana (FPGA) */</span>
<span class="cm">/* EMU_DST_ALICE2_EMU32_X - data channels from Hana to Alice2 used for capture.</span>
<span class="cm"> * Which data is fed into a EMU_DST_ALICE2_EMU32_X channel in Hana depends on</span>
<span class="cm"> * setup of mixer control for each destination - see emumixer.c -</span>
<span class="cm"> * snd_emu1010_output_enum_ctls[], snd_emu1010_input_enum_ctls[]</span>
<span class="cm"> */</span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_0	0x000f	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_1	0x0000	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_2	0x0001	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_3	0x0002	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_4	0x0003	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_5	0x0004	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_6	0x0005	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_7	0x0006	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_8	0x0007	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_9	0x0008	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_A	0x0009	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_B	0x000a	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_C	0x000b	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_D	0x000c	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_E	0x000d	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE2_EMU32_F	0x000e	</span><span class="cm">/* 16 EMU32 channels to Alice2 +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_LEFT1	0x0100	</span><span class="cm">/* Audio Dock DAC1 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_LEFT2	0x0101	</span><span class="cm">/* Audio Dock DAC1 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_LEFT3	0x0102	</span><span class="cm">/* Audio Dock DAC1 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_LEFT4	0x0103	</span><span class="cm">/* Audio Dock DAC1 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_RIGHT1	0x0104	</span><span class="cm">/* Audio Dock DAC1 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_RIGHT2	0x0105	</span><span class="cm">/* Audio Dock DAC1 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_RIGHT3	0x0106	</span><span class="cm">/* Audio Dock DAC1 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC1_RIGHT4	0x0107	</span><span class="cm">/* Audio Dock DAC1 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_LEFT1	0x0108	</span><span class="cm">/* Audio Dock DAC2 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_LEFT2	0x0109	</span><span class="cm">/* Audio Dock DAC2 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_LEFT3	0x010a	</span><span class="cm">/* Audio Dock DAC2 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_LEFT4	0x010b	</span><span class="cm">/* Audio Dock DAC2 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_RIGHT1	0x010c	</span><span class="cm">/* Audio Dock DAC2 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_RIGHT2	0x010d	</span><span class="cm">/* Audio Dock DAC2 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_RIGHT3	0x010e	</span><span class="cm">/* Audio Dock DAC2 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC2_RIGHT4	0x010f	</span><span class="cm">/* Audio Dock DAC2 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_LEFT1	0x0110	</span><span class="cm">/* Audio Dock DAC1 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_LEFT2	0x0111	</span><span class="cm">/* Audio Dock DAC1 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_LEFT3	0x0112	</span><span class="cm">/* Audio Dock DAC1 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_LEFT4	0x0113	</span><span class="cm">/* Audio Dock DAC1 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_PHONES_LEFT1	0x0112	</span><span class="cm">/* Audio Dock PHONES Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_PHONES_LEFT2	0x0113	</span><span class="cm">/* Audio Dock PHONES Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_RIGHT1	0x0114	</span><span class="cm">/* Audio Dock DAC1 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_RIGHT2	0x0115	</span><span class="cm">/* Audio Dock DAC1 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_RIGHT3	0x0116	</span><span class="cm">/* Audio Dock DAC1 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC3_RIGHT4	0x0117	</span><span class="cm">/* Audio Dock DAC1 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_PHONES_RIGHT1	0x0116	</span><span class="cm">/* Audio Dock PHONES Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_PHONES_RIGHT2	0x0117	</span><span class="cm">/* Audio Dock PHONES Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_LEFT1	0x0118	</span><span class="cm">/* Audio Dock DAC2 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_LEFT2	0x0119	</span><span class="cm">/* Audio Dock DAC2 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_LEFT3	0x011a	</span><span class="cm">/* Audio Dock DAC2 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_LEFT4	0x011b	</span><span class="cm">/* Audio Dock DAC2 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_SPDIF_LEFT1	0x011a	</span><span class="cm">/* Audio Dock SPDIF Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_SPDIF_LEFT2	0x011b	</span><span class="cm">/* Audio Dock SPDIF Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_RIGHT1	0x011c	</span><span class="cm">/* Audio Dock DAC2 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_RIGHT2	0x011d	</span><span class="cm">/* Audio Dock DAC2 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_RIGHT3	0x011e	</span><span class="cm">/* Audio Dock DAC2 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_DAC4_RIGHT4	0x011f	</span><span class="cm">/* Audio Dock DAC2 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_SPDIF_RIGHT1	0x011e	</span><span class="cm">/* Audio Dock SPDIF Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_DOCK_SPDIF_RIGHT2	0x011f	</span><span class="cm">/* Audio Dock SPDIF Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HANA_SPDIF_LEFT1	0x0200	</span><span class="cm">/* Hana SPDIF Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HANA_SPDIF_LEFT2	0x0202	</span><span class="cm">/* Hana SPDIF Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HANA_SPDIF_RIGHT1	0x0201	</span><span class="cm">/* Hana SPDIF Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HANA_SPDIF_RIGHT2	0x0203	</span><span class="cm">/* Hana SPDIF Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_LEFT1	0x0300	</span><span class="cm">/* Hamoa DAC Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_LEFT2	0x0302	</span><span class="cm">/* Hamoa DAC Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_LEFT3	0x0304	</span><span class="cm">/* Hamoa DAC Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_LEFT4	0x0306	</span><span class="cm">/* Hamoa DAC Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_RIGHT1	0x0301	</span><span class="cm">/* Hamoa DAC Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_RIGHT2	0x0303	</span><span class="cm">/* Hamoa DAC Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_RIGHT3	0x0305	</span><span class="cm">/* Hamoa DAC Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HAMOA_DAC_RIGHT4	0x0307	</span><span class="cm">/* Hamoa DAC Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_HANA_ADAT	0x0400	</span><span class="cm">/* Hana ADAT 8 channel out +0 to +7 */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE_I2S0_LEFT		0x0500	</span><span class="cm">/* Alice2 I2S0 Left */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE_I2S0_RIGHT	0x0501	</span><span class="cm">/* Alice2 I2S0 Right */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE_I2S1_LEFT		0x0600	</span><span class="cm">/* Alice2 I2S1 Left */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE_I2S1_RIGHT	0x0601	</span><span class="cm">/* Alice2 I2S1 Right */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE_I2S2_LEFT		0x0700	</span><span class="cm">/* Alice2 I2S2 Left */</span><span class="cp"></span>
<span class="cp">#define EMU_DST_ALICE_I2S2_RIGHT	0x0701	</span><span class="cm">/* Alice2 I2S2 Right */</span><span class="cp"></span>

<span class="cm">/* Additional destinations for 1616(M)/Microdock */</span>
<span class="cm">/* Microdock S/PDIF OUT Left, 1st or 48kHz only */</span>
<span class="cp">#define EMU_DST_MDOCK_SPDIF_LEFT1	0x0112</span>
<span class="cm">/* Microdock S/PDIF OUT Left, 2nd or 96kHz */</span>
<span class="cp">#define EMU_DST_MDOCK_SPDIF_LEFT2	0x0113</span>
<span class="cm">/* Microdock S/PDIF OUT Right, 1st or 48kHz only */</span>
<span class="cp">#define EMU_DST_MDOCK_SPDIF_RIGHT1	0x0116</span>
<span class="cm">/* Microdock S/PDIF OUT Right, 2nd or 96kHz  */</span>
<span class="cp">#define EMU_DST_MDOCK_SPDIF_RIGHT2	0x0117</span>
<span class="cm">/* Microdock S/PDIF ADAT 8 channel out +8 to +f */</span>
<span class="cp">#define EMU_DST_MDOCK_ADAT		0x0118</span>

<span class="cm">/* Headphone jack on 1010 cardbus? 44.1/48kHz only? */</span>
<span class="cp">#define EMU_DST_MANA_DAC_LEFT		0x0300</span>
<span class="cm">/* Headphone jack on 1010 cardbus? 44.1/48kHz only? */</span>
<span class="cp">#define EMU_DST_MANA_DAC_RIGHT		0x0301</span>

<span class="cm">/************************************************************************************************/</span>
<span class="cm">/* EMU1010m HANA Sources									*/</span>
<span class="cm">/************************************************************************************************/</span>
<span class="cm">/* Hana, original 1010,1212,1820 using Alice2</span>
<span class="cm"> * Sources SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00,0x00-0x1f: Silence</span>
<span class="cm"> * 0x01, 0x10-0x1f: 32 Elink channels from Audio Dock</span>
<span class="cm"> * 0x01, 0x00: Dock Mic A</span>
<span class="cm"> * 0x01, 0x04: Dock Mic B</span>
<span class="cm"> * 0x01, 0x08: Dock ADC 1 Left</span>
<span class="cm"> * 0x01, 0x0c: Dock ADC 1 Right</span>
<span class="cm"> * 0x01, 0x10: Dock ADC 2 Left</span>
<span class="cm"> * 0x01, 0x14: Dock ADC 2 Right</span>
<span class="cm"> * 0x01, 0x18: Dock ADC 3 Left</span>
<span class="cm"> * 0x01, 0x1c: Dock ADC 3 Right</span>
<span class="cm"> * 0x02, 0x00: Hana ADC Left</span>
<span class="cm"> * 0x02, 0x01: Hana ADC Right</span>
<span class="cm"> * 0x03, 0x00-0x0f: 16 inputs from Alice2 Emu32A output</span>
<span class="cm"> * 0x03, 0x10-0x1f: 16 inputs from Alice2 Emu32B output</span>
<span class="cm"> * 0x04, 0x00-0x07: Hana ADAT</span>
<span class="cm"> * 0x05, 0x00: Hana S/PDIF Left</span>
<span class="cm"> * 0x05, 0x01: Hana S/PDIF Right</span>
<span class="cm"> * 0x06-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * Hana2 never released, but used Tina</span>
<span class="cm"> * Not needed.</span>
<span class="cm"> *</span>
<span class="cm"> * Hana3, rev2 1010,1212,1616 using Tina</span>
<span class="cm"> * Sources SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00,0x00-0x1f: Silence</span>
<span class="cm"> * 0x01, 0x10-0x1f: 32 Elink channels from Audio Dock</span>
<span class="cm"> * 0x01, 0x00: Dock Mic A</span>
<span class="cm"> * 0x01, 0x04: Dock Mic B</span>
<span class="cm"> * 0x01, 0x08: Dock ADC 1 Left</span>
<span class="cm"> * 0x01, 0x0c: Dock ADC 1 Right</span>
<span class="cm"> * 0x01, 0x10: Dock ADC 2 Left</span>
<span class="cm"> * 0x01, 0x12: Dock S/PDIF Left</span>
<span class="cm"> * 0x01, 0x14: Dock ADC 2 Right</span>
<span class="cm"> * 0x01, 0x16: Dock S/PDIF Right</span>
<span class="cm"> * 0x01, 0x18-0x1f: Dock ADAT 0-7</span>
<span class="cm"> * 0x01, 0x18: Dock ADC 3 Left</span>
<span class="cm"> * 0x01, 0x1c: Dock ADC 3 Right</span>
<span class="cm"> * 0x02, 0x00: Hanoa ADC Left</span>
<span class="cm"> * 0x02, 0x01: Hanoa ADC Right</span>
<span class="cm"> * 0x03, 0x00-0x0f: 16 inputs from Tina Emu32A output</span>
<span class="cm"> * 0x03, 0x10-0x1f: 16 inputs from Tina Emu32B output</span>
<span class="cm"> * 0x04, 0x00-0x07: Hana3 ADAT</span>
<span class="cm"> * 0x05, 0x00: Hana3 S/PDIF Left</span>
<span class="cm"> * 0x05, 0x01: Hana3 S/PDIF Right</span>
<span class="cm"> * 0x06-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * HanaLite, rev1 0404 using Alice2</span>
<span class="cm"> * Sources SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00,0x00-0x1f: Silence</span>
<span class="cm"> * 0x01: Not used</span>
<span class="cm"> * 0x02, 0x00: ADC Left</span>
<span class="cm"> * 0x02, 0x01: ADC Right</span>
<span class="cm"> * 0x03, 0x00-0x0f: 16 inputs from Alice2 Emu32A output</span>
<span class="cm"> * 0x03, 0x10-0x1f: 16 inputs from Alice2 Emu32B output</span>
<span class="cm"> * 0x04: Not used</span>
<span class="cm"> * 0x05, 0x00: S/PDIF Left</span>
<span class="cm"> * 0x05, 0x01: S/PDIF Right</span>
<span class="cm"> * 0x06-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * HanaLiteLite, rev2 0404 using Alice2</span>
<span class="cm"> * Sources SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00,0x00-0x1f: Silence</span>
<span class="cm"> * 0x01: Not used</span>
<span class="cm"> * 0x02, 0x00: ADC Left</span>
<span class="cm"> * 0x02, 0x01: ADC Right</span>
<span class="cm"> * 0x03, 0x00-0x0f: 16 inputs from Alice2 Emu32A output</span>
<span class="cm"> * 0x03, 0x10-0x1f: 16 inputs from Alice2 Emu32B output</span>
<span class="cm"> * 0x04: Not used</span>
<span class="cm"> * 0x05, 0x00: S/PDIF Left</span>
<span class="cm"> * 0x05, 0x01: S/PDIF Right</span>
<span class="cm"> * 0x06-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> * Mana, Cardbus 1616 using Tina2</span>
<span class="cm"> * Sources SRATEX = 1X rates: 44.1 kHz or 48 kHz</span>
<span class="cm"> * 0x00,0x00-0x1f: Silence</span>
<span class="cm"> * 0x01, 0x10-0x1f: 32 Elink channels from Audio Dock</span>
<span class="cm"> * 0x01, 0x00: Dock Mic A</span>
<span class="cm"> * 0x01, 0x04: Dock Mic B</span>
<span class="cm"> * 0x01, 0x08: Dock ADC 1 Left</span>
<span class="cm"> * 0x01, 0x0c: Dock ADC 1 Right</span>
<span class="cm"> * 0x01, 0x10: Dock ADC 2 Left</span>
<span class="cm"> * 0x01, 0x12: Dock S/PDIF Left</span>
<span class="cm"> * 0x01, 0x14: Dock ADC 2 Right</span>
<span class="cm"> * 0x01, 0x16: Dock S/PDIF Right</span>
<span class="cm"> * 0x01, 0x18-0x1f: Dock ADAT 0-7</span>
<span class="cm"> * 0x01, 0x18: Dock ADC 3 Left</span>
<span class="cm"> * 0x01, 0x1c: Dock ADC 3 Right</span>
<span class="cm"> * 0x02: Not used</span>
<span class="cm"> * 0x03, 0x00-0x0f: 16 inputs from Tina Emu32A output</span>
<span class="cm"> * 0x03, 0x10-0x1f: 16 inputs from Tina Emu32B output</span>
<span class="cm"> * 0x04-0x07: Not used</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cm">/* 32-bit sources of signal in the Hana FPGA. The sources are routed to</span>
<span class="cm"> * destinations using mixer control for each destination - see emumixer.c</span>
<span class="cm"> * Sources are either physical inputs of FPGA,</span>
<span class="cm"> * or outputs from Alice (audigy) - 16 x EMU_SRC_ALICE_EMU32A +</span>
<span class="cm"> * 16 x EMU_SRC_ALICE_EMU32B</span>
<span class="cm"> */</span>
<span class="cp">#define EMU_SRC_SILENCE		0x0000	</span><span class="cm">/* Silence */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_A1	0x0100	</span><span class="cm">/* Audio Dock Mic A, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_A2	0x0101	</span><span class="cm">/* Audio Dock Mic A, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_A3	0x0102	</span><span class="cm">/* Audio Dock Mic A, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_A4	0x0103	</span><span class="cm">/* Audio Dock Mic A, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_B1	0x0104	</span><span class="cm">/* Audio Dock Mic B, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_B2	0x0105	</span><span class="cm">/* Audio Dock Mic B, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_B3	0x0106	</span><span class="cm">/* Audio Dock Mic B, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_MIC_B4	0x0107	</span><span class="cm">/* Audio Dock Mic B, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_LEFT1	0x0108	</span><span class="cm">/* Audio Dock ADC1 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_LEFT2	0x0109	</span><span class="cm">/* Audio Dock ADC1 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_LEFT3	0x010a	</span><span class="cm">/* Audio Dock ADC1 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_LEFT4	0x010b	</span><span class="cm">/* Audio Dock ADC1 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_RIGHT1	0x010c	</span><span class="cm">/* Audio Dock ADC1 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_RIGHT2	0x010d	</span><span class="cm">/* Audio Dock ADC1 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_RIGHT3	0x010e	</span><span class="cm">/* Audio Dock ADC1 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC1_RIGHT4	0x010f	</span><span class="cm">/* Audio Dock ADC1 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_LEFT1	0x0110	</span><span class="cm">/* Audio Dock ADC2 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_LEFT2	0x0111	</span><span class="cm">/* Audio Dock ADC2 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_LEFT3	0x0112	</span><span class="cm">/* Audio Dock ADC2 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_LEFT4	0x0113	</span><span class="cm">/* Audio Dock ADC2 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_RIGHT1	0x0114	</span><span class="cm">/* Audio Dock ADC2 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_RIGHT2	0x0115	</span><span class="cm">/* Audio Dock ADC2 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_RIGHT3	0x0116	</span><span class="cm">/* Audio Dock ADC2 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC2_RIGHT4	0x0117	</span><span class="cm">/* Audio Dock ADC2 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_LEFT1	0x0118	</span><span class="cm">/* Audio Dock ADC3 Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_LEFT2	0x0119	</span><span class="cm">/* Audio Dock ADC3 Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_LEFT3	0x011a	</span><span class="cm">/* Audio Dock ADC3 Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_LEFT4	0x011b	</span><span class="cm">/* Audio Dock ADC3 Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_RIGHT1	0x011c	</span><span class="cm">/* Audio Dock ADC3 Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_RIGHT2	0x011d	</span><span class="cm">/* Audio Dock ADC3 Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_RIGHT3	0x011e	</span><span class="cm">/* Audio Dock ADC3 Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_DOCK_ADC3_RIGHT4	0x011f	</span><span class="cm">/* Audio Dock ADC3 Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_LEFT1	0x0200	</span><span class="cm">/* Hamoa ADC Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_LEFT2	0x0202	</span><span class="cm">/* Hamoa ADC Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_LEFT3	0x0204	</span><span class="cm">/* Hamoa ADC Left, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_LEFT4	0x0206	</span><span class="cm">/* Hamoa ADC Left, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_RIGHT1	0x0201	</span><span class="cm">/* Hamoa ADC Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_RIGHT2	0x0203	</span><span class="cm">/* Hamoa ADC Right, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_RIGHT3	0x0205	</span><span class="cm">/* Hamoa ADC Right, 3rd or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HAMOA_ADC_RIGHT4	0x0207	</span><span class="cm">/* Hamoa ADC Right, 4th or 192kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_ALICE_EMU32A		0x0300	</span><span class="cm">/* Alice2 EMU32a 16 outputs. +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_ALICE_EMU32B		0x0310	</span><span class="cm">/* Alice2 EMU32b 16 outputs. +0 to +0xf */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HANA_ADAT	0x0400	</span><span class="cm">/* Hana ADAT 8 channel in +0 to +7 */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HANA_SPDIF_LEFT1	0x0500	</span><span class="cm">/* Hana SPDIF Left, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HANA_SPDIF_LEFT2	0x0502	</span><span class="cm">/* Hana SPDIF Left, 2nd or 96kHz */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HANA_SPDIF_RIGHT1	0x0501	</span><span class="cm">/* Hana SPDIF Right, 1st or 48kHz only */</span><span class="cp"></span>
<span class="cp">#define EMU_SRC_HANA_SPDIF_RIGHT2	0x0503	</span><span class="cm">/* Hana SPDIF Right, 2nd or 96kHz */</span><span class="cp"></span>

<span class="cm">/* Additional inputs for 1616(M)/Microdock */</span>
<span class="cm">/* Microdock S/PDIF Left, 1st or 48kHz only */</span>
<span class="cp">#define EMU_SRC_MDOCK_SPDIF_LEFT1	0x0112</span>
<span class="cm">/* Microdock S/PDIF Left, 2nd or 96kHz */</span>
<span class="cp">#define EMU_SRC_MDOCK_SPDIF_LEFT2	0x0113</span>
<span class="cm">/* Microdock S/PDIF Right, 1st or 48kHz only */</span>
<span class="cp">#define EMU_SRC_MDOCK_SPDIF_RIGHT1	0x0116</span>
<span class="cm">/* Microdock S/PDIF Right, 2nd or 96kHz */</span>
<span class="cp">#define EMU_SRC_MDOCK_SPDIF_RIGHT2	0x0117</span>
<span class="cm">/* Microdock ADAT 8 channel in +8 to +f */</span>
<span class="cp">#define EMU_SRC_MDOCK_ADAT		0x0118</span>

<span class="cm">/* 0x600 and 0x700 no used */</span>

<span class="cm">/* ------------------- STRUCTURES -------------------- */</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">EMU10K1_EFX</span><span class="p">,</span>
	<span class="n">EMU10K1_PCM</span><span class="p">,</span>
	<span class="n">EMU10K1_SYNTH</span><span class="p">,</span>
	<span class="n">EMU10K1_MIDI</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">number</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">use</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
	    <span class="nl">pcm:</span> <span class="mi">1</span><span class="p">,</span>
	    <span class="nl">efx:</span> <span class="mi">1</span><span class="p">,</span>
	    <span class="nl">synth:</span> <span class="mi">1</span><span class="p">,</span>
	    <span class="nl">midi:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="o">*</span><span class="n">pvoice</span><span class="p">);</span>

	<span class="k">struct</span> <span class="n">snd_emu10k1_pcm</span> <span class="o">*</span><span class="n">epcm</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PLAYBACK_EMUVOICE</span><span class="p">,</span>
	<span class="n">PLAYBACK_EFX</span><span class="p">,</span>
	<span class="n">CAPTURE_AC97ADC</span><span class="p">,</span>
	<span class="n">CAPTURE_AC97MIC</span><span class="p">,</span>
	<span class="n">CAPTURE_EFX</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_pcm</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">type</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">substream</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="o">*</span><span class="n">voices</span><span class="p">[</span><span class="n">NUM_EFX_PLAYBACK</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="o">*</span><span class="n">extra</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">running</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">first_ptr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">memblk</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">start_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ccca_start_addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_ipr</span><span class="p">;</span>	<span class="cm">/* interrupt acknowledge mask */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_inte</span><span class="p">;</span>	<span class="cm">/* interrupt enable mask */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_ba_reg</span><span class="p">;</span>	<span class="cm">/* buffer address register */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_bs_reg</span><span class="p">;</span>	<span class="cm">/* buffer size register */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_idx_reg</span><span class="p">;</span>	<span class="cm">/* buffer index register */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_cr_val</span><span class="p">;</span>	<span class="cm">/* control value */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_cr_val2</span><span class="p">;</span>	<span class="cm">/* control value2 (for audigy) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_bs_val</span><span class="p">;</span>	<span class="cm">/* buffer size value */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">capture_bufsize</span><span class="p">;</span>	<span class="cm">/* buffer size in bytes */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_pcm_mixer</span> <span class="p">{</span>
	<span class="cm">/* mono, left, right x 8 sends (4 on emu10k1) */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">send_routing</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">send_volume</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">attn</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_pcm</span> <span class="o">*</span><span class="n">epcm</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define snd_emu10k1_compose_send_routing(route) \</span>
<span class="cp">((route[0] | (route[1] &lt;&lt; 4) | (route[2] &lt;&lt; 8) | (route[3] &lt;&lt; 12)) &lt;&lt; 16)</span>

<span class="cp">#define snd_emu10k1_compose_audigy_fxrt1(route) \</span>
<span class="cp">((unsigned int)route[0] | ((unsigned int)route[1] &lt;&lt; 8) | ((unsigned int)route[2] &lt;&lt; 16) | ((unsigned int)route[3] &lt;&lt; 24))</span>

<span class="cp">#define snd_emu10k1_compose_audigy_fxrt2(route) \</span>
<span class="cp">((unsigned int)route[4] | ((unsigned int)route[5] &lt;&lt; 8) | ((unsigned int)route[6] &lt;&lt; 16) | ((unsigned int)route[7] &lt;&lt; 24))</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_memblk</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="n">mem</span><span class="p">;</span>
	<span class="cm">/* private part */</span>
	<span class="kt">int</span> <span class="n">first_page</span><span class="p">,</span> <span class="n">last_page</span><span class="p">,</span> <span class="n">pages</span><span class="p">,</span> <span class="n">mapped_page</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">map_locked</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">mapped_link</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">mapped_order_link</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define snd_emu10k1_memblk_offset(blk)	(((blk)-&gt;mapped_page &lt;&lt; PAGE_SHIFT) | ((blk)-&gt;mem.offset &amp; (PAGE_SIZE - 1)))</span>

<span class="cp">#define EMU10K1_MAX_TRAM_BLOCKS_PER_CODE	16</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_ctl</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>		<span class="cm">/* list link container */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vcount</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>		<span class="cm">/* count of GPR (1..16) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* GPR number(s) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">value</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">min</span><span class="p">;</span>		<span class="cm">/* minimum range */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">max</span><span class="p">;</span>		<span class="cm">/* maximum range */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">translation</span><span class="p">;</span>	<span class="cm">/* translation type (EMU10K1_GPR_TRANSLATION*) */</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">kcontrol</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="n">snd_fx8010_irq_handler_t</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_irq</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_irq</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
	<span class="n">snd_fx8010_irq_handler_t</span> <span class="o">*</span><span class="n">handler</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_running</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_pcm</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">valid</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
		     <span class="nl">opened:</span> <span class="mi">1</span><span class="p">,</span>
		     <span class="nl">active:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">channels</span><span class="p">;</span>		<span class="cm">/* 16-bit channels count */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tram_start</span><span class="p">;</span>	<span class="cm">/* initial ring buffer position in TRAM (in samples) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">buffer_size</span><span class="p">;</span>	<span class="cm">/* count of buffered samples */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_size</span><span class="p">;</span>		<span class="cm">/* GPR containing size of ring buffer in samples (host) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_ptr</span><span class="p">;</span>		<span class="cm">/* GPR containing current pointer in the ring buffer (host = reset, FX8010) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_count</span><span class="p">;</span>	<span class="cm">/* GPR containing count of samples between two interrupts (host) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_tmpcount</span><span class="p">;</span>	<span class="cm">/* GPR containing current count of samples to interrupt (host = set, FX8010) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_trigger</span><span class="p">;</span>	<span class="cm">/* GPR containing trigger (activate) information (host) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_running</span><span class="p">;</span>	<span class="cm">/* GPR containing info if PCM is running (FX8010) */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">etram</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>	<span class="cm">/* external TRAM address &amp; data */</span>
	<span class="k">struct</span> <span class="n">snd_pcm_indirect</span> <span class="n">pcm_rec</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tram_pos</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tram_shift</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_irq</span> <span class="o">*</span><span class="n">irq</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">fxbus_mask</span><span class="p">;</span>	<span class="cm">/* used FX buses (bitmask) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">extin_mask</span><span class="p">;</span>	<span class="cm">/* used external inputs (bitmask) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">extout_mask</span><span class="p">;</span>	<span class="cm">/* used external outputs (bitmask) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pad1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">itram_size</span><span class="p">;</span>	<span class="cm">/* internal TRAM size in samples */</span>
	<span class="k">struct</span> <span class="n">snd_dma_buffer</span> <span class="n">etram_pages</span><span class="p">;</span> <span class="cm">/* external TRAM pages and size */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dbg</span><span class="p">;</span>		<span class="cm">/* FX debugger register */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">gpr_size</span><span class="p">;</span>			<span class="cm">/* size of allocated GPR controls */</span>
	<span class="kt">int</span> <span class="n">gpr_count</span><span class="p">;</span>			<span class="cm">/* count of used kcontrols */</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">gpr_ctl</span><span class="p">;</span>	<span class="cm">/* GPR controls */</span>
	<span class="k">struct</span> <span class="n">mutex</span> <span class="n">lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_pcm</span> <span class="n">pcm</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">spinlock_t</span> <span class="n">irq_lock</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_irq</span> <span class="o">*</span><span class="n">irq_handlers</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_midi</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_rawmidi</span> <span class="o">*</span><span class="n">rmidi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_rawmidi_substream</span> <span class="o">*</span><span class="n">substream_input</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_rawmidi_substream</span> <span class="o">*</span><span class="n">substream_output</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">midi_mode</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">input_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">output_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">open_lock</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">tx_enable</span><span class="p">,</span> <span class="n">rx_enable</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">port</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">ipr_tx</span><span class="p">,</span> <span class="n">ipr_rx</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">EMU_MODEL_SB</span><span class="p">,</span>
	<span class="n">EMU_MODEL_EMU1010</span><span class="p">,</span>
	<span class="n">EMU_MODEL_EMU1010B</span><span class="p">,</span>
	<span class="n">EMU_MODEL_EMU1616</span><span class="p">,</span>
	<span class="n">EMU_MODEL_EMU0404</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu_chip_details</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">vendor</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">device</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">subsystem</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">revision</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">emu10k1_chip</span><span class="p">;</span> <span class="cm">/* Original SB Live. Not SB Live 24bit. */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">emu10k2_chip</span><span class="p">;</span> <span class="cm">/* Audigy 1 or Audigy 2. */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ca0102_chip</span><span class="p">;</span>  <span class="cm">/* Audigy 1 or Audigy 2. Not SB Audigy 2 Value. */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ca0108_chip</span><span class="p">;</span>  <span class="cm">/* Audigy 2 Value */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ca_cardbus_chip</span><span class="p">;</span> <span class="cm">/* Audigy 2 ZS Notebook */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ca0151_chip</span><span class="p">;</span>  <span class="cm">/* P16V */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">spk71</span><span class="p">;</span>        <span class="cm">/* Has 7.1 speakers */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sblive51</span><span class="p">;</span>	    <span class="cm">/* SBLive! 5.1 - extout 0x11 -&gt; center, 0x12 -&gt; lfe */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">spdif_bug</span><span class="p">;</span>    <span class="cm">/* Has Spdif phasing bug */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ac97_chip</span><span class="p">;</span>    <span class="cm">/* Has an AC97 chip: 1 = mandatory, 2 = optional */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ecard</span><span class="p">;</span>        <span class="cm">/* APS EEPROM */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">emu_model</span><span class="p">;</span>     <span class="cm">/* EMU model type */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">spi_dac</span><span class="p">;</span>      <span class="cm">/* SPI interface for DAC */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">i2c_adc</span><span class="p">;</span>      <span class="cm">/* I2C interface for ADC */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">adc_1361t</span><span class="p">;</span>    <span class="cm">/* Use Philips 1361T ADC */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">invert_shared_spdif</span><span class="p">;</span> <span class="cm">/* analog/digital switch inverted */</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">driver</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">id</span><span class="p">;</span>		<span class="cm">/* for backward compatibility - can be NULL if not needed */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu1010</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">output_source</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">input_source</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">adc_pads</span><span class="p">;</span> <span class="cm">/* bit mask */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dac_pads</span><span class="p">;</span> <span class="cm">/* bit mask */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">internal_clock</span><span class="p">;</span> <span class="cm">/* 44100 or 48000 */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">optical_in</span><span class="p">;</span> <span class="cm">/* 0:SPDIF, 1:ADAT */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">optical_out</span><span class="p">;</span> <span class="cm">/* 0:SPDIF, 1:ADAT */</span>
	<span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="n">firmware_thread</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">port</span><span class="p">;</span>			<span class="cm">/* I/O port number */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tos_link</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>		<span class="cm">/* tos link detected */</span>
		<span class="nl">rear_ac97:</span> <span class="mi">1</span><span class="p">,</span>			<span class="cm">/* rear channels are on AC&#39;97 */</span>
		<span class="nl">enable_ir:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">support_tlv</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="cm">/* Contains profile of card capabilities */</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">snd_emu_chip_details</span> <span class="o">*</span><span class="n">card_capabilities</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">audigy</span><span class="p">;</span>			<span class="cm">/* is Audigy? */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">revision</span><span class="p">;</span>			<span class="cm">/* chip revision */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">serial</span><span class="p">;</span>			<span class="cm">/* serial number */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">model</span><span class="p">;</span>			<span class="cm">/* subsystem id */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">card_type</span><span class="p">;</span>			<span class="cm">/* EMU10K1_CARD_* */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ecard_ctrl</span><span class="p">;</span>		<span class="cm">/* ecard control bits */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dma_mask</span><span class="p">;</span>			<span class="cm">/* PCI DMA mask */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">delay_pcm_irq</span><span class="p">;</span>		<span class="cm">/* in samples */</span>
	<span class="kt">int</span> <span class="n">max_cache_pages</span><span class="p">;</span>			<span class="cm">/* max memory size / PAGE_SIZE */</span>
	<span class="k">struct</span> <span class="n">snd_dma_buffer</span> <span class="n">silent_page</span><span class="p">;</span>	<span class="cm">/* silent page */</span>
	<span class="k">struct</span> <span class="n">snd_dma_buffer</span> <span class="n">ptb_pages</span><span class="p">;</span>	<span class="cm">/* page table pages */</span>
	<span class="k">struct</span> <span class="n">snd_dma_device</span> <span class="n">p16v_dma_dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_dma_buffer</span> <span class="n">p16v_buffer</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">snd_util_memhdr</span> <span class="o">*</span><span class="n">memhdr</span><span class="p">;</span>		<span class="cm">/* page allocation list */</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_memblk</span> <span class="o">*</span><span class="n">reserved_page</span><span class="p">;</span>	<span class="cm">/* reserved page */</span>

	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">mapped_link_head</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">mapped_order_link_head</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">**</span><span class="n">page_ptr_table</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">page_addr_table</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">memblk_lock</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">spdif_bits</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* s/pdif out setup */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i2c_capture_source</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">i2c_capture_volume</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>

	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010</span> <span class="n">fx8010</span><span class="p">;</span>		<span class="cm">/* FX8010 info */</span>
	<span class="kt">int</span> <span class="n">gpr_base</span><span class="p">;</span>
	
	<span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span><span class="n">ac97</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_card</span> <span class="o">*</span><span class="n">card</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">*</span><span class="n">pcm</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">*</span><span class="n">pcm_mic</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">*</span><span class="n">pcm_efx</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">*</span><span class="n">pcm_multi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">*</span><span class="n">pcm_p16v</span><span class="p">;</span>

	<span class="n">spinlock_t</span> <span class="n">synth_lock</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">synth</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">get_synth_voice</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>

	<span class="n">spinlock_t</span> <span class="n">reg_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">emu_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">voice_lock</span><span class="p">;</span>
	<span class="n">spinlock_t</span> <span class="n">spi_lock</span><span class="p">;</span> <span class="cm">/* serialises access to spi port */</span>
	<span class="n">spinlock_t</span> <span class="n">i2c_lock</span><span class="p">;</span> <span class="cm">/* serialises access to i2c port */</span>

	<span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="n">voices</span><span class="p">[</span><span class="n">NUM_G</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="n">p16v_voices</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="n">p16v_capture_voice</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">p16v_device_offset</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p16v_capture_source</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p16v_capture_channel</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">snd_emu1010</span> <span class="n">emu1010</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_pcm_mixer</span> <span class="n">pcm_mixer</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_pcm_mixer</span> <span class="n">efx_pcm_mixer</span><span class="p">[</span><span class="n">NUM_EFX_PLAYBACK</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">ctl_send_routing</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">ctl_send_volume</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">ctl_attn</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">ctl_efx_send_routing</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">ctl_efx_send_volume</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_kcontrol</span> <span class="o">*</span><span class="n">ctl_efx_attn</span><span class="p">;</span>

	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">hwvol_interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">capture_interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">capture_mic_interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">capture_efx_interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">spdif_interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">status</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">dsp_interrupt</span><span class="p">)(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>

	<span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">pcm_capture_substream</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">pcm_capture_mic_substream</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">pcm_capture_efx_substream</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">pcm_playback_efx_substream</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">snd_timer</span> <span class="o">*</span><span class="n">timer</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">snd_emu10k1_midi</span> <span class="n">midi</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_midi</span> <span class="n">midi2</span><span class="p">;</span> <span class="cm">/* for audigy */</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">efx_voices_mask</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">next_free_voice</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_PM</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">saved_ptr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">saved_gpr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">tram_val_saved</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">tram_addr_saved</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">saved_icode</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">p16v_saved</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">saved_a_iocfg</span><span class="p">,</span> <span class="n">saved_hcfg</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="p">};</span>

<span class="kt">int</span> <span class="n">snd_emu10k1_create</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_card</span> <span class="o">*</span><span class="n">card</span><span class="p">,</span>
		       <span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">pci</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">extin_mask</span><span class="p">,</span>
		       <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">extout_mask</span><span class="p">,</span>
		       <span class="kt">long</span> <span class="n">max_cache_bytes</span><span class="p">,</span>
		       <span class="kt">int</span> <span class="n">enable_ir</span><span class="p">,</span>
		       <span class="n">uint</span> <span class="n">subsystem</span><span class="p">,</span>
		       <span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">**</span> <span class="n">remu</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">snd_emu10k1_pcm</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">**</span> <span class="n">rpcm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_pcm_mic</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">**</span> <span class="n">rpcm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_pcm_efx</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">**</span> <span class="n">rpcm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_p16v_pcm</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">**</span> <span class="n">rpcm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_p16v_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_p16v_mixer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_pcm_multi</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">**</span> <span class="n">rpcm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_fx8010_pcm</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm</span> <span class="o">**</span> <span class="n">rpcm</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_mixer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pcm_device</span><span class="p">,</span> <span class="kt">int</span> <span class="n">multi_device</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_fx8010_new</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">device</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_hwdep</span> <span class="o">**</span> <span class="n">rhwdep</span><span class="p">);</span>

<span class="n">irqreturn_t</span> <span class="n">snd_emu10k1_interrupt</span><span class="p">(</span><span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">dev_id</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">snd_emu10k1_voice_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">voice</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_init_efx</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_free_efx</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_fx8010_tram_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="n">u32</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_done</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">);</span>

<span class="cm">/* I/O functions */</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">snd_emu10k1_ptr_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chn</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_ptr_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chn</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">snd_emu10k1_ptr20_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chn</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_ptr20_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">chn</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_spi_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_i2c_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu1010_fpga_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu1010_fpga_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="n">u32</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">value</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu1010_fpga_link_dst_src_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">,</span> <span class="n">u32</span> <span class="n">dst</span><span class="p">,</span> <span class="n">u32</span> <span class="n">src</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">snd_emu10k1_efx_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pc</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">intrenb</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">intrenb</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_intr_ack</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_half_loop_intr_enable</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_half_loop_intr_disable</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_half_loop_intr_ack</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_set_loop_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_voice_clear_loop_stop</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">voicenum</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_wait</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">wait</span><span class="p">);</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">snd_emu10k1_wc</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">inl</span><span class="p">(</span><span class="n">emu</span><span class="o">-&gt;</span><span class="n">port</span> <span class="o">+</span> <span class="n">WC</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xfffff</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">snd_emu10k1_ac97_read</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span><span class="n">ac97</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">reg</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_ac97_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_ac97</span> <span class="o">*</span><span class="n">ac97</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">data</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">snd_emu10k1_rate_to_pitch</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rate</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_PM</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_suspend_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_resume_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_resume_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_efx_alloc_pm_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_efx_free_pm_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_efx_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_emu10k1_efx_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_p16v_alloc_pm_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_p16v_free_pm_buffer</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_p16v_suspend</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">snd_p16v_resume</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cm">/* memory allocation */</span>
<span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">snd_emu10k1_alloc_pages</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_pcm_substream</span> <span class="o">*</span><span class="n">substream</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_free_pages</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">blk</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">snd_emu10k1_synth_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_synth_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">blk</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_synth_bzero</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">blk</span><span class="p">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_synth_copy_from_user</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_util_memblk</span> <span class="o">*</span><span class="n">blk</span><span class="p">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">__user</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_memblk_map</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_emu10k1_memblk</span> <span class="o">*</span><span class="n">blk</span><span class="p">);</span>

<span class="cm">/* voice allocation */</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_voice_alloc</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pair</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="o">**</span><span class="n">rvoice</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_voice_free</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span> <span class="k">struct</span> <span class="n">snd_emu10k1_voice</span> <span class="o">*</span><span class="n">pvoice</span><span class="p">);</span>

<span class="cm">/* MIDI uart */</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_midi</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_audigy_midi</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">);</span>

<span class="cm">/* proc interface */</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_proc_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span> <span class="n">emu</span><span class="p">);</span>

<span class="cm">/* fx8010 irq handler */</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_fx8010_register_irq_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span>
					    <span class="n">snd_fx8010_irq_handler_t</span> <span class="o">*</span><span class="n">handler</span><span class="p">,</span>
					    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">gpr_running</span><span class="p">,</span>
					    <span class="kt">void</span> <span class="o">*</span><span class="n">private_data</span><span class="p">,</span>
					    <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_irq</span> <span class="o">**</span><span class="n">r_irq</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">snd_emu10k1_fx8010_unregister_irq_handler</span><span class="p">(</span><span class="k">struct</span> <span class="n">snd_emu10k1</span> <span class="o">*</span><span class="n">emu</span><span class="p">,</span>
					      <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_irq</span> <span class="o">*</span><span class="n">irq</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ---- FX8010 ----</span>
<span class="cm"> */</span>

<span class="cp">#define EMU10K1_CARD_CREATIVE			0x00000000</span>
<span class="cp">#define EMU10K1_CARD_EMUAPS			0x00000001</span>

<span class="cp">#define EMU10K1_FX8010_PCM_COUNT		8</span>

<span class="cm">/* instruction set */</span>
<span class="cp">#define iMAC0	 0x00	</span><span class="cm">/* R = A + (X * Y &gt;&gt; 31)   ; saturation */</span><span class="cp"></span>
<span class="cp">#define iMAC1	 0x01	</span><span class="cm">/* R = A + (-X * Y &gt;&gt; 31)  ; saturation */</span><span class="cp"></span>
<span class="cp">#define iMAC2	 0x02	</span><span class="cm">/* R = A + (X * Y &gt;&gt; 31)   ; wraparound */</span><span class="cp"></span>
<span class="cp">#define iMAC3	 0x03	</span><span class="cm">/* R = A + (-X * Y &gt;&gt; 31)  ; wraparound */</span><span class="cp"></span>
<span class="cp">#define iMACINT0 0x04	</span><span class="cm">/* R = A + X * Y	   ; saturation */</span><span class="cp"></span>
<span class="cp">#define iMACINT1 0x05	</span><span class="cm">/* R = A + X * Y	   ; wraparound (31-bit) */</span><span class="cp"></span>
<span class="cp">#define iACC3	 0x06	</span><span class="cm">/* R = A + X + Y	   ; saturation */</span><span class="cp"></span>
<span class="cp">#define iMACMV   0x07	</span><span class="cm">/* R = A, acc += X * Y &gt;&gt; 31 */</span><span class="cp"></span>
<span class="cp">#define iANDXOR  0x08	</span><span class="cm">/* R = (A &amp; X) ^ Y */</span><span class="cp"></span>
<span class="cp">#define iTSTNEG  0x09	</span><span class="cm">/* R = (A &gt;= Y) ? X : ~X */</span><span class="cp"></span>
<span class="cp">#define iLIMITGE 0x0a	</span><span class="cm">/* R = (A &gt;= Y) ? X : Y */</span><span class="cp"></span>
<span class="cp">#define iLIMITLT 0x0b	</span><span class="cm">/* R = (A &lt; Y) ? X : Y */</span><span class="cp"></span>
<span class="cp">#define iLOG	 0x0c	</span><span class="cm">/* R = linear_data, A (log_data), X (max_exp), Y (format_word) */</span><span class="cp"></span>
<span class="cp">#define iEXP	 0x0d	</span><span class="cm">/* R = log_data, A (linear_data), X (max_exp), Y (format_word) */</span><span class="cp"></span>
<span class="cp">#define iINTERP  0x0e	</span><span class="cm">/* R = A + (X * (Y - A) &gt;&gt; 31)  ; saturation */</span><span class="cp"></span>
<span class="cp">#define iSKIP    0x0f	</span><span class="cm">/* R = A (cc_reg), X (count), Y (cc_test) */</span><span class="cp"></span>

<span class="cm">/* GPRs */</span>
<span class="cp">#define FXBUS(x)	(0x00 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f */</span><span class="cp"></span>
<span class="cp">#define EXTIN(x)	(0x10 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f */</span><span class="cp"></span>
<span class="cp">#define EXTOUT(x)	(0x20 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f physical outs -&gt; FXWC low 16 bits */</span><span class="cp"></span>
<span class="cp">#define FXBUS2(x)	(0x30 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f copies of fx buses for capture -&gt; FXWC high 16 bits */</span><span class="cp"></span>
					<span class="cm">/* NB: 0x31 and 0x32 are shared with Center/LFE on SB live 5.1 */</span>

<span class="cp">#define C_00000000	0x40</span>
<span class="cp">#define C_00000001	0x41</span>
<span class="cp">#define C_00000002	0x42</span>
<span class="cp">#define C_00000003	0x43</span>
<span class="cp">#define C_00000004	0x44</span>
<span class="cp">#define C_00000008	0x45</span>
<span class="cp">#define C_00000010	0x46</span>
<span class="cp">#define C_00000020	0x47</span>
<span class="cp">#define C_00000100	0x48</span>
<span class="cp">#define C_00010000	0x49</span>
<span class="cp">#define C_00080000	0x4a</span>
<span class="cp">#define C_10000000	0x4b</span>
<span class="cp">#define C_20000000	0x4c</span>
<span class="cp">#define C_40000000	0x4d</span>
<span class="cp">#define C_80000000	0x4e</span>
<span class="cp">#define C_7fffffff	0x4f</span>
<span class="cp">#define C_ffffffff	0x50</span>
<span class="cp">#define C_fffffffe	0x51</span>
<span class="cp">#define C_c0000000	0x52</span>
<span class="cp">#define C_4f1bbcdc	0x53</span>
<span class="cp">#define C_5a7ef9db	0x54</span>
<span class="cp">#define C_00100000	0x55		</span><span class="cm">/* ?? */</span><span class="cp"></span>
<span class="cp">#define GPR_ACCU	0x56		</span><span class="cm">/* ACCUM, accumulator */</span><span class="cp"></span>
<span class="cp">#define GPR_COND	0x57		</span><span class="cm">/* CCR, condition register */</span><span class="cp"></span>
<span class="cp">#define GPR_NOISE0	0x58		</span><span class="cm">/* noise source */</span><span class="cp"></span>
<span class="cp">#define GPR_NOISE1	0x59		</span><span class="cm">/* noise source */</span><span class="cp"></span>
<span class="cp">#define GPR_IRQ		0x5a		</span><span class="cm">/* IRQ register */</span><span class="cp"></span>
<span class="cp">#define GPR_DBAC	0x5b		</span><span class="cm">/* TRAM Delay Base Address Counter */</span><span class="cp"></span>
<span class="cp">#define GPR(x)		(FXGPREGBASE + (x)) </span><span class="cm">/* free GPRs: x = 0x00 - 0xff */</span><span class="cp"></span>
<span class="cp">#define ITRAM_DATA(x)	(TANKMEMDATAREGBASE + 0x00 + (x)) </span><span class="cm">/* x = 0x00 - 0x7f */</span><span class="cp"></span>
<span class="cp">#define ETRAM_DATA(x)	(TANKMEMDATAREGBASE + 0x80 + (x)) </span><span class="cm">/* x = 0x00 - 0x1f */</span><span class="cp"></span>
<span class="cp">#define ITRAM_ADDR(x)	(TANKMEMADDRREGBASE + 0x00 + (x)) </span><span class="cm">/* x = 0x00 - 0x7f */</span><span class="cp"></span>
<span class="cp">#define ETRAM_ADDR(x)	(TANKMEMADDRREGBASE + 0x80 + (x)) </span><span class="cm">/* x = 0x00 - 0x1f */</span><span class="cp"></span>

<span class="cp">#define A_ITRAM_DATA(x)	(TANKMEMDATAREGBASE + 0x00 + (x)) </span><span class="cm">/* x = 0x00 - 0xbf */</span><span class="cp"></span>
<span class="cp">#define A_ETRAM_DATA(x)	(TANKMEMDATAREGBASE + 0xc0 + (x)) </span><span class="cm">/* x = 0x00 - 0x3f */</span><span class="cp"></span>
<span class="cp">#define A_ITRAM_ADDR(x)	(TANKMEMADDRREGBASE + 0x00 + (x)) </span><span class="cm">/* x = 0x00 - 0xbf */</span><span class="cp"></span>
<span class="cp">#define A_ETRAM_ADDR(x)	(TANKMEMADDRREGBASE + 0xc0 + (x)) </span><span class="cm">/* x = 0x00 - 0x3f */</span><span class="cp"></span>
<span class="cp">#define A_ITRAM_CTL(x)	(A_TANKMEMCTLREGBASE + 0x00 + (x)) </span><span class="cm">/* x = 0x00 - 0xbf */</span><span class="cp"></span>
<span class="cp">#define A_ETRAM_CTL(x)	(A_TANKMEMCTLREGBASE + 0xc0 + (x)) </span><span class="cm">/* x = 0x00 - 0x3f */</span><span class="cp"></span>

<span class="cp">#define A_FXBUS(x)	(0x00 + (x))	</span><span class="cm">/* x = 0x00 - 0x3f FX buses */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN(x)	(0x40 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f physical ins */</span><span class="cp"></span>
<span class="cp">#define A_P16VIN(x)	(0x50 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f p16v ins (A2 only) &quot;EMU32 inputs&quot; */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT(x)	(0x60 + (x))	</span><span class="cm">/* x = 0x00 - 0x1f physical outs -&gt; A_FXWC1 0x79-7f unknown   */</span><span class="cp"></span>
<span class="cp">#define A_FXBUS2(x)	(0x80 + (x))	</span><span class="cm">/* x = 0x00 - 0x1f extra outs used for EFX capture -&gt; A_FXWC2 */</span><span class="cp"></span>
<span class="cp">#define A_EMU32OUTH(x)	(0xa0 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f &quot;EMU32_OUT_10 - _1F&quot; - ??? */</span><span class="cp"></span>
<span class="cp">#define A_EMU32OUTL(x)	(0xb0 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f &quot;EMU32_OUT_1 - _F&quot; - ??? */</span><span class="cp"></span>
<span class="cp">#define A3_EMU32IN(x)	(0x160 + (x))	</span><span class="cm">/* x = 0x00 - 0x3f &quot;EMU32_IN_00 - _3F&quot; - Only when .device = 0x0008 */</span><span class="cp"></span>
<span class="cp">#define A3_EMU32OUT(x)	(0x1E0 + (x))	</span><span class="cm">/* x = 0x00 - 0x0f &quot;EMU32_OUT_00 - _3F&quot; - Only when .device = 0x0008 */</span><span class="cp"></span>
<span class="cp">#define A_GPR(x)	(A_FXGPREGBASE + (x))</span>

<span class="cm">/* cc_reg constants */</span>
<span class="cp">#define CC_REG_NORMALIZED C_00000001</span>
<span class="cp">#define CC_REG_BORROW	C_00000002</span>
<span class="cp">#define CC_REG_MINUS	C_00000004</span>
<span class="cp">#define CC_REG_ZERO	C_00000008</span>
<span class="cp">#define CC_REG_SATURATE	C_00000010</span>
<span class="cp">#define CC_REG_NONZERO	C_00000100</span>

<span class="cm">/* FX buses */</span>
<span class="cp">#define FXBUS_PCM_LEFT		0x00</span>
<span class="cp">#define FXBUS_PCM_RIGHT		0x01</span>
<span class="cp">#define FXBUS_PCM_LEFT_REAR	0x02</span>
<span class="cp">#define FXBUS_PCM_RIGHT_REAR	0x03</span>
<span class="cp">#define FXBUS_MIDI_LEFT		0x04</span>
<span class="cp">#define FXBUS_MIDI_RIGHT	0x05</span>
<span class="cp">#define FXBUS_PCM_CENTER	0x06</span>
<span class="cp">#define FXBUS_PCM_LFE		0x07</span>
<span class="cp">#define FXBUS_PCM_LEFT_FRONT	0x08</span>
<span class="cp">#define FXBUS_PCM_RIGHT_FRONT	0x09</span>
<span class="cp">#define FXBUS_MIDI_REVERB	0x0c</span>
<span class="cp">#define FXBUS_MIDI_CHORUS	0x0d</span>
<span class="cp">#define FXBUS_PCM_LEFT_SIDE	0x0e</span>
<span class="cp">#define FXBUS_PCM_RIGHT_SIDE	0x0f</span>
<span class="cp">#define FXBUS_PT_LEFT		0x14</span>
<span class="cp">#define FXBUS_PT_RIGHT		0x15</span>

<span class="cm">/* Inputs */</span>
<span class="cp">#define EXTIN_AC97_L	   0x00	</span><span class="cm">/* AC&#39;97 capture channel - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_AC97_R	   0x01	</span><span class="cm">/* AC&#39;97 capture channel - right */</span><span class="cp"></span>
<span class="cp">#define EXTIN_SPDIF_CD_L   0x02	</span><span class="cm">/* internal S/PDIF CD - onboard - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_SPDIF_CD_R   0x03	</span><span class="cm">/* internal S/PDIF CD - onboard - right */</span><span class="cp"></span>
<span class="cp">#define EXTIN_ZOOM_L	   0x04	</span><span class="cm">/* Zoom Video I2S - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_ZOOM_R	   0x05	</span><span class="cm">/* Zoom Video I2S - right */</span><span class="cp"></span>
<span class="cp">#define EXTIN_TOSLINK_L	   0x06	</span><span class="cm">/* LiveDrive - TOSLink Optical - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_TOSLINK_R    0x07	</span><span class="cm">/* LiveDrive - TOSLink Optical - right */</span><span class="cp"></span>
<span class="cp">#define EXTIN_LINE1_L	   0x08	</span><span class="cm">/* LiveDrive - Line/Mic 1 - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_LINE1_R	   0x09	</span><span class="cm">/* LiveDrive - Line/Mic 1 - right */</span><span class="cp"></span>
<span class="cp">#define EXTIN_COAX_SPDIF_L 0x0a	</span><span class="cm">/* LiveDrive - Coaxial S/PDIF - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_COAX_SPDIF_R 0x0b </span><span class="cm">/* LiveDrive - Coaxial S/PDIF - right */</span><span class="cp"></span>
<span class="cp">#define EXTIN_LINE2_L	   0x0c	</span><span class="cm">/* LiveDrive - Line/Mic 2 - left */</span><span class="cp"></span>
<span class="cp">#define EXTIN_LINE2_R	   0x0d	</span><span class="cm">/* LiveDrive - Line/Mic 2 - right */</span><span class="cp"></span>

<span class="cm">/* Outputs */</span>
<span class="cp">#define EXTOUT_AC97_L	   0x00	</span><span class="cm">/* AC&#39;97 playback channel - left */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_AC97_R	   0x01	</span><span class="cm">/* AC&#39;97 playback channel - right */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_TOSLINK_L   0x02	</span><span class="cm">/* LiveDrive - TOSLink Optical - left */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_TOSLINK_R   0x03	</span><span class="cm">/* LiveDrive - TOSLink Optical - right */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_AC97_CENTER 0x04	</span><span class="cm">/* SB Live 5.1 - center */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_AC97_LFE	   0x05 </span><span class="cm">/* SB Live 5.1 - LFE */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_HEADPHONE_L 0x06	</span><span class="cm">/* LiveDrive - Headphone - left */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_HEADPHONE_R 0x07	</span><span class="cm">/* LiveDrive - Headphone - right */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_REAR_L	   0x08	</span><span class="cm">/* Rear channel - left */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_REAR_R	   0x09	</span><span class="cm">/* Rear channel - right */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_ADC_CAP_L   0x0a	</span><span class="cm">/* ADC Capture buffer - left */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_ADC_CAP_R   0x0b	</span><span class="cm">/* ADC Capture buffer - right */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_MIC_CAP	   0x0c	</span><span class="cm">/* MIC Capture buffer */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_AC97_REAR_L 0x0d	</span><span class="cm">/* SB Live 5.1 (c) 2003 - Rear Left */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_AC97_REAR_R 0x0e	</span><span class="cm">/* SB Live 5.1 (c) 2003 - Rear Right */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_ACENTER	   0x11 </span><span class="cm">/* Analog Center */</span><span class="cp"></span>
<span class="cp">#define EXTOUT_ALFE	   0x12 </span><span class="cm">/* Analog LFE */</span><span class="cp"></span>

<span class="cm">/* Audigy Inputs */</span>
<span class="cp">#define A_EXTIN_AC97_L		0x00	</span><span class="cm">/* AC&#39;97 capture channel - left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_AC97_R		0x01	</span><span class="cm">/* AC&#39;97 capture channel - right */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_SPDIF_CD_L	0x02	</span><span class="cm">/* digital CD left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_SPDIF_CD_R	0x03	</span><span class="cm">/* digital CD left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_OPT_SPDIF_L     0x04    </span><span class="cm">/* audigy drive Optical SPDIF - left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_OPT_SPDIF_R     0x05    </span><span class="cm">/*                              right */</span><span class="cp"> </span>
<span class="cp">#define A_EXTIN_LINE2_L		0x08	</span><span class="cm">/* audigy drive line2/mic2 - left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_LINE2_R		0x09	</span><span class="cm">/*                           right */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_ADC_L		0x0a    </span><span class="cm">/* Philips ADC - left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_ADC_R		0x0b    </span><span class="cm">/*               right */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_AUX2_L		0x0c	</span><span class="cm">/* audigy drive aux2 - left */</span><span class="cp"></span>
<span class="cp">#define A_EXTIN_AUX2_R		0x0d	</span><span class="cm">/*                   - right */</span><span class="cp"></span>

<span class="cm">/* Audigiy Outputs */</span>
<span class="cp">#define A_EXTOUT_FRONT_L	0x00	</span><span class="cm">/* digital front left */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_FRONT_R	0x01	</span><span class="cm">/*               right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_CENTER		0x02	</span><span class="cm">/* digital front center */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_LFE		0x03	</span><span class="cm">/* digital front lfe */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_HEADPHONE_L	0x04	</span><span class="cm">/* headphone audigy drive left */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_HEADPHONE_R	0x05	</span><span class="cm">/*                        right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_REAR_L		0x06	</span><span class="cm">/* digital rear left */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_REAR_R		0x07	</span><span class="cm">/*              right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_AFRONT_L	0x08	</span><span class="cm">/* analog front left */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_AFRONT_R	0x09	</span><span class="cm">/*              right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_ACENTER	0x0a	</span><span class="cm">/* analog center */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_ALFE		0x0b	</span><span class="cm">/* analog LFE */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_ASIDE_L	0x0c	</span><span class="cm">/* analog side left  - Audigy 2 ZS */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_ASIDE_R	0x0d	</span><span class="cm">/*             right - Audigy 2 ZS */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_AREAR_L	0x0e	</span><span class="cm">/* analog rear left */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_AREAR_R	0x0f	</span><span class="cm">/*             right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_AC97_L		0x10	</span><span class="cm">/* AC97 left (front) */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_AC97_R		0x11	</span><span class="cm">/*      right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_ADC_CAP_L	0x16	</span><span class="cm">/* ADC capture buffer left */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_ADC_CAP_R	0x17	</span><span class="cm">/*                    right */</span><span class="cp"></span>
<span class="cp">#define A_EXTOUT_MIC_CAP	0x18	</span><span class="cm">/* Mic capture buffer */</span><span class="cp"></span>

<span class="cm">/* Audigy constants */</span>
<span class="cp">#define A_C_00000000	0xc0</span>
<span class="cp">#define A_C_00000001	0xc1</span>
<span class="cp">#define A_C_00000002	0xc2</span>
<span class="cp">#define A_C_00000003	0xc3</span>
<span class="cp">#define A_C_00000004	0xc4</span>
<span class="cp">#define A_C_00000008	0xc5</span>
<span class="cp">#define A_C_00000010	0xc6</span>
<span class="cp">#define A_C_00000020	0xc7</span>
<span class="cp">#define A_C_00000100	0xc8</span>
<span class="cp">#define A_C_00010000	0xc9</span>
<span class="cp">#define A_C_00000800	0xca</span>
<span class="cp">#define A_C_10000000	0xcb</span>
<span class="cp">#define A_C_20000000	0xcc</span>
<span class="cp">#define A_C_40000000	0xcd</span>
<span class="cp">#define A_C_80000000	0xce</span>
<span class="cp">#define A_C_7fffffff	0xcf</span>
<span class="cp">#define A_C_ffffffff	0xd0</span>
<span class="cp">#define A_C_fffffffe	0xd1</span>
<span class="cp">#define A_C_c0000000	0xd2</span>
<span class="cp">#define A_C_4f1bbcdc	0xd3</span>
<span class="cp">#define A_C_5a7ef9db	0xd4</span>
<span class="cp">#define A_C_00100000	0xd5</span>
<span class="cp">#define A_GPR_ACCU	0xd6		</span><span class="cm">/* ACCUM, accumulator */</span><span class="cp"></span>
<span class="cp">#define A_GPR_COND	0xd7		</span><span class="cm">/* CCR, condition register */</span><span class="cp"></span>
<span class="cp">#define A_GPR_NOISE0	0xd8		</span><span class="cm">/* noise source */</span><span class="cp"></span>
<span class="cp">#define A_GPR_NOISE1	0xd9		</span><span class="cm">/* noise source */</span><span class="cp"></span>
<span class="cp">#define A_GPR_IRQ	0xda		</span><span class="cm">/* IRQ register */</span><span class="cp"></span>
<span class="cp">#define A_GPR_DBAC	0xdb		</span><span class="cm">/* TRAM Delay Base Address Counter - internal */</span><span class="cp"></span>
<span class="cp">#define A_GPR_DBACE	0xde		</span><span class="cm">/* TRAM Delay Base Address Counter - external */</span><span class="cp"></span>

<span class="cm">/* definitions for debug register */</span>
<span class="cp">#define EMU10K1_DBG_ZC			0x80000000	</span><span class="cm">/* zero tram counter */</span><span class="cp"></span>
<span class="cp">#define EMU10K1_DBG_SATURATION_OCCURED	0x02000000	</span><span class="cm">/* saturation control */</span><span class="cp"></span>
<span class="cp">#define EMU10K1_DBG_SATURATION_ADDR	0x01ff0000	</span><span class="cm">/* saturation address */</span><span class="cp"></span>
<span class="cp">#define EMU10K1_DBG_SINGLE_STEP		0x00008000	</span><span class="cm">/* single step mode */</span><span class="cp"></span>
<span class="cp">#define EMU10K1_DBG_STEP		0x00004000	</span><span class="cm">/* start single step */</span><span class="cp"></span>
<span class="cp">#define EMU10K1_DBG_CONDITION_CODE	0x00003e00	</span><span class="cm">/* condition code */</span><span class="cp"></span>
<span class="cp">#define EMU10K1_DBG_SINGLE_STEP_ADDR	0x000001ff	</span><span class="cm">/* single step address */</span><span class="cp"></span>

<span class="cm">/* tank memory address line */</span>
<span class="cp">#ifndef __KERNEL__</span>
<span class="cp">#define TANKMEMADDRREG_ADDR_MASK 0x000fffff	</span><span class="cm">/* 20 bit tank address field			*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_CLEAR	 0x00800000	</span><span class="cm">/* Clear tank memory				*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_ALIGN	 0x00400000	</span><span class="cm">/* Align read or write relative to tank access	*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_WRITE	 0x00200000	</span><span class="cm">/* Write to tank memory				*/</span><span class="cp"></span>
<span class="cp">#define TANKMEMADDRREG_READ	 0x00100000	</span><span class="cm">/* Read from tank memory			*/</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_info</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">internal_tram_size</span><span class="p">;</span>	<span class="cm">/* in samples */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">external_tram_size</span><span class="p">;</span>	<span class="cm">/* in samples */</span>
	<span class="kt">char</span> <span class="n">fxbus_names</span><span class="p">[</span><span class="mi">16</span><span class="p">][</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* names of FXBUSes */</span>
	<span class="kt">char</span> <span class="n">extin_names</span><span class="p">[</span><span class="mi">16</span><span class="p">][</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* names of external inputs */</span>
	<span class="kt">char</span> <span class="n">extout_names</span><span class="p">[</span><span class="mi">32</span><span class="p">][</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* names of external outputs */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpr_controls</span><span class="p">;</span>		<span class="cm">/* count of GPR controls */</span>
<span class="p">};</span>

<span class="cp">#define EMU10K1_GPR_TRANSLATION_NONE		0</span>
<span class="cp">#define EMU10K1_GPR_TRANSLATION_TABLE100	1</span>
<span class="cp">#define EMU10K1_GPR_TRANSLATION_BASS		2</span>
<span class="cp">#define EMU10K1_GPR_TRANSLATION_TREBLE		3</span>
<span class="cp">#define EMU10K1_GPR_TRANSLATION_ONOFF		4</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_control_gpr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_ctl_elem_id</span> <span class="n">id</span><span class="p">;</span>		<span class="cm">/* full control ID definition */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vcount</span><span class="p">;</span>		<span class="cm">/* visible count */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>		<span class="cm">/* count of GPR (1..16) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* GPR number(s) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">value</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* initial values */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">min</span><span class="p">;</span>		<span class="cm">/* minimum range */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">max</span><span class="p">;</span>		<span class="cm">/* maximum range */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">translation</span><span class="p">;</span>	<span class="cm">/* translation type (EMU10K1_GPR_TRANSLATION*) */</span>
	<span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">tlv</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* old ABI without TLV support */</span>
<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_control_old_gpr</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">snd_ctl_elem_id</span> <span class="n">id</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vcount</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">value</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">min</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">max</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">translation</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_code</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>

	<span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">gpr_valid</span><span class="p">,</span> <span class="mh">0x200</span><span class="p">);</span> <span class="cm">/* bitmask of valid initializers */</span>
	<span class="n">__u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">gpr_map</span><span class="p">;</span>		<span class="cm">/* initializers */</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpr_add_control_count</span><span class="p">;</span> <span class="cm">/* count of GPR controls to add/replace */</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_control_gpr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">gpr_add_controls</span><span class="p">;</span> <span class="cm">/* GPR controls to add/replace */</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpr_del_control_count</span><span class="p">;</span> <span class="cm">/* count of GPR controls to remove */</span>
	<span class="k">struct</span> <span class="n">snd_ctl_elem_id</span> <span class="n">__user</span> <span class="o">*</span><span class="n">gpr_del_controls</span><span class="p">;</span> <span class="cm">/* IDs of GPR controls to remove */</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpr_list_control_count</span><span class="p">;</span> <span class="cm">/* count of GPR controls to list */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gpr_list_control_total</span><span class="p">;</span> <span class="cm">/* total count of GPR controls */</span>
	<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_control_gpr</span> <span class="n">__user</span> <span class="o">*</span><span class="n">gpr_list_controls</span><span class="p">;</span> <span class="cm">/* listed GPR controls */</span>

	<span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">tram_valid</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">);</span> <span class="cm">/* bitmask of valid initializers */</span>
	<span class="n">__u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tram_data_map</span><span class="p">;</span>	  <span class="cm">/* data initializers */</span>
	<span class="n">__u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">tram_addr_map</span><span class="p">;</span>	  <span class="cm">/* map initializers */</span>

	<span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">code_valid</span><span class="p">,</span> <span class="mi">1024</span><span class="p">);</span> <span class="cm">/* bitmask of valid instructions */</span>
	<span class="n">__u32</span> <span class="n">__user</span> <span class="o">*</span><span class="n">code</span><span class="p">;</span>		  <span class="cm">/* one instruction - 64 bits */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_tram</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">address</span><span class="p">;</span>		<span class="cm">/* 31.bit == 1 -&gt; external TRAM */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* size in samples (4 bytes) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">samples</span><span class="p">;</span>		<span class="cm">/* pointer to samples (20-bit) */</span>
					<span class="cm">/* NULL-&gt;clear memory */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_pcm_rec</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">substream</span><span class="p">;</span>		<span class="cm">/* substream number */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">res1</span><span class="p">;</span>		<span class="cm">/* reserved */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">channels</span><span class="p">;</span>		<span class="cm">/* 16-bit channels count, zero = remove this substream */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tram_start</span><span class="p">;</span>	<span class="cm">/* ring buffer position in TRAM (in samples) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">buffer_size</span><span class="p">;</span>	<span class="cm">/* count of buffered samples */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_size</span><span class="p">;</span>		<span class="cm">/* GPR containing size of ringbuffer in samples (host) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_ptr</span><span class="p">;</span>		<span class="cm">/* GPR containing current pointer in the ring buffer (host = reset, FX8010) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_count</span><span class="p">;</span>	<span class="cm">/* GPR containing count of samples between two interrupts (host) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_tmpcount</span><span class="p">;</span>	<span class="cm">/* GPR containing current count of samples to interrupt (host = set, FX8010) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_trigger</span><span class="p">;</span>	<span class="cm">/* GPR containing trigger (activate) information (host) */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">gpr_running</span><span class="p">;</span>	<span class="cm">/* GPR containing info if PCM is running (FX8010) */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">pad</span><span class="p">;</span>		<span class="cm">/* reserved */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">etram</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>	<span class="cm">/* external TRAM address &amp; data (one per channel) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">res2</span><span class="p">;</span>		<span class="cm">/* reserved */</span>
<span class="p">};</span>

<span class="cp">#define SNDRV_EMU10K1_VERSION		SNDRV_PROTOCOL_VERSION(1, 0, 1)</span>

<span class="cp">#define SNDRV_EMU10K1_IOCTL_INFO	_IOR (&#39;H&#39;, 0x10, struct snd_emu10k1_fx8010_info)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_CODE_POKE	_IOW (&#39;H&#39;, 0x11, struct snd_emu10k1_fx8010_code)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_CODE_PEEK	_IOWR(&#39;H&#39;, 0x12, struct snd_emu10k1_fx8010_code)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_TRAM_SETUP	_IOW (&#39;H&#39;, 0x20, int)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_TRAM_POKE	_IOW (&#39;H&#39;, 0x21, struct snd_emu10k1_fx8010_tram)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_TRAM_PEEK	_IOWR(&#39;H&#39;, 0x22, struct snd_emu10k1_fx8010_tram)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_PCM_POKE	_IOW (&#39;H&#39;, 0x30, struct snd_emu10k1_fx8010_pcm_rec)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_PCM_PEEK	_IOWR(&#39;H&#39;, 0x31, struct snd_emu10k1_fx8010_pcm_rec)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_PVERSION	_IOR (&#39;H&#39;, 0x40, int)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_STOP	_IO  (&#39;H&#39;, 0x80)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_CONTINUE	_IO  (&#39;H&#39;, 0x81)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_ZERO_TRAM_COUNTER _IO (&#39;H&#39;, 0x82)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_SINGLE_STEP	_IOW (&#39;H&#39;, 0x83, int)</span>
<span class="cp">#define SNDRV_EMU10K1_IOCTL_DBG_READ	_IOR (&#39;H&#39;, 0x84, int)</span>

<span class="cm">/* typedefs for compatibility to user-space */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_info</span> <span class="n">emu10k1_fx8010_info_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_control_gpr</span> <span class="n">emu10k1_fx8010_control_gpr_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_code</span> <span class="n">emu10k1_fx8010_code_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_tram</span> <span class="n">emu10k1_fx8010_tram_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">snd_emu10k1_fx8010_pcm_rec</span> <span class="n">emu10k1_fx8010_pcm_t</span><span class="p">;</span>

<span class="cp">#endif	</span><span class="cm">/* __SOUND_EMU10K1_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:2}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../javascript/docco.min.js"></script>
</html>
