d | kernel |  | 70 items |  | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | Makefile | g | 3.7K |  | Thomas Gleixner | tglx@linutronix.de | 1336215625 |  | s390: Use generic init_task  Same code. Use the generic version. The special Makefile treatment is pointless anyway as init_task.o contains only data which is handled by the linker script. So no point on being treated like head text.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Acked-by: Heiko Carstens <heiko.carstens@de.ibm.com> Link: http://lkml.kernel.org/r/20120503085035.271439530@linutronix.de
d | boot |  | 4 items |  | Heiko Carstens | heiko.carstens@de.ibm.com | 1337172161 |  | s390: add various .gitignore files.  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
d | appldata |  | 6 items |  | Glauber Costa | glommer@parallels.com | 1323158798 |  | sched/accounting: Change cpustat fields to an array  This patch changes fields in cpustat from a structure, to an u64 array. Math gets easier, and the code is more flexible.  Signed-off-by: Glauber Costa <glommer@parallels.com> Reviewed-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Paul Tuner <pjt@google.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1322498719-2255-2-git-send-email-glommer@parallels.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
d | include |  | 1 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338572075 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs  Pull vfs changes from Al Viro.  "A lot of misc stuff.  The obvious groups:    * Miklos' atomic_open series; kills the damn abuse of      ->d_revalidate() by NFS, which was the major stumbling block for      all work in that area.    * ripping security_file_mmap() and dealing with deadlocks in the      area; sanitizing the neighborhood of vm_mmap()/vm_munmap() in      general.    * ->encode_fh() switched to saner API; insane fake dentry in      mm/cleancache.c gone.    * assorted annotations in fs (endianness, __user)    * parts of Artem's ->s_dirty work (jff2 and reiserfs parts)    * ->update_time() work from Josef.    * other bits and pieces all over the place.    Normally it would've been in two or three pull requests, but   signal.git stuff had eaten a lot of time during this cycle ;-/"  Fix up trivial conflicts in Documentation/filesystems/vfs.txt (the 'truncate_range' inode method was removed by the VM changes, the VFS update adds an 'update_time()' method), and in fs/btrfs/ulist.[ch] (due to sparse fix added twice, with other changes nearby).  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs: (95 commits)   nfs: don't open in ->d_revalidate   vfs: retry last component if opening stale dentry   vfs: nameidata_to_filp(): don't throw away file on error   vfs: nameidata_to_filp(): inline __dentry_open()   vfs: do_dentry_open(): don't put filp   vfs: split __dentry_open()   vfs: do_last() common post lookup   vfs: do_last(): add audit_inode before open   vfs: do_last(): only return EISDIR for O_CREAT   vfs: do_last(): check LOOKUP_DIRECTORY   vfs: do_last(): make ENOENT exit RCU safe   vfs: make follow_link check RCU safe   vfs: do_last(): use inode variable   vfs: do_last(): inline walk_component()   vfs: do_last(): make exit RCU safe   vfs: split do_lookup()   Btrfs: move over to use ->update_time   fs: introduce inode operation ->update_time   reiserfs: get rid of resierfs_sync_super   reiserfs: mark the superblock as dirty a bit later   ...
d | mm |  | 13 items |  | Michael Holzheu | holzheu@linux.vnet.ibm.com | 1338361489 |  | s390/kernel: Introduce memcpy_absolute() function  This patch introduces the new function memcpy_absolute() that allows to copy memory using absolute addressing. This means that the prefix swap does not apply when this function is used.  With this patch also all s390 kernel code that accesses absolute zero now uses the new memcpy_absolute() function. The old and less generic copy_to_absolute_zero() function is removed.  Signed-off-by: Michael Holzheu <holzheu@linux.vnet.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
d | crypto |  | 12 items |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for S390  Disintegrate asm/system.h for S390.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-s390@vger.kernel.org
f | Kconfig.debug | g | 1.0K |  | Jan Glauber | jang@linux.vnet.ibm.com | 1300205303 |  | [S390] Write protect module text and RO data  Implement write protection for kernel modules text and read-only data sections by implementing set_memory_[ro||rw] on s390. Since s390 has no execute bit in the pte's NX is not supported.  set_memory_[ro||rw] will only work on normal pages and not on large pages, so in case a large page should be modified bail out with a warning.  Signed-off-by: Jan Glauber <jang@linux.vnet.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
d | lib |  | 12 items |  | Heiko Carstens | heiko.carstens@de.ibm.com | 1337847010 |  | s390/headers: replace __s390x__ with CONFIG_64BIT where possible  Replace __s390x__ with CONFIG_64BIT in all places that are not exported to userspace or guarded with #ifdef __KERNEL__.  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
d | oprofile |  | 6 items |  | Hendrik Brueckner | brueckner@linux.vnet.ibm.com | 1337785612 |  | s390/irq: split irq stats for cpu-measurement alert facilities  CPU-measurement alerts are generated for different CPU-measurement facilities, for example, the sampling and counter facilities. Split the irq stats according to available facilities.  Signed-off-by: Hendrik Brueckner <brueckner@linux.vnet.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | Kbuild | g | 214B |  | Jan Glauber | jang@linux.vnet.ibm.com | 1324981632 |  | [S390] make arch/s390 subdirectories depend on config option  Only add subdirectories of arch/s390 to kbuild if their respective config option is selected.  Signed-off-by: Jan Glauber <jang@linux.vnet.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
d | math-emu |  | 2 items |  | matt mooney | mfm@muteddisk.com | 1300366977 |  | s390: change to new flag variable  Replace EXTRA_CFLAGS with ccflags-y.  Signed-off-by: matt mooney <mfm@muteddisk.com> Acked-by: WANG Cong <xiyou.wangcong@gmail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Kconfig | g | 17K |  | Linus Torvalds | torvalds@linux-foundation.org | 1338486670 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux  Pull s390 patches from Heiko Carstens:  "A couple of s390 patches for the 3.5 merge window.  Just a collection   of bug fixes and cleanups."  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux:   s390/uaccess: fix access_ok compile warnings   s390/cmpxchg: select HAVE_CMPXCHG_LOCAL option   s390/cmpxchg: fix sign extension bugs   s390/cmpxchg: fix 1 and 2 byte memory accesses   s390/cmpxchg: fix compile warnings specific to s390   s390/cmpxchg: add missing memory barrier to cmpxchg64   s390/cpu: remove cpu "capabilities" sysfs attribute   s390/kernel: Fix smp_call_ipl_cpu() for offline CPUs   s390/kernel: Introduce memcpy_absolute() function   s390/headers: replace __s390x__ with CONFIG_64BIT where possible   s390/headers: remove #ifdef __KERNEL__ from not exported headers   s390/irq: split irq stats for cpu-measurement alert facilities   s390/kexec: Move early_pgm_check_handler() to text section   s390/kdump: Use real mode for PSW restart and kexec   s390/kdump: Account /sys/kernel/kexec_crash_size changes in OS info   s390/kernel: Remove OS info init function call and diag 308 for kdump
d | kvm |  | 10 items |  | Jason J. herne | jjherne@us.ibm.com | 1337299563 |  | KVM: s390: onereg for timer related registers  Enhance the KVM ONE_REG capability within S390 to allow getting/setting the following special cpu registers: clock comparator and the cpu timer. These are needed for migration.  Signed-off-by: Jason J. herne <jjherne@us.ibm.com> Signed-off-by: Christian Borntraeger <borntraeger@de.ibm.com> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>
f | defconfig | g | 3.7K |  | Heiko Carstens | heiko.carstens@de.ibm.com | 1337172156 |  | s390/crypto des: add missing select statement  Add missing "select CRYPTO_DES". Fixes this:  ERROR: "des_ekey" [arch/s390/crypto/des_s390.ko] undefined!  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
d | hypfs |  | 6 items |  | Jan Kara | jack@suse.cz | 1336283021 |  | vfs: Rename end_writeback() to clear_inode()  After we moved inode_sync_wait() from end_writeback() it doesn't make sense to call the function end_writeback() anymore. Rename it to clear_inode() which well says what the function really does - set I_CLEAR flag.  Signed-off-by: Jan Kara <jack@suse.cz> Signed-off-by: Fengguang Wu <fengguang.wu@intel.com>
