f | init.c | s | 11K | 405 | Linus Torvalds | torvalds@linux-foundation.org | 1325865778 |  | Merge branch 'perf-core-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  * 'perf-core-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip: (106 commits)   perf kvm: Fix copy & paste error in description   perf script: Kill script_spec__delete   perf top: Fix a memory leak   perf stat: Introduce get_ratio_color() helper   perf session: Remove impossible condition check   perf tools: Fix feature-bits rework fallout, remove unused variable   perf script: Add generic perl handler to process events   perf tools: Use for_each_set_bit() to iterate over feature flags   perf tools: Unify handling of features when writing feature section   perf report: Accept fifos as input file   perf tools: Moving code in some files   perf tools: Fix out-of-bound access to struct perf_session   perf tools: Continue processing header on unknown features   perf tools: Improve macros for struct feature_ops   perf: builtin-record: Document and check that mmap_pages must be a power of two.   perf: builtin-record: Provide advice if mmap'ing fails with EPERM.   perf tools: Fix truncated annotation   perf script: look up thread using tid instead of pid   perf tools: Look up thread names for system wide profiling   perf tools: Fix comm for processes with named threads   ...
f | Makefile | g | 309B |  | Heiko Carstens | heiko.carstens@de.ibm.com | 1300871714 |  | [S390] oprofile: disable hw sampling for CONFIG_32BIT  Doesn't work and build for CONFIG_32BIT. So disable it.  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | backtrace.c | s | 1.7K | 64 | Andreas Krebbel | krebbel1@de.ibm.com | 1136565230 |  | [PATCH] s390: add oprofile callgraph support  Signed-off-by: Andreas Krebbel <krebbel1@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | op_counter.h | s | 578B | 19 | Andreas Krebbel | krebbel@linux.vnet.ibm.com | 1323254829 |  | oprofile, s390: Add event interface to the System z hardware sampling module  With this patch the OProfile Basic Mode Sampling support for System z is enhanced with a counter file system.  That way hardware sampling can be configured using the user space tools with only little modifications.  With the patch by default new cpu_types (s390/z10, s390/z196) are returned in order to indicate that we are running a CPU which provides the hardware sampling facility.  Existing user space tools will complain about an unknown cpu type. In order to be compatible with existing user space tools the `cpu_type' module parameter has been added.  Setting the parameter to `timer' will force the module to return `timer' as cpu_type.  The module will still try to use hardware sampling if available and the hwsampling virtual filesystem will be also be available for configuration.  So this has a different effect than using the generic oprofile module parameter `timer=1'.  If the basic mode sampling is enabled on the machine and the cpu_type=timer parameter is not used the kernel module will provide the following virtual filesystem:  /dev/oprofile/0/enabled /dev/oprofile/0/event /dev/oprofile/0/count /dev/oprofile/0/unit_mask /dev/oprofile/0/kernel /dev/oprofile/0/user  In the counter file system only the values of 'enabled', 'count', 'kernel', and 'user' are evaluated by the kernel module. Everything else must contain fixed values.  The 'event' value only supports a single event - HWSAMPLING with value 0.  The 'count' value specifies the hardware sampling rate as it is passed to the CPU measurement facility.  The 'kernel' and 'user' flags can now be used to filter for samples when using hardware sampling.  Additionally also the following file will be created: /dev/oprofile/timer/enabled  This will always be the inverted value of /dev/oprofile/0/enabled. 0 is not accepted without hardware sampling.  Signed-off-by: Andreas Krebbel <krebbel@linux.vnet.ibm.com> Signed-off-by: Robert Richter <robert.richter@amd.com>
f | hwsampler.c | s | 24K | 1002 | Hendrik Brueckner | brueckner@linux.vnet.ibm.com | 1337785612 |  | s390/irq: split irq stats for cpu-measurement alert facilities  CPU-measurement alerts are generated for different CPU-measurement facilities, for example, the sampling and counter facilities. Split the irq stats according to available facilities.  Signed-off-by: Hendrik Brueckner <brueckner@linux.vnet.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | hwsampler.h | s | 5.2K | 104 | Martin Schwidefsky | schwidefsky@de.ibm.com | 1305040423 |  | [S390] oprofile: fix min/max interval query checks  oprofile_min_interval and oprofile_max_interval are unsigned, checking for negative values doesn't work. Change hwsampler_query_min_interval and hwsampler_query_max_interval to return an unsigned long and check for a zero value instead.  Reported-by: Nicolas Kaiser <nikai@nikai.net> Acked-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
