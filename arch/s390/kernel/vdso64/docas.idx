f | Makefile | g | 1.7K |  | Peter Oberparleiter | peter.oberparleiter@de.ibm.com | 1306139069 |  | [S390] vdso: disable gcov profiling  The concepts of VDSO and gcov-based profiling don't mix: the former includes kernel-provided code running in userspace, the latter adds instructions that modify counters in kernel data segments. On s390 this has not been a problem so far due to VDSO code being written in all-assembler which is exempt from gcov-based profiling. This could change in the future, so disable profiling excplicitly for VDSO code.  Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | vdso64_wrapper.S | g | 250B |  | Tim Abbott | tabbott@ksplice.com | 1253507228 |  | Use macros for .data.page_aligned section.  This patch changes the remaining direct references to .data.page_aligned in C and assembly code to use the macros in include/linux/linkage.h.  Signed-off-by: Tim Abbott <tabbott@ksplice.com> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@redhat.com> Cc: H. Peter Anvin <hpa@zytor.com> Cc: Haavard Skinnemoen <hskinnemoen@atmel.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | gettimeofday.S | g | 1.6K |  | Hendrik Brueckner | brueckner@linux.vnet.ibm.com | 1271949439 |  | [S390] vdso: use ntp adjusted clock multiplier  Commit "timekeeping: Fix clock_gettime vsyscall time warp" (0696b711e) introduced the new parameter "mult" to update_vsyscall(). This parameter contains the internal NTP adjusted clock multiplier.  The s390x vdso did not use this adjusted multiplier.  Instead, it used the constant clock multiplier for gettimeofday() and clock_gettime() variants.  This may result in observable time warps as explained in commit 0696b711e.  Make the NTP adjusted clock multiplier available to the s390x vdso implementation and use it for time calculations.  Cc: <stable@kernel.org> Signed-off-by: Hendrik Brueckner <brueckner@linux.vnet.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | note.S | g | 291B |  | Martin Schwidefsky | schwidefsky@de.ibm.com | 1230208735 |  | [S390] introduce vdso on s390  Add a vdso to speed up gettimeofday and clock_getres/clock_gettime for CLOCK_REALTIME/CLOCK_MONOTONIC.  Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | clock_gettime.S | g | 3.2K |  | Heiko Carstens | heiko.carstens@de.ibm.com | 1288363850 |  | [S390] vdso: get rid of redefinition warnings  The CLOCK_* defines in asm-offsets.c are only used for the vdso code however in the meantime they cause other trouble. Just rename them to get permanently rid of this:  In file included from /home2/heicarst/linux-2.6/arch/s390/include/asm/asm-offsets.h:1:0,                  from arch/s390/mm/fault.c:33: include/generated/asm-offsets.h:53:0: warning: "CLOCK_REALTIME" redefined include/linux/time.h:286:0: note: this is the location of the previous definition include/generated/asm-offsets.h:54:0: warning: "CLOCK_MONOTONIC" redefined include/linux/time.h:287:0: note: this is the location of the previous definition  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | clock_getres.S | g | 1.1K |  | Heiko Carstens | heiko.carstens@de.ibm.com | 1288363850 |  | [S390] vdso: get rid of redefinition warnings  The CLOCK_* defines in asm-offsets.c are only used for the vdso code however in the meantime they cause other trouble. Just rename them to get permanently rid of this:  In file included from /home2/heicarst/linux-2.6/arch/s390/include/asm/asm-offsets.h:1:0,                  from arch/s390/mm/fault.c:33: include/generated/asm-offsets.h:53:0: warning: "CLOCK_REALTIME" redefined include/linux/time.h:286:0: note: this is the location of the previous definition include/generated/asm-offsets.h:54:0: warning: "CLOCK_MONOTONIC" redefined include/linux/time.h:287:0: note: this is the location of the previous definition  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | vdso64.lds.S | g | 3.3K |  | Martin Schwidefsky | schwidefsky@de.ibm.com | 1230208735 |  | [S390] introduce vdso on s390  Add a vdso to speed up gettimeofday and clock_getres/clock_gettime for CLOCK_REALTIME/CLOCK_MONOTONIC.  Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
