<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › s390 › include › asm › scsw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>scsw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Helper functions for scsw access.</span>
<span class="cm"> *</span>
<span class="cm"> *    Copyright IBM Corp. 2008,2009</span>
<span class="cm"> *    Author(s): Peter Oberparleiter &lt;peter.oberparleiter@de.ibm.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_S390_SCSW_H_</span>
<span class="cp">#define _ASM_S390_SCSW_H_</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;asm/chsc.h&gt;</span>
<span class="cp">#include &lt;asm/cio.h&gt;</span>

<span class="cm">/**</span>
<span class="cm"> * struct cmd_scsw - command-mode subchannel status word</span>
<span class="cm"> * @key: subchannel key</span>
<span class="cm"> * @sctl: suspend control</span>
<span class="cm"> * @eswf: esw format</span>
<span class="cm"> * @cc: deferred condition code</span>
<span class="cm"> * @fmt: format</span>
<span class="cm"> * @pfch: prefetch</span>
<span class="cm"> * @isic: initial-status interruption control</span>
<span class="cm"> * @alcc: address-limit checking control</span>
<span class="cm"> * @ssi: suppress-suspended interruption</span>
<span class="cm"> * @zcc: zero condition code</span>
<span class="cm"> * @ectl: extended control</span>
<span class="cm"> * @pno: path not operational</span>
<span class="cm"> * @res: reserved</span>
<span class="cm"> * @fctl: function control</span>
<span class="cm"> * @actl: activity control</span>
<span class="cm"> * @stctl: status control</span>
<span class="cm"> * @cpa: channel program address</span>
<span class="cm"> * @dstat: device status</span>
<span class="cm"> * @cstat: subchannel status</span>
<span class="cm"> * @count: residual count</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">cmd_scsw</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">key</span>  <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">sctl</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">eswf</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cc</span>   <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">fmt</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pfch</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">isic</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">alcc</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">ssi</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">zcc</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">ectl</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">pno</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">res</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">fctl</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">actl</span> <span class="o">:</span> <span class="mi">7</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">stctl</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cpa</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">dstat</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cstat</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">count</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/**</span>
<span class="cm"> * struct tm_scsw - transport-mode subchannel status word</span>
<span class="cm"> * @key: subchannel key</span>
<span class="cm"> * @eswf: esw format</span>
<span class="cm"> * @cc: deferred condition code</span>
<span class="cm"> * @fmt: format</span>
<span class="cm"> * @x: IRB-format control</span>
<span class="cm"> * @q: interrogate-complete</span>
<span class="cm"> * @ectl: extended control</span>
<span class="cm"> * @pno: path not operational</span>
<span class="cm"> * @fctl: function control</span>
<span class="cm"> * @actl: activity control</span>
<span class="cm"> * @stctl: status control</span>
<span class="cm"> * @tcw: TCW address</span>
<span class="cm"> * @dstat: device status</span>
<span class="cm"> * @cstat: subchannel status</span>
<span class="cm"> * @fcxs: FCX status</span>
<span class="cm"> * @schxs: subchannel-extended status</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">tm_scsw</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">key</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">u32</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">eswf</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cc</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fmt</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">x</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">q</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">ectl</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pno</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fctl</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">actl</span><span class="o">:</span><span class="mi">7</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">stctl</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tcw</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">dstat</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cstat</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">fcxs</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">schxs</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/**</span>
<span class="cm"> * union scsw - subchannel status word</span>
<span class="cm"> * @cmd: command-mode SCSW</span>
<span class="cm"> * @tm: transport-mode SCSW</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">scsw</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">cmd_scsw</span> <span class="n">cmd</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">tm_scsw</span> <span class="n">tm</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cp">#define SCSW_FCTL_CLEAR_FUNC	 0x1</span>
<span class="cp">#define SCSW_FCTL_HALT_FUNC	 0x2</span>
<span class="cp">#define SCSW_FCTL_START_FUNC	 0x4</span>

<span class="cp">#define SCSW_ACTL_SUSPENDED	 0x1</span>
<span class="cp">#define SCSW_ACTL_DEVACT	 0x2</span>
<span class="cp">#define SCSW_ACTL_SCHACT	 0x4</span>
<span class="cp">#define SCSW_ACTL_CLEAR_PEND	 0x8</span>
<span class="cp">#define SCSW_ACTL_HALT_PEND	 0x10</span>
<span class="cp">#define SCSW_ACTL_START_PEND	 0x20</span>
<span class="cp">#define SCSW_ACTL_RESUME_PEND	 0x40</span>

<span class="cp">#define SCSW_STCTL_STATUS_PEND	 0x1</span>
<span class="cp">#define SCSW_STCTL_SEC_STATUS	 0x2</span>
<span class="cp">#define SCSW_STCTL_PRIM_STATUS	 0x4</span>
<span class="cp">#define SCSW_STCTL_INTER_STATUS	 0x8</span>
<span class="cp">#define SCSW_STCTL_ALERT_STATUS	 0x10</span>

<span class="cp">#define DEV_STAT_ATTENTION	 0x80</span>
<span class="cp">#define DEV_STAT_STAT_MOD	 0x40</span>
<span class="cp">#define DEV_STAT_CU_END		 0x20</span>
<span class="cp">#define DEV_STAT_BUSY		 0x10</span>
<span class="cp">#define DEV_STAT_CHN_END	 0x08</span>
<span class="cp">#define DEV_STAT_DEV_END	 0x04</span>
<span class="cp">#define DEV_STAT_UNIT_CHECK	 0x02</span>
<span class="cp">#define DEV_STAT_UNIT_EXCEP	 0x01</span>

<span class="cp">#define SCHN_STAT_PCI		 0x80</span>
<span class="cp">#define SCHN_STAT_INCORR_LEN	 0x40</span>
<span class="cp">#define SCHN_STAT_PROG_CHECK	 0x20</span>
<span class="cp">#define SCHN_STAT_PROT_CHECK	 0x10</span>
<span class="cp">#define SCHN_STAT_CHN_DATA_CHK	 0x08</span>
<span class="cp">#define SCHN_STAT_CHN_CTRL_CHK	 0x04</span>
<span class="cp">#define SCHN_STAT_INTF_CTRL_CHK	 0x02</span>
<span class="cp">#define SCHN_STAT_CHAIN_CHECK	 0x01</span>

<span class="cm">/*</span>
<span class="cm"> * architectured values for first sense byte</span>
<span class="cm"> */</span>
<span class="cp">#define SNS0_CMD_REJECT		0x80</span>
<span class="cp">#define SNS_CMD_REJECT		SNS0_CMD_REJEC</span>
<span class="cp">#define SNS0_INTERVENTION_REQ	0x40</span>
<span class="cp">#define SNS0_BUS_OUT_CHECK	0x20</span>
<span class="cp">#define SNS0_EQUIPMENT_CHECK	0x10</span>
<span class="cp">#define SNS0_DATA_CHECK		0x08</span>
<span class="cp">#define SNS0_OVERRUN		0x04</span>
<span class="cp">#define SNS0_INCOMPL_DOMAIN	0x01</span>

<span class="cm">/*</span>
<span class="cm"> * architectured values for second sense byte</span>
<span class="cm"> */</span>
<span class="cp">#define SNS1_PERM_ERR		0x80</span>
<span class="cp">#define SNS1_INV_TRACK_FORMAT	0x40</span>
<span class="cp">#define SNS1_EOC		0x20</span>
<span class="cp">#define SNS1_MESSAGE_TO_OPER	0x10</span>
<span class="cp">#define SNS1_NO_REC_FOUND	0x08</span>
<span class="cp">#define SNS1_FILE_PROTECTED	0x04</span>
<span class="cp">#define SNS1_WRITE_INHIBITED	0x02</span>
<span class="cp">#define SNS1_INPRECISE_END	0x01</span>

<span class="cm">/*</span>
<span class="cm"> * architectured values for third sense byte</span>
<span class="cm"> */</span>
<span class="cp">#define SNS2_REQ_INH_WRITE	0x80</span>
<span class="cp">#define SNS2_CORRECTABLE	0x40</span>
<span class="cp">#define SNS2_FIRST_LOG_ERR	0x20</span>
<span class="cp">#define SNS2_ENV_DATA_PRESENT	0x10</span>
<span class="cp">#define SNS2_INPRECISE_END	0x04</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_tm - check for transport mode scsw</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the specified scsw is a transport mode scsw, zero</span>
<span class="cm"> * otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_tm</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">css_general_characteristics</span><span class="p">.</span><span class="n">fcx</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_key - return scsw key field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the key field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_key</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">key</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">key</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_eswf - return scsw eswf field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the eswf field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_eswf</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">eswf</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">eswf</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cc - return scsw cc field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the cc field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_cc</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">cc</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">cc</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_ectl - return scsw ectl field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the ectl field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_ectl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">ectl</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">ectl</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_pno - return scsw pno field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the pno field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_pno</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">pno</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">pno</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_fctl - return scsw fctl field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the fctl field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_fctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">fctl</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_actl - return scsw actl field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the actl field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_actl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">actl</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">actl</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_stctl - return scsw stctl field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the stctl field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_stctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_dstat - return scsw dstat field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the dstat field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_dstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">dstat</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">dstat</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cstat - return scsw cstat field</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return the value of the cstat field of the specified scsw, regardless of</span>
<span class="cm"> * whether it is a transport mode or command mode scsw.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">scsw_cstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">cstat</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">cstat</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_key - check key field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the key field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_key</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_sctl - check fctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fctl field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_sctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_eswf - check eswf field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the eswf field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_eswf</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_cc - check cc field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the cc field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_cc</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_fmt - check fmt field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fmt field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_fmt</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_pfch - check pfch field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the pfch field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_pfch</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_isic - check isic field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the isic field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_isic</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_alcc - check alcc field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the alcc field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_alcc</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_ssi - check ssi field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the ssi field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_ssi</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_zcc - check zcc field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the zcc field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_zcc</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_ectl - check ectl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the ectl field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_ectl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="o">!</span><span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_ALERT_STATUS</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_pno - check pno field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the pno field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_pno</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">fctl</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">)</span> <span class="o">||</span>
		 <span class="p">((</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		  <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">actl</span> <span class="o">&amp;</span> <span class="n">SCSW_ACTL_SUSPENDED</span><span class="p">)));</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_fctl - check fctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fctl field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_fctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Only valid if pmcw.dnv == 1*/</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_actl - check actl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the actl field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_actl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Only valid if pmcw.dnv == 1*/</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_stctl - check stctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the stctl field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_stctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Only valid if pmcw.dnv == 1*/</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_dstat - check dstat field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the dstat field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_dstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">cc</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_valid_cstat - check cstat field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the cstat field of the specified command mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_valid_cstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">cc</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_key - check key field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the key field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_key</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_eswf - check eswf field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the eswf field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_eswf</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_cc - check cc field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the cc field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_cc</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">fctl</span> <span class="o">&amp;</span> <span class="n">SCSW_FCTL_START_FUNC</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_fmt - check fmt field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fmt field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_fmt</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_x - check x field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the x field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_x</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_q - check q field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the q field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_q</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_ectl - check ectl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the ectl field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_ectl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="o">!</span><span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_ALERT_STATUS</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_pno - check pno field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the pno field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_pno</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">fctl</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">)</span> <span class="o">||</span>
		 <span class="p">((</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_INTER_STATUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
		  <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">actl</span> <span class="o">&amp;</span> <span class="n">SCSW_ACTL_SUSPENDED</span><span class="p">)));</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_fctl - check fctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fctl field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_fctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Only valid if pmcw.dnv == 1*/</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_actl - check actl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the actl field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_actl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Only valid if pmcw.dnv == 1*/</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_stctl - check stctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the stctl field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_stctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Only valid if pmcw.dnv == 1*/</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_dstat - check dstat field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the dstat field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_dstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">cc</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_cstat - check cstat field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the cstat field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_cstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">&amp;</span> <span class="n">SCSW_STCTL_STATUS_PEND</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
	       <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">cc</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_fcxs - check fcxs field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fcxs field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_fcxs</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_valid_schxs - check schxs field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the schxs field of the specified transport mode scsw is</span>
<span class="cm"> * valid, zero otherwise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_valid_schxs</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">cstat</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">SCHN_STAT_PROG_CHECK</span> <span class="o">|</span>
				  <span class="n">SCHN_STAT_INTF_CTRL_CHK</span> <span class="o">|</span>
				  <span class="n">SCHN_STAT_PROT_CHECK</span> <span class="o">|</span>
				  <span class="n">SCHN_STAT_CHN_DATA_CHK</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_actl - check actl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the actl field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_actl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_actl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_actl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_cc - check cc field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the cc field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_cc</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_cc</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_cc</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_cstat - check cstat field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the cstat field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_cstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_cstat</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_cstat</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_dstat - check dstat field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the dstat field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_dstat</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_dstat</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_dstat</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_ectl - check ectl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the ectl field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_ectl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_ectl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_ectl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_eswf - check eswf field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the eswf field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_eswf</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_eswf</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_eswf</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_fctl - check fctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the fctl field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_fctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_fctl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_fctl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_key - check key field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the key field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_key</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_key</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_key</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_pno - check pno field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the pno field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_pno</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_pno</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_pno</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_valid_stctl - check stctl field validity</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the stctl field of the specified scsw is valid,</span>
<span class="cm"> * regardless of whether it is a transport mode or command mode scsw.</span>
<span class="cm"> * Return zero if the field does not contain a valid value.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_valid_stctl</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_valid_stctl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_valid_stctl</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_cmd_is_solicited - check for solicited scsw</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the command mode scsw indicates that the associated</span>
<span class="cm"> * status condition is solicited, zero if it is unsolicited.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_cmd_is_solicited</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">cc</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">cmd</span><span class="p">.</span><span class="n">stctl</span> <span class="o">!=</span>
		<span class="p">(</span><span class="n">SCSW_STCTL_STATUS_PEND</span> <span class="o">|</span> <span class="n">SCSW_STCTL_ALERT_STATUS</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_tm_is_solicited - check for solicited scsw</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the transport mode scsw indicates that the associated</span>
<span class="cm"> * status condition is solicited, zero if it is unsolicited.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_tm_is_solicited</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">cc</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">scsw</span><span class="o">-&gt;</span><span class="n">tm</span><span class="p">.</span><span class="n">stctl</span> <span class="o">!=</span>
		<span class="p">(</span><span class="n">SCSW_STCTL_STATUS_PEND</span> <span class="o">|</span> <span class="n">SCSW_STCTL_ALERT_STATUS</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * scsw_is_solicited - check for solicited scsw</span>
<span class="cm"> * @scsw: pointer to scsw</span>
<span class="cm"> *</span>
<span class="cm"> * Return non-zero if the transport or command mode scsw indicates that the</span>
<span class="cm"> * associated status condition is solicited, zero if it is unsolicited.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">scsw_is_solicited</span><span class="p">(</span><span class="k">union</span> <span class="n">scsw</span> <span class="o">*</span><span class="n">scsw</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">scsw_is_tm</span><span class="p">(</span><span class="n">scsw</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">scsw_tm_is_solicited</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
	<span class="k">else</span>
		<span class="k">return</span> <span class="n">scsw_cmd_is_solicited</span><span class="p">(</span><span class="n">scsw</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_S390_SCSW_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
