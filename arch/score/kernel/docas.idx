f | Makefile | g | 219B |  | Thomas Gleixner | tglx@linutronix.de | 1336215625 |  | score: Use generic init_task  Same code. Use the generic version.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Chen Liqin <liqin.chen@sunplusct.com> Link: http://lkml.kernel.org/r/20120503085035.332320547@linutronix.de
f | time.c | s | 2.8K | 87 | Arnd Bergmann | arnd@arndb.de | 1246108498 |  | score: fix function prototypes  Syscalls should return 'long' and be marked as 'asmlinkage'. Functions that are only used in a single file should be 'static'.  Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | head.S | g | 1.6K |  | Chen Liqin | liqin.chen@sunplusct.com | 1245404327 |  | score: Add support for Sunplus S+core architecture  This is the complete set of new arch Score's files for linux. Score instruction set support 16bits, 32bits and 64bits instruction, Score SOC had been used in game machine and LCD TV.  Signed-off-by: Chen Liqin <liqin.chen@sunplusct.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | sys_call_table.c | s | 236B | 9 | Arnd Bergmann | arnd@arndb.de | 1245413433 |  | score: add generic sys_call_table  This adds back a sys_call_table to the score architecture, which got lost in the conversion to the generic unistd.h file. It's rather worrying that the code got submitted without a system call table, which evidently means that it got zero testing.  Since the system call table has a different layout from the old one (which was modeled after the mips-o32 one), I also try to fix the entry.S path to use it. In the modified calling conventions, all system call arguments are passed as registers r4 through r9, instead of r4 through r7 plus stack for the fifth and sixth argument.  This matches what other architectures to when they normally pass arguments on the stack.  Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | ptrace.c | s | 9.7K | 331 | Namhyung Kim | namhyung@gmail.com | 1288227792 |  | ptrace: cleanup arch_ptrace() on score  Remove unnecessary castings.  Signed-off-by: Namhyung Kim <namhyung@gmail.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | traps.c | s | 8.9K | 304 | Chen Liqin | liqin.chen@sunplusct.com | 1245404413 |  | score: update files according to review comments  modified:   arch/score/include/asm/cacheflush.h 	modified:   arch/score/include/asm/delay.h 	modified:   arch/score/include/asm/errno.h 	modified:   arch/score/include/asm/pgtable-bits.h 	modified:   arch/score/include/asm/pgtable.h 	modified:   arch/score/include/asm/ptrace.h 	modified:   arch/score/include/asm/unistd.h 	modified:   arch/score/kernel/entry.S 	modified:   arch/score/kernel/process.c 	modified:   arch/score/kernel/ptrace.c 	modified:   arch/score/kernel/signal.c 	modified:   arch/score/kernel/sys_score.c 	modified:   arch/score/kernel/traps.c 	modified:   arch/score/mm/cache.c  Signed-off-by: Chen Liqin <liqin.chen@sunplusct.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | vmlinux.lds.S | g | 2.1K |  | Tim Abbott | tabbott@ksplice.com | 1253684475 |  | score: Cleanup linker script using new macros.  Signed-off-by: Tim Abbott <tabbott@ksplice.com> Acked-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chen Liqin <liqin.chen@sunplusct.com>
f | asm-offsets.c | s | 6.6K | 204 | Chen Liqin | liqin.chen@sunplusct.com | 1245404327 |  | score: Add support for Sunplus S+core architecture  This is the complete set of new arch Score's files for linux. Score instruction set support 16bits, 32bits and 64bits instruction, Score SOC had been used in game machine and LCD TV.  Signed-off-by: Chen Liqin <liqin.chen@sunplusct.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | irq.c | s | 2.9K | 96 | Thomas Gleixner | tglx@linutronix.de | 1301285015 |  | score: Use generic show_interrupts()  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Chen Liqin <liqin.chen@sunplusct.com>
f | setup.c | s | 4.0K | 132 | Tejun Heo | tj@kernel.org | 1323368529 |  | score: Use HAVE_MEMBLOCK_NODE_MAP  score used early_node_map[] just to prime free_area_init_nodes().  Now memblock can be used for the same purpose and early_node_map[] is scheduled to be dropped.  Use memblock instead.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Yinghai Lu <yinghai@kernel.org> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com>
f | module.c | s | 4.0K | 126 | Jonas Bonn | jonas@southpole.se | 1311510964 |  | modules: make arch's use default loader hooks  This patch removes all the module loader hook implementations in the architecture specific code where the functionality is the same as that now provided by the recently added default hooks.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Acked-by: Mike Frysinger <vapier@gentoo.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Tested-by: Michal Simek <monstr@monstr.eu> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | process.c | s | 4.2K | 137 | Thomas Gleixner | tglx@linutronix.de | 1330594083 |  | sched/rt: Use schedule_preempt_disabled()  Coccinelle based conversion.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/n/tip-24swm5zut3h9c4a6s46x8rws@git.kernel.org Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | signal.c | s | 9.1K | 283 | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | sys_score.c | s | 3.6K | 122 | David Howells | dhowells@redhat.com | 1282093663 |  | Make do_execve() take a const filename pointer  Make do_execve() take a const filename pointer so that kernel_execve() compiles correctly on ARM:  arch/arm/kernel/sys_arm.c:88: warning: passing argument 1 of 'do_execve' discards qualifiers from pointer target type  This also requires the argv and envp arguments to be consted twice, once for the pointer array and once for the strings the array points to.  This is because do_execve() passes a pointer to the filename (now const) to copy_strings_kernel().  A simpler alternative would be to cast the filename pointer in do_execve() when it's passed to copy_strings_kernel().  do_execve() may not change any of the strings it is passed as part of the argv or envp lists as they are some of them in .rodata, so marking these strings as const should be fine.  Further kernel_execve() and sys_execve() need to be changed to match.  This has been test built on x86_64, frv, arm and mips.  Signed-off-by: David Howells <dhowells@redhat.com> Tested-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: Russell King <rmk+kernel@arm.linux.org.uk> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | entry.S | g | 8.8K |  | Dan Rosenberg | drosenberg@vsecurity.com | 1327336729 |  | score: fix off-by-one index into syscall table  If the provided system call number is equal to __NR_syscalls, the current check will pass and a function pointer just after the system call table may be called, since sys_call_table is an array with total size __NR_syscalls.  Whether or not this is a security bug depends on what the compiler puts immediately after the system call table.  It's likely that this won't do anything bad because there is an additional NULL check on the syscall entry, but if there happens to be a non-NULL value immediately after the system call table, this may result in local privilege escalation.  Signed-off-by: Dan Rosenberg <drosenberg@vsecurity.com> Cc: <stable@vger.kernel.org> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: Eugene Teo <eugeneteo@kernel.sg> Cc: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
