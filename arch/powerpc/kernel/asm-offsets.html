<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › kernel › asm-offsets.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>asm-offsets.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This program is used to generate definitions needed by</span>
<span class="cm"> * assembly language modules.</span>
<span class="cm"> *</span>
<span class="cm"> * We use the technique used in the OSF Mach kernel code:</span>
<span class="cm"> * generate asm statements containing #defines,</span>
<span class="cm"> * compile this file to assembler, and then extract the</span>
<span class="cm"> * #defines from the assembly-language output.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version</span>
<span class="cm"> * 2 of the License, or (at your option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/signal.h&gt;</span>
<span class="cp">#include &lt;linux/sched.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/string.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/mman.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/suspend.h&gt;</span>
<span class="cp">#include &lt;linux/hrtimer.h&gt;</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
<span class="cp">#include &lt;linux/time.h&gt;</span>
<span class="cp">#include &lt;linux/hardirq.h&gt;</span>
<span class="cp">#endif</span>
<span class="cp">#include &lt;linux/kbuild.h&gt;</span>

<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;asm/page.h&gt;</span>
<span class="cp">#include &lt;asm/pgtable.h&gt;</span>
<span class="cp">#include &lt;asm/processor.h&gt;</span>
<span class="cp">#include &lt;asm/cputable.h&gt;</span>
<span class="cp">#include &lt;asm/thread_info.h&gt;</span>
<span class="cp">#include &lt;asm/rtas.h&gt;</span>
<span class="cp">#include &lt;asm/vdso_datapage.h&gt;</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
<span class="cp">#include &lt;asm/paca.h&gt;</span>
<span class="cp">#include &lt;asm/lppaca.h&gt;</span>
<span class="cp">#include &lt;asm/cache.h&gt;</span>
<span class="cp">#include &lt;asm/compat.h&gt;</span>
<span class="cp">#include &lt;asm/mmu.h&gt;</span>
<span class="cp">#include &lt;asm/hvcall.h&gt;</span>
<span class="cp">#include &lt;asm/xics.h&gt;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC_POWERNV</span>
<span class="cp">#include &lt;asm/opal.h&gt;</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_KVM) || defined(CONFIG_KVM_GUEST)</span>
<span class="cp">#include &lt;linux/kvm_host.h&gt;</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_KVM) &amp;&amp; defined(CONFIG_PPC_BOOK3S)</span>
<span class="cp">#include &lt;asm/kvm_book3s.h&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PPC32</span>
<span class="cp">#if defined(CONFIG_BOOKE) || defined(CONFIG_40x)</span>
<span class="cp">#include &quot;head_booke.h&quot;</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_PPC_FSL_BOOK3E)</span>
<span class="cp">#include &quot;../mm/mmu_decl.h&quot;</span>
<span class="cp">#endif</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span><span class="p">,</span> <span class="kr">thread</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MM</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span><span class="p">,</span> <span class="n">mm</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MMCONTEXTID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">mm_struct</span><span class="p">,</span> <span class="n">context</span><span class="p">.</span><span class="n">id</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">AUDITCONTEXT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span><span class="p">,</span> <span class="n">audit_context</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SIGSEGV</span><span class="p">,</span> <span class="n">SIGSEGV</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">NMI_MASK</span><span class="p">,</span> <span class="n">NMI_MASK</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_DSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">dscr</span><span class="p">));</span>
<span class="cp">#else</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_INFO</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span><span class="p">,</span> <span class="n">stack</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>

	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KSP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">ksp</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KSP_LIMIT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">ksp_limit</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PT_REGS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">regs</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_BOOKE</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_NORMSAVES</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">normsave</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
<span class="cp">#endif</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_FPEXC_MODE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">fpexc_mode</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_FPR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">fpr</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_FPSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">fpscr</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_ALTIVEC</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_VR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">vr</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_VRSAVE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">vrsave</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_VSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">vscr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_USED_VR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">used_vr</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_ALTIVEC */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_VSX</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_VSR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">fpr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_USED_VSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">used_vsr</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_VSX */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KSP_VSID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">ksp_vsid</span><span class="p">));</span>
<span class="cp">#else </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PGDIR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">pgdir</span><span class="p">));</span>
<span class="cp">#if defined(CONFIG_4xx) || defined(CONFIG_BOOKE)</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_DBCR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">dbcr0</span><span class="p">));</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SPE</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_EVR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">evr</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_ACC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">acc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_SPEFSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">spefscr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_USED_SPE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">used_spe</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_SPE */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_KVM_BOOK3S_32_HANDLER</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_KVM_SVCPU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">kvm_shadow_vcpu</span><span class="p">));</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_KVM_BOOKE_HV</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">THREAD_KVM_VCPU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_struct</span><span class="p">,</span> <span class="n">kvm_vcpu</span><span class="p">));</span>
<span class="cp">#endif</span>

	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TI_FLAGS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_info</span><span class="p">,</span> <span class="n">flags</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TI_LOCAL_FLAGS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_info</span><span class="p">,</span> <span class="n">local_flags</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TI_PREEMPT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_info</span><span class="p">,</span> <span class="n">preempt_count</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TI_TASK</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_info</span><span class="p">,</span> <span class="n">task</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TI_CPU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">thread_info</span><span class="p">,</span> <span class="n">cpu</span><span class="p">));</span>

<span class="cp">#ifdef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">DCACHEL1LINESIZE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ppc64_caches</span><span class="p">,</span> <span class="n">dline_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">DCACHEL1LOGLINESIZE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ppc64_caches</span><span class="p">,</span> <span class="n">log_dline_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">DCACHEL1LINESPERPAGE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ppc64_caches</span><span class="p">,</span> <span class="n">dlines_per_page</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">ICACHEL1LINESIZE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ppc64_caches</span><span class="p">,</span> <span class="n">iline_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">ICACHEL1LOGLINESIZE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ppc64_caches</span><span class="p">,</span> <span class="n">log_iline_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">ICACHEL1LINESPERPAGE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">ppc64_caches</span><span class="p">,</span> <span class="n">ilines_per_page</span><span class="p">));</span>
	<span class="cm">/* paca */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_SIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_LOCK_TOKEN</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">lock_token</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAPACAINDEX</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">paca_index</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAPROCSTART</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">cpu_start</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAKSAVE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">kstack</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACACURRENT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">__current</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASAVEDMSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">saved_msr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASTABRR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">stab_rr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAR1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">saved_r1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACATOC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">kernel_toc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAKBASE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">kernelbase</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAKMSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">kernel_msr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASOFTIRQEN</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">soft_enabled</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAIRQHAPPENED</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">irq_happened</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACACONTEXTID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">context</span><span class="p">.</span><span class="n">id</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_PPC_MM_SLICES</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACALOWSLICESPSIZE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span>
					    <span class="n">context</span><span class="p">.</span><span class="n">low_slices_psize</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAHIGHSLICEPSIZE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span>
					    <span class="n">context</span><span class="p">.</span><span class="n">high_slices_psize</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MMUPSIZEDEFSIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">mmu_psize_def</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC_MM_SLICES */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_PPC_BOOK3E</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAPGD</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">pgd</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_KERNELPGD</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">kernel_pgd</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXGEN</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">exgen</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXTLB</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">extlb</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXMC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">exmc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXCRIT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">excrit</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXDBG</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">exdbg</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_MC_STACK</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">mc_kstack</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_CRIT_STACK</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">crit_kstack</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_DBG_STACK</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">dbg_kstack</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC_BOOK3E */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_PPC_STD_MMU_64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASTABREAL</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">stab_real</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASTABVIRT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">stab_addr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASLBCACHE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">slb_cache</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACASLBCACHEPTR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">slb_cache_ptr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAVMALLOCSLLP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">vmalloc_sllp</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_PPC_MM_SLICES</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MMUPSIZESLLP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">mmu_psize_def</span><span class="p">,</span> <span class="n">sllp</span><span class="p">));</span>
<span class="cp">#else</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACACONTEXTSLLP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">context</span><span class="p">.</span><span class="n">sllp</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC_MM_SLICES */</span><span class="cp"></span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXGEN</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">exgen</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXMC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">exmc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_EXSLB</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">exslb</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACALPPACAPTR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">lppaca_ptr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_SLBSHADOWPTR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">slb_shadow_ptr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SLBSHADOW_STACKVSID</span><span class="p">,</span>
	       <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">slb_shadow</span><span class="p">,</span> <span class="n">save_area</span><span class="p">[</span><span class="n">SLB_NUM_BOLTED</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">vsid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SLBSHADOW_STACKESID</span><span class="p">,</span>
	       <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">slb_shadow</span><span class="p">,</span> <span class="n">save_area</span><span class="p">[</span><span class="n">SLB_NUM_BOLTED</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="n">esid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SLBSHADOW_SAVEAREA</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">slb_shadow</span><span class="p">,</span> <span class="n">save_area</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">LPPACA_PMCINUSE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">lppaca</span><span class="p">,</span> <span class="n">pmcregs_in_use</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">LPPACA_DTLIDX</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">lppaca</span><span class="p">,</span> <span class="n">dtl_idx</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">LPPACA_YIELDCOUNT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">lppaca</span><span class="p">,</span> <span class="n">yield_count</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_DTL_RIDX</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">dtl_ridx</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC_STD_MMU_64 */</span><span class="cp"></span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAEMERGSP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">emergency_sp</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAHWCPUID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">hw_cpu_id</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACAKEXECSTATE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">kexec_state</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_STARTTIME</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">starttime</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_STARTTIME_USER</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">starttime_user</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_USER_TIME</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">user_time</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_SYSTEM_TIME</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">system_time</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_TRAP_SAVE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">trap_save</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_NAPSTATELOST</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">nap_state_lost</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>

	<span class="cm">/* RTAS */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">RTASBASE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">rtas_t</span><span class="p">,</span> <span class="n">base</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">RTASENTRY</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">rtas_t</span><span class="p">,</span> <span class="n">entry</span><span class="p">));</span>

	<span class="cm">/* Interrupt register frame */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">INT_FRAME_SIZE</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SWITCH_FRAME_SIZE</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
	<span class="cm">/* Create extra stack space for SRR0 and SRR1 when calling prom/rtas. */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PROM_FRAME_SIZE</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">16</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">RTAS_FRAME_SIZE</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">16</span><span class="p">);</span>

	<span class="cm">/* hcall statistics */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">HCALL_STAT_SIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">hcall_stats</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">HCALL_STAT_CALLS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">hcall_stats</span><span class="p">,</span> <span class="n">num_calls</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">HCALL_STAT_TB</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">hcall_stats</span><span class="p">,</span> <span class="n">tb_total</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">HCALL_STAT_PURR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">hcall_stats</span><span class="p">,</span> <span class="n">purr_total</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR0</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR1</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR2</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">2</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR3</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">3</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR4</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">4</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR5</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">5</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR6</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">6</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR7</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">7</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR8</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">8</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR9</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">9</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR10</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">10</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR11</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">11</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR12</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">12</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR13</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">13</span><span class="p">]));</span>
<span class="cp">#ifndef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR14</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">14</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR15</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">15</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR16</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">16</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR17</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">17</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR18</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">18</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR19</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">19</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR20</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">20</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR21</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">21</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR22</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">22</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR23</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">23</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR24</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">24</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR25</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">25</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR26</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">26</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR27</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">27</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR28</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">28</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR29</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">29</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR30</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">30</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">GPR31</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">31</span><span class="p">]));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>
	<span class="cm">/*</span>
<span class="cm">	 * Note: these symbols include _ because they overlap with special</span>
<span class="cm">	 * register names</span>
<span class="cm">	 */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_NIP</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">nip</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_MSR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">msr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_CTR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">ctr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_LINK</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">link</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_CCR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">ccr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_XER</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">xer</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_DAR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">dar</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_DSISR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">dsisr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">ORIG_GPR3</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">orig_gpr3</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">RESULT</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">result</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_TRAP</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">trap</span><span class="p">));</span>
<span class="cp">#ifndef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_MQ</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">mq</span><span class="p">));</span>
	<span class="cm">/*</span>
<span class="cm">	 * The PowerPC 400-class &amp; Book-E processors have neither the DAR</span>
<span class="cm">	 * nor the DSISR SPRs. Hence, we overload them to hold the similar</span>
<span class="cm">	 * DEAR and ESR SPRs for such processors.  For critical interrupts</span>
<span class="cm">	 * we use them to hold SRR0 and SRR1.</span>
<span class="cm">	 */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_DEAR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">dar</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_ESR</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">dsisr</span><span class="p">));</span>
<span class="cp">#else </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SOFTE</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">,</span> <span class="n">softe</span><span class="p">));</span>

	<span class="cm">/* These _only_ to be used with {PROM,RTAS}_FRAME_SIZE!!! */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_SRR0</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_SRR1</span><span class="p">,</span> <span class="n">STACK_FRAME_OVERHEAD</span><span class="o">+</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span><span class="p">)</span><span class="o">+</span><span class="mi">8</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC64 */</span><span class="cp"></span>

<span class="cp">#if defined(CONFIG_PPC32)</span>
<span class="cp">#if defined(CONFIG_BOOKE) || defined(CONFIG_40x)</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">EXC_LVL_SIZE</span><span class="p">,</span> <span class="n">STACK_EXC_LVL_FRAME_SIZE</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MAS0</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas0</span><span class="p">));</span>
	<span class="cm">/* we overload MMUCR for 44x on MAS0 since they are mutually exclusive */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MMUCR</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MAS1</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MAS2</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas2</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MAS3</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas3</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MAS6</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas6</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MAS7</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">mas7</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_SRR0</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">srr0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_SRR1</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">srr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_CSRR0</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">csrr0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_CSRR1</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">csrr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_DSRR0</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">dsrr0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">_DSRR1</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">dsrr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">SAVED_KSP_LIMIT</span><span class="p">,</span> <span class="n">STACK_INT_FRAME_SIZE</span><span class="o">+</span><span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">exception_regs</span><span class="p">,</span> <span class="n">saved_ksp_limit</span><span class="p">));</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CLONE_VM</span><span class="p">,</span> <span class="n">CLONE_VM</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CLONE_UNTRACED</span><span class="p">,</span> <span class="n">CLONE_UNTRACED</span><span class="p">);</span>

<span class="cp">#ifndef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">MM_PGD</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">mm_struct</span><span class="p">,</span> <span class="n">pgd</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* ! CONFIG_PPC64 */</span><span class="cp"></span>

	<span class="cm">/* About the CPU features table */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CPU_SPEC_FEATURES</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">cpu_spec</span><span class="p">,</span> <span class="n">cpu_features</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CPU_SPEC_SETUP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">cpu_spec</span><span class="p">,</span> <span class="n">cpu_setup</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CPU_SPEC_RESTORE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">cpu_spec</span><span class="p">,</span> <span class="n">cpu_restore</span><span class="p">));</span>

	<span class="n">DEFINE</span><span class="p">(</span><span class="n">pbe_address</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pbe</span><span class="p">,</span> <span class="n">address</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">pbe_orig_address</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pbe</span><span class="p">,</span> <span class="n">orig_address</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">pbe_next</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">pbe</span><span class="p">,</span> <span class="n">next</span><span class="p">));</span>

<span class="cp">#ifndef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TASK_SIZE</span><span class="p">,</span> <span class="n">TASK_SIZE</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">NUM_USER_SEGMENTS</span><span class="p">,</span> <span class="n">TASK_SIZE</span><span class="o">&gt;&gt;</span><span class="mi">28</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* ! CONFIG_PPC64 */</span><span class="cp"></span>

	<span class="cm">/* datapage offsets for use by vdso */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_TB_ORIG_STAMP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">tb_orig_stamp</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_TB_TICKS_PER_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">tb_ticks_per_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_TB_TO_XS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">tb_to_xs</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_STAMP_XSEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">stamp_xsec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_TB_UPDATE_COUNT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">tb_update_count</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_TZ_MINUTEWEST</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">tz_minuteswest</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_TZ_DSTTIME</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">tz_dsttime</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_SYSCALL_MAP32</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">syscall_map_32</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">WTOM_CLOCK_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">wtom_clock_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">WTOM_CLOCK_NSEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">wtom_clock_nsec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">STAMP_XTIME</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">stamp_xtime</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">STAMP_SEC_FRAC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">stamp_sec_fraction</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_ICACHE_BLOCKSZ</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">icache_block_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_DCACHE_BLOCKSZ</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">dcache_block_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_ICACHE_LOGBLOCKSZ</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">icache_log_block_size</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_DCACHE_LOGBLOCKSZ</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">dcache_log_block_size</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CFG_SYSCALL_MAP64</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">vdso_data</span><span class="p">,</span> <span class="n">syscall_map_64</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TVAL64_TV_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span><span class="p">,</span> <span class="n">tv_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TVAL64_TV_USEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span><span class="p">,</span> <span class="n">tv_usec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TVAL32_TV_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timeval</span><span class="p">,</span> <span class="n">tv_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TVAL32_TV_USEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timeval</span><span class="p">,</span> <span class="n">tv_usec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TSPC64_TV_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span><span class="p">,</span> <span class="n">tv_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TSPC64_TV_NSEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span><span class="p">,</span> <span class="n">tv_nsec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TSPC32_TV_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timespec</span><span class="p">,</span> <span class="n">tv_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TSPC32_TV_NSEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">compat_timespec</span><span class="p">,</span> <span class="n">tv_nsec</span><span class="p">));</span>
<span class="cp">#else</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TVAL32_TV_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span><span class="p">,</span> <span class="n">tv_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TVAL32_TV_USEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span><span class="p">,</span> <span class="n">tv_usec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TSPC32_TV_SEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span><span class="p">,</span> <span class="n">tv_sec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TSPC32_TV_NSEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timespec</span><span class="p">,</span> <span class="n">tv_nsec</span><span class="p">));</span>
<span class="cp">#endif</span>
	<span class="cm">/* timeval/timezone offsets for use by vdso */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TZONE_TZ_MINWEST</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timezone</span><span class="p">,</span> <span class="n">tz_minuteswest</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TZONE_TZ_DSTTIME</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">timezone</span><span class="p">,</span> <span class="n">tz_dsttime</span><span class="p">));</span>

	<span class="cm">/* Other bits used by the vdso */</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CLOCK_REALTIME</span><span class="p">,</span> <span class="n">CLOCK_REALTIME</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CLOCK_MONOTONIC</span><span class="p">,</span> <span class="n">CLOCK_MONOTONIC</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">NSEC_PER_SEC</span><span class="p">,</span> <span class="n">NSEC_PER_SEC</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">CLOCK_REALTIME_RES</span><span class="p">,</span> <span class="n">MONOTONIC_RES_NSEC</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_BUG</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">BUG_ENTRY_SIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">bug_entry</span><span class="p">));</span>
<span class="cp">#endif</span>

	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PGD_TABLE_SIZE</span><span class="p">,</span> <span class="n">PGD_TABLE_SIZE</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PTE_SIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">pte_t</span><span class="p">));</span>

<span class="cp">#ifdef CONFIG_KVM</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_HOST_STACK</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_stack</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_HOST_PID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_pid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_GUEST_PID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">pid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_GPRS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">gpr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_VRSAVE</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">vrsave</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_FPRS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">fpr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_FPSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">fpscr</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_ALTIVEC</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_VRS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">vr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_VSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">vscr</span><span class="p">));</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_VSX</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_VSRS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">vsr</span><span class="p">));</span>
<span class="cp">#endif</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_XER</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">xer</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_CTR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">ctr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_LR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">lr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_CR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">cr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">pc</span><span class="p">));</span>
<span class="cp">#ifdef CONFIG_KVM_BOOK3S_64_HV</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_MSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">msr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SRR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">srr0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SRR1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">srr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SPRG0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">sprg0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SPRG1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">sprg1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SPRG2</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">sprg2</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SPRG3</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">sprg3</span><span class="p">));</span>
<span class="cp">#endif</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_SPRG4</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">sprg4</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_SPRG5</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">sprg5</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_SPRG6</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">sprg6</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_SPRG7</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">sprg7</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHADOW_PID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shadow_pid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHADOW_PID1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shadow_pid1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shared</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">msr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHADOW_MSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shadow_msr</span><span class="p">));</span>

	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MAS0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">mas0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MAS1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">mas1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MAS2</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">mas2</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MAS7_3</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">mas7_3</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MAS4</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">mas4</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SHARED_MAS6</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">mas6</span><span class="p">));</span>

	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_KVM</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">kvm</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_LPID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">lpid</span><span class="p">));</span>

	<span class="cm">/* book3s */</span>
<span class="cp">#ifdef CONFIG_KVM_BOOK3S_64_HV</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_SDR1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">sdr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_HOST_LPID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_lpid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_HOST_LPCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_lpcr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_HOST_SDR1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_sdr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_TLBIE_LOCK</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">tlbie_lock</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_ONLINE_CPUS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">online_vcpus</span><span class="p">.</span><span class="n">counter</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_LAST_VCPU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">last_vcpu</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_LPCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">lpcr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_RMOR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">rmor</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_VRMA_SLB_V</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">vrma_slb_v</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_DSISR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">dsisr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_DAR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">shregs</span><span class="p">.</span><span class="n">dar</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_VPA</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">vpa</span><span class="p">.</span><span class="n">pinned_addr</span><span class="p">));</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC_BOOK3S</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_VCPUID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">vcpu_id</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PURR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">purr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SPURR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">spurr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_DSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">dscr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_AMR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">amr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_UAMOR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">uamor</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_CTRL</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">ctrl</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_DABR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">dabr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_HFLAGS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">hflags</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_DEC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">dec</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_DEC_EXPIRES</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">dec_expires</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PENDING_EXC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">pending_exceptions</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_CEDED</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">ceded</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PRODDED</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">prodded</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_MMCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">mmcr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PMC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">pmc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SLB</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">slb</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SLB_MAX</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">slb_max</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SLB_NR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">slb_nr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_LAST_CPU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">last_cpu</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_FAULT_DSISR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">fault_dsisr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_FAULT_DAR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">fault_dar</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_LAST_INST</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">last_inst</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_TRAP</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">trap</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PTID</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">ptid</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCORE_ENTRY_EXIT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_vcore</span><span class="p">,</span> <span class="n">entry_exit_count</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCORE_NAP_COUNT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_vcore</span><span class="p">,</span> <span class="n">nap_count</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCORE_IN_GUEST</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_vcore</span><span class="p">,</span> <span class="n">in_guest</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCORE_NAPPING_THREADS</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_vcore</span><span class="p">,</span> <span class="n">napping_threads</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SVCPU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_vcpu_book3s</span><span class="p">,</span> <span class="n">shadow_vcpu</span><span class="p">)</span> <span class="o">-</span>
			   <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_vcpu_book3s</span><span class="p">,</span> <span class="n">vcpu</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SLB_E</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_slb</span><span class="p">,</span> <span class="n">orige</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SLB_V</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_slb</span><span class="p">,</span> <span class="n">origv</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SLB_SIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvmppc_slb</span><span class="p">));</span>

<span class="cp">#ifdef CONFIG_PPC_BOOK3S_64</span>
<span class="cp">#ifdef CONFIG_KVM_BOOK3S_PR</span>
<span class="cp"># define SVCPU_FIELD(x, f)	DEFINE(x, offsetof(struct paca_struct, shadow_vcpu.f))</span>
<span class="cp">#else</span>
<span class="cp"># define SVCPU_FIELD(x, f)</span>
<span class="cp">#endif</span>
<span class="cp"># define HSTATE_FIELD(x, f)	DEFINE(x, offsetof(struct paca_struct, kvm_hstate.f))</span>
<span class="cp">#else	</span><span class="cm">/* 32-bit */</span><span class="cp"></span>
<span class="cp"># define SVCPU_FIELD(x, f)	DEFINE(x, offsetof(struct kvmppc_book3s_shadow_vcpu, f))</span>
<span class="cp"># define HSTATE_FIELD(x, f)	DEFINE(x, offsetof(struct kvmppc_book3s_shadow_vcpu, hstate.f))</span>
<span class="cp">#endif</span>

	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_CR</span><span class="p">,</span> <span class="n">cr</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_XER</span><span class="p">,</span> <span class="n">xer</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_CTR</span><span class="p">,</span> <span class="n">ctr</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_LR</span><span class="p">,</span> <span class="n">lr</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_PC</span><span class="p">,</span> <span class="n">pc</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R0</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R1</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R2</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R3</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R4</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R5</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R6</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R7</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">7</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R8</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">8</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R9</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">9</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R10</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">10</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R11</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">11</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R12</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">12</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_R13</span><span class="p">,</span> <span class="n">gpr</span><span class="p">[</span><span class="mi">13</span><span class="p">]);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_FAULT_DSISR</span><span class="p">,</span> <span class="n">fault_dsisr</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_FAULT_DAR</span><span class="p">,</span> <span class="n">fault_dar</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_LAST_INST</span><span class="p">,</span> <span class="n">last_inst</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_SHADOW_SRR1</span><span class="p">,</span> <span class="n">shadow_srr1</span><span class="p">);</span>
<span class="cp">#ifdef CONFIG_PPC_BOOK3S_32</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_SR</span><span class="p">,</span> <span class="n">sr</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_SLB</span><span class="p">,</span> <span class="n">slb</span><span class="p">);</span>
	<span class="n">SVCPU_FIELD</span><span class="p">(</span><span class="n">SVCPU_SLB_MAX</span><span class="p">,</span> <span class="n">slb_max</span><span class="p">);</span>
<span class="cp">#endif</span>

	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_HOST_R1</span><span class="p">,</span> <span class="n">host_r1</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_HOST_R2</span><span class="p">,</span> <span class="n">host_r2</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_HOST_MSR</span><span class="p">,</span> <span class="n">host_msr</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_VMHANDLER</span><span class="p">,</span> <span class="n">vmhandler</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_SCRATCH0</span><span class="p">,</span> <span class="n">scratch0</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_SCRATCH1</span><span class="p">,</span> <span class="n">scratch1</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_IN_GUEST</span><span class="p">,</span> <span class="n">in_guest</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_RESTORE_HID5</span><span class="p">,</span> <span class="n">restore_hid5</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_NAPPING</span><span class="p">,</span> <span class="n">napping</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_KVM_BOOK3S_64_HV</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_HWTHREAD_REQ</span><span class="p">,</span> <span class="n">hwthread_req</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_HWTHREAD_STATE</span><span class="p">,</span> <span class="n">hwthread_state</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_KVM_VCPU</span><span class="p">,</span> <span class="n">kvm_vcpu</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_KVM_VCORE</span><span class="p">,</span> <span class="n">kvm_vcore</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_XICS_PHYS</span><span class="p">,</span> <span class="n">xics_phys</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_MMCR</span><span class="p">,</span> <span class="n">host_mmcr</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_PMC</span><span class="p">,</span> <span class="n">host_pmc</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_PURR</span><span class="p">,</span> <span class="n">host_purr</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_SPURR</span><span class="p">,</span> <span class="n">host_spurr</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_DSCR</span><span class="p">,</span> <span class="n">host_dscr</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_DABR</span><span class="p">,</span> <span class="n">dabr</span><span class="p">);</span>
	<span class="n">HSTATE_FIELD</span><span class="p">(</span><span class="n">HSTATE_DECEXP</span><span class="p">,</span> <span class="n">dec_expires</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">IPI_PRIORITY</span><span class="p">,</span> <span class="n">IPI_PRIORITY</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_KVM_BOOK3S_64_HV */</span><span class="cp"></span>

<span class="cp">#else </span><span class="cm">/* CONFIG_PPC_BOOK3S */</span><span class="cp"></span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_CR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">cr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_XER</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">xer</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_LR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">lr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_CTR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">ctr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_PC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">pc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_LAST_INST</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">last_inst</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_FAULT_DEAR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">fault_dear</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_FAULT_ESR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">fault_esr</span><span class="p">));</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PPC_BOOK3S */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_KVM */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_KVM_GUEST</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_SCRATCH1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span>
					    <span class="n">scratch1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_SCRATCH2</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span>
					    <span class="n">scratch2</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_SCRATCH3</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span>
					    <span class="n">scratch3</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_INT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span>
				       <span class="n">int_pending</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_MSR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">msr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_CRITICAL</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span>
					    <span class="n">critical</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">KVM_MAGIC_SR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu_arch_shared</span><span class="p">,</span> <span class="n">sr</span><span class="p">));</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_44x</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PGD_T_LOG2</span><span class="p">,</span> <span class="n">PGD_T_LOG2</span><span class="p">);</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PTE_T_LOG2</span><span class="p">,</span> <span class="n">PTE_T_LOG2</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC_FSL_BOOK3E</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TLBCAM_SIZE</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tlbcam</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TLBCAM_MAS0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tlbcam</span><span class="p">,</span> <span class="n">MAS0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TLBCAM_MAS1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tlbcam</span><span class="p">,</span> <span class="n">MAS1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TLBCAM_MAS2</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tlbcam</span><span class="p">,</span> <span class="n">MAS2</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TLBCAM_MAS3</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tlbcam</span><span class="p">,</span> <span class="n">MAS3</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">TLBCAM_MAS7</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">tlbcam</span><span class="p">,</span> <span class="n">MAS7</span><span class="p">));</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_KVM) &amp;&amp; defined(CONFIG_SPE)</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_EVR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">evr</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_ACC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">acc</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_SPEFSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">spefscr</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_HOST_SPEFSCR</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_spefscr</span><span class="p">));</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_KVM_BOOKE_HV</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_HOST_MAS4</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_mas4</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_HOST_MAS6</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">host_mas6</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_EPLC</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span> <span class="n">arch</span><span class="p">.</span><span class="n">eplc</span><span class="p">));</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_KVM_EXIT_TIMING</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_TIMING_EXIT_TBU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span>
						<span class="n">arch</span><span class="p">.</span><span class="n">timing_exit</span><span class="p">.</span><span class="n">tv32</span><span class="p">.</span><span class="n">tbu</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_TIMING_EXIT_TBL</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span>
						<span class="n">arch</span><span class="p">.</span><span class="n">timing_exit</span><span class="p">.</span><span class="n">tv32</span><span class="p">.</span><span class="n">tbl</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_TIMING_LAST_ENTER_TBU</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span>
					<span class="n">arch</span><span class="p">.</span><span class="n">timing_last_enter</span><span class="p">.</span><span class="n">tv32</span><span class="p">.</span><span class="n">tbu</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">VCPU_TIMING_LAST_ENTER_TBL</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">kvm_vcpu</span><span class="p">,</span>
					<span class="n">arch</span><span class="p">.</span><span class="n">timing_last_enter</span><span class="p">.</span><span class="n">tv32</span><span class="p">.</span><span class="n">tbl</span><span class="p">));</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PPC_POWERNV</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">OPAL_MC_GPR3</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">opal_machine_check_event</span><span class="p">,</span> <span class="n">gpr3</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">OPAL_MC_SRR0</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">opal_machine_check_event</span><span class="p">,</span> <span class="n">srr0</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">OPAL_MC_SRR1</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">opal_machine_check_event</span><span class="p">,</span> <span class="n">srr1</span><span class="p">));</span>
	<span class="n">DEFINE</span><span class="p">(</span><span class="n">PACA_OPAL_MC_EVT</span><span class="p">,</span> <span class="n">offsetof</span><span class="p">(</span><span class="k">struct</span> <span class="n">paca_struct</span><span class="p">,</span> <span class="n">opal_mc_evt</span><span class="p">));</span>
<span class="cp">#endif</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
