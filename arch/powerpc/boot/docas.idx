f | io.h | s | 2.1K | 81 | Stephen Rothwell | sfr@canb.auug.org.au | 1217815320 |  | powerpc: Move include files to arch/powerpc/include/asm  from include/asm-powerpc.  This is the result of a  mkdir arch/powerpc/include/asm git mv include/asm-powerpc/* arch/powerpc/include/asm  Followed by a few documentation/comment fixups and a couple of places where <asm-powepc/...> was being used explicitly.  Of the latter only one was outside the arch code and it is a driver only built for powerpc.  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | reg.h | s | 831B | 25 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1198437262 |  | [POWERPC] 4xx: Add mfspr/mtspr inline macros to 4xx bootwrapper  The 4xx bootwrapper occasionally needs to access SPR registers, this adds mfspr/mtspr wrappers to it.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | elf_util.c | s | 2.3K | 69 | Paul Mackerras | paulus@samba.org | 1221502118 |  | powerpc: Make the 64-bit kernel as a position-independent executable  This implements CONFIG_RELOCATABLE for 64-bit by making the kernel as a position-independent executable (PIE) when it is set.  This involves processing the dynamic relocations in the image in the early stages of booting, even if the kernel is being run at the address it is linked at, since the linker does not necessarily fill in words in the image for which there are dynamic relocations.  (In fact the linker does fill in such words for 64-bit executables, though not for 32-bit executables, so in principle we could avoid calling relocate() entirely when we're running a 64-bit kernel at the linked address.)  The dynamic relocations are processed by a new function relocate(addr), where the addr parameter is the virtual address where the image will be run.  In fact we call it twice; once before calling prom_init, and again when starting the main kernel.  This means that reloc_offset() returns 0 in prom_init (since it has been relocated to the address it is running at), which necessitated a few adjustments.  This also changes __va and __pa to use an equivalent definition that is simpler.  With the relocatable kernel, PAGE_OFFSET and MEMORY_START are constants (for 64-bit) whereas PHYSICAL_START is a variable (and KERNELBASE ideally should be too, but isn't yet).  With this, relocatable kernels still copy themselves down to physical address 0 and run there.  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | pq2.c | s | 2.4K | 83 | Scott Wood | scottwood@freescale.com | 1191461795 |  | [POWERPC] bootwrapper: Add fsl_get_immr() and 8xx/pq2 clock functions.  fsl_get_immr() uses /soc/ranges to determine the immr.  mpc885_get_clock() transforms a crystal frequency into a system frequency according to the PLL register settings.  pq2_get_clocks() does the same as the above for the PowerQUICC II, except that it produces several different clocks.  The mpc8xx/pq2 set_clocks() functions modify common properties in the device tree based on the given clock data.  The mpc885/pq2 fixup_clocks() functions call get_clocks(), and pass the results to set_clocks().  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | prpmc2800.c | s | 13K | 507 | Dale Farnsworth | dale@farnsworth.org | 1208258484 |  | [POWERPC] mv64x60: Remove device tree absolute path references  Replace several device node absolute path lookups in the mv64x60 bootwrapper code with lookups by compatible or device_type properties.  Signed-off-by: Dale Farnsworth <dale@farnsworth.org> Acked-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | virtex405-head.S | g | 673B |  | Grant Likely | grant.likely@secretlab.ca | 1207186571 |  | [POWERPC] bootwrapper: Add a firmware-independent simpleboot target.  This target produces a flat binary rather than an ELF file, fixes the entry point at the beginning of the image, and takes a complete device tree with no fixups needed.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | treeboot-currituck.c | s | 3.0K | 100 | Tony Breeds | tony@bakeyournoodle.com | 1323435100 |  | powerpc/47x: Add support for the new IBM currituck platform  Based on original work by David 'Shaggy' Kleikamp.  Signed-off-by: Tony Breeds <tony@bakeyournoodle.com> Signed-off-by: Josh Boyer <jwboyer@gmail.com>
f | pq2.h | s | 299B | 8 | Scott Wood | scottwood@freescale.com | 1191461795 |  | [POWERPC] bootwrapper: Add fsl_get_immr() and 8xx/pq2 clock functions.  fsl_get_immr() uses /soc/ranges to determine the immr.  mpc885_get_clock() transforms a crystal frequency into a system frequency according to the PLL register settings.  pq2_get_clocks() does the same as the above for the PowerQUICC II, except that it produces several different clocks.  The mpc8xx/pq2 set_clocks() functions modify common properties in the device tree based on the given clock data.  The mpc885/pq2 fixup_clocks() functions call get_clocks(), and pass the results to set_clocks().  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | Makefile | g | 15K |  | Stephen Rothwell | sfr@canb.auug.org.au | 1332288972 |  | powerpc: Remove the remaining CONFIG_PPC_ISERIES pieces  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
d | dts |  | 177 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338060147 |  | 
f | ofconsole.c | s | 976B | 38 | David Gibson | david@gibson.dropbear.id.au | 1183022368 |  | [POWERPC] Make more OF-related bootwrapper functions available to non-OF platforms  Commit 2e6016133755eb3cc44e8efab92573d23ed75888 split up arch/powerpc/boot/of.c so that some OF functions can be used on platforms that don't want to use the overall OF platform boot code. This is useful on things like PReP which can have an OF implementation which is useful for debugging output, but inadequate for booting.  However, that commit didn't export quite enough things to make a usable OF console on a non-OF system.  In particular, the device tree manipulation performed to initialize the OF console code must explicitly use the OF device tree, rather than the flattened device tree, even if the system is otherwise booting using a flattened device tree.  This makes it so.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | stdio.c | s | 6.8K | 298 | Geoff Levand | geoffrey.levand@am.sony.com | 1183022208 |  | [POWERPC] Add u64 printf to bootwrapper  Add support for the 'll' (long long) printf qualifier in the powerpc zImage bootwrapper.  This is useful for bootwrapper debugging on 64 bit platforms.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | addnote.c | s | 5.0K | 173 | Joe Perches | joe@perches.com | 1286947143 |  | powerpc: Use static const char arrays  Signed-off-by: Joe Perches <joe@perches.com> Reviewed-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | gamecube-head.S | g | 2.4K |  | Albert Herranz | albert_herranz@yahoo.es | 1260681866 |  | powerpc: gamecube: bootwrapper bits  Add support for the Nintendo GameCube video game console to the powerpc bootwrapper.  dtbImage.gamecube is a wrapped image that contains a flat device tree, an entry point compatible with SDload, and an optional initrd.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | redboot.h | s | 2.6K | 51 | Scott Wood | scottwood@freescale.com | 1201138480 |  | [POWERPC] 8xx: Analogue & Micro Adder875 board support.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | mpc8xx.c | s | 1.7K | 66 | Scott Wood | scottwood@freescale.com | 1191461795 |  | [POWERPC] bootwrapper: Add fsl_get_immr() and 8xx/pq2 clock functions.  fsl_get_immr() uses /soc/ranges to determine the immr.  mpc885_get_clock() transforms a crystal frequency into a system frequency according to the PLL register settings.  pq2_get_clocks() does the same as the above for the PowerQUICC II, except that it produces several different clocks.  The mpc8xx/pq2 set_clocks() functions modify common properties in the device tree based on the given clock data.  The mpc885/pq2 fixup_clocks() functions call get_clocks(), and pass the results to set_clocks().  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | cuboot-taishan.c | s | 1.3K | 46 | David Gibson | david@gibson.dropbear.id.au | 1206533956 |  | [POWERPC] Start removing linux,network-index in favour of aliases  This patch alters the bootwrapper for a number of machines (roubhly all 4xx based cuboot or treeboot platforms) to use aliases instead of the linux,network-index hack to work out which MAC address to attach to which ethernet device node.  The now obsolete linux,network-index properties are removed from the corresponding device trees.  This won't break backwards compatiblity, because in cases where this fixup code is relevant, the device tree is part of the kernel image.  The references to linux,network-index are removed from booting-without-of.txt.  Not only is it now deprecated, but as a hack applicable only when the device tree blob and fixup code were in the same image, this property never belonged in booting-without-of.txt which describes the interface between the kernel and firmware or bootloaders which produce a device tree.  By the time the device tree reaches the kernel, all the MAC addresses must be fully filled in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cuboot-katmai.c | s | 1.3K | 46 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1204208187 |  | [POWERPC] 4xx: Use correct board info structure in cuboot wrappers  Correct the remaining 44x cuboot wrappers to define TARGET_4xx as well.  This creates the correct structure to use, including things like the second MAC address.  Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cuboot-ebony.c | s | 782B | 27 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1204208187 |  | [POWERPC] 4xx: Use correct board info structure in cuboot wrappers  Correct the remaining 44x cuboot wrappers to define TARGET_4xx as well.  This creates the correct structure to use, including things like the second MAC address.  Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | simple_alloc.c | s | 3.5K | 125 | Geert Uytterhoeven | Geert.Uytterhoeven@eu.sony.com | 1177416414 |  | [POWERPC] bootwrapper: Use `unsigned long' for malloc sizes  Use `unsigned long' for malloc sizes, to match common practice and types used by most callers and callees. Also use `unsigned long' for integers representing pointers in simple_alloc.  Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@eu.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | install.sh | s | 1.3K | 46 | Sam Ravnborg | sam@ravnborg.org | 1253441894 |  | kbuild: use INSTALLKERNEL to select customized installkernel script  Replace the use of CROSS_COMPILE to select a customized installkernel script with the possibility to set INSTALLKERNEL to select a custom installkernel script when running make:      make INSTALLKERNEL=arm-installkernel install  With this patch we are now more consistent across different architectures - they did not all support use of CROSS_COMPILE.  The use of CROSS_COMPILE was a hack as this really belongs to gcc/binutils and the installkernel script does not change just because we change toolchain.  The use of CROSS_COMPILE caused troubles with an upcoming patch that saves CROSS_COMPILE when a kernel is built - it would no longer be installable. [Thanks to Peter Z. for this hint]  This patch undos what Ian did in commit:    0f8e2d62fa04441cd12c08ce521e84e5bd3f8a46   ("use ${CROSS_COMPILE}installkernel in arch/*/boot/install.sh")  The patch has been lightly tested on x86 only - but all changes looks obvious.  Acked-by: Peter Zijlstra <peterz@infradead.org> Acked-by: Mike Frysinger <vapier@gentoo.org> [blackfin] Acked-by: Russell King <linux@arm.linux.org.uk> [arm] Acked-by: Paul Mundt <lethal@linux-sh.org> [sh] Acked-by: "H. Peter Anvin" <hpa@zytor.com> [x86] Cc: Ian Campbell <icampbell@arcom.com> Cc: Tony Luck <tony.luck@intel.com> [ia64] Cc: Fenghua Yu <fenghua.yu@intel.com> [ia64] Cc: Hirokazu Takata <takata@linux-m32r.org> [m32r] Cc: Geert Uytterhoeven <geert@linux-m68k.org> [m68k] Cc: Kyle McMartin <kyle@mcmartin.ca> [parisc] Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> [powerpc] Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> [s390] Cc: Thomas Gleixner <tglx@linutronix.de> [x86] Cc: Ingo Molnar <mingo@redhat.com> [x86] Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | wii.c | s | 3.1K | 129 | Albert Herranz | albert_herranz@yahoo.es | 1260681871 |  | wii: bootwrapper: add fixup to calc useable mem2  The top portion of MEM2 (the second 64MB memory block) in the Nintendo Wii video game console is used by the firmware running on the Starlet processor.  Add code to calculate the portion of MEM2 safely useable by the Broadway processor. When running under the 'mini' firmware this is easily determined from an in-memory header. Otherwise, a safe default is used.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | elf.h | s | 3.9K | 137 | Mark A. Greer | mgreer@mvista.com | 1176400516 |  | [POWERPC] Move bootwrapper ELF parsing routines to a file  The ELF parsing routines local to arch/powerpc/boot/main.c are useful to other callers therefore move them to their own file.  Signed-off-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | gamecube.c | s | 812B | 28 | Albert Herranz | albert_herranz@yahoo.es | 1260681866 |  | powerpc: gamecube: bootwrapper bits  Add support for the Nintendo GameCube video game console to the powerpc bootwrapper.  dtbImage.gamecube is a wrapped image that contains a flat device tree, an entry point compatible with SDload, and an optional initrd.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gunzip_util.h | s | 1.6K | 39 | David Gibson | david@gibson.dropbear.id.au | 1174023499 |  | [POWERPC] Add documentation for the zImage's gunzip convenience functions  This patch adds documenting comments to the gunzip convenience functions added in commit ad9d2716cfc1cda5a7e0d7bc0db45e3af8a4adbb. It also removes a stray newline, and an unused global variable.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-acadia.c | s | 4.8K | 147 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1224253879 |  | powerpc/40x: Add cuboot wrapper for Acadia board  This adds a cuboot wrapper for the AMCC PowerPC 405EZ Acadia board.  The clocking code is derived from U-Boot, originally written by Stefan Roese.  Signed-off-by: Josh Boyer <jwboyer@linux.ibm.com>
f | ep405.c | s | 1.8K | 62 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1198437194 |  | [POWERPC] 4xx: EP405 boards support for arch/powerpc  Brings EP405 support to arch/powerpc. The IRQ routing for the CPLD comes from a device-tree property, PCI is working to the point where I can see the video card, USB device, and south bridge.  This should work with both EP405 and EP405PC.  I've not totally figured out how IRQs are wired on this hardware though, thus at this stage, expect only USB interrupts working, pretty much the same as what arch/ppc did.  Also, the flash, nvram, rtc and temp control still have to be wired.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cuboot.h | s | 365B | 11 | David Gibson | david@gibson.dropbear.id.au | 1181824216 |  | [POWERPC] Consolidate cuboot initialization code  The various cuboot platforms (i.e. pre-device tree aware u-boot for 83xx, 85xx and Ebony) share a certain amount of code for parsing the boot parameters.  To a certain extent that's inevitable, since they platforms have different definitions of the bd_t structure.  However, with some macro work and a helper function, this patch improves the situation a bit.  In the process, this fixes a bug on Ebony, which was incorrectly handling the parameters passed form u-boot for the command line (the bug was copied from 83xx and 85xx which have subsequently been fixed).  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | 44x.h | s | 448B | 14 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1190254396 |  | [POWERPC] cuimage for Bamboo board  Add a cuboot wrapper for the Bamboo board.  Additionally, we enable MAC address fixups for both cuboot and treeboot.  This also removes some obsoleted linker declarations that have been moved into ops.h  Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com> Acked-by: David Gibson <david@gibson.dropbear.id.au>
f | ep88xc.c | s | 1.2K | 42 | David Gibson | david@gibson.dropbear.id.au | 1197341174 |  | [POWERPC] Use embedded libfdt in the bootwrapper  This incorporates libfdt (from the source embedded in an earlier commit) into the wrapper.a library used by the bootwrapper.  This includes adding a libfdt_env.h file, which the libfdt sources need in order to integrate into the bootwrapper environment, and a libfdt-wrapper.c which provides glue to connect the bootwrapper's abstract device tree callbacks to the libfdt functions.  In addition, this changes the various wrapper and platform files to use libfdt functions instead of the older flatdevtree.c library.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot.c | s | 944B | 27 | Scott Wood | scottwood@freescale.com | 1187760448 |  | [POWERPC] bootwrapper: Move linker symbols into ops.h  Most of these were previously used by numerous C files and redeclared in each one.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-hotfoot.c | s | 4.0K | 117 | Solomon Peachy | solomon@linux-wlan.com | 1251724551 |  | powerpc/40x: Add support for the ESTeem 195E (PPC405EP) SBC  This patch adds support for the ESTeem 195E Hotfoot SBC.  There are several variants of the SBC deployed, single/dual ethernet+serial, and also 4MB/8MB flash variations.  In the interest of having a single kernel image boot on all boards, the cuboot shim detects the differences and mangles the DTS tree appropriately.  With the exception of the CF interface that was never populated on production boards, this code/DTS supports all boardpop options.  Signed-off-by: Solomon Peachy <solomon@linux-wlan.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | treeboot-iss4xx.c | s | 2.0K | 70 | Dave Kleikamp | shaggy@linux.vnet.ibm.com | 1310477681 |  | powerpc/44x: boot wrapper: allow kernel to load into non-zero address  For AMP, different kernel instances load into separate memory regions. Read the start of memory from the device tree and limit the memory to what's specified in the device tree.  Signed-off-by: Dave Kleikamp <shaggy@linux.vnet.ibm.com> Signed-off-by: Tony Breeds <tony@bakeyournoodle.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Josh Boyer <jwboyer@linux.vnet.ibm.com> Cc: linuxppc-dev@lists.ozlabs.org Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | ops.h | s | 7.4K | 221 | Mike Ditto | mditto@consentry.com | 1224648081 |  | powerpc: Add del_node() for early boot code to prune inapplicable devices.  Some platforms have variants that can share most of a flat device tree but need a few devices selectively pruned at boot time.  This adds del_node() to ops.h to allow access to the existing fdt_del_node().  Signed-off-by: Mike Ditto <mditto@consentry.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | cuboot-warp.c | s | 916B | 32 | Sean MacLennan | smaclennan@pikatech.com | 1232457441 |  | powerpc/44x: Warp patches for the new NDFC driver  Convert the Warp platform to use the newly merged NDFC driver  - warp.dts changed to work with ndfc - warp-nand.c no longer needed - removed obsolete rev A support from cuboot-warp.c  Signed-off-by: Sean MacLennan <smaclennan@pikatech.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cpm-serial.c | s | 5.2K | 238 | Laurent Pinchart | laurentp@cse-semaphore.com | 1208412097 |  | [POWERPC] cpm-serial: Relocate CPM buffer descriptors and SMC parameter ram.  This patch relocates the buffer descriptors and the SMC parameter RAM at the end of the first CPM muram chunk, as described in the device tree. This allows device trees to stop excluding SMC parameter ram allocated by the boot loader from the CPM muram node.  Signed-off-by: Laurent Pinchart <laurentp@cse-semaphore.com> Acked-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | mv64x60.c | s | 16K | 516 | Dale Farnsworth | dale@farnsworth.org | 1208258484 |  | [POWERPC] mv64x60: Remove device tree absolute path references  Replace several device node absolute path lookups in the mv64x60 bootwrapper code with lookups by compatible or device_type properties.  Signed-off-by: Dale Farnsworth <dale@farnsworth.org> Acked-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | redboot-8xx.c | s | 1.4K | 47 | Scott Wood | scottwood@freescale.com | 1201138480 |  | [POWERPC] 8xx: Analogue & Micro Adder875 board support.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | cuboot-85xx-cpm2.c | s | 1.7K | 55 | Kumar Gala | galak@kernel.crashing.org | 1201464636 |  | [POWERPC] Add a cuboot wrapper for 85xx with CPM2  The bd info struct changes if we have CPM2 enabled in u-boot.  Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | util.S | g | 2.1K |  | Mark A. Greer | mgreer@mvista.com | 1161571759 |  | [POWERPC] Add non-OF serial console support  Add serial console support for non-OF systems.  There is a generic serial console layer which calls a serial console driver.  Included is the serial console driver for the ns16550 class of uarts.  Necessary support routines are added as well.  Signed-off-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | wrapper | s | 10K | 402 | Stephen Rothwell | sfr@canb.auug.org.au | 1332288973 |  | powerpc/ps3: Do not adjust the wrapper load address  Commit c55aef0e5bc6 "powerpc/boot: Change the load address for the wrapper to fit the kernel" adjusted the laod address if the uncompressed kernel was too large.  Ps3 does not compress the kernel and uses a different linker script, so do not adjust the load address in that case.  fixes this build error:  powerpc64-linux-ld: section .text loaded at [0000000000e00000,0000000000e0721b] overlaps section .kernel:dtb loaded at [0000000000e00000,0000000000e0066f]  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | hack-coff.c | s | 2.3K | 79 | Paul Mackerras | paulus@samba.org | 1137211446 |  | powerpc: Make COFF zImages for old 32-bit powermacs  This adds code to build zImage.coff and/or zImage.initrd.coff when CONFIG_PPC32 and CONFIG_PPC_PMAC are defined.  It also restructures the OF client code and adds some workarounds for OF quirks on the older machines.  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | types.h | s | 549B | 22 | Geoff Levand | geoffrey.levand@am.sony.com | 1183022207 |  | [POWERPC] Add signed types to bootwrapper  Add signed types to the powerpc zImage bootwrapper. These are needed by the PS3 hcall interface.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | ep8248e.c | s | 1.2K | 43 | Scott Wood | scottwood@freescale.com | 1201138483 |  | [POWERPC] 82xx: Embedded Planet EP8248E support  This board is also resold by Freescale under the names "QUICCStart MPC8248 Evaluation System" and "CWH-PPC-8248N-VE".  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | zImage.lds.S | g | 938B |  | Michael Ellerman | michael@ozlabs.org | 1303282760 |  | powerpc/boot: Allow building the zImage wrapper as a relocatable ET_DYN  This patch adds code, linker script and makefile support to allow building the zImage wrapper around the kernel as a position independent executable.  This results in an ET_DYN instead of an ET_EXEC ELF output file, which can be loaded at any location by the firmware and will process its own relocations to work correctly at the loaded address.  This is of interest particularly since the standard ePAPR image format must be an ET_DYN (although this patch alone is not sufficient to produce a fully ePAPR compliant boot image).  Note for now we don't enable building with -pie for anything.  Signed-off-by: Paul Mackerras <paulus@samba.org> Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | cuboot-bamboo.c | s | 689B | 27 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1204208187 |  | [POWERPC] 4xx: Use correct board info structure in cuboot wrappers  Correct the remaining 44x cuboot wrappers to define TARGET_4xx as well.  This creates the correct structure to use, including things like the second MAC address.  Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | of.h | s | 643B | 17 | David Gibson | david@gibson.dropbear.id.au | 1183022368 |  | [POWERPC] Make more OF-related bootwrapper functions available to non-OF platforms  Commit 2e6016133755eb3cc44e8efab92573d23ed75888 split up arch/powerpc/boot/of.c so that some OF functions can be used on platforms that don't want to use the overall OF platform boot code. This is useful on things like PReP which can have an OF implementation which is useful for debugging output, but inadequate for booting.  However, that commit didn't export quite enough things to make a usable OF console on a non-OF system.  In particular, the device tree manipulation performed to initialize the OF console code must explicitly use the OF device tree, rather than the flattened device tree, even if the system is otherwise booting using a flattened device tree.  This makes it so.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-mpc7448hpc2.c | s | 1.2K | 42 | Grant Likely | grant.likely@secretlab.ca | 1202344819 |  | [POWERPC] bootwrapper: Build multiple cuImages  Currently, the kernel uses CONFIG_DEVICE_TREE to wrap a kernel image with a fdt blob which means for any given configuration only one dts file can be selected and so support for only one board can be built  This moves the selection of the default .dts file out of the kernel config and into the bootwrapper makefile.  The makefile chooses which images to build based on the kernel config and the dts source file name is taken directly from the image name.  For example "cuImage.ebony" will use "ebony.dts" as the device tree source file.  In addition, this patch allows a specific image to be requested from the command line by adding "cuImage.%" and "treeImage.%" targets to the list of valid built targets in arch/powerpc/Makefile.  This allows the default dts selection to be overridden.  Another advantage to this change is it allows a single defconfig to be supplied for all boards using the same chip family and only differing in the device tree.  Important note: This patch adds two new zImage targets; zImage.dtb.% and zImage.dtb.initrd.% for zImages with embedded dtb files.  Currently there are 5 platforms which require this: ps3, ep405, mpc885ads, ep88xc, adder875-redboot and ep8248e.  This patch *changes the zImage filenames* for those platforms.  ie. 'zImage.ps3' is now 'zImage.dtb.ps3'.  This new zImage.dtb targets were added so that the .dts file could be part of the dependancies list for building them.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-8xx.c | s | 1.1K | 39 | David Gibson | david@gibson.dropbear.id.au | 1197341174 |  | [POWERPC] Use embedded libfdt in the bootwrapper  This incorporates libfdt (from the source embedded in an earlier commit) into the wrapper.a library used by the bootwrapper.  This includes adding a libfdt_env.h file, which the libfdt sources need in order to integrate into the bootwrapper environment, and a libfdt-wrapper.c which provides glue to connect the bootwrapper's abstract device tree callbacks to the libfdt functions.  In addition, this changes the various wrapper and platform files to use libfdt functions instead of the older flatdevtree.c library.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-sequoia.c | s | 1.4K | 50 | David Gibson | david@gibson.dropbear.id.au | 1206533956 |  | [POWERPC] Start removing linux,network-index in favour of aliases  This patch alters the bootwrapper for a number of machines (roubhly all 4xx based cuboot or treeboot platforms) to use aliases instead of the linux,network-index hack to work out which MAC address to attach to which ethernet device node.  The now obsolete linux,network-index properties are removed from the corresponding device trees.  This won't break backwards compatiblity, because in cases where this fixup code is relevant, the device tree is part of the kernel image.  The references to linux,network-index are removed from booting-without-of.txt.  Not only is it now deprecated, but as a hack applicable only when the device tree blob and fixup code were in the same image, this property never belonged in booting-without-of.txt which describes the interface between the kernel and firmware or bootloaders which produce a device tree.  By the time the device tree reaches the kernel, all the MAC addresses must be fully filled in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | mpc52xx-psc.c | s | 1.4K | 53 | Laurent Pinchart | laurentp@cse-semaphore.com | 1208412097 |  | [POWERPC] Add bootwrapper function to get virtual reg from the device tree.  This patch adds a new generic device tree processing function that retrieves virtual reg addresses from the device tree to the bootwrapper code. It also updates the bootwrapper code to use the new function.  dt_get_virtual_reg() retrieves the virtual reg addresses from the "virtual-reg" property. If the property can't be found, it uses the "reg" property and walks the tree to translate it to absolute addresses.  Signed-off-by: Laurent Pinchart <laurentp@cse-semaphore.com> Acked-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | ppcboot-hotfoot.h | s | 4.7K | 125 | Solomon Peachy | solomon@linux-wlan.com | 1251724551 |  | powerpc/40x: Add support for the ESTeem 195E (PPC405EP) SBC  This patch adds support for the ESTeem 195E Hotfoot SBC.  There are several variants of the SBC deployed, single/dual ethernet+serial, and also 4MB/8MB flash variations.  In the interest of having a single kernel image boot on all boards, the cuboot shim detects the differences and mangles the DTS tree appropriately.  With the exception of the CF interface that was never populated on production boards, this code/DTS supports all boardpop options.  Signed-off-by: Solomon Peachy <solomon@linux-wlan.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | zImage.coff.lds.S | g | 649B |  | Michael Ellerman | michael@ozlabs.org | 1303282760 |  | powerpc/boot: Allow building the zImage wrapper as a relocatable ET_DYN  This patch adds code, linker script and makefile support to allow building the zImage wrapper around the kernel as a position independent executable.  This results in an ET_DYN instead of an ET_EXEC ELF output file, which can be loaded at any location by the firmware and will process its own relocations to work correctly at the loaded address.  This is of interest particularly since the standard ePAPR image format must be an ET_DYN (although this patch alone is not sufficient to produce a fully ePAPR compliant boot image).  Note for now we don't enable building with -pie for anything.  Signed-off-by: Paul Mackerras <paulus@samba.org> Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | cuboot-pq2.c | s | 7.0K | 219 | Scott Wood | scottwood@freescale.com | 1208412100 |  | [POWERPC] cuboot-pq2: PCI fixes  1. Detect (and bail out on) more conditions that violate the assumptions of the setup code -- we assume in such cases that the device tree is correct and reflects what the firmware did.  2. The inbound memory mask calculation was wrong.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | treeboot-walnut.c | s | 2.2K | 69 | David Gibson | david@gibson.dropbear.id.au | 1206533956 |  | [POWERPC] Start removing linux,network-index in favour of aliases  This patch alters the bootwrapper for a number of machines (roubhly all 4xx based cuboot or treeboot platforms) to use aliases instead of the linux,network-index hack to work out which MAC address to attach to which ethernet device node.  The now obsolete linux,network-index properties are removed from the corresponding device trees.  This won't break backwards compatiblity, because in cases where this fixup code is relevant, the device tree is part of the kernel image.  The references to linux,network-index are removed from booting-without-of.txt.  Not only is it now deprecated, but as a hack applicable only when the device tree blob and fixup code were in the same image, this property never belonged in booting-without-of.txt which describes the interface between the kernel and firmware or bootloaders which produce a device tree.  By the time the device tree reaches the kernel, all the MAC addresses must be fully filled in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cuboot-824x.c | s | 1.2K | 42 | Jon Loeliger | jdl@jdl.com | 1201139676 |  | [POWERPC] Add initial iomega StorCenter board port.  Use cuImage bootwrapper until U-Boot port is completed. Derived heavily from Linkstation port.  Signed-off-by: Jon Loeliger <jdl@freescale.com> Acked-by: Andy Wilcox <andy@protium.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | div64.S | g | 3.3K |  | Tony Breeds | tony@bakeyournoodle.com | 1323434967 |  | powerpc/boot: Add extended precision shifts to the boot wrapper.  The upcomming currituck patches will need to do 64-bit shifts which will fail with undefined symbol without this patch.  I looked at linking against libgcc but we can't guarantee that libgcc was compiled with soft-float.  Also Using ../lib/div64.S or ../kernel/misc_32.S, this will break the build as the .o's need to be built with different flags for the bootwrapper vs the kernel.  So for now the easyest option is to just copy code from arch/powerpc/kernel/misc_32.S  I don't think this code changes too often ;P  Signed-off-by: Tony Breeds <tony@bakeyournoodle.com> Signed-off-by: Josh Boyer <jwboyer@gmail.com>
f | ugecon.c | s | 2.8K | 116 | Albert Herranz | albert_herranz@yahoo.es | 1261109637 |  | powerpc/gamecube/wii: Fix off-by-one error in ugecon/usbgecko_udbg  The retry logic in ug_putc() is broken.  If the TX fifo is not ready and the counter runs out it will have a value of -1 and no transfer should be attempted. Also, a counter with a value of 0 means that the TX fifo got ready in the last try and the transfer should be attempted.  Reported-by: "Juha Leppanen" <juha_motorsportcom@luukku.com> Signed-off-by: "Juha Leppanen" <juha_motorsportcom@luukku.com> Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | cuboot-85xx.c | s | 1.6K | 52 | Nate Case | ncase@xes-inc.com | 1245120332 |  | powerpc/85xx: cuboot - Fix up ethernet3 MAC address on MPC85xx  Some MPC85xx platforms do support 4 ethernet ports, so make sure the boot wrapper fixes up all of them in the fdt.  Since MAC addresses are at the end of the bd_t structure there is no harm in expanding to support 4 MAC address on older 85xx systems that might not have that many.  Signed-off-by: Nate Case <ncase@xes-inc.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | wii-head.S | g | 3.1K |  | Albert Herranz | albert_herranz@yahoo.es | 1260681869 |  | powerpc: wii: bootwrapper bits  Add support for the Nintendo Wii video game console to the powerpc bootwrapper.  dtbImage.wii is a wrapped image that contains a flat device tree, an entry point compatible with the Homebrew Channel and BootMii, and an optional initrd.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | ebony.c | s | 2.4K | 79 | David Gibson | david@gibson.dropbear.id.au | 1206533956 |  | [POWERPC] Start removing linux,network-index in favour of aliases  This patch alters the bootwrapper for a number of machines (roubhly all 4xx based cuboot or treeboot platforms) to use aliases instead of the linux,network-index hack to work out which MAC address to attach to which ethernet device node.  The now obsolete linux,network-index properties are removed from the corresponding device trees.  This won't break backwards compatiblity, because in cases where this fixup code is relevant, the device tree is part of the kernel image.  The references to linux,network-index are removed from booting-without-of.txt.  Not only is it now deprecated, but as a hack applicable only when the device tree blob and fixup code were in the same image, this property never belonged in booting-without-of.txt which describes the interface between the kernel and firmware or bootloaders which produce a device tree.  By the time the device tree reaches the kernel, all the MAC addresses must be fully filled in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | rs6000.h | s | 7.0K | 196 | Paul Mackerras | paulus@samba.org | 1137211446 |  | powerpc: Make COFF zImages for old 32-bit powermacs  This adds code to build zImage.coff and/or zImage.initrd.coff when CONFIG_PPC32 and CONFIG_PPC_PMAC are defined.  It also restructures the OF client code and adds some workarounds for OF quirks on the older machines.  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-c2k.c | s | 4.8K | 151 | Remi Machet | rmachet@slac.stanford.edu | 1212982945 |  | powerpc: Boot code for the C2K  Support for the C2K cPCI Single Board Computer from GEFanuc (PowerPC MPC7448 with a Marvell MV64460 chipset). All features of the board are not supported yet, but the board boots, flash works, all Ethernet ports are working and PCI devices are all found (USB and SATA on PCI1 do not work yet).  Part 2 of 5: support for the board in arch/powerpc/boot.  Signed-off-by: Remi Machet <rmachet@slac.stanford.edu> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-sam440ep.c | s | 1.2K | 43 | Giuseppe Coviello | cjg@cruxppc.org | 1213187569 |  | powerpc/4xx: Sam440ep support  The Sam440ep is an high customizable general purpose mini-itx board, based on the AMCC 440EP and with a LatticeXP FPGA onboard.  It's poduced by ACube Systems Srl (Bassano del Grappa, Italy), http://www.acube-systems.biz.  Signed-off-by: Giuseppe Coviello <gicoviello@gmail.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | simpleboot.c | s | 2.8K | 76 | David Gibson | david@gibson.dropbear.id.au | 1241308346 |  | Move dtc and libfdt sources from arch/powerpc/boot to scripts/dtc  The powerpc kernel always requires an Open Firmware like device tree to supply device information.  On systems without OF, this comes from a flattened device tree blob.  This blob is usually generated by dtc, a tool which compiles a text description of the device tree into the flattened format used by the kernel.  Sometimes, the bootwrapper makes small changes to the pre-compiled device tree blob (e.g. filling in the size of RAM).  To do this it uses the libfdt library.  Because these are only used on powerpc, the code for both these tools is included under arch/powerpc/boot (these were imported and are periodically updated from the upstream dtc tree).  However, the microblaze architecture, currently being prepared for merging to mainline also uses dtc to produce device tree blobs.  A few other archs have also mentioned some interest in using dtc. Therefore, this patch moves dtc and libfdt from arch/powerpc into scripts, where it can be used by any architecture.  The vast bulk of this patch is a literal move, the rest is adjusting the various Makefiles to use dtc and libfdt correctly from their new locations.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mv64x60_i2c.c | s | 5.6K | 175 | Dale Farnsworth | dale@farnsworth.org | 1208258484 |  | [POWERPC] mv64x60: Remove device tree absolute path references  Replace several device node absolute path lookups in the mv64x60 bootwrapper code with lookups by compatible or device_type properties.  Signed-off-by: Dale Farnsworth <dale@farnsworth.org> Acked-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | ugecon.h | s | 613B | 19 | Albert Herranz | albert_herranz@yahoo.es | 1260681866 |  | powerpc: gamecube/wii: usbgecko bootwrapper console support  Add support for using the USB Gecko adapter as a bootwrapper console on the Nintendo GameCube and Wii video game consoles. The USB Gecko is a 3rd party memory card interface adapter that provides a EXI (External Interface) to USB serial converter.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | cuboot-amigaone.c | s | 868B | 30 | Gerhard Pircher | gerhard_pircher@gmx.net | 1234328409 |  | powerpc/amigaone: Bootwrapper and serial console support for AmigaOne  This adds the bootwrapper for the cuImage target and a compatible property check for "pnpPNP,501" to the generic serial console support code. The default link address for the cuImage target is set to 0x800000. This allows to boot the kernel with AmigaOS4's second level bootloader, which always loads a uImage at 0x500000.  Signed-off-by: Gerhard Pircher <gerhard_pircher@gmx.net> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | mpsc.c | s | 4.0K | 133 | Mark A. Greer | mgreer@mvista.com | 1208258484 |  | [POWERPC] prpmc2800: Clean up dts properties  Remove several unused (or software config only) properties. Rename marvel node to "system-controller".  Also, rename the "block-index" property to "cell-index" to conform to current practice.  Signed-off-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Dale Farnsworth <dale@farnsworth.org> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | flatdevtree_env.h | s | 699B | 24 | Johann Felix Soden | johfel@users.sourceforge.net | 1201027416 |  | Fix file references in documentation and Kconfig  Fix typo in arch/powerpc/boot/flatdevtree_env.h. There is no Documentation/networking/ixgbe.txt.  README.cycladesZ is now in Documentation/. wavelan.p.h is now in drivers/net/wireless/. HFS.txt is now Documentation/filesystems/hfs.txt. OSS-files are now in sound/oss/.  Signed-off-by: Johann Felix Soden <johfel@users.sourceforge.net> Acked-by: Randy Dunlap <randy.dunlap@oracle.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | oflib.c | s | 4.8K | 182 | Tony Breeds | tony@bakeyournoodle.com | 1214875712 |  | powerpc: Change the default link address for pSeries zImage kernels  Currently we set the start of the .text section to be 4Mb for pSeries. In situations where the zImage is > 8Mb we'll fail to boot (due to overlapping with OF).  Move .text in a zImage from 4MB to 64MB (well past OF).  We still will not be able to load large zImage unless we also move OF, to that end, add a note to the zImage ELF to move OF to 32Mb.  If this is the very first kernel booted then we'll need to move OF manually by setting real-base.  Signed-off-by: Tony Breeds <tony@bakeyournoodle.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | fixed-head.S | g | 66B |  | Scott Wood | scottwood@freescale.com | 1191513760 |  | [POWERPC] 8xx/wrapper: Embedded Planet EP88xC support  This board is also resold by Freescale under the names "QUICCStart MPC885 Evaluation System" and "CWH-PPC-885XN-VE".  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | crt0.S | g | 3.1K |  | Michael Ellerman | michael@ozlabs.org | 1303282760 |  | powerpc/boot: Allow building the zImage wrapper as a relocatable ET_DYN  This patch adds code, linker script and makefile support to allow building the zImage wrapper around the kernel as a position independent executable.  This results in an ET_DYN instead of an ET_EXEC ELF output file, which can be loaded at any location by the firmware and will process its own relocations to work correctly at the loaded address.  This is of interest particularly since the standard ePAPR image format must be an ET_DYN (although this patch alone is not sufficient to produce a fully ePAPR compliant boot image).  Note for now we don't enable building with -pie for anything.  Signed-off-by: Paul Mackerras <paulus@samba.org> Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ppc_asm.h | s | 1.1K | 56 | Paul Mackerras | paulus@samba.org | 1132109541 |  | powerpc: Move ppc64 boot wrapper code over to arch/powerpc  This also extends the code to handle 32-bit ELF vmlinux files as well as 64-bit ones.  This is sufficient for booting on new-world 32-bit powermacs (i.e. all recent machines).  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | fsl-soc.c | s | 1.1K | 46 | Scott Wood | scottwood@freescale.com | 1191461795 |  | [POWERPC] bootwrapper: Add fsl_get_immr() and 8xx/pq2 clock functions.  fsl_get_immr() uses /soc/ranges to determine the immr.  mpc885_get_clock() transforms a crystal frequency into a system frequency according to the PLL register settings.  pq2_get_clocks() does the same as the above for the PowerQUICC II, except that it produces several different clocks.  The mpc8xx/pq2 set_clocks() functions modify common properties in the device tree based on the given clock data.  The mpc885/pq2 fixup_clocks() functions call get_clocks(), and pass the results to set_clocks().  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | mpc8xx.h | s | 195B | 7 | Scott Wood | scottwood@freescale.com | 1191461795 |  | [POWERPC] bootwrapper: Add fsl_get_immr() and 8xx/pq2 clock functions.  fsl_get_immr() uses /soc/ranges to determine the immr.  mpc885_get_clock() transforms a crystal frequency into a system frequency according to the PLL register settings.  pq2_get_clocks() does the same as the above for the PowerQUICC II, except that it produces several different clocks.  The mpc8xx/pq2 set_clocks() functions modify common properties in the device tree based on the given clock data.  The mpc885/pq2 fixup_clocks() functions call get_clocks(), and pass the results to set_clocks().  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | libfdt-wrapper.c | s | 5.0K | 166 | Sebastian Siewior | bigeasy@linutronix.de | 1225925383 |  | powerpc/boot: Allocate more memory for dtb  David Gibson suggested that since we are now unconditionally copying the dtb into a malloc()ed buffer, it would be sensible to add a little padding to the buffer at that point, so that further device tree manipulations won't need to reallocate it.  This implements that suggestion.  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | string.h | s | 814B | 17 | David Gibson | david@gibson.dropbear.id.au | 1192162424 |  | [POWERPC] Add memchr() to the bootwrapper  This adds a memchr() implementation to the bootwrapper, which will be needed when libfdt is merged in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | ps3.c | s | 3.9K | 126 | Geoff Levand | geoffrey.levand@am.sony.com | 1207042987 |  | [POWERPC] PS3: Bootwrapper improvements  Improve the debugging support of the PS3 bootwraper code:   o Increase the size of the PS3 bootwrapper overlay from 256 to 512 bytes to    allow for more debugging code in the overlay.  o Use the dot symbol to set the size of __system_reset_overlay.  The    assembler will then emit an error if the overlay code is too big.  o Remove some unused instructions.  o Update the text describing the PS3 bootwrapper overlay.  o Add a check for null pointer writes.  o Change hcall return value from s64.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | stdlib.c | s | 934B | 37 | Scott Wood | scottwood@freescale.com | 1189697603 |  | [POWERPC] bootwrapper: Add strtoull()  This will be needed by PlanetCore firmware support.  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-rainier.c | s | 1.4K | 50 | David Gibson | david@gibson.dropbear.id.au | 1206533956 |  | [POWERPC] Start removing linux,network-index in favour of aliases  This patch alters the bootwrapper for a number of machines (roubhly all 4xx based cuboot or treeboot platforms) to use aliases instead of the linux,network-index hack to work out which MAC address to attach to which ethernet device node.  The now obsolete linux,network-index properties are removed from the corresponding device trees.  This won't break backwards compatiblity, because in cases where this fixup code is relevant, the device tree is part of the kernel image.  The references to linux,network-index are removed from booting-without-of.txt.  Not only is it now deprecated, but as a hack applicable only when the device tree blob and fixup code were in the same image, this property never belonged in booting-without-of.txt which describes the interface between the kernel and firmware or bootloaders which produce a device tree.  By the time the device tree reaches the kernel, all the MAC addresses must be fully filled in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | 4xx.h | s | 1.2K | 30 | Tiejun Chen | tiejun.chen@windriver.com | 1251724855 |  | powerpc/405ex: provide necessary fixup function to support cuImage  For cuImage format it's necessary to provide clock fixups since u-boot will not pass necessary clock frequency into the dtb included into cuImage so we implement the clock fixups as defined in the technical documentation for the board and update header file with the basic register definitions.  Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | virtex.c | s | 2.9K | 82 | John Linn | john.linn@xilinx.com | 1215154739 |  | powerpc/virtex: Fix booting of Xilinx FPGAs with 16550 for 405 and 440  The following changes add processing to initialize the Xilinx 16550 UART in the boot wrapper for Virtex targets without firmware.  Normally the boot wrapper assumes that the serial port has already been initialized by firmware.  The wrapper was also modified to add the 440 build.  Signed-off-by: John Linn <john.linn@xilinx.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | mv64x60.h | s | 2.5K | 61 | Mark A. Greer | mgreer@mvista.com | 1178933569 |  | [POWERPC] Add bootwrapper support for Marvell/mv64x60 hostbridge  The mv64x60 host bridge has many windows between its various components (cpu, system memory, ethernet ctlr, MPSC, DMA ctlr, PCI MEM, PCI I/O). Unfortunately, the firmware on some of mv64x60-based platforms do not properly or completely configure those windows (e.g., MPSC->system memory windows not configured or CPU->PCI MEM space not configured).  So, the missing configuration needs to be done in either the bootwrapper or in the kernel.  To keep the kernel as clean as possible, it is done in the bootwrapper.  Note that I/O controller configuration is NOT being done, its only the windows to allow the I/O controllers and other components to access memory, etc. that is being done--drivers assume that their controllers can already access system memory).  Table of routines and the windows they configure: 	mv64x60_config_ctlr_windows()	ENET->System Memory 					MPSC->System Memory 					IDMA->System Memory  	mv64x60_config_pci_windows()	PCI MEM->System Memory 					PCI I/O->Bridge's Registers  	mv64x60_config_cpu2pci_window()	CPU->PCI MEM 					CPU->PCI I/O  Signed-off-by: Mark A. Greer <mgreer@mvista.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | serial.c | s | 3.5K | 131 | Gerhard Pircher | gerhard_pircher@gmx.net | 1234328409 |  | powerpc/amigaone: Bootwrapper and serial console support for AmigaOne  This adds the bootwrapper for the cuImage target and a compatible property check for "pnpPNP,501" to the generic serial console support code. The default link address for the cuImage target is set to 0x800000. This allows to boot the kernel with AmigaOS4's second level bootloader, which always loads a uImage at 0x500000.  Signed-off-by: Gerhard Pircher <gerhard_pircher@gmx.net> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ps3-head.S | g | 2.2K |  | Geoff Levand | geoffrey.levand@am.sony.com | 1207042987 |  | [POWERPC] PS3: Bootwrapper improvements  Improve the debugging support of the PS3 bootwraper code:   o Increase the size of the PS3 bootwrapper overlay from 256 to 512 bytes to    allow for more debugging code in the overlay.  o Use the dot symbol to set the size of __system_reset_overlay.  The    assembler will then emit an error if the overlay code is too big.  o Remove some unused instructions.  o Update the text describing the PS3 bootwrapper overlay.  o Add a check for null pointer writes.  o Change hcall return value from s64.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | bamboo.c | s | 1.2K | 44 | David Gibson | david@gibson.dropbear.id.au | 1206533956 |  | [POWERPC] Start removing linux,network-index in favour of aliases  This patch alters the bootwrapper for a number of machines (roubhly all 4xx based cuboot or treeboot platforms) to use aliases instead of the linux,network-index hack to work out which MAC address to attach to which ethernet device node.  The now obsolete linux,network-index properties are removed from the corresponding device trees.  This won't break backwards compatiblity, because in cases where this fixup code is relevant, the device tree is part of the kernel image.  The references to linux,network-index are removed from booting-without-of.txt.  Not only is it now deprecated, but as a hack applicable only when the device tree blob and fixup code were in the same image, this property never belonged in booting-without-of.txt which describes the interface between the kernel and firmware or bootloaders which produce a device tree.  By the time the device tree reaches the kernel, all the MAC addresses must be fully filled in.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cuboot-52xx.c | s | 1.6K | 54 | Grant Likely | grant.likely@secretlab.ca | 1224090599 |  | powerpc/52xx: Make cuImage more robust in locating immr node.  Current device trees do not have the device_type = soc property set anymore.  Fix up the cuImage bootwrapper fragment to still find the IMMR nodes.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | treeboot-ebony.c | s | 844B | 27 | Scott Wood | scottwood@freescale.com | 1187760448 |  | [POWERPC] bootwrapper: Move linker symbols into ops.h  Most of these were previously used by numerous C files and redeclared in each one.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | of.c | s | 1.9K | 69 | Scott Wood | scottwood@freescale.com | 1187760448 |  | [POWERPC] bootwrapper: Move linker symbols into ops.h  Most of these were previously used by numerous C files and redeclared in each one.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | README | g | 327B |  | Paul Mackerras | paulus@samba.org | 1132109541 |  | powerpc: Move ppc64 boot wrapper code over to arch/powerpc  This also extends the code to handle 32-bit ELF vmlinux files as well as 64-bit ones.  This is sufficient for booting on new-world 32-bit powermacs (i.e. all recent machines).  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | crtsavres.S | g | 6.0K |  | Kumar Gala | galak@kernel.crashing.org | 1213592452 |  | [POWERPC] Fix bootwrapper builds with newer gcc versions  GCC 4.4.x looks to be adding support for generating out-of-line register saves/restores based on:  http://gcc.gnu.org/ml/gcc-patches/2008-04/msg01678.html  This breaks the bootwrapper as we'd need to link with libgcc to get the implementation of the register save/restores.  To workaround this issue, we just stole the save/restore code from gcc and simplified it down for our needs (integer only).  Signed-off-by: Kumar Gala <galak@kernel.crashing.org> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | 4xx.c | s | 20K | 683 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1273664929 |  | powerpc/44x: Fix UART clocks on 440SPe  The code to fixup the serial ports on 440SPe uses the incorrect addresses for these. This fixes it.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: Stefan Roese <sr@denx.de> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | cuboot-83xx.c | s | 1.5K | 49 | Kumar Gala | galak@kernel.crashing.org | 1201138367 |  | [POWERPC] bootwrapper: convert cuboot-8{3,5}xx to dt_fixup_mac_address_by_alias  Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | ps3-hvcall.S | g | 2.9K |  | Geoff Levand | geoffrey.levand@am.sony.com | 1202987461 |  | [POWERPC] PS3: Fix bootwrapper hang bug  Fix a bug in the lv1_get_repository_node_value() routine of the PS3 bootwrapper.  Changes in the PS3 system firmware 2.20 cause this bug to hang the system when branching from the bootwrapper to the kernel _start.  Since the video system has not yet been enabled at the time the bug is hit, the system hangs with a blank screen.  Earlier firmwares don't cause such a catastrophic failure, and so this bug went undetected.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | page.h | s | 1.0K | 28 | Paul Mackerras | paulus@samba.org | 1132109541 |  | powerpc: Move ppc64 boot wrapper code over to arch/powerpc  This also extends the code to handle 32-bit ELF vmlinux files as well as 64-bit ones.  This is sufficient for booting on new-world 32-bit powermacs (i.e. all recent machines).  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | uartlite.c | s | 1.7K | 66 | Grant Likely | grant.likely@secretlab.ca | 1192029275 |  | [POWERPC] Uartlite: bootwrapper bug fix, getc loops forever  Fixes inverted logic in uartlite_getc  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | treeboot-bamboo.c | s | 1.0K | 36 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1190254396 |  | [POWERPC] cuimage for Bamboo board  Add a cuboot wrapper for the Bamboo board.  Additionally, we enable MAC address fixups for both cuboot and treeboot.  This also removes some obsoleted linker declarations that have been moved into ops.h  Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com> Acked-by: David Gibson <david@gibson.dropbear.id.au>
f | fsl-soc.h | s | 112B | 5 | Scott Wood | scottwood@freescale.com | 1191461795 |  | [POWERPC] bootwrapper: Add fsl_get_immr() and 8xx/pq2 clock functions.  fsl_get_immr() uses /soc/ranges to determine the immr.  mpc885_get_clock() transforms a crystal frequency into a system frequency according to the PLL register settings.  pq2_get_clocks() does the same as the above for the PowerQUICC II, except that it produces several different clocks.  The mpc8xx/pq2 set_clocks() functions modify common properties in the device tree based on the given clock data.  The mpc885/pq2 fixup_clocks() functions call get_clocks(), and pass the results to set_clocks().  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | dummy.c | s | 30B | 4 | Paul Mackerras | paulus@samba.org | 1137290408 |  | powerpc/32: Generate miboot images with ARCH=powerpc  Miboot images are apparently still used on some old 32-bit powermacs, so build them with ARCH=powerpc if we're 32-bit and powermac support is enabled.  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | mktree.c | s | 3.5K | 127 | Stephen Rothwell | sfr@canb.auug.org.au | 1250728170 |  | powerpc: use consistent types in mktree  gcc v4.4 currently produces this build warning:  arch/powerpc/boot/mktree.c: In function 'main': arch/powerpc/boot/mktree.c:104: warning: dereferencing type-punned pointer will break strict-aliasing rules  tmpbuf is only used as an array of unsigned ints, so declare it that way.  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ns16550.c | s | 1.9K | 66 | John Linn | john.linn@xilinx.com | 1209061966 |  | [POWERPC] Xilinx: boot support for Xilinx uart 16550.  The Xilinx 16550 uart core is not a standard 16550 because it uses word-based addressing rather than byte-based adressing. With additional properties it is compatible with the open firmware 'ns16550' compatible binding.  This code updates the ns16550 driver to use the reg-offset property so that the Xilinx UART 16550 can be used with it. The reg-shift was already being handled.  Signed-off-by: John Linn <john.linn@xilinx.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | holly.c | s | 790B | 30 | David Gibson | david@gibson.dropbear.id.au | 1197341174 |  | [POWERPC] Use embedded libfdt in the bootwrapper  This incorporates libfdt (from the source embedded in an earlier commit) into the wrapper.a library used by the bootwrapper.  This includes adding a libfdt_env.h file, which the libfdt sources need in order to integrate into the bootwrapper environment, and a libfdt-wrapper.c which provides glue to connect the bootwrapper's abstract device tree callbacks to the libfdt functions.  In addition, this changes the various wrapper and platform files to use libfdt functions instead of the older flatdevtree.c library.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-kilauea.c | s | 1.2K | 42 | Tiejun Chen | tiejun.chen@windriver.com | 1251725002 |  | powerpc/405ex: support cuImage via included dtb  To support cuImage, we need to initialize the required sections and ensure that it is built.  Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | string.S | s | 3.7K | 252 | Mike Ditto | mditto@consentry.com | 1224562668 |  | powerpc: Fix boot wrapper memcmp() called with zero length argument  I noticed, when trying to use, e.g., node = find_node_by_prop_value(prev, "booleanprop", "", 0)) to search for all nodes with a certain boolean property, that memcmp() returns garbage when comparing zero bytes.  It should return zero.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ppcboot.h | s | 3.9K | 102 | Scott Wood | scottwood@freescale.com | 1187760108 |  | [POWERPC] bootwrapper: Add TARGET_HAS_ETHn tests to ppcboot.h  U-boots more recent than when ppcboot.h was forked allow the board config file to enable additional ethernet ports explicitly, rather than using a hardcoded list of targets.  This allows bootwrapper platform files to do the same.  Fortunately, nothing after the ethernet addresses is of interest to cuboot platforms, so the inevitable mismatches won't be too catastrophic.  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | stdio.h | s | 523B | 12 | David Gibson | david@gibson.dropbear.id.au | 1174885880 |  | [POWERPC] Add gcc format warnings to zImage printf()  This patch adds the correct attributes to the zImage's versions of printf to make gcc generate format string mismatch warnings.  It also corrects several minor problems with format strings in the zImage thus discovered.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | zImage.ps3.lds.S | g | 743B |  | Geoff Levand | geoffrey.levand@am.sony.com | 1184068600 |  | [POWERPC] PS3: Bootwrapper support.  Add support to build the PS3 flash rom image and remove some unneeded lmb calls.  The PS3's lv1 loader supports loading gzipped binary images from flash rom to addr zero. The loader enters the image at addr 0x100.  In this implementation a bootwrapper overlay is use to arrange for the kernel to be loaded to addr zero and to have a suitable bootwrapper entry at 0x100.  To construct the rom image, 0x100 bytes from offset 0x100 in the kernel is copied to the bootwrapper symbol __system_reset_kernel.  The 0x100 bytes at the bootwrapper symbol __system_reset_overlay is then copied to offset 0x100.  At runtime the bootwrapper program copies the 0x100 bytes at __system_reset_kernel to addr 0x100.  zImage.ps3 is a wrapped image that contains a flat device tree, an lv1 compatible entry point, and an optional initrd.  otheros.bld is the gzip compresed rom image built from zImage.ps3.  otheros.bld is suitable for programming into the PS3 boot flash memory.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | main.c | s | 6.5K | 182 | Jon Smirl | jonsmirl@gmail.com | 1225444459 |  | powerpc: Fix format string warning in arch/powerpc/boot/main.c  Fix format string warning in arch/powerpc/boot/main.c.  Also correct a typo ("uncomressed") on the same line.   BOOTCC  arch/powerpc/boot/main.o arch/powerpc/boot/main.c: In function 'prep_kernel': arch/powerpc/boot/main.c:65: warning: format '%08x' expects type 'unsigned int', but argument 3 has type 'long unsigned int'  Signed-off-by: Jon Smirl <jonsmirl@gmail.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | devtree.c | s | 8.1K | 288 | Scott Wood | scottwood@freescale.com | 1229829677 |  | powerpc/bootwrapper: Use the child-bus #address-cells to decide which range entry to use  The correct #address-cells was still used for the actual translation, so the impact is only a possibility of choosing the wrong range entry or failing to find any match.  Most common cases were not affected.  Signed-off-by: Scott Wood <scottwood@freescale.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | gunzip_util.c | s | 6.5K | 183 | Milton Miller | miltonm@bga.com | 1191376123 |  | [POWERPC] boot: Simplify gunzip_finish  Call gunzip_partial to calculate the remaining length and copy the data to the user buffer.  This makes it shorter and reduces duplication.  Signed-off-by: Milton Miller <miltonm@bga.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | planetcore.c | s | 3.3K | 133 | Scott Wood | scottwood@freescale.com | 1191376123 |  | [POWERPC] bootwrapper: Add PlanetCore firmware support  This is a library that board code can use to extract information from the PlanetCore configuration keys.  PlanetCore is used on various boards from Embedded Planet.  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | dcr.h | s | 6.3K | 180 | Tony Breeds | tony@bakeyournoodle.com | 1323434990 |  | powerpc/boot: Add mfdcrx  Needed for currituck support.  Signed-off-by: Tony Breeds <tony@bakeyournoodle.com> Signed-off-by: Josh Boyer <jwboyer@gmail.com>
f | epapr.c | s | 1.9K | 55 | David Gibson | dwg@au1.ibm.com | 1303282761 |  | powerpc/boot: Add an ePAPR compliant boot wrapper  This is a first cut at making bootwrapper code which will produce a zImage compliant with the requirements set down by ePAPR.  This is a very simple bootwrapper, taking the device tree blob supplied by the ePAPR boot program and passing it on to the kernel. It builds on the earlier patch to build a relocatable ET_DYN zImage to meet the other ePAPR image requirements.  For good measure we have some paranoid checks which will generate warnings if some of the ePAPR entry condition guarantees are not met.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | redboot-83xx.c | s | 1.4K | 48 | Bryan O'Donoghue | bodonoghue@codehermit.ie | 1212435865 |  | [POWERPC] 83xx: Add support for Analogue & Micro ASP837E board  The following adds support for the Analogue & Micro ASP 8347E, running Redboot.  http://www.analogue-micro.com/ASP8347.html  Signed-off-by: Bryan O'Donoghue <bodonoghue@codehermit.ie> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | stdlib.h | s | 137B | 4 | Scott Wood | scottwood@freescale.com | 1189697603 |  | [POWERPC] bootwrapper: Add strtoull()  This will be needed by PlanetCore firmware support.  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | libfdt_env.h | s | 419B | 14 | David Gibson | david@gibson.dropbear.id.au | 1219214098 |  | powerpc: Update in-kernel dtc and libfdt to version 1.2.0  Some time ago, a copies of the upstream dtc and libfdt sources were included in the kernel tree to avoid having these as external dependencies for building the kernel.  Since then development on the upstream dtc and libfdt has continued.  This updates the in-kernel versions to match the recently released upstream dtc version 1.2.0. This includes a number of bugfixes, many cleanups and a few new features.  Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | planetcore.h | s | 1.6K | 41 | Scott Wood | scottwood@freescale.com | 1191376123 |  | [POWERPC] bootwrapper: Add PlanetCore firmware support  This is a library that board code can use to extract information from the PlanetCore configuration keys.  PlanetCore is used on various boards from Embedded Planet.  Signed-off-by: Scott Wood <scottwood@freescale.com> Acked-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | cuboot-yosemite.c | s | 1.1K | 38 | Josh Boyer | jwboyer@linux.vnet.ibm.com | 1206533957 |  | [POWERPC] 4xx: Add bootwrapper for AMCC Yosemite board  Add the cuboot wrapper for the AMCC 440EP Yosemite board  Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
