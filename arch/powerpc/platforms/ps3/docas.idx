f | platform.h | s | 8.6K | 206 | Andre Heider | a.heider@gmail.com | 1335306857 |  | powerpc/ps3: Add highmem repository read routines  Add repository helper routines to read highmem region info.  Bootloaders that preallocate highmem regions must place the region info into the repository at these well known nodes. These routines allow second stage kernles to read the region info from those nodes.  Signed-off-by: Andre Heider <a.heider@gmail.com> CC: Nathan Whitehorn <nwhitehorn@freebsd.org> Signed-off-by: Geoff Levand <geoff@infradead.org>
f | time.c | s | 2.4K | 79 | Geert Uytterhoeven | Geert.Uytterhoeven@sonycom.com | 1251343546 |  | powerpc/ps3: Add missing check for PS3 to rtc-ps3 platform device registration  On non-PS3, we get:  || kernel BUG at drivers/rtc/rtc-ps3.c:36!  because the rtc-ps3 platform device is registered unconditionally in a kernel with builtin support for PS3.  Reported-by: Sachin Sant <sachinp@in.ibm.com> Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com> Acked-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Makefile | g | 248B |  | Hector Martin | hector@marcansoft.com | 1316474405 |  | powerpc/ps3: Add gelic udbg driver  Add a new udbg driver for the PS3 gelic Ehthernet device.  This driver shares only a few stucture and constant definitions with the gelic Ethernet device driver, so is implemented as a stand-alone driver with no dependencies on the gelic Ethernet device driver.  Signed-off-by: Hector Martin <hector@marcansoft.com> Signed-off-by: Andre Heider <a.heider@gmail.com> Signed-off-by: Geoff Levand <geoff@infradead.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | gelic_udbg.c | s | 5.9K | 220 | Hector Martin | hector@marcansoft.com | 1316474405 |  | powerpc/ps3: Add gelic udbg driver  Add a new udbg driver for the PS3 gelic Ehthernet device.  This driver shares only a few stucture and constant definitions with the gelic Ethernet device driver, so is implemented as a stand-alone driver with no dependencies on the gelic Ethernet device driver.  Signed-off-by: Hector Martin <hector@marcansoft.com> Signed-off-by: Andre Heider <a.heider@gmail.com> Signed-off-by: Geoff Levand <geoff@infradead.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | interrupt.c | s | 19K | 624 | Grant Likely | grant.likely@secretlab.ca | 1334212668 |  | irq_domain: Move irq_virq_count into NOMAP revmap  This patch replaces the old global setting of irq_virq_count that is only used by the NOMAP mapping and instead uses a revmap_data property so that the maximum NOMAP allocation can be set per NOMAP irq_domain.  There is exactly one user of irq_virq_count in-tree right now: PS3. Also, irq_virq_count is only useful for the NOMAP mapping.  So, instead of having a single global irq_virq_count values, this change drops it entirely and added a max_irq argument to irq_domain_add_nomap(). That makes it a property of an individual nomap irq domain instead of a global system settting.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Tested-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com>
f | device-init.c | s | 23K | 788 | Yong Zhang | yong.zhang0@gmail.com | 1320724306 |  | powerpc/irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> Acked-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Geoff Levand <geoff@infradead.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | exports.c | s | 994B | 23 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103844 |  | powerpc: remove non-required uses of include <linux/module.h>  None of the files touched here are modules, and they are not exporting any symbols either -- so there is no need to be including the module.h.  Builds of all the files remains successful.  Even kernel/module.c does not need to include it, since it includes linux/moduleloader.h instead.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | hvcall.S | g | 14K |  | Geoff Levand | geoffrey.levand@am.sony.com | 1165225244 |  | [POWERPC] ps3: add lv1 hvcalls  Adds the PS3 hvcalls.  Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com> Signed-off-by: Arnd Bergmann <arnd.bergmann@de.ibm.com>
f | mm.c | s | 31K | 1036 | Hector Martin | hector@marcansoft.com | 1335306858 |  | powerpc/ps3: Add highmem region memory early  Real mode memory can be limited and runs out quickly as memory is allocated during kernel startup.  Having the highmem available sooner fixes this.  This change simplifies the memory management code by converting from hotplug memory to logical memory blocks.  Signed-off-by: Hector Martin <hector@marcansoft.com> Signed-off-by: Andre Heider <a.heider@gmail.com> Signed-off-by: Geoff Levand <geoff@infradead.org>
f | repository.c | s | 32K | 1165 | Andre Heider | a.heider@gmail.com | 1335306857 |  | powerpc/ps3: Add highmem repository read routines  Add repository helper routines to read highmem region info.  Bootloaders that preallocate highmem regions must place the region info into the repository at these well known nodes. These routines allow second stage kernles to read the region info from those nodes.  Signed-off-by: Andre Heider <a.heider@gmail.com> CC: Nathan Whitehorn <nwhitehorn@freebsd.org> Signed-off-by: Geoff Levand <geoff@infradead.org>
f | spu.c | s | 15K | 509 | Geoff Levand | geoff@infradead.org | 1323313554 |  | powerpc/ps3: Fix hcall lv1_get_virtual_address_space_id_of_ppe  The lv1_get_virtual_address_space_id_of_ppe hcall takes 0, not 1 input arguments.  Adjust the lv1 hcall table and all calls.  Signed-off-by: Geoff Levand <geoff@infradead.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | os-area.c | s | 21K | 714 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103837 |  | powerpc: add export.h to files making use of EXPORT_SYMBOL  With module.h being implicitly everywhere via device.h, the absence of explicitly including something for EXPORT_SYMBOL went unnoticed. Since we are heading to fix things up and clean module.h from the device.h file, we need to explicitly include these files now.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | Kconfig | g | 5.2K |  | Geoff Levand | geoff@infradead.org | 1335306859 |  | powerpc/ps3: Minor Kconfig cleanup  Signed-off-by: Geoff Levand <geoff@infradead.org>
f | setup.c | s | 6.4K | 227 | Geoff Levand | geoff@infradead.org | 1323313554 |  | powerpc/ps3: Fix hcall lv1_get_version_info  The lv1_get_version_info hcall takes 2, not 1 output arguments.  Adjust the lv1 hcall table and all calls.  Usage:    int lv1_get_version_info(u64 *version_number, u64 *vendor_id)  Signed-off-by: Geoff Levand <geoff@infradead.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | smp.c | s | 3.1K | 105 | Geoff Levand | geoff@infradead.org | 1323313555 |  | powerpc/ps3: Add __init to ps3_smp_probe  Add an __init annotation to the ps3_smp_probe() routine. Fixes build warnings like these when CONFIG_DEBUG_SECTION_MISMATCH=y:   WARNING: Section mismatch in reference from the function .ps3_smp_probe()  Signed-off-by: Geoff Levand <geoff@infradead.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | htab.c | s | 5.3K | 166 | Jiri Kosina | jkosina@suse.cz | 1280927678 |  | Merge branch 'master' into for-next
f | system-bus.c | s | 19K | 664 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1332945393 |  | PowerPC: adapt for dma_map_ops changes  Adapt core PowerPC architecture code for dma_map_ops changes: replace alloc/free_coherent with generic alloc/free methods.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> [added missing changes to arch/powerpc/kernel/vio.c] Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Reviewed-by: David Gibson <david@gibson.dropbear.id.au> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
