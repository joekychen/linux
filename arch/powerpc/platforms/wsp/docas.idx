f | opb_pic.c | s | 7.2K | 245 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/powerpc: Replace custom xlate functions with library functions  This patch converts a number of the powerpc drivers to use the common library of irq_domain xlate functions, dropping a bunch of lines in the process.  v5: - Remove tsi108 changes from patch  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Rob Herring <rob.herring@calxeda.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com> Tested-by: Olof Johansson <olof@lixom.net>
f | ics.c | s | 17K | 604 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1329192098 |  | powerpc/wsp: Fix IRQ affinity setting  We call the cache_hwirq_map() function with a linux IRQ number but it expects a HW irq number. This triggers a BUG on multic-chip setups in addition to not doing the right thing.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | chroma.c | s | 1.2K | 45 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | Makefile | g | 317B |  | Jimi Xenidis | jimix@pobox.com | 1322190689 |  | powerpc/book3e: Add Chroma as a new WSP/PowerEN platform.  This patch add the Chroma platform to WSP/PowerEN, which is a PCIe card (a defconfig is included).  The card includes an H8 service processor that is used to manage the card.  The H8 is connected over the second serial UART on the PowerEN chip so this patch includes a simple 16550 driver to enable communication, mostly for "power off" and "rebooting".  This patch also includes a, WSP specific, "halt" method that will shut of all A2 cores but still leave power on at the chip level.  This is desirable, especially if you wish to interrogate the chip with a hardware probe after the halt.  Signed-off-by: Jimi Xenidis <jimix@pobox.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | psr2.c | s | 1.3K | 54 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | ics.h | s | 714B | 19 | Michael Ellerman | michael@ellerman.id.au | 1316474395 |  | powerpc/wsp: Add MSI support for PCI on PowerEN  Based on a patch by Michael Ellerman <michael@ellerman.id.au>  Patch was simply forward ported upstream.  Jimi Xenidis <jimix@pobox.com>  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | wsp.c | s | 2.4K | 96 | Jimi Xenidis | jimix@pobox.com | 1322190689 |  | powerpc/book3e: Add Chroma as a new WSP/PowerEN platform.  This patch add the Chroma platform to WSP/PowerEN, which is a PCIe card (a defconfig is included).  The card includes an H8 service processor that is used to manage the card.  The H8 is connected over the second serial UART on the PowerEN chip so this patch includes a simple 16550 driver to enable communication, mostly for "power off" and "rebooting".  This patch also includes a, WSP specific, "halt" method that will shut of all A2 cores but still leave power on at the chip level.  This is desirable, especially if you wish to interrogate the chip with a hardware probe after the halt.  Signed-off-by: Jimi Xenidis <jimix@pobox.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | h8.c | s | 2.6K | 104 | Jimi Xenidis | jimix@pobox.com | 1322190689 |  | powerpc/book3e: Add Chroma as a new WSP/PowerEN platform.  This patch add the Chroma platform to WSP/PowerEN, which is a PCIe card (a defconfig is included).  The card includes an H8 service processor that is used to manage the card.  The H8 is connected over the second serial UART on the PowerEN chip so this patch includes a simple 16550 driver to enable communication, mostly for "power off" and "rebooting".  This patch also includes a, WSP specific, "halt" method that will shut of all A2 cores but still leave power on at the chip level.  This is desirable, especially if you wish to interrogate the chip with a hardware probe after the halt.  Signed-off-by: Jimi Xenidis <jimix@pobox.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | wsp_pci.c | s | 32K | 995 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | scom_wsp.c | s | 1.7K | 61 | David Gibson | david@gibson.dropbear.id.au | 1304652755 |  | powerpc: Add WSP platform  Add a platform for the Wire Speed Processor, based on the PPC A2.  This includes code for the ICS & OPB interrupt controllers, as well as a SCOM backend, and SCOM based cpu bringup.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Jack Miller <jack@codezen.org> Signed-off-by: Ian Munsie <imunsie@au1.ibm.com> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | setup.c | s | 862B | 29 | David Gibson | david@gibson.dropbear.id.au | 1304652755 |  | powerpc: Add WSP platform  Add a platform for the Wire Speed Processor, based on the PPC A2.  This includes code for the ICS & OPB interrupt controllers, as well as a SCOM backend, and SCOM based cpu bringup.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Jack Miller <jack@codezen.org> Signed-off-by: Ian Munsie <imunsie@au1.ibm.com> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | msi.h | s | 543B | 16 | Michael Ellerman | michael@ellerman.id.au | 1316474395 |  | powerpc/wsp: Add MSI support for PCI on PowerEN  Based on a patch by Michael Ellerman <michael@ellerman.id.au>  Patch was simply forward ported upstream.  Jimi Xenidis <jimix@pobox.com>  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Kconfig | g | 618B |  | Grant Likely | grant.likely@secretlab.ca | 1329856380 |  | of: Only compile OF_DYNAMIC on PowerPC pseries and iseries  Only two architectures use the OF node reference counting and reclaim bits. There is no need to compile it for the rest of the PowerPC platforms or for any of the other architectures.  This patch makes iseries and pseries select CONFIG_OF_DYNAMIC, and makes it default to off for everything else.  It is still safe to turn on CONFIG_OF_DYNAMIC on all architectures, it just isn't necessary.  v2: Also select OF_DYNAMIC for PPC_CHROMA and MPC885ADS as reported by Michael     Meuling  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Acked-by: David S. Miller <davem@davemloft.net> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: Jimi Xenidis <jimix@pobox.com> (for PPC_CHROMA bug fix) Cc: Rob Herring <rob.herring@calxeda.com>
f | wsp.h | s | 778B | 22 | Jimi Xenidis | jimix@pobox.com | 1322190689 |  | powerpc/book3e: Add Chroma as a new WSP/PowerEN platform.  This patch add the Chroma platform to WSP/PowerEN, which is a PCIe card (a defconfig is included).  The card includes an H8 service processor that is used to manage the card.  The H8 is connected over the second serial UART on the PowerEN chip so this patch includes a simple 16550 driver to enable communication, mostly for "power off" and "rebooting".  This patch also includes a, WSP specific, "halt" method that will shut of all A2 cores but still leave power on at the chip level.  This is desirable, especially if you wish to interrogate the chip with a hardware probe after the halt.  Signed-off-by: Jimi Xenidis <jimix@pobox.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | smp.c | s | 2.0K | 73 | Rusty Russell | rusty@rustcorp.com.au | 1329889727 |  | powerpc: Remove references to cpu_*_map  This has been obsolescent for a while; time for the final push.  In adjacent context, replaced old cpus_* with cpumask_*.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | wsp_pci.h | s | 9.2K | 237 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1316474393 |  | powerpc/wsp: Add PCIe Root support to PowerEN/WSP  Based on a patch by Benjamin Herrenschmidt <benh@kernel.crashing.org>  Modernized and slightly modified to not record erros into the nvram log since we do not have that device driver just yet.  Jimi Xenidis <jimix@pobox.com>  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | scom_smp.c | s | 12K | 358 | David Gibson | david@gibson.dropbear.id.au | 1304652755 |  | powerpc: Add WSP platform  Add a platform for the Wire Speed Processor, based on the PPC A2.  This includes code for the ICS & OPB interrupt controllers, as well as a SCOM backend, and SCOM based cpu bringup.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: David Gibson <david@gibson.dropbear.id.au> Signed-off-by: Jack Miller <jack@codezen.org> Signed-off-by: Ian Munsie <imunsie@au1.ibm.com> Signed-off-by: Michael Ellerman <michael@ellerman.id.au> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | msi.c | s | 2.5K | 83 | Michael Ellerman | michael@ellerman.id.au | 1316474395 |  | powerpc/wsp: Add MSI support for PCI on PowerEN  Based on a patch by Michael Ellerman <michael@ellerman.id.au>  Patch was simply forward ported upstream.  Jimi Xenidis <jimix@pobox.com>  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
