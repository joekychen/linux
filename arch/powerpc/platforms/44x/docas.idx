f | currituck.c | s | 5.4K | 176 | Kyle Moffett | Kyle.D.Moffett@boeing.com | 1329954600 |  | powerpc/mpic: Remove duplicate MPIC_WANTS_RESET flag  There are two separate flags controlling whether or not the MPIC is reset during initialization, which is completely unnecessary, and only one of them can be specified in the device tree.  Also, most platforms in-tree right now do actually want to reset the MPIC during initialization anyways, which means lots of duplicate code passing the MPIC_WANTS_RESET flag.  Fix all of the callers which currently do not pass the MPIC_WANTS_RESET flag to pass the MPIC_NO_RESET flag, then remove the MPIC_WANTS_RESET flag and make the code reset the MPIC by default.  Signed-off-by: Kyle Moffett <Kyle.D.Moffett@boeing.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Makefile | g | 447B |  | Tony Breeds | tony@bakeyournoodle.com | 1323435100 |  | powerpc/47x: Add support for the new IBM currituck platform  Based on original work by David 'Shaggy' Kleikamp.  Signed-off-by: Tony Breeds <tony@bakeyournoodle.com> Signed-off-by: Josh Boyer <jwboyer@gmail.com>
f | warp.c | s | 6.5K | 246 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103838 |  | powerpc: include export.h for files using EXPORT_SYMBOL/THIS_MODULE  Fix failures in powerpc associated with the previously allowed implicit module.h presence that now lead to things like this:  arch/powerpc/mm/mmu_context_hash32.c:76:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL_GPL' arch/powerpc/mm/tlb_hash32.c:48:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' arch/powerpc/kernel/pci_32.c:51:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL_GPL' arch/powerpc/kernel/iomap.c:36:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' arch/powerpc/platforms/44x/canyonlands.c:126:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' arch/powerpc/kvm/44x.c:168:59: error: 'THIS_MODULE' undeclared (first use in this function)  [with several contibutions from Stephen Rothwell <sfr@canb.auug.org.au>]  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | 44x.h | s | 303B | 8 | Rupjyoti Sarmah | rsarmah@amcc.com | 1296647906 |  | powerpc/44x: PHY fixup for USB on canyonlands board  This fix is a reset for USB PHY that requires some amount of time for power to be stable on Canyonlands.  Signed-off-by: Rupjyoti Sarmah <rsarmah@apm.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | iss4xx.c | s | 4.3K | 145 | Kyle Moffett | Kyle.D.Moffett@boeing.com | 1329954600 |  | powerpc/mpic: Remove duplicate MPIC_WANTS_RESET flag  There are two separate flags controlling whether or not the MPIC is reset during initialization, which is completely unnecessary, and only one of them can be specified in the device tree.  Also, most platforms in-tree right now do actually want to reset the MPIC during initialization anyways, which means lots of duplicate code passing the MPIC_WANTS_RESET flag.  Fix all of the callers which currently do not pass the MPIC_WANTS_RESET flag to pass the MPIC_NO_RESET flag, then remove the MPIC_WANTS_RESET flag and make the code reset the MPIC by default.  Signed-off-by: Kyle Moffett <Kyle.D.Moffett@boeing.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | ebony.c | s | 1.7K | 60 | Rob Herring | rob.herring@calxeda.com | 1310480884 |  | powerpc: rename ppc_pci_*_flags to pci_*_flags  This renames pci flags functions and enums in preparation for creating generic version in asm-generic/pci-bridge.h. The following search and replace is done:  s/ppc_pci_/pci_/ s/PPC_PCI_/PCI_/  Direct accesses to ppc_pci_flag variable are replaced with helper functions.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org>
f | sam440ep.c | s | 1.9K | 68 | Rob Herring | rob.herring@calxeda.com | 1310480884 |  | powerpc: rename ppc_pci_*_flags to pci_*_flags  This renames pci flags functions and enums in preparation for creating generic version in asm-generic/pci-bridge.h. The following search and replace is done:  s/ppc_pci_/pci_/ s/PPC_PCI_/PCI_/  Direct accesses to ppc_pci_flag variable are replaced with helper functions.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org>
f | misc_44x.S | g | 743B |  | Stefan Roese | sr@denx.de | 1207187096 |  | [POWERPC] 4xx: Create common ppc4xx_reset_system() in ppc4xx_soc.c  This patch creates a common system reset routine for all 40x and 44x systems. Previously only a 44x routine existed. But since this system reset via the debug control register is common for 40x and 44x let's share this code for all those platforms in ppc4xx_soc.c.  This patch also enables CONFIG_4xx_SOC for all 40x and 44x platforms.  Tested on Kilauea (405EX) and Canyonlands (440EX).  Signed-off-by: Stefan Roese <sr@denx.de> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
f | Kconfig | g | 6.8K |  | Mai La | mla@apm.com | 1336049371 |  | powerpc/44x: Fix PCI MSI support for Maui APM821xx SoC and Bluestone board  This patch consists of: - Enable PCI MSI as default for Bluestone board - Change definition of number of MSI interrupts as it depends on SoC - Fix returning ENODEV as finding MSI node - Fix MSI physical high and low address - Keep MSI data logically  Signed-off-by: Mai La <mla@apm.com> Signed-off-by: Josh Boyer <jwboyer@gmail.com>
f | ppc44x_simple.c | s | 2.4K | 81 | Vinh Nguyen Huu Tuong | vhtnguyen@apm.com | 1331988192 |  | powerpc/44x: The bug fixed support for APM821xx SoC and Bluestone board  This patch consists of: - Fix the pvr mask for checking pvr in cputable.c - Fix the cpu name as consistent with cpu name is describled in dts file  Signed-off-by: Vinh Nguyen Huu Tuong <vhtnguyen@apm.com> Signed-off-by: Josh Boyer <jwboyer@gmail.com>
f | canyonlands.c | s | 3.4K | 117 | Rob Herring | rob.herring@calxeda.com | 1310480884 |  | powerpc: rename ppc_pci_*_flags to pci_*_flags  This renames pci flags functions and enums in preparation for creating generic version in asm-generic/pci-bridge.h. The following search and replace is done:  s/ppc_pci_/pci_/ s/PPC_PCI_/PCI_/  Direct accesses to ppc_pci_flag variable are replaced with helper functions.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org>
f | virtex.c | s | 1.6K | 54 | Roderick Colenbrander | thunderbird2k@gmail.com | 1244304862 |  | powerpc/virtex: Add support for Xilinx PCI host bridge  This patch adds support for the Xilinx plbv46-pci-1.03.a PCI host bridge IPcore.  Signed-off-by: Roderick Colenbrander <thunderbird2k@gmail.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | virtex_ml510.c | s | 855B | 26 | Roderick Colenbrander | thunderbird2k@gmail.com | 1244304924 |  | powerpc/virtex: Add Xilinx ML510 reference design support  Signed-off-by: Roderick Colenbrander <thunderbird2k@gmail.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | idle.c | s | 1.5K | 56 | Jerone Young | jyoung5@us.ibm.com | 1208349126 |  | [POWERPC] 4xx: Add idle wait support for 44x platforms  This changes the cpu_idle loop for 44x platforms to utilize the Wait Enable feature of the CPU.  This helps virtulization solutions know when the guest Linux kernel is in an idle state.  A command line option called "idle" is also added to allow people to change the idle loop back to the original variation.  This is done by setting "idle=spin" on the kernel command line.  Signed-off-by: Jerone Young <jyoung5@us.ibm.com> Signed-off-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
