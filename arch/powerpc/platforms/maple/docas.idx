f | pci.c | s | 16K | 571 | Bjorn Helgaas | bhelgaas@google.com | 1330053538 |  | powerpc/PCI: replace pci_probe_only with pci_flags  We already use pci_flags, so this just sets pci_flags directly and removes the intermediate step of figuring out pci_probe_only, then using it to set pci_flags.  The PCI core provides a pci_flags definition (currently __weak), so drop the powerpc definitions in favor of that.  CC: Benjamin Herrenschmidt <benh@kernel.crashing.org> CC: linuxppc-dev@lists.ozlabs.org Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | time.c | s | 4.5K | 148 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | Makefile | g | 30B |  | Paul Mackerras | paulus@samba.org | 1130587676 |  | powerpc: Merge maple support code to arch/powerpc/platforms/maple  Signed-off-by: Paul Mackerras <paulus@samba.org>
f | maple.h | s | 458B | 12 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1165208404 |  | [POWERPC] Make pci_read_irq_line the default  This patch reworks the way IRQs are fixed up on PCI for arch powerpc.  It makes pci_read_irq_line() called by default in the PCI code for devices that are probed, and add an optional per-device fixup in ppc_md for platforms that really need to correct what they obtain from pci_read_irq_line().  It also removes ppc_md.irq_bus_setup which was only used by pSeries and should not be needed anymore.  I've also removed the pSeries s7a workaround as it can't work with the current interrupt code anyway. I'm trying to get one of these machines working so I can test a proper fix for that problem.  I also haven't updated the old-style fixup code from 85xx_cds.c because it's actually buggy :) It assigns pci_dev->irq hard coded numbers which is no good with the new IRQ mapping code. It should at least use irq_create_mapping(NULL, hard_coded_number); and possibly also set_irq_type() to set them as level low.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | setup.c | s | 9.6K | 340 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | Kconfig | g | 455B |  | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1236751895 |  | powerpc/kconfig: Kill PPC_MULTIPLATFORM  CONFIG_PPC_MULTIPLATFORM is a remain of the pre-powerpc days and isn't really meaningful anymore. It was basically equivalent to PPC64 |||| 6xx.  This removes it along with the following changes:   - 32-bit platforms that relied on PPC32 && PPC_MULTIPLATFORM now rely    on 6xx which is what they want anyway.   - A new symbol, PPC_BOOK3S, is defined that represent compliance with    the "Server" variant of the architecture. This is set when either 6xx    or PPC64 is set and open the door for future BOOK3E 64-bit.   - 64-bit platforms that relied on PPC64 && PPC_MULTIPLATFORM now use    PPC64 && PPC_BOOK3S   - A separate and selectable CONFIG_PPC_OF_BOOT_TRAMPOLINE option is now    used to control the use of prom_init.c  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
