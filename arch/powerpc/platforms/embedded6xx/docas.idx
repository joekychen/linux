f | wii.c | s | 5.5K | 207 | Tejun Heo | tj@kernel.org | 1323368528 |  | memblock: s/memblock_analyze()/memblock_allow_resize()/ and update users  The only function of memblock_analyze() is now allowing resize of memblock region arrays.  Rename it to memblock_allow_resize() and update its users.  * The following users remain the same other than renaming.    arm/mm/init.c::arm_memblock_init()   microblaze/kernel/prom.c::early_init_devtree()   powerpc/kernel/prom.c::early_init_devtree()   openrisc/kernel/prom.c::early_init_devtree()   sh/mm/init.c::paging_init()   sparc/mm/init_64.c::paging_init()   unicore32/mm/init.c::uc32_memblock_init()  * In the following users, analyze was used to update total size which   is no longer necessary.    powerpc/kernel/machine_kexec.c::reserve_crashkernel()   powerpc/kernel/prom.c::early_init_devtree()   powerpc/mm/init_32.c::MMU_init()   powerpc/mm/tlb_nohash.c::__early_init_mmu()   powerpc/platforms/ps3/mm.c::ps3_mm_add_memory()   powerpc/platforms/embedded6xx/wii.c::wii_memory_fixups()   sh/kernel/machine_kexec.c::reserve_crashkernel()  * x86/kernel/e820.c::memblock_x86_fill() was directly setting   memblock_can_resize before populating memblock and calling analyze   afterwards.  Call memblock_allow_resize() before start populating.  memblock_can_resize is now static inside memblock.c.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Yinghai Lu <yinghai@kernel.org> Cc: Russell King <linux@arm.linux.org.uk> Cc: Michal Simek <monstr@monstr.eu> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Cc: "H. Peter Anvin" <hpa@zytor.com>
f | Makefile | g | 471B |  | Albert Herranz | albert_herranz@yahoo.es | 1260681870 |  | powerpc: wii: platform support  Add platform support for the Nintendo Wii video game console.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | gamecube.c | s | 2.1K | 88 | Anton Blanchard | anton@samba.org | 1295579316 |  | powerpc/kexec: Remove empty ppc_md.machine_kexec_prepare  We check for a valid handler before calling ppc_md.machine_kexec_prepare so we can just remove these empty handlers.  Signed-off-by: Anton Blanchard <anton@samba.org> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | prpmc2800.c | s | 3.9K | 123 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | mpc7448_hpc2.c | s | 5.2K | 179 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | usbgecko_udbg.c | s | 6.7K | 272 | Albert Herranz | albert_herranz@yahoo.es | 1261109637 |  | powerpc/gamecube/wii: Fix off-by-one error in ugecon/usbgecko_udbg  The retry logic in ug_putc() is broken.  If the TX fifo is not ready and the counter runs out it will have a value of -1 and no transfer should be attempted. Also, a counter with a value of 0 means that the TX fifo got ready in the last try and the transfer should be attempted.  Reported-by: "Juha Leppanen" <juha_motorsportcom@luukku.com> Signed-off-by: "Juha Leppanen" <juha_motorsportcom@luukku.com> Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | mpc10x.h | s | 6.8K | 151 | Kumar Gala | galak@kernel.crashing.org | 1187840609 |  | [POWERPC] Copy over headers from arch/ppc to arch/powerpc that we need  To build arch/powerpc without including asm-ppc/ we need these files in asm-powerpc/  Moved some headers under arch/powerpc/platforms if they were only used by platform or driver files and fixed up the source file includes to match the new locations  Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | hlwd-pic.h | s | 620B | 19 | Albert Herranz | albert_herranz@yahoo.es | 1260681870 |  | powerpc: wii: hollywood interrupt controller support  Add support for the dual interrupt controller included in the "Hollywood" chipset of the Nintendo Wii video game console. This interrupt controller serves both the Broadway processor (as a cascade) and the Starlet processor, and is used to manage interrupts for the non-classic hardware.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | storcenter.c | s | 2.9K | 98 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | linkstation.c | s | 3.8K | 132 | Kyle Moffett | Kyle.D.Moffett@boeing.com | 1329954600 |  | powerpc/mpic: Remove duplicate MPIC_WANTS_RESET flag  There are two separate flags controlling whether or not the MPIC is reset during initialization, which is completely unnecessary, and only one of them can be specified in the device tree.  Also, most platforms in-tree right now do actually want to reset the MPIC during initialization anyways, which means lots of duplicate code passing the MPIC_WANTS_RESET flag.  Fix all of the callers which currently do not pass the MPIC_WANTS_RESET flag to pass the MPIC_NO_RESET flag, then remove the MPIC_WANTS_RESET flag and make the code reset the MPIC by default.  Signed-off-by: Kyle Moffett <Kyle.D.Moffett@boeing.com> Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Kconfig | g | 2.9K |  | Paul Bolle | pebolle@tiscali.nl | 1320100792 |  | powerpc: drop unused Kconfig symbols  Signed-off-by: Paul Bolle <pebolle@tiscali.nl> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | c2k.c | s | 3.6K | 120 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | holly.c | s | 7.1K | 238 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | flipper-pic.c | s | 5.4K | 204 | Paul Gortmaker | paul.gortmaker@windriver.com | 1329961279 |  | ppc-6xx: fix build failure in flipper-pic.c and hlwd-pic.c  The commit bae1d8f19983fbfa25559aa3cb6a81a84aa82a18 (linux-next)    "irq_domain/powerpc: Use common irq_domain structure instead of irq_host"  made this change:     -static struct irq_host *flipper_irq_host;    +static struct irq_domain *flipper_irq_host;  and this change:     -static struct irq_host *hlwd_irq_host;    +static struct irq_domain *hlwd_irq_host;  The intent was to change the type, and not the name, but then in a couple of instances, it looks like the sed to change the irq_domain_ops name inadvertently also changed the irq_host name where it was not supposed to, causing build failures.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | usbgecko_udbg.h | s | 764B | 24 | Albert Herranz | albert_herranz@yahoo.es | 1260681871 |  | powerpc: gamecube/wii: early debugging using usbgecko  Add support for using the USB Gecko adapter as an early debugging console on the Nintendo GameCube and Wii video game consoles. The USB Gecko is a 3rd party memory card interface adapter that provides a EXI (External Interface) to USB serial converter.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | flipper-pic.h | s | 725B | 21 | Albert Herranz | albert_herranz@yahoo.es | 1260681868 |  | powerpc: gamecube/wii: flipper interrupt controller support  Add support for the interrupt controller included in the "Flipper" chipset of the Nintendo GameCube video game console. The same interrupt controller is also present in the "Hollywood" chipset of the Nintendo Wii.  Signed-off-by: Albert Herranz <albert_herranz@yahoo.es> Acked-by: Segher Boessenkool <segher@kernel.crashing.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | hlwd-pic.c | s | 5.2K | 192 | Paul Gortmaker | paul.gortmaker@windriver.com | 1329961279 |  | ppc-6xx: fix build failure in flipper-pic.c and hlwd-pic.c  The commit bae1d8f19983fbfa25559aa3cb6a81a84aa82a18 (linux-next)    "irq_domain/powerpc: Use common irq_domain structure instead of irq_host"  made this change:     -static struct irq_host *flipper_irq_host;    +static struct irq_domain *flipper_irq_host;  and this change:     -static struct irq_host *hlwd_irq_host;    +static struct irq_domain *hlwd_irq_host;  The intent was to change the type, and not the name, but then in a couple of instances, it looks like the sed to change the irq_domain_ops name inadvertently also changed the irq_host name where it was not supposed to, causing build failures.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | ls_uart.c | s | 3.4K | 114 | Grant Likely | grant.likely@secretlab.ca | 1201530641 |  | [POWERPC] 82xx and embedded6xx: Use machine_*_initcall() hooks in platform code  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
