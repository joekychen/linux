f | mpc52xx_common.c | s | 8.6K | 296 | Grant Likely | grant.likely@secretlab.ca | 1332286831 |  | powerpc/5200: convert mpc5200 to use of_platform_populate()  of_platform_populate() also handles nodes at the root of the tree, which is wanted for things like describing the sound complex.  This patch converts mpc5200 support to use of_platform_populate() instead of of_platform_bus_probe().  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Anatolij Gustschin <agust@denx.de>
f | lite5200.c | s | 4.9K | 169 | Grant Likely | grant.likely@secretlab.ca | 1293912205 |  | of/flattree: Add of_flat_dt_match() helper function  This patch adds of_flat_dt_match() which tests a node for compatibility with a list of values and converts the relevant powerpc platform code to use it.  This approach simplifies the board support code a bit.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Reviewed-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com>
f | Makefile | g | 501B |  | Grant Likely | grant.likely@secretlab.ca | 1309975035 |  | gpio: Move mpc5200 gpio driver to drivers/gpio  GPIO drivers are getting consolidated into drivers/gpio.  While at it, change the driver name to mpc5200-gpio* to avoid collisions.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | lite5200_sleep.S | g | 7.6K |  | Domen Puncer | domen.puncer@telargo.com | 1190179534 |  | [POWERPC] MPC5200 low power mode  Low-power mode implementation for Lite5200b. Some I/O registers are also saved here.  A recent U-Boot that supports this (lite5200b_PM_config) is needed.  Signed-off-by: Domen Puncer <domen.puncer@telargo.com> Signed-off-by: Sylvain Munaut <tnt@246tNt.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | media5200.c | s | 6.8K | 213 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/powerpc: constify irq_domain_ops  Make all the irq_domain_ops structures in powerpc 'static const'  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com> Tested-by: Olof Johansson <olof@lixom.net>
f | lite5200_pm.c | s | 6.2K | 200 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PowerPC  Disintegrate asm/system.h for PowerPC.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> cc: linuxppc-dev@lists.ozlabs.org
f | efika.c | s | 5.9K | 194 | Julia Lawall | julia@diku.dk | 1283967924 |  | powerpc/5200: efika.c: Add of_node_put to avoid memory leak  This function is implemented as though the function of_get_next_child does not increment the reference count of its result, but actually it does. Thus the patch adds of_node_put in error handling code and drops a call to of_node_get.  The semantic match that finds this problem is as follows: (http://coccinelle.lip6.fr/)  // <smpl> @r exists@ local idexpression x; expression E1; position p1,p2; @@  x@p1 = of_get_next_child(...); ... when != x = E1 of_node_get@p2(x)  @script:python@ p1 << r.p1; p2 << r.p2; @@  cocci.print_main("call",p1) cocci.print_secs("get",p2) // </smpl>  Signed-off-by: Julia Lawall <julia@diku.dk> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | mpc52xx_sleep.S | g | 2.5K |  | Domen Puncer | domen.puncer@telargo.com | 1178533875 |  | [POWERPC] mpc52xx suspend to deep-sleep  Implement deep-sleep on MPC52xx. SDRAM is put into self-refresh with help of SRAM code (alternatives would be code in FLASH, I-cache). Interrupt code must also not be in SDRAM, so put it in I-cache. MPC52xx core is static, so contents will remain intact even with clocks turned off.  Signed-off-by: Domen Puncer <domen.puncer@telargo.com> Acked-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Sylvain Munaut <tnt@246tNt.com> Signed-off-by: Paul Mackerras <paulus@samba.org>
f | mpc52xx_pic.c | s | 16K | 457 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/powerpc: constify irq_domain_ops  Make all the irq_domain_ops structures in powerpc 'static const'  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com> Tested-by: Olof Johansson <olof@lixom.net>
f | mpc5200_simple.c | s | 2.3K | 75 | Heiko Schocher | hs@denx.de | 1332286826 |  | powerpc/mpc52xx: add a4m072 board support  Add DTS file for a4m072 board and add its name to the list of the supported boards.  Signed-off-by: Heiko Schocher <hs@denx.de> cc: Grant Likely <grant.likely@secretlab.ca> cc: devicetree-discuss@ozlabs.org cc: Wolfgang Denk <wd@denx.de> cc: Wolfram Sang <w.sang@pengutronix.de> Signed-off-by: Anatolij Gustschin <agust@denx.de>
f | mpc52xx_pci.c | s | 11K | 359 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1333339203 |  | powerpc: Mark const init data with __initconst instead of __initdata  As long as there is no other non-const variable marked __initdata in the same compilation unit it doesn't hurt. If there were one however compilation would fail with  	error: $variablename causes a section type conflict  because a section containing const variables is marked read only and so cannot contain non-const variables.  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Cc: Josh Boyer <jwboyer@gmail.com> Cc: Matt Porter <mporter@kernel.crashing.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org> Cc: Anatolij Gustschin <agust@denx.de> Cc: Kumar Gala <galak@kernel.crashing.org> Cc: Arnd Bergmann <arnd@arndb.de> Cc: linuxppc-dev@lists.ozlabs.org Cc: cbe-oss-dev@lists.ozlabs.org Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
f | Kconfig | g | 1.7K |  | Grant Likely | grant.likely@secretlab.ca | 1309975035 |  | gpio: Move mpc5200 gpio driver to drivers/gpio  GPIO drivers are getting consolidated into drivers/gpio.  While at it, change the driver name to mpc5200-gpio* to avoid collisions.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | mpc52xx_gpt.c | s | 22K | 670 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/powerpc: constify irq_domain_ops  Make all the irq_domain_ops structures in powerpc 'static const'  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com> Tested-by: Olof Johansson <olof@lixom.net>
f | mpc52xx_lpbfifo.c | s | 15K | 475 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103838 |  | powerpc: Fix up modules that should be including module.h  So that we can clean up the header files and not be relying on implicit includes from device.h ---> module.h  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | mpc52xx_pm.c | s | 5.2K | 162 | Lionel Debroux | lionel_debroux@yahoo.fr | 1289913242 |  | suspend: constify platform_suspend_ops  While at it, fix two checkpatch errors. Several non-const struct instances constified by this patch were added after the introduction of platform_suspend_ops in checkpatch.pl's list of "should be const" structs (79404849e90a41ea2109bd0e2f7c7164b0c4ce73).  Patch against mainline. Inspired by hunks of the grsecurity patch, updated for newer kernels.  Signed-off-by: Lionel Debroux <lionel_debroux@yahoo.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
