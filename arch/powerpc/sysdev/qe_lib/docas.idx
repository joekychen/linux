f | qe.c | s | 17K | 590 | Dave Liu | daveliu@freescale.com | 1333026856 |  | powerpc/qe: Update the SNUM table for MPC8569 Rev2.0  The MPC8569 Rev2.0 has the correct SNUM table as QE Reference Manual, we must follow it.  However the Rev1.0 silicon need the old SNUM table as workaround due to Rev1.0 silicon SNUM erratum.  So, we support both snum table, and choose the one FDT tell us. And u-boot will fixup FDT according to SPRN_SVR.  Signed-off-by: Liu Yu <yu.liu@freescale.com> Signed-off-by: Dave Liu <daveliu@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | gpio.c | s | 7.9K | 261 | Grant Likely | grant.likely@secretlab.ca | 1323722416 |  | gpio/powerpc: Eliminate duplication of of_get_named_gpio_flags()  A large chunk of qe_pin_request() is unnecessarily cut-and-paste directly from of_get_named_gpio_flags().  This patch cuts out the duplicate code and replaces it with a call to of_get_gpio().  v2: fixed compile error due to missing gpio_to_chip()  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Kumar Gala <galak@kernel.crashing.org>
f | Makefile | g | 268B |  | Anton Vorontsov | avorontsov@ru.mvista.com | 1213114270 |  | powerpc/QE: implement support for the GPIO LIB API  This is needed to access QE GPIOs via Linux GPIO API.  Signed-off-by: Anton Vorontsov <avorontsov@ru.mvista.com> Acked-By: Timur Tabi <timur@freescale.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | ucc_fast.c | s | 10K | 322 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103844 |  | powerpc: various straight conversions from module.h --> export.h  All these files were including module.h just for the basic EXPORT_SYMBOL infrastructure.  We can shift them off to the export.h header which is a way smaller footprint and thus realize some compile time gains.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | qe_ic.c | s | 11K | 431 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/powerpc: Replace custom xlate functions with library functions  This patch converts a number of the powerpc drivers to use the common library of irq_domain xlate functions, dropping a bunch of lines in the process.  v5: - Remove tsi108 changes from patch  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Rob Herring <rob.herring@calxeda.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com> Tested-by: Olof Johansson <olof@lixom.net>
f | qe_io.c | s | 5.4K | 186 | Joe Perches | joe@perches.com | 1307710536 |  | treewide: Convert uses of struct resource to resource_size(ptr)  Several fixes as well where the +1 was missing.  Done via coccinelle scripts like:  @@ struct resource *ptr; @@  - ptr->end - ptr->start + 1 + resource_size(ptr)  and some grep and typing.  Mostly uncompiled, no cross-compilers.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | ucc_slow.c | s | 9.8K | 329 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103844 |  | powerpc: various straight conversions from module.h --> export.h  All these files were including module.h just for the basic EXPORT_SYMBOL infrastructure.  We can shift them off to the export.h header which is a way smaller footprint and thus realize some compile time gains.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | qe_ic.h | s | 2.6K | 89 | Grant Likely | grant.likely@secretlab.ca | 1329253610 |  | irq_domain/powerpc: Use common irq_domain structure instead of irq_host  This patch drops the powerpc-specific irq_host structures and uses the common irq_domain strucutres defined in linux/irqdomain.h.  It also fixes all the users to use the new structure names.  Renaming irq_host to irq_domain has been discussed for a long time, and this patch is a step in the process of generalizing the powerpc virq code to be usable by all architecture.  An astute reader will notice that this patch actually removes the irq_host structure instead of renaming it.  This is because the irq_domain structure already exists in include/linux/irqdomain.h and has the needed data members.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Milton Miller <miltonm@bga.com> Tested-by: Olof Johansson <olof@lixom.net>
f | ucc.c | s | 5.4K | 188 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103844 |  | powerpc: various straight conversions from module.h --> export.h  All these files were including module.h just for the basic EXPORT_SYMBOL infrastructure.  We can shift them off to the export.h header which is a way smaller footprint and thus realize some compile time gains.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | Kconfig | g | 458B |  | Anton Vorontsov | avorontsov@ru.mvista.com | 1230660732 |  | powerpc/qe: Select QE_USB with USB_GADGET_FSL_QE  Boards should know when QE_USB is used, so that they can configure USB clocks and pins.  Another option would be to add 'select QE_USB' into USB_GADGET_FSL_QE, but selects are evil since they don't support dependencies.  While at it, also remove 'host' from the symbol description, since the QE_USB code is used to support the gadget driver as well.  Signed-off-by: Anton Vorontsov <avorontsov@ru.mvista.com> Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
f | usb.c | s | 1.7K | 48 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103838 |  | powerpc: include export.h for files using EXPORT_SYMBOL/THIS_MODULE  Fix failures in powerpc associated with the previously allowed implicit module.h presence that now lead to things like this:  arch/powerpc/mm/mmu_context_hash32.c:76:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL_GPL' arch/powerpc/mm/tlb_hash32.c:48:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' arch/powerpc/kernel/pci_32.c:51:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL_GPL' arch/powerpc/kernel/iomap.c:36:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' arch/powerpc/platforms/44x/canyonlands.c:126:1: error: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' arch/powerpc/kvm/44x.c:168:59: error: 'THIS_MODULE' undeclared (first use in this function)  [with several contibutions from Stephen Rothwell <sfr@canb.auug.org.au>]  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
