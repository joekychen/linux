<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › cpm2.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>cpm2.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Communication Processor Module v2.</span>
<span class="cm"> *</span>
<span class="cm"> * This file contains structures and information for the communication</span>
<span class="cm"> * processor channels found in the dual port RAM or parameter RAM.</span>
<span class="cm"> * All CPM control and status is available through the CPM2 internal</span>
<span class="cm"> * memory map.  See immap_cpm2.h for details.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef __KERNEL__</span>
<span class="cp">#ifndef __CPM2__</span>
<span class="cp">#define __CPM2__</span>

<span class="cp">#include &lt;asm/immap_cpm2.h&gt;</span>
<span class="cp">#include &lt;asm/cpm.h&gt;</span>
<span class="cp">#include &lt;sysdev/fsl_soc.h&gt;</span>

<span class="cm">/* CPM Command register.</span>
<span class="cm">*/</span>
<span class="cp">#define CPM_CR_RST	((uint)0x80000000)</span>
<span class="cp">#define CPM_CR_PAGE	((uint)0x7c000000)</span>
<span class="cp">#define CPM_CR_SBLOCK	((uint)0x03e00000)</span>
<span class="cp">#define CPM_CR_FLG	((uint)0x00010000)</span>
<span class="cp">#define CPM_CR_MCN	((uint)0x00003fc0)</span>
<span class="cp">#define CPM_CR_OPCODE	((uint)0x0000000f)</span>

<span class="cm">/* Device sub-block and page codes.</span>
<span class="cm">*/</span>
<span class="cp">#define CPM_CR_SCC1_SBLOCK	(0x04)</span>
<span class="cp">#define CPM_CR_SCC2_SBLOCK	(0x05)</span>
<span class="cp">#define CPM_CR_SCC3_SBLOCK	(0x06)</span>
<span class="cp">#define CPM_CR_SCC4_SBLOCK	(0x07)</span>
<span class="cp">#define CPM_CR_SMC1_SBLOCK	(0x08)</span>
<span class="cp">#define CPM_CR_SMC2_SBLOCK	(0x09)</span>
<span class="cp">#define CPM_CR_SPI_SBLOCK	(0x0a)</span>
<span class="cp">#define CPM_CR_I2C_SBLOCK	(0x0b)</span>
<span class="cp">#define CPM_CR_TIMER_SBLOCK	(0x0f)</span>
<span class="cp">#define CPM_CR_RAND_SBLOCK	(0x0e)</span>
<span class="cp">#define CPM_CR_FCC1_SBLOCK	(0x10)</span>
<span class="cp">#define CPM_CR_FCC2_SBLOCK	(0x11)</span>
<span class="cp">#define CPM_CR_FCC3_SBLOCK	(0x12)</span>
<span class="cp">#define CPM_CR_IDMA1_SBLOCK	(0x14)</span>
<span class="cp">#define CPM_CR_IDMA2_SBLOCK	(0x15)</span>
<span class="cp">#define CPM_CR_IDMA3_SBLOCK	(0x16)</span>
<span class="cp">#define CPM_CR_IDMA4_SBLOCK	(0x17)</span>
<span class="cp">#define CPM_CR_MCC1_SBLOCK	(0x1c)</span>

<span class="cp">#define CPM_CR_FCC_SBLOCK(x)	(x + 0x10)</span>

<span class="cp">#define CPM_CR_SCC1_PAGE	(0x00)</span>
<span class="cp">#define CPM_CR_SCC2_PAGE	(0x01)</span>
<span class="cp">#define CPM_CR_SCC3_PAGE	(0x02)</span>
<span class="cp">#define CPM_CR_SCC4_PAGE	(0x03)</span>
<span class="cp">#define CPM_CR_SMC1_PAGE	(0x07)</span>
<span class="cp">#define CPM_CR_SMC2_PAGE	(0x08)</span>
<span class="cp">#define CPM_CR_SPI_PAGE		(0x09)</span>
<span class="cp">#define CPM_CR_I2C_PAGE		(0x0a)</span>
<span class="cp">#define CPM_CR_TIMER_PAGE	(0x0a)</span>
<span class="cp">#define CPM_CR_RAND_PAGE	(0x0a)</span>
<span class="cp">#define CPM_CR_FCC1_PAGE	(0x04)</span>
<span class="cp">#define CPM_CR_FCC2_PAGE	(0x05)</span>
<span class="cp">#define CPM_CR_FCC3_PAGE	(0x06)</span>
<span class="cp">#define CPM_CR_IDMA1_PAGE	(0x07)</span>
<span class="cp">#define CPM_CR_IDMA2_PAGE	(0x08)</span>
<span class="cp">#define CPM_CR_IDMA3_PAGE	(0x09)</span>
<span class="cp">#define CPM_CR_IDMA4_PAGE	(0x0a)</span>
<span class="cp">#define CPM_CR_MCC1_PAGE	(0x07)</span>
<span class="cp">#define CPM_CR_MCC2_PAGE	(0x08)</span>

<span class="cp">#define CPM_CR_FCC_PAGE(x)	(x + 0x04)</span>

<span class="cm">/* CPM2-specific opcodes (see cpm.h for common opcodes)</span>
<span class="cm">*/</span>
<span class="cp">#define CPM_CR_START_IDMA	((ushort)0x0009)</span>

<span class="cp">#define mk_cr_cmd(PG, SBC, MCN, OP) \</span>
<span class="cp">	((PG &lt;&lt; 26) | (SBC &lt;&lt; 21) | (MCN &lt;&lt; 6) | OP)</span>

<span class="cm">/* The number of pages of host memory we allocate for CPM.  This is</span>
<span class="cm"> * done early in kernel initialization to get physically contiguous</span>
<span class="cm"> * pages.</span>
<span class="cm"> */</span>
<span class="cp">#define NUM_CPM_HOST_PAGES	2</span>

<span class="cm">/* Export the base address of the communication processor registers</span>
<span class="cm"> * and dual port ram.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="n">cpm_cpm2_t</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">cpmp</span><span class="p">;</span> <span class="cm">/* Pointer to comm processor */</span>

<span class="cp">#define cpm_dpalloc cpm_muram_alloc</span>
<span class="cp">#define cpm_dpfree cpm_muram_free</span>
<span class="cp">#define cpm_dpram_addr cpm_muram_addr</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">cpm2_reset</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* Baud rate generators.</span>
<span class="cm">*/</span>
<span class="cp">#define CPM_BRG_RST		((uint)0x00020000)</span>
<span class="cp">#define CPM_BRG_EN		((uint)0x00010000)</span>
<span class="cp">#define CPM_BRG_EXTC_INT	((uint)0x00000000)</span>
<span class="cp">#define CPM_BRG_EXTC_CLK3_9	((uint)0x00004000)</span>
<span class="cp">#define CPM_BRG_EXTC_CLK5_15	((uint)0x00008000)</span>
<span class="cp">#define CPM_BRG_ATB		((uint)0x00002000)</span>
<span class="cp">#define CPM_BRG_CD_MASK		((uint)0x00001ffe)</span>
<span class="cp">#define CPM_BRG_DIV16		((uint)0x00000001)</span>

<span class="cp">#define CPM2_BRG_INT_CLK	(get_brgfreq())</span>
<span class="cp">#define CPM2_BRG_UART_CLK	(CPM2_BRG_INT_CLK/16)</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">__cpm2_setbrg</span><span class="p">(</span><span class="n">uint</span> <span class="n">brg</span><span class="p">,</span> <span class="n">uint</span> <span class="n">rate</span><span class="p">,</span> <span class="n">uint</span> <span class="n">clk</span><span class="p">,</span> <span class="kt">int</span> <span class="n">div16</span><span class="p">,</span> <span class="kt">int</span> <span class="n">src</span><span class="p">);</span>

<span class="cm">/* This function is used by UARTS, or anything else that uses a 16x</span>
<span class="cm"> * oversampled clock.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">cpm_setbrg</span><span class="p">(</span><span class="n">uint</span> <span class="n">brg</span><span class="p">,</span> <span class="n">uint</span> <span class="n">rate</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__cpm2_setbrg</span><span class="p">(</span><span class="n">brg</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">CPM2_BRG_UART_CLK</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CPM_BRG_EXTC_INT</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* This function is used to set high speed synchronous baud rate</span>
<span class="cm"> * clocks.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">cpm2_fastbrg</span><span class="p">(</span><span class="n">uint</span> <span class="n">brg</span><span class="p">,</span> <span class="n">uint</span> <span class="n">rate</span><span class="p">,</span> <span class="kt">int</span> <span class="n">div16</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__cpm2_setbrg</span><span class="p">(</span><span class="n">brg</span><span class="p">,</span> <span class="n">rate</span><span class="p">,</span> <span class="n">CPM2_BRG_INT_CLK</span><span class="p">,</span> <span class="n">div16</span><span class="p">,</span> <span class="n">CPM_BRG_EXTC_INT</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Parameter RAM offsets from the base.</span>
<span class="cm">*/</span>
<span class="cp">#define PROFF_SCC1		((uint)0x8000)</span>
<span class="cp">#define PROFF_SCC2		((uint)0x8100)</span>
<span class="cp">#define PROFF_SCC3		((uint)0x8200)</span>
<span class="cp">#define PROFF_SCC4		((uint)0x8300)</span>
<span class="cp">#define PROFF_FCC1		((uint)0x8400)</span>
<span class="cp">#define PROFF_FCC2		((uint)0x8500)</span>
<span class="cp">#define PROFF_FCC3		((uint)0x8600)</span>
<span class="cp">#define PROFF_MCC1		((uint)0x8700)</span>
<span class="cp">#define PROFF_SMC1_BASE		((uint)0x87fc)</span>
<span class="cp">#define PROFF_IDMA1_BASE	((uint)0x87fe)</span>
<span class="cp">#define PROFF_MCC2		((uint)0x8800)</span>
<span class="cp">#define PROFF_SMC2_BASE		((uint)0x88fc)</span>
<span class="cp">#define PROFF_IDMA2_BASE	((uint)0x88fe)</span>
<span class="cp">#define PROFF_SPI_BASE		((uint)0x89fc)</span>
<span class="cp">#define PROFF_IDMA3_BASE	((uint)0x89fe)</span>
<span class="cp">#define PROFF_TIMERS		((uint)0x8ae0)</span>
<span class="cp">#define PROFF_REVNUM		((uint)0x8af0)</span>
<span class="cp">#define PROFF_RAND		((uint)0x8af8)</span>
<span class="cp">#define PROFF_I2C_BASE		((uint)0x8afc)</span>
<span class="cp">#define PROFF_IDMA4_BASE	((uint)0x8afe)</span>

<span class="cp">#define PROFF_SCC_SIZE		((uint)0x100)</span>
<span class="cp">#define PROFF_FCC_SIZE		((uint)0x100)</span>
<span class="cp">#define PROFF_SMC_SIZE		((uint)64)</span>

<span class="cm">/* The SMCs are relocated to any of the first eight DPRAM pages.</span>
<span class="cm"> * We will fix these at the first locations of DPRAM, until we</span>
<span class="cm"> * get some microcode patches :-).</span>
<span class="cm"> * The parameter ram space for the SMCs is fifty-some bytes, and</span>
<span class="cm"> * they are required to start on a 64 byte boundary.</span>
<span class="cm"> */</span>
<span class="cp">#define PROFF_SMC1	(0)</span>
<span class="cp">#define PROFF_SMC2	(64)</span>


<span class="cm">/* Define enough so I can at least use the serial port as a UART.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">smc_uart</span> <span class="p">{</span>
	<span class="n">ushort</span>	<span class="n">smc_rbase</span><span class="p">;</span>	<span class="cm">/* Rx Buffer descriptor base address */</span>
	<span class="n">ushort</span>	<span class="n">smc_tbase</span><span class="p">;</span>	<span class="cm">/* Tx Buffer descriptor base address */</span>
	<span class="n">u_char</span>	<span class="n">smc_rfcr</span><span class="p">;</span>	<span class="cm">/* Rx function code */</span>
	<span class="n">u_char</span>	<span class="n">smc_tfcr</span><span class="p">;</span>	<span class="cm">/* Tx function code */</span>
	<span class="n">ushort</span>	<span class="n">smc_mrblr</span><span class="p">;</span>	<span class="cm">/* Max receive buffer length */</span>
	<span class="n">uint</span>	<span class="n">smc_rstate</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">smc_idp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">smc_rbptr</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">smc_ibc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">smc_rxtmp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">smc_tstate</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">smc_tdp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">smc_tbptr</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">smc_tbc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">smc_txtmp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">smc_maxidl</span><span class="p">;</span>	<span class="cm">/* Maximum idle characters */</span>
	<span class="n">ushort</span>	<span class="n">smc_tmpidl</span><span class="p">;</span>	<span class="cm">/* Temporary idle counter */</span>
	<span class="n">ushort</span>	<span class="n">smc_brklen</span><span class="p">;</span>	<span class="cm">/* Last received break length */</span>
	<span class="n">ushort</span>	<span class="n">smc_brkec</span><span class="p">;</span>	<span class="cm">/* rcv&#39;d break condition counter */</span>
	<span class="n">ushort</span>	<span class="n">smc_brkcr</span><span class="p">;</span>	<span class="cm">/* xmt break count register */</span>
	<span class="n">ushort</span>	<span class="n">smc_rmask</span><span class="p">;</span>	<span class="cm">/* Temporary bit mask */</span>
	<span class="n">uint</span>	<span class="n">smc_stmp</span><span class="p">;</span>	<span class="cm">/* SDMA Temp */</span>
<span class="p">}</span> <span class="n">smc_uart_t</span><span class="p">;</span>

<span class="cm">/* SMC uart mode register (Internal memory map).</span>
<span class="cm">*/</span>
<span class="cp">#define SMCMR_REN	((ushort)0x0001)</span>
<span class="cp">#define SMCMR_TEN	((ushort)0x0002)</span>
<span class="cp">#define SMCMR_DM	((ushort)0x000c)</span>
<span class="cp">#define SMCMR_SM_GCI	((ushort)0x0000)</span>
<span class="cp">#define SMCMR_SM_UART	((ushort)0x0020)</span>
<span class="cp">#define SMCMR_SM_TRANS	((ushort)0x0030)</span>
<span class="cp">#define SMCMR_SM_MASK	((ushort)0x0030)</span>
<span class="cp">#define SMCMR_PM_EVEN	((ushort)0x0100)	</span><span class="cm">/* Even parity, else odd */</span><span class="cp"></span>
<span class="cp">#define SMCMR_REVD	SMCMR_PM_EVEN</span>
<span class="cp">#define SMCMR_PEN	((ushort)0x0200)	</span><span class="cm">/* Parity enable */</span><span class="cp"></span>
<span class="cp">#define SMCMR_BS	SMCMR_PEN</span>
<span class="cp">#define SMCMR_SL	((ushort)0x0400)	</span><span class="cm">/* Two stops, else one */</span><span class="cp"></span>
<span class="cp">#define SMCR_CLEN_MASK	((ushort)0x7800)	</span><span class="cm">/* Character length */</span><span class="cp"></span>
<span class="cp">#define smcr_mk_clen(C)	(((C) &lt;&lt; 11) &amp; SMCR_CLEN_MASK)</span>

<span class="cm">/* SMC Event and Mask register.</span>
<span class="cm">*/</span>
<span class="cp">#define SMCM_BRKE       ((unsigned char)0x40)   </span><span class="cm">/* When in UART Mode */</span><span class="cp"></span>
<span class="cp">#define SMCM_BRK        ((unsigned char)0x10)   </span><span class="cm">/* When in UART Mode */</span><span class="cp"></span>
<span class="cp">#define SMCM_TXE	((unsigned char)0x10)</span>
<span class="cp">#define SMCM_BSY	((unsigned char)0x04)</span>
<span class="cp">#define SMCM_TX		((unsigned char)0x02)</span>
<span class="cp">#define SMCM_RX		((unsigned char)0x01)</span>

<span class="cm">/* SCCs.</span>
<span class="cm">*/</span>
<span class="cp">#define SCC_GSMRH_IRP		((uint)0x00040000)</span>
<span class="cp">#define SCC_GSMRH_GDE		((uint)0x00010000)</span>
<span class="cp">#define SCC_GSMRH_TCRC_CCITT	((uint)0x00008000)</span>
<span class="cp">#define SCC_GSMRH_TCRC_BISYNC	((uint)0x00004000)</span>
<span class="cp">#define SCC_GSMRH_TCRC_HDLC	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRH_REVD		((uint)0x00002000)</span>
<span class="cp">#define SCC_GSMRH_TRX		((uint)0x00001000)</span>
<span class="cp">#define SCC_GSMRH_TTX		((uint)0x00000800)</span>
<span class="cp">#define SCC_GSMRH_CDP		((uint)0x00000400)</span>
<span class="cp">#define SCC_GSMRH_CTSP		((uint)0x00000200)</span>
<span class="cp">#define SCC_GSMRH_CDS		((uint)0x00000100)</span>
<span class="cp">#define SCC_GSMRH_CTSS		((uint)0x00000080)</span>
<span class="cp">#define SCC_GSMRH_TFL		((uint)0x00000040)</span>
<span class="cp">#define SCC_GSMRH_RFW		((uint)0x00000020)</span>
<span class="cp">#define SCC_GSMRH_TXSY		((uint)0x00000010)</span>
<span class="cp">#define SCC_GSMRH_SYNL16	((uint)0x0000000c)</span>
<span class="cp">#define SCC_GSMRH_SYNL8		((uint)0x00000008)</span>
<span class="cp">#define SCC_GSMRH_SYNL4		((uint)0x00000004)</span>
<span class="cp">#define SCC_GSMRH_RTSM		((uint)0x00000002)</span>
<span class="cp">#define SCC_GSMRH_RSYN		((uint)0x00000001)</span>

<span class="cp">#define SCC_GSMRL_SIR		((uint)0x80000000)	</span><span class="cm">/* SCC2 only */</span><span class="cp"></span>
<span class="cp">#define SCC_GSMRL_EDGE_NONE	((uint)0x60000000)</span>
<span class="cp">#define SCC_GSMRL_EDGE_NEG	((uint)0x40000000)</span>
<span class="cp">#define SCC_GSMRL_EDGE_POS	((uint)0x20000000)</span>
<span class="cp">#define SCC_GSMRL_EDGE_BOTH	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_TCI		((uint)0x10000000)</span>
<span class="cp">#define SCC_GSMRL_TSNC_3	((uint)0x0c000000)</span>
<span class="cp">#define SCC_GSMRL_TSNC_4	((uint)0x08000000)</span>
<span class="cp">#define SCC_GSMRL_TSNC_14	((uint)0x04000000)</span>
<span class="cp">#define SCC_GSMRL_TSNC_INF	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_RINV		((uint)0x02000000)</span>
<span class="cp">#define SCC_GSMRL_TINV		((uint)0x01000000)</span>
<span class="cp">#define SCC_GSMRL_TPL_128	((uint)0x00c00000)</span>
<span class="cp">#define SCC_GSMRL_TPL_64	((uint)0x00a00000)</span>
<span class="cp">#define SCC_GSMRL_TPL_48	((uint)0x00800000)</span>
<span class="cp">#define SCC_GSMRL_TPL_32	((uint)0x00600000)</span>
<span class="cp">#define SCC_GSMRL_TPL_16	((uint)0x00400000)</span>
<span class="cp">#define SCC_GSMRL_TPL_8		((uint)0x00200000)</span>
<span class="cp">#define SCC_GSMRL_TPL_NONE	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_TPP_ALL1	((uint)0x00180000)</span>
<span class="cp">#define SCC_GSMRL_TPP_01	((uint)0x00100000)</span>
<span class="cp">#define SCC_GSMRL_TPP_10	((uint)0x00080000)</span>
<span class="cp">#define SCC_GSMRL_TPP_ZEROS	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_TEND		((uint)0x00040000)</span>
<span class="cp">#define SCC_GSMRL_TDCR_32	((uint)0x00030000)</span>
<span class="cp">#define SCC_GSMRL_TDCR_16	((uint)0x00020000)</span>
<span class="cp">#define SCC_GSMRL_TDCR_8	((uint)0x00010000)</span>
<span class="cp">#define SCC_GSMRL_TDCR_1	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_RDCR_32	((uint)0x0000c000)</span>
<span class="cp">#define SCC_GSMRL_RDCR_16	((uint)0x00008000)</span>
<span class="cp">#define SCC_GSMRL_RDCR_8	((uint)0x00004000)</span>
<span class="cp">#define SCC_GSMRL_RDCR_1	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_RENC_DFMAN	((uint)0x00003000)</span>
<span class="cp">#define SCC_GSMRL_RENC_MANCH	((uint)0x00002000)</span>
<span class="cp">#define SCC_GSMRL_RENC_FM0	((uint)0x00001000)</span>
<span class="cp">#define SCC_GSMRL_RENC_NRZI	((uint)0x00000800)</span>
<span class="cp">#define SCC_GSMRL_RENC_NRZ	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_TENC_DFMAN	((uint)0x00000600)</span>
<span class="cp">#define SCC_GSMRL_TENC_MANCH	((uint)0x00000400)</span>
<span class="cp">#define SCC_GSMRL_TENC_FM0	((uint)0x00000200)</span>
<span class="cp">#define SCC_GSMRL_TENC_NRZI	((uint)0x00000100)</span>
<span class="cp">#define SCC_GSMRL_TENC_NRZ	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_DIAG_LE	((uint)0x000000c0)	</span><span class="cm">/* Loop and echo */</span><span class="cp"></span>
<span class="cp">#define SCC_GSMRL_DIAG_ECHO	((uint)0x00000080)</span>
<span class="cp">#define SCC_GSMRL_DIAG_LOOP	((uint)0x00000040)</span>
<span class="cp">#define SCC_GSMRL_DIAG_NORM	((uint)0x00000000)</span>
<span class="cp">#define SCC_GSMRL_ENR		((uint)0x00000020)</span>
<span class="cp">#define SCC_GSMRL_ENT		((uint)0x00000010)</span>
<span class="cp">#define SCC_GSMRL_MODE_ENET	((uint)0x0000000c)</span>
<span class="cp">#define SCC_GSMRL_MODE_DDCMP	((uint)0x00000009)</span>
<span class="cp">#define SCC_GSMRL_MODE_BISYNC	((uint)0x00000008)</span>
<span class="cp">#define SCC_GSMRL_MODE_V14	((uint)0x00000007)</span>
<span class="cp">#define SCC_GSMRL_MODE_AHDLC	((uint)0x00000006)</span>
<span class="cp">#define SCC_GSMRL_MODE_PROFIBUS	((uint)0x00000005)</span>
<span class="cp">#define SCC_GSMRL_MODE_UART	((uint)0x00000004)</span>
<span class="cp">#define SCC_GSMRL_MODE_SS7	((uint)0x00000003)</span>
<span class="cp">#define SCC_GSMRL_MODE_ATALK	((uint)0x00000002)</span>
<span class="cp">#define SCC_GSMRL_MODE_HDLC	((uint)0x00000000)</span>

<span class="cp">#define SCC_TODR_TOD		((ushort)0x8000)</span>

<span class="cm">/* SCC Event and Mask register.</span>
<span class="cm">*/</span>
<span class="cp">#define SCCM_TXE	((unsigned char)0x10)</span>
<span class="cp">#define SCCM_BSY	((unsigned char)0x04)</span>
<span class="cp">#define SCCM_TX		((unsigned char)0x02)</span>
<span class="cp">#define SCCM_RX		((unsigned char)0x01)</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">scc_param</span> <span class="p">{</span>
	<span class="n">ushort</span>	<span class="n">scc_rbase</span><span class="p">;</span>	<span class="cm">/* Rx Buffer descriptor base address */</span>
	<span class="n">ushort</span>	<span class="n">scc_tbase</span><span class="p">;</span>	<span class="cm">/* Tx Buffer descriptor base address */</span>
	<span class="n">u_char</span>	<span class="n">scc_rfcr</span><span class="p">;</span>	<span class="cm">/* Rx function code */</span>
	<span class="n">u_char</span>	<span class="n">scc_tfcr</span><span class="p">;</span>	<span class="cm">/* Tx function code */</span>
	<span class="n">ushort</span>	<span class="n">scc_mrblr</span><span class="p">;</span>	<span class="cm">/* Max receive buffer length */</span>
	<span class="n">uint</span>	<span class="n">scc_rstate</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_idp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">scc_rbptr</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">scc_ibc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_rxtmp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_tstate</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_tdp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">scc_tbptr</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">scc_tbc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_txtmp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_rcrc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">scc_tcrc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
<span class="p">}</span> <span class="n">sccp_t</span><span class="p">;</span>

<span class="cm">/* Function code bits.</span>
<span class="cm">*/</span>
<span class="cp">#define SCC_EB	((u_char) 0x10)	</span><span class="cm">/* Set big endian byte order */</span><span class="cp"></span>
<span class="cp">#define SCC_GBL	((u_char) 0x20) </span><span class="cm">/* Snooping enabled */</span><span class="cp"></span>

<span class="cm">/* CPM Ethernet through SCC1.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">scc_enet</span> <span class="p">{</span>
	<span class="n">sccp_t</span>	<span class="n">sen_genscc</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">sen_cpres</span><span class="p">;</span>	<span class="cm">/* Preset CRC */</span>
	<span class="n">uint</span>	<span class="n">sen_cmask</span><span class="p">;</span>	<span class="cm">/* Constant mask for CRC */</span>
	<span class="n">uint</span>	<span class="n">sen_crcec</span><span class="p">;</span>	<span class="cm">/* CRC Error counter */</span>
	<span class="n">uint</span>	<span class="n">sen_alec</span><span class="p">;</span>	<span class="cm">/* alignment error counter */</span>
	<span class="n">uint</span>	<span class="n">sen_disfc</span><span class="p">;</span>	<span class="cm">/* discard frame counter */</span>
	<span class="n">ushort</span>	<span class="n">sen_pads</span><span class="p">;</span>	<span class="cm">/* Tx short frame pad character */</span>
	<span class="n">ushort</span>	<span class="n">sen_retlim</span><span class="p">;</span>	<span class="cm">/* Retry limit threshold */</span>
	<span class="n">ushort</span>	<span class="n">sen_retcnt</span><span class="p">;</span>	<span class="cm">/* Retry limit counter */</span>
	<span class="n">ushort</span>	<span class="n">sen_maxflr</span><span class="p">;</span>	<span class="cm">/* maximum frame length register */</span>
	<span class="n">ushort</span>	<span class="n">sen_minflr</span><span class="p">;</span>	<span class="cm">/* minimum frame length register */</span>
	<span class="n">ushort</span>	<span class="n">sen_maxd1</span><span class="p">;</span>	<span class="cm">/* maximum DMA1 length */</span>
	<span class="n">ushort</span>	<span class="n">sen_maxd2</span><span class="p">;</span>	<span class="cm">/* maximum DMA2 length */</span>
	<span class="n">ushort</span>	<span class="n">sen_maxd</span><span class="p">;</span>	<span class="cm">/* Rx max DMA */</span>
	<span class="n">ushort</span>	<span class="n">sen_dmacnt</span><span class="p">;</span>	<span class="cm">/* Rx DMA counter */</span>
	<span class="n">ushort</span>	<span class="n">sen_maxb</span><span class="p">;</span>	<span class="cm">/* Max BD byte count */</span>
	<span class="n">ushort</span>	<span class="n">sen_gaddr1</span><span class="p">;</span>	<span class="cm">/* Group address filter */</span>
	<span class="n">ushort</span>	<span class="n">sen_gaddr2</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_gaddr3</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_gaddr4</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf0data0</span><span class="p">;</span>	<span class="cm">/* Save area 0 - current frame */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf0data1</span><span class="p">;</span>	<span class="cm">/* Save area 1 - current frame */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf0rba</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf0crc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">sen_tbuf0bcnt</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">sen_paddrh</span><span class="p">;</span>	<span class="cm">/* physical address (MSB) */</span>
	<span class="n">ushort</span>	<span class="n">sen_paddrm</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_paddrl</span><span class="p">;</span>	<span class="cm">/* physical address (LSB) */</span>
	<span class="n">ushort</span>	<span class="n">sen_pper</span><span class="p">;</span>	<span class="cm">/* persistence */</span>
	<span class="n">ushort</span>	<span class="n">sen_rfbdptr</span><span class="p">;</span>	<span class="cm">/* Rx first BD pointer */</span>
	<span class="n">ushort</span>	<span class="n">sen_tfbdptr</span><span class="p">;</span>	<span class="cm">/* Tx first BD pointer */</span>
	<span class="n">ushort</span>	<span class="n">sen_tlbdptr</span><span class="p">;</span>	<span class="cm">/* Tx last BD pointer */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf1data0</span><span class="p">;</span>	<span class="cm">/* Save area 0 - current frame */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf1data1</span><span class="p">;</span>	<span class="cm">/* Save area 1 - current frame */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf1rba</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">sen_tbuf1crc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">sen_tbuf1bcnt</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">sen_txlen</span><span class="p">;</span>	<span class="cm">/* Tx Frame length counter */</span>
	<span class="n">ushort</span>	<span class="n">sen_iaddr1</span><span class="p">;</span>	<span class="cm">/* Individual address filter */</span>
	<span class="n">ushort</span>	<span class="n">sen_iaddr2</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_iaddr3</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_iaddr4</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_boffcnt</span><span class="p">;</span>	<span class="cm">/* Backoff counter */</span>

	<span class="cm">/* NOTE: Some versions of the manual have the following items</span>
<span class="cm">	 * incorrectly documented.  Below is the proper order.</span>
<span class="cm">	 */</span>
	<span class="n">ushort</span>	<span class="n">sen_taddrh</span><span class="p">;</span>	<span class="cm">/* temp address (MSB) */</span>
	<span class="n">ushort</span>	<span class="n">sen_taddrm</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">sen_taddrl</span><span class="p">;</span>	<span class="cm">/* temp address (LSB) */</span>
<span class="p">}</span> <span class="n">scc_enet_t</span><span class="p">;</span>


<span class="cm">/* SCC Event register as used by Ethernet.</span>
<span class="cm">*/</span>
<span class="cp">#define SCCE_ENET_GRA	((ushort)0x0080)	</span><span class="cm">/* Graceful stop complete */</span><span class="cp"></span>
<span class="cp">#define SCCE_ENET_TXE	((ushort)0x0010)	</span><span class="cm">/* Transmit Error */</span><span class="cp"></span>
<span class="cp">#define SCCE_ENET_RXF	((ushort)0x0008)	</span><span class="cm">/* Full frame received */</span><span class="cp"></span>
<span class="cp">#define SCCE_ENET_BSY	((ushort)0x0004)	</span><span class="cm">/* All incoming buffers full */</span><span class="cp"></span>
<span class="cp">#define SCCE_ENET_TXB	((ushort)0x0002)	</span><span class="cm">/* A buffer was transmitted */</span><span class="cp"></span>
<span class="cp">#define SCCE_ENET_RXB	((ushort)0x0001)	</span><span class="cm">/* A buffer was received */</span><span class="cp"></span>

<span class="cm">/* SCC Mode Register (PSMR) as used by Ethernet.</span>
<span class="cm">*/</span>
<span class="cp">#define SCC_PSMR_HBC	((ushort)0x8000)	</span><span class="cm">/* Enable heartbeat */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_FC	((ushort)0x4000)	</span><span class="cm">/* Force collision */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_RSH	((ushort)0x2000)	</span><span class="cm">/* Receive short frames */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_IAM	((ushort)0x1000)	</span><span class="cm">/* Check individual hash */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_ENCRC	((ushort)0x0800)	</span><span class="cm">/* Ethernet CRC mode */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_PRO	((ushort)0x0200)	</span><span class="cm">/* Promiscuous mode */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_BRO	((ushort)0x0100)	</span><span class="cm">/* Catch broadcast pkts */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_SBT	((ushort)0x0080)	</span><span class="cm">/* Special backoff timer */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_LPB	((ushort)0x0040)	</span><span class="cm">/* Set Loopback mode */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_SIP	((ushort)0x0020)	</span><span class="cm">/* Sample Input Pins */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_LCW	((ushort)0x0010)	</span><span class="cm">/* Late collision window */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_NIB22	((ushort)0x000a)	</span><span class="cm">/* Start frame search */</span><span class="cp"></span>
<span class="cp">#define SCC_PSMR_FDE	((ushort)0x0001)	</span><span class="cm">/* Full duplex enable */</span><span class="cp"></span>

<span class="cm">/* SCC as UART</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">scc_uart</span> <span class="p">{</span>
	<span class="n">sccp_t</span>	<span class="n">scc_genscc</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">scc_res1</span><span class="p">;</span>	<span class="cm">/* Reserved */</span>
	<span class="n">uint</span>	<span class="n">scc_res2</span><span class="p">;</span>	<span class="cm">/* Reserved */</span>
	<span class="n">ushort</span>	<span class="n">scc_maxidl</span><span class="p">;</span>	<span class="cm">/* Maximum idle chars */</span>
	<span class="n">ushort</span>	<span class="n">scc_idlc</span><span class="p">;</span>	<span class="cm">/* temp idle counter */</span>
	<span class="n">ushort</span>	<span class="n">scc_brkcr</span><span class="p">;</span>	<span class="cm">/* Break count register */</span>
	<span class="n">ushort</span>	<span class="n">scc_parec</span><span class="p">;</span>	<span class="cm">/* receive parity error counter */</span>
	<span class="n">ushort</span>	<span class="n">scc_frmec</span><span class="p">;</span>	<span class="cm">/* receive framing error counter */</span>
	<span class="n">ushort</span>	<span class="n">scc_nosec</span><span class="p">;</span>	<span class="cm">/* receive noise counter */</span>
	<span class="n">ushort</span>	<span class="n">scc_brkec</span><span class="p">;</span>	<span class="cm">/* receive break condition counter */</span>
	<span class="n">ushort</span>	<span class="n">scc_brkln</span><span class="p">;</span>	<span class="cm">/* last received break length */</span>
	<span class="n">ushort</span>	<span class="n">scc_uaddr1</span><span class="p">;</span>	<span class="cm">/* UART address character 1 */</span>
	<span class="n">ushort</span>	<span class="n">scc_uaddr2</span><span class="p">;</span>	<span class="cm">/* UART address character 2 */</span>
	<span class="n">ushort</span>	<span class="n">scc_rtemp</span><span class="p">;</span>	<span class="cm">/* Temp storage */</span>
	<span class="n">ushort</span>	<span class="n">scc_toseq</span><span class="p">;</span>	<span class="cm">/* Transmit out of sequence char */</span>
	<span class="n">ushort</span>	<span class="n">scc_char1</span><span class="p">;</span>	<span class="cm">/* control character 1 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char2</span><span class="p">;</span>	<span class="cm">/* control character 2 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char3</span><span class="p">;</span>	<span class="cm">/* control character 3 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char4</span><span class="p">;</span>	<span class="cm">/* control character 4 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char5</span><span class="p">;</span>	<span class="cm">/* control character 5 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char6</span><span class="p">;</span>	<span class="cm">/* control character 6 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char7</span><span class="p">;</span>	<span class="cm">/* control character 7 */</span>
	<span class="n">ushort</span>	<span class="n">scc_char8</span><span class="p">;</span>	<span class="cm">/* control character 8 */</span>
	<span class="n">ushort</span>	<span class="n">scc_rccm</span><span class="p">;</span>	<span class="cm">/* receive control character mask */</span>
	<span class="n">ushort</span>	<span class="n">scc_rccr</span><span class="p">;</span>	<span class="cm">/* receive control character register */</span>
	<span class="n">ushort</span>	<span class="n">scc_rlbc</span><span class="p">;</span>	<span class="cm">/* receive last break character */</span>
<span class="p">}</span> <span class="n">scc_uart_t</span><span class="p">;</span>

<span class="cm">/* SCC Event and Mask registers when it is used as a UART.</span>
<span class="cm">*/</span>
<span class="cp">#define UART_SCCM_GLR		((ushort)0x1000)</span>
<span class="cp">#define UART_SCCM_GLT		((ushort)0x0800)</span>
<span class="cp">#define UART_SCCM_AB		((ushort)0x0200)</span>
<span class="cp">#define UART_SCCM_IDL		((ushort)0x0100)</span>
<span class="cp">#define UART_SCCM_GRA		((ushort)0x0080)</span>
<span class="cp">#define UART_SCCM_BRKE		((ushort)0x0040)</span>
<span class="cp">#define UART_SCCM_BRKS		((ushort)0x0020)</span>
<span class="cp">#define UART_SCCM_CCR		((ushort)0x0008)</span>
<span class="cp">#define UART_SCCM_BSY		((ushort)0x0004)</span>
<span class="cp">#define UART_SCCM_TX		((ushort)0x0002)</span>
<span class="cp">#define UART_SCCM_RX		((ushort)0x0001)</span>

<span class="cm">/* The SCC PSMR when used as a UART.</span>
<span class="cm">*/</span>
<span class="cp">#define SCU_PSMR_FLC		((ushort)0x8000)</span>
<span class="cp">#define SCU_PSMR_SL		((ushort)0x4000)</span>
<span class="cp">#define SCU_PSMR_CL		((ushort)0x3000)</span>
<span class="cp">#define SCU_PSMR_UM		((ushort)0x0c00)</span>
<span class="cp">#define SCU_PSMR_FRZ		((ushort)0x0200)</span>
<span class="cp">#define SCU_PSMR_RZS		((ushort)0x0100)</span>
<span class="cp">#define SCU_PSMR_SYN		((ushort)0x0080)</span>
<span class="cp">#define SCU_PSMR_DRT		((ushort)0x0040)</span>
<span class="cp">#define SCU_PSMR_PEN		((ushort)0x0010)</span>
<span class="cp">#define SCU_PSMR_RPM		((ushort)0x000c)</span>
<span class="cp">#define SCU_PSMR_REVP		((ushort)0x0008)</span>
<span class="cp">#define SCU_PSMR_TPM		((ushort)0x0003)</span>
<span class="cp">#define SCU_PSMR_TEVP		((ushort)0x0002)</span>

<span class="cm">/* CPM Transparent mode SCC.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">scc_trans</span> <span class="p">{</span>
	<span class="n">sccp_t</span>	<span class="n">st_genscc</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">st_cpres</span><span class="p">;</span>	<span class="cm">/* Preset CRC */</span>
	<span class="n">uint</span>	<span class="n">st_cmask</span><span class="p">;</span>	<span class="cm">/* Constant mask for CRC */</span>
<span class="p">}</span> <span class="n">scc_trans_t</span><span class="p">;</span>

<span class="cm">/* How about some FCCs.....</span>
<span class="cm">*/</span>
<span class="cp">#define FCC_GFMR_DIAG_NORM	((uint)0x00000000)</span>
<span class="cp">#define FCC_GFMR_DIAG_LE	((uint)0x40000000)</span>
<span class="cp">#define FCC_GFMR_DIAG_AE	((uint)0x80000000)</span>
<span class="cp">#define FCC_GFMR_DIAG_ALE	((uint)0xc0000000)</span>
<span class="cp">#define FCC_GFMR_TCI		((uint)0x20000000)</span>
<span class="cp">#define FCC_GFMR_TRX		((uint)0x10000000)</span>
<span class="cp">#define FCC_GFMR_TTX		((uint)0x08000000)</span>
<span class="cp">#define FCC_GFMR_TTX		((uint)0x08000000)</span>
<span class="cp">#define FCC_GFMR_CDP		((uint)0x04000000)</span>
<span class="cp">#define FCC_GFMR_CTSP		((uint)0x02000000)</span>
<span class="cp">#define FCC_GFMR_CDS		((uint)0x01000000)</span>
<span class="cp">#define FCC_GFMR_CTSS		((uint)0x00800000)</span>
<span class="cp">#define FCC_GFMR_SYNL_NONE	((uint)0x00000000)</span>
<span class="cp">#define FCC_GFMR_SYNL_AUTO	((uint)0x00004000)</span>
<span class="cp">#define FCC_GFMR_SYNL_8		((uint)0x00008000)</span>
<span class="cp">#define FCC_GFMR_SYNL_16	((uint)0x0000c000)</span>
<span class="cp">#define FCC_GFMR_RTSM		((uint)0x00002000)</span>
<span class="cp">#define FCC_GFMR_RENC_NRZ	((uint)0x00000000)</span>
<span class="cp">#define FCC_GFMR_RENC_NRZI	((uint)0x00000800)</span>
<span class="cp">#define FCC_GFMR_REVD		((uint)0x00000400)</span>
<span class="cp">#define FCC_GFMR_TENC_NRZ	((uint)0x00000000)</span>
<span class="cp">#define FCC_GFMR_TENC_NRZI	((uint)0x00000100)</span>
<span class="cp">#define FCC_GFMR_TCRC_16	((uint)0x00000000)</span>
<span class="cp">#define FCC_GFMR_TCRC_32	((uint)0x00000080)</span>
<span class="cp">#define FCC_GFMR_ENR		((uint)0x00000020)</span>
<span class="cp">#define FCC_GFMR_ENT		((uint)0x00000010)</span>
<span class="cp">#define FCC_GFMR_MODE_ENET	((uint)0x0000000c)</span>
<span class="cp">#define FCC_GFMR_MODE_ATM	((uint)0x0000000a)</span>
<span class="cp">#define FCC_GFMR_MODE_HDLC	((uint)0x00000000)</span>

<span class="cm">/* Generic FCC parameter ram.</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fcc_param</span> <span class="p">{</span>
	<span class="n">ushort</span>	<span class="n">fcc_riptr</span><span class="p">;</span>	<span class="cm">/* Rx Internal temp pointer */</span>
	<span class="n">ushort</span>	<span class="n">fcc_tiptr</span><span class="p">;</span>	<span class="cm">/* Tx Internal temp pointer */</span>
	<span class="n">ushort</span>	<span class="n">fcc_res1</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fcc_mrblr</span><span class="p">;</span>	<span class="cm">/* Max receive buffer length, mod 32 bytes */</span>
	<span class="n">uint</span>	<span class="n">fcc_rstate</span><span class="p">;</span>	<span class="cm">/* Upper byte is Func code, must be set */</span>
	<span class="n">uint</span>	<span class="n">fcc_rbase</span><span class="p">;</span>	<span class="cm">/* Receive BD base */</span>
	<span class="n">ushort</span>	<span class="n">fcc_rbdstat</span><span class="p">;</span>	<span class="cm">/* RxBD status */</span>
	<span class="n">ushort</span>	<span class="n">fcc_rbdlen</span><span class="p">;</span>	<span class="cm">/* RxBD down counter */</span>
	<span class="n">uint</span>	<span class="n">fcc_rdptr</span><span class="p">;</span>	<span class="cm">/* RxBD internal data pointer */</span>
	<span class="n">uint</span>	<span class="n">fcc_tstate</span><span class="p">;</span>	<span class="cm">/* Upper byte is Func code, must be set */</span>
	<span class="n">uint</span>	<span class="n">fcc_tbase</span><span class="p">;</span>	<span class="cm">/* Transmit BD base */</span>
	<span class="n">ushort</span>	<span class="n">fcc_tbdstat</span><span class="p">;</span>	<span class="cm">/* TxBD status */</span>
	<span class="n">ushort</span>	<span class="n">fcc_tbdlen</span><span class="p">;</span>	<span class="cm">/* TxBD down counter */</span>
	<span class="n">uint</span>	<span class="n">fcc_tdptr</span><span class="p">;</span>	<span class="cm">/* TxBD internal data pointer */</span>
	<span class="n">uint</span>	<span class="n">fcc_rbptr</span><span class="p">;</span>	<span class="cm">/* Rx BD Internal buf pointer */</span>
	<span class="n">uint</span>	<span class="n">fcc_tbptr</span><span class="p">;</span>	<span class="cm">/* Tx BD Internal buf pointer */</span>
	<span class="n">uint</span>	<span class="n">fcc_rcrc</span><span class="p">;</span>	<span class="cm">/* Rx temp CRC */</span>
	<span class="n">uint</span>	<span class="n">fcc_res2</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">fcc_tcrc</span><span class="p">;</span>	<span class="cm">/* Tx temp CRC */</span>
<span class="p">}</span> <span class="n">fccp_t</span><span class="p">;</span>


<span class="cm">/* Ethernet controller through FCC.</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">fcc_enet</span> <span class="p">{</span>
	<span class="n">fccp_t</span>	<span class="n">fen_genfcc</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">fen_statbuf</span><span class="p">;</span>	<span class="cm">/* Internal status buffer */</span>
	<span class="n">uint</span>	<span class="n">fen_camptr</span><span class="p">;</span>	<span class="cm">/* CAM address */</span>
	<span class="n">uint</span>	<span class="n">fen_cmask</span><span class="p">;</span>	<span class="cm">/* Constant mask for CRC */</span>
	<span class="n">uint</span>	<span class="n">fen_cpres</span><span class="p">;</span>	<span class="cm">/* Preset CRC */</span>
	<span class="n">uint</span>	<span class="n">fen_crcec</span><span class="p">;</span>	<span class="cm">/* CRC Error counter */</span>
	<span class="n">uint</span>	<span class="n">fen_alec</span><span class="p">;</span>	<span class="cm">/* alignment error counter */</span>
	<span class="n">uint</span>	<span class="n">fen_disfc</span><span class="p">;</span>	<span class="cm">/* discard frame counter */</span>
	<span class="n">ushort</span>	<span class="n">fen_retlim</span><span class="p">;</span>	<span class="cm">/* Retry limit */</span>
	<span class="n">ushort</span>	<span class="n">fen_retcnt</span><span class="p">;</span>	<span class="cm">/* Retry counter */</span>
	<span class="n">ushort</span>	<span class="n">fen_pper</span><span class="p">;</span>	<span class="cm">/* Persistence */</span>
	<span class="n">ushort</span>	<span class="n">fen_boffcnt</span><span class="p">;</span>	<span class="cm">/* backoff counter */</span>
	<span class="n">uint</span>	<span class="n">fen_gaddrh</span><span class="p">;</span>	<span class="cm">/* Group address filter, high 32-bits */</span>
	<span class="n">uint</span>	<span class="n">fen_gaddrl</span><span class="p">;</span>	<span class="cm">/* Group address filter, low 32-bits */</span>
	<span class="n">ushort</span>	<span class="n">fen_tfcstat</span><span class="p">;</span>	<span class="cm">/* out of sequence TxBD */</span>
	<span class="n">ushort</span>	<span class="n">fen_tfclen</span><span class="p">;</span>
	<span class="n">uint</span>	<span class="n">fen_tfcptr</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fen_mflr</span><span class="p">;</span>	<span class="cm">/* Maximum frame length (1518) */</span>
	<span class="n">ushort</span>	<span class="n">fen_paddrh</span><span class="p">;</span>	<span class="cm">/* MAC address */</span>
	<span class="n">ushort</span>	<span class="n">fen_paddrm</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fen_paddrl</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fen_ibdcount</span><span class="p">;</span>	<span class="cm">/* Internal BD counter */</span>
	<span class="n">ushort</span>	<span class="n">fen_ibdstart</span><span class="p">;</span>	<span class="cm">/* Internal BD start pointer */</span>
	<span class="n">ushort</span>	<span class="n">fen_ibdend</span><span class="p">;</span>	<span class="cm">/* Internal BD end pointer */</span>
	<span class="n">ushort</span>	<span class="n">fen_txlen</span><span class="p">;</span>	<span class="cm">/* Internal Tx frame length counter */</span>
	<span class="n">uint</span>	<span class="n">fen_ibdbase</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span> <span class="cm">/* Internal use */</span>
	<span class="n">uint</span>	<span class="n">fen_iaddrh</span><span class="p">;</span>	<span class="cm">/* Individual address filter */</span>
	<span class="n">uint</span>	<span class="n">fen_iaddrl</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fen_minflr</span><span class="p">;</span>	<span class="cm">/* Minimum frame length (64) */</span>
	<span class="n">ushort</span>	<span class="n">fen_taddrh</span><span class="p">;</span>	<span class="cm">/* Filter transfer MAC address */</span>
	<span class="n">ushort</span>	<span class="n">fen_taddrm</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fen_taddrl</span><span class="p">;</span>
	<span class="n">ushort</span>	<span class="n">fen_padptr</span><span class="p">;</span>	<span class="cm">/* Pointer to pad byte buffer */</span>
	<span class="n">ushort</span>	<span class="n">fen_cftype</span><span class="p">;</span>	<span class="cm">/* control frame type */</span>
	<span class="n">ushort</span>	<span class="n">fen_cfrange</span><span class="p">;</span>	<span class="cm">/* control frame range */</span>
	<span class="n">ushort</span>	<span class="n">fen_maxb</span><span class="p">;</span>	<span class="cm">/* maximum BD count */</span>
	<span class="n">ushort</span>	<span class="n">fen_maxd1</span><span class="p">;</span>	<span class="cm">/* Max DMA1 length (1520) */</span>
	<span class="n">ushort</span>	<span class="n">fen_maxd2</span><span class="p">;</span>	<span class="cm">/* Max DMA2 length (1520) */</span>
	<span class="n">ushort</span>	<span class="n">fen_maxd</span><span class="p">;</span>	<span class="cm">/* internal max DMA count */</span>
	<span class="n">ushort</span>	<span class="n">fen_dmacnt</span><span class="p">;</span>	<span class="cm">/* internal DMA counter */</span>
	<span class="n">uint</span>	<span class="n">fen_octc</span><span class="p">;</span>	<span class="cm">/* Total octect counter */</span>
	<span class="n">uint</span>	<span class="n">fen_colc</span><span class="p">;</span>	<span class="cm">/* Total collision counter */</span>
	<span class="n">uint</span>	<span class="n">fen_broc</span><span class="p">;</span>	<span class="cm">/* Total broadcast packet counter */</span>
	<span class="n">uint</span>	<span class="n">fen_mulc</span><span class="p">;</span>	<span class="cm">/* Total multicast packet count */</span>
	<span class="n">uint</span>	<span class="n">fen_uspc</span><span class="p">;</span>	<span class="cm">/* Total packets &lt; 64 bytes */</span>
	<span class="n">uint</span>	<span class="n">fen_frgc</span><span class="p">;</span>	<span class="cm">/* Total packets &lt; 64 bytes with errors */</span>
	<span class="n">uint</span>	<span class="n">fen_ospc</span><span class="p">;</span>	<span class="cm">/* Total packets &gt; 1518 */</span>
	<span class="n">uint</span>	<span class="n">fen_jbrc</span><span class="p">;</span>	<span class="cm">/* Total packets &gt; 1518 with errors */</span>
	<span class="n">uint</span>	<span class="n">fen_p64c</span><span class="p">;</span>	<span class="cm">/* Total packets == 64 bytes */</span>
	<span class="n">uint</span>	<span class="n">fen_p65c</span><span class="p">;</span>	<span class="cm">/* Total packets 64 &lt; bytes &lt;= 127 */</span>
	<span class="n">uint</span>	<span class="n">fen_p128c</span><span class="p">;</span>	<span class="cm">/* Total packets 127 &lt; bytes &lt;= 255 */</span>
	<span class="n">uint</span>	<span class="n">fen_p256c</span><span class="p">;</span>	<span class="cm">/* Total packets 256 &lt; bytes &lt;= 511 */</span>
	<span class="n">uint</span>	<span class="n">fen_p512c</span><span class="p">;</span>	<span class="cm">/* Total packets 512 &lt; bytes &lt;= 1023 */</span>
	<span class="n">uint</span>	<span class="n">fen_p1024c</span><span class="p">;</span>	<span class="cm">/* Total packets 1024 &lt; bytes &lt;= 1518 */</span>
	<span class="n">uint</span>	<span class="n">fen_cambuf</span><span class="p">;</span>	<span class="cm">/* Internal CAM buffer poiner */</span>
	<span class="n">ushort</span>	<span class="n">fen_rfthr</span><span class="p">;</span>	<span class="cm">/* Received frames threshold */</span>
	<span class="n">ushort</span>	<span class="n">fen_rfcnt</span><span class="p">;</span>	<span class="cm">/* Received frames count */</span>
<span class="p">}</span> <span class="n">fcc_enet_t</span><span class="p">;</span>

<span class="cm">/* FCC Event/Mask register as used by Ethernet.</span>
<span class="cm">*/</span>
<span class="cp">#define FCC_ENET_GRA	((ushort)0x0080)	</span><span class="cm">/* Graceful stop complete */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_RXC	((ushort)0x0040)	</span><span class="cm">/* Control Frame Received */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_TXC	((ushort)0x0020)	</span><span class="cm">/* Out of seq. Tx sent */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_TXE	((ushort)0x0010)	</span><span class="cm">/* Transmit Error */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_RXF	((ushort)0x0008)	</span><span class="cm">/* Full frame received */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_BSY	((ushort)0x0004)	</span><span class="cm">/* Busy.  Rx Frame dropped */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_TXB	((ushort)0x0002)	</span><span class="cm">/* A buffer was transmitted */</span><span class="cp"></span>
<span class="cp">#define FCC_ENET_RXB	((ushort)0x0001)	</span><span class="cm">/* A buffer was received */</span><span class="cp"></span>

<span class="cm">/* FCC Mode Register (FPSMR) as used by Ethernet.</span>
<span class="cm">*/</span>
<span class="cp">#define FCC_PSMR_HBC	((uint)0x80000000)	</span><span class="cm">/* Enable heartbeat */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_FC	((uint)0x40000000)	</span><span class="cm">/* Force Collision */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_SBT	((uint)0x20000000)	</span><span class="cm">/* Stop backoff timer */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_LPB	((uint)0x10000000)	</span><span class="cm">/* Local protect. 1 = FDX */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_LCW	((uint)0x08000000)	</span><span class="cm">/* Late collision select */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_FDE	((uint)0x04000000)	</span><span class="cm">/* Full Duplex Enable */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_MON	((uint)0x02000000)	</span><span class="cm">/* RMON Enable */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_PRO	((uint)0x00400000)	</span><span class="cm">/* Promiscuous Enable */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_FCE	((uint)0x00200000)	</span><span class="cm">/* Flow Control Enable */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_RSH	((uint)0x00100000)	</span><span class="cm">/* Receive Short Frames */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_CAM	((uint)0x00000400)	</span><span class="cm">/* CAM enable */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_BRO	((uint)0x00000200)	</span><span class="cm">/* Broadcast pkt discard */</span><span class="cp"></span>
<span class="cp">#define FCC_PSMR_ENCRC	((uint)0x00000080)	</span><span class="cm">/* Use 32-bit CRC */</span><span class="cp"></span>

<span class="cm">/* IIC parameter RAM.</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">iic</span> <span class="p">{</span>
	<span class="n">ushort</span>	<span class="n">iic_rbase</span><span class="p">;</span>	<span class="cm">/* Rx Buffer descriptor base address */</span>
	<span class="n">ushort</span>	<span class="n">iic_tbase</span><span class="p">;</span>	<span class="cm">/* Tx Buffer descriptor base address */</span>
	<span class="n">u_char</span>	<span class="n">iic_rfcr</span><span class="p">;</span>	<span class="cm">/* Rx function code */</span>
	<span class="n">u_char</span>	<span class="n">iic_tfcr</span><span class="p">;</span>	<span class="cm">/* Tx function code */</span>
	<span class="n">ushort</span>	<span class="n">iic_mrblr</span><span class="p">;</span>	<span class="cm">/* Max receive buffer length */</span>
	<span class="n">uint</span>	<span class="n">iic_rstate</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">iic_rdp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">iic_rbptr</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">iic_rbc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">iic_rxtmp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">iic_tstate</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">iic_tdp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">iic_tbptr</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">ushort</span>	<span class="n">iic_tbc</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
	<span class="n">uint</span>	<span class="n">iic_txtmp</span><span class="p">;</span>	<span class="cm">/* Internal */</span>
<span class="p">}</span> <span class="n">iic_t</span><span class="p">;</span>

<span class="cm">/* IDMA parameter RAM</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">idma</span> <span class="p">{</span>
	<span class="n">ushort</span> <span class="n">ibase</span><span class="p">;</span>		<span class="cm">/* IDMA buffer descriptor table base address */</span>
	<span class="n">ushort</span> <span class="n">dcm</span><span class="p">;</span>		<span class="cm">/* DMA channel mode */</span>
	<span class="n">ushort</span> <span class="n">ibdptr</span><span class="p">;</span>		<span class="cm">/* IDMA current buffer descriptor pointer */</span>
	<span class="n">ushort</span> <span class="n">dpr_buf</span><span class="p">;</span>		<span class="cm">/* IDMA transfer buffer base address */</span>
	<span class="n">ushort</span> <span class="n">buf_inv</span><span class="p">;</span>		<span class="cm">/* internal buffer inventory */</span>
	<span class="n">ushort</span> <span class="n">ss_max</span><span class="p">;</span>		<span class="cm">/* steady-state maximum transfer size */</span>
	<span class="n">ushort</span> <span class="n">dpr_in_ptr</span><span class="p">;</span>	<span class="cm">/* write pointer inside the internal buffer */</span>
	<span class="n">ushort</span> <span class="n">sts</span><span class="p">;</span>		<span class="cm">/* source transfer size */</span>
	<span class="n">ushort</span> <span class="n">dpr_out_ptr</span><span class="p">;</span>	<span class="cm">/* read pointer inside the internal buffer */</span>
	<span class="n">ushort</span> <span class="n">seob</span><span class="p">;</span>		<span class="cm">/* source end of burst */</span>
	<span class="n">ushort</span> <span class="n">deob</span><span class="p">;</span>		<span class="cm">/* destination end of burst */</span>
	<span class="n">ushort</span> <span class="n">dts</span><span class="p">;</span>		<span class="cm">/* destination transfer size */</span>
	<span class="n">ushort</span> <span class="n">ret_add</span><span class="p">;</span>		<span class="cm">/* return address when working in ERM=1 mode */</span>
	<span class="n">ushort</span> <span class="n">res0</span><span class="p">;</span>		<span class="cm">/* reserved */</span>
	<span class="n">uint</span>   <span class="n">bd_cnt</span><span class="p">;</span>		<span class="cm">/* internal byte count */</span>
	<span class="n">uint</span>   <span class="n">s_ptr</span><span class="p">;</span>		<span class="cm">/* source internal data pointer */</span>
	<span class="n">uint</span>   <span class="n">d_ptr</span><span class="p">;</span>		<span class="cm">/* destination internal data pointer */</span>
	<span class="n">uint</span>   <span class="n">istate</span><span class="p">;</span>		<span class="cm">/* internal state */</span>
	<span class="n">u_char</span> <span class="n">res1</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>	<span class="cm">/* pad to 64-byte length */</span>
<span class="p">}</span> <span class="n">idma_t</span><span class="p">;</span>

<span class="cm">/* DMA channel mode bit fields</span>
<span class="cm">*/</span>
<span class="cp">#define IDMA_DCM_FB		((ushort)0x8000) </span><span class="cm">/* fly-by mode */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_LP		((ushort)0x4000) </span><span class="cm">/* low priority */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_TC2		((ushort)0x0400) </span><span class="cm">/* value driven on TC[2] */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_MASK	((ushort)0x01c0) </span><span class="cm">/* mask for DMA wrap */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_64	((ushort)0x0000) </span><span class="cm">/* 64-byte DMA xfer buffer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_128	((ushort)0x0040) </span><span class="cm">/* 128-byte DMA xfer buffer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_256	((ushort)0x0080) </span><span class="cm">/* 256-byte DMA xfer buffer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_512	((ushort)0x00c0) </span><span class="cm">/* 512-byte DMA xfer buffer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_1024	((ushort)0x0100) </span><span class="cm">/* 1024-byte DMA xfer buffer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DMA_WRAP_2048	((ushort)0x0140) </span><span class="cm">/* 2048-byte DMA xfer buffer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_SINC		((ushort)0x0020) </span><span class="cm">/* source inc addr */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DINC		((ushort)0x0010) </span><span class="cm">/* destination inc addr */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_ERM		((ushort)0x0008) </span><span class="cm">/* external request mode */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_DT		((ushort)0x0004) </span><span class="cm">/* DONE treatment */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_SD_MASK	((ushort)0x0003) </span><span class="cm">/* mask for SD bit field */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_SD_MEM2MEM	((ushort)0x0000) </span><span class="cm">/* memory-to-memory xfer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_SD_PER2MEM	((ushort)0x0002) </span><span class="cm">/* peripheral-to-memory xfer */</span><span class="cp"></span>
<span class="cp">#define IDMA_DCM_SD_MEM2PER	((ushort)0x0001) </span><span class="cm">/* memory-to-peripheral xfer */</span><span class="cp"></span>

<span class="cm">/* IDMA Buffer Descriptors</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">idma_bd</span> <span class="p">{</span>
	<span class="n">uint</span> <span class="n">flags</span><span class="p">;</span>
	<span class="n">uint</span> <span class="n">len</span><span class="p">;</span>	<span class="cm">/* data length */</span>
	<span class="n">uint</span> <span class="n">src</span><span class="p">;</span>	<span class="cm">/* source data buffer pointer */</span>
	<span class="n">uint</span> <span class="n">dst</span><span class="p">;</span>	<span class="cm">/* destination data buffer pointer */</span>
<span class="p">}</span> <span class="n">idma_bd_t</span><span class="p">;</span>

<span class="cm">/* IDMA buffer descriptor flag bit fields</span>
<span class="cm">*/</span>
<span class="cp">#define IDMA_BD_V	((uint)0x80000000)	</span><span class="cm">/* valid */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_W	((uint)0x20000000)	</span><span class="cm">/* wrap */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_I	((uint)0x10000000)	</span><span class="cm">/* interrupt */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_L	((uint)0x08000000)	</span><span class="cm">/* last */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_CM	((uint)0x02000000)	</span><span class="cm">/* continuous mode */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_SDN	((uint)0x00400000)	</span><span class="cm">/* source done */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_DDN	((uint)0x00200000)	</span><span class="cm">/* destination done */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_DGBL	((uint)0x00100000)	</span><span class="cm">/* destination global */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_DBO_LE	((uint)0x00040000)	</span><span class="cm">/* little-end dest byte order */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_DBO_BE	((uint)0x00080000)	</span><span class="cm">/* big-end dest byte order */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_DDTB	((uint)0x00010000)	</span><span class="cm">/* destination data bus */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_SGBL	((uint)0x00002000)	</span><span class="cm">/* source global */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_SBO_LE	((uint)0x00000800)	</span><span class="cm">/* little-end src byte order */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_SBO_BE	((uint)0x00001000)	</span><span class="cm">/* big-end src byte order */</span><span class="cp"></span>
<span class="cp">#define IDMA_BD_SDTB	((uint)0x00000200)	</span><span class="cm">/* source data bus */</span><span class="cp"></span>

<span class="cm">/* per-channel IDMA registers</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">im_idma</span> <span class="p">{</span>
	<span class="n">u_char</span> <span class="n">idsr</span><span class="p">;</span>			<span class="cm">/* IDMAn event status register */</span>
	<span class="n">u_char</span> <span class="n">res0</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u_char</span> <span class="n">idmr</span><span class="p">;</span>			<span class="cm">/* IDMAn event mask register */</span>
	<span class="n">u_char</span> <span class="n">res1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="p">}</span> <span class="n">im_idma_t</span><span class="p">;</span>

<span class="cm">/* IDMA event register bit fields</span>
<span class="cm">*/</span>
<span class="cp">#define IDMA_EVENT_SC	((unsigned char)0x08)	</span><span class="cm">/* stop completed */</span><span class="cp"></span>
<span class="cp">#define IDMA_EVENT_OB	((unsigned char)0x04)	</span><span class="cm">/* out of buffers */</span><span class="cp"></span>
<span class="cp">#define IDMA_EVENT_EDN	((unsigned char)0x02)	</span><span class="cm">/* external DONE asserted */</span><span class="cp"></span>
<span class="cp">#define IDMA_EVENT_BC	((unsigned char)0x01)	</span><span class="cm">/* buffer descriptor complete */</span><span class="cp"></span>

<span class="cm">/* RISC Controller Configuration Register (RCCR) bit fields</span>
<span class="cm">*/</span>
<span class="cp">#define RCCR_TIME	((uint)0x80000000) </span><span class="cm">/* timer enable */</span><span class="cp"></span>
<span class="cp">#define RCCR_TIMEP_MASK	((uint)0x3f000000) </span><span class="cm">/* mask for timer period bit field */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR0M	((uint)0x00800000) </span><span class="cm">/* IDMA0 request mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR1M	((uint)0x00400000) </span><span class="cm">/* IDMA1 request mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR2M	((uint)0x00000080) </span><span class="cm">/* IDMA2 request mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR3M	((uint)0x00000040) </span><span class="cm">/* IDMA3 request mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR0QP_MASK	((uint)0x00300000) </span><span class="cm">/* mask for IDMA0 req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR0QP_HIGH ((uint)0x00000000) </span><span class="cm">/* IDMA0 has high req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR0QP_MED	((uint)0x00100000) </span><span class="cm">/* IDMA0 has medium req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR0QP_LOW	((uint)0x00200000) </span><span class="cm">/* IDMA0 has low req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR1QP_MASK	((uint)0x00030000) </span><span class="cm">/* mask for IDMA1 req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR1QP_HIGH ((uint)0x00000000) </span><span class="cm">/* IDMA1 has high req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR1QP_MED	((uint)0x00010000) </span><span class="cm">/* IDMA1 has medium req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR1QP_LOW	((uint)0x00020000) </span><span class="cm">/* IDMA1 has low req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR2QP_MASK	((uint)0x00000030) </span><span class="cm">/* mask for IDMA2 req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR2QP_HIGH ((uint)0x00000000) </span><span class="cm">/* IDMA2 has high req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR2QP_MED	((uint)0x00000010) </span><span class="cm">/* IDMA2 has medium req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR2QP_LOW	((uint)0x00000020) </span><span class="cm">/* IDMA2 has low req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR3QP_MASK	((uint)0x00000003) </span><span class="cm">/* mask for IDMA3 req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR3QP_HIGH ((uint)0x00000000) </span><span class="cm">/* IDMA3 has high req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR3QP_MED	((uint)0x00000001) </span><span class="cm">/* IDMA3 has medium req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_DR3QP_LOW	((uint)0x00000002) </span><span class="cm">/* IDMA3 has low req priority */</span><span class="cp"></span>
<span class="cp">#define RCCR_EIE	((uint)0x00080000) </span><span class="cm">/* external interrupt enable */</span><span class="cp"></span>
<span class="cp">#define RCCR_SCD	((uint)0x00040000) </span><span class="cm">/* scheduler configuration */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_MASK	((uint)0x0000e000) </span><span class="cm">/* mask for enable RAM microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_0KB	((uint)0x00000000) </span><span class="cm">/* use 0KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_2KB	((uint)0x00002000) </span><span class="cm">/* use 2KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_4KB	((uint)0x00004000) </span><span class="cm">/* use 4KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_6KB	((uint)0x00006000) </span><span class="cm">/* use 6KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_8KB	((uint)0x00008000) </span><span class="cm">/* use 8KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_10KB	((uint)0x0000a000) </span><span class="cm">/* use 10KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_ERAM_12KB	((uint)0x0000c000) </span><span class="cm">/* use 12KB of dpram for microcode */</span><span class="cp"></span>
<span class="cp">#define RCCR_EDM0	((uint)0x00000800) </span><span class="cm">/* DREQ0 edge detect mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_EDM1	((uint)0x00000400) </span><span class="cm">/* DREQ1 edge detect mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_EDM2	((uint)0x00000200) </span><span class="cm">/* DREQ2 edge detect mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_EDM3	((uint)0x00000100) </span><span class="cm">/* DREQ3 edge detect mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_DEM01	((uint)0x00000008) </span><span class="cm">/* DONE0/DONE1 edge detect mode */</span><span class="cp"></span>
<span class="cp">#define RCCR_DEM23	((uint)0x00000004) </span><span class="cm">/* DONE2/DONE3 edge detect mode */</span><span class="cp"></span>

<span class="cm">/*-----------------------------------------------------------------------</span>
<span class="cm"> * CMXFCR - CMX FCC Clock Route Register</span>
<span class="cm"> */</span>
<span class="cp">#define CMXFCR_FC1         0x40000000   </span><span class="cm">/* FCC1 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_MSK   0x38000000   </span><span class="cm">/* Receive FCC1 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_MSK   0x07000000   </span><span class="cm">/* Transmit FCC1 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_FC2         0x00400000   </span><span class="cm">/* FCC2 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_MSK   0x00380000   </span><span class="cm">/* Receive FCC2 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_MSK   0x00070000   </span><span class="cm">/* Transmit FCC2 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_FC3         0x00004000   </span><span class="cm">/* FCC3 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_MSK   0x00003800   </span><span class="cm">/* Receive FCC3 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_MSK   0x00000700   </span><span class="cm">/* Transmit FCC3 Clock Source Mask */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_RF1CS_BRG5  0x00000000   </span><span class="cm">/* Receive FCC1 Clock Source is BRG5 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_BRG6  0x08000000   </span><span class="cm">/* Receive FCC1 Clock Source is BRG6 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_BRG7  0x10000000   </span><span class="cm">/* Receive FCC1 Clock Source is BRG7 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_BRG8  0x18000000   </span><span class="cm">/* Receive FCC1 Clock Source is BRG8 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_CLK9  0x20000000   </span><span class="cm">/* Receive FCC1 Clock Source is CLK9 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_CLK10 0x28000000   </span><span class="cm">/* Receive FCC1 Clock Source is CLK10 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_CLK11 0x30000000   </span><span class="cm">/* Receive FCC1 Clock Source is CLK11 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF1CS_CLK12 0x38000000   </span><span class="cm">/* Receive FCC1 Clock Source is CLK12 */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_TF1CS_BRG5  0x00000000   </span><span class="cm">/* Transmit FCC1 Clock Source is BRG5 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_BRG6  0x01000000   </span><span class="cm">/* Transmit FCC1 Clock Source is BRG6 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_BRG7  0x02000000   </span><span class="cm">/* Transmit FCC1 Clock Source is BRG7 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_BRG8  0x03000000   </span><span class="cm">/* Transmit FCC1 Clock Source is BRG8 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_CLK9  0x04000000   </span><span class="cm">/* Transmit FCC1 Clock Source is CLK9 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_CLK10 0x05000000   </span><span class="cm">/* Transmit FCC1 Clock Source is CLK10 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_CLK11 0x06000000   </span><span class="cm">/* Transmit FCC1 Clock Source is CLK11 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS_CLK12 0x07000000   </span><span class="cm">/* Transmit FCC1 Clock Source is CLK12 */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_RF2CS_BRG5  0x00000000   </span><span class="cm">/* Receive FCC2 Clock Source is BRG5 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_BRG6  0x00080000   </span><span class="cm">/* Receive FCC2 Clock Source is BRG6 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_BRG7  0x00100000   </span><span class="cm">/* Receive FCC2 Clock Source is BRG7 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_BRG8  0x00180000   </span><span class="cm">/* Receive FCC2 Clock Source is BRG8 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_CLK13 0x00200000   </span><span class="cm">/* Receive FCC2 Clock Source is CLK13 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_CLK14 0x00280000   </span><span class="cm">/* Receive FCC2 Clock Source is CLK14 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_CLK15 0x00300000   </span><span class="cm">/* Receive FCC2 Clock Source is CLK15 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS_CLK16 0x00380000   </span><span class="cm">/* Receive FCC2 Clock Source is CLK16 */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_TF2CS_BRG5  0x00000000   </span><span class="cm">/* Transmit FCC2 Clock Source is BRG5 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_BRG6  0x00010000   </span><span class="cm">/* Transmit FCC2 Clock Source is BRG6 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_BRG7  0x00020000   </span><span class="cm">/* Transmit FCC2 Clock Source is BRG7 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_BRG8  0x00030000   </span><span class="cm">/* Transmit FCC2 Clock Source is BRG8 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_CLK13 0x00040000   </span><span class="cm">/* Transmit FCC2 Clock Source is CLK13 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_CLK14 0x00050000   </span><span class="cm">/* Transmit FCC2 Clock Source is CLK14 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_CLK15 0x00060000   </span><span class="cm">/* Transmit FCC2 Clock Source is CLK15 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS_CLK16 0x00070000   </span><span class="cm">/* Transmit FCC2 Clock Source is CLK16 */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_RF3CS_BRG5  0x00000000   </span><span class="cm">/* Receive FCC3 Clock Source is BRG5 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_BRG6  0x00000800   </span><span class="cm">/* Receive FCC3 Clock Source is BRG6 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_BRG7  0x00001000   </span><span class="cm">/* Receive FCC3 Clock Source is BRG7 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_BRG8  0x00001800   </span><span class="cm">/* Receive FCC3 Clock Source is BRG8 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_CLK13 0x00002000   </span><span class="cm">/* Receive FCC3 Clock Source is CLK13 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_CLK14 0x00002800   </span><span class="cm">/* Receive FCC3 Clock Source is CLK14 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_CLK15 0x00003000   </span><span class="cm">/* Receive FCC3 Clock Source is CLK15 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS_CLK16 0x00003800   </span><span class="cm">/* Receive FCC3 Clock Source is CLK16 */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_TF3CS_BRG5  0x00000000   </span><span class="cm">/* Transmit FCC3 Clock Source is BRG5 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_BRG6  0x00000100   </span><span class="cm">/* Transmit FCC3 Clock Source is BRG6 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_BRG7  0x00000200   </span><span class="cm">/* Transmit FCC3 Clock Source is BRG7 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_BRG8  0x00000300   </span><span class="cm">/* Transmit FCC3 Clock Source is BRG8 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_CLK13 0x00000400   </span><span class="cm">/* Transmit FCC3 Clock Source is CLK13 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_CLK14 0x00000500   </span><span class="cm">/* Transmit FCC3 Clock Source is CLK14 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_CLK15 0x00000600   </span><span class="cm">/* Transmit FCC3 Clock Source is CLK15 */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS_CLK16 0x00000700   </span><span class="cm">/* Transmit FCC3 Clock Source is CLK16 */</span><span class="cp"></span>

<span class="cm">/*-----------------------------------------------------------------------</span>
<span class="cm"> * CMXSCR - CMX SCC Clock Route Register</span>
<span class="cm"> */</span>
<span class="cp">#define CMXSCR_GR1         0x80000000   </span><span class="cm">/* Grant Support of SCC1        */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_SC1         0x40000000   </span><span class="cm">/* SCC1 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_MSK   0x38000000   </span><span class="cm">/* Receive SCC1 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_MSK   0x07000000   </span><span class="cm">/* Transmit SCC1 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_GR2         0x00800000   </span><span class="cm">/* Grant Support of SCC2        */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_SC2         0x00400000   </span><span class="cm">/* SCC2 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_MSK   0x00380000   </span><span class="cm">/* Receive SCC2 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_MSK   0x00070000   </span><span class="cm">/* Transmit SCC2 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_GR3         0x00008000   </span><span class="cm">/* Grant Support of SCC3        */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_SC3         0x00004000   </span><span class="cm">/* SCC3 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_MSK   0x00003800   </span><span class="cm">/* Receive SCC3 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_MSK   0x00000700   </span><span class="cm">/* Transmit SCC3 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_GR4         0x00000080   </span><span class="cm">/* Grant Support of SCC4        */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_SC4         0x00000040   </span><span class="cm">/* SCC4 connection              */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_MSK   0x00000038   </span><span class="cm">/* Receive SCC4 Clock Source Mask */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_MSK   0x00000007   </span><span class="cm">/* Transmit SCC4 Clock Source Mask */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_RS1CS_BRG1  0x00000000   </span><span class="cm">/* SCC1 Rx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_BRG2  0x08000000   </span><span class="cm">/* SCC1 Rx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_BRG3  0x10000000   </span><span class="cm">/* SCC1 Rx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_BRG4  0x18000000   </span><span class="cm">/* SCC1 Rx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_CLK11 0x20000000   </span><span class="cm">/* SCC1 Rx Clock Source is CLK11 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_CLK12 0x28000000   </span><span class="cm">/* SCC1 Rx Clock Source is CLK12 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_CLK3  0x30000000   </span><span class="cm">/* SCC1 Rx Clock Source is CLK3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS1CS_CLK4  0x38000000   </span><span class="cm">/* SCC1 Rx Clock Source is CLK4 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_TS1CS_BRG1  0x00000000   </span><span class="cm">/* SCC1 Tx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_BRG2  0x01000000   </span><span class="cm">/* SCC1 Tx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_BRG3  0x02000000   </span><span class="cm">/* SCC1 Tx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_BRG4  0x03000000   </span><span class="cm">/* SCC1 Tx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_CLK11 0x04000000   </span><span class="cm">/* SCC1 Tx Clock Source is CLK11 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_CLK12 0x05000000   </span><span class="cm">/* SCC1 Tx Clock Source is CLK12 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_CLK3  0x06000000   </span><span class="cm">/* SCC1 Tx Clock Source is CLK3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS1CS_CLK4  0x07000000   </span><span class="cm">/* SCC1 Tx Clock Source is CLK4 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_RS2CS_BRG1  0x00000000   </span><span class="cm">/* SCC2 Rx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_BRG2  0x00080000   </span><span class="cm">/* SCC2 Rx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_BRG3  0x00100000   </span><span class="cm">/* SCC2 Rx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_BRG4  0x00180000   </span><span class="cm">/* SCC2 Rx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_CLK11 0x00200000   </span><span class="cm">/* SCC2 Rx Clock Source is CLK11 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_CLK12 0x00280000   </span><span class="cm">/* SCC2 Rx Clock Source is CLK12 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_CLK3  0x00300000   </span><span class="cm">/* SCC2 Rx Clock Source is CLK3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS2CS_CLK4  0x00380000   </span><span class="cm">/* SCC2 Rx Clock Source is CLK4 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_TS2CS_BRG1  0x00000000   </span><span class="cm">/* SCC2 Tx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_BRG2  0x00010000   </span><span class="cm">/* SCC2 Tx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_BRG3  0x00020000   </span><span class="cm">/* SCC2 Tx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_BRG4  0x00030000   </span><span class="cm">/* SCC2 Tx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_CLK11 0x00040000   </span><span class="cm">/* SCC2 Tx Clock Source is CLK11 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_CLK12 0x00050000   </span><span class="cm">/* SCC2 Tx Clock Source is CLK12 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_CLK3  0x00060000   </span><span class="cm">/* SCC2 Tx Clock Source is CLK3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS2CS_CLK4  0x00070000   </span><span class="cm">/* SCC2 Tx Clock Source is CLK4 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_RS3CS_BRG1  0x00000000   </span><span class="cm">/* SCC3 Rx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_BRG2  0x00000800   </span><span class="cm">/* SCC3 Rx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_BRG3  0x00001000   </span><span class="cm">/* SCC3 Rx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_BRG4  0x00001800   </span><span class="cm">/* SCC3 Rx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_CLK5  0x00002000   </span><span class="cm">/* SCC3 Rx Clock Source is CLK5 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_CLK6  0x00002800   </span><span class="cm">/* SCC3 Rx Clock Source is CLK6 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_CLK7  0x00003000   </span><span class="cm">/* SCC3 Rx Clock Source is CLK7 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS3CS_CLK8  0x00003800   </span><span class="cm">/* SCC3 Rx Clock Source is CLK8 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_TS3CS_BRG1  0x00000000   </span><span class="cm">/* SCC3 Tx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_BRG2  0x00000100   </span><span class="cm">/* SCC3 Tx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_BRG3  0x00000200   </span><span class="cm">/* SCC3 Tx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_BRG4  0x00000300   </span><span class="cm">/* SCC3 Tx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_CLK5  0x00000400   </span><span class="cm">/* SCC3 Tx Clock Source is CLK5 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_CLK6  0x00000500   </span><span class="cm">/* SCC3 Tx Clock Source is CLK6 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_CLK7  0x00000600   </span><span class="cm">/* SCC3 Tx Clock Source is CLK7 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS3CS_CLK8  0x00000700   </span><span class="cm">/* SCC3 Tx Clock Source is CLK8 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_RS4CS_BRG1  0x00000000   </span><span class="cm">/* SCC4 Rx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_BRG2  0x00000008   </span><span class="cm">/* SCC4 Rx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_BRG3  0x00000010   </span><span class="cm">/* SCC4 Rx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_BRG4  0x00000018   </span><span class="cm">/* SCC4 Rx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_CLK5  0x00000020   </span><span class="cm">/* SCC4 Rx Clock Source is CLK5 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_CLK6  0x00000028   </span><span class="cm">/* SCC4 Rx Clock Source is CLK6 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_CLK7  0x00000030   </span><span class="cm">/* SCC4 Rx Clock Source is CLK7 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_RS4CS_CLK8  0x00000038   </span><span class="cm">/* SCC4 Rx Clock Source is CLK8 */</span><span class="cp"></span>

<span class="cp">#define CMXSCR_TS4CS_BRG1  0x00000000   </span><span class="cm">/* SCC4 Tx Clock Source is BRG1 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_BRG2  0x00000001   </span><span class="cm">/* SCC4 Tx Clock Source is BRG2 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_BRG3  0x00000002   </span><span class="cm">/* SCC4 Tx Clock Source is BRG3 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_BRG4  0x00000003   </span><span class="cm">/* SCC4 Tx Clock Source is BRG4 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_CLK5  0x00000004   </span><span class="cm">/* SCC4 Tx Clock Source is CLK5 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_CLK6  0x00000005   </span><span class="cm">/* SCC4 Tx Clock Source is CLK6 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_CLK7  0x00000006   </span><span class="cm">/* SCC4 Tx Clock Source is CLK7 */</span><span class="cp"></span>
<span class="cp">#define CMXSCR_TS4CS_CLK8  0x00000007   </span><span class="cm">/* SCC4 Tx Clock Source is CLK8 */</span><span class="cp"></span>

<span class="cm">/*-----------------------------------------------------------------------</span>
<span class="cm"> * SIUMCR - SIU Module Configuration Register				 4-31</span>
<span class="cm"> */</span>
<span class="cp">#define SIUMCR_BBD	0x80000000	</span><span class="cm">/* Bus Busy Disable		*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_ESE	0x40000000	</span><span class="cm">/* External Snoop Enable	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_PBSE	0x20000000	</span><span class="cm">/* Parity Byte Select Enable	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_CDIS	0x10000000	</span><span class="cm">/* Core Disable			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_DPPC00	0x00000000	</span><span class="cm">/* Data Parity Pins Configuration*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_DPPC01	0x04000000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_DPPC10	0x08000000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_DPPC11	0x0c000000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_L2CPC00	0x00000000	</span><span class="cm">/* L2 Cache Pins Configuration	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_L2CPC01	0x01000000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_L2CPC10	0x02000000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_L2CPC11	0x03000000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_LBPC00	0x00000000	</span><span class="cm">/* Local Bus Pins Configuration	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_LBPC01	0x00400000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_LBPC10	0x00800000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_LBPC11	0x00c00000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_APPC00	0x00000000	</span><span class="cm">/* Address Parity Pins Configuration*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_APPC01	0x00100000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_APPC10	0x00200000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_APPC11	0x00300000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_CS10PC00	0x00000000	</span><span class="cm">/* CS10 Pin Configuration	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_CS10PC01	0x00040000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_CS10PC10	0x00080000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_CS10PC11	0x000c0000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_BCTLC00	0x00000000	</span><span class="cm">/* Buffer Control Configuration	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_BCTLC01	0x00010000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_BCTLC10	0x00020000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_BCTLC11	0x00030000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_MMR00	0x00000000	</span><span class="cm">/* Mask Masters Requests	*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_MMR01	0x00004000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_MMR10	0x00008000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_MMR11	0x0000c000	</span><span class="cm">/* - &quot; -			*/</span><span class="cp"></span>
<span class="cp">#define SIUMCR_LPBSE	0x00002000	</span><span class="cm">/* LocalBus Parity Byte Select Enable*/</span><span class="cp"></span>

<span class="cm">/*-----------------------------------------------------------------------</span>
<span class="cm"> * SCCR - System Clock Control Register					 9-8</span>
<span class="cm">*/</span>
<span class="cp">#define SCCR_PCI_MODE	0x00000100	</span><span class="cm">/* PCI Mode	*/</span><span class="cp"></span>
<span class="cp">#define SCCR_PCI_MODCK	0x00000080	</span><span class="cm">/* Value of PCI_MODCK pin	*/</span><span class="cp"></span>
<span class="cp">#define SCCR_PCIDF_MSK	0x00000078	</span><span class="cm">/* PCI division factor	*/</span><span class="cp"></span>
<span class="cp">#define SCCR_PCIDF_SHIFT 3</span>

<span class="cp">#ifndef CPM_IMMR_OFFSET</span>
<span class="cp">#define CPM_IMMR_OFFSET	0x101a8</span>
<span class="cp">#endif</span>

<span class="cp">#define FCC_PSMR_RMII	((uint)0x00020000)	</span><span class="cm">/* Use RMII interface */</span><span class="cp"></span>

<span class="cm">/* FCC iop &amp; clock configuration. BSP code is responsible to define Fx_RXCLK &amp; Fx_TXCLK</span>
<span class="cm"> * in order to use clock-computing stuff below for the FCC x</span>
<span class="cm"> */</span>

<span class="cm">/* Automatically generates register configurations */</span>
<span class="cp">#define PC_CLK(x)	((uint)(1&lt;&lt;(x-1)))	</span><span class="cm">/* FCC CLK I/O ports */</span><span class="cp"></span>

<span class="cp">#define CMXFCR_RF1CS(x)	((uint)((x-5)&lt;&lt;27))	</span><span class="cm">/* FCC1 Receive Clock Source */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF1CS(x)	((uint)((x-5)&lt;&lt;24))	</span><span class="cm">/* FCC1 Transmit Clock Source */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF2CS(x)	((uint)((x-9)&lt;&lt;19))	</span><span class="cm">/* FCC2 Receive Clock Source */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF2CS(x) ((uint)((x-9)&lt;&lt;16))	</span><span class="cm">/* FCC2 Transmit Clock Source */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_RF3CS(x)	((uint)((x-9)&lt;&lt;11))	</span><span class="cm">/* FCC3 Receive Clock Source */</span><span class="cp"></span>
<span class="cp">#define CMXFCR_TF3CS(x) ((uint)((x-9)&lt;&lt;8))	</span><span class="cm">/* FCC3 Transmit Clock Source */</span><span class="cp"></span>

<span class="cp">#define PC_F1RXCLK	PC_CLK(F1_RXCLK)</span>
<span class="cp">#define PC_F1TXCLK	PC_CLK(F1_TXCLK)</span>
<span class="cp">#define CMX1_CLK_ROUTE	(CMXFCR_RF1CS(F1_RXCLK) | CMXFCR_TF1CS(F1_TXCLK))</span>
<span class="cp">#define CMX1_CLK_MASK	((uint)0xff000000)</span>

<span class="cp">#define PC_F2RXCLK	PC_CLK(F2_RXCLK)</span>
<span class="cp">#define PC_F2TXCLK	PC_CLK(F2_TXCLK)</span>
<span class="cp">#define CMX2_CLK_ROUTE	(CMXFCR_RF2CS(F2_RXCLK) | CMXFCR_TF2CS(F2_TXCLK))</span>
<span class="cp">#define CMX2_CLK_MASK	((uint)0x00ff0000)</span>

<span class="cp">#define PC_F3RXCLK	PC_CLK(F3_RXCLK)</span>
<span class="cp">#define PC_F3TXCLK	PC_CLK(F3_TXCLK)</span>
<span class="cp">#define CMX3_CLK_ROUTE	(CMXFCR_RF3CS(F3_RXCLK) | CMXFCR_TF3CS(F3_TXCLK))</span>
<span class="cp">#define CMX3_CLK_MASK	((uint)0x0000ff00)</span>

<span class="cp">#define CPMUX_CLK_MASK (CMX3_CLK_MASK | CMX2_CLK_MASK)</span>
<span class="cp">#define CPMUX_CLK_ROUTE (CMX3_CLK_ROUTE | CMX2_CLK_ROUTE)</span>

<span class="cp">#define CLK_TRX (PC_F3TXCLK | PC_F3RXCLK | PC_F2TXCLK | PC_F2RXCLK)</span>

<span class="cm">/* I/O Pin assignment for FCC1.  I don&#39;t yet know the best way to do this,</span>
<span class="cm"> * but there is little variation among the choices.</span>
<span class="cm"> */</span>
<span class="cp">#define PA1_COL		0x00000001U</span>
<span class="cp">#define PA1_CRS		0x00000002U</span>
<span class="cp">#define PA1_TXER	0x00000004U</span>
<span class="cp">#define PA1_TXEN	0x00000008U</span>
<span class="cp">#define PA1_RXDV	0x00000010U</span>
<span class="cp">#define PA1_RXER	0x00000020U</span>
<span class="cp">#define PA1_TXDAT	0x00003c00U</span>
<span class="cp">#define PA1_RXDAT	0x0003c000U</span>
<span class="cp">#define PA1_PSORA0	(PA1_RXDAT | PA1_TXDAT)</span>
<span class="cp">#define PA1_PSORA1	(PA1_COL | PA1_CRS | PA1_TXER | PA1_TXEN | \</span>
<span class="cp">		PA1_RXDV | PA1_RXER)</span>
<span class="cp">#define PA1_DIRA0	(PA1_RXDAT | PA1_CRS | PA1_COL | PA1_RXER | PA1_RXDV)</span>
<span class="cp">#define PA1_DIRA1	(PA1_TXDAT | PA1_TXEN | PA1_TXER)</span>


<span class="cm">/* I/O Pin assignment for FCC2.  I don&#39;t yet know the best way to do this,</span>
<span class="cm"> * but there is little variation among the choices.</span>
<span class="cm"> */</span>
<span class="cp">#define PB2_TXER	0x00000001U</span>
<span class="cp">#define PB2_RXDV	0x00000002U</span>
<span class="cp">#define PB2_TXEN	0x00000004U</span>
<span class="cp">#define PB2_RXER	0x00000008U</span>
<span class="cp">#define PB2_COL		0x00000010U</span>
<span class="cp">#define PB2_CRS		0x00000020U</span>
<span class="cp">#define PB2_TXDAT	0x000003c0U</span>
<span class="cp">#define PB2_RXDAT	0x00003c00U</span>
<span class="cp">#define PB2_PSORB0	(PB2_RXDAT | PB2_TXDAT | PB2_CRS | PB2_COL | \</span>
<span class="cp">		PB2_RXER | PB2_RXDV | PB2_TXER)</span>
<span class="cp">#define PB2_PSORB1	(PB2_TXEN)</span>
<span class="cp">#define PB2_DIRB0	(PB2_RXDAT | PB2_CRS | PB2_COL | PB2_RXER | PB2_RXDV)</span>
<span class="cp">#define PB2_DIRB1	(PB2_TXDAT | PB2_TXEN | PB2_TXER)</span>


<span class="cm">/* I/O Pin assignment for FCC3.  I don&#39;t yet know the best way to do this,</span>
<span class="cm"> * but there is little variation among the choices.</span>
<span class="cm"> */</span>
<span class="cp">#define PB3_RXDV	0x00004000U</span>
<span class="cp">#define PB3_RXER	0x00008000U</span>
<span class="cp">#define PB3_TXER	0x00010000U</span>
<span class="cp">#define PB3_TXEN	0x00020000U</span>
<span class="cp">#define PB3_COL		0x00040000U</span>
<span class="cp">#define PB3_CRS		0x00080000U</span>
<span class="cp">#define PB3_TXDAT	0x0f000000U</span>
<span class="cp">#define PC3_TXDAT	0x00000010U</span>
<span class="cp">#define PB3_RXDAT	0x00f00000U</span>
<span class="cp">#define PB3_PSORB0	(PB3_RXDAT | PB3_TXDAT | PB3_CRS | PB3_COL | \</span>
<span class="cp">		PB3_RXER | PB3_RXDV | PB3_TXER | PB3_TXEN)</span>
<span class="cp">#define PB3_PSORB1	0</span>
<span class="cp">#define PB3_DIRB0	(PB3_RXDAT | PB3_CRS | PB3_COL | PB3_RXER | PB3_RXDV)</span>
<span class="cp">#define PB3_DIRB1	(PB3_TXDAT | PB3_TXEN | PB3_TXER)</span>
<span class="cp">#define PC3_DIRC1	(PC3_TXDAT)</span>

<span class="cm">/* Handy macro to specify mem for FCCs*/</span>
<span class="cp">#define FCC_MEM_OFFSET(x) (CPM_FCC_SPECIAL_BASE + (x*128))</span>
<span class="cp">#define FCC1_MEM_OFFSET FCC_MEM_OFFSET(0)</span>
<span class="cp">#define FCC2_MEM_OFFSET FCC_MEM_OFFSET(1)</span>
<span class="cp">#define FCC3_MEM_OFFSET FCC_MEM_OFFSET(2)</span>

<span class="cm">/* Clocks and GRG&#39;s */</span>

<span class="k">enum</span> <span class="n">cpm_clk_dir</span> <span class="p">{</span>
	<span class="n">CPM_CLK_RX</span><span class="p">,</span>
	<span class="n">CPM_CLK_TX</span><span class="p">,</span>
	<span class="n">CPM_CLK_RTX</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">cpm_clk_target</span> <span class="p">{</span>
	<span class="n">CPM_CLK_SCC1</span><span class="p">,</span>
	<span class="n">CPM_CLK_SCC2</span><span class="p">,</span>
	<span class="n">CPM_CLK_SCC3</span><span class="p">,</span>
	<span class="n">CPM_CLK_SCC4</span><span class="p">,</span>
	<span class="n">CPM_CLK_FCC1</span><span class="p">,</span>
	<span class="n">CPM_CLK_FCC2</span><span class="p">,</span>
	<span class="n">CPM_CLK_FCC3</span><span class="p">,</span>
	<span class="n">CPM_CLK_SMC1</span><span class="p">,</span>
	<span class="n">CPM_CLK_SMC2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">cpm_clk</span> <span class="p">{</span>
	<span class="n">CPM_CLK_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CPM_BRG1</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  1 */</span>
	<span class="n">CPM_BRG2</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  2 */</span>
	<span class="n">CPM_BRG3</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  3 */</span>
	<span class="n">CPM_BRG4</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  4 */</span>
	<span class="n">CPM_BRG5</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  5 */</span>
	<span class="n">CPM_BRG6</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  6 */</span>
	<span class="n">CPM_BRG7</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  7 */</span>
	<span class="n">CPM_BRG8</span><span class="p">,</span>	<span class="cm">/* Baud Rate Generator  8 */</span>
	<span class="n">CPM_CLK1</span><span class="p">,</span>	<span class="cm">/* Clock  1 */</span>
	<span class="n">CPM_CLK2</span><span class="p">,</span>	<span class="cm">/* Clock  2 */</span>
	<span class="n">CPM_CLK3</span><span class="p">,</span>	<span class="cm">/* Clock  3 */</span>
	<span class="n">CPM_CLK4</span><span class="p">,</span>	<span class="cm">/* Clock  4 */</span>
	<span class="n">CPM_CLK5</span><span class="p">,</span>	<span class="cm">/* Clock  5 */</span>
	<span class="n">CPM_CLK6</span><span class="p">,</span>	<span class="cm">/* Clock  6 */</span>
	<span class="n">CPM_CLK7</span><span class="p">,</span>	<span class="cm">/* Clock  7 */</span>
	<span class="n">CPM_CLK8</span><span class="p">,</span>	<span class="cm">/* Clock  8 */</span>
	<span class="n">CPM_CLK9</span><span class="p">,</span>	<span class="cm">/* Clock  9 */</span>
	<span class="n">CPM_CLK10</span><span class="p">,</span>	<span class="cm">/* Clock 10 */</span>
	<span class="n">CPM_CLK11</span><span class="p">,</span>	<span class="cm">/* Clock 11 */</span>
	<span class="n">CPM_CLK12</span><span class="p">,</span>	<span class="cm">/* Clock 12 */</span>
	<span class="n">CPM_CLK13</span><span class="p">,</span>	<span class="cm">/* Clock 13 */</span>
	<span class="n">CPM_CLK14</span><span class="p">,</span>	<span class="cm">/* Clock 14 */</span>
	<span class="n">CPM_CLK15</span><span class="p">,</span>	<span class="cm">/* Clock 15 */</span>
	<span class="n">CPM_CLK16</span><span class="p">,</span>	<span class="cm">/* Clock 16 */</span>
	<span class="n">CPM_CLK17</span><span class="p">,</span>	<span class="cm">/* Clock 17 */</span>
	<span class="n">CPM_CLK18</span><span class="p">,</span>	<span class="cm">/* Clock 18 */</span>
	<span class="n">CPM_CLK19</span><span class="p">,</span>	<span class="cm">/* Clock 19 */</span>
	<span class="n">CPM_CLK20</span><span class="p">,</span>	<span class="cm">/* Clock 20 */</span>
	<span class="n">CPM_CLK_DUMMY</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">cpm2_clk_setup</span><span class="p">(</span><span class="k">enum</span> <span class="n">cpm_clk_target</span> <span class="n">target</span><span class="p">,</span> <span class="kt">int</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">cpm2_smc_clk_setup</span><span class="p">(</span><span class="k">enum</span> <span class="n">cpm_clk_target</span> <span class="n">target</span><span class="p">,</span> <span class="kt">int</span> <span class="n">clock</span><span class="p">);</span>

<span class="cp">#define CPM_PIN_INPUT     0</span>
<span class="cp">#define CPM_PIN_OUTPUT    1</span>
<span class="cp">#define CPM_PIN_PRIMARY   0</span>
<span class="cp">#define CPM_PIN_SECONDARY 2</span>
<span class="cp">#define CPM_PIN_GPIO      4</span>
<span class="cp">#define CPM_PIN_OPENDRAIN 8</span>

<span class="kt">void</span> <span class="n">cpm2_set_pin</span><span class="p">(</span><span class="kt">int</span> <span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __CPM2__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
