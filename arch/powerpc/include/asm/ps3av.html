<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › ps3av.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ps3av.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  PS3 AV backend support.</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2007 Sony Computer Entertainment Inc.</span>
<span class="cm"> *  Copyright 2007 Sony Corp.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; version 2 of the License.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *  GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_POWERPC_PS3AV_H_</span>
<span class="cp">#define _ASM_POWERPC_PS3AV_H_</span>

<span class="cm">/** command for ioctl() **/</span>
<span class="cp">#define PS3AV_VERSION 0x205	</span><span class="cm">/* version of ps3av command */</span><span class="cp"></span>

<span class="cp">#define PS3AV_CID_AV_INIT              0x00000001</span>
<span class="cp">#define PS3AV_CID_AV_FIN               0x00000002</span>
<span class="cp">#define PS3AV_CID_AV_GET_HW_CONF       0x00000003</span>
<span class="cp">#define PS3AV_CID_AV_GET_MONITOR_INFO  0x00000004</span>
<span class="cp">#define PS3AV_CID_AV_ENABLE_EVENT      0x00000006</span>
<span class="cp">#define PS3AV_CID_AV_DISABLE_EVENT     0x00000007</span>
<span class="cp">#define PS3AV_CID_AV_TV_MUTE           0x0000000a</span>

<span class="cp">#define PS3AV_CID_AV_VIDEO_CS          0x00010001</span>
<span class="cp">#define PS3AV_CID_AV_VIDEO_MUTE        0x00010002</span>
<span class="cp">#define PS3AV_CID_AV_VIDEO_DISABLE_SIG 0x00010003</span>
<span class="cp">#define PS3AV_CID_AV_AUDIO_PARAM       0x00020001</span>
<span class="cp">#define PS3AV_CID_AV_AUDIO_MUTE        0x00020002</span>
<span class="cp">#define PS3AV_CID_AV_HDMI_MODE         0x00040001</span>

<span class="cp">#define PS3AV_CID_VIDEO_INIT           0x01000001</span>
<span class="cp">#define PS3AV_CID_VIDEO_MODE           0x01000002</span>
<span class="cp">#define PS3AV_CID_VIDEO_FORMAT         0x01000004</span>
<span class="cp">#define PS3AV_CID_VIDEO_PITCH          0x01000005</span>

<span class="cp">#define PS3AV_CID_AUDIO_INIT           0x02000001</span>
<span class="cp">#define PS3AV_CID_AUDIO_MODE           0x02000002</span>
<span class="cp">#define PS3AV_CID_AUDIO_MUTE           0x02000003</span>
<span class="cp">#define PS3AV_CID_AUDIO_ACTIVE         0x02000004</span>
<span class="cp">#define PS3AV_CID_AUDIO_INACTIVE       0x02000005</span>
<span class="cp">#define PS3AV_CID_AUDIO_SPDIF_BIT      0x02000006</span>
<span class="cp">#define PS3AV_CID_AUDIO_CTRL           0x02000007</span>

<span class="cp">#define PS3AV_CID_EVENT_UNPLUGGED      0x10000001</span>
<span class="cp">#define PS3AV_CID_EVENT_PLUGGED        0x10000002</span>
<span class="cp">#define PS3AV_CID_EVENT_HDCP_DONE      0x10000003</span>
<span class="cp">#define PS3AV_CID_EVENT_HDCP_FAIL      0x10000004</span>
<span class="cp">#define PS3AV_CID_EVENT_HDCP_AUTH      0x10000005</span>
<span class="cp">#define PS3AV_CID_EVENT_HDCP_ERROR     0x10000006</span>

<span class="cp">#define PS3AV_CID_AVB_PARAM            0x04000001</span>

<span class="cm">/* max backend ports */</span>
<span class="cp">#define PS3AV_HDMI_MAX                 2	</span><span class="cm">/* HDMI_0 HDMI_1 */</span><span class="cp"></span>
<span class="cp">#define PS3AV_AVMULTI_MAX              1	</span><span class="cm">/* AVMULTI_0 */</span><span class="cp"></span>
<span class="cp">#define PS3AV_AV_PORT_MAX              (PS3AV_HDMI_MAX + PS3AV_AVMULTI_MAX)</span>
<span class="cp">#define PS3AV_OPT_PORT_MAX             1	</span><span class="cm">/* SPDIF0 */</span><span class="cp"></span>
<span class="cp">#define PS3AV_HEAD_MAX                 2	</span><span class="cm">/* HEAD_A HEAD_B */</span><span class="cp"></span>

<span class="cm">/* num of pkt for PS3AV_CID_AVB_PARAM */</span>
<span class="cp">#define PS3AV_AVB_NUM_VIDEO            PS3AV_HEAD_MAX</span>
<span class="cp">#define PS3AV_AVB_NUM_AUDIO            0	</span><span class="cm">/* not supported */</span><span class="cp"></span>
<span class="cp">#define PS3AV_AVB_NUM_AV_VIDEO         PS3AV_AV_PORT_MAX</span>
<span class="cp">#define PS3AV_AVB_NUM_AV_AUDIO         PS3AV_HDMI_MAX</span>

<span class="cp">#define PS3AV_MUTE_PORT_MAX            1	</span><span class="cm">/* num of ports in mute pkt */</span><span class="cp"></span>

<span class="cm">/* event_bit */</span>
<span class="cp">#define PS3AV_CMD_EVENT_BIT_UNPLUGGED			(1 &lt;&lt; 0)</span>
<span class="cp">#define PS3AV_CMD_EVENT_BIT_PLUGGED			(1 &lt;&lt; 1)</span>
<span class="cp">#define PS3AV_CMD_EVENT_BIT_HDCP_DONE			(1 &lt;&lt; 2)</span>
<span class="cp">#define PS3AV_CMD_EVENT_BIT_HDCP_FAIL			(1 &lt;&lt; 3)</span>
<span class="cp">#define PS3AV_CMD_EVENT_BIT_HDCP_REAUTH			(1 &lt;&lt; 4)</span>
<span class="cp">#define PS3AV_CMD_EVENT_BIT_HDCP_TOPOLOGY		(1 &lt;&lt; 5)</span>

<span class="cm">/* common params */</span>
<span class="cm">/* mute */</span>
<span class="cp">#define PS3AV_CMD_MUTE_OFF				0x0000</span>
<span class="cp">#define PS3AV_CMD_MUTE_ON				0x0001</span>
<span class="cm">/* avport */</span>
<span class="cp">#define PS3AV_CMD_AVPORT_HDMI_0				0x0000</span>
<span class="cp">#define PS3AV_CMD_AVPORT_HDMI_1				0x0001</span>
<span class="cp">#define PS3AV_CMD_AVPORT_AVMULTI_0			0x0010</span>
<span class="cp">#define PS3AV_CMD_AVPORT_SPDIF_0			0x0020</span>
<span class="cp">#define PS3AV_CMD_AVPORT_SPDIF_1			0x0021</span>

<span class="cm">/* for av backend */</span>
<span class="cm">/* av_mclk */</span>
<span class="cp">#define PS3AV_CMD_AV_MCLK_128				0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_MCLK_256				0x0001</span>
<span class="cp">#define PS3AV_CMD_AV_MCLK_512				0x0003</span>
<span class="cm">/* av_inputlen */</span>
<span class="cp">#define PS3AV_CMD_AV_INPUTLEN_16			0x02</span>
<span class="cp">#define PS3AV_CMD_AV_INPUTLEN_20			0x0a</span>
<span class="cp">#define PS3AV_CMD_AV_INPUTLEN_24			0x0b</span>
<span class="cm">/* alayout */</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_32				(1 &lt;&lt; 0)</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_44				(1 &lt;&lt; 1)</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_48				(1 &lt;&lt; 2)</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_88				(1 &lt;&lt; 3)</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_96				(1 &lt;&lt; 4)</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_176				(1 &lt;&lt; 5)</span>
<span class="cp">#define PS3AV_CMD_AV_LAYOUT_192				(1 &lt;&lt; 6)</span>
<span class="cm">/* hdmi_mode */</span>
<span class="cp">#define PS3AV_CMD_AV_HDMI_MODE_NORMAL			0xff</span>
<span class="cp">#define PS3AV_CMD_AV_HDMI_HDCP_OFF			0x01</span>
<span class="cp">#define PS3AV_CMD_AV_HDMI_EDID_PASS			0x80</span>
<span class="cp">#define PS3AV_CMD_AV_HDMI_DVI				0x40</span>

<span class="cm">/* for video module */</span>
<span class="cm">/* video_head */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_HEAD_A				0x0000</span>
<span class="cp">#define PS3AV_CMD_VIDEO_HEAD_B				0x0001</span>
<span class="cm">/* video_cs_out video_cs_in */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_NONE				0x0000</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_RGB_8			0x0001</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV444_8			0x0002</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV422_8			0x0003</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_XVYCC_8			0x0004</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_RGB_10			0x0005</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV444_10			0x0006</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV422_10			0x0007</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_XVYCC_10			0x0008</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_RGB_12			0x0009</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV444_12			0x000a</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV422_12			0x000b</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_XVYCC_12			0x000c</span>
<span class="cm">/* video_vid */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_NONE			0x0000</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_480I			0x0001</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_576I			0x0003</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_480P			0x0005</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_576P			0x0006</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_1080I_60HZ			0x0007</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_1080I_50HZ			0x0008</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_720P_60HZ			0x0009</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_720P_50HZ			0x000a</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_1080P_60HZ			0x000b</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_1080P_50HZ			0x000c</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_WXGA			0x000d</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_SXGA			0x000e</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_WUXGA			0x000f</span>
<span class="cp">#define PS3AV_CMD_VIDEO_VID_480I_A			0x0010</span>
<span class="cm">/* video_format */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_FORMAT_BLACK			0x0000</span>
<span class="cp">#define PS3AV_CMD_VIDEO_FORMAT_ARGB_8BIT		0x0007</span>
<span class="cm">/* video_order */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_ORDER_RGB			0x0000</span>
<span class="cp">#define PS3AV_CMD_VIDEO_ORDER_BGR			0x0001</span>
<span class="cm">/* video_fmt */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_FMT_X8R8G8B8			0x0000</span>
<span class="cm">/* video_out_format */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_OUT_FORMAT_RGB_12BIT		0x0000</span>
<span class="cm">/* video_cl_cnv */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CL_CNV_ENABLE_LUT		0x0000</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CL_CNV_DISABLE_LUT		0x0010</span>
<span class="cm">/* video_sync */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_SYNC_VSYNC			0x0001</span>
<span class="cp">#define PS3AV_CMD_VIDEO_SYNC_CSYNC			0x0004</span>
<span class="cp">#define PS3AV_CMD_VIDEO_SYNC_HSYNC			0x0010</span>

<span class="cm">/* for audio module */</span>
<span class="cm">/* num_of_ch */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_2			0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_3			0x0001</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_4			0x0002</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_5			0x0003</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_6			0x0004</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_7			0x0005</span>
<span class="cp">#define PS3AV_CMD_AUDIO_NUM_OF_CH_8			0x0006</span>
<span class="cm">/* audio_fs */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_32K				0x0001</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_44K				0x0002</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_48K				0x0003</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_88K				0x0004</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_96K				0x0005</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_176K				0x0006</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FS_192K				0x0007</span>
<span class="cm">/* audio_word_bits */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_WORD_BITS_16			0x0001</span>
<span class="cp">#define PS3AV_CMD_AUDIO_WORD_BITS_20			0x0002</span>
<span class="cp">#define PS3AV_CMD_AUDIO_WORD_BITS_24			0x0003</span>
<span class="cm">/* audio_format */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FORMAT_PCM			0x0001</span>
<span class="cp">#define PS3AV_CMD_AUDIO_FORMAT_BITSTREAM		0x00ff</span>
<span class="cm">/* audio_source */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_SOURCE_SERIAL			0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_SOURCE_SPDIF			0x0001</span>
<span class="cm">/* audio_swap */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_SWAP_0				0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_SWAP_1				0x0000</span>
<span class="cm">/* audio_map */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_MAP_OUTPUT_0			0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_MAP_OUTPUT_1			0x0001</span>
<span class="cp">#define PS3AV_CMD_AUDIO_MAP_OUTPUT_2			0x0002</span>
<span class="cp">#define PS3AV_CMD_AUDIO_MAP_OUTPUT_3			0x0003</span>
<span class="cm">/* audio_layout */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_LAYOUT_2CH			0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_LAYOUT_6CH			0x000b	</span><span class="cm">/* LREClr */</span><span class="cp"></span>
<span class="cp">#define PS3AV_CMD_AUDIO_LAYOUT_8CH			0x001f	</span><span class="cm">/* LREClrXY */</span><span class="cp"></span>
<span class="cm">/* audio_downmix */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_DOWNMIX_PERMITTED		0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_DOWNMIX_PROHIBITED		0x0001</span>

<span class="cm">/* audio_port */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_PORT_HDMI_0			( 1 &lt;&lt; 0 )</span>
<span class="cp">#define PS3AV_CMD_AUDIO_PORT_HDMI_1			( 1 &lt;&lt; 1 )</span>
<span class="cp">#define PS3AV_CMD_AUDIO_PORT_AVMULTI_0			( 1 &lt;&lt; 10 )</span>
<span class="cp">#define PS3AV_CMD_AUDIO_PORT_SPDIF_0			( 1 &lt;&lt; 20 )</span>
<span class="cp">#define PS3AV_CMD_AUDIO_PORT_SPDIF_1			( 1 &lt;&lt; 21 )</span>

<span class="cm">/* audio_ctrl_id */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_ID_DAC_RESET		0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_ID_DAC_DE_EMPHASIS		0x0001</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_ID_AVCLK			0x0002</span>
<span class="cm">/* audio_ctrl_data[0] reset */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_RESET_NEGATE		0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_RESET_ASSERT		0x0001</span>
<span class="cm">/* audio_ctrl_data[0] de-emphasis */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_DE_EMPHASIS_OFF		0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_DE_EMPHASIS_ON		0x0001</span>
<span class="cm">/* audio_ctrl_data[0] avclk */</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_AVCLK_22			0x0000</span>
<span class="cp">#define PS3AV_CMD_AUDIO_CTRL_AVCLK_18			0x0001</span>

<span class="cm">/* av_vid */</span>
<span class="cm">/* do not use these params directly, use vid_video2av */</span>
<span class="cp">#define PS3AV_CMD_AV_VID_480I				0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_VID_480P				0x0001</span>
<span class="cp">#define PS3AV_CMD_AV_VID_720P_60HZ			0x0002</span>
<span class="cp">#define PS3AV_CMD_AV_VID_1080I_60HZ			0x0003</span>
<span class="cp">#define PS3AV_CMD_AV_VID_1080P_60HZ			0x0004</span>
<span class="cp">#define PS3AV_CMD_AV_VID_576I				0x0005</span>
<span class="cp">#define PS3AV_CMD_AV_VID_576P				0x0006</span>
<span class="cp">#define PS3AV_CMD_AV_VID_720P_50HZ			0x0007</span>
<span class="cp">#define PS3AV_CMD_AV_VID_1080I_50HZ			0x0008</span>
<span class="cp">#define PS3AV_CMD_AV_VID_1080P_50HZ			0x0009</span>
<span class="cp">#define PS3AV_CMD_AV_VID_WXGA				0x000a</span>
<span class="cp">#define PS3AV_CMD_AV_VID_SXGA				0x000b</span>
<span class="cp">#define PS3AV_CMD_AV_VID_WUXGA				0x000c</span>
<span class="cm">/* av_cs_out av_cs_in */</span>
<span class="cm">/* use cs_video2av() */</span>
<span class="cp">#define PS3AV_CMD_AV_CS_RGB_8				0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_CS_YUV444_8			0x0001</span>
<span class="cp">#define PS3AV_CMD_AV_CS_YUV422_8			0x0002</span>
<span class="cp">#define PS3AV_CMD_AV_CS_XVYCC_8				0x0003</span>
<span class="cp">#define PS3AV_CMD_AV_CS_RGB_10				0x0004</span>
<span class="cp">#define PS3AV_CMD_AV_CS_YUV444_10			0x0005</span>
<span class="cp">#define PS3AV_CMD_AV_CS_YUV422_10			0x0006</span>
<span class="cp">#define PS3AV_CMD_AV_CS_XVYCC_10			0x0007</span>
<span class="cp">#define PS3AV_CMD_AV_CS_RGB_12				0x0008</span>
<span class="cp">#define PS3AV_CMD_AV_CS_YUV444_12			0x0009</span>
<span class="cp">#define PS3AV_CMD_AV_CS_YUV422_12			0x000a</span>
<span class="cp">#define PS3AV_CMD_AV_CS_XVYCC_12			0x000b</span>
<span class="cp">#define PS3AV_CMD_AV_CS_8				0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_CS_10				0x0001</span>
<span class="cp">#define PS3AV_CMD_AV_CS_12				0x0002</span>
<span class="cm">/* dither */</span>
<span class="cp">#define PS3AV_CMD_AV_DITHER_OFF				0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_DITHER_ON				0x0001</span>
<span class="cp">#define PS3AV_CMD_AV_DITHER_8BIT			0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_DITHER_10BIT			0x0002</span>
<span class="cp">#define PS3AV_CMD_AV_DITHER_12BIT			0x0004</span>
<span class="cm">/* super_white */</span>
<span class="cp">#define PS3AV_CMD_AV_SUPER_WHITE_OFF			0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_SUPER_WHITE_ON			0x0001</span>
<span class="cm">/* aspect */</span>
<span class="cp">#define PS3AV_CMD_AV_ASPECT_16_9			0x0000</span>
<span class="cp">#define PS3AV_CMD_AV_ASPECT_4_3				0x0001</span>
<span class="cm">/* video_cs_cnv() */</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_RGB				0x0001</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV422			0x0002</span>
<span class="cp">#define PS3AV_CMD_VIDEO_CS_YUV444			0x0003</span>

<span class="cm">/* for broadcast automode */</span>
<span class="cp">#define PS3AV_RESBIT_720x480P			0x0003	</span><span class="cm">/* 0x0001 | 0x0002 */</span><span class="cp"></span>
<span class="cp">#define PS3AV_RESBIT_720x576P			0x0003	</span><span class="cm">/* 0x0001 | 0x0002 */</span><span class="cp"></span>
<span class="cp">#define PS3AV_RESBIT_1280x720P			0x0004</span>
<span class="cp">#define PS3AV_RESBIT_1920x1080I			0x0008</span>
<span class="cp">#define PS3AV_RESBIT_1920x1080P			0x4000</span>
<span class="cp">#define PS3AV_RES_MASK_60			(PS3AV_RESBIT_720x480P \</span>
<span class="cp">						| PS3AV_RESBIT_1280x720P \</span>
<span class="cp">						| PS3AV_RESBIT_1920x1080I \</span>
<span class="cp">						| PS3AV_RESBIT_1920x1080P)</span>
<span class="cp">#define PS3AV_RES_MASK_50			(PS3AV_RESBIT_720x576P \</span>
<span class="cp">						| PS3AV_RESBIT_1280x720P \</span>
<span class="cp">						| PS3AV_RESBIT_1920x1080I \</span>
<span class="cp">						| PS3AV_RESBIT_1920x1080P)</span>

<span class="cm">/* for VESA automode */</span>
<span class="cp">#define PS3AV_RESBIT_VGA			0x0001</span>
<span class="cp">#define PS3AV_RESBIT_WXGA			0x0002</span>
<span class="cp">#define PS3AV_RESBIT_SXGA			0x0004</span>
<span class="cp">#define PS3AV_RESBIT_WUXGA			0x0008</span>
<span class="cp">#define PS3AV_RES_MASK_VESA			(PS3AV_RESBIT_WXGA |\</span>
<span class="cp">						 PS3AV_RESBIT_SXGA |\</span>
<span class="cp">						 PS3AV_RESBIT_WUXGA)</span>

<span class="cp">#define PS3AV_MONITOR_TYPE_HDMI			1	</span><span class="cm">/* HDMI */</span><span class="cp"></span>
<span class="cp">#define PS3AV_MONITOR_TYPE_DVI			2	</span><span class="cm">/* DVI */</span><span class="cp"></span>


<span class="cm">/* for video mode */</span>
<span class="k">enum</span> <span class="n">ps3av_mode_num</span> <span class="p">{</span>
	<span class="n">PS3AV_MODE_AUTO</span>				<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_480I</span>				<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_480P</span>				<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_720P60</span>			<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_1080I60</span>			<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_1080P60</span>			<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_576I</span>				<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_576P</span>				<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_720P50</span>			<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_1080I50</span>			<span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_1080P50</span>			<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_WXGA</span>				<span class="o">=</span> <span class="mi">11</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_SXGA</span>				<span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="n">PS3AV_MODE_WUXGA</span>			<span class="o">=</span> <span class="mi">13</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define PS3AV_MODE_MASK				0x000F</span>
<span class="cp">#define PS3AV_MODE_HDCP_OFF			0x1000	</span><span class="cm">/* Retail PS3 product doesn&#39;t support this */</span><span class="cp"></span>
<span class="cp">#define PS3AV_MODE_DITHER			0x0800</span>
<span class="cp">#define PS3AV_MODE_COLOR			0x0400</span>
<span class="cp">#define PS3AV_MODE_WHITE			0x0200</span>
<span class="cp">#define PS3AV_MODE_FULL				0x0080</span>
<span class="cp">#define PS3AV_MODE_DVI				0x0040</span>
<span class="cp">#define PS3AV_MODE_RGB				0x0020</span>


<span class="cp">#define PS3AV_DEFAULT_HDMI_MODE_ID_REG_60	PS3AV_MODE_480P</span>
<span class="cp">#define PS3AV_DEFAULT_AVMULTI_MODE_ID_REG_60	PS3AV_MODE_480I</span>
<span class="cp">#define PS3AV_DEFAULT_HDMI_MODE_ID_REG_50	PS3AV_MODE_576P</span>
<span class="cp">#define PS3AV_DEFAULT_AVMULTI_MODE_ID_REG_50	PS3AV_MODE_576I</span>

<span class="cp">#define PS3AV_REGION_60				0x01</span>
<span class="cp">#define PS3AV_REGION_50				0x02</span>
<span class="cp">#define PS3AV_REGION_RGB			0x10</span>

<span class="cp">#define get_status(buf)				(((__u32 *)buf)[2])</span>
<span class="cp">#define PS3AV_HDR_SIZE				4	</span><span class="cm">/* version + size */</span><span class="cp"></span>


<span class="cm">/** command packet structure **/</span>
<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">version</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* size of command packet */</span>
	<span class="n">u32</span> <span class="n">cid</span><span class="p">;</span>		<span class="cm">/* command id */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_reply_hdr</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">version</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">size</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">cid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* backend: initialization */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_init</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">event_bit</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* backend: finalize */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_fin</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="cm">/* recv */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* backend: get port */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_get_hw_conf</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="cm">/* recv */</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">num_of_hdmi</span><span class="p">;</span>	<span class="cm">/* out: number of hdmi */</span>
	<span class="n">u16</span> <span class="n">num_of_avmulti</span><span class="p">;</span>	<span class="cm">/* out: number of avmulti */</span>
	<span class="n">u16</span> <span class="n">num_of_spdif</span><span class="p">;</span>	<span class="cm">/* out: number of hdmi */</span>
	<span class="n">u16</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* backend: get monitor info */</span>
<span class="k">struct</span> <span class="n">ps3av_info_resolution</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">res_bits</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">native</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_info_cs</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">rgb</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">yuv444</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">yuv422</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_info_color</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">red_x</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">red_y</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">green_x</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">green_y</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">blue_x</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">blue_y</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">white_x</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">white_y</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">gamma</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_info_audio</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">max_num_of_ch</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">fs</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">sbit</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_info_monitor</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">avport</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">monitor_id</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
	<span class="n">u8</span> <span class="n">monitor_type</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">monitor_name</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">ps3av_info_resolution</span> <span class="n">res_60</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_info_resolution</span> <span class="n">res_50</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_info_resolution</span> <span class="n">res_other</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_info_resolution</span> <span class="n">res_vesa</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_info_cs</span> <span class="n">cs</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_info_color</span> <span class="n">color</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">supported_ai</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">speaker_info</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">num_of_audio_block</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_info_audio</span> <span class="n">audio</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>	<span class="cm">/* 0 or more audio blocks */</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">169</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">ps3av_pkt_av_get_monitor_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport */</span>
	<span class="n">u16</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="cm">/* recv */</span>
	<span class="k">struct</span> <span class="n">ps3av_info_monitor</span> <span class="n">info</span><span class="p">;</span>	<span class="cm">/* out: monitor info */</span>
<span class="p">};</span>

<span class="cm">/* backend: enable/disable event */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_event</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">event_bit</span><span class="p">;</span>		<span class="cm">/* in */</span>
<span class="p">};</span>

<span class="cm">/* backend: video cs param */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_video_cs</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport */</span>
	<span class="n">u16</span> <span class="n">av_vid</span><span class="p">;</span>		<span class="cm">/* in: video resolution */</span>
	<span class="n">u16</span> <span class="n">av_cs_out</span><span class="p">;</span>		<span class="cm">/* in: output color space */</span>
	<span class="n">u16</span> <span class="n">av_cs_in</span><span class="p">;</span>		<span class="cm">/* in: input color space */</span>
	<span class="n">u8</span> <span class="n">dither</span><span class="p">;</span>		<span class="cm">/* in: dither bit length */</span>
	<span class="n">u8</span> <span class="n">bitlen_out</span><span class="p">;</span>		<span class="cm">/* in: bit length */</span>
	<span class="n">u8</span> <span class="n">super_white</span><span class="p">;</span>		<span class="cm">/* in: super white */</span>
	<span class="n">u8</span> <span class="n">aspect</span><span class="p">;</span>		<span class="cm">/* in: aspect ratio */</span>
<span class="p">};</span>

<span class="cm">/* backend: video mute */</span>
<span class="k">struct</span> <span class="n">ps3av_av_mute</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport */</span>
	<span class="n">u16</span> <span class="n">mute</span><span class="p">;</span>		<span class="cm">/* in: mute on/off */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_pkt_av_video_mute</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_av_mute</span> <span class="n">mute</span><span class="p">[</span><span class="n">PS3AV_MUTE_PORT_MAX</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* backend: video disable signal */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_video_disable_sig</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport */</span>
	<span class="n">u16</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* backend: audio param */</span>
<span class="k">struct</span> <span class="n">ps3av_audio_info_frame</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">pb1_bit</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">ct</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">rsv</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">cc</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">pb1</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pb2_bit</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">rsv</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">sf</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">ss</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">pb2</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pb3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">pb4</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pb5_bit</span> <span class="p">{</span>
		<span class="n">u8</span> <span class="n">dm</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">lsv</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
		<span class="n">u8</span> <span class="n">rsv</span><span class="o">:</span><span class="mi">3</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">pb5</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_pkt_av_audio_param</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport */</span>
	<span class="n">u16</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mclk</span><span class="p">;</span>		<span class="cm">/* in: audio mclk */</span>
	<span class="n">u8</span> <span class="n">ns</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* in: audio ns val */</span>
	<span class="n">u8</span> <span class="n">enable</span><span class="p">;</span>		<span class="cm">/* in: audio enable */</span>
	<span class="n">u8</span> <span class="n">swaplr</span><span class="p">;</span>		<span class="cm">/* in: audio swap */</span>
	<span class="n">u8</span> <span class="n">fifomap</span><span class="p">;</span>		<span class="cm">/* in: audio fifomap */</span>
	<span class="n">u8</span> <span class="n">inputctrl</span><span class="p">;</span>		<span class="cm">/* in: audio input ctrl */</span>
	<span class="n">u8</span> <span class="n">inputlen</span><span class="p">;</span>		<span class="cm">/* in: sample bit size */</span>
	<span class="n">u8</span> <span class="n">layout</span><span class="p">;</span>		<span class="cm">/* in: speaker layout param */</span>
	<span class="k">struct</span> <span class="n">ps3av_audio_info_frame</span> <span class="n">info</span><span class="p">;</span>	<span class="cm">/* in: info */</span>
	<span class="n">u8</span> <span class="n">chstat</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>		<span class="cm">/* in: ch stat */</span>
<span class="p">};</span>

<span class="cm">/* backend: audio_mute */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_audio_mute</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_av_mute</span> <span class="n">mute</span><span class="p">[</span><span class="n">PS3AV_MUTE_PORT_MAX</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* backend: hdmi_mode */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_hdmi_mode</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">mode</span><span class="p">;</span>		<span class="cm">/* in: hdmi_mode */</span>
	<span class="n">u8</span> <span class="n">reserved0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">reserved2</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* backend: tv_mute */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_av_tv_mute</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport HDMI only */</span>
	<span class="n">u16</span> <span class="n">mute</span><span class="p">;</span>		<span class="cm">/* in: mute */</span>
<span class="p">};</span>

<span class="cm">/* video: initialize */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_video_init</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="cm">/* recv */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* video: mode setting */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_video_mode</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">video_head</span><span class="p">;</span>		<span class="cm">/* in: head */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">video_vid</span><span class="p">;</span>		<span class="cm">/* in: video resolution */</span>
	<span class="n">u16</span> <span class="n">reserved1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">width</span><span class="p">;</span>		<span class="cm">/* in: width in pixel */</span>
	<span class="n">u16</span> <span class="n">reserved2</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">height</span><span class="p">;</span>		<span class="cm">/* in: height in pixel */</span>
	<span class="n">u32</span> <span class="n">pitch</span><span class="p">;</span>		<span class="cm">/* in: line size in byte */</span>
	<span class="n">u32</span> <span class="n">video_out_format</span><span class="p">;</span>	<span class="cm">/* in: out format */</span>
	<span class="n">u32</span> <span class="n">video_format</span><span class="p">;</span>	<span class="cm">/* in: input frame buffer format */</span>
	<span class="n">u8</span> <span class="n">reserved3</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">video_cl_cnv</span><span class="p">;</span>	<span class="cm">/* in: color conversion */</span>
	<span class="n">u16</span> <span class="n">video_order</span><span class="p">;</span>	<span class="cm">/* in: input RGB order */</span>
	<span class="n">u32</span> <span class="n">reserved4</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* video: format */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_video_format</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">video_head</span><span class="p">;</span>		<span class="cm">/* in: head */</span>
	<span class="n">u32</span> <span class="n">video_format</span><span class="p">;</span>	<span class="cm">/* in: frame buffer format */</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">video_cl_cnv</span><span class="p">;</span>	<span class="cm">/* in: color conversion */</span>
	<span class="n">u16</span> <span class="n">video_order</span><span class="p">;</span>	<span class="cm">/* in: input RGB order */</span>
<span class="p">};</span>

<span class="cm">/* video: pitch */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_video_pitch</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">version</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* size of command packet */</span>
	<span class="n">u32</span> <span class="n">cid</span><span class="p">;</span>		<span class="cm">/* command id */</span>
	<span class="n">u32</span> <span class="n">video_head</span><span class="p">;</span>		<span class="cm">/* in: head */</span>
	<span class="n">u32</span> <span class="n">pitch</span><span class="p">;</span>		<span class="cm">/* in: line size in byte */</span>
<span class="p">};</span>

<span class="cm">/* audio: initialize */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_audio_init</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="cm">/* recv */</span>
	<span class="n">u32</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* audio: mode setting */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_audio_mode</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport */</span>
	<span class="n">u8</span> <span class="n">reserved0</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mask</span><span class="p">;</span>		<span class="cm">/* in: mask */</span>
	<span class="n">u32</span> <span class="n">audio_num_of_ch</span><span class="p">;</span>	<span class="cm">/* in: number of ch */</span>
	<span class="n">u32</span> <span class="n">audio_fs</span><span class="p">;</span>		<span class="cm">/* in: sampling freq */</span>
	<span class="n">u32</span> <span class="n">audio_word_bits</span><span class="p">;</span>	<span class="cm">/* in: sample bit size */</span>
	<span class="n">u32</span> <span class="n">audio_format</span><span class="p">;</span>	<span class="cm">/* in: audio output format */</span>
	<span class="n">u32</span> <span class="n">audio_source</span><span class="p">;</span>	<span class="cm">/* in: audio source */</span>
	<span class="n">u8</span> <span class="n">audio_enable</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* in: audio enable */</span>
	<span class="n">u8</span> <span class="n">audio_swap</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* in: audio swap */</span>
	<span class="n">u8</span> <span class="n">audio_map</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* in: audio map */</span>
	<span class="n">u32</span> <span class="n">audio_layout</span><span class="p">;</span>	<span class="cm">/* in: speaker layout */</span>
	<span class="n">u32</span> <span class="n">audio_downmix</span><span class="p">;</span>	<span class="cm">/* in: audio downmix permission */</span>
	<span class="n">u32</span> <span class="n">audio_downmix_level</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">audio_cs_info</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>	<span class="cm">/* in: IEC channel status */</span>
<span class="p">};</span>

<span class="cm">/* audio: mute */</span>
<span class="k">struct</span> <span class="n">ps3av_audio_mute</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: opt_port optical */</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">mute</span><span class="p">;</span>		<span class="cm">/* in: mute */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ps3av_pkt_audio_mute</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ps3av_audio_mute</span> <span class="n">mute</span><span class="p">[</span><span class="n">PS3AV_OPT_PORT_MAX</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* audio: active/inactive */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_audio_active</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">audio_port</span><span class="p">;</span>		<span class="cm">/* in: audio active/inactive port */</span>
<span class="p">};</span>

<span class="cm">/* audio: SPDIF user bit */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_audio_spdif_bit</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">version</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* size of command packet */</span>
	<span class="n">u32</span> <span class="n">cid</span><span class="p">;</span>		<span class="cm">/* command id */</span>
	<span class="n">u8</span> <span class="n">avport</span><span class="p">;</span>		<span class="cm">/* in: avport SPDIF only */</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">audio_port</span><span class="p">;</span>		<span class="cm">/* in: SPDIF only */</span>
	<span class="n">u32</span> <span class="n">spdif_bit_data</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>	<span class="cm">/* in: user bit data */</span>
<span class="p">};</span>

<span class="cm">/* audio: audio control */</span>
<span class="k">struct</span> <span class="n">ps3av_pkt_audio_ctrl</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">version</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">size</span><span class="p">;</span>		<span class="cm">/* size of command packet */</span>
	<span class="n">u32</span> <span class="n">cid</span><span class="p">;</span>		<span class="cm">/* command id */</span>
	<span class="n">u32</span> <span class="n">audio_ctrl_id</span><span class="p">;</span>	<span class="cm">/* in: control id */</span>
	<span class="n">u32</span> <span class="n">audio_ctrl_data</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* in: control data */</span>
<span class="p">};</span>

<span class="cm">/* avb:param */</span>
<span class="cp">#define PS3AV_PKT_AVB_PARAM_MAX_BUF_SIZE	\</span>
<span class="cp">	(PS3AV_AVB_NUM_VIDEO*sizeof(struct ps3av_pkt_video_mode) + \</span>
<span class="cp">	 PS3AV_AVB_NUM_AUDIO*sizeof(struct ps3av_pkt_audio_mode) + \</span>
<span class="cp">	 PS3AV_AVB_NUM_AV_VIDEO*sizeof(struct ps3av_pkt_av_video_cs) + \</span>
<span class="cp">	 PS3AV_AVB_NUM_AV_AUDIO*sizeof(struct ps3av_pkt_av_audio_param))</span>

<span class="k">struct</span> <span class="n">ps3av_pkt_avb_param</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="n">send_hdr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">num_of_video_pkt</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">num_of_audio_pkt</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">num_of_av_video_pkt</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">num_of_av_audio_pkt</span><span class="p">;</span>
	<span class="cm">/*</span>
<span class="cm">	 * The actual buffer layout depends on the fields above:</span>
<span class="cm">	 *</span>
<span class="cm">	 * struct ps3av_pkt_video_mode video[num_of_video_pkt];</span>
<span class="cm">	 * struct ps3av_pkt_audio_mode audio[num_of_audio_pkt];</span>
<span class="cm">	 * struct ps3av_pkt_av_video_cs av_video[num_of_av_video_pkt];</span>
<span class="cm">	 * struct ps3av_pkt_av_audio_param av_audio[num_of_av_audio_pkt];</span>
<span class="cm">	 */</span>
	<span class="n">u8</span> <span class="n">buf</span><span class="p">[</span><span class="n">PS3AV_PKT_AVB_PARAM_MAX_BUF_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* channel status */</span>
<span class="k">extern</span> <span class="n">u8</span> <span class="n">ps3av_mode_cs_info</span><span class="p">[];</span>

<span class="cm">/** command status **/</span>
<span class="cp">#define PS3AV_STATUS_SUCCESS			0x0000	</span><span class="cm">/* success */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_RECEIVE_VUART_ERROR	0x0001	</span><span class="cm">/* receive vuart error */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_SYSCON_COMMUNICATE_FAIL	0x0002	</span><span class="cm">/* syscon communication error */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_COMMAND		0x0003	</span><span class="cm">/* obsolete invalid CID */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_PORT		0x0004	</span><span class="cm">/* invalid port number */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_VID		0x0005	</span><span class="cm">/* invalid video format */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_COLOR_SPACE	0x0006	</span><span class="cm">/* invalid video colose space */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_FS			0x0007	</span><span class="cm">/* invalid audio sampling freq */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_AUDIO_CH		0x0008	</span><span class="cm">/* invalid audio channel number */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_UNSUPPORTED_VERSION	0x0009	</span><span class="cm">/* version mismatch  */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_SAMPLE_SIZE	0x000a	</span><span class="cm">/* invalid audio sample bit size */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_FAILURE			0x000b	</span><span class="cm">/* other failures */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_UNSUPPORTED_COMMAND	0x000c	</span><span class="cm">/* unsupported cid */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_BUFFER_OVERFLOW		0x000d	</span><span class="cm">/* write buffer overflow */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_VIDEO_PARAM	0x000e	</span><span class="cm">/* invalid video param */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_NO_SEL			0x000f	</span><span class="cm">/* not exist selector */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_AV_PARAM		0x0010	</span><span class="cm">/* invalid backend param */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_INVALID_AUDIO_PARAM	0x0011	</span><span class="cm">/* invalid audio param */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_UNSUPPORTED_HDMI_MODE	0x0012	</span><span class="cm">/* unsupported hdmi mode */</span><span class="cp"></span>
<span class="cp">#define PS3AV_STATUS_NO_SYNC_HEAD		0x0013	</span><span class="cm">/* sync head failed */</span><span class="cp"></span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ps3av_set_hdr</span><span class="p">(</span><span class="n">u32</span><span class="p">,</span> <span class="n">u16</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_do_pkt</span><span class="p">(</span><span class="n">u32</span><span class="p">,</span> <span class="n">u16</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">,</span> <span class="k">struct</span> <span class="n">ps3av_send_hdr</span> <span class="o">*</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_fin</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_av_video_mute</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_av_video_disable_sig</span><span class="p">(</span><span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_av_tv_mute</span><span class="p">(</span><span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_enable_event</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_av_hdmi_mode</span><span class="p">(</span><span class="n">u8</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">ps3av_cmd_set_av_video_cs</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">ps3av_cmd_set_video_mode</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_video_format_black</span><span class="p">(</span><span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_av_audio_mute</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">ps3av_cmd_set_av_audio_param</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span>
					<span class="k">const</span> <span class="k">struct</span> <span class="n">ps3av_pkt_audio_mode</span> <span class="o">*</span><span class="p">,</span>
					<span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">ps3av_cmd_set_audio_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">ps3av_pkt_audio_mode</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span>
				     <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_audio_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">ps3av_pkt_audio_mode</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_audio_mute</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_audio_active</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_avb_param</span><span class="p">(</span><span class="k">struct</span> <span class="n">ps3av_pkt_avb_param</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_av_get_hw_conf</span><span class="p">(</span><span class="k">struct</span> <span class="n">ps3av_pkt_av_get_hw_conf</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_cmd_video_get_monitor_info</span><span class="p">(</span><span class="k">struct</span> <span class="n">ps3av_pkt_av_get_monitor_info</span> <span class="o">*</span><span class="p">,</span>
					    <span class="n">u32</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_set_video_mode</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_set_audio_mode</span><span class="p">(</span><span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">,</span> <span class="n">u32</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_get_auto_mode</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_get_mode</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_video_mode2res</span><span class="p">(</span><span class="n">u32</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_video_mute</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_audio_mute</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_audio_mute_analog</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_dev_open</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">ps3av_dev_close</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#endif	</span><span class="cm">/* _ASM_POWERPC_PS3AV_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
