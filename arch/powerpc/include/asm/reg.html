<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Contains the definition of registers common to all PowerPC variants.</span>
<span class="cm"> * If a register definition has been changed in a different PowerPC</span>
<span class="cm"> * variant, we will case it in #ifndef XXX ... #endif, and have the</span>
<span class="cm"> * number used in the Programming Environments Manual For 32-Bit</span>
<span class="cm"> * Implementations of the PowerPC Architecture (a.k.a. Green Book) here.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_POWERPC_REG_H</span>
<span class="cp">#define _ASM_POWERPC_REG_H</span>
<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#include &lt;linux/stringify.h&gt;</span>
<span class="cp">#include &lt;asm/cputable.h&gt;</span>

<span class="cm">/* Pickup Book E specific registers. */</span>
<span class="cp">#if defined(CONFIG_BOOKE) || defined(CONFIG_40x)</span>
<span class="cp">#include &lt;asm/reg_booke.h&gt;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_BOOKE || CONFIG_40x */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_FSL_EMB_PERFMON</span>
<span class="cp">#include &lt;asm/reg_fsl_emb.h&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_8xx</span>
<span class="cp">#include &lt;asm/reg_8xx.h&gt;</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_8xx */</span><span class="cp"></span>

<span class="cp">#define MSR_SF_LG	63              </span><span class="cm">/* Enable 64 bit mode */</span><span class="cp"></span>
<span class="cp">#define MSR_ISF_LG	61              </span><span class="cm">/* Interrupt 64b mode valid on 630 */</span><span class="cp"></span>
<span class="cp">#define MSR_HV_LG 	60              </span><span class="cm">/* Hypervisor state */</span><span class="cp"></span>
<span class="cp">#define MSR_VEC_LG	25	        </span><span class="cm">/* Enable AltiVec */</span><span class="cp"></span>
<span class="cp">#define MSR_VSX_LG	23		</span><span class="cm">/* Enable VSX */</span><span class="cp"></span>
<span class="cp">#define MSR_POW_LG	18		</span><span class="cm">/* Enable Power Management */</span><span class="cp"></span>
<span class="cp">#define MSR_WE_LG	18		</span><span class="cm">/* Wait State Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_TGPR_LG	17		</span><span class="cm">/* TLB Update registers in use */</span><span class="cp"></span>
<span class="cp">#define MSR_CE_LG	17		</span><span class="cm">/* Critical Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_ILE_LG	16		</span><span class="cm">/* Interrupt Little Endian */</span><span class="cp"></span>
<span class="cp">#define MSR_EE_LG	15		</span><span class="cm">/* External Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_PR_LG	14		</span><span class="cm">/* Problem State / Privilege Level */</span><span class="cp"></span>
<span class="cp">#define MSR_FP_LG	13		</span><span class="cm">/* Floating Point enable */</span><span class="cp"></span>
<span class="cp">#define MSR_ME_LG	12		</span><span class="cm">/* Machine Check Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_FE0_LG	11		</span><span class="cm">/* Floating Exception mode 0 */</span><span class="cp"></span>
<span class="cp">#define MSR_SE_LG	10		</span><span class="cm">/* Single Step */</span><span class="cp"></span>
<span class="cp">#define MSR_BE_LG	9		</span><span class="cm">/* Branch Trace */</span><span class="cp"></span>
<span class="cp">#define MSR_DE_LG	9 		</span><span class="cm">/* Debug Exception Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_FE1_LG	8		</span><span class="cm">/* Floating Exception mode 1 */</span><span class="cp"></span>
<span class="cp">#define MSR_IP_LG	6		</span><span class="cm">/* Exception prefix 0x000/0xFFF */</span><span class="cp"></span>
<span class="cp">#define MSR_IR_LG	5 		</span><span class="cm">/* Instruction Relocate */</span><span class="cp"></span>
<span class="cp">#define MSR_DR_LG	4 		</span><span class="cm">/* Data Relocate */</span><span class="cp"></span>
<span class="cp">#define MSR_PE_LG	3		</span><span class="cm">/* Protection Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_PX_LG	2		</span><span class="cm">/* Protection Exclusive Mode */</span><span class="cp"></span>
<span class="cp">#define MSR_PMM_LG	2		</span><span class="cm">/* Performance monitor */</span><span class="cp"></span>
<span class="cp">#define MSR_RI_LG	1		</span><span class="cm">/* Recoverable Exception */</span><span class="cp"></span>
<span class="cp">#define MSR_LE_LG	0 		</span><span class="cm">/* Little Endian */</span><span class="cp"></span>

<span class="cp">#ifdef __ASSEMBLY__</span>
<span class="cp">#define __MASK(X)	(1&lt;&lt;(X))</span>
<span class="cp">#else</span>
<span class="cp">#define __MASK(X)	(1UL&lt;&lt;(X))</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PPC64</span>
<span class="cp">#define MSR_SF		__MASK(MSR_SF_LG)	</span><span class="cm">/* Enable 64 bit mode */</span><span class="cp"></span>
<span class="cp">#define MSR_ISF		__MASK(MSR_ISF_LG)	</span><span class="cm">/* Interrupt 64b mode valid on 630 */</span><span class="cp"></span>
<span class="cp">#define MSR_HV 		__MASK(MSR_HV_LG)	</span><span class="cm">/* Hypervisor state */</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cm">/* so tests for these bits fail on 32-bit */</span>
<span class="cp">#define MSR_SF		0</span>
<span class="cp">#define MSR_ISF		0</span>
<span class="cp">#define MSR_HV		0</span>
<span class="cp">#endif</span>

<span class="cp">#define MSR_VEC		__MASK(MSR_VEC_LG)	</span><span class="cm">/* Enable AltiVec */</span><span class="cp"></span>
<span class="cp">#define MSR_VSX		__MASK(MSR_VSX_LG)	</span><span class="cm">/* Enable VSX */</span><span class="cp"></span>
<span class="cp">#define MSR_POW		__MASK(MSR_POW_LG)	</span><span class="cm">/* Enable Power Management */</span><span class="cp"></span>
<span class="cp">#define MSR_WE		__MASK(MSR_WE_LG)	</span><span class="cm">/* Wait State Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_TGPR	__MASK(MSR_TGPR_LG)	</span><span class="cm">/* TLB Update registers in use */</span><span class="cp"></span>
<span class="cp">#define MSR_CE		__MASK(MSR_CE_LG)	</span><span class="cm">/* Critical Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_ILE		__MASK(MSR_ILE_LG)	</span><span class="cm">/* Interrupt Little Endian */</span><span class="cp"></span>
<span class="cp">#define MSR_EE		__MASK(MSR_EE_LG)	</span><span class="cm">/* External Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_PR		__MASK(MSR_PR_LG)	</span><span class="cm">/* Problem State / Privilege Level */</span><span class="cp"></span>
<span class="cp">#define MSR_FP		__MASK(MSR_FP_LG)	</span><span class="cm">/* Floating Point enable */</span><span class="cp"></span>
<span class="cp">#define MSR_ME		__MASK(MSR_ME_LG)	</span><span class="cm">/* Machine Check Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_FE0		__MASK(MSR_FE0_LG)	</span><span class="cm">/* Floating Exception mode 0 */</span><span class="cp"></span>
<span class="cp">#define MSR_SE		__MASK(MSR_SE_LG)	</span><span class="cm">/* Single Step */</span><span class="cp"></span>
<span class="cp">#define MSR_BE		__MASK(MSR_BE_LG)	</span><span class="cm">/* Branch Trace */</span><span class="cp"></span>
<span class="cp">#define MSR_DE		__MASK(MSR_DE_LG)	</span><span class="cm">/* Debug Exception Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_FE1		__MASK(MSR_FE1_LG)	</span><span class="cm">/* Floating Exception mode 1 */</span><span class="cp"></span>
<span class="cp">#define MSR_IP		__MASK(MSR_IP_LG)	</span><span class="cm">/* Exception prefix 0x000/0xFFF */</span><span class="cp"></span>
<span class="cp">#define MSR_IR		__MASK(MSR_IR_LG)	</span><span class="cm">/* Instruction Relocate */</span><span class="cp"></span>
<span class="cp">#define MSR_DR		__MASK(MSR_DR_LG)	</span><span class="cm">/* Data Relocate */</span><span class="cp"></span>
<span class="cp">#define MSR_PE		__MASK(MSR_PE_LG)	</span><span class="cm">/* Protection Enable */</span><span class="cp"></span>
<span class="cp">#define MSR_PX		__MASK(MSR_PX_LG)	</span><span class="cm">/* Protection Exclusive Mode */</span><span class="cp"></span>
<span class="cp">#ifndef MSR_PMM</span>
<span class="cp">#define MSR_PMM		__MASK(MSR_PMM_LG)	</span><span class="cm">/* Performance monitor */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define MSR_RI		__MASK(MSR_RI_LG)	</span><span class="cm">/* Recoverable Exception */</span><span class="cp"></span>
<span class="cp">#define MSR_LE		__MASK(MSR_LE_LG)	</span><span class="cm">/* Little Endian */</span><span class="cp"></span>

<span class="cp">#if defined(CONFIG_PPC_BOOK3S_64)</span>
<span class="cp">#define MSR_64BIT	MSR_SF</span>

<span class="cm">/* Server variant */</span>
<span class="cp">#define MSR_		MSR_ME | MSR_RI | MSR_IR | MSR_DR | MSR_ISF |MSR_HV</span>
<span class="cp">#define MSR_KERNEL	MSR_ | MSR_64BIT</span>
<span class="cp">#define MSR_USER32	MSR_ | MSR_PR | MSR_EE</span>
<span class="cp">#define MSR_USER64	MSR_USER32 | MSR_64BIT</span>
<span class="cp">#elif defined(CONFIG_PPC_BOOK3S_32) || defined(CONFIG_8xx)</span>
<span class="cm">/* Default MSR for kernel mode. */</span>
<span class="cp">#define MSR_KERNEL	(MSR_ME|MSR_RI|MSR_IR|MSR_DR)</span>
<span class="cp">#define MSR_USER	(MSR_KERNEL|MSR_PR|MSR_EE)</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef MSR_64BIT</span>
<span class="cp">#define MSR_64BIT	0</span>
<span class="cp">#endif</span>

<span class="cm">/* Floating Point Status and Control Register (FPSCR) Fields */</span>
<span class="cp">#define FPSCR_FX	0x80000000	</span><span class="cm">/* FPU exception summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_FEX	0x40000000	</span><span class="cm">/* FPU enabled exception summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VX	0x20000000	</span><span class="cm">/* Invalid operation summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_OX	0x10000000	</span><span class="cm">/* Overflow exception summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_UX	0x08000000	</span><span class="cm">/* Underflow exception summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_ZX	0x04000000	</span><span class="cm">/* Zero-divide exception summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_XX	0x02000000	</span><span class="cm">/* Inexact exception summary */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXSNAN	0x01000000	</span><span class="cm">/* Invalid op for SNaN */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXISI	0x00800000	</span><span class="cm">/* Invalid op for Inv - Inv */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXIDI	0x00400000	</span><span class="cm">/* Invalid op for Inv / Inv */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXZDZ	0x00200000	</span><span class="cm">/* Invalid op for Zero / Zero */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXIMZ	0x00100000	</span><span class="cm">/* Invalid op for Inv * Zero */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXVC	0x00080000	</span><span class="cm">/* Invalid op for Compare */</span><span class="cp"></span>
<span class="cp">#define FPSCR_FR	0x00040000	</span><span class="cm">/* Fraction rounded */</span><span class="cp"></span>
<span class="cp">#define FPSCR_FI	0x00020000	</span><span class="cm">/* Fraction inexact */</span><span class="cp"></span>
<span class="cp">#define FPSCR_FPRF	0x0001f000	</span><span class="cm">/* FPU Result Flags */</span><span class="cp"></span>
<span class="cp">#define FPSCR_FPCC	0x0000f000	</span><span class="cm">/* FPU Condition Codes */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXSOFT	0x00000400	</span><span class="cm">/* Invalid op for software request */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXSQRT	0x00000200	</span><span class="cm">/* Invalid op for square root */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VXCVI	0x00000100	</span><span class="cm">/* Invalid op for integer convert */</span><span class="cp"></span>
<span class="cp">#define FPSCR_VE	0x00000080	</span><span class="cm">/* Invalid op exception enable */</span><span class="cp"></span>
<span class="cp">#define FPSCR_OE	0x00000040	</span><span class="cm">/* IEEE overflow exception enable */</span><span class="cp"></span>
<span class="cp">#define FPSCR_UE	0x00000020	</span><span class="cm">/* IEEE underflow exception enable */</span><span class="cp"></span>
<span class="cp">#define FPSCR_ZE	0x00000010	</span><span class="cm">/* IEEE zero divide exception enable */</span><span class="cp"></span>
<span class="cp">#define FPSCR_XE	0x00000008	</span><span class="cm">/* FP inexact exception enable */</span><span class="cp"></span>
<span class="cp">#define FPSCR_NI	0x00000004	</span><span class="cm">/* FPU non IEEE-Mode */</span><span class="cp"></span>
<span class="cp">#define FPSCR_RN	0x00000003	</span><span class="cm">/* FPU rounding control */</span><span class="cp"></span>

<span class="cm">/* Bit definitions for SPEFSCR. */</span>
<span class="cp">#define SPEFSCR_SOVH	0x80000000	</span><span class="cm">/* Summary integer overflow high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_OVH	0x40000000	</span><span class="cm">/* Integer overflow high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FGH	0x20000000	</span><span class="cm">/* Embedded FP guard bit high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FXH	0x10000000	</span><span class="cm">/* Embedded FP sticky bit high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FINVH	0x08000000	</span><span class="cm">/* Embedded FP invalid operation high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FDBZH	0x04000000	</span><span class="cm">/* Embedded FP div by zero high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FUNFH	0x02000000	</span><span class="cm">/* Embedded FP underflow high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FOVFH	0x01000000	</span><span class="cm">/* Embedded FP overflow high */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FINXS	0x00200000	</span><span class="cm">/* Embedded FP inexact sticky */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FINVS	0x00100000	</span><span class="cm">/* Embedded FP invalid op. sticky */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FDBZS	0x00080000	</span><span class="cm">/* Embedded FP div by zero sticky */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FUNFS	0x00040000	</span><span class="cm">/* Embedded FP underflow sticky */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FOVFS	0x00020000	</span><span class="cm">/* Embedded FP overflow sticky */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_MODE	0x00010000	</span><span class="cm">/* Embedded FP mode */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_SOV	0x00008000	</span><span class="cm">/* Integer summary overflow */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_OV	0x00004000	</span><span class="cm">/* Integer overflow */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FG	0x00002000	</span><span class="cm">/* Embedded FP guard bit */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FX	0x00001000	</span><span class="cm">/* Embedded FP sticky bit */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FINV	0x00000800	</span><span class="cm">/* Embedded FP invalid operation */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FDBZ	0x00000400	</span><span class="cm">/* Embedded FP div by zero */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FUNF	0x00000200	</span><span class="cm">/* Embedded FP underflow */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FOVF	0x00000100	</span><span class="cm">/* Embedded FP overflow */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FINXE	0x00000040	</span><span class="cm">/* Embedded FP inexact enable */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FINVE	0x00000020	</span><span class="cm">/* Embedded FP invalid op. enable */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FDBZE	0x00000010	</span><span class="cm">/* Embedded FP div by zero enable */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FUNFE	0x00000008	</span><span class="cm">/* Embedded FP underflow enable */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FOVFE	0x00000004	</span><span class="cm">/* Embedded FP overflow enable */</span><span class="cp"></span>
<span class="cp">#define SPEFSCR_FRMC 	0x00000003	</span><span class="cm">/* Embedded FP rounding mode control */</span><span class="cp"></span>

<span class="cm">/* Special Purpose Registers (SPRNs)*/</span>

<span class="cp">#ifdef CONFIG_40x</span>
<span class="cp">#define SPRN_PID	0x3B1	</span><span class="cm">/* Process ID */</span><span class="cp"></span>
<span class="cp">#else</span>
<span class="cp">#define SPRN_PID	0x030	</span><span class="cm">/* Process ID */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_BOOKE</span>
<span class="cp">#define SPRN_PID0	SPRN_PID</span><span class="cm">/* Process ID Register 0 */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#define SPRN_CTR	0x009	</span><span class="cm">/* Count Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DSCR	0x11</span>
<span class="cp">#define SPRN_CFAR	0x1c	</span><span class="cm">/* Come From Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_AMR	0x1d	</span><span class="cm">/* Authority Mask Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_UAMOR	0x9d	</span><span class="cm">/* User Authority Mask Override Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_AMOR	0x15d	</span><span class="cm">/* Authority Mask Override Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_ACOP	0x1F	</span><span class="cm">/* Available Coprocessor Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_CTRLF	0x088</span>
<span class="cp">#define SPRN_CTRLT	0x098</span>
<span class="cp">#define   CTRL_CT	0xc0000000	</span><span class="cm">/* current thread */</span><span class="cp"></span>
<span class="cp">#define   CTRL_CT0	0x80000000	</span><span class="cm">/* thread 0 */</span><span class="cp"></span>
<span class="cp">#define   CTRL_CT1	0x40000000	</span><span class="cm">/* thread 1 */</span><span class="cp"></span>
<span class="cp">#define   CTRL_TE	0x00c00000	</span><span class="cm">/* thread enable */</span><span class="cp"></span>
<span class="cp">#define   CTRL_RUNLATCH	0x1</span>
<span class="cp">#define SPRN_DABR	0x3F5	</span><span class="cm">/* Data Address Breakpoint Register */</span><span class="cp"></span>
<span class="cp">#define   DABR_TRANSLATION	(1UL &lt;&lt; 2)</span>
<span class="cp">#define   DABR_DATA_WRITE	(1UL &lt;&lt; 1)</span>
<span class="cp">#define   DABR_DATA_READ	(1UL &lt;&lt; 0)</span>
<span class="cp">#define SPRN_DABR2	0x13D	</span><span class="cm">/* e300 */</span><span class="cp"></span>
<span class="cp">#define SPRN_DABRX	0x3F7	</span><span class="cm">/* Data Address Breakpoint Register Extension */</span><span class="cp"></span>
<span class="cp">#define   DABRX_USER	(1UL &lt;&lt; 0)</span>
<span class="cp">#define   DABRX_KERNEL	(1UL &lt;&lt; 1)</span>
<span class="cp">#define SPRN_DAR	0x013	</span><span class="cm">/* Data Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBCR	0x136	</span><span class="cm">/* e300 Data Breakpoint Control Reg */</span><span class="cp"></span>
<span class="cp">#define SPRN_DSISR	0x012	</span><span class="cm">/* Data Storage Interrupt Status Register */</span><span class="cp"></span>
<span class="cp">#define   DSISR_NOHPTE		0x40000000	</span><span class="cm">/* no translation found */</span><span class="cp"></span>
<span class="cp">#define   DSISR_PROTFAULT	0x08000000	</span><span class="cm">/* protection fault */</span><span class="cp"></span>
<span class="cp">#define   DSISR_ISSTORE		0x02000000	</span><span class="cm">/* access was a store */</span><span class="cp"></span>
<span class="cp">#define   DSISR_DABRMATCH	0x00400000	</span><span class="cm">/* hit data breakpoint */</span><span class="cp"></span>
<span class="cp">#define   DSISR_NOSEGMENT	0x00200000	</span><span class="cm">/* STAB/SLB miss */</span><span class="cp"></span>
<span class="cp">#define   DSISR_KEYFAULT	0x00200000	</span><span class="cm">/* Key fault */</span><span class="cp"></span>
<span class="cp">#define SPRN_TBRL	0x10C	</span><span class="cm">/* Time Base Read Lower Register (user, R/O) */</span><span class="cp"></span>
<span class="cp">#define SPRN_TBRU	0x10D	</span><span class="cm">/* Time Base Read Upper Register (user, R/O) */</span><span class="cp"></span>
<span class="cp">#define SPRN_TBWL	0x11C	</span><span class="cm">/* Time Base Lower Register (super, R/W) */</span><span class="cp"></span>
<span class="cp">#define SPRN_TBWU	0x11D	</span><span class="cm">/* Time Base Upper Register (super, R/W) */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPURR	0x134	</span><span class="cm">/* Scaled PURR */</span><span class="cp"></span>
<span class="cp">#define SPRN_HSPRG0	0x130	</span><span class="cm">/* Hypervisor Scratch 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HSPRG1	0x131	</span><span class="cm">/* Hypervisor Scratch 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HDSISR     0x132</span>
<span class="cp">#define SPRN_HDAR       0x133</span>
<span class="cp">#define SPRN_HDEC	0x136	</span><span class="cm">/* Hypervisor Decrementer */</span><span class="cp"></span>
<span class="cp">#define SPRN_HIOR	0x137	</span><span class="cm">/* 970 Hypervisor interrupt offset */</span><span class="cp"></span>
<span class="cp">#define SPRN_RMOR	0x138	</span><span class="cm">/* Real mode offset register */</span><span class="cp"></span>
<span class="cp">#define SPRN_HRMOR	0x139	</span><span class="cm">/* Real mode offset register */</span><span class="cp"></span>
<span class="cp">#define SPRN_HSRR0	0x13A	</span><span class="cm">/* Hypervisor Save/Restore 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HSRR1	0x13B	</span><span class="cm">/* Hypervisor Save/Restore 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_LPCR	0x13E	</span><span class="cm">/* LPAR Control Register */</span><span class="cp"></span>
<span class="cp">#define   LPCR_VPM0	(1ul &lt;&lt; (63-0))</span>
<span class="cp">#define   LPCR_VPM1	(1ul &lt;&lt; (63-1))</span>
<span class="cp">#define   LPCR_ISL	(1ul &lt;&lt; (63-2))</span>
<span class="cp">#define   LPCR_VC_SH	(63-2)</span>
<span class="cp">#define   LPCR_DPFD_SH	(63-11)</span>
<span class="cp">#define   LPCR_VRMASD	(0x1ful &lt;&lt; (63-16))</span>
<span class="cp">#define   LPCR_VRMA_L	(1ul &lt;&lt; (63-12))</span>
<span class="cp">#define   LPCR_VRMA_LP0	(1ul &lt;&lt; (63-15))</span>
<span class="cp">#define   LPCR_VRMA_LP1	(1ul &lt;&lt; (63-16))</span>
<span class="cp">#define   LPCR_VRMASD_SH (63-16)</span>
<span class="cp">#define   LPCR_RMLS    0x1C000000      </span><span class="cm">/* impl dependent rmo limit sel */</span><span class="cp"></span>
<span class="cp">#define	  LPCR_RMLS_SH	(63-37)</span>
<span class="cp">#define   LPCR_ILE     0x02000000      </span><span class="cm">/* !HV irqs set MSR:LE */</span><span class="cp"></span>
<span class="cp">#define   LPCR_PECE	0x00007000	</span><span class="cm">/* powersave exit cause enable */</span><span class="cp"></span>
<span class="cp">#define     LPCR_PECE0	0x00004000	</span><span class="cm">/* ext. exceptions can cause exit */</span><span class="cp"></span>
<span class="cp">#define     LPCR_PECE1	0x00002000	</span><span class="cm">/* decrementer can cause exit */</span><span class="cp"></span>
<span class="cp">#define     LPCR_PECE2	0x00001000	</span><span class="cm">/* machine check etc can cause exit */</span><span class="cp"></span>
<span class="cp">#define   LPCR_MER	0x00000800	</span><span class="cm">/* Mediated External Exception */</span><span class="cp"></span>
<span class="cp">#define   LPCR_LPES    0x0000000c</span>
<span class="cp">#define   LPCR_LPES0   0x00000008      </span><span class="cm">/* LPAR Env selector 0 */</span><span class="cp"></span>
<span class="cp">#define   LPCR_LPES1   0x00000004      </span><span class="cm">/* LPAR Env selector 1 */</span><span class="cp"></span>
<span class="cp">#define   LPCR_LPES_SH	2</span>
<span class="cp">#define   LPCR_RMI     0x00000002      </span><span class="cm">/* real mode is cache inhibit */</span><span class="cp"></span>
<span class="cp">#define   LPCR_HDICE   0x00000001      </span><span class="cm">/* Hyp Decr enable (HV,PR,EE) */</span><span class="cp"></span>
<span class="cp">#ifndef SPRN_LPID</span>
<span class="cp">#define SPRN_LPID	0x13F	</span><span class="cm">/* Logical Partition Identifier */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define   LPID_RSVD	0x3ff		</span><span class="cm">/* Reserved LPID for partn switching */</span><span class="cp"></span>
<span class="cp">#define	SPRN_HMER	0x150	</span><span class="cm">/* Hardware m? error recovery */</span><span class="cp"></span>
<span class="cp">#define	SPRN_HMEER	0x151	</span><span class="cm">/* Hardware m? enable error recovery */</span><span class="cp"></span>
<span class="cp">#define	SPRN_HEIR	0x153	</span><span class="cm">/* Hypervisor Emulated Instruction Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_TLBINDEXR	0x154	</span><span class="cm">/* P7 TLB control register */</span><span class="cp"></span>
<span class="cp">#define SPRN_TLBVPNR	0x155	</span><span class="cm">/* P7 TLB control register */</span><span class="cp"></span>
<span class="cp">#define SPRN_TLBRPNR	0x156	</span><span class="cm">/* P7 TLB control register */</span><span class="cp"></span>
<span class="cp">#define SPRN_TLBLPIDR	0x157	</span><span class="cm">/* P7 TLB control register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT0L	0x219	</span><span class="cm">/* Data BAT 0 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT0U	0x218	</span><span class="cm">/* Data BAT 0 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT1L	0x21B	</span><span class="cm">/* Data BAT 1 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT1U	0x21A	</span><span class="cm">/* Data BAT 1 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT2L	0x21D	</span><span class="cm">/* Data BAT 2 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT2U	0x21C	</span><span class="cm">/* Data BAT 2 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT3L	0x21F	</span><span class="cm">/* Data BAT 3 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT3U	0x21E	</span><span class="cm">/* Data BAT 3 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT4L	0x239	</span><span class="cm">/* Data BAT 4 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT4U	0x238	</span><span class="cm">/* Data BAT 4 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT5L	0x23B	</span><span class="cm">/* Data BAT 5 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT5U	0x23A	</span><span class="cm">/* Data BAT 5 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT6L	0x23D	</span><span class="cm">/* Data BAT 6 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT6U	0x23C	</span><span class="cm">/* Data BAT 6 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT7L	0x23F	</span><span class="cm">/* Data BAT 7 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DBAT7U	0x23E	</span><span class="cm">/* Data BAT 7 Upper Register */</span><span class="cp"></span>

<span class="cp">#define SPRN_DEC	0x016		</span><span class="cm">/* Decrement Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_DER	0x095		</span><span class="cm">/* Debug Enable Regsiter */</span><span class="cp"></span>
<span class="cp">#define DER_RSTE	0x40000000	</span><span class="cm">/* Reset Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_CHSTPE	0x20000000	</span><span class="cm">/* Check Stop */</span><span class="cp"></span>
<span class="cp">#define DER_MCIE	0x10000000	</span><span class="cm">/* Machine Check Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_EXTIE	0x02000000	</span><span class="cm">/* External Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_ALIE	0x01000000	</span><span class="cm">/* Alignment Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_PRIE	0x00800000	</span><span class="cm">/* Program Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_FPUVIE	0x00400000	</span><span class="cm">/* FP Unavailable Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_DECIE	0x00200000	</span><span class="cm">/* Decrementer Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_SYSIE	0x00040000	</span><span class="cm">/* System Call Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_TRE		0x00020000	</span><span class="cm">/* Trace Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_SEIE	0x00004000	</span><span class="cm">/* FP SW Emulation Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_ITLBMSE	0x00002000	</span><span class="cm">/* Imp. Spec. Instruction TLB Miss */</span><span class="cp"></span>
<span class="cp">#define DER_ITLBERE	0x00001000	</span><span class="cm">/* Imp. Spec. Instruction TLB Error */</span><span class="cp"></span>
<span class="cp">#define DER_DTLBMSE	0x00000800	</span><span class="cm">/* Imp. Spec. Data TLB Miss */</span><span class="cp"></span>
<span class="cp">#define DER_DTLBERE	0x00000400	</span><span class="cm">/* Imp. Spec. Data TLB Error */</span><span class="cp"></span>
<span class="cp">#define DER_LBRKE	0x00000008	</span><span class="cm">/* Load/Store Breakpoint Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_IBRKE	0x00000004	</span><span class="cm">/* Instruction Breakpoint Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_EBRKE	0x00000002	</span><span class="cm">/* External Breakpoint Interrupt */</span><span class="cp"></span>
<span class="cp">#define DER_DPIE	0x00000001	</span><span class="cm">/* Dev. Port Nonmaskable Request */</span><span class="cp"></span>
<span class="cp">#define SPRN_DMISS	0x3D0		</span><span class="cm">/* Data TLB Miss Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_EAR	0x11A		</span><span class="cm">/* External Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_HASH1	0x3D2		</span><span class="cm">/* Primary Hash Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_HASH2	0x3D3		</span><span class="cm">/* Secondary Hash Address Resgister */</span><span class="cp"></span>
<span class="cp">#define SPRN_HID0	0x3F0		</span><span class="cm">/* Hardware Implementation Register 0 */</span><span class="cp"></span>
<span class="cp">#define HID0_HDICE_SH	(63 - 23)	</span><span class="cm">/* 970 HDEC interrupt enable */</span><span class="cp"></span>
<span class="cp">#define HID0_EMCP	(1&lt;&lt;31)		</span><span class="cm">/* Enable Machine Check pin */</span><span class="cp"></span>
<span class="cp">#define HID0_EBA	(1&lt;&lt;29)		</span><span class="cm">/* Enable Bus Address Parity */</span><span class="cp"></span>
<span class="cp">#define HID0_EBD	(1&lt;&lt;28)		</span><span class="cm">/* Enable Bus Data Parity */</span><span class="cp"></span>
<span class="cp">#define HID0_SBCLK	(1&lt;&lt;27)</span>
<span class="cp">#define HID0_EICE	(1&lt;&lt;26)</span>
<span class="cp">#define HID0_TBEN	(1&lt;&lt;26)		</span><span class="cm">/* Timebase enable - 745x */</span><span class="cp"></span>
<span class="cp">#define HID0_ECLK	(1&lt;&lt;25)</span>
<span class="cp">#define HID0_PAR	(1&lt;&lt;24)</span>
<span class="cp">#define HID0_STEN	(1&lt;&lt;24)		</span><span class="cm">/* Software table search enable - 745x */</span><span class="cp"></span>
<span class="cp">#define HID0_HIGH_BAT	(1&lt;&lt;23)		</span><span class="cm">/* Enable high BATs - 7455 */</span><span class="cp"></span>
<span class="cp">#define HID0_DOZE	(1&lt;&lt;23)</span>
<span class="cp">#define HID0_NAP	(1&lt;&lt;22)</span>
<span class="cp">#define HID0_SLEEP	(1&lt;&lt;21)</span>
<span class="cp">#define HID0_DPM	(1&lt;&lt;20)</span>
<span class="cp">#define HID0_BHTCLR	(1&lt;&lt;18)		</span><span class="cm">/* Clear branch history table - 7450 */</span><span class="cp"></span>
<span class="cp">#define HID0_XAEN	(1&lt;&lt;17)		</span><span class="cm">/* Extended addressing enable - 7450 */</span><span class="cp"></span>
<span class="cp">#define HID0_NHR	(1&lt;&lt;16)		</span><span class="cm">/* Not hard reset (software bit-7450)*/</span><span class="cp"></span>
<span class="cp">#define HID0_ICE	(1&lt;&lt;15)		</span><span class="cm">/* Instruction Cache Enable */</span><span class="cp"></span>
<span class="cp">#define HID0_DCE	(1&lt;&lt;14)		</span><span class="cm">/* Data Cache Enable */</span><span class="cp"></span>
<span class="cp">#define HID0_ILOCK	(1&lt;&lt;13)		</span><span class="cm">/* Instruction Cache Lock */</span><span class="cp"></span>
<span class="cp">#define HID0_DLOCK	(1&lt;&lt;12)		</span><span class="cm">/* Data Cache Lock */</span><span class="cp"></span>
<span class="cp">#define HID0_ICFI	(1&lt;&lt;11)		</span><span class="cm">/* Instr. Cache Flash Invalidate */</span><span class="cp"></span>
<span class="cp">#define HID0_DCI	(1&lt;&lt;10)		</span><span class="cm">/* Data Cache Invalidate */</span><span class="cp"></span>
<span class="cp">#define HID0_SPD	(1&lt;&lt;9)		</span><span class="cm">/* Speculative disable */</span><span class="cp"></span>
<span class="cp">#define HID0_DAPUEN	(1&lt;&lt;8)		</span><span class="cm">/* Debug APU enable */</span><span class="cp"></span>
<span class="cp">#define HID0_SGE	(1&lt;&lt;7)		</span><span class="cm">/* Store Gathering Enable */</span><span class="cp"></span>
<span class="cp">#define HID0_SIED	(1&lt;&lt;7)		</span><span class="cm">/* Serial Instr. Execution [Disable] */</span><span class="cp"></span>
<span class="cp">#define HID0_DCFA	(1&lt;&lt;6)		</span><span class="cm">/* Data Cache Flush Assist */</span><span class="cp"></span>
<span class="cp">#define HID0_LRSTK	(1&lt;&lt;4)		</span><span class="cm">/* Link register stack - 745x */</span><span class="cp"></span>
<span class="cp">#define HID0_BTIC	(1&lt;&lt;5)		</span><span class="cm">/* Branch Target Instr Cache Enable */</span><span class="cp"></span>
<span class="cp">#define HID0_ABE	(1&lt;&lt;3)		</span><span class="cm">/* Address Broadcast Enable */</span><span class="cp"></span>
<span class="cp">#define HID0_FOLD	(1&lt;&lt;3)		</span><span class="cm">/* Branch Folding enable - 745x */</span><span class="cp"></span>
<span class="cp">#define HID0_BHTE	(1&lt;&lt;2)		</span><span class="cm">/* Branch History Table Enable */</span><span class="cp"></span>
<span class="cp">#define HID0_BTCD	(1&lt;&lt;1)		</span><span class="cm">/* Branch target cache disable */</span><span class="cp"></span>
<span class="cp">#define HID0_NOPDST	(1&lt;&lt;1)		</span><span class="cm">/* No-op dst, dstt, etc. instr. */</span><span class="cp"></span>
<span class="cp">#define HID0_NOPTI	(1&lt;&lt;0)		</span><span class="cm">/* No-op dcbt and dcbst instr. */</span><span class="cp"></span>

<span class="cp">#define SPRN_HID1	0x3F1		</span><span class="cm">/* Hardware Implementation Register 1 */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_6xx</span>
<span class="cp">#define HID1_EMCP	(1&lt;&lt;31)		</span><span class="cm">/* 7450 Machine Check Pin Enable */</span><span class="cp"></span>
<span class="cp">#define HID1_DFS	(1&lt;&lt;22)		</span><span class="cm">/* 7447A Dynamic Frequency Scaling */</span><span class="cp"></span>
<span class="cp">#define HID1_PC0	(1&lt;&lt;16)		</span><span class="cm">/* 7450 PLL_CFG[0] */</span><span class="cp"></span>
<span class="cp">#define HID1_PC1	(1&lt;&lt;15)		</span><span class="cm">/* 7450 PLL_CFG[1] */</span><span class="cp"></span>
<span class="cp">#define HID1_PC2	(1&lt;&lt;14)		</span><span class="cm">/* 7450 PLL_CFG[2] */</span><span class="cp"></span>
<span class="cp">#define HID1_PC3	(1&lt;&lt;13)		</span><span class="cm">/* 7450 PLL_CFG[3] */</span><span class="cp"></span>
<span class="cp">#define HID1_SYNCBE	(1&lt;&lt;11)		</span><span class="cm">/* 7450 ABE for sync, eieio */</span><span class="cp"></span>
<span class="cp">#define HID1_ABE	(1&lt;&lt;10)		</span><span class="cm">/* 7450 Address Broadcast Enable */</span><span class="cp"></span>
<span class="cp">#define HID1_PS		(1&lt;&lt;16)		</span><span class="cm">/* 750FX PLL selection */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define SPRN_HID2	0x3F8		</span><span class="cm">/* Hardware Implementation Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HID2_GEKKO	0x398		</span><span class="cm">/* Gekko HID2 Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IABR	0x3F2	</span><span class="cm">/* Instruction Address Breakpoint Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IABR2	0x3FA		</span><span class="cm">/* 83xx */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBCR	0x135		</span><span class="cm">/* 83xx Insn Breakpoint Control Reg */</span><span class="cp"></span>
<span class="cp">#define SPRN_HID4	0x3F4		</span><span class="cm">/* 970 HID4 */</span><span class="cp"></span>
<span class="cp">#define  HID4_LPES0	 (1ul &lt;&lt; (63-0)) </span><span class="cm">/* LPAR env. sel. bit 0 */</span><span class="cp"></span>
<span class="cp">#define	 HID4_RMLS2_SH	 (63 - 2)	</span><span class="cm">/* Real mode limit bottom 2 bits */</span><span class="cp"></span>
<span class="cp">#define	 HID4_LPID5_SH	 (63 - 6)	</span><span class="cm">/* partition ID bottom 4 bits */</span><span class="cp"></span>
<span class="cp">#define	 HID4_RMOR_SH	 (63 - 22)	</span><span class="cm">/* real mode offset (16 bits) */</span><span class="cp"></span>
<span class="cp">#define  HID4_LPES1	 (1 &lt;&lt; (63-57))	</span><span class="cm">/* LPAR env. sel. bit 1 */</span><span class="cp"></span>
<span class="cp">#define  HID4_RMLS0_SH	 (63 - 58)	</span><span class="cm">/* Real mode limit top bit */</span><span class="cp"></span>
<span class="cp">#define	 HID4_LPID1_SH	 0		</span><span class="cm">/* partition ID top 2 bits */</span><span class="cp"></span>
<span class="cp">#define SPRN_HID4_GEKKO	0x3F3		</span><span class="cm">/* Gekko HID4 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HID5	0x3F6		</span><span class="cm">/* 970 HID5 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HID6	0x3F9	</span><span class="cm">/* BE HID 6 */</span><span class="cp"></span>
<span class="cp">#define   HID6_LB	(0x0F&lt;&lt;12) </span><span class="cm">/* Concurrent Large Page Modes */</span><span class="cp"></span>
<span class="cp">#define   HID6_DLP	(1&lt;&lt;20)	</span><span class="cm">/* Disable all large page modes (4K only) */</span><span class="cp"></span>
<span class="cp">#define SPRN_TSC_CELL	0x399	</span><span class="cm">/* Thread switch control on Cell */</span><span class="cp"></span>
<span class="cp">#define   TSC_CELL_DEC_ENABLE_0	0x400000 </span><span class="cm">/* Decrementer Interrupt */</span><span class="cp"></span>
<span class="cp">#define   TSC_CELL_DEC_ENABLE_1	0x200000 </span><span class="cm">/* Decrementer Interrupt */</span><span class="cp"></span>
<span class="cp">#define   TSC_CELL_EE_ENABLE	0x100000 </span><span class="cm">/* External Interrupt */</span><span class="cp"></span>
<span class="cp">#define   TSC_CELL_EE_BOOST	0x080000 </span><span class="cm">/* External Interrupt Boost */</span><span class="cp"></span>
<span class="cp">#define SPRN_TSC 	0x3FD	</span><span class="cm">/* Thread switch control on others */</span><span class="cp"></span>
<span class="cp">#define SPRN_TST 	0x3FC	</span><span class="cm">/* Thread switch timeout on others */</span><span class="cp"></span>
<span class="cp">#if !defined(SPRN_IAC1) &amp;&amp; !defined(SPRN_IAC2)</span>
<span class="cp">#define SPRN_IAC1	0x3F4		</span><span class="cm">/* Instruction Address Compare 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_IAC2	0x3F5		</span><span class="cm">/* Instruction Address Compare 2 */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define SPRN_IBAT0L	0x211		</span><span class="cm">/* Instruction BAT 0 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT0U	0x210		</span><span class="cm">/* Instruction BAT 0 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT1L	0x213		</span><span class="cm">/* Instruction BAT 1 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT1U	0x212		</span><span class="cm">/* Instruction BAT 1 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT2L	0x215		</span><span class="cm">/* Instruction BAT 2 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT2U	0x214		</span><span class="cm">/* Instruction BAT 2 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT3L	0x217		</span><span class="cm">/* Instruction BAT 3 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT3U	0x216		</span><span class="cm">/* Instruction BAT 3 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT4L	0x231		</span><span class="cm">/* Instruction BAT 4 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT4U	0x230		</span><span class="cm">/* Instruction BAT 4 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT5L	0x233		</span><span class="cm">/* Instruction BAT 5 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT5U	0x232		</span><span class="cm">/* Instruction BAT 5 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT6L	0x235		</span><span class="cm">/* Instruction BAT 6 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT6U	0x234		</span><span class="cm">/* Instruction BAT 6 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT7L	0x237		</span><span class="cm">/* Instruction BAT 7 Lower Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IBAT7U	0x236		</span><span class="cm">/* Instruction BAT 7 Upper Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_ICMP	0x3D5		</span><span class="cm">/* Instruction TLB Compare Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_ICTC	0x3FB	</span><span class="cm">/* Instruction Cache Throttling Control Reg */</span><span class="cp"></span>
<span class="cp">#define SPRN_ICTRL	0x3F3	</span><span class="cm">/* 1011 7450 icache and interrupt ctrl */</span><span class="cp"></span>
<span class="cp">#define ICTRL_EICE	0x08000000	</span><span class="cm">/* enable icache parity errs */</span><span class="cp"></span>
<span class="cp">#define ICTRL_EDC	0x04000000	</span><span class="cm">/* enable dcache parity errs */</span><span class="cp"></span>
<span class="cp">#define ICTRL_EICP	0x00000100	</span><span class="cm">/* enable icache par. check */</span><span class="cp"></span>
<span class="cp">#define SPRN_IMISS	0x3D4		</span><span class="cm">/* Instruction TLB Miss Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_IMMR	0x27E		</span><span class="cm">/* Internal Memory Map Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_L2CR	0x3F9		</span><span class="cm">/* Level 2 Cache Control Regsiter */</span><span class="cp"></span>
<span class="cp">#define SPRN_L2CR2	0x3f8</span>
<span class="cp">#define L2CR_L2E		0x80000000	</span><span class="cm">/* L2 enable */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2PE		0x40000000	</span><span class="cm">/* L2 parity enable */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2SIZ_MASK		0x30000000	</span><span class="cm">/* L2 size mask */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2SIZ_256KB	0x10000000	</span><span class="cm">/* L2 size 256KB */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2SIZ_512KB	0x20000000	</span><span class="cm">/* L2 size 512KB */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2SIZ_1MB		0x30000000	</span><span class="cm">/* L2 size 1MB */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_MASK		0x0e000000	</span><span class="cm">/* L2 clock mask */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_DISABLED	0x00000000	</span><span class="cm">/* L2 clock disabled */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_DIV1		0x02000000	</span><span class="cm">/* L2 clock / 1 */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_DIV1_5	0x04000000	</span><span class="cm">/* L2 clock / 1.5 */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_DIV2		0x08000000	</span><span class="cm">/* L2 clock / 2 */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_DIV2_5	0x0a000000	</span><span class="cm">/* L2 clock / 2.5 */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CLK_DIV3		0x0c000000	</span><span class="cm">/* L2 clock / 3 */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2RAM_MASK		0x01800000	</span><span class="cm">/* L2 RAM type mask */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2RAM_FLOW		0x00000000	</span><span class="cm">/* L2 RAM flow through */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2RAM_PIPE		0x01000000	</span><span class="cm">/* L2 RAM pipelined */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2RAM_PIPE_LW	0x01800000	</span><span class="cm">/* L2 RAM pipelined latewr */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2DO		0x00400000	</span><span class="cm">/* L2 data only */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2I		0x00200000	</span><span class="cm">/* L2 global invalidate */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2CTL		0x00100000	</span><span class="cm">/* L2 RAM control */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2WT		0x00080000	</span><span class="cm">/* L2 write-through */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2TS		0x00040000	</span><span class="cm">/* L2 test support */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2OH_MASK		0x00030000	</span><span class="cm">/* L2 output hold mask */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2OH_0_5		0x00000000	</span><span class="cm">/* L2 output hold 0.5 ns */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2OH_1_0		0x00010000	</span><span class="cm">/* L2 output hold 1.0 ns */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2SL		0x00008000	</span><span class="cm">/* L2 DLL slow */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2DF		0x00004000	</span><span class="cm">/* L2 differential clock */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2BYP		0x00002000	</span><span class="cm">/* L2 DLL bypass */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2IP		0x00000001	</span><span class="cm">/* L2 GI in progress */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2IO_745x		0x00100000	</span><span class="cm">/* L2 instr. only (745x) */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2DO_745x		0x00010000	</span><span class="cm">/* L2 data only (745x) */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2REP_745x		0x00001000	</span><span class="cm">/* L2 repl. algorithm (745x) */</span><span class="cp"></span>
<span class="cp">#define L2CR_L2HWF_745x		0x00000800	</span><span class="cm">/* L2 hardware flush (745x) */</span><span class="cp"></span>
<span class="cp">#define SPRN_L3CR		0x3FA	</span><span class="cm">/* Level 3 Cache Control Regsiter */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3E		0x80000000	</span><span class="cm">/* L3 enable */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3PE		0x40000000	</span><span class="cm">/* L3 data parity enable */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3APE		0x20000000	</span><span class="cm">/* L3 addr parity enable */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3SIZ		0x10000000	</span><span class="cm">/* L3 size */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3CLKEN		0x08000000	</span><span class="cm">/* L3 clock enable */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3RES		0x04000000	</span><span class="cm">/* L3 special reserved bit */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3CLKDIV		0x03800000	</span><span class="cm">/* L3 clock divisor */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3IO		0x00400000	</span><span class="cm">/* L3 instruction only */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3SPO		0x00040000	</span><span class="cm">/* L3 sample point override */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3CKSP		0x00030000	</span><span class="cm">/* L3 clock sample point */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3PSP		0x0000e000	</span><span class="cm">/* L3 P-clock sample point */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3REP		0x00001000	</span><span class="cm">/* L3 replacement algorithm */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3HWF		0x00000800	</span><span class="cm">/* L3 hardware flush */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3I		0x00000400	</span><span class="cm">/* L3 global invalidate */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3RT		0x00000300	</span><span class="cm">/* L3 SRAM type */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3NIRCA		0x00000080	</span><span class="cm">/* L3 non-integer ratio clock adj. */</span><span class="cp"></span>
<span class="cp">#define L3CR_L3DO		0x00000040	</span><span class="cm">/* L3 data only mode */</span><span class="cp"></span>
<span class="cp">#define L3CR_PMEN		0x00000004	</span><span class="cm">/* L3 private memory enable */</span><span class="cp"></span>
<span class="cp">#define L3CR_PMSIZ		0x00000001	</span><span class="cm">/* L3 private memory size */</span><span class="cp"></span>

<span class="cp">#define SPRN_MSSCR0	0x3f6	</span><span class="cm">/* Memory Subsystem Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_MSSSR0	0x3f7	</span><span class="cm">/* Memory Subsystem Status Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_LDSTCR	0x3f8	</span><span class="cm">/* Load/Store control register */</span><span class="cp"></span>
<span class="cp">#define SPRN_LDSTDB	0x3f4	</span><span class="cm">/* */</span><span class="cp"></span>
<span class="cp">#define SPRN_LR		0x008	</span><span class="cm">/* Link Register */</span><span class="cp"></span>
<span class="cp">#ifndef SPRN_PIR</span>
<span class="cp">#define SPRN_PIR	0x3FF	</span><span class="cm">/* Processor Identification Register */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define SPRN_PTEHI	0x3D5	</span><span class="cm">/* 981 7450 PTE HI word (S/W TLB load) */</span><span class="cp"></span>
<span class="cp">#define SPRN_PTELO	0x3D6	</span><span class="cm">/* 982 7450 PTE LO word (S/W TLB load) */</span><span class="cp"></span>
<span class="cp">#define SPRN_PURR	0x135	</span><span class="cm">/* Processor Utilization of Resources Reg */</span><span class="cp"></span>
<span class="cp">#define SPRN_PVR	0x11F	</span><span class="cm">/* Processor Version Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_RPA	0x3D6	</span><span class="cm">/* Required Physical Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_SDA	0x3BF	</span><span class="cm">/* Sampled Data Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_SDR1	0x019	</span><span class="cm">/* MMU Hash Base Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_ASR	0x118   </span><span class="cm">/* Address Space Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_SIA	0x3BB	</span><span class="cm">/* Sampled Instruction Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG0	0x110	</span><span class="cm">/* Special Purpose Register General 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG1	0x111	</span><span class="cm">/* Special Purpose Register General 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG2	0x112	</span><span class="cm">/* Special Purpose Register General 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG3	0x113	</span><span class="cm">/* Special Purpose Register General 3 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG4	0x114	</span><span class="cm">/* Special Purpose Register General 4 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG5	0x115	</span><span class="cm">/* Special Purpose Register General 5 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG6	0x116	</span><span class="cm">/* Special Purpose Register General 6 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SPRG7	0x117	</span><span class="cm">/* Special Purpose Register General 7 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SRR0	0x01A	</span><span class="cm">/* Save/Restore Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_SRR1	0x01B	</span><span class="cm">/* Save/Restore Register 1 */</span><span class="cp"></span>
<span class="cp">#define   SRR1_ISI_NOPT		0x40000000 </span><span class="cm">/* ISI: Not found in hash */</span><span class="cp"></span>
<span class="cp">#define   SRR1_ISI_N_OR_G	0x10000000 </span><span class="cm">/* ISI: Access is no-exec or G */</span><span class="cp"></span>
<span class="cp">#define   SRR1_ISI_PROT		0x08000000 </span><span class="cm">/* ISI: Other protection fault */</span><span class="cp"></span>
<span class="cp">#define   SRR1_WAKEMASK		0x00380000 </span><span class="cm">/* reason for wakeup */</span><span class="cp"></span>
<span class="cp">#define   SRR1_WAKESYSERR	0x00300000 </span><span class="cm">/* System error */</span><span class="cp"></span>
<span class="cp">#define   SRR1_WAKEEE		0x00200000 </span><span class="cm">/* External interrupt */</span><span class="cp"></span>
<span class="cp">#define   SRR1_WAKEMT		0x00280000 </span><span class="cm">/* mtctrl */</span><span class="cp"></span>
<span class="cp">#define	  SRR1_WAKEHMI		0x00280000 </span><span class="cm">/* Hypervisor maintenance */</span><span class="cp"></span>
<span class="cp">#define   SRR1_WAKEDEC		0x00180000 </span><span class="cm">/* Decrementer interrupt */</span><span class="cp"></span>
<span class="cp">#define   SRR1_WAKETHERM	0x00100000 </span><span class="cm">/* Thermal management interrupt */</span><span class="cp"></span>
<span class="cp">#define	  SRR1_WAKERESET	0x00100000 </span><span class="cm">/* System reset */</span><span class="cp"></span>
<span class="cp">#define	  SRR1_WAKESTATE	0x00030000 </span><span class="cm">/* Powersave exit mask [46:47] */</span><span class="cp"></span>
<span class="cp">#define	  SRR1_WS_DEEPEST	0x00030000 </span><span class="cm">/* Some resources not maintained,</span>
<span class="cm">					  * may not be recoverable */</span><span class="cp"></span>
<span class="cp">#define	  SRR1_WS_DEEPER	0x00020000 </span><span class="cm">/* Some resources not maintained */</span><span class="cp"></span>
<span class="cp">#define	  SRR1_WS_DEEP		0x00010000 </span><span class="cm">/* All resources maintained */</span><span class="cp"></span>
<span class="cp">#define   SRR1_PROGFPE		0x00100000 </span><span class="cm">/* Floating Point Enabled */</span><span class="cp"></span>
<span class="cp">#define   SRR1_PROGPRIV		0x00040000 </span><span class="cm">/* Privileged instruction */</span><span class="cp"></span>
<span class="cp">#define   SRR1_PROGTRAP		0x00020000 </span><span class="cm">/* Trap */</span><span class="cp"></span>
<span class="cp">#define   SRR1_PROGADDR		0x00010000 </span><span class="cm">/* SRR0 contains subsequent addr */</span><span class="cp"></span>

<span class="cp">#define SPRN_HSRR0	0x13A	</span><span class="cm">/* Save/Restore Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_HSRR1	0x13B	</span><span class="cm">/* Save/Restore Register 1 */</span><span class="cp"></span>

<span class="cp">#define SPRN_TBCTL	0x35f	</span><span class="cm">/* PA6T Timebase control register */</span><span class="cp"></span>
<span class="cp">#define   TBCTL_FREEZE		0x0000000000000000ull </span><span class="cm">/* Freeze all tbs */</span><span class="cp"></span>
<span class="cp">#define   TBCTL_RESTART		0x0000000100000000ull </span><span class="cm">/* Restart all tbs */</span><span class="cp"></span>
<span class="cp">#define   TBCTL_UPDATE_UPPER	0x0000000200000000ull </span><span class="cm">/* Set upper 32 bits */</span><span class="cp"></span>
<span class="cp">#define   TBCTL_UPDATE_LOWER	0x0000000300000000ull </span><span class="cm">/* Set lower 32 bits */</span><span class="cp"></span>

<span class="cp">#ifndef SPRN_SVR</span>
<span class="cp">#define SPRN_SVR	0x11E	</span><span class="cm">/* System Version Register */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define SPRN_THRM1	0x3FC		</span><span class="cm">/* Thermal Management Register 1 */</span><span class="cp"></span>
<span class="cm">/* these bits were defined in inverted endian sense originally, ugh, confusing */</span>
<span class="cp">#define THRM1_TIN	(1 &lt;&lt; 31)</span>
<span class="cp">#define THRM1_TIV	(1 &lt;&lt; 30)</span>
<span class="cp">#define THRM1_THRES(x)	((x&amp;0x7f)&lt;&lt;23)</span>
<span class="cp">#define THRM3_SITV(x)	((x&amp;0x3fff)&lt;&lt;1)</span>
<span class="cp">#define THRM1_TID	(1&lt;&lt;2)</span>
<span class="cp">#define THRM1_TIE	(1&lt;&lt;1)</span>
<span class="cp">#define THRM1_V		(1&lt;&lt;0)</span>
<span class="cp">#define SPRN_THRM2	0x3FD		</span><span class="cm">/* Thermal Management Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_THRM3	0x3FE		</span><span class="cm">/* Thermal Management Register 3 */</span><span class="cp"></span>
<span class="cp">#define THRM3_E		(1&lt;&lt;0)</span>
<span class="cp">#define SPRN_TLBMISS	0x3D4		</span><span class="cm">/* 980 7450 TLB Miss Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_UMMCR0	0x3A8	</span><span class="cm">/* User Monitor Mode Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_UMMCR1	0x3AC	</span><span class="cm">/* User Monitor Mode Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_UPMC1	0x3A9	</span><span class="cm">/* User Performance Counter Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_UPMC2	0x3AA	</span><span class="cm">/* User Performance Counter Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_UPMC3	0x3AD	</span><span class="cm">/* User Performance Counter Register 3 */</span><span class="cp"></span>
<span class="cp">#define SPRN_UPMC4	0x3AE	</span><span class="cm">/* User Performance Counter Register 4 */</span><span class="cp"></span>
<span class="cp">#define SPRN_USIA	0x3AB	</span><span class="cm">/* User Sampled Instruction Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_VRSAVE	0x100	</span><span class="cm">/* Vector Register Save Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_XER	0x001	</span><span class="cm">/* Fixed Point Exception Register */</span><span class="cp"></span>

<span class="cp">#define SPRN_MMCR0_GEKKO 0x3B8 </span><span class="cm">/* Gekko Monitor Mode Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMCR1_GEKKO 0x3BC </span><span class="cm">/* Gekko Monitor Mode Control Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC1_GEKKO  0x3B9 </span><span class="cm">/* Gekko Performance Monitor Control 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC2_GEKKO  0x3BA </span><span class="cm">/* Gekko Performance Monitor Control 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC3_GEKKO  0x3BD </span><span class="cm">/* Gekko Performance Monitor Control 3 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC4_GEKKO  0x3BE </span><span class="cm">/* Gekko Performance Monitor Control 4 */</span><span class="cp"></span>
<span class="cp">#define SPRN_WPAR_GEKKO  0x399 </span><span class="cm">/* Gekko Write Pipe Address Register */</span><span class="cp"></span>

<span class="cp">#define SPRN_SCOMC	0x114	</span><span class="cm">/* SCOM Access Control */</span><span class="cp"></span>
<span class="cp">#define SPRN_SCOMD	0x115	</span><span class="cm">/* SCOM Access DATA */</span><span class="cp"></span>

<span class="cm">/* Performance monitor SPRs */</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
<span class="cp">#define SPRN_MMCR0	795</span>
<span class="cp">#define   MMCR0_FC	0x80000000UL </span><span class="cm">/* freeze counters */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCS	0x40000000UL </span><span class="cm">/* freeze in supervisor state */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_KERNEL_DISABLE MMCR0_FCS</span>
<span class="cp">#define   MMCR0_FCP	0x20000000UL </span><span class="cm">/* freeze in problem state */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PROBLEM_DISABLE MMCR0_FCP</span>
<span class="cp">#define   MMCR0_FCM1	0x10000000UL </span><span class="cm">/* freeze counters while MSR mark = 1 */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCM0	0x08000000UL </span><span class="cm">/* freeze counters while MSR mark = 0 */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMXE	0x04000000UL </span><span class="cm">/* performance monitor exception enable */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCECE	0x02000000UL </span><span class="cm">/* freeze ctrs on enabled cond or event */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_TBEE	0x00400000UL </span><span class="cm">/* time base exception enable */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMC1CE	0x00008000UL </span><span class="cm">/* PMC1 count enable*/</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMCjCE	0x00004000UL </span><span class="cm">/* PMCj count enable*/</span><span class="cp"></span>
<span class="cp">#define   MMCR0_TRIGGER	0x00002000UL </span><span class="cm">/* TRIGGER enable */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMAO	0x00000080UL </span><span class="cm">/* performance monitor alert has occurred, set to 0 after handling exception */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_SHRFC	0x00000040UL </span><span class="cm">/* SHRre freeze conditions between threads */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCTI	0x00000008UL </span><span class="cm">/* freeze counters in tags inactive mode */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCTA	0x00000004UL </span><span class="cm">/* freeze counters in tags active mode */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCWAIT	0x00000002UL </span><span class="cm">/* freeze counter in WAIT state */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCHV	0x00000001UL </span><span class="cm">/* freeze conditions in hypervisor mode */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMCR1	798</span>
<span class="cp">#define SPRN_MMCRA	0x312</span>
<span class="cp">#define   MMCRA_SDSYNC	0x80000000UL </span><span class="cm">/* SDAR synced with SIAR */</span><span class="cp"></span>
<span class="cp">#define   MMCRA_SDAR_DCACHE_MISS 0x40000000UL</span>
<span class="cp">#define   MMCRA_SDAR_ERAT_MISS   0x20000000UL</span>
<span class="cp">#define   MMCRA_SIHV	0x10000000UL </span><span class="cm">/* state of MSR HV when SIAR set */</span><span class="cp"></span>
<span class="cp">#define   MMCRA_SIPR	0x08000000UL </span><span class="cm">/* state of MSR PR when SIAR set */</span><span class="cp"></span>
<span class="cp">#define   MMCRA_SLOT	0x07000000UL </span><span class="cm">/* SLOT bits (37-39) */</span><span class="cp"></span>
<span class="cp">#define   MMCRA_SLOT_SHIFT	24</span>
<span class="cp">#define   MMCRA_SAMPLE_ENABLE 0x00000001UL </span><span class="cm">/* enable sampling */</span><span class="cp"></span>
<span class="cp">#define   POWER6_MMCRA_SDSYNC 0x0000080000000000ULL	</span><span class="cm">/* SDAR/SIAR synced */</span><span class="cp"></span>
<span class="cp">#define   POWER6_MMCRA_SIHV   0x0000040000000000ULL</span>
<span class="cp">#define   POWER6_MMCRA_SIPR   0x0000020000000000ULL</span>
<span class="cp">#define   POWER6_MMCRA_THRM	0x00000020UL</span>
<span class="cp">#define   POWER6_MMCRA_OTHER	0x0000000EUL</span>
<span class="cp">#define SPRN_PMC1	787</span>
<span class="cp">#define SPRN_PMC2	788</span>
<span class="cp">#define SPRN_PMC3	789</span>
<span class="cp">#define SPRN_PMC4	790</span>
<span class="cp">#define SPRN_PMC5	791</span>
<span class="cp">#define SPRN_PMC6	792</span>
<span class="cp">#define SPRN_PMC7	793</span>
<span class="cp">#define SPRN_PMC8	794</span>
<span class="cp">#define SPRN_SIAR	780</span>
<span class="cp">#define SPRN_SDAR	781</span>

<span class="cp">#define SPRN_PA6T_MMCR0 795</span>
<span class="cp">#define   PA6T_MMCR0_EN0	0x0000000000000001UL</span>
<span class="cp">#define   PA6T_MMCR0_EN1	0x0000000000000002UL</span>
<span class="cp">#define   PA6T_MMCR0_EN2	0x0000000000000004UL</span>
<span class="cp">#define   PA6T_MMCR0_EN3	0x0000000000000008UL</span>
<span class="cp">#define   PA6T_MMCR0_EN4	0x0000000000000010UL</span>
<span class="cp">#define   PA6T_MMCR0_EN5	0x0000000000000020UL</span>
<span class="cp">#define   PA6T_MMCR0_SUPEN	0x0000000000000040UL</span>
<span class="cp">#define   PA6T_MMCR0_PREN	0x0000000000000080UL</span>
<span class="cp">#define   PA6T_MMCR0_HYPEN	0x0000000000000100UL</span>
<span class="cp">#define   PA6T_MMCR0_FCM0	0x0000000000000200UL</span>
<span class="cp">#define   PA6T_MMCR0_FCM1	0x0000000000000400UL</span>
<span class="cp">#define   PA6T_MMCR0_INTGEN	0x0000000000000800UL</span>
<span class="cp">#define   PA6T_MMCR0_INTEN0	0x0000000000001000UL</span>
<span class="cp">#define   PA6T_MMCR0_INTEN1	0x0000000000002000UL</span>
<span class="cp">#define   PA6T_MMCR0_INTEN2	0x0000000000004000UL</span>
<span class="cp">#define   PA6T_MMCR0_INTEN3	0x0000000000008000UL</span>
<span class="cp">#define   PA6T_MMCR0_INTEN4	0x0000000000010000UL</span>
<span class="cp">#define   PA6T_MMCR0_INTEN5	0x0000000000020000UL</span>
<span class="cp">#define   PA6T_MMCR0_DISCNT	0x0000000000040000UL</span>
<span class="cp">#define   PA6T_MMCR0_UOP	0x0000000000080000UL</span>
<span class="cp">#define   PA6T_MMCR0_TRG	0x0000000000100000UL</span>
<span class="cp">#define   PA6T_MMCR0_TRGEN	0x0000000000200000UL</span>
<span class="cp">#define   PA6T_MMCR0_TRGREG	0x0000000001600000UL</span>
<span class="cp">#define   PA6T_MMCR0_SIARLOG	0x0000000002000000UL</span>
<span class="cp">#define   PA6T_MMCR0_SDARLOG	0x0000000004000000UL</span>
<span class="cp">#define   PA6T_MMCR0_PROEN	0x0000000008000000UL</span>
<span class="cp">#define   PA6T_MMCR0_PROLOG	0x0000000010000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMEN2	0x0000000020000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMEN3	0x0000000040000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMEN4	0x0000000080000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMEN5	0x0000000100000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMSEL2	0x0000000200000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMSEL3	0x0000000400000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMSEL4	0x0000000800000000UL</span>
<span class="cp">#define   PA6T_MMCR0_DAMSEL5	0x0000001000000000UL</span>
<span class="cp">#define   PA6T_MMCR0_HANDDIS	0x0000002000000000UL</span>
<span class="cp">#define   PA6T_MMCR0_PCTEN	0x0000004000000000UL</span>
<span class="cp">#define   PA6T_MMCR0_SOCEN	0x0000008000000000UL</span>
<span class="cp">#define   PA6T_MMCR0_SOCMOD	0x0000010000000000UL</span>

<span class="cp">#define SPRN_PA6T_MMCR1 798</span>
<span class="cp">#define   PA6T_MMCR1_ES2	0x00000000000000ffUL</span>
<span class="cp">#define   PA6T_MMCR1_ES3	0x000000000000ff00UL</span>
<span class="cp">#define   PA6T_MMCR1_ES4	0x0000000000ff0000UL</span>
<span class="cp">#define   PA6T_MMCR1_ES5	0x00000000ff000000UL</span>

<span class="cp">#define SPRN_PA6T_UPMC0 771	</span><span class="cm">/* User PerfMon Counter 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_UPMC1 772	</span><span class="cm">/* ... */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_UPMC2 773</span>
<span class="cp">#define SPRN_PA6T_UPMC3 774</span>
<span class="cp">#define SPRN_PA6T_UPMC4 775</span>
<span class="cp">#define SPRN_PA6T_UPMC5 776</span>
<span class="cp">#define SPRN_PA6T_UMMCR0 779	</span><span class="cm">/* User Monitor Mode Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_SIAR	780	</span><span class="cm">/* Sampled Instruction Address */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_UMMCR1 782	</span><span class="cm">/* User Monitor Mode Control Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_SIER	785	</span><span class="cm">/* Sampled Instruction Event Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_PMC0	787</span>
<span class="cp">#define SPRN_PA6T_PMC1	788</span>
<span class="cp">#define SPRN_PA6T_PMC2	789</span>
<span class="cp">#define SPRN_PA6T_PMC3	790</span>
<span class="cp">#define SPRN_PA6T_PMC4	791</span>
<span class="cp">#define SPRN_PA6T_PMC5	792</span>
<span class="cp">#define SPRN_PA6T_TSR0	793	</span><span class="cm">/* Timestamp Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_TSR1	794	</span><span class="cm">/* Timestamp Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_TSR2	799	</span><span class="cm">/* Timestamp Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_TSR3	784	</span><span class="cm">/* Timestamp Register 3 */</span><span class="cp"></span>

<span class="cp">#define SPRN_PA6T_IER	981	</span><span class="cm">/* Icache Error Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_DER	982	</span><span class="cm">/* Dcache Error Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_BER	862	</span><span class="cm">/* BIU Error Address Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_MER	849	</span><span class="cm">/* MMU Error Register */</span><span class="cp"></span>

<span class="cp">#define SPRN_PA6T_IMA0	880	</span><span class="cm">/* Instruction Match Array 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_IMA1	881	</span><span class="cm">/* ... */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_IMA2	882</span>
<span class="cp">#define SPRN_PA6T_IMA3	883</span>
<span class="cp">#define SPRN_PA6T_IMA4	884</span>
<span class="cp">#define SPRN_PA6T_IMA5	885</span>
<span class="cp">#define SPRN_PA6T_IMA6	886</span>
<span class="cp">#define SPRN_PA6T_IMA7	887</span>
<span class="cp">#define SPRN_PA6T_IMA8	888</span>
<span class="cp">#define SPRN_PA6T_IMA9	889</span>
<span class="cp">#define SPRN_PA6T_BTCR	978	</span><span class="cm">/* Breakpoint and Tagging Control Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_IMAAT	979	</span><span class="cm">/* Instruction Match Array Action Table */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_PCCR	1019	</span><span class="cm">/* Power Counter Control Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_BKMK	1020	</span><span class="cm">/* Cell Bookmark Register */</span><span class="cp"></span>
<span class="cp">#define SPRN_PA6T_RPCCR	1021	</span><span class="cm">/* Retire PC Trace Control Register */</span><span class="cp"></span>


<span class="cp">#else </span><span class="cm">/* 32-bit */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMCR0	952	</span><span class="cm">/* Monitor Mode Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FC	0x80000000UL </span><span class="cm">/* freeze counters */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCS	0x40000000UL </span><span class="cm">/* freeze in supervisor state */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCP	0x20000000UL </span><span class="cm">/* freeze in problem state */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCM1	0x10000000UL </span><span class="cm">/* freeze counters while MSR mark = 1 */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCM0	0x08000000UL </span><span class="cm">/* freeze counters while MSR mark = 0 */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMXE	0x04000000UL </span><span class="cm">/* performance monitor exception enable */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_FCECE	0x02000000UL </span><span class="cm">/* freeze ctrs on enabled cond or event */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_TBEE	0x00400000UL </span><span class="cm">/* time base exception enable */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMC1CE	0x00008000UL </span><span class="cm">/* PMC1 count enable*/</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMCnCE	0x00004000UL </span><span class="cm">/* count enable for all but PMC 1*/</span><span class="cp"></span>
<span class="cp">#define   MMCR0_TRIGGER	0x00002000UL </span><span class="cm">/* TRIGGER enable */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMC1SEL	0x00001fc0UL </span><span class="cm">/* PMC 1 Event */</span><span class="cp"></span>
<span class="cp">#define   MMCR0_PMC2SEL	0x0000003fUL </span><span class="cm">/* PMC 2 Event */</span><span class="cp"></span>

<span class="cp">#define SPRN_MMCR1	956</span>
<span class="cp">#define   MMCR1_PMC3SEL	0xf8000000UL </span><span class="cm">/* PMC 3 Event */</span><span class="cp"></span>
<span class="cp">#define   MMCR1_PMC4SEL	0x07c00000UL </span><span class="cm">/* PMC 4 Event */</span><span class="cp"></span>
<span class="cp">#define   MMCR1_PMC5SEL	0x003e0000UL </span><span class="cm">/* PMC 5 Event */</span><span class="cp"></span>
<span class="cp">#define   MMCR1_PMC6SEL 0x0001f800UL </span><span class="cm">/* PMC 6 Event */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMCR2	944</span>
<span class="cp">#define SPRN_PMC1	953	</span><span class="cm">/* Performance Counter Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC2	954	</span><span class="cm">/* Performance Counter Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC3	957	</span><span class="cm">/* Performance Counter Register 3 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC4	958	</span><span class="cm">/* Performance Counter Register 4 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC5	945	</span><span class="cm">/* Performance Counter Register 5 */</span><span class="cp"></span>
<span class="cp">#define SPRN_PMC6	946	</span><span class="cm">/* Performance Counter Register 6 */</span><span class="cp"></span>

<span class="cp">#define SPRN_SIAR	955	</span><span class="cm">/* Sampled Instruction Address Register */</span><span class="cp"></span>

<span class="cm">/* Bit definitions for MMCR0 and PMC1 / PMC2. */</span>
<span class="cp">#define MMCR0_PMC1_CYCLES	(1 &lt;&lt; 7)</span>
<span class="cp">#define MMCR0_PMC1_ICACHEMISS	(5 &lt;&lt; 7)</span>
<span class="cp">#define MMCR0_PMC1_DTLB		(6 &lt;&lt; 7)</span>
<span class="cp">#define MMCR0_PMC2_DCACHEMISS	0x6</span>
<span class="cp">#define MMCR0_PMC2_CYCLES	0x1</span>
<span class="cp">#define MMCR0_PMC2_ITLB		0x7</span>
<span class="cp">#define MMCR0_PMC2_LOADMISSTIME	0x5</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * SPRG usage:</span>
<span class="cm"> *</span>
<span class="cm"> * All 64-bit:</span>
<span class="cm"> *	- SPRG1 stores PACA pointer except 64-bit server in</span>
<span class="cm"> *        HV mode in which case it is HSPRG0</span>
<span class="cm"> *</span>
<span class="cm"> * 64-bit server:</span>
<span class="cm"> *	- SPRG0 unused (reserved for HV on Power4)</span>
<span class="cm"> *	- SPRG2 scratch for exception vectors</span>
<span class="cm"> *	- SPRG3 unused (user visible)</span>
<span class="cm"> *      - HSPRG0 stores PACA in HV mode</span>
<span class="cm"> *      - HSPRG1 scratch for &quot;HV&quot; exceptions</span>
<span class="cm"> *</span>
<span class="cm"> * 64-bit embedded</span>
<span class="cm"> *	- SPRG0 generic exception scratch</span>
<span class="cm"> *	- SPRG2 TLB exception stack</span>
<span class="cm"> *	- SPRG3 unused (user visible)</span>
<span class="cm"> *	- SPRG4 unused (user visible)</span>
<span class="cm"> *	- SPRG6 TLB miss scratch (user visible, sorry !)</span>
<span class="cm"> *	- SPRG7 critical exception scratch</span>
<span class="cm"> *	- SPRG8 machine check exception scratch</span>
<span class="cm"> *	- SPRG9 debug exception scratch</span>
<span class="cm"> *</span>
<span class="cm"> * All 32-bit:</span>
<span class="cm"> *	- SPRG3 current thread_info pointer</span>
<span class="cm"> *        (virtual on BookE, physical on others)</span>
<span class="cm"> *</span>
<span class="cm"> * 32-bit classic:</span>
<span class="cm"> *	- SPRG0 scratch for exception vectors</span>
<span class="cm"> *	- SPRG1 scratch for exception vectors</span>
<span class="cm"> *	- SPRG2 indicator that we are in RTAS</span>
<span class="cm"> *	- SPRG4 (603 only) pseudo TLB LRU data</span>
<span class="cm"> *</span>
<span class="cm"> * 32-bit 40x:</span>
<span class="cm"> *	- SPRG0 scratch for exception vectors</span>
<span class="cm"> *	- SPRG1 scratch for exception vectors</span>
<span class="cm"> *	- SPRG2 scratch for exception vectors</span>
<span class="cm"> *	- SPRG4 scratch for exception vectors (not 403)</span>
<span class="cm"> *	- SPRG5 scratch for exception vectors (not 403)</span>
<span class="cm"> *	- SPRG6 scratch for exception vectors (not 403)</span>
<span class="cm"> *	- SPRG7 scratch for exception vectors (not 403)</span>
<span class="cm"> *</span>
<span class="cm"> * 32-bit 440 and FSL BookE:</span>
<span class="cm"> *	- SPRG0 scratch for exception vectors</span>
<span class="cm"> *	- SPRG1 scratch for exception vectors (*)</span>
<span class="cm"> *	- SPRG2 scratch for crit interrupts handler</span>
<span class="cm"> *	- SPRG4 scratch for exception vectors</span>
<span class="cm"> *	- SPRG5 scratch for exception vectors</span>
<span class="cm"> *	- SPRG6 scratch for machine check handler</span>
<span class="cm"> *	- SPRG7 scratch for exception vectors</span>
<span class="cm"> *	- SPRG9 scratch for debug vectors (e500 only)</span>
<span class="cm"> *</span>
<span class="cm"> *      Additionally, BookE separates &quot;read&quot; and &quot;write&quot;</span>
<span class="cm"> *      of those registers. That allows to use the userspace</span>
<span class="cm"> *      readable variant for reads, which can avoid a fault</span>
<span class="cm"> *      with KVM type virtualization.</span>
<span class="cm"> *</span>
<span class="cm"> *      (*) Under KVM, the host SPRG1 is used to point to</span>
<span class="cm"> *      the current VCPU data structure</span>
<span class="cm"> *</span>
<span class="cm"> * 32-bit 8xx:</span>
<span class="cm"> *	- SPRG0 scratch for exception vectors</span>
<span class="cm"> *	- SPRG1 scratch for exception vectors</span>
<span class="cm"> *	- SPRG2 apparently unused but initialized</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
<span class="cp">#define SPRN_SPRG_PACA 		SPRN_SPRG1</span>
<span class="cp">#else</span>
<span class="cp">#define SPRN_SPRG_THREAD 	SPRN_SPRG3</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PPC_BOOK3S_64</span>
<span class="cp">#define SPRN_SPRG_SCRATCH0	SPRN_SPRG2</span>
<span class="cp">#define SPRN_SPRG_HPACA		SPRN_HSPRG0</span>
<span class="cp">#define SPRN_SPRG_HSCRATCH0	SPRN_HSPRG1</span>

<span class="cp">#define GET_PACA(rX)					\</span>
<span class="cp">	BEGIN_FTR_SECTION_NESTED(66);			\</span>
<span class="cp">	mfspr	rX,SPRN_SPRG_PACA;			\</span>
<span class="cp">	FTR_SECTION_ELSE_NESTED(66);			\</span>
<span class="cp">	mfspr	rX,SPRN_SPRG_HPACA;			\</span>
<span class="cp">	ALT_FTR_SECTION_END_NESTED_IFCLR(CPU_FTR_HVMODE, 66)</span>

<span class="cp">#define SET_PACA(rX)					\</span>
<span class="cp">	BEGIN_FTR_SECTION_NESTED(66);			\</span>
<span class="cp">	mtspr	SPRN_SPRG_PACA,rX;			\</span>
<span class="cp">	FTR_SECTION_ELSE_NESTED(66);			\</span>
<span class="cp">	mtspr	SPRN_SPRG_HPACA,rX;			\</span>
<span class="cp">	ALT_FTR_SECTION_END_NESTED_IFCLR(CPU_FTR_HVMODE, 66)</span>

<span class="cp">#define GET_SCRATCH0(rX)				\</span>
<span class="cp">	BEGIN_FTR_SECTION_NESTED(66);			\</span>
<span class="cp">	mfspr	rX,SPRN_SPRG_SCRATCH0;			\</span>
<span class="cp">	FTR_SECTION_ELSE_NESTED(66);			\</span>
<span class="cp">	mfspr	rX,SPRN_SPRG_HSCRATCH0;			\</span>
<span class="cp">	ALT_FTR_SECTION_END_NESTED_IFCLR(CPU_FTR_HVMODE, 66)</span>

<span class="cp">#define SET_SCRATCH0(rX)				\</span>
<span class="cp">	BEGIN_FTR_SECTION_NESTED(66);			\</span>
<span class="cp">	mtspr	SPRN_SPRG_SCRATCH0,rX;			\</span>
<span class="cp">	FTR_SECTION_ELSE_NESTED(66);			\</span>
<span class="cp">	mtspr	SPRN_SPRG_HSCRATCH0,rX;			\</span>
<span class="cp">	ALT_FTR_SECTION_END_NESTED_IFCLR(CPU_FTR_HVMODE, 66)</span>

<span class="cp">#else </span><span class="cm">/* CONFIG_PPC_BOOK3S_64 */</span><span class="cp"></span>
<span class="cp">#define GET_SCRATCH0(rX)	mfspr	rX,SPRN_SPRG_SCRATCH0</span>
<span class="cp">#define SET_SCRATCH0(rX)	mtspr	SPRN_SPRG_SCRATCH0,rX</span>

<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PPC_BOOK3E_64</span>
<span class="cp">#define SPRN_SPRG_MC_SCRATCH	SPRN_SPRG8</span>
<span class="cp">#define SPRN_SPRG_CRIT_SCRATCH	SPRN_SPRG7</span>
<span class="cp">#define SPRN_SPRG_DBG_SCRATCH	SPRN_SPRG9</span>
<span class="cp">#define SPRN_SPRG_TLB_EXFRAME	SPRN_SPRG2</span>
<span class="cp">#define SPRN_SPRG_TLB_SCRATCH	SPRN_SPRG6</span>
<span class="cp">#define SPRN_SPRG_GEN_SCRATCH	SPRN_SPRG0</span>

<span class="cp">#define SET_PACA(rX)	mtspr	SPRN_SPRG_PACA,rX</span>
<span class="cp">#define GET_PACA(rX)	mfspr	rX,SPRN_SPRG_PACA</span>

<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_PPC_BOOK3S_32</span>
<span class="cp">#define SPRN_SPRG_SCRATCH0	SPRN_SPRG0</span>
<span class="cp">#define SPRN_SPRG_SCRATCH1	SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_RTAS		SPRN_SPRG2</span>
<span class="cp">#define SPRN_SPRG_603_LRU	SPRN_SPRG4</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_40x</span>
<span class="cp">#define SPRN_SPRG_SCRATCH0	SPRN_SPRG0</span>
<span class="cp">#define SPRN_SPRG_SCRATCH1	SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_SCRATCH2	SPRN_SPRG2</span>
<span class="cp">#define SPRN_SPRG_SCRATCH3	SPRN_SPRG4</span>
<span class="cp">#define SPRN_SPRG_SCRATCH4	SPRN_SPRG5</span>
<span class="cp">#define SPRN_SPRG_SCRATCH5	SPRN_SPRG6</span>
<span class="cp">#define SPRN_SPRG_SCRATCH6	SPRN_SPRG7</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_BOOKE</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH0	SPRN_SPRG0</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH0	SPRN_SPRG0</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH1	SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH1	SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH_CRIT	SPRN_SPRG2</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH_CRIT	SPRN_SPRG2</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH2	SPRN_SPRG4R</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH2	SPRN_SPRG4W</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH3	SPRN_SPRG5R</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH3	SPRN_SPRG5W</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH_MC	SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH_MC	SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH4	SPRN_SPRG7R</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH4	SPRN_SPRG7W</span>
<span class="cp">#ifdef CONFIG_E200</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH_DBG	SPRN_SPRG6R</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH_DBG	SPRN_SPRG6W</span>
<span class="cp">#else</span>
<span class="cp">#define SPRN_SPRG_RSCRATCH_DBG	SPRN_SPRG9</span>
<span class="cp">#define SPRN_SPRG_WSCRATCH_DBG	SPRN_SPRG9</span>
<span class="cp">#endif</span>
<span class="cp">#define SPRN_SPRG_RVCPU		SPRN_SPRG1</span>
<span class="cp">#define SPRN_SPRG_WVCPU		SPRN_SPRG1</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_8xx</span>
<span class="cp">#define SPRN_SPRG_SCRATCH0	SPRN_SPRG0</span>
<span class="cp">#define SPRN_SPRG_SCRATCH1	SPRN_SPRG1</span>
<span class="cp">#endif</span>



<span class="cm">/*</span>
<span class="cm"> * An mtfsf instruction with the L bit set. On CPUs that support this a</span>
<span class="cm"> * full 64bits of FPSCR is restored and on other CPUs the L bit is ignored.</span>
<span class="cm"> *</span>
<span class="cm"> * Until binutils gets the new form of mtfsf, hardwire the instruction.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_PPC64</span>
<span class="cp">#define MTFSF_L(REG) \</span>
<span class="cp">	.long (0xfc00058e | ((0xff) &lt;&lt; 17) | ((REG) &lt;&lt; 11) | (1 &lt;&lt; 25))</span>
<span class="cp">#else</span>
<span class="cp">#define MTFSF_L(REG)	mtfsf	0xff, (REG)</span>
<span class="cp">#endif</span>

<span class="cm">/* Processor Version Register (PVR) field extraction */</span>

<span class="cp">#define PVR_VER(pvr)	(((pvr) &gt;&gt;  16) &amp; 0xFFFF)	</span><span class="cm">/* Version field */</span><span class="cp"></span>
<span class="cp">#define PVR_REV(pvr)	(((pvr) &gt;&gt;   0) &amp; 0xFFFF)	</span><span class="cm">/* Revison field */</span><span class="cp"></span>

<span class="cp">#define __is_processor(pv)	(PVR_VER(mfspr(SPRN_PVR)) == (pv))</span>

<span class="cm">/*</span>
<span class="cm"> * IBM has further subdivided the standard PowerPC 16-bit version and</span>
<span class="cm"> * revision subfields of the PVR for the PowerPC 403s into the following:</span>
<span class="cm"> */</span>

<span class="cp">#define PVR_FAM(pvr)	(((pvr) &gt;&gt; 20) &amp; 0xFFF)	</span><span class="cm">/* Family field */</span><span class="cp"></span>
<span class="cp">#define PVR_MEM(pvr)	(((pvr) &gt;&gt; 16) &amp; 0xF)	</span><span class="cm">/* Member field */</span><span class="cp"></span>
<span class="cp">#define PVR_CORE(pvr)	(((pvr) &gt;&gt; 12) &amp; 0xF)	</span><span class="cm">/* Core field */</span><span class="cp"></span>
<span class="cp">#define PVR_CFG(pvr)	(((pvr) &gt;&gt;  8) &amp; 0xF)	</span><span class="cm">/* Configuration field */</span><span class="cp"></span>
<span class="cp">#define PVR_MAJ(pvr)	(((pvr) &gt;&gt;  4) &amp; 0xF)	</span><span class="cm">/* Major revision field */</span><span class="cp"></span>
<span class="cp">#define PVR_MIN(pvr)	(((pvr) &gt;&gt;  0) &amp; 0xF)	</span><span class="cm">/* Minor revision field */</span><span class="cp"></span>

<span class="cm">/* Processor Version Numbers */</span>

<span class="cp">#define PVR_403GA	0x00200000</span>
<span class="cp">#define PVR_403GB	0x00200100</span>
<span class="cp">#define PVR_403GC	0x00200200</span>
<span class="cp">#define PVR_403GCX	0x00201400</span>
<span class="cp">#define PVR_405GP	0x40110000</span>
<span class="cp">#define PVR_476		0x11a52000</span>
<span class="cp">#define PVR_476FPE	0x7ff50000</span>
<span class="cp">#define PVR_STB03XXX	0x40310000</span>
<span class="cp">#define PVR_NP405H	0x41410000</span>
<span class="cp">#define PVR_NP405L	0x41610000</span>
<span class="cp">#define PVR_601		0x00010000</span>
<span class="cp">#define PVR_602		0x00050000</span>
<span class="cp">#define PVR_603		0x00030000</span>
<span class="cp">#define PVR_603e	0x00060000</span>
<span class="cp">#define PVR_603ev	0x00070000</span>
<span class="cp">#define PVR_603r	0x00071000</span>
<span class="cp">#define PVR_604		0x00040000</span>
<span class="cp">#define PVR_604e	0x00090000</span>
<span class="cp">#define PVR_604r	0x000A0000</span>
<span class="cp">#define PVR_620		0x00140000</span>
<span class="cp">#define PVR_740		0x00080000</span>
<span class="cp">#define PVR_750		PVR_740</span>
<span class="cp">#define PVR_740P	0x10080000</span>
<span class="cp">#define PVR_750P	PVR_740P</span>
<span class="cp">#define PVR_7400	0x000C0000</span>
<span class="cp">#define PVR_7410	0x800C0000</span>
<span class="cp">#define PVR_7450	0x80000000</span>
<span class="cp">#define PVR_8540	0x80200000</span>
<span class="cp">#define PVR_8560	0x80200000</span>
<span class="cp">#define PVR_VER_E500V1	0x8020</span>
<span class="cp">#define PVR_VER_E500V2	0x8021</span>
<span class="cm">/*</span>
<span class="cm"> * For the 8xx processors, all of them report the same PVR family for</span>
<span class="cm"> * the PowerPC core. The various versions of these processors must be</span>
<span class="cm"> * differentiated by the version number in the Communication Processor</span>
<span class="cm"> * Module (CPM).</span>
<span class="cm"> */</span>
<span class="cp">#define PVR_821		0x00500000</span>
<span class="cp">#define PVR_823		PVR_821</span>
<span class="cp">#define PVR_850		PVR_821</span>
<span class="cp">#define PVR_860		PVR_821</span>
<span class="cp">#define PVR_8240	0x00810100</span>
<span class="cp">#define PVR_8245	0x80811014</span>
<span class="cp">#define PVR_8260	PVR_8240</span>

<span class="cm">/* 476 Simulator seems to currently have the PVR of the 602... */</span>
<span class="cp">#define PVR_476_ISS	0x00052000</span>

<span class="cm">/* 64-bit processors */</span>
<span class="cm">/* XXX the prefix should be PVR_, we&#39;ll do a global sweep to fix it one day */</span>
<span class="cp">#define PV_NORTHSTAR	0x0033</span>
<span class="cp">#define PV_PULSAR	0x0034</span>
<span class="cp">#define PV_POWER4	0x0035</span>
<span class="cp">#define PV_ICESTAR	0x0036</span>
<span class="cp">#define PV_SSTAR	0x0037</span>
<span class="cp">#define PV_POWER4p	0x0038</span>
<span class="cp">#define PV_970		0x0039</span>
<span class="cp">#define PV_POWER5	0x003A</span>
<span class="cp">#define PV_POWER5p	0x003B</span>
<span class="cp">#define PV_970FX	0x003C</span>
<span class="cp">#define PV_POWER6	0x003E</span>
<span class="cp">#define PV_POWER7	0x003F</span>
<span class="cp">#define PV_630		0x0040</span>
<span class="cp">#define PV_630p	0x0041</span>
<span class="cp">#define PV_970MP	0x0044</span>
<span class="cp">#define PV_970GX	0x0045</span>
<span class="cp">#define PV_BE		0x0070</span>
<span class="cp">#define PV_PA6T		0x0090</span>

<span class="cm">/* Macros for setting and retrieving special purpose registers */</span>
<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#define mfmsr()		({unsigned long rval; \</span>
<span class="cp">			asm volatile(&quot;mfmsr %0&quot; : &quot;=r&quot; (rval)); rval;})</span>
<span class="cp">#ifdef CONFIG_PPC_BOOK3S_64</span>
<span class="cp">#define __mtmsrd(v, l)	asm volatile(&quot;mtmsrd %0,&quot; __stringify(l) \</span>
<span class="cp">				     : : &quot;r&quot; (v) : &quot;memory&quot;)</span>
<span class="cp">#define mtmsrd(v)	__mtmsrd((v), 0)</span>
<span class="cp">#define mtmsr(v)	mtmsrd(v)</span>
<span class="cp">#else</span>
<span class="cp">#define mtmsr(v)	asm volatile(&quot;mtmsr %0&quot; : \</span>
<span class="cp">				     : &quot;r&quot; ((unsigned long)(v)) \</span>
<span class="cp">				     : &quot;memory&quot;)</span>
<span class="cp">#endif</span>

<span class="cp">#define mfspr(rn)	({unsigned long rval; \</span>
<span class="cp">			asm volatile(&quot;mfspr %0,&quot; __stringify(rn) \</span>
<span class="cp">				: &quot;=r&quot; (rval)); rval;})</span>
<span class="cp">#define mtspr(rn, v)	asm volatile(&quot;mtspr &quot; __stringify(rn) &quot;,%0&quot; : \</span>
<span class="cp">				     : &quot;r&quot; ((unsigned long)(v)) \</span>
<span class="cp">				     : &quot;memory&quot;)</span>

<span class="cp">#ifdef __powerpc64__</span>
<span class="cp">#ifdef CONFIG_PPC_CELL</span>
<span class="cp">#define mftb()		({unsigned long rval;				\</span>
<span class="cp">			asm volatile(					\</span>
<span class="cp">				&quot;90:	mftb %0;\n&quot;			\</span>
<span class="cp">				&quot;97:	cmpwi %0,0;\n&quot;			\</span>
<span class="cp">				&quot;	beq- 90b;\n&quot;			\</span>
<span class="cp">				&quot;99:\n&quot;					\</span>
<span class="cp">				&quot;.section __ftr_fixup,\&quot;a\&quot;\n&quot;		\</span>
<span class="cp">				&quot;.align 3\n&quot;				\</span>
<span class="cp">				&quot;98:\n&quot;					\</span>
<span class="cp">				&quot;	.llong %1\n&quot;			\</span>
<span class="cp">				&quot;	.llong %1\n&quot;			\</span>
<span class="cp">				&quot;	.llong 97b-98b\n&quot;		\</span>
<span class="cp">				&quot;	.llong 99b-98b\n&quot;		\</span>
<span class="cp">				&quot;	.llong 0\n&quot;			\</span>
<span class="cp">				&quot;	.llong 0\n&quot;			\</span>
<span class="cp">				&quot;.previous&quot;				\</span>
<span class="cp">			: &quot;=r&quot; (rval) : &quot;i&quot; (CPU_FTR_CELL_TB_BUG)); rval;})</span>
<span class="cp">#else</span>
<span class="cp">#define mftb()		({unsigned long rval;	\</span>
<span class="cp">			asm volatile(&quot;mftb %0&quot; : &quot;=r&quot; (rval)); rval;})</span>
<span class="cp">#endif </span><span class="cm">/* !CONFIG_PPC_CELL */</span><span class="cp"></span>

<span class="cp">#else </span><span class="cm">/* __powerpc64__ */</span><span class="cp"></span>

<span class="cp">#define mftbl()		({unsigned long rval;	\</span>
<span class="cp">			asm volatile(&quot;mftbl %0&quot; : &quot;=r&quot; (rval)); rval;})</span>
<span class="cp">#define mftbu()		({unsigned long rval;	\</span>
<span class="cp">			asm volatile(&quot;mftbu %0&quot; : &quot;=r&quot; (rval)); rval;})</span>
<span class="cp">#endif </span><span class="cm">/* !__powerpc64__ */</span><span class="cp"></span>

<span class="cp">#define mttbl(v)	asm volatile(&quot;mttbl %0&quot;:: &quot;r&quot;(v))</span>
<span class="cp">#define mttbu(v)	asm volatile(&quot;mttbu %0&quot;:: &quot;r&quot;(v))</span>

<span class="cp">#ifdef CONFIG_PPC32</span>
<span class="cp">#define mfsrin(v)	({unsigned int rval; \</span>
<span class="cp">			asm volatile(&quot;mfsrin %0,%1&quot; : &quot;=r&quot; (rval) : &quot;r&quot; (v)); \</span>
<span class="cp">					rval;})</span>
<span class="cp">#endif</span>

<span class="cp">#define proc_trap()	asm volatile(&quot;trap&quot;)</span>

<span class="cp">#define __get_SP()	({unsigned long sp; \</span>
<span class="cp">			asm volatile(&quot;mr %0,1&quot;: &quot;=r&quot; (sp)); sp;})</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">scom970_read</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">address</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">scom970_write</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">address</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">value</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">pt_regs</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">ppc_save_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* _ASM_POWERPC_REG_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
