<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › cputable.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>cputable.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __ASM_POWERPC_CPUTABLE_H</span>
<span class="cp">#define __ASM_POWERPC_CPUTABLE_H</span>

<span class="cp">#define PPC_FEATURE_32			0x80000000</span>
<span class="cp">#define PPC_FEATURE_64			0x40000000</span>
<span class="cp">#define PPC_FEATURE_601_INSTR		0x20000000</span>
<span class="cp">#define PPC_FEATURE_HAS_ALTIVEC		0x10000000</span>
<span class="cp">#define PPC_FEATURE_HAS_FPU		0x08000000</span>
<span class="cp">#define PPC_FEATURE_HAS_MMU		0x04000000</span>
<span class="cp">#define PPC_FEATURE_HAS_4xxMAC		0x02000000</span>
<span class="cp">#define PPC_FEATURE_UNIFIED_CACHE	0x01000000</span>
<span class="cp">#define PPC_FEATURE_HAS_SPE		0x00800000</span>
<span class="cp">#define PPC_FEATURE_HAS_EFP_SINGLE	0x00400000</span>
<span class="cp">#define PPC_FEATURE_HAS_EFP_DOUBLE	0x00200000</span>
<span class="cp">#define PPC_FEATURE_NO_TB		0x00100000</span>
<span class="cp">#define PPC_FEATURE_POWER4		0x00080000</span>
<span class="cp">#define PPC_FEATURE_POWER5		0x00040000</span>
<span class="cp">#define PPC_FEATURE_POWER5_PLUS		0x00020000</span>
<span class="cp">#define PPC_FEATURE_CELL		0x00010000</span>
<span class="cp">#define PPC_FEATURE_BOOKE		0x00008000</span>
<span class="cp">#define PPC_FEATURE_SMT			0x00004000</span>
<span class="cp">#define PPC_FEATURE_ICACHE_SNOOP	0x00002000</span>
<span class="cp">#define PPC_FEATURE_ARCH_2_05		0x00001000</span>
<span class="cp">#define PPC_FEATURE_PA6T		0x00000800</span>
<span class="cp">#define PPC_FEATURE_HAS_DFP		0x00000400</span>
<span class="cp">#define PPC_FEATURE_POWER6_EXT		0x00000200</span>
<span class="cp">#define PPC_FEATURE_ARCH_2_06		0x00000100</span>
<span class="cp">#define PPC_FEATURE_HAS_VSX		0x00000080</span>

<span class="cp">#define PPC_FEATURE_PSERIES_PERFMON_COMPAT \</span>
<span class="cp">					0x00000040</span>

<span class="cp">#define PPC_FEATURE_TRUE_LE		0x00000002</span>
<span class="cp">#define PPC_FEATURE_PPC_LE		0x00000001</span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#include &lt;asm/asm-compat.h&gt;</span>
<span class="cp">#include &lt;asm/feature-fixups.h&gt;</span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="cm">/* This structure can grow, it&#39;s real size is used by head.S code</span>
<span class="cm"> * via the mkdefs mechanism.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">cpu_spec</span><span class="p">;</span>

<span class="k">typedef</span>	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">cpu_setup_t</span><span class="p">)(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">offset</span><span class="p">,</span> <span class="k">struct</span> <span class="n">cpu_spec</span><span class="o">*</span> <span class="n">spec</span><span class="p">);</span>
<span class="k">typedef</span>	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">cpu_restore_t</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">powerpc_oprofile_type</span> <span class="p">{</span>
	<span class="n">PPC_OPROFILE_INVALID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PPC_OPROFILE_RS64</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PPC_OPROFILE_POWER4</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">PPC_OPROFILE_G4</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">PPC_OPROFILE_FSL_EMB</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">PPC_OPROFILE_CELL</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">PPC_OPROFILE_PA6T</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">powerpc_pmc_type</span> <span class="p">{</span>
	<span class="n">PPC_PMC_DEFAULT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">PPC_PMC_IBM</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">PPC_PMC_PA6T</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">PPC_PMC_G4</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pt_regs</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_generic</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_4xx</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_440A</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_e500mc</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_e500</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_e200</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">machine_check_47x</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>

<span class="cm">/* NOTE WELL: Update identify_cpu() if fields are added or removed! */</span>
<span class="k">struct</span> <span class="n">cpu_spec</span> <span class="p">{</span>
	<span class="cm">/* CPU is matched via (PVR &amp; pvr_mask) == pvr_value */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">pvr_mask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">pvr_value</span><span class="p">;</span>

	<span class="kt">char</span>		<span class="o">*</span><span class="n">cpu_name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">cpu_features</span><span class="p">;</span>		<span class="cm">/* Kernel features */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">cpu_user_features</span><span class="p">;</span>	<span class="cm">/* Userland features */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">mmu_features</span><span class="p">;</span>		<span class="cm">/* MMU features */</span>

	<span class="cm">/* cache line sizes */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">icache_bsize</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">dcache_bsize</span><span class="p">;</span>

	<span class="cm">/* number of performance monitor counters */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">num_pmcs</span><span class="p">;</span>
	<span class="k">enum</span> <span class="n">powerpc_pmc_type</span> <span class="n">pmc_type</span><span class="p">;</span>

	<span class="cm">/* this is called to initialize various CPU bits like L1 cache,</span>
<span class="cm">	 * BHT, SPD, etc... from head.S before branching to identify_machine</span>
<span class="cm">	 */</span>
	<span class="n">cpu_setup_t</span>	<span class="n">cpu_setup</span><span class="p">;</span>
	<span class="cm">/* Used to restore cpu setup on secondary processors and at resume */</span>
	<span class="n">cpu_restore_t</span>	<span class="n">cpu_restore</span><span class="p">;</span>

	<span class="cm">/* Used by oprofile userspace to select the right counters */</span>
	<span class="kt">char</span>		<span class="o">*</span><span class="n">oprofile_cpu_type</span><span class="p">;</span>

	<span class="cm">/* Processor specific oprofile operations */</span>
	<span class="k">enum</span> <span class="n">powerpc_oprofile_type</span> <span class="n">oprofile_type</span><span class="p">;</span>

	<span class="cm">/* Bit locations inside the mmcra change */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">oprofile_mmcra_sihv</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">oprofile_mmcra_sipr</span><span class="p">;</span>

	<span class="cm">/* Bits to clear during an oprofile exception */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">oprofile_mmcra_clear</span><span class="p">;</span>

	<span class="cm">/* Name of processor class, for the ELF AT_PLATFORM entry */</span>
	<span class="kt">char</span>		<span class="o">*</span><span class="n">platform</span><span class="p">;</span>

	<span class="cm">/* Processor specific machine check handling. Return negative</span>
<span class="cm">	 * if the error is fatal, 1 if it was fully recovered and 0 to</span>
<span class="cm">	 * pass up (not CPU originated) */</span>
	<span class="kt">int</span>		<span class="p">(</span><span class="o">*</span><span class="n">machine_check</span><span class="p">)(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">cpu_spec</span>		<span class="o">*</span><span class="n">cur_cpu_spec</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">__start___ftr_fixup</span><span class="p">,</span> <span class="n">__stop___ftr_fixup</span><span class="p">;</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">cpu_spec</span> <span class="o">*</span><span class="n">identify_cpu</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pvr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">do_feature_fixups</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">value</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">fixup_start</span><span class="p">,</span>
			      <span class="kt">void</span> <span class="o">*</span><span class="n">fixup_end</span><span class="p">);</span>

<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">powerpc_base_platform</span><span class="p">;</span>

<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>

<span class="cm">/* CPU kernel features */</span>

<span class="cm">/* Retain the 32b definitions all use bottom half of word */</span>
<span class="cp">#define CPU_FTR_COHERENT_ICACHE		ASM_CONST(0x0000000000000001)</span>
<span class="cp">#define CPU_FTR_L2CR			ASM_CONST(0x0000000000000002)</span>
<span class="cp">#define CPU_FTR_SPEC7450		ASM_CONST(0x0000000000000004)</span>
<span class="cp">#define CPU_FTR_ALTIVEC			ASM_CONST(0x0000000000000008)</span>
<span class="cp">#define CPU_FTR_TAU			ASM_CONST(0x0000000000000010)</span>
<span class="cp">#define CPU_FTR_CAN_DOZE		ASM_CONST(0x0000000000000020)</span>
<span class="cp">#define CPU_FTR_USE_TB			ASM_CONST(0x0000000000000040)</span>
<span class="cp">#define CPU_FTR_L2CSR			ASM_CONST(0x0000000000000080)</span>
<span class="cp">#define CPU_FTR_601			ASM_CONST(0x0000000000000100)</span>
<span class="cp">#define CPU_FTR_DBELL			ASM_CONST(0x0000000000000200)</span>
<span class="cp">#define CPU_FTR_CAN_NAP			ASM_CONST(0x0000000000000400)</span>
<span class="cp">#define CPU_FTR_L3CR			ASM_CONST(0x0000000000000800)</span>
<span class="cp">#define CPU_FTR_L3_DISABLE_NAP		ASM_CONST(0x0000000000001000)</span>
<span class="cp">#define CPU_FTR_NAP_DISABLE_L2_PR	ASM_CONST(0x0000000000002000)</span>
<span class="cp">#define CPU_FTR_DUAL_PLL_750FX		ASM_CONST(0x0000000000004000)</span>
<span class="cp">#define CPU_FTR_NO_DPM			ASM_CONST(0x0000000000008000)</span>
<span class="cp">#define CPU_FTR_476_DD2			ASM_CONST(0x0000000000010000)</span>
<span class="cp">#define CPU_FTR_NEED_COHERENT		ASM_CONST(0x0000000000020000)</span>
<span class="cp">#define CPU_FTR_NO_BTIC			ASM_CONST(0x0000000000040000)</span>
<span class="cp">#define CPU_FTR_DEBUG_LVL_EXC		ASM_CONST(0x0000000000080000)</span>
<span class="cp">#define CPU_FTR_NODSISRALIGN		ASM_CONST(0x0000000000100000)</span>
<span class="cp">#define CPU_FTR_PPC_LE			ASM_CONST(0x0000000000200000)</span>
<span class="cp">#define CPU_FTR_REAL_LE			ASM_CONST(0x0000000000400000)</span>
<span class="cp">#define CPU_FTR_FPU_UNAVAILABLE		ASM_CONST(0x0000000000800000)</span>
<span class="cp">#define CPU_FTR_UNIFIED_ID_CACHE	ASM_CONST(0x0000000001000000)</span>
<span class="cp">#define CPU_FTR_SPE			ASM_CONST(0x0000000002000000)</span>
<span class="cp">#define CPU_FTR_NEED_PAIRED_STWCX	ASM_CONST(0x0000000004000000)</span>
<span class="cp">#define CPU_FTR_LWSYNC			ASM_CONST(0x0000000008000000)</span>
<span class="cp">#define CPU_FTR_NOEXECUTE		ASM_CONST(0x0000000010000000)</span>
<span class="cp">#define CPU_FTR_INDEXED_DCR		ASM_CONST(0x0000000020000000)</span>
<span class="cp">#define CPU_FTR_EMB_HV			ASM_CONST(0x0000000040000000)</span>

<span class="cm">/*</span>
<span class="cm"> * Add the 64-bit processor unique features in the top half of the word;</span>
<span class="cm"> * on 32-bit, make the names available but defined to be 0.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef __powerpc64__</span>
<span class="cp">#define LONG_ASM_CONST(x)		ASM_CONST(x)</span>
<span class="cp">#else</span>
<span class="cp">#define LONG_ASM_CONST(x)		0</span>
<span class="cp">#endif</span>

<span class="cp">#define CPU_FTR_HVMODE			LONG_ASM_CONST(0x0000000200000000)</span>
<span class="cp">#define CPU_FTR_ARCH_201		LONG_ASM_CONST(0x0000000400000000)</span>
<span class="cp">#define CPU_FTR_ARCH_206		LONG_ASM_CONST(0x0000000800000000)</span>
<span class="cp">#define CPU_FTR_CFAR			LONG_ASM_CONST(0x0000001000000000)</span>
<span class="cp">#define CPU_FTR_IABR			LONG_ASM_CONST(0x0000002000000000)</span>
<span class="cp">#define CPU_FTR_MMCRA			LONG_ASM_CONST(0x0000004000000000)</span>
<span class="cp">#define CPU_FTR_CTRL			LONG_ASM_CONST(0x0000008000000000)</span>
<span class="cp">#define CPU_FTR_SMT			LONG_ASM_CONST(0x0000010000000000)</span>
<span class="cp">#define CPU_FTR_PAUSE_ZERO		LONG_ASM_CONST(0x0000200000000000)</span>
<span class="cp">#define CPU_FTR_PURR			LONG_ASM_CONST(0x0000400000000000)</span>
<span class="cp">#define CPU_FTR_CELL_TB_BUG		LONG_ASM_CONST(0x0000800000000000)</span>
<span class="cp">#define CPU_FTR_SPURR			LONG_ASM_CONST(0x0001000000000000)</span>
<span class="cp">#define CPU_FTR_DSCR			LONG_ASM_CONST(0x0002000000000000)</span>
<span class="cp">#define CPU_FTR_VSX			LONG_ASM_CONST(0x0010000000000000)</span>
<span class="cp">#define CPU_FTR_SAO			LONG_ASM_CONST(0x0020000000000000)</span>
<span class="cp">#define CPU_FTR_CP_USE_DCBTZ		LONG_ASM_CONST(0x0040000000000000)</span>
<span class="cp">#define CPU_FTR_UNALIGNED_LD_STD	LONG_ASM_CONST(0x0080000000000000)</span>
<span class="cp">#define CPU_FTR_ASYM_SMT		LONG_ASM_CONST(0x0100000000000000)</span>
<span class="cp">#define CPU_FTR_STCX_CHECKS_ADDRESS	LONG_ASM_CONST(0x0200000000000000)</span>
<span class="cp">#define CPU_FTR_POPCNTB			LONG_ASM_CONST(0x0400000000000000)</span>
<span class="cp">#define CPU_FTR_POPCNTD			LONG_ASM_CONST(0x0800000000000000)</span>
<span class="cp">#define CPU_FTR_ICSWX			LONG_ASM_CONST(0x1000000000000000)</span>
<span class="cp">#define CPU_FTR_VMX_COPY		LONG_ASM_CONST(0x2000000000000000)</span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="cp">#define CPU_FTR_PPCAS_ARCH_V2	(CPU_FTR_NOEXECUTE | CPU_FTR_NODSISRALIGN)</span>

<span class="cp">#define MMU_FTR_PPCAS_ARCH_V2 	(MMU_FTR_SLB | MMU_FTR_TLBIEL | \</span>
<span class="cp">				 MMU_FTR_16M_PAGE)</span>

<span class="cm">/* We only set the altivec features if the kernel was compiled with altivec</span>
<span class="cm"> * support</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_ALTIVEC</span>
<span class="cp">#define CPU_FTR_ALTIVEC_COMP	CPU_FTR_ALTIVEC</span>
<span class="cp">#define PPC_FEATURE_HAS_ALTIVEC_COMP PPC_FEATURE_HAS_ALTIVEC</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTR_ALTIVEC_COMP	0</span>
<span class="cp">#define PPC_FEATURE_HAS_ALTIVEC_COMP    0</span>
<span class="cp">#endif</span>

<span class="cm">/* We only set the VSX features if the kernel was compiled with VSX</span>
<span class="cm"> * support</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_VSX</span>
<span class="cp">#define CPU_FTR_VSX_COMP	CPU_FTR_VSX</span>
<span class="cp">#define PPC_FEATURE_HAS_VSX_COMP PPC_FEATURE_HAS_VSX</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTR_VSX_COMP	0</span>
<span class="cp">#define PPC_FEATURE_HAS_VSX_COMP    0</span>
<span class="cp">#endif</span>

<span class="cm">/* We only set the spe features if the kernel was compiled with spe</span>
<span class="cm"> * support</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_SPE</span>
<span class="cp">#define CPU_FTR_SPE_COMP	CPU_FTR_SPE</span>
<span class="cp">#define PPC_FEATURE_HAS_SPE_COMP PPC_FEATURE_HAS_SPE</span>
<span class="cp">#define PPC_FEATURE_HAS_EFP_SINGLE_COMP PPC_FEATURE_HAS_EFP_SINGLE</span>
<span class="cp">#define PPC_FEATURE_HAS_EFP_DOUBLE_COMP PPC_FEATURE_HAS_EFP_DOUBLE</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTR_SPE_COMP	0</span>
<span class="cp">#define PPC_FEATURE_HAS_SPE_COMP    0</span>
<span class="cp">#define PPC_FEATURE_HAS_EFP_SINGLE_COMP 0</span>
<span class="cp">#define PPC_FEATURE_HAS_EFP_DOUBLE_COMP 0</span>
<span class="cp">#endif</span>

<span class="cm">/* We need to mark all pages as being coherent if we&#39;re SMP or we have a</span>
<span class="cm"> * 74[45]x and an MPC107 host bridge. Also 83xx and PowerQUICC II</span>
<span class="cm"> * require it for PCI &quot;streaming/prefetch&quot; to work properly.</span>
<span class="cm"> * This is also required by 52xx family.</span>
<span class="cm"> */</span>
<span class="cp">#if defined(CONFIG_SMP) || defined(CONFIG_MPC10X_BRIDGE) \</span>
<span class="cp">	|| defined(CONFIG_PPC_83xx) || defined(CONFIG_8260) \</span>
<span class="cp">	|| defined(CONFIG_PPC_MPC52xx)</span>
<span class="cp">#define CPU_FTR_COMMON                  CPU_FTR_NEED_COHERENT</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTR_COMMON                  0</span>
<span class="cp">#endif</span>

<span class="cm">/* The powersave features NAP &amp; DOZE seems to confuse BDI when</span>
<span class="cm">   debugging. So if a BDI is used, disable theses</span>
<span class="cm"> */</span>
<span class="cp">#ifndef CONFIG_BDI_SWITCH</span>
<span class="cp">#define CPU_FTR_MAYBE_CAN_DOZE	CPU_FTR_CAN_DOZE</span>
<span class="cp">#define CPU_FTR_MAYBE_CAN_NAP	CPU_FTR_CAN_NAP</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTR_MAYBE_CAN_DOZE	0</span>
<span class="cp">#define CPU_FTR_MAYBE_CAN_NAP	0</span>
<span class="cp">#endif</span>

<span class="cp">#define CLASSIC_PPC (!defined(CONFIG_8xx) &amp;&amp; !defined(CONFIG_4xx) &amp;&amp; \</span>
<span class="cp">		     !defined(CONFIG_POWER3) &amp;&amp; !defined(CONFIG_POWER4) &amp;&amp; \</span>
<span class="cp">		     !defined(CONFIG_BOOKE))</span>

<span class="cp">#define CPU_FTRS_PPC601	(CPU_FTR_COMMON | CPU_FTR_601 | \</span>
<span class="cp">	CPU_FTR_COHERENT_ICACHE | CPU_FTR_UNIFIED_ID_CACHE)</span>
<span class="cp">#define CPU_FTRS_603	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_604	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_740_NOTAU	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | CPU_FTR_L2CR | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_740	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | CPU_FTR_L2CR | \</span>
<span class="cp">	    CPU_FTR_TAU | CPU_FTR_MAYBE_CAN_NAP | \</span>
<span class="cp">	    CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_750	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | CPU_FTR_L2CR | \</span>
<span class="cp">	    CPU_FTR_TAU | CPU_FTR_MAYBE_CAN_NAP | \</span>
<span class="cp">	    CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_750CL	(CPU_FTRS_750)</span>
<span class="cp">#define CPU_FTRS_750FX1	(CPU_FTRS_750 | CPU_FTR_DUAL_PLL_750FX | CPU_FTR_NO_DPM)</span>
<span class="cp">#define CPU_FTRS_750FX2	(CPU_FTRS_750 | CPU_FTR_NO_DPM)</span>
<span class="cp">#define CPU_FTRS_750FX	(CPU_FTRS_750 | CPU_FTR_DUAL_PLL_750FX)</span>
<span class="cp">#define CPU_FTRS_750GX	(CPU_FTRS_750FX)</span>
<span class="cp">#define CPU_FTRS_7400_NOTAU	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | CPU_FTR_L2CR | \</span>
<span class="cp">	    CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_7400	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | CPU_FTR_L2CR | \</span>
<span class="cp">	    CPU_FTR_TAU | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_7450_20	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE | CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_7450_21	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | \</span>
<span class="cp">	    CPU_FTR_NAP_DISABLE_L2_PR | CPU_FTR_L3_DISABLE_NAP | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE | CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_7450_23	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_NEED_PAIRED_STWCX | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | \</span>
<span class="cp">	    CPU_FTR_NAP_DISABLE_L2_PR | CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_7455_1	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_NEED_PAIRED_STWCX | \</span>
<span class="cp">	    CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | CPU_FTR_L3CR | \</span>
<span class="cp">	    CPU_FTR_SPEC7450 | CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_7455_20	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_NEED_PAIRED_STWCX | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | \</span>
<span class="cp">	    CPU_FTR_NAP_DISABLE_L2_PR | CPU_FTR_L3_DISABLE_NAP | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_7455	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | CPU_FTR_NAP_DISABLE_L2_PR | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE | CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_7447_10	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | CPU_FTR_NAP_DISABLE_L2_PR | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_NO_BTIC | CPU_FTR_PPC_LE | \</span>
<span class="cp">	    CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_7447	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_L3CR | CPU_FTR_SPEC7450 | CPU_FTR_NAP_DISABLE_L2_PR | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE | CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_7447A	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_SPEC7450 | CPU_FTR_NAP_DISABLE_L2_PR | \</span>
<span class="cp">	    CPU_FTR_NEED_COHERENT | CPU_FTR_PPC_LE | CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_7448	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_L2CR | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_SPEC7450 | CPU_FTR_NAP_DISABLE_L2_PR | \</span>
<span class="cp">	    CPU_FTR_PPC_LE | CPU_FTR_NEED_PAIRED_STWCX)</span>
<span class="cp">#define CPU_FTRS_82XX	(CPU_FTR_COMMON | \</span>
<span class="cp">	    CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB)</span>
<span class="cp">#define CPU_FTRS_G2_LE	(CPU_FTR_COMMON | CPU_FTR_MAYBE_CAN_DOZE | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_MAYBE_CAN_NAP)</span>
<span class="cp">#define CPU_FTRS_E300	(CPU_FTR_MAYBE_CAN_DOZE | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_MAYBE_CAN_NAP | \</span>
<span class="cp">	    CPU_FTR_COMMON)</span>
<span class="cp">#define CPU_FTRS_E300C2	(CPU_FTR_MAYBE_CAN_DOZE | \</span>
<span class="cp">	    CPU_FTR_USE_TB | CPU_FTR_MAYBE_CAN_NAP | \</span>
<span class="cp">	    CPU_FTR_COMMON | CPU_FTR_FPU_UNAVAILABLE)</span>
<span class="cp">#define CPU_FTRS_CLASSIC32	(CPU_FTR_COMMON | CPU_FTR_USE_TB)</span>
<span class="cp">#define CPU_FTRS_8XX	(CPU_FTR_USE_TB)</span>
<span class="cp">#define CPU_FTRS_40X	(CPU_FTR_USE_TB | CPU_FTR_NODSISRALIGN | CPU_FTR_NOEXECUTE)</span>
<span class="cp">#define CPU_FTRS_44X	(CPU_FTR_USE_TB | CPU_FTR_NODSISRALIGN | CPU_FTR_NOEXECUTE)</span>
<span class="cp">#define CPU_FTRS_440x6	(CPU_FTR_USE_TB | CPU_FTR_NODSISRALIGN | CPU_FTR_NOEXECUTE | \</span>
<span class="cp">	    CPU_FTR_INDEXED_DCR)</span>
<span class="cp">#define CPU_FTRS_47X	(CPU_FTRS_440x6)</span>
<span class="cp">#define CPU_FTRS_E200	(CPU_FTR_USE_TB | CPU_FTR_SPE_COMP | \</span>
<span class="cp">	    CPU_FTR_NODSISRALIGN | CPU_FTR_COHERENT_ICACHE | \</span>
<span class="cp">	    CPU_FTR_UNIFIED_ID_CACHE | CPU_FTR_NOEXECUTE | \</span>
<span class="cp">	    CPU_FTR_DEBUG_LVL_EXC)</span>
<span class="cp">#define CPU_FTRS_E500	(CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_SPE_COMP | CPU_FTR_MAYBE_CAN_NAP | CPU_FTR_NODSISRALIGN | \</span>
<span class="cp">	    CPU_FTR_NOEXECUTE)</span>
<span class="cp">#define CPU_FTRS_E500_2	(CPU_FTR_MAYBE_CAN_DOZE | CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_SPE_COMP | CPU_FTR_MAYBE_CAN_NAP | \</span>
<span class="cp">	    CPU_FTR_NODSISRALIGN | CPU_FTR_NOEXECUTE)</span>
<span class="cp">#define CPU_FTRS_E500MC	(CPU_FTR_USE_TB | CPU_FTR_NODSISRALIGN | \</span>
<span class="cp">	    CPU_FTR_L2CSR | CPU_FTR_LWSYNC | CPU_FTR_NOEXECUTE | \</span>
<span class="cp">	    CPU_FTR_DBELL | CPU_FTR_DEBUG_LVL_EXC | CPU_FTR_EMB_HV)</span>
<span class="cp">#define CPU_FTRS_E5500	(CPU_FTR_USE_TB | CPU_FTR_NODSISRALIGN | \</span>
<span class="cp">	    CPU_FTR_L2CSR | CPU_FTR_LWSYNC | CPU_FTR_NOEXECUTE | \</span>
<span class="cp">	    CPU_FTR_DBELL | CPU_FTR_POPCNTB | CPU_FTR_POPCNTD | \</span>
<span class="cp">	    CPU_FTR_DEBUG_LVL_EXC | CPU_FTR_EMB_HV)</span>
<span class="cp">#define CPU_FTRS_E6500	(CPU_FTR_USE_TB | CPU_FTR_NODSISRALIGN | \</span>
<span class="cp">	    CPU_FTR_L2CSR | CPU_FTR_LWSYNC | CPU_FTR_NOEXECUTE | \</span>
<span class="cp">	    CPU_FTR_DBELL | CPU_FTR_POPCNTB | CPU_FTR_POPCNTD | \</span>
<span class="cp">	    CPU_FTR_DEBUG_LVL_EXC | CPU_FTR_EMB_HV)</span>
<span class="cp">#define CPU_FTRS_GENERIC_32	(CPU_FTR_COMMON | CPU_FTR_NODSISRALIGN)</span>

<span class="cm">/* 64-bit CPUs */</span>
<span class="cp">#define CPU_FTRS_POWER3	(CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_IABR | CPU_FTR_PPC_LE)</span>
<span class="cp">#define CPU_FTRS_RS64	(CPU_FTR_USE_TB | \</span>
<span class="cp">	    CPU_FTR_IABR | \</span>
<span class="cp">	    CPU_FTR_MMCRA | CPU_FTR_CTRL)</span>
<span class="cp">#define CPU_FTRS_POWER4	(CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_CTRL | \</span>
<span class="cp">	    CPU_FTR_MMCRA | CPU_FTR_CP_USE_DCBTZ | \</span>
<span class="cp">	    CPU_FTR_STCX_CHECKS_ADDRESS)</span>
<span class="cp">#define CPU_FTRS_PPC970	(CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_CTRL | CPU_FTR_ARCH_201 | \</span>
<span class="cp">	    CPU_FTR_ALTIVEC_COMP | CPU_FTR_CAN_NAP | CPU_FTR_MMCRA | \</span>
<span class="cp">	    CPU_FTR_CP_USE_DCBTZ | CPU_FTR_STCX_CHECKS_ADDRESS | \</span>
<span class="cp">	    CPU_FTR_HVMODE)</span>
<span class="cp">#define CPU_FTRS_POWER5	(CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_CTRL | \</span>
<span class="cp">	    CPU_FTR_MMCRA | CPU_FTR_SMT | \</span>
<span class="cp">	    CPU_FTR_COHERENT_ICACHE | CPU_FTR_PURR | \</span>
<span class="cp">	    CPU_FTR_STCX_CHECKS_ADDRESS | CPU_FTR_POPCNTB)</span>
<span class="cp">#define CPU_FTRS_POWER6 (CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_CTRL | \</span>
<span class="cp">	    CPU_FTR_MMCRA | CPU_FTR_SMT | \</span>
<span class="cp">	    CPU_FTR_COHERENT_ICACHE | \</span>
<span class="cp">	    CPU_FTR_PURR | CPU_FTR_SPURR | CPU_FTR_REAL_LE | \</span>
<span class="cp">	    CPU_FTR_DSCR | CPU_FTR_UNALIGNED_LD_STD | \</span>
<span class="cp">	    CPU_FTR_STCX_CHECKS_ADDRESS | CPU_FTR_POPCNTB | CPU_FTR_CFAR)</span>
<span class="cp">#define CPU_FTRS_POWER7 (CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_CTRL | CPU_FTR_ARCH_206 |\</span>
<span class="cp">	    CPU_FTR_MMCRA | CPU_FTR_SMT | \</span>
<span class="cp">	    CPU_FTR_COHERENT_ICACHE | \</span>
<span class="cp">	    CPU_FTR_PURR | CPU_FTR_SPURR | CPU_FTR_REAL_LE | \</span>
<span class="cp">	    CPU_FTR_DSCR | CPU_FTR_SAO  | CPU_FTR_ASYM_SMT | \</span>
<span class="cp">	    CPU_FTR_STCX_CHECKS_ADDRESS | CPU_FTR_POPCNTB | CPU_FTR_POPCNTD | \</span>
<span class="cp">	    CPU_FTR_ICSWX | CPU_FTR_CFAR | CPU_FTR_HVMODE | CPU_FTR_VMX_COPY)</span>
<span class="cp">#define CPU_FTRS_CELL	(CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_CTRL | \</span>
<span class="cp">	    CPU_FTR_ALTIVEC_COMP | CPU_FTR_MMCRA | CPU_FTR_SMT | \</span>
<span class="cp">	    CPU_FTR_PAUSE_ZERO  | CPU_FTR_CELL_TB_BUG | CPU_FTR_CP_USE_DCBTZ | \</span>
<span class="cp">	    CPU_FTR_UNALIGNED_LD_STD)</span>
<span class="cp">#define CPU_FTRS_PA6T (CPU_FTR_USE_TB | CPU_FTR_LWSYNC | \</span>
<span class="cp">	    CPU_FTR_PPCAS_ARCH_V2 | CPU_FTR_ALTIVEC_COMP | \</span>
<span class="cp">	    CPU_FTR_PURR | CPU_FTR_REAL_LE)</span>
<span class="cp">#define CPU_FTRS_COMPATIBLE	(CPU_FTR_USE_TB | CPU_FTR_PPCAS_ARCH_V2)</span>

<span class="cp">#define CPU_FTRS_A2 (CPU_FTR_USE_TB | CPU_FTR_SMT | CPU_FTR_DBELL | \</span>
<span class="cp">		     CPU_FTR_NOEXECUTE | CPU_FTR_NODSISRALIGN | CPU_FTR_ICSWX)</span>

<span class="cp">#ifdef __powerpc64__</span>
<span class="cp">#ifdef CONFIG_PPC_BOOK3E</span>
<span class="cp">#define CPU_FTRS_POSSIBLE	(CPU_FTRS_E6500 | CPU_FTRS_E5500 | CPU_FTRS_A2)</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTRS_POSSIBLE	\</span>
<span class="cp">	    (CPU_FTRS_POWER3 | CPU_FTRS_RS64 | CPU_FTRS_POWER4 |	\</span>
<span class="cp">	    CPU_FTRS_PPC970 | CPU_FTRS_POWER5 | CPU_FTRS_POWER6 |	\</span>
<span class="cp">	    CPU_FTRS_POWER7 | CPU_FTRS_CELL | CPU_FTRS_PA6T |		\</span>
<span class="cp">	    CPU_FTR_VSX)</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CPU_FTRS_POSSIBLE</span> <span class="o">=</span>
<span class="cp">#if CLASSIC_PPC</span>
	    <span class="n">CPU_FTRS_PPC601</span> <span class="o">|</span> <span class="n">CPU_FTRS_603</span> <span class="o">|</span> <span class="n">CPU_FTRS_604</span> <span class="o">|</span> <span class="n">CPU_FTRS_740_NOTAU</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_740</span> <span class="o">|</span> <span class="n">CPU_FTRS_750</span> <span class="o">|</span> <span class="n">CPU_FTRS_750FX1</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_750FX2</span> <span class="o">|</span> <span class="n">CPU_FTRS_750FX</span> <span class="o">|</span> <span class="n">CPU_FTRS_750GX</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_7400_NOTAU</span> <span class="o">|</span> <span class="n">CPU_FTRS_7400</span> <span class="o">|</span> <span class="n">CPU_FTRS_7450_20</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_7450_21</span> <span class="o">|</span> <span class="n">CPU_FTRS_7450_23</span> <span class="o">|</span> <span class="n">CPU_FTRS_7455_1</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_7455_20</span> <span class="o">|</span> <span class="n">CPU_FTRS_7455</span> <span class="o">|</span> <span class="n">CPU_FTRS_7447_10</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_7447</span> <span class="o">|</span> <span class="n">CPU_FTRS_7447A</span> <span class="o">|</span> <span class="n">CPU_FTRS_82XX</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_G2_LE</span> <span class="o">|</span> <span class="n">CPU_FTRS_E300</span> <span class="o">|</span> <span class="n">CPU_FTRS_E300C2</span> <span class="o">|</span>
	    <span class="n">CPU_FTRS_CLASSIC32</span> <span class="o">|</span>
<span class="cp">#else</span>
	    <span class="n">CPU_FTRS_GENERIC_32</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_8xx</span>
	    <span class="n">CPU_FTRS_8XX</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_40x</span>
	    <span class="n">CPU_FTRS_40X</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_44x</span>
	    <span class="n">CPU_FTRS_44X</span> <span class="o">|</span> <span class="n">CPU_FTRS_440x6</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC_47x</span>
	    <span class="n">CPU_FTRS_47X</span> <span class="o">|</span> <span class="n">CPU_FTR_476_DD2</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_E200</span>
	    <span class="n">CPU_FTRS_E200</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_E500</span>
	    <span class="n">CPU_FTRS_E500</span> <span class="o">|</span> <span class="n">CPU_FTRS_E500_2</span> <span class="o">|</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC_E500MC</span>
	    <span class="n">CPU_FTRS_E500MC</span> <span class="o">|</span> <span class="n">CPU_FTRS_E5500</span> <span class="o">|</span> <span class="n">CPU_FTRS_E6500</span> <span class="o">|</span>
<span class="cp">#endif</span>
	    <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* __powerpc64__ */</span><span class="cp"></span>

<span class="cp">#ifdef __powerpc64__</span>
<span class="cp">#ifdef CONFIG_PPC_BOOK3E</span>
<span class="cp">#define CPU_FTRS_ALWAYS		(CPU_FTRS_E6500 &amp; CPU_FTRS_E5500 &amp; CPU_FTRS_A2)</span>
<span class="cp">#else</span>
<span class="cp">#define CPU_FTRS_ALWAYS		\</span>
<span class="cp">	    (CPU_FTRS_POWER3 &amp; CPU_FTRS_RS64 &amp; CPU_FTRS_POWER4 &amp;	\</span>
<span class="cp">	    CPU_FTRS_PPC970 &amp; CPU_FTRS_POWER5 &amp; CPU_FTRS_POWER6 &amp;	\</span>
<span class="cp">	    CPU_FTRS_POWER7 &amp; CPU_FTRS_CELL &amp; CPU_FTRS_PA6T &amp; CPU_FTRS_POSSIBLE)</span>
<span class="cp">#endif</span>
<span class="cp">#else</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">CPU_FTRS_ALWAYS</span> <span class="o">=</span>
<span class="cp">#if CLASSIC_PPC</span>
	    <span class="n">CPU_FTRS_PPC601</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_603</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_604</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_740_NOTAU</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_740</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_750</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_750FX1</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_750FX2</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_750FX</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_750GX</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_7400_NOTAU</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7400</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7450_20</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_7450_21</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7450_23</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7455_1</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_7455_20</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7455</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7447_10</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_7447</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_7447A</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_82XX</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_G2_LE</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_E300</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_E300C2</span> <span class="o">&amp;</span>
	    <span class="n">CPU_FTRS_CLASSIC32</span> <span class="o">&amp;</span>
<span class="cp">#else</span>
	    <span class="n">CPU_FTRS_GENERIC_32</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_8xx</span>
	    <span class="n">CPU_FTRS_8XX</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_40x</span>
	    <span class="n">CPU_FTRS_40X</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_44x</span>
	    <span class="n">CPU_FTRS_44X</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_440x6</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_E200</span>
	    <span class="n">CPU_FTRS_E200</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_E500</span>
	    <span class="n">CPU_FTRS_E500</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_E500_2</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_PPC_E500MC</span>
	    <span class="n">CPU_FTRS_E500MC</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_E5500</span> <span class="o">&amp;</span> <span class="n">CPU_FTRS_E6500</span> <span class="o">&amp;</span>
<span class="cp">#endif</span>
	    <span class="o">~</span><span class="n">CPU_FTR_EMB_HV</span> <span class="o">&amp;</span>	<span class="cm">/* can be removed at runtime */</span>
	    <span class="n">CPU_FTRS_POSSIBLE</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* __powerpc64__ */</span><span class="cp"></span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">cpu_has_feature</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">feature</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">CPU_FTRS_ALWAYS</span> <span class="o">&amp;</span> <span class="n">feature</span><span class="p">)</span> <span class="o">||</span>
	       <span class="p">(</span><span class="n">CPU_FTRS_POSSIBLE</span>
		<span class="o">&amp;</span> <span class="n">cur_cpu_spec</span><span class="o">-&gt;</span><span class="n">cpu_features</span>
		<span class="o">&amp;</span> <span class="n">feature</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#ifdef CONFIG_HAVE_HW_BREAKPOINT</span>
<span class="cp">#define HBP_NUM 1</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_HAVE_HW_BREAKPOINT */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* !__ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* __ASM_POWERPC_CPUTABLE_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
