<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › reg_a2.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>reg_a2.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Register definitions specific to the A2 core</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2008 Ben. Herrenschmidt (benh@kernel.crashing.org), IBM Corp.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or</span>
<span class="cm"> *  modify it under the terms of the GNU General Public License</span>
<span class="cm"> *  as published by the Free Software Foundation; either version</span>
<span class="cm"> *  2 of the License, or (at your option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ASM_POWERPC_REG_A2_H__</span>
<span class="cp">#define __ASM_POWERPC_REG_A2_H__</span>

<span class="cp">#define SPRN_TENSR	0x1b5</span>
<span class="cp">#define SPRN_TENS	0x1b6	</span><span class="cm">/* Thread ENable Set */</span><span class="cp"></span>
<span class="cp">#define SPRN_TENC	0x1b7	</span><span class="cm">/* Thread ENable Clear */</span><span class="cp"></span>

<span class="cp">#define SPRN_A2_CCR0	0x3f0	</span><span class="cm">/* Core Configuration Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_A2_CCR1	0x3f1	</span><span class="cm">/* Core Configuration Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_A2_CCR2	0x3f2	</span><span class="cm">/* Core Configuration Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMUCR0	0x3fc	</span><span class="cm">/* MMU Control Register 0 */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMUCR1	0x3fd	</span><span class="cm">/* MMU Control Register 1 */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMUCR2	0x3fe	</span><span class="cm">/* MMU Control Register 2 */</span><span class="cp"></span>
<span class="cp">#define SPRN_MMUCR3	0x3ff	</span><span class="cm">/* MMU Control Register 3 */</span><span class="cp"></span>

<span class="cp">#define SPRN_IAR	0x372</span>

<span class="cp">#define SPRN_IUCR0	0x3f3</span>
<span class="cp">#define IUCR0_ICBI_ACK	0x1000</span>

<span class="cp">#define SPRN_XUCR0	0x3f6	</span><span class="cm">/* Execution Unit Config Register 0 */</span><span class="cp"></span>

<span class="cp">#define A2_IERAT_SIZE	16</span>
<span class="cp">#define A2_DERAT_SIZE	32</span>

<span class="cm">/* A2 MMUCR0 bits */</span>
<span class="cp">#define MMUCR0_ECL	0x80000000	</span><span class="cm">/* Extended Class for TLB fills */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TID_NZ	0x40000000	</span><span class="cm">/* TID is non-zero */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TS	0x10000000	</span><span class="cm">/* Translation space for TLB fills */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TGS	0x20000000	</span><span class="cm">/* Guest space for TLB fills */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TLBSEL	0x0c000000	</span><span class="cm">/* TLB or ERAT target for TLB fills */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TLBSEL_U	0x00000000	</span><span class="cm">/*  TLBSEL = UTLB */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TLBSEL_I	0x08000000	</span><span class="cm">/*  TLBSEL = I-ERAT */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TLBSEL_D	0x0c000000	</span><span class="cm">/*  TLBSEL = D-ERAT */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_LOCKSRSH	0x02000000	</span><span class="cm">/* Use TLB lock on tlbsx. */</span><span class="cp"></span>
<span class="cp">#define MMUCR0_TID_MASK	0x000000ff	</span><span class="cm">/* TID field */</span><span class="cp"></span>

<span class="cm">/* A2 MMUCR1 bits */</span>
<span class="cp">#define MMUCR1_IRRE		0x80000000	</span><span class="cm">/* I-ERAT round robin enable */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_DRRE		0x40000000	</span><span class="cm">/* D-ERAT round robin enable */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_REE		0x20000000	</span><span class="cm">/* Reference Exception Enable*/</span><span class="cp"></span>
<span class="cp">#define MMUCR1_CEE		0x10000000	</span><span class="cm">/* Change exception enable */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_CSINV_ALL	0x00000000	</span><span class="cm">/* Inval ERAT on all CS evts */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_CSINV_NISYNC	0x04000000	</span><span class="cm">/* Inval ERAT on all ex isync*/</span><span class="cp"></span>
<span class="cp">#define MMUCR1_CSINV_NEVER	0x0c000000	</span><span class="cm">/* Don&#39;t inval ERAT on CS */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_ICTID		0x00080000	</span><span class="cm">/* IERAT class field as TID */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_ITTID		0x00040000	</span><span class="cm">/* IERAT thdid field as TID */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_DCTID		0x00020000	</span><span class="cm">/* DERAT class field as TID */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_DTTID		0x00010000	</span><span class="cm">/* DERAT thdid field as TID */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_DCCD		0x00008000	</span><span class="cm">/* DERAT class ignore */</span><span class="cp"></span>
<span class="cp">#define MMUCR1_TLBWE_BINV	0x00004000	</span><span class="cm">/* back invalidate on tlbwe */</span><span class="cp"></span>

<span class="cm">/* A2 MMUCR2 bits */</span>
<span class="cp">#define MMUCR2_PSSEL_SHIFT	4</span>

<span class="cm">/* A2 MMUCR3 bits */</span>
<span class="cp">#define MMUCR3_THID		0x0000000f	</span><span class="cm">/* Thread ID */</span><span class="cp"></span>

<span class="cm">/* *** ERAT TLB bits definitions */</span>
<span class="cp">#define TLB0_EPN_MASK		ASM_CONST(0xfffffffffffff000)</span>
<span class="cp">#define TLB0_CLASS_MASK		ASM_CONST(0x0000000000000c00)</span>
<span class="cp">#define TLB0_CLASS_00		ASM_CONST(0x0000000000000000)</span>
<span class="cp">#define TLB0_CLASS_01		ASM_CONST(0x0000000000000400)</span>
<span class="cp">#define TLB0_CLASS_10		ASM_CONST(0x0000000000000800)</span>
<span class="cp">#define TLB0_CLASS_11		ASM_CONST(0x0000000000000c00)</span>
<span class="cp">#define TLB0_V			ASM_CONST(0x0000000000000200)</span>
<span class="cp">#define TLB0_X			ASM_CONST(0x0000000000000100)</span>
<span class="cp">#define TLB0_SIZE_MASK		ASM_CONST(0x00000000000000f0)</span>
<span class="cp">#define TLB0_SIZE_4K		ASM_CONST(0x0000000000000010)</span>
<span class="cp">#define TLB0_SIZE_64K		ASM_CONST(0x0000000000000030)</span>
<span class="cp">#define TLB0_SIZE_1M		ASM_CONST(0x0000000000000050)</span>
<span class="cp">#define TLB0_SIZE_16M		ASM_CONST(0x0000000000000070)</span>
<span class="cp">#define TLB0_SIZE_1G		ASM_CONST(0x00000000000000a0)</span>
<span class="cp">#define TLB0_THDID_MASK		ASM_CONST(0x000000000000000f)</span>
<span class="cp">#define TLB0_THDID_0		ASM_CONST(0x0000000000000001)</span>
<span class="cp">#define TLB0_THDID_1		ASM_CONST(0x0000000000000002)</span>
<span class="cp">#define TLB0_THDID_2		ASM_CONST(0x0000000000000004)</span>
<span class="cp">#define TLB0_THDID_3		ASM_CONST(0x0000000000000008)</span>
<span class="cp">#define TLB0_THDID_ALL		ASM_CONST(0x000000000000000f)</span>

<span class="cp">#define TLB1_RESVATTR		ASM_CONST(0x00f0000000000000)</span>
<span class="cp">#define TLB1_U0			ASM_CONST(0x0008000000000000)</span>
<span class="cp">#define TLB1_U1			ASM_CONST(0x0004000000000000)</span>
<span class="cp">#define TLB1_U2			ASM_CONST(0x0002000000000000)</span>
<span class="cp">#define TLB1_U3			ASM_CONST(0x0001000000000000)</span>
<span class="cp">#define TLB1_R			ASM_CONST(0x0000800000000000)</span>
<span class="cp">#define TLB1_C			ASM_CONST(0x0000400000000000)</span>
<span class="cp">#define TLB1_RPN_MASK		ASM_CONST(0x000003fffffff000)</span>
<span class="cp">#define TLB1_W			ASM_CONST(0x0000000000000800)</span>
<span class="cp">#define TLB1_I			ASM_CONST(0x0000000000000400)</span>
<span class="cp">#define TLB1_M			ASM_CONST(0x0000000000000200)</span>
<span class="cp">#define TLB1_G			ASM_CONST(0x0000000000000100)</span>
<span class="cp">#define TLB1_E			ASM_CONST(0x0000000000000080)</span>
<span class="cp">#define TLB1_VF			ASM_CONST(0x0000000000000040)</span>
<span class="cp">#define TLB1_UX			ASM_CONST(0x0000000000000020)</span>
<span class="cp">#define TLB1_SX			ASM_CONST(0x0000000000000010)</span>
<span class="cp">#define TLB1_UW			ASM_CONST(0x0000000000000008)</span>
<span class="cp">#define TLB1_SW			ASM_CONST(0x0000000000000004)</span>
<span class="cp">#define TLB1_UR			ASM_CONST(0x0000000000000002)</span>
<span class="cp">#define TLB1_SR			ASM_CONST(0x0000000000000001)</span>

<span class="cp">#ifdef CONFIG_PPC_EARLY_DEBUG_WSP</span>
<span class="cp">#define WSP_UART_PHYS	0xffc000c000</span>
<span class="cm">/* This needs to be careful chosen to hit a !0 congruence class</span>
<span class="cm"> * in the TLB since we bolt it in way 3, which is already occupied</span>
<span class="cm"> * by our linear mapping primary bolted entry in CC 0.</span>
<span class="cm"> */</span>
<span class="cp">#define WSP_UART_VIRT	0xf000000000001000</span>
<span class="cp">#endif</span>

<span class="cm">/* A2 erativax attributes definitions */</span>
<span class="cp">#define ERATIVAX_RS_IS_ALL		0x000</span>
<span class="cp">#define ERATIVAX_RS_IS_TID		0x040</span>
<span class="cp">#define ERATIVAX_RS_IS_CLASS		0x080</span>
<span class="cp">#define ERATIVAX_RS_IS_FULLMATCH	0x0c0</span>
<span class="cp">#define ERATIVAX_CLASS_00		0x000</span>
<span class="cp">#define ERATIVAX_CLASS_01		0x010</span>
<span class="cp">#define ERATIVAX_CLASS_10		0x020</span>
<span class="cp">#define ERATIVAX_CLASS_11		0x030</span>
<span class="cp">#define ERATIVAX_PSIZE_4K		(TLB_PSIZE_4K &gt;&gt; 1)</span>
<span class="cp">#define ERATIVAX_PSIZE_64K		(TLB_PSIZE_64K &gt;&gt; 1)</span>
<span class="cp">#define ERATIVAX_PSIZE_1M		(TLB_PSIZE_1M &gt;&gt; 1)</span>
<span class="cp">#define ERATIVAX_PSIZE_16M		(TLB_PSIZE_16M &gt;&gt; 1)</span>
<span class="cp">#define ERATIVAX_PSIZE_1G		(TLB_PSIZE_1G &gt;&gt; 1)</span>

<span class="cm">/* A2 eratilx attributes definitions */</span>
<span class="cp">#define ERATILX_T_ALL			0</span>
<span class="cp">#define ERATILX_T_TID			1</span>
<span class="cp">#define ERATILX_T_TGS			2</span>
<span class="cp">#define ERATILX_T_FULLMATCH		3</span>
<span class="cp">#define ERATILX_T_CLASS0		4</span>
<span class="cp">#define ERATILX_T_CLASS1		5</span>
<span class="cp">#define ERATILX_T_CLASS2		6</span>
<span class="cp">#define ERATILX_T_CLASS3		7</span>

<span class="cm">/* XUCR0 bits */</span>
<span class="cp">#define XUCR0_TRACE_UM_T0		0x40000000	</span><span class="cm">/* Thread 0 */</span><span class="cp"></span>
<span class="cp">#define XUCR0_TRACE_UM_T1		0x20000000	</span><span class="cm">/* Thread 1 */</span><span class="cp"></span>
<span class="cp">#define XUCR0_TRACE_UM_T2		0x10000000	</span><span class="cm">/* Thread 2 */</span><span class="cp"></span>
<span class="cp">#define XUCR0_TRACE_UM_T3		0x08000000	</span><span class="cm">/* Thread 3 */</span><span class="cp"></span>

<span class="cm">/* A2 CCR0 register */</span>
<span class="cp">#define A2_CCR0_PME_DISABLED		0x00000000</span>
<span class="cp">#define A2_CCR0_PME_SLEEP		0x40000000</span>
<span class="cp">#define A2_CCR0_PME_RVW			0x80000000</span>
<span class="cp">#define A2_CCR0_PME_DISABLED2		0xc0000000</span>

<span class="cm">/* A2 CCR2 register */</span>
<span class="cp">#define A2_CCR2_ERAT_ONLY_MODE		0x00000001</span>
<span class="cp">#define A2_CCR2_ENABLE_ICSWX		0x00000002</span>
<span class="cp">#define A2_CCR2_ENABLE_PC		0x20000000</span>
<span class="cp">#define A2_CCR2_ENABLE_TRACE		0x40000000</span>

<span class="cp">#endif </span><span class="cm">/* __ASM_POWERPC_REG_A2_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
