<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › kvm_asm.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>kvm_asm.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License, version 2, as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright IBM Corp. 2008</span>
<span class="cm"> *</span>
<span class="cm"> * Authors: Hollis Blanchard &lt;hollisb@us.ibm.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __POWERPC_KVM_ASM_H__</span>
<span class="cp">#define __POWERPC_KVM_ASM_H__</span>

<span class="cp">#ifdef __ASSEMBLY__</span>
<span class="cp">#ifdef CONFIG_64BIT</span>
<span class="cp">#define PPC_STD(sreg, offset, areg)  std sreg, (offset)(areg)</span>
<span class="cp">#define PPC_LD(treg, offset, areg)   ld treg, (offset)(areg)</span>
<span class="cp">#else</span>
<span class="cp">#define PPC_STD(sreg, offset, areg)  stw sreg, (offset+4)(areg)</span>
<span class="cp">#define PPC_LD(treg, offset, areg)   lwz treg, (offset+4)(areg)</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cm">/* IVPR must be 64KiB-aligned. */</span>
<span class="cp">#define VCPU_SIZE_ORDER 4</span>
<span class="cp">#define VCPU_SIZE_LOG   (VCPU_SIZE_ORDER + 12)</span>
<span class="cp">#define VCPU_TLB_PGSZ   PPC44x_TLB_64K</span>
<span class="cp">#define VCPU_SIZE_BYTES (1&lt;&lt;VCPU_SIZE_LOG)</span>

<span class="cp">#define BOOKE_INTERRUPT_CRITICAL 0</span>
<span class="cp">#define BOOKE_INTERRUPT_MACHINE_CHECK 1</span>
<span class="cp">#define BOOKE_INTERRUPT_DATA_STORAGE 2</span>
<span class="cp">#define BOOKE_INTERRUPT_INST_STORAGE 3</span>
<span class="cp">#define BOOKE_INTERRUPT_EXTERNAL 4</span>
<span class="cp">#define BOOKE_INTERRUPT_ALIGNMENT 5</span>
<span class="cp">#define BOOKE_INTERRUPT_PROGRAM 6</span>
<span class="cp">#define BOOKE_INTERRUPT_FP_UNAVAIL 7</span>
<span class="cp">#define BOOKE_INTERRUPT_SYSCALL 8</span>
<span class="cp">#define BOOKE_INTERRUPT_AP_UNAVAIL 9</span>
<span class="cp">#define BOOKE_INTERRUPT_DECREMENTER 10</span>
<span class="cp">#define BOOKE_INTERRUPT_FIT 11</span>
<span class="cp">#define BOOKE_INTERRUPT_WATCHDOG 12</span>
<span class="cp">#define BOOKE_INTERRUPT_DTLB_MISS 13</span>
<span class="cp">#define BOOKE_INTERRUPT_ITLB_MISS 14</span>
<span class="cp">#define BOOKE_INTERRUPT_DEBUG 15</span>

<span class="cm">/* E500 */</span>
<span class="cp">#define BOOKE_INTERRUPT_SPE_UNAVAIL 32</span>
<span class="cp">#define BOOKE_INTERRUPT_SPE_FP_DATA 33</span>
<span class="cp">#define BOOKE_INTERRUPT_SPE_FP_ROUND 34</span>
<span class="cp">#define BOOKE_INTERRUPT_PERFORMANCE_MONITOR 35</span>
<span class="cp">#define BOOKE_INTERRUPT_DOORBELL 36</span>
<span class="cp">#define BOOKE_INTERRUPT_DOORBELL_CRITICAL 37</span>

<span class="cm">/* booke_hv */</span>
<span class="cp">#define BOOKE_INTERRUPT_GUEST_DBELL 38</span>
<span class="cp">#define BOOKE_INTERRUPT_GUEST_DBELL_CRIT 39</span>
<span class="cp">#define BOOKE_INTERRUPT_HV_SYSCALL 40</span>
<span class="cp">#define BOOKE_INTERRUPT_HV_PRIV 41</span>

<span class="cm">/* book3s */</span>

<span class="cp">#define BOOK3S_INTERRUPT_SYSTEM_RESET	0x100</span>
<span class="cp">#define BOOK3S_INTERRUPT_MACHINE_CHECK	0x200</span>
<span class="cp">#define BOOK3S_INTERRUPT_DATA_STORAGE	0x300</span>
<span class="cp">#define BOOK3S_INTERRUPT_DATA_SEGMENT	0x380</span>
<span class="cp">#define BOOK3S_INTERRUPT_INST_STORAGE	0x400</span>
<span class="cp">#define BOOK3S_INTERRUPT_INST_SEGMENT	0x480</span>
<span class="cp">#define BOOK3S_INTERRUPT_EXTERNAL	0x500</span>
<span class="cp">#define BOOK3S_INTERRUPT_EXTERNAL_LEVEL	0x501</span>
<span class="cp">#define BOOK3S_INTERRUPT_EXTERNAL_HV	0x502</span>
<span class="cp">#define BOOK3S_INTERRUPT_ALIGNMENT	0x600</span>
<span class="cp">#define BOOK3S_INTERRUPT_PROGRAM	0x700</span>
<span class="cp">#define BOOK3S_INTERRUPT_FP_UNAVAIL	0x800</span>
<span class="cp">#define BOOK3S_INTERRUPT_DECREMENTER	0x900</span>
<span class="cp">#define BOOK3S_INTERRUPT_HV_DECREMENTER	0x980</span>
<span class="cp">#define BOOK3S_INTERRUPT_SYSCALL	0xc00</span>
<span class="cp">#define BOOK3S_INTERRUPT_TRACE		0xd00</span>
<span class="cp">#define BOOK3S_INTERRUPT_H_DATA_STORAGE	0xe00</span>
<span class="cp">#define BOOK3S_INTERRUPT_H_INST_STORAGE	0xe20</span>
<span class="cp">#define BOOK3S_INTERRUPT_H_EMUL_ASSIST	0xe40</span>
<span class="cp">#define BOOK3S_INTERRUPT_PERFMON	0xf00</span>
<span class="cp">#define BOOK3S_INTERRUPT_ALTIVEC	0xf20</span>
<span class="cp">#define BOOK3S_INTERRUPT_VSX		0xf40</span>

<span class="cp">#define BOOK3S_IRQPRIO_SYSTEM_RESET		0</span>
<span class="cp">#define BOOK3S_IRQPRIO_DATA_SEGMENT		1</span>
<span class="cp">#define BOOK3S_IRQPRIO_INST_SEGMENT		2</span>
<span class="cp">#define BOOK3S_IRQPRIO_DATA_STORAGE		3</span>
<span class="cp">#define BOOK3S_IRQPRIO_INST_STORAGE		4</span>
<span class="cp">#define BOOK3S_IRQPRIO_ALIGNMENT		5</span>
<span class="cp">#define BOOK3S_IRQPRIO_PROGRAM			6</span>
<span class="cp">#define BOOK3S_IRQPRIO_FP_UNAVAIL		7</span>
<span class="cp">#define BOOK3S_IRQPRIO_ALTIVEC			8</span>
<span class="cp">#define BOOK3S_IRQPRIO_VSX			9</span>
<span class="cp">#define BOOK3S_IRQPRIO_SYSCALL			10</span>
<span class="cp">#define BOOK3S_IRQPRIO_MACHINE_CHECK		11</span>
<span class="cp">#define BOOK3S_IRQPRIO_DEBUG			12</span>
<span class="cp">#define BOOK3S_IRQPRIO_EXTERNAL			13</span>
<span class="cp">#define BOOK3S_IRQPRIO_DECREMENTER		14</span>
<span class="cp">#define BOOK3S_IRQPRIO_PERFORMANCE_MONITOR	15</span>
<span class="cp">#define BOOK3S_IRQPRIO_EXTERNAL_LEVEL		16</span>
<span class="cp">#define BOOK3S_IRQPRIO_MAX			17</span>

<span class="cp">#define BOOK3S_HFLAG_DCBZ32			0x1</span>
<span class="cp">#define BOOK3S_HFLAG_SLB			0x2</span>
<span class="cp">#define BOOK3S_HFLAG_PAIRED_SINGLE		0x4</span>
<span class="cp">#define BOOK3S_HFLAG_NATIVE_PS			0x8</span>

<span class="cp">#define RESUME_FLAG_NV          (1&lt;&lt;0)  </span><span class="cm">/* Reload guest nonvolatile state? */</span><span class="cp"></span>
<span class="cp">#define RESUME_FLAG_HOST        (1&lt;&lt;1)  </span><span class="cm">/* Resume host? */</span><span class="cp"></span>

<span class="cp">#define RESUME_GUEST            0</span>
<span class="cp">#define RESUME_GUEST_NV         RESUME_FLAG_NV</span>
<span class="cp">#define RESUME_HOST             RESUME_FLAG_HOST</span>
<span class="cp">#define RESUME_HOST_NV          (RESUME_FLAG_HOST|RESUME_FLAG_NV)</span>

<span class="cp">#define KVM_GUEST_MODE_NONE	0</span>
<span class="cp">#define KVM_GUEST_MODE_GUEST	1</span>
<span class="cp">#define KVM_GUEST_MODE_SKIP	2</span>

<span class="cp">#define KVM_INST_FETCH_FAILED	-1</span>

<span class="cp">#endif </span><span class="cm">/* __POWERPC_KVM_ASM_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
