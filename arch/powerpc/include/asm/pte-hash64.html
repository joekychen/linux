<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › pte-hash64.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>pte-hash64.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_POWERPC_PTE_HASH64_H</span>
<span class="cp">#define _ASM_POWERPC_PTE_HASH64_H</span>
<span class="cp">#ifdef __KERNEL__</span>

<span class="cm">/*</span>
<span class="cm"> * Common bits between 4K and 64K pages in a linux-style PTE.</span>
<span class="cm"> * These match the bits in the (hardware-defined) PowerPC PTE as closely</span>
<span class="cm"> * as possible. Additional bits may be defined in pgtable-hash64-*.h</span>
<span class="cm"> *</span>
<span class="cm"> * Note: We only support user read/write permissions. Supervisor always</span>
<span class="cm"> * have full read/write to pages above PAGE_OFFSET (pages below that</span>
<span class="cm"> * always use the user access permissions).</span>
<span class="cm"> *</span>
<span class="cm"> * We could create separate kernel read-only if we used the 3 PP bits</span>
<span class="cm"> * combinations that newer processors provide but we currently don&#39;t.</span>
<span class="cm"> */</span>
<span class="cp">#define _PAGE_PRESENT		0x0001 </span><span class="cm">/* software: pte contains a translation */</span><span class="cp"></span>
<span class="cp">#define _PAGE_USER		0x0002 </span><span class="cm">/* matches one of the PP bits */</span><span class="cp"></span>
<span class="cp">#define _PAGE_FILE		0x0002 </span><span class="cm">/* (!present only) software: pte holds file offset */</span><span class="cp"></span>
<span class="cp">#define _PAGE_EXEC		0x0004 </span><span class="cm">/* No execute on POWER4 and newer (we invert) */</span><span class="cp"></span>
<span class="cp">#define _PAGE_GUARDED		0x0008</span>
<span class="cp">#define _PAGE_COHERENT		0x0010 </span><span class="cm">/* M: enforce memory coherence (SMP systems) */</span><span class="cp"></span>
<span class="cp">#define _PAGE_NO_CACHE		0x0020 </span><span class="cm">/* I: cache inhibit */</span><span class="cp"></span>
<span class="cp">#define _PAGE_WRITETHRU		0x0040 </span><span class="cm">/* W: cache write-through */</span><span class="cp"></span>
<span class="cp">#define _PAGE_DIRTY		0x0080 </span><span class="cm">/* C: page changed */</span><span class="cp"></span>
<span class="cp">#define _PAGE_ACCESSED		0x0100 </span><span class="cm">/* R: page referenced */</span><span class="cp"></span>
<span class="cp">#define _PAGE_RW		0x0200 </span><span class="cm">/* software: user write access allowed */</span><span class="cp"></span>
<span class="cp">#define _PAGE_BUSY		0x0800 </span><span class="cm">/* software: PTE &amp; hash are busy */</span><span class="cp"></span>

<span class="cm">/* No separate kernel read-only */</span>
<span class="cp">#define _PAGE_KERNEL_RW		(_PAGE_RW | _PAGE_DIRTY) </span><span class="cm">/* user access blocked by key */</span><span class="cp"></span>
<span class="cp">#define _PAGE_KERNEL_RO		 _PAGE_KERNEL_RW</span>

<span class="cm">/* Strong Access Ordering */</span>
<span class="cp">#define _PAGE_SAO		(_PAGE_WRITETHRU | _PAGE_NO_CACHE | _PAGE_COHERENT)</span>

<span class="cm">/* No page size encoding in the linux PTE */</span>
<span class="cp">#define _PAGE_PSIZE		0</span>

<span class="cm">/* PTEIDX nibble */</span>
<span class="cp">#define _PTEIDX_SECONDARY	0x8</span>
<span class="cp">#define _PTEIDX_GROUP_IX	0x7</span>

<span class="cm">/* Hash table based platforms need atomic updates of the linux PTE */</span>
<span class="cp">#define PTE_ATOMIC_UPDATES	1</span>

<span class="cp">#ifdef CONFIG_PPC_64K_PAGES</span>
<span class="cp">#include &lt;asm/pte-hash64-64k.h&gt;</span>
<span class="cp">#else</span>
<span class="cp">#include &lt;asm/pte-hash64-4k.h&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/*  _ASM_POWERPC_PTE_HASH64_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
