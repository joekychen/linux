<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › mpc52xx.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mpc52xx.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Prototypes, etc. for the Freescale MPC52xx embedded cpu chips</span>
<span class="cm"> * May need to be cleaned as the port goes on ...</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2004-2005 Sylvain Munaut &lt;tnt@246tNt.com&gt;</span>
<span class="cm"> * Copyright (C) 2003 MontaVista, Software, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * This file is licensed under the terms of the GNU General Public License</span>
<span class="cm"> * version 2. This program is licensed &quot;as is&quot; without any warranty of any</span>
<span class="cm"> * kind, whether express or implied.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ASM_POWERPC_MPC52xx_H__</span>
<span class="cp">#define __ASM_POWERPC_MPC52xx_H__</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#include &lt;asm/types.h&gt;</span>
<span class="cp">#include &lt;asm/prom.h&gt;</span>
<span class="cp">#include &lt;asm/mpc5xxx.h&gt;</span>
<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#include &lt;linux/suspend.h&gt;</span>

<span class="cm">/* Variants of the 5200(B) */</span>
<span class="cp">#define MPC5200_SVR		0x80110010</span>
<span class="cp">#define MPC5200_SVR_MASK	0xfffffff0</span>
<span class="cp">#define MPC5200B_SVR		0x80110020</span>
<span class="cp">#define MPC5200B_SVR_MASK	0xfffffff0</span>

<span class="cm">/* ======================================================================== */</span>
<span class="cm">/* Structures mapping of some unit register set                             */</span>
<span class="cm">/* ======================================================================== */</span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="cm">/* Memory Mapping Control */</span>
<span class="k">struct</span> <span class="n">mpc52xx_mmap_ctl</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">mbar</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x00 */</span>

	<span class="n">u32</span> <span class="n">cs0_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x04 */</span>
	<span class="n">u32</span> <span class="n">cs0_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x08 */</span>
	<span class="n">u32</span> <span class="n">cs1_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x0c */</span>
	<span class="n">u32</span> <span class="n">cs1_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x10 */</span>
	<span class="n">u32</span> <span class="n">cs2_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x14 */</span>
	<span class="n">u32</span> <span class="n">cs2_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x18 */</span>
	<span class="n">u32</span> <span class="n">cs3_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x1c */</span>
	<span class="n">u32</span> <span class="n">cs3_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x20 */</span>
	<span class="n">u32</span> <span class="n">cs4_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x24 */</span>
	<span class="n">u32</span> <span class="n">cs4_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x28 */</span>
	<span class="n">u32</span> <span class="n">cs5_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x2c */</span>
	<span class="n">u32</span> <span class="n">cs5_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x30 */</span>

	<span class="n">u32</span> <span class="n">sdram0</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x34 */</span>
	<span class="n">u32</span> <span class="n">sdram1</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0X38 */</span>

	<span class="n">u32</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* MMAP_CTRL + 0x3c .. 0x48 */</span>

	<span class="n">u32</span> <span class="n">boot_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x4c */</span>
	<span class="n">u32</span> <span class="n">boot_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x50 */</span>

	<span class="n">u32</span> <span class="n">ipbi_ws_ctrl</span><span class="p">;</span>	<span class="cm">/* MMAP_CTRL + 0x54 */</span>

	<span class="n">u32</span> <span class="n">cs6_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x58 */</span>
	<span class="n">u32</span> <span class="n">cs6_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x5c */</span>
	<span class="n">u32</span> <span class="n">cs7_start</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x60 */</span>
	<span class="n">u32</span> <span class="n">cs7_stop</span><span class="p">;</span>		<span class="cm">/* MMAP_CTRL + 0x64 */</span>
<span class="p">};</span>

<span class="cm">/* SDRAM control */</span>
<span class="k">struct</span> <span class="n">mpc52xx_sdram</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">mode</span><span class="p">;</span>		<span class="cm">/* SDRAM + 0x00 */</span>
	<span class="n">u32</span> <span class="n">ctrl</span><span class="p">;</span>		<span class="cm">/* SDRAM + 0x04 */</span>
	<span class="n">u32</span> <span class="n">config1</span><span class="p">;</span>		<span class="cm">/* SDRAM + 0x08 */</span>
	<span class="n">u32</span> <span class="n">config2</span><span class="p">;</span>		<span class="cm">/* SDRAM + 0x0c */</span>
<span class="p">};</span>

<span class="cm">/* SDMA */</span>
<span class="k">struct</span> <span class="n">mpc52xx_sdma</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">taskBar</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x00 */</span>
	<span class="n">u32</span> <span class="n">currentPointer</span><span class="p">;</span>	<span class="cm">/* SDMA + 0x04 */</span>
	<span class="n">u32</span> <span class="n">endPointer</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x08 */</span>
	<span class="n">u32</span> <span class="n">variablePointer</span><span class="p">;</span>	<span class="cm">/* SDMA + 0x0c */</span>

	<span class="n">u8</span> <span class="n">IntVect1</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x10 */</span>
	<span class="n">u8</span> <span class="n">IntVect2</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x11 */</span>
	<span class="n">u16</span> <span class="n">PtdCntrl</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x12 */</span>

	<span class="n">u32</span> <span class="n">IntPend</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x14 */</span>
	<span class="n">u32</span> <span class="n">IntMask</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x18 */</span>

	<span class="n">u16</span> <span class="n">tcr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>		<span class="cm">/* SDMA + 0x1c .. 0x3a */</span>

	<span class="n">u8</span> <span class="n">ipr</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>		<span class="cm">/* SDMA + 0x3c .. 0x5b */</span>

	<span class="n">u32</span> <span class="n">cReqSelect</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x5c */</span>
	<span class="n">u32</span> <span class="n">task_size0</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x60 */</span>
	<span class="n">u32</span> <span class="n">task_size1</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x64 */</span>
	<span class="n">u32</span> <span class="n">MDEDebug</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x68 */</span>
	<span class="n">u32</span> <span class="n">ADSDebug</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x6c */</span>
	<span class="n">u32</span> <span class="n">Value1</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x70 */</span>
	<span class="n">u32</span> <span class="n">Value2</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x74 */</span>
	<span class="n">u32</span> <span class="n">Control</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x78 */</span>
	<span class="n">u32</span> <span class="n">Status</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x7c */</span>
	<span class="n">u32</span> <span class="n">PTDDebug</span><span class="p">;</span>		<span class="cm">/* SDMA + 0x80 */</span>
<span class="p">};</span>

<span class="cm">/* GPT */</span>
<span class="k">struct</span> <span class="n">mpc52xx_gpt</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">mode</span><span class="p">;</span>		<span class="cm">/* GPTx + 0x00 */</span>
	<span class="n">u32</span> <span class="n">count</span><span class="p">;</span>		<span class="cm">/* GPTx + 0x04 */</span>
	<span class="n">u32</span> <span class="n">pwm</span><span class="p">;</span>		<span class="cm">/* GPTx + 0x08 */</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>		<span class="cm">/* GPTx + 0X0c */</span>
<span class="p">};</span>

<span class="cm">/* GPIO */</span>
<span class="k">struct</span> <span class="n">mpc52xx_gpio</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">port_config</span><span class="p">;</span>	<span class="cm">/* GPIO + 0x00 */</span>
	<span class="n">u32</span> <span class="n">simple_gpioe</span><span class="p">;</span>	<span class="cm">/* GPIO + 0x04 */</span>
	<span class="n">u32</span> <span class="n">simple_ode</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x08 */</span>
	<span class="n">u32</span> <span class="n">simple_ddr</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x0c */</span>
	<span class="n">u32</span> <span class="n">simple_dvo</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x10 */</span>
	<span class="n">u32</span> <span class="n">simple_ival</span><span class="p">;</span>	<span class="cm">/* GPIO + 0x14 */</span>
	<span class="n">u8</span> <span class="n">outo_gpioe</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x18 */</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x19 */</span>
	<span class="n">u8</span> <span class="n">outo_dvo</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x1c */</span>
	<span class="n">u8</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x1d */</span>
	<span class="n">u8</span> <span class="n">sint_gpioe</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x20 */</span>
	<span class="n">u8</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x21 */</span>
	<span class="n">u8</span> <span class="n">sint_ode</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x24 */</span>
	<span class="n">u8</span> <span class="n">reserved4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x25 */</span>
	<span class="n">u8</span> <span class="n">sint_ddr</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x28 */</span>
	<span class="n">u8</span> <span class="n">reserved5</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x29 */</span>
	<span class="n">u8</span> <span class="n">sint_dvo</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x2c */</span>
	<span class="n">u8</span> <span class="n">reserved6</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x2d */</span>
	<span class="n">u8</span> <span class="n">sint_inten</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x30 */</span>
	<span class="n">u8</span> <span class="n">reserved7</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x31 */</span>
	<span class="n">u16</span> <span class="n">sint_itype</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x34 */</span>
	<span class="n">u16</span> <span class="n">reserved8</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x36 */</span>
	<span class="n">u8</span> <span class="n">gpio_control</span><span class="p">;</span>	<span class="cm">/* GPIO + 0x38 */</span>
	<span class="n">u8</span> <span class="n">reserved9</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO + 0x39 */</span>
	<span class="n">u8</span> <span class="n">sint_istat</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x3c */</span>
	<span class="n">u8</span> <span class="n">sint_ival</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x3d */</span>
	<span class="n">u8</span> <span class="n">bus_errs</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x3e */</span>
	<span class="n">u8</span> <span class="n">reserved10</span><span class="p">;</span>		<span class="cm">/* GPIO + 0x3f */</span>
<span class="p">};</span>

<span class="cp">#define MPC52xx_GPIO_PSC_CONFIG_UART_WITHOUT_CD	4</span>
<span class="cp">#define MPC52xx_GPIO_PSC_CONFIG_UART_WITH_CD	5</span>
<span class="cp">#define MPC52xx_GPIO_PCI_DIS			(1&lt;&lt;15)</span>

<span class="cm">/* GPIO with WakeUp*/</span>
<span class="k">struct</span> <span class="n">mpc52xx_gpio_wkup</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">wkup_gpioe</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x00 */</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x03 */</span>
	<span class="n">u8</span> <span class="n">wkup_ode</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x04 */</span>
	<span class="n">u8</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x05 */</span>
	<span class="n">u8</span> <span class="n">wkup_ddr</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x08 */</span>
	<span class="n">u8</span> <span class="n">reserved3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x09 */</span>
	<span class="n">u8</span> <span class="n">wkup_dvo</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x0C */</span>
	<span class="n">u8</span> <span class="n">reserved4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x0D */</span>
	<span class="n">u8</span> <span class="n">wkup_inten</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x10 */</span>
	<span class="n">u8</span> <span class="n">reserved5</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x11 */</span>
	<span class="n">u8</span> <span class="n">wkup_iinten</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x14 */</span>
	<span class="n">u8</span> <span class="n">reserved6</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x15 */</span>
	<span class="n">u16</span> <span class="n">wkup_itype</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x18 */</span>
	<span class="n">u8</span> <span class="n">reserved7</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x1A */</span>
	<span class="n">u8</span> <span class="n">wkup_maste</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x1C */</span>
	<span class="n">u8</span> <span class="n">reserved8</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x1D */</span>
	<span class="n">u8</span> <span class="n">wkup_ival</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x20 */</span>
	<span class="n">u8</span> <span class="n">reserved9</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x21 */</span>
	<span class="n">u8</span> <span class="n">wkup_istat</span><span class="p">;</span>		<span class="cm">/* GPIO_WKUP + 0x24 */</span>
	<span class="n">u8</span> <span class="n">reserved10</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* GPIO_WKUP + 0x25 */</span>
<span class="p">};</span>

<span class="cm">/* XLB Bus control */</span>
<span class="k">struct</span> <span class="n">mpc52xx_xlb</span> <span class="p">{</span>
	<span class="n">u8</span> <span class="n">reserved</span><span class="p">[</span><span class="mh">0x40</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">config</span><span class="p">;</span>		<span class="cm">/* XLB + 0x40 */</span>
	<span class="n">u32</span> <span class="n">version</span><span class="p">;</span>		<span class="cm">/* XLB + 0x44 */</span>
	<span class="n">u32</span> <span class="n">status</span><span class="p">;</span>		<span class="cm">/* XLB + 0x48 */</span>
	<span class="n">u32</span> <span class="n">int_enable</span><span class="p">;</span>		<span class="cm">/* XLB + 0x4c */</span>
	<span class="n">u32</span> <span class="n">addr_capture</span><span class="p">;</span>	<span class="cm">/* XLB + 0x50 */</span>
	<span class="n">u32</span> <span class="n">bus_sig_capture</span><span class="p">;</span>	<span class="cm">/* XLB + 0x54 */</span>
	<span class="n">u32</span> <span class="n">addr_timeout</span><span class="p">;</span>	<span class="cm">/* XLB + 0x58 */</span>
	<span class="n">u32</span> <span class="n">data_timeout</span><span class="p">;</span>	<span class="cm">/* XLB + 0x5c */</span>
	<span class="n">u32</span> <span class="n">bus_act_timeout</span><span class="p">;</span>	<span class="cm">/* XLB + 0x60 */</span>
	<span class="n">u32</span> <span class="n">master_pri_enable</span><span class="p">;</span>	<span class="cm">/* XLB + 0x64 */</span>
	<span class="n">u32</span> <span class="n">master_priority</span><span class="p">;</span>	<span class="cm">/* XLB + 0x68 */</span>
	<span class="n">u32</span> <span class="n">base_address</span><span class="p">;</span>	<span class="cm">/* XLB + 0x6c */</span>
	<span class="n">u32</span> <span class="n">snoop_window</span><span class="p">;</span>	<span class="cm">/* XLB + 0x70 */</span>
<span class="p">};</span>

<span class="cp">#define MPC52xx_XLB_CFG_PLDIS		(1 &lt;&lt; 31)</span>
<span class="cp">#define MPC52xx_XLB_CFG_SNOOP		(1 &lt;&lt; 15)</span>

<span class="cm">/* Clock Distribution control */</span>
<span class="k">struct</span> <span class="n">mpc52xx_cdm</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">jtag_id</span><span class="p">;</span>		<span class="cm">/* CDM + 0x00  reg0 read only */</span>
	<span class="n">u32</span> <span class="n">rstcfg</span><span class="p">;</span>		<span class="cm">/* CDM + 0x04  reg1 read only */</span>
	<span class="n">u32</span> <span class="n">breadcrumb</span><span class="p">;</span>		<span class="cm">/* CDM + 0x08  reg2 */</span>

	<span class="n">u8</span> <span class="n">mem_clk_sel</span><span class="p">;</span>		<span class="cm">/* CDM + 0x0c  reg3 byte0 */</span>
	<span class="n">u8</span> <span class="n">xlb_clk_sel</span><span class="p">;</span>		<span class="cm">/* CDM + 0x0d  reg3 byte1 read only */</span>
	<span class="n">u8</span> <span class="n">ipb_clk_sel</span><span class="p">;</span>		<span class="cm">/* CDM + 0x0e  reg3 byte2 */</span>
	<span class="n">u8</span> <span class="n">pci_clk_sel</span><span class="p">;</span>		<span class="cm">/* CDM + 0x0f  reg3 byte3 */</span>

	<span class="n">u8</span> <span class="n">ext_48mhz_en</span><span class="p">;</span>	<span class="cm">/* CDM + 0x10  reg4 byte0 */</span>
	<span class="n">u8</span> <span class="n">fd_enable</span><span class="p">;</span>		<span class="cm">/* CDM + 0x11  reg4 byte1 */</span>
	<span class="n">u16</span> <span class="n">fd_counters</span><span class="p">;</span>	<span class="cm">/* CDM + 0x12  reg4 byte2,3 */</span>

	<span class="n">u32</span> <span class="n">clk_enables</span><span class="p">;</span>	<span class="cm">/* CDM + 0x14  reg5 */</span>

	<span class="n">u8</span> <span class="n">osc_disable</span><span class="p">;</span>		<span class="cm">/* CDM + 0x18  reg6 byte0 */</span>
	<span class="n">u8</span> <span class="n">reserved0</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>	<span class="cm">/* CDM + 0x19  reg6 byte1,2,3 */</span>

	<span class="n">u8</span> <span class="n">ccs_sleep_enable</span><span class="p">;</span>	<span class="cm">/* CDM + 0x1c  reg7 byte0 */</span>
	<span class="n">u8</span> <span class="n">osc_sleep_enable</span><span class="p">;</span>	<span class="cm">/* CDM + 0x1d  reg7 byte1 */</span>
	<span class="n">u8</span> <span class="n">reserved1</span><span class="p">;</span>		<span class="cm">/* CDM + 0x1e  reg7 byte2 */</span>
	<span class="n">u8</span> <span class="n">ccs_qreq_test</span><span class="p">;</span>	<span class="cm">/* CDM + 0x1f  reg7 byte3 */</span>

	<span class="n">u8</span> <span class="n">soft_reset</span><span class="p">;</span>		<span class="cm">/* CDM + 0x20  u8 byte0 */</span>
	<span class="n">u8</span> <span class="n">no_ckstp</span><span class="p">;</span>		<span class="cm">/* CDM + 0x21  u8 byte0 */</span>
	<span class="n">u8</span> <span class="n">reserved2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>	<span class="cm">/* CDM + 0x22  u8 byte1,2,3 */</span>

	<span class="n">u8</span> <span class="n">pll_lock</span><span class="p">;</span>		<span class="cm">/* CDM + 0x24  reg9 byte0 */</span>
	<span class="n">u8</span> <span class="n">pll_looselock</span><span class="p">;</span>	<span class="cm">/* CDM + 0x25  reg9 byte1 */</span>
	<span class="n">u8</span> <span class="n">pll_sm_lockwin</span><span class="p">;</span>	<span class="cm">/* CDM + 0x26  reg9 byte2 */</span>
	<span class="n">u8</span> <span class="n">reserved3</span><span class="p">;</span>		<span class="cm">/* CDM + 0x27  reg9 byte3 */</span>

	<span class="n">u16</span> <span class="n">reserved4</span><span class="p">;</span>		<span class="cm">/* CDM + 0x28  reg10 byte0,1 */</span>
	<span class="n">u16</span> <span class="n">mclken_div_psc1</span><span class="p">;</span>	<span class="cm">/* CDM + 0x2a  reg10 byte2,3 */</span>

	<span class="n">u16</span> <span class="n">reserved5</span><span class="p">;</span>		<span class="cm">/* CDM + 0x2c  reg11 byte0,1 */</span>
	<span class="n">u16</span> <span class="n">mclken_div_psc2</span><span class="p">;</span>	<span class="cm">/* CDM + 0x2e  reg11 byte2,3 */</span>

	<span class="n">u16</span> <span class="n">reserved6</span><span class="p">;</span>		<span class="cm">/* CDM + 0x30  reg12 byte0,1 */</span>
	<span class="n">u16</span> <span class="n">mclken_div_psc3</span><span class="p">;</span>	<span class="cm">/* CDM + 0x32  reg12 byte2,3 */</span>

	<span class="n">u16</span> <span class="n">reserved7</span><span class="p">;</span>		<span class="cm">/* CDM + 0x34  reg13 byte0,1 */</span>
	<span class="n">u16</span> <span class="n">mclken_div_psc6</span><span class="p">;</span>	<span class="cm">/* CDM + 0x36  reg13 byte2,3 */</span>
<span class="p">};</span>

<span class="cm">/* Interrupt controller Register set */</span>
<span class="k">struct</span> <span class="n">mpc52xx_intr</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">per_mask</span><span class="p">;</span>		<span class="cm">/* INTR + 0x00 */</span>
	<span class="n">u32</span> <span class="n">per_pri1</span><span class="p">;</span>		<span class="cm">/* INTR + 0x04 */</span>
	<span class="n">u32</span> <span class="n">per_pri2</span><span class="p">;</span>		<span class="cm">/* INTR + 0x08 */</span>
	<span class="n">u32</span> <span class="n">per_pri3</span><span class="p">;</span>		<span class="cm">/* INTR + 0x0c */</span>
	<span class="n">u32</span> <span class="n">ctrl</span><span class="p">;</span>		<span class="cm">/* INTR + 0x10 */</span>
	<span class="n">u32</span> <span class="n">main_mask</span><span class="p">;</span>		<span class="cm">/* INTR + 0x14 */</span>
	<span class="n">u32</span> <span class="n">main_pri1</span><span class="p">;</span>		<span class="cm">/* INTR + 0x18 */</span>
	<span class="n">u32</span> <span class="n">main_pri2</span><span class="p">;</span>		<span class="cm">/* INTR + 0x1c */</span>
	<span class="n">u32</span> <span class="n">reserved1</span><span class="p">;</span>		<span class="cm">/* INTR + 0x20 */</span>
	<span class="n">u32</span> <span class="n">enc_status</span><span class="p">;</span>		<span class="cm">/* INTR + 0x24 */</span>
	<span class="n">u32</span> <span class="n">crit_status</span><span class="p">;</span>	<span class="cm">/* INTR + 0x28 */</span>
	<span class="n">u32</span> <span class="n">main_status</span><span class="p">;</span>	<span class="cm">/* INTR + 0x2c */</span>
	<span class="n">u32</span> <span class="n">per_status</span><span class="p">;</span>		<span class="cm">/* INTR + 0x30 */</span>
	<span class="n">u32</span> <span class="n">reserved2</span><span class="p">;</span>		<span class="cm">/* INTR + 0x34 */</span>
	<span class="n">u32</span> <span class="n">per_error</span><span class="p">;</span>		<span class="cm">/* INTR + 0x38 */</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>


<span class="cm">/* ========================================================================= */</span>
<span class="cm">/* Prototypes for MPC52xx sysdev                                             */</span>
<span class="cm">/* ========================================================================= */</span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="cm">/* mpc52xx_common.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc5200_setup_xlb_arbiter</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_declare_of_platform_devices</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc5200_psc_ac97_gpio_reset</span><span class="p">(</span><span class="kt">int</span> <span class="n">psc_number</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_map_common_devices</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_set_psc_clkdiv</span><span class="p">(</span><span class="kt">int</span> <span class="n">psc_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">clkdiv</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mpc52xx_get_xtal_freq</span><span class="p">(</span><span class="k">struct</span> <span class="n">device_node</span> <span class="o">*</span><span class="n">node</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_restart</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">cmd</span><span class="p">);</span>

<span class="cm">/* mpc52xx_gpt.c */</span>
<span class="k">struct</span> <span class="n">mpc52xx_gpt_priv</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mpc52xx_gpt_priv</span> <span class="o">*</span><span class="n">mpc52xx_gpt_from_irq</span><span class="p">(</span><span class="kt">int</span> <span class="n">irq</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_gpt_start_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">mpc52xx_gpt_priv</span> <span class="o">*</span><span class="n">gpt</span><span class="p">,</span> <span class="n">u64</span> <span class="n">period</span><span class="p">,</span>
                            <span class="kt">int</span> <span class="n">continuous</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u64</span> <span class="n">mpc52xx_gpt_timer_period</span><span class="p">(</span><span class="k">struct</span> <span class="n">mpc52xx_gpt_priv</span> <span class="o">*</span><span class="n">gpt</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_gpt_stop_timer</span><span class="p">(</span><span class="k">struct</span> <span class="n">mpc52xx_gpt_priv</span> <span class="o">*</span><span class="n">gpt</span><span class="p">);</span>

<span class="cm">/* mpc52xx_lpbfifo.c */</span>
<span class="cp">#define MPC52XX_LPBFIFO_FLAG_READ		(0)</span>
<span class="cp">#define MPC52XX_LPBFIFO_FLAG_WRITE		(1&lt;&lt;0)</span>
<span class="cp">#define MPC52XX_LPBFIFO_FLAG_NO_INCREMENT	(1&lt;&lt;1)</span>
<span class="cp">#define MPC52XX_LPBFIFO_FLAG_NO_DMA		(1&lt;&lt;2)</span>
<span class="cp">#define MPC52XX_LPBFIFO_FLAG_POLL_DMA		(1&lt;&lt;3)</span>

<span class="k">struct</span> <span class="n">mpc52xx_lpbfifo_request</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">list</span><span class="p">;</span>

	<span class="cm">/* localplus bus address */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cs</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">offset</span><span class="p">;</span>

	<span class="cm">/* Memory address */</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
	<span class="n">phys_addr_t</span> <span class="n">data_phys</span><span class="p">;</span>

	<span class="cm">/* Details of transfer */</span>
	<span class="kt">size_t</span> <span class="n">size</span><span class="p">;</span>
	<span class="kt">size_t</span> <span class="n">pos</span><span class="p">;</span>	<span class="cm">/* current position of transfer */</span>
	<span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>

	<span class="cm">/* What to do when finished */</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="k">struct</span> <span class="n">mpc52xx_lpbfifo_request</span> <span class="o">*</span><span class="p">);</span>

	<span class="kt">void</span> <span class="o">*</span><span class="n">priv</span><span class="p">;</span>		<span class="cm">/* Driver private data */</span>

	<span class="cm">/* statistics */</span>
	<span class="kt">int</span> <span class="n">irq_count</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">irq_ticks</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">last_byte</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">buffer_not_done_cnt</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_lpbfifo_submit</span><span class="p">(</span><span class="k">struct</span> <span class="n">mpc52xx_lpbfifo_request</span> <span class="o">*</span><span class="n">req</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_lpbfifo_abort</span><span class="p">(</span><span class="k">struct</span> <span class="n">mpc52xx_lpbfifo_request</span> <span class="o">*</span><span class="n">req</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_lpbfifo_poll</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* mpc52xx_pic.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_init_irq</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mpc52xx_get_irq</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* mpc52xx_pci.c */</span>
<span class="cp">#ifdef CONFIG_PCI</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__init</span> <span class="n">mpc52xx_add_bridge</span><span class="p">(</span><span class="k">struct</span> <span class="n">device_node</span> <span class="o">*</span><span class="n">node</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__init</span> <span class="n">mpc52xx_setup_pci</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">mpc52xx_setup_pci</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_PM</span>
<span class="k">struct</span> <span class="n">mpc52xx_suspend</span> <span class="p">{</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">board_suspend_prepare</span><span class="p">)(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbar</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">board_resume_finish</span><span class="p">)(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">mbar</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">mpc52xx_suspend</span> <span class="n">mpc52xx_suspend</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__init</span> <span class="n">mpc52xx_pm_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_set_wakeup_gpio</span><span class="p">(</span><span class="n">u8</span> <span class="n">pin</span><span class="p">,</span> <span class="n">u8</span> <span class="n">level</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_PPC_LITE5200</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__init</span> <span class="n">lite5200_pm_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* lite5200 calls mpc5200 suspend functions, so here they are */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_pm_prepare</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mpc52xx_pm_enter</span><span class="p">(</span><span class="n">suspend_state_t</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">mpc52xx_pm_finish</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">char</span> <span class="n">saved_sram</span><span class="p">[</span><span class="mh">0x4000</span><span class="p">];</span> <span class="cm">/* reuse buffer from mpc52xx suspend */</span>
<span class="cp">#endif</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_PM */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __ASM_POWERPC_MPC52xx_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
