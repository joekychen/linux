<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › fsl_ifc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>fsl_ifc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* Freescale Integrated Flash Controller</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2011 Freescale Semiconductor, Inc</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Dipen Dudhat &lt;dipen.dudhat@freescale.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ASM_FSL_IFC_H</span>
<span class="cp">#define __ASM_FSL_IFC_H</span>

<span class="cp">#include &lt;linux/compiler.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>

<span class="cp">#include &lt;linux/of_platform.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>

<span class="cp">#define FSL_IFC_BANK_COUNT 4</span>

<span class="cm">/*</span>
<span class="cm"> * CSPR - Chip Select Property Register</span>
<span class="cm"> */</span>
<span class="cp">#define CSPR_BA				0xFFFF0000</span>
<span class="cp">#define CSPR_BA_SHIFT			16</span>
<span class="cp">#define CSPR_PORT_SIZE			0x00000180</span>
<span class="cp">#define CSPR_PORT_SIZE_SHIFT		7</span>
<span class="cm">/* Port Size 8 bit */</span>
<span class="cp">#define CSPR_PORT_SIZE_8		0x00000080</span>
<span class="cm">/* Port Size 16 bit */</span>
<span class="cp">#define CSPR_PORT_SIZE_16		0x00000100</span>
<span class="cm">/* Port Size 32 bit */</span>
<span class="cp">#define CSPR_PORT_SIZE_32		0x00000180</span>
<span class="cm">/* Write Protect */</span>
<span class="cp">#define CSPR_WP				0x00000040</span>
<span class="cp">#define CSPR_WP_SHIFT			6</span>
<span class="cm">/* Machine Select */</span>
<span class="cp">#define CSPR_MSEL			0x00000006</span>
<span class="cp">#define CSPR_MSEL_SHIFT			1</span>
<span class="cm">/* NOR */</span>
<span class="cp">#define CSPR_MSEL_NOR			0x00000000</span>
<span class="cm">/* NAND */</span>
<span class="cp">#define CSPR_MSEL_NAND			0x00000002</span>
<span class="cm">/* GPCM */</span>
<span class="cp">#define CSPR_MSEL_GPCM			0x00000004</span>
<span class="cm">/* Bank Valid */</span>
<span class="cp">#define CSPR_V				0x00000001</span>
<span class="cp">#define CSPR_V_SHIFT			0</span>

<span class="cm">/*</span>
<span class="cm"> * Address Mask Register</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_AMASK_MASK			0xFFFF0000</span>
<span class="cp">#define IFC_AMASK_SHIFT			16</span>
<span class="cp">#define IFC_AMASK(n)			(IFC_AMASK_MASK &lt;&lt; \</span>
<span class="cp">					(__ilog2(n) - IFC_AMASK_SHIFT))</span>

<span class="cm">/*</span>
<span class="cm"> * Chip Select Option Register IFC_NAND Machine</span>
<span class="cm"> */</span>
<span class="cm">/* Enable ECC Encoder */</span>
<span class="cp">#define CSOR_NAND_ECC_ENC_EN		0x80000000</span>
<span class="cp">#define CSOR_NAND_ECC_MODE_MASK		0x30000000</span>
<span class="cm">/* 4 bit correction per 520 Byte sector */</span>
<span class="cp">#define CSOR_NAND_ECC_MODE_4		0x00000000</span>
<span class="cm">/* 8 bit correction per 528 Byte sector */</span>
<span class="cp">#define CSOR_NAND_ECC_MODE_8		0x10000000</span>
<span class="cm">/* Enable ECC Decoder */</span>
<span class="cp">#define CSOR_NAND_ECC_DEC_EN		0x04000000</span>
<span class="cm">/* Row Address Length */</span>
<span class="cp">#define CSOR_NAND_RAL_MASK		0x01800000</span>
<span class="cp">#define CSOR_NAND_RAL_SHIFT		20</span>
<span class="cp">#define CSOR_NAND_RAL_1			0x00000000</span>
<span class="cp">#define CSOR_NAND_RAL_2			0x00800000</span>
<span class="cp">#define CSOR_NAND_RAL_3			0x01000000</span>
<span class="cp">#define CSOR_NAND_RAL_4			0x01800000</span>
<span class="cm">/* Page Size 512b, 2k, 4k */</span>
<span class="cp">#define CSOR_NAND_PGS_MASK		0x00180000</span>
<span class="cp">#define CSOR_NAND_PGS_SHIFT		16</span>
<span class="cp">#define CSOR_NAND_PGS_512		0x00000000</span>
<span class="cp">#define CSOR_NAND_PGS_2K		0x00080000</span>
<span class="cp">#define CSOR_NAND_PGS_4K		0x00100000</span>
<span class="cm">/* Spare region Size */</span>
<span class="cp">#define CSOR_NAND_SPRZ_MASK		0x0000E000</span>
<span class="cp">#define CSOR_NAND_SPRZ_SHIFT		13</span>
<span class="cp">#define CSOR_NAND_SPRZ_16		0x00000000</span>
<span class="cp">#define CSOR_NAND_SPRZ_64		0x00002000</span>
<span class="cp">#define CSOR_NAND_SPRZ_128		0x00004000</span>
<span class="cp">#define CSOR_NAND_SPRZ_210		0x00006000</span>
<span class="cp">#define CSOR_NAND_SPRZ_218		0x00008000</span>
<span class="cp">#define CSOR_NAND_SPRZ_224		0x0000A000</span>
<span class="cm">/* Pages Per Block */</span>
<span class="cp">#define CSOR_NAND_PB_MASK		0x00000700</span>
<span class="cp">#define CSOR_NAND_PB_SHIFT		8</span>
<span class="cp">#define CSOR_NAND_PB(n)		((__ilog2(n) - 5) &lt;&lt; CSOR_NAND_PB_SHIFT)</span>
<span class="cm">/* Time for Read Enable High to Output High Impedance */</span>
<span class="cp">#define CSOR_NAND_TRHZ_MASK		0x0000001C</span>
<span class="cp">#define CSOR_NAND_TRHZ_SHIFT		2</span>
<span class="cp">#define CSOR_NAND_TRHZ_20		0x00000000</span>
<span class="cp">#define CSOR_NAND_TRHZ_40		0x00000004</span>
<span class="cp">#define CSOR_NAND_TRHZ_60		0x00000008</span>
<span class="cp">#define CSOR_NAND_TRHZ_80		0x0000000C</span>
<span class="cp">#define CSOR_NAND_TRHZ_100		0x00000010</span>
<span class="cm">/* Buffer control disable */</span>
<span class="cp">#define CSOR_NAND_BCTLD			0x00000001</span>

<span class="cm">/*</span>
<span class="cm"> * Chip Select Option Register - NOR Flash Mode</span>
<span class="cm"> */</span>
<span class="cm">/* Enable Address shift Mode */</span>
<span class="cp">#define CSOR_NOR_ADM_SHFT_MODE_EN	0x80000000</span>
<span class="cm">/* Page Read Enable from NOR device */</span>
<span class="cp">#define CSOR_NOR_PGRD_EN		0x10000000</span>
<span class="cm">/* AVD Toggle Enable during Burst Program */</span>
<span class="cp">#define CSOR_NOR_AVD_TGL_PGM_EN		0x01000000</span>
<span class="cm">/* Address Data Multiplexing Shift */</span>
<span class="cp">#define CSOR_NOR_ADM_MASK		0x0003E000</span>
<span class="cp">#define CSOR_NOR_ADM_SHIFT_SHIFT	13</span>
<span class="cp">#define CSOR_NOR_ADM_SHIFT(n)	((n) &lt;&lt; CSOR_NOR_ADM_SHIFT_SHIFT)</span>
<span class="cm">/* Type of the NOR device hooked */</span>
<span class="cp">#define CSOR_NOR_NOR_MODE_AYSNC_NOR	0x00000000</span>
<span class="cp">#define CSOR_NOR_NOR_MODE_AVD_NOR	0x00000020</span>
<span class="cm">/* Time for Read Enable High to Output High Impedance */</span>
<span class="cp">#define CSOR_NOR_TRHZ_MASK		0x0000001C</span>
<span class="cp">#define CSOR_NOR_TRHZ_SHIFT		2</span>
<span class="cp">#define CSOR_NOR_TRHZ_20		0x00000000</span>
<span class="cp">#define CSOR_NOR_TRHZ_40		0x00000004</span>
<span class="cp">#define CSOR_NOR_TRHZ_60		0x00000008</span>
<span class="cp">#define CSOR_NOR_TRHZ_80		0x0000000C</span>
<span class="cp">#define CSOR_NOR_TRHZ_100		0x00000010</span>
<span class="cm">/* Buffer control disable */</span>
<span class="cp">#define CSOR_NOR_BCTLD			0x00000001</span>

<span class="cm">/*</span>
<span class="cm"> * Chip Select Option Register - GPCM Mode</span>
<span class="cm"> */</span>
<span class="cm">/* GPCM Mode - Normal */</span>
<span class="cp">#define CSOR_GPCM_GPMODE_NORMAL		0x00000000</span>
<span class="cm">/* GPCM Mode - GenericASIC */</span>
<span class="cp">#define CSOR_GPCM_GPMODE_ASIC		0x80000000</span>
<span class="cm">/* Parity Mode odd/even */</span>
<span class="cp">#define CSOR_GPCM_PARITY_EVEN		0x40000000</span>
<span class="cm">/* Parity Checking enable/disable */</span>
<span class="cp">#define CSOR_GPCM_PAR_EN		0x20000000</span>
<span class="cm">/* GPCM Timeout Count */</span>
<span class="cp">#define CSOR_GPCM_GPTO_MASK		0x0F000000</span>
<span class="cp">#define CSOR_GPCM_GPTO_SHIFT		24</span>
<span class="cp">#define CSOR_GPCM_GPTO(n)	((__ilog2(n) - 8) &lt;&lt; CSOR_GPCM_GPTO_SHIFT)</span>
<span class="cm">/* GPCM External Access Termination mode for read access */</span>
<span class="cp">#define CSOR_GPCM_RGETA_EXT		0x00080000</span>
<span class="cm">/* GPCM External Access Termination mode for write access */</span>
<span class="cp">#define CSOR_GPCM_WGETA_EXT		0x00040000</span>
<span class="cm">/* Address Data Multiplexing Shift */</span>
<span class="cp">#define CSOR_GPCM_ADM_MASK		0x0003E000</span>
<span class="cp">#define CSOR_GPCM_ADM_SHIFT_SHIFT	13</span>
<span class="cp">#define CSOR_GPCM_ADM_SHIFT(n)	((n) &lt;&lt; CSOR_GPCM_ADM_SHIFT_SHIFT)</span>
<span class="cm">/* Generic ASIC Parity error indication delay */</span>
<span class="cp">#define CSOR_GPCM_GAPERRD_MASK		0x00000180</span>
<span class="cp">#define CSOR_GPCM_GAPERRD_SHIFT		7</span>
<span class="cp">#define CSOR_GPCM_GAPERRD(n)	(((n) - 1) &lt;&lt; CSOR_GPCM_GAPERRD_SHIFT)</span>
<span class="cm">/* Time for Read Enable High to Output High Impedance */</span>
<span class="cp">#define CSOR_GPCM_TRHZ_MASK		0x0000001C</span>
<span class="cp">#define CSOR_GPCM_TRHZ_20		0x00000000</span>
<span class="cp">#define CSOR_GPCM_TRHZ_40		0x00000004</span>
<span class="cp">#define CSOR_GPCM_TRHZ_60		0x00000008</span>
<span class="cp">#define CSOR_GPCM_TRHZ_80		0x0000000C</span>
<span class="cp">#define CSOR_GPCM_TRHZ_100		0x00000010</span>
<span class="cm">/* Buffer control disable */</span>
<span class="cp">#define CSOR_GPCM_BCTLD			0x00000001</span>

<span class="cm">/*</span>
<span class="cm"> * Ready Busy Status Register (RB_STAT)</span>
<span class="cm"> */</span>
<span class="cm">/* CSn is READY */</span>
<span class="cp">#define IFC_RB_STAT_READY_CS0		0x80000000</span>
<span class="cp">#define IFC_RB_STAT_READY_CS1		0x40000000</span>
<span class="cp">#define IFC_RB_STAT_READY_CS2		0x20000000</span>
<span class="cp">#define IFC_RB_STAT_READY_CS3		0x10000000</span>

<span class="cm">/*</span>
<span class="cm"> * General Control Register (GCR)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_GCR_MASK			0x8000F800</span>
<span class="cm">/* reset all IFC hardware */</span>
<span class="cp">#define IFC_GCR_SOFT_RST_ALL		0x80000000</span>
<span class="cm">/* Turnaroud Time of external buffer */</span>
<span class="cp">#define IFC_GCR_TBCTL_TRN_TIME		0x0000F800</span>
<span class="cp">#define IFC_GCR_TBCTL_TRN_TIME_SHIFT	11</span>

<span class="cm">/*</span>
<span class="cm"> * Common Event and Error Status Register (CM_EVTER_STAT)</span>
<span class="cm"> */</span>
<span class="cm">/* Chip select error */</span>
<span class="cp">#define IFC_CM_EVTER_STAT_CSER		0x80000000</span>

<span class="cm">/*</span>
<span class="cm"> * Common Event and Error Enable Register (CM_EVTER_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Chip select error checking enable */</span>
<span class="cp">#define IFC_CM_EVTER_EN_CSEREN		0x80000000</span>

<span class="cm">/*</span>
<span class="cm"> * Common Event and Error Interrupt Enable Register (CM_EVTER_INTR_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Chip select error interrupt enable */</span>
<span class="cp">#define IFC_CM_EVTER_INTR_EN_CSERIREN	0x80000000</span>

<span class="cm">/*</span>
<span class="cm"> * Common Transfer Error Attribute Register-0 (CM_ERATTR0)</span>
<span class="cm"> */</span>
<span class="cm">/* transaction type of error Read/Write */</span>
<span class="cp">#define IFC_CM_ERATTR0_ERTYP_READ	0x80000000</span>
<span class="cp">#define IFC_CM_ERATTR0_ERAID		0x0FF00000</span>
<span class="cp">#define IFC_CM_ERATTR0_ERAID_SHIFT	20</span>
<span class="cp">#define IFC_CM_ERATTR0_ESRCID		0x0000FF00</span>
<span class="cp">#define IFC_CM_ERATTR0_ESRCID_SHIFT	8</span>

<span class="cm">/*</span>
<span class="cm"> * Clock Control Register (CCR)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_CCR_MASK			0x0F0F8800</span>
<span class="cm">/* Clock division ratio */</span>
<span class="cp">#define IFC_CCR_CLK_DIV_MASK		0x0F000000</span>
<span class="cp">#define IFC_CCR_CLK_DIV_SHIFT		24</span>
<span class="cp">#define IFC_CCR_CLK_DIV(n)		((n-1) &lt;&lt; IFC_CCR_CLK_DIV_SHIFT)</span>
<span class="cm">/* IFC Clock Delay */</span>
<span class="cp">#define IFC_CCR_CLK_DLY_MASK		0x000F0000</span>
<span class="cp">#define IFC_CCR_CLK_DLY_SHIFT		16</span>
<span class="cp">#define IFC_CCR_CLK_DLY(n)		((n) &lt;&lt; IFC_CCR_CLK_DLY_SHIFT)</span>
<span class="cm">/* Invert IFC clock before sending out */</span>
<span class="cp">#define IFC_CCR_INV_CLK_EN		0x00008000</span>
<span class="cm">/* Fedback IFC Clock */</span>
<span class="cp">#define IFC_CCR_FB_IFC_CLK_SEL		0x00000800</span>

<span class="cm">/*</span>
<span class="cm"> * Clock Status Register (CSR)</span>
<span class="cm"> */</span>
<span class="cm">/* Clk is stable */</span>
<span class="cp">#define IFC_CSR_CLK_STAT_STABLE		0x80000000</span>

<span class="cm">/*</span>
<span class="cm"> * IFC_NAND Machine Specific Registers</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * NAND Configuration Register (NCFGR)</span>
<span class="cm"> */</span>
<span class="cm">/* Auto Boot Mode */</span>
<span class="cp">#define IFC_NAND_NCFGR_BOOT		0x80000000</span>
<span class="cm">/* Addressing Mode-ROW0+n/COL0 */</span>
<span class="cp">#define IFC_NAND_NCFGR_ADDR_MODE_RC0	0x00000000</span>
<span class="cm">/* Addressing Mode-ROW0+n/COL0+n */</span>
<span class="cp">#define IFC_NAND_NCFGR_ADDR_MODE_RC1	0x00400000</span>
<span class="cm">/* Number of loop iterations of FIR sequences for multi page operations */</span>
<span class="cp">#define IFC_NAND_NCFGR_NUM_LOOP_MASK	0x0000F000</span>
<span class="cp">#define IFC_NAND_NCFGR_NUM_LOOP_SHIFT	12</span>
<span class="cp">#define IFC_NAND_NCFGR_NUM_LOOP(n)	((n) &lt;&lt; IFC_NAND_NCFGR_NUM_LOOP_SHIFT)</span>
<span class="cm">/* Number of wait cycles */</span>
<span class="cp">#define IFC_NAND_NCFGR_NUM_WAIT_MASK	0x000000FF</span>
<span class="cp">#define IFC_NAND_NCFGR_NUM_WAIT_SHIFT	0</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Flash Command Registers (NAND_FCR0/NAND_FCR1)</span>
<span class="cm"> */</span>
<span class="cm">/* General purpose FCM flash command bytes CMD0-CMD7 */</span>
<span class="cp">#define IFC_NAND_FCR0_CMD0		0xFF000000</span>
<span class="cp">#define IFC_NAND_FCR0_CMD0_SHIFT	24</span>
<span class="cp">#define IFC_NAND_FCR0_CMD1		0x00FF0000</span>
<span class="cp">#define IFC_NAND_FCR0_CMD1_SHIFT	16</span>
<span class="cp">#define IFC_NAND_FCR0_CMD2		0x0000FF00</span>
<span class="cp">#define IFC_NAND_FCR0_CMD2_SHIFT	8</span>
<span class="cp">#define IFC_NAND_FCR0_CMD3		0x000000FF</span>
<span class="cp">#define IFC_NAND_FCR0_CMD3_SHIFT	0</span>
<span class="cp">#define IFC_NAND_FCR1_CMD4		0xFF000000</span>
<span class="cp">#define IFC_NAND_FCR1_CMD4_SHIFT	24</span>
<span class="cp">#define IFC_NAND_FCR1_CMD5		0x00FF0000</span>
<span class="cp">#define IFC_NAND_FCR1_CMD5_SHIFT	16</span>
<span class="cp">#define IFC_NAND_FCR1_CMD6		0x0000FF00</span>
<span class="cp">#define IFC_NAND_FCR1_CMD6_SHIFT	8</span>
<span class="cp">#define IFC_NAND_FCR1_CMD7		0x000000FF</span>
<span class="cp">#define IFC_NAND_FCR1_CMD7_SHIFT	0</span>

<span class="cm">/*</span>
<span class="cm"> * Flash ROW and COL Address Register (ROWn, COLn)</span>
<span class="cm"> */</span>
<span class="cm">/* Main/spare region locator */</span>
<span class="cp">#define IFC_NAND_COL_MS			0x80000000</span>
<span class="cm">/* Column Address */</span>
<span class="cp">#define IFC_NAND_COL_CA_MASK		0x00000FFF</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Flash Byte Count Register (NAND_BC)</span>
<span class="cm"> */</span>
<span class="cm">/* Byte Count for read/Write */</span>
<span class="cp">#define IFC_NAND_BC			0x000001FF</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Flash Instruction Registers (NAND_FIR0/NAND_FIR1/NAND_FIR2)</span>
<span class="cm"> */</span>
<span class="cm">/* NAND Machine specific opcodes OP0-OP14*/</span>
<span class="cp">#define IFC_NAND_FIR0_OP0		0xFC000000</span>
<span class="cp">#define IFC_NAND_FIR0_OP0_SHIFT		26</span>
<span class="cp">#define IFC_NAND_FIR0_OP1		0x03F00000</span>
<span class="cp">#define IFC_NAND_FIR0_OP1_SHIFT		20</span>
<span class="cp">#define IFC_NAND_FIR0_OP2		0x000FC000</span>
<span class="cp">#define IFC_NAND_FIR0_OP2_SHIFT		14</span>
<span class="cp">#define IFC_NAND_FIR0_OP3		0x00003F00</span>
<span class="cp">#define IFC_NAND_FIR0_OP3_SHIFT		8</span>
<span class="cp">#define IFC_NAND_FIR0_OP4		0x000000FC</span>
<span class="cp">#define IFC_NAND_FIR0_OP4_SHIFT		2</span>
<span class="cp">#define IFC_NAND_FIR1_OP5		0xFC000000</span>
<span class="cp">#define IFC_NAND_FIR1_OP5_SHIFT		26</span>
<span class="cp">#define IFC_NAND_FIR1_OP6		0x03F00000</span>
<span class="cp">#define IFC_NAND_FIR1_OP6_SHIFT		20</span>
<span class="cp">#define IFC_NAND_FIR1_OP7		0x000FC000</span>
<span class="cp">#define IFC_NAND_FIR1_OP7_SHIFT		14</span>
<span class="cp">#define IFC_NAND_FIR1_OP8		0x00003F00</span>
<span class="cp">#define IFC_NAND_FIR1_OP8_SHIFT		8</span>
<span class="cp">#define IFC_NAND_FIR1_OP9		0x000000FC</span>
<span class="cp">#define IFC_NAND_FIR1_OP9_SHIFT		2</span>
<span class="cp">#define IFC_NAND_FIR2_OP10		0xFC000000</span>
<span class="cp">#define IFC_NAND_FIR2_OP10_SHIFT	26</span>
<span class="cp">#define IFC_NAND_FIR2_OP11		0x03F00000</span>
<span class="cp">#define IFC_NAND_FIR2_OP11_SHIFT	20</span>
<span class="cp">#define IFC_NAND_FIR2_OP12		0x000FC000</span>
<span class="cp">#define IFC_NAND_FIR2_OP12_SHIFT	14</span>
<span class="cp">#define IFC_NAND_FIR2_OP13		0x00003F00</span>
<span class="cp">#define IFC_NAND_FIR2_OP13_SHIFT	8</span>
<span class="cp">#define IFC_NAND_FIR2_OP14		0x000000FC</span>
<span class="cp">#define IFC_NAND_FIR2_OP14_SHIFT	2</span>

<span class="cm">/*</span>
<span class="cm"> * Instruction opcodes to be programmed</span>
<span class="cm"> * in FIR registers- 6bits</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">ifc_nand_fir_opcodes</span> <span class="p">{</span>
	<span class="n">IFC_FIR_OP_NOP</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CA0</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CA1</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CA2</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CA3</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RA0</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RA1</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RA2</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RA3</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD0</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD1</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD2</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD3</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD4</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD5</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD6</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CMD7</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW0</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW1</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW2</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW3</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW4</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW5</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW6</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_CW7</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_WBCD</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RBCD</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_BTRD</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RDSTAT</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_NWAIT</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_WFR</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_SBRD</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_UA</span><span class="p">,</span>
	<span class="n">IFC_FIR_OP_RB</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Chip Select Register (NAND_CSEL)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_NAND_CSEL			0x0C000000</span>
<span class="cp">#define IFC_NAND_CSEL_SHIFT		26</span>
<span class="cp">#define IFC_NAND_CSEL_CS0		0x00000000</span>
<span class="cp">#define IFC_NAND_CSEL_CS1		0x04000000</span>
<span class="cp">#define IFC_NAND_CSEL_CS2		0x08000000</span>
<span class="cp">#define IFC_NAND_CSEL_CS3		0x0C000000</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Operation Sequence Start (NANDSEQ_STRT)</span>
<span class="cm"> */</span>
<span class="cm">/* NAND Flash Operation Start */</span>
<span class="cp">#define IFC_NAND_SEQ_STRT_FIR_STRT	0x80000000</span>
<span class="cm">/* Automatic Erase */</span>
<span class="cp">#define IFC_NAND_SEQ_STRT_AUTO_ERS	0x00800000</span>
<span class="cm">/* Automatic Program */</span>
<span class="cp">#define IFC_NAND_SEQ_STRT_AUTO_PGM	0x00100000</span>
<span class="cm">/* Automatic Copyback */</span>
<span class="cp">#define IFC_NAND_SEQ_STRT_AUTO_CPB	0x00020000</span>
<span class="cm">/* Automatic Read Operation */</span>
<span class="cp">#define IFC_NAND_SEQ_STRT_AUTO_RD	0x00004000</span>
<span class="cm">/* Automatic Status Read */</span>
<span class="cp">#define IFC_NAND_SEQ_STRT_AUTO_STAT_RD	0x00000800</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Event and Error Status Register (NAND_EVTER_STAT)</span>
<span class="cm"> */</span>
<span class="cm">/* Operation Complete */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_OPC		0x80000000</span>
<span class="cm">/* Flash Timeout Error */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_FTOER	0x08000000</span>
<span class="cm">/* Write Protect Error */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_WPER	0x04000000</span>
<span class="cm">/* ECC Error */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_ECCER	0x02000000</span>
<span class="cm">/* RCW Load Done */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_RCW_DN	0x00008000</span>
<span class="cm">/* Boot Loadr Done */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_BOOT_DN	0x00004000</span>
<span class="cm">/* Bad Block Indicator search select */</span>
<span class="cp">#define IFC_NAND_EVTER_STAT_BBI_SRCH_SE	0x00000800</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Flash Page Read Completion Event Status Register</span>
<span class="cm"> * (PGRDCMPL_EVT_STAT)</span>
<span class="cm"> */</span>
<span class="cp">#define PGRDCMPL_EVT_STAT_MASK		0xFFFF0000</span>
<span class="cm">/* Small Page 0-15 Done */</span>
<span class="cp">#define PGRDCMPL_EVT_STAT_SECTION_SP(n)	(1 &lt;&lt; (31 - (n)))</span>
<span class="cm">/* Large Page(2K) 0-3 Done */</span>
<span class="cp">#define PGRDCMPL_EVT_STAT_LP_2K(n)	(0xF &lt;&lt; (28 - (n)*4))</span>
<span class="cm">/* Large Page(4K) 0-1 Done */</span>
<span class="cp">#define PGRDCMPL_EVT_STAT_LP_4K(n)	(0xFF &lt;&lt; (24 - (n)*8))</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Event and Error Enable Register (NAND_EVTER_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Operation complete event enable */</span>
<span class="cp">#define IFC_NAND_EVTER_EN_OPC_EN	0x80000000</span>
<span class="cm">/* Page read complete event enable */</span>
<span class="cp">#define IFC_NAND_EVTER_EN_PGRDCMPL_EN	0x20000000</span>
<span class="cm">/* Flash Timeout error enable */</span>
<span class="cp">#define IFC_NAND_EVTER_EN_FTOER_EN	0x08000000</span>
<span class="cm">/* Write Protect error enable */</span>
<span class="cp">#define IFC_NAND_EVTER_EN_WPER_EN	0x04000000</span>
<span class="cm">/* ECC error logging enable */</span>
<span class="cp">#define IFC_NAND_EVTER_EN_ECCER_EN	0x02000000</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Event and Error Interrupt Enable Register (NAND_EVTER_INTR_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Enable interrupt for operation complete */</span>
<span class="cp">#define IFC_NAND_EVTER_INTR_OPCIR_EN		0x80000000</span>
<span class="cm">/* Enable interrupt for Page read complete */</span>
<span class="cp">#define IFC_NAND_EVTER_INTR_PGRDCMPLIR_EN	0x20000000</span>
<span class="cm">/* Enable interrupt for Flash timeout error */</span>
<span class="cp">#define IFC_NAND_EVTER_INTR_FTOERIR_EN		0x08000000</span>
<span class="cm">/* Enable interrupt for Write protect error */</span>
<span class="cp">#define IFC_NAND_EVTER_INTR_WPERIR_EN		0x04000000</span>
<span class="cm">/* Enable interrupt for ECC error*/</span>
<span class="cp">#define IFC_NAND_EVTER_INTR_ECCERIR_EN		0x02000000</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Transfer Error Attribute Register-0 (NAND_ERATTR0)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_NAND_ERATTR0_MASK		0x0C080000</span>
<span class="cm">/* Error on CS0-3 for NAND */</span>
<span class="cp">#define IFC_NAND_ERATTR0_ERCS_CS0	0x00000000</span>
<span class="cp">#define IFC_NAND_ERATTR0_ERCS_CS1	0x04000000</span>
<span class="cp">#define IFC_NAND_ERATTR0_ERCS_CS2	0x08000000</span>
<span class="cp">#define IFC_NAND_ERATTR0_ERCS_CS3	0x0C000000</span>
<span class="cm">/* Transaction type of error Read/Write */</span>
<span class="cp">#define IFC_NAND_ERATTR0_ERTTYPE_READ	0x00080000</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Flash Status Register (NAND_FSR)</span>
<span class="cm"> */</span>
<span class="cm">/* First byte of data read from read status op */</span>
<span class="cp">#define IFC_NAND_NFSR_RS0		0xFF000000</span>
<span class="cm">/* Second byte of data read from read status op */</span>
<span class="cp">#define IFC_NAND_NFSR_RS1		0x00FF0000</span>

<span class="cm">/*</span>
<span class="cm"> * ECC Error Status Registers (ECCSTAT0-ECCSTAT3)</span>
<span class="cm"> */</span>
<span class="cm">/* Number of ECC errors on sector n (n = 0-15) */</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR0_MASK	0x0F000000</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR0_SHIFT	24</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR1_MASK	0x000F0000</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR1_SHIFT	16</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR2_MASK	0x00000F00</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR2_SHIFT	8</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR3_MASK	0x0000000F</span>
<span class="cp">#define IFC_NAND_ECCSTAT0_ERRCNT_SECTOR3_SHIFT	0</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR4_MASK	0x0F000000</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR4_SHIFT	24</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR5_MASK	0x000F0000</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR5_SHIFT	16</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR6_MASK	0x00000F00</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR6_SHIFT	8</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR7_MASK	0x0000000F</span>
<span class="cp">#define IFC_NAND_ECCSTAT1_ERRCNT_SECTOR7_SHIFT	0</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR8_MASK	0x0F000000</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR8_SHIFT	24</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR9_MASK	0x000F0000</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR9_SHIFT	16</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR10_MASK	0x00000F00</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR10_SHIFT	8</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR11_MASK	0x0000000F</span>
<span class="cp">#define IFC_NAND_ECCSTAT2_ERRCNT_SECTOR11_SHIFT	0</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR12_MASK	0x0F000000</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR12_SHIFT	24</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR13_MASK	0x000F0000</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR13_SHIFT	16</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR14_MASK	0x00000F00</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR14_SHIFT	8</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR15_MASK	0x0000000F</span>
<span class="cp">#define IFC_NAND_ECCSTAT3_ERRCNT_SECTOR15_SHIFT	0</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Control Register (NANDCR)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_NAND_NCR_FTOCNT_MASK	0x1E000000</span>
<span class="cp">#define IFC_NAND_NCR_FTOCNT_SHIFT	25</span>
<span class="cp">#define IFC_NAND_NCR_FTOCNT(n)	((_ilog2(n) - 8)  &lt;&lt; IFC_NAND_NCR_FTOCNT_SHIFT)</span>

<span class="cm">/*</span>
<span class="cm"> * NAND_AUTOBOOT_TRGR</span>
<span class="cm"> */</span>
<span class="cm">/* Trigger RCW load */</span>
<span class="cp">#define IFC_NAND_AUTOBOOT_TRGR_RCW_LD	0x80000000</span>
<span class="cm">/* Trigget Auto Boot */</span>
<span class="cp">#define IFC_NAND_AUTOBOOT_TRGR_BOOT_LD	0x20000000</span>

<span class="cm">/*</span>
<span class="cm"> * NAND_MDR</span>
<span class="cm"> */</span>
<span class="cm">/* 1st read data byte when opcode SBRD */</span>
<span class="cp">#define IFC_NAND_MDR_RDATA0		0xFF000000</span>
<span class="cm">/* 2nd read data byte when opcode SBRD */</span>
<span class="cp">#define IFC_NAND_MDR_RDATA1		0x00FF0000</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Machine Specific Registers</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * NOR Event and Error Status Register (NOR_EVTER_STAT)</span>
<span class="cm"> */</span>
<span class="cm">/* NOR Command Sequence Operation Complete */</span>
<span class="cp">#define IFC_NOR_EVTER_STAT_OPC_NOR	0x80000000</span>
<span class="cm">/* Write Protect Error */</span>
<span class="cp">#define IFC_NOR_EVTER_STAT_WPER		0x04000000</span>
<span class="cm">/* Command Sequence Timeout Error */</span>
<span class="cp">#define IFC_NOR_EVTER_STAT_STOER	0x01000000</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Event and Error Enable Register (NOR_EVTER_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* NOR Command Seq complete event enable */</span>
<span class="cp">#define IFC_NOR_EVTER_EN_OPCEN_NOR	0x80000000</span>
<span class="cm">/* Write Protect Error Checking Enable */</span>
<span class="cp">#define IFC_NOR_EVTER_EN_WPEREN		0x04000000</span>
<span class="cm">/* Timeout Error Enable */</span>
<span class="cp">#define IFC_NOR_EVTER_EN_STOEREN	0x01000000</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Event and Error Interrupt Enable Register (NOR_EVTER_INTR_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Enable interrupt for OPC complete */</span>
<span class="cp">#define IFC_NOR_EVTER_INTR_OPCEN_NOR	0x80000000</span>
<span class="cm">/* Enable interrupt for write protect error */</span>
<span class="cp">#define IFC_NOR_EVTER_INTR_WPEREN	0x04000000</span>
<span class="cm">/* Enable interrupt for timeout error */</span>
<span class="cp">#define IFC_NOR_EVTER_INTR_STOEREN	0x01000000</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Transfer Error Attribute Register-0 (NOR_ERATTR0)</span>
<span class="cm"> */</span>
<span class="cm">/* Source ID for error transaction */</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERSRCID		0xFF000000</span>
<span class="cm">/* AXI ID for error transation */</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERAID		0x000FF000</span>
<span class="cm">/* Chip select corresponds to NOR error */</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERCS_CS0	0x00000000</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERCS_CS1	0x00000010</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERCS_CS2	0x00000020</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERCS_CS3	0x00000030</span>
<span class="cm">/* Type of transaction read/write */</span>
<span class="cp">#define IFC_NOR_ERATTR0_ERTYPE_READ	0x00000001</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Transfer Error Attribute Register-2 (NOR_ERATTR2)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_NOR_ERATTR2_ER_NUM_PHASE_EXP	0x000F0000</span>
<span class="cp">#define IFC_NOR_ERATTR2_ER_NUM_PHASE_PER	0x00000F00</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Control Register (NORCR)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_NORCR_MASK			0x0F0F0000</span>
<span class="cm">/* No. of Address/Data Phase */</span>
<span class="cp">#define IFC_NORCR_NUM_PHASE_MASK	0x0F000000</span>
<span class="cp">#define IFC_NORCR_NUM_PHASE_SHIFT	24</span>
<span class="cp">#define IFC_NORCR_NUM_PHASE(n)	((n-1) &lt;&lt; IFC_NORCR_NUM_PHASE_SHIFT)</span>
<span class="cm">/* Sequence Timeout Count */</span>
<span class="cp">#define IFC_NORCR_STOCNT_MASK		0x000F0000</span>
<span class="cp">#define IFC_NORCR_STOCNT_SHIFT		16</span>
<span class="cp">#define IFC_NORCR_STOCNT(n)	((__ilog2(n) - 8) &lt;&lt; IFC_NORCR_STOCNT_SHIFT)</span>

<span class="cm">/*</span>
<span class="cm"> * GPCM Machine specific registers</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * GPCM Event and Error Status Register (GPCM_EVTER_STAT)</span>
<span class="cm"> */</span>
<span class="cm">/* Timeout error */</span>
<span class="cp">#define IFC_GPCM_EVTER_STAT_TOER	0x04000000</span>
<span class="cm">/* Parity error */</span>
<span class="cp">#define IFC_GPCM_EVTER_STAT_PER		0x01000000</span>

<span class="cm">/*</span>
<span class="cm"> * GPCM Event and Error Enable Register (GPCM_EVTER_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Timeout error enable */</span>
<span class="cp">#define IFC_GPCM_EVTER_EN_TOER_EN	0x04000000</span>
<span class="cm">/* Parity error enable */</span>
<span class="cp">#define IFC_GPCM_EVTER_EN_PER_EN	0x01000000</span>

<span class="cm">/*</span>
<span class="cm"> * GPCM Event and Error Interrupt Enable Register (GPCM_EVTER_INTR_EN)</span>
<span class="cm"> */</span>
<span class="cm">/* Enable Interrupt for timeout error */</span>
<span class="cp">#define IFC_GPCM_EEIER_TOERIR_EN	0x04000000</span>
<span class="cm">/* Enable Interrupt for Parity error */</span>
<span class="cp">#define IFC_GPCM_EEIER_PERIR_EN		0x01000000</span>

<span class="cm">/*</span>
<span class="cm"> * GPCM Transfer Error Attribute Register-0 (GPCM_ERATTR0)</span>
<span class="cm"> */</span>
<span class="cm">/* Source ID for error transaction */</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERSRCID	0xFF000000</span>
<span class="cm">/* AXI ID for error transaction */</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERAID		0x000FF000</span>
<span class="cm">/* Chip select corresponds to GPCM error */</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERCS_CS0	0x00000000</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERCS_CS1	0x00000040</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERCS_CS2	0x00000080</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERCS_CS3	0x000000C0</span>
<span class="cm">/* Type of transaction read/Write */</span>
<span class="cp">#define IFC_GPCM_ERATTR0_ERTYPE_READ	0x00000001</span>

<span class="cm">/*</span>
<span class="cm"> * GPCM Transfer Error Attribute Register-2 (GPCM_ERATTR2)</span>
<span class="cm"> */</span>
<span class="cm">/* On which beat of address/data parity error is observed */</span>
<span class="cp">#define IFC_GPCM_ERATTR2_PERR_BEAT		0x00000C00</span>
<span class="cm">/* Parity Error on byte */</span>
<span class="cp">#define IFC_GPCM_ERATTR2_PERR_BYTE		0x000000F0</span>
<span class="cm">/* Parity Error reported in addr or data phase */</span>
<span class="cp">#define IFC_GPCM_ERATTR2_PERR_DATA_PHASE	0x00000001</span>

<span class="cm">/*</span>
<span class="cm"> * GPCM Status Register (GPCM_STAT)</span>
<span class="cm"> */</span>
<span class="cp">#define IFC_GPCM_STAT_BSY		0x80000000  </span><span class="cm">/* GPCM is busy */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * IFC Controller NAND Machine registers</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fsl_ifc_nand</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">ncfgr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res1</span><span class="p">[</span><span class="mh">0x4</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_fcr0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_fcr1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res2</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">row0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res3</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">col0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res4</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">row1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res5</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">col1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res6</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">row2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res7</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">col2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res8</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">row3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res9</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">col3</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res10</span><span class="p">[</span><span class="mh">0x24</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_fbcr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res11</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_fir0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_fir1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_fir2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res12</span><span class="p">[</span><span class="mh">0x10</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_csel</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res13</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nandseq_strt</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res14</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_evter_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res15</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">pgrdcmpl_evt_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res16</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_evter_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res17</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_evter_intr_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res18</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_erattr0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_erattr1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res19</span><span class="p">[</span><span class="mh">0x10</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_fsr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res20</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_eccstat</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">res21</span><span class="p">[</span><span class="mh">0x20</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nanndcr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res22</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nand_autoboot_trgr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res23</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nand_mdr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res24</span><span class="p">[</span><span class="mh">0x5C</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IFC controller NOR Machine registers</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fsl_ifc_nor</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">nor_evter_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res1</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nor_evter_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res2</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nor_evter_intr_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res3</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">nor_erattr0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nor_erattr1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">nor_erattr2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res4</span><span class="p">[</span><span class="mh">0x4</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">norcr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res5</span><span class="p">[</span><span class="mh">0xEF</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IFC controller GPCM Machine registers</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fsl_ifc_gpcm</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">gpcm_evter_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res1</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">gpcm_evter_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res2</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">gpcm_evter_intr_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res3</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">gpcm_erattr0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">gpcm_erattr1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">gpcm_erattr2</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">gpcm_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res4</span><span class="p">[</span><span class="mh">0x1F3</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * IFC Controller Registers</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">fsl_ifc_regs</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">ifc_rev</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res1</span><span class="p">[</span><span class="mh">0x3</span><span class="p">];</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__be32</span> <span class="n">cspr</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">res2</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">cspr_cs</span><span class="p">[</span><span class="n">FSL_IFC_BANK_COUNT</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">res3</span><span class="p">[</span><span class="mh">0x18</span><span class="p">];</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__be32</span> <span class="n">amask</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">res4</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">amask_cs</span><span class="p">[</span><span class="n">FSL_IFC_BANK_COUNT</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">res5</span><span class="p">[</span><span class="mh">0x18</span><span class="p">];</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__be32</span> <span class="n">csor</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">res6</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">csor_cs</span><span class="p">[</span><span class="n">FSL_IFC_BANK_COUNT</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">res7</span><span class="p">[</span><span class="mh">0x18</span><span class="p">];</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="n">__be32</span> <span class="n">ftim</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
		<span class="n">u32</span> <span class="n">res8</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">ftim_cs</span><span class="p">[</span><span class="n">FSL_IFC_BANK_COUNT</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">res9</span><span class="p">[</span><span class="mh">0x60</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">rb_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res10</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">ifc_gcr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res11</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">cm_evter_stat</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res12</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">cm_evter_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res13</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">cm_evter_intr_en</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res14</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">cm_erattr0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">cm_erattr1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res15</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">ifc_ccr</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">ifc_csr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">res16</span><span class="p">[</span><span class="mh">0x2EB</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">fsl_ifc_nand</span> <span class="n">ifc_nand</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">fsl_ifc_nor</span> <span class="n">ifc_nor</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">fsl_ifc_gpcm</span> <span class="n">ifc_gpcm</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">convert_ifc_address</span><span class="p">(</span><span class="n">phys_addr_t</span> <span class="n">addr_base</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">fsl_ifc_find</span><span class="p">(</span><span class="n">phys_addr_t</span> <span class="n">addr_base</span><span class="p">);</span>

<span class="cm">/* overview of the fsl ifc controller */</span>

<span class="k">struct</span> <span class="n">fsl_ifc_ctrl</span> <span class="p">{</span>
	<span class="cm">/* device info */</span>
	<span class="k">struct</span> <span class="n">device</span>			<span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">fsl_ifc_regs</span> <span class="n">__iomem</span>	<span class="o">*</span><span class="n">regs</span><span class="p">;</span>
	<span class="kt">int</span>				<span class="n">irq</span><span class="p">;</span>
	<span class="kt">int</span>				<span class="n">nand_irq</span><span class="p">;</span>
	<span class="n">spinlock_t</span>			<span class="n">lock</span><span class="p">;</span>
	<span class="kt">void</span>				<span class="o">*</span><span class="n">nand</span><span class="p">;</span>

	<span class="n">u32</span> <span class="n">nand_stat</span><span class="p">;</span>
	<span class="n">wait_queue_head_t</span> <span class="n">nand_wait</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">fsl_ifc_ctrl</span> <span class="o">*</span><span class="n">fsl_ifc_ctrl_dev</span><span class="p">;</span>


<span class="cp">#endif </span><span class="cm">/* __ASM_FSL_IFC_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
