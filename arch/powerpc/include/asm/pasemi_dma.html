<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › pasemi_dma.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>pasemi_dma.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2006-2008 PA Semi, Inc</span>
<span class="cm"> *</span>
<span class="cm"> * Hardware register layout and descriptor formats for the on-board</span>
<span class="cm"> * DMA engine on PA Semi PWRficient. Used by ethernet, function and security</span>
<span class="cm"> * drivers.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA</span>
<span class="cm"> */</span>

<span class="cp">#ifndef ASM_PASEMI_DMA_H</span>
<span class="cp">#define ASM_PASEMI_DMA_H</span>

<span class="cm">/* status register layout in IOB region, at 0xfb800000 */</span>
<span class="k">struct</span> <span class="n">pasdma_status</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">rx_sta</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>		<span class="cm">/* RX channel status */</span>
	<span class="n">u64</span> <span class="n">tx_sta</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>		<span class="cm">/* TX channel status */</span>
<span class="p">};</span>


<span class="cm">/* All these registers live in the PCI configuration space for the DMA PCI</span>
<span class="cm"> * device. Use the normal PCI config access functions for them.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="p">{</span>
	<span class="n">PAS_DMA_CAP_TXCH</span>  <span class="o">=</span> <span class="mh">0x44</span><span class="p">,</span>	<span class="cm">/* Transmit Channel Info      */</span>
	<span class="n">PAS_DMA_CAP_RXCH</span>  <span class="o">=</span> <span class="mh">0x48</span><span class="p">,</span>	<span class="cm">/* Transmit Channel Info      */</span>
	<span class="n">PAS_DMA_CAP_IFI</span>	  <span class="o">=</span> <span class="mh">0x4c</span><span class="p">,</span>	<span class="cm">/* Interface Info	      */</span>
	<span class="n">PAS_DMA_COM_TXCMD</span> <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>	<span class="cm">/* Transmit Command Register  */</span>
	<span class="n">PAS_DMA_COM_TXSTA</span> <span class="o">=</span> <span class="mh">0x104</span><span class="p">,</span>	<span class="cm">/* Transmit Status Register   */</span>
	<span class="n">PAS_DMA_COM_RXCMD</span> <span class="o">=</span> <span class="mh">0x108</span><span class="p">,</span>	<span class="cm">/* Receive Command Register   */</span>
	<span class="n">PAS_DMA_COM_RXSTA</span> <span class="o">=</span> <span class="mh">0x10c</span><span class="p">,</span>	<span class="cm">/* Receive Status Register    */</span>
	<span class="n">PAS_DMA_COM_CFG</span>   <span class="o">=</span> <span class="mh">0x114</span><span class="p">,</span>	<span class="cm">/* Common config reg	      */</span>
	<span class="n">PAS_DMA_TXF_SFLG0</span> <span class="o">=</span> <span class="mh">0x140</span><span class="p">,</span>	<span class="cm">/* Set flags                  */</span>
	<span class="n">PAS_DMA_TXF_SFLG1</span> <span class="o">=</span> <span class="mh">0x144</span><span class="p">,</span>	<span class="cm">/* Set flags                  */</span>
	<span class="n">PAS_DMA_TXF_CFLG0</span> <span class="o">=</span> <span class="mh">0x148</span><span class="p">,</span>	<span class="cm">/* Set flags                  */</span>
	<span class="n">PAS_DMA_TXF_CFLG1</span> <span class="o">=</span> <span class="mh">0x14c</span><span class="p">,</span>	<span class="cm">/* Set flags                  */</span>
<span class="p">};</span>


<span class="cp">#define PAS_DMA_CAP_TXCH_TCHN_M	0x00ff0000 </span><span class="cm">/* # of TX channels */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_CAP_TXCH_TCHN_S	16</span>

<span class="cp">#define PAS_DMA_CAP_RXCH_RCHN_M	0x00ff0000 </span><span class="cm">/* # of RX channels */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_CAP_RXCH_RCHN_S	16</span>

<span class="cp">#define PAS_DMA_CAP_IFI_IOFF_M	0xff000000 </span><span class="cm">/* Cfg reg for intf pointers */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_CAP_IFI_IOFF_S	24</span>
<span class="cp">#define PAS_DMA_CAP_IFI_NIN_M	0x00ff0000 </span><span class="cm">/* # of interfaces */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_CAP_IFI_NIN_S	16</span>

<span class="cp">#define PAS_DMA_COM_TXCMD_EN	0x00000001 </span><span class="cm">/* enable */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_COM_TXSTA_ACT	0x00000001 </span><span class="cm">/* active */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_COM_RXCMD_EN	0x00000001 </span><span class="cm">/* enable */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_COM_RXSTA_ACT	0x00000001 </span><span class="cm">/* active */</span><span class="cp"></span>


<span class="cm">/* Per-interface and per-channel registers */</span>
<span class="cp">#define _PAS_DMA_RXINT_STRIDE		0x20</span>
<span class="cp">#define PAS_DMA_RXINT_RCMDSTA(i)	(0x200+(i)*_PAS_DMA_RXINT_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_EN	0x00000001</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_ST	0x00000002</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_MBT	0x00000008</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_MDR	0x00000010</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_MOO	0x00000020</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_MBP	0x00000040</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_BT	0x00000800</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_DR	0x00001000</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_OO	0x00002000</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_BP	0x00004000</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_TB	0x00008000</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_ACT	0x00010000</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_DROPS_M	0xfffe0000</span>
<span class="cp">#define    PAS_DMA_RXINT_RCMDSTA_DROPS_S	17</span>
<span class="cp">#define PAS_DMA_RXINT_CFG(i)		(0x204+(i)*_PAS_DMA_RXINT_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_RBP	0x80000000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_ITRR	0x40000000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_DHL_M	0x07000000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_DHL_S	24</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_DHL(x)	(((x) &lt;&lt; PAS_DMA_RXINT_CFG_DHL_S) &amp; \</span>
<span class="cp">					 PAS_DMA_RXINT_CFG_DHL_M)</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_ITR	0x00400000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_LW		0x00200000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_L2		0x00100000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_HEN	0x00080000</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_WIF	0x00000002</span>
<span class="cp">#define    PAS_DMA_RXINT_CFG_WIL	0x00000001</span>

<span class="cp">#define PAS_DMA_RXINT_INCR(i)		(0x210+(i)*_PAS_DMA_RXINT_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXINT_INCR_INCR_M	0x0000ffff</span>
<span class="cp">#define    PAS_DMA_RXINT_INCR_INCR_S	0</span>
<span class="cp">#define    PAS_DMA_RXINT_INCR_INCR(x)	((x) &amp; 0x0000ffff)</span>
<span class="cp">#define PAS_DMA_RXINT_BASEL(i)		(0x218+(i)*_PAS_DMA_RXINT_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXINT_BASEL_BRBL(x)	((x) &amp; ~0x3f)</span>
<span class="cp">#define PAS_DMA_RXINT_BASEU(i)		(0x21c+(i)*_PAS_DMA_RXINT_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXINT_BASEU_BRBH(x)	((x) &amp; 0xfff)</span>
<span class="cp">#define    PAS_DMA_RXINT_BASEU_SIZ_M	0x3fff0000	</span><span class="cm">/* # of cache lines worth of buffer ring */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_RXINT_BASEU_SIZ_S	16		</span><span class="cm">/* 0 = 16K */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_RXINT_BASEU_SIZ(x)	(((x) &lt;&lt; PAS_DMA_RXINT_BASEU_SIZ_S) &amp; \</span>
<span class="cp">					 PAS_DMA_RXINT_BASEU_SIZ_M)</span>


<span class="cp">#define _PAS_DMA_TXCHAN_STRIDE	0x20    </span><span class="cm">/* Size per channel		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_TCMDSTA	0x300	</span><span class="cm">/* Command / Status		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_CFG	0x304	</span><span class="cm">/* Configuration		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_DSCRBU	0x308	</span><span class="cm">/* Descriptor BU Allocation	*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_INCR	0x310	</span><span class="cm">/* Descriptor increment		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_CNT	0x314	</span><span class="cm">/* Descriptor count/offset	*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_BASEL	0x318	</span><span class="cm">/* Descriptor ring base (low)	*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_TXCHAN_BASEU	0x31c	</span><span class="cm">/*			(high)	*/</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_TXCHAN_TCMDSTA(c) (0x300+(c)*_PAS_DMA_TXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_EN	0x00000001	</span><span class="cm">/* Enabled */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_ST	0x00000002	</span><span class="cm">/* Stop interface */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_ACT	0x00010000	</span><span class="cm">/* Active */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_SZ	0x00000800</span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_DB	0x00000400</span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_DE	0x00000200</span>
<span class="cp">#define    PAS_DMA_TXCHAN_TCMDSTA_DA	0x00000100</span>
<span class="cp">#define PAS_DMA_TXCHAN_CFG(c)     (0x304+(c)*_PAS_DMA_TXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TY_IFACE	0x00000000	</span><span class="cm">/* Type = interface */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TY_COPY	0x00000001	</span><span class="cm">/* Type = copy only */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TY_FUNC	0x00000002	</span><span class="cm">/* Type = function */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TY_XOR	0x00000003	</span><span class="cm">/* Type = xor only */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TATTR_M	0x0000003c</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TATTR_S	2</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TATTR(x)	(((x) &lt;&lt; PAS_DMA_TXCHAN_CFG_TATTR_S) &amp; \</span>
<span class="cp">					 PAS_DMA_TXCHAN_CFG_TATTR_M)</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_LPDQ	0x00000800</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_LPSQ	0x00000400</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_WT_M	0x000003c0</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_WT_S	6</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_WT(x)	(((x) &lt;&lt; PAS_DMA_TXCHAN_CFG_WT_S) &amp; \</span>
<span class="cp">					 PAS_DMA_TXCHAN_CFG_WT_M)</span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TRD	0x00010000	</span><span class="cm">/* translate data */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_TRR	0x00008000	</span><span class="cm">/* translate rings */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_UP	0x00004000	</span><span class="cm">/* update tx descr when sent */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_CL	0x00002000	</span><span class="cm">/* Clean last line */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_CFG_CF	0x00001000	</span><span class="cm">/* Clean first line */</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_TXCHAN_INCR(c)    (0x310+(c)*_PAS_DMA_TXCHAN_STRIDE)</span>
<span class="cp">#define PAS_DMA_TXCHAN_BASEL(c)   (0x318+(c)*_PAS_DMA_TXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEL_BRBL_M	0xffffffc0</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEL_BRBL_S	0</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEL_BRBL(x)	(((x) &lt;&lt; PAS_DMA_TXCHAN_BASEL_BRBL_S) &amp; \</span>
<span class="cp">					 PAS_DMA_TXCHAN_BASEL_BRBL_M)</span>
<span class="cp">#define PAS_DMA_TXCHAN_BASEU(c)   (0x31c+(c)*_PAS_DMA_TXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEU_BRBH_M	0x00000fff</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEU_BRBH_S	0</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEU_BRBH(x)	(((x) &lt;&lt; PAS_DMA_TXCHAN_BASEU_BRBH_S) &amp; \</span>
<span class="cp">					 PAS_DMA_TXCHAN_BASEU_BRBH_M)</span>
<span class="cm">/* # of cache lines worth of buffer ring */</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEU_SIZ_M	0x3fff0000</span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEU_SIZ_S	16		</span><span class="cm">/* 0 = 16K */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_TXCHAN_BASEU_SIZ(x)	(((x) &lt;&lt; PAS_DMA_TXCHAN_BASEU_SIZ_S) &amp; \</span>
<span class="cp">					 PAS_DMA_TXCHAN_BASEU_SIZ_M)</span>

<span class="cp">#define _PAS_DMA_RXCHAN_STRIDE	0x20    </span><span class="cm">/* Size per channel		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_RXCHAN_CCMDSTA	0x800	</span><span class="cm">/* Command / Status		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_RXCHAN_CFG	0x804	</span><span class="cm">/* Configuration		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_RXCHAN_INCR	0x810	</span><span class="cm">/* Descriptor increment		*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_RXCHAN_CNT	0x814	</span><span class="cm">/* Descriptor count/offset	*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_RXCHAN_BASEL	0x818	</span><span class="cm">/* Descriptor ring base (low)	*/</span><span class="cp"></span>
<span class="cp">#define _PAS_DMA_RXCHAN_BASEU	0x81c	</span><span class="cm">/*			(high)	*/</span><span class="cp"></span>
<span class="cp">#define PAS_DMA_RXCHAN_CCMDSTA(c) (0x800+(c)*_PAS_DMA_RXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_EN	0x00000001	</span><span class="cm">/* Enabled */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_ST	0x00000002	</span><span class="cm">/* Stop interface */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_ACT	0x00010000	</span><span class="cm">/* Active */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_DU	0x00020000</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_OD	0x00002000</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_FD	0x00001000</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CCMDSTA_DT	0x00000800</span>
<span class="cp">#define PAS_DMA_RXCHAN_CFG(c)     (0x804+(c)*_PAS_DMA_RXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CFG_CTR	0x00000400</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CFG_HBU_M	0x00000380</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CFG_HBU_S	7</span>
<span class="cp">#define    PAS_DMA_RXCHAN_CFG_HBU(x)	(((x) &lt;&lt; PAS_DMA_RXCHAN_CFG_HBU_S) &amp; \</span>
<span class="cp">					 PAS_DMA_RXCHAN_CFG_HBU_M)</span>
<span class="cp">#define PAS_DMA_RXCHAN_INCR(c)    (0x810+(c)*_PAS_DMA_RXCHAN_STRIDE)</span>
<span class="cp">#define PAS_DMA_RXCHAN_BASEL(c)   (0x818+(c)*_PAS_DMA_RXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEL_BRBL_M	0xffffffc0</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEL_BRBL_S	0</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEL_BRBL(x)	(((x) &lt;&lt; PAS_DMA_RXCHAN_BASEL_BRBL_S) &amp; \</span>
<span class="cp">					 PAS_DMA_RXCHAN_BASEL_BRBL_M)</span>
<span class="cp">#define PAS_DMA_RXCHAN_BASEU(c)   (0x81c+(c)*_PAS_DMA_RXCHAN_STRIDE)</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEU_BRBH_M	0x00000fff</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEU_BRBH_S	0</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEU_BRBH(x)	(((x) &lt;&lt; PAS_DMA_RXCHAN_BASEU_BRBH_S) &amp; \</span>
<span class="cp">					 PAS_DMA_RXCHAN_BASEU_BRBH_M)</span>
<span class="cm">/* # of cache lines worth of buffer ring */</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEU_SIZ_M	0x3fff0000</span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEU_SIZ_S	16		</span><span class="cm">/* 0 = 16K */</span><span class="cp"></span>
<span class="cp">#define    PAS_DMA_RXCHAN_BASEU_SIZ(x)	(((x) &lt;&lt; PAS_DMA_RXCHAN_BASEU_SIZ_S) &amp; \</span>
<span class="cp">					 PAS_DMA_RXCHAN_BASEU_SIZ_M)</span>

<span class="cp">#define    PAS_STATUS_PCNT_M		0x000000000000ffffull</span>
<span class="cp">#define    PAS_STATUS_PCNT_S		0</span>
<span class="cp">#define    PAS_STATUS_DCNT_M		0x00000000ffff0000ull</span>
<span class="cp">#define    PAS_STATUS_DCNT_S		16</span>
<span class="cp">#define    PAS_STATUS_BPCNT_M		0x0000ffff00000000ull</span>
<span class="cp">#define    PAS_STATUS_BPCNT_S		32</span>
<span class="cp">#define    PAS_STATUS_CAUSE_M		0xf000000000000000ull</span>
<span class="cp">#define    PAS_STATUS_TIMER		0x1000000000000000ull</span>
<span class="cp">#define    PAS_STATUS_ERROR		0x2000000000000000ull</span>
<span class="cp">#define    PAS_STATUS_SOFT		0x4000000000000000ull</span>
<span class="cp">#define    PAS_STATUS_INT		0x8000000000000000ull</span>

<span class="cp">#define PAS_IOB_COM_PKTHDRCNT		0x120</span>
<span class="cp">#define    PAS_IOB_COM_PKTHDRCNT_PKTHDR1_M	0x0fff0000</span>
<span class="cp">#define    PAS_IOB_COM_PKTHDRCNT_PKTHDR1_S	16</span>
<span class="cp">#define    PAS_IOB_COM_PKTHDRCNT_PKTHDR0_M	0x00000fff</span>
<span class="cp">#define    PAS_IOB_COM_PKTHDRCNT_PKTHDR0_S	0</span>

<span class="cp">#define PAS_IOB_DMA_RXCH_CFG(i)		(0x1100 + (i)*4)</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_CFG_CNTTH_M		0x00000fff</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_CFG_CNTTH_S		0</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_CFG_CNTTH(x)	(((x) &lt;&lt; PAS_IOB_DMA_RXCH_CFG_CNTTH_S) &amp; \</span>
<span class="cp">						 PAS_IOB_DMA_RXCH_CFG_CNTTH_M)</span>
<span class="cp">#define PAS_IOB_DMA_TXCH_CFG(i)		(0x1200 + (i)*4)</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_CFG_CNTTH_M		0x00000fff</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_CFG_CNTTH_S		0</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_CFG_CNTTH(x)	(((x) &lt;&lt; PAS_IOB_DMA_TXCH_CFG_CNTTH_S) &amp; \</span>
<span class="cp">						 PAS_IOB_DMA_TXCH_CFG_CNTTH_M)</span>
<span class="cp">#define PAS_IOB_DMA_RXCH_STAT(i)	(0x1300 + (i)*4)</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_STAT_INTGEN	0x00001000</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_STAT_CNTDEL_M	0x00000fff</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_STAT_CNTDEL_S	0</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_STAT_CNTDEL(x)	(((x) &lt;&lt; PAS_IOB_DMA_RXCH_STAT_CNTDEL_S) &amp;\</span>
<span class="cp">						 PAS_IOB_DMA_RXCH_STAT_CNTDEL_M)</span>
<span class="cp">#define PAS_IOB_DMA_TXCH_STAT(i)	(0x1400 + (i)*4)</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_STAT_INTGEN	0x00001000</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_STAT_CNTDEL_M	0x00000fff</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_STAT_CNTDEL_S	0</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_STAT_CNTDEL(x)	(((x) &lt;&lt; PAS_IOB_DMA_TXCH_STAT_CNTDEL_S) &amp;\</span>
<span class="cp">						 PAS_IOB_DMA_TXCH_STAT_CNTDEL_M)</span>
<span class="cp">#define PAS_IOB_DMA_RXCH_RESET(i)	(0x1500 + (i)*4)</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_PCNT_M	0xffff0000</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_PCNT_S	16</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_PCNT(x)	(((x) &lt;&lt; PAS_IOB_DMA_RXCH_RESET_PCNT_S) &amp; \</span>
<span class="cp">						 PAS_IOB_DMA_RXCH_RESET_PCNT_M)</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_PCNTRST	0x00000020</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_DCNTRST	0x00000010</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_TINTC		0x00000008</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_DINTC		0x00000004</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_SINTC		0x00000002</span>
<span class="cp">#define    PAS_IOB_DMA_RXCH_RESET_PINTC		0x00000001</span>
<span class="cp">#define PAS_IOB_DMA_TXCH_RESET(i)	(0x1600 + (i)*4)</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_PCNT_M	0xffff0000</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_PCNT_S	16</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_PCNT(x)	(((x) &lt;&lt; PAS_IOB_DMA_TXCH_RESET_PCNT_S) &amp; \</span>
<span class="cp">						 PAS_IOB_DMA_TXCH_RESET_PCNT_M)</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_PCNTRST	0x00000020</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_DCNTRST	0x00000010</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_TINTC		0x00000008</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_DINTC		0x00000004</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_SINTC		0x00000002</span>
<span class="cp">#define    PAS_IOB_DMA_TXCH_RESET_PINTC		0x00000001</span>

<span class="cp">#define PAS_IOB_DMA_COM_TIMEOUTCFG		0x1700</span>
<span class="cp">#define    PAS_IOB_DMA_COM_TIMEOUTCFG_TCNT_M	0x00ffffff</span>
<span class="cp">#define    PAS_IOB_DMA_COM_TIMEOUTCFG_TCNT_S	0</span>
<span class="cp">#define    PAS_IOB_DMA_COM_TIMEOUTCFG_TCNT(x)	(((x) &lt;&lt; PAS_IOB_DMA_COM_TIMEOUTCFG_TCNT_S) &amp; \</span>
<span class="cp">						 PAS_IOB_DMA_COM_TIMEOUTCFG_TCNT_M)</span>

<span class="cm">/* Transmit descriptor fields */</span>
<span class="cp">#define	XCT_MACTX_T		0x8000000000000000ull</span>
<span class="cp">#define	XCT_MACTX_ST		0x4000000000000000ull</span>
<span class="cp">#define XCT_MACTX_NORES		0x0000000000000000ull</span>
<span class="cp">#define XCT_MACTX_8BRES		0x1000000000000000ull</span>
<span class="cp">#define XCT_MACTX_24BRES	0x2000000000000000ull</span>
<span class="cp">#define XCT_MACTX_40BRES	0x3000000000000000ull</span>
<span class="cp">#define XCT_MACTX_I		0x0800000000000000ull</span>
<span class="cp">#define XCT_MACTX_O		0x0400000000000000ull</span>
<span class="cp">#define XCT_MACTX_E		0x0200000000000000ull</span>
<span class="cp">#define XCT_MACTX_VLAN_M	0x0180000000000000ull</span>
<span class="cp">#define XCT_MACTX_VLAN_NOP	0x0000000000000000ull</span>
<span class="cp">#define XCT_MACTX_VLAN_REMOVE	0x0080000000000000ull</span>
<span class="cp">#define XCT_MACTX_VLAN_INSERT   0x0100000000000000ull</span>
<span class="cp">#define XCT_MACTX_VLAN_REPLACE  0x0180000000000000ull</span>
<span class="cp">#define XCT_MACTX_CRC_M		0x0060000000000000ull</span>
<span class="cp">#define XCT_MACTX_CRC_NOP	0x0000000000000000ull</span>
<span class="cp">#define XCT_MACTX_CRC_INSERT	0x0020000000000000ull</span>
<span class="cp">#define XCT_MACTX_CRC_PAD	0x0040000000000000ull</span>
<span class="cp">#define XCT_MACTX_CRC_REPLACE	0x0060000000000000ull</span>
<span class="cp">#define XCT_MACTX_SS		0x0010000000000000ull</span>
<span class="cp">#define XCT_MACTX_LLEN_M	0x00007fff00000000ull</span>
<span class="cp">#define XCT_MACTX_LLEN_S	32ull</span>
<span class="cp">#define XCT_MACTX_LLEN(x)	((((long)(x)) &lt;&lt; XCT_MACTX_LLEN_S) &amp; \</span>
<span class="cp">				 XCT_MACTX_LLEN_M)</span>
<span class="cp">#define XCT_MACTX_IPH_M		0x00000000f8000000ull</span>
<span class="cp">#define XCT_MACTX_IPH_S		27ull</span>
<span class="cp">#define XCT_MACTX_IPH(x)	((((long)(x)) &lt;&lt; XCT_MACTX_IPH_S) &amp; \</span>
<span class="cp">				 XCT_MACTX_IPH_M)</span>
<span class="cp">#define XCT_MACTX_IPO_M		0x0000000007c00000ull</span>
<span class="cp">#define XCT_MACTX_IPO_S		22ull</span>
<span class="cp">#define XCT_MACTX_IPO(x)	((((long)(x)) &lt;&lt; XCT_MACTX_IPO_S) &amp; \</span>
<span class="cp">				 XCT_MACTX_IPO_M)</span>
<span class="cp">#define XCT_MACTX_CSUM_M	0x0000000000000060ull</span>
<span class="cp">#define XCT_MACTX_CSUM_NOP	0x0000000000000000ull</span>
<span class="cp">#define XCT_MACTX_CSUM_TCP	0x0000000000000040ull</span>
<span class="cp">#define XCT_MACTX_CSUM_UDP	0x0000000000000060ull</span>
<span class="cp">#define XCT_MACTX_V6		0x0000000000000010ull</span>
<span class="cp">#define XCT_MACTX_C		0x0000000000000004ull</span>
<span class="cp">#define XCT_MACTX_AL2		0x0000000000000002ull</span>

<span class="cm">/* Receive descriptor fields */</span>
<span class="cp">#define	XCT_MACRX_T		0x8000000000000000ull</span>
<span class="cp">#define	XCT_MACRX_ST		0x4000000000000000ull</span>
<span class="cp">#define XCT_MACRX_RR_M		0x3000000000000000ull</span>
<span class="cp">#define XCT_MACRX_RR_NORES	0x0000000000000000ull</span>
<span class="cp">#define XCT_MACRX_RR_8BRES	0x1000000000000000ull</span>
<span class="cp">#define XCT_MACRX_O		0x0400000000000000ull</span>
<span class="cp">#define XCT_MACRX_E		0x0200000000000000ull</span>
<span class="cp">#define XCT_MACRX_FF		0x0100000000000000ull</span>
<span class="cp">#define XCT_MACRX_PF		0x0080000000000000ull</span>
<span class="cp">#define XCT_MACRX_OB		0x0040000000000000ull</span>
<span class="cp">#define XCT_MACRX_OD		0x0020000000000000ull</span>
<span class="cp">#define XCT_MACRX_FS		0x0010000000000000ull</span>
<span class="cp">#define XCT_MACRX_NB_M		0x000fc00000000000ull</span>
<span class="cp">#define XCT_MACRX_NB_S		46ULL</span>
<span class="cp">#define XCT_MACRX_NB(x)		((((long)(x)) &lt;&lt; XCT_MACRX_NB_S) &amp; \</span>
<span class="cp">				 XCT_MACRX_NB_M)</span>
<span class="cp">#define XCT_MACRX_LLEN_M	0x00003fff00000000ull</span>
<span class="cp">#define XCT_MACRX_LLEN_S	32ULL</span>
<span class="cp">#define XCT_MACRX_LLEN(x)	((((long)(x)) &lt;&lt; XCT_MACRX_LLEN_S) &amp; \</span>
<span class="cp">				 XCT_MACRX_LLEN_M)</span>
<span class="cp">#define XCT_MACRX_CRC		0x0000000080000000ull</span>
<span class="cp">#define XCT_MACRX_LEN_M		0x0000000060000000ull</span>
<span class="cp">#define XCT_MACRX_LEN_TOOSHORT	0x0000000020000000ull</span>
<span class="cp">#define XCT_MACRX_LEN_BELOWMIN	0x0000000040000000ull</span>
<span class="cp">#define XCT_MACRX_LEN_TRUNC	0x0000000060000000ull</span>
<span class="cp">#define XCT_MACRX_CAST_M	0x0000000018000000ull</span>
<span class="cp">#define XCT_MACRX_CAST_UNI	0x0000000000000000ull</span>
<span class="cp">#define XCT_MACRX_CAST_MULTI	0x0000000008000000ull</span>
<span class="cp">#define XCT_MACRX_CAST_BROAD	0x0000000010000000ull</span>
<span class="cp">#define XCT_MACRX_CAST_PAUSE	0x0000000018000000ull</span>
<span class="cp">#define XCT_MACRX_VLC_M		0x0000000006000000ull</span>
<span class="cp">#define XCT_MACRX_FM		0x0000000001000000ull</span>
<span class="cp">#define XCT_MACRX_HTY_M		0x0000000000c00000ull</span>
<span class="cp">#define XCT_MACRX_HTY_IPV4_OK	0x0000000000000000ull</span>
<span class="cp">#define XCT_MACRX_HTY_IPV6 	0x0000000000400000ull</span>
<span class="cp">#define XCT_MACRX_HTY_IPV4_BAD	0x0000000000800000ull</span>
<span class="cp">#define XCT_MACRX_HTY_NONIP	0x0000000000c00000ull</span>
<span class="cp">#define XCT_MACRX_IPP_M		0x00000000003f0000ull</span>
<span class="cp">#define XCT_MACRX_IPP_S		16</span>
<span class="cp">#define XCT_MACRX_CSUM_M	0x000000000000ffffull</span>
<span class="cp">#define XCT_MACRX_CSUM_S	0</span>

<span class="cp">#define XCT_PTR_T		0x8000000000000000ull</span>
<span class="cp">#define XCT_PTR_LEN_M		0x7ffff00000000000ull</span>
<span class="cp">#define XCT_PTR_LEN_S		44</span>
<span class="cp">#define XCT_PTR_LEN(x)		((((long)(x)) &lt;&lt; XCT_PTR_LEN_S) &amp; \</span>
<span class="cp">				 XCT_PTR_LEN_M)</span>
<span class="cp">#define XCT_PTR_ADDR_M		0x00000fffffffffffull</span>
<span class="cp">#define XCT_PTR_ADDR_S		0</span>
<span class="cp">#define XCT_PTR_ADDR(x)		((((long)(x)) &lt;&lt; XCT_PTR_ADDR_S) &amp; \</span>
<span class="cp">				 XCT_PTR_ADDR_M)</span>

<span class="cm">/* Receive interface 8byte result fields */</span>
<span class="cp">#define XCT_RXRES_8B_L4O_M	0xff00000000000000ull</span>
<span class="cp">#define XCT_RXRES_8B_L4O_S	56</span>
<span class="cp">#define XCT_RXRES_8B_RULE_M	0x00ffff0000000000ull</span>
<span class="cp">#define XCT_RXRES_8B_RULE_S	40</span>
<span class="cp">#define XCT_RXRES_8B_EVAL_M	0x000000ffff000000ull</span>
<span class="cp">#define XCT_RXRES_8B_EVAL_S	24</span>
<span class="cp">#define XCT_RXRES_8B_HTYPE_M	0x0000000000f00000ull</span>
<span class="cp">#define XCT_RXRES_8B_HASH_M	0x00000000000fffffull</span>
<span class="cp">#define XCT_RXRES_8B_HASH_S	0</span>

<span class="cm">/* Receive interface buffer fields */</span>
<span class="cp">#define XCT_RXB_LEN_M		0x0ffff00000000000ull</span>
<span class="cp">#define XCT_RXB_LEN_S		44</span>
<span class="cp">#define XCT_RXB_LEN(x)		((((long)(x)) &lt;&lt; XCT_RXB_LEN_S) &amp; \</span>
<span class="cp">				 XCT_RXB_LEN_M)</span>
<span class="cp">#define XCT_RXB_ADDR_M		0x00000fffffffffffull</span>
<span class="cp">#define XCT_RXB_ADDR_S		0</span>
<span class="cp">#define XCT_RXB_ADDR(x)		((((long)(x)) &lt;&lt; XCT_RXB_ADDR_S) &amp; \</span>
<span class="cp">				 XCT_RXB_ADDR_M)</span>

<span class="cm">/* Copy descriptor fields */</span>
<span class="cp">#define XCT_COPY_T		0x8000000000000000ull</span>
<span class="cp">#define XCT_COPY_ST		0x4000000000000000ull</span>
<span class="cp">#define XCT_COPY_RR_M		0x3000000000000000ull</span>
<span class="cp">#define XCT_COPY_RR_NORES	0x0000000000000000ull</span>
<span class="cp">#define XCT_COPY_RR_8BRES	0x1000000000000000ull</span>
<span class="cp">#define XCT_COPY_RR_24BRES	0x2000000000000000ull</span>
<span class="cp">#define XCT_COPY_RR_40BRES	0x3000000000000000ull</span>
<span class="cp">#define XCT_COPY_I		0x0800000000000000ull</span>
<span class="cp">#define XCT_COPY_O		0x0400000000000000ull</span>
<span class="cp">#define XCT_COPY_E		0x0200000000000000ull</span>
<span class="cp">#define XCT_COPY_STY_ZERO	0x01c0000000000000ull</span>
<span class="cp">#define XCT_COPY_DTY_PREF	0x0038000000000000ull</span>
<span class="cp">#define XCT_COPY_LLEN_M		0x0007ffff00000000ull</span>
<span class="cp">#define XCT_COPY_LLEN_S		32</span>
<span class="cp">#define XCT_COPY_LLEN(x)	((((long)(x)) &lt;&lt; XCT_COPY_LLEN_S) &amp; \</span>
<span class="cp">				 XCT_COPY_LLEN_M)</span>
<span class="cp">#define XCT_COPY_SE		0x0000000000000001ull</span>

<span class="cm">/* Function descriptor fields */</span>
<span class="cp">#define XCT_FUN_T		0x8000000000000000ull</span>
<span class="cp">#define XCT_FUN_ST		0x4000000000000000ull</span>
<span class="cp">#define XCT_FUN_RR_M		0x3000000000000000ull</span>
<span class="cp">#define XCT_FUN_RR_NORES	0x0000000000000000ull</span>
<span class="cp">#define XCT_FUN_RR_8BRES	0x1000000000000000ull</span>
<span class="cp">#define XCT_FUN_RR_24BRES	0x2000000000000000ull</span>
<span class="cp">#define XCT_FUN_RR_40BRES	0x3000000000000000ull</span>
<span class="cp">#define XCT_FUN_I		0x0800000000000000ull</span>
<span class="cp">#define XCT_FUN_O		0x0400000000000000ull</span>
<span class="cp">#define XCT_FUN_E		0x0200000000000000ull</span>
<span class="cp">#define XCT_FUN_FUN_M		0x01c0000000000000ull</span>
<span class="cp">#define XCT_FUN_FUN_S		54</span>
<span class="cp">#define XCT_FUN_FUN(x)		((((long)(x)) &lt;&lt; XCT_FUN_FUN_S) &amp; XCT_FUN_FUN_M)</span>
<span class="cp">#define XCT_FUN_CRM_M		0x0038000000000000ull</span>
<span class="cp">#define XCT_FUN_CRM_NOP		0x0000000000000000ull</span>
<span class="cp">#define XCT_FUN_CRM_SIG		0x0008000000000000ull</span>
<span class="cp">#define XCT_FUN_LLEN_M		0x0007ffff00000000ull</span>
<span class="cp">#define XCT_FUN_LLEN_S		32</span>
<span class="cp">#define XCT_FUN_LLEN(x)		((((long)(x)) &lt;&lt; XCT_FUN_LLEN_S) &amp; XCT_FUN_LLEN_M)</span>
<span class="cp">#define XCT_FUN_SHL_M		0x00000000f8000000ull</span>
<span class="cp">#define XCT_FUN_SHL_S		27</span>
<span class="cp">#define XCT_FUN_SHL(x)		((((long)(x)) &lt;&lt; XCT_FUN_SHL_S) &amp; XCT_FUN_SHL_M)</span>
<span class="cp">#define XCT_FUN_CHL_M		0x0000000007c00000ull</span>
<span class="cp">#define XCT_FUN_HSZ_M		0x00000000003c0000ull</span>
<span class="cp">#define XCT_FUN_ALG_M		0x0000000000038000ull</span>
<span class="cp">#define XCT_FUN_HP		0x0000000000004000ull</span>
<span class="cp">#define XCT_FUN_BCM_M		0x0000000000003800ull</span>
<span class="cp">#define XCT_FUN_BCP_M		0x0000000000000600ull</span>
<span class="cp">#define XCT_FUN_SIG_M		0x00000000000001f0ull</span>
<span class="cp">#define XCT_FUN_SIG_TCP4	0x0000000000000140ull</span>
<span class="cp">#define XCT_FUN_SIG_TCP6	0x0000000000000150ull</span>
<span class="cp">#define XCT_FUN_SIG_UDP4	0x0000000000000160ull</span>
<span class="cp">#define XCT_FUN_SIG_UDP6	0x0000000000000170ull</span>
<span class="cp">#define XCT_FUN_A		0x0000000000000008ull</span>
<span class="cp">#define XCT_FUN_C		0x0000000000000004ull</span>
<span class="cp">#define XCT_FUN_AL2		0x0000000000000002ull</span>
<span class="cp">#define XCT_FUN_SE		0x0000000000000001ull</span>

<span class="cm">/* Function descriptor 8byte result fields */</span>
<span class="cp">#define XCT_FUNRES_8B_CS_M	0x0000ffff00000000ull</span>
<span class="cp">#define XCT_FUNRES_8B_CS_S	32</span>
<span class="cp">#define XCT_FUNRES_8B_CRC_M	0x00000000ffffffffull</span>
<span class="cp">#define XCT_FUNRES_8B_CRC_S	0</span>

<span class="cm">/* Control descriptor fields */</span>
<span class="cp">#define CTRL_CMD_T		0x8000000000000000ull</span>
<span class="cp">#define CTRL_CMD_META_EVT	0x2000000000000000ull</span>
<span class="cp">#define CTRL_CMD_O		0x0400000000000000ull</span>
<span class="cp">#define CTRL_CMD_ETYPE_M	0x0038000000000000ull</span>
<span class="cp">#define CTRL_CMD_ETYPE_EXT	0x0000000000000000ull</span>
<span class="cp">#define CTRL_CMD_ETYPE_WSET	0x0020000000000000ull</span>
<span class="cp">#define CTRL_CMD_ETYPE_WCLR	0x0028000000000000ull</span>
<span class="cp">#define CTRL_CMD_ETYPE_SET	0x0030000000000000ull</span>
<span class="cp">#define CTRL_CMD_ETYPE_CLR	0x0038000000000000ull</span>
<span class="cp">#define CTRL_CMD_REG_M		0x000000000000007full</span>
<span class="cp">#define CTRL_CMD_REG_S		0</span>
<span class="cp">#define CTRL_CMD_REG(x)		((((long)(x)) &lt;&lt; CTRL_CMD_REG_S) &amp; \</span>
<span class="cp">				 CTRL_CMD_REG_M)</span>



<span class="cm">/* Prototypes for the shared DMA functions in the platform code. */</span>

<span class="cm">/* DMA TX Channel type. Right now only limitations used are event types 0/1,</span>
<span class="cm"> * for event-triggered DMA transactions.</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">pasemi_dmachan_type</span> <span class="p">{</span>
	<span class="n">RXCHAN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>		<span class="cm">/* Any RX chan */</span>
	<span class="n">TXCHAN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>		<span class="cm">/* Any TX chan */</span>
	<span class="n">TXCHAN_EVT0</span> <span class="o">=</span> <span class="mh">0x1001</span><span class="p">,</span>	<span class="cm">/* TX chan in event class 0 (chan 0-9) */</span>
	<span class="n">TXCHAN_EVT1</span> <span class="o">=</span> <span class="mh">0x2001</span><span class="p">,</span>	<span class="cm">/* TX chan in event class 1 (chan 10-19) */</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="p">{</span>
	<span class="kt">int</span>		 <span class="n">chno</span><span class="p">;</span>		<span class="cm">/* Channel number */</span>
	<span class="k">enum</span> <span class="n">pasemi_dmachan_type</span> <span class="n">chan_type</span><span class="p">;</span>	<span class="cm">/* TX / RX */</span>
	<span class="n">u64</span>		<span class="o">*</span><span class="n">status</span><span class="p">;</span>	<span class="cm">/* Ptr to cacheable status */</span>
	<span class="kt">int</span>		 <span class="n">irq</span><span class="p">;</span>		<span class="cm">/* IRQ used by channel */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	 <span class="n">ring_size</span><span class="p">;</span>	<span class="cm">/* size of allocated ring */</span>
	<span class="n">dma_addr_t</span>	 <span class="n">ring_dma</span><span class="p">;</span>	<span class="cm">/* DMA address for ring */</span>
	<span class="n">u64</span>		<span class="o">*</span><span class="n">ring_virt</span><span class="p">;</span>	<span class="cm">/* Virt address for ring */</span>
	<span class="kt">void</span>		<span class="o">*</span><span class="n">priv</span><span class="p">;</span>		<span class="cm">/* Ptr to start of client struct */</span>
<span class="p">};</span>

<span class="cm">/* Read/write the different registers in the I/O Bridge, Ethernet</span>
<span class="cm"> * and DMA Controller</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pasemi_read_iob_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_write_iob_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pasemi_read_mac_reg</span><span class="p">(</span><span class="kt">int</span> <span class="n">intf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_write_mac_reg</span><span class="p">(</span><span class="kt">int</span> <span class="n">intf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pasemi_read_dma_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_write_dma_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">val</span><span class="p">);</span>

<span class="cm">/* Channel management routines */</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pasemi_dma_alloc_chan</span><span class="p">(</span><span class="k">enum</span> <span class="n">pasemi_dmachan_type</span> <span class="n">type</span><span class="p">,</span>
				   <span class="kt">int</span> <span class="n">total_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_free_chan</span><span class="p">(</span><span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_start_chan</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span>
				  <span class="k">const</span> <span class="n">u32</span> <span class="n">cmdsta</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pasemi_dma_stop_chan</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">);</span>

<span class="cm">/* Common routines to allocate rings and buffers */</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">pasemi_dma_alloc_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span> <span class="kt">int</span> <span class="n">ring_size</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_free_ring</span><span class="p">(</span><span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pasemi_dma_alloc_buf</span><span class="p">(</span><span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
				  <span class="n">dma_addr_t</span> <span class="o">*</span><span class="n">handle</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_free_buf</span><span class="p">(</span><span class="k">struct</span> <span class="n">pasemi_dmachan</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
				<span class="n">dma_addr_t</span> <span class="o">*</span><span class="n">handle</span><span class="p">);</span>

<span class="cm">/* Routines to allocate flags (events) for channel synchronization */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">pasemi_dma_alloc_flag</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_free_flag</span><span class="p">(</span><span class="kt">int</span> <span class="n">flag</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_set_flag</span><span class="p">(</span><span class="kt">int</span> <span class="n">flag</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_clear_flag</span><span class="p">(</span><span class="kt">int</span> <span class="n">flag</span><span class="p">);</span>

<span class="cm">/* Routines to allocate function engines */</span>
<span class="k">extern</span> <span class="kt">int</span>  <span class="n">pasemi_dma_alloc_fun</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">pasemi_dma_free_fun</span><span class="p">(</span><span class="kt">int</span> <span class="n">fun</span><span class="p">);</span>

<span class="cm">/* Initialize the library, must be called before any other functions */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pasemi_dma_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* ASM_PASEMI_DMA_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
