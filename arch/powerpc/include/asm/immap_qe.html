<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › immap_qe.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>immap_qe.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * QUICC Engine (QE) Internal Memory Map.</span>
<span class="cm"> * The Internal Memory Map for devices with QE on them. This</span>
<span class="cm"> * is the superset of all QE devices (8360, etc.).</span>

<span class="cm"> * Copyright (C) 2006. Freescale Semicondutor, Inc. All rights reserved.</span>
<span class="cm"> *</span>
<span class="cm"> * Authors: 	Shlomi Gridish &lt;gridish@freescale.com&gt;</span>
<span class="cm"> * 		Li Yang &lt;leoli@freescale.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute  it and/or modify it</span>
<span class="cm"> * under  the terms of  the GNU General  Public License as published by the</span>
<span class="cm"> * Free Software Foundation;  either version 2 of the  License, or (at your</span>
<span class="cm"> * option) any later version.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_POWERPC_IMMAP_QE_H</span>
<span class="cp">#define _ASM_POWERPC_IMMAP_QE_H</span>
<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cp">#define QE_IMMAP_SIZE	(1024 * 1024)	</span><span class="cm">/* 1MB from 1MB+IMMR */</span><span class="cp"></span>

<span class="cm">/* QE I-RAM */</span>
<span class="k">struct</span> <span class="n">qe_iram</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">iadd</span><span class="p">;</span>		<span class="cm">/* I-RAM Address Register */</span>
	<span class="n">__be32</span>	<span class="n">idata</span><span class="p">;</span>		<span class="cm">/* I-RAM Data Register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x78</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* QE Interrupt Controller */</span>
<span class="k">struct</span> <span class="n">qe_ic_regs</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">qicr</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qivec</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qripnr</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qipnr</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qipxcc</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qipycc</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qipwcc</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qipzcc</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qimr</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qrimr</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qicnr</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x4</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">qiprta</span><span class="p">;</span>
	<span class="n">__be32</span>	<span class="n">qiprtb</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x4</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">qricr</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x20</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">qhivec</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mh">0x1C</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* Communications Processor */</span>
<span class="k">struct</span> <span class="n">cp_qe</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">cecr</span><span class="p">;</span>		<span class="cm">/* QE command register */</span>
	<span class="n">__be32</span>	<span class="n">ceccr</span><span class="p">;</span>		<span class="cm">/* QE controller configuration register */</span>
	<span class="n">__be32</span>	<span class="n">cecdr</span><span class="p">;</span>		<span class="cm">/* QE command data register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0xA</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceter</span><span class="p">;</span>		<span class="cm">/* QE timer event register */</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">cetmr</span><span class="p">;</span>		<span class="cm">/* QE timers mask register */</span>
	<span class="n">__be32</span>	<span class="n">cetscr</span><span class="p">;</span>		<span class="cm">/* QE time-stamp timer control register */</span>
	<span class="n">__be32</span>	<span class="n">cetsr1</span><span class="p">;</span>		<span class="cm">/* QE time-stamp register 1 */</span>
	<span class="n">__be32</span>	<span class="n">cetsr2</span><span class="p">;</span>		<span class="cm">/* QE time-stamp register 2 */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">cevter</span><span class="p">;</span>		<span class="cm">/* QE virtual tasks event register */</span>
	<span class="n">__be32</span>	<span class="n">cevtmr</span><span class="p">;</span>		<span class="cm">/* QE virtual tasks mask register */</span>
	<span class="n">__be16</span>	<span class="n">cercr</span><span class="p">;</span>		<span class="cm">/* QE RAM control register */</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">res4</span><span class="p">[</span><span class="mh">0x24</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexe1</span><span class="p">;</span>		<span class="cm">/* QE external request 1 event register */</span>
	<span class="n">u8</span>	<span class="n">res5</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexm1</span><span class="p">;</span>		<span class="cm">/* QE external request 1 mask register */</span>
	<span class="n">u8</span>	<span class="n">res6</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexe2</span><span class="p">;</span>		<span class="cm">/* QE external request 2 event register */</span>
	<span class="n">u8</span>	<span class="n">res7</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexm2</span><span class="p">;</span>		<span class="cm">/* QE external request 2 mask register */</span>
	<span class="n">u8</span>	<span class="n">res8</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexe3</span><span class="p">;</span>		<span class="cm">/* QE external request 3 event register */</span>
	<span class="n">u8</span>	<span class="n">res9</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexm3</span><span class="p">;</span>		<span class="cm">/* QE external request 3 mask register */</span>
	<span class="n">u8</span>	<span class="n">res10</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexe4</span><span class="p">;</span>		<span class="cm">/* QE external request 4 event register */</span>
	<span class="n">u8</span>	<span class="n">res11</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">ceexm4</span><span class="p">;</span>		<span class="cm">/* QE external request 4 mask register */</span>
	<span class="n">u8</span>	<span class="n">res12</span><span class="p">[</span><span class="mh">0x3A</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">ceurnr</span><span class="p">;</span>		<span class="cm">/* QE microcode revision number register */</span>
	<span class="n">u8</span>	<span class="n">res13</span><span class="p">[</span><span class="mh">0x244</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* QE Multiplexer */</span>
<span class="k">struct</span> <span class="n">qe_mux</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">cmxgcr</span><span class="p">;</span>		<span class="cm">/* CMX general clock route register */</span>
	<span class="n">__be32</span>	<span class="n">cmxsi1cr_l</span><span class="p">;</span>	<span class="cm">/* CMX SI1 clock route low register */</span>
	<span class="n">__be32</span>	<span class="n">cmxsi1cr_h</span><span class="p">;</span>	<span class="cm">/* CMX SI1 clock route high register */</span>
	<span class="n">__be32</span>	<span class="n">cmxsi1syr</span><span class="p">;</span>	<span class="cm">/* CMX SI1 SYNC route register */</span>
	<span class="n">__be32</span>	<span class="n">cmxucr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>	<span class="cm">/* CMX UCCx clock route registers */</span>
	<span class="n">__be32</span>	<span class="n">cmxupcr</span><span class="p">;</span>	<span class="cm">/* CMX UPC clock route register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x1C</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* QE Timers */</span>
<span class="k">struct</span> <span class="n">qe_timers</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">gtcfr1</span><span class="p">;</span>		<span class="cm">/* Timer 1 and Timer 2 global config register*/</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x3</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">gtcfr2</span><span class="p">;</span>		<span class="cm">/* Timer 3 and timer 4 global config register*/</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0xB</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">gtmdr1</span><span class="p">;</span>		<span class="cm">/* Timer 1 mode register */</span>
	<span class="n">__be16</span>	<span class="n">gtmdr2</span><span class="p">;</span>		<span class="cm">/* Timer 2 mode register */</span>
	<span class="n">__be16</span>	<span class="n">gtrfr1</span><span class="p">;</span>		<span class="cm">/* Timer 1 reference register */</span>
	<span class="n">__be16</span>	<span class="n">gtrfr2</span><span class="p">;</span>		<span class="cm">/* Timer 2 reference register */</span>
	<span class="n">__be16</span>	<span class="n">gtcpr1</span><span class="p">;</span>		<span class="cm">/* Timer 1 capture register */</span>
	<span class="n">__be16</span>	<span class="n">gtcpr2</span><span class="p">;</span>		<span class="cm">/* Timer 2 capture register */</span>
	<span class="n">__be16</span>	<span class="n">gtcnr1</span><span class="p">;</span>		<span class="cm">/* Timer 1 counter */</span>
	<span class="n">__be16</span>	<span class="n">gtcnr2</span><span class="p">;</span>		<span class="cm">/* Timer 2 counter */</span>
	<span class="n">__be16</span>	<span class="n">gtmdr3</span><span class="p">;</span>		<span class="cm">/* Timer 3 mode register */</span>
	<span class="n">__be16</span>	<span class="n">gtmdr4</span><span class="p">;</span>		<span class="cm">/* Timer 4 mode register */</span>
	<span class="n">__be16</span>	<span class="n">gtrfr3</span><span class="p">;</span>		<span class="cm">/* Timer 3 reference register */</span>
	<span class="n">__be16</span>	<span class="n">gtrfr4</span><span class="p">;</span>		<span class="cm">/* Timer 4 reference register */</span>
	<span class="n">__be16</span>	<span class="n">gtcpr3</span><span class="p">;</span>		<span class="cm">/* Timer 3 capture register */</span>
	<span class="n">__be16</span>	<span class="n">gtcpr4</span><span class="p">;</span>		<span class="cm">/* Timer 4 capture register */</span>
	<span class="n">__be16</span>	<span class="n">gtcnr3</span><span class="p">;</span>		<span class="cm">/* Timer 3 counter */</span>
	<span class="n">__be16</span>	<span class="n">gtcnr4</span><span class="p">;</span>		<span class="cm">/* Timer 4 counter */</span>
	<span class="n">__be16</span>	<span class="n">gtevr1</span><span class="p">;</span>		<span class="cm">/* Timer 1 event register */</span>
	<span class="n">__be16</span>	<span class="n">gtevr2</span><span class="p">;</span>		<span class="cm">/* Timer 2 event register */</span>
	<span class="n">__be16</span>	<span class="n">gtevr3</span><span class="p">;</span>		<span class="cm">/* Timer 3 event register */</span>
	<span class="n">__be16</span>	<span class="n">gtevr4</span><span class="p">;</span>		<span class="cm">/* Timer 4 event register */</span>
	<span class="n">__be16</span>	<span class="n">gtps</span><span class="p">;</span>		<span class="cm">/* Timer 1 prescale register */</span>
	<span class="n">u8</span> <span class="n">res2</span><span class="p">[</span><span class="mh">0x46</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* BRG */</span>
<span class="k">struct</span> <span class="n">qe_brg</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">brgc</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>	<span class="cm">/* BRG configuration registers */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x40</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* SPI */</span>
<span class="k">struct</span> <span class="n">spi</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x20</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">spmode</span><span class="p">;</span>		<span class="cm">/* SPI mode register */</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">spie</span><span class="p">;</span>		<span class="cm">/* SPI event register */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">spim</span><span class="p">;</span>		<span class="cm">/* SPI mask register */</span>
	<span class="n">u8</span>	<span class="n">res4</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">res5</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">spcom</span><span class="p">;</span>		<span class="cm">/* SPI command register */</span>
	<span class="n">u8</span>	<span class="n">res6</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">spitd</span><span class="p">;</span>		<span class="cm">/* SPI transmit data register (cpu mode) */</span>
	<span class="n">__be32</span>	<span class="n">spird</span><span class="p">;</span>		<span class="cm">/* SPI receive data register (cpu mode) */</span>
	<span class="n">u8</span>	<span class="n">res7</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* SI */</span>
<span class="k">struct</span> <span class="n">si1</span> <span class="p">{</span>
	<span class="n">__be16</span>	<span class="n">siamr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMA mode register */</span>
	<span class="n">__be16</span>	<span class="n">sibmr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMB mode register */</span>
	<span class="n">__be16</span>	<span class="n">sicmr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMC mode register */</span>
	<span class="n">__be16</span>	<span class="n">sidmr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMD mode register */</span>
	<span class="n">u8</span>	<span class="n">siglmr1_h</span><span class="p">;</span>	<span class="cm">/* SI1 global mode register high */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">sicmdr1_h</span><span class="p">;</span>	<span class="cm">/* SI1 command register high */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">sistr1_h</span><span class="p">;</span>	<span class="cm">/* SI1 status register high */</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">sirsr1_h</span><span class="p">;</span>	<span class="cm">/* SI1 RAM shadow address register high */</span>
	<span class="n">u8</span>	<span class="n">sitarc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMA */</span>
	<span class="n">u8</span>	<span class="n">sitbrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMB */</span>
	<span class="n">u8</span>	<span class="n">sitcrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMC */</span>
	<span class="n">u8</span>	<span class="n">sitdrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMD */</span>
	<span class="n">u8</span>	<span class="n">sirarc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMA */</span>
	<span class="n">u8</span>	<span class="n">sirbrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMB */</span>
	<span class="n">u8</span>	<span class="n">sircrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMC */</span>
	<span class="n">u8</span>	<span class="n">sirdrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMD */</span>
	<span class="n">u8</span>	<span class="n">res4</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">siemr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDME mode register 16 bits */</span>
	<span class="n">__be16</span>	<span class="n">sifmr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMF mode register 16 bits */</span>
	<span class="n">__be16</span>	<span class="n">sigmr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMG mode register 16 bits */</span>
	<span class="n">__be16</span>	<span class="n">sihmr1</span><span class="p">;</span>		<span class="cm">/* SI1 TDMH mode register 16 bits */</span>
	<span class="n">u8</span>	<span class="n">siglmg1_l</span><span class="p">;</span>	<span class="cm">/* SI1 global mode register low 8 bits */</span>
	<span class="n">u8</span>	<span class="n">res5</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">sicmdr1_l</span><span class="p">;</span>	<span class="cm">/* SI1 command register low 8 bits */</span>
	<span class="n">u8</span>	<span class="n">res6</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">sistr1_l</span><span class="p">;</span>	<span class="cm">/* SI1 status register low 8 bits */</span>
	<span class="n">u8</span>	<span class="n">res7</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">sirsr1_l</span><span class="p">;</span>	<span class="cm">/* SI1 RAM shadow address register low 16 bits*/</span>
	<span class="n">u8</span>	<span class="n">siterc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDME 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sitfrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMF 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sitgrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMG 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sithrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Tx TDMH 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sirerc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDME 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sirfrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMF 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sirgrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMG 8 bits */</span>
	<span class="n">u8</span>	<span class="n">sirhrc1</span><span class="p">;</span>	<span class="cm">/* SI1 RAM counter Rx TDMH 8 bits */</span>
	<span class="n">u8</span>	<span class="n">res8</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">siml1</span><span class="p">;</span>		<span class="cm">/* SI1 multiframe limit register */</span>
	<span class="n">u8</span>	<span class="n">siedm1</span><span class="p">;</span>		<span class="cm">/* SI1 extended diagnostic mode register */</span>
	<span class="n">u8</span>	<span class="n">res9</span><span class="p">[</span><span class="mh">0xBB</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* SI Routing Tables */</span>
<span class="k">struct</span> <span class="n">sir</span> <span class="p">{</span>
	<span class="n">u8</span> 	<span class="n">tx</span><span class="p">[</span><span class="mh">0x400</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">rx</span><span class="p">[</span><span class="mh">0x400</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x800</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* USB Controller */</span>
<span class="k">struct</span> <span class="n">qe_usb_ctlr</span> <span class="p">{</span>
	<span class="n">u8</span>	<span class="n">usb_usmod</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">usb_usadr</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">usb_uscom</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="n">__be16</span>  <span class="n">usb_usep</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">usb_usber</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">usb_usbmr</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res4</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">usb_usbs</span><span class="p">;</span>
	<span class="n">__be16</span>	<span class="n">usb_ussft</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res5</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">usb_usfrn</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res6</span><span class="p">[</span><span class="mh">0x22</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* MCC */</span>
<span class="k">struct</span> <span class="n">qe_mcc</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">mcce</span><span class="p">;</span>		<span class="cm">/* MCC event register */</span>
	<span class="n">__be32</span>	<span class="n">mccm</span><span class="p">;</span>		<span class="cm">/* MCC mask register */</span>
	<span class="n">__be32</span>	<span class="n">mccf</span><span class="p">;</span>		<span class="cm">/* MCC configuration register */</span>
	<span class="n">__be32</span>	<span class="n">merl</span><span class="p">;</span>		<span class="cm">/* MCC emergency request level register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0xF0</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* QE UCC Slow */</span>
<span class="k">struct</span> <span class="n">ucc_slow</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">gumr_l</span><span class="p">;</span>		<span class="cm">/* UCCx general mode register (low) */</span>
	<span class="n">__be32</span>	<span class="n">gumr_h</span><span class="p">;</span>		<span class="cm">/* UCCx general mode register (high) */</span>
	<span class="n">__be16</span>	<span class="n">upsmr</span><span class="p">;</span>		<span class="cm">/* UCCx protocol-specific mode register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">utodr</span><span class="p">;</span>		<span class="cm">/* UCCx transmit on demand register */</span>
	<span class="n">__be16</span>	<span class="n">udsr</span><span class="p">;</span>		<span class="cm">/* UCCx data synchronization register */</span>
	<span class="n">__be16</span>	<span class="n">ucce</span><span class="p">;</span>		<span class="cm">/* UCCx event register */</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">uccm</span><span class="p">;</span>		<span class="cm">/* UCCx mask register */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x1</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">uccs</span><span class="p">;</span>		<span class="cm">/* UCCx status register */</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mh">0x24</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">utpt</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res4</span><span class="p">[</span><span class="mh">0x52</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">guemr</span><span class="p">;</span>		<span class="cm">/* UCC general extended mode register */</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* QE UCC Fast */</span>
<span class="k">struct</span> <span class="n">ucc_fast</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">gumr</span><span class="p">;</span>		<span class="cm">/* UCCx general mode register */</span>
	<span class="n">__be32</span>	<span class="n">upsmr</span><span class="p">;</span>		<span class="cm">/* UCCx protocol-specific mode register */</span>
	<span class="n">__be16</span>	<span class="n">utodr</span><span class="p">;</span>		<span class="cm">/* UCCx transmit on demand register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">udsr</span><span class="p">;</span>		<span class="cm">/* UCCx data synchronization register */</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">ucce</span><span class="p">;</span>		<span class="cm">/* UCCx event register */</span>
	<span class="n">__be32</span>	<span class="n">uccm</span><span class="p">;</span>		<span class="cm">/* UCCx mask register */</span>
	<span class="n">u8</span>	<span class="n">uccs</span><span class="p">;</span>		<span class="cm">/* UCCx status register */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x7</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">urfb</span><span class="p">;</span>		<span class="cm">/* UCC receive FIFO base */</span>
	<span class="n">__be16</span>	<span class="n">urfs</span><span class="p">;</span>		<span class="cm">/* UCC receive FIFO size */</span>
	<span class="n">u8</span>	<span class="n">res3</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">urfet</span><span class="p">;</span>		<span class="cm">/* UCC receive FIFO emergency threshold */</span>
	<span class="n">__be16</span>	<span class="n">urfset</span><span class="p">;</span>		<span class="cm">/* UCC receive FIFO special emergency</span>
<span class="cm">				   threshold */</span>
	<span class="n">__be32</span>	<span class="n">utfb</span><span class="p">;</span>		<span class="cm">/* UCC transmit FIFO base */</span>
	<span class="n">__be16</span>	<span class="n">utfs</span><span class="p">;</span>		<span class="cm">/* UCC transmit FIFO size */</span>
	<span class="n">u8</span>	<span class="n">res4</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">utfet</span><span class="p">;</span>		<span class="cm">/* UCC transmit FIFO emergency threshold */</span>
	<span class="n">u8</span>	<span class="n">res5</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">utftt</span><span class="p">;</span>		<span class="cm">/* UCC transmit FIFO transmit threshold */</span>
	<span class="n">u8</span>	<span class="n">res6</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">utpt</span><span class="p">;</span>		<span class="cm">/* UCC transmit polling timer */</span>
	<span class="n">u8</span>	<span class="n">res7</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">urtry</span><span class="p">;</span>		<span class="cm">/* UCC retry counter register */</span>
	<span class="n">u8</span>	<span class="n">res8</span><span class="p">[</span><span class="mh">0x4C</span><span class="p">];</span>
	<span class="n">u8</span>	<span class="n">guemr</span><span class="p">;</span>		<span class="cm">/* UCC general extended mode register */</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">ucc</span> <span class="p">{</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span>	<span class="n">ucc_slow</span> <span class="n">slow</span><span class="p">;</span>
		<span class="k">struct</span>	<span class="n">ucc_fast</span> <span class="n">fast</span><span class="p">;</span>
		<span class="n">u8</span>	<span class="n">res</span><span class="p">[</span><span class="mh">0x200</span><span class="p">];</span>	<span class="cm">/* UCC blocks are 512 bytes each */</span>
	<span class="p">};</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* MultiPHY UTOPIA POS Controllers (UPC) */</span>
<span class="k">struct</span> <span class="n">upc</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">upgcr</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS general configuration register */</span>
	<span class="n">__be32</span>	<span class="n">uplpa</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS last PHY address */</span>
	<span class="n">__be32</span>	<span class="n">uphec</span><span class="p">;</span>		<span class="cm">/* ATM HEC register */</span>
	<span class="n">__be32</span>	<span class="n">upuc</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS UCC configuration */</span>
	<span class="n">__be32</span>	<span class="n">updc1</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 1 configuration */</span>
	<span class="n">__be32</span>	<span class="n">updc2</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 2 configuration */</span>
	<span class="n">__be32</span>	<span class="n">updc3</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 3 configuration */</span>
	<span class="n">__be32</span>	<span class="n">updc4</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 4 configuration */</span>
	<span class="n">__be32</span>	<span class="n">upstpa</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS STPA threshold */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0xC</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">updrs1_h</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 1 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs1_l</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 1 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs2_h</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 2 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs2_l</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 2 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs3_h</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 3 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs3_l</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 3 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs4_h</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 4 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrs4_l</span><span class="p">;</span>	<span class="cm">/* UTOPIA/POS device 4 rate select */</span>
	<span class="n">__be32</span>	<span class="n">updrp1</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 1 receive priority low */</span>
	<span class="n">__be32</span>	<span class="n">updrp2</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 2 receive priority low */</span>
	<span class="n">__be32</span>	<span class="n">updrp3</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 3 receive priority low */</span>
	<span class="n">__be32</span>	<span class="n">updrp4</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 4 receive priority low */</span>
	<span class="n">__be32</span>	<span class="n">upde1</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 1 event */</span>
	<span class="n">__be32</span>	<span class="n">upde2</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 2 event */</span>
	<span class="n">__be32</span>	<span class="n">upde3</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 3 event */</span>
	<span class="n">__be32</span>	<span class="n">upde4</span><span class="p">;</span>		<span class="cm">/* UTOPIA/POS device 4 event */</span>
	<span class="n">__be16</span>	<span class="n">uprp1</span><span class="p">;</span>
	<span class="n">__be16</span>	<span class="n">uprp2</span><span class="p">;</span>
	<span class="n">__be16</span>	<span class="n">uprp3</span><span class="p">;</span>
	<span class="n">__be16</span>	<span class="n">uprp4</span><span class="p">;</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be16</span>	<span class="n">uptirr1_0</span><span class="p">;</span>	<span class="cm">/* Device 1 transmit internal rate 0 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr1_1</span><span class="p">;</span>	<span class="cm">/* Device 1 transmit internal rate 1 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr1_2</span><span class="p">;</span>	<span class="cm">/* Device 1 transmit internal rate 2 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr1_3</span><span class="p">;</span>	<span class="cm">/* Device 1 transmit internal rate 3 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr2_0</span><span class="p">;</span>	<span class="cm">/* Device 2 transmit internal rate 0 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr2_1</span><span class="p">;</span>	<span class="cm">/* Device 2 transmit internal rate 1 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr2_2</span><span class="p">;</span>	<span class="cm">/* Device 2 transmit internal rate 2 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr2_3</span><span class="p">;</span>	<span class="cm">/* Device 2 transmit internal rate 3 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr3_0</span><span class="p">;</span>	<span class="cm">/* Device 3 transmit internal rate 0 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr3_1</span><span class="p">;</span>	<span class="cm">/* Device 3 transmit internal rate 1 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr3_2</span><span class="p">;</span>	<span class="cm">/* Device 3 transmit internal rate 2 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr3_3</span><span class="p">;</span>	<span class="cm">/* Device 3 transmit internal rate 3 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr4_0</span><span class="p">;</span>	<span class="cm">/* Device 4 transmit internal rate 0 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr4_1</span><span class="p">;</span>	<span class="cm">/* Device 4 transmit internal rate 1 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr4_2</span><span class="p">;</span>	<span class="cm">/* Device 4 transmit internal rate 2 */</span>
	<span class="n">__be16</span>	<span class="n">uptirr4_3</span><span class="p">;</span>	<span class="cm">/* Device 4 transmit internal rate 3 */</span>
	<span class="n">__be32</span>	<span class="n">uper1</span><span class="p">;</span>		<span class="cm">/* Device 1 port enable register */</span>
	<span class="n">__be32</span>	<span class="n">uper2</span><span class="p">;</span>		<span class="cm">/* Device 2 port enable register */</span>
	<span class="n">__be32</span>	<span class="n">uper3</span><span class="p">;</span>		<span class="cm">/* Device 3 port enable register */</span>
	<span class="n">__be32</span>	<span class="n">uper4</span><span class="p">;</span>		<span class="cm">/* Device 4 port enable register */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x150</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* SDMA */</span>
<span class="k">struct</span> <span class="n">sdma</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">sdsr</span><span class="p">;</span>		<span class="cm">/* Serial DMA status register */</span>
	<span class="n">__be32</span>	<span class="n">sdmr</span><span class="p">;</span>		<span class="cm">/* Serial DMA mode register */</span>
	<span class="n">__be32</span>	<span class="n">sdtr1</span><span class="p">;</span>		<span class="cm">/* SDMA system bus threshold register */</span>
	<span class="n">__be32</span>	<span class="n">sdtr2</span><span class="p">;</span>		<span class="cm">/* SDMA secondary bus threshold register */</span>
	<span class="n">__be32</span>	<span class="n">sdhy1</span><span class="p">;</span>		<span class="cm">/* SDMA system bus hysteresis register */</span>
	<span class="n">__be32</span>	<span class="n">sdhy2</span><span class="p">;</span>		<span class="cm">/* SDMA secondary bus hysteresis register */</span>
	<span class="n">__be32</span>	<span class="n">sdta1</span><span class="p">;</span>		<span class="cm">/* SDMA system bus address register */</span>
	<span class="n">__be32</span>	<span class="n">sdta2</span><span class="p">;</span>		<span class="cm">/* SDMA secondary bus address register */</span>
	<span class="n">__be32</span>	<span class="n">sdtm1</span><span class="p">;</span>		<span class="cm">/* SDMA system bus MSNUM register */</span>
	<span class="n">__be32</span>	<span class="n">sdtm2</span><span class="p">;</span>		<span class="cm">/* SDMA secondary bus MSNUM register */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x10</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">sdaqr</span><span class="p">;</span>		<span class="cm">/* SDMA address bus qualify register */</span>
	<span class="n">__be32</span>	<span class="n">sdaqmr</span><span class="p">;</span>		<span class="cm">/* SDMA address bus qualify mask register */</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x4</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">sdebcr</span><span class="p">;</span>		<span class="cm">/* SDMA CAM entries base register */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x38</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/* Debug Space */</span>
<span class="k">struct</span> <span class="n">dbg</span> <span class="p">{</span>
	<span class="n">__be32</span>	<span class="n">bpdcr</span><span class="p">;</span>		<span class="cm">/* Breakpoint debug command register */</span>
	<span class="n">__be32</span>	<span class="n">bpdsr</span><span class="p">;</span>		<span class="cm">/* Breakpoint debug status register */</span>
	<span class="n">__be32</span>	<span class="n">bpdmr</span><span class="p">;</span>		<span class="cm">/* Breakpoint debug mask register */</span>
	<span class="n">__be32</span>	<span class="n">bprmrr0</span><span class="p">;</span>	<span class="cm">/* Breakpoint request mode risc register 0 */</span>
	<span class="n">__be32</span>	<span class="n">bprmrr1</span><span class="p">;</span>	<span class="cm">/* Breakpoint request mode risc register 1 */</span>
	<span class="n">u8</span>	<span class="n">res0</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">bprmtr0</span><span class="p">;</span>	<span class="cm">/* Breakpoint request mode trb register 0 */</span>
	<span class="n">__be32</span>	<span class="n">bprmtr1</span><span class="p">;</span>	<span class="cm">/* Breakpoint request mode trb register 1 */</span>
	<span class="n">u8</span>	<span class="n">res1</span><span class="p">[</span><span class="mh">0x8</span><span class="p">];</span>
	<span class="n">__be32</span>	<span class="n">bprmir</span><span class="p">;</span>		<span class="cm">/* Breakpoint request mode immediate register */</span>
	<span class="n">__be32</span>	<span class="n">bprmsr</span><span class="p">;</span>		<span class="cm">/* Breakpoint request mode serial register */</span>
	<span class="n">__be32</span>	<span class="n">bpemr</span><span class="p">;</span>		<span class="cm">/* Breakpoint exit mode register */</span>
	<span class="n">u8</span>	<span class="n">res2</span><span class="p">[</span><span class="mh">0x48</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cm">/*</span>
<span class="cm"> * RISC Special Registers (Trap and Breakpoint).  These are described in</span>
<span class="cm"> * the QE Developer&#39;s Handbook.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">rsp</span> <span class="p">{</span>
	<span class="n">__be32</span> <span class="n">tibcr</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>	<span class="cm">/* Trap/instruction breakpoint control regs */</span>
	<span class="n">u8</span> <span class="n">res0</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">ibcr0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">ibs0</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">ibcnr0</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">res1</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">ibcr1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">ibs1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">ibcnr1</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">npcr</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbcr</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbar</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbamr</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbsr</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbcnr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">res2</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">dbdr_h</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbdr_l</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbdmr_h</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">dbdmr_l</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">bsr</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">bor</span><span class="p">;</span>
	<span class="n">__be32</span> <span class="n">bior</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">res3</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">iatr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">__be32</span> <span class="n">eccr</span><span class="p">;</span>		<span class="cm">/* Exception control configuration register */</span>
	<span class="n">__be32</span> <span class="n">eicr</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">res4</span><span class="p">[</span><span class="mh">0x100</span><span class="o">-</span><span class="mh">0xf8</span><span class="p">];</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">qe_immap</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">qe_iram</span>		<span class="n">iram</span><span class="p">;</span>		<span class="cm">/* I-RAM */</span>
	<span class="k">struct</span> <span class="n">qe_ic_regs</span>	<span class="n">ic</span><span class="p">;</span>		<span class="cm">/* Interrupt Controller */</span>
	<span class="k">struct</span> <span class="n">cp_qe</span>		<span class="n">cp</span><span class="p">;</span>		<span class="cm">/* Communications Processor */</span>
	<span class="k">struct</span> <span class="n">qe_mux</span>		<span class="n">qmx</span><span class="p">;</span>		<span class="cm">/* QE Multiplexer */</span>
	<span class="k">struct</span> <span class="n">qe_timers</span>	<span class="n">qet</span><span class="p">;</span>		<span class="cm">/* QE Timers */</span>
	<span class="k">struct</span> <span class="n">spi</span>		<span class="n">spi</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>	<span class="cm">/* spi */</span>
	<span class="k">struct</span> <span class="n">qe_mcc</span>		<span class="n">mcc</span><span class="p">;</span>		<span class="cm">/* mcc */</span>
	<span class="k">struct</span> <span class="n">qe_brg</span>		<span class="n">brg</span><span class="p">;</span>		<span class="cm">/* brg */</span>
	<span class="k">struct</span> <span class="n">qe_usb_ctlr</span>	<span class="n">usb</span><span class="p">;</span>		<span class="cm">/* USB */</span>
	<span class="k">struct</span> <span class="n">si1</span>		<span class="n">si1</span><span class="p">;</span>		<span class="cm">/* SI */</span>
	<span class="n">u8</span>			<span class="n">res11</span><span class="p">[</span><span class="mh">0x800</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">sir</span>		<span class="n">sir</span><span class="p">;</span>		<span class="cm">/* SI Routing Tables */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc1</span><span class="p">;</span>		<span class="cm">/* ucc1 */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc3</span><span class="p">;</span>		<span class="cm">/* ucc3 */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc5</span><span class="p">;</span>		<span class="cm">/* ucc5 */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc7</span><span class="p">;</span>		<span class="cm">/* ucc7 */</span>
	<span class="n">u8</span>			<span class="n">res12</span><span class="p">[</span><span class="mh">0x600</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">upc</span>		<span class="n">upc1</span><span class="p">;</span>		<span class="cm">/* MultiPHY UTOPIA POS Ctrlr 1*/</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc2</span><span class="p">;</span>		<span class="cm">/* ucc2 */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc4</span><span class="p">;</span>		<span class="cm">/* ucc4 */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc6</span><span class="p">;</span>		<span class="cm">/* ucc6 */</span>
	<span class="k">struct</span> <span class="n">ucc</span>		<span class="n">ucc8</span><span class="p">;</span>		<span class="cm">/* ucc8 */</span>
	<span class="n">u8</span>			<span class="n">res13</span><span class="p">[</span><span class="mh">0x600</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">upc</span>		<span class="n">upc2</span><span class="p">;</span>		<span class="cm">/* MultiPHY UTOPIA POS Ctrlr 2*/</span>
	<span class="k">struct</span> <span class="n">sdma</span>		<span class="n">sdma</span><span class="p">;</span>		<span class="cm">/* SDMA */</span>
	<span class="k">struct</span> <span class="n">dbg</span>		<span class="n">dbg</span><span class="p">;</span>		<span class="cm">/* 0x104080 - 0x1040FF</span>
<span class="cm">						   Debug Space */</span>
	<span class="k">struct</span> <span class="n">rsp</span>		<span class="n">rsp</span><span class="p">[</span><span class="mh">0x2</span><span class="p">];</span>	<span class="cm">/* 0x104100 - 0x1042FF</span>
<span class="cm">						   RISC Special Registers</span>
<span class="cm">						   (Trap and Breakpoint) */</span>
	<span class="n">u8</span>			<span class="n">res14</span><span class="p">[</span><span class="mh">0x300</span><span class="p">];</span>	<span class="cm">/* 0x104300 - 0x1045FF */</span>
	<span class="n">u8</span>			<span class="n">res15</span><span class="p">[</span><span class="mh">0x3A00</span><span class="p">];</span>	<span class="cm">/* 0x104600 - 0x107FFF */</span>
	<span class="n">u8</span>			<span class="n">res16</span><span class="p">[</span><span class="mh">0x8000</span><span class="p">];</span>	<span class="cm">/* 0x108000 - 0x110000 */</span>
	<span class="n">u8</span>			<span class="n">muram</span><span class="p">[</span><span class="mh">0xC000</span><span class="p">];</span>	<span class="cm">/* 0x110000 - 0x11C000</span>
<span class="cm">						   Multi-user RAM */</span>
	<span class="n">u8</span>			<span class="n">res17</span><span class="p">[</span><span class="mh">0x24000</span><span class="p">];</span>	<span class="cm">/* 0x11C000 - 0x140000 */</span>
	<span class="n">u8</span>			<span class="n">res18</span><span class="p">[</span><span class="mh">0xC0000</span><span class="p">];</span>	<span class="cm">/* 0x140000 - 0x200000 */</span>
<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">qe_immap</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">qe_immr</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">phys_addr_t</span> <span class="n">get_qe_base</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Returns the offset within the QE address space of the given pointer.</span>
<span class="cm"> *</span>
<span class="cm"> * Note that the QE does not support 36-bit physical addresses, so if</span>
<span class="cm"> * get_qe_base() returns a number above 4GB, the caller will probably fail.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">phys_addr_t</span> <span class="nf">immrbar_virt_to_phys</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">address</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">q</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">qe_immr</span><span class="p">;</span>

	<span class="cm">/* Is it a MURAM address? */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">address</span> <span class="o">&gt;=</span> <span class="n">q</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">address</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">q</span> <span class="o">+</span> <span class="n">QE_IMMAP_SIZE</span><span class="p">)))</span>
		<span class="k">return</span> <span class="n">get_qe_base</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">address</span> <span class="o">-</span> <span class="n">q</span><span class="p">);</span>

	<span class="cm">/* It&#39;s an address returned by kmalloc */</span>
	<span class="k">return</span> <span class="n">virt_to_phys</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* _ASM_POWERPC_IMMAP_QE_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
