<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › powerpc › include › asm › mmu-40x.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mmu-40x.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_POWERPC_MMU_40X_H_</span>
<span class="cp">#define _ASM_POWERPC_MMU_40X_H_</span>

<span class="cm">/*</span>
<span class="cm"> * PPC40x support</span>
<span class="cm"> */</span>

<span class="cp">#define PPC40X_TLB_SIZE 64</span>

<span class="cm">/*</span>
<span class="cm"> * TLB entries are defined by a &quot;high&quot; tag portion and a &quot;low&quot; data</span>
<span class="cm"> * portion.  On all architectures, the data portion is 32-bits.</span>
<span class="cm"> *</span>
<span class="cm"> * TLB entries are managed entirely under software control by reading,</span>
<span class="cm"> * writing, and searchoing using the 4xx-specific tlbre, tlbwr, and tlbsx</span>
<span class="cm"> * instructions.</span>
<span class="cm"> */</span>

<span class="cp">#define	TLB_LO          1</span>
<span class="cp">#define	TLB_HI          0</span>

<span class="cp">#define	TLB_DATA        TLB_LO</span>
<span class="cp">#define	TLB_TAG         TLB_HI</span>

<span class="cm">/* Tag portion */</span>

<span class="cp">#define TLB_EPN_MASK    0xFFFFFC00      </span><span class="cm">/* Effective Page Number */</span><span class="cp"></span>
<span class="cp">#define TLB_PAGESZ_MASK 0x00000380</span>
<span class="cp">#define TLB_PAGESZ(x)   (((x) &amp; 0x7) &lt;&lt; 7)</span>
<span class="cp">#define   PAGESZ_1K		0</span>
<span class="cp">#define   PAGESZ_4K             1</span>
<span class="cp">#define   PAGESZ_16K            2</span>
<span class="cp">#define   PAGESZ_64K            3</span>
<span class="cp">#define   PAGESZ_256K           4</span>
<span class="cp">#define   PAGESZ_1M             5</span>
<span class="cp">#define   PAGESZ_4M             6</span>
<span class="cp">#define   PAGESZ_16M            7</span>
<span class="cp">#define TLB_VALID       0x00000040      </span><span class="cm">/* Entry is valid */</span><span class="cp"></span>

<span class="cm">/* Data portion */</span>

<span class="cp">#define TLB_RPN_MASK    0xFFFFFC00      </span><span class="cm">/* Real Page Number */</span><span class="cp"></span>
<span class="cp">#define TLB_PERM_MASK   0x00000300</span>
<span class="cp">#define TLB_EX          0x00000200      </span><span class="cm">/* Instruction execution allowed */</span><span class="cp"></span>
<span class="cp">#define TLB_WR          0x00000100      </span><span class="cm">/* Writes permitted */</span><span class="cp"></span>
<span class="cp">#define TLB_ZSEL_MASK   0x000000F0</span>
<span class="cp">#define TLB_ZSEL(x)     (((x) &amp; 0xF) &lt;&lt; 4)</span>
<span class="cp">#define TLB_ATTR_MASK   0x0000000F</span>
<span class="cp">#define TLB_W           0x00000008      </span><span class="cm">/* Caching is write-through */</span><span class="cp"></span>
<span class="cp">#define TLB_I           0x00000004      </span><span class="cm">/* Caching is inhibited */</span><span class="cp"></span>
<span class="cp">#define TLB_M           0x00000002      </span><span class="cm">/* Memory is coherent */</span><span class="cp"></span>
<span class="cp">#define TLB_G           0x00000001      </span><span class="cm">/* Memory is guarded from prefetch */</span><span class="cp"></span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">id</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">active</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">vdso_base</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mm_context_t</span><span class="p">;</span>

<span class="cp">#endif </span><span class="cm">/* !__ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#define mmu_virtual_psize	MMU_PAGE_4K</span>
<span class="cp">#define mmu_linear_psize	MMU_PAGE_256M</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_POWERPC_MMU_40X_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
