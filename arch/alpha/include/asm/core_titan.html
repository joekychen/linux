<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › alpha › include › asm › core_titan.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>core_titan.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __ALPHA_TITAN__H__</span>
<span class="cp">#define __ALPHA_TITAN__H__</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;asm/compiler.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * TITAN is the internal names for a core logic chipset which provides</span>
<span class="cm"> * memory controller and PCI/AGP access for 21264 based systems.</span>
<span class="cm"> *</span>
<span class="cm"> * This file is based on:</span>
<span class="cm"> *</span>
<span class="cm"> * Titan Chipset Engineering Specification</span>
<span class="cm"> * Revision 0.12</span>
<span class="cm"> * 13 July 1999</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cm">/* XXX: Do we need to conditionalize on this?  */</span>
<span class="cp">#ifdef USE_48_BIT_KSEG</span>
<span class="cp">#define TI_BIAS 0x80000000000UL</span>
<span class="cp">#else</span>
<span class="cp">#define TI_BIAS 0x10000000000UL</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * CChip, DChip, and PChip registers</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">csr</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">64</span><span class="p">)));</span>
<span class="p">}</span> <span class="n">titan_64</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">titan_64</span>	<span class="n">csc</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">mtr</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">misc</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">mpd</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">aar0</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">aar1</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">aar2</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">aar3</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dim0</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dim1</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dir0</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dir1</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">drir</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">prben</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">iic0</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">iic1</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">mpr0</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">mpr1</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">mpr2</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">mpr3</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">rsvd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="n">titan_64</span>	<span class="n">ttr</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">tdr</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dim2</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dim3</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dir2</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dir3</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">iic2</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">iic3</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">pwr</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">reserved</span><span class="p">[</span><span class="mi">17</span><span class="p">];</span>
	<span class="n">titan_64</span>	<span class="n">cmonctla</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">cmonctlb</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">cmoncnt01</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">cmoncnt23</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">cpen</span><span class="p">;</span>
<span class="p">}</span> <span class="n">titan_cchip</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">titan_64</span>	<span class="n">dsc</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">str</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">drev</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">dsc2</span><span class="p">;</span>
<span class="p">}</span> <span class="n">titan_dchip</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">titan_64</span>	<span class="n">wsba</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">titan_64</span>	<span class="n">wsm</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">titan_64</span>	<span class="n">tba</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="n">titan_64</span>	<span class="n">pctl</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">plat</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">reserved0</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="k">union</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">titan_64</span>	<span class="n">serror</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">serren</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">serrset</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">reserved0</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">gperror</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">gperren</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">gperrset</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">reserved1</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">gtlbiv</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">gtlbia</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">reserved2</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
			<span class="n">titan_64</span>	<span class="n">sctl</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">reserved3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">g</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">titan_64</span>	<span class="n">agperror</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">agperren</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">agperrset</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">agplastwr</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">aperror</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">aperren</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">aperrset</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">reserved0</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">atlbiv</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">atlbia</span><span class="p">;</span>
			<span class="n">titan_64</span>	<span class="n">reserved1</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">a</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">port_specific</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">sprst</span><span class="p">;</span>
	<span class="n">titan_64</span>	<span class="n">reserved1</span><span class="p">[</span><span class="mi">31</span><span class="p">];</span>
<span class="p">}</span> <span class="n">titan_pachip_port</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">titan_pachip_port</span>	<span class="n">g_port</span><span class="p">;</span>
	<span class="n">titan_pachip_port</span>	<span class="n">a_port</span><span class="p">;</span>
<span class="p">}</span> <span class="n">titan_pachip</span><span class="p">;</span>

<span class="cp">#define TITAN_cchip	((titan_cchip  *)(IDENT_ADDR+TI_BIAS+0x1A0000000UL))</span>
<span class="cp">#define TITAN_dchip    	((titan_dchip  *)(IDENT_ADDR+TI_BIAS+0x1B0000800UL))</span>
<span class="cp">#define TITAN_pachip0 	((titan_pachip *)(IDENT_ADDR+TI_BIAS+0x180000000UL))</span>
<span class="cp">#define TITAN_pachip1 	((titan_pachip *)(IDENT_ADDR+TI_BIAS+0x380000000UL))</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="n">TITAN_agp</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">TITAN_bootcpu</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * TITAN PA-chip Window Space Base Address register.</span>
<span class="cm"> * (WSBA[0-2])</span>
<span class="cm"> */</span>
<span class="cp">#define wsba_m_ena 0x1                </span>
<span class="cp">#define wsba_m_sg 0x2</span>
<span class="cp">#define wsba_m_addr 0xFFF00000  </span>
<span class="cp">#define wmask_k_sz1gb 0x3FF00000                   </span>
<span class="k">union</span> <span class="n">TPAchipWSBA</span> <span class="p">{</span>
	<span class="k">struct</span>  <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="n">wsba_v_ena</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="n">wsba_v_sg</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="n">wsba_v_rsvd1</span> <span class="o">:</span> <span class="mi">18</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="n">wsba_v_addr</span> <span class="o">:</span> <span class="mi">12</span><span class="p">;</span>
		<span class="kt">unsigned</span> <span class="n">wsba_v_rsvd2</span> <span class="o">:</span> <span class="mi">32</span><span class="p">;</span>
        <span class="p">}</span> <span class="n">wsba_r_bits</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">wsba_q_whole</span> <span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * TITAN PA-chip Control Register</span>
<span class="cm"> * This definition covers both the G-Port GPCTL and the A-PORT APCTL.</span>
<span class="cm"> * Bits &lt;51:0&gt; are the same in both cases. APCTL&lt;63:52&gt; are only </span>
<span class="cm"> * applicable to AGP.</span>
<span class="cm"> */</span>
<span class="cp">#define pctl_m_fbtb 			0x00000001</span>
<span class="cp">#define pctl_m_thdis 			0x00000002</span>
<span class="cp">#define pctl_m_chaindis 		0x00000004</span>
<span class="cp">#define pctl_m_tgtlat 			0x00000018</span>
<span class="cp">#define pctl_m_hole  	  		0x00000020</span>
<span class="cp">#define pctl_m_mwin 	  		0x00000040</span>
<span class="cp">#define pctl_m_arbena 	  		0x00000080</span>
<span class="cp">#define pctl_m_prigrp 	  		0x0000FF00</span>
<span class="cp">#define pctl_m_ppri 	  		0x00010000</span>
<span class="cp">#define pctl_m_pcispd66  		0x00020000</span>
<span class="cp">#define pctl_m_cngstlt	  		0x003C0000</span>
<span class="cp">#define pctl_m_ptpdesten 		0x3FC00000</span>
<span class="cp">#define pctl_m_dpcen			0x40000000</span>
<span class="cp">#define pctl_m_apcen		0x0000000080000000UL</span>
<span class="cp">#define pctl_m_dcrtv		0x0000000300000000UL</span>
<span class="cp">#define pctl_m_en_stepping	0x0000000400000000UL</span>
<span class="cp">#define apctl_m_rsvd1		0x000FFFF800000000UL</span>
<span class="cp">#define apctl_m_agp_rate	0x0030000000000000UL</span>
<span class="cp">#define apctl_m_agp_sba_en	0x0040000000000000UL</span>
<span class="cp">#define apctl_m_agp_en		0x0080000000000000UL</span>
<span class="cp">#define apctl_m_rsvd2		0x0100000000000000UL</span>
<span class="cp">#define apctl_m_agp_present	0x0200000000000000UL</span>
<span class="cp">#define apctl_agp_hp_rd		0x1C00000000000000UL</span>
<span class="cp">#define apctl_agp_lp_rd		0xE000000000000000UL</span>
<span class="cp">#define gpctl_m_rsvd		0xFFFFFFF800000000UL</span>
<span class="k">union</span> <span class="n">TPAchipPCTL</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_fbtb</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [0]     */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_thdis</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [1]     */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_chaindis</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [2]     */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_tgtlat</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>		<span class="cm">/* A/G [4:3]   */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_hole</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [5]     */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_mwin</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [6]     */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_arbena</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [7]     */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_prigrp</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>		<span class="cm">/* A/G [15:8]  */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_ppri</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [16]    */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_pcispd66</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [17]    */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_cngstlt</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>		<span class="cm">/* A/G [21:18] */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_ptpdesten</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>		<span class="cm">/* A/G [29:22] */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_dpcen</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [30]    */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_apcen</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [31]    */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_dcrtv</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>		<span class="cm">/* A/G [33:32] */</span>
		<span class="kt">unsigned</span> <span class="n">pctl_v_en_stepping</span> <span class="o">:</span><span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A/G [34]    */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_rsvd1</span> <span class="o">:</span> <span class="mi">17</span><span class="p">;</span>		<span class="cm">/* A   [51:35] */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_agp_rate</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>		<span class="cm">/* A   [53:52] */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_agp_sba_en</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>	<span class="cm">/* A   [54]    */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_agp_en</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A   [55]    */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_rsvd2</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* A   [56]    */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_agp_present</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>	<span class="cm">/* A   [57]    */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_agp_hp_rd</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>		<span class="cm">/* A   [60:58] */</span>
		<span class="kt">unsigned</span> <span class="n">apctl_v_agp_lp_rd</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>		<span class="cm">/* A   [63:61] */</span>
	<span class="p">}</span> <span class="n">pctl_r_bits</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pctl_l_whole</span> <span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pctl_q_whole</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * SERROR / SERREN / SERRSET</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">TPAchipSERR</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_lost_uecc</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [0]		*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_uecc</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [1]  	*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_cre</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [2]		*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_nxio</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [3]		*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_lost_cre</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [4]		*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_rsvd0</span> <span class="o">:</span> <span class="mi">10</span><span class="p">;</span>		<span class="cm">/* [14:5]	*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_addr</span> <span class="o">:</span> <span class="mi">32</span><span class="p">;</span>		<span class="cm">/* [46:15]	*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_rsvd1</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>		<span class="cm">/* [51:47]	*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_source</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>		<span class="cm">/* [53:52]	*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_cmd</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>		<span class="cm">/* [55:54]	*/</span>
		<span class="kt">unsigned</span> <span class="n">serr_v_syn</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>		<span class="cm">/* [63:56]	*/</span>
	<span class="p">}</span> <span class="n">serr_r_bits</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">serr_l_whole</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">serr_q_whole</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * GPERROR / APERROR / GPERREN / APERREN / GPERRSET / APERRSET</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">TPAchipPERR</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_lost</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>	     	<span class="cm">/* [0]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_serr</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [1]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_perr</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [2]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_dcrto</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [3]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_sge</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [4]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_ape</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [5]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_ta</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [6]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_dpe</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [7]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_nds</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [8]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_iptpr</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [9]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_iptpw</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [10] 	*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_rsvd0</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>		<span class="cm">/* [13:11]	*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_addr</span> <span class="o">:</span> <span class="mi">33</span><span class="p">;</span>		<span class="cm">/* [46:14]	*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_dac</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [47]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_mwin</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [48]		*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_rsvd1</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>		<span class="cm">/* [51:49]	*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_cmd</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>		<span class="cm">/* [55:52]	*/</span>
		<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_v_rsvd2</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>		<span class="cm">/* [63:56]	*/</span>
	<span class="p">}</span> <span class="n">perr_r_bits</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">perr_l_whole</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">perr_q_whole</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * AGPERROR / AGPERREN / AGPERRSET</span>
<span class="cm"> */</span>
<span class="k">union</span> <span class="n">TPAchipAGPERR</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="p">{</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_lost</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [0]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_lpqfull</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [1]		*/</span>
		<span class="kt">unsigned</span> <span class="n">apgerr_v_hpqfull</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [2]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_rescmd</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [3]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_ipte</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [4]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_ptp</span> <span class="o">:</span>	<span class="mi">1</span><span class="p">;</span>      	<span class="cm">/* [5]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_nowindow</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [6]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_rsvd0</span> <span class="o">:</span> <span class="mi">8</span><span class="p">;</span>		<span class="cm">/* [14:7]	*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_addr</span> <span class="o">:</span> <span class="mi">32</span><span class="p">;</span>		<span class="cm">/* [46:15]	*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_rsvd1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [47]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_dac</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [48]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_mwin</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [49]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_cmd</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>		<span class="cm">/* [52:50]	*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_length</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>		<span class="cm">/* [58:53]	*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_fence</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>		<span class="cm">/* [59]		*/</span>
		<span class="kt">unsigned</span> <span class="n">agperr_v_rsvd2</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>		<span class="cm">/* [63:60]	*/</span>
	<span class="p">}</span> <span class="n">agperr_r_bits</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">agperr_l_whole</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">agperr_q_whole</span><span class="p">;</span>
<span class="p">};</span>
<span class="cm">/*</span>
<span class="cm"> * Memory spaces:</span>
<span class="cm"> * Hose numbers are assigned as follows:</span>
<span class="cm"> *		0 - pachip 0 / G Port</span>
<span class="cm"> *		1 - pachip 1 / G Port</span>
<span class="cm"> * 		2 - pachip 0 / A Port</span>
<span class="cm"> *      	3 - pachip 1 / A Port</span>
<span class="cm"> */</span>
<span class="cp">#define TITAN_HOSE_SHIFT       (33) </span>
<span class="cp">#define TITAN_HOSE(h)		(((unsigned long)(h)) &lt;&lt; TITAN_HOSE_SHIFT)</span>
<span class="cp">#define TITAN_BASE		(IDENT_ADDR + TI_BIAS)</span>
<span class="cp">#define TITAN_MEM(h)	     	(TITAN_BASE+TITAN_HOSE(h)+0x000000000UL)</span>
<span class="cp">#define _TITAN_IACK_SC(h)    	(TITAN_BASE+TITAN_HOSE(h)+0x1F8000000UL)</span>
<span class="cp">#define TITAN_IO(h)	     	(TITAN_BASE+TITAN_HOSE(h)+0x1FC000000UL)</span>
<span class="cp">#define TITAN_CONF(h)	     	(TITAN_BASE+TITAN_HOSE(h)+0x1FE000000UL)</span>

<span class="cp">#define TITAN_HOSE_MASK		TITAN_HOSE(3)</span>
<span class="cp">#define TITAN_IACK_SC	     	_TITAN_IACK_SC(0) </span><span class="cm">/* hack! */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * The canonical non-remaped I/O and MEM addresses have these values</span>
<span class="cm"> * subtracted out.  This is arranged so that folks manipulating ISA</span>
<span class="cm"> * devices can use their familiar numbers and have them map to bus 0.</span>
<span class="cm"> */</span>

<span class="cp">#define TITAN_IO_BIAS		TITAN_IO(0)</span>
<span class="cp">#define TITAN_MEM_BIAS		TITAN_MEM(0)</span>

<span class="cm">/* The IO address space is larger than 0xffff */</span>
<span class="cp">#define TITAN_IO_SPACE		(TITAN_CONF(0) - TITAN_IO(0))</span>

<span class="cm">/* TIG Space */</span>
<span class="cp">#define TITAN_TIG_SPACE		(TITAN_BASE + 0x100000000UL)</span>

<span class="cm">/* Offset between ram physical addresses and pci64 DAC bus addresses.  */</span>
<span class="cm">/* ??? Just a guess.  Ought to confirm it hasn&#39;t been moved.  */</span>
<span class="cp">#define TITAN_DAC_OFFSET	(1UL &lt;&lt; 40)</span>

<span class="cm">/*</span>
<span class="cm"> * Data structure for handling TITAN machine checks:</span>
<span class="cm"> */</span>
<span class="cp">#define SCB_Q_SYSERR	0x620</span>
<span class="cp">#define SCB_Q_PROCERR	0x630</span>
<span class="cp">#define SCB_Q_SYSMCHK	0x660</span>
<span class="cp">#define SCB_Q_PROCMCHK	0x670</span>
<span class="cp">#define SCB_Q_SYSEVENT	0x680	</span><span class="cm">/* environmental / system management */</span><span class="cp"></span>
<span class="k">struct</span> <span class="n">el_TITAN_sysdata_mcheck</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">summary</span><span class="p">;</span>	<span class="cm">/* 0x00 */</span>
	<span class="n">u64</span> <span class="n">c_dirx</span><span class="p">;</span>	<span class="cm">/* 0x08 */</span>
	<span class="n">u64</span> <span class="n">c_misc</span><span class="p">;</span>	<span class="cm">/* 0x10 */</span>
	<span class="n">u64</span> <span class="n">p0_serror</span><span class="p">;</span>	<span class="cm">/* 0x18 */</span>
	<span class="n">u64</span> <span class="n">p0_gperror</span><span class="p">;</span> <span class="cm">/* 0x20 */</span>
	<span class="n">u64</span> <span class="n">p0_aperror</span><span class="p">;</span> <span class="cm">/* 0x28 */</span>
	<span class="n">u64</span> <span class="n">p0_agperror</span><span class="p">;</span><span class="cm">/* 0x30 */</span>
	<span class="n">u64</span> <span class="n">p1_serror</span><span class="p">;</span>	<span class="cm">/* 0x38 */</span>
	<span class="n">u64</span> <span class="n">p1_gperror</span><span class="p">;</span> <span class="cm">/* 0x40 */</span>
	<span class="n">u64</span> <span class="n">p1_aperror</span><span class="p">;</span> <span class="cm">/* 0x48 */</span>
	<span class="n">u64</span> <span class="n">p1_agperror</span><span class="p">;</span><span class="cm">/* 0x50 */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * System area for a privateer 680 environmental/system management mcheck </span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">el_PRIVATEER_envdata_mcheck</span> <span class="p">{</span>
	<span class="n">u64</span> <span class="n">summary</span><span class="p">;</span>	<span class="cm">/* 0x00 */</span>
	<span class="n">u64</span> <span class="n">c_dirx</span><span class="p">;</span>	<span class="cm">/* 0x08 */</span>
	<span class="n">u64</span> <span class="n">smir</span><span class="p">;</span>	<span class="cm">/* 0x10 */</span>
	<span class="n">u64</span> <span class="n">cpuir</span><span class="p">;</span>	<span class="cm">/* 0x18 */</span>
	<span class="n">u64</span> <span class="n">psir</span><span class="p">;</span>	<span class="cm">/* 0x20 */</span>
	<span class="n">u64</span> <span class="n">fault</span><span class="p">;</span>	<span class="cm">/* 0x28 */</span>
	<span class="n">u64</span> <span class="n">sys_doors</span><span class="p">;</span>	<span class="cm">/* 0x30 */</span>
	<span class="n">u64</span> <span class="n">temp_warn</span><span class="p">;</span>	<span class="cm">/* 0x38 */</span>
	<span class="n">u64</span> <span class="n">fan_ctrl</span><span class="p">;</span>	<span class="cm">/* 0x40 */</span>
	<span class="n">u64</span> <span class="n">code</span><span class="p">;</span>	<span class="cm">/* 0x48 */</span>
	<span class="n">u64</span> <span class="n">reserved</span><span class="p">;</span>	<span class="cm">/* 0x50 */</span>
<span class="p">};</span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#ifndef __EXTERN_INLINE</span>
<span class="cp">#define __EXTERN_INLINE extern inline</span>
<span class="cp">#define __IO_EXTERN_INLINE</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * I/O functions:</span>
<span class="cm"> *</span>
<span class="cm"> * TITAN, a 21??? PCI/memory support chipset for the EV6 (21264)</span>
<span class="cm"> * can only use linear accesses to get at PCI/AGP memory and I/O spaces.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Memory functions.  all accesses are done through linear space.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">titan_ioportmap</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">titan_ioremap</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">size</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">titan_iounmap</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>

<span class="n">__EXTERN_INLINE</span> <span class="kt">int</span> <span class="nf">titan_is_ioaddr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">addr</span> <span class="o">&gt;=</span> <span class="n">TITAN_BASE</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">titan_is_mmio</span><span class="p">(</span><span class="k">const</span> <span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>

<span class="cp">#undef __IO_PREFIX</span>
<span class="cp">#define __IO_PREFIX		titan</span>
<span class="cp">#define titan_trivial_rw_bw	1</span>
<span class="cp">#define titan_trivial_rw_lq	1</span>
<span class="cp">#define titan_trivial_io_bw	1</span>
<span class="cp">#define titan_trivial_io_lq	1</span>
<span class="cp">#define titan_trivial_iounmap	0</span>
<span class="cp">#include &lt;asm/io_trivial.h&gt;</span>

<span class="cp">#ifdef __IO_EXTERN_INLINE</span>
<span class="cp">#undef __EXTERN_INLINE</span>
<span class="cp">#undef __IO_EXTERN_INLINE</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __ALPHA_TITAN__H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
