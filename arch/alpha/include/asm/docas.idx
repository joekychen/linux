f | io.h | s | 14K | 482 | Michael Cree | mcree@orcon.net.nz | 1337884079 |  | alpha: add io{read,write}{16,32}be functions  These functions are used in some PCI drivers with big-endian MMIO space.  Admittedly it is almost certain that no one this side of the Moon would use such a card in an Alpha but it does get us closer to being able to build allyesconfig or allmodconfig, and it enables the Debian default generic config to build.  Tested-by: Ra√∫l Porcel <armin76@gentoo.org> Signed-off-by: Michael Cree <mcree@orcon.net.nz> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | core_t2.h | s | 19K | 529 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | kmap_types.h | s | 226B | 9 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | pci.h | s | 3.6K | 106 | Bjorn Helgaas | bhelgaas@google.com | 1330053544 |  | PCI: collapse pcibios_resource_to_bus  Everybody uses the generic pcibios_resource_to_bus() supplied by the core now, so remove the ARCH_HAS_GENERIC_PCI_OFFSETS used during conversion.  Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | sections.h | s | 128B | 5 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | reg.h | s | 942B | 47 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cputime.h | s | 118B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | agp.h | s | 418B | 13 | David Woodhouse | David.Woodhouse@intel.com | 1249286700 |  | agp: kill phys_to_gart() and gart_to_phys()  There seems to be no reason for these -- they're a 1:1 mapping on all platforms.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | barrier.h | s | 751B | 27 | Ivan Kokshaysky | ink@jurassic.park.msu.ru | 1241303770 |  | alpha: futex implementation  Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Al Viro <viro@ZenIV.linux.org.uk> Cc: Richard Henderson <rth@twiddle.net Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | compiler.h | s | 4.4K | 120 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | irq_regs.h | s | 34B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmzone.h | s | 3.0K | 91 | KAMEZAWA Hiroyuki | kamezawa.hiroyu@jp.fujitsu.com | 1309209189 |  | Fix node_start/end_pfn() definition for mm/page_cgroup.c  commit 21a3c96 uses node_start/end_pfn(nid) for detection start/end of nodes. But, it's not defined in linux/mmzone.h but defined in /arch/???/include/mmzone.h which is included only under CONFIG_NEED_MULTIPLE_NODES=y.  Then, we see   mm/page_cgroup.c: In function 'page_cgroup_init':   mm/page_cgroup.c:308: error: implicit declaration of function 'node_start_pfn'   mm/page_cgroup.c:309: error: implicit declaration of function 'node_end_pfn'  So, fixiing page_cgroup.c is an idea...  But node_start_pfn()/node_end_pfn() is a very generic macro and should be implemented in the same manner for all archs. (m32r has different implementation...)  This patch removes definitions of node_start/end_pfn() in each archs and defines a unified one in linux/mmzone.h. It's not under CONFIG_NEED_MULTIPLE_NODES, now.  A result of macro expansion is here (mm/page_cgroup.c)  for !NUMA  start_pfn = ((&contig_page_data)->node_start_pfn);   end_pfn = ({ pg_data_t *__pgdat = (&contig_page_data); __pgdat->node_start_pfn + __pgdat->node_spanned_pages;});  for NUMA (x86-64)   start_pfn = ((node_data[nid])->node_start_pfn);   end_pfn = ({ pg_data_t *__pgdat = (node_data[nid]); __pgdat->node_start_pfn + __pgdat->node_spanned_pages;});  Changelog:  - fixed to avoid using "nid" twice in node_end_pfn() macro.  Reported-and-acked-by: Randy Dunlap <randy.dunlap@oracle.com> Reported-and-tested-by: Ingo Molnar <mingo@elte.hu> Acked-by: Mel Gorman <mgorman@suse.de> Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core_tsunami.h | s | 8.2K | 300 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1268966128 |  | alpha: fix compile errors in dma-mapping-common.h  The commit c186caca3dbe7f44da624cb4f9d78e1b1dfb13b8 leads to the following errors with CONFIG_ALPHA_{TSUNAMI, TITAN, RAWHIDE, MARVEL}: /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h: In function `dma_map_sg_attrs': /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h:49: error: implicit declaration of function `for_each_sg' /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h:50: error: syntax error before "kmemcheck_mark_initialized"  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Reported-by: Michael Cree <mcree@orcon.net.nz> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | delay.h | s | 225B | 7 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | console.h | s | 2.0K | 66 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cacheflush.h | s | 2.6K | 65 | Ryota Ozaki | ozaki.ryota@gmail.com | 1297958079 |  | mm: Fix out-of-date comments which refers non-existent functions  do_file_page and do_no_page don't exist anymore, but some comments still refers them. The patch fixes them by replacing them with existing ones.  Signed-off-by: Ryota Ozaki <ozaki.ryota@gmail.com> Acked-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com> Reviewed-by: Minchan Kim <minchan.kim@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | core_apecs.h | s | 16K | 448 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | segment.h | s | 132B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | current.h | s | 197B | 6 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | elf.h | s | 5.7K | 132 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | tlb.h | s | 434B | 10 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1248721838 |  | mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  Upcoming paches to support the new 64-bit "BookE" powerpc architecture will need to have the virtual address corresponding to PTE page when freeing it, due to the way the HW table walker works.  Basically, the TLB can be loaded with "large" pages that cover the whole virtual space (well, sort-of, half of it actually) represented by a PTE page, and which contain an "indirect" bit indicating that this TLB entry RPN points to an array of PTEs from which the TLB can then create direct entries. Thus, in order to invalidate those when PTE pages are deleted, we need the virtual address to pass to tlbilx or tlbivax instructions.  The old trick of sticking it somewhere in the PTE page struct page sucks too much, the address is almost readily available in all call sites and almost everybody implemets these as macros, so we may as well add the argument everywhere. I added it to the pmd and pud variants for consistency.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: David Howells <dhowells@redhat.com> [MN10300 & FRV] Acked-by: Nick Piggin <npiggin@suse.de> Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [s390] Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | regdef.h | s | 1004B | 37 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | core_irongate.h | s | 6.6K | 183 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unaligned.h | s | 301B | 8 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | resource.h | s | 698B | 18 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | serial.h | s | 1006B | 25 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bitsperlong.h | s | 174B | 5 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | err_ev7.h | s | 4.3K | 187 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | termios.h | s | 4.1K | 131 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ucontext.h | s | 309B | 11 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ioctls.h | s | 3.7K | 98 | Kay Sievers | kay.sievers@vrfy.org | 1297980990 |  | tty: add TIOCVHANGUP to allow clean tty shutdown of all ttys  This is useful for system management software so that it can kick off things like gettys and everything that's started from a tty, before we reuse it from/for something else or shut it down.  Without this ioctl it would have to temporarily become the owner of the tty, then call vhangup() and then give it up again.  Cc: Lennart Poettering <lennart@poettering.net> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | smp.h | s | 1.3K | 44 | Stephen Boyd | sboyd@codeaurora.org | 1306337983 |  | Remove unused PROC_CHANGE_PENALTY constant  This constant hasn't been used since before the git era (2.6.12) and thus can be dropped.  Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Russell King <rmk@arm.linux.org.uk> Cc: Richard Weinberger <richard@nod.at> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core_titan.h | s | 11K | 376 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1268966128 |  | alpha: fix compile errors in dma-mapping-common.h  The commit c186caca3dbe7f44da624cb4f9d78e1b1dfb13b8 leads to the following errors with CONFIG_ALPHA_{TSUNAMI, TITAN, RAWHIDE, MARVEL}: /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h: In function `dma_map_sg_attrs': /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h:49: error: implicit declaration of function `for_each_sg' /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h:50: error: syntax error before "kmemcheck_mark_initialized"  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Reported-by: Michael Cree <mcree@orcon.net.nz> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | jensen.h | s | 8.3K | 288 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core_mcpcia.h | s | 11K | 317 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | dma-mapping.h | s | 1.4K | 39 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1332945396 |  | Alpha: adapt for dma_map_ops changes  Adapt core Alpha architecture code for dma_map_ops changes: replace alloc/free_coherent with generic alloc/free methods.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Reviewed-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Matt Turner <mattst88@gmail.com>
f | siginfo.h | s | 169B | 6 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | a.out-core.h | s | 2.4K | 73 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | machvec.h | s | 3.6K | 110 | Al Viro | viro@ZenIV.linux.org.uk | 1332199237 |  | constify struct pci_dev * in obvious cases  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | core_lca.h | s | 11K | 314 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | core_wildfire.h | s | 8.4K | 267 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | agp_backend.h | s | 909B | 37 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | types.h | s | 497B | 15 | Al Viro | viro@zeniv.linux.org.uk | 1325649317 |  | consolidate umode_t declarations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | kdebug.h | s | 32B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core_cia.h | s | 15K | 436 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bugs.h | s | 294B | 17 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bitops.h | s | 8.9K | 391 | Akinobu Mita | akinobu.mita@gmail.com | 1311724186 |  | asm-generic: add another generic ext2 atomic bitops  The majority of architectures implement ext2 atomic bitops as test_and_{set,clear}_bit() without spinlock.  This adds this type of generic implementation in ext2-atomic-setbit.h and use it wherever possible.  Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com> Suggested-by: Andreas Dilger <adilger@dilger.ca> Suggested-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | hw_irq.h | s | 263B | 10 | Michael Cree | mcree@orcon.net.nz | 1281411903 |  | alpha: add performance monitor interrupt counter  The following patches implement hardware performance events for the Alpha EV67 and later CPUs.  I have had this running on a Compaq XP1000 (EV67, single CPU) for a few days now.  Pretty cool -- discovered that the glibc exp2() library routine uses on average 985 cycles to execute 777 CPU instructions whereas Compaq's CPML library version of exp2() uses on average 32 cycles to execute 47 CPU instructions to achieve the same thing!  This patch:  Add performance monitor interrupt counternd and export the count to user space via /proc/interrupts.  Signed-off-by: Michael Cree <mcree@orcon.net.nz> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Cc: Jay Estabrook <jay.estabrook@hp.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core_marvel.h | s | 9.1K | 320 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1268966128 |  | alpha: fix compile errors in dma-mapping-common.h  The commit c186caca3dbe7f44da624cb4f9d78e1b1dfb13b8 leads to the following errors with CONFIG_ALPHA_{TSUNAMI, TITAN, RAWHIDE, MARVEL}: /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h: In function `dma_map_sg_attrs': /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h:49: error: implicit declaration of function `for_each_sg' /home/fujita/git/linux-2.6/include/asm-generic/dma-mapping-common.h:50: error: syntax error before "kmemcheck_mark_initialized"  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Reported-by: Michael Cree <mcree@orcon.net.nz> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | dma.h | s | 12K | 329 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | errno.h | s | 5.2K | 107 | Huang Ying | ying.huang@intel.com | 1300378107 |  | mm: make __get_user_pages return -EHWPOISON for HWPOISON page optionally  Make __get_user_pages return -EHWPOISON for HWPOISON page only if FOLL_HWPOISON is specified.  With this patch, the interested callers can distinguish HWPOISON pages from general FAULT pages, while other callers will still get -EFAULT for all these pages, so the user space interface need not to be changed.  This feature is needed by KVM, where UCR MCE should be relayed to guest for HWPOISON page, while instruction emulation and MMIO will be tried for general FAULT page.  The idea comes from Andrew Morton.  Signed-off-by: Huang Ying <ying.huang@intel.com> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | setup.h | s | 1.4K | 35 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | checksum.h | s | 2.0K | 62 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gct.h | s | 1003B | 48 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ptrace.h | s | 1.9K | 73 | Mike Frysinger | vapier@gentoo.org | 1311724183 |  | ptrace: unify show_regs() prototype  [ poleg@redhat.com: no need to declare show_regs() in ptrace.h, sched.h does this ] Signed-off-by: Mike Frysinger <vapier@gentoo.org> Cc: Tejun Heo <tj@kernel.org> Signed-off-by: Oleg Nesterov <oleg@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmu_context.h | s | 7.0K | 224 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | mc146818rtc.h | s | 641B | 23 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ftrace.h | s | 12B | 1 | Uwe Kleine-Koenig | u.kleine-koenig@pengutronix.de | 1236030577 |  | tracing: make CALLER_ADDRx overwriteable  The current definition of CALLER_ADDRx isn't suitable for all platforms. E.g. for ARM __builtin_return_address(N) doesn't work for N > 0 and AFAIK for powerpc there are no frame pointers needed to have a working __builtin_return_address.  This patch allows defining the CALLER_ADDRx macros in <asm/ftrace.h> and let these take precedence.  Because now <asm/ftrace.h> is included unconditionally in <linux/ftrace.h> all archs that don't already had this include get an empty one for free.  Signed-off-by: Uwe Kleine-Koenig <u.kleine-koenig@pengutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Reviewed-by: KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com> Signed-off-by: Steven Rostedt <srostedt@redhat.com>
f | cache.h | s | 468B | 18 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1283309131 |  | alpha: remove homegrown L1_CACHE_ALIGN macro  Let's use the standard L1_CACHE_ALIGN macro instead.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | floppy.h | s | 3.2K | 93 | Phil Carmody | ext-phil.2.carmody@nokia.com | 1311250200 |  | treewide: fix potentially dangerous trailing ';' in #defined values/expressions  All these are instances of   #define NAME value; or   #define NAME(params_opt) value;  These of course fail to build when used in contexts like   if(foo $OP NAME)   while(bar $OP NAME) and may silently generate the wrong code in contexts such as   foo = NAME + 1;    /* foo = value; + 1; */   bar = NAME - 1;    /* bar = value; - 1; */   baz = NAME & quux; /* baz = value; & quux; */  Reported on comp.lang.c, Message-ID: <ab0d55fe-25e5-482b-811e-c475aa6065c3@c29g2000yqd.googlegroups.com> Initial analysis of the dangers provided by Keith Thompson in that thread.  There are many more instances of more complicated macros having unnecessary trailing semicolons, but this pile seems to be all of the cases of simple values suffering from the problem. (Thus things that are likely to be found in one of the contexts above, more complicated ones aren't.)  Signed-off-by: Phil Carmody <ext-phil.2.carmody@nokia.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | wrperfmon.h | s | 2.5K | 73 | Michael Cree | mcree@orcon.net.nz | 1281411904 |  | alpha: add wrperfmon.h header file to aid use of wrperfmon PALcall  Signed-off-by: Michael Cree <mcree@orcon.net.nz> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Cc: Jay Estabrook <jay.estabrook@hp.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | user.h | s | 2.1K | 48 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | termbits.h | s | 4.6K | 181 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | statfs.h | s | 251B | 8 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466282 |  | headers_check fix: alpha, statfs.h  fix the following 'make headers_check' warning:    usr/include/asm-alpha/statfs.h:6: found __[us]{8,16,32,64} type without #include <linux/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | xor.h | s | 21K | 847 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | exec.h | s | 108B | 4 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | bug.h | s | 532B | 18 | David Daney | ddaney@caviumnetworks.com | 1261116892 |  | alpha: Convert BUG() to use unreachable()  Use the new unreachable() macro instead of for(;;);  Signed-off-by: David Daney <ddaney@caviumnetworks.com> CC: Richard Henderson <rth@twiddle.net> CC: Ivan Kokshaysky <ink@jurassic.park.msu.ru> CC: linux-alpha@vger.kernel.org Signed-off-by: Matt Turner <mattst88@gmail.com>
f | hardirq.h | s | 184B | 6 | Christoph Hellwig | hch@lst.de | 1253629063 |  | alpha: convert to asm-generic/hardirq.h  Signed-off-by: Christoph Hellwig <hch@lst.de> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mce.h | s | 4.0K | 78 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | sigcontext.h | s | 828B | 31 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | futex.h | s | 2.8K | 105 | Andrew Morton | akpm@linux-foundation.org | 1330991383 |  | alpha: fix 32/64-bit bug in futex support  Michael Cree said:  : : I have noticed some user space problems (pulseaudio crashes in pthread : : code, glibc/nptl test suite failures, java compiler freezes on SMP alpha : : systems) that arise when using a 2.6.39 or later kernel on Alpha. : : Bisecting between 2.6.38 and 2.6.39 (using glibc/nptl test suite as : : criterion for good/bad kernel) eventually leads to: : : : : 8d7718aa082aaf30a0b4989e1f04858952f941bc is the first bad commit : : commit 8d7718aa082aaf30a0b4989e1f04858952f941bc : : Author: Michel Lespinasse <walken@google.com> : : Date:   Thu Mar 10 18:50:58 2011 -0800 : : : :     futex: Sanitize futex ops argument types : : : :     Change futex_atomic_op_inuser and futex_atomic_cmpxchg_inatomic : :     prototypes to use u32 types for the futex as this is the data type the : :     futex core code uses all over the place. : : : : Looking at the commit I see there is a change of the uaddr argument in : : the Alpha architecture specific code for futexes from int to u32, but I : : don't see why this should cause a problem.  Richard Henderson said:  : futex_atomic_cmpxchg_inatomic(u32 *uval, u32 __user *uaddr, :                               u32 oldval, u32 newval) : ... :         :       "r"(uaddr), "r"((long)oldval), "r"(newval) : : : There is no 32-bit compare instruction.  These are implemented by : consistently extending the values to a 64-bit type.  Since the : load instruction sign-extends, we want to sign-extend the other : quantity as well (despite the fact it's logically unsigned). : : So: : : -        :       "r"(uaddr), "r"((long)oldval), "r"(newval) : +        :       "r"(uaddr), "r"((long)(int)oldval), "r"(newval) : : should do the trick.  Michael said:  : This fixes the glibc test suite failures and the pulseaudio related : crashes, but it does not fix the java compiiler lockups that I was (and : are still) observing.  That is some other problem.  Reported-by: Michael Cree <mcree@orcon.net.nz> Tested-by: Michael Cree <mcree@orcon.net.nz> Acked-by: Phil Carmody <ext-phil.2.carmody@nokia.com> Cc: Richard Henderson <rth@twiddle.net> Cc: Michel Lespinasse <walken@google.com> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Reviewed-by: Matt Turner <mattst88@gmail.com> Cc: <stable@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Kbuild | g | 204B |  | Sam Ravnborg | sam@ravnborg.org | 1281817611 |  | archs: replace unifdef-y with header-y  unifdef-y and header-y have same semantic, so drop unifdef-y  Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | parport.h | s | 517B | 15 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | io_trivial.h | s | 3.0K | 112 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | posix_types.h | s | 450B | 12 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | spinlock_types.h | s | 374B | 14 | Thomas Gleixner | tglx@linutronix.de | 1260831332 |  | locking: Convert raw_rwlock to arch_rwlock  Not strictly necessary for -rt as -rt does not have non sleeping rwlocks, but it's odd to not have a consistent naming convention.  No functional change.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Peter Zijlstra <peterz@infradead.org> Acked-by: David S. Miller <davem@davemloft.net> Acked-by: Ingo Molnar <mingo@elte.hu> Cc: linux-arch@vger.kernel.org
f | device.h | s | 129B | 6 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmu.h | s | 164B | 5 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | atomic.h | s | 6.0K | 226 | Paul Gortmaker | paul.gortmaker@windriver.com | 1334337316 |  | alpha: fix build failures from system.h dismemberment  commit ec2212088c42ff7d1362629ec26dda4f3e8bdad3      "Disintegrate asm/system.h for Alpha"  combined with commit b4816afa3986704d1404fc48e931da5135820472      "Move the asm-generic/system.h xchg() implementation to asm-generic/cmpxchg.h"  introduced the concept of asm/cmpxchg.h but the alpha arch never got one.  Fork the cmpxchg content out of the asm/atomic.h file to create one.  Some minor whitespace fixups were done on the block of code that created the new file.  Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: David Howells <dhowells@redhat.com> Acked-by: Matt Turner <mattst88@gmail.com> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | pal.h | s | 4.3K | 146 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | tlbflush.h | s | 3.3K | 127 | Tejun Heo | tj@kernel.org | 1245824032 |  | alpha: switch to dynamic percpu allocator  Alpha implements custom SHIFT_PERCPU_PTR for modules because percpu area can be located far away from the 4G area where the module text is located.  The custom SHIFT_PERCPU_PTR forces GOT usage using ldq instruction with literal relocation; however, the relocation can't be used with dynamically allocated percpu variables.  Fortunately, similar result can be achieved by using weak percpu variable definitions.  This patch makes alpha use weak definitions and switch to dynamic percpu allocator.  asm/tlbflush.h was getting linux/sched.h via asm/percpu.h which no longer needs it.  Include linux/sched.h directly in asm/tlbflush.h.  Compile tested.  Generation of litereal relocation verified.  This patch is based on Ivan Kokshaysky's alpha percpu patch.  [ Impact: use dynamic percpu allocator ]  Signed-off-by: Tejun Heo <tj@kernel.org> Acked-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Richard Henderson <rth@twiddle.net>
f | linkage.h | s | 86B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | local.h | s | 2.6K | 86 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | perf_event.h | s | 105B | 3 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1290780896 |  | perf, arch: Cleanup perf-pmu init vs lockup-detector  The perf hardware pmu got initialized at various points in the boot, some before early_initcall() some after (notably arch_initcall).  The problem is that the NMI lockup detector is ran from early_initcall() and expects the hardware pmu to be present.  Sanitize this by moving all architecture hardware pmu implementations to initialize at early_initcall() and move the lockup detector to an explicit initcall right after that.  Cc: paulus <paulus@samba.org> Cc: davem <davem@davemloft.net> Cc: Michael Cree <mcree@orcon.net.nz> Cc: Deng-Cheng Zhu <dengcheng.zhu@gmail.com> Acked-by: Paul Mundt <lethal@linux-sh.org> Acked-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> LKML-Reference: <1290707759.2145.119.camel@laptop> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | mutex.h | s | 308B | 8 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | err_common.h | s | 3.2K | 110 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unistd.h | s | 15K | 472 | Mans Rullgard | mans@mansr.com | 1337884077 |  | alpha: implement various OSF/1 stat syscalls  This implements OSF/1 versions of stat, lstat, fstat, statfs64, and fstatfs64 syscalls.  Signed-off-by: Mans Rullgard <mans@mansr.com> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | irqflags.h | s | 1.1K | 55 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | topology.h | s | 918B | 35 | Anton Blanchard | anton@samba.org | 1263493295 |  | alpha: cpumask_of_node() should handle -1 as a node  CC: Richard Henderson <rth@twiddle.net> CC: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Matt Turner <mattst88@gmail.com> CC: linux-alpha@vger.kernel.org CC: Rusty Russell <rusty@rustcorp.com.au> CC: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Anton Blanchard <anton@samba.org>
f | string.h | s | 2.0K | 53 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | processor.h | s | 2.2K | 67 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | module.h | s | 448B | 18 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | poll.h | s | 30B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ioctl.h | s | 2.2K | 55 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | percpu.h | s | 488B | 15 | Tejun Heo | tj@kernel.org | 1245824032 |  | alpha: switch to dynamic percpu allocator  Alpha implements custom SHIFT_PERCPU_PTR for modules because percpu area can be located far away from the 4G area where the module text is located.  The custom SHIFT_PERCPU_PTR forces GOT usage using ldq instruction with literal relocation; however, the relocation can't be used with dynamically allocated percpu variables.  Fortunately, similar result can be achieved by using weak percpu variable definitions.  This patch makes alpha use weak definitions and switch to dynamic percpu allocator.  asm/tlbflush.h was getting linux/sched.h via asm/percpu.h which no longer needs it.  Include linux/sched.h directly in asm/tlbflush.h.  Compile tested.  Generation of litereal relocation verified.  This patch is based on Ivan Kokshaysky's alpha percpu patch.  [ Impact: use dynamic percpu allocator ]  Signed-off-by: Tejun Heo <tj@kernel.org> Acked-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Richard Henderson <rth@twiddle.net>
f | page.h | s | 2.4K | 74 | Arnd Bergmann | arnd@arndb.de | 1244746937 |  | asm-generic: rename page.h and uaccess.h  The current asm-generic/page.h only contains the get_order function, and asm-generic/uaccess.h only implements unaligned accesses. This renames the file to getorder.h and uaccess-unaligned.h to make room for new page.h and uaccess.h file that will be usable by all simple (e.g. nommu) architectures.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | div64.h | s | 31B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | special_insns.h | s | 886B | 36 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | auxvec.h | s | 711B | 20 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | err_ev6.h | s | 116B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cmpxchg.h | s | 1.7K | 59 | Paul Gortmaker | paul.gortmaker@windriver.com | 1334337316 |  | alpha: fix build failures from system.h dismemberment  commit ec2212088c42ff7d1362629ec26dda4f3e8bdad3      "Disintegrate asm/system.h for Alpha"  combined with commit b4816afa3986704d1404fc48e931da5135820472      "Move the asm-generic/system.h xchg() implementation to asm-generic/cmpxchg.h"  introduced the concept of asm/cmpxchg.h but the alpha arch never got one.  Fork the cmpxchg content out of the asm/atomic.h file to create one.  Some minor whitespace fixups were done on the block of code that created the new file.  Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: David Howells <dhowells@redhat.com> Acked-by: Matt Turner <mattst88@gmail.com> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | param.h | s | 615B | 20 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gpio.h | s | 106B | 4 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336780814 |  | gpiolib/arches: Centralise bolierplate asm/gpio.h  Rather than requiring architectures that use gpiolib but don't have any need to define anything custom to copy an asm/gpio.h provide a Kconfig symbol which architectures must select in order to include gpio.h and for other architectures just provide the trivial implementation directly.  This makes it much easier to do gpiolib updates and is also a step towards making gpiolib APIs available on every architecture.  For architectures with existing boilerplate code leave a stub header in place which warns on direct inclusion of asm/gpio.h and includes linux/gpio.h to catch code that's doing this.  Direct inclusion of asm/gpio.h has long been deprecated.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Jonas Bonn <jonas@southpole.se> Acked-by: Tony Luck <tony.luck@intel.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | pgalloc.h | s | 1.8K | 72 | Ivan Kokshaysky | ink@jurassic.park.msu.ru | 1232066380 |  | alpha: make pte_alloc_one_kernel() inline  As it's just a single call to __get_free_page().  Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Richard Henderson <rth@twiddle.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | sfp-machine.h | s | 2.9K | 67 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | scatterlist.h | s | 134B | 4 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | swab.h | s | 1.2K | 34 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466282 |  | headers_check fix: alpha, swab.h  fix the following 'make headers_check' warnings:    usr/include/asm-alpha/swab.h:4: include of <linux/types.h> is preferred over <asm/types.h>   usr/include/asm-alpha/swab.h:10: found __[us]{8,16,32,64} type without #include <linux/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | fb.h | s | 268B | 10 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | core_polaris.h | s | 2.9K | 92 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | thread_info.h | s | 4.0K | 100 | Tejun Heo | tj@kernel.org | 1321907545 |  | freezer: remove now unused TIF_FREEZE  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Arnd Bergmann <arnd@arndb.de> Cc: linux-arch@vger.kernel.org
f | fcntl.h | s | 1.8K | 47 | J. Bruce Fields | bfields@redhat.com | 1313774734 |  | locks: move F_INPROGRESS from fl_type to fl_flags field  F_INPROGRESS isn't exposed to userspace.  To me it makes more sense in fl_flags....  Reviewed-by: Jeff Layton <jlayton@redhat.com> Signed-off-by: J. Bruce Fields <bfields@redhat.com>
f | irq.h | s | 2.3K | 71 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | timex.h | s | 758B | 26 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | socket.h | s | 2.1K | 67 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | rwsem.h | s | 4.7K | 206 | Thomas Gleixner | tglx@linutronix.de | 1296127839 |  | rwsem: Move duplicate function prototypes to linux/rwsem.h  All architecture specific rwsem headers carry the same function prototypes. Just x86 adds asmregparm, which is an empty define on all other architectures. S390 has a stale rwsem_downgrade_write() prototype.  Remove the duplicates and add the prototypes to linux/rwsem.h  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: David Howells <dhowells@redhat.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Richard Henderson <rth@twiddle.net> Acked-by: Tony Luck <tony.luck@intel.com> Acked-by: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Acked-by: David Miller <davem@davemloft.net> Cc: Chris Zankel <chris@zankel.net> LKML-Reference: <20110126195833.970840140@linutronix.de> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | pgtable.h | s | 13K | 312 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | ipcbuf.h | s | 32B | 1 | Al Viro | viro@zeniv.linux.org.uk | 1325649318 |  | consolidate a bunch of ipcbuf.h instances  ... some still remain weird :-/  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | fpu.h | s | 6.1K | 168 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | shmbuf.h | s | 1.0K | 34 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | switch_to.h | s | 367B | 10 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | stat.h | s | 1012B | 42 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sysinfo.h | s | 712B | 24 | Mans Rullgard | mans@mansr.com | 1337884075 |  | alpha: implement setsysinfo(SSI_LMF) as a no-op  This allows running software using the Tru64 license manager. For simplicity, no check for a valid license is done.  This should not be seen as encouraging software piracy.  Signed-off-by: Mans Rullgard <mans@mansr.com> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | uaccess.h | s | 14K | 451 | Ivan Kokshaysky | ink@jurassic.park.msu.ru | 1241303770 |  | alpha: exception table sorting  Exception fixups for sections other than .text (like one in futex_init()) break the natural ordering of fixup entries, so sorting is required.  Without that the result of the exception table search depends on phase of the moon.  Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Al Viro <viro@ZenIV.linux.org.uk> Cc: Richard Henderson <rth@twiddle.net Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | vga.h | s | 2.0K | 65 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | hwrpb.h | s | 6.9K | 199 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mman.h | s | 2.8K | 53 | Jason Baron | jbaron@redhat.com | 1332547122 |  | coredump: add VM_NODUMP, MADV_NODUMP, MADV_CLEAR_NODUMP  Since we no longer need the VM_ALWAYSDUMP flag, let's use the freed bit for 'VM_NODUMP' flag.  The idea is is to add a new madvise() flag: MADV_DONTDUMP, which can be set by applications to specifically request memory regions which should not dump core.  The specific application I have in mind is qemu: we can add a flag there that wouldn't dump all of guest memory when qemu dumps core.  This flag might also be useful for security sensitive apps that want to absolutely make sure that parts of memory are not dumped.  To clear the flag use: MADV_DODUMP.  [akpm@linux-foundation.org: s/MADV_NODUMP/MADV_DONTDUMP/, s/MADV_CLEAR_NODUMP/MADV_DODUMP/, per Roland] [akpm@linux-foundation.org: fix up the architectures which broke] Signed-off-by: Jason Baron <jbaron@redhat.com> Acked-by: Roland McGrath <roland@hack.frob.com> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Avi Kivity <avi@redhat.com> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rtc.h | s | 270B | 9 | Matt Turner | mattst88@gmail.com | 1335988445 |  | alpha: properly define get/set_rtc_time on Marvel/SMP  The marvel_get_rtc_time and marvel_set_rtc_time are static, but they're available through Marvel's machine vector.  Reported-by: Ra√∫l Porcel <armin76@gentoo.org> Signed-off-by: Matt Turner <mattst88@gmail.com>
f | a.out.h | s | 2.4K | 89 | Kirill A. Shutemov | kirill@shutemov.name | 1224181298 |  | alpha: introduce field 'taso' into struct linux_binprm  This change is Alpha-specific.  It adds field 'taso' into struct linux_binprm to remember if the application is TASO.  Previously, field sh_bang was used for this purpose.  Signed-off-by: Kirill A. Shutemov <kirill@shutemov.name> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Pavel Emelyanov <xemul@openvz.org> Cc: Alexander Viro <viro@zeniv.linux.org.uk> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | signal.h | s | 3.8K | 139 | Arnd Bergmann | arnd@arndb.de | 1244746912 |  | asm-generic: rename termios.h, signal.h and mman.h  The existing asm-generic versions are incomplete and included by some architectures. New architectures should be able to use a generic version, so rename the existing files and change all users, which lets us add the new files.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | xchg.h | s | 5.5K | 227 | Paul Gortmaker | paul.gortmaker@windriver.com | 1334337316 |  | alpha: fix build failures from system.h dismemberment  commit ec2212088c42ff7d1362629ec26dda4f3e8bdad3      "Disintegrate asm/system.h for Alpha"  combined with commit b4816afa3986704d1404fc48e931da5135820472      "Move the asm-generic/system.h xchg() implementation to asm-generic/cmpxchg.h"  introduced the concept of asm/cmpxchg.h but the alpha arch never got one.  Fork the cmpxchg content out of the asm/atomic.h file to create one.  Some minor whitespace fixups were done on the block of code that created the new file.  Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: David Howells <dhowells@redhat.com> Acked-by: Matt Turner <mattst88@gmail.com> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | msgbuf.h | s | 859B | 24 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gentrap.h | s | 1.4K | 34 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | emergency-restart.h | s | 149B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | spinlock.h | s | 3.2K | 150 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for Alpha  Disintegrate asm/system.h for Alpha.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-alpha@vger.kernel.org
f | byteorder.h | s | 131B | 4 | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | shmparam.h | s | 152B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sockios.h | s | 434B | 11 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sembuf.h | s | 607B | 19 | Linus Torvalds | torvalds@linux-foundation.org | 1218817180 |  | alpha: move include/asm-alpha to arch/alpha/include/asm  Sam Ravnborg did the build-test that the direct header file move works, I'm just committing it.  This is a pure move:  	mkdir arch/alpha/include 	git mv include/asm-alpha arch/alpha/include/asm  with no other changes.  Requested-and-tested-by: Sam Ravnborg <sam@ravnborg.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
