<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › alpha › include › asm › pal.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>pal.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __ALPHA_PAL_H</span>
<span class="cp">#define __ALPHA_PAL_H</span>

<span class="cm">/*</span>
<span class="cm"> * Common PAL-code</span>
<span class="cm"> */</span>
<span class="cp">#define PAL_halt	  0</span>
<span class="cp">#define PAL_cflush	  1</span>
<span class="cp">#define PAL_draina	  2</span>
<span class="cp">#define PAL_bpt		128</span>
<span class="cp">#define PAL_bugchk	129</span>
<span class="cp">#define PAL_chmk	131</span>
<span class="cp">#define PAL_callsys	131</span>
<span class="cp">#define PAL_imb		134</span>
<span class="cp">#define PAL_rduniq	158</span>
<span class="cp">#define PAL_wruniq	159</span>
<span class="cp">#define PAL_gentrap	170</span>
<span class="cp">#define PAL_nphalt	190</span>

<span class="cm">/*</span>
<span class="cm"> * VMS specific PAL-code</span>
<span class="cm"> */</span>
<span class="cp">#define PAL_swppal	10</span>
<span class="cp">#define PAL_mfpr_vptb	41</span>

<span class="cm">/*</span>
<span class="cm"> * OSF specific PAL-code</span>
<span class="cm"> */</span>
<span class="cp">#define PAL_cserve	 9</span>
<span class="cp">#define PAL_wripir	13</span>
<span class="cp">#define PAL_rdmces	16</span>
<span class="cp">#define PAL_wrmces	17</span>
<span class="cp">#define PAL_wrfen	43</span>
<span class="cp">#define PAL_wrvptptr	45</span>
<span class="cp">#define PAL_jtopal	46</span>
<span class="cp">#define PAL_swpctx	48</span>
<span class="cp">#define PAL_wrval	49</span>
<span class="cp">#define PAL_rdval	50</span>
<span class="cp">#define PAL_tbi		51</span>
<span class="cp">#define PAL_wrent	52</span>
<span class="cp">#define PAL_swpipl	53</span>
<span class="cp">#define PAL_rdps	54</span>
<span class="cp">#define PAL_wrkgp	55</span>
<span class="cp">#define PAL_wrusp	56</span>
<span class="cp">#define PAL_wrperfmon	57</span>
<span class="cp">#define PAL_rdusp	58</span>
<span class="cp">#define PAL_whami	60</span>
<span class="cp">#define PAL_retsys	61</span>
<span class="cp">#define PAL_rti		63</span>

<span class="cp">#ifdef __KERNEL__</span>
<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">halt</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">noreturn</span><span class="p">));</span>
<span class="cp">#define __halt() __asm__ __volatile__ (&quot;call_pal %0 #halt&quot; : : &quot;i&quot; (PAL_halt))</span>

<span class="cp">#define imb() \</span>
<span class="cp">__asm__ __volatile__ (&quot;call_pal %0 #imb&quot; : : &quot;i&quot; (PAL_imb) : &quot;memory&quot;)</span>

<span class="cp">#define draina() \</span>
<span class="cp">__asm__ __volatile__ (&quot;call_pal %0 #draina&quot; : : &quot;i&quot; (PAL_draina) : &quot;memory&quot;)</span>

<span class="cp">#define __CALL_PAL_R0(NAME, TYPE)				\</span>
<span class="cp">extern inline TYPE NAME(void)					\</span>
<span class="cp">{								\</span>
<span class="cp">	register TYPE __r0 __asm__(&quot;$0&quot;);			\</span>
<span class="cp">	__asm__ __volatile__(					\</span>
<span class="cp">		&quot;call_pal %1 # &quot; #NAME				\</span>
<span class="cp">		:&quot;=r&quot; (__r0)					\</span>
<span class="cp">		:&quot;i&quot; (PAL_ ## NAME)				\</span>
<span class="cp">		:&quot;$1&quot;, &quot;$16&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);	\</span>
<span class="cp">	return __r0;						\</span>
<span class="cp">}</span>

<span class="cp">#define __CALL_PAL_W1(NAME, TYPE0)				\</span>
<span class="cp">extern inline void NAME(TYPE0 arg0)				\</span>
<span class="cp">{								\</span>
<span class="cp">	register TYPE0 __r16 __asm__(&quot;$16&quot;) = arg0;		\</span>
<span class="cp">	__asm__ __volatile__(					\</span>
<span class="cp">		&quot;call_pal %1 # &quot;#NAME				\</span>
<span class="cp">		: &quot;=r&quot;(__r16)					\</span>
<span class="cp">		: &quot;i&quot;(PAL_ ## NAME), &quot;0&quot;(__r16)			\</span>
<span class="cp">		: &quot;$1&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);		\</span>
<span class="cp">}</span>

<span class="cp">#define __CALL_PAL_W2(NAME, TYPE0, TYPE1)			\</span>
<span class="cp">extern inline void NAME(TYPE0 arg0, TYPE1 arg1)			\</span>
<span class="cp">{								\</span>
<span class="cp">	register TYPE0 __r16 __asm__(&quot;$16&quot;) = arg0;		\</span>
<span class="cp">	register TYPE1 __r17 __asm__(&quot;$17&quot;) = arg1;		\</span>
<span class="cp">	__asm__ __volatile__(					\</span>
<span class="cp">		&quot;call_pal %2 # &quot;#NAME				\</span>
<span class="cp">		: &quot;=r&quot;(__r16), &quot;=r&quot;(__r17)			\</span>
<span class="cp">		: &quot;i&quot;(PAL_ ## NAME), &quot;0&quot;(__r16), &quot;1&quot;(__r17)	\</span>
<span class="cp">		: &quot;$1&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);		\</span>
<span class="cp">}</span>

<span class="cp">#define __CALL_PAL_RW1(NAME, RTYPE, TYPE0)			\</span>
<span class="cp">extern inline RTYPE NAME(TYPE0 arg0)				\</span>
<span class="cp">{								\</span>
<span class="cp">	register RTYPE __r0 __asm__(&quot;$0&quot;);			\</span>
<span class="cp">	register TYPE0 __r16 __asm__(&quot;$16&quot;) = arg0;		\</span>
<span class="cp">	__asm__ __volatile__(					\</span>
<span class="cp">		&quot;call_pal %2 # &quot;#NAME				\</span>
<span class="cp">		: &quot;=r&quot;(__r16), &quot;=r&quot;(__r0)			\</span>
<span class="cp">		: &quot;i&quot;(PAL_ ## NAME), &quot;0&quot;(__r16)			\</span>
<span class="cp">		: &quot;$1&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);		\</span>
<span class="cp">	return __r0;						\</span>
<span class="cp">}</span>

<span class="cp">#define __CALL_PAL_RW2(NAME, RTYPE, TYPE0, TYPE1)		\</span>
<span class="cp">extern inline RTYPE NAME(TYPE0 arg0, TYPE1 arg1)		\</span>
<span class="cp">{								\</span>
<span class="cp">	register RTYPE __r0 __asm__(&quot;$0&quot;);			\</span>
<span class="cp">	register TYPE0 __r16 __asm__(&quot;$16&quot;) = arg0;		\</span>
<span class="cp">	register TYPE1 __r17 __asm__(&quot;$17&quot;) = arg1;		\</span>
<span class="cp">	__asm__ __volatile__(					\</span>
<span class="cp">		&quot;call_pal %3 # &quot;#NAME				\</span>
<span class="cp">		: &quot;=r&quot;(__r16), &quot;=r&quot;(__r17), &quot;=r&quot;(__r0)		\</span>
<span class="cp">		: &quot;i&quot;(PAL_ ## NAME), &quot;0&quot;(__r16), &quot;1&quot;(__r17)	\</span>
<span class="cp">		: &quot;$1&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);		\</span>
<span class="cp">	return __r0;						\</span>
<span class="cp">}</span>

<span class="n">__CALL_PAL_W1</span><span class="p">(</span><span class="n">cflush</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_R0</span><span class="p">(</span><span class="n">rdmces</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_R0</span><span class="p">(</span><span class="n">rdps</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_R0</span><span class="p">(</span><span class="n">rdusp</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_RW1</span><span class="p">(</span><span class="n">swpipl</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_R0</span><span class="p">(</span><span class="n">whami</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_W2</span><span class="p">(</span><span class="n">wrent</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_W1</span><span class="p">(</span><span class="n">wripir</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_W1</span><span class="p">(</span><span class="n">wrkgp</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_W1</span><span class="p">(</span><span class="n">wrmces</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_RW2</span><span class="p">(</span><span class="n">wrperfmon</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_W1</span><span class="p">(</span><span class="n">wrusp</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="n">__CALL_PAL_W1</span><span class="p">(</span><span class="n">wrvptptr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * TB routines..</span>
<span class="cm"> */</span>
<span class="cp">#define __tbi(nr,arg,arg1...)					\</span>
<span class="cp">({								\</span>
<span class="cp">	register unsigned long __r16 __asm__(&quot;$16&quot;) = (nr);	\</span>
<span class="cp">	register unsigned long __r17 __asm__(&quot;$17&quot;); arg;	\</span>
<span class="cp">	__asm__ __volatile__(					\</span>
<span class="cp">		&quot;call_pal %3 #__tbi&quot;				\</span>
<span class="cp">		:&quot;=r&quot; (__r16),&quot;=r&quot; (__r17)			\</span>
<span class="cp">		:&quot;0&quot; (__r16),&quot;i&quot; (PAL_tbi) ,##arg1		\</span>
<span class="cp">		:&quot;$0&quot;, &quot;$1&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);	\</span>
<span class="cp">})</span>

<span class="cp">#define tbi(x,y)	__tbi(x,__r17=(y),&quot;1&quot; (__r17))</span>
<span class="cp">#define tbisi(x)	__tbi(1,__r17=(x),&quot;1&quot; (__r17))</span>
<span class="cp">#define tbisd(x)	__tbi(2,__r17=(x),&quot;1&quot; (__r17))</span>
<span class="cp">#define tbis(x)		__tbi(3,__r17=(x),&quot;1&quot; (__r17))</span>
<span class="cp">#define tbiap()		__tbi(-1, </span><span class="cm">/* no second argument */</span><span class="cp">)</span>
<span class="cp">#define tbia()		__tbi(-2, </span><span class="cm">/* no second argument */</span><span class="cp">)</span>

<span class="cp">#endif </span><span class="cm">/* !__ASSEMBLY__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __ALPHA_PAL_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
