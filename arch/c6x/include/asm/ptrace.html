<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › c6x › include › asm › ptrace.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ptrace.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Copyright (C) 2004, 2006, 2009, 2010 Texas Instruments Incorporated</span>
<span class="cm"> *  Author: Aurelien Jacquiot (aurelien.jacquiot@jaluna.com)</span>
<span class="cm"> *</span>
<span class="cm"> *  Updated for 2.6.34: Mark Salter &lt;msalter@redhat.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> *  published by the Free Software Foundation.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_C6X_PTRACE_H</span>
<span class="cp">#define _ASM_C6X_PTRACE_H</span>

<span class="cp">#define BKPT_OPCODE	0x56454314	</span><span class="cm">/* illegal opcode */</span><span class="cp"></span>

<span class="cp">#ifdef _BIG_ENDIAN</span>
<span class="cp">#define PT_LO(odd, even)  odd</span>
<span class="cp">#define PT_HI(odd, even)  even</span>
<span class="cp">#else</span>
<span class="cp">#define PT_LO(odd, even)  even</span>
<span class="cp">#define PT_HI(odd, even)  odd</span>
<span class="cp">#endif</span>

<span class="cp">#define PT_A4_ORG  PT_LO(1, 0)</span>
<span class="cp">#define PT_TSR	   PT_HI(1, 0)</span>
<span class="cp">#define PT_ILC	   PT_LO(3, 2)</span>
<span class="cp">#define PT_RILC    PT_HI(3, 2)</span>
<span class="cp">#define PT_CSR	   PT_LO(5, 4)</span>
<span class="cp">#define PT_PC	   PT_HI(5, 4)</span>
<span class="cp">#define PT_B16	   PT_LO(7, 6)</span>
<span class="cp">#define PT_B17	   PT_HI(7, 6)</span>
<span class="cp">#define PT_B18	   PT_LO(9, 8)</span>
<span class="cp">#define PT_B19	   PT_HI(9, 8)</span>
<span class="cp">#define PT_B20	   PT_LO(11, 10)</span>
<span class="cp">#define PT_B21	   PT_HI(11, 10)</span>
<span class="cp">#define PT_B22	   PT_LO(13, 12)</span>
<span class="cp">#define PT_B23	   PT_HI(13, 12)</span>
<span class="cp">#define PT_B24	   PT_LO(15, 14)</span>
<span class="cp">#define PT_B25	   PT_HI(15, 14)</span>
<span class="cp">#define PT_B26	   PT_LO(17, 16)</span>
<span class="cp">#define PT_B27	   PT_HI(17, 16)</span>
<span class="cp">#define PT_B28	   PT_LO(19, 18)</span>
<span class="cp">#define PT_B29	   PT_HI(19, 18)</span>
<span class="cp">#define PT_B30	   PT_LO(21, 20)</span>
<span class="cp">#define PT_B31	   PT_HI(21, 20)</span>
<span class="cp">#define PT_B0	   PT_LO(23, 22)</span>
<span class="cp">#define PT_B1	   PT_HI(23, 22)</span>
<span class="cp">#define PT_B2	   PT_LO(25, 24)</span>
<span class="cp">#define PT_B3	   PT_HI(25, 24)</span>
<span class="cp">#define PT_B4	   PT_LO(27, 26)</span>
<span class="cp">#define PT_B5	   PT_HI(27, 26)</span>
<span class="cp">#define PT_B6	   PT_LO(29, 28)</span>
<span class="cp">#define PT_B7	   PT_HI(29, 28)</span>
<span class="cp">#define PT_B8	   PT_LO(31, 30)</span>
<span class="cp">#define PT_B9	   PT_HI(31, 30)</span>
<span class="cp">#define PT_B10	   PT_LO(33, 32)</span>
<span class="cp">#define PT_B11	   PT_HI(33, 32)</span>
<span class="cp">#define PT_B12	   PT_LO(35, 34)</span>
<span class="cp">#define PT_B13	   PT_HI(35, 34)</span>
<span class="cp">#define PT_A16	   PT_LO(37, 36)</span>
<span class="cp">#define PT_A17	   PT_HI(37, 36)</span>
<span class="cp">#define PT_A18	   PT_LO(39, 38)</span>
<span class="cp">#define PT_A19	   PT_HI(39, 38)</span>
<span class="cp">#define PT_A20	   PT_LO(41, 40)</span>
<span class="cp">#define PT_A21	   PT_HI(41, 40)</span>
<span class="cp">#define PT_A22	   PT_LO(43, 42)</span>
<span class="cp">#define PT_A23	   PT_HI(43, 42)</span>
<span class="cp">#define PT_A24	   PT_LO(45, 44)</span>
<span class="cp">#define PT_A25	   PT_HI(45, 44)</span>
<span class="cp">#define PT_A26	   PT_LO(47, 46)</span>
<span class="cp">#define PT_A27	   PT_HI(47, 46)</span>
<span class="cp">#define PT_A28	   PT_LO(49, 48)</span>
<span class="cp">#define PT_A29	   PT_HI(49, 48)</span>
<span class="cp">#define PT_A30	   PT_LO(51, 50)</span>
<span class="cp">#define PT_A31	   PT_HI(51, 50)</span>
<span class="cp">#define PT_A0	   PT_LO(53, 52)</span>
<span class="cp">#define PT_A1	   PT_HI(53, 52)</span>
<span class="cp">#define PT_A2	   PT_LO(55, 54)</span>
<span class="cp">#define PT_A3	   PT_HI(55, 54)</span>
<span class="cp">#define PT_A4	   PT_LO(57, 56)</span>
<span class="cp">#define PT_A5	   PT_HI(57, 56)</span>
<span class="cp">#define PT_A6	   PT_LO(59, 58)</span>
<span class="cp">#define PT_A7	   PT_HI(59, 58)</span>
<span class="cp">#define PT_A8	   PT_LO(61, 60)</span>
<span class="cp">#define PT_A9	   PT_HI(61, 60)</span>
<span class="cp">#define PT_A10	   PT_LO(63, 62)</span>
<span class="cp">#define PT_A11	   PT_HI(63, 62)</span>
<span class="cp">#define PT_A12	   PT_LO(65, 64)</span>
<span class="cp">#define PT_A13	   PT_HI(65, 64)</span>
<span class="cp">#define PT_A14	   PT_LO(67, 66)</span>
<span class="cp">#define PT_A15	   PT_HI(67, 66)</span>
<span class="cp">#define PT_B14	   PT_LO(69, 68)</span>
<span class="cp">#define PT_B15	   PT_HI(69, 68)</span>

<span class="cp">#define NR_PTREGS  70</span>

<span class="cp">#define PT_DP	   PT_B14  </span><span class="cm">/* Data Segment Pointer (B14) */</span><span class="cp"></span>
<span class="cp">#define PT_SP	   PT_B15  </span><span class="cm">/* Stack Pointer (B15)  */</span><span class="cp"></span>

<span class="cp">#define PTRACE_GETFDPIC		31	</span><span class="cm">/* get the ELF fdpic loadmap address */</span><span class="cp"></span>

<span class="cp">#define PTRACE_GETFDPIC_EXEC	0	</span><span class="cm">/* [addr] request the executable loadmap */</span><span class="cp"></span>
<span class="cp">#define PTRACE_GETFDPIC_INTERP	1	</span><span class="cm">/* [addr] request the interpreter loadmap */</span><span class="cp"></span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="cp">#ifdef _BIG_ENDIAN</span>
<span class="cp">#define REG_PAIR(odd, even) unsigned long odd; unsigned long even</span>
<span class="cp">#else</span>
<span class="cp">#define REG_PAIR(odd, even) unsigned long even; unsigned long odd</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * this struct defines the way the registers are stored on the</span>
<span class="cm"> * stack during a system call. fields defined with REG_PAIR</span>
<span class="cm"> * are saved and restored using double-word memory operations</span>
<span class="cm"> * which means the word ordering of the pair depends on endianess.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">pt_regs</span> <span class="p">{</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">tsr</span><span class="p">,</span> <span class="n">orig_a4</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">rilc</span><span class="p">,</span> <span class="n">ilc</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span> <span class="n">csr</span><span class="p">);</span>

	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b17</span><span class="p">,</span> <span class="n">b16</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b19</span><span class="p">,</span> <span class="n">b18</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b21</span><span class="p">,</span> <span class="n">b20</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b23</span><span class="p">,</span> <span class="n">b22</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b25</span><span class="p">,</span> <span class="n">b24</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b27</span><span class="p">,</span> <span class="n">b26</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b29</span><span class="p">,</span> <span class="n">b28</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b31</span><span class="p">,</span> <span class="n">b30</span><span class="p">);</span>

	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b1</span><span class="p">,</span> <span class="n">b0</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b3</span><span class="p">,</span> <span class="n">b2</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b5</span><span class="p">,</span> <span class="n">b4</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b7</span><span class="p">,</span> <span class="n">b6</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b9</span><span class="p">,</span> <span class="n">b8</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b11</span><span class="p">,</span> <span class="n">b10</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">b13</span><span class="p">,</span> <span class="n">b12</span><span class="p">);</span>

	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a17</span><span class="p">,</span> <span class="n">a16</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a19</span><span class="p">,</span> <span class="n">a18</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a21</span><span class="p">,</span> <span class="n">a20</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a23</span><span class="p">,</span> <span class="n">a22</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a25</span><span class="p">,</span> <span class="n">a24</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a27</span><span class="p">,</span> <span class="n">a26</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a29</span><span class="p">,</span> <span class="n">a28</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a31</span><span class="p">,</span> <span class="n">a30</span><span class="p">);</span>

	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a0</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a3</span><span class="p">,</span> <span class="n">a2</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a5</span><span class="p">,</span> <span class="n">a4</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a7</span><span class="p">,</span> <span class="n">a6</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a9</span><span class="p">,</span> <span class="n">a8</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a11</span><span class="p">,</span> <span class="n">a10</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a13</span><span class="p">,</span> <span class="n">a12</span><span class="p">);</span>

	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">a15</span><span class="p">,</span> <span class="n">a14</span><span class="p">);</span>
	<span class="n">REG_PAIR</span><span class="p">(</span><span class="n">sp</span><span class="p">,</span> <span class="n">dp</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#include &lt;linux/linkage.h&gt;</span>

<span class="cp">#define user_mode(regs)	((((regs)-&gt;tsr) &amp; 0x40) != 0)</span>

<span class="cp">#define instruction_pointer(regs) ((regs)-&gt;pc)</span>
<span class="cp">#define profile_pc(regs) instruction_pointer(regs)</span>
<span class="cp">#define user_stack_pointer(regs) ((regs)-&gt;sp)</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">show_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="p">);</span>

<span class="k">extern</span> <span class="n">asmlinkage</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">syscall_trace_entry</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">asmlinkage</span> <span class="kt">void</span> <span class="n">syscall_trace_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* _ASM_C6X_PTRACE_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
