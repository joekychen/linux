<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-gemini › include › mach › global_reg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>global_reg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  This file contains the hardware definitions for Gemini.</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2009 Paulius Zaleckas &lt;paulius.zaleckas@teltonika.lt&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __MACH_GLOBAL_REG_H</span>
<span class="cp">#define __MACH_GLOBAL_REG_H</span>

<span class="cm">/* Global Word ID Register*/</span>
<span class="cp">#define GLOBAL_ID			0x00</span>

<span class="cp">#define CHIP_ID(reg)			((reg) &gt;&gt; 8)</span>
<span class="cp">#define CHIP_REVISION(reg)		((reg) &amp; 0xFF)</span>

<span class="cm">/* Global Status Register */</span>
<span class="cp">#define GLOBAL_STATUS			0x04</span>

<span class="cp">#define CPU_BIG_ENDIAN			(1 &lt;&lt; 31)</span>
<span class="cp">#define PLL_OSC_30M			(1 &lt;&lt; 30)	</span><span class="cm">/* else 60MHz */</span><span class="cp"></span>

<span class="cp">#define OPERATION_MODE_MASK		(0xF &lt;&lt; 26)</span>
<span class="cp">#define OPM_IDDQ			(0xF &lt;&lt; 26)</span>
<span class="cp">#define OPM_NAND			(0xE &lt;&lt; 26)</span>
<span class="cp">#define OPM_RING			(0xD &lt;&lt; 26)</span>
<span class="cp">#define OPM_DIRECT_BOOT			(0xC &lt;&lt; 26)</span>
<span class="cp">#define OPM_USB1_PHY_TEST		(0xB &lt;&lt; 26)</span>
<span class="cp">#define OPM_USB0_PHY_TEST		(0xA &lt;&lt; 26)</span>
<span class="cp">#define OPM_SATA1_PHY_TEST		(0x9 &lt;&lt; 26)</span>
<span class="cp">#define OPM_SATA0_PHY_TEST		(0x8 &lt;&lt; 26)</span>
<span class="cp">#define OPM_ICE_ARM			(0x7 &lt;&lt; 26)</span>
<span class="cp">#define OPM_ICE_FARADAY			(0x6 &lt;&lt; 26)</span>
<span class="cp">#define OPM_PLL_BYPASS			(0x5 &lt;&lt; 26)</span>
<span class="cp">#define OPM_DEBUG			(0x4 &lt;&lt; 26)</span>
<span class="cp">#define OPM_BURN_IN			(0x3 &lt;&lt; 26)</span>
<span class="cp">#define OPM_MBIST			(0x2 &lt;&lt; 26)</span>
<span class="cp">#define OPM_SCAN			(0x1 &lt;&lt; 26)</span>
<span class="cp">#define OPM_REAL			(0x0 &lt;&lt; 26)</span>

<span class="cp">#define FLASH_TYPE_MASK			(0x3 &lt;&lt; 24)</span>
<span class="cp">#define FLASH_TYPE_NAND_2K		(0x3 &lt;&lt; 24)</span>
<span class="cp">#define FLASH_TYPE_NAND_512		(0x2 &lt;&lt; 24)</span>
<span class="cp">#define FLASH_TYPE_PARALLEL		(0x1 &lt;&lt; 24)</span>
<span class="cp">#define FLASH_TYPE_SERIAL		(0x0 &lt;&lt; 24)</span>
<span class="cm">/* if parallel */</span>
<span class="cp">#define FLASH_WIDTH_16BIT		(1 &lt;&lt; 23)	</span><span class="cm">/* else 8 bit */</span><span class="cp"></span>
<span class="cm">/* if serial */</span>
<span class="cp">#define FLASH_ATMEL			(1 &lt;&lt; 23)	</span><span class="cm">/* else STM */</span><span class="cp"></span>

<span class="cp">#define FLASH_SIZE_MASK			(0x3 &lt;&lt; 21)</span>
<span class="cp">#define NAND_256M			(0x3 &lt;&lt; 21)	</span><span class="cm">/* and more */</span><span class="cp"></span>
<span class="cp">#define NAND_128M			(0x2 &lt;&lt; 21)</span>
<span class="cp">#define NAND_64M			(0x1 &lt;&lt; 21)</span>
<span class="cp">#define NAND_32M			(0x0 &lt;&lt; 21)</span>
<span class="cp">#define ATMEL_16M			(0x3 &lt;&lt; 21)	</span><span class="cm">/* and more */</span><span class="cp"></span>
<span class="cp">#define ATMEL_8M			(0x2 &lt;&lt; 21)</span>
<span class="cp">#define ATMEL_4M_2M			(0x1 &lt;&lt; 21)</span>
<span class="cp">#define ATMEL_1M			(0x0 &lt;&lt; 21)	</span><span class="cm">/* and less */</span><span class="cp"></span>
<span class="cp">#define STM_32M				(1 &lt;&lt; 22)	</span><span class="cm">/* and more */</span><span class="cp"></span>
<span class="cp">#define STM_16M				(0 &lt;&lt; 22)	</span><span class="cm">/* and less */</span><span class="cp"></span>

<span class="cp">#define FLASH_PARALLEL_HIGH_PIN_CNT	(1 &lt;&lt; 20)	</span><span class="cm">/* else low pin cnt */</span><span class="cp"></span>

<span class="cp">#define CPU_AHB_RATIO_MASK		(0x3 &lt;&lt; 18)</span>
<span class="cp">#define CPU_AHB_1_1			(0x0 &lt;&lt; 18)</span>
<span class="cp">#define CPU_AHB_3_2			(0x1 &lt;&lt; 18)</span>
<span class="cp">#define CPU_AHB_24_13			(0x2 &lt;&lt; 18)</span>
<span class="cp">#define CPU_AHB_2_1			(0x3 &lt;&lt; 18)</span>

<span class="cp">#define REG_TO_AHB_SPEED(reg)		((((reg) &gt;&gt; 15) &amp; 0x7) * 10 + 130)</span>
<span class="cp">#define AHB_SPEED_TO_REG(x)		((((x - 130)) / 10) &lt;&lt; 15)</span>

<span class="cm">/* it is posible to override some settings, use &gt;&gt; OVERRIDE_xxxx_SHIFT */</span>
<span class="cp">#define OVERRIDE_FLASH_TYPE_SHIFT	16</span>
<span class="cp">#define OVERRIDE_FLASH_WIDTH_SHIFT	16</span>
<span class="cp">#define OVERRIDE_FLASH_SIZE_SHIFT	16</span>
<span class="cp">#define OVERRIDE_CPU_AHB_RATIO_SHIFT	15</span>
<span class="cp">#define OVERRIDE_AHB_SPEED_SHIFT	15</span>

<span class="cm">/* Global PLL Control Register */</span>
<span class="cp">#define GLOBAL_PLL_CTRL			0x08</span>

<span class="cp">#define PLL_BYPASS			(1 &lt;&lt; 31)</span>
<span class="cp">#define PLL_POWER_DOWN			(1 &lt;&lt; 8)</span>
<span class="cp">#define PLL_CONTROL_Q			(0x1F &lt;&lt; 0)</span>

<span class="cm">/* Global Soft Reset Control Register */</span>
<span class="cp">#define GLOBAL_RESET			0x0C</span>

<span class="cp">#define RESET_GLOBAL			(1 &lt;&lt; 31)</span>
<span class="cp">#define RESET_CPU1			(1 &lt;&lt; 30)</span>
<span class="cp">#define RESET_TVE			(1 &lt;&lt; 28)</span>
<span class="cp">#define RESET_SATA1			(1 &lt;&lt; 27)</span>
<span class="cp">#define RESET_SATA0			(1 &lt;&lt; 26)</span>
<span class="cp">#define RESET_CIR			(1 &lt;&lt; 25)</span>
<span class="cp">#define RESET_EXT_DEV			(1 &lt;&lt; 24)</span>
<span class="cp">#define RESET_WD			(1 &lt;&lt; 23)</span>
<span class="cp">#define RESET_GPIO2			(1 &lt;&lt; 22)</span>
<span class="cp">#define RESET_GPIO1			(1 &lt;&lt; 21)</span>
<span class="cp">#define RESET_GPIO0			(1 &lt;&lt; 20)</span>
<span class="cp">#define RESET_SSP			(1 &lt;&lt; 19)</span>
<span class="cp">#define RESET_UART			(1 &lt;&lt; 18)</span>
<span class="cp">#define RESET_TIMER			(1 &lt;&lt; 17)</span>
<span class="cp">#define RESET_RTC			(1 &lt;&lt; 16)</span>
<span class="cp">#define RESET_INT1			(1 &lt;&lt; 15)</span>
<span class="cp">#define RESET_INT0			(1 &lt;&lt; 14)</span>
<span class="cp">#define RESET_LCD			(1 &lt;&lt; 13)</span>
<span class="cp">#define RESET_LPC			(1 &lt;&lt; 12)</span>
<span class="cp">#define RESET_APB			(1 &lt;&lt; 11)</span>
<span class="cp">#define RESET_DMA			(1 &lt;&lt; 10)</span>
<span class="cp">#define RESET_USB1			(1 &lt;&lt; 9)</span>
<span class="cp">#define RESET_USB0			(1 &lt;&lt; 8)</span>
<span class="cp">#define RESET_PCI			(1 &lt;&lt; 7)</span>
<span class="cp">#define RESET_GMAC1			(1 &lt;&lt; 6)</span>
<span class="cp">#define RESET_GMAC0			(1 &lt;&lt; 5)</span>
<span class="cp">#define RESET_SECURITY			(1 &lt;&lt; 4)</span>
<span class="cp">#define RESET_RAID			(1 &lt;&lt; 3)</span>
<span class="cp">#define RESET_IDE			(1 &lt;&lt; 2)</span>
<span class="cp">#define RESET_FLASH			(1 &lt;&lt; 1)</span>
<span class="cp">#define RESET_DRAM			(1 &lt;&lt; 0)</span>

<span class="cm">/* Global IO Pad Driving Capability Control Register */</span>
<span class="cp">#define GLOBAL_IO_DRIVING_CTRL		0x10</span>

<span class="cp">#define DRIVING_CURRENT_MASK		0x3</span>

<span class="cm">/* here 00-4mA, 01-8mA, 10-12mA, 11-16mA */</span>
<span class="cp">#define GPIO1_PADS_31_28_SHIFT		28</span>
<span class="cp">#define GPIO0_PADS_31_16_SHIFT		26</span>
<span class="cp">#define GPIO0_PADS_15_0_SHIFT		24</span>
<span class="cp">#define PCI_AND_EXT_RESET_PADS_SHIFT	22</span>
<span class="cp">#define IDE_PADS_SHIFT			20</span>
<span class="cp">#define GMAC1_PADS_SHIFT		18</span>
<span class="cp">#define GMAC0_PADS_SHIFT		16</span>
<span class="cm">/* DRAM is not in mA and poorly documented */</span>
<span class="cp">#define DRAM_CLOCK_PADS_SHIFT		8</span>
<span class="cp">#define DRAM_DATA_PADS_SHIFT		4</span>
<span class="cp">#define DRAM_CONTROL_PADS_SHIFT		0</span>

<span class="cm">/* Global IO Pad Slew Rate Control Register */</span>
<span class="cp">#define GLOBAL_IO_SLEW_RATE_CTRL	0x14</span>

<span class="cp">#define GPIO1_PADS_31_28_SLOW		(1 &lt;&lt; 10)</span>
<span class="cp">#define GPIO0_PADS_31_16_SLOW		(1 &lt;&lt; 9)</span>
<span class="cp">#define GPIO0_PADS_15_0_SLOW		(1 &lt;&lt; 8)</span>
<span class="cp">#define PCI_PADS_SLOW			(1 &lt;&lt; 7)</span>
<span class="cp">#define IDE_PADS_SLOW			(1 &lt;&lt; 6)</span>
<span class="cp">#define GMAC1_PADS_SLOW			(1 &lt;&lt; 5)</span>
<span class="cp">#define GMAC0_PADS_SLOW			(1 &lt;&lt; 4)</span>
<span class="cp">#define DRAM_CLOCK_PADS_SLOW		(1 &lt;&lt; 1)</span>
<span class="cp">#define DRAM_IO_PADS_SLOW		(1 &lt;&lt; 0)</span>

<span class="cm">/*</span>
<span class="cm"> * General skew control defines</span>
<span class="cm"> * 16 steps, each step is around 0.2ns</span>
<span class="cm"> */</span>
<span class="cp">#define SKEW_MASK			0xF</span>

<span class="cm">/* Global IDE PAD Skew Control Register */</span>
<span class="cp">#define GLOBAL_IDE_SKEW_CTRL		0x18</span>

<span class="cp">#define IDE1_HOST_STROBE_DELAY_SHIFT	28</span>
<span class="cp">#define IDE1_DEVICE_STROBE_DELAY_SHIFT	24</span>
<span class="cp">#define IDE1_OUTPUT_IO_SKEW_SHIFT	20</span>
<span class="cp">#define IDE1_INPUT_IO_SKEW_SHIFT	16</span>
<span class="cp">#define IDE0_HOST_STROBE_DELAY_SHIFT	12</span>
<span class="cp">#define IDE0_DEVICE_STROBE_DELAY_SHIFT	8</span>
<span class="cp">#define IDE0_OUTPUT_IO_SKEW_SHIFT	4</span>
<span class="cp">#define IDE0_INPUT_IO_SKEW_SHIFT	0</span>

<span class="cm">/* Global GMAC Control Pad Skew Control Register */</span>
<span class="cp">#define GLOBAL_GMAC_CTRL_SKEW_CTRL	0x1C</span>

<span class="cp">#define GMAC1_TXC_SKEW_SHIFT		28</span>
<span class="cp">#define GMAC1_TXEN_SKEW_SHIFT		24</span>
<span class="cp">#define GMAC1_RXC_SKEW_SHIFT		20</span>
<span class="cp">#define GMAC1_RXDV_SKEW_SHIFT		16</span>
<span class="cp">#define GMAC0_TXC_SKEW_SHIFT		12</span>
<span class="cp">#define GMAC0_TXEN_SKEW_SHIFT		8</span>
<span class="cp">#define GMAC0_RXC_SKEW_SHIFT		4</span>
<span class="cp">#define GMAC0_RXDV_SKEW_SHIFT		0</span>

<span class="cm">/* Global GMAC0 Data PAD Skew Control Register */</span>
<span class="cp">#define GLOBAL_GMAC0_DATA_SKEW_CTRL	0x20</span>
<span class="cm">/* Global GMAC1 Data PAD Skew Control Register */</span>
<span class="cp">#define GLOBAL_GMAC1_DATA_SKEW_CTRL	0x24</span>

<span class="cp">#define GMAC_TXD_SKEW_SHIFT(x)		(((x) * 4) + 16)</span>
<span class="cp">#define GMAC_RXD_SKEW_SHIFT(x)		((x) * 4)</span>

<span class="cm">/* CPU has two AHB busses. */</span>

<span class="cm">/* Global Arbitration0 Control Register */</span>
<span class="cp">#define GLOBAL_ARBITRATION0_CTRL	0x28</span>

<span class="cp">#define BOOT_CONTROLLER_HIGH_PRIO	(1 &lt;&lt; 3)</span>
<span class="cp">#define DMA_BUS1_HIGH_PRIO		(1 &lt;&lt; 2)</span>
<span class="cp">#define CPU0_HIGH_PRIO			(1 &lt;&lt; 0)</span>

<span class="cm">/* Global Arbitration1 Control Register */</span>
<span class="cp">#define GLOBAL_ARBITRATION1_CTRL	0x2C</span>

<span class="cp">#define TVE_HIGH_PRIO			(1 &lt;&lt; 9)</span>
<span class="cp">#define PCI_HIGH_PRIO			(1 &lt;&lt; 8)</span>
<span class="cp">#define USB1_HIGH_PRIO			(1 &lt;&lt; 7)</span>
<span class="cp">#define USB0_HIGH_PRIO			(1 &lt;&lt; 6)</span>
<span class="cp">#define GMAC1_HIGH_PRIO			(1 &lt;&lt; 5)</span>
<span class="cp">#define GMAC0_HIGH_PRIO			(1 &lt;&lt; 4)</span>
<span class="cp">#define SECURITY_HIGH_PRIO		(1 &lt;&lt; 3)</span>
<span class="cp">#define RAID_HIGH_PRIO			(1 &lt;&lt; 2)</span>
<span class="cp">#define IDE_HIGH_PRIO			(1 &lt;&lt; 1)</span>
<span class="cp">#define DMA_BUS2_HIGH_PRIO		(1 &lt;&lt; 0)</span>

<span class="cm">/* Common bits for both arbitration registers */</span>
<span class="cp">#define BURST_LENGTH_SHIFT		16</span>
<span class="cp">#define BURST_LENGTH_MASK		(0x3F &lt;&lt; 16)</span>

<span class="cm">/* Miscellaneous Control Register */</span>
<span class="cp">#define GLOBAL_MISC_CTRL		0x30</span>

<span class="cp">#define MEMORY_SPACE_SWAP		(1 &lt;&lt; 31)</span>
<span class="cp">#define USB1_PLUG_MINIB			(1 &lt;&lt; 30) </span><span class="cm">/* else plug is mini-A */</span><span class="cp"></span>
<span class="cp">#define USB0_PLUG_MINIB			(1 &lt;&lt; 29)</span>
<span class="cp">#define GMAC_GMII			(1 &lt;&lt; 28)</span>
<span class="cp">#define GMAC_1_ENABLE			(1 &lt;&lt; 27)</span>
<span class="cm">/* TODO: define ATA/SATA bits */</span>
<span class="cp">#define USB1_VBUS_ON			(1 &lt;&lt; 23)</span>
<span class="cp">#define USB0_VBUS_ON			(1 &lt;&lt; 22)</span>
<span class="cp">#define APB_CLKOUT_ENABLE		(1 &lt;&lt; 21)</span>
<span class="cp">#define TVC_CLKOUT_ENABLE		(1 &lt;&lt; 20)</span>
<span class="cp">#define EXT_CLKIN_ENABLE		(1 &lt;&lt; 19)</span>
<span class="cp">#define PCI_66MHZ			(1 &lt;&lt; 18) </span><span class="cm">/* else 33 MHz */</span><span class="cp"></span>
<span class="cp">#define PCI_CLKOUT_ENABLE		(1 &lt;&lt; 17)</span>
<span class="cp">#define LPC_CLKOUT_ENABLE		(1 &lt;&lt; 16)</span>
<span class="cp">#define USB1_WAKEUP_ON			(1 &lt;&lt; 15)</span>
<span class="cp">#define USB0_WAKEUP_ON			(1 &lt;&lt; 14)</span>
<span class="cm">/* TODO: define PCI idle detect bits */</span>
<span class="cp">#define TVC_PADS_ENABLE			(1 &lt;&lt; 9)</span>
<span class="cp">#define SSP_PADS_ENABLE			(1 &lt;&lt; 8)</span>
<span class="cp">#define LCD_PADS_ENABLE			(1 &lt;&lt; 7)</span>
<span class="cp">#define LPC_PADS_ENABLE			(1 &lt;&lt; 6)</span>
<span class="cp">#define PCI_PADS_ENABLE			(1 &lt;&lt; 5)</span>
<span class="cp">#define IDE_PADS_ENABLE			(1 &lt;&lt; 4)</span>
<span class="cp">#define DRAM_PADS_POWER_DOWN		(1 &lt;&lt; 3)</span>
<span class="cp">#define NAND_PADS_DISABLE		(1 &lt;&lt; 2)</span>
<span class="cp">#define PFLASH_PADS_DISABLE		(1 &lt;&lt; 1)</span>
<span class="cp">#define SFLASH_PADS_DISABLE		(1 &lt;&lt; 0)</span>

<span class="cm">/* Global Clock Control Register */</span>
<span class="cp">#define GLOBAL_CLOCK_CTRL		0x34</span>

<span class="cp">#define POWER_STATE_G0			(1 &lt;&lt; 31)</span>
<span class="cp">#define POWER_STATE_S1			(1 &lt;&lt; 30) </span><span class="cm">/* else it is S3/S4 state */</span><span class="cp"></span>
<span class="cp">#define SECURITY_APB_AHB		(1 &lt;&lt; 29)</span>
<span class="cm">/* else Security APB clk will be 0.75xAHB */</span>
<span class="cm">/* TODO: TVC clock divider */</span>
<span class="cp">#define PCI_CLKRUN_ENABLE		(1 &lt;&lt; 16)</span>
<span class="cp">#define BOOT_CLK_DISABLE		(1 &lt;&lt; 13)</span>
<span class="cp">#define TVC_CLK_DISABLE			(1 &lt;&lt; 12)</span>
<span class="cp">#define FLASH_CLK_DISABLE		(1 &lt;&lt; 11)</span>
<span class="cp">#define DDR_CLK_DISABLE			(1 &lt;&lt; 10)</span>
<span class="cp">#define PCI_CLK_DISABLE			(1 &lt;&lt; 9)</span>
<span class="cp">#define IDE_CLK_DISABLE			(1 &lt;&lt; 8)</span>
<span class="cp">#define USB1_CLK_DISABLE		(1 &lt;&lt; 7)</span>
<span class="cp">#define USB0_CLK_DISABLE		(1 &lt;&lt; 6)</span>
<span class="cp">#define SATA1_CLK_DISABLE		(1 &lt;&lt; 5)</span>
<span class="cp">#define SATA0_CLK_DISABLE		(1 &lt;&lt; 4)</span>
<span class="cp">#define GMAC1_CLK_DISABLE		(1 &lt;&lt; 3)</span>
<span class="cp">#define GMAC0_CLK_DISABLE		(1 &lt;&lt; 2)</span>
<span class="cp">#define SECURITY_CLK_DISABLE		(1 &lt;&lt; 1)</span>

<span class="cm">/* TODO: other registers definitions if needed */</span>

<span class="cp">#endif </span><span class="cm">/* __MACH_GLOBAL_REG_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
