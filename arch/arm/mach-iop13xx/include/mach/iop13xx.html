<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-iop13xx › include › mach › iop13xx.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>iop13xx.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _IOP13XX_HW_H_</span>
<span class="cp">#define _IOP13XX_HW_H_</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cm">/* The ATU offsets can change based on the strapping */</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">iop13xx_atux_pmmr_offset</span><span class="p">;</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">iop13xx_atue_pmmr_offset</span><span class="p">;</span>
<span class="kt">void</span> <span class="n">iop13xx_init_early</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iop13xx_init_irq</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iop13xx_map_io</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iop13xx_platform_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iop13xx_add_tpmi_devices</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iop13xx_init_irq</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">iop13xx_restart</span><span class="p">(</span><span class="kt">char</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="p">);</span>

<span class="cm">/* CPUID CP6 R0 Page 0 */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">iop13xx_cpu_id</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mrc p6, 0, %0, c0, c0, 0&quot;</span><span class="o">:</span><span class="s">&quot;=r&quot;</span> <span class="p">(</span><span class="n">id</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">id</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* WDTCR CP6 R7 Page 9 */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">read_wdtcr</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mrc p6, 0, %0, c7, c9, 0&quot;</span><span class="o">:</span><span class="s">&quot;=r&quot;</span> <span class="p">(</span><span class="n">val</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">write_wdtcr</span><span class="p">(</span><span class="n">u32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mcr p6, 0, %0, c7, c9, 0&quot;</span><span class="o">::</span><span class="s">&quot;r&quot;</span> <span class="p">(</span><span class="n">val</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* WDTSR CP6 R8 Page 9 */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">read_wdtsr</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mrc p6, 0, %0, c8, c9, 0&quot;</span><span class="o">:</span><span class="s">&quot;=r&quot;</span> <span class="p">(</span><span class="n">val</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">write_wdtsr</span><span class="p">(</span><span class="n">u32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mcr p6, 0, %0, c8, c9, 0&quot;</span><span class="o">::</span><span class="s">&quot;r&quot;</span> <span class="p">(</span><span class="n">val</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* RCSR - Reset Cause Status Register  */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">read_rcsr</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mrc p6, 0, %0, c0, c1, 0&quot;</span><span class="o">:</span><span class="s">&quot;=r&quot;</span> <span class="p">(</span><span class="n">val</span><span class="p">));</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">get_iop_tick_rate</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * IOP13XX I/O and Mem space regions for PCI autoconfiguration</span>
<span class="cm"> */</span>
<span class="cp">#define IOP13XX_MAX_RAM_SIZE    0x80000000UL  </span><span class="cm">/* 2GB */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_PCI_OFFSET	 IOP13XX_MAX_RAM_SIZE</span>

<span class="cm">/* PCI MAP</span>
<span class="cm"> * bus range		cpu phys	cpu virt	note</span>
<span class="cm"> * 0x0000.0000 + 2GB	(n/a)		(n/a)		inbound, 1:1 mapping with Physical RAM</span>
<span class="cm"> * 0x8000.0000 + 928M	0x1.8000.0000   (ioremap)	PCIX outbound memory window</span>
<span class="cm"> * 0x8000.0000 + 928M	0x2.8000.0000   (ioremap)	PCIE outbound memory window</span>
<span class="cm"> *</span>
<span class="cm"> * IO MAP</span>
<span class="cm"> * 0x1000 + 64K	0x0.fffb.1000	0xfec6.1000	PCIX outbound i/o window</span>
<span class="cm"> * 0x1000 + 64K	0x0.fffd.1000	0xfed7.1000	PCIE outbound i/o window</span>
<span class="cm"> */</span>
<span class="cp">#define IOP13XX_PCIX_IO_WINDOW_SIZE   0x10000UL</span>
<span class="cp">#define IOP13XX_PCIX_LOWER_IO_PA      0xfffb0000UL</span>
<span class="cp">#define IOP13XX_PCIX_LOWER_IO_VA      0xfec60000UL</span>
<span class="cp">#define IOP13XX_PCIX_LOWER_IO_BA      0x0UL </span><span class="cm">/* OIOTVR */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_PCIX_IO_BUS_OFFSET    0x1000UL</span>
<span class="cp">#define IOP13XX_PCIX_UPPER_IO_PA      (IOP13XX_PCIX_LOWER_IO_PA +\</span>
<span class="cp">				       IOP13XX_PCIX_IO_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIX_UPPER_IO_VA      (IOP13XX_PCIX_LOWER_IO_VA +\</span>
<span class="cp">				       IOP13XX_PCIX_IO_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIX_IO_PHYS_TO_VIRT(addr) (u32) ((u32) addr -\</span>
<span class="cp">					   (IOP13XX_PCIX_LOWER_IO_PA\</span>
<span class="cp">					   - IOP13XX_PCIX_LOWER_IO_VA))</span>

<span class="cp">#define IOP13XX_PCIX_MEM_PHYS_OFFSET  0x100000000ULL</span>
<span class="cp">#define IOP13XX_PCIX_MEM_WINDOW_SIZE  0x3a000000UL</span>
<span class="cp">#define IOP13XX_PCIX_LOWER_MEM_BA     (PHYS_OFFSET + IOP13XX_PCI_OFFSET)</span>
<span class="cp">#define IOP13XX_PCIX_LOWER_MEM_PA     (IOP13XX_PCIX_MEM_PHYS_OFFSET +\</span>
<span class="cp">				       IOP13XX_PCIX_LOWER_MEM_BA)</span>
<span class="cp">#define IOP13XX_PCIX_UPPER_MEM_PA     (IOP13XX_PCIX_LOWER_MEM_PA +\</span>
<span class="cp">				       IOP13XX_PCIX_MEM_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIX_UPPER_MEM_BA     (IOP13XX_PCIX_LOWER_MEM_BA +\</span>
<span class="cp">				       IOP13XX_PCIX_MEM_WINDOW_SIZE - 1)</span>

<span class="cp">#define IOP13XX_PCIX_MEM_COOKIE        0x80000000UL</span>
<span class="cp">#define IOP13XX_PCIX_LOWER_MEM_RA      IOP13XX_PCIX_MEM_COOKIE</span>
<span class="cp">#define IOP13XX_PCIX_UPPER_MEM_RA      (IOP13XX_PCIX_LOWER_MEM_RA +\</span>
<span class="cp">					IOP13XX_PCIX_MEM_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIX_MEM_OFFSET        (IOP13XX_PCIX_MEM_COOKIE -\</span>
<span class="cp">					IOP13XX_PCIX_LOWER_MEM_BA)</span>

<span class="cm">/* PCI-E ranges */</span>
<span class="cp">#define IOP13XX_PCIE_IO_WINDOW_SIZE   	 0x10000UL</span>
<span class="cp">#define IOP13XX_PCIE_LOWER_IO_PA      	 0xfffd0000UL</span>
<span class="cp">#define IOP13XX_PCIE_LOWER_IO_VA      	 0xfed70000UL</span>
<span class="cp">#define IOP13XX_PCIE_LOWER_IO_BA      	 0x0UL  </span><span class="cm">/* OIOTVR */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_PCIE_IO_BUS_OFFSET	 0x1000UL</span>
<span class="cp">#define IOP13XX_PCIE_UPPER_IO_PA      	 (IOP13XX_PCIE_LOWER_IO_PA +\</span>
<span class="cp">					 IOP13XX_PCIE_IO_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIE_UPPER_IO_VA      	 (IOP13XX_PCIE_LOWER_IO_VA +\</span>
<span class="cp">					 IOP13XX_PCIE_IO_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIE_UPPER_IO_BA      	 (IOP13XX_PCIE_LOWER_IO_BA +\</span>
<span class="cp">					 IOP13XX_PCIE_IO_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIE_IO_PHYS_TO_VIRT(addr) (u32) ((u32) addr -\</span>
<span class="cp">					   (IOP13XX_PCIE_LOWER_IO_PA\</span>
<span class="cp">					   - IOP13XX_PCIE_LOWER_IO_VA))</span>

<span class="cp">#define IOP13XX_PCIE_MEM_PHYS_OFFSET  	 0x200000000ULL</span>
<span class="cp">#define IOP13XX_PCIE_MEM_WINDOW_SIZE  	 0x3a000000UL</span>
<span class="cp">#define IOP13XX_PCIE_LOWER_MEM_BA     	 (PHYS_OFFSET + IOP13XX_PCI_OFFSET)</span>
<span class="cp">#define IOP13XX_PCIE_LOWER_MEM_PA     	 (IOP13XX_PCIE_MEM_PHYS_OFFSET +\</span>
<span class="cp">					 IOP13XX_PCIE_LOWER_MEM_BA)</span>
<span class="cp">#define IOP13XX_PCIE_UPPER_MEM_PA     	 (IOP13XX_PCIE_LOWER_MEM_PA +\</span>
<span class="cp">					 IOP13XX_PCIE_MEM_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIE_UPPER_MEM_BA     	 (IOP13XX_PCIE_LOWER_MEM_BA +\</span>
<span class="cp">					 IOP13XX_PCIE_MEM_WINDOW_SIZE - 1)</span>

<span class="cm">/* All 0xc000.0000 - 0xfdff.ffff addresses belong to PCIe */</span>
<span class="cp">#define IOP13XX_PCIE_MEM_COOKIE       	 0xc0000000UL</span>
<span class="cp">#define IOP13XX_PCIE_LOWER_MEM_RA     	 IOP13XX_PCIE_MEM_COOKIE</span>
<span class="cp">#define IOP13XX_PCIE_UPPER_MEM_RA     	 (IOP13XX_PCIE_LOWER_MEM_RA +\</span>
<span class="cp">					 IOP13XX_PCIE_MEM_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PCIE_MEM_OFFSET       	 (IOP13XX_PCIE_MEM_COOKIE -\</span>
<span class="cp">					 IOP13XX_PCIE_LOWER_MEM_BA)</span>

<span class="cm">/* PBI Ranges */</span>
<span class="cp">#define IOP13XX_PBI_LOWER_MEM_PA	  0xf0000000UL</span>
<span class="cp">#define IOP13XX_PBI_MEM_WINDOW_SIZE	  0x04000000UL</span>
<span class="cp">#define IOP13XX_PBI_MEM_COOKIE		  0xfa000000UL</span>
<span class="cp">#define IOP13XX_PBI_LOWER_MEM_RA	  IOP13XX_PBI_MEM_COOKIE</span>
<span class="cp">#define IOP13XX_PBI_UPPER_MEM_RA	  (IOP13XX_PBI_LOWER_MEM_RA +\</span>
<span class="cp">					  IOP13XX_PBI_MEM_WINDOW_SIZE - 1)</span>

<span class="cm">/*</span>
<span class="cm"> * IOP13XX chipset registers</span>
<span class="cm"> */</span>
<span class="cp">#define IOP13XX_PMMR_PHYS_MEM_BASE	   0xffd80000UL  </span><span class="cm">/* PMMR phys. address */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_PMMR_VIRT_MEM_BASE	   0xfee80000UL  </span><span class="cm">/* PMMR phys. address */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_PMMR_MEM_WINDOW_SIZE	   0x80000</span>
<span class="cp">#define IOP13XX_PMMR_UPPER_MEM_VA	   (IOP13XX_PMMR_VIRT_MEM_BASE +\</span>
<span class="cp">					   IOP13XX_PMMR_MEM_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PMMR_UPPER_MEM_PA	   (IOP13XX_PMMR_PHYS_MEM_BASE +\</span>
<span class="cp">					   IOP13XX_PMMR_MEM_WINDOW_SIZE - 1)</span>
<span class="cp">#define IOP13XX_PMMR_VIRT_TO_PHYS(addr)   (u32) ((u32) addr +\</span>
<span class="cp">					   (IOP13XX_PMMR_PHYS_MEM_BASE\</span>
<span class="cp">					   - IOP13XX_PMMR_VIRT_MEM_BASE))</span>
<span class="cp">#define IOP13XX_PMMR_PHYS_TO_VIRT(addr)   (u32) ((u32) addr -\</span>
<span class="cp">					   (IOP13XX_PMMR_PHYS_MEM_BASE\</span>
<span class="cp">					   - IOP13XX_PMMR_VIRT_MEM_BASE))</span>
<span class="cp">#define IOP13XX_REG_ADDR32(reg)     	   (IOP13XX_PMMR_VIRT_MEM_BASE + (reg))</span>
<span class="cp">#define IOP13XX_REG_ADDR16(reg)     	   (IOP13XX_PMMR_VIRT_MEM_BASE + (reg))</span>
<span class="cp">#define IOP13XX_REG_ADDR8(reg)      	   (IOP13XX_PMMR_VIRT_MEM_BASE + (reg))</span>
<span class="cp">#define IOP13XX_REG_ADDR32_PHYS(reg)      (IOP13XX_PMMR_PHYS_MEM_BASE + (reg))</span>
<span class="cp">#define IOP13XX_REG_ADDR16_PHYS(reg)      (IOP13XX_PMMR_PHYS_MEM_BASE + (reg))</span>
<span class="cp">#define IOP13XX_REG_ADDR8_PHYS(reg)       (IOP13XX_PMMR_PHYS_MEM_BASE + (reg))</span>
<span class="cp">#define IOP13XX_PMMR_SIZE		   0x00080000</span>

<span class="cm">/*=================== Defines for Platform Devices =====================*/</span>
<span class="cp">#define IOP13XX_UART0_PHYS  (IOP13XX_PMMR_PHYS_MEM_BASE | 0x00002300)</span>
<span class="cp">#define IOP13XX_UART1_PHYS  (IOP13XX_PMMR_PHYS_MEM_BASE | 0x00002340)</span>
<span class="cp">#define IOP13XX_UART0_VIRT  (IOP13XX_PMMR_VIRT_MEM_BASE | 0x00002300)</span>
<span class="cp">#define IOP13XX_UART1_VIRT  (IOP13XX_PMMR_VIRT_MEM_BASE | 0x00002340)</span>

<span class="cp">#define IOP13XX_I2C0_PHYS   (IOP13XX_PMMR_PHYS_MEM_BASE | 0x00002500)</span>
<span class="cp">#define IOP13XX_I2C1_PHYS   (IOP13XX_PMMR_PHYS_MEM_BASE | 0x00002520)</span>
<span class="cp">#define IOP13XX_I2C2_PHYS   (IOP13XX_PMMR_PHYS_MEM_BASE | 0x00002540)</span>
<span class="cp">#define IOP13XX_I2C0_VIRT   (IOP13XX_PMMR_VIRT_MEM_BASE | 0x00002500)</span>
<span class="cp">#define IOP13XX_I2C1_VIRT   (IOP13XX_PMMR_VIRT_MEM_BASE | 0x00002520)</span>
<span class="cp">#define IOP13XX_I2C2_VIRT   (IOP13XX_PMMR_VIRT_MEM_BASE | 0x00002540)</span>

<span class="cm">/* ATU selection flags */</span>
<span class="cm">/* IOP13XX_INIT_ATU_DEFAULT = Rely on CONFIG_IOP13XX_ATU* */</span>
<span class="cp">#define IOP13XX_INIT_ATU_DEFAULT     (0)</span>
<span class="cp">#define IOP13XX_INIT_ATU_ATUX	      (1 &lt;&lt; 0)</span>
<span class="cp">#define IOP13XX_INIT_ATU_ATUE	      (1 &lt;&lt; 1)</span>
<span class="cp">#define IOP13XX_INIT_ATU_NONE	      (1 &lt;&lt; 2)</span>

<span class="cm">/* UART selection flags */</span>
<span class="cm">/* IOP13XX_INIT_UART_DEFAULT = Rely on CONFIG_IOP13XX_UART* */</span>
<span class="cp">#define IOP13XX_INIT_UART_DEFAULT    (0)</span>
<span class="cp">#define IOP13XX_INIT_UART_0	      (1 &lt;&lt; 0)</span>
<span class="cp">#define IOP13XX_INIT_UART_1	      (1 &lt;&lt; 1)</span>

<span class="cm">/* I2C selection flags */</span>
<span class="cm">/* IOP13XX_INIT_I2C_DEFAULT = Rely on CONFIG_IOP13XX_I2C* */</span>
<span class="cp">#define IOP13XX_INIT_I2C_DEFAULT     (0)</span>
<span class="cp">#define IOP13XX_INIT_I2C_0	      (1 &lt;&lt; 0)</span>
<span class="cp">#define IOP13XX_INIT_I2C_1	      (1 &lt;&lt; 1)</span>
<span class="cp">#define IOP13XX_INIT_I2C_2	      (1 &lt;&lt; 2)</span>

<span class="cm">/* ADMA selection flags */</span>
<span class="cm">/* INIT_ADMA_DEFAULT = Rely on CONFIG_IOP13XX_ADMA* */</span>
<span class="cp">#define IOP13XX_INIT_ADMA_DEFAULT     (0)</span>
<span class="cp">#define IOP13XX_INIT_ADMA_0           (1 &lt;&lt; 0)</span>
<span class="cp">#define IOP13XX_INIT_ADMA_1           (1 &lt;&lt; 1)</span>
<span class="cp">#define IOP13XX_INIT_ADMA_2           (1 &lt;&lt; 2)</span>

<span class="cm">/* Platform devices */</span>
<span class="cp">#define IQ81340_NUM_UART     		2</span>
<span class="cp">#define IQ81340_NUM_I2C      		3</span>
<span class="cp">#define IQ81340_NUM_PHYS_MAP_FLASH	1</span>
<span class="cp">#define IQ81340_NUM_ADMA     		3</span>
<span class="cp">#define IQ81340_MAX_PLAT_DEVICES (IQ81340_NUM_UART + \</span>
<span class="cp">				IQ81340_NUM_I2C + \</span>
<span class="cp">				IQ81340_NUM_PHYS_MAP_FLASH + \</span>
<span class="cp">				IQ81340_NUM_ADMA)</span>

<span class="cm">/*========================== PMMR offsets for key registers ============*/</span>
<span class="cp">#define IOP13XX_ATU0_PMMR_OFFSET   	0x00048000</span>
<span class="cp">#define IOP13XX_ATU1_PMMR_OFFSET   	0x0004c000</span>
<span class="cp">#define IOP13XX_ATU2_PMMR_OFFSET   	0x0004d000</span>
<span class="cp">#define IOP13XX_ADMA0_PMMR_OFFSET  	0x00000000</span>
<span class="cp">#define IOP13XX_ADMA1_PMMR_OFFSET  	0x00000200</span>
<span class="cp">#define IOP13XX_ADMA2_PMMR_OFFSET  	0x00000400</span>
<span class="cp">#define IOP13XX_PBI_PMMR_OFFSET    	0x00001580</span>
<span class="cp">#define IOP13XX_MU_PMMR_OFFSET		0x00004000</span>
<span class="cp">#define IOP13XX_ESSR0_PMMR_OFFSET  	0x00002188</span>
<span class="cp">#define IOP13XX_ESSR0			IOP13XX_REG_ADDR32(0x00002188)</span>

<span class="cp">#define IOP13XX_ESSR0_IFACE_MASK   	0x00004000  </span><span class="cm">/* Interface PCI-X / PCI-E */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_CONTROLLER_ONLY    	(1 &lt;&lt; 14)</span>
<span class="cp">#define IOP13XX_INTERFACE_SEL_PCIX 	(1 &lt;&lt; 15)</span>

<span class="cp">#define IOP13XX_PMON_PMMR_OFFSET	0x0001A000</span>
<span class="cp">#define IOP13XX_PMON_BASE		(IOP13XX_PMMR_VIRT_MEM_BASE +\</span>
<span class="cp">					IOP13XX_PMON_PMMR_OFFSET)</span>
<span class="cp">#define IOP13XX_PMON_PHYSBASE		(IOP13XX_PMMR_PHYS_MEM_BASE +\</span>
<span class="cp">					IOP13XX_PMON_PMMR_OFFSET)</span>

<span class="cp">#define IOP13XX_PMON_CMD0		(IOP13XX_PMON_BASE + 0x0)</span>
<span class="cp">#define IOP13XX_PMON_EVR0		(IOP13XX_PMON_BASE + 0x4)</span>
<span class="cp">#define IOP13XX_PMON_STS0		(IOP13XX_PMON_BASE + 0x8)</span>
<span class="cp">#define IOP13XX_PMON_DATA0		(IOP13XX_PMON_BASE + 0xC)</span>

<span class="cp">#define IOP13XX_PMON_CMD3		(IOP13XX_PMON_BASE + 0x30)</span>
<span class="cp">#define IOP13XX_PMON_EVR3		(IOP13XX_PMON_BASE + 0x34)</span>
<span class="cp">#define IOP13XX_PMON_STS3		(IOP13XX_PMON_BASE + 0x38)</span>
<span class="cp">#define IOP13XX_PMON_DATA3		(IOP13XX_PMON_BASE + 0x3C)</span>

<span class="cp">#define IOP13XX_PMON_CMD7		(IOP13XX_PMON_BASE + 0x70)</span>
<span class="cp">#define IOP13XX_PMON_EVR7		(IOP13XX_PMON_BASE + 0x74)</span>
<span class="cp">#define IOP13XX_PMON_STS7		(IOP13XX_PMON_BASE + 0x78)</span>
<span class="cp">#define IOP13XX_PMON_DATA7		(IOP13XX_PMON_BASE + 0x7C)</span>

<span class="cp">#define IOP13XX_PMONEN			(IOP13XX_PMMR_VIRT_MEM_BASE + 0x4E040)</span>
<span class="cp">#define IOP13XX_PMONSTAT		(IOP13XX_PMMR_VIRT_MEM_BASE + 0x4E044)</span>

<span class="cm">/*================================ATU===================================*/</span>
<span class="cp">#define IOP13XX_ATUX_OFFSET(ofs)	IOP13XX_REG_ADDR32(\</span>
<span class="cp">					iop13xx_atux_pmmr_offset + (ofs))</span>

<span class="cp">#define IOP13XX_ATUX_DID		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atux_pmmr_offset + 0x2)</span>

<span class="cp">#define IOP13XX_ATUX_ATUCMD		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atux_pmmr_offset + 0x4)</span>
<span class="cp">#define IOP13XX_ATUX_ATUSR		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atux_pmmr_offset + 0x6)</span>

<span class="cp">#define IOP13XX_ATUX_IABAR0   		IOP13XX_ATUX_OFFSET(0x10)</span>
<span class="cp">#define IOP13XX_ATUX_IAUBAR0  		IOP13XX_ATUX_OFFSET(0x14)</span>
<span class="cp">#define IOP13XX_ATUX_IABAR1   		IOP13XX_ATUX_OFFSET(0x18)</span>
<span class="cp">#define IOP13XX_ATUX_IAUBAR1  		IOP13XX_ATUX_OFFSET(0x1c)</span>
<span class="cp">#define IOP13XX_ATUX_IABAR2   		IOP13XX_ATUX_OFFSET(0x20)</span>
<span class="cp">#define IOP13XX_ATUX_IAUBAR2  		IOP13XX_ATUX_OFFSET(0x24)</span>
<span class="cp">#define IOP13XX_ATUX_IALR0    		IOP13XX_ATUX_OFFSET(0x40)</span>
<span class="cp">#define IOP13XX_ATUX_IATVR0   		IOP13XX_ATUX_OFFSET(0x44)</span>
<span class="cp">#define IOP13XX_ATUX_IAUTVR0  		IOP13XX_ATUX_OFFSET(0x48)</span>
<span class="cp">#define IOP13XX_ATUX_IALR1    		IOP13XX_ATUX_OFFSET(0x4c)</span>
<span class="cp">#define IOP13XX_ATUX_IATVR1   		IOP13XX_ATUX_OFFSET(0x50)</span>
<span class="cp">#define IOP13XX_ATUX_IAUTVR1  		IOP13XX_ATUX_OFFSET(0x54)</span>
<span class="cp">#define IOP13XX_ATUX_IALR2    		IOP13XX_ATUX_OFFSET(0x58)</span>
<span class="cp">#define IOP13XX_ATUX_IATVR2   		IOP13XX_ATUX_OFFSET(0x5c)</span>
<span class="cp">#define IOP13XX_ATUX_IAUTVR2  		IOP13XX_ATUX_OFFSET(0x60)</span>
<span class="cp">#define IOP13XX_ATUX_ATUCR    		IOP13XX_ATUX_OFFSET(0x70)</span>
<span class="cp">#define IOP13XX_ATUX_PCSR     		IOP13XX_ATUX_OFFSET(0x74)</span>
<span class="cp">#define IOP13XX_ATUX_ATUISR   		IOP13XX_ATUX_OFFSET(0x78)</span>
<span class="cp">#define IOP13XX_ATUX_PCIXSR   		IOP13XX_ATUX_OFFSET(0xD4)</span>
<span class="cp">#define IOP13XX_ATUX_IABAR3   		IOP13XX_ATUX_OFFSET(0x200)</span>
<span class="cp">#define IOP13XX_ATUX_IAUBAR3  		IOP13XX_ATUX_OFFSET(0x204)</span>
<span class="cp">#define IOP13XX_ATUX_IALR3    		IOP13XX_ATUX_OFFSET(0x208)</span>
<span class="cp">#define IOP13XX_ATUX_IATVR3   		IOP13XX_ATUX_OFFSET(0x20c)</span>
<span class="cp">#define IOP13XX_ATUX_IAUTVR3  		IOP13XX_ATUX_OFFSET(0x210)</span>

<span class="cp">#define IOP13XX_ATUX_OIOBAR   		IOP13XX_ATUX_OFFSET(0x300)</span>
<span class="cp">#define IOP13XX_ATUX_OIOWTVR  		IOP13XX_ATUX_OFFSET(0x304)</span>
<span class="cp">#define IOP13XX_ATUX_OUMBAR0  		IOP13XX_ATUX_OFFSET(0x308)</span>
<span class="cp">#define IOP13XX_ATUX_OUMWTVR0 		IOP13XX_ATUX_OFFSET(0x30c)</span>
<span class="cp">#define IOP13XX_ATUX_OUMBAR1  		IOP13XX_ATUX_OFFSET(0x310)</span>
<span class="cp">#define IOP13XX_ATUX_OUMWTVR1 		IOP13XX_ATUX_OFFSET(0x314)</span>
<span class="cp">#define IOP13XX_ATUX_OUMBAR2  		IOP13XX_ATUX_OFFSET(0x318)</span>
<span class="cp">#define IOP13XX_ATUX_OUMWTVR2 		IOP13XX_ATUX_OFFSET(0x31c)</span>
<span class="cp">#define IOP13XX_ATUX_OUMBAR3  		IOP13XX_ATUX_OFFSET(0x320)</span>
<span class="cp">#define IOP13XX_ATUX_OUMWTVR3 		IOP13XX_ATUX_OFFSET(0x324)</span>
<span class="cp">#define IOP13XX_ATUX_OUDMABAR 		IOP13XX_ATUX_OFFSET(0x328)</span>
<span class="cp">#define IOP13XX_ATUX_OUMSIBAR 		IOP13XX_ATUX_OFFSET(0x32c)</span>
<span class="cp">#define IOP13XX_ATUX_OCCAR    		IOP13XX_ATUX_OFFSET(0x330)</span>
<span class="cp">#define IOP13XX_ATUX_OCCDR    		IOP13XX_ATUX_OFFSET(0x334)</span>

<span class="cp">#define IOP13XX_ATUX_ATUCR_OUT_EN		(1 &lt;&lt; 1)</span>
<span class="cp">#define IOP13XX_ATUX_PCSR_CENTRAL_RES		(1 &lt;&lt; 25)</span>
<span class="cp">#define IOP13XX_ATUX_PCSR_P_RSTOUT		(1 &lt;&lt; 21)</span>
<span class="cp">#define IOP13XX_ATUX_PCSR_OUT_Q_BUSY		(1 &lt;&lt; 15)</span>
<span class="cp">#define IOP13XX_ATUX_PCSR_IN_Q_BUSY		(1 &lt;&lt; 14)</span>
<span class="cp">#define IOP13XX_ATUX_PCSR_FREQ_OFFSET		(16)</span>

<span class="cp">#define IOP13XX_ATUX_STAT_PCI_IFACE_ERR	(1 &lt;&lt; 18)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_VPD_ADDR		(1 &lt;&lt; 17)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_INT_PAR_ERR		(1 &lt;&lt; 16)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_CFG_WRITE		(1 &lt;&lt; 15)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_ERR_COR		(1 &lt;&lt; 14)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_TX_SCEM		(1 &lt;&lt; 13)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_REC_SCEM		(1 &lt;&lt; 12)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_POWER_TRAN	 	(1 &lt;&lt; 11)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_TX_SERR		(1 &lt;&lt; 10)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_DET_PAR_ERR	 	(1 &lt;&lt; 9	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_BIST			(1 &lt;&lt; 8	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_INT_REC_MABORT 	(1 &lt;&lt; 7	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_REC_SERR		(1 &lt;&lt; 4	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_EXT_REC_MABORT 	(1 &lt;&lt; 3	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_EXT_REC_TABORT 	(1 &lt;&lt; 2	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_EXT_SIG_TABORT 	(1 &lt;&lt; 1	)</span>
<span class="cp">#define IOP13XX_ATUX_STAT_MASTER_DATA_PAR	(1 &lt;&lt; 0	)</span>

<span class="cp">#define IOP13XX_ATUX_PCIXSR_BUS_NUM	(8)</span>
<span class="cp">#define IOP13XX_ATUX_PCIXSR_DEV_NUM	(3)</span>
<span class="cp">#define IOP13XX_ATUX_PCIXSR_FUNC_NUM	(0)</span>

<span class="cp">#define IOP13XX_ATUX_IALR_DISABLE  	0x00000001</span>
<span class="cp">#define IOP13XX_ATUX_OUMBAR_ENABLE 	0x80000000</span>

<span class="cp">#define IOP13XX_ATUE_OFFSET(ofs)	IOP13XX_REG_ADDR32(\</span>
<span class="cp">					iop13xx_atue_pmmr_offset + (ofs))</span>

<span class="cp">#define IOP13XX_ATUE_DID		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atue_pmmr_offset + 0x2)</span>
<span class="cp">#define IOP13XX_ATUE_ATUCMD		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atue_pmmr_offset + 0x4)</span>
<span class="cp">#define IOP13XX_ATUE_ATUSR		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atue_pmmr_offset + 0x6)</span>

<span class="cp">#define IOP13XX_ATUE_IABAR0		IOP13XX_ATUE_OFFSET(0x10)</span>
<span class="cp">#define IOP13XX_ATUE_IAUBAR0		IOP13XX_ATUE_OFFSET(0x14)</span>
<span class="cp">#define IOP13XX_ATUE_IABAR1		IOP13XX_ATUE_OFFSET(0x18)</span>
<span class="cp">#define IOP13XX_ATUE_IAUBAR1		IOP13XX_ATUE_OFFSET(0x1c)</span>
<span class="cp">#define IOP13XX_ATUE_IABAR2		IOP13XX_ATUE_OFFSET(0x20)</span>
<span class="cp">#define IOP13XX_ATUE_IAUBAR2		IOP13XX_ATUE_OFFSET(0x24)</span>
<span class="cp">#define IOP13XX_ATUE_IALR0		IOP13XX_ATUE_OFFSET(0x40)</span>
<span class="cp">#define IOP13XX_ATUE_IATVR0		IOP13XX_ATUE_OFFSET(0x44)</span>
<span class="cp">#define IOP13XX_ATUE_IAUTVR0		IOP13XX_ATUE_OFFSET(0x48)</span>
<span class="cp">#define IOP13XX_ATUE_IALR1		IOP13XX_ATUE_OFFSET(0x4c)</span>
<span class="cp">#define IOP13XX_ATUE_IATVR1		IOP13XX_ATUE_OFFSET(0x50)</span>
<span class="cp">#define IOP13XX_ATUE_IAUTVR1		IOP13XX_ATUE_OFFSET(0x54)</span>
<span class="cp">#define IOP13XX_ATUE_IALR2		IOP13XX_ATUE_OFFSET(0x58)</span>
<span class="cp">#define IOP13XX_ATUE_IATVR2		IOP13XX_ATUE_OFFSET(0x5c)</span>
<span class="cp">#define IOP13XX_ATUE_IAUTVR2		IOP13XX_ATUE_OFFSET(0x60)</span>
<span class="cp">#define IOP13XX_ATUE_PE_LSTS		IOP13XX_REG_ADDR16(\</span>
<span class="cp">					iop13xx_atue_pmmr_offset + 0xe2)</span>
<span class="cp">#define IOP13XX_ATUE_OIOWTVR		IOP13XX_ATUE_OFFSET(0x304)</span>
<span class="cp">#define IOP13XX_ATUE_OUMBAR0		IOP13XX_ATUE_OFFSET(0x308)</span>
<span class="cp">#define IOP13XX_ATUE_OUMWTVR0		IOP13XX_ATUE_OFFSET(0x30c)</span>
<span class="cp">#define IOP13XX_ATUE_OUMBAR1		IOP13XX_ATUE_OFFSET(0x310)</span>
<span class="cp">#define IOP13XX_ATUE_OUMWTVR1		IOP13XX_ATUE_OFFSET(0x314)</span>
<span class="cp">#define IOP13XX_ATUE_OUMBAR2		IOP13XX_ATUE_OFFSET(0x318)</span>
<span class="cp">#define IOP13XX_ATUE_OUMWTVR2		IOP13XX_ATUE_OFFSET(0x31c)</span>
<span class="cp">#define IOP13XX_ATUE_OUMBAR3		IOP13XX_ATUE_OFFSET(0x320)</span>
<span class="cp">#define IOP13XX_ATUE_OUMWTVR3		IOP13XX_ATUE_OFFSET(0x324)</span>

<span class="cp">#define IOP13XX_ATUE_ATUCR		IOP13XX_ATUE_OFFSET(0x70)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR		IOP13XX_ATUE_OFFSET(0x74)</span>
<span class="cp">#define IOP13XX_ATUE_ATUISR		IOP13XX_ATUE_OFFSET(0x78)</span>
<span class="cp">#define IOP13XX_ATUE_OIOBAR		IOP13XX_ATUE_OFFSET(0x300)</span>
<span class="cp">#define IOP13XX_ATUE_OCCAR		IOP13XX_ATUE_OFFSET(0x32c)</span>
<span class="cp">#define IOP13XX_ATUE_OCCDR		IOP13XX_ATUE_OFFSET(0x330)</span>

<span class="cp">#define IOP13XX_ATUE_PIE_STS		IOP13XX_ATUE_OFFSET(0x384)</span>
<span class="cp">#define IOP13XX_ATUE_PIE_MSK		IOP13XX_ATUE_OFFSET(0x388)</span>

<span class="cp">#define IOP13XX_ATUE_ATUCR_IVM		(1 &lt;&lt; 6)</span>
<span class="cp">#define IOP13XX_ATUE_ATUCR_OUT_EN	(1 &lt;&lt; 1)</span>
<span class="cp">#define IOP13XX_ATUE_OCCAR_BUS_NUM	(24)</span>
<span class="cp">#define IOP13XX_ATUE_OCCAR_DEV_NUM	(19)</span>
<span class="cp">#define IOP13XX_ATUE_OCCAR_FUNC_NUM	(16)</span>
<span class="cp">#define IOP13XX_ATUE_OCCAR_EXT_REG	(8)</span>
<span class="cp">#define IOP13XX_ATUE_OCCAR_REG		(2)</span>

<span class="cp">#define IOP13XX_ATUE_PCSR_BUS_NUM	(24)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_DEV_NUM	(19)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_FUNC_NUM	(16)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_OUT_Q_BUSY	(1 &lt;&lt; 15)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_IN_Q_BUSY	(1 &lt;&lt; 14)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_END_POINT	(1 &lt;&lt; 13)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_LLRB_BUSY	(1 &lt;&lt; 12)</span>

<span class="cp">#define IOP13XX_ATUE_PCSR_BUS_NUM_MASK		(0xff)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_DEV_NUM_MASK		(0x1f)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_FUNC_NUM_MASK	(0x7)</span>

<span class="cp">#define IOP13XX_ATUE_PCSR_CORE_RESET		(8)</span>
<span class="cp">#define IOP13XX_ATUE_PCSR_FUNC_NUM		(16)</span>

<span class="cp">#define IOP13XX_ATUE_LSTS_TRAINING		(1 &lt;&lt; 11)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_SLOT_PWR_MSG		(1 &lt;&lt; 28)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_PME			(1 &lt;&lt; 27)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_HOT_PLUG_MSG		(1 &lt;&lt; 26)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_IVM			(1 &lt;&lt; 25)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_BIST			(1 &lt;&lt; 24)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_CFG_WRITE		(1 &lt;&lt; 18)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_VPD_ADDR		(1 &lt;&lt; 17)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_POWER_TRAN		(1 &lt;&lt; 16)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_HALT_ON_ERROR	(1 &lt;&lt; 13)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_ROOT_SYS_ERR		(1 &lt;&lt; 12)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_ROOT_ERR_MSG		(1 &lt;&lt; 11)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_PCI_IFACE_ERR	(1 &lt;&lt; 10)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_ERR_COR		(1 &lt;&lt; 9	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_ERR_UNCOR		(1 &lt;&lt; 8	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_CRS			(1 &lt;&lt; 7	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_LNK_DWN		(1 &lt;&lt; 6	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_INT_REC_MABORT	(1 &lt;&lt; 5	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_DET_PAR_ERR		(1 &lt;&lt; 4	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_EXT_REC_MABORT	(1 &lt;&lt; 3	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_SIG_TABORT		(1 &lt;&lt; 2	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_EXT_REC_TABORT	(1 &lt;&lt; 1	)</span>
<span class="cp">#define IOP13XX_ATUE_STAT_MASTER_DATA_PAR	(1 &lt;&lt; 0	)</span>

<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_UNSUPPORTED_COMP_REQ	(1 &lt;&lt; 31)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_COMPLETER_ABORT		(1 &lt;&lt; 30)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_TX_POISONED_TLP		(1 &lt;&lt; 29)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_TX_PAR_ERR			(1 &lt;&lt; 28)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_UNSUPPORTED_REQ		(1 &lt;&lt; 20)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_ECRC_ERR		(1 &lt;&lt; 19)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_MALFORMED_TLP		(1 &lt;&lt; 18)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_TX_RECEIVER_OVERFLOW	(1 &lt;&lt; 17)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_UNEXPECTED_COMP		(1 &lt;&lt; 16)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_INT_COMP_ABORT		(1 &lt;&lt; 15)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_COMP_TIMEOUT		(1 &lt;&lt; 14)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_FLOW_CONTROL_ERR		(1 &lt;&lt; 13)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_REC_POISONED_TLP		(1 &lt;&lt; 12)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_DATA_LNK_ERR		(1 &lt;&lt; 4	)</span>
<span class="cp">#define IOP13XX_ATUE_ESTAT_TRAINING_ERR		(1 &lt;&lt; 0	)</span>

<span class="cp">#define IOP13XX_ATUE_IALR_DISABLE   		(0x00000001)</span>
<span class="cp">#define IOP13XX_ATUE_OUMBAR_ENABLE  		(0x80000000)</span>
<span class="cp">#define IOP13XX_ATU_OUMBAR_FUNC_NUM  		(28)</span>
<span class="cp">#define IOP13XX_ATU_OUMBAR_FUNC_NUM_MASK  	(0x7)</span>
<span class="cm">/*=======================================================================*/</span>

<span class="cm">/*============================MESSAGING UNIT=============================*/</span>
<span class="cp">#define IOP13XX_MU_OFFSET(ofs)	IOP13XX_REG_ADDR32(IOP13XX_MU_PMMR_OFFSET +\</span>
<span class="cp">							(ofs))</span>

<span class="cp">#define IOP13XX_MU_IMR0	IOP13XX_MU_OFFSET(0x10)</span>
<span class="cp">#define IOP13XX_MU_IMR1	IOP13XX_MU_OFFSET(0x14)</span>
<span class="cp">#define IOP13XX_MU_OMR0	IOP13XX_MU_OFFSET(0x18)</span>
<span class="cp">#define IOP13XX_MU_OMR1	IOP13XX_MU_OFFSET(0x1C)</span>
<span class="cp">#define IOP13XX_MU_IDR	       	IOP13XX_MU_OFFSET(0x20)</span>
<span class="cp">#define IOP13XX_MU_IISR	IOP13XX_MU_OFFSET(0x24)</span>
<span class="cp">#define IOP13XX_MU_IIMR	IOP13XX_MU_OFFSET(0x28)</span>
<span class="cp">#define IOP13XX_MU_ODR	       	IOP13XX_MU_OFFSET(0x2C)</span>
<span class="cp">#define IOP13XX_MU_OISR	IOP13XX_MU_OFFSET(0x30)</span>
<span class="cp">#define IOP13XX_MU_OIMR	IOP13XX_MU_OFFSET(0x34)</span>
<span class="cp">#define IOP13XX_MU_IRCSR      	IOP13XX_MU_OFFSET(0x38)</span>
<span class="cp">#define IOP13XX_MU_ORCSR      	IOP13XX_MU_OFFSET(0x3C)</span>
<span class="cp">#define IOP13XX_MU_MIMR	IOP13XX_MU_OFFSET(0x48)</span>
<span class="cp">#define IOP13XX_MU_MUCR	IOP13XX_MU_OFFSET(0x50)</span>
<span class="cp">#define IOP13XX_MU_QBAR	IOP13XX_MU_OFFSET(0x54)</span>
<span class="cp">#define IOP13XX_MU_MUBAR      	IOP13XX_MU_OFFSET(0x84)</span>

<span class="cp">#define IOP13XX_MU_WINDOW_SIZE	(8 * 1024)</span>
<span class="cp">#define IOP13XX_MU_BASE_PHYS	(0xff000000)</span>
<span class="cp">#define IOP13XX_MU_BASE_PCI	(0xff000000)</span>
<span class="cp">#define IOP13XX_MU_MIMR_PCI	(IOP13XX_MU_BASE_PCI + 0x48)</span>
<span class="cp">#define IOP13XX_MU_MIMR_CORE_SELECT (15)</span>
<span class="cm">/*=======================================================================*/</span>

<span class="cm">/*==============================ADMA UNITS===============================*/</span>
<span class="cp">#define IOP13XX_ADMA_PHYS_BASE(chan)	IOP13XX_REG_ADDR32_PHYS((chan &lt;&lt; 9))</span>
<span class="cp">#define IOP13XX_ADMA_UPPER_PA(chan)	(IOP13XX_ADMA_PHYS_BASE(chan) + 0xc0)</span>

<span class="cm">/*==============================XSI BRIDGE===============================*/</span>
<span class="cp">#define IOP13XX_XBG_BECSR		IOP13XX_REG_ADDR32(0x178c)</span>
<span class="cp">#define IOP13XX_XBG_BERAR		IOP13XX_REG_ADDR32(0x1790)</span>
<span class="cp">#define IOP13XX_XBG_BERUAR		IOP13XX_REG_ADDR32(0x1794)</span>
<span class="cp">#define is_atue_occdr_error(x) 	((__raw_readl(IOP13XX_XBG_BERAR) == \</span>
<span class="cp">					IOP13XX_PMMR_VIRT_TO_PHYS(\</span>
<span class="cp">					IOP13XX_ATUE_OCCDR))\</span>
<span class="cp">					&amp;&amp; (__raw_readl(IOP13XX_XBG_BECSR) &amp; 1))</span>
<span class="cp">#define is_atux_occdr_error(x) 	((__raw_readl(IOP13XX_XBG_BERAR) == \</span>
<span class="cp">					IOP13XX_PMMR_VIRT_TO_PHYS(\</span>
<span class="cp">					IOP13XX_ATUX_OCCDR))\</span>
<span class="cp">					&amp;&amp; (__raw_readl(IOP13XX_XBG_BECSR) &amp; 1))</span>
<span class="cm">/*=======================================================================*/</span>

<span class="cp">#define IOP13XX_PBI_OFFSET(ofs) IOP13XX_REG_ADDR32(IOP13XX_PBI_PMMR_OFFSET +\</span>
<span class="cp">							(ofs))</span>

<span class="cp">#define IOP13XX_PBI_CR	       		IOP13XX_PBI_OFFSET(0x0)</span>
<span class="cp">#define IOP13XX_PBI_SR	       		IOP13XX_PBI_OFFSET(0x4)</span>
<span class="cp">#define IOP13XX_PBI_BAR0      		IOP13XX_PBI_OFFSET(0x8)</span>
<span class="cp">#define IOP13XX_PBI_LR0       		IOP13XX_PBI_OFFSET(0xc)</span>
<span class="cp">#define IOP13XX_PBI_BAR1      		IOP13XX_PBI_OFFSET(0x10)</span>
<span class="cp">#define IOP13XX_PBI_LR1       		IOP13XX_PBI_OFFSET(0x14)</span>

<span class="cp">#define IOP13XX_PROCESSOR_FREQ		IOP13XX_REG_ADDR32(0x2180)</span>

<span class="cm">/* Watchdog timer definitions */</span>
<span class="cp">#define IOP_WDTCR_EN_ARM  	0x1e1e1e1e</span>
<span class="cp">#define IOP_WDTCR_EN      	0xe1e1e1e1</span>
<span class="cp">#define IOP_WDTCR_DIS_ARM 	0x1f1f1f1f</span>
<span class="cp">#define IOP_WDTCR_DIS     	0xf1f1f1f1</span>
<span class="cp">#define IOP_RCSR_WDT		(1 &lt;&lt; 5) </span><span class="cm">/* reset caused by watchdog timer */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_WDTSR_WRITE_EN	(1 &lt;&lt; 31) </span><span class="cm">/* used to speed up reset requests */</span><span class="cp"></span>
<span class="cp">#define IOP13XX_WDTCR_IB_RESET	(1 &lt;&lt; 0)</span>

<span class="cp">#endif </span><span class="cm">/* _IOP13XX_HW_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
