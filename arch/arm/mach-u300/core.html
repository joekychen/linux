<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-u300 › core.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>core.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *</span>
<span class="cm"> * arch/arm/mach-u300/core.c</span>
<span class="cm"> *</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007-2010 ST-Ericsson SA</span>
<span class="cm"> * License terms: GNU General Public License (GPL) version 2</span>
<span class="cm"> * Core platform support, IRQ handling and device definitions.</span>
<span class="cm"> * Author: Linus Walleij &lt;linus.walleij@stericsson.com&gt;</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/spinlock.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/bitops.h&gt;</span>
<span class="cp">#include &lt;linux/device.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/termios.h&gt;</span>
<span class="cp">#include &lt;linux/dmaengine.h&gt;</span>
<span class="cp">#include &lt;linux/amba/bus.h&gt;</span>
<span class="cp">#include &lt;linux/amba/mmci.h&gt;</span>
<span class="cp">#include &lt;linux/amba/serial.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/gpio.h&gt;</span>
<span class="cp">#include &lt;linux/clk.h&gt;</span>
<span class="cp">#include &lt;linux/err.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/nand.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/fsmc.h&gt;</span>
<span class="cp">#include &lt;linux/pinctrl/machine.h&gt;</span>
<span class="cp">#include &lt;linux/pinctrl/consumer.h&gt;</span>
<span class="cp">#include &lt;linux/pinctrl/pinconf-generic.h&gt;</span>
<span class="cp">#include &lt;linux/dma-mapping.h&gt;</span>

<span class="cp">#include &lt;asm/types.h&gt;</span>
<span class="cp">#include &lt;asm/setup.h&gt;</span>
<span class="cp">#include &lt;asm/memory.h&gt;</span>
<span class="cp">#include &lt;asm/hardware/vic.h&gt;</span>
<span class="cp">#include &lt;asm/mach/map.h&gt;</span>
<span class="cp">#include &lt;asm/mach/irq.h&gt;</span>

<span class="cp">#include &lt;mach/coh901318.h&gt;</span>
<span class="cp">#include &lt;mach/hardware.h&gt;</span>
<span class="cp">#include &lt;mach/syscon.h&gt;</span>
<span class="cp">#include &lt;mach/dma_channels.h&gt;</span>
<span class="cp">#include &lt;mach/gpio-u300.h&gt;</span>

<span class="cp">#include &quot;clock.h&quot;</span>
<span class="cp">#include &quot;spi.h&quot;</span>
<span class="cp">#include &quot;i2c.h&quot;</span>
<span class="cp">#include &quot;u300-gpio.h&quot;</span>

<span class="cm">/*</span>
<span class="cm"> * Static I/O mappings that are needed for booting the U300 platforms. The</span>
<span class="cm"> * only things we need are the areas where we find the timer, syscon and</span>
<span class="cm"> * intcon, since the remaining device drivers will map their own memory</span>
<span class="cm"> * physical to virtual as the need arise.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">map_desc</span> <span class="n">u300_io_desc</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="k">virtual</span>	<span class="o">=</span> <span class="n">U300_SLOW_PER_VIRT_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pfn</span>		<span class="o">=</span> <span class="n">__phys_to_pfn</span><span class="p">(</span><span class="n">U300_SLOW_PER_PHYS_BASE</span><span class="p">),</span>
		<span class="p">.</span><span class="n">length</span>		<span class="o">=</span> <span class="n">SZ_64K</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>		<span class="o">=</span> <span class="n">MT_DEVICE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="k">virtual</span>	<span class="o">=</span> <span class="n">U300_AHB_PER_VIRT_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pfn</span>		<span class="o">=</span> <span class="n">__phys_to_pfn</span><span class="p">(</span><span class="n">U300_AHB_PER_PHYS_BASE</span><span class="p">),</span>
		<span class="p">.</span><span class="n">length</span>		<span class="o">=</span> <span class="n">SZ_32K</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>		<span class="o">=</span> <span class="n">MT_DEVICE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="k">virtual</span>	<span class="o">=</span> <span class="n">U300_FAST_PER_VIRT_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pfn</span>		<span class="o">=</span> <span class="n">__phys_to_pfn</span><span class="p">(</span><span class="n">U300_FAST_PER_PHYS_BASE</span><span class="p">),</span>
		<span class="p">.</span><span class="n">length</span>		<span class="o">=</span> <span class="n">SZ_32K</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>		<span class="o">=</span> <span class="n">MT_DEVICE</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">u300_map_io</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">iotable_init</span><span class="p">(</span><span class="n">u300_io_desc</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">u300_io_desc</span><span class="p">));</span>
	<span class="cm">/* We enable a real big DMA buffer if need be. */</span>
	<span class="n">init_consistent_dma_size</span><span class="p">(</span><span class="n">SZ_4M</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Declaration of devices found on the U300 board and</span>
<span class="cm"> * their respective memory locations.</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">amba_pl011_data</span> <span class="n">uart0_plat_data</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_COH901318</span>
	<span class="p">.</span><span class="n">dma_filter</span> <span class="o">=</span> <span class="n">coh901318_filter_id</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_rx_param</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_DMA_UART0_RX</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_tx_param</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_DMA_UART0_TX</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/* Slow device at 0x3000 offset */</span>
<span class="k">static</span> <span class="n">AMBA_APB_DEVICE</span><span class="p">(</span><span class="n">uart0</span><span class="p">,</span> <span class="s">&quot;uart0&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">U300_UART0_BASE</span><span class="p">,</span>
	<span class="p">{</span> <span class="n">IRQ_U300_UART0</span> <span class="p">},</span> <span class="o">&amp;</span><span class="n">uart0_plat_data</span><span class="p">);</span>

<span class="cm">/* The U335 have an additional UART1 on the APP CPU */</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">amba_pl011_data</span> <span class="n">uart1_plat_data</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_COH901318</span>
	<span class="p">.</span><span class="n">dma_filter</span> <span class="o">=</span> <span class="n">coh901318_filter_id</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_rx_param</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_DMA_UART1_RX</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_tx_param</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_DMA_UART1_TX</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cm">/* Fast device at 0x7000 offset */</span>
<span class="k">static</span> <span class="n">AMBA_APB_DEVICE</span><span class="p">(</span><span class="n">uart1</span><span class="p">,</span> <span class="s">&quot;uart1&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">U300_UART1_BASE</span><span class="p">,</span>
	<span class="p">{</span> <span class="n">IRQ_U300_UART1</span> <span class="p">},</span> <span class="o">&amp;</span><span class="n">uart1_plat_data</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cm">/* AHB device at 0x4000 offset */</span>
<span class="k">static</span> <span class="n">AMBA_APB_DEVICE</span><span class="p">(</span><span class="n">pl172</span><span class="p">,</span> <span class="s">&quot;pl172&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">U300_EMIF_CFG_BASE</span><span class="p">,</span> <span class="p">{</span> <span class="p">},</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="cm">/* Fast device at 0x6000 offset */</span>
<span class="k">static</span> <span class="n">AMBA_APB_DEVICE</span><span class="p">(</span><span class="n">pl022</span><span class="p">,</span> <span class="s">&quot;pl022&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">U300_SPI_BASE</span><span class="p">,</span>
	<span class="p">{</span> <span class="n">IRQ_U300_SPI</span> <span class="p">},</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="cm">/* Fast device at 0x1000 offset */</span>
<span class="cp">#define U300_MMCSD_IRQS	{ IRQ_U300_MMCSD_MCIINTR0, IRQ_U300_MMCSD_MCIINTR1 }</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mmci_platform_data</span> <span class="n">mmcsd_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * Do not set ocr_mask or voltage translation function,</span>
<span class="cm">	 * we have a regulator we can control instead.</span>
<span class="cm">	 */</span>
	<span class="p">.</span><span class="n">f_max</span> <span class="o">=</span> <span class="mi">24000000</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio_wp</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio_cd</span> <span class="o">=</span> <span class="n">U300_GPIO_PIN_MMC_CD</span><span class="p">,</span>
	<span class="p">.</span><span class="n">cd_invert</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
	<span class="p">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="n">MMC_CAP_MMC_HIGHSPEED</span> <span class="o">|</span>
	<span class="n">MMC_CAP_SD_HIGHSPEED</span> <span class="o">|</span> <span class="n">MMC_CAP_4_BIT_DATA</span> <span class="o">|</span> <span class="n">MMC_CAP_8_BIT_DATA</span><span class="p">,</span>
<span class="cp">#ifdef CONFIG_COH901318</span>
	<span class="p">.</span><span class="n">dma_filter</span> <span class="o">=</span> <span class="n">coh901318_filter_id</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_rx_param</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_DMA_MMCSD_RX_TX</span><span class="p">,</span>
	<span class="cm">/* Don&#39;t specify a TX channel, this RX channel is bidirectional */</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">AMBA_APB_DEVICE</span><span class="p">(</span><span class="n">mmcsd</span><span class="p">,</span> <span class="s">&quot;mmci&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">U300_MMCSD_BASE</span><span class="p">,</span>
	<span class="n">U300_MMCSD_IRQS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mmcsd_platform_data</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * The order of device declaration may be important, since some devices</span>
<span class="cm"> * have dependencies on other devices being initialized first.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">amba_device</span> <span class="o">*</span><span class="n">amba_devs</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">uart0_device</span><span class="p">,</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
	<span class="o">&amp;</span><span class="n">uart1_device</span><span class="p">,</span>
<span class="cp">#endif</span>
	<span class="o">&amp;</span><span class="n">pl022_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">pl172_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">mmcsd_device</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* Here follows a list of all hw resources that the platform devices</span>
<span class="cm"> * allocate. Note, clock dependencies are not included</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">gpio_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_GPIO_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="p">(</span><span class="n">U300_GPIO_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio1&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#if defined(CONFIG_MACH_U300_BS365) || defined(CONFIG_MACH_U300_BS335)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio4&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio5&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;gpio6&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_GPIO_PORT6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_U300_BS335 */</span><span class="cp"></span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">keypad_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_KEYPAD_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_KEYPAD_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;coh901461-press&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_KEYPAD_KEYBF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_KEYPAD_KEYBF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;coh901461-release&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_KEYPAD_KEYBR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_KEYPAD_KEYBR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">rtc_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_RTC_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_RTC_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_RTC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_RTC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Fsmc does have IRQs: #43 and #44 (NFIF and NFIF2)</span>
<span class="cm"> * but these are not yet used by the driver.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">fsmc_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;nand_data&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_NAND_CS0_PHYS_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_NAND_CS0_PHYS_BASE</span> <span class="o">+</span> <span class="n">SZ_16K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;fsmc_regs&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_NAND_IF_PHYS_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_NAND_IF_PHYS_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">i2c0_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_I2C0_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_I2C0_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_I2C0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_I2C0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">i2c1_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_I2C1_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_I2C1_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_I2C1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_I2C1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>

<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">wdog_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_WDOG_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_WDOG_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_WDOG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_U300_WDOG</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">dma_resource</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_DMAC_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">U300_DMAC_BASE</span> <span class="o">+</span> <span class="n">PAGE_SIZE</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span>  <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_U300_DMA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_U300_DMA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span>  <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
<span class="cm">/* points out all dma slave channels.</span>
<span class="cm"> * Syntax is [A1, B1, A2, B2, .... ,-1,-1]</span>
<span class="cm"> * Select all channels from A to B, end of list is marked with -1,-1</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">dma_slave_channels</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">U300_DMA_MSL_TX_0</span><span class="p">,</span> <span class="n">U300_DMA_SPI_RX</span><span class="p">,</span>
	<span class="n">U300_DMA_UART1_TX</span><span class="p">,</span> <span class="n">U300_DMA_UART1_RX</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">};</span>

<span class="cm">/* points out all dma memcpy channels. */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">dma_memcpy_channels</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">U300_DMA_GENERAL_PURPOSE_0</span><span class="p">,</span> <span class="n">U300_DMA_GENERAL_PURPOSE_8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">};</span>

<span class="cp">#else </span><span class="cm">/* CONFIG_MACH_U300_BS335 */</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">dma_slave_channels</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="n">U300_DMA_MSL_TX_0</span><span class="p">,</span> <span class="n">U300_DMA_SPI_RX</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">};</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">dma_memcpy_channels</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">U300_DMA_GENERAL_PURPOSE_0</span><span class="p">,</span> <span class="n">U300_DMA_GENERAL_PURPOSE_10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">};</span>

<span class="cp">#endif</span>

<span class="cm">/** register dma for memory access</span>
<span class="cm"> *</span>
<span class="cm"> * active  1 means dma intends to access memory</span>
<span class="cm"> *         0 means dma wont access memory</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">coh901318_access_memory_state</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">bool</span> <span class="n">active</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="cp">#define flags_memcpy_config (COH901318_CX_CFG_CH_DISABLE | \</span>
<span class="cp">			COH901318_CX_CFG_RM_MEMORY_TO_MEMORY | \</span>
<span class="cp">			COH901318_CX_CFG_LCR_DISABLE | \</span>
<span class="cp">			COH901318_CX_CFG_TC_IRQ_ENABLE | \</span>
<span class="cp">			COH901318_CX_CFG_BE_IRQ_ENABLE)</span>
<span class="cp">#define flags_memcpy_lli_chained (COH901318_CX_CTRL_TC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_BURST_COUNT_32_BYTES | \</span>
<span class="cp">			COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS | \</span>
<span class="cp">			COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS | \</span>
<span class="cp">			COH901318_CX_CTRL_DST_ADDR_INC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_MASTER_MODE_M1RW | \</span>
<span class="cp">			COH901318_CX_CTRL_TCP_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_TC_IRQ_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_HSP_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_HSS_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_DDMA_LEGACY | \</span>
<span class="cp">			COH901318_CX_CTRL_PRDD_SOURCE)</span>
<span class="cp">#define flags_memcpy_lli (COH901318_CX_CTRL_TC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_BURST_COUNT_32_BYTES | \</span>
<span class="cp">			COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS | \</span>
<span class="cp">			COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS | \</span>
<span class="cp">			COH901318_CX_CTRL_DST_ADDR_INC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_MASTER_MODE_M1RW | \</span>
<span class="cp">			COH901318_CX_CTRL_TCP_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_TC_IRQ_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_HSP_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_HSS_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_DDMA_LEGACY | \</span>
<span class="cp">			COH901318_CX_CTRL_PRDD_SOURCE)</span>
<span class="cp">#define flags_memcpy_lli_last (COH901318_CX_CTRL_TC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_BURST_COUNT_32_BYTES | \</span>
<span class="cp">			COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS | \</span>
<span class="cp">			COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS | \</span>
<span class="cp">			COH901318_CX_CTRL_DST_ADDR_INC_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_MASTER_MODE_M1RW | \</span>
<span class="cp">			COH901318_CX_CTRL_TCP_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_TC_IRQ_ENABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_HSP_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_HSS_DISABLE | \</span>
<span class="cp">			COH901318_CX_CTRL_DDMA_LEGACY | \</span>
<span class="cp">			COH901318_CX_CTRL_PRDD_SOURCE)</span>

<span class="k">const</span> <span class="k">struct</span> <span class="n">coh_dma_channel</span> <span class="n">chan_config</span><span class="p">[</span><span class="n">U300_DMA_CHANNELS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">0</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 1&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc_nbr_max</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 4&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1R_M2W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 5&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_TX_6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL TX 6&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">0</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 1&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 4&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 5&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_32_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M2R_M1W</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_DEMAND_DMA1</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSL_RX_6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSL RX 6&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_MSL_BASE</span> <span class="o">+</span> <span class="mi">6</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x220</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Don&#39;t set up device address, burst count or size of src</span>
<span class="cm">	 * or dst bus for this peripheral - handled by PrimeCell</span>
<span class="cm">	 * DMA extension.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MMCSD_RX_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MMCSD RX TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>

	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSPRO_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSPRO TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_MSPRO_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;MSPRO RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Don&#39;t set up device address, burst count or size of src</span>
<span class="cm">	 * or dst bus for this peripheral - handled by PrimeCell</span>
<span class="cm">	 * DMA extension.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_UART0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;UART0 TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;UART0 RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_APEX_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;APEX TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_APEX_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;APEX RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_PCM_I2S0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;PCM I2S0 TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_PCM_I2S0_BASE</span> <span class="o">+</span> <span class="mh">0x14</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_PCM_I2S0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;PCM I2S0 RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_PCM_I2S0_BASE</span> <span class="o">+</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_PCM_I2S1_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;PCM I2S1 TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span>  <span class="n">U300_PCM_I2S1_BASE</span> <span class="o">+</span> <span class="mh">0x14</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_SOURCE</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_PCM_I2S1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;PCM I2S1 RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_addr</span> <span class="o">=</span> <span class="n">U300_PCM_I2S1_BASE</span> <span class="o">+</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_BURST_COUNT_16_BYTES</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_SRC_ADDR_INC_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_BUS_SIZE_32_BITS</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DST_ADDR_INC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_PRDD_DEST</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_XGAM_CDI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;XGAM CDI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_XGAM_PDI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;XGAM PDI&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/*</span>
<span class="cm">	 * Don&#39;t set up device address, burst count or size of src</span>
<span class="cm">	 * or dst bus for this peripheral - handled by PrimeCell</span>
<span class="cm">	 * DMA extension.</span>
<span class="cm">	 */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_SPI_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;SPI TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_SPI_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;SPI RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">COH901318_CX_CFG_CH_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_LCR_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CFG_BE_IRQ_ENABLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_MASTER_MODE_M1RW</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TCP_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_TC_IRQ_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSP_ENABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_HSS_DISABLE</span> <span class="o">|</span>
				<span class="n">COH901318_CX_CTRL_DDMA_LEGACY</span><span class="p">,</span>

	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 00&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 01&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 02&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 03&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 04&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 05&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 06&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 07&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 08&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_UART1_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;UART1 TX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;UART1 RX&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">}</span>
<span class="cp">#else</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_9</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 09&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">U300_DMA_GENERAL_PURPOSE_10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;GENERAL 10&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">priority_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">flags_memcpy_config</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_chained</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_chained</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli</span> <span class="o">=</span> <span class="n">flags_memcpy_lli</span><span class="p">,</span>
		<span class="p">.</span><span class="n">param</span><span class="p">.</span><span class="n">ctrl_lli_last</span> <span class="o">=</span> <span class="n">flags_memcpy_lli_last</span><span class="p">,</span>
	<span class="p">}</span>
<span class="cp">#endif</span>
<span class="p">};</span>


<span class="k">static</span> <span class="k">struct</span> <span class="n">coh901318_platform</span> <span class="n">coh901318_platform</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">chans_slave</span> <span class="o">=</span> <span class="n">dma_slave_channels</span><span class="p">,</span>
	<span class="p">.</span><span class="n">chans_memcpy</span> <span class="o">=</span> <span class="n">dma_memcpy_channels</span><span class="p">,</span>
	<span class="p">.</span><span class="n">access_memory_state</span> <span class="o">=</span> <span class="n">coh901318_access_memory_state</span><span class="p">,</span>
	<span class="p">.</span><span class="n">chan_conf</span> <span class="o">=</span> <span class="n">chan_config</span><span class="p">,</span>
	<span class="p">.</span><span class="n">max_channels</span> <span class="o">=</span> <span class="n">U300_DMA_CHANNELS</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">pinctrl_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">U300_SYSCON_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">U300_SYSCON_BASE</span> <span class="o">+</span> <span class="n">SZ_4K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">wdog_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;coh901327_wdog&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">wdog_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">wdog_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">i2c0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;stu300&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">i2c0_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">i2c0_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">i2c1_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;stu300&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">i2c1_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">i2c1_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">pinctrl_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">pinctrl_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">pinctrl_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * The different variants have a few different versions of the</span>
<span class="cm"> * GPIO block, with different number of ports.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">u300_gpio_platform</span> <span class="n">u300_gpio_plat</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#if defined(CONFIG_MACH_U300_BS2X) || defined(CONFIG_MACH_U300_BS330)</span>
	<span class="p">.</span><span class="n">variant</span> <span class="o">=</span> <span class="n">U300_GPIO_COH901335</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ports</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
	<span class="p">.</span><span class="n">variant</span> <span class="o">=</span> <span class="n">U300_GPIO_COH901571_3_BS335</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ports</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS365</span>
	<span class="p">.</span><span class="n">variant</span> <span class="o">=</span> <span class="n">U300_GPIO_COH901571_3_BS365</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ports</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="cp">#endif</span>
	<span class="p">.</span><span class="n">gpio_base</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio_irq_base</span> <span class="o">=</span> <span class="n">IRQ_U300_GPIO_BASE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pinctrl_device</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pinctrl_device</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">gpio_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;u300-gpio&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpio_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">gpio_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">u300_gpio_plat</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">keypad_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;keypad&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">keypad_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">keypad_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">rtc_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rtc-coh901331&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">rtc_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">rtc_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">u300_partitions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bootrecords&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">SZ_128K</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;free&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">SZ_128K</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">8064</span> <span class="o">*</span> <span class="n">SZ_1K</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;platform&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">8192</span> <span class="o">*</span> <span class="n">SZ_1K</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">253952</span> <span class="o">*</span> <span class="n">SZ_1K</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">fsmc_nand_platform_data</span> <span class="n">nand_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">partitions</span> <span class="o">=</span> <span class="n">u300_partitions</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_partitions</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">u300_partitions</span><span class="p">),</span>
	<span class="p">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">NAND_SKIP_BBTSCAN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">FSMC_NAND_BW8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ale_off</span> <span class="o">=</span> <span class="n">PLAT_NAND_ALE</span><span class="p">,</span>
	<span class="p">.</span><span class="n">cle_off</span> <span class="o">=</span> <span class="n">PLAT_NAND_CLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">nand_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;fsmc-nand&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">fsmc_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">fsmc_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">nand_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">dma_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;coh901318&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">dma_resource</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">dma_resource</span><span class="p">),</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">coh901318_platform</span><span class="p">,</span>
		<span class="p">.</span><span class="n">coherent_dma_mask</span> <span class="o">=</span> <span class="o">~</span><span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pin_pullup_conf</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">PIN_CONF_PACKED</span><span class="p">(</span><span class="n">PIN_CONFIG_BIAS_PULL_UP</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pin_highz_conf</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">PIN_CONF_PACKED</span><span class="p">(</span><span class="n">PIN_CONFIG_BIAS_HIGH_IMPEDANCE</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* Pin control settings */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">pinctrl_map</span> <span class="n">__initdata</span> <span class="n">u300_pinmux_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* anonymous maps for chip power and EMIFs */</span>
	<span class="n">PIN_MAP_MUX_GROUP_HOG_DEFAULT</span><span class="p">(</span><span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;power&quot;</span><span class="p">),</span>
	<span class="n">PIN_MAP_MUX_GROUP_HOG_DEFAULT</span><span class="p">(</span><span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;emif0&quot;</span><span class="p">),</span>
	<span class="n">PIN_MAP_MUX_GROUP_HOG_DEFAULT</span><span class="p">(</span><span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;emif1&quot;</span><span class="p">),</span>
	<span class="cm">/* per-device maps for MMC/SD, SPI and UART */</span>
	<span class="n">PIN_MAP_MUX_GROUP_DEFAULT</span><span class="p">(</span><span class="s">&quot;mmci&quot;</span><span class="p">,</span>  <span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;mmc0&quot;</span><span class="p">),</span>
	<span class="n">PIN_MAP_MUX_GROUP_DEFAULT</span><span class="p">(</span><span class="s">&quot;pl022&quot;</span><span class="p">,</span> <span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;spi0&quot;</span><span class="p">),</span>
	<span class="n">PIN_MAP_MUX_GROUP_DEFAULT</span><span class="p">(</span><span class="s">&quot;uart0&quot;</span><span class="p">,</span> <span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;uart0&quot;</span><span class="p">),</span>
	<span class="cm">/* This pin is used for clock return rather than GPIO */</span>
	<span class="n">PIN_MAP_CONFIGS_PIN_DEFAULT</span><span class="p">(</span><span class="s">&quot;mmci&quot;</span><span class="p">,</span> <span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="s">&quot;PIO APP GPIO 11&quot;</span><span class="p">,</span>
				    <span class="n">pin_pullup_conf</span><span class="p">),</span>
	<span class="cm">/* This pin is used for card detect */</span>
	<span class="n">PIN_MAP_CONFIGS_PIN_DEFAULT</span><span class="p">(</span><span class="s">&quot;mmci&quot;</span><span class="p">,</span> <span class="s">&quot;pinctrl-u300&quot;</span><span class="p">,</span> <span class="s">&quot;PIO MS INS&quot;</span><span class="p">,</span>
				    <span class="n">pin_highz_conf</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">u300_mux_hog</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">pinctrl</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">u300_mux_hog</span> <span class="n">u300_mux_hogs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">uart0_device</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pl022_device</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">mmcsd_device</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">u300_pinctrl_fetch</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">u300_mux_hogs</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">pinctrl</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

		<span class="n">p</span> <span class="o">=</span> <span class="n">pinctrl_get_select_default</span><span class="p">(</span><span class="n">u300_mux_hogs</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">dev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_ERR</span><span class="p">(</span><span class="n">p</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;u300: could not get pinmux hog for dev %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
			       <span class="n">dev_name</span><span class="p">(</span><span class="n">u300_mux_hogs</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">dev</span><span class="p">));</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">u300_mux_hogs</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">subsys_initcall</span><span class="p">(</span><span class="n">u300_pinctrl_fetch</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Notice that AMBA devices are initialized before platform devices.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">platform_devs</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">dma_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">i2c0_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">i2c1_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">keypad_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">rtc_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">gpio_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">nand_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">wdog_device</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupts: the U300 platforms have two pl190 ARM PrimeCells connected</span>
<span class="cm"> * together so some interrupts are connected to the first one and some</span>
<span class="cm"> * to the second one.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">__init</span> <span class="nf">u300_init_irq</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">mask</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
	<span class="k">struct</span> <span class="n">clk</span> <span class="o">*</span><span class="n">clk</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

	<span class="cm">/* initialize clocking early, we want to clock the INTCON */</span>
	<span class="n">u300_clock_init</span><span class="p">();</span>

	<span class="cm">/* Clock the interrupt controller */</span>
	<span class="n">clk</span> <span class="o">=</span> <span class="n">clk_get_sys</span><span class="p">(</span><span class="s">&quot;intcon&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">BUG_ON</span><span class="p">(</span><span class="n">IS_ERR</span><span class="p">(</span><span class="n">clk</span><span class="p">));</span>
	<span class="n">clk_enable</span><span class="p">(</span><span class="n">clk</span><span class="p">);</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">U300_VIC_IRQS_END</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
		<span class="n">set_bit</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">)</span> <span class="o">&amp;</span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
	<span class="n">vic_init</span><span class="p">((</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_INTCON0_VBASE</span><span class="p">,</span> <span class="n">IRQ_U300_INTCON0_START</span><span class="p">,</span>
		 <span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
	<span class="n">vic_init</span><span class="p">((</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">)</span> <span class="n">U300_INTCON1_VBASE</span><span class="p">,</span> <span class="n">IRQ_U300_INTCON1_START</span><span class="p">,</span>
		 <span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * U300 platforms peripheral handling</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">db_chip</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">chipid</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * This is a list of the Digital Baseband chips used in the U300 platform.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">db_chip</span> <span class="n">db_chips</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xb800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3000&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xc000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3100&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xc800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3150&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xd800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3200&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xe000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3250&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xe800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3210&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xf000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3350 P1x&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0xf100</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;DB3350 P2x&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">chipid</span> <span class="o">=</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="cm">/* List terminator */</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">u300_init_check_chip</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>

	<span class="n">u16</span> <span class="n">val</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">db_chip</span> <span class="o">*</span><span class="n">chip</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">chipname</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="n">unknown</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;UNKNOWN&quot;</span><span class="p">;</span>

	<span class="cm">/* Read out and print chip ID */</span>
	<span class="n">val</span> <span class="o">=</span> <span class="n">readw</span><span class="p">(</span><span class="n">U300_SYSCON_VBASE</span> <span class="o">+</span> <span class="n">U300_SYSCON_CIDR</span><span class="p">);</span>
	<span class="cm">/* This is in funky bigendian order... */</span>
	<span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xFFU</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="p">(</span><span class="n">val</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">);</span>
	<span class="n">chip</span> <span class="o">=</span> <span class="n">db_chips</span><span class="p">;</span>
	<span class="n">chipname</span> <span class="o">=</span> <span class="n">unknown</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">chipid</span><span class="p">;</span> <span class="n">chip</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">chip</span><span class="o">-&gt;</span><span class="n">chipid</span> <span class="o">==</span> <span class="p">(</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xFF00U</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">chipname</span> <span class="o">=</span> <span class="n">chip</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;Initializing U300 system on %s baseband chip &quot;</span> \
	       <span class="s">&quot;(chip ID 0x%04x)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">chipname</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_MACH_U300_BS330</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xFF00U</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0xd800</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;Platform configured for BS330 &quot;</span> \
		       <span class="s">&quot;with DB3200 but %s detected, expect problems!&quot;</span><span class="p">,</span>
		       <span class="n">chipname</span><span class="p">);</span>
	<span class="p">}</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS335</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xFF00U</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0xf000</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xFF00U</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0xf100</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;Platform configured for BS335 &quot;</span> \
		       <span class="s">&quot; with DB3350 but %s detected, expect problems!&quot;</span><span class="p">,</span>
		       <span class="n">chipname</span><span class="p">);</span>
	<span class="p">}</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_MACH_U300_BS365</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">val</span> <span class="o">&amp;</span> <span class="mh">0xFF00U</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0xe800</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;Platform configured for BS365 &quot;</span> \
		       <span class="s">&quot;with DB3210 but %s detected, expect problems!&quot;</span><span class="p">,</span>
		       <span class="n">chipname</span><span class="p">);</span>
	<span class="p">}</span>
<span class="cp">#endif</span>


<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Some devices and their resources require reserved physical memory from</span>
<span class="cm"> * the end of the available RAM. This function traverses the list of devices</span>
<span class="cm"> * and assigns actual addresses to these.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">u300_assign_physmem</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">curr_start</span> <span class="o">=</span> <span class="n">__pa</span><span class="p">(</span><span class="n">high_memory</span><span class="p">);</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">platform_devs</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">platform_devs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">num_resources</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="k">const</span> <span class="n">res</span> <span class="o">=</span>
			  <span class="o">&amp;</span><span class="n">platform_devs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">resource</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">IORESOURCE_MEM</span> <span class="o">==</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">flags</span> <span class="o">&amp;&amp;</span>
				     <span class="mi">0</span> <span class="o">==</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">res</span><span class="o">-&gt;</span><span class="n">start</span>  <span class="o">=</span> <span class="n">curr_start</span><span class="p">;</span>
				<span class="n">res</span><span class="o">-&gt;</span><span class="n">end</span>   <span class="o">+=</span> <span class="n">curr_start</span><span class="p">;</span>
				<span class="n">curr_start</span> <span class="o">+=</span> <span class="n">resource_size</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>

				<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;core.c: Mapping RAM &quot;</span> \
				       <span class="s">&quot;%#x-%#x to device %s:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
					<span class="n">res</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">,</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">end</span><span class="p">,</span>
				       <span class="n">platform_devs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">,</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">u300_init_devices</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">val</span><span class="p">;</span>

	<span class="cm">/* Check what platform we run and print some status information */</span>
	<span class="n">u300_init_check_chip</span><span class="p">();</span>

	<span class="cm">/* Set system to run at PLL208, max performance, a known state. */</span>
	<span class="n">val</span> <span class="o">=</span> <span class="n">readw</span><span class="p">(</span><span class="n">U300_SYSCON_VBASE</span> <span class="o">+</span> <span class="n">U300_SYSCON_CCR</span><span class="p">);</span>
	<span class="n">val</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">U300_SYSCON_CCR_CLKING_PERFORMANCE_MASK</span><span class="p">;</span>
	<span class="n">writew</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">U300_SYSCON_VBASE</span> <span class="o">+</span> <span class="n">U300_SYSCON_CCR</span><span class="p">);</span>
	<span class="cm">/* Wait for the PLL208 to lock if not locked in yet */</span>
	<span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">readw</span><span class="p">(</span><span class="n">U300_SYSCON_VBASE</span> <span class="o">+</span> <span class="n">U300_SYSCON_CSR</span><span class="p">)</span> <span class="o">&amp;</span>
		 <span class="n">U300_SYSCON_CSR_PLL208_LOCK_IND</span><span class="p">));</span>
	<span class="cm">/* Initialize SPI device with some board specifics */</span>
	<span class="n">u300_spi_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pl022_device</span><span class="p">);</span>

	<span class="cm">/* Register the AMBA devices in the AMBA bus abstraction layer */</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">amba_devs</span><span class="p">);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">struct</span> <span class="n">amba_device</span> <span class="o">*</span><span class="n">d</span> <span class="o">=</span> <span class="n">amba_devs</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
		<span class="n">amba_device_register</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">iomem_resource</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">u300_assign_physmem</span><span class="p">();</span>

	<span class="cm">/* Initialize pinmuxing */</span>
	<span class="n">pinctrl_register_mappings</span><span class="p">(</span><span class="n">u300_pinmux_map</span><span class="p">,</span>
				  <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">u300_pinmux_map</span><span class="p">));</span>

	<span class="cm">/* Register subdevices on the I2C buses */</span>
	<span class="n">u300_i2c_register_board_devices</span><span class="p">();</span>

	<span class="cm">/* Register the platform devices */</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">platform_devs</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">platform_devs</span><span class="p">));</span>

	<span class="cm">/* Register subdevices on the SPI bus */</span>
	<span class="n">u300_spi_register_board_devices</span><span class="p">();</span>

	<span class="cm">/* Enable SEMI self refresh */</span>
	<span class="n">val</span> <span class="o">=</span> <span class="n">readw</span><span class="p">(</span><span class="n">U300_SYSCON_VBASE</span> <span class="o">+</span> <span class="n">U300_SYSCON_SMCR</span><span class="p">)</span> <span class="o">|</span>
		<span class="n">U300_SYSCON_SMCR_SEMI_SREFREQ_ENABLE</span><span class="p">;</span>
	<span class="n">writew</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">U300_SYSCON_VBASE</span> <span class="o">+</span> <span class="n">U300_SYSCON_SMCR</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* Forward declare this function from the watchdog */</span>
<span class="kt">void</span> <span class="n">coh901327_watchdog_reset</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">u300_restart</span><span class="p">(</span><span class="kt">char</span> <span class="n">mode</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cmd</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">switch</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="sc">&#39;s&#39;</span>:
	<span class="k">case</span> <span class="sc">&#39;h&#39;</span>:
<span class="cp">#ifdef CONFIG_COH901327_WATCHDOG</span>
		<span class="n">coh901327_watchdog_reset</span><span class="p">();</span>
<span class="cp">#endif</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="cm">/* Do nothing */</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="cm">/* Wait for system do die/reset. */</span>
	<span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
