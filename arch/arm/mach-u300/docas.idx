d | include |  | 1 items |  | Linus Walleij | linus.walleij@linaro.org | 1334908378 |  | ARM: u300: bump all IRQ numbers by one  Since the VIC was converted to use generic IRQ domains IRQ 0 is silently ignored. This IRQ is used on the U300 so we're missing it now. Bump all IRQ numbers by one since they are now decoupled from the hardware IRQ numbers.  Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | u300.c | s | 1.4K | 51 | Arnd Bergmann | arnd@arndb.de | 1325937088 |  | Merge branch 'depends/rmk/restart' into next/cleanup  Conflicts: 	arch/arm/mach-at91/at91cap9.c 	arch/arm/mach-at91/at91sam9260.c 	arch/arm/mach-at91/at91sam9261.c 	arch/arm/mach-at91/at91sam9263.c 	arch/arm/mach-at91/at91sam9g45.c 	arch/arm/mach-at91/at91sam9rl.c 	arch/arm/mach-exynos/cpu.c 	arch/arm/mach-shmobile/board-kota2.c  This resolves a bunch of conflicts between the arm-soc tree and changes from the arm tree that have gone upstream.  Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | Makefile | g | 346B |  | Linus Walleij | linus.walleij@linaro.org | 1330035765 |  | ARM: 7335/1: mach-u300: do away with MMC config files  All the special stuff (like registering input device and so on) for the U300 MMC is now done away with. We don't need these special MMC setup kludges, merge this into core.c and be done with it.  Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | u300-gpio.h | s | 4.8K | 103 | Linus Walleij | linus.walleij@linaro.org | 1325578203 |  | ARM: u300: localize GPIO assignments  Move the GPIO assignments for the U300 variants down to a local header file in the mach-u300 directory. There is no point in broadcasting this across the entire kernel.  Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | i2c.c | s | 7.0K | 276 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1334908369 |  | ARM: ux300: Fix unimplementable regulation constraints  It doesn't make sense to grant permission to change the status of a regulator that is also set as always on and similarly it doesn't make sense to allow a driver to change the voltage of a regulator which can only be set to a single voltage.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | clock.c | s | 40K | 1367 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | clock.h | s | 1.2K | 42 | Linus Walleij | linus.walleij@linaro.org | 1307610906 |  | ARM: 6949/2: mach-u300: fix compilaton warning in IO accessors  The IO accessors for U300 were using u32 rather than the nominal void __iomem * type, rectify this by properly defining the virtual base for statically mapped peripherals to be void __iomem *. Requires fixing a field in struct clk as well.  Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | regulator.c | s | 2.3K | 79 | Linus Walleij | linus.walleij@stericsson.com | 1255968609 |  | ARM: 5724/1: U300 AB3100 boardinfo v5  This defines regulator platform data and board power regulator hogs for the ST-Ericsson U300 platform.  Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Liam Girdwood <lrg@slimlogic.co.uk> Cc: Samuel Ortiz <sameo@linux.intel.com> Signed-off-by: Linus Walleij <linus.walleij@stericsson.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | core.c | s | 54K | 1768 | Linus Walleij | linus.walleij@linaro.org | 1334908378 |  | ARM: u300: bump all IRQ numbers by one  Since the VIC was converted to use generic IRQ domains IRQ 0 is silently ignored. This IRQ is used on the U300 so we're missing it now. Bump all IRQ numbers by one since they are now decoupled from the hardware IRQ numbers.  Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | Kconfig | g | 1.6K |  | Linus Walleij | linus.walleij@linaro.org | 1325578208 |  | pinctrl: rename U300 and SIRF pin controllers  For stringent order, rename the pinmux-* pin controllers to pinctrl-* and also rename the Kconfig symbols and in-kernel users.  Cc: Rongjun Ying <Rongjun.Ying@csr.com> Cc: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Acked-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | timer.c | s | 15K | 390 | Marc Zyngier | Marc.Zyngier@arm.com | 1324249226 |  | ARM: 7205/2: sched_clock: allow sched_clock to be selected at runtime  sched_clock() is yet another blocker on the road to the single image. This patch implements an idea by Russell King:  http://www.spinics.net/lists/linux-omap/msg49561.html  Instead of asking the platform to implement both sched_clock() itself and the rollover callback, simply register a read() function, and let the ARM code care about sched_clock() itself, the conversion to ns and the rollover. sched_clock() uses this read() function as an indirection to the platform code. If the platform doesn't provide a read(), the code falls back to the jiffy counter (just like the default sched_clock).  This allow some simplifications and possibly some footprint gain when multiple platforms are compiled in. Among the drawbacks, the removal of the *_fixed_sched_clock optimization which could negatively impact some platforms (sa1100, tegra, versatile and omap).  Tested on 11MPCore, OMAP4 and Tegra.  Cc: Imre Kaloz <kaloz@openwrt.org> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Colin Cross <ccross@android.com> Cc: Erik Gilling <konkers@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Alessandro Rubini <rubini@unipv.it> Cc: STEricsson <STEricsson_nomadik_linux@list.st.com> Cc: Lennert Buytenhek <kernel@wantstofly.org> Cc: Ben Dooks <ben-linux@fluff.org> Tested-by: Jamie Iles <jamie@jamieiles.com> Tested-by: Tony Lindgren <tony@atomide.com> Tested-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Nicolas Pitre <nico@linaro.org> Acked-by: Krzysztof Halasa <khc@pm.waw.pl> Acked-by: Kukjin Kim <kgene.kim@samsung.com> Signed-off-by: Marc Zyngier <marc.zyngier@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | spi.h | s | 594B | 24 | Linus Walleij | linus.walleij@stericsson.com | 1250346989 |  | ARM: 5667/3: U300 SSP/SPI board setup and test  This adds a U300 board configuration for the PL022 SSP/SPI PrimeCell driver recently merged to the 2.6.31-rc series. Further it adds a dummy loopback SPI chip that can be used for testing the SPI functionality on a running system using the loopback mode of PL022.  Signed-off-by: Linus Walleij <linus.walleij@stericsson.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | spi.c | s | 2.9K | 96 | Linus Walleij | linus.walleij@linaro.org | 1318503465 |  | pinctrl: add a driver for the U300 pinmux  This adds a driver for the U300 pinmux portions of the system controller "SYSCON". It also serves as an example of how to use the pinmux subsystem. This driver also houses the platform data for the only supported platform.  This deletes the old U300 driver in arch/arm/mach-u300 and replace it with a driver using the new subsystem.  The new driver is considerably fatter than the old one, but it also registers all 467 pins of the system and adds the power and EMIF pin groups and corresponding functions. The idea is to use this driver as a a reference for other implementation so it needs to be as complete and verbose as possible.  Reviewed-by: Barry Song <21cnbao@gmail.com> [Fixup for changed function names and semantics in the v10 patch] Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | Makefile.boot | g | 104B |  | Linus Torvalds | torvalds@linux-foundation.org | 1320203460 |  | Merge branch 'next/cleanup' of git://git.linaro.org/people/arnd/arm-soc  * 'next/cleanup' of git://git.linaro.org/people/arnd/arm-soc: (125 commits)   ARM: mach-mxs: fix machines' initializers order   mmc: mxcmmc: explicitly includes mach/hardware.h   arm/imx: explicitly includes mach/hardware.h in pm-imx27.c   arm/imx: remove mx27_setup_weimcs() from mx27.h   arm/imx: explicitly includes mach/hardware.h in mach-kzm_arm11_01.c   arm/imx: remove mx31_setup_weimcs() from mx31.h   ARM: tegra: devices.c should include devices.h   ARM: tegra: cpu-tegra: unexport two functions   ARM: tegra: cpu-tegra: sparse type fix   ARM: tegra: dma: staticify some tables and functions   ARM: tegra: tegra2_clocks: don't export some tables   ARM: tegra: tegra_powergate_is_powered should be static   ARM: tegra: tegra_rtc_read_ms should be static   ARM: tegra: tegra_init_cache should be static   ARM: tegra: pcie: 0 -> NULL changes   ARM: tegra: pcie: include board.h   ARM: tegra: pcie: don't cast __iomem pointers   ARM: tegra: tegra2_clocks: 0 -> NULL changes   ARM: tegra: tegra2_clocks: don't cast __iomem pointers   ARM: tegra: timer: don't cast __iomem pointers   ...  Fix up trivial conflicts in   arch/arm/mach-omap2/Makefile,   arch/arm/mach-u300/{Makefile.boot,core.c}   arch/arm/plat-{mxc,omap}/devices.c
f | dummyspichip.c | s | 8.6K | 252 | Kevin Wells | wellsk40@gmail.com | 1286941057 |  | spi/pl022: Add spi->mode support to AMBA SPI driver  This patch adds spi->mode support for the AMBA pl022 driver and allows spidev to correctly alter SPI modes. Unused fields used in the pl022 header file for the pl022_config_chip have been removed.  The ab8500 client driver selects the data transfer size instead of the platform data.  For platforms that use the amba pl022 driver, the unused fields in the controller data structure have been removed and the .mode field in the SPI board info structure is used instead.  Signed-off-by: Kevin Wells <wellsk40@gmail.com> Tested-by: Linus Walleij <linus.walleij@stericsson.com> Acked-by: Linus Walleij <linus.walleij@stericsson.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | i2c.h | s | 500B | 20 | Linus Walleij | linus.walleij@stericsson.com | 1250346989 |  | ARM: 5668/2: U300 I2C board setup  This sets up the U300 I2C subdevices so that the AB3100 analog baseband ASIC is properly detected and also the camera devices in the U335 reference design get properly registered.  Signed-off-by: Linus Walleij <linus.walleij@stericsson.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
