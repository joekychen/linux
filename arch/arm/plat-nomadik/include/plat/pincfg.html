<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › plat-nomadik › include › plat › pincfg.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>pincfg.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) ST-Ericsson SA 2010</span>
<span class="cm"> *</span>
<span class="cm"> * License terms: GNU General Public License, version 2</span>
<span class="cm"> * Author: Rabin Vincent &lt;rabin.vincent@stericsson.com&gt; for ST-Ericsson</span>
<span class="cm"> *</span>
<span class="cm"> * Based on arch/arm/mach-pxa/include/mach/mfp.h:</span>
<span class="cm"> *   Copyright (C) 2007 Marvell International Ltd.</span>
<span class="cm"> *   eric miao &lt;eric.miao@marvell.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __PLAT_PINCFG_H</span>
<span class="cp">#define __PLAT_PINCFG_H</span>

<span class="cm">/*</span>
<span class="cm"> * pin configurations are represented by 32-bit integers:</span>
<span class="cm"> *</span>
<span class="cm"> *	bit  0.. 8 - Pin Number (512 Pins Maximum)</span>
<span class="cm"> *	bit  9..10 - Alternate Function Selection</span>
<span class="cm"> *	bit 11..12 - Pull up/down state</span>
<span class="cm"> *	bit     13 - Sleep mode behaviour</span>
<span class="cm"> *	bit     14 - Direction</span>
<span class="cm"> *	bit     15 - Value (if output)</span>
<span class="cm"> *	bit 16..18 - SLPM pull up/down state</span>
<span class="cm"> *	bit 19..20 - SLPM direction</span>
<span class="cm"> *	bit 21..22 - SLPM Value (if output)</span>
<span class="cm"> *	bit 23..25 - PDIS value (if input)</span>
<span class="cm"> *</span>
<span class="cm"> * to facilitate the definition, the following macros are provided</span>
<span class="cm"> *</span>
<span class="cm"> * PIN_CFG_DEFAULT - default config (0):</span>
<span class="cm"> *		     pull up/down = disabled</span>
<span class="cm"> *		     sleep mode = input/wakeup</span>
<span class="cm"> *		     direction = input</span>
<span class="cm"> *		     value = low</span>
<span class="cm"> *		     SLPM direction = same as normal</span>
<span class="cm"> *		     SLPM pull = same as normal</span>
<span class="cm"> *		     SLPM value = same as normal</span>
<span class="cm"> *</span>
<span class="cm"> * PIN_CFG	   - default config with alternate function</span>
<span class="cm"> */</span>

<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pin_cfg_t</span><span class="p">;</span>

<span class="cp">#define PIN_NUM_MASK		0x1ff</span>
<span class="cp">#define PIN_NUM(x)		((x) &amp; PIN_NUM_MASK)</span>

<span class="cp">#define PIN_ALT_SHIFT		9</span>
<span class="cp">#define PIN_ALT_MASK		(0x3 &lt;&lt; PIN_ALT_SHIFT)</span>
<span class="cp">#define PIN_ALT(x)		(((x) &amp; PIN_ALT_MASK) &gt;&gt; PIN_ALT_SHIFT)</span>
<span class="cp">#define PIN_GPIO		(NMK_GPIO_ALT_GPIO &lt;&lt; PIN_ALT_SHIFT)</span>
<span class="cp">#define PIN_ALT_A		(NMK_GPIO_ALT_A &lt;&lt; PIN_ALT_SHIFT)</span>
<span class="cp">#define PIN_ALT_B		(NMK_GPIO_ALT_B &lt;&lt; PIN_ALT_SHIFT)</span>
<span class="cp">#define PIN_ALT_C		(NMK_GPIO_ALT_C &lt;&lt; PIN_ALT_SHIFT)</span>

<span class="cp">#define PIN_PULL_SHIFT		11</span>
<span class="cp">#define PIN_PULL_MASK		(0x3 &lt;&lt; PIN_PULL_SHIFT)</span>
<span class="cp">#define PIN_PULL(x)		(((x) &amp; PIN_PULL_MASK) &gt;&gt; PIN_PULL_SHIFT)</span>
<span class="cp">#define PIN_PULL_NONE		(NMK_GPIO_PULL_NONE &lt;&lt; PIN_PULL_SHIFT)</span>
<span class="cp">#define PIN_PULL_UP		(NMK_GPIO_PULL_UP &lt;&lt; PIN_PULL_SHIFT)</span>
<span class="cp">#define PIN_PULL_DOWN		(NMK_GPIO_PULL_DOWN &lt;&lt; PIN_PULL_SHIFT)</span>

<span class="cp">#define PIN_SLPM_SHIFT		13</span>
<span class="cp">#define PIN_SLPM_MASK		(0x1 &lt;&lt; PIN_SLPM_SHIFT)</span>
<span class="cp">#define PIN_SLPM(x)		(((x) &amp; PIN_SLPM_MASK) &gt;&gt; PIN_SLPM_SHIFT)</span>
<span class="cp">#define PIN_SLPM_MAKE_INPUT	(NMK_GPIO_SLPM_INPUT &lt;&lt; PIN_SLPM_SHIFT)</span>
<span class="cp">#define PIN_SLPM_NOCHANGE	(NMK_GPIO_SLPM_NOCHANGE &lt;&lt; PIN_SLPM_SHIFT)</span>
<span class="cm">/* These two replace the above in DB8500v2+ */</span>
<span class="cp">#define PIN_SLPM_WAKEUP_ENABLE	(NMK_GPIO_SLPM_WAKEUP_ENABLE &lt;&lt; PIN_SLPM_SHIFT)</span>
<span class="cp">#define PIN_SLPM_WAKEUP_DISABLE	(NMK_GPIO_SLPM_WAKEUP_DISABLE &lt;&lt; PIN_SLPM_SHIFT)</span>
<span class="cp">#define PIN_SLPM_USE_MUX_SETTINGS_IN_SLEEP PIN_SLPM_WAKEUP_DISABLE</span>

<span class="cp">#define PIN_SLPM_GPIO  PIN_SLPM_WAKEUP_ENABLE </span><span class="cm">/* In SLPM, pin is a gpio */</span><span class="cp"></span>
<span class="cp">#define PIN_SLPM_ALTFUNC PIN_SLPM_WAKEUP_DISABLE </span><span class="cm">/* In SLPM, pin is altfunc */</span><span class="cp"></span>

<span class="cp">#define PIN_DIR_SHIFT		14</span>
<span class="cp">#define PIN_DIR_MASK		(0x1 &lt;&lt; PIN_DIR_SHIFT)</span>
<span class="cp">#define PIN_DIR(x)		(((x) &amp; PIN_DIR_MASK) &gt;&gt; PIN_DIR_SHIFT)</span>
<span class="cp">#define PIN_DIR_INPUT		(0 &lt;&lt; PIN_DIR_SHIFT)</span>
<span class="cp">#define PIN_DIR_OUTPUT		(1 &lt;&lt; PIN_DIR_SHIFT)</span>

<span class="cp">#define PIN_VAL_SHIFT		15</span>
<span class="cp">#define PIN_VAL_MASK		(0x1 &lt;&lt; PIN_VAL_SHIFT)</span>
<span class="cp">#define PIN_VAL(x)		(((x) &amp; PIN_VAL_MASK) &gt;&gt; PIN_VAL_SHIFT)</span>
<span class="cp">#define PIN_VAL_LOW		(0 &lt;&lt; PIN_VAL_SHIFT)</span>
<span class="cp">#define PIN_VAL_HIGH		(1 &lt;&lt; PIN_VAL_SHIFT)</span>

<span class="cp">#define PIN_SLPM_PULL_SHIFT	16</span>
<span class="cp">#define PIN_SLPM_PULL_MASK	(0x7 &lt;&lt; PIN_SLPM_PULL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PULL(x)	\</span>
<span class="cp">	(((x) &amp; PIN_SLPM_PULL_MASK) &gt;&gt; PIN_SLPM_PULL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PULL_NONE	\</span>
<span class="cp">	((1 + NMK_GPIO_PULL_NONE) &lt;&lt; PIN_SLPM_PULL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PULL_UP	\</span>
<span class="cp">	((1 + NMK_GPIO_PULL_UP) &lt;&lt; PIN_SLPM_PULL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PULL_DOWN	\</span>
<span class="cp">	((1 + NMK_GPIO_PULL_DOWN) &lt;&lt; PIN_SLPM_PULL_SHIFT)</span>

<span class="cp">#define PIN_SLPM_DIR_SHIFT	19</span>
<span class="cp">#define PIN_SLPM_DIR_MASK	(0x3 &lt;&lt; PIN_SLPM_DIR_SHIFT)</span>
<span class="cp">#define PIN_SLPM_DIR(x)		\</span>
<span class="cp">	(((x) &amp; PIN_SLPM_DIR_MASK) &gt;&gt; PIN_SLPM_DIR_SHIFT)</span>
<span class="cp">#define PIN_SLPM_DIR_INPUT	((1 + 0) &lt;&lt; PIN_SLPM_DIR_SHIFT)</span>
<span class="cp">#define PIN_SLPM_DIR_OUTPUT	((1 + 1) &lt;&lt; PIN_SLPM_DIR_SHIFT)</span>

<span class="cp">#define PIN_SLPM_VAL_SHIFT	21</span>
<span class="cp">#define PIN_SLPM_VAL_MASK	(0x3 &lt;&lt; PIN_SLPM_VAL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_VAL(x)		\</span>
<span class="cp">	(((x) &amp; PIN_SLPM_VAL_MASK) &gt;&gt; PIN_SLPM_VAL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_VAL_LOW	((1 + 0) &lt;&lt; PIN_SLPM_VAL_SHIFT)</span>
<span class="cp">#define PIN_SLPM_VAL_HIGH	((1 + 1) &lt;&lt; PIN_SLPM_VAL_SHIFT)</span>

<span class="cp">#define PIN_SLPM_PDIS_SHIFT		23</span>
<span class="cp">#define PIN_SLPM_PDIS_MASK		(0x3 &lt;&lt; PIN_SLPM_PDIS_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PDIS(x)	\</span>
<span class="cp">	(((x) &amp; PIN_SLPM_PDIS_MASK) &gt;&gt; PIN_SLPM_PDIS_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PDIS_NO_CHANGE		(0 &lt;&lt; PIN_SLPM_PDIS_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PDIS_DISABLED		(1 &lt;&lt; PIN_SLPM_PDIS_SHIFT)</span>
<span class="cp">#define PIN_SLPM_PDIS_ENABLED		(2 &lt;&lt; PIN_SLPM_PDIS_SHIFT)</span>

<span class="cp">#define PIN_LOWEMI_SHIFT	25</span>
<span class="cp">#define PIN_LOWEMI_MASK		(0x1 &lt;&lt; PIN_LOWEMI_SHIFT)</span>
<span class="cp">#define PIN_LOWEMI(x)		(((x) &amp; PIN_LOWEMI_MASK) &gt;&gt; PIN_LOWEMI_SHIFT)</span>
<span class="cp">#define PIN_LOWEMI_DISABLED	(0 &lt;&lt; PIN_LOWEMI_SHIFT)</span>
<span class="cp">#define PIN_LOWEMI_ENABLED	(1 &lt;&lt; PIN_LOWEMI_SHIFT)</span>

<span class="cp">#define PIN_GPIOMODE_SHIFT	26</span>
<span class="cp">#define PIN_GPIOMODE_MASK	(0x1 &lt;&lt; PIN_GPIOMODE_SHIFT)</span>
<span class="cp">#define PIN_GPIOMODE(x)		(((x) &amp; PIN_GPIOMODE_MASK) &gt;&gt; PIN_GPIOMODE_SHIFT)</span>
<span class="cp">#define PIN_GPIOMODE_DISABLED	(0 &lt;&lt; PIN_GPIOMODE_SHIFT)</span>
<span class="cp">#define PIN_GPIOMODE_ENABLED	(1 &lt;&lt; PIN_GPIOMODE_SHIFT)</span>

<span class="cp">#define PIN_SLEEPMODE_SHIFT	27</span>
<span class="cp">#define PIN_SLEEPMODE_MASK	(0x1 &lt;&lt; PIN_SLEEPMODE_SHIFT)</span>
<span class="cp">#define PIN_SLEEPMODE(x)	(((x) &amp; PIN_SLEEPMODE_MASK) &gt;&gt; PIN_SLEEPMODE_SHIFT)</span>
<span class="cp">#define PIN_SLEEPMODE_DISABLED	(0 &lt;&lt; PIN_SLEEPMODE_SHIFT)</span>
<span class="cp">#define PIN_SLEEPMODE_ENABLED	(1 &lt;&lt; PIN_SLEEPMODE_SHIFT)</span>


<span class="cm">/* Shortcuts.  Use these instead of separate DIR, PULL, and VAL.  */</span>
<span class="cp">#define PIN_INPUT_PULLDOWN	(PIN_DIR_INPUT | PIN_PULL_DOWN)</span>
<span class="cp">#define PIN_INPUT_PULLUP	(PIN_DIR_INPUT | PIN_PULL_UP)</span>
<span class="cp">#define PIN_INPUT_NOPULL	(PIN_DIR_INPUT | PIN_PULL_NONE)</span>
<span class="cp">#define PIN_OUTPUT_LOW		(PIN_DIR_OUTPUT | PIN_VAL_LOW)</span>
<span class="cp">#define PIN_OUTPUT_HIGH		(PIN_DIR_OUTPUT | PIN_VAL_HIGH)</span>

<span class="cp">#define PIN_SLPM_INPUT_PULLDOWN	(PIN_SLPM_DIR_INPUT | PIN_SLPM_PULL_DOWN)</span>
<span class="cp">#define PIN_SLPM_INPUT_PULLUP	(PIN_SLPM_DIR_INPUT | PIN_SLPM_PULL_UP)</span>
<span class="cp">#define PIN_SLPM_INPUT_NOPULL	(PIN_SLPM_DIR_INPUT | PIN_SLPM_PULL_NONE)</span>
<span class="cp">#define PIN_SLPM_OUTPUT_LOW	(PIN_SLPM_DIR_OUTPUT | PIN_SLPM_VAL_LOW)</span>
<span class="cp">#define PIN_SLPM_OUTPUT_HIGH	(PIN_SLPM_DIR_OUTPUT | PIN_SLPM_VAL_HIGH)</span>

<span class="cp">#define PIN_CFG_DEFAULT		(0)</span>

<span class="cp">#define PIN_CFG(num, alt)		\</span>
<span class="cp">	(PIN_CFG_DEFAULT |\</span>
<span class="cp">	 (PIN_NUM(num) | PIN_##alt))</span>

<span class="cp">#define PIN_CFG_INPUT(num, alt, pull)		\</span>
<span class="cp">	(PIN_CFG_DEFAULT |\</span>
<span class="cp">	 (PIN_NUM(num) | PIN_##alt | PIN_INPUT_##pull))</span>

<span class="cp">#define PIN_CFG_OUTPUT(num, alt, val)		\</span>
<span class="cp">	(PIN_CFG_DEFAULT |\</span>
<span class="cp">	 (PIN_NUM(num) | PIN_##alt | PIN_OUTPUT_##val))</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">nmk_config_pin</span><span class="p">(</span><span class="n">pin_cfg_t</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">bool</span> <span class="n">sleep</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nmk_config_pins</span><span class="p">(</span><span class="n">pin_cfg_t</span> <span class="o">*</span><span class="n">cfgs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">nmk_config_pins_sleep</span><span class="p">(</span><span class="n">pin_cfg_t</span> <span class="o">*</span><span class="n">cfgs</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">);</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
