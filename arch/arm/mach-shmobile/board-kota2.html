<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-shmobile › board-kota2.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>board-kota2.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * kota2 board support</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2011  Renesas Solutions Corp.</span>
<span class="cm"> * Copyright (C) 2011  Magnus Damm</span>
<span class="cm"> * Copyright (C) 2010  Takashi Yoshii &lt;yoshii.takashi.zj@renesas.com&gt;</span>
<span class="cm"> * Copyright (C) 2009  Yoshihiro Shimoda &lt;shimoda.yoshihiro@renesas.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; version 2 of the License.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/irq.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/smsc911x.h&gt;</span>
<span class="cp">#include &lt;linux/gpio.h&gt;</span>
<span class="cp">#include &lt;linux/input.h&gt;</span>
<span class="cp">#include &lt;linux/input/sh_keysc.h&gt;</span>
<span class="cp">#include &lt;linux/gpio_keys.h&gt;</span>
<span class="cp">#include &lt;linux/leds.h&gt;</span>
<span class="cp">#include &lt;linux/platform_data/leds-renesas-tpu.h&gt;</span>
<span class="cp">#include &lt;linux/mmc/host.h&gt;</span>
<span class="cp">#include &lt;linux/mmc/sh_mmcif.h&gt;</span>
<span class="cp">#include &lt;linux/mfd/tmio.h&gt;</span>
<span class="cp">#include &lt;linux/mmc/sh_mobile_sdhi.h&gt;</span>
<span class="cp">#include &lt;mach/hardware.h&gt;</span>
<span class="cp">#include &lt;mach/irqs.h&gt;</span>
<span class="cp">#include &lt;mach/sh73a0.h&gt;</span>
<span class="cp">#include &lt;mach/common.h&gt;</span>
<span class="cp">#include &lt;asm/mach-types.h&gt;</span>
<span class="cp">#include &lt;asm/mach/arch.h&gt;</span>
<span class="cp">#include &lt;asm/mach/time.h&gt;</span>
<span class="cp">#include &lt;asm/hardware/gic.h&gt;</span>
<span class="cp">#include &lt;asm/hardware/cache-l2x0.h&gt;</span>
<span class="cp">#include &lt;asm/traps.h&gt;</span>

<span class="cm">/* SMSC 9220 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">smsc9220_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>		<span class="o">=</span> <span class="mh">0x14000000</span><span class="p">,</span> <span class="cm">/* CS5A */</span>
		<span class="p">.</span><span class="n">end</span>		<span class="o">=</span> <span class="mh">0x140000ff</span><span class="p">,</span> <span class="cm">/* A1-&gt;A7 */</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>		<span class="o">=</span> <span class="n">SH73A0_PINT0_IRQ</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="cm">/* PINTA2 */</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">smsc911x_platform_config</span> <span class="n">smsc9220_platdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">SMSC911X_USE_32BIT</span><span class="p">,</span> <span class="cm">/* 32-bit SW on 16-bit HW bus */</span>
	<span class="p">.</span><span class="n">phy_interface</span>	<span class="o">=</span> <span class="n">PHY_INTERFACE_MODE_MII</span><span class="p">,</span>
	<span class="p">.</span><span class="n">irq_polarity</span>	<span class="o">=</span> <span class="n">SMSC911X_IRQ_POLARITY_ACTIVE_LOW</span><span class="p">,</span>
	<span class="p">.</span><span class="n">irq_type</span>	<span class="o">=</span> <span class="n">SMSC911X_IRQ_TYPE_PUSH_PULL</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">eth_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;smsc911x&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">smsc9220_platdata</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">smsc9220_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">smsc9220_resources</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* KEYSC */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">sh_keysc_info</span> <span class="n">keysc_platdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">mode</span>		<span class="o">=</span> <span class="n">SH_KEYSC_MODE_6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">scan_timing</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">delay</span>		<span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">keycodes</span>	<span class="o">=</span> <span class="p">{</span>
		<span class="n">KEY_NUMERIC_STAR</span><span class="p">,</span> <span class="n">KEY_NUMERIC_0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_POUND</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">KEY_NUMERIC_7</span><span class="p">,</span> <span class="n">KEY_NUMERIC_8</span><span class="p">,</span> <span class="n">KEY_NUMERIC_9</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">KEY_NUMERIC_4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_5</span><span class="p">,</span> <span class="n">KEY_NUMERIC_6</span><span class="p">,</span>
		<span class="n">KEY_LEFT</span><span class="p">,</span> <span class="n">KEY_ENTER</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">KEY_NUMERIC_1</span><span class="p">,</span> <span class="n">KEY_NUMERIC_2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_3</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">keysc_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;KEYSC&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0xe61b0000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0xe61b0098</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">71</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">keysc_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;sh_keysc&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">keysc_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">keysc_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">keysc_platdata</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* GPIO KEY */</span>
<span class="cp">#define GPIO_KEY(c, g, d) { .code = c, .gpio = g, .desc = d, .active_low = 1 }</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">gpio_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_VOLUMEUP</span><span class="p">,</span> <span class="n">GPIO_PORT56</span><span class="p">,</span> <span class="s">&quot;+&quot;</span><span class="p">),</span> <span class="cm">/* S2: VOL+ [IRQ9] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_VOLUMEDOWN</span><span class="p">,</span> <span class="n">GPIO_PORT54</span><span class="p">,</span> <span class="s">&quot;-&quot;</span><span class="p">),</span> <span class="cm">/* S3: VOL- [IRQ10] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_MENU</span><span class="p">,</span> <span class="n">GPIO_PORT27</span><span class="p">,</span> <span class="s">&quot;Menu&quot;</span><span class="p">),</span> <span class="cm">/* S4: MENU [IRQ30] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_HOMEPAGE</span><span class="p">,</span> <span class="n">GPIO_PORT26</span><span class="p">,</span> <span class="s">&quot;Home&quot;</span><span class="p">),</span> <span class="cm">/* S5: HOME [IRQ31] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_BACK</span><span class="p">,</span> <span class="n">GPIO_PORT11</span><span class="p">,</span> <span class="s">&quot;Back&quot;</span><span class="p">),</span> <span class="cm">/* S6: BACK [IRQ0] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_PHONE</span><span class="p">,</span> <span class="n">GPIO_PORT238</span><span class="p">,</span> <span class="s">&quot;Tel&quot;</span><span class="p">),</span> <span class="cm">/* S7: TEL [IRQ11] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_POWER</span><span class="p">,</span> <span class="n">GPIO_PORT239</span><span class="p">,</span> <span class="s">&quot;C1&quot;</span><span class="p">),</span> <span class="cm">/* S8: CAM [IRQ13] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_MAIL</span><span class="p">,</span> <span class="n">GPIO_PORT224</span><span class="p">,</span> <span class="s">&quot;Mail&quot;</span><span class="p">),</span> <span class="cm">/* S9: MAIL [IRQ3] */</span>
	<span class="cm">/* Omitted button &quot;C3?&quot;: GPIO_PORT223 - S10: CUST [IRQ8] */</span>
	<span class="n">GPIO_KEY</span><span class="p">(</span><span class="n">KEY_CAMERA</span><span class="p">,</span> <span class="n">GPIO_PORT164</span><span class="p">,</span> <span class="s">&quot;C2&quot;</span><span class="p">),</span> <span class="cm">/* S11: CAM_HALF [IRQ25] */</span>
	<span class="cm">/* Omitted button &quot;?&quot;: GPIO_PORT152 - S12: CAM_FULL [No IRQ] */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">gpio_key_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>        <span class="o">=</span> <span class="n">gpio_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span>       <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpio_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">gpio_keys_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>     <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>    <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">gpio_key_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* GPIO LED */</span>
<span class="cp">#define GPIO_LED(n, g) { .name = n, .gpio = g }</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_led</span> <span class="n">gpio_leds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">GPIO_LED</span><span class="p">(</span><span class="s">&quot;G&quot;</span><span class="p">,</span> <span class="n">GPIO_PORT20</span><span class="p">),</span> <span class="cm">/* PORT20 [GPO0] -&gt; LED7 -&gt; &quot;G&quot; */</span>
	<span class="n">GPIO_LED</span><span class="p">(</span><span class="s">&quot;H&quot;</span><span class="p">,</span> <span class="n">GPIO_PORT21</span><span class="p">),</span> <span class="cm">/* PORT21 [GPO1] -&gt; LED8 -&gt; &quot;H&quot; */</span>
	<span class="n">GPIO_LED</span><span class="p">(</span><span class="s">&quot;J&quot;</span><span class="p">,</span> <span class="n">GPIO_PORT22</span><span class="p">),</span> <span class="cm">/* PORT22 [GPO2] -&gt; LED9 -&gt; &quot;J&quot; */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_led_platform_data</span> <span class="n">gpio_leds_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">leds</span>		<span class="o">=</span> <span class="n">gpio_leds</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_leds</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gpio_leds</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">gpio_leds_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;leds-gpio&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>     <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>    <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">gpio_leds_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* TPU LED */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">led_renesas_tpu_config</span> <span class="n">led_renesas_tpu12_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;V2513&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio_fn</span>	<span class="o">=</span> <span class="n">GPIO_FN_TPU1TO2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio</span>	<span class="o">=</span> <span class="n">GPIO_PORT153</span><span class="p">,</span>
	<span class="p">.</span><span class="n">channel_offset</span> <span class="o">=</span> <span class="mh">0x90</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer_bit</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">max_brightness</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">tpu12_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;TPU12&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0xe6610090</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0xe66100b5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">leds_tpu12_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;leds-renesas-tpu&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">led_renesas_tpu12_pdata</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tpu12_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">tpu12_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">led_renesas_tpu_config</span> <span class="n">led_renesas_tpu41_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;V2514&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio_fn</span>	<span class="o">=</span> <span class="n">GPIO_FN_TPU4TO1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio</span>	<span class="o">=</span> <span class="n">GPIO_PORT199</span><span class="p">,</span>
	<span class="p">.</span><span class="n">channel_offset</span> <span class="o">=</span> <span class="mh">0x50</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer_bit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">max_brightness</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">tpu41_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;TPU41&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0xe6640050</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0xe6640075</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">leds_tpu41_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;leds-renesas-tpu&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">41</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">led_renesas_tpu41_pdata</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tpu41_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">tpu41_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">led_renesas_tpu_config</span> <span class="n">led_renesas_tpu21_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;V2515&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio_fn</span>	<span class="o">=</span> <span class="n">GPIO_FN_TPU2TO1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio</span>	<span class="o">=</span> <span class="n">GPIO_PORT197</span><span class="p">,</span>
	<span class="p">.</span><span class="n">channel_offset</span> <span class="o">=</span> <span class="mh">0x50</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer_bit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">max_brightness</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">tpu21_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;TPU21&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0xe6620050</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0xe6620075</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">leds_tpu21_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;leds-renesas-tpu&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">led_renesas_tpu21_pdata</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tpu21_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">tpu21_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">led_renesas_tpu_config</span> <span class="n">led_renesas_tpu30_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;KEYLED&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio_fn</span>	<span class="o">=</span> <span class="n">GPIO_FN_TPU3TO0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_gpio</span>	<span class="o">=</span> <span class="n">GPIO_PORT163</span><span class="p">,</span>
	<span class="p">.</span><span class="n">channel_offset</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer_bit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">max_brightness</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">tpu30_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;TPU30&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0xe6630010</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0xe6630035</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">leds_tpu30_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;leds-renesas-tpu&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">led_renesas_tpu30_pdata</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">tpu30_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">tpu30_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* MMCIF */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">mmcif_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;MMCIF&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="mh">0xe6bd0000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>    <span class="o">=</span> <span class="mh">0xe6bd00ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">140</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">141</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">sh_mmcif_plat_data</span> <span class="n">mmcif_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">ocr</span>            <span class="o">=</span> <span class="n">MMC_VDD_165_195</span><span class="p">,</span>
	<span class="p">.</span><span class="n">caps</span>           <span class="o">=</span> <span class="n">MMC_CAP_8_BIT_DATA</span> <span class="o">|</span> <span class="n">MMC_CAP_NONREMOVABLE</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">mmcif_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;sh_mmcif&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>             <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>            <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">mmcif_info</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">mmcif_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>       <span class="o">=</span> <span class="n">mmcif_resources</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* SDHI0 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">sh_mobile_sdhi_info</span> <span class="n">sdhi0_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">tmio_caps</span>      <span class="o">=</span> <span class="n">MMC_CAP_SD_HIGHSPEED</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tmio_flags</span>     <span class="o">=</span> <span class="n">TMIO_MMC_WRPROTECT_DISABLE</span> <span class="o">|</span> <span class="n">TMIO_MMC_HAS_IDLE_WAIT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">sdhi0_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;SDHI0&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="mh">0xee100000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>    <span class="o">=</span> <span class="mh">0xee1000ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">83</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">84</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">85</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">sdhi0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;sh_mobile_sdhi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>             <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">sdhi0_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>       <span class="o">=</span> <span class="n">sdhi0_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>    <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">sdhi0_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* SDHI1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">sh_mobile_sdhi_info</span> <span class="n">sdhi1_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">tmio_caps</span>      <span class="o">=</span> <span class="n">MMC_CAP_NONREMOVABLE</span> <span class="o">|</span> <span class="n">MMC_CAP_SDIO_IRQ</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tmio_flags</span>     <span class="o">=</span> <span class="n">TMIO_MMC_WRPROTECT_DISABLE</span> <span class="o">|</span> <span class="n">TMIO_MMC_HAS_IDLE_WAIT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">sdhi1_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;SDHI1&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="mh">0xee120000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>    <span class="o">=</span> <span class="mh">0xee1200ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">87</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">88</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">gic_spi</span><span class="p">(</span><span class="mi">89</span><span class="p">),</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">sdhi1_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;sh_mobile_sdhi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>             <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">sdhi1_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>       <span class="o">=</span> <span class="n">sdhi1_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>    <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>  <span class="o">=</span> <span class="o">&amp;</span><span class="n">sdhi1_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">kota2_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">eth_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">keysc_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">gpio_keys_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">gpio_leds_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">leds_tpu12_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">leds_tpu41_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">leds_tpu21_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">leds_tpu30_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">mmcif_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">sdhi0_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">sdhi1_device</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">kota2_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">sh73a0_pinmux_init</span><span class="p">();</span>

	<span class="cm">/* SCIFA2 (UART2) */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA2_TXD1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA2_RXD1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA2_RTS1_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA2_CTS1_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="cm">/* SCIFA4 (UART1) */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA4_TXD</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA4_RXD</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA4_RTS_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SCIFA4_CTS_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="cm">/* SMSC911X */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D0_NAF0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D1_NAF1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D2_NAF2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D3_NAF3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D4_NAF4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D5_NAF5</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D6_NAF6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D7_NAF7</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D8_NAF8</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D9_NAF9</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D10_NAF10</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D11_NAF11</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D12_NAF12</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D13_NAF13</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D14_NAF14</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_D15_NAF15</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_CS5A_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_WE0__FWE</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_PORT144</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span> <span class="cm">/* PINTA2 */</span>
	<span class="n">gpio_direction_input</span><span class="p">(</span><span class="n">GPIO_PORT144</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_PORT145</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span> <span class="cm">/* RESET */</span>
	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO_PORT145</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="cm">/* KEYSC */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN0_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN1_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN2_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN3_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN4_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN5_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN6_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYIN7_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT5</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT59_KEYOUT6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT58_KEYOUT7</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_KEYOUT8</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="cm">/* MMCIF */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCCLK0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_3</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_4</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_5</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_6</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCD0_7</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_MMCCMD0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_PORT208</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span> <span class="cm">/* Reset */</span>
	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO_PORT208</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="cm">/* SDHI0 (microSD) */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHICD0_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHICMD0_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHICLK0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID0_3_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID0_2_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID0_1_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID0_0_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="cm">/* SCIFB (BT) */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT159_SCIFB_SCK</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT160_SCIFB_TXD</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT161_SCIFB_CTS_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT162_SCIFB_RXD</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_PORT163_SCIFB_RTS_</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

	<span class="cm">/* SDHI1 (BCM4330) */</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHICLK1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHICMD1_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID1_3_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID1_2_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID1_1_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_FN_SDHID1_0_PU</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_CACHE_L2X0</span>
	<span class="cm">/* Early BRESP enable, Shared attribute override enable, 64K*8way */</span>
	<span class="n">l2x0_init</span><span class="p">(</span><span class="n">IOMEM</span><span class="p">(</span><span class="mh">0xf0100000</span><span class="p">),</span> <span class="mh">0x40460000</span><span class="p">,</span> <span class="mh">0x82000fff</span><span class="p">);</span>
<span class="cp">#endif</span>
	<span class="n">sh73a0_add_standard_devices</span><span class="p">();</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">kota2_devices</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">kota2_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">KOTA2</span><span class="p">,</span> <span class="s">&quot;kota2&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">map_io</span>		<span class="o">=</span> <span class="n">sh73a0_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_early</span>	<span class="o">=</span> <span class="n">sh73a0_add_early_devices</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">NR_IRQS_LEGACY</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>	<span class="o">=</span> <span class="n">sh73a0_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>	<span class="o">=</span> <span class="n">gic_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>	<span class="o">=</span> <span class="n">kota2_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_late</span>	<span class="o">=</span> <span class="n">shmobile_init_late</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">shmobile_timer</span><span class="p">,</span>
<span class="n">MACHINE_END</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
