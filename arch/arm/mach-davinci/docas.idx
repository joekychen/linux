f | common.c | s | 2.9K | 101 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | board-da830-evm.c | s | 16K | 591 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | Makefile | g | 1.5K |  | Nicolas Pitre | nicolas.pitre@linaro.org | 1321414239 |  | ARM: mach-davinci: remove arch specific special handling for ioremap  A generic version should replace this later.  Signed-off-by: Nicolas Pitre <nicolas.pitre@linaro.org>
f | devices-tnetv107x.c | s | 9.8K | 364 | Ido Yariv | ido@wizery.com | 1316255048 |  | ARM: davinci: Explicitly set channel controllers' default queues  Davinci platforms may define a default queue for each channel controller. If one is not defined, the default queue is set to EVENTQ_1. However, there's no way to distinguish between an unset default queue to one that is set to EVENTQ_0, as EVENTQ_0 = 0.  Explicitly specify the default queue for all channel controllers on all Davinci platforms to EVENTQ_1, and don't overwrite it in the EDMA probe function.  One exception is the DA850 board, for which EVENTQ_1 is not a valid option for its second channel controller. Use EVENTQ_0 instead for that channel controller.  Signed-off-by: Ido Yariv <ido@wizery.com> Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | cpuidle.c | s | 3.8K | 131 | Robert Lee | rob.lee@linaro.org | 1332393584 |  | ARM: davinci: Fix for cpuidle consolidation changes  The recent cpuidle consolidation changes erroneously omitted one critical line of code.  Signed-off-by: Robert Lee <rob.lee@linaro.org> Tested-by: Sekhar Nori <nsekhar@ti.com> Acked-by: Sekhar Nori <nsekhar@ti.com> Signed-off-by: Len Brown <len.brown@intel.com>
f | time.c | s | 11K | 391 | Marc Zyngier | marc.zyngier@arm.com | 1328268865 |  | ARM: davinci: convert to common sched_clock() implementation  Davinci has its own sched_clock() implementation, which gets in the way of a single zImage. Moving to the common sched_clock framework makes the code slightly cleaner.  Acked-by: Sekhar Nori <nsekhar@ti.com> Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
f | devices.c | s | 8.3K | 303 | Manjunath Hadli | manjunath.hadli@ti.com | 1330117817 |  | ARM: davinci: streamline sysmod access  There are instances of IO_ADDRESS() being used for system module (sysmod) register access. Eliminate this in favor of a ioremap() based access. ioremap() the entire sysmod address space once during boot-up and provide a helper macro to access specific register offsets within the address space.  With this, also eliminate ioremap() of specific sysmodule registers related to VPIF happening in DM646x EVM code.  While at it, also eliminate some duplicate sysmod register offset macros defined in code and place offset definitions at one place in davinci.h  Signed-off-by: Manjunath Hadli <manjunath.hadli@ti.com> Acked-by: Arnd Bergmann <arnd@arndb.de> [nsekhar@ti.com: removed the addition of ifndef __ASSEMBLER__ in davinci.h, eliminate IO_ADDRESS() usage left out in dm646x.c, cleanup VPIF sysmodule register access as part of this patch and keep all sysmod offsets in davinci.h Also, convert the WARN_ON() on failure to setup sysmod base to BUG_ON()] Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | tnetv107x.c | s | 29K | 702 | Sekhar Nori | nsekhar@ti.com | 1325768229 |  | ARM: 7190/1: restart: davinci: use new restart hook  Rather than using DaVinci specific davinci_soc_info based restart hook, use the restart hook available in the machine descriptor instead.  Tested on DM365 and AM18x EVMs.  v2: Changed to use restart hook in machine descriptor per Russell's comment.  Signed-off-by: Sekhar Nori <nsekhar@ti.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
d | include |  | 1 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | dm355.c | s | 21K | 790 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1334780430 |  | ARM: davinci: mark spi_board_info arguments as const  spi_board_info is not modified in any of the spi registeration functions and passed along as-is to the generic SPI layer.  Mark spi_board_info arguments as const to signal this.  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> [nsekhar@ti.com: extended for dm365 and dm355] Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | pm.c | s | 3.8K | 125 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | aemif.c | s | 3.7K | 111 | Nicolas Kaiser | nikai@nikai.net | 1291995231 |  | davinci: aemif: signedness bug in davinci_aemif_setup_timing()  aemif_calc_rate() can return a negative error value, so all the variables that get tested for this value need to be signed.  The maximum bit width of WSETUP(WSETUP_MAX) appears to be 30 bits (0xf << 26). Using a signed instead of an unsigned integer shouldn't make a difference here.  Signed-off-by: Nicolas Kaiser <nikai@nikai.net> Acked-by: Sekhar Nori <nsekhar@ti.com> Signed-off-by: Kevin Hilman <khilman@deeprootsystems.com>
f | dma.c | s | 44K | 1381 | Linus Torvalds | torvalds@linux-foundation.org | 1338060147 |  | 
f | board-tnetv107x-evm.c | s | 6.5K | 247 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | clock.c | s | 14K | 531 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | psc.c | s | 3.2K | 94 | Murali Karicheri | m-karicheri2@ti.com | 1323083835 |  | ARM: davinci: psc: fix incorrect offsets  Seperate PDSTAT and PDCTL registers are defined for domain 0 and domain 1 where as the code always reads the domain 0 PDSTAT register and domain 1 PDCTL register.  Fix this issue. While at it, introduce usage of macros for register masks to improve readability.  Reviewed-by: Sergei Shtylyov <sshtylyov@mvista.com> Signed-off-by: Murali Karicheri <m-karicheri2@ti.com> Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | board-sffsdr.c | s | 4.5K | 144 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | board-neuros-osd2.c | s | 7.4K | 244 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | da830.c | s | 38K | 1122 | Sekhar Nori | nsekhar@ti.com | 1325768229 |  | ARM: 7190/1: restart: davinci: use new restart hook  Rather than using DaVinci specific davinci_soc_info based restart hook, use the restart hook available in the machine descriptor instead.  Tested on DM365 and AM18x EVMs.  v2: Changed to use restart hook in machine descriptor per Russell's comment.  Signed-off-by: Sekhar Nori <nsekhar@ti.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | clock.h | s | 3.7K | 118 | Murali Karicheri | m-karicheri2@ti.com | 1322852752 |  | ARM: davinci: add support for multiple power domains  On a new SoC based on DaVinci, there are multiple power domains similar to that in C6670 (c6x). Currently the clock module assumes that there are only two power domains (0 and 1).  This patch removes this restriction to allow porting on to the new SoC.  Reviewed-by :Sergei Shtylyov <sshtylyov@mvista.com> Signed-off-by: Murali Karicheri <m-karicheri2@ti.com> Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | cpufreq.c | s | 6.2K | 203 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | board-dm365-evm.c | s | 14K | 543 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | dm646x.c | s | 21K | 817 | Manjunath Hadli | manjunath.hadli@ti.com | 1330117817 |  | ARM: davinci: streamline sysmod access  There are instances of IO_ADDRESS() being used for system module (sysmod) register access. Eliminate this in favor of a ioremap() based access. ioremap() the entire sysmod address space once during boot-up and provide a helper macro to access specific register offsets within the address space.  With this, also eliminate ioremap() of specific sysmodule registers related to VPIF happening in DM646x EVM code.  While at it, also eliminate some duplicate sysmod register offset macros defined in code and place offset definitions at one place in davinci.h  Signed-off-by: Manjunath Hadli <manjunath.hadli@ti.com> Acked-by: Arnd Bergmann <arnd@arndb.de> [nsekhar@ti.com: removed the addition of ifndef __ASSEMBLER__ in davinci.h, eliminate IO_ADDRESS() usage left out in dm646x.c, cleanup VPIF sysmodule register access as part of this patch and keep all sysmod offsets in davinci.h Also, convert the WARN_ON() on failure to setup sysmod base to BUG_ON()] Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | mux.c | s | 2.6K | 93 | Cyril Chemparathy | cyril@ti.com | 1273770329 |  | Davinci: pinmux - use ioremap()  This patch modifies the pinmux implementation so as to ioremap() the pinmux register area on first use.  Signed-off-by: Cyril Chemparathy <cyril@ti.com> Signed-off-by: Kevin Hilman <khilman@deeprootsystems.com>
f | devices-da8xx.c | s | 21K | 867 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1334780430 |  | ARM: davinci: mark spi_board_info arguments as const  spi_board_info is not modified in any of the spi registeration functions and passed along as-is to the generic SPI layer.  Mark spi_board_info arguments as const to signal this.  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> [nsekhar@ti.com: extended for dm365 and dm355] Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | da850.c | s | 29K | 1007 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1331584893 |  | ARM: davinci: DA850: move da850_register_pm to .init.text  All callers (board-mityomapl138.c and board-da850-evm.c) use it in __init functions only.  This fixes:  	WARNING: vmlinux.o(.text+0xd664): Section mismatch in reference from the function da850_register_pm() to the function .init.text:da8xx_get_mem_ctlr() 	The function da850_register_pm() references 	the function __init da8xx_get_mem_ctlr(). 	This is often because da850_register_pm lacks a __init 	annotation or the annotation of da8xx_get_mem_ctlr is wrong.  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | sleep.S | g | 5.4K |  | Russell King | rmk+kernel@arm.linux.org.uk | 1318941654 |  | Merge branch 'mach_memory_h' of git://git.linaro.org/people/nico/linux into devel-stable
f | irq.c | s | 3.6K | 99 | Linus Torvalds | torvalds@linux-foundation.org | 1311138605 |  | Merge branch 'fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/linux-arm-soc  * 'fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/linux-arm-soc:   davinci: DM365 EVM: fix video input mux bits   ARM: davinci: Check for NULL return from irq_alloc_generic_chip   arm: davinci: Fix low level gpio irq handlers' argument
f | dm365.c | s | 31K | 1120 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1334780430 |  | ARM: davinci: mark spi_board_info arguments as const  spi_board_info is not modified in any of the spi registeration functions and passed along as-is to the generic SPI layer.  Mark spi_board_info arguments as const to signal this.  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> [nsekhar@ti.com: extended for dm365 and dm355] Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | board-dm646x-evm.c | s | 17K | 686 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | dm644x.c | s | 21K | 843 | Manjunath Hadli | manjunath.hadli@ti.com | 1331449889 |  | ARM: davinci: dm644x: add support for v4l2 video display  Add functions to register various video devices like venc, osd, vpbe and the v4l2 display driver for dm644x.  Change dm644x_init_video() to make room for display related configuration. Register the vpfe or vpbe devices only if valid display configuration is provided to make sure boards without video support dont erroneously register video devices.  Signed-off-by: Manjunath Hadli <manjunath.hadli@ti.com> Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | cp_intc.c | s | 4.5K | 150 | Thomas Gleixner | tglx@linutronix.de | 1301402877 |  | arm: Cleanup the irq namespace  Convert to the new function names. Automated with coccinelle.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | board-dm355-evm.c | s | 8.7K | 317 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | board-dm355-leopard.c | s | 7.0K | 243 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | Kconfig | g | 7.2K |  | Ido Yariv | ido@wizery.com | 1316255003 |  | ARM: davinci: AM18x: Add wl1271/wlan support  The wl1271 daughter card for AM18x EVMs is a combo wireless connectivity add-on card, based on the LS Research TiWi module with Texas Instruments' wl1271 solution. It is a 4-wire, 1.8V, embedded SDIO WLAN device with an external IRQ line and is power-controlled by a GPIO-based fixed regulator.  Add support for the WLAN capabilities of this expansion board.  Signed-off-by: Ido Yariv <ido@wizery.com> Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | serial.c | s | 3.0K | 94 | Cyril Chemparathy | cyril@ti.com | 1273183330 |  | Davinci: serial - conditional reset via pwremu  With this patch, AR7 type uart ports are not reset via pwremu registers.  This allows davinci_serial_init() reuse on tnetv107x soc.  Signed-off-by: Cyril Chemparathy <cyril@ti.com> Signed-off-by: Kevin Hilman <khilman@deeprootsystems.com>
f | board-da850-evm.c | s | 33K | 1209 | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | board-dm644x-evm.c | s | 19K | 722 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | board-mityomapl138.c | s | 13K | 511 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | cdce949.c | s | 6.1K | 262 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103850 |  | arm: fix implicit module.h users by adding it to arch/arm as required.  These files will fail to compile if we dont clean them up in advance and have them include the appropriate headers they need.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | davinci.h | s | 3.5K | 88 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1334780430 |  | ARM: davinci: mark spi_board_info arguments as const  spi_board_info is not modified in any of the spi registeration functions and passed along as-is to the generic SPI layer.  Mark spi_board_info arguments as const to signal this.  Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> [nsekhar@ti.com: extended for dm365 and dm355] Signed-off-by: Sekhar Nori <nsekhar@ti.com>
f | usb.c | s | 4.0K | 154 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1292062553 |  | DA8xx: assign name to MUSB IRQ resource  Commit fcf173e4511193b1efeccb0f22a8c641b464353b (usb: musb: add names for IRQs in structure resource) forgot to assign name to the DA8xx MUSB IRQ resource. Because of that MUSB driver fails to load on DA8xx machines.  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Signed-off-by: Felipe Balbi <balbi@ti.com>
f | sram.c | s | 1.6K | 59 | Sergei Shtylyov | sshtylyov@ru.mvista.com | 1259173291 |  | DaVinci: remove unneeded #include's  There have accumulated quite a lot of them after the code reorganizations...  In several cases I had to replace #include <linux/dma-mapping.h> which wasn't needed directly but happened to #include <linux/err.h> which was needed.  Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com> Signed-off-by: Kevin Hilman <khilman@deeprootsystems.com>
f | Makefile.boot | g | 328B |  | Sascha Hauer | s.hauer@pengutronix.de | 1318839160 |  | ARM: 7022/1: allow to detect conflicting zreladdrs  Boards used to specify zreladdr in their Makefile.boot with zreladdr-y := x, so conflicting zreladdrs were silently overwritten. This patch changes this to zreladdr-y += x, so that we end up with multiple words in zreladdr in such a case. We can detect this later and complain if necessary.  Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | board-omapl138-hawk.c | s | 8.1K | 290 | Shawn Guo | shawn.guo@linaro.org | 1336198801 |  | ARM: davinci: use machine specific hook for late init  Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Sekhar Nori <nsekhar@ti.com>
f | mux.h | s | 1.4K | 46 | Cyril Chemparathy | cyril@ti.com | 1273183329 |  | Davinci: eliminate pinmux offset verbosity  Pinmux registers are sequential, and do not need to be enumerated out as they currently are.  This reduces code volume and keeps things simple.  If some future SoC comes up with a discontiguous register map, PINMUX() can then be expanded with local token pasting.  Signed-off-by: Cyril Chemparathy <cyril@ti.com> Signed-off-by: Kevin Hilman <khilman@deeprootsystems.com>
