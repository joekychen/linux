f | board-fsample.c | s | 8.7K | 324 | Linus Torvalds | torvalds@linux-foundation.org | 1338594942 |  | 
f | board-sx1.c | s | 9.8K | 371 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | board-palmtt.c | s | 6.9K | 282 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | board-osk.c | s | 15K | 499 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | timer32k.c | s | 5.9K | 177 | Vaibhav Hiremath | hvaibhav@ti.com | 1336583225 |  | ARM: OMAP: Make OMAP clocksource source selection using kernel param  Current OMAP code supports couple of clocksource options based on compilation flag (CONFIG_OMAP_32K_TIMER). The 32KHz sync-timer and a gptimer which can run on 32KHz or system clock (e.g 38.4 MHz). So there can be 3 options -  1. 32KHz sync-timer 2. Sys_clock based (e.g 13/19.2/26/38.4 MHz) gptimer 3. 32KHz based gptimer.  The optional gptimer based clocksource was added so that it can give the high precision than sync-timer, so expected usage was 2 and not 3. Unfortunately option 2, clocksource doesn't meet the requirement of free-running clock as per clocksource need. It stops in low power states when sys_clock is cut. That makes gptimer based clocksource option useless for OMAP2/3/4 devices with sys_clock as a clock input. So, in order to use option 2, deeper idle state MUST be disabled.  Option 3 will still work but it is no better than 32K sync-timer based clocksource.  We must support both sync timer and gptimer based clocksource as some OMAP based derivative SoCs like AM33XX does not have the sync timer.  Considering above, make sync-timer and gptimer clocksource runtime selectable so that both OMAP and AMXXXX continue to use the same code.  And, in order to precisely configure/setup sched_clock for given clocksource, decision has to be made early enough in boot sequence.  So, the solution is,  Use standard kernel parameter ("clocksource=") to override default 32k_sync-timer, in addition to this, we also use hwmod database lookup mechanism, through which at run-time we can identify availability of 32k-sync timer on the device, else fall back to gptimer.  Also, moved low-level SoC specific init code to respective files, (mach-omap1/timer32k.c and mach-omap2/timer.c)  Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Felipe Balbi <balbi@ti.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Acked-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> Cc: Benoit Cousson <b-cousson@ti.com> Cc: Paul Walmsley <paul@pwsan.com> Cc: Tarun Kanti DebBarma <tarun.kanti@ti.com> Cc: Ming Lei <tom.leiming@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | Makefile | g | 2.2K |  | Paul Walmsley | paul@pwsan.com | 1334320471 |  | ARM: OMAP1: board files: deduplicate and clean some NAND-related code  The H2, H3, Perseus2, and FSample board files all contain the same duplicated code to handle NAND commands.  That code is missing some casts around conversions from unsigned long to void __iomem *.  Consolidate the duplicated code into a new file, arch/arm/mach-omap1/board-nand.c.  Resolve the sparse warnings by adding appropriate casts:  arch/arm/mach-omap1/board-h2.c:193:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-h2.c:193:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-h2.c:193:9:    got unsigned long arch/arm/mach-omap1/board-perseus2.c:157:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-perseus2.c:157:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-perseus2.c:157:9:    got unsigned long arch/arm/mach-omap1/board-fsample.c:199:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-fsample.c:199:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-fsample.c:199:9:    got unsigned long arch/arm/mach-omap1/board-h3.c:195:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-h3.c:195:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-h3.c:195:9:    got unsigned long  Thanks to Arnd Bergmann <arnd@arndb.de> for suggesting a cleaner implementation of omap1_nand_cmd_ctl(), avoiding some casts.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Brian Swetland <swetland@google.com> Cc: Imre Deak <imre.deak@nokia.com> Cc: Greg Lonnon <glonnon@ridgerun.com> Cc: Kevin Hilman <kjh@hilman.org> Cc: Kevin Hilman <khilman@ti.com> Cc: Arnd Bergmann <arnd@arndb.de>
f | opp_data.c | s | 2.1K | 51 | Janusz Krzysztofik | jkrzyszt@tis.icnet.pl | 1323396143 |  | ARM: OMAP1: Move dpll1 rates selection from config to runtime  For still better multi-OMAP1 support, expand omap1_rate_table with flags for different SoC types and match them while selecting clock rates. The idea is stolen from current omap24xx clock rate selection algorithm.  Since clkdev platform flag definitions are reused here, those had to be expanded with one extra entry for OMAP1710 subtype, as this is the only SoC for which we allow selection of the highest, 216 MHz rate.  Once done, remove no longer needed clock rate configure time options.  Tested on Amstrad Delta.  Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> [tony@atomide.com: updated comments] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-nand.c | s | 923B | 31 | Paul Walmsley | paul@pwsan.com | 1334320471 |  | ARM: OMAP1: board files: deduplicate and clean some NAND-related code  The H2, H3, Perseus2, and FSample board files all contain the same duplicated code to handle NAND commands.  That code is missing some casts around conversions from unsigned long to void __iomem *.  Consolidate the duplicated code into a new file, arch/arm/mach-omap1/board-nand.c.  Resolve the sparse warnings by adding appropriate casts:  arch/arm/mach-omap1/board-h2.c:193:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-h2.c:193:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-h2.c:193:9:    got unsigned long arch/arm/mach-omap1/board-perseus2.c:157:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-perseus2.c:157:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-perseus2.c:157:9:    got unsigned long arch/arm/mach-omap1/board-fsample.c:199:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-fsample.c:199:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-fsample.c:199:9:    got unsigned long arch/arm/mach-omap1/board-h3.c:195:9: warning: incorrect type in argument 1 (different base types) arch/arm/mach-omap1/board-h3.c:195:9:    expected void const volatile [noderef] <asn:2>*<noident> arch/arm/mach-omap1/board-h3.c:195:9:    got unsigned long  Thanks to Arnd Bergmann <arnd@arndb.de> for suggesting a cleaner implementation of omap1_nand_cmd_ctl(), avoiding some casts.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Brian Swetland <swetland@google.com> Cc: Imre Deak <imre.deak@nokia.com> Cc: Greg Lonnon <glonnon@ridgerun.com> Cc: Kevin Hilman <kjh@hilman.org> Cc: Kevin Hilman <khilman@ti.com> Cc: Arnd Bergmann <arnd@arndb.de>
f | devices.c | s | 10K | 355 | Tony Lindgren | tony@atomide.com | 1336606512 |  | ARM: OMAP1: Pass dma request lines in platform data to MMC driver  Pass dma request lines in platform data to MMC driver.  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | time.c | s | 6.9K | 206 | Vaibhav Hiremath | hvaibhav@ti.com | 1336583225 |  | ARM: OMAP1: Add checks for possible error condition in timer_init  On OMAP1, omap_32k_timer_init() function always returns "true", irrespective of whether error occurred while initializing 32k sync counter as a kernel clocksource or not and execution will never fallback to mpu_timer clocksource init code.  This patch adds check for return value from function omap_init_clocksource_32k(), and fallback to omap_mpu_timer_init() in case of failure/error from omap_init_clocksource_32k().  Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Acked-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> Cc: Paul Walmsley <paul@pwsan.com> Cc: Benoit Cousson <b-cousson@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | gpio7xx.c | s | 6.6K | 246 | Tarun Kanti DebBarma | tarun.kanti@ti.com | 1336781319 |  | gpio/omap: remove virtual_irq_start variable  This cleanup got missed while implementing following: 25db711 gpio/omap: Fix IRQ handling for SPARSE_IRQ 384ebe1 gpio/omap: Add DT support to GPIO driver  Cc: Kevin Hilman <khilman@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Cousson, Benoit <b-cousson@ti.com> Cc: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Govindraj.R <govindraj.raja@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | clock_data.c | s | 27K | 859 | Tony Lindgren | tony@atomide.com | 1330108475 |  | ARM: OMAP: Remove plat/io.h by splitting it into mach/io.h and mach/hardware.h  This is needed to minimize io.h so the SoC specific io.h for ARMs can removed.  Note that minimal driver changes for DSS and RNG are needed to include cpu.h for SoC detection macros.  Cc: Tomi Valkeinen <tomi.valkeinen@ti.com> Cc: Matt Mackall <mpm@selenic.com> Cc: Herbert Xu <herbert@gondor.apana.org.au> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-innovator.c | s | 11K | 402 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | pm.c | s | 19K | 609 | Paul Walmsley | paul@pwsan.com | 1334699447 |  | ARM: OMAP2+: clean up some cppcheck warnings  Resolve some warnings identified by cppcheck in arch/arm/mach-omap2:      [arch/arm/mach-omap2/usb-tusb6010.c:129]: (style) Checking if unsigned variable 'tmp' is less than zero.     [arch/arm/mach-omap2/prm_common.c:241]: (error) Possible null pointer dereference: irq_setup - otherwise it is redundant to check if irq_setup is null at line 247     [arch/arm/mach-omap2/pm34xx.c:790]: (style) Variable 'per_clkdm' is assigned a value that is never used     [arch/arm/mach-omap2/pm34xx.c:790]: (style) Variable 'core_clkdm' is assigned a value that is never used     [arch/arm/mach-omap2/pm24xx.c:185]: (style) Variable 'only_idle' is assigned a value that is never used     [arch/arm/mach-omap2/mux.c:254]: (error) Possible null pointer dereference: mux     [arch/arm/mach-omap2/mux.c:258]: (error) Possible null pointer dereference: mux     [arch/arm/mach-omap2/gpmc-onenand.c:178]: (style) Variable 'tick_ns' is assigned a value that is never used     [arch/arm/mach-omap2/gpio.c:56]: (error) Possible null pointer dereference: pdata - otherwise it is redundant to check if pdata is null at line 57     [arch/arm/mach-omap2/devices.c:45]: (style) Variable 'l' is assigned a value that is never used     [arch/arm/mach-omap2/board-omap3evm.c:641] -> [arch/arm/mach-omap2/board-omap3evm.c:639]: (style) Found duplicate branches for if and else.     [arch/arm/mach-omap2/am35xx-emac.c:95]: (style) Variable 'regval' is assigned a value that is never used     [arch/arm/mach-omap2/devices.c:74]: (style) Variable 'l' is assigned a value that is never used     [arch/arm/mach-omap2/pm34xx.c:277]: (style) Variable 'per_prev_state' is assigned a value that is never used     [arch/arm/plat-omap/dmtimer.c:352]: (error) Possible null pointer dereference: timer - otherwise it is redundant to check if timer is null at line 354     [arch/arm/plat-omap/omap_device.c:478]: (style) Variable 'c' is assigned a value that is never used     [arch/arm/plat-omap/usb.c:42]: (style) Variable 'status' is assigned a value that is never used     [arch/arm/mach-omap1/clock.c:197]: (style) Variable 'dpll1_rate' is assigned a value that is never used     [arch/arm/mach-omap1/lcd_dma.c:60]: (style) struct or union member 'lcd_dma_info::size' is never used     [arch/arm/mach-omap1/pm.c:572]: (style) Variable 'entry' is assigned a value that is never used  Some of them are pretty good catches, such as gpio.c:56 and usb-tusb6010.c:129.  Thanks to Jarkko Nikula for some comments on the sscanf() warnings. It seems that the kernel sscanf() ignores the field width anyway for the %d format, so those changes have been dropped from this second version.  Thanks to Daniel Marjamäki <daniel.marjamaki@gmail.com> for pointing out that a variable was unnecessarily marked static in the board-omap3evm.c change.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Kevin Hilman <khilman@ti.com> Cc: Peter Ujfalusi <peter.ujfalusi@ti.com> Cc: Jarkko Nikula <jarkko.nikula@bitmer.com> Cc: Charulatha Varadarajan <charu@ti.com> Cc: Daniel Marjamäki <daniel.marjamaki@gmail.com> Cc: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Charulatha Varadarajan <charu@ti.com> # for gpio.c
f | ams-delta-fiq-handler.S | g | 8.8K |  | Rob Herring | rob.herring@calxeda.com | 1331691729 |  | ARM: create a common IOMEM definition  Several platforms create IOMEM defines for casting to 'void __iomem *', and other platforms are incorrectly using __io() macro for the same purpose. This creates a common definition and removes all the platform specific versions. Rather than try to make linux/io.h and asm/io.h assembly safe, the assembly version of IOMEM is moved into asm/assembler.h.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Sekhar Nori <nsekhar@ti.com> Cc: Kevin Hilman <khilman@ti.com> Acked-by: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Haojian Zhuang <haojian.zhuang@marvell.com> Acked-by: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com> Acked-by: Paul Walmsley <paul@pwsan.com> Acked-by: Viresh Kumar <viresh.kumar@st.com> Cc: Rajeev Kumar <rajeev-dlh.kumar@st.com> Cc: Colin Cross <ccross@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Stephen Warren <swarren@nvidia.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Arnd Bergmann <arnd@arndb.de>
f | iomap.h | s | 1.6K | 33 | Rob Herring | rob.herring@calxeda.com | 1331691729 |  | ARM: create a common IOMEM definition  Several platforms create IOMEM defines for casting to 'void __iomem *', and other platforms are incorrectly using __io() macro for the same purpose. This creates a common definition and removes all the platform specific versions. Rather than try to make linux/io.h and asm/io.h assembly safe, the assembly version of IOMEM is moved into asm/assembler.h.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Sekhar Nori <nsekhar@ti.com> Cc: Kevin Hilman <khilman@ti.com> Acked-by: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Haojian Zhuang <haojian.zhuang@marvell.com> Acked-by: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com> Acked-by: Paul Walmsley <paul@pwsan.com> Acked-by: Viresh Kumar <viresh.kumar@st.com> Cc: Rajeev Kumar <rajeev-dlh.kumar@st.com> Cc: Colin Cross <ccross@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Stephen Warren <swarren@nvidia.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Arnd Bergmann <arnd@arndb.de>
f | reset.c | s | 494B | 20 | Paul Walmsley | paul@pwsan.com | 1334320466 |  | ARM: OMAP: add includes for missing prototypes  Several C files in arch/arm/mach-omap* and arch/arm/plat-omap declare functions that are used by other files, but don't include the header file where the prototype is declared.  This results in the following warnings from sparse:      arch/arm/mach-omap2/irq.c:114:5: warning: symbol 'omap_irq_pending' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:186:13: warning: symbol 'omap2_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:191:13: warning: symbol 'omap3_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:196:13: warning: symbol 'ti81xx_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:233:39: warning: symbol 'omap2_intc_handle_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:242:6: warning: symbol 'omap_intc_save_context' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:265:6: warning: symbol 'omap_intc_restore_context' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:291:6: warning: symbol 'omap3_intc_suspend' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:297:6: warning: symbol 'omap3_intc_prepare_idle' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:306:6: warning: symbol 'omap3_intc_resume_idle' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:312:39: warning: symbol 'omap3_intc_handle_irq' was not declared. Should it be static?     arch/arm/mach-omap2/omap-secure.c:59:12: warning: symbol 'omap_secure_ram_reserve_memblock' was not declared. Should it be static?     arch/arm/mach-omap2/board-zoom-display.c:133:13: warning: symbol 'zoom_display_init' was not declared. Should it be static?     arch/arm/plat-omap/common.c:73:13: warning: symbol 'omap_init_consistent_dma_size' was not declared. Should it be static?     arch/arm/mach-omap1/irq.c:61:5: warning: symbol 'omap_irq_flags' was not declared. Should it be static?     arch/arm/mach-omap1/irq.c:179:13: warning: symbol 'omap1_init_irq' was not declared. Should it be static?     arch/arm/mach-omap1/reset.c:11:6: warning: symbol 'omap1_restart' was not declared. Should it be static?  Fix by including the appropriate header files.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Senthilvadivu Guruswamy <svadivu@ti.com> Acked-by: Santosh Shilimkar <santosh.shilimkar@ti.com>
f | board-htcherald.c | s | 17K | 536 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
d | include |  | 1 items |  | Rob Herring | rob.herring@calxeda.com | 1333650595 |  | ARM: fix __io macro for PCMCIA  With commit c334bc1 (ARM: make mach/io.h include optional), PCMCIA was broken. PCMCIA depends on __io() returning a valid i/o address, and most ARM platforms require IO_SPACE_LIMIT be set to 0xffffffff for PCMCIA. This needs a better fix with a fixed i/o address mapping, but for now we just restore things to the previous behavior.  This fixes at91, omap1, pxa and sa11xx. pxa needs io.h if PCI is enabled, but PCMCIA is not. sa11xx already has IO_SPACE_LIMIT set to 0xffffffff, so it doesn't need an io.h.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Joachim Eastwood <joachim.eastwood@jotron.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Andrew Victor <linux@maxim.org.za> Cc: Nicolas Ferre <nicolas.ferre@atmel.com> Cc: Jean-Christophe Plagniol-Villard <plagnioj@jcrosoft.com> Tested-by: Paul Parsons <lost.distance@yahoo.com> (pxa270) Acked-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Olof Johansson <olof@lixom.net>
f | pm_bus.c | s | 1.7K | 66 | Rafael J. Wysocki | rjw@sisk.pl | 1314279259 |  | PM: Move clock-related definitions and headers to separate file  Since the PM clock management code in drivers/base/power/clock_ops.c is used for both runtime PM and system suspend/hibernation, the definitions of data structures and headers related to it should not be located in include/linux/pm_rumtime.h.  Move them to a separate header file.  Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
f | board-perseus2.c | s | 7.3K | 293 | Linus Torvalds | torvalds@linux-foundation.org | 1338594942 |  | 
f | lcd_dma.c | s | 10K | 392 | Paul Walmsley | paul@pwsan.com | 1334699447 |  | ARM: OMAP2+: clean up some cppcheck warnings  Resolve some warnings identified by cppcheck in arch/arm/mach-omap2:      [arch/arm/mach-omap2/usb-tusb6010.c:129]: (style) Checking if unsigned variable 'tmp' is less than zero.     [arch/arm/mach-omap2/prm_common.c:241]: (error) Possible null pointer dereference: irq_setup - otherwise it is redundant to check if irq_setup is null at line 247     [arch/arm/mach-omap2/pm34xx.c:790]: (style) Variable 'per_clkdm' is assigned a value that is never used     [arch/arm/mach-omap2/pm34xx.c:790]: (style) Variable 'core_clkdm' is assigned a value that is never used     [arch/arm/mach-omap2/pm24xx.c:185]: (style) Variable 'only_idle' is assigned a value that is never used     [arch/arm/mach-omap2/mux.c:254]: (error) Possible null pointer dereference: mux     [arch/arm/mach-omap2/mux.c:258]: (error) Possible null pointer dereference: mux     [arch/arm/mach-omap2/gpmc-onenand.c:178]: (style) Variable 'tick_ns' is assigned a value that is never used     [arch/arm/mach-omap2/gpio.c:56]: (error) Possible null pointer dereference: pdata - otherwise it is redundant to check if pdata is null at line 57     [arch/arm/mach-omap2/devices.c:45]: (style) Variable 'l' is assigned a value that is never used     [arch/arm/mach-omap2/board-omap3evm.c:641] -> [arch/arm/mach-omap2/board-omap3evm.c:639]: (style) Found duplicate branches for if and else.     [arch/arm/mach-omap2/am35xx-emac.c:95]: (style) Variable 'regval' is assigned a value that is never used     [arch/arm/mach-omap2/devices.c:74]: (style) Variable 'l' is assigned a value that is never used     [arch/arm/mach-omap2/pm34xx.c:277]: (style) Variable 'per_prev_state' is assigned a value that is never used     [arch/arm/plat-omap/dmtimer.c:352]: (error) Possible null pointer dereference: timer - otherwise it is redundant to check if timer is null at line 354     [arch/arm/plat-omap/omap_device.c:478]: (style) Variable 'c' is assigned a value that is never used     [arch/arm/plat-omap/usb.c:42]: (style) Variable 'status' is assigned a value that is never used     [arch/arm/mach-omap1/clock.c:197]: (style) Variable 'dpll1_rate' is assigned a value that is never used     [arch/arm/mach-omap1/lcd_dma.c:60]: (style) struct or union member 'lcd_dma_info::size' is never used     [arch/arm/mach-omap1/pm.c:572]: (style) Variable 'entry' is assigned a value that is never used  Some of them are pretty good catches, such as gpio.c:56 and usb-tusb6010.c:129.  Thanks to Jarkko Nikula for some comments on the sscanf() warnings. It seems that the kernel sscanf() ignores the field width anyway for the %d format, so those changes have been dropped from this second version.  Thanks to Daniel Marjamäki <daniel.marjamaki@gmail.com> for pointing out that a variable was unnecessarily marked static in the board-omap3evm.c change.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Kevin Hilman <khilman@ti.com> Cc: Peter Ujfalusi <peter.ujfalusi@ti.com> Cc: Jarkko Nikula <jarkko.nikula@bitmer.com> Cc: Charulatha Varadarajan <charu@ti.com> Cc: Daniel Marjamäki <daniel.marjamaki@gmail.com> Cc: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Charulatha Varadarajan <charu@ti.com> # for gpio.c
f | leds-h2p2-debug.c | s | 3.1K | 131 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | dma.c | s | 8.5K | 346 | Tony Lindgren | tony@atomide.com | 1330108474 |  | ARM: OMAP1: Move most of plat/io.h into local iomap.h  There's no need to have these in plat/io.h.  While at it, clean up the includes to group them like they typically are grouped.  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | gpio15xx.c | s | 3.1K | 107 | Tarun Kanti DebBarma | tarun.kanti@ti.com | 1336781319 |  | gpio/omap: remove virtual_irq_start variable  This cleanup got missed while implementing following: 25db711 gpio/omap: Fix IRQ handling for SPARSE_IRQ 384ebe1 gpio/omap: Add DT support to GPIO driver  Cc: Kevin Hilman <khilman@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Cousson, Benoit <b-cousson@ti.com> Cc: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Govindraj.R <govindraj.raja@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | clock.c | s | 13K | 496 | Paul Walmsley | paul@pwsan.com | 1334699447 |  | ARM: OMAP2+: clean up some cppcheck warnings  Resolve some warnings identified by cppcheck in arch/arm/mach-omap2:      [arch/arm/mach-omap2/usb-tusb6010.c:129]: (style) Checking if unsigned variable 'tmp' is less than zero.     [arch/arm/mach-omap2/prm_common.c:241]: (error) Possible null pointer dereference: irq_setup - otherwise it is redundant to check if irq_setup is null at line 247     [arch/arm/mach-omap2/pm34xx.c:790]: (style) Variable 'per_clkdm' is assigned a value that is never used     [arch/arm/mach-omap2/pm34xx.c:790]: (style) Variable 'core_clkdm' is assigned a value that is never used     [arch/arm/mach-omap2/pm24xx.c:185]: (style) Variable 'only_idle' is assigned a value that is never used     [arch/arm/mach-omap2/mux.c:254]: (error) Possible null pointer dereference: mux     [arch/arm/mach-omap2/mux.c:258]: (error) Possible null pointer dereference: mux     [arch/arm/mach-omap2/gpmc-onenand.c:178]: (style) Variable 'tick_ns' is assigned a value that is never used     [arch/arm/mach-omap2/gpio.c:56]: (error) Possible null pointer dereference: pdata - otherwise it is redundant to check if pdata is null at line 57     [arch/arm/mach-omap2/devices.c:45]: (style) Variable 'l' is assigned a value that is never used     [arch/arm/mach-omap2/board-omap3evm.c:641] -> [arch/arm/mach-omap2/board-omap3evm.c:639]: (style) Found duplicate branches for if and else.     [arch/arm/mach-omap2/am35xx-emac.c:95]: (style) Variable 'regval' is assigned a value that is never used     [arch/arm/mach-omap2/devices.c:74]: (style) Variable 'l' is assigned a value that is never used     [arch/arm/mach-omap2/pm34xx.c:277]: (style) Variable 'per_prev_state' is assigned a value that is never used     [arch/arm/plat-omap/dmtimer.c:352]: (error) Possible null pointer dereference: timer - otherwise it is redundant to check if timer is null at line 354     [arch/arm/plat-omap/omap_device.c:478]: (style) Variable 'c' is assigned a value that is never used     [arch/arm/plat-omap/usb.c:42]: (style) Variable 'status' is assigned a value that is never used     [arch/arm/mach-omap1/clock.c:197]: (style) Variable 'dpll1_rate' is assigned a value that is never used     [arch/arm/mach-omap1/lcd_dma.c:60]: (style) struct or union member 'lcd_dma_info::size' is never used     [arch/arm/mach-omap1/pm.c:572]: (style) Variable 'entry' is assigned a value that is never used  Some of them are pretty good catches, such as gpio.c:56 and usb-tusb6010.c:129.  Thanks to Jarkko Nikula for some comments on the sscanf() warnings. It seems that the kernel sscanf() ignores the field width anyway for the %d format, so those changes have been dropped from this second version.  Thanks to Daniel Marjamäki <daniel.marjamaki@gmail.com> for pointing out that a variable was unnecessarily marked static in the board-omap3evm.c change.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Kevin Hilman <khilman@ti.com> Cc: Peter Ujfalusi <peter.ujfalusi@ti.com> Cc: Jarkko Nikula <jarkko.nikula@bitmer.com> Cc: Charulatha Varadarajan <charu@ti.com> Cc: Daniel Marjamäki <daniel.marjamaki@gmail.com> Cc: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Charulatha Varadarajan <charu@ti.com> # for gpio.c
f | sram.S | g | 1.5K |  | Tony Lindgren | tony@atomide.com | 1331091278 |  | ARM: OMAP: Remove remaining includes for mach/io.h  These are no longer needed with the recent iomap.h changes.  Reported-by: Rob Herring <robherring2@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com> Cc: Tomi Valkeinen <tomi.valkeinen@ti.com> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de>
f | i2c.c | s | 1.0K | 33 | Jarkko Nikula | jhnikula@gmail.com | 1267137908 |  | omap: i2c: Fix muxing for command line enabled bus  The commit b63128e81214cc2db2995d690438055c26d213a5 broke the pin muxing for I2C busses that are enabled from the kernel command line.  Fix this by defining the board registration function omap_register_i2c_bus in common platform code as it was before but keep the muxing in architecture dependent files.  Signed-off-by: Jarkko Nikula <jhnikula@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-palmz71.c | s | 7.9K | 297 | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | board-nokia770.c | s | 6.3K | 222 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | clock.h | s | 3.9K | 101 | Janusz Krzysztofik | jkrzyszt@tis.icnet.pl | 1323396143 |  | ARM: OMAP1: Move dpll1 rates selection from config to runtime  For still better multi-OMAP1 support, expand omap1_rate_table with flags for different SoC types and match them while selecting clock rates. The idea is stolen from current omap24xx clock rate selection algorithm.  Since clkdev platform flag definitions are reused here, those had to be expanded with one extra entry for OMAP1710 subtype, as this is the only SoC for which we allow selection of the highest, 216 MHz rate.  Once done, remove no longer needed clock rate configure time options.  Tested on Amstrad Delta.  Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> [tony@atomide.com: updated comments] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | leds-osk.c | s | 2.0K | 85 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | id.c | s | 6.4K | 178 | Paul Walmsley | paul@pwsan.com | 1334320466 |  | ARM: OMAP: add includes for missing prototypes  Several C files in arch/arm/mach-omap* and arch/arm/plat-omap declare functions that are used by other files, but don't include the header file where the prototype is declared.  This results in the following warnings from sparse:      arch/arm/mach-omap2/irq.c:114:5: warning: symbol 'omap_irq_pending' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:186:13: warning: symbol 'omap2_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:191:13: warning: symbol 'omap3_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:196:13: warning: symbol 'ti81xx_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:233:39: warning: symbol 'omap2_intc_handle_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:242:6: warning: symbol 'omap_intc_save_context' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:265:6: warning: symbol 'omap_intc_restore_context' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:291:6: warning: symbol 'omap3_intc_suspend' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:297:6: warning: symbol 'omap3_intc_prepare_idle' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:306:6: warning: symbol 'omap3_intc_resume_idle' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:312:39: warning: symbol 'omap3_intc_handle_irq' was not declared. Should it be static?     arch/arm/mach-omap2/omap-secure.c:59:12: warning: symbol 'omap_secure_ram_reserve_memblock' was not declared. Should it be static?     arch/arm/mach-omap2/board-zoom-display.c:133:13: warning: symbol 'zoom_display_init' was not declared. Should it be static?     arch/arm/plat-omap/common.c:73:13: warning: symbol 'omap_init_consistent_dma_size' was not declared. Should it be static?     arch/arm/mach-omap1/irq.c:61:5: warning: symbol 'omap_irq_flags' was not declared. Should it be static?     arch/arm/mach-omap1/irq.c:179:13: warning: symbol 'omap1_init_irq' was not declared. Should it be static?     arch/arm/mach-omap1/reset.c:11:6: warning: symbol 'omap1_restart' was not declared. Should it be static?  Fix by including the appropriate header files.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Senthilvadivu Guruswamy <svadivu@ti.com> Acked-by: Santosh Shilimkar <santosh.shilimkar@ti.com>
f | mux.c | s | 20K | 408 | Aaro Koskinen | aaro.koskinen@iki.fi | 1333993812 |  | ARM: OMAP1: mux: add missing include  Fix the following build breakage in v3.4-rc2 that happens with CONFIG_OMAP_MUX=y:  arch/arm/mach-omap1/mux.c:89:1: error: 'FUNC_MUX_CTRL_9' undeclared here (not in a function) arch/arm/mach-omap1/mux.c:89:1: error: 'PULL_DWN_CTRL_2' undeclared here (not in a function) arch/arm/mach-omap1/mux.c:93:1: error: 'FUNC_MUX_CTRL_C' undeclared here (not in a function)  Signed-off-by: Aaro Koskinen <aaro.koskinen@iki.fi> Acked-by: Jarkko Nikula <jarkko.nikula@bitmer.com> [tony@atomide.com: updated comments] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | leds.c | s | 1.5K | 56 | Russell King | rmk+kernel@arm.linux.org.uk | 1312810061 |  | ARM: gpio: convert includes of mach/gpio.h and asm/gpio.h to linux/gpio.h  Convert arch/arm includes of mach/gpio.h and asm/gpio.h to linux/gpio.h before we start consolidating the individual platform implementations of the gpio header files.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | leds.h | s | 146B | 3 | Tony Lindgren | tony@atomide.com | 1121021890 |  | [PATCH] ARM: 2799/1: OMAP update 4/11: Move OMAP1 LED code into mach-omap1 directory  Patch from Tony Lindgren  This patch by Paul Mundt and other OMAP developers moves OMAP1 specific LED code into mach-omap1 directory.  Signed-off-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | board-ams-delta.c | s | 14K | 542 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | sleep.S | g | 9.1K |  | Tony Lindgren | tony@atomide.com | 1331091278 |  | ARM: OMAP: Remove remaining includes for mach/io.h  These are no longer needed with the recent iomap.h changes.  Reported-by: Rob Herring <robherring2@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com> Cc: Tomi Valkeinen <tomi.valkeinen@ti.com> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de>
f | mcbsp.c | s | 8.9K | 415 | Linus Torvalds | torvalds@linux-foundation.org | 1332889412 |  | 
f | pm.h | s | 8.9K | 246 | Jean Pihet | j-pihet@ti.com | 1296829568 |  | ARM: 6649/1: omap: use fncpy to copy the PM code functions to SRAM  The new fncpy API is better suited* for copying some code to SRAM at runtime. This patch changes the ad-hoc code to the more generic fncpy API.  *: 1. fncpy ensures that the thumb mode bit is propagated,    2. fncpy provides the security of type safety between the      original function and the sram function pointer.  Tested OK on OMAP3 in low power modes (RET/OFF) using omap2plus_defconfig with !CONFIG_THUMB2_KERNEL. Compile tested on OMAP1/2 using omap1_defconfig.  Boot tested on OMAP1 & OMAP2 Tested OK with suspend/resume on OMAP2420/n810  Boots fine on osk5912 and n800  Signed-off-by: Jean Pihet <j-pihet@ti.com> Acked-by: Kevin Hilman <khilman@ti.com> Acked-by: Tony Lindgren <tony@atomide.com> Reviewed-by: Dave Martin <dave.martin@linaro.org> Tested-by: Kevin Hilman <khilman@ti.com> Tested-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | board-h2.c | s | 10K | 387 | Linus Torvalds | torvalds@linux-foundation.org | 1338594942 |  | 
f | irq.c | s | 7.2K | 213 | Paul Walmsley | paul@pwsan.com | 1334320466 |  | ARM: OMAP: add includes for missing prototypes  Several C files in arch/arm/mach-omap* and arch/arm/plat-omap declare functions that are used by other files, but don't include the header file where the prototype is declared.  This results in the following warnings from sparse:      arch/arm/mach-omap2/irq.c:114:5: warning: symbol 'omap_irq_pending' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:186:13: warning: symbol 'omap2_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:191:13: warning: symbol 'omap3_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:196:13: warning: symbol 'ti81xx_init_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:233:39: warning: symbol 'omap2_intc_handle_irq' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:242:6: warning: symbol 'omap_intc_save_context' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:265:6: warning: symbol 'omap_intc_restore_context' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:291:6: warning: symbol 'omap3_intc_suspend' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:297:6: warning: symbol 'omap3_intc_prepare_idle' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:306:6: warning: symbol 'omap3_intc_resume_idle' was not declared. Should it be static?     arch/arm/mach-omap2/irq.c:312:39: warning: symbol 'omap3_intc_handle_irq' was not declared. Should it be static?     arch/arm/mach-omap2/omap-secure.c:59:12: warning: symbol 'omap_secure_ram_reserve_memblock' was not declared. Should it be static?     arch/arm/mach-omap2/board-zoom-display.c:133:13: warning: symbol 'zoom_display_init' was not declared. Should it be static?     arch/arm/plat-omap/common.c:73:13: warning: symbol 'omap_init_consistent_dma_size' was not declared. Should it be static?     arch/arm/mach-omap1/irq.c:61:5: warning: symbol 'omap_irq_flags' was not declared. Should it be static?     arch/arm/mach-omap1/irq.c:179:13: warning: symbol 'omap1_init_irq' was not declared. Should it be static?     arch/arm/mach-omap1/reset.c:11:6: warning: symbol 'omap1_restart' was not declared. Should it be static?  Fix by including the appropriate header files.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Senthilvadivu Guruswamy <svadivu@ti.com> Acked-by: Santosh Shilimkar <santosh.shilimkar@ti.com>
f | mailbox.c | s | 4.3K | 165 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103850 |  | arm: fix implicit module.h users by adding it to arch/arm as required.  These files will fail to compile if we dont clean them up in advance and have them include the appropriate headers they need.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | leds-innovator.c | s | 1.5K | 75 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | timer.c | s | 4.0K | 149 | Olof Johansson | olof@lixom.net | 1336555726 |  | 
f | board-voiceblue.c | s | 7.3K | 261 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | gpio16xx.c | s | 6.4K | 224 | Tarun Kanti DebBarma | tarun.kanti@ti.com | 1336781319 |  | gpio/omap: remove virtual_irq_start variable  This cleanup got missed while implementing following: 25db711 gpio/omap: Fix IRQ handling for SPARSE_IRQ 384ebe1 gpio/omap: Add DT support to GPIO driver  Cc: Kevin Hilman <khilman@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Cousson, Benoit <b-cousson@ti.com> Cc: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Govindraj.R <govindraj.raja@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | flash.c | s | 590B | 23 | Linus Torvalds | torvalds@linux-foundation.org | 1333153916 |  | 
f | fpga.c | s | 5.2K | 164 | Paul Walmsley | paul@pwsan.com | 1334320466 |  | ARM: OMAP2+: declare file-local functions as static  Several function declarations used only in the files in which they're declared should include the static keyword, but don't:      arch/arm/mach-omap2/serial.c:248:6: warning: symbol 'cmdline_find_option' was not declared. Should it be static?     arch/arm/mach-omap2/omap-wakeupgen.c:259:6: warning: symbol 'irq_sar_clear' was not declared. Should it be static?     arch/arm/mach-omap2/board-rx51-peripherals.c:878:27: warning: symbol 'rx51_vibra_data' was not declared. Should it be static?     arch/arm/mach-omap2/board-rx51-peripherals.c:882:27: warning: symbol 'rx51_audio_data' was not declared. Should it be static?     arch/arm/mach-omap2/board-omap4panda.c:201:29: warning: symbol 'omap_panda_wlan_data' was not declared. Should it be static?     arch/arm/mach-omap2/board-omap4panda.c:393:24: warning: symbol 'omap4_panda_dvi_device' was not declared. Should it be static?     arch/arm/mach-omap2/board-omap4panda.c:403:12: warning: symbol 'omap4_panda_dvi_init' was not declared. Should it be static?     arch/arm/mach-omap2/board-omap4panda.c:464:6: warning: symbol 'omap4_panda_display_init' was not declared. Should it be static?     arch/arm/mach-omap2/hsmmc.c:434:6: warning: symbol 'omap_init_hsmmc' was not declared. Should it be static?     arch/arm/mach-omap2/hwspinlock.c:31:12: warning: symbol 'hwspinlocks_init' was not declared. Should it be static?     arch/arm/mach-omap1/timer.c:58:12: warning: symbol 'omap1_dm_timer_init' was not declared. Should it be static?     arch/arm/mach-omap1/fpga.c:90:6: warning: symbol 'innovator_fpga_IRQ_demux' was not declared. Should it be static?  Mark all of these as static.  Thanks to Arnd Bergmann <arnd@arndb.de> for pointing out a typo in the original patch description.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Govindraj R <govindraj.raja@ti.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: David Anders <x0132446@ti.com> Acked-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Acked-by: Arnd Bergmann <arnd@arndb.de>
f | board-palmte.c | s | 6.6K | 242 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | ams-delta-fiq.c | s | 4.4K | 136 | Linus Torvalds | torvalds@linux-foundation.org | 1337703804 |  | 
f | serial.c | s | 6.1K | 236 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | board-h3.c | s | 9.8K | 382 | Linus Torvalds | torvalds@linux-foundation.org | 1338594942 |  | 
f | Kconfig | g | 4.5K |  | Artem Bityutskiy | artem.bityutskiy@linux.intel.com | 1336522584 |  | ARM: OMAP1: fix compilation issue in board-sx1.c  SX1 board requirese i2c, so select it in Kconfig, otherwise I have the following build error:  arch/arm/mach-omap1/board-sx1.c: In function 'sx1_i2c_write_byte': arch/arm/mach-omap1/board-sx1.c:58:2: error: implicit declaration of function 'i2c_get_adapter' [-Werror=implicit-function-declaration] arch/arm/mach-omap1/board-sx1.c:58:7: warning: assignment makes pointer from integer without a cast [enabled by default] arch/arm/mach-omap1/board-sx1.c:67:2: error: implicit declaration of function 'i2c_transfer' [-Werror=implicit-function-declaration] arch/arm/mach-omap1/board-sx1.c:68:2: error: implicit declaration of function 'i2c_put_adapter' [-Werror=implicit-function-declaration] arch/arm/mach-omap1/board-sx1.c: In function 'sx1_i2c_read_byte': arch/arm/mach-omap1/board-sx1.c:82:7: warning: assignment makes pointer from integer without a cast [enabled by default] cc1: some warnings being treated as errors make[1]: *** [arch/arm/mach-omap1/board-sx1.o] Error 1 make: *** [arch/arm/mach-omap1] Error 2 make: *** Waiting for unfinished jobs....  Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-generic.c | s | 2.3K | 84 | Shawn Guo | shawn.guo@linaro.org | 1336480578 |  | ARM: omap1: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com>
f | ocpi.c | s | 2.7K | 93 | Paul Walmsley | paul@pwsan.com | 1334320467 |  | ARM: OMAP1: OCPI: move to mach-omap1/  Move the OMAP1 OCPI "bus" code to arch/arm/mach-omap1, since it is only used on OMAP1 devices.  In the long term, it probably makes sense to move the OCPI bus code to somewhere under drivers/.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Tony Lindgren <tony@atomide.com>
f | board-sx1-mmc.c | s | 1.5K | 53 | Russell King | rmk+kernel@arm.linux.org.uk | 1312810061 |  | ARM: gpio: convert includes of mach/gpio.h and asm/gpio.h to linux/gpio.h  Convert arch/arm includes of mach/gpio.h and asm/gpio.h to linux/gpio.h before we start consolidating the individual platform implementations of the gpio header files.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | opp.h | s | 719B | 24 | Janusz Krzysztofik | jkrzyszt@tis.icnet.pl | 1323396143 |  | ARM: OMAP1: Move dpll1 rates selection from config to runtime  For still better multi-OMAP1 support, expand omap1_rate_table with flags for different SoC types and match them while selecting clock rates. The idea is stolen from current omap24xx clock rate selection algorithm.  Since clkdev platform flag definitions are reused here, those had to be expanded with one extra entry for OMAP1710 subtype, as this is the only SoC for which we allow selection of the highest, 216 MHz rate.  Once done, remove no longer needed clock rate configure time options.  Tested on Amstrad Delta.  Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> [tony@atomide.com: updated comments] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-h2.h | s | 1.5K | 33 | Tony Lindgren | tony@atomide.com | 1237856853 |  | ARM: OMAP: No need to include board-h2.h from hardware.h  Also move board-h2.h to mach-omap1.  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-h3.h | s | 1.5K | 32 | Tony Lindgren | tony@atomide.com | 1237856853 |  | ARM: OMAP: No need to include board-h3.h from hardware.h  Also move board-h3.h to mach-omap1.  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | common.h | s | 2.5K | 80 | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | io.c | s | 3.8K | 160 | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | board-h2-mmc.c | s | 1.8K | 64 | Russell King | rmk+kernel@arm.linux.org.uk | 1312810061 |  | ARM: gpio: convert includes of mach/gpio.h and asm/gpio.h to linux/gpio.h  Convert arch/arm includes of mach/gpio.h and asm/gpio.h to linux/gpio.h before we start consolidating the individual platform implementations of the gpio header files.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | usb.c | s | 11K | 449 | Paul Walmsley | paul@pwsan.com | 1334320467 |  | ARM: OMAP1: OHCI: use platform_data fn ptr to enable OCPI bus  The OMAP1 OHCI driver needs to enable the OCPI IP block before it can work.  Previously, the driver was simply calling a symbol defined in the OMAP platform code, but this is incorrect: drivers should be fully decoupled from platform and architecture code.  So instead, modify the driver to call through a platform_data function pointer instead.  We skip any DT aspect, since OMAP1 is not scheduled to be converted to DT in the near future.  This resolves the following sparse warning:  It also gets rid of a cpu_is_omap16xx() call in a driver.  In the long term, it probably makes sense to move the OCPI bus code to somewhere under drivers/.  This should avoid the whole platform_data/DT issue with this function.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Anand Gadiyar <gadiyar@ti.com> Acked-by: Felipe Balbi <balbi@ti.com>
f | board-h3-mmc.c | s | 1.6K | 55 | Russell King | rmk+kernel@arm.linux.org.uk | 1312810061 |  | ARM: gpio: convert includes of mach/gpio.h and asm/gpio.h to linux/gpio.h  Convert arch/arm includes of mach/gpio.h and asm/gpio.h to linux/gpio.h before we start consolidating the individual platform implementations of the gpio header files.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | Makefile.boot | g | 87B |  | Sascha Hauer | s.hauer@pengutronix.de | 1318839160 |  | ARM: 7022/1: allow to detect conflicting zreladdrs  Boards used to specify zreladdr in their Makefile.boot with zreladdr-y := x, so conflicting zreladdrs were silently overwritten. This patch changes this to zreladdr-y += x, so that we end up with multiple words in zreladdr in such a case. We can detect this later and complain if necessary.  Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
