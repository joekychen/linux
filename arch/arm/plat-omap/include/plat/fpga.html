<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › plat-omap › include › plat › fpga.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>fpga.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * arch/arm/plat-omap/include/mach/fpga.h</span>
<span class="cm"> *</span>
<span class="cm"> * Interrupt handler for OMAP-1510 FPGA</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2001 RidgeRun, Inc.</span>
<span class="cm"> * Author: Greg Lonnon &lt;glonnon@ridgerun.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2002 MontaVista Software, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Separated FPGA interrupts from innovator1510.c and cleaned up for 2.6</span>
<span class="cm"> * Copyright (C) 2004 Nokia Corporation by Tony Lindrgen &lt;tony@atomide.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ASM_ARCH_OMAP_FPGA_H</span>
<span class="cp">#define __ASM_ARCH_OMAP_FPGA_H</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap1510_fpga_init_irq</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#define fpga_read(reg)			__raw_readb(reg)</span>
<span class="cp">#define fpga_write(val, reg)		__raw_writeb(val, reg)</span>

<span class="cm">/*</span>
<span class="cm"> * ---------------------------------------------------------------------------</span>
<span class="cm"> *  H2/P2 Debug board FPGA</span>
<span class="cm"> * ---------------------------------------------------------------------------</span>
<span class="cm"> */</span>
<span class="cm">/* maps in the FPGA registers and the ETHR registers */</span>
<span class="cp">#define H2P2_DBG_FPGA_BASE		0xE8000000		</span><span class="cm">/* VA */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_SIZE		SZ_4K			</span><span class="cm">/* SIZE */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_START		0x04000000		</span><span class="cm">/* PA */</span><span class="cp"></span>

<span class="cp">#define H2P2_DBG_FPGA_ETHR_START	(H2P2_DBG_FPGA_START + 0x300)</span>
<span class="cp">#define H2P2_DBG_FPGA_FPGA_REV		IOMEM(H2P2_DBG_FPGA_BASE + 0x10)	</span><span class="cm">/* FPGA Revision */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_BOARD_REV		IOMEM(H2P2_DBG_FPGA_BASE + 0x12)	</span><span class="cm">/* Board Revision */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_GPIO		IOMEM(H2P2_DBG_FPGA_BASE + 0x14)	</span><span class="cm">/* GPIO outputs */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_LEDS		IOMEM(H2P2_DBG_FPGA_BASE + 0x16)	</span><span class="cm">/* LEDs outputs */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_MISC_INPUTS	IOMEM(H2P2_DBG_FPGA_BASE + 0x18)	</span><span class="cm">/* Misc inputs */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_LAN_STATUS	IOMEM(H2P2_DBG_FPGA_BASE + 0x1A)	</span><span class="cm">/* LAN Status line */</span><span class="cp"></span>
<span class="cp">#define H2P2_DBG_FPGA_LAN_RESET		IOMEM(H2P2_DBG_FPGA_BASE + 0x1C)	</span><span class="cm">/* LAN Reset line */</span><span class="cp"></span>

<span class="cm">/* NOTE:  most boards don&#39;t have a static mapping for the FPGA ... */</span>
<span class="k">struct</span> <span class="n">h2p2_dbg_fpga</span> <span class="p">{</span>
	<span class="cm">/* offset 0x00 */</span>
	<span class="n">u16</span>		<span class="n">smc91x</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="cm">/* offset 0x10 */</span>
	<span class="n">u16</span>		<span class="n">fpga_rev</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">board_rev</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">gpio_outputs</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">leds</span><span class="p">;</span>
	<span class="cm">/* offset 0x18 */</span>
	<span class="n">u16</span>		<span class="n">misc_inputs</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">lan_status</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">lan_reset</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">reserved0</span><span class="p">;</span>
	<span class="cm">/* offset 0x20 */</span>
	<span class="n">u16</span>		<span class="n">ps2_data</span><span class="p">;</span>
	<span class="n">u16</span>		<span class="n">ps2_ctrl</span><span class="p">;</span>
	<span class="cm">/* plus also 4 rs232 ports ... */</span>
<span class="p">};</span>

<span class="cm">/* LEDs definition on debug board (16 LEDs, all physically green) */</span>
<span class="cp">#define H2P2_DBG_FPGA_LED_GREEN		(1 &lt;&lt; 15)</span>
<span class="cp">#define H2P2_DBG_FPGA_LED_AMBER		(1 &lt;&lt; 14)</span>
<span class="cp">#define H2P2_DBG_FPGA_LED_RED		(1 &lt;&lt; 13)</span>
<span class="cp">#define H2P2_DBG_FPGA_LED_BLUE		(1 &lt;&lt; 12)</span>
<span class="cm">/*  cpu0 load-meter LEDs */</span>
<span class="cp">#define H2P2_DBG_FPGA_LOAD_METER	(1 &lt;&lt; 0)	</span><span class="c1">// A bit of fun on our board ...</span>
<span class="cp">#define H2P2_DBG_FPGA_LOAD_METER_SIZE	11</span>
<span class="cp">#define H2P2_DBG_FPGA_LOAD_METER_MASK	((1 &lt;&lt; H2P2_DBG_FPGA_LOAD_METER_SIZE) - 1)</span>

<span class="cp">#define H2P2_DBG_FPGA_P2_LED_TIMER		(1 &lt;&lt; 0)</span>
<span class="cp">#define H2P2_DBG_FPGA_P2_LED_IDLE		(1 &lt;&lt; 1)</span>

<span class="cm">/*</span>
<span class="cm"> * ---------------------------------------------------------------------------</span>
<span class="cm"> *  OMAP-1510 FPGA</span>
<span class="cm"> * ---------------------------------------------------------------------------</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP1510_FPGA_BASE		0xE8000000		</span><span class="cm">/* VA */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_SIZE		SZ_4K</span>
<span class="cp">#define OMAP1510_FPGA_START		0x08000000		</span><span class="cm">/* PA */</span><span class="cp"></span>

<span class="cm">/* Revision */</span>
<span class="cp">#define OMAP1510_FPGA_REV_LOW			IOMEM(OMAP1510_FPGA_BASE + 0x0)</span>
<span class="cp">#define OMAP1510_FPGA_REV_HIGH			IOMEM(OMAP1510_FPGA_BASE + 0x1)</span>

<span class="cp">#define OMAP1510_FPGA_LCD_PANEL_CONTROL		IOMEM(OMAP1510_FPGA_BASE + 0x2)</span>
<span class="cp">#define OMAP1510_FPGA_LED_DIGIT			IOMEM(OMAP1510_FPGA_BASE + 0x3)</span>
<span class="cp">#define INNOVATOR_FPGA_HID_SPI			IOMEM(OMAP1510_FPGA_BASE + 0x4)</span>
<span class="cp">#define OMAP1510_FPGA_POWER			IOMEM(OMAP1510_FPGA_BASE + 0x5)</span>

<span class="cm">/* Interrupt status */</span>
<span class="cp">#define OMAP1510_FPGA_ISR_LO			IOMEM(OMAP1510_FPGA_BASE + 0x6)</span>
<span class="cp">#define OMAP1510_FPGA_ISR_HI			IOMEM(OMAP1510_FPGA_BASE + 0x7)</span>

<span class="cm">/* Interrupt mask */</span>
<span class="cp">#define OMAP1510_FPGA_IMR_LO			IOMEM(OMAP1510_FPGA_BASE + 0x8)</span>
<span class="cp">#define OMAP1510_FPGA_IMR_HI			IOMEM(OMAP1510_FPGA_BASE + 0x9)</span>

<span class="cm">/* Reset registers */</span>
<span class="cp">#define OMAP1510_FPGA_HOST_RESET		IOMEM(OMAP1510_FPGA_BASE + 0xa)</span>
<span class="cp">#define OMAP1510_FPGA_RST			IOMEM(OMAP1510_FPGA_BASE + 0xb)</span>

<span class="cp">#define OMAP1510_FPGA_AUDIO			IOMEM(OMAP1510_FPGA_BASE + 0xc)</span>
<span class="cp">#define OMAP1510_FPGA_DIP			IOMEM(OMAP1510_FPGA_BASE + 0xe)</span>
<span class="cp">#define OMAP1510_FPGA_FPGA_IO			IOMEM(OMAP1510_FPGA_BASE + 0xf)</span>
<span class="cp">#define OMAP1510_FPGA_UART1			IOMEM(OMAP1510_FPGA_BASE + 0x14)</span>
<span class="cp">#define OMAP1510_FPGA_UART2			IOMEM(OMAP1510_FPGA_BASE + 0x15)</span>
<span class="cp">#define OMAP1510_FPGA_OMAP1510_STATUS		IOMEM(OMAP1510_FPGA_BASE + 0x16)</span>
<span class="cp">#define OMAP1510_FPGA_BOARD_REV			IOMEM(OMAP1510_FPGA_BASE + 0x18)</span>
<span class="cp">#define OMAP1510P1_PPT_DATA			IOMEM(OMAP1510_FPGA_BASE + 0x100)</span>
<span class="cp">#define OMAP1510P1_PPT_STATUS			IOMEM(OMAP1510_FPGA_BASE + 0x101)</span>
<span class="cp">#define OMAP1510P1_PPT_CONTROL			IOMEM(OMAP1510_FPGA_BASE + 0x102)</span>

<span class="cp">#define OMAP1510_FPGA_TOUCHSCREEN		IOMEM(OMAP1510_FPGA_BASE + 0x204)</span>

<span class="cp">#define INNOVATOR_FPGA_INFO			IOMEM(OMAP1510_FPGA_BASE + 0x205)</span>
<span class="cp">#define INNOVATOR_FPGA_LCD_BRIGHT_LO		IOMEM(OMAP1510_FPGA_BASE + 0x206)</span>
<span class="cp">#define INNOVATOR_FPGA_LCD_BRIGHT_HI		IOMEM(OMAP1510_FPGA_BASE + 0x207)</span>
<span class="cp">#define INNOVATOR_FPGA_LED_GRN_LO		IOMEM(OMAP1510_FPGA_BASE + 0x208)</span>
<span class="cp">#define INNOVATOR_FPGA_LED_GRN_HI		IOMEM(OMAP1510_FPGA_BASE + 0x209)</span>
<span class="cp">#define INNOVATOR_FPGA_LED_RED_LO		IOMEM(OMAP1510_FPGA_BASE + 0x20a)</span>
<span class="cp">#define INNOVATOR_FPGA_LED_RED_HI		IOMEM(OMAP1510_FPGA_BASE + 0x20b)</span>
<span class="cp">#define INNOVATOR_FPGA_CAM_USB_CONTROL		IOMEM(OMAP1510_FPGA_BASE + 0x20c)</span>
<span class="cp">#define INNOVATOR_FPGA_EXP_CONTROL		IOMEM(OMAP1510_FPGA_BASE + 0x20d)</span>
<span class="cp">#define INNOVATOR_FPGA_ISR2			IOMEM(OMAP1510_FPGA_BASE + 0x20e)</span>
<span class="cp">#define INNOVATOR_FPGA_IMR2			IOMEM(OMAP1510_FPGA_BASE + 0x210)</span>

<span class="cp">#define OMAP1510_FPGA_ETHR_START		(OMAP1510_FPGA_START + 0x300)</span>

<span class="cm">/*</span>
<span class="cm"> * Power up Giga UART driver, turn on HID clock.</span>
<span class="cm"> * Turn off BT power, since we&#39;re not using it and it</span>
<span class="cm"> * draws power.</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP1510_FPGA_RESET_VALUE		0x42</span>

<span class="cp">#define OMAP1510_FPGA_PCR_IF_PD0		(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_COM2_EN		(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_COM1_EN		(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_EXP_PD0		(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_EXP_PD1		(1 &lt;&lt; 3)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_48MHZ_CLK		(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_4MHZ_CLK		(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP1510_FPGA_PCR_RSRVD_BIT0		(1 &lt;&lt; 0)</span>

<span class="cm">/*</span>
<span class="cm"> * Innovator/OMAP1510 FPGA HID register bit definitions</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP1510_FPGA_HID_SCLK	(1&lt;&lt;0)	</span><span class="cm">/* output */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_HID_MOSI	(1&lt;&lt;1)	</span><span class="cm">/* output */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_HID_nSS	(1&lt;&lt;2)	</span><span class="cm">/* output 0/1 chip idle/select */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_HID_nHSUS	(1&lt;&lt;3)	</span><span class="cm">/* output 0/1 host active/suspended */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_HID_MISO	(1&lt;&lt;4)	</span><span class="cm">/* input */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_HID_ATN	(1&lt;&lt;5)	</span><span class="cm">/* input  0/1 chip idle/ATN */</span><span class="cp"></span>
<span class="cp">#define OMAP1510_FPGA_HID_rsrvd	(1&lt;&lt;6)</span>
<span class="cp">#define OMAP1510_FPGA_HID_RESETn (1&lt;&lt;7)	</span><span class="cm">/* output - 0/1 USAR reset/run */</span><span class="cp"></span>

<span class="cm">/* The FPGA IRQ is cascaded through GPIO_13 */</span>
<span class="cp">#define OMAP1510_INT_FPGA		(IH_GPIO_BASE + 13)</span>

<span class="cm">/* IRQ Numbers for interrupts muxed through the FPGA */</span>
<span class="cp">#define OMAP1510_INT_FPGA_ATN		(OMAP_FPGA_IRQ_BASE + 0)</span>
<span class="cp">#define OMAP1510_INT_FPGA_ACK		(OMAP_FPGA_IRQ_BASE + 1)</span>
<span class="cp">#define OMAP1510_INT_FPGA2		(OMAP_FPGA_IRQ_BASE + 2)</span>
<span class="cp">#define OMAP1510_INT_FPGA3		(OMAP_FPGA_IRQ_BASE + 3)</span>
<span class="cp">#define OMAP1510_INT_FPGA4		(OMAP_FPGA_IRQ_BASE + 4)</span>
<span class="cp">#define OMAP1510_INT_FPGA5		(OMAP_FPGA_IRQ_BASE + 5)</span>
<span class="cp">#define OMAP1510_INT_FPGA6		(OMAP_FPGA_IRQ_BASE + 6)</span>
<span class="cp">#define OMAP1510_INT_FPGA7		(OMAP_FPGA_IRQ_BASE + 7)</span>
<span class="cp">#define OMAP1510_INT_FPGA8		(OMAP_FPGA_IRQ_BASE + 8)</span>
<span class="cp">#define OMAP1510_INT_FPGA9		(OMAP_FPGA_IRQ_BASE + 9)</span>
<span class="cp">#define OMAP1510_INT_FPGA10		(OMAP_FPGA_IRQ_BASE + 10)</span>
<span class="cp">#define OMAP1510_INT_FPGA11		(OMAP_FPGA_IRQ_BASE + 11)</span>
<span class="cp">#define OMAP1510_INT_FPGA12		(OMAP_FPGA_IRQ_BASE + 12)</span>
<span class="cp">#define OMAP1510_INT_ETHER		(OMAP_FPGA_IRQ_BASE + 13)</span>
<span class="cp">#define OMAP1510_INT_FPGAUART1		(OMAP_FPGA_IRQ_BASE + 14)</span>
<span class="cp">#define OMAP1510_INT_FPGAUART2		(OMAP_FPGA_IRQ_BASE + 15)</span>
<span class="cp">#define OMAP1510_INT_FPGA_TS		(OMAP_FPGA_IRQ_BASE + 16)</span>
<span class="cp">#define OMAP1510_INT_FPGA17		(OMAP_FPGA_IRQ_BASE + 17)</span>
<span class="cp">#define OMAP1510_INT_FPGA_CAM		(OMAP_FPGA_IRQ_BASE + 18)</span>
<span class="cp">#define OMAP1510_INT_FPGA_RTC_A		(OMAP_FPGA_IRQ_BASE + 19)</span>
<span class="cp">#define OMAP1510_INT_FPGA_RTC_B		(OMAP_FPGA_IRQ_BASE + 20)</span>
<span class="cp">#define OMAP1510_INT_FPGA_CD		(OMAP_FPGA_IRQ_BASE + 21)</span>
<span class="cp">#define OMAP1510_INT_FPGA22		(OMAP_FPGA_IRQ_BASE + 22)</span>
<span class="cp">#define OMAP1510_INT_FPGA23		(OMAP_FPGA_IRQ_BASE + 23)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
