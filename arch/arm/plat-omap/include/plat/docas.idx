f | mmc.h | s | 5.5K | 151 | Tony Lindgren | tony@atomide.com | 1338972140 |  | ARM: OMAP: Fix MMC_OMAP build when only MMC_OMAP_HS is selected  If CONFIG_MMC_OMAP is not set and CONFIG_MMC_OMAP_HS is set, we can get error: redefinition of `omap242x_init_mmc' error.  Fix it by removing MMC_OMAP_HS from MMC_OMAP ifdefs as they do not depend on each other.  While at it, also prettify the formatting a bit.  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | hardware.h | s | 10K | 263 | Rob Herring | rob.herring@calxeda.com | 1331691729 |  | ARM: create a common IOMEM definition  Several platforms create IOMEM defines for casting to 'void __iomem *', and other platforms are incorrectly using __io() macro for the same purpose. This creates a common definition and removes all the platform specific versions. Rather than try to make linux/io.h and asm/io.h assembly safe, the assembly version of IOMEM is moved into asm/assembler.h.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Sekhar Nori <nsekhar@ti.com> Cc: Kevin Hilman <khilman@ti.com> Acked-by: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Haojian Zhuang <haojian.zhuang@marvell.com> Acked-by: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com> Acked-by: Paul Walmsley <paul@pwsan.com> Acked-by: Viresh Kumar <viresh.kumar@st.com> Cc: Rajeev Kumar <rajeev-dlh.kumar@st.com> Cc: Colin Cross <ccross@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Stephen Warren <swarren@nvidia.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Arnd Bergmann <arnd@arndb.de>
f | iovmm.h | s | 2.7K | 74 | Ohad Ben-Cohen | ohad@wizery.com | 1323092859 |  | iommu/omap: eliminate the public omap_find_iommu_device() method  Eliminate the public omap_find_iommu_device() method, and don't expect clients to provide the omap_iommu handle anymore.  Instead, OMAP's iommu driver now utilizes dev_archdata's private iommu extension to be able to access the required iommu information.  This way OMAP IOMMU users are now able to use the generic IOMMU API without having to call any omap-specific binding method.  Update omap3isp appropriately.  Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Acked-by: Tony Lindgren <tony@atomide.com> Cc: Hiroshi Doyu <hdoyu@nvidia.com>
f | omap7xx.h | s | 4.0K | 93 | Cory Maccarrone | darkstar6262@gmail.com | 1262975345 |  | omap1: Add 7xx clocks and pin muxes for SPI  Commit 35c9049b27040d09461bc90928ad770be7ddf661 added drivers/spi/omap_spi_100k.c.  This patch add the related clocks and pin muxing entries to make the driver work on omap7xx platforms.  Signed-off-by: Cory Maccarrone <darkstar6262@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | cpu.h | s | 13K | 434 | Tony Lindgren | tony@atomide.com | 1338802879 |  | Merge branch 'for_3.5/cleanup/am3xxx-cpu-is-leftovers' of git://git.kernel.org/pub/scm/linux/kernel/git/khilman/linux-omap-pm into fixes
f | sdrc.h | s | 5.7K | 140 | Tony Lindgren | tony@atomide.com | 1331091278 |  | ARM: OMAP: Remove remaining includes for mach/io.h  These are no longer needed with the recent iomap.h changes.  Reported-by: Rob Herring <robherring2@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com> Cc: Tomi Valkeinen <tomi.valkeinen@ti.com> Cc: Florian Tobias Schandinat <FlorianSchandinat@gmx.de>
f | onenand.h | s | 1.2K | 42 | Artem Bityutskiy | Artem.Bityutskiy@nokia.com | 1301067680 |  | Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6 into for-linus-1  * 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6: (9356 commits)   [media] rc: update for bitop name changes   fs: simplify iget & friends   fs: pull inode->i_lock up out of writeback_single_inode   fs: rename inode_lock to inode_hash_lock   fs: move i_wb_list out from under inode_lock   fs: move i_sb_list out from under inode_lock   fs: remove inode_lock from iput_final and prune_icache   fs: Lock the inode LRU list separately   fs: factor inode disposal   fs: protect inode->i_state with inode->i_lock   lib, arch: add filter argument to show_mem and fix private implementations   SLUB: Write to per cpu data when allocating it   slub: Fix debugobjects with lockless fastpath   autofs4: Do not potentially dereference NULL pointer returned by fget() in autofs_dev_ioctl_setpipefd()   autofs4 - remove autofs4_lock   autofs4 - fix d_manage() return on rcu-walk   autofs4 - fix autofs4_expire_indirect() traversal   autofs4 - fix dentry leak in autofs4_expire_direct()   autofs4 - reinstate last used update on access   vfs - check non-mountpoint dentry might block in __follow_mount_rcu()   ...  NOTE!  This merge commit was created to fix compilation error. The block tree was merged upstream and removed the 'elv_queue_empty()' function which the new 'mtdswap' driver is using. So a simple merge of the mtd tree with upstream does not compile. And the mtd tree has already be published, so re-basing it is not an option.  To fix this unfortunate situation, I had to merge upstream into the mtd-2.6.git tree without committing, put the fixup patch on top of this, and then commit this. The result is that we do not have commits which do not compile.  In other words, this merge commit "merges" 3 things: the MTD tree, the upstream tree, and the fixup patch.
f | omap44xx.h | s | 2.1K | 56 | Santosh Shilimkar | santosh.shilimkar@ti.com | 1323372539 |  | ARM: OMAP4: PM: Add SAR RAM support  This patch adds SAR RAM support on OMAP4430. SAR RAM used to save and restore the HW context in low power modes.  Signed-off-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Acked-by: Jean Pihet <j-pihet@ti.com> Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Vishwanath BS <vishwanath.bs@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | voltage.h | s | 578B | 16 | Tero Kristo | t-kristo@ti.com | 1316113762 |  | omap: voltage: add a stub header file for external/regulator use  Needed as some of the voltage layer functionality is accessed from the SMPS regulator driver.  Signed-off-by: Tero Kristo <t-kristo@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | omap16xx.h | s | 8.5K | 178 | Tony Lindgren | tony@atomide.com | 1266252533 |  | omap: Clean the serial port defines  This way we don't have conflicts with the defines with compiling in multiple omaps. Set the addresses for uarts in struct omap_globals for the early serial init code.  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | dma-44xx.h | s | 5.2K | 144 | Santosh Shilimkar | santosh.shilimkar@ti.com | 1266962572 |  | omap4: Add auto-generated irq and dma headers  These files are generated along with the HWMOD and will eventually be in the existing header files as soon as all drivers will be migrate to omap_hwmod / omap_device.  The dma-44xx.h and irqs-44xx.h file should be in 'arch/arm/mach-omap2/include/mach/', but omap1 and omap2plus common devices still share these defines and hence currently placed in plat-omap/include/plat/ directory.  Signed-off-by: Benoit Cousson <b-cousson@ti.com> Signed-off-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Reviewed-by: Kevin Hilman <khilman@deeprootsystems.com> Reviewed-by: Paul Walmsley <paul@pwsan.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | l3_2xxx.h | s | 630B | 18 | Senthilvadivu Guruswamy | svadivu@ti.com | 1298445546 |  | OMAP2420: hwmod data: add DSS DISPC RFBI VENC  Hwmod needs database of all IPs in a system. This patch generates the hwmod database for OMAP2420 Display Sub System,. Since DSS is also considered as an IP as DISPC, RFBI, name it as dss_core.  Acked-by: Benoit Cousson <b-cousson@ti.com> Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> Signed-off-by: Sumit Semwal <sumit.semwal@ti.com> Signed-off-by: Senthilvadivu Guruswamy <svadivu@ti.com> Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
f | mailbox.h | s | 2.6K | 87 | Kanigeri, Hari | h-kanigeri2@ti.com | 1291290196 |  | OMAP: mailbox: add notification support for multiple readers  In the current mailbox driver, the mailbox internal pointer for callback can be directly manipulated by the Users, so a second User can easily corrupt the first user's callback pointer. The initial effort to correct this issue can be referred here: https://patchwork.kernel.org/patch/107520/  Along with fixing the above stated issue, this patch  adds the flexibility option to register notifications from multiple readers to the events received on a mailbox instance. The discussion regarding this can be referred here. http://www.mail-archive.com/linux-omap@vger.kernel.org/msg30671.html  Signed-off-by: Hari Kanigeri <h-kanigeri2@ti.com> Signed-off-by: Fernando Guzman Lugo <x0095840@ti.com> Acked-by: Hiroshi Doyu <hiroshi.doyu@nokia.com>
f | omap730.h | s | 3.8K | 89 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | omap850.h | s | 3.8K | 89 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | irda.h | s | 813B | 29 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | omap4-keypad.h | s | 181B | 5 | Felipe Balbi | balbi@ti.com | 1331963386 |  | Input: omap4-keypad - move platform_data to <linux/platform_data>  This patch allows us to drop the OMAP dependency from the OMAP4 keypad driver.  Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Sourav Poddar <sourav.poddar@ti.com> Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | mcspi.h | s | 392B | 17 | Jarkko Nikula | jarkko.nikula@bitmer.com | 1330108438 |  | ARM: OMAP: McSPI: Remove unused flag from struct omap2_mcspi_device_config  Flag single_channel in struct omap2_mcspi_device_config is not used by drivers/spi/spi-omap2-mcspi.c so we may remove it from include/plat/mcspi.h and affected board files.  Signed-off-by: Jarkko Nikula <jarkko.nikula@bitmer.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | iommu2.h | s | 2.6K | 85 | Ohad Ben-Cohen | ohad@wizery.com | 1314351961 |  | omap: iommu: omapify 'struct iommu' and exposed API  Prepend 'omap_' to OMAP's 'struct iommu' and exposed API, to prevent namespace pollution and generally to improve readability of the code that still uses the driver directly.  Update the users as needed as well.  Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Acked-by: Hiroshi DOYU <Hiroshi.DOYU@nokia.com> Acked-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>
f | omap24xx.h | s | 3.1K | 75 | Paul Walmsley | paul@pwsan.com | 1286559617 |  | OMAP2420: CTRL: fix OMAP242X_CTRL_REGADDR macro  Conform the OMAP2420_CTRL_BASE macro name to the standard of the rest of the OMAP*_CTRL_BASE macro names.  This fixes a bug in the OMAP2420 SCM code that prevented OMAP242X_CTRL_REGADDR from working.  Signed-off-by: Paul Walmsley <paul@pwsan.com>
f | usb.h | s | 10K | 315 | Rob Herring | rob.herring@calxeda.com | 1331691729 |  | ARM: create a common IOMEM definition  Several platforms create IOMEM defines for casting to 'void __iomem *', and other platforms are incorrectly using __io() macro for the same purpose. This creates a common definition and removes all the platform specific versions. Rather than try to make linux/io.h and asm/io.h assembly safe, the assembly version of IOMEM is moved into asm/assembler.h.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Sekhar Nori <nsekhar@ti.com> Cc: Kevin Hilman <khilman@ti.com> Acked-by: H Hartley Sweeten <hsweeten@visionengravers.com> Cc: Ryan Mallon <rmallon@gmail.com> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Haojian Zhuang <haojian.zhuang@marvell.com> Acked-by: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Shawn Guo <shawn.guo@linaro.org> Acked-by: Tony Lindgren <tony@atomide.com> Acked-by: Paul Walmsley <paul@pwsan.com> Acked-by: Viresh Kumar <viresh.kumar@st.com> Cc: Rajeev Kumar <rajeev-dlh.kumar@st.com> Cc: Colin Cross <ccross@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Stephen Warren <swarren@nvidia.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Arnd Bergmann <arnd@arndb.de>
f | serial.h | s | 3.4K | 100 | NeilBrown | neilb@suse.de | 1329851591 |  | ARM: OMAP2+: remove some orphan function declarations.  commit 2fd149645eb (ARM: OMAP2+: UART: Remove omap_uart_can_sleep and add pm_qos) removed omap_uart_can_sleep and omap3_can_sleep, but not their declarations.  So remove those now.  Signed-off-by: NeilBrown <neilb@suse.de> Reviewed-by: Shubhrajyoti D <shubhrajyoti@ti.com> [khilman@ti.com: minor changelog edits] Signed-off-by: Kevin Hilman <khilman@ti.com>
f | omap-pm.h | s | 13K | 321 | Tomi Valkeinen | tomi.valkeinen@ti.com | 1320453667 |  | ARM: OMAP: change get_context_loss_count ret value to int  get_context_loss_count functions return context loss count as u32, and zero means an error. However, zero is also returned when context has never been lost and could also be returned when the context loss count has wrapped and goes to zero.  Change the functions to return an int, with negative value meaning an error.  OMAP HSMMC code uses omap_pm_get_dev_context_loss_count(), but as the hsmmc code handles the returned value as an int, with negative value meaning an error, this patch actually fixes hsmmc code also.  Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com> Acked-by: Kevin Hilman <khilman@ti.com> Acked-by: Paul Walmsley <paul@pwsan.com> [tony@atomide.com: updated to fix a warning with recent dmtimer changes] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | fpga.h | s | 7.9K | 169 | Felipe Balbi | balbi@ti.com | 1296175181 |  | arm: omap1: fix compile warnings  Fix the following compile warnings: arch/arm/mach-omap1/board-innovator.c:165:3: warning: initialization makes integer from pointer without a cast arch/arm/mach-omap1/board-perseus2.c:305:3: warning: initialization makes integer from pointer without a cast arch/arm/mach-omap1/board-fsample.c:338:3: warning: initialization makes integer from pointer without a cast  Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | omap_hwmod.h | s | 22K | 580 | Paul Walmsley | paul@pwsan.com | 1334864034 |  | ARM: OMAP4: hwmod data: add some interconnect-related IP blocks  Add the SL2 interface IP block and interconnect data.  The SL2 is related to the IVA-HD subsystem.  Add IP block and interconnect data for the C2C ("Chip-to-chip") interconnect.  This can provide a direct system interconnect link to other devices stacked on the OMAP package.  Add the ELM IP block and interconnect data.  The ELM can be used to locate errors in NAND flash connected to the GPMC.   Signed-off-by: Paul Walmsley <paul@pwsan.com> Signed-off-by: Benoît Cousson <b-cousson@ti.com>
f | nand.h | s | 1.1K | 39 | Grazvydas Ignotas | notasas@gmail.com | 1309335097 |  | omap: cleanup NAND platform data  omap_nand_platform_data fields 'options', 'gpio_irq', 'nand_setup' and 'dma_channel' are never referenced by the NAND driver, yet various board files are initializing those fields. This is both incorrect and confusing, so remove them. This allows to get rid of a global variable in gpmc-nand.c.  This also corrects an issue where some boards are trying to pass NAND 16bit flag through .options, but the driver is using .devsize instead and ignoring .options.  Finally, .dev_ready is treated as a flag by the driver, so make it bool instead of a function pointer.  Signed-off-by: Grazvydas Ignotas <notasas@gmail.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | menelaus.h | s | 1.4K | 40 | Tony Lindgren | tony@atomide.com | 1266254821 |  | omap2: Convert ARCH_OMAP24XX to ARCH_OMAP2  Convert ARCH_OMAP24XX to ARCH_OMAP2  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | led.h | s | 543B | 21 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board.h | s | 3.9K | 141 | Paul Walmsley | paul@pwsan.com | 1334320467 |  | ARM: OMAP1: OHCI: use platform_data fn ptr to enable OCPI bus  The OMAP1 OHCI driver needs to enable the OCPI IP block before it can work.  Previously, the driver was simply calling a symbol defined in the OMAP platform code, but this is incorrect: drivers should be fully decoupled from platform and architecture code.  So instead, modify the driver to call through a platform_data function pointer instead.  We skip any DT aspect, since OMAP1 is not scheduled to be converted to DT in the near future.  This resolves the following sparse warning:  It also gets rid of a cpu_is_omap16xx() call in a driver.  In the long term, it probably makes sense to move the OCPI bus code to somewhere under drivers/.  This should avoid the whole platform_data/DT issue with this function.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: Felipe Balbi <balbi@ti.com> Cc: Anand Gadiyar <gadiyar@ti.com> Acked-by: Felipe Balbi <balbi@ti.com>
f | hdq1w.h | s | 1.1K | 31 | Paul Walmsley | paul@pwsan.com | 1336519536 |  | ARM: OMAP2+: HDQ1W: add custom reset function  Implement a custom reset function for the HDQ1W IP block.  This is because the HDQ1W IP block, like I2C, has an internal clock gating bit that needs to be toggled after setting the SOFTRESET bit to allow the reset to propagate.  Signed-off-by: Paul Walmsley <paul@pwsan.com> Cc: NeilBrown <neilb@suse.de> Cc: Avinash.H.M <avinashhm@ti.com> Tested-by: NeilBrown <neilb@suse.de>
f | lcd_mipid.h | s | 547B | 22 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | gpmc-smc91x.h | s | 1020B | 33 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | dma.h | s | 18K | 484 | Linus Torvalds | torvalds@linux-foundation.org | 1338060709 |  | 
f | clock.h | s | 11K | 285 | Kevin Hilman | khilman@ti.com | 1334450947 |  | ARM: OMAP: clock: cleanup CPUfreq leftovers, fix build errors  Now that we have OPP layer, and OMAP CPUfreq driver is using it, we no longer need/use the clock framework code for filling up CPUfreq tables.  Remove it.  Removing this code also eliminates build errors when CPU_FREQ_TABLE support is not enabled.  Thanks to Russell King for pointing out the parts I missed under plat-omap in the original version and also pointing out the build errors when CPUFREQ_TABLE support was not enabled.  Cc: Russell King <rmk+kernel@arm.linux.org.uk> Signed-off-by: Kevin Hilman <khilman@ti.com> Acked-by: Paul Walmsley <paul@pwsan.com> Acked-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Olof Johansson <olof@lixom.net>
f | board-ams-delta.h | s | 2.8K | 63 | Janusz Krzysztofik | jkrzyszt@tis.icnet.pl | 1330975534 |  | ASoC: OMAP: ams-delta: drop .set_bias_level callback  This functionality has already been implemented in the cx20442 codec driver (commit f75a8ff67d161b5166a2c2360bb2ffaefd5eb853, "ASoC: cx20442: add bias control over a platform provided regulator"), no need to keep it here duplicated.  Once done, remove the no longer used AMS_DELTA_LATCH2_MODEM_NRESET symbol from the board header file and a call to the regulator_toggle() helper function from the old API wrapper found in the board file.  While being at it, simplify the way the modem .pm callback handles the regulator and drop that helper function and its related consumer setup completely.  Depends on patches 1/3 and 2/3 for clean apply and keep things working.  Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Tony Lindgren <tony@atomide.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | clkdev_omap.h | s | 1.1K | 40 | Kevin Hilman | khilman@ti.com | 1336456511 |  | ARM: OMAP: clock: convert AM3517/3505 detection/flags to AM35xx  To improve the clarity of the code, replace the CK_3517 flag used in the clock data with CK_AM35XX.  The CK_3505 flag can also be removed, since it is now unused.  Acked-by: Vaibhav Hiremath <hvaibhav@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com> Signed-off-by: Paul Walmsley <paul@pwsan.com>
f | omap-secure.h | s | 450B | 16 | Santosh Shilimkar | santosh.shilimkar@ti.com | 1329248562 |  | ARM: OMAP4: Move the barrier memboclk_steal() as part of reserve callback  arm_memblock_steal() is not suppose to be used outside ->reserve callback. OMAP barrier errata code was using it outside reserve callback and hence it was broken.  Move the allocation as part of ->reserve callback to fix the it.  Signed-off-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | irqs-44xx.h | s | 7.6K | 139 | Santosh Shilimkar | santosh.shilimkar@ti.com | 1266962572 |  | omap4: Add auto-generated irq and dma headers  These files are generated along with the HWMOD and will eventually be in the existing header files as soon as all drivers will be migrate to omap_hwmod / omap_device.  The dma-44xx.h and irqs-44xx.h file should be in 'arch/arm/mach-omap2/include/mach/', but omap1 and omap2plus common devices still share these defines and hence currently placed in plat-omap/include/plat/ directory.  Signed-off-by: Benoit Cousson <b-cousson@ti.com> Signed-off-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Reviewed-by: Kevin Hilman <khilman@deeprootsystems.com> Reviewed-by: Paul Walmsley <paul@pwsan.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | l4_2xxx.h | s | 831B | 22 | Senthilvadivu Guruswamy | svadivu@ti.com | 1298445546 |  | OMAP2420: hwmod data: add DSS DISPC RFBI VENC  Hwmod needs database of all IPs in a system. This patch generates the hwmod database for OMAP2420 Display Sub System,. Since DSS is also considered as an IP as DISPC, RFBI, name it as dss_core.  Acked-by: Benoit Cousson <b-cousson@ti.com> Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> Signed-off-by: Sumit Semwal <sumit.semwal@ti.com> Signed-off-by: Senthilvadivu Guruswamy <svadivu@ti.com> Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
f | omap1510.h | s | 1.9K | 42 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | dmtimer.h | s | 13K | 354 | Linus Torvalds | torvalds@linux-foundation.org | 1338060709 |  | 
f | omap-serial.h | s | 3.3K | 117 | Govindraj.R | govindraj.raja@ti.com | 1334786825 |  | OMAP2+: UART: Remove cpu checks for populating errata flags  Currently the errata is populated based on cpu checks this can be removed and replaced with module version check of uart ip block. MVR reg is provided within the uart reg map use the same to populate the errata and thus now errata population and handling can be managed within the driver itself.  Cc: Paul Walmsley <paul@pwsan.com> Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Felipe Balbi <balbi@ti.com> Signed-off-by: Govindraj.R <govindraj.raja@ti.com> Reviewed-by: Jon Hunter <jon-hunter@ti.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | flash.h | s | 401B | 13 | Janusz Krzysztofik | jkrzyszt@tis.icnet.pl | 1306847821 |  | OMAP: fix compilation error  Forward-declare platform_device structure in arch/arm/plat-omap/include/plat/flash.h, otherwise compilation may break with:  In file included from arch/arm/mach-omap1/flash.c:15: arch/arm/plat-omap/include/plat/flash.h:14: warning: 'struct platform_device' declared inside parameter list arch/arm/plat-omap/include/plat/flash.h:14: warning: its scope is only this definition or declaration, which is probably not what you want arch/arm/mach-omap1/flash.c:16: warning: 'struct platform_device' declared inside parameter list arch/arm/mach-omap1/flash.c:17: error: conflicting types for 'omap1_set_vpp' arch/arm/plat-omap/include/plat/flash.h:14: error: previous declaration of 'omap1_set_vpp' was here  Detected and corrected while building for Amstrad Delta, confirmed with omap1_defconfig.  Signed-off-by: Janusz Krzysztofik <jkrzyszt@tis.icnet.pl> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | vram.h | s | 1.5K | 36 | Tomi Valkeinen | tomi.valkeinen@ti.com | 1329982706 |  | OMAPDSS: Remove video SRAM support  OMAP SRAM can be used as video memory on OMAP1 and 2. However, there usually is very little SRAM available, thus limiting its use, and no board supported by the kernel currently uses it.  This patch removes the use of SRAM as video ram for the omapdss driver to simplify memory handling.  Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com> Acked-by: Tony Lindgren <tony@atomide.com>
f | tc.h | s | 2.9K | 74 | Tony Lindgren | tony@atomide.com | 1330108475 |  | ARM: OMAP: Remove plat/io.h by splitting it into mach/io.h and mach/hardware.h  This is needed to minimize io.h so the SoC specific io.h for ARMs can removed.  Note that minimal driver changes for DSS and RNG are needed to include cpu.h for SoC detection macros.  Cc: Tomi Valkeinen <tomi.valkeinen@ti.com> Cc: Matt Mackall <mpm@selenic.com> Cc: Herbert Xu <herbert@gondor.apana.org.au> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | vrfb.h | s | 2.3K | 61 | Senthilvadivu Guruswamy | svadivu@ti.com | 1287778866 |  | OMAP: DSS2: OMAPFB: Allow FB_OMAP2 to build without VRFB  FB_OMAP2 can work without VRFB, but currently does not build. Fix this.  Signed-off-by: Senthilvadivu Guruswamy <svadivu@ti.com> Signed-off-by: Tomi Valkeinen <tomi.valkeinen@nokia.com>
f | gpio-switch.h | s | 1.3K | 46 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-voiceblue.h | s | 552B | 15 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | uncompress.h | s | 5.0K | 160 | Aaro Koskinen | aaro.koskinen@nokia.com | 1330974517 |  | ARM: OMAP: add minimal support for Nokia RM-696  Add minimal support for Nokia RM-696 board.  Signed-off-by: Aaro Koskinen <aaro.koskinen@nokia.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | gpmc-smsc911x.h | s | 771B | 28 | Igor Grinberg | grinberg@compulab.co.il | 1304408338 |  | arm: omap: gpmc-smsc911x: minor style fixes  replace "printk(KERN_ERR" by "pr_err(" and fix needlessly multi-lined #ifdef  Signed-off-by: Igor Grinberg <grinberg@compulab.co.il> Acked-by: Nishanth Menon <nm@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | multi.h | s | 2.2K | 98 | Tony Lindgren | tony@atomide.com | 1296175180 |  | omap: Start using CONFIG_SOC_OMAP  We want to have just CONFIG_ARCH_OMAP2, 3 and 4. The rest are nowadays just subcategories of these.  Search and replace the following:  ARCH_OMAP2420		SOC_OMAP2420 ARCH_OMAP2430		SOC_OMAP2430 ARCH_OMAP3430		SOC_OMAP3430  No functional changes.  Signed-off-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Thomas Weber <weber@corscience.de> Acked-by: Sourav Poddar <sourav.poddar@ti.com>
f | dsp.h | s | 837B | 25 | Felipe Contreras | felipe.contreras@gmail.com | 1286305511 |  | omap: add dsp platform device  Otherwise tidspbridge cannot work.  It looks like this was dropped in the conversion to staging. I took the liberty of doing some cleaning up.  Signed-off-by: Felipe Contreras <felipe.contreras@gmail.com> Acked-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | irqs.h | s | 13K | 422 | Cousson, Benoit | b-cousson@ti.com | 1330472994 |  | ARM: OMAP: irqs: Fix NR_IRQS value to handle PRCM interrupts  The following commit: 2f31b51659c2d8315ea2888ba5b93076febe672b Author: Tero Kristo <t-kristo@ti.com> Date:   Fri Dec 16 14:37:00 2011 -0700      ARM: OMAP4: PRM: use PRCM interrupt handler  introduced the PRCM interrupt handler and thus the need for 64 more interrupts. Since SPARSE_IRQ is still not fully functional on OMAP, the NR_IRQS needs to be updated to avoid the failure that happen during irq_alloc_descs call inside the PRCM driver:  [    0.208221] PRCM: failed to allocate irq descs: -12  Later the mux framework is then unable to request an IRQ from the PRCM interrupt handler.  [    1.802795] mux: Failed to setup hwmod io irq -22  Fix that by adding 64 more interrupts for OMAP2PLUS config.  Signed-off-by: Benoit Cousson <b-cousson@ti.com> Cc: Tero Kristo <t-kristo@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | prcm.h | s | 1.2K | 31 | Russell King - ARM Linux | linux@arm.linux.org.uk | 1296175188 |  | ARM: OMAP: Allow platforms to hook reset cleanly  This adds a clean method to allow platforms to hook into the reset code if they require to.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | ti81xx.h | s | 877B | 22 | Hemant Pedanekar | hemantp@ti.com | 1323802004 |  | ARM: OMAP: TI81XX: Prepare for addition of TI814X support  This patch updates existing macros, functions used for TI816X, to enable addition of other SoCs belonging to TI81XX family (e.g., TI814X).  The approach taken is to use TI81XX/ti81xx for code/data going to be common across all TI81XX devices.  cpu_is_ti81xx() is introduced to handle code common across TI81XX devices.  In addition, ti8168_evm_map_io() is now replaced with ti81xx_map_io() and moved in mach-omap2/common.c as same will be used for TI814X and is not board specific.  Signed-off-by: Hemant Pedanekar <hemantp@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | param.h | s | 130B | 7 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | gpio.h | s | 6.8K | 206 | Tarun Kanti DebBarma | tarun.kanti@ti.com | 1336781320 |  | gpio/omap: remove cpu_is_omapxxxx() checks from *_runtime_resume()  Add register offsets for GPIO_IRQSTATUS_RAW_0, GPIO_IRQSTATUS_RAW_0 which are present on OMAP4+ processors. Now we can distinguish conditions applicable to OMAP4,5 and those specific to OMAP24xx and OMAP3xxx.  Cc: Kevin Hilman <khilman@ti.com> Cc: Tony Lindgren <tony@atomide.com> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com> Cc: Cousson, Benoit <b-cousson@ti.com> Cc: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Tarun Kanti DebBarma <tarun.kanti@ti.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Govindraj.R <govindraj.raja@ti.com> Signed-off-by: Kevin Hilman <khilman@ti.com>
f | iopgtable.h | s | 3.3K | 98 | Ohad Ben-Cohen | ohad@wizery.com | 1314351961 |  | omap: iommu: omapify 'struct iommu' and exposed API  Prepend 'omap_' to OMAP's 'struct iommu' and exposed API, to prevent namespace pollution and generally to improve readability of the code that still uses the driver directly.  Update the users as needed as well.  Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Acked-by: Hiroshi DOYU <Hiroshi.DOYU@nokia.com> Acked-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>
f | gpmc.h | s | 6.6K | 147 | Ivan Djelic | ivan.djelic@parrot.com | 1336969542 |  | ARM: OMAP3: gpmc: add BCH ecc api and modes  This patch adds a simple BCH ecc computation api, similar to the existing Hamming ecc api. It is intended to be used by the MTD layer. It implements the following features:  - support 4-bit and 8-bit ecc computation - do not protect user bytes in spare area, only data area is protected - ecc for an erased NAND page (0xFFs) is also a sequence of 0xFFs  This last feature is obtained by adding a constant polynomial to the hardware computed ecc. It allows to correct bitflips in blank pages and is extremely useful to support filesystems such as UBIFS, which expect erased pages to contain only 0xFFs.  This api has been tested on an OMAP3630 board.  Artem: The OMAP maintainer Tony Lindgren gave us his blessing for merging this patch via the MTD tree.  Signed-off-by: Ivan Djelic <ivan.djelic@parrot.com> Acked-by: Tony Lindgren <tony@atomide.com> Signed-off-by: Artem Bityutskiy <artem.bityutskiy@linux.intel.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | omap34xx.h | s | 4.3K | 88 | Afzal Mohammed | afzal@ti.com | 1323802003 |  | ARM: OMAP: am33xx: Update common OMAP machine specific sources  This patch updates the common machine specific source files for support for AM33XX/AM335x with cpu type, macros for identification of AM33XX/AM335X device.  Signed-off-by: Afzal Mohammed <afzal@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> [tony@atomide.com: updated for map_io and common.h changes, dropped CK_AM33XX] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | mcbsp.h | s | 1.8K | 55 | Peter Ujfalusi | peter.ujfalusi@ti.com | 1331559263 |  | ARM/ASoC: OMAP McBSP: Move remainig defines from arch to ASoC header  Clock signal muxing, and functional clock related defines are only needed in ASoC drivers.  Signed-off-by: Peter Ujfalusi <peter.ujfalusi@ti.com> Acked-by: Jarkko Nikula <jarkko.nikula@bitmer.com> Acked-by: Mark Brown <broonoie@opensource.wolfsonmicro.com> Signed-off-by: Liam Girdwood <lrg@ti.com>
f | remoteproc.h | s | 1.6K | 48 | Ohad Ben-Cohen | ohad@wizery.com | 1328734427 |  | remoteproc/omap: add a remoteproc driver for OMAP4  Add a remoteproc driver for OMAP4, so we can boot the dual-M3 and and DSP subsystems.  Use the omap_device_* API to control the hardware state, and utilize the OMAP mailbox to interrupt the remote processor when a new message is pending (the mailbox payload is used to tell it which virtqueue was the message placed in).  Conversely, when an inbound mailbox message arrives, tell the remoteproc core which virtqueue is triggered.  Later we will also use the mailbox payload to signal omap-specific events like remote crashes (which will be used to trigger remoteproc recovery) and power management transitions. At that point we will also extend the remoteproc core to support this.  Based on (but now quite far from) work done by Fernando Guzman Lugo <fernando.lugo@ti.com> and Hari Kanigeri <h-kanigeri2@ti.com>.  Designed with Brian Swetland <swetland@google.com>.  Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com> Acked-by: Tony Lindgren <tony@atomide.com> Cc: Brian Swetland <swetland@google.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Russell King <linux@arm.linux.org.uk> Cc: Rusty Russell <rusty@rustcorp.com.au> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Greg KH <greg@kroah.com> Cc: Stephen Boyd <sboyd@codeaurora.org>
f | timex.h | s | 1.7K | 38 | Tony Lindgren | tony@atomide.com | 1255998778 |  | omap: headers: Create headers necessary for compile under mach-omap1 and mach-omap2  Create the headers needed for compiling under mach-omap1/include/mach and mach-omap2/include/mach.  This was done with the following script:  #!/bin/bash mach_files="clkdev.h gpio.h hardware.h io.h irqs.h memory.h \ smp.h system.h timex.h uncompress.h vmalloc.h" omaps="mach-omap1 mach-omap2"  mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat"  mkdir -p $plat_dir_new git add $plat_dir_new  for dir in $omaps; do 	mach_dir_new="arch/arm/$dir/include/mach" 	for header in $mach_files; do 		file="$mach_dir_new/$header" 		if [ ! -f $file ]; then 			echo -ne "/*\n * $file\n */\n\n#include <plat/$header>\n" > $file 			git add $file 			if [ ! -f $plat_dir_new/$header ]; then 				git mv $mach_dir_old/$header $plat_dir_new/$header 			fi 		fi 	done done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | board-sx1.h | s | 1.4K | 40 | Tony Lindgren | tony@atomide.com | 1256056847 |  | omap: headers: Move remaining headers from include/mach to include/plat  Move the remaining headers under plat-omap/include/mach to plat-omap/include/plat. Also search and replace the files using these headers to include using the right path.  This was done with:  #!/bin/bash mach_dir_old="arch/arm/plat-omap/include/mach" plat_dir_new="arch/arm/plat-omap/include/plat" headers=$(cd $mach_dir_old && ls *.h) omap_dirs="arch/arm/*omap*/ \ drivers/video/omap \ sound/soc/omap" other_files="drivers/leds/leds-ams-delta.c \ drivers/mfd/menelaus.c \ drivers/mfd/twl4030-core.c \ drivers/mtd/nand/ams-delta.c"  for header in $headers; do 	old="#include <mach\/$header" 	new="#include <plat\/$header" 	for dir in $omap_dirs; do 		find $dir -type f -name \*.[chS] || \ 			xargs sed -i "s/$old/$new/" 	done 	find drivers/ -type f -name \*omap*.[chS] || \ 		xargs sed -i "s/$old/$new/" 	for file in $other_files; do 		sed -i "s/$old/$new/" $file 	done done  for header in $(ls $mach_dir_old/*.h); do 	git mv $header $plat_dir_new/ done  Signed-off-by: Tony Lindgren <tony@atomide.com>
f | common.h | s | 1.6K | 35 | Linus Torvalds | torvalds@linux-foundation.org | 1338060709 |  | 
f | i2c.h | s | 1.7K | 53 | Avinash.H.M | avinashhm@ti.com | 1310297236 |  | OMAP: hwmod: fix the i2c-reset timeout during bootup  The sequence of _ocp_softreset doesn't work for i2c. The i2c module has a special sequence to reset the module. The sequence is  - Disable the I2C.  - Write to SOFTRESET bit.  - Enable the I2C.  - Poll on the RESETDONE bit. The sequence is implemented as a function and the i2c_class is updated with the correct 'reset' pointer.  omap_hwmod_softreset function is implemented which triggers the softreset by writing into sysconfig register. On following this sequence, i2c module resets properly and timeouts are not seen.  Cc: Rajendra Nayak <rnayak@ti.com> Cc: Paul Walmsley <paul@pwsan.com> Cc: Benoit Cousson <b-cousson@ti.com> Cc: Kevin Hilman <khilman@ti.com> Signed-off-by: Avinash.H.M <avinashhm@ti.com> [paul@pwsan.com: combined this patch with a patch to remove  HWMOD_INIT_NO_RESET from the 44xx hwmod flags; change register  offset conditional code to use the IP block revision; minor code  cleanup] Signed-off-by: Paul Walmsley <paul@pwsan.com>
f | l4_3xxx.h | s | 1.2K | 31 | Senthilvadivu Guruswamy | svadivu@ti.com | 1298445546 |  | OMAP3: hwmod data: add DSS DISPC RFBI DSI VENC  Hwmod needs database of all IPs in a system. This patch generates the hwmod database for Display Sub System applicable for OMAP3430 and OMAP36xx.  DSS is also considered as an IP as DISPC, RFBI and named as dss_core. For all the IP modules in DSS, same clock is needed for enabling. Hwmod sees DSS IPs as independent IPs, so same clock has to be repeated for .main_clk in each IP.  This patch defines separate hwmod databases for OMAP3430ES1 and (OMAP3430ES2 and OMAP36xx) as OMAP3430ES1 does not have IDLEST bit to poll on for dss IP, and also the firewall regions are different between 3430es1 and later.  Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> Signed-off-by: Sumit Semwal <sumit.semwal@ti.com> Signed-off-by: Senthilvadivu Guruswamy <svadivu@ti.com> Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
f | keypad.h | s | 1.5K | 46 | Tony Lindgren | tony@atomide.com | 1330108476 |  | ARM: OMAP2+: Limit omap_read/write usage to legacy USB drivers  Drivers should no longer use omap_read/write functions but instead use ioremap + read/write functions.  As some USB legacy code is still shared between omap1 and omap2420, let's limit the omap_read/write to plat/usb.h.  Note that the long term fix is to update the drivers to use ioremap and read/write functions. That can now be done as a separate patch series that is limited to the USB drivers.  Also make sure the legacy omap1-keypad.c driver builds if selected for 2420 based systems.  Cc: Tomi Valkeinen <tomi.valkeinen@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | omap_device.h | s | 5.4K | 147 | Kevin Hilman | khilman@ti.com | 1330990682 |  | ARM: OMAP: omap_device: remove omap_device_parent  Currently all omap_devices are forced to have the dummy device 'omap_device_parent' as a parent.  This was used to distinguish omap_devices from "normal" platform_devices in the OMAP PM core code.  Now that we implement the PM core using PM domains, this is no longer needed, and is removed.  This also frees up omap_devices to have a more complex parent/child relationships that model actual device relationships.  The only in-tree user of omap_device_parent was the OMAP PM layer to handle lost-context count for omap_devices.  That is now converted to use the presence of the omap_device_pm_domain instead.  Signed-off-by: Kevin Hilman <khilman@ti.com>
f | sram.h | s | 3.4K | 85 | Vaibhav Bedia | vaibhav.bedia@ti.com | 1330992661 |  | ARM: OMAP: sram: Add am33xx SRAM support (minimal)  Update SRAM start & size for am33xx SoC's.  Note: cpu_is_34xx() is true for am33xx also. Doing cpu_is_am33xx() check after cpu_is_34xx() will not achieve what we want due to the above reason. Hence cpu_is_am33xx() is done before cpu_is_34xx()  Signed-off-by: Vaibhav Bedia <vaibhav.bedia@ti.com> Signed-off-by: Afzal Mohammed <afzal@ti.com> Signed-off-by: Tony Lindgren <tony@atomide.com>
f | mux.h | s | 9.0K | 388 | Tony Lindgren | tony@atomide.com | 1280748218 |  | Merge branch 'devel-misc' into omap-for-linus
f | am33xx.h | s | 836B | 21 | Afzal Mohammed | afzal@ti.com | 1323802003 |  | ARM: OMAP: am33xx: Update common OMAP machine specific sources  This patch updates the common machine specific source files for support for AM33XX/AM335x with cpu type, macros for identification of AM33XX/AM335X device.  Signed-off-by: Afzal Mohammed <afzal@ti.com> Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com> Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> [tony@atomide.com: updated for map_io and common.h changes, dropped CK_AM33XX] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | iommu.h | s | 5.1K | 170 | Ohad Ben-Cohen | ohad@wizery.com | 1323092859 |  | iommu/omap: eliminate the public omap_find_iommu_device() method  Eliminate the public omap_find_iommu_device() method, and don't expect clients to provide the omap_iommu handle anymore.  Instead, OMAP's iommu driver now utilizes dev_archdata's private iommu extension to be able to access the required iommu information.  This way OMAP IOMMU users are now able to use the generic IOMMU API without having to call any omap-specific binding method.  Update omap3isp appropriately.  Signed-off-by: Ohad Ben-Cohen <ohad@wizery.com> Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com> Acked-by: Tony Lindgren <tony@atomide.com> Cc: Hiroshi Doyu <hdoyu@nvidia.com>
f | l3_3xxx.h | s | 638B | 18 | Senthilvadivu Guruswamy | svadivu@ti.com | 1298445546 |  | OMAP3: hwmod data: add DSS DISPC RFBI DSI VENC  Hwmod needs database of all IPs in a system. This patch generates the hwmod database for Display Sub System applicable for OMAP3430 and OMAP36xx.  DSS is also considered as an IP as DISPC, RFBI and named as dss_core. For all the IP modules in DSS, same clock is needed for enabling. Hwmod sees DSS IPs as independent IPs, so same clock has to be repeated for .main_clk in each IP.  This patch defines separate hwmod databases for OMAP3430ES1 and (OMAP3430ES2 and OMAP36xx) as OMAP3430ES1 does not have IDLEST bit to poll on for dss IP, and also the firewall regions are different between 3430es1 and later.  Reviewed-by: Kevin Hilman <khilman@ti.com> Tested-by: Kevin Hilman <khilman@ti.com> Signed-off-by: Sumit Semwal <sumit.semwal@ti.com> Signed-off-by: Senthilvadivu Guruswamy <svadivu@ti.com> Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
