<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › plat-omap › include › plat › dma.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>dma.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  arch/arm/plat-omap/include/mach/dma.h</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2003 Nokia Corporation</span>
<span class="cm"> *  Author: Juha Yrjölä &lt;juha.yrjola@nokia.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ASM_ARCH_DMA_H</span>
<span class="cp">#define __ASM_ARCH_DMA_H</span>

<span class="cp">#include &lt;linux/platform_device.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * TODO: These dma channel defines should go away once all</span>
<span class="cm"> * the omap drivers hwmod adapted.</span>
<span class="cm"> */</span>

<span class="cm">/* Move omap4 specific defines to dma-44xx.h */</span>
<span class="cp">#include &quot;dma-44xx.h&quot;</span>

<span class="cm">/* DMA channels for omap1 */</span>
<span class="cp">#define OMAP_DMA_NO_DEVICE		0</span>
<span class="cp">#define OMAP_DMA_MCSI1_TX		1</span>
<span class="cp">#define OMAP_DMA_MCSI1_RX		2</span>
<span class="cp">#define OMAP_DMA_I2C_RX			3</span>
<span class="cp">#define OMAP_DMA_I2C_TX			4</span>
<span class="cp">#define OMAP_DMA_EXT_NDMA_REQ		5</span>
<span class="cp">#define OMAP_DMA_EXT_NDMA_REQ2		6</span>
<span class="cp">#define OMAP_DMA_UWIRE_TX		7</span>
<span class="cp">#define OMAP_DMA_MCBSP1_TX		8</span>
<span class="cp">#define OMAP_DMA_MCBSP1_RX		9</span>
<span class="cp">#define OMAP_DMA_MCBSP3_TX		10</span>
<span class="cp">#define OMAP_DMA_MCBSP3_RX		11</span>
<span class="cp">#define OMAP_DMA_UART1_TX		12</span>
<span class="cp">#define OMAP_DMA_UART1_RX		13</span>
<span class="cp">#define OMAP_DMA_UART2_TX		14</span>
<span class="cp">#define OMAP_DMA_UART2_RX		15</span>
<span class="cp">#define OMAP_DMA_MCBSP2_TX		16</span>
<span class="cp">#define OMAP_DMA_MCBSP2_RX		17</span>
<span class="cp">#define OMAP_DMA_UART3_TX		18</span>
<span class="cp">#define OMAP_DMA_UART3_RX		19</span>
<span class="cp">#define OMAP_DMA_CAMERA_IF_RX		20</span>
<span class="cp">#define OMAP_DMA_MMC_TX			21</span>
<span class="cp">#define OMAP_DMA_MMC_RX			22</span>
<span class="cp">#define OMAP_DMA_NAND			23</span>
<span class="cp">#define OMAP_DMA_IRQ_LCD_LINE		24</span>
<span class="cp">#define OMAP_DMA_MEMORY_STICK		25</span>
<span class="cp">#define OMAP_DMA_USB_W2FC_RX0		26</span>
<span class="cp">#define OMAP_DMA_USB_W2FC_RX1		27</span>
<span class="cp">#define OMAP_DMA_USB_W2FC_RX2		28</span>
<span class="cp">#define OMAP_DMA_USB_W2FC_TX0		29</span>
<span class="cp">#define OMAP_DMA_USB_W2FC_TX1		30</span>
<span class="cp">#define OMAP_DMA_USB_W2FC_TX2		31</span>

<span class="cm">/* These are only for 1610 */</span>
<span class="cp">#define OMAP_DMA_CRYPTO_DES_IN		32</span>
<span class="cp">#define OMAP_DMA_SPI_TX			33</span>
<span class="cp">#define OMAP_DMA_SPI_RX			34</span>
<span class="cp">#define OMAP_DMA_CRYPTO_HASH		35</span>
<span class="cp">#define OMAP_DMA_CCP_ATTN		36</span>
<span class="cp">#define OMAP_DMA_CCP_FIFO_NOT_EMPTY	37</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_0	38</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_0	39</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_1	40</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_1	41</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_2	42</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_2	43</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_3	44</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_3	45</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_4	46</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_4	47</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_5	48</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_5	49</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_6	50</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_6	51</span>
<span class="cp">#define OMAP_DMA_CMT_APE_TX_CHAN_7	52</span>
<span class="cp">#define OMAP_DMA_CMT_APE_RV_CHAN_7	53</span>
<span class="cp">#define OMAP_DMA_MMC2_TX		54</span>
<span class="cp">#define OMAP_DMA_MMC2_RX		55</span>
<span class="cp">#define OMAP_DMA_CRYPTO_DES_OUT		56</span>

<span class="cm">/* DMA channels for 24xx */</span>
<span class="cp">#define OMAP24XX_DMA_NO_DEVICE		0</span>
<span class="cp">#define OMAP24XX_DMA_XTI_DMA		1	</span><span class="cm">/* S_DMA_0 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_EXT_DMAREQ0	2	</span><span class="cm">/* S_DMA_1 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_EXT_DMAREQ1	3	</span><span class="cm">/* S_DMA_2 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_GPMC		4	</span><span class="cm">/* S_DMA_3 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_GFX		5	</span><span class="cm">/* S_DMA_4 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_DSS		6	</span><span class="cm">/* S_DMA_5 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_VLYNQ_TX		7	</span><span class="cm">/* S_DMA_6 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_EXT_DMAREQ2	7	</span><span class="cm">/* S_DMA_6 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_CWT		8	</span><span class="cm">/* S_DMA_7 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_AES_TX		9	</span><span class="cm">/* S_DMA_8 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_AES_RX		10	</span><span class="cm">/* S_DMA_9 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_DES_TX		11	</span><span class="cm">/* S_DMA_10 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_DES_RX		12	</span><span class="cm">/* S_DMA_11 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SHA1MD5_RX		13	</span><span class="cm">/* S_DMA_12 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_SHA2MD5_RX		13	</span><span class="cm">/* S_DMA_12 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EXT_DMAREQ2	14	</span><span class="cm">/* S_DMA_13 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EXT_DMAREQ3	15	</span><span class="cm">/* S_DMA_14 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EXT_DMAREQ4	16	</span><span class="cm">/* S_DMA_15 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_AC_RD		17	</span><span class="cm">/* S_DMA_16 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_AC_WR		18	</span><span class="cm">/* S_DMA_17 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_MD_UL_RD	19	</span><span class="cm">/* S_DMA_18 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_MD_UL_WR	20	</span><span class="cm">/* S_DMA_19 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_MD_DL_RD	21	</span><span class="cm">/* S_DMA_20 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_MD_DL_WR	22	</span><span class="cm">/* S_DMA_21 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_BT_UL_RD	23	</span><span class="cm">/* S_DMA_22 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_BT_UL_WR	24	</span><span class="cm">/* S_DMA_23 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_BT_DL_RD	25	</span><span class="cm">/* S_DMA_24 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EAC_BT_DL_WR	26	</span><span class="cm">/* S_DMA_25 */</span><span class="cp"></span>
<span class="cp">#define OMAP243X_DMA_EXT_DMAREQ3	14	</span><span class="cm">/* S_DMA_13 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI3_TX0		15	</span><span class="cm">/* S_DMA_14 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI3_RX0		16	</span><span class="cm">/* S_DMA_15 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP3_TX		17	</span><span class="cm">/* S_DMA_16 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP3_RX		18	</span><span class="cm">/* S_DMA_17 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP4_TX		19	</span><span class="cm">/* S_DMA_18 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP4_RX		20	</span><span class="cm">/* S_DMA_19 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP5_TX		21	</span><span class="cm">/* S_DMA_20 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP5_RX		22	</span><span class="cm">/* S_DMA_21 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI3_TX1		23	</span><span class="cm">/* S_DMA_22 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI3_RX1		24	</span><span class="cm">/* S_DMA_23 */</span><span class="cp"></span>
<span class="cp">#define OMAP243X_DMA_EXT_DMAREQ4	25	</span><span class="cm">/* S_DMA_24 */</span><span class="cp"></span>
<span class="cp">#define OMAP243X_DMA_EXT_DMAREQ5	26	</span><span class="cm">/* S_DMA_25 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_I2C3_TX		25	</span><span class="cm">/* S_DMA_24 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_I2C3_RX		26	</span><span class="cm">/* S_DMA_25 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_I2C1_TX		27	</span><span class="cm">/* S_DMA_26 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_I2C1_RX		28	</span><span class="cm">/* S_DMA_27 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_I2C2_TX		29	</span><span class="cm">/* S_DMA_28 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_I2C2_RX		30	</span><span class="cm">/* S_DMA_29 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP1_TX		31	</span><span class="cm">/* S_DMA_30 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP1_RX		32	</span><span class="cm">/* S_DMA_31 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP2_TX		33	</span><span class="cm">/* S_DMA_32 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MCBSP2_RX		34	</span><span class="cm">/* S_DMA_33 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_TX0		35	</span><span class="cm">/* S_DMA_34 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_RX0		36	</span><span class="cm">/* S_DMA_35 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_TX1		37	</span><span class="cm">/* S_DMA_36 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_RX1		38	</span><span class="cm">/* S_DMA_37 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_TX2		39	</span><span class="cm">/* S_DMA_38 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_RX2		40	</span><span class="cm">/* S_DMA_39 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_TX3		41	</span><span class="cm">/* S_DMA_40 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI1_RX3		42	</span><span class="cm">/* S_DMA_41 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI2_TX0		43	</span><span class="cm">/* S_DMA_42 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI2_RX0		44	</span><span class="cm">/* S_DMA_43 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI2_TX1		45	</span><span class="cm">/* S_DMA_44 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_SPI2_RX1		46	</span><span class="cm">/* S_DMA_45 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MMC2_TX		47	</span><span class="cm">/* S_DMA_46 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MMC2_RX		48	</span><span class="cm">/* S_DMA_47 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_UART1_TX		49	</span><span class="cm">/* S_DMA_48 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_UART1_RX		50	</span><span class="cm">/* S_DMA_49 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_UART2_TX		51	</span><span class="cm">/* S_DMA_50 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_UART2_RX		52	</span><span class="cm">/* S_DMA_51 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_UART3_TX		53	</span><span class="cm">/* S_DMA_52 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_UART3_RX		54	</span><span class="cm">/* S_DMA_53 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_USB_W2FC_TX0	55	</span><span class="cm">/* S_DMA_54 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_USB_W2FC_RX0	56	</span><span class="cm">/* S_DMA_55 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_USB_W2FC_TX1	57	</span><span class="cm">/* S_DMA_56 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_USB_W2FC_RX1	58	</span><span class="cm">/* S_DMA_57 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_USB_W2FC_TX2	59	</span><span class="cm">/* S_DMA_58 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_USB_W2FC_RX2	60	</span><span class="cm">/* S_DMA_59 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MMC1_TX		61	</span><span class="cm">/* S_DMA_60 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MMC1_RX		62	</span><span class="cm">/* S_DMA_61 */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_DMA_MS			63	</span><span class="cm">/* S_DMA_62 */</span><span class="cp"></span>
<span class="cp">#define OMAP242X_DMA_EXT_DMAREQ5	64	</span><span class="cm">/* S_DMA_63 */</span><span class="cp"></span>
<span class="cp">#define OMAP243X_DMA_EXT_DMAREQ6	64	</span><span class="cm">/* S_DMA_63 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_EXT_DMAREQ3	64	</span><span class="cm">/* S_DMA_63 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_AES2_TX		65	</span><span class="cm">/* S_DMA_64 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_AES2_RX		66	</span><span class="cm">/* S_DMA_65 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_DES2_TX		67	</span><span class="cm">/* S_DMA_66 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_DES2_RX		68	</span><span class="cm">/* S_DMA_67 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_SHA1MD5_RX		69	</span><span class="cm">/* S_DMA_68 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_SPI4_TX0		70	</span><span class="cm">/* S_DMA_69 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_SPI4_RX0		71	</span><span class="cm">/* S_DMA_70 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DSS_DMA0		72	</span><span class="cm">/* S_DMA_71 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DSS_DMA1		73	</span><span class="cm">/* S_DMA_72 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DSS_DMA2		74	</span><span class="cm">/* S_DMA_73 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DSS_DMA3		75	</span><span class="cm">/* S_DMA_74 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_MMC3_TX		77	</span><span class="cm">/* S_DMA_76 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_MMC3_RX		78	</span><span class="cm">/* S_DMA_77 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_USIM_TX		79	</span><span class="cm">/* S_DMA_78 */</span><span class="cp"></span>
<span class="cp">#define OMAP34XX_DMA_USIM_RX		80	</span><span class="cm">/* S_DMA_79 */</span><span class="cp"></span>

<span class="cp">#define OMAP36XX_DMA_UART4_TX		81	</span><span class="cm">/* S_DMA_80 */</span><span class="cp"></span>
<span class="cp">#define OMAP36XX_DMA_UART4_RX		82	</span><span class="cm">/* S_DMA_81 */</span><span class="cp"></span>

<span class="cm">/* Only for AM35xx */</span>
<span class="cp">#define AM35XX_DMA_UART4_TX		54</span>
<span class="cp">#define AM35XX_DMA_UART4_RX		55</span>

<span class="cm">/*----------------------------------------------------------------------------*/</span>

<span class="cp">#define OMAP1_DMA_TOUT_IRQ		(1 &lt;&lt; 0)</span>
<span class="cp">#define OMAP_DMA_DROP_IRQ		(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP_DMA_HALF_IRQ		(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP_DMA_FRAME_IRQ		(1 &lt;&lt; 3)</span>
<span class="cp">#define OMAP_DMA_LAST_IRQ		(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP_DMA_BLOCK_IRQ		(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP1_DMA_SYNC_IRQ		(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP2_DMA_PKT_IRQ		(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP2_DMA_TRANS_ERR_IRQ		(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP2_DMA_SECURE_ERR_IRQ	(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP2_DMA_SUPERVISOR_ERR_IRQ	(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP2_DMA_MISALIGNED_ERR_IRQ	(1 &lt;&lt; 11)</span>

<span class="cp">#define OMAP_DMA_CCR_EN			(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP_DMA_CCR_RD_ACTIVE		(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP_DMA_CCR_WR_ACTIVE		(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP_DMA_CCR_SEL_SRC_DST_SYNC	(1 &lt;&lt; 24)</span>
<span class="cp">#define OMAP_DMA_CCR_BUFFERING_DISABLE	(1 &lt;&lt; 25)</span>

<span class="cp">#define OMAP_DMA_DATA_TYPE_S8		0x00</span>
<span class="cp">#define OMAP_DMA_DATA_TYPE_S16		0x01</span>
<span class="cp">#define OMAP_DMA_DATA_TYPE_S32		0x02</span>

<span class="cp">#define OMAP_DMA_SYNC_ELEMENT		0x00</span>
<span class="cp">#define OMAP_DMA_SYNC_FRAME		0x01</span>
<span class="cp">#define OMAP_DMA_SYNC_BLOCK		0x02</span>
<span class="cp">#define OMAP_DMA_SYNC_PACKET		0x03</span>

<span class="cp">#define OMAP_DMA_DST_SYNC_PREFETCH	0x02</span>
<span class="cp">#define OMAP_DMA_SRC_SYNC		0x01</span>
<span class="cp">#define OMAP_DMA_DST_SYNC		0x00</span>

<span class="cp">#define OMAP_DMA_PORT_EMIFF		0x00</span>
<span class="cp">#define OMAP_DMA_PORT_EMIFS		0x01</span>
<span class="cp">#define OMAP_DMA_PORT_OCP_T1		0x02</span>
<span class="cp">#define OMAP_DMA_PORT_TIPB		0x03</span>
<span class="cp">#define OMAP_DMA_PORT_OCP_T2		0x04</span>
<span class="cp">#define OMAP_DMA_PORT_MPUI		0x05</span>

<span class="cp">#define OMAP_DMA_AMODE_CONSTANT		0x00</span>
<span class="cp">#define OMAP_DMA_AMODE_POST_INC		0x01</span>
<span class="cp">#define OMAP_DMA_AMODE_SINGLE_IDX	0x02</span>
<span class="cp">#define OMAP_DMA_AMODE_DOUBLE_IDX	0x03</span>

<span class="cp">#define DMA_DEFAULT_FIFO_DEPTH		0x10</span>
<span class="cp">#define DMA_DEFAULT_ARB_RATE		0x01</span>
<span class="cm">/* Pass THREAD_RESERVE ORed with THREAD_FIFO for tparams */</span>
<span class="cp">#define DMA_THREAD_RESERVE_NORM		(0x00 &lt;&lt; 12) </span><span class="cm">/* Def */</span><span class="cp"></span>
<span class="cp">#define DMA_THREAD_RESERVE_ONET		(0x01 &lt;&lt; 12)</span>
<span class="cp">#define DMA_THREAD_RESERVE_TWOT		(0x02 &lt;&lt; 12)</span>
<span class="cp">#define DMA_THREAD_RESERVE_THREET	(0x03 &lt;&lt; 12)</span>
<span class="cp">#define DMA_THREAD_FIFO_NONE		(0x00 &lt;&lt; 14) </span><span class="cm">/* Def */</span><span class="cp"></span>
<span class="cp">#define DMA_THREAD_FIFO_75		(0x01 &lt;&lt; 14)</span>
<span class="cp">#define DMA_THREAD_FIFO_25		(0x02 &lt;&lt; 14)</span>
<span class="cp">#define DMA_THREAD_FIFO_50		(0x03 &lt;&lt; 14)</span>

<span class="cm">/* DMA4_OCP_SYSCONFIG bits */</span>
<span class="cp">#define DMA_SYSCONFIG_MIDLEMODE_MASK		(3 &lt;&lt; 12)</span>
<span class="cp">#define DMA_SYSCONFIG_CLOCKACTIVITY_MASK	(3 &lt;&lt; 8)</span>
<span class="cp">#define DMA_SYSCONFIG_EMUFREE			(1 &lt;&lt; 5)</span>
<span class="cp">#define DMA_SYSCONFIG_SIDLEMODE_MASK		(3 &lt;&lt; 3)</span>
<span class="cp">#define DMA_SYSCONFIG_SOFTRESET			(1 &lt;&lt; 2)</span>
<span class="cp">#define DMA_SYSCONFIG_AUTOIDLE			(1 &lt;&lt; 0)</span>

<span class="cp">#define DMA_SYSCONFIG_MIDLEMODE(n)		((n) &lt;&lt; 12)</span>
<span class="cp">#define DMA_SYSCONFIG_SIDLEMODE(n)		((n) &lt;&lt; 3)</span>

<span class="cp">#define DMA_IDLEMODE_SMARTIDLE			0x2</span>
<span class="cp">#define DMA_IDLEMODE_NO_IDLE			0x1</span>
<span class="cp">#define DMA_IDLEMODE_FORCE_IDLE			0x0</span>

<span class="cm">/* Chaining modes*/</span>
<span class="cp">#ifndef CONFIG_ARCH_OMAP1</span>
<span class="cp">#define OMAP_DMA_STATIC_CHAIN		0x1</span>
<span class="cp">#define OMAP_DMA_DYNAMIC_CHAIN		0x2</span>
<span class="cp">#define OMAP_DMA_CHAIN_ACTIVE		0x1</span>
<span class="cp">#define OMAP_DMA_CHAIN_INACTIVE		0x0</span>
<span class="cp">#endif</span>

<span class="cp">#define DMA_CH_PRIO_HIGH		0x1</span>
<span class="cp">#define DMA_CH_PRIO_LOW			0x0 </span><span class="cm">/* Def */</span><span class="cp"></span>

<span class="cm">/* Errata handling */</span>
<span class="cp">#define IS_DMA_ERRATA(id)		(errata &amp; (id))</span>
<span class="cp">#define SET_DMA_ERRATA(id)		(errata |= (id))</span>

<span class="cp">#define DMA_ERRATA_IFRAME_BUFFERING	BIT(0x0)</span>
<span class="cp">#define DMA_ERRATA_PARALLEL_CHANNELS	BIT(0x1)</span>
<span class="cp">#define DMA_ERRATA_i378			BIT(0x2)</span>
<span class="cp">#define DMA_ERRATA_i541			BIT(0x3)</span>
<span class="cp">#define DMA_ERRATA_i88			BIT(0x4)</span>
<span class="cp">#define DMA_ERRATA_3_3			BIT(0x5)</span>
<span class="cp">#define DMA_ROMCODE_BUG			BIT(0x6)</span>

<span class="cm">/* Attributes for OMAP DMA Contrller */</span>
<span class="cp">#define DMA_LINKED_LCH			BIT(0x0)</span>
<span class="cp">#define GLOBAL_PRIORITY			BIT(0x1)</span>
<span class="cp">#define RESERVE_CHANNEL			BIT(0x2)</span>
<span class="cp">#define IS_CSSA_32			BIT(0x3)</span>
<span class="cp">#define IS_CDSA_32			BIT(0x4)</span>
<span class="cp">#define IS_RW_PRIORITY			BIT(0x5)</span>
<span class="cp">#define ENABLE_1510_MODE		BIT(0x6)</span>
<span class="cp">#define SRC_PORT			BIT(0x7)</span>
<span class="cp">#define DST_PORT			BIT(0x8)</span>
<span class="cp">#define SRC_INDEX			BIT(0x9)</span>
<span class="cp">#define DST_INDEX			BIT(0xA)</span>
<span class="cp">#define IS_BURST_ONLY4			BIT(0xB)</span>
<span class="cp">#define CLEAR_CSR_ON_READ		BIT(0xC)</span>
<span class="cp">#define IS_WORD_16			BIT(0xD)</span>

<span class="cm">/* Defines for DMA Capabilities */</span>
<span class="cp">#define DMA_HAS_TRANSPARENT_CAPS	(0x1 &lt;&lt; 18)</span>
<span class="cp">#define DMA_HAS_CONSTANT_FILL_CAPS	(0x1 &lt;&lt; 19)</span>
<span class="cp">#define DMA_HAS_DESCRIPTOR_CAPS		(0x3 &lt;&lt; 20)</span>

<span class="k">enum</span> <span class="n">omap_reg_offsets</span> <span class="p">{</span>

<span class="n">GCR</span><span class="p">,</span>		<span class="n">GSCR</span><span class="p">,</span>		<span class="n">GRST1</span><span class="p">,</span>		<span class="n">HW_ID</span><span class="p">,</span>
<span class="n">PCH2_ID</span><span class="p">,</span>	<span class="n">PCH0_ID</span><span class="p">,</span>	<span class="n">PCH1_ID</span><span class="p">,</span>	<span class="n">PCHG_ID</span><span class="p">,</span>
<span class="n">PCHD_ID</span><span class="p">,</span>	<span class="n">CAPS_0</span><span class="p">,</span>		<span class="n">CAPS_1</span><span class="p">,</span>		<span class="n">CAPS_2</span><span class="p">,</span>
<span class="n">CAPS_3</span><span class="p">,</span>		<span class="n">CAPS_4</span><span class="p">,</span>		<span class="n">PCH2_SR</span><span class="p">,</span>	<span class="n">PCH0_SR</span><span class="p">,</span>
<span class="n">PCH1_SR</span><span class="p">,</span>	<span class="n">PCHD_SR</span><span class="p">,</span>	<span class="n">REVISION</span><span class="p">,</span>	<span class="n">IRQSTATUS_L0</span><span class="p">,</span>
<span class="n">IRQSTATUS_L1</span><span class="p">,</span>	<span class="n">IRQSTATUS_L2</span><span class="p">,</span>	<span class="n">IRQSTATUS_L3</span><span class="p">,</span>	<span class="n">IRQENABLE_L0</span><span class="p">,</span>
<span class="n">IRQENABLE_L1</span><span class="p">,</span>	<span class="n">IRQENABLE_L2</span><span class="p">,</span>	<span class="n">IRQENABLE_L3</span><span class="p">,</span>	<span class="n">SYSSTATUS</span><span class="p">,</span>
<span class="n">OCP_SYSCONFIG</span><span class="p">,</span>

<span class="cm">/* omap1+ specific */</span>
<span class="n">CPC</span><span class="p">,</span> <span class="n">CCR2</span><span class="p">,</span> <span class="n">LCH_CTRL</span><span class="p">,</span>

<span class="cm">/* Common registers for all omap&#39;s */</span>
<span class="n">CSDP</span><span class="p">,</span>		<span class="n">CCR</span><span class="p">,</span>		<span class="n">CICR</span><span class="p">,</span>		<span class="n">CSR</span><span class="p">,</span>
<span class="n">CEN</span><span class="p">,</span>		<span class="n">CFN</span><span class="p">,</span>		<span class="n">CSFI</span><span class="p">,</span>		<span class="n">CSEI</span><span class="p">,</span>
<span class="n">CSAC</span><span class="p">,</span>		<span class="n">CDAC</span><span class="p">,</span>		<span class="n">CDEI</span><span class="p">,</span>
<span class="n">CDFI</span><span class="p">,</span>		<span class="n">CLNK_CTRL</span><span class="p">,</span>

<span class="cm">/* Channel specific registers */</span>
<span class="n">CSSA</span><span class="p">,</span>		<span class="n">CDSA</span><span class="p">,</span>		<span class="n">COLOR</span><span class="p">,</span>
<span class="n">CCEN</span><span class="p">,</span>		<span class="n">CCFN</span><span class="p">,</span>

<span class="cm">/* omap3630 and omap4 specific */</span>
<span class="n">CDP</span><span class="p">,</span>		<span class="n">CNDP</span><span class="p">,</span>		<span class="n">CCDN</span><span class="p">,</span>

<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dma_burst_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DMA_DATA_BURST_DIS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DMA_DATA_BURST_4</span><span class="p">,</span>
	<span class="n">OMAP_DMA_DATA_BURST_8</span><span class="p">,</span>
	<span class="n">OMAP_DMA_DATA_BURST_16</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">end_type</span> <span class="p">{</span>
	<span class="n">OMAP_DMA_LITTLE_ENDIAN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DMA_BIG_ENDIAN</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dma_color_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DMA_COLOR_DIS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DMA_CONSTANT_FILL</span><span class="p">,</span>
	<span class="n">OMAP_DMA_TRANSPARENT_COPY</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dma_write_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DMA_WRITE_NON_POSTED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DMA_WRITE_POSTED</span><span class="p">,</span>
	<span class="n">OMAP_DMA_WRITE_LAST_NON_POSTED</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">omap_dma_channel_mode</span> <span class="p">{</span>
	<span class="n">OMAP_DMA_LCH_2D</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">OMAP_DMA_LCH_G</span><span class="p">,</span>
	<span class="n">OMAP_DMA_LCH_P</span><span class="p">,</span>
	<span class="n">OMAP_DMA_LCH_PD</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dma_channel_params</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">data_type</span><span class="p">;</span>		<span class="cm">/* data type 8,16,32 */</span>
	<span class="kt">int</span> <span class="n">elem_count</span><span class="p">;</span>		<span class="cm">/* number of elements in a frame */</span>
	<span class="kt">int</span> <span class="n">frame_count</span><span class="p">;</span>	<span class="cm">/* number of frames in a element */</span>

	<span class="kt">int</span> <span class="n">src_port</span><span class="p">;</span>		<span class="cm">/* Only on OMAP1 REVISIT: Is this needed? */</span>
	<span class="kt">int</span> <span class="n">src_amode</span><span class="p">;</span>		<span class="cm">/* constant, post increment, indexed,</span>
<span class="cm">					double indexed */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">src_start</span><span class="p">;</span>	<span class="cm">/* source address : physical */</span>
	<span class="kt">int</span> <span class="n">src_ei</span><span class="p">;</span>		<span class="cm">/* source element index */</span>
	<span class="kt">int</span> <span class="n">src_fi</span><span class="p">;</span>		<span class="cm">/* source frame index */</span>

	<span class="kt">int</span> <span class="n">dst_port</span><span class="p">;</span>		<span class="cm">/* Only on OMAP1 REVISIT: Is this needed? */</span>
	<span class="kt">int</span> <span class="n">dst_amode</span><span class="p">;</span>		<span class="cm">/* constant, post increment, indexed,</span>
<span class="cm">					double indexed */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dst_start</span><span class="p">;</span>	<span class="cm">/* source address : physical */</span>
	<span class="kt">int</span> <span class="n">dst_ei</span><span class="p">;</span>		<span class="cm">/* source element index */</span>
	<span class="kt">int</span> <span class="n">dst_fi</span><span class="p">;</span>		<span class="cm">/* source frame index */</span>

	<span class="kt">int</span> <span class="n">trigger</span><span class="p">;</span>		<span class="cm">/* trigger attached if the channel is</span>
<span class="cm">					synchronized */</span>
	<span class="kt">int</span> <span class="n">sync_mode</span><span class="p">;</span>		<span class="cm">/* sycn on element, frame , block or packet */</span>
	<span class="kt">int</span> <span class="n">src_or_dst_synch</span><span class="p">;</span>	<span class="cm">/* source synch(1) or destination synch(0) */</span>

	<span class="kt">int</span> <span class="n">ie</span><span class="p">;</span>			<span class="cm">/* interrupt enabled */</span>

	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">read_prio</span><span class="p">;</span><span class="cm">/* read priority */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">write_prio</span><span class="p">;</span><span class="cm">/* write priority */</span>

<span class="cp">#ifndef CONFIG_ARCH_OMAP1</span>
	<span class="k">enum</span> <span class="n">omap_dma_burst_mode</span> <span class="n">burst_mode</span><span class="p">;</span> <span class="cm">/* Burst mode 4/8/16 words */</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dma_lch</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">next_lch</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">dev_id</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">saved_csr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">enabled_irqs</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dev_name</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="n">u16</span> <span class="n">ch_status</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
	<span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
	<span class="cm">/* required for Dynamic chaining */</span>
	<span class="kt">int</span> <span class="n">prev_linked_ch</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">next_linked_ch</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">chain_id</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">status</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">omap_dma_dev_attr</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">dev_caps</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">lch_count</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">chan_count</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">omap_dma_lch</span> <span class="o">*</span><span class="n">chan</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* System DMA platform data structure */</span>
<span class="k">struct</span> <span class="n">omap_system_dma_plat_info</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">omap_dma_dev_attr</span> <span class="o">*</span><span class="n">dma_attr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">errata</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">disable_irq_lch</span><span class="p">)(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">show_dma_caps</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">clear_lch_regs</span><span class="p">)(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">clear_dma</span><span class="p">)(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">dma_write</span><span class="p">)(</span><span class="n">u32</span> <span class="n">val</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
	<span class="n">u32</span> <span class="p">(</span><span class="o">*</span><span class="n">dma_read</span><span class="p">)(</span><span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">__init</span> <span class="n">omap_init_consistent_dma_size</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_priority</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dst_port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">priority</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_request_dma</span><span class="p">(</span><span class="kt">int</span> <span class="n">dev_id</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dev_name</span><span class="p">,</span>
			<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="n">u16</span> <span class="n">ch_status</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">),</span>
			<span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">dma_ch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_enable_dma_irq</span><span class="p">(</span><span class="kt">int</span> <span class="n">ch</span><span class="p">,</span> <span class="n">u16</span> <span class="n">irq_bits</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_disable_dma_irq</span><span class="p">(</span><span class="kt">int</span> <span class="n">ch</span><span class="p">,</span> <span class="n">u16</span> <span class="n">irq_bits</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_free_dma</span><span class="p">(</span><span class="kt">int</span> <span class="n">ch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_start_dma</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_stop_dma</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_transfer_params</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">data_type</span><span class="p">,</span>
					 <span class="kt">int</span> <span class="n">elem_count</span><span class="p">,</span> <span class="kt">int</span> <span class="n">frame_count</span><span class="p">,</span>
					 <span class="kt">int</span> <span class="n">sync_mode</span><span class="p">,</span>
					 <span class="kt">int</span> <span class="n">dma_trigger</span><span class="p">,</span> <span class="kt">int</span> <span class="n">src_or_dst_synch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_color_mode</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="k">enum</span> <span class="n">omap_dma_color_mode</span> <span class="n">mode</span><span class="p">,</span>
				    <span class="n">u32</span> <span class="n">color</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_write_mode</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="k">enum</span> <span class="n">omap_dma_write_mode</span> <span class="n">mode</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_channel_mode</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="k">enum</span> <span class="n">omap_dma_channel_mode</span> <span class="n">mode</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_src_params</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">src_port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">src_amode</span><span class="p">,</span>
				    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">src_start</span><span class="p">,</span>
				    <span class="kt">int</span> <span class="n">src_ei</span><span class="p">,</span> <span class="kt">int</span> <span class="n">src_fi</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_src_index</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">eidx</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fidx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_src_data_pack</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_src_burst_mode</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span>
					<span class="k">enum</span> <span class="n">omap_dma_burst_mode</span> <span class="n">burst_mode</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_dest_params</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dest_port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dest_amode</span><span class="p">,</span>
				     <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dest_start</span><span class="p">,</span>
				     <span class="kt">int</span> <span class="n">dst_ei</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dst_fi</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_dest_index</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">eidx</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fidx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_dest_data_pack</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="n">enable</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_dest_burst_mode</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span>
					 <span class="k">enum</span> <span class="n">omap_dma_burst_mode</span> <span class="n">burst_mode</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_params</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span>
				<span class="k">struct</span> <span class="n">omap_dma_channel_params</span> <span class="o">*</span><span class="n">params</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_dma_link_lch</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch_head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lch_queue</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_dma_unlink_lch</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch_head</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lch_queue</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_set_dma_callback</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span>
			<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="n">u16</span> <span class="n">ch_status</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">),</span>
			<span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">dma_addr_t</span> <span class="n">omap_get_dma_src_pos</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">dma_addr_t</span> <span class="n">omap_get_dma_dst_pos</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_clear_dma</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_get_dma_active_status</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_dma_running</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_dma_set_global_params</span><span class="p">(</span><span class="kt">int</span> <span class="n">arb_rate</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_fifo_depth</span><span class="p">,</span>
				       <span class="kt">int</span> <span class="n">tparams</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_dma_set_prio_lch</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">read_prio</span><span class="p">,</span>
				 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">write_prio</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_dst_endian_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="k">enum</span> <span class="n">end_type</span> <span class="n">etype</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_set_dma_src_endian_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="k">enum</span> <span class="n">end_type</span> <span class="n">etype</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_get_dma_index</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ei</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">fi</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">omap_dma_global_context_save</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap_dma_global_context_restore</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_dma_disable_irq</span><span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">);</span>

<span class="cm">/* Chaining APIs */</span>
<span class="cp">#ifndef CONFIG_ARCH_OMAP1</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_request_dma_chain</span><span class="p">(</span><span class="kt">int</span> <span class="n">dev_id</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">dev_name</span><span class="p">,</span>
				  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">callback</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span> <span class="n">lch</span><span class="p">,</span> <span class="n">u16</span> <span class="n">ch_status</span><span class="p">,</span>
						    <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">),</span>
				  <span class="kt">int</span> <span class="o">*</span><span class="n">chain_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">no_of_chans</span><span class="p">,</span>
				  <span class="kt">int</span> <span class="n">chain_mode</span><span class="p">,</span>
				  <span class="k">struct</span> <span class="n">omap_dma_channel_params</span> <span class="n">params</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_free_dma_chain</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_dma_chain_a_transfer</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">,</span> <span class="kt">int</span> <span class="n">src_start</span><span class="p">,</span>
				     <span class="kt">int</span> <span class="n">dest_start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">elem_count</span><span class="p">,</span>
				     <span class="kt">int</span> <span class="n">frame_count</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">callbk_data</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_start_dma_chain_transfers</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_stop_dma_chain_transfers</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_get_dma_chain_index</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ei</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">fi</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_get_dma_chain_dst_pos</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_get_dma_chain_src_pos</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_modify_dma_chain_params</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">,</span>
					<span class="k">struct</span> <span class="n">omap_dma_channel_params</span> <span class="n">params</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_dma_chain_status</span><span class="p">(</span><span class="kt">int</span> <span class="n">chain_id</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ARCH_OMAP1) &amp;&amp; defined(CONFIG_FB_OMAP)</span>
<span class="cp">#include &lt;mach/lcd_dma.h&gt;</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">omap_lcd_dma_running</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* __ASM_ARCH_DMA_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
