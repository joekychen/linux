<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › include › asm › hardware › sa1111.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>sa1111.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * arch/arm/include/asm/hardware/sa1111.h</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2000 John G Dorsey &lt;john+@cs.cmu.edu&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This file contains definitions for the SA-1111 Companion Chip.</span>
<span class="cm"> * (Structure and naming borrowed from SA-1101.h, by Peter Danielsson.)</span>
<span class="cm"> *</span>
<span class="cm"> * Macro that calculates real address for registers in the SA-1111</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_ARCH_SA1111</span>
<span class="cp">#define _ASM_ARCH_SA1111</span>

<span class="cp">#include &lt;mach/bitfield.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * The SA1111 is always located at virtual 0xf4000000, and is always</span>
<span class="cm"> * &quot;native&quot; endian.</span>
<span class="cm"> */</span>

<span class="cp">#define SA1111_VBASE		0xf4000000</span>

<span class="cm">/* Don&#39;t use these! */</span>
<span class="cp">#define SA1111_p2v( x )         ((x) - SA1111_BASE + SA1111_VBASE)</span>
<span class="cp">#define SA1111_v2p( x )         ((x) - SA1111_VBASE + SA1111_BASE)</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#define _SA1111(x)	((x) + sa1111-&gt;resource.start)</span>
<span class="cp">#endif</span>

<span class="cp">#define sa1111_writel(val,addr)	__raw_writel(val, addr)</span>
<span class="cp">#define sa1111_readl(addr)	__raw_readl(addr)</span>

<span class="cm">/*</span>
<span class="cm"> * 26 bits of the SA-1110 address bus are available to the SA-1111.</span>
<span class="cm"> * Use these when feeding target addresses to the DMA engines.</span>
<span class="cm"> */</span>

<span class="cp">#define SA1111_ADDR_WIDTH	(26)</span>
<span class="cp">#define SA1111_ADDR_MASK	((1&lt;&lt;SA1111_ADDR_WIDTH)-1)</span>
<span class="cp">#define SA1111_DMA_ADDR(x)	((x)&amp;SA1111_ADDR_MASK)</span>

<span class="cm">/*</span>
<span class="cm"> * Don&#39;t ask the (SAC) DMA engines to move less than this amount.</span>
<span class="cm"> */</span>

<span class="cp">#define SA1111_SAC_DMA_MIN_XFER	(0x800)</span>

<span class="cm">/*</span>
<span class="cm"> * System Bus Interface (SBI)</span>
<span class="cm"> *</span>
<span class="cm"> * Registers</span>
<span class="cm"> *    SKCR	Control Register</span>
<span class="cm"> *    SMCR	Shared Memory Controller Register</span>
<span class="cm"> *    SKID	ID Register</span>
<span class="cm"> */</span>
<span class="cp">#define SA1111_SKCR	0x0000</span>
<span class="cp">#define SA1111_SMCR	0x0004</span>
<span class="cp">#define SA1111_SKID	0x0008</span>

<span class="cp">#define SKCR_PLL_BYPASS	(1&lt;&lt;0)</span>
<span class="cp">#define SKCR_RCLKEN	(1&lt;&lt;1)</span>
<span class="cp">#define SKCR_SLEEP	(1&lt;&lt;2)</span>
<span class="cp">#define SKCR_DOZE	(1&lt;&lt;3)</span>
<span class="cp">#define SKCR_VCO_OFF	(1&lt;&lt;4)</span>
<span class="cp">#define SKCR_SCANTSTEN	(1&lt;&lt;5)</span>
<span class="cp">#define SKCR_CLKTSTEN	(1&lt;&lt;6)</span>
<span class="cp">#define SKCR_RDYEN	(1&lt;&lt;7)</span>
<span class="cp">#define SKCR_SELAC	(1&lt;&lt;8)</span>
<span class="cp">#define SKCR_OPPC	(1&lt;&lt;9)</span>
<span class="cp">#define SKCR_PLLTSTEN	(1&lt;&lt;10)</span>
<span class="cp">#define SKCR_USBIOTSTEN	(1&lt;&lt;11)</span>
<span class="cm">/*</span>
<span class="cm"> * Don&#39;t believe the specs!  Take them, throw them outside.  Leave them</span>
<span class="cm"> * there for a week.  Spit on them.  Walk on them.  Stamp on them.</span>
<span class="cm"> * Pour gasoline over them and finally burn them.  Now think about coding.</span>
<span class="cm"> *  - The October 1999 errata (278260-007) says its bit 13, 1 to enable.</span>
<span class="cm"> *  - The Feb 2001 errata (278260-010) says that the previous errata</span>
<span class="cm"> *    (278260-009) is wrong, and its bit actually 12, fixed in spec</span>
<span class="cm"> *    278242-003.</span>
<span class="cm"> *  - The SA1111 manual (278242) says bit 12, but 0 to enable.</span>
<span class="cm"> *  - Reality is bit 13, 1 to enable.</span>
<span class="cm"> *      -- rmk</span>
<span class="cm"> */</span>
<span class="cp">#define SKCR_OE_EN	(1&lt;&lt;13)</span>

<span class="cp">#define SMCR_DTIM	(1&lt;&lt;0)</span>
<span class="cp">#define SMCR_MBGE	(1&lt;&lt;1)</span>
<span class="cp">#define SMCR_DRAC_0	(1&lt;&lt;2)</span>
<span class="cp">#define SMCR_DRAC_1	(1&lt;&lt;3)</span>
<span class="cp">#define SMCR_DRAC_2	(1&lt;&lt;4)</span>
<span class="cp">#define SMCR_DRAC	Fld(3, 2)</span>
<span class="cp">#define SMCR_CLAT	(1&lt;&lt;5)</span>

<span class="cp">#define SKID_SIREV_MASK	(0x000000f0)</span>
<span class="cp">#define SKID_MTREV_MASK (0x0000000f)</span>
<span class="cp">#define SKID_ID_MASK	(0xffffff00)</span>
<span class="cp">#define SKID_SA1111_ID	(0x690cc200)</span>

<span class="cm">/*</span>
<span class="cm"> * System Controller</span>
<span class="cm"> *</span>
<span class="cm"> * Registers</span>
<span class="cm"> *    SKPCR	Power Control Register</span>
<span class="cm"> *    SKCDR	Clock Divider Register</span>
<span class="cm"> *    SKAUD	Audio Clock Divider Register</span>
<span class="cm"> *    SKPMC	PS/2 Mouse Clock Divider Register</span>
<span class="cm"> *    SKPTC	PS/2 Track Pad Clock Divider Register</span>
<span class="cm"> *    SKPEN0	PWM0 Enable Register</span>
<span class="cm"> *    SKPWM0	PWM0 Clock Register</span>
<span class="cm"> *    SKPEN1	PWM1 Enable Register</span>
<span class="cm"> *    SKPWM1	PWM1 Clock Register</span>
<span class="cm"> */</span>
<span class="cp">#define SA1111_SKPCR	0x0200</span>
<span class="cp">#define SA1111_SKCDR	0x0204</span>
<span class="cp">#define SA1111_SKAUD	0x0208</span>
<span class="cp">#define SA1111_SKPMC	0x020c</span>
<span class="cp">#define SA1111_SKPTC	0x0210</span>
<span class="cp">#define SA1111_SKPEN0	0x0214</span>
<span class="cp">#define SA1111_SKPWM0	0x0218</span>
<span class="cp">#define SA1111_SKPEN1	0x021c</span>
<span class="cp">#define SA1111_SKPWM1	0x0220</span>

<span class="cp">#define SKPCR_UCLKEN	(1&lt;&lt;0)</span>
<span class="cp">#define SKPCR_ACCLKEN	(1&lt;&lt;1)</span>
<span class="cp">#define SKPCR_I2SCLKEN	(1&lt;&lt;2)</span>
<span class="cp">#define SKPCR_L3CLKEN	(1&lt;&lt;3)</span>
<span class="cp">#define SKPCR_SCLKEN	(1&lt;&lt;4)</span>
<span class="cp">#define SKPCR_PMCLKEN	(1&lt;&lt;5)</span>
<span class="cp">#define SKPCR_PTCLKEN	(1&lt;&lt;6)</span>
<span class="cp">#define SKPCR_DCLKEN	(1&lt;&lt;7)</span>
<span class="cp">#define SKPCR_PWMCLKEN	(1&lt;&lt;8)</span>

<span class="cm">/* USB Host controller */</span>
<span class="cp">#define SA1111_USB		0x0400</span>

<span class="cm">/*</span>
<span class="cm"> * Serial Audio Controller</span>
<span class="cm"> *</span>
<span class="cm"> * Registers</span>
<span class="cm"> *    SACR0             Serial Audio Common Control Register</span>
<span class="cm"> *    SACR1             Serial Audio Alternate Mode (I2C/MSB) Control Register</span>
<span class="cm"> *    SACR2             Serial Audio AC-link Control Register</span>
<span class="cm"> *    SASR0             Serial Audio I2S/MSB Interface &amp; FIFO Status Register</span>
<span class="cm"> *    SASR1             Serial Audio AC-link Interface &amp; FIFO Status Register</span>
<span class="cm"> *    SASCR             Serial Audio Status Clear Register</span>
<span class="cm"> *    L3_CAR            L3 Control Bus Address Register</span>
<span class="cm"> *    L3_CDR            L3 Control Bus Data Register</span>
<span class="cm"> *    ACCAR             AC-link Command Address Register</span>
<span class="cm"> *    ACCDR             AC-link Command Data Register</span>
<span class="cm"> *    ACSAR             AC-link Status Address Register</span>
<span class="cm"> *    ACSDR             AC-link Status Data Register</span>
<span class="cm"> *    SADTCS            Serial Audio DMA Transmit Control/Status Register</span>
<span class="cm"> *    SADTSA            Serial Audio DMA Transmit Buffer Start Address A</span>
<span class="cm"> *    SADTCA            Serial Audio DMA Transmit Buffer Count Register A</span>
<span class="cm"> *    SADTSB            Serial Audio DMA Transmit Buffer Start Address B</span>
<span class="cm"> *    SADTCB            Serial Audio DMA Transmit Buffer Count Register B</span>
<span class="cm"> *    SADRCS            Serial Audio DMA Receive Control/Status Register</span>
<span class="cm"> *    SADRSA            Serial Audio DMA Receive Buffer Start Address A</span>
<span class="cm"> *    SADRCA            Serial Audio DMA Receive Buffer Count Register A</span>
<span class="cm"> *    SADRSB            Serial Audio DMA Receive Buffer Start Address B</span>
<span class="cm"> *    SADRCB            Serial Audio DMA Receive Buffer Count Register B</span>
<span class="cm"> *    SAITR             Serial Audio Interrupt Test Register</span>
<span class="cm"> *    SADR              Serial Audio Data Register (16 x 32-bit)</span>
<span class="cm"> */</span>

<span class="cp">#define SA1111_SERAUDIO		0x0600</span>

<span class="cm">/*</span>
<span class="cm"> * These are offsets from the above base.</span>
<span class="cm"> */</span>
<span class="cp">#define SA1111_SACR0		0x00</span>
<span class="cp">#define SA1111_SACR1		0x04</span>
<span class="cp">#define SA1111_SACR2		0x08</span>
<span class="cp">#define SA1111_SASR0		0x0c</span>
<span class="cp">#define SA1111_SASR1		0x10</span>
<span class="cp">#define SA1111_SASCR		0x18</span>
<span class="cp">#define SA1111_L3_CAR		0x1c</span>
<span class="cp">#define SA1111_L3_CDR		0x20</span>
<span class="cp">#define SA1111_ACCAR		0x24</span>
<span class="cp">#define SA1111_ACCDR		0x28</span>
<span class="cp">#define SA1111_ACSAR		0x2c</span>
<span class="cp">#define SA1111_ACSDR		0x30</span>
<span class="cp">#define SA1111_SADTCS		0x34</span>
<span class="cp">#define SA1111_SADTSA		0x38</span>
<span class="cp">#define SA1111_SADTCA		0x3c</span>
<span class="cp">#define SA1111_SADTSB		0x40</span>
<span class="cp">#define SA1111_SADTCB		0x44</span>
<span class="cp">#define SA1111_SADRCS		0x48</span>
<span class="cp">#define SA1111_SADRSA		0x4c</span>
<span class="cp">#define SA1111_SADRCA		0x50</span>
<span class="cp">#define SA1111_SADRSB		0x54</span>
<span class="cp">#define SA1111_SADRCB		0x58</span>
<span class="cp">#define SA1111_SAITR		0x5c</span>
<span class="cp">#define SA1111_SADR		0x80</span>

<span class="cp">#ifndef CONFIG_ARCH_PXA</span>

<span class="cp">#define SACR0_ENB	(1&lt;&lt;0)</span>
<span class="cp">#define SACR0_BCKD	(1&lt;&lt;2)</span>
<span class="cp">#define SACR0_RST	(1&lt;&lt;3)</span>

<span class="cp">#define SACR1_AMSL	(1&lt;&lt;0)</span>
<span class="cp">#define SACR1_L3EN	(1&lt;&lt;1)</span>
<span class="cp">#define SACR1_L3MB	(1&lt;&lt;2)</span>
<span class="cp">#define SACR1_DREC	(1&lt;&lt;3)</span>
<span class="cp">#define SACR1_DRPL	(1&lt;&lt;4)</span>
<span class="cp">#define SACR1_ENLBF	(1&lt;&lt;5)</span>

<span class="cp">#define SACR2_TS3V	(1&lt;&lt;0)</span>
<span class="cp">#define SACR2_TS4V	(1&lt;&lt;1)</span>
<span class="cp">#define SACR2_WKUP	(1&lt;&lt;2)</span>
<span class="cp">#define SACR2_DREC	(1&lt;&lt;3)</span>
<span class="cp">#define SACR2_DRPL	(1&lt;&lt;4)</span>
<span class="cp">#define SACR2_ENLBF	(1&lt;&lt;5)</span>
<span class="cp">#define SACR2_RESET	(1&lt;&lt;6)</span>

<span class="cp">#define SASR0_TNF	(1&lt;&lt;0)</span>
<span class="cp">#define SASR0_RNE	(1&lt;&lt;1)</span>
<span class="cp">#define SASR0_BSY	(1&lt;&lt;2)</span>
<span class="cp">#define SASR0_TFS	(1&lt;&lt;3)</span>
<span class="cp">#define SASR0_RFS	(1&lt;&lt;4)</span>
<span class="cp">#define SASR0_TUR	(1&lt;&lt;5)</span>
<span class="cp">#define SASR0_ROR	(1&lt;&lt;6)</span>
<span class="cp">#define SASR0_L3WD	(1&lt;&lt;16)</span>
<span class="cp">#define SASR0_L3RD	(1&lt;&lt;17)</span>

<span class="cp">#define SASR1_TNF	(1&lt;&lt;0)</span>
<span class="cp">#define SASR1_RNE	(1&lt;&lt;1)</span>
<span class="cp">#define SASR1_BSY	(1&lt;&lt;2)</span>
<span class="cp">#define SASR1_TFS	(1&lt;&lt;3)</span>
<span class="cp">#define SASR1_RFS	(1&lt;&lt;4)</span>
<span class="cp">#define SASR1_TUR	(1&lt;&lt;5)</span>
<span class="cp">#define SASR1_ROR	(1&lt;&lt;6)</span>
<span class="cp">#define SASR1_CADT	(1&lt;&lt;16)</span>
<span class="cp">#define SASR1_SADR	(1&lt;&lt;17)</span>
<span class="cp">#define SASR1_RSTO	(1&lt;&lt;18)</span>
<span class="cp">#define SASR1_CLPM	(1&lt;&lt;19)</span>
<span class="cp">#define SASR1_CRDY	(1&lt;&lt;20)</span>
<span class="cp">#define SASR1_RS3V	(1&lt;&lt;21)</span>
<span class="cp">#define SASR1_RS4V	(1&lt;&lt;22)</span>

<span class="cp">#define SASCR_TUR	(1&lt;&lt;5)</span>
<span class="cp">#define SASCR_ROR	(1&lt;&lt;6)</span>
<span class="cp">#define SASCR_DTS	(1&lt;&lt;16)</span>
<span class="cp">#define SASCR_RDD	(1&lt;&lt;17)</span>
<span class="cp">#define SASCR_STO	(1&lt;&lt;18)</span>

<span class="cp">#define SADTCS_TDEN	(1&lt;&lt;0)</span>
<span class="cp">#define SADTCS_TDIE	(1&lt;&lt;1)</span>
<span class="cp">#define SADTCS_TDBDA	(1&lt;&lt;3)</span>
<span class="cp">#define SADTCS_TDSTA	(1&lt;&lt;4)</span>
<span class="cp">#define SADTCS_TDBDB	(1&lt;&lt;5)</span>
<span class="cp">#define SADTCS_TDSTB	(1&lt;&lt;6)</span>
<span class="cp">#define SADTCS_TBIU	(1&lt;&lt;7)</span>

<span class="cp">#define SADRCS_RDEN	(1&lt;&lt;0)</span>
<span class="cp">#define SADRCS_RDIE	(1&lt;&lt;1)</span>
<span class="cp">#define SADRCS_RDBDA	(1&lt;&lt;3)</span>
<span class="cp">#define SADRCS_RDSTA	(1&lt;&lt;4)</span>
<span class="cp">#define SADRCS_RDBDB	(1&lt;&lt;5)</span>
<span class="cp">#define SADRCS_RDSTB	(1&lt;&lt;6)</span>
<span class="cp">#define SADRCS_RBIU	(1&lt;&lt;7)</span>

<span class="cp">#define SAD_CS_DEN	(1&lt;&lt;0)</span>
<span class="cp">#define SAD_CS_DIE	(1&lt;&lt;1)	</span><span class="cm">/* Not functional on metal 1 */</span><span class="cp"></span>
<span class="cp">#define SAD_CS_DBDA	(1&lt;&lt;3)	</span><span class="cm">/* Not functional on metal 1 */</span><span class="cp"></span>
<span class="cp">#define SAD_CS_DSTA	(1&lt;&lt;4)</span>
<span class="cp">#define SAD_CS_DBDB	(1&lt;&lt;5)	</span><span class="cm">/* Not functional on metal 1 */</span><span class="cp"></span>
<span class="cp">#define SAD_CS_DSTB	(1&lt;&lt;6)</span>
<span class="cp">#define SAD_CS_BIU	(1&lt;&lt;7)	</span><span class="cm">/* Not functional on metal 1 */</span><span class="cp"></span>

<span class="cp">#define SAITR_TFS	(1&lt;&lt;0)</span>
<span class="cp">#define SAITR_RFS	(1&lt;&lt;1)</span>
<span class="cp">#define SAITR_TUR	(1&lt;&lt;2)</span>
<span class="cp">#define SAITR_ROR	(1&lt;&lt;3)</span>
<span class="cp">#define SAITR_CADT	(1&lt;&lt;4)</span>
<span class="cp">#define SAITR_SADR	(1&lt;&lt;5)</span>
<span class="cp">#define SAITR_RSTO	(1&lt;&lt;6)</span>
<span class="cp">#define SAITR_TDBDA	(1&lt;&lt;8)</span>
<span class="cp">#define SAITR_TDBDB	(1&lt;&lt;9)</span>
<span class="cp">#define SAITR_RDBDA	(1&lt;&lt;10)</span>
<span class="cp">#define SAITR_RDBDB	(1&lt;&lt;11)</span>

<span class="cp">#endif  </span><span class="cm">/* !CONFIG_ARCH_PXA */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * General-Purpose I/O Interface</span>
<span class="cm"> *</span>
<span class="cm"> * Registers</span>
<span class="cm"> *    PA_DDR		GPIO Block A Data Direction</span>
<span class="cm"> *    PA_DRR/PA_DWR	GPIO Block A Data Value Register (read/write)</span>
<span class="cm"> *    PA_SDR		GPIO Block A Sleep Direction</span>
<span class="cm"> *    PA_SSR		GPIO Block A Sleep State</span>
<span class="cm"> *    PB_DDR		GPIO Block B Data Direction</span>
<span class="cm"> *    PB_DRR/PB_DWR	GPIO Block B Data Value Register (read/write)</span>
<span class="cm"> *    PB_SDR		GPIO Block B Sleep Direction</span>
<span class="cm"> *    PB_SSR		GPIO Block B Sleep State</span>
<span class="cm"> *    PC_DDR		GPIO Block C Data Direction</span>
<span class="cm"> *    PC_DRR/PC_DWR	GPIO Block C Data Value Register (read/write)</span>
<span class="cm"> *    PC_SDR		GPIO Block C Sleep Direction</span>
<span class="cm"> *    PC_SSR		GPIO Block C Sleep State</span>
<span class="cm"> */</span>

<span class="cp">#define SA1111_GPIO	0x1000</span>

<span class="cp">#define SA1111_GPIO_PADDR	(0x000)</span>
<span class="cp">#define SA1111_GPIO_PADRR	(0x004)</span>
<span class="cp">#define SA1111_GPIO_PADWR	(0x004)</span>
<span class="cp">#define SA1111_GPIO_PASDR	(0x008)</span>
<span class="cp">#define SA1111_GPIO_PASSR	(0x00c)</span>
<span class="cp">#define SA1111_GPIO_PBDDR	(0x010)</span>
<span class="cp">#define SA1111_GPIO_PBDRR	(0x014)</span>
<span class="cp">#define SA1111_GPIO_PBDWR	(0x014)</span>
<span class="cp">#define SA1111_GPIO_PBSDR	(0x018)</span>
<span class="cp">#define SA1111_GPIO_PBSSR	(0x01c)</span>
<span class="cp">#define SA1111_GPIO_PCDDR	(0x020)</span>
<span class="cp">#define SA1111_GPIO_PCDRR	(0x024)</span>
<span class="cp">#define SA1111_GPIO_PCDWR	(0x024)</span>
<span class="cp">#define SA1111_GPIO_PCSDR	(0x028)</span>
<span class="cp">#define SA1111_GPIO_PCSSR	(0x02c)</span>

<span class="cp">#define GPIO_A0		(1 &lt;&lt; 0)</span>
<span class="cp">#define GPIO_A1		(1 &lt;&lt; 1)</span>
<span class="cp">#define GPIO_A2		(1 &lt;&lt; 2)</span>
<span class="cp">#define GPIO_A3		(1 &lt;&lt; 3)</span>

<span class="cp">#define GPIO_B0		(1 &lt;&lt; 8)</span>
<span class="cp">#define GPIO_B1		(1 &lt;&lt; 9)</span>
<span class="cp">#define GPIO_B2		(1 &lt;&lt; 10)</span>
<span class="cp">#define GPIO_B3		(1 &lt;&lt; 11)</span>
<span class="cp">#define GPIO_B4		(1 &lt;&lt; 12)</span>
<span class="cp">#define GPIO_B5		(1 &lt;&lt; 13)</span>
<span class="cp">#define GPIO_B6		(1 &lt;&lt; 14)</span>
<span class="cp">#define GPIO_B7		(1 &lt;&lt; 15)</span>

<span class="cp">#define GPIO_C0		(1 &lt;&lt; 16)</span>
<span class="cp">#define GPIO_C1		(1 &lt;&lt; 17)</span>
<span class="cp">#define GPIO_C2		(1 &lt;&lt; 18)</span>
<span class="cp">#define GPIO_C3		(1 &lt;&lt; 19)</span>
<span class="cp">#define GPIO_C4		(1 &lt;&lt; 20)</span>
<span class="cp">#define GPIO_C5		(1 &lt;&lt; 21)</span>
<span class="cp">#define GPIO_C6		(1 &lt;&lt; 22)</span>
<span class="cp">#define GPIO_C7		(1 &lt;&lt; 23)</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt Controller</span>
<span class="cm"> *</span>
<span class="cm"> * Registers</span>
<span class="cm"> *    INTTEST0		Test register 0</span>
<span class="cm"> *    INTTEST1		Test register 1</span>
<span class="cm"> *    INTEN0		Interrupt Enable register 0</span>
<span class="cm"> *    INTEN1		Interrupt Enable register 1</span>
<span class="cm"> *    INTPOL0		Interrupt Polarity selection 0</span>
<span class="cm"> *    INTPOL1		Interrupt Polarity selection 1</span>
<span class="cm"> *    INTTSTSEL		Interrupt source selection</span>
<span class="cm"> *    INTSTATCLR0	Interrupt Status/Clear 0</span>
<span class="cm"> *    INTSTATCLR1	Interrupt Status/Clear 1</span>
<span class="cm"> *    INTSET0		Interrupt source set 0</span>
<span class="cm"> *    INTSET1		Interrupt source set 1</span>
<span class="cm"> *    WAKE_EN0		Wake-up source enable 0</span>
<span class="cm"> *    WAKE_EN1		Wake-up source enable 1</span>
<span class="cm"> *    WAKE_POL0		Wake-up polarity selection 0</span>
<span class="cm"> *    WAKE_POL1		Wake-up polarity selection 1</span>
<span class="cm"> */</span>
<span class="cp">#define SA1111_INTC		0x1600</span>

<span class="cm">/*</span>
<span class="cm"> * These are offsets from the above base.</span>
<span class="cm"> */</span>
<span class="cp">#define SA1111_INTTEST0		0x0000</span>
<span class="cp">#define SA1111_INTTEST1		0x0004</span>
<span class="cp">#define SA1111_INTEN0		0x0008</span>
<span class="cp">#define SA1111_INTEN1		0x000c</span>
<span class="cp">#define SA1111_INTPOL0		0x0010</span>
<span class="cp">#define SA1111_INTPOL1		0x0014</span>
<span class="cp">#define SA1111_INTTSTSEL	0x0018</span>
<span class="cp">#define SA1111_INTSTATCLR0	0x001c</span>
<span class="cp">#define SA1111_INTSTATCLR1	0x0020</span>
<span class="cp">#define SA1111_INTSET0		0x0024</span>
<span class="cp">#define SA1111_INTSET1		0x0028</span>
<span class="cp">#define SA1111_WAKEEN0		0x002c</span>
<span class="cp">#define SA1111_WAKEEN1		0x0030</span>
<span class="cp">#define SA1111_WAKEPOL0		0x0034</span>
<span class="cp">#define SA1111_WAKEPOL1		0x0038</span>

<span class="cm">/* PS/2 Trackpad and Mouse Interfaces */</span>
<span class="cp">#define SA1111_KBD		0x0a00</span>
<span class="cp">#define SA1111_MSE		0x0c00</span>

<span class="cm">/* PCMCIA Interface */</span>
<span class="cp">#define SA1111_PCMCIA		0x1600</span>





<span class="k">extern</span> <span class="k">struct</span> <span class="n">bus_type</span> <span class="n">sa1111_bus_type</span><span class="p">;</span>

<span class="cp">#define SA1111_DEVID_SBI	(1 &lt;&lt; 0)</span>
<span class="cp">#define SA1111_DEVID_SK		(1 &lt;&lt; 1)</span>
<span class="cp">#define SA1111_DEVID_USB	(1 &lt;&lt; 2)</span>
<span class="cp">#define SA1111_DEVID_SAC	(1 &lt;&lt; 3)</span>
<span class="cp">#define SA1111_DEVID_SSP	(1 &lt;&lt; 4)</span>
<span class="cp">#define SA1111_DEVID_PS2	(3 &lt;&lt; 5)</span>
<span class="cp">#define SA1111_DEVID_PS2_KBD	(1 &lt;&lt; 5)</span>
<span class="cp">#define SA1111_DEVID_PS2_MSE	(1 &lt;&lt; 6)</span>
<span class="cp">#define SA1111_DEVID_GPIO	(1 &lt;&lt; 7)</span>
<span class="cp">#define SA1111_DEVID_INT	(1 &lt;&lt; 8)</span>
<span class="cp">#define SA1111_DEVID_PCMCIA	(1 &lt;&lt; 9)</span>

<span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device</span>	<span class="n">dev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">devid</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">resource</span>	<span class="n">res</span><span class="p">;</span>
	<span class="kt">void</span> <span class="n">__iomem</span>	<span class="o">*</span><span class="n">mapbase</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">skpcr_mask</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">irq</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
	<span class="n">u64</span>		<span class="n">dma_mask</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define SA1111_DEV(_d)	container_of((_d), struct sa1111_dev, dev)</span>

<span class="cp">#define sa1111_get_drvdata(d)	dev_get_drvdata(&amp;(d)-&gt;dev)</span>
<span class="cp">#define sa1111_set_drvdata(d,p)	dev_set_drvdata(&amp;(d)-&gt;dev, p)</span>

<span class="k">struct</span> <span class="n">sa1111_driver</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">device_driver</span>	<span class="n">drv</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>		<span class="n">devid</span><span class="p">;</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">probe</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">remove</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">suspend</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">,</span> <span class="n">pm_message_t</span><span class="p">);</span>
	<span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">resume</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">shutdown</span><span class="p">)(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#define SA1111_DRV(_d)	container_of((_d), struct sa1111_driver, drv)</span>

<span class="cp">#define SA1111_DRIVER_NAME(_sadev) ((_sadev)-&gt;dev.driver-&gt;name)</span>

<span class="cm">/*</span>
<span class="cm"> * These frob the SKPCR register, and call platform specific</span>
<span class="cm"> * enable/disable functions.</span>
<span class="cm"> */</span>
<span class="kt">int</span> <span class="n">sa1111_enable_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">sa1111_disable_device</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sa1111_pll_clock</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#define SA1111_AUDIO_ACLINK	0</span>
<span class="cp">#define SA1111_AUDIO_I2S	1</span>

<span class="kt">void</span> <span class="n">sa1111_select_audio_mode</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="n">sadev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">sa1111_set_audio_rate</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="n">sadev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">rate</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">sa1111_get_audio_rate</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="n">sadev</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">sa1111_check_dma_bug</span><span class="p">(</span><span class="n">dma_addr_t</span> <span class="n">addr</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">sa1111_driver_register</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_driver</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">sa1111_driver_unregister</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_driver</span> <span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="n">sa1111_set_io_dir</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="n">sadev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bits</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">sleep_dir</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">sa1111_set_io</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="n">sadev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bits</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">v</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">sa1111_set_sleep_io</span><span class="p">(</span><span class="k">struct</span> <span class="n">sa1111_dev</span> <span class="o">*</span><span class="n">sadev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">bits</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">v</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">sa1111_platform_data</span> <span class="p">{</span>
	<span class="kt">int</span>	<span class="n">irq_base</span><span class="p">;</span>	<span class="cm">/* base for cascaded on-chip IRQs */</span>
	<span class="kt">unsigned</span> <span class="n">disable_devs</span><span class="p">;</span>
	<span class="kt">void</span>	<span class="o">*</span><span class="n">data</span><span class="p">;</span>
	<span class="kt">int</span>	<span class="p">(</span><span class="o">*</span><span class="n">enable</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span><span class="p">);</span>
	<span class="kt">void</span>	<span class="p">(</span><span class="o">*</span><span class="n">disable</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif  </span><span class="cm">/* _ASM_ARCH_SA1111 */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
