<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › include › asm › hardware › pci_v3.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>pci_v3.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  arch/arm/include/asm/hardware/pci_v3.h</span>
<span class="cm"> *</span>
<span class="cm"> *  Internal header file PCI V3 chip</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) ARM Limited</span>
<span class="cm"> *  Copyright (C) 2000-2001 Deep Blue Solutions Ltd.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>
<span class="cp">#ifndef ASM_ARM_HARDWARE_PCI_V3_H</span>
<span class="cp">#define ASM_ARM_HARDWARE_PCI_V3_H</span>

<span class="cm">/* -------------------------------------------------------------------------------</span>
<span class="cm"> *  V3 Local Bus to PCI Bridge definitions</span>
<span class="cm"> * -------------------------------------------------------------------------------</span>
<span class="cm"> *  Registers (these are taken from page 129 of the EPC User&#39;s Manual Rev 1.04</span>
<span class="cm"> *  All V3 register names are prefaced by V3_ to avoid clashing with any other</span>
<span class="cm"> *  PCI definitions.  Their names match the user&#39;s manual.</span>
<span class="cm"> * </span>
<span class="cm"> *  I&#39;m assuming that I20 is disabled.</span>
<span class="cm"> * </span>
<span class="cm"> */</span>
<span class="cp">#define V3_PCI_VENDOR                   0x00000000</span>
<span class="cp">#define V3_PCI_DEVICE                   0x00000002</span>
<span class="cp">#define V3_PCI_CMD                      0x00000004</span>
<span class="cp">#define V3_PCI_STAT                     0x00000006</span>
<span class="cp">#define V3_PCI_CC_REV                   0x00000008</span>
<span class="cp">#define V3_PCI_HDR_CFG                  0x0000000C</span>
<span class="cp">#define V3_PCI_IO_BASE                  0x00000010</span>
<span class="cp">#define V3_PCI_BASE0                    0x00000014</span>
<span class="cp">#define V3_PCI_BASE1                    0x00000018</span>
<span class="cp">#define V3_PCI_SUB_VENDOR               0x0000002C</span>
<span class="cp">#define V3_PCI_SUB_ID                   0x0000002E</span>
<span class="cp">#define V3_PCI_ROM                      0x00000030</span>
<span class="cp">#define V3_PCI_BPARAM                   0x0000003C</span>
<span class="cp">#define V3_PCI_MAP0                     0x00000040</span>
<span class="cp">#define V3_PCI_MAP1                     0x00000044</span>
<span class="cp">#define V3_PCI_INT_STAT                 0x00000048</span>
<span class="cp">#define V3_PCI_INT_CFG                  0x0000004C </span>
<span class="cp">#define V3_LB_BASE0                     0x00000054</span>
<span class="cp">#define V3_LB_BASE1                     0x00000058</span>
<span class="cp">#define V3_LB_MAP0                      0x0000005E</span>
<span class="cp">#define V3_LB_MAP1                      0x00000062</span>
<span class="cp">#define V3_LB_BASE2                     0x00000064</span>
<span class="cp">#define V3_LB_MAP2                      0x00000066</span>
<span class="cp">#define V3_LB_SIZE                      0x00000068</span>
<span class="cp">#define V3_LB_IO_BASE                   0x0000006E</span>
<span class="cp">#define V3_FIFO_CFG                     0x00000070</span>
<span class="cp">#define V3_FIFO_PRIORITY                0x00000072</span>
<span class="cp">#define V3_FIFO_STAT                    0x00000074</span>
<span class="cp">#define V3_LB_ISTAT                     0x00000076</span>
<span class="cp">#define V3_LB_IMASK                     0x00000077</span>
<span class="cp">#define V3_SYSTEM                       0x00000078</span>
<span class="cp">#define V3_LB_CFG                       0x0000007A</span>
<span class="cp">#define V3_PCI_CFG                      0x0000007C</span>
<span class="cp">#define V3_DMA_PCI_ADR0                 0x00000080</span>
<span class="cp">#define V3_DMA_PCI_ADR1                 0x00000090</span>
<span class="cp">#define V3_DMA_LOCAL_ADR0               0x00000084</span>
<span class="cp">#define V3_DMA_LOCAL_ADR1               0x00000094</span>
<span class="cp">#define V3_DMA_LENGTH0                  0x00000088</span>
<span class="cp">#define V3_DMA_LENGTH1                  0x00000098</span>
<span class="cp">#define V3_DMA_CSR0                     0x0000008B</span>
<span class="cp">#define V3_DMA_CSR1                     0x0000009B</span>
<span class="cp">#define V3_DMA_CTLB_ADR0                0x0000008C</span>
<span class="cp">#define V3_DMA_CTLB_ADR1                0x0000009C</span>
<span class="cp">#define V3_DMA_DELAY                    0x000000E0</span>
<span class="cp">#define V3_MAIL_DATA                    0x000000C0</span>
<span class="cp">#define V3_PCI_MAIL_IEWR                0x000000D0</span>
<span class="cp">#define V3_PCI_MAIL_IERD                0x000000D2</span>
<span class="cp">#define V3_LB_MAIL_IEWR                 0x000000D4</span>
<span class="cp">#define V3_LB_MAIL_IERD                 0x000000D6</span>
<span class="cp">#define V3_MAIL_WR_STAT                 0x000000D8</span>
<span class="cp">#define V3_MAIL_RD_STAT                 0x000000DA</span>
<span class="cp">#define V3_QBA_MAP                      0x000000DC</span>

<span class="cm">/*  PCI COMMAND REGISTER bits</span>
<span class="cm"> */</span>
<span class="cp">#define V3_COMMAND_M_FBB_EN             (1 &lt;&lt; 9)</span>
<span class="cp">#define V3_COMMAND_M_SERR_EN            (1 &lt;&lt; 8)</span>
<span class="cp">#define V3_COMMAND_M_PAR_EN             (1 &lt;&lt; 6)</span>
<span class="cp">#define V3_COMMAND_M_MASTER_EN          (1 &lt;&lt; 2)</span>
<span class="cp">#define V3_COMMAND_M_MEM_EN             (1 &lt;&lt; 1)</span>
<span class="cp">#define V3_COMMAND_M_IO_EN              (1 &lt;&lt; 0)</span>

<span class="cm">/*  SYSTEM REGISTER bits</span>
<span class="cm"> */</span>
<span class="cp">#define V3_SYSTEM_M_RST_OUT             (1 &lt;&lt; 15)</span>
<span class="cp">#define V3_SYSTEM_M_LOCK                (1 &lt;&lt; 14)</span>

<span class="cm">/*  PCI_CFG bits</span>
<span class="cm"> */</span>
<span class="cp">#define V3_PCI_CFG_M_I2O_EN		(1 &lt;&lt; 15)</span>
<span class="cp">#define V3_PCI_CFG_M_IO_REG_DIS		(1 &lt;&lt; 14)</span>
<span class="cp">#define V3_PCI_CFG_M_IO_DIS		(1 &lt;&lt; 13)</span>
<span class="cp">#define V3_PCI_CFG_M_EN3V		(1 &lt;&lt; 12)</span>
<span class="cp">#define V3_PCI_CFG_M_RETRY_EN           (1 &lt;&lt; 10)</span>
<span class="cp">#define V3_PCI_CFG_M_AD_LOW1            (1 &lt;&lt; 9)</span>
<span class="cp">#define V3_PCI_CFG_M_AD_LOW0            (1 &lt;&lt; 8)</span>

<span class="cm">/*  PCI_BASE register bits (PCI -&gt; Local Bus)</span>
<span class="cm"> */</span>
<span class="cp">#define V3_PCI_BASE_M_ADR_BASE          0xFFF00000</span>
<span class="cp">#define V3_PCI_BASE_M_ADR_BASEL         0x000FFF00</span>
<span class="cp">#define V3_PCI_BASE_M_PREFETCH          (1 &lt;&lt; 3)</span>
<span class="cp">#define V3_PCI_BASE_M_TYPE              (3 &lt;&lt; 1)</span>
<span class="cp">#define V3_PCI_BASE_M_IO                (1 &lt;&lt; 0)</span>

<span class="cm">/*  PCI MAP register bits (PCI -&gt; Local bus)</span>
<span class="cm"> */</span>
<span class="cp">#define V3_PCI_MAP_M_MAP_ADR            0xFFF00000</span>
<span class="cp">#define V3_PCI_MAP_M_RD_POST_INH        (1 &lt;&lt; 15)</span>
<span class="cp">#define V3_PCI_MAP_M_ROM_SIZE           (3 &lt;&lt; 10)</span>
<span class="cp">#define V3_PCI_MAP_M_SWAP               (3 &lt;&lt; 8)</span>
<span class="cp">#define V3_PCI_MAP_M_ADR_SIZE           0x000000F0</span>
<span class="cp">#define V3_PCI_MAP_M_REG_EN             (1 &lt;&lt; 1)</span>
<span class="cp">#define V3_PCI_MAP_M_ENABLE             (1 &lt;&lt; 0)</span>

<span class="cm">/*</span>
<span class="cm"> *  LB_BASE0,1 register bits (Local bus -&gt; PCI)</span>
<span class="cm"> */</span>
<span class="cp">#define V3_LB_BASE_ADR_BASE		0xfff00000</span>
<span class="cp">#define V3_LB_BASE_SWAP			(3 &lt;&lt; 8)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE		(15 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_PREFETCH		(1 &lt;&lt; 3)</span>
<span class="cp">#define V3_LB_BASE_ENABLE		(1 &lt;&lt; 0)</span>

<span class="cp">#define V3_LB_BASE_ADR_SIZE_1MB		(0 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_2MB		(1 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_4MB		(2 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_8MB		(3 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_16MB	(4 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_32MB	(5 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_64MB	(6 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_128MB	(7 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_256MB	(8 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_512MB	(9 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_1GB		(10 &lt;&lt; 4)</span>
<span class="cp">#define V3_LB_BASE_ADR_SIZE_2GB		(11 &lt;&lt; 4)</span>

<span class="cp">#define v3_addr_to_lb_base(a)	((a) &amp; V3_LB_BASE_ADR_BASE)</span>

<span class="cm">/*</span>
<span class="cm"> *  LB_MAP0,1 register bits (Local bus -&gt; PCI)</span>
<span class="cm"> */</span>
<span class="cp">#define V3_LB_MAP_MAP_ADR		0xfff0</span>
<span class="cp">#define V3_LB_MAP_TYPE			(7 &lt;&lt; 1)</span>
<span class="cp">#define V3_LB_MAP_AD_LOW_EN		(1 &lt;&lt; 0)</span>

<span class="cp">#define V3_LB_MAP_TYPE_IACK		(0 &lt;&lt; 1)</span>
<span class="cp">#define V3_LB_MAP_TYPE_IO		(1 &lt;&lt; 1)</span>
<span class="cp">#define V3_LB_MAP_TYPE_MEM		(3 &lt;&lt; 1)</span>
<span class="cp">#define V3_LB_MAP_TYPE_CONFIG		(5 &lt;&lt; 1)</span>
<span class="cp">#define V3_LB_MAP_TYPE_MEM_MULTIPLE	(6 &lt;&lt; 1)</span>

<span class="cp">#define v3_addr_to_lb_map(a)	(((a) &gt;&gt; 16) &amp; V3_LB_MAP_MAP_ADR)</span>

<span class="cm">/*</span>
<span class="cm"> *  LB_BASE2 register bits (Local bus -&gt; PCI IO)</span>
<span class="cm"> */</span>
<span class="cp">#define V3_LB_BASE2_ADR_BASE		0xff00</span>
<span class="cp">#define V3_LB_BASE2_SWAP		(3 &lt;&lt; 6)</span>
<span class="cp">#define V3_LB_BASE2_ENABLE		(1 &lt;&lt; 0)</span>

<span class="cp">#define v3_addr_to_lb_base2(a)	(((a) &gt;&gt; 16) &amp; V3_LB_BASE2_ADR_BASE)</span>

<span class="cm">/*</span>
<span class="cm"> *  LB_MAP2 register bits (Local bus -&gt; PCI IO)</span>
<span class="cm"> */</span>
<span class="cp">#define V3_LB_MAP2_MAP_ADR		0xff00</span>

<span class="cp">#define v3_addr_to_lb_map2(a)	(((a) &gt;&gt; 16) &amp; V3_LB_MAP2_MAP_ADR)</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
