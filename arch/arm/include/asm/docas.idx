f | io.h | s | 11K | 289 | Russell King | rmk+kernel@arm.linux.org.uk | 1337931565 |  | ARM: fix out[bwl]()  out[bwl]() had a side effect that gcc read-back from the register after writing its value.  This causes a problem for at least 3c589_cs, which spits out lots of "adapter failure, FIFO diagnostic register 2011."  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | smp_twd.h | s | 1007B | 36 | Marc Zyngier | marc.zyngier@arm.com | 1331646354 |  | ARM: smp_twd: remove old local timer interface  Now that all users of the previous local timer interface have been converted to the runtime registration API, make this interface the only one supported for this driver.  Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
f | kmap_types.h | s | 485B | 30 | Jason Wessel | jason.wessel@windriver.com | 1274407461 |  | kdb: core for kgdb back end (2 of 2)  This patch contains the hooks and instrumentation into kernel which live outside the kernel/debug directory, which the kdb core will call to run commands like lsmod, dmesg, bt etc...  CC: linux-arch@vger.kernel.org Signed-off-by: Jason Wessel <jason.wessel@windriver.com> Signed-off-by: Martin Hicks <mort@sgi.com>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | pci.h | s | 1.6K | 56 | Bjorn Helgaas | bhelgaas@google.com | 1330053544 |  | PCI: collapse pcibios_resource_to_bus  Everybody uses the generic pcibios_resource_to_bus() supplied by the core now, so remove the ARCH_HAS_GENERIC_PCI_OFFSETS used during conversion.  Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | pgtable-hwdef.h | s | 467B | 17 | Catalin Marinas | catalin.marinas@arm.com | 1323340239 |  | ARM: LPAE: Introduce the 3-level page table format definitions  This patch introduces the pgtable-3level*.h files with definitions specific to the LPAE page table format (3 levels of page tables).  Each table is 4KB and has 512 64-bit entries. An entry can point to a 40-bit physical address. The young, write and exec software bits share the corresponding hardware bits (negated). Other software bits use spare bits in the PTE.  The patch also changes some variable types from unsigned long or int to pteval_t or pgprot_t.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | thread_notify.h | s | 1.2K | 40 | Catalin Marinas | catalin.marinas@arm.com | 1302466416 |  | ARM: 6867/1: Introduce THREAD_NOTIFY_COPY for copy_thread() hooks  This patch adds THREAD_NOTIFY_COPY for calling registered handlers during the copy_thread() function call. It also changes the VFP handler to use a switch statement rather than if..else and ignore this event.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | nwflash.h | s | 213B | 7 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | barrier.h | s | 2.3K | 60 | R Sricharan | r.sricharan@ti.com | 1333475950 |  | ARM: OMAP2+: Fix omap2+ build error  With CONFIG_OMAP4_ERRATA_I688 enabled, omap2+ build was broken as below:  arch/arm/kernel/io.c: In function '_memcpy_toio': arch/arm/kernel/io.c:29: error: implicit declaration of function 'outer_sync' make[1]: *** [arch/arm/kernel/io.o] Error 1  This was caused by commit 9f97da78 (Disintegrate asm/system.h for ARM).  Signed-off-by: R Sricharan <r.sricharan@ti.com> Acked-by: Santosh Shilimkar <santosh.shilimkar@ti.com> [tony@atomide.com: updated comments] Signed-off-by: Tony Lindgren <tony@atomide.com>
f | pgtable-2level.h | s | 6.6K | 165 | Catalin Marinas | catalin.marinas@arm.com | 1323340237 |  | ARM: LPAE: Move page table maintenance macros to pgtable-2level.h  The page table maintenance macros need to be duplicated between the classic and the LPAE MMU so this patch moves those that are not common to the pgtable-2level.h file.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | cpu.h | s | 520B | 21 | Thomas Gleixner | tglx@linutronix.de | 1335434771 |  | arm: Use generic idle thread allocation  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Rusty Russell <rusty@rustcorp.com.au> Cc: Paul E. McKenney <paulmck@linux.vnet.ibm.com> Cc: Srivatsa S. Bhat <srivatsa.bhat@linux.vnet.ibm.com> Cc: Russell King <linux@arm.linux.org.uk> Tested-by: Frank Rowand <frank.rowand@am.sony.com> Link: http://lkml.kernel.org/r/20120420124557.448826362@linutronix.de
f | edac.h | s | 1.5K | 46 | Rob Herring | rob.herring@calxeda.com | 1323592550 |  | ARM: 7201/1: add EDAC atomic_scrub function  Add support for architecture specific EDAC atomic_scrub to ARM. Only ARMv6+ is implemented as ldrex/strex instructions are needed. Supporting EDAC on ARMv5 or earlier is unlikely at this point anyway.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | glue-cache.h | s | 2.8K | 126 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | compiler.h | s | 550B | 12 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | delay.h | s | 1.2K | 36 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | ide.h | s | 527B | 17 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | cacheflush.h | s | 10K | 305 | Will Deacon | will.deacon@arm.com | 1335953569 |  | ARM: 7408/1: cacheflush: return error to userspace when flushing syscall fails  The cacheflush syscall can fail for two reasons:  (1) The arguments are invalid (nonsensical address range or no VMA)  (2) The region generates a translation fault on a VIPT or PIPT cache  This patch allows do_cache_op to return an error code to userspace in the case of the above. The various coherent_user_range implementations are modified to return 0 in the case of VIVT caches or -EFAULT in the case of an abort on v6/v7 cores.  Reviewed-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | hw_breakpoint.h | s | 3.4K | 110 | Will Deacon | will.deacon@arm.com | 1314783768 |  | ARM: hw_breakpoint: add support for multiple watchpoints  ARM debug architecture 7.1 mandates that the DFAR is updated on a watchpoint debug exception to contain the faulting virtual address of the memory access. This allows us to determine which watchpoints have fired and therefore report useful information to userspace.  This patch adds support for using the DFAR in the watchpoint handler, which allows us to support multiple watchpoints on CPUs implementing the new debug architecture.  Signed-off-by: Will Deacon <will.deacon@arm.com>
f | traps.h | s | 1.3K | 43 | Russell King | rmk+kernel@arm.linux.org.uk | 1327314251 |  | ARM: earlier initialization of vectors page  Initialize the contents of the vectors page immediately after we allocate the page, but before we map it.  This avoids any possible aliases with other mappings which may need to be flushed after the page has been mapped irrespective of the cache type.  We follow this later with a flush_cache_all() after all static memory mappings have been initialized, which ensures that this is safe from any cache effects.  Tested-by: Catalin Marinas <catalin.marinas@arm.com> Reviewed-by: Catalin Marinas <catalin.marinas@arm.com> Acked-by: Nicolas Pitre <nico@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | memblock.h | s | 245B | 7 | Russell King | rmk+kernel@arm.linux.org.uk | 1326466955 |  | ARM: Add arm_memblock_steal() to allocate memory away from the kernel  Several platforms are now using the memblock_alloc+memblock_free+ memblock_remove trick to obtain memory which won't be mapped in the kernel's page tables.  Most platforms do this (correctly) in the ->reserve callback.  However, OMAP has started to call these functions outside of this callback, and this is extremely unsafe - memory will not be unmapped, and could well be given out after memblock is no longer responsible for its management.  So, provide arm_memblock_steal() to perform this function, and ensure that it panic()s if it is used inappropriately.  Convert everyone over, including OMAP.  As a result, OMAP with OMAP4_ERRATA_I688 enabled will panic on boot with this change.  Mark this option as BROKEN and make it depend on BROKEN.  OMAP needs to be fixed, or 137d105d50 (ARM: OMAP4: Fix errata i688 with MPU interconnect barriers.) reverted until such time it can be fixed correctly.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | glue-proc.h | s | 4.2K | 218 | Russell King | rmk+kernel@arm.linux.org.uk | 1336193450 |  | ARM: Remove support for ARMv3 ARM610 and ARM710 CPUs  This patch removes support for ARMv3 CPUs, which haven't worked properly for quite some time (see the FIXME comment in arch/arm/mm/fault.c).  The only V3 parts left is the cache model for ARMv3, which is needed for some odd reason by ARM740T CPUs, and being able to build with -march=armv3, which is required for the RiscPC platform due to its bus structure.  Acked-by: Will Deacon <will.deacon@arm.com> Acked-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | segment.h | s | 197B | 7 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | stacktrace.h | s | 353B | 12 | Catalin Marinas | catalin.marinas@arm.com | 1234444877 |  | [ARM] 5382/1: unwind: Reorganise the stacktrace support  This patch changes the walk_stacktrace and its callers for easier integration of stack unwinding. The arch/arm/kernel/stacktrace.h file is also moved to arch/arm/include/asm/stacktrace.h.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | current.h | s | 317B | 10 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | elf.h | s | 4.1K | 107 | Will Deacon | will.deacon@arm.com | 1332581931 |  | ARM: 7294/1: vectors: use gate_vma for vectors user mapping  The current user mapping for the vectors page is inserted as a `horrible hack vma' into each task via arch_setup_additional_pages. This causes problems with the MM subsystem and vm_normal_page, as described here:  https://lkml.org/lkml/2012/1/14/55  Following the suggestion from Hugh in the above thread, this patch uses the gate_vma for the vectors user mapping, therefore consolidating the horrible hack VMAs into one.  Acked-and-Tested-by: Nicolas Pitre <nico@linaro.org>  Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | ecard.h | s | 5.9K | 173 | Russell King | rmk+kernel@arm.linux.org.uk | 1313567056 |  | ARM: io: ecard: move ioaddr() inside __ecard_address  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | vfp.h | s | 2.5K | 78 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | seccomp.h | s | 274B | 8 | Nicolas Pitre | nicolas.pitre@linaro.org | 1285986738 |  | ARM: SECCOMP support  Signed-off-by: Nicolas Pitre <nicolas.pitre@linaro.org>
f | tlb.h | s | 5.7K | 196 | Catalin Marinas | catalin.marinas@arm.com | 1328204262 |  | ARM: 7302/1: Add TLB flushing for both entries in a PMD  Linux uses two PMD entries for a PTE with the classic page table format, covering 2MB range. However, the __pte_free_tlb() function only adds a single TLB flush corresponding to 1MB range covering 'addr'. On Cortex-A15, level 1 entries can be cached by the TLB independently of the level 2 entries and without additional flushing a PMD entry would be left pointing at the wrong PTE. The patch limits the TLB flushing range to two 4KB pages around the 1MB boundary within PMD.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | ucontext.h | s | 2.8K | 86 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | serial.h | s | 406B | 16 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | unaligned.h | s | 439B | 16 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | pgtable-2level-types.h | s | 1.8K | 56 | Catalin Marinas | catalin.marinas@arm.com | 1317912005 |  | ARM: 7076/1: LPAE: Add (pte||pmd)val_t type definitions as u32  This patch defines the (pte||pmd)val_t as u32 and changes the page table types to be based on these. The PMD bits are converted to the corresponding type using the _AT macro.  The flush_pmd_entry/clean_pmd_entry argument was changed to (void *) to allow them to be used with both PGD and PMD pointers and avoid code duplication.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | tcm.h | s | 937B | 28 | Linus Walleij | linus.walleij@linaro.org | 1309981785 |  | ARM: 6985/1: export functions to determine the presence of I/DTCM  By allowing code to detect whether DTCM or ITCM is present, code paths involving TCM can be avoided when running on platforms that lack it. This is good for creating single kernels across several archs, if some of them utilize TCM but others don't.  Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | cti.h | s | 3.9K | 160 | Ming Lei | ming.lei@canonical.com | 1322838993 |  | arm: introduce cross trigger interface helpers  OMAP4 uses cross trigger interface(CTI) to route performance monitor irq to GIC, so introduce cti helpers to make access for cti easily.  Acked-by: Jean Pihet <j-pihet@ti.com> Signed-off-by: Ming Lei <ming.lei@canonical.com> Signed-off-by: Will Deacon <will.deacon@arm.com>
f | termios.h | s | 2.6K | 79 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | dma-mapping.h | s | 8.9K | 243 | Marek Szyprowski | m.szyprowski@samsung.com | 1337605582 |  | ARM: dma-mapping: use alloc, mmap, free from dma_ops  This patch converts dma_alloc/free/mmap_{coherent,writecombine} functions to use generic alloc/free/mmap methods from dma_map_ops structure. A new DMA_ATTR_WRITE_COMBINE DMA attribute have been introduced to implement writecombine methods.  Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Arnd Bergmann <arnd@arndb.de> Tested-By: Subash Patel <subash.ramaswamy@linaro.org>
f | domain.h | s | 2.6K | 96 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | smp.h | s | 2.3K | 76 | Will Deacon | will.deacon@arm.com | 1327314005 |  | ARM: 7293/1: logical_cpu_map: decouple CPU mapping from SMP  It turns out that the logical CPU mapping is useful even when !CONFIG_SMP for manipulation of devices like interrupt and power controllers when running a UP kernel on a CPU other than 0. This can happen when kexecing a UP image from an SMP kernel.  In the future, multi-cluster systems running AMP configurations will require something similar for mapping cluster IDs, so it makes sense to decouple this logic in preparation for this support.  Acked-by: Yang Bai <hamo.by@gmail.com> Acked-by: Marc Zyngier <marc.zyngier@arm.com> Reported-by: Joerg Roedel <joerg.roedel@amd.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | ioctls.h | s | 120B | 5 | Jeff Mahoney | jeffm@suse.com | 1287767999 |  | ioctl: Use asm-generic/ioctls.h on arm (enables termiox)  This patch converts arm to use asm-generic/ioctls.h instead of its own version.  The differences between the arch-specific version and the generic version are as follows:  - ARM defines its own value for FIOQSIZE, asm-generic/ioctls.h keeps it - The generic version adds support for termiox  Reviewed-by: Russell King <rmk+kernel@arm.linux.org.uk> Signed-off-by: Jeff Mahoney <jeffm@suse.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | prom.h | s | 702B | 23 | Russell King | rmk+kernel@arm.linux.org.uk | 1332581934 |  | ARM: get rid of asm/irq.h in asm/prom.h  Avoid potential build problems caused by lacking mach/irqs.h includes on non-OF builds caused by an errant include in asm/prom.h.  asm/prom.h requires nothing from asm/irq.h, as Grant says:  On Mon, Feb 06, 2012 at 05:56:23AM +0000, Grant Likely wrote: > On Sat, Feb 04, 2012 at 10:17:48PM +0000, Russell King wrote: > > Finally, do we need asm/irq.h in our asm/prom.h ?  That's causing > > fragility between DT and non-DT builds, because people are finding > > that their DT builds work without their mach/irqs.h includes but > > fail when built with non-DT.  The only thing which DT might need - > > at the most - is NR_IRQS, but I'd hope with things like irq domains > > it doesn't actually require it. > > I don't think so.  There may be a file or two that break because they're > not including everything they need, but I don't think anything in the > header requires it.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | opcodes.h | s | 2.5K | 65 | Dave Martin | dave.martin@linaro.org | 1332581931 |  | ARM: 7311/1: Add generic instruction opcode manipulation helpers  This patch adds some endianness-agnostic helpers to convert machine instructions between canonical integer form and in-memory representation.  A canonical integer form for representing instructions is also formalised here.  Signed-off-by: Dave Martin <dave.martin@linaro.org> Acked-by: Nicolas Pitre <nico@linaro.org> Tested-by: Jon Medhurst <tixy@yxit.co.uk> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | proc-fns.h | s | 3.4K | 127 | Catalin Marinas | catalin.marinas@arm.com | 1323340239 |  | ARM: LPAE: Page table maintenance for the 3-level format  This patch modifies the pgd/pmd/pte manipulation functions to support the 3-level page table format. Since there is no need for an 'ext' argument to cpu_set_pte_ext(), this patch conditionally defines a different prototype for this function when CONFIG_ARM_LPAE.  The patch also introduces the L_PGD_SWAPPER flag to mark pgd entries pointing to pmd tables pre-allocated in the swapper_pg_dir and avoid trying to free them at run-time. This flag is 0 with the classic page table format.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | a.out-core.h | s | 1.3K | 35 | Will Deacon | will.deacon@arm.com | 1299770189 |  | ARM: 6798/1: aout-core: zero thread debug registers in a.out core dump  The removal of the single-step emulation from ptrace on ARM means that thread_struct no longer has software breakpoint fields in its debug member.  This patch fixes the a.out core dump code so that the debug registers are zeroed rather than trying to copy from non-existent fields.  Cc: Nicolas Pitre <nicolas.pitre@linaro.org> Signed-off-by: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | types.h | s | 245B | 10 | Al Viro | viro@zeniv.linux.org.uk | 1325649317 |  | consolidate umode_t declarations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | limits.h | s | 127B | 7 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | mach-types.h | s | 34B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | arm: move mach-types to include/generated  Simplified arch/arm/Makefile by dropping the maketools target It was undocumented and not needed  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Russell King <linux@arm.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | bugs.h | s | 482B | 18 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | system_misc.h | s | 634B | 20 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | bitops.h | s | 7.8K | 259 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | hw_irq.h | s | 402B | 16 | Thomas Gleixner | tglx@linutronix.de | 1301402877 |  | arm: dove: Use proper irq accessor functions  Remove the obsolete desc_handle_irq() helper.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | sparsemem.h | s | 660B | 21 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1222878244 |  | [ARM] mm: enable sparsemem on clps7500 and RiscPC  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | dma.h | s | 4.1K | 126 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | kprobes.h | s | 1.9K | 54 | Nathaniel Husted | nhusted@gmail.com | 1326835021 |  | Kernel: Audit Support For The ARM Platform  This patch provides functionality to audit system call events on the ARM platform. The implementation was based off the structure of the MIPS platform and information in this (http://lists.fedoraproject.org/pipermail/arm/2009-October/000382.html) mailing list thread. The required audit_syscall_exit and audit_syscall_entry checks were added to ptrace using the standard registers for system call values (r0 through r3). A thread information flag was added for auditing (TIF_SYSCALL_AUDIT) and a meta-flag was added (_TIF_SYSCALL_WORK) to simplify modifications to the syscall entry/exit. Now, if either the TRACE flag is set or the AUDIT flag is set, the syscall_trace function will be executed. The prober changes were made to Kconfig to allow CONFIG_AUDITSYSCALL to be enabled.  Due to platform availability limitations, this patch was only tested on the Android platform running the modified "android-goldfish-2.6.29" kernel. A test compile was performed using Code Sourcery's cross-compilation toolset and the current linux-3.0 stable kernel. The changes compile without error. I'm hoping, due to the simple modifications, the patch is "obviously correct".  Signed-off-by: Nathaniel Husted <nhusted@gmail.com> Signed-off-by: Eric Paris <eparis@redhat.com>
f | setup.h | s | 4.9K | 181 | Russell King | rmk+kernel@arm.linux.org.uk | 1323766322 |  | ARM: Allow Kconfig to control the definition of NR_BANKS  Move the sizing of NR_BANKS to a Kconfig control instead of selecting it in a header file depending on platform selection.  This allows new additions to its dependencies to be handled more gracefully.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | checksum.h | s | 3.4K | 126 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | pmu.h | s | 3.7K | 122 | Will Deacon | will.deacon@arm.com | 1331113248 |  | ARM: 7354/1: perf: limit sample_period to half max_period in non-sampling mode  On ARM, the PMU does not stop counting after an overflow and therefore IRQ latency affects the new counter value read by the kernel. This is significant for non-sampling runs where it is possible for the new value to overtake the previous one, causing the delta to be out by up to max_period events.  Commit a737823d ("ARM: 6835/1: perf: ensure overflows aren't missed due to IRQ latency") attempted to fix this problem by allowing interrupt handlers to pass an overflow flag to the event update function, causing the overflow calculation to assume that the counter passed through zero when going from prev to new. Unfortunately, this doesn't work when overflow occurs on the perf_task_tick path because we have the flag cleared and end up computing a large negative delta.  This patch removes the overflow flag from armpmu_event_update and instead limits the sample_period to half of the max_period for non-sampling profiling runs.  Cc: <stable@vger.kernel.org> Signed-off-by: Ming Lei <ming.lei@canonical.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | pgtable-2level-hwdef.h | s | 3.2K | 85 | Catalin Marinas | catalin.marinas@arm.com | 1317912006 |  | ARM: 7077/1: LPAE: Use a mask for physical addresses in page table entries  With LPAE, the physical address mask is 40-bit while the page table entry is 64-bit. This patch introduces PHYS_MASK for the 2-level page table format, defined as ~0UL.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | locks.h | s | 5.6K | 254 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | fixmap.h | s | 1.1K | 33 | Nicolas Pitre | nico@cam.org | 1237165280 |  | [ARM] fixmap support  This is the minimum fixmap interface expected to be implemented by architectures supporting highmem.  We have a second level page table already allocated and covering 0xfff00000-0xffffffff because the exception vector page is located at 0xffff0000, and various cache tricks already use some entries above 0xffff0000.  Therefore the PTEs covering 0xfff00000-0xfffeffff are free to be used.  However the XScale cache flushing code already uses virtual addresses between 0xfffe0000 and 0xfffeffff.  So this reserves the 0xfff00000-0xfffdffff range for fixmap stuff.  The Documentation/arm/memory.txt information is updated accordingly, including the information about the actual top of DMA memory mapping region which didn't match the code.  Signed-off-by: Nicolas Pitre <nico@marvell.com>
f | mmu_context.h | s | 5.0K | 163 | Catalin Marinas | catalin.marinas@arm.com | 1334672984 |  | ARM: Remove __ARCH_WANT_INTERRUPTS_ON_CTXSW on pre-ARMv6 CPUs  This patch removes the __ARCH_WANT_INTERRUPTS_ON_CTXSW definition for ARMv5 and earlier processors. On such processors, the context switch requires a full cache flush. To avoid high interrupt latencies, this patch defers the mm switching to the post-lock switch hook if the interrupts are disabled.  Reviewed-by: Will Deacon <will.deacon@arm.com> Tested-by: Will Deacon <will.deacon@arm.com> Reviewed-by: Frank Rowand <frank.rowand@am.sony.com> Tested-by: Marc Zyngier <Marc.Zyngier@arm.com> Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | jump_label.h | s | 694B | 31 | Rabin Vincent | rabin@rab.in | 1334523631 |  | ARM: 7386/1: jump_label: fixup for rename to static_key  c5905afb0 ("static keys: Introduce 'struct static_key'...") renamed struct jump_label_key to struct static_key.  Fixup ARM for this to eliminate these build warnings:    include/linux/jump_label.h:113:2:   warning: passing argument 1 of 'arch_static_branch' from incompatible pointer type   include/asm/jump_label.h:17:82:   note: expected 'struct jump_label_key *' but argument is of type 'struct static_key *'  Signed-off-by: Rabin Vincent <rabin@rab.in> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | ptrace.h | s | 6.5K | 225 | Wade Farnsworth | wade_farnsworth@mentor.com | 1335379768 |  | ARM: 7374/1: add TRACEHOOK support  Add calls to tracehook_report_syscall_{entry,exit} and tracehook_signal_handler  Signed-off-by: Steven Walter <stevenrwalter@gmail.com> Signed-off-by: Wade Farnsworth <wade_farnsworth@mentor.com> Reviewed-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | leds.h | s | 1.0K | 45 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | idmap.h | s | 316B | 9 | Will Deacon | will.deacon@arm.com | 1323180255 |  | ARM: SMP: use idmap_pgd for mapping MMU enable during secondary booting  The ARM SMP booting code allocates a temporary set of page tables containing an identity mapping of the kernel image and provides this to secondary CPUs for initial booting.  In reality, we only need to include the __turn_mmu_on function in the identity mapping since the rest of the kernel is executing from virtual addresses after this point.  This patch adds __turn_mmu_on to the .idmap.text section, allowing the SMP booting code to use the idmap_pgd directly and not have to populate its own set of page table.  As a result of this patch, we can make the identity_mapping_add function static (since it is only used within mm/idmap.c) and also remove the identity_mapping_del function. The identity map population is moved to an early initcall so that it is setup in time for secondary CPU bringup.  Reviewed-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Will Deacon <will.deacon@arm.com>
f | ftrace.h | s | 1.6K | 50 | Rabin Vincent | rabin@rab.in | 1283437723 |  | ARM: 6319/1: ftrace: add Thumb-2 support to dynamic ftrace  Handle the different nop and call instructions for Thumb-2.  Also, we need to adjust the recorded mcount_loc addresses because they have the lsb set.  Cc: Catalin Marinas <catalin.marinas@arm.com> Acked-by: Steven Rostedt <rostedt@goodmis.org> [recordmcount.pl change] Signed-off-by: Rabin Vincent <rabin@rab.in> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | unwind.h | s | 1.7K | 52 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1323170173 |  | ARM: 7187/1: fix unwinding for XIP kernels  The linker places the unwind tables in readonly sections. So when using an XIP kernel these are located in ROM and cannot be modified. For that reason the current approach to convert the relative offsets in the unwind index to absolute addresses early in the boot process doesn't work with XIP.  The offsets in the unwind index section are signed 31 bit numbers and the structs are sorted by this offset. So it first has offsets between 0x40000000 and 0x7fffffff (i.e. the negative offsets) and then offsets between 0x00000000 and 0x3fffffff. When seperating these two blocks the numbers are sorted even when interpreting the offsets as unsigned longs.  So determine the first non-negative entry once and track that using the new origin pointer. The actual bisection can then use a plain unsigned long comparison. The only thing that makes the new bisection more complicated is that the offsets are relative to their position in the index section, so the key to search needs to be adapted accordingly in each step.  Moreover several consts are added to catch future writes and rename the member "addr" of struct unwind_idx to "addr_offset" to better match the new semantic. (This has the additional benefit of breaking eventual users at compile time to make them aware of the change.)  In my tests the new algorithm was a tad faster than the original and has the additional upside of not needing the initial conversion and so saves some boot time and it's possible to unwind even earlier.  Acked-by: Catalin Marinas <catalin.marinas@arm.com> Acked-by: Nicolas Pitre <nico@fluxnic.net> Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | mc146818rtc.h | s | 681B | 25 | Rob Herring | rob.herring@calxeda.com | 1327545465 |  | ARM: mc146818rtc: remove unnecessary include of mach/irqs.h  The include of mach/irqs.h isn't needed, so remove it. Compiled CMOS rtc driver. Add a check to make sure nothing depends on RTC_IRQ.  Signed-off-by: Rob Herring <rob.herring@calxeda.com>
f | localtimer.h | s | 738B | 29 | Marc Zyngier | marc.zyngier@arm.com | 1331646355 |  | ARM: local timers: make the runtime registration interface mandatory  Remove all traces of the compile-time local timer interface, and make the runtime selection mandatory.  Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
f | cache.h | s | 774B | 23 | Russell King | rmk+kernel@arm.linux.org.uk | 1291538376 |  | ARM: implement support for read-mostly sections  As our SMP implementation uses MESI protocols.  Grouping together data which is mostly only read together means that we avoid unnecessary cache line bouncing when this code shares a cache line with other data.  In other words, cache lines associated with read-mostly data are expected to spend most of their time in shared state.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | page-nommu.h | s | 1.2K | 37 | Catalin Marinas | catalin.marinas@arm.com | 1248435301 |  | nommu: Remove the memory_start/end variables from ARM page-nommu.h  These variables do not seem to be used anywhere in the kernel.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | floppy.h | s | 3.6K | 132 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1218099348 |  | [ARM] Move include/asm-arm/arch-* to arch/arm/*/include/mach  This just leaves include/asm-arm/plat-* to deal with.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | user.h | s | 4.2K | 97 | Will Deacon | will.deacon@arm.com | 1299770189 |  | ARM: 6798/1: aout-core: zero thread debug registers in a.out core dump  The removal of the single-step emulation from ptrace on ARM means that thread_struct no longer has software breakpoint fields in its debug member.  This patch fixes the a.out core dump code so that the debug registers are zeroed rather than trying to copy from non-existent fields.  Cc: Nicolas Pitre <nicolas.pitre@linaro.org> Signed-off-by: Bryan Wu <bryan.wu@canonical.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | smp_scu.h | s | 302B | 11 | Russell King | rmk+kernel@arm.linux.org.uk | 1297427358 |  | ARM: pm: add function to set WFI low-power mode for SMP CPUs  Add a function to set the SCU low-power mode for SMP CPUs.  This centralizes this functionality rather than having to expose the SCU register definitions to each platform.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | therm.h | s | 616B | 24 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | glue-pf.h | s | 1.1K | 49 | Russell King | rmk+kernel@arm.linux.org.uk | 1297511541 |  | ARM: move cache/processor/fault glue to separate include files  This allows the cache/processor/fault glue to be more easily used from assembler code.  Tested on Assabet and Tegra 2.  Tested-by: Colin Cross <ccross@android.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | statfs.h | s | 360B | 10 | David Woodhouse | David.Woodhouse@intel.com | 1220517971 |  | ARM: Use <asm-generic/statfs.h>  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | xor.h | s | 3.6K | 124 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | exec.h | s | 114B | 4 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | stackprotector.h | s | 1.1K | 31 | Nicolas Pitre | nico@fluxnic.net | 1276565460 |  | ARM: initial stack protector (-fstack-protector) support  This is the very basic stuff without the changing canary upon task switch yet.  Just the Kconfig option and a constant canary value initialized at boot time.  Signed-off-by: Nicolas Pitre <nicolas.pitre@linaro.org>
d | hardware |  | 28 items |  | Viresh Kumar | viresh.linux@gmail.com | 1340228376 |  | Viresh has moved  viresh.kumar@st.com email-id doesn't exist anymore as I have left the company.  Replace ST's id with viresh.linux@gmail.com.  It also updates .mailmap file to fix address for 'git shortlog'  Signed-off-by: Viresh Kumar <viresh.linux@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | hardirq.h | s | 709B | 23 | Kevin Hilman | khilman@deeprootsystems.com | 1323170041 |  | ARM: 7140/1: remove NR_IRQS dependency for ARM-specific HARDIRQ_BITS definition  As a first step towards removing NR_IRQS, remove the ARM customization of HARDIRQ_BITS based on NR_IRQS.  The generic code in <linux/hardirq.h> already has a default value of 10 for HARDIRQ_BITS which is the max used on ARM, so let's just remove the NR_IRQS based customization and use the generic default.  Signed-off-by: Kevin Hilman <khilman@ti.com> Acked-by: Nicolas Pitre <nicolas.pitre@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | termbits.h | s | 4.5K | 183 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | sigcontext.h | s | 768B | 31 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | suspend.h | s | 158B | 5 | Russell King | rmk+kernel@arm.linux.org.uk | 1316558016 |  | ARM: pm: preallocate a page table for suspend/resume  Preallocate a page table and setup an identity mapping for the MMU enable code.  This means we don't have to "borrow" a page table to do this, avoiding complexities with L2 cache coherency.  Tested-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Shawn Guo <shawn.guo@linaro.org> Tested-by: Lorenzo Pieralisi <lorenzo.pieralisi@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | bug.h | s | 2.4K | 70 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | Kbuild | g | 432B |  | Stephen Boyd | sboyd@codeaurora.org | 1318839160 |  | ARM: 7006/1: Migrate to asm-generic wrapper support  With d8ecc5c (kbuild: asm-generic support, 2011-04-27) we can remove a handful of asm-generic wrappers in ARM code. Since the generic version of sizes.h doesn't contain SZ_48M, we replace the 4 users of SZ_48M with the equivalent SZ_32M + SZ_16M.  Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Cc: Imre Kaloz <kaloz@openwrt.org> Acked-by: Krzysztof Halasa <khc@pm.waw.pl> Cc: Eric Miao <eric.y.miao@gmail.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | parport.h | s | 523B | 15 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | mmu.h | s | 732B | 29 | Catalin Marinas | catalin.marinas@arm.com | 1334672984 |  | ARM: Remove __ARCH_WANT_INTERRUPTS_ON_CTXSW on pre-ARMv6 CPUs  This patch removes the __ARCH_WANT_INTERRUPTS_ON_CTXSW definition for ARMv5 and earlier processors. On such processors, the context switch requires a full cache flush. To avoid high interrupt latencies, this patch defers the mm switching to the post-lock switch hook if the interrupts are disabled.  Reviewed-by: Will Deacon <will.deacon@arm.com> Tested-by: Will Deacon <will.deacon@arm.com> Reviewed-by: Frank Rowand <frank.rowand@am.sony.com> Tested-by: Marc Zyngier <Marc.Zyngier@arm.com> Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | futex.h | s | 4.2K | 143 | Will Deacon | will.deacon@arm.com | 1339860625 |  | ARM: 7425/1: extable: ensure fixup entries are 4-byte aligned  Fixup entries in the kernel exception tables should be 4-byte aligned since we return directly to them when handling a faulting instruction in the kernel.  This patch adds the missing align directives to the fixup entries.  Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | procinfo.h | s | 1.3K | 45 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | exception.h | s | 529B | 16 | Jamie Iles | jamie@jamieiles.com | 1318838564 |  | ARM: 7115/4: move __exception and friends to asm/exception.h  The definition of __exception_irq_entry for CONFIG_FUNCTION_GRAPH_TRACER=y needs linux/ftrace.h, but this creates a circular dependency with it's current home in asm/system.h. Create asm/exception.h and update all current users.  v4:	- rebase to rmk/for-next v3:	- remove redundant includes of linux/ftrace.h v2:	- document the usage restricitions of __exception*  Cc: Zoltan Devai <zdevai@gmail.com> Signed-off-by: Jamie Iles <jamie@jamieiles.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | device.h | s | 530B | 26 | Marek Szyprowski | m.szyprowski@samsung.com | 1337605583 |  | ARM: dma-mapping: add support for IOMMU mapper  This patch add a complete implementation of DMA-mapping API for devices which have IOMMU support.  This implementation tries to optimize dma address space usage by remapping all possible physical memory chunks into a single dma address space chunk.  DMA address space is managed on top of the bitmap stored in the dma_iommu_mapping structure stored in device->archdata. Platform setup code has to initialize parameters of the dma address space (base address, size, allocation precision order) with arm_iommu_create_mapping() function. To reduce the size of the bitmap, all allocations are aligned to the specified order of base 4 KiB pages.  dma_alloc_* functions allocate physical memory in chunks, each with alloc_pages() function to avoid failing if the physical memory gets fragmented. In worst case the allocated buffer is composed of 4 KiB page chunks.  dma_map_sg() function minimizes the total number of dma address space chunks by merging of physical memory chunks into one larger dma address space chunk. If requested chunk (scatter list entry) boundaries match physical page boundaries, most calls to dma_map_sg() requests will result in creating only one chunk in dma address space.  dma_map_page() simply creates a mapping for the given page(s) in the dma address space.  All dma functions also perform required cache operation like their counterparts from the arm linear physical memory mapping version.  This patch contains code and fixes kindly provided by: - Krishna Reddy <vdumpa@nvidia.com>, - Andrzej Pietrasiewicz <andrzej.p@samsung.com>, - Hiroshi DOYU <hdoyu@nvidia.com>  Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com> Tested-By: Subash Patel <subash.ramaswamy@linaro.org>
f | posix_types.h | s | 1000B | 30 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | spinlock_types.h | s | 372B | 14 | Thomas Gleixner | tglx@linutronix.de | 1260831332 |  | locking: Convert raw_rwlock to arch_rwlock  Not strictly necessary for -rt as -rt does not have non sleeping rwlocks, but it's odd to not have a consistent naming convention.  No functional change.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Peter Zijlstra <peterz@infradead.org> Acked-by: David S. Miller <davem@davemloft.net> Acked-by: Ingo Molnar <mingo@elte.hu> Cc: linux-arch@vger.kernel.org
f | cpuidle.h | s | 839B | 25 | Robert Lee | rob.lee@linaro.org | 1332309580 |  | cpuidle: Add common time keeping and irq enabling  Make necessary changes to implement time keeping and irq enabling in the core cpuidle code.  This will allow the removal of these functionalities from various platform cpuidle implementations whose timekeeping and irq enabling follows the form in this common code.  Signed-off-by: Robert Lee <rob.lee@linaro.org> Tested-by: Jean Pihet <j-pihet@ti.com> Tested-by: Amit Daniel <amit.kachhap@linaro.org> Tested-by: Robert Lee <rob.lee@linaro.org> Reviewed-by: Kevin Hilman <khilman@ti.com> Reviewed-by: Daniel Lezcano <daniel.lezcano@linaro.org> Reviewed-by: Deepthi Dharwar <deepthi@linux.vnet.ibm.com> Acked-by: Jean Pihet <j-pihet@ti.com> Signed-off-by: Len Brown <len.brown@intel.com>
f | tlbflush.h | s | 13K | 437 | Russell King | rmk+kernel@arm.linux.org.uk | 1336193450 |  | ARM: Remove support for ARMv3 ARM610 and ARM710 CPUs  This patch removes support for ARMv3 CPUs, which haven't worked properly for quite some time (see the FIXME comment in arch/arm/mm/fault.c).  The only V3 parts left is the cache model for ARMv3, which is needed for some odd reason by ARM740T CPUs, and being able to build with -march=armv3, which is required for the RiscPC platform due to its bus structure.  Acked-by: Will Deacon <will.deacon@arm.com> Acked-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | entry-macro-multi.S | g | 705B |  | Marc Zyngier | marc.zyngier@arm.com | 1319373149 |  | ARM: gic: consolidate PPI handling  PPI handling is a bit of an odd beast. It uses its own low level handling code and is hardwired to the local timers (hence lacking a registration interface).  Instead, switch the low handling to the normal SPI handling code. PPIs are handled by the handle_percpu_devid_irq flow.  This also allows the removal of some duplicated code.  Cc: Kukjin Kim <kgene.kim@samsung.com> Cc: David Brown <davidb@codeaurora.org> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Tony Lindgren <tony@atomide.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Magnus Damm <magnus.damm@gmail.com> Cc: Thomas Gleixner <tglx@linutronix.de> Acked-by: David Brown <davidb@codeaurora.org> Tested-by: David Brown <davidb@codeaurora.org> Tested-by: Shawn Guo <shawn.guo@linaro.org> Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
f | atomic.h | s | 9.4K | 376 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | linkage.h | s | 177B | 8 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | perf_event.h | s | 766B | 28 | Linus Torvalds | torvalds@linux-foundation.org | 1333065228 |  | Merge branch 'for-linus' of git://git.linaro.org/people/rmk/linux-arm  Pull more ARM updates from Russell King.  This got a fair number of conflicts with the <asm/system.h> split, but also with some other sparse-irq and header file include cleanups.  They all looked pretty trivial, though.  * 'for-linus' of git://git.linaro.org/people/rmk/linux-arm: (59 commits)   ARM: fix Kconfig warning for HAVE_BPF_JIT   ARM: 7361/1: provide XIP_VIRT_ADDR for no-MMU builds   ARM: 7349/1: integrator: convert to sparse irqs   ARM: 7259/3: net: JIT compiler for packet filters   ARM: 7334/1: add jump label support   ARM: 7333/2: jump label: detect %c support for ARM   ARM: 7338/1: add support for early console output via semihosting   ARM: use set_current_blocked() and block_sigmask()   ARM: exec: remove redundant set_fs(USER_DS)   ARM: 7332/1: extract out code patch function from kprobes   ARM: 7331/1: extract out insn generation code from ftrace   ARM: 7330/1: ftrace: use canonical Thumb-2 wide instruction format   ARM: 7351/1: ftrace: remove useless memory checks   ARM: 7316/1: kexec: EOI active and mask all interrupts in kexec crash path   ARM: Versatile Express: add NO_IOPORT   ARM: get rid of asm/irq.h in asm/prom.h   ARM: 7319/1: Print debug info for SIGBUS in user faults   ARM: 7318/1: gic: refactor irq_start assignment   ARM: 7317/1: irq: avoid NULL check in for_each_irq_desc loop   ARM: 7315/1: perf: add support for the Cortex-A7 PMU   ...
f | memory.h | s | 7.5K | 242 | Uwe Kleine-König | u.kleine-koenig@pengutronix.de | 1332581936 |  | ARM: 7361/1: provide XIP_VIRT_ADDR for no-MMU builds  XIP_VIRT_ADDR is needed for XIP builds and currently only defined for builds with CONFIG_MMU.  Also provide it for no-MMU builds to make it possible to build an XIP kernel for MMU-less machines. As these lack an MMU it has to be an identity mapping.  Acked-by: Nicolas Pitre <nico@linaro.org> Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | glue-df.h | s | 2.2K | 90 | Russell King | rmk+kernel@arm.linux.org.uk | 1336193450 |  | ARM: Remove support for ARMv3 ARM610 and ARM710 CPUs  This patch removes support for ARMv3 CPUs, which haven't worked properly for quite some time (see the FIXME comment in arch/arm/mm/fault.c).  The only V3 parts left is the cache model for ARMv3, which is needed for some odd reason by ARM740T CPUs, and being able to build with -march=armv3, which is required for the RiscPC platform due to its bus structure.  Acked-by: Will Deacon <will.deacon@arm.com> Acked-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | mutex.h | s | 3.0K | 104 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | topology.h | s | 996B | 27 | Vincent Guittot | vincent.guittot@linaro.org | 1322697321 |  | ARM: 7182/1: ARM cpu topology: fix warning  kernel/sched.c:7354:2: warning: initialization from incompatible pointer type  Align cpu_coregroup_mask prototype interface with sched_domain_mask_f typedef use int cpu instead of unsigned int cpu  Cc: <stable@vger.kernel.org> Signed-off-by: Vincent Guittot <vincent.guittot@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | unistd.h | s | 20K | 476 | David Howells | dhowells@redhat.com | 1323788869 |  | UAPI: Split trivial #if defined(__KERNEL__) && X conditionals  Split trivial #if defined(__KERNEL__) && X conditionals to make automated disintegration easier.  Signed-off-by: David Howells <dhowells@redhat.com>
f | kexec.h | s | 1.6K | 49 | Eric Cooper | ecc@cmu.edu | 1299187615 |  | [ARM] add machine-specific hook to machine_kexec  Provide the option to call a machine-specific function before kexec'ing a new kernel.  Signed-off-by: Eric Cooper <ecc@cmu.edu> Signed-off-by: Nicolas Pitre <nico@fluxnic.net>
f | irqflags.h | s | 2.6K | 136 | David Howells | dhowells@redhat.com | 1286456935 |  | Fix IRQ flag handling naming  Fix the IRQ flag handling naming.  In linux/irqflags.h under one configuration, it maps:  	local_irq_enable() -> raw_local_irq_enable() 	local_irq_disable() -> raw_local_irq_disable() 	local_irq_save() -> raw_local_irq_save() 	...  and under the other configuration, it maps:  	raw_local_irq_enable() -> local_irq_enable() 	raw_local_irq_disable() -> local_irq_disable() 	raw_local_irq_save() -> local_irq_save() 	...  This is quite confusing.  There should be one set of names expected of the arch, and this should be wrapped to give another set of names that are expected by users of this facility.  Change this to have the arch provide:  	flags = arch_local_save_flags() 	flags = arch_local_irq_save() 	arch_local_irq_restore(flags) 	arch_local_irq_disable() 	arch_local_irq_enable() 	arch_irqs_disabled_flags(flags) 	arch_irqs_disabled() 	arch_safe_halt()  Then linux/irqflags.h wraps these to provide:  	raw_local_save_flags(flags) 	raw_local_irq_save(flags) 	raw_local_irq_restore(flags) 	raw_local_irq_disable() 	raw_local_irq_enable() 	raw_irqs_disabled_flags(flags) 	raw_irqs_disabled() 	raw_safe_halt()  with type checking on the flags 'arguments', and then wraps those to provide:  	local_save_flags(flags) 	local_irq_save(flags) 	local_irq_restore(flags) 	local_irq_disable() 	local_irq_enable() 	irqs_disabled_flags(flags) 	irqs_disabled() 	safe_halt()  with tracing included if enabled.  The arch functions can now all be inline functions rather than some of them having to be macros.  Signed-off-by: David Howells <dhowells@redhat.com> [X86, FRV, MN10300] Signed-off-by: Chris Metcalf <cmetcalf@tilera.com> [Tile] Signed-off-by: Michal Simek <monstr@monstr.eu> [Microblaze] Tested-by: Catalin Marinas <catalin.marinas@arm.com> [ARM] Acked-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Haavard Skinnemoen <haavard.skinnemoen@atmel.com> [AVR] Acked-by: Tony Luck <tony.luck@intel.com> [IA-64] Acked-by: Hirokazu Takata <takata@linux-m32r.org> [M32R] Acked-by: Greg Ungerer <gerg@uclinux.org> [M68K/M68KNOMMU] Acked-by: Ralf Baechle <ralf@linux-mips.org> [MIPS] Acked-by: Kyle McMartin <kyle@mcmartin.ca> [PA-RISC] Acked-by: Paul Mackerras <paulus@samba.org> [PowerPC] Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [S390] Acked-by: Chen Liqin <liqin.chen@sunplusct.com> [Score] Acked-by: Matt Fleming <matt@console-pimps.org> [SH] Acked-by: David S. Miller <davem@davemloft.net> [Sparc] Acked-by: Chris Zankel <chris@zankel.net> [Xtensa] Reviewed-by: Richard Henderson <rth@twiddle.net> [Alpha] Reviewed-by: Yoshinori Sato <ysato@users.sourceforge.jp> [H8300] Cc: starvik@axis.com [CRIS] Cc: jesper.nilsson@axis.com [CRIS] Cc: linux-cris-kernel@axis.com
f | cputype.h | s | 2.4K | 92 | Vincent Guittot | vincent.guittot@linaro.org | 1318838563 |  | ARM: 7011/1: Add ARM cpu topology definition  The affinity between ARM processors is defined in the MPIDR register. We can identify which processors are in the same cluster, and which ones have performance interdependency. We can define the cpu topology of ARM platform, that is then used by sched_mc and sched_smt.  The default state of sched_mc and sched_smt config is disable. When enabled, the behavior of the scheduler can be modified with sched_mc_power_savings and sched_smt_power_savings sysfs interfaces.  Changes since v4 : *  Remove unnecessary parentheses and blank lines  Changes since v3 : * Update the format of printk message * Remove blank line  Changes since v2 : * Update the commit message and some comments  Changes since v1 : * Update the commit message * Add read_cpuid_mpidr in arch/arm/include/asm/cputype.h * Modify header of arch/arm/kernel/topology.c * Modify tests and manipulation of MPIDR's bitfields * Modify the place and dependancy of the config * Modify Noop functions  Signed-off-by: Vincent Guittot <vincent.guittot@linaro.org> Reviewed-by: Amit Kucheria <amit.kucheria@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | vfpmacros.h | s | 2.1K | 60 | Tony Lindgren | tony@atomide.com | 1278682894 |  | ARM: 6203/1: Make VFPv3 usable on ARMv6  MVFR0 and MVFR1 are only available starting with ARM1136 r1p0 release according to "B.5 VFP changes" in DDI0211F_arm1136_r1p0_trm.pdf. This is also when TLS register got added, so we can use HAS_TLS also to test for MVFR0 and MVFR1.  Otherwise VFPFMRX and VFPFMXR access fails and we get:  Internal error: Oops - undefined instruction: 0 [#1] PC is at no_old_VFP_process+0x8/0x3c LR is at __und_svc+0x48/0x80 ...  Signed-off-by: Tony Lindgren <tony@atomide.com> Acked-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | string.h | s | 986B | 31 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1227789479 |  | [ARM] remove memzero()  As suggested by Andrew Morton, remove memzero() - it's not supported on other architectures so use of it is a potential build breaking bug. Since the compiler optimizes memset(x,0,n) to __memzero() perfectly well, we don't miss out on the underlying benefits of memzero().  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | system_info.h | s | 662B | 21 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | system.h | s | 232B | 8 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | glue.h | s | 759B | 23 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | pgtable-nommu.h | s | 2.7K | 94 | Javi Merino | javi.merino@arm.com | 1332547111 |  | Remove remaining bits of io_remap_page_range()  Commit 33bf56106d9b ("feature removal of io_remap_page_range()") removed io_remap_page_range(), but it is still included in some arch header files.  It has no in-tree users.  Signed-off-by: Javi Merino <javi.merino@arm.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Jonas Bonn <jonas@southpole.se> Cc: Randy Dunlap <rdunlap@xenotime.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | syscall.h | s | 2.1K | 77 | Wade Farnsworth | wade_farnsworth@mentor.com | 1335379767 |  | ARM: 7373/1: add support for the generic syscall.h interface  Supplying the asm-generic/syscall.h interface is a pre-requisite for HAVE_ARCH_TRACEHOOK  Signed-off-by: Steven Walter <stevenrwalter@gmail.com> Signed-off-by: Wade Farnsworth <wade_farnsworth@mentor.com> Reviewed-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | cp15.h | s | 2.5K | 74 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | sched_clock.h | s | 449B | 12 | Marc Zyngier | Marc.Zyngier@arm.com | 1324249226 |  | ARM: 7205/2: sched_clock: allow sched_clock to be selected at runtime  sched_clock() is yet another blocker on the road to the single image. This patch implements an idea by Russell King:  http://www.spinics.net/lists/linux-omap/msg49561.html  Instead of asking the platform to implement both sched_clock() itself and the rollover callback, simply register a read() function, and let the ARM code care about sched_clock() itself, the conversion to ns and the rollover. sched_clock() uses this read() function as an indirection to the platform code. If the platform doesn't provide a read(), the code falls back to the jiffy counter (just like the default sched_clock).  This allow some simplifications and possibly some footprint gain when multiple platforms are compiled in. Among the drawbacks, the removal of the *_fixed_sched_clock optimization which could negatively impact some platforms (sa1100, tegra, versatile and omap).  Tested on 11MPCore, OMAP4 and Tegra.  Cc: Imre Kaloz <kaloz@openwrt.org> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Colin Cross <ccross@android.com> Cc: Erik Gilling <konkers@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Alessandro Rubini <rubini@unipv.it> Cc: STEricsson <STEricsson_nomadik_linux@list.st.com> Cc: Lennert Buytenhek <kernel@wantstofly.org> Cc: Ben Dooks <ben-linux@fluff.org> Tested-by: Jamie Iles <jamie@jamieiles.com> Tested-by: Tony Lindgren <tony@atomide.com> Tested-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Nicolas Pitre <nico@linaro.org> Acked-by: Krzysztof Halasa <khc@pm.waw.pl> Acked-by: Kukjin Kim <kgene.kim@samsung.com> Signed-off-by: Marc Zyngier <marc.zyngier@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | module.h | s | 1.1K | 42 | Nicolas Pitre | nicolas.pitre@linaro.org | 1313231200 |  | ARM: 7013/1: P2V: Remove ARM_PATCH_PHYS_VIRT_16BIT  This code can be removed now that MSM targets no longer need the 16-bit offsets for P2V.  Signed-off-by: Nicolas Pitre <nicolas.pitre@linaro.org> Signed-off-by: Stephen Boyd <sboyd@codeaurora.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | fncpy.h | s | 3.1K | 87 | Dave Martin | dave.martin@linaro.org | 1296128938 |  | ARM: 6640/1: Thumb-2: Symbol manipulation macros for function body copying  In low-level board support code, there is sometimes a need to copy a function body to another location at run-time.  A straightforward call to memcpy doesn't work in Thumb-2, because bit 0 of external Thumb function symbols is set to 1, indicating that the function is Thumb.  Without corrective measures, this will cause an off-by-one copy, and the copy may be called using the wrong instruction set.  This patch adds an fncpy() macro to help with such copies.  Particular care is needed, because C doesn't guarantee any defined behaviour when casting a function pointer to any other type.  This has been observed to lead to strange optimisation side-effects when doing the arithmetic which is required in order to copy/move function bodies correctly in Thumb-2.  Thanks to Russell King and Nicolas Pitre for their input on this patch.  Signed-off-by: Dave Martin <dave.martin@linaro.org> Tested-by: Jean Pihet <j-pihet@ti.com> Tested-by: Tony Lindgren <tony@atomide.com> Tested-by: Kevin Hilman <khilman@ti.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | page.h | s | 3.6K | 135 | Russell King | rmk+kernel@arm.linux.org.uk | 1336193450 |  | ARM: Remove support for ARMv3 ARM610 and ARM710 CPUs  This patch removes support for ARMv3 CPUs, which haven't worked properly for quite some time (see the FIXME comment in arch/arm/mm/fault.c).  The only V3 parts left is the cache model for ARMv3, which is needed for some odd reason by ARM740T CPUs, and being able to build with -march=armv3, which is required for the RiscPC platform due to its bus structure.  Acked-by: Will Deacon <will.deacon@arm.com> Acked-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | processor.h | s | 2.9K | 101 | Linus Torvalds | torvalds@linux-foundation.org | 1337795947 |  | Merge branch 'x86-fpu-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull fpu state cleanups from Ingo Molnar:  "This tree streamlines further aspects of FPU handling by eliminating   the prepare_to_copy() complication and moving that logic to   arch_dup_task_struct().    It also fixes the FPU dumps in threaded core dumps, removes and old   (and now invalid) assumption plus micro-optimizes the exit path by   avoiding an FPU save for dead tasks."  Fixed up trivial add-add conflict in arch/sh/kernel/process.c that came in because we now do the FPU handling in arch_dup_task_struct() rather than the legacy (and now gone) prepare_to_copy().  * 'x86-fpu-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:   x86, fpu: drop the fpu state during thread exit   x86, xsave: remove thread_has_fpu() bug check in __sanitize_i387_state()   coredump: ensure the fpu state is flushed for proper multi-threaded core dump   fork: move the real prepare_to_copy() users to arch_dup_task_struct()
f | flat.h | s | 520B | 13 | Oskar Schirmer | os@emlix.com | 1243611602 |  | flat: fix data sections alignment  The flat loader uses an architecture's flat_stack_align() to align the stack but assumes word-alignment is enough for the data sections.  However, on the Xtensa S6000 we have registers up to 128bit width which can be used from userspace and therefor need userspace stack and data-section alignment of at least this size.  This patch drops flat_stack_align() and uses the same alignment that is required for slab caches, ARCH_SLAB_MINALIGN, or wordsize if it's not defined by the architecture.  It also fixes m32r which was obviously kaput, aligning an uninitialized stack entry instead of the stack pointer.  [akpm@linux-foundation.org: coding-style fixes] Signed-off-by: Oskar Schirmer <os@emlix.com> Cc: David Howells <dhowells@redhat.com> Cc: Russell King <rmk@arm.linux.org.uk> Cc: Bryan Wu <cooloney@kernel.org> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Paul Mundt <lethal@linux-sh.org> Cc: Greg Ungerer <gerg@uclinux.org> Signed-off-by: Johannes Weiner <jw@emlix.com> Acked-by: Mike Frysinger <vapier.adi@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pgtable-3level-types.h | s | 1.9K | 57 | Catalin Marinas | catalin.marinas@arm.com | 1323340239 |  | ARM: LPAE: Introduce the 3-level page table format definitions  This patch introduces the pgtable-3level*.h files with definitions specific to the LPAE page table format (3 levels of page tables).  Each table is 4KB and has 512 64-bit entries. An entry can point to a 40-bit physical address. The young, write and exec software bits share the corresponding hardware bits (negated). Other software bits use spare bits in the PTE.  The patch also changes some variable types from unsigned long or int to pteval_t or pgprot_t.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | cmpxchg.h | s | 5.5K | 217 | Will Deacon | will.deacon@arm.com | 1335630764 |  | ARM: 7404/1: cmpxchg64: use atomic64 and local64 routines for cmpxchg64  The cmpxchg64 routines for ARMv6+ CPUs replicate inline assembly that already exists for atomic64 operations. Furthermore, the cmpxchg64 code uses the "memory" constraint in the clobber list rather than identifying the region of memory that is actually modified.  This patch replaces the ARMv6+ cmpxchg64 code with macros that expand to the atomic64_ and local64_ variants, casting the pointer parameter to the appropriate container type.  Cc: Nicolas Pitre <nico@linaro.org> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | outercache.h | s | 2.6K | 94 | Barry Song | Baohua.Song@csr.com | 1318839111 |  | ARM: 7114/1: cache-l2x0: add resume entry for l2 in secure mode  we save the l2x0 registers at the first initialization, and platform codes can get them to restore l2x0 status after wakeup.  Cc: Lorenzo Pieralisi <lorenzo.pieralisi@arm.com> Signed-off-by: Barry Song <Baohua.Song@csr.com> Reviewed-by: Santosh Shilimkar <santosh.shilimkar@ti.com> Tested-by: Shawn Guo <shawn.guo@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | highmem.h | s | 2.0K | 56 | Cong Wang | amwang@redhat.com | 1332251310 |  | highmem: kill all __kmap_atomic() [swarren@nvidia.com: highmem: Fix ARM build break due to __kmap_atomic rename]  Signed-off-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Cong Wang <amwang@redhat.com>
f | div64.h | s | 7.5K | 215 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | arch_timer.h | s | 324B | 16 | Marc Zyngier | marc.zyngier@arm.com | 1335530365 |  | ARM: architected timers: remove support for non DT platforms  All mainline platforms using the ARM architected timers are DT only. As such, remove the ad-hoc support that is not longer needed anymore.  Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
f | pgalloc.h | s | 3.6K | 136 | Catalin Marinas | catalin.marinas@arm.com | 1323340239 |  | ARM: LPAE: Page table maintenance for the 3-level format  This patch modifies the pgd/pmd/pte manipulation functions to support the 3-level page table format. Since there is no need for an 'ext' argument to cpu_set_pte_ext(), this patch conditionally defines a different prototype for this function when CONFIG_ARM_LPAE.  The patch also introduces the L_PGD_SWAPPER flag to mark pgd entries pointing to pmd tables pre-allocated in the swapper_pg_dir and avoid trying to free them at run-time. This flag is 0 with the classic page table format.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | gpio.h | s | 776B | 24 | Stephen Warren | swarren@nvidia.com | 1326014839 |  | ARM: 7271/1: Fix typo in conversion of ARCH_NR_GPIOS to Kconfig  Commit 44986ab "ARM: 7240/1: Make ARCH_NR_GPIO a Kconfig variable" spelled ARCH_NR_GPIOS as ARCH_NR_GPIO, hence making the change ineffective. This change fixes that.  Signed-off-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | param.h | s | 687B | 25 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | fiq.h | s | 1.3K | 48 | Dave Martin | dave.martin@linaro.org | 1306402266 |  | ARM: 6940/1: fiq: Briefly document driver responsibilities for suspend/resume  Drivers which make use of the FIQ interrupt may require the state of the FIQ mode registers to be preserved across suspend/resume.  Because the FIQ mode registers are not saved and restored automatically by the kernel, driver authors will need to do the appropriate save/restore in their own driver suspend/resume handlers.  Implementing global automatic save/restore of the FIQ state does not appear appropriate, since this by itself is not sufficient for FIQ-based drivers to function correctly across suspend/resume in any case.  This patch adds a brief explanatory note to fiq.h documenting the requirement placed on driver authors.  Signed-off-by: Dave Martin <dave.martin@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | scatterlist.h | s | 246B | 9 | Russell King | rmk+kernel@arm.linux.org.uk | 1307009782 |  | ARM: Allow SoCs to enable scatterlist chaining  Allow SoCs to enable the scatterlist chaining support, which allows scatterlist tables to be broken up into smaller allocations.  As support for this feature depends on the implementation details of the users of the scatterlists, we can't enable this globally without auditing all the users, which is a very big task.  Instead, let SoCs progressively switch over to using this.  SoC drivers using scatterlists and SoC DMA implementations need auditing before this option can be enabled for the SoC.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | fb.h | s | 375B | 15 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | swab.h | s | 1.8K | 61 | Linus Torvalds | torvalds@linux-foundation.org | 1326593010 |  | Merge branch 'for-next' of git://git.infradead.org/users/dhowells/linux-headers  * 'for-next' of git://git.infradead.org/users/dhowells/linux-headers:   UAPI: Split trivial #if defined(__KERNEL__) && X conditionals   UAPI: Don't have a #elif clause in a __KERNEL__ guard in linux/soundcard.h   UAPI: Fix AHZ multiple inclusion when __KERNEL__ is removed   UAPI: Make linux/patchkey.h easier to parse   UAPI: Fix nested __KERNEL__ guards in video/edid.h   UAPI: Alter the S390 asm include guards to be recognisable by the UAPI splitter   UAPI: Guard linux/cuda.h   UAPI: Guard linux/pmu.h   UAPI: Guard linux/isdn_divertif.h   UAPI: Guard linux/sound.h   UAPI: Rearrange definition of HZ in asm-generic/param.h   UAPI: Make FRV use asm-generic/param.h   UAPI: Make M32R use asm-generic/param.h   UAPI: Make MN10300 use asm-generic/param.h   UAPI: elf_read_implies_exec() is a kernel-only feature - so hide from userspace   UAPI: Don't include linux/compat.h in sparc's asm/siginfo.h   UAPI: Fix arch/mips/include/asm/Kbuild to have separate header-y lines
f | pgtable-3level-hwdef.h | s | 2.8K | 71 | Catalin Marinas | catalin.marinas@arm.com | 1323340239 |  | ARM: LPAE: Introduce the 3-level page table format definitions  This patch introduces the pgtable-3level*.h files with definitions specific to the LPAE page table format (3 levels of page tables).  Each table is 4KB and has 512 64-bit entries. An entry can point to a 40-bit physical address. The young, write and exec software bits share the corresponding hardware bits (negated). Other software bits use spare bits in the PTE.  The patch also changes some variable types from unsigned long or int to pteval_t or pgprot_t.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
f | dma-iommu.h | s | 705B | 25 | Marek Szyprowski | m.szyprowski@samsung.com | 1337605583 |  | ARM: dma-mapping: add support for IOMMU mapper  This patch add a complete implementation of DMA-mapping API for devices which have IOMMU support.  This implementation tries to optimize dma address space usage by remapping all possible physical memory chunks into a single dma address space chunk.  DMA address space is managed on top of the bitmap stored in the dma_iommu_mapping structure stored in device->archdata. Platform setup code has to initialize parameters of the dma address space (base address, size, allocation precision order) with arm_iommu_create_mapping() function. To reduce the size of the bitmap, all allocations are aligned to the specified order of base 4 KiB pages.  dma_alloc_* functions allocate physical memory in chunks, each with alloc_pages() function to avoid failing if the physical memory gets fragmented. In worst case the allocated buffer is composed of 4 KiB page chunks.  dma_map_sg() function minimizes the total number of dma address space chunks by merging of physical memory chunks into one larger dma address space chunk. If requested chunk (scatter list entry) boundaries match physical page boundaries, most calls to dma_map_sg() requests will result in creating only one chunk in dma address space.  dma_map_page() simply creates a mapping for the given page(s) in the dma address space.  All dma functions also perform required cache operation like their counterparts from the arm linear physical memory mapping version.  This patch contains code and fixes kindly provided by: - Krishna Reddy <vdumpa@nvidia.com>, - Andrzej Pietrasiewicz <andrzej.p@samsung.com>, - Hiroshi DOYU <hdoyu@nvidia.com>  Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com> Tested-By: Subash Patel <subash.ramaswamy@linaro.org>
f | fcntl.h | s | 292B | 8 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | thread_info.h | s | 5.5K | 154 | Russell King | rmk+kernel@arm.linux.org.uk | 1338326035 |  | Merge branch 'for-arm' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/signal.git into for-linus  Conflicts: 	arch/arm/kernel/ptrace.c
f | irq.h | s | 594B | 27 | Rob Herring | rob.herring@calxeda.com | 1327951477 |  | ARM: only include mach/irqs.h for !SPARSE_IRQ  Make mach/irqs.h optional for SPARSE_IRQ. With this change mach/irqs.h can be removed by converting platforms over to sparse irq.  Platforms either need to set nr_irqs in their machine desc or all irqchips used by a platform need to allocate their irq_descs. There cannot be a mixture. Once this is done, the platforms can select SPARSE_IRQ. shmobile does the latter, and mmp and pxa do the former.  Signed-off-by: Rob Herring <rob.herring@calxeda.com>
f | timex.h | s | 494B | 20 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1218099348 |  | [ARM] Move include/asm-arm/arch-* to arch/arm/*/include/mach  This just leaves include/asm-arm/plat-* to deal with.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | dma-contiguous.h | s | 262B | 10 | Marek Szyprowski | m.szyprowski@samsung.com | 1337605778 |  | ARM: integrate CMA with DMA-mapping subsystem  This patch adds support for CMA to dma-mapping subsystem for ARM architecture. By default a global CMA area is used, but specific devices are allowed to have their private memory areas if required (they can be created with dma_declare_contiguous() function during board initialisation).  Contiguous memory areas reserved for DMA are remapped with 2-level page tables on boot. Once a buffer is requested, a low memory kernel mapping is updated to to match requested memory access type.  GFP_ATOMIC allocations are performed from special pool which is created early during boot. This way remapping page attributes is not needed on allocation time.  CMA has been enabled unconditionally for ARMv6+ systems.  Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com> CC: Michal Nazarewicz <mina86@mina86.com> Acked-by: Arnd Bergmann <arnd@arndb.de> Tested-by: Rob Clark <rob.clark@linaro.org> Tested-by: Ohad Ben-Cohen <ohad@wizery.com> Tested-by: Benjamin Gaignard <benjamin.gaignard@linaro.org> Tested-by: Robert Nelson <robertcnelson@gmail.com> Tested-by: Barry Song <Baohua.Song@csr.com>
f | socket.h | s | 1.6K | 56 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | pgtable.h | s | 10K | 255 | Russell King | rmk+kernel@arm.linux.org.uk | 1325769873 |  | Merge branch 'devel-stable' into for-linus  Conflicts: 	arch/arm/kernel/setup.c 	arch/arm/mach-shmobile/board-kota2.c
f | cachetype.h | s | 1.9K | 52 | Will Deacon | will.deacon@arm.com | 1318839221 |  | ARM: 7062/1: cache: detect PIPT I-cache using CTR  The Cache Type Register L1Ip field identifies I-caches with a PIPT policy using the encoding 11b.  This patch extends the cache policy parsing to identify PIPT I-caches correctly and prevent them from being treated as VIPT aliasing in cases where they are sufficiently large.  Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | ipcbuf.h | s | 32B | 1 | Al Viro | viro@zeniv.linux.org.uk | 1325649318 |  | consolidate a bunch of ipcbuf.h instances  ... some still remain weird :-/  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | assembler.h | s | 6.8K | 287 | Linus Torvalds | torvalds@linux-foundation.org | 1333069330 |  | 
f | hwcap.h | s | 987B | 36 | David Howells | dhowells@redhat.com | 1323788869 |  | UAPI: Split trivial #if defined(__KERNEL__) && X conditionals  Split trivial #if defined(__KERNEL__) && X conditionals to make automated disintegration easier.  Signed-off-by: David Howells <dhowells@redhat.com>
f | fpstate.h | s | 1.7K | 73 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | stat.h | s | 1.9K | 74 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | pgtable-3level.h | s | 4.8K | 130 | Catalin Marinas | catalin.marinas@arm.com | 1336829901 |  | ARM: 7416/1: LPAE: Remove unused L_PTE_(BUFFERABLE||CACHEABLE) macros  These have already been removed from the classic MMU in favour of L_PTE_MT_* macros.  Signed-off-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | clkdev.h | s | 663B | 25 | Kyungmin Park | kyungmin.park@samsung.com | 1311091785 |  | ARM: Consolidate the clkdev header files  Now most of ARM machines has the alsmot same __clk_get/put() macro  So place it at the arch/arm/include/asm/clkdev.h and remove the reduntant header files  But some machines don't have the same form as above. It can use the machince specific clkdev file by HAVE_MACH_CLKDEV config  Now there are only 3 caese.  1) define the clk structure with clkdev macro => Need to move clk structure to proper header file  arch/arm/mach-versatile/include/mach/clkdev.h arch/arm/mach-realview/include/mach/clkdev.h arch/arm/mach-vexpress/include/mach/clkdev.h arch/arm/mach-integrator/include/mach/clkdev.h  2) export the __clk_get/put function at clock.c  arch/arm/mach-shmobile/include/mach/clkdev.h  3) demuxing the clk source arch/arm/mach-u300/include/mach/clkdev.h  Acked-by: Viresh Kumar <viresh.kumar@st.com> Acked-by: H Hartley Sweeten <hsweeten@visionengravers.com> Acked-by: Jean-Christophe PLAGNIOL-VILLARD <plagnioj@jcrosoft.com> Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
f | shmbuf.h | s | 1.1K | 38 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | switch_to.h | s | 582B | 14 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
d | mach |  | 12 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | uaccess.h | s | 12K | 397 | David Howells | dhowells@redhat.com | 1332955801 |  | Disintegrate asm/system.h for ARM  Disintegrate asm/system.h for ARM.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Russell King <linux@arm.linux.org.uk> cc: linux-arm-kernel@lists.infradead.org
f | tls.h | s | 1.2K | 43 | Will Deacon | will.deacon@arm.com | 1335607290 |  | ARM: 7403/1: tls: remove covert channel via TPIDRURW  TPIDRURW is a user read/write register forming part of the group of thread registers in more recent versions of the ARM architecture (~v6+).  Currently, the kernel does not touch this register, which allows tasks to communicate covertly by reading and writing to the register without context-switching affecting its contents.  This patch clears TPIDRURW when TPIDRURO is updated via the set_tls macro, which is called directly from __switch_to. Since the current behaviour makes the register useless to userspace as far as thread pointers are concerned, simply clearing the register (rather than saving and restoring it) will not cause any problems to userspace.  Cc: stable@vger.kernel.org Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | vga.h | s | 266B | 8 | Rob Herring | rob.herring@calxeda.com | 1310487569 |  | ARM: set vga memory base at run-time  Convert the incorrectly named PCIMEM_BASE to a variable called vga_base. This removes the dependency on mach/hardware.h.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Acked-by: Nicolas Pitre <nicolas.pitre@linaro.org> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | mman.h | s | 145B | 3 | Al Viro | viro@zeniv.linux.org.uk | 1260531249 |  | arm: add arch_mmap_check(), get rid of sys_arm_mremap()  Acked-by: Russell King <rmk+kernel@arm.linux.org.uk> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | unified.h | s | 2.6K | 116 | Rob Herring | rob.herring@calxeda.com | 1326725785 |  | ARM: make BSYM macro assembly only  BSYM macro is only needed for assembly files and its usage in c files is wrong, so only define it for assembly.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Acked-by: Dave Martin <dave.martin@linaro.org>
f | mtd-xip.h | s | 666B | 19 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1229260971 |  | [ARM] move asm/xip.h's mach/hardware.h include to mach/xip.h  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | signal.h | s | 3.5K | 136 | Arnd Bergmann | arnd@arndb.de | 1244746912 |  | asm-generic: rename termios.h, signal.h and mman.h  The existing asm-generic versions are incomplete and included by some architectures. New architectures should be able to use a generic version, so rename the existing files and change all users, which lets us add the new files.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | smp_plat.h | s | 978B | 44 | Will Deacon | will.deacon@arm.com | 1327314005 |  | ARM: 7293/1: logical_cpu_map: decouple CPU mapping from SMP  It turns out that the logical CPU mapping is useful even when !CONFIG_SMP for manipulation of devices like interrupt and power controllers when running a UP kernel on a CPU other than 0. This can happen when kexecing a UP image from an SMP kernel.  In the future, multi-cluster systems running AMP configurations will require something similar for mapping cluster IDs, so it makes sense to decouple this logic in preparation for this support.  Acked-by: Yang Bai <hamo.by@gmail.com> Acked-by: Marc Zyngier <marc.zyngier@arm.com> Reported-by: Joerg Roedel <joerg.roedel@amd.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | kgdb.h | s | 2.7K | 93 | Rabin Vincent | rabin@rab.in | 1288376080 |  | kgdb,arm: fix register dump  DBG_MAX_REG_NUM incorrectly had the number of indices in the GDB regs array rather than the number of registers, leading to an oops when the "rd" command is used in KDB.  Cc: stable@kernel.org Signed-off-by: Rabin Vincent <rabin@rab.in> Signed-off-by: Jason Wessel <jason.wessel@windriver.com>
f | a.out.h | s | 894B | 27 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466282 |  | headers_check fix: arm, a.out.h  fix the following 'make headers_check' warnings:    usr/include/asm-arm/a.out.h:5: include of <linux/types.h> is preferred over <asm/types.h>   usr/include/asm-arm/a.out.h:9: found __[us]{8,16,32,64} type without #include <linux/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | msgbuf.h | s | 980B | 28 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | spinlock.h | s | 5.4K | 226 | Marc Zyngier | Marc.Zyngier@arm.com | 1306167566 |  | ARM: 6939/1: fix missing 'cpu_relax()' declaration  ARM build fails with the following symptom:    CC      arch/arm/kernel/asm-offsets.s In file included from include/linux/seqlock.h:29,                  from include/linux/time.h:8,                  from include/linux/timex.h:56,                  from include/linux/sched.h:57,                  from arch/arm/kernel/asm-offsets.c:13: include/linux/spinlock.h: In function 'spin_unlock_wait': include/linux/spinlock.h:360: error: implicit declaration of function 'cpu_relax' make[1]: *** [arch/arm/kernel/asm-offsets.s] Error 1  Fix it by including <asm/processor.h>.  Signed-off-by: Marc Zyngier <marc.zyngier@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | byteorder.h | s | 648B | 22 | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sockios.h | s | 341B | 11 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | shmparam.h | s | 380B | 13 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | sembuf.h | s | 702B | 22 | Russell King | rmk@dyn-67.arm.linux.org.uk | 1217709155 |  | [ARM] move include/asm-arm to arch/arm/include/asm  Move platform independent header files to arch/arm/include/asm, leaving those in asm/arch* and asm/plat* alone.  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
