<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-omap2 › opp2420_data.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>opp2420_data.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * opp2420_data.c - old-style &quot;OPP&quot; table for OMAP2420</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2005-2009 Texas Instruments, Inc.</span>
<span class="cm"> * Copyright (C) 2004-2009 Nokia Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * Richard Woodruff &lt;r-woodruff2@ti.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * The OMAP2 processor can be run at several discrete &#39;PRCM configurations&#39;.</span>
<span class="cm"> * These configurations are characterized by voltage and speed for clocks.</span>
<span class="cm"> * The device is only validated for certain combinations. One way to express</span>
<span class="cm"> * these combinations is via the &#39;ratios&#39; which the clocks operate with</span>
<span class="cm"> * respect to each other. These ratio sets are for a given voltage/DPLL</span>
<span class="cm"> * setting. All configurations can be described by a DPLL setting and a ratio.</span>
<span class="cm"> *</span>
<span class="cm"> * XXX Missing voltage data.</span>
<span class="cm"> * XXX Missing 19.2MHz sys_clk rate sets (needed for N800/N810)</span>
<span class="cm"> *</span>
<span class="cm"> * THe format described in this file is deprecated.  Once a reasonable</span>
<span class="cm"> * OPP API exists, the data in this file should be converted to use it.</span>
<span class="cm"> *</span>
<span class="cm"> * This is technically part of the OMAP2xxx clock code.</span>
<span class="cm"> *</span>
<span class="cm"> * Considerable work is still needed to fully support dynamic frequency</span>
<span class="cm"> * changes on OMAP2xxx-series chips.  Readers interested in such a</span>
<span class="cm"> * project are encouraged to review the Maemo Diablo RX-34 and RX-44</span>
<span class="cm"> * kernel source at:</span>
<span class="cm"> *     http://repository.maemo.org/pool/diablo/free/k/kernel-source-diablo/</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;plat/hardware.h&gt;</span>

<span class="cp">#include &quot;opp2xxx.h&quot;</span>
<span class="cp">#include &quot;sdrc.h&quot;</span>
<span class="cp">#include &quot;clock.h&quot;</span>

<span class="cm">/*</span>
<span class="cm"> * Key dividers which make up a PRCM set. Ratios for a PRCM are mandated.</span>
<span class="cm"> * xtal_speed, dpll_speed, mpu_speed, CM_CLKSEL_MPU,</span>
<span class="cm"> * CM_CLKSEL_DSP, CM_CLKSEL_GFX, CM_CLKSEL1_CORE, CM_CLKSEL1_PLL,</span>
<span class="cm"> * CM_CLKSEL2_PLL, CM_CLKSEL_MDM</span>
<span class="cm"> *</span>
<span class="cm"> * Filling in table based on H4 boards available.  There are quite a</span>
<span class="cm"> * few more rate combinations which could be defined.</span>
<span class="cm"> *</span>
<span class="cm"> * When multiple values are defined the start up will try and choose</span>
<span class="cm"> * the fastest one. If a &#39;fast&#39; value is defined, then automatically,</span>
<span class="cm"> * the /2 one should be included as it can be used.  Generally having</span>
<span class="cm"> * more than one fast set does not make sense, as static timings need</span>
<span class="cm"> * to be changed to change the set.  The exception is the bypass</span>
<span class="cm"> * setting which is available for low power bypass.</span>
<span class="cm"> *</span>
<span class="cm"> * Note: This table needs to be sorted, fastest to slowest.</span>
<span class="cm"> **/</span>
<span class="k">const</span> <span class="k">struct</span> <span class="n">prcm_config</span> <span class="n">omap2420_rate_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* PRCM I - FAST */</span>
	<span class="p">{</span><span class="n">S12M</span><span class="p">,</span> <span class="n">S660M</span><span class="p">,</span> <span class="n">S330M</span><span class="p">,</span> <span class="n">RI_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 330MHz ARM */</span>
		<span class="n">RI_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RI_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RI_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MI_CM_CLKSEL1_PLL_12_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_165MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="cm">/* PRCM II - FAST */</span>
	<span class="p">{</span><span class="n">S12M</span><span class="p">,</span> <span class="n">S600M</span><span class="p">,</span> <span class="n">S300M</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 300MHz ARM */</span>
		<span class="n">RII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MII_CM_CLKSEL1_PLL_12_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_100MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="p">{</span><span class="n">S13M</span><span class="p">,</span> <span class="n">S600M</span><span class="p">,</span> <span class="n">S300M</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 300MHz ARM */</span>
		<span class="n">RII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MII_CM_CLKSEL1_PLL_13_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_100MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="cm">/* PRCM III - FAST */</span>
	<span class="p">{</span><span class="n">S12M</span><span class="p">,</span> <span class="n">S532M</span><span class="p">,</span> <span class="n">S266M</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 266MHz ARM */</span>
		<span class="n">RIII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RIII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MIII_CM_CLKSEL1_PLL_12_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_133MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="p">{</span><span class="n">S13M</span><span class="p">,</span> <span class="n">S532M</span><span class="p">,</span> <span class="n">S266M</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 266MHz ARM */</span>
		<span class="n">RIII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RIII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MIII_CM_CLKSEL1_PLL_13_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_133MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="cm">/* PRCM II - SLOW */</span>
	<span class="p">{</span><span class="n">S12M</span><span class="p">,</span> <span class="n">S300M</span><span class="p">,</span> <span class="n">S150M</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 150MHz ARM */</span>
		<span class="n">RII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MII_CM_CLKSEL1_PLL_12_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_100MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="p">{</span><span class="n">S13M</span><span class="p">,</span> <span class="n">S300M</span><span class="p">,</span> <span class="n">S150M</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 150MHz ARM */</span>
		<span class="n">RII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MII_CM_CLKSEL1_PLL_13_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_100MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="cm">/* PRCM III - SLOW */</span>
	<span class="p">{</span><span class="n">S12M</span><span class="p">,</span> <span class="n">S266M</span><span class="p">,</span> <span class="n">S133M</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 133MHz ARM */</span>
		<span class="n">RIII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RIII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MIII_CM_CLKSEL1_PLL_12_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_133MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="p">{</span><span class="n">S13M</span><span class="p">,</span> <span class="n">S266M</span><span class="p">,</span> <span class="n">S133M</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 133MHz ARM */</span>
		<span class="n">RIII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RIII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RIII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MIII_CM_CLKSEL1_PLL_13_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_133MHz</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="cm">/* PRCM-VII (boot-bypass) */</span>
	<span class="p">{</span><span class="n">S12M</span><span class="p">,</span> <span class="n">S12M</span><span class="p">,</span> <span class="n">S12M</span><span class="p">,</span> <span class="n">RVII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 12MHz ARM*/</span>
		<span class="n">RVII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RVII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RVII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MVII_CM_CLKSEL1_PLL_12_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_BYPASS</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="cm">/* PRCM-VII (boot-bypass) */</span>
	<span class="p">{</span><span class="n">S13M</span><span class="p">,</span> <span class="n">S13M</span><span class="p">,</span> <span class="n">S13M</span><span class="p">,</span> <span class="n">RVII_CM_CLKSEL_MPU_VAL</span><span class="p">,</span>		<span class="cm">/* 13MHz ARM */</span>
		<span class="n">RVII_CM_CLKSEL_DSP_VAL</span><span class="p">,</span> <span class="n">RVII_CM_CLKSEL_GFX_VAL</span><span class="p">,</span>
		<span class="n">RVII_CM_CLKSEL1_CORE_VAL</span><span class="p">,</span> <span class="n">MVII_CM_CLKSEL1_PLL_13_VAL</span><span class="p">,</span>
		<span class="n">MX_CLKSEL2_PLL_2x_VAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SDRC_RFR_CTRL_BYPASS</span><span class="p">,</span>
		<span class="n">RATE_IN_242X</span><span class="p">},</span>

	<span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
