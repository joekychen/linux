<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-omap2 › prcm-common.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>prcm-common.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __ARCH_ASM_MACH_OMAP2_PRCM_COMMON_H</span>
<span class="cp">#define __ARCH_ASM_MACH_OMAP2_PRCM_COMMON_H</span>

<span class="cm">/*</span>
<span class="cm"> * OMAP2/3 PRCM base and module definitions</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007-2009, 2011 Texas Instruments, Inc.</span>
<span class="cm"> * Copyright (C) 2007-2009 Nokia Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * Written by Paul Walmsley</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> */</span>

<span class="cm">/* Module offsets from both CM_BASE &amp; PRM_BASE */</span>

<span class="cm">/*</span>
<span class="cm"> * Offsets that are the same on 24xx and 34xx</span>
<span class="cm"> *</span>
<span class="cm"> * Technically, in terms of the TRM, OCP_MOD is 34xx only; PLL_MOD is</span>
<span class="cm"> * CCR_MOD on 3430; and GFX_MOD only exists &lt; 3430ES2.</span>
<span class="cm"> */</span>
<span class="cp">#define OCP_MOD						0x000</span>
<span class="cp">#define MPU_MOD						0x100</span>
<span class="cp">#define CORE_MOD					0x200</span>
<span class="cp">#define GFX_MOD						0x300</span>
<span class="cp">#define WKUP_MOD					0x400</span>
<span class="cp">#define PLL_MOD						0x500</span>


<span class="cm">/* Chip-specific module offsets */</span>
<span class="cp">#define OMAP24XX_GR_MOD					OCP_MOD</span>
<span class="cp">#define OMAP24XX_DSP_MOD				0x800</span>

<span class="cp">#define OMAP2430_MDM_MOD				0xc00</span>

<span class="cm">/* IVA2 module is &lt; base on 3430 */</span>
<span class="cp">#define OMAP3430_IVA2_MOD				-0x800</span>
<span class="cp">#define OMAP3430ES2_SGX_MOD				GFX_MOD</span>
<span class="cp">#define OMAP3430_CCR_MOD				PLL_MOD</span>
<span class="cp">#define OMAP3430_DSS_MOD				0x600</span>
<span class="cp">#define OMAP3430_CAM_MOD				0x700</span>
<span class="cp">#define OMAP3430_PER_MOD				0x800</span>
<span class="cp">#define OMAP3430_EMU_MOD				0x900</span>
<span class="cp">#define OMAP3430_GR_MOD					0xa00</span>
<span class="cp">#define OMAP3430_NEON_MOD				0xb00</span>
<span class="cp">#define OMAP3430ES2_USBHOST_MOD				0xc00</span>

<span class="cm">/* 24XX register bits shared between CM &amp; PRM registers */</span>

<span class="cm">/* CM_FCLKEN1_CORE, CM_ICLKEN1_CORE, PM_WKEN1_CORE shared bits */</span>
<span class="cp">#define OMAP2420_EN_MMC_SHIFT				26</span>
<span class="cp">#define OMAP2420_EN_MMC_MASK				(1 &lt;&lt; 26)</span>
<span class="cp">#define OMAP24XX_EN_UART2_SHIFT				22</span>
<span class="cp">#define OMAP24XX_EN_UART2_MASK				(1 &lt;&lt; 22)</span>
<span class="cp">#define OMAP24XX_EN_UART1_SHIFT				21</span>
<span class="cp">#define OMAP24XX_EN_UART1_MASK				(1 &lt;&lt; 21)</span>
<span class="cp">#define OMAP24XX_EN_MCSPI2_SHIFT			18</span>
<span class="cp">#define OMAP24XX_EN_MCSPI2_MASK				(1 &lt;&lt; 18)</span>
<span class="cp">#define OMAP24XX_EN_MCSPI1_SHIFT			17</span>
<span class="cp">#define OMAP24XX_EN_MCSPI1_MASK				(1 &lt;&lt; 17)</span>
<span class="cp">#define OMAP24XX_EN_MCBSP2_SHIFT			16</span>
<span class="cp">#define OMAP24XX_EN_MCBSP2_MASK				(1 &lt;&lt; 16)</span>
<span class="cp">#define OMAP24XX_EN_MCBSP1_SHIFT			15</span>
<span class="cp">#define OMAP24XX_EN_MCBSP1_MASK				(1 &lt;&lt; 15)</span>
<span class="cp">#define OMAP24XX_EN_GPT12_SHIFT				14</span>
<span class="cp">#define OMAP24XX_EN_GPT12_MASK				(1 &lt;&lt; 14)</span>
<span class="cp">#define OMAP24XX_EN_GPT11_SHIFT				13</span>
<span class="cp">#define OMAP24XX_EN_GPT11_MASK				(1 &lt;&lt; 13)</span>
<span class="cp">#define OMAP24XX_EN_GPT10_SHIFT				12</span>
<span class="cp">#define OMAP24XX_EN_GPT10_MASK				(1 &lt;&lt; 12)</span>
<span class="cp">#define OMAP24XX_EN_GPT9_SHIFT				11</span>
<span class="cp">#define OMAP24XX_EN_GPT9_MASK				(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP24XX_EN_GPT8_SHIFT				10</span>
<span class="cp">#define OMAP24XX_EN_GPT8_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP24XX_EN_GPT7_SHIFT				9</span>
<span class="cp">#define OMAP24XX_EN_GPT7_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP24XX_EN_GPT6_SHIFT				8</span>
<span class="cp">#define OMAP24XX_EN_GPT6_MASK				(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP24XX_EN_GPT5_SHIFT				7</span>
<span class="cp">#define OMAP24XX_EN_GPT5_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP24XX_EN_GPT4_SHIFT				6</span>
<span class="cp">#define OMAP24XX_EN_GPT4_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP24XX_EN_GPT3_SHIFT				5</span>
<span class="cp">#define OMAP24XX_EN_GPT3_MASK				(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP24XX_EN_GPT2_SHIFT				4</span>
<span class="cp">#define OMAP24XX_EN_GPT2_MASK				(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP2420_EN_VLYNQ_SHIFT				3</span>
<span class="cp">#define OMAP2420_EN_VLYNQ_MASK				(1 &lt;&lt; 3)</span>

<span class="cm">/* CM_FCLKEN2_CORE, CM_ICLKEN2_CORE, PM_WKEN2_CORE shared bits */</span>
<span class="cp">#define OMAP2430_EN_GPIO5_SHIFT				10</span>
<span class="cp">#define OMAP2430_EN_GPIO5_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP2430_EN_MCSPI3_SHIFT			9</span>
<span class="cp">#define OMAP2430_EN_MCSPI3_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP2430_EN_MMCHS2_SHIFT			8</span>
<span class="cp">#define OMAP2430_EN_MMCHS2_MASK				(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP2430_EN_MMCHS1_SHIFT			7</span>
<span class="cp">#define OMAP2430_EN_MMCHS1_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP24XX_EN_UART3_SHIFT				2</span>
<span class="cp">#define OMAP24XX_EN_UART3_MASK				(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP24XX_EN_USB_SHIFT				0</span>
<span class="cp">#define OMAP24XX_EN_USB_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/* CM_ICLKEN2_CORE, PM_WKEN2_CORE shared bits */</span>
<span class="cp">#define OMAP2430_EN_MDM_INTC_SHIFT			11</span>
<span class="cp">#define OMAP2430_EN_MDM_INTC_MASK			(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP2430_EN_USBHS_SHIFT				6</span>
<span class="cp">#define OMAP2430_EN_USBHS_MASK				(1 &lt;&lt; 6)</span>

<span class="cm">/* CM_IDLEST1_CORE, PM_WKST1_CORE shared bits */</span>
<span class="cp">#define OMAP2420_ST_MMC_SHIFT				26</span>
<span class="cp">#define OMAP2420_ST_MMC_MASK				(1 &lt;&lt; 26)</span>
<span class="cp">#define OMAP24XX_ST_UART2_SHIFT				22</span>
<span class="cp">#define OMAP24XX_ST_UART2_MASK				(1 &lt;&lt; 22)</span>
<span class="cp">#define OMAP24XX_ST_UART1_SHIFT				21</span>
<span class="cp">#define OMAP24XX_ST_UART1_MASK				(1 &lt;&lt; 21)</span>
<span class="cp">#define OMAP24XX_ST_MCSPI2_SHIFT			18</span>
<span class="cp">#define OMAP24XX_ST_MCSPI2_MASK				(1 &lt;&lt; 18)</span>
<span class="cp">#define OMAP24XX_ST_MCSPI1_SHIFT			17</span>
<span class="cp">#define OMAP24XX_ST_MCSPI1_MASK				(1 &lt;&lt; 17)</span>
<span class="cp">#define OMAP24XX_ST_MCBSP2_SHIFT			16</span>
<span class="cp">#define OMAP24XX_ST_MCBSP2_MASK				(1 &lt;&lt; 16)</span>
<span class="cp">#define OMAP24XX_ST_MCBSP1_SHIFT			15</span>
<span class="cp">#define OMAP24XX_ST_MCBSP1_MASK				(1 &lt;&lt; 15)</span>
<span class="cp">#define OMAP24XX_ST_GPT12_SHIFT				14</span>
<span class="cp">#define OMAP24XX_ST_GPT12_MASK				(1 &lt;&lt; 14)</span>
<span class="cp">#define OMAP24XX_ST_GPT11_SHIFT				13</span>
<span class="cp">#define OMAP24XX_ST_GPT11_MASK				(1 &lt;&lt; 13)</span>
<span class="cp">#define OMAP24XX_ST_GPT10_SHIFT				12</span>
<span class="cp">#define OMAP24XX_ST_GPT10_MASK				(1 &lt;&lt; 12)</span>
<span class="cp">#define OMAP24XX_ST_GPT9_SHIFT				11</span>
<span class="cp">#define OMAP24XX_ST_GPT9_MASK				(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP24XX_ST_GPT8_SHIFT				10</span>
<span class="cp">#define OMAP24XX_ST_GPT8_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP24XX_ST_GPT7_SHIFT				9</span>
<span class="cp">#define OMAP24XX_ST_GPT7_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP24XX_ST_GPT6_SHIFT				8</span>
<span class="cp">#define OMAP24XX_ST_GPT6_MASK				(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP24XX_ST_GPT5_SHIFT				7</span>
<span class="cp">#define OMAP24XX_ST_GPT5_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP24XX_ST_GPT4_SHIFT				6</span>
<span class="cp">#define OMAP24XX_ST_GPT4_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP24XX_ST_GPT3_SHIFT				5</span>
<span class="cp">#define OMAP24XX_ST_GPT3_MASK				(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP24XX_ST_GPT2_SHIFT				4</span>
<span class="cp">#define OMAP24XX_ST_GPT2_MASK				(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP2420_ST_VLYNQ_SHIFT				3</span>
<span class="cp">#define OMAP2420_ST_VLYNQ_MASK				(1 &lt;&lt; 3)</span>

<span class="cm">/* CM_IDLEST2_CORE, PM_WKST2_CORE shared bits */</span>
<span class="cp">#define OMAP2430_ST_MDM_INTC_SHIFT			11</span>
<span class="cp">#define OMAP2430_ST_MDM_INTC_MASK			(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP2430_ST_GPIO5_SHIFT				10</span>
<span class="cp">#define OMAP2430_ST_GPIO5_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP2430_ST_MCSPI3_SHIFT			9</span>
<span class="cp">#define OMAP2430_ST_MCSPI3_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP2430_ST_MMCHS2_SHIFT			8</span>
<span class="cp">#define OMAP2430_ST_MMCHS2_MASK				(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP2430_ST_MMCHS1_SHIFT			7</span>
<span class="cp">#define OMAP2430_ST_MMCHS1_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP2430_ST_USBHS_SHIFT				6</span>
<span class="cp">#define OMAP2430_ST_USBHS_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP24XX_ST_UART3_SHIFT				2</span>
<span class="cp">#define OMAP24XX_ST_UART3_MASK				(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP24XX_ST_USB_SHIFT				0</span>
<span class="cp">#define OMAP24XX_ST_USB_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/* CM_FCLKEN_WKUP, CM_ICLKEN_WKUP, PM_WKEN_WKUP shared bits */</span>
<span class="cp">#define OMAP24XX_EN_GPIOS_SHIFT				2</span>
<span class="cp">#define OMAP24XX_EN_GPIOS_MASK				(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP24XX_EN_GPT1_SHIFT				0</span>
<span class="cp">#define OMAP24XX_EN_GPT1_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/* PM_WKST_WKUP, CM_IDLEST_WKUP shared bits */</span>
<span class="cp">#define OMAP24XX_ST_GPIOS_SHIFT				2</span>
<span class="cp">#define OMAP24XX_ST_GPIOS_MASK				(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP24XX_ST_32KSYNC_SHIFT			1</span>
<span class="cp">#define OMAP24XX_ST_32KSYNC_MASK			(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP24XX_ST_GPT1_SHIFT				0</span>
<span class="cp">#define OMAP24XX_ST_GPT1_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/* CM_IDLEST_MDM and PM_WKST_MDM shared bits */</span>
<span class="cp">#define OMAP2430_ST_MDM_SHIFT				0</span>
<span class="cp">#define OMAP2430_ST_MDM_MASK				(1 &lt;&lt; 0)</span>


<span class="cm">/* 3430 register bits shared between CM &amp; PRM registers */</span>

<span class="cm">/* CM_REVISION, PRM_REVISION shared bits */</span>
<span class="cp">#define OMAP3430_REV_SHIFT				0</span>
<span class="cp">#define OMAP3430_REV_MASK				(0xff &lt;&lt; 0)</span>

<span class="cm">/* CM_SYSCONFIG, PRM_SYSCONFIG shared bits */</span>
<span class="cp">#define OMAP3430_AUTOIDLE_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/* CM_FCLKEN1_CORE, CM_ICLKEN1_CORE, PM_WKEN1_CORE shared bits */</span>
<span class="cp">#define OMAP3430_EN_MMC3_MASK				(1 &lt;&lt; 30)</span>
<span class="cp">#define OMAP3430_EN_MMC3_SHIFT				30</span>
<span class="cp">#define OMAP3430_EN_MMC2_MASK				(1 &lt;&lt; 25)</span>
<span class="cp">#define OMAP3430_EN_MMC2_SHIFT				25</span>
<span class="cp">#define OMAP3430_EN_MMC1_MASK				(1 &lt;&lt; 24)</span>
<span class="cp">#define OMAP3430_EN_MMC1_SHIFT				24</span>
<span class="cp">#define OMAP3430_EN_UART4_MASK				(1 &lt;&lt; 23)</span>
<span class="cp">#define OMAP3430_EN_UART4_SHIFT				23</span>
<span class="cp">#define OMAP3430_EN_MCSPI4_MASK				(1 &lt;&lt; 21)</span>
<span class="cp">#define OMAP3430_EN_MCSPI4_SHIFT			21</span>
<span class="cp">#define OMAP3430_EN_MCSPI3_MASK				(1 &lt;&lt; 20)</span>
<span class="cp">#define OMAP3430_EN_MCSPI3_SHIFT			20</span>
<span class="cp">#define OMAP3430_EN_MCSPI2_MASK				(1 &lt;&lt; 19)</span>
<span class="cp">#define OMAP3430_EN_MCSPI2_SHIFT			19</span>
<span class="cp">#define OMAP3430_EN_MCSPI1_MASK				(1 &lt;&lt; 18)</span>
<span class="cp">#define OMAP3430_EN_MCSPI1_SHIFT			18</span>
<span class="cp">#define OMAP3430_EN_I2C3_MASK				(1 &lt;&lt; 17)</span>
<span class="cp">#define OMAP3430_EN_I2C3_SHIFT				17</span>
<span class="cp">#define OMAP3430_EN_I2C2_MASK				(1 &lt;&lt; 16)</span>
<span class="cp">#define OMAP3430_EN_I2C2_SHIFT				16</span>
<span class="cp">#define OMAP3430_EN_I2C1_MASK				(1 &lt;&lt; 15)</span>
<span class="cp">#define OMAP3430_EN_I2C1_SHIFT				15</span>
<span class="cp">#define OMAP3430_EN_UART2_MASK				(1 &lt;&lt; 14)</span>
<span class="cp">#define OMAP3430_EN_UART2_SHIFT				14</span>
<span class="cp">#define OMAP3430_EN_UART1_MASK				(1 &lt;&lt; 13)</span>
<span class="cp">#define OMAP3430_EN_UART1_SHIFT				13</span>
<span class="cp">#define OMAP3430_EN_GPT11_MASK				(1 &lt;&lt; 12)</span>
<span class="cp">#define OMAP3430_EN_GPT11_SHIFT				12</span>
<span class="cp">#define OMAP3430_EN_GPT10_MASK				(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP3430_EN_GPT10_SHIFT				11</span>
<span class="cp">#define OMAP3430_EN_MCBSP5_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP3430_EN_MCBSP5_SHIFT			10</span>
<span class="cp">#define OMAP3430_EN_MCBSP1_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP3430_EN_MCBSP1_SHIFT			9</span>
<span class="cp">#define OMAP3430_EN_FSHOSTUSB_MASK			(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP3430_EN_FSHOSTUSB_SHIFT			5</span>
<span class="cp">#define OMAP3430_EN_D2D_MASK				(1 &lt;&lt; 3)</span>
<span class="cp">#define OMAP3430_EN_D2D_SHIFT				3</span>

<span class="cm">/* CM_ICLKEN1_CORE, PM_WKEN1_CORE shared bits */</span>
<span class="cp">#define OMAP3430_EN_HSOTGUSB_MASK			(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP3430_EN_HSOTGUSB_SHIFT			4</span>

<span class="cm">/* PM_WKST1_CORE, CM_IDLEST1_CORE shared bits */</span>
<span class="cp">#define OMAP3430_ST_MMC3_SHIFT				30</span>
<span class="cp">#define OMAP3430_ST_MMC3_MASK				(1 &lt;&lt; 30)</span>
<span class="cp">#define OMAP3430_ST_MMC2_SHIFT				25</span>
<span class="cp">#define OMAP3430_ST_MMC2_MASK				(1 &lt;&lt; 25)</span>
<span class="cp">#define OMAP3430_ST_MMC1_SHIFT				24</span>
<span class="cp">#define OMAP3430_ST_MMC1_MASK				(1 &lt;&lt; 24)</span>
<span class="cp">#define OMAP3430_ST_MCSPI4_SHIFT			21</span>
<span class="cp">#define OMAP3430_ST_MCSPI4_MASK				(1 &lt;&lt; 21)</span>
<span class="cp">#define OMAP3430_ST_MCSPI3_SHIFT			20</span>
<span class="cp">#define OMAP3430_ST_MCSPI3_MASK				(1 &lt;&lt; 20)</span>
<span class="cp">#define OMAP3430_ST_MCSPI2_SHIFT			19</span>
<span class="cp">#define OMAP3430_ST_MCSPI2_MASK				(1 &lt;&lt; 19)</span>
<span class="cp">#define OMAP3430_ST_MCSPI1_SHIFT			18</span>
<span class="cp">#define OMAP3430_ST_MCSPI1_MASK				(1 &lt;&lt; 18)</span>
<span class="cp">#define OMAP3430_ST_I2C3_SHIFT				17</span>
<span class="cp">#define OMAP3430_ST_I2C3_MASK				(1 &lt;&lt; 17)</span>
<span class="cp">#define OMAP3430_ST_I2C2_SHIFT				16</span>
<span class="cp">#define OMAP3430_ST_I2C2_MASK				(1 &lt;&lt; 16)</span>
<span class="cp">#define OMAP3430_ST_I2C1_SHIFT				15</span>
<span class="cp">#define OMAP3430_ST_I2C1_MASK				(1 &lt;&lt; 15)</span>
<span class="cp">#define OMAP3430_ST_UART2_SHIFT				14</span>
<span class="cp">#define OMAP3430_ST_UART2_MASK				(1 &lt;&lt; 14)</span>
<span class="cp">#define OMAP3430_ST_UART1_SHIFT				13</span>
<span class="cp">#define OMAP3430_ST_UART1_MASK				(1 &lt;&lt; 13)</span>
<span class="cp">#define OMAP3430_ST_GPT11_SHIFT				12</span>
<span class="cp">#define OMAP3430_ST_GPT11_MASK				(1 &lt;&lt; 12)</span>
<span class="cp">#define OMAP3430_ST_GPT10_SHIFT				11</span>
<span class="cp">#define OMAP3430_ST_GPT10_MASK				(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP3430_ST_MCBSP5_SHIFT			10</span>
<span class="cp">#define OMAP3430_ST_MCBSP5_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP3430_ST_MCBSP1_SHIFT			9</span>
<span class="cp">#define OMAP3430_ST_MCBSP1_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP3430ES1_ST_FSHOSTUSB_SHIFT			5</span>
<span class="cp">#define OMAP3430ES1_ST_FSHOSTUSB_MASK			(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP3430ES1_ST_HSOTGUSB_SHIFT			4</span>
<span class="cp">#define OMAP3430ES1_ST_HSOTGUSB_MASK			(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP3430ES2_ST_HSOTGUSB_IDLE_SHIFT		5</span>
<span class="cp">#define OMAP3430ES2_ST_HSOTGUSB_IDLE_MASK		(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP3430ES2_ST_HSOTGUSB_STDBY_SHIFT		4</span>
<span class="cp">#define OMAP3430ES2_ST_HSOTGUSB_STDBY_MASK		(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP3430_ST_D2D_SHIFT				3</span>
<span class="cp">#define OMAP3430_ST_D2D_MASK				(1 &lt;&lt; 3)</span>

<span class="cm">/* CM_FCLKEN_WKUP, CM_ICLKEN_WKUP, PM_WKEN_WKUP shared bits */</span>
<span class="cp">#define OMAP3430_EN_GPIO1_MASK				(1 &lt;&lt; 3)</span>
<span class="cp">#define OMAP3430_EN_GPIO1_SHIFT				3</span>
<span class="cp">#define OMAP3430_EN_GPT12_MASK				(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP3430_EN_GPT12_SHIFT				1</span>
<span class="cp">#define OMAP3430_EN_GPT1_MASK				(1 &lt;&lt; 0)</span>
<span class="cp">#define OMAP3430_EN_GPT1_SHIFT				0</span>

<span class="cm">/* CM_FCLKEN_WKUP, PM_WKEN_WKUP shared bits */</span>
<span class="cp">#define OMAP3430_EN_SR2_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP3430_EN_SR2_SHIFT				7</span>
<span class="cp">#define OMAP3430_EN_SR1_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP3430_EN_SR1_SHIFT				6</span>

<span class="cm">/* CM_ICLKEN_WKUP, PM_WKEN_WKUP shared bits */</span>
<span class="cp">#define OMAP3430_EN_GPT12_MASK				(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP3430_EN_GPT12_SHIFT				1</span>

<span class="cm">/* CM_IDLEST_WKUP, PM_WKST_WKUP shared bits */</span>
<span class="cp">#define OMAP3430_ST_SR2_SHIFT				7</span>
<span class="cp">#define OMAP3430_ST_SR2_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP3430_ST_SR1_SHIFT				6</span>
<span class="cp">#define OMAP3430_ST_SR1_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP3430_ST_GPIO1_SHIFT				3</span>
<span class="cp">#define OMAP3430_ST_GPIO1_MASK				(1 &lt;&lt; 3)</span>
<span class="cp">#define OMAP3430_ST_32KSYNC_SHIFT			2</span>
<span class="cp">#define OMAP3430_ST_32KSYNC_MASK			(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP3430_ST_GPT12_SHIFT				1</span>
<span class="cp">#define OMAP3430_ST_GPT12_MASK				(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP3430_ST_GPT1_SHIFT				0</span>
<span class="cp">#define OMAP3430_ST_GPT1_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/*</span>
<span class="cm"> * CM_SLEEPDEP_GFX, CM_SLEEPDEP_DSS, CM_SLEEPDEP_CAM,</span>
<span class="cm"> * CM_SLEEPDEP_PER, PM_WKDEP_IVA2, PM_WKDEP_GFX,</span>
<span class="cm"> * PM_WKDEP_DSS, PM_WKDEP_CAM, PM_WKDEP_PER, PM_WKDEP_NEON shared bits</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP3430_EN_MPU_MASK				(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP3430_EN_MPU_SHIFT				1</span>

<span class="cm">/* CM_FCLKEN_PER, CM_ICLKEN_PER, PM_WKEN_PER shared bits */</span>

<span class="cp">#define OMAP3630_EN_UART4_MASK				(1 &lt;&lt; 18)</span>
<span class="cp">#define OMAP3630_EN_UART4_SHIFT				18</span>
<span class="cp">#define OMAP3430_EN_GPIO6_MASK				(1 &lt;&lt; 17)</span>
<span class="cp">#define OMAP3430_EN_GPIO6_SHIFT				17</span>
<span class="cp">#define OMAP3430_EN_GPIO5_MASK				(1 &lt;&lt; 16)</span>
<span class="cp">#define OMAP3430_EN_GPIO5_SHIFT				16</span>
<span class="cp">#define OMAP3430_EN_GPIO4_MASK				(1 &lt;&lt; 15)</span>
<span class="cp">#define OMAP3430_EN_GPIO4_SHIFT				15</span>
<span class="cp">#define OMAP3430_EN_GPIO3_MASK				(1 &lt;&lt; 14)</span>
<span class="cp">#define OMAP3430_EN_GPIO3_SHIFT				14</span>
<span class="cp">#define OMAP3430_EN_GPIO2_MASK				(1 &lt;&lt; 13)</span>
<span class="cp">#define OMAP3430_EN_GPIO2_SHIFT				13</span>
<span class="cp">#define OMAP3430_EN_UART3_MASK				(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP3430_EN_UART3_SHIFT				11</span>
<span class="cp">#define OMAP3430_EN_GPT9_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP3430_EN_GPT9_SHIFT				10</span>
<span class="cp">#define OMAP3430_EN_GPT8_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP3430_EN_GPT8_SHIFT				9</span>
<span class="cp">#define OMAP3430_EN_GPT7_MASK				(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP3430_EN_GPT7_SHIFT				8</span>
<span class="cp">#define OMAP3430_EN_GPT6_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP3430_EN_GPT6_SHIFT				7</span>
<span class="cp">#define OMAP3430_EN_GPT5_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP3430_EN_GPT5_SHIFT				6</span>
<span class="cp">#define OMAP3430_EN_GPT4_MASK				(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP3430_EN_GPT4_SHIFT				5</span>
<span class="cp">#define OMAP3430_EN_GPT3_MASK				(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP3430_EN_GPT3_SHIFT				4</span>
<span class="cp">#define OMAP3430_EN_GPT2_MASK				(1 &lt;&lt; 3)</span>
<span class="cp">#define OMAP3430_EN_GPT2_SHIFT				3</span>

<span class="cm">/* CM_FCLKEN_PER, CM_ICLKEN_PER, PM_WKEN_PER, PM_WKST_PER shared bits */</span>
<span class="cm">/* XXX Possible TI documentation bug: should the PM_WKST_PER EN_* bits</span>
<span class="cm"> * be ST_* bits instead? */</span>
<span class="cp">#define OMAP3430_EN_MCBSP4_MASK				(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP3430_EN_MCBSP4_SHIFT			2</span>
<span class="cp">#define OMAP3430_EN_MCBSP3_MASK				(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP3430_EN_MCBSP3_SHIFT			1</span>
<span class="cp">#define OMAP3430_EN_MCBSP2_MASK				(1 &lt;&lt; 0)</span>
<span class="cp">#define OMAP3430_EN_MCBSP2_SHIFT			0</span>

<span class="cm">/* CM_IDLEST_PER, PM_WKST_PER shared bits */</span>
<span class="cp">#define OMAP3630_ST_UART4_SHIFT				18</span>
<span class="cp">#define OMAP3630_ST_UART4_MASK				(1 &lt;&lt; 18)</span>
<span class="cp">#define OMAP3430_ST_GPIO6_SHIFT				17</span>
<span class="cp">#define OMAP3430_ST_GPIO6_MASK				(1 &lt;&lt; 17)</span>
<span class="cp">#define OMAP3430_ST_GPIO5_SHIFT				16</span>
<span class="cp">#define OMAP3430_ST_GPIO5_MASK				(1 &lt;&lt; 16)</span>
<span class="cp">#define OMAP3430_ST_GPIO4_SHIFT				15</span>
<span class="cp">#define OMAP3430_ST_GPIO4_MASK				(1 &lt;&lt; 15)</span>
<span class="cp">#define OMAP3430_ST_GPIO3_SHIFT				14</span>
<span class="cp">#define OMAP3430_ST_GPIO3_MASK				(1 &lt;&lt; 14)</span>
<span class="cp">#define OMAP3430_ST_GPIO2_SHIFT				13</span>
<span class="cp">#define OMAP3430_ST_GPIO2_MASK				(1 &lt;&lt; 13)</span>
<span class="cp">#define OMAP3430_ST_UART3_SHIFT				11</span>
<span class="cp">#define OMAP3430_ST_UART3_MASK				(1 &lt;&lt; 11)</span>
<span class="cp">#define OMAP3430_ST_GPT9_SHIFT				10</span>
<span class="cp">#define OMAP3430_ST_GPT9_MASK				(1 &lt;&lt; 10)</span>
<span class="cp">#define OMAP3430_ST_GPT8_SHIFT				9</span>
<span class="cp">#define OMAP3430_ST_GPT8_MASK				(1 &lt;&lt; 9)</span>
<span class="cp">#define OMAP3430_ST_GPT7_SHIFT				8</span>
<span class="cp">#define OMAP3430_ST_GPT7_MASK				(1 &lt;&lt; 8)</span>
<span class="cp">#define OMAP3430_ST_GPT6_SHIFT				7</span>
<span class="cp">#define OMAP3430_ST_GPT6_MASK				(1 &lt;&lt; 7)</span>
<span class="cp">#define OMAP3430_ST_GPT5_SHIFT				6</span>
<span class="cp">#define OMAP3430_ST_GPT5_MASK				(1 &lt;&lt; 6)</span>
<span class="cp">#define OMAP3430_ST_GPT4_SHIFT				5</span>
<span class="cp">#define OMAP3430_ST_GPT4_MASK				(1 &lt;&lt; 5)</span>
<span class="cp">#define OMAP3430_ST_GPT3_SHIFT				4</span>
<span class="cp">#define OMAP3430_ST_GPT3_MASK				(1 &lt;&lt; 4)</span>
<span class="cp">#define OMAP3430_ST_GPT2_SHIFT				3</span>
<span class="cp">#define OMAP3430_ST_GPT2_MASK				(1 &lt;&lt; 3)</span>

<span class="cm">/* CM_SLEEPDEP_PER, PM_WKDEP_IVA2, PM_WKDEP_MPU, PM_WKDEP_PER shared bits */</span>
<span class="cp">#define OMAP3430_EN_CORE_SHIFT				0</span>
<span class="cp">#define OMAP3430_EN_CORE_MASK				(1 &lt;&lt; 0)</span>


<span class="cm">/*</span>
<span class="cm"> * MAX_MODULE_HARDRESET_WAIT: Maximum microseconds to wait for an OMAP</span>
<span class="cm"> * submodule to exit hardreset</span>
<span class="cm"> */</span>
<span class="cp">#define MAX_MODULE_HARDRESET_WAIT		10000</span>

<span class="cp"># ifndef __ASSEMBLER__</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">prm_base</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">cm_base</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">cm2_base</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">prcm_mpu_base</span><span class="p">;</span>

<span class="cp">#if defined(CONFIG_ARCH_OMAP4) || defined(CONFIG_ARCH_OMAP5)</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_prm_base_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_cm_base_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">omap_prm_base_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">omap_cm_base_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="cm">/**</span>
<span class="cm"> * struct omap_prcm_irq - describes a PRCM interrupt bit</span>
<span class="cm"> * @name: a short name describing the interrupt type, e.g. &quot;wkup&quot; or &quot;io&quot;</span>
<span class="cm"> * @offset: the bit shift of the interrupt inside the IRQ{ENABLE,STATUS} regs</span>
<span class="cm"> * @priority: should this interrupt be handled before @priority=false IRQs?</span>
<span class="cm"> *</span>
<span class="cm"> * Describes interrupt bits inside the PRM_IRQ{ENABLE,STATUS}_MPU* registers.</span>
<span class="cm"> * On systems with multiple PRM MPU IRQ registers, the bitfields read from</span>
<span class="cm"> * the registers are concatenated, so @offset could be &gt; 31 on these systems -</span>
<span class="cm"> * see omap_prm_irq_handler() for more details.  I/O ring interrupts should</span>
<span class="cm"> * have @priority set to true.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">omap_prcm_irq</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">priority</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> * struct omap_prcm_irq_setup - PRCM interrupt controller details</span>
<span class="cm"> * @ack: PRM register offset for the first PRM_IRQSTATUS_MPU register</span>
<span class="cm"> * @mask: PRM register offset for the first PRM_IRQENABLE_MPU register</span>
<span class="cm"> * @nr_regs: number of PRM_IRQ{STATUS,ENABLE}_MPU* registers</span>
<span class="cm"> * @nr_irqs: number of entries in the @irqs array</span>
<span class="cm"> * @irqs: ptr to an array of PRCM interrupt bits (see @nr_irqs)</span>
<span class="cm"> * @irq: MPU IRQ asserted when a PRCM interrupt arrives</span>
<span class="cm"> * @read_pending_irqs: fn ptr to determine if any PRCM IRQs are pending</span>
<span class="cm"> * @ocp_barrier: fn ptr to force buffered PRM writes to complete</span>
<span class="cm"> * @save_and_clear_irqen: fn ptr to save and clear IRQENABLE regs</span>
<span class="cm"> * @restore_irqen: fn ptr to save and clear IRQENABLE regs</span>
<span class="cm"> * @saved_mask: IRQENABLE regs are saved here during suspend</span>
<span class="cm"> * @priority_mask: 1 bit per IRQ, set to 1 if omap_prcm_irq.priority = true</span>
<span class="cm"> * @base_irq: base dynamic IRQ number, returned from irq_alloc_descs() in init</span>
<span class="cm"> * @suspended: set to true after Linux suspend code has called our -&gt;prepare()</span>
<span class="cm"> * @suspend_save_flag: set to true after IRQ masks have been saved and disabled</span>
<span class="cm"> *</span>
<span class="cm"> * @saved_mask, @priority_mask, @base_irq, @suspended, and</span>
<span class="cm"> * @suspend_save_flag are populated dynamically, and are not to be</span>
<span class="cm"> * specified in static initializers.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">omap_prcm_irq_setup</span> <span class="p">{</span>
	<span class="n">u16</span> <span class="n">ack</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">nr_regs</span><span class="p">;</span>
	<span class="n">u8</span> <span class="n">nr_irqs</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">omap_prcm_irq</span> <span class="o">*</span><span class="n">irqs</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">irq</span><span class="p">;</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">read_pending_irqs</span><span class="p">)(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">events</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">ocp_barrier</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">save_and_clear_irqen</span><span class="p">)(</span><span class="n">u32</span> <span class="o">*</span><span class="n">saved_mask</span><span class="p">);</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">restore_irqen</span><span class="p">)(</span><span class="n">u32</span> <span class="o">*</span><span class="n">saved_mask</span><span class="p">);</span>
	<span class="n">u32</span> <span class="o">*</span><span class="n">saved_mask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="o">*</span><span class="n">priority_mask</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">base_irq</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">suspended</span><span class="p">;</span>
	<span class="n">bool</span> <span class="n">suspend_save_flag</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* OMAP_PRCM_IRQ: convenience macro for creating struct omap_prcm_irq records */</span>
<span class="cp">#define OMAP_PRCM_IRQ(_name, _offset, _priority) {	\</span>
<span class="cp">	.name = _name,					\</span>
<span class="cp">	.offset = _offset,				\</span>
<span class="cp">	.priority = _priority				\</span>
<span class="cp">	}</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_prcm_irq_cleanup</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_prcm_register_chain_handler</span><span class="p">(</span>
	<span class="k">struct</span> <span class="n">omap_prcm_irq_setup</span> <span class="o">*</span><span class="n">irq_setup</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap_prcm_event_to_irq</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">event</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_prcm_irq_prepare</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap_prcm_irq_complete</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp"># endif</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
