<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-omap2 › opp2xxx.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>opp2xxx.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * opp2xxx.h - macros for old-style OMAP2xxx &quot;OPP&quot; definitions</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2005-2009 Texas Instruments, Inc.</span>
<span class="cm"> * Copyright (C) 2004-2009 Nokia Corporation</span>
<span class="cm"> *</span>
<span class="cm"> * Richard Woodruff &lt;r-woodruff2@ti.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * The OMAP2 processor can be run at several discrete &#39;PRCM configurations&#39;.</span>
<span class="cm"> * These configurations are characterized by voltage and speed for clocks.</span>
<span class="cm"> * The device is only validated for certain combinations. One way to express</span>
<span class="cm"> * these combinations is via the &#39;ratio&#39;s&#39; which the clocks operate with</span>
<span class="cm"> * respect to each other. These ratio sets are for a given voltage/DPLL</span>
<span class="cm"> * setting. All configurations can be described by a DPLL setting and a ratio</span>
<span class="cm"> * There are 3 ratio sets for the 2430 and X ratio sets for 2420.</span>
<span class="cm"> *</span>
<span class="cm"> * 2430 differs from 2420 in that there are no more phase synchronizers used.</span>
<span class="cm"> * They both have a slightly different clock domain setup. 2420(iva1,dsp) vs</span>
<span class="cm"> * 2430 (iva2.1, NOdsp, mdm)</span>
<span class="cm"> *</span>
<span class="cm"> * XXX Missing voltage data.</span>
<span class="cm"> *</span>
<span class="cm"> * THe format described in this file is deprecated.  Once a reasonable</span>
<span class="cm"> * OPP API exists, the data in this file should be converted to use it.</span>
<span class="cm"> *</span>
<span class="cm"> * This is technically part of the OMAP2xxx clock code.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ARCH_ARM_MACH_OMAP2_OPP2XXX_H</span>
<span class="cp">#define __ARCH_ARM_MACH_OMAP2_OPP2XXX_H</span>

<span class="cm">/**</span>
<span class="cm"> * struct prcm_config - define clock rates on a per-OPP basis (24xx)</span>
<span class="cm"> *</span>
<span class="cm"> * Key dividers which make up a PRCM set. Ratio&#39;s for a PRCM are mandated.</span>
<span class="cm"> * xtal_speed, dpll_speed, mpu_speed, CM_CLKSEL_MPU,CM_CLKSEL_DSP</span>
<span class="cm"> * CM_CLKSEL_GFX, CM_CLKSEL1_CORE, CM_CLKSEL1_PLL CM_CLKSEL2_PLL, CM_CLKSEL_MDM</span>
<span class="cm"> *</span>
<span class="cm"> * This is deprecated.  As soon as we have a decent OPP API, we should</span>
<span class="cm"> * move all this stuff to it.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">prcm_config</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">xtal_speed</span><span class="p">;</span>	<span class="cm">/* crystal rate */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dpll_speed</span><span class="p">;</span>	<span class="cm">/* dpll: out*xtal*M/(N-1)table_recalc */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mpu_speed</span><span class="p">;</span>	<span class="cm">/* speed of MPU */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel_mpu</span><span class="p">;</span>	<span class="cm">/* mpu divider */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel_dsp</span><span class="p">;</span>	<span class="cm">/* dsp+iva1 div(2420), iva2.1(2430) */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel_gfx</span><span class="p">;</span>	<span class="cm">/* gfx dividers */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel1_core</span><span class="p">;</span>	<span class="cm">/* major subsystem dividers */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel1_pll</span><span class="p">;</span>	<span class="cm">/* m,n */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel2_pll</span><span class="p">;</span>	<span class="cm">/* dpllx1 or x2 out */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cm_clksel_mdm</span><span class="p">;</span>	<span class="cm">/* modem dividers 2430 only */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base_sdrc_rfr</span><span class="p">;</span>	<span class="cm">/* base refresh timing for a set */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">};</span>


<span class="cm">/* Core fields for cm_clksel, not ratio governed */</span>
<span class="cp">#define RX_CLKSEL_DSS1			(0x10 &lt;&lt; 8)</span>
<span class="cp">#define RX_CLKSEL_DSS2			(0x0 &lt;&lt; 13)</span>
<span class="cp">#define RX_CLKSEL_SSI			(0x5 &lt;&lt; 20)</span>

<span class="cm">/*-------------------------------------------------------------------------</span>
<span class="cm"> * Voltage/DPLL ratios</span>
<span class="cm"> *-------------------------------------------------------------------------*/</span>

<span class="cm">/* 2430 Ratio&#39;s, 2430-Ratio Config 1 */</span>
<span class="cp">#define R1_CLKSEL_L3			(4 &lt;&lt; 0)</span>
<span class="cp">#define R1_CLKSEL_L4			(2 &lt;&lt; 5)</span>
<span class="cp">#define R1_CLKSEL_USB			(4 &lt;&lt; 25)</span>
<span class="cp">#define R1_CM_CLKSEL1_CORE_VAL		(R1_CLKSEL_USB | RX_CLKSEL_SSI | \</span>
<span class="cp">					 RX_CLKSEL_DSS2 | RX_CLKSEL_DSS1 | \</span>
<span class="cp">					 R1_CLKSEL_L4 | R1_CLKSEL_L3)</span>
<span class="cp">#define R1_CLKSEL_MPU			(2 &lt;&lt; 0)</span>
<span class="cp">#define R1_CM_CLKSEL_MPU_VAL		R1_CLKSEL_MPU</span>
<span class="cp">#define R1_CLKSEL_DSP			(2 &lt;&lt; 0)</span>
<span class="cp">#define R1_CLKSEL_DSP_IF		(2 &lt;&lt; 5)</span>
<span class="cp">#define R1_CM_CLKSEL_DSP_VAL		(R1_CLKSEL_DSP | R1_CLKSEL_DSP_IF)</span>
<span class="cp">#define R1_CLKSEL_GFX			(2 &lt;&lt; 0)</span>
<span class="cp">#define R1_CM_CLKSEL_GFX_VAL		R1_CLKSEL_GFX</span>
<span class="cp">#define R1_CLKSEL_MDM			(4 &lt;&lt; 0)</span>
<span class="cp">#define R1_CM_CLKSEL_MDM_VAL		R1_CLKSEL_MDM</span>

<span class="cm">/* 2430-Ratio Config 2 */</span>
<span class="cp">#define R2_CLKSEL_L3			(6 &lt;&lt; 0)</span>
<span class="cp">#define R2_CLKSEL_L4			(2 &lt;&lt; 5)</span>
<span class="cp">#define R2_CLKSEL_USB			(2 &lt;&lt; 25)</span>
<span class="cp">#define R2_CM_CLKSEL1_CORE_VAL		(R2_CLKSEL_USB | RX_CLKSEL_SSI | \</span>
<span class="cp">					 RX_CLKSEL_DSS2 | RX_CLKSEL_DSS1 | \</span>
<span class="cp">					 R2_CLKSEL_L4 | R2_CLKSEL_L3)</span>
<span class="cp">#define R2_CLKSEL_MPU			(2 &lt;&lt; 0)</span>
<span class="cp">#define R2_CM_CLKSEL_MPU_VAL		R2_CLKSEL_MPU</span>
<span class="cp">#define R2_CLKSEL_DSP			(2 &lt;&lt; 0)</span>
<span class="cp">#define R2_CLKSEL_DSP_IF		(3 &lt;&lt; 5)</span>
<span class="cp">#define R2_CM_CLKSEL_DSP_VAL		(R2_CLKSEL_DSP | R2_CLKSEL_DSP_IF)</span>
<span class="cp">#define R2_CLKSEL_GFX			(2 &lt;&lt; 0)</span>
<span class="cp">#define R2_CM_CLKSEL_GFX_VAL		R2_CLKSEL_GFX</span>
<span class="cp">#define R2_CLKSEL_MDM			(6 &lt;&lt; 0)</span>
<span class="cp">#define R2_CM_CLKSEL_MDM_VAL		R2_CLKSEL_MDM</span>

<span class="cm">/* 2430-Ratio Bootm (BYPASS) */</span>
<span class="cp">#define RB_CLKSEL_L3			(1 &lt;&lt; 0)</span>
<span class="cp">#define RB_CLKSEL_L4			(1 &lt;&lt; 5)</span>
<span class="cp">#define RB_CLKSEL_USB			(1 &lt;&lt; 25)</span>
<span class="cp">#define RB_CM_CLKSEL1_CORE_VAL		(RB_CLKSEL_USB | RX_CLKSEL_SSI | \</span>
<span class="cp">					 RX_CLKSEL_DSS2 | RX_CLKSEL_DSS1 | \</span>
<span class="cp">					 RB_CLKSEL_L4 | RB_CLKSEL_L3)</span>
<span class="cp">#define RB_CLKSEL_MPU			(1 &lt;&lt; 0)</span>
<span class="cp">#define RB_CM_CLKSEL_MPU_VAL		RB_CLKSEL_MPU</span>
<span class="cp">#define RB_CLKSEL_DSP			(1 &lt;&lt; 0)</span>
<span class="cp">#define RB_CLKSEL_DSP_IF		(1 &lt;&lt; 5)</span>
<span class="cp">#define RB_CM_CLKSEL_DSP_VAL		(RB_CLKSEL_DSP | RB_CLKSEL_DSP_IF)</span>
<span class="cp">#define RB_CLKSEL_GFX			(1 &lt;&lt; 0)</span>
<span class="cp">#define RB_CM_CLKSEL_GFX_VAL		RB_CLKSEL_GFX</span>
<span class="cp">#define RB_CLKSEL_MDM			(1 &lt;&lt; 0)</span>
<span class="cp">#define RB_CM_CLKSEL_MDM_VAL		RB_CLKSEL_MDM</span>

<span class="cm">/* 2420 Ratio Equivalents */</span>
<span class="cp">#define RXX_CLKSEL_VLYNQ		(0x12 &lt;&lt; 15)</span>
<span class="cp">#define RXX_CLKSEL_SSI			(0x8 &lt;&lt; 20)</span>

<span class="cm">/* 2420-PRCM III 532MHz core */</span>
<span class="cp">#define RIII_CLKSEL_L3			(4 &lt;&lt; 0)	</span><span class="cm">/* 133MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_CLKSEL_L4			(2 &lt;&lt; 5)	</span><span class="cm">/* 66.5MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_CLKSEL_USB			(4 &lt;&lt; 25)	</span><span class="cm">/* 33.25MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_CM_CLKSEL1_CORE_VAL	(RIII_CLKSEL_USB | RXX_CLKSEL_SSI | \</span>
<span class="cp">					 RXX_CLKSEL_VLYNQ | RX_CLKSEL_DSS2 | \</span>
<span class="cp">					 RX_CLKSEL_DSS1 | RIII_CLKSEL_L4 | \</span>
<span class="cp">					 RIII_CLKSEL_L3)</span>
<span class="cp">#define RIII_CLKSEL_MPU			(2 &lt;&lt; 0)	</span><span class="cm">/* 266MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_CM_CLKSEL_MPU_VAL		RIII_CLKSEL_MPU</span>
<span class="cp">#define RIII_CLKSEL_DSP			(3 &lt;&lt; 0)	</span><span class="cm">/* c5x - 177.3MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_CLKSEL_DSP_IF		(2 &lt;&lt; 5)	</span><span class="cm">/* c5x - 88.67MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_SYNC_DSP			(1 &lt;&lt; 7)	</span><span class="cm">/* Enable sync */</span><span class="cp"></span>
<span class="cp">#define RIII_CLKSEL_IVA			(6 &lt;&lt; 8)	</span><span class="cm">/* iva1 - 88.67MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_SYNC_IVA			(1 &lt;&lt; 13)	</span><span class="cm">/* Enable sync */</span><span class="cp"></span>
<span class="cp">#define RIII_CM_CLKSEL_DSP_VAL		(RIII_SYNC_IVA | RIII_CLKSEL_IVA | \</span>
<span class="cp">					 RIII_SYNC_DSP | RIII_CLKSEL_DSP_IF | \</span>
<span class="cp">					 RIII_CLKSEL_DSP)</span>
<span class="cp">#define RIII_CLKSEL_GFX			(2 &lt;&lt; 0)	</span><span class="cm">/* 66.5MHz */</span><span class="cp"></span>
<span class="cp">#define RIII_CM_CLKSEL_GFX_VAL		RIII_CLKSEL_GFX</span>

<span class="cm">/* 2420-PRCM II 600MHz core */</span>
<span class="cp">#define RII_CLKSEL_L3			(6 &lt;&lt; 0)	</span><span class="cm">/* 100MHz */</span><span class="cp"></span>
<span class="cp">#define RII_CLKSEL_L4			(2 &lt;&lt; 5)	</span><span class="cm">/* 50MHz */</span><span class="cp"></span>
<span class="cp">#define RII_CLKSEL_USB			(2 &lt;&lt; 25)	</span><span class="cm">/* 50MHz */</span><span class="cp"></span>
<span class="cp">#define RII_CM_CLKSEL1_CORE_VAL		(RII_CLKSEL_USB | RXX_CLKSEL_SSI | \</span>
<span class="cp">					 RXX_CLKSEL_VLYNQ | RX_CLKSEL_DSS2 | \</span>
<span class="cp">					 RX_CLKSEL_DSS1 | RII_CLKSEL_L4 | \</span>
<span class="cp">					 RII_CLKSEL_L3)</span>
<span class="cp">#define RII_CLKSEL_MPU			(2 &lt;&lt; 0)	</span><span class="cm">/* 300MHz */</span><span class="cp"></span>
<span class="cp">#define RII_CM_CLKSEL_MPU_VAL		RII_CLKSEL_MPU</span>
<span class="cp">#define RII_CLKSEL_DSP			(3 &lt;&lt; 0)	</span><span class="cm">/* c5x - 200MHz */</span><span class="cp"></span>
<span class="cp">#define RII_CLKSEL_DSP_IF		(2 &lt;&lt; 5)	</span><span class="cm">/* c5x - 100MHz */</span><span class="cp"></span>
<span class="cp">#define RII_SYNC_DSP			(0 &lt;&lt; 7)	</span><span class="cm">/* Bypass sync */</span><span class="cp"></span>
<span class="cp">#define RII_CLKSEL_IVA			(3 &lt;&lt; 8)	</span><span class="cm">/* iva1 - 200MHz */</span><span class="cp"></span>
<span class="cp">#define RII_SYNC_IVA			(0 &lt;&lt; 13)	</span><span class="cm">/* Bypass sync */</span><span class="cp"></span>
<span class="cp">#define RII_CM_CLKSEL_DSP_VAL		(RII_SYNC_IVA | RII_CLKSEL_IVA | \</span>
<span class="cp">					 RII_SYNC_DSP | RII_CLKSEL_DSP_IF | \</span>
<span class="cp">					 RII_CLKSEL_DSP)</span>
<span class="cp">#define RII_CLKSEL_GFX			(2 &lt;&lt; 0)	</span><span class="cm">/* 50MHz */</span><span class="cp"></span>
<span class="cp">#define RII_CM_CLKSEL_GFX_VAL		RII_CLKSEL_GFX</span>

<span class="cm">/* 2420-PRCM I 660MHz core */</span>
<span class="cp">#define RI_CLKSEL_L3			(4 &lt;&lt; 0)	</span><span class="cm">/* 165MHz */</span><span class="cp"></span>
<span class="cp">#define RI_CLKSEL_L4			(2 &lt;&lt; 5)	</span><span class="cm">/* 82.5MHz */</span><span class="cp"></span>
<span class="cp">#define RI_CLKSEL_USB			(4 &lt;&lt; 25)	</span><span class="cm">/* 41.25MHz */</span><span class="cp"></span>
<span class="cp">#define RI_CM_CLKSEL1_CORE_VAL		(RI_CLKSEL_USB |		\</span>
<span class="cp">					 RXX_CLKSEL_SSI | RXX_CLKSEL_VLYNQ | \</span>
<span class="cp">					 RX_CLKSEL_DSS2 | RX_CLKSEL_DSS1 | \</span>
<span class="cp">					 RI_CLKSEL_L4 | RI_CLKSEL_L3)</span>
<span class="cp">#define RI_CLKSEL_MPU			(2 &lt;&lt; 0)	</span><span class="cm">/* 330MHz */</span><span class="cp"></span>
<span class="cp">#define RI_CM_CLKSEL_MPU_VAL		RI_CLKSEL_MPU</span>
<span class="cp">#define RI_CLKSEL_DSP			(3 &lt;&lt; 0)	</span><span class="cm">/* c5x - 220MHz */</span><span class="cp"></span>
<span class="cp">#define RI_CLKSEL_DSP_IF		(2 &lt;&lt; 5)	</span><span class="cm">/* c5x - 110MHz */</span><span class="cp"></span>
<span class="cp">#define RI_SYNC_DSP			(1 &lt;&lt; 7)	</span><span class="cm">/* Activate sync */</span><span class="cp"></span>
<span class="cp">#define RI_CLKSEL_IVA			(4 &lt;&lt; 8)	</span><span class="cm">/* iva1 - 165MHz */</span><span class="cp"></span>
<span class="cp">#define RI_SYNC_IVA			(0 &lt;&lt; 13)	</span><span class="cm">/* Bypass sync */</span><span class="cp"></span>
<span class="cp">#define RI_CM_CLKSEL_DSP_VAL		(RI_SYNC_IVA | RI_CLKSEL_IVA |	\</span>
<span class="cp">					 RI_SYNC_DSP | RI_CLKSEL_DSP_IF | \</span>
<span class="cp">					 RI_CLKSEL_DSP)</span>
<span class="cp">#define RI_CLKSEL_GFX			(1 &lt;&lt; 0)	</span><span class="cm">/* 165MHz */</span><span class="cp"></span>
<span class="cp">#define RI_CM_CLKSEL_GFX_VAL		RI_CLKSEL_GFX</span>

<span class="cm">/* 2420-PRCM VII (boot) */</span>
<span class="cp">#define RVII_CLKSEL_L3			(1 &lt;&lt; 0)</span>
<span class="cp">#define RVII_CLKSEL_L4			(1 &lt;&lt; 5)</span>
<span class="cp">#define RVII_CLKSEL_DSS1		(1 &lt;&lt; 8)</span>
<span class="cp">#define RVII_CLKSEL_DSS2		(0 &lt;&lt; 13)</span>
<span class="cp">#define RVII_CLKSEL_VLYNQ		(1 &lt;&lt; 15)</span>
<span class="cp">#define RVII_CLKSEL_SSI			(1 &lt;&lt; 20)</span>
<span class="cp">#define RVII_CLKSEL_USB			(1 &lt;&lt; 25)</span>

<span class="cp">#define RVII_CM_CLKSEL1_CORE_VAL	(RVII_CLKSEL_USB | RVII_CLKSEL_SSI | \</span>
<span class="cp">					 RVII_CLKSEL_VLYNQ | \</span>
<span class="cp">					 RVII_CLKSEL_DSS2 | RVII_CLKSEL_DSS1 | \</span>
<span class="cp">					 RVII_CLKSEL_L4 | RVII_CLKSEL_L3)</span>

<span class="cp">#define RVII_CLKSEL_MPU			(1 &lt;&lt; 0) </span><span class="cm">/* all divide by 1 */</span><span class="cp"></span>
<span class="cp">#define RVII_CM_CLKSEL_MPU_VAL		RVII_CLKSEL_MPU</span>

<span class="cp">#define RVII_CLKSEL_DSP			(1 &lt;&lt; 0)</span>
<span class="cp">#define RVII_CLKSEL_DSP_IF		(1 &lt;&lt; 5)</span>
<span class="cp">#define RVII_SYNC_DSP			(0 &lt;&lt; 7)</span>
<span class="cp">#define RVII_CLKSEL_IVA			(1 &lt;&lt; 8)</span>
<span class="cp">#define RVII_SYNC_IVA			(0 &lt;&lt; 13)</span>
<span class="cp">#define RVII_CM_CLKSEL_DSP_VAL		(RVII_SYNC_IVA | RVII_CLKSEL_IVA | \</span>
<span class="cp">					 RVII_SYNC_DSP | RVII_CLKSEL_DSP_IF | \</span>
<span class="cp">					 RVII_CLKSEL_DSP)</span>

<span class="cp">#define RVII_CLKSEL_GFX			(1 &lt;&lt; 0)</span>
<span class="cp">#define RVII_CM_CLKSEL_GFX_VAL		RVII_CLKSEL_GFX</span>

<span class="cm">/*-------------------------------------------------------------------------</span>
<span class="cm"> * 2430 Target modes: Along with each configuration the CPU has several</span>
<span class="cm"> * modes which goes along with them. Modes mainly are the addition of</span>
<span class="cm"> * describe DPLL combinations to go along with a ratio.</span>
<span class="cm"> *-------------------------------------------------------------------------*/</span>

<span class="cm">/* Hardware governed */</span>
<span class="cp">#define MX_48M_SRC			(0 &lt;&lt; 3)</span>
<span class="cp">#define MX_54M_SRC			(0 &lt;&lt; 5)</span>
<span class="cp">#define MX_APLLS_CLIKIN_12		(3 &lt;&lt; 23)</span>
<span class="cp">#define MX_APLLS_CLIKIN_13		(2 &lt;&lt; 23)</span>
<span class="cp">#define MX_APLLS_CLIKIN_19_2		(0 &lt;&lt; 23)</span>

<span class="cm">/*</span>
<span class="cm"> * 2430 - standalone, 2*ref*M/(n+1), M/N is for exactness not relock speed</span>
<span class="cm"> * #5a	(ratio1) baseport-target, target DPLL = 266*2 = 532MHz</span>
<span class="cm"> */</span>
<span class="cp">#define M5A_DPLL_MULT_12		(133 &lt;&lt; 12)</span>
<span class="cp">#define M5A_DPLL_DIV_12			(5 &lt;&lt; 8)</span>
<span class="cp">#define M5A_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M5A_DPLL_DIV_12 | M5A_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>
<span class="cp">#define M5A_DPLL_MULT_13		(61 &lt;&lt; 12)</span>
<span class="cp">#define M5A_DPLL_DIV_13			(2 &lt;&lt; 8)</span>
<span class="cp">#define M5A_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M5A_DPLL_DIV_13 | M5A_DPLL_MULT_13 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>
<span class="cp">#define M5A_DPLL_MULT_19		(55 &lt;&lt; 12)</span>
<span class="cp">#define M5A_DPLL_DIV_19			(3 &lt;&lt; 8)</span>
<span class="cp">#define M5A_CM_CLKSEL1_PLL_19_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M5A_DPLL_DIV_19 | M5A_DPLL_MULT_19 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_19_2)</span>
<span class="cm">/* #5b	(ratio1) target DPLL = 200*2 = 400MHz */</span>
<span class="cp">#define M5B_DPLL_MULT_12		(50 &lt;&lt; 12)</span>
<span class="cp">#define M5B_DPLL_DIV_12			(2 &lt;&lt; 8)</span>
<span class="cp">#define M5B_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M5B_DPLL_DIV_12 | M5B_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>
<span class="cp">#define M5B_DPLL_MULT_13		(200 &lt;&lt; 12)</span>
<span class="cp">#define M5B_DPLL_DIV_13			(12 &lt;&lt; 8)</span>

<span class="cp">#define M5B_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M5B_DPLL_DIV_13 | M5B_DPLL_MULT_13 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>
<span class="cp">#define M5B_DPLL_MULT_19		(125 &lt;&lt; 12)</span>
<span class="cp">#define M5B_DPLL_DIV_19			(31 &lt;&lt; 8)</span>
<span class="cp">#define M5B_CM_CLKSEL1_PLL_19_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M5B_DPLL_DIV_19 | M5B_DPLL_MULT_19 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_19_2)</span>
<span class="cm">/*</span>
<span class="cm"> * #4	(ratio2), DPLL = 399*2 = 798MHz, L3=133MHz</span>
<span class="cm"> */</span>
<span class="cp">#define M4_DPLL_MULT_12			(133 &lt;&lt; 12)</span>
<span class="cp">#define M4_DPLL_DIV_12			(3 &lt;&lt; 8)</span>
<span class="cp">#define M4_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M4_DPLL_DIV_12 | M4_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>

<span class="cp">#define M4_DPLL_MULT_13			(399 &lt;&lt; 12)</span>
<span class="cp">#define M4_DPLL_DIV_13			(12 &lt;&lt; 8)</span>
<span class="cp">#define M4_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M4_DPLL_DIV_13 | M4_DPLL_MULT_13 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>

<span class="cp">#define M4_DPLL_MULT_19			(145 &lt;&lt; 12)</span>
<span class="cp">#define M4_DPLL_DIV_19			(6 &lt;&lt; 8)</span>
<span class="cp">#define M4_CM_CLKSEL1_PLL_19_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M4_DPLL_DIV_19 | M4_DPLL_MULT_19 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_19_2)</span>

<span class="cm">/*</span>
<span class="cm"> * #3	(ratio2) baseport-target, target DPLL = 330*2 = 660MHz</span>
<span class="cm"> */</span>
<span class="cp">#define M3_DPLL_MULT_12			(55 &lt;&lt; 12)</span>
<span class="cp">#define M3_DPLL_DIV_12			(1 &lt;&lt; 8)</span>
<span class="cp">#define M3_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M3_DPLL_DIV_12 | M3_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>
<span class="cp">#define M3_DPLL_MULT_13			(76 &lt;&lt; 12)</span>
<span class="cp">#define M3_DPLL_DIV_13			(2 &lt;&lt; 8)</span>
<span class="cp">#define M3_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M3_DPLL_DIV_13 | M3_DPLL_MULT_13 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>
<span class="cp">#define M3_DPLL_MULT_19			(17 &lt;&lt; 12)</span>
<span class="cp">#define M3_DPLL_DIV_19			(0 &lt;&lt; 8)</span>
<span class="cp">#define M3_CM_CLKSEL1_PLL_19_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M3_DPLL_DIV_19 | M3_DPLL_MULT_19 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_19_2)</span>

<span class="cm">/*</span>
<span class="cm"> * #2   (ratio1) DPLL = 330*2 = 660MHz, L3=165MHz</span>
<span class="cm"> */</span>
<span class="cp">#define M2_DPLL_MULT_12		        (55 &lt;&lt; 12)</span>
<span class="cp">#define M2_DPLL_DIV_12		        (1 &lt;&lt; 8)</span>
<span class="cp">#define M2_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M2_DPLL_DIV_12 | M2_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>

<span class="cm">/* Speed changes - Used 658.7MHz instead of 660MHz for LP-Refresh M=76 N=2,</span>
<span class="cm"> * relock time issue */</span>
<span class="cm">/* Core frequency changed from 330/165 to 329/164 MHz*/</span>
<span class="cp">#define M2_DPLL_MULT_13		        (76 &lt;&lt; 12)</span>
<span class="cp">#define M2_DPLL_DIV_13		        (2 &lt;&lt; 8)</span>
<span class="cp">#define M2_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M2_DPLL_DIV_13 | M2_DPLL_MULT_13 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>

<span class="cp">#define M2_DPLL_MULT_19		        (17 &lt;&lt; 12)</span>
<span class="cp">#define M2_DPLL_DIV_19		        (0 &lt;&lt; 8)</span>
<span class="cp">#define M2_CM_CLKSEL1_PLL_19_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 M2_DPLL_DIV_19 | M2_DPLL_MULT_19 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_19_2)</span>

<span class="cm">/* boot (boot) */</span>
<span class="cp">#define MB_DPLL_MULT			(1 &lt;&lt; 12)</span>
<span class="cp">#define MB_DPLL_DIV			(0 &lt;&lt; 8)</span>
<span class="cp">#define MB_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 MB_DPLL_DIV | MB_DPLL_MULT | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>

<span class="cp">#define MB_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 MB_DPLL_DIV | MB_DPLL_MULT | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>

<span class="cp">#define MB_CM_CLKSEL1_PLL_19_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 MB_DPLL_DIV | MB_DPLL_MULT | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_19)</span>

<span class="cm">/*</span>
<span class="cm"> * 2430 - chassis (sedna)</span>
<span class="cm"> * 165 (ratio1) same as above #2</span>
<span class="cm"> * 150 (ratio1)</span>
<span class="cm"> * 133 (ratio2) same as above #4</span>
<span class="cm"> * 110 (ratio2) same as above #3</span>
<span class="cm"> * 104 (ratio2)</span>
<span class="cm"> * boot (boot)</span>
<span class="cm"> */</span>

<span class="cm">/* PRCM I target DPLL = 2*330MHz = 660MHz */</span>
<span class="cp">#define MI_DPLL_MULT_12			(55 &lt;&lt; 12)</span>
<span class="cp">#define MI_DPLL_DIV_12			(1 &lt;&lt; 8)</span>
<span class="cp">#define MI_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC | \</span>
<span class="cp">					 MI_DPLL_DIV_12 | MI_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>

<span class="cm">/*</span>
<span class="cm"> * 2420 Equivalent - mode registers</span>
<span class="cm"> * PRCM II , target DPLL = 2*300MHz = 600MHz</span>
<span class="cm"> */</span>
<span class="cp">#define MII_DPLL_MULT_12		(50 &lt;&lt; 12)</span>
<span class="cp">#define MII_DPLL_DIV_12			(1 &lt;&lt; 8)</span>
<span class="cp">#define MII_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC |	\</span>
<span class="cp">					 MII_DPLL_DIV_12 | MII_DPLL_MULT_12 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_12)</span>
<span class="cp">#define MII_DPLL_MULT_13		(300 &lt;&lt; 12)</span>
<span class="cp">#define MII_DPLL_DIV_13			(12 &lt;&lt; 8)</span>
<span class="cp">#define MII_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC |	\</span>
<span class="cp">					 MII_DPLL_DIV_13 | MII_DPLL_MULT_13 | \</span>
<span class="cp">					 MX_APLLS_CLIKIN_13)</span>

<span class="cm">/* PRCM III target DPLL = 2*266 = 532MHz*/</span>
<span class="cp">#define MIII_DPLL_MULT_12		(133 &lt;&lt; 12)</span>
<span class="cp">#define MIII_DPLL_DIV_12		(5 &lt;&lt; 8)</span>
<span class="cp">#define MIII_CM_CLKSEL1_PLL_12_VAL	(MX_48M_SRC | MX_54M_SRC |	\</span>
<span class="cp">					 MIII_DPLL_DIV_12 | \</span>
<span class="cp">					 MIII_DPLL_MULT_12 | MX_APLLS_CLIKIN_12)</span>
<span class="cp">#define MIII_DPLL_MULT_13		(266 &lt;&lt; 12)</span>
<span class="cp">#define MIII_DPLL_DIV_13		(12 &lt;&lt; 8)</span>
<span class="cp">#define MIII_CM_CLKSEL1_PLL_13_VAL	(MX_48M_SRC | MX_54M_SRC |	\</span>
<span class="cp">					 MIII_DPLL_DIV_13 | \</span>
<span class="cp">					 MIII_DPLL_MULT_13 | MX_APLLS_CLIKIN_13)</span>

<span class="cm">/* PRCM VII (boot bypass) */</span>
<span class="cp">#define MVII_CM_CLKSEL1_PLL_12_VAL	MB_CM_CLKSEL1_PLL_12_VAL</span>
<span class="cp">#define MVII_CM_CLKSEL1_PLL_13_VAL	MB_CM_CLKSEL1_PLL_13_VAL</span>

<span class="cm">/* High and low operation value */</span>
<span class="cp">#define MX_CLKSEL2_PLL_2x_VAL		(2 &lt;&lt; 0)</span>
<span class="cp">#define MX_CLKSEL2_PLL_1x_VAL		(1 &lt;&lt; 0)</span>

<span class="cm">/* MPU speed defines */</span>
<span class="cp">#define S12M	12000000</span>
<span class="cp">#define S13M	13000000</span>
<span class="cp">#define S19M	19200000</span>
<span class="cp">#define S26M	26000000</span>
<span class="cp">#define S100M	100000000</span>
<span class="cp">#define S133M	133000000</span>
<span class="cp">#define S150M	150000000</span>
<span class="cp">#define S164M	164000000</span>
<span class="cp">#define S165M	165000000</span>
<span class="cp">#define S199M	199000000</span>
<span class="cp">#define S200M	200000000</span>
<span class="cp">#define S266M	266000000</span>
<span class="cp">#define S300M	300000000</span>
<span class="cp">#define S329M	329000000</span>
<span class="cp">#define S330M	330000000</span>
<span class="cp">#define S399M	399000000</span>
<span class="cp">#define S400M	400000000</span>
<span class="cp">#define S532M	532000000</span>
<span class="cp">#define S600M	600000000</span>
<span class="cp">#define S658M	658000000</span>
<span class="cp">#define S660M	660000000</span>
<span class="cp">#define S798M	798000000</span>


<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">prcm_config</span> <span class="n">omap2420_rate_table</span><span class="p">[];</span>

<span class="cp">#ifdef CONFIG_SOC_OMAP2430</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">prcm_config</span> <span class="n">omap2430_rate_table</span><span class="p">[];</span>
<span class="cp">#else</span>
<span class="cp">#define omap2430_rate_table	NULL</span>
<span class="cp">#endif</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">prcm_config</span> <span class="o">*</span><span class="n">rate_table</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">prcm_config</span> <span class="o">*</span><span class="n">curr_prcm_set</span><span class="p">;</span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
