<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-omap2 › prm2xxx_3xxx.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>prm2xxx_3xxx.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * OMAP2/3 Power/Reset Management (PRM) register definitions</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007-2009, 2011 Texas Instruments, Inc.</span>
<span class="cm"> * Copyright (C) 2008-2010 Nokia Corporation</span>
<span class="cm"> * Paul Walmsley</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * The PRM hardware modules on the OMAP2/3 are quite similar to each</span>
<span class="cm"> * other.  The PRM on OMAP4 has a new register layout, and is handled</span>
<span class="cm"> * in a separate file.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ARCH_ARM_MACH_OMAP2_PRM2XXX_3XXX_H</span>
<span class="cp">#define __ARCH_ARM_MACH_OMAP2_PRM2XXX_3XXX_H</span>

<span class="cp">#include &quot;prcm-common.h&quot;</span>
<span class="cp">#include &quot;prm.h&quot;</span>

<span class="cp">#define OMAP2420_PRM_REGADDR(module, reg)				\</span>
<span class="cp">		OMAP2_L4_IO_ADDRESS(OMAP2420_PRM_BASE + (module) + (reg))</span>
<span class="cp">#define OMAP2430_PRM_REGADDR(module, reg)				\</span>
<span class="cp">		OMAP2_L4_IO_ADDRESS(OMAP2430_PRM_BASE + (module) + (reg))</span>
<span class="cp">#define OMAP34XX_PRM_REGADDR(module, reg)				\</span>
<span class="cp">		OMAP2_L4_IO_ADDRESS(OMAP3430_PRM_BASE + (module) + (reg))</span>


<span class="cm">/*</span>
<span class="cm"> * OMAP2-specific global PRM registers</span>
<span class="cm"> * Use __raw_{read,write}l() with these registers.</span>
<span class="cm"> *</span>
<span class="cm"> * With a few exceptions, these are the register names beginning with</span>
<span class="cm"> * PRCM_* on 24xx.  (The exceptions are the IRQSTATUS and IRQENABLE</span>
<span class="cm"> * bits.)</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#define OMAP2_PRCM_REVISION_OFFSET	0x0000</span>
<span class="cp">#define OMAP2420_PRCM_REVISION		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0000)</span>
<span class="cp">#define OMAP2_PRCM_SYSCONFIG_OFFSET	0x0010</span>
<span class="cp">#define OMAP2420_PRCM_SYSCONFIG		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0010)</span>

<span class="cp">#define OMAP2_PRCM_IRQSTATUS_MPU_OFFSET	0x0018</span>
<span class="cp">#define OMAP2420_PRCM_IRQSTATUS_MPU	OMAP2420_PRM_REGADDR(OCP_MOD, 0x0018)</span>
<span class="cp">#define OMAP2_PRCM_IRQENABLE_MPU_OFFSET	0x001c</span>
<span class="cp">#define OMAP2420_PRCM_IRQENABLE_MPU	OMAP2420_PRM_REGADDR(OCP_MOD, 0x001c)</span>

<span class="cp">#define OMAP2_PRCM_VOLTCTRL_OFFSET	0x0050</span>
<span class="cp">#define OMAP2420_PRCM_VOLTCTRL		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0050)</span>
<span class="cp">#define OMAP2_PRCM_VOLTST_OFFSET	0x0054</span>
<span class="cp">#define OMAP2420_PRCM_VOLTST		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0054)</span>
<span class="cp">#define OMAP2_PRCM_CLKSRC_CTRL_OFFSET	0x0060</span>
<span class="cp">#define OMAP2420_PRCM_CLKSRC_CTRL	OMAP2420_PRM_REGADDR(OCP_MOD, 0x0060)</span>
<span class="cp">#define OMAP2_PRCM_CLKOUT_CTRL_OFFSET	0x0070</span>
<span class="cp">#define OMAP2420_PRCM_CLKOUT_CTRL	OMAP2420_PRM_REGADDR(OCP_MOD, 0x0070)</span>
<span class="cp">#define OMAP2_PRCM_CLKEMUL_CTRL_OFFSET	0x0078</span>
<span class="cp">#define OMAP2420_PRCM_CLKEMUL_CTRL	OMAP2420_PRM_REGADDR(OCP_MOD, 0x0078)</span>
<span class="cp">#define OMAP2_PRCM_CLKCFG_CTRL_OFFSET	0x0080</span>
<span class="cp">#define OMAP2420_PRCM_CLKCFG_CTRL	OMAP2420_PRM_REGADDR(OCP_MOD, 0x0080)</span>
<span class="cp">#define OMAP2_PRCM_CLKCFG_STATUS_OFFSET	0x0084</span>
<span class="cp">#define OMAP2420_PRCM_CLKCFG_STATUS	OMAP2420_PRM_REGADDR(OCP_MOD, 0x0084)</span>
<span class="cp">#define OMAP2_PRCM_VOLTSETUP_OFFSET	0x0090</span>
<span class="cp">#define OMAP2420_PRCM_VOLTSETUP		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0090)</span>
<span class="cp">#define OMAP2_PRCM_CLKSSETUP_OFFSET	0x0094</span>
<span class="cp">#define OMAP2420_PRCM_CLKSSETUP		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0094)</span>
<span class="cp">#define OMAP2_PRCM_POLCTRL_OFFSET	0x0098</span>
<span class="cp">#define OMAP2420_PRCM_POLCTRL		OMAP2420_PRM_REGADDR(OCP_MOD, 0x0098)</span>

<span class="cp">#define OMAP2430_PRCM_REVISION		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0000)</span>
<span class="cp">#define OMAP2430_PRCM_SYSCONFIG		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0010)</span>

<span class="cp">#define OMAP2430_PRCM_IRQSTATUS_MPU	OMAP2430_PRM_REGADDR(OCP_MOD, 0x0018)</span>
<span class="cp">#define OMAP2430_PRCM_IRQENABLE_MPU	OMAP2430_PRM_REGADDR(OCP_MOD, 0x001c)</span>

<span class="cp">#define OMAP2430_PRCM_VOLTCTRL		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0050)</span>
<span class="cp">#define OMAP2430_PRCM_VOLTST		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0054)</span>
<span class="cp">#define OMAP2430_PRCM_CLKSRC_CTRL	OMAP2430_PRM_REGADDR(OCP_MOD, 0x0060)</span>
<span class="cp">#define OMAP2430_PRCM_CLKOUT_CTRL	OMAP2430_PRM_REGADDR(OCP_MOD, 0x0070)</span>
<span class="cp">#define OMAP2430_PRCM_CLKEMUL_CTRL	OMAP2430_PRM_REGADDR(OCP_MOD, 0x0078)</span>
<span class="cp">#define OMAP2430_PRCM_CLKCFG_CTRL	OMAP2430_PRM_REGADDR(OCP_MOD, 0x0080)</span>
<span class="cp">#define OMAP2430_PRCM_CLKCFG_STATUS	OMAP2430_PRM_REGADDR(OCP_MOD, 0x0084)</span>
<span class="cp">#define OMAP2430_PRCM_VOLTSETUP		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0090)</span>
<span class="cp">#define OMAP2430_PRCM_CLKSSETUP		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0094)</span>
<span class="cp">#define OMAP2430_PRCM_POLCTRL		OMAP2430_PRM_REGADDR(OCP_MOD, 0x0098)</span>

<span class="cm">/*</span>
<span class="cm"> * OMAP3-specific global PRM registers</span>
<span class="cm"> * Use __raw_{read,write}l() with these registers.</span>
<span class="cm"> *</span>
<span class="cm"> * With a few exceptions, these are the register names beginning with</span>
<span class="cm"> * PRM_* on 34xx.  (The exceptions are the IRQSTATUS and IRQENABLE</span>
<span class="cm"> * bits.)</span>
<span class="cm"> */</span>

<span class="cp">#define OMAP3_PRM_REVISION_OFFSET	0x0004</span>
<span class="cp">#define OMAP3430_PRM_REVISION		OMAP34XX_PRM_REGADDR(OCP_MOD, 0x0004)</span>
<span class="cp">#define OMAP3_PRM_SYSCONFIG_OFFSET	0x0014</span>
<span class="cp">#define OMAP3430_PRM_SYSCONFIG		OMAP34XX_PRM_REGADDR(OCP_MOD, 0x0014)</span>

<span class="cp">#define OMAP3_PRM_IRQSTATUS_MPU_OFFSET	0x0018</span>
<span class="cp">#define OMAP3430_PRM_IRQSTATUS_MPU	OMAP34XX_PRM_REGADDR(OCP_MOD, 0x0018)</span>
<span class="cp">#define OMAP3_PRM_IRQENABLE_MPU_OFFSET	0x001c</span>
<span class="cp">#define OMAP3430_PRM_IRQENABLE_MPU	OMAP34XX_PRM_REGADDR(OCP_MOD, 0x001c)</span>


<span class="cp">#define OMAP3_PRM_VC_SMPS_SA_OFFSET	0x0020</span>
<span class="cp">#define OMAP3430_PRM_VC_SMPS_SA		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0020)</span>
<span class="cp">#define OMAP3_PRM_VC_SMPS_VOL_RA_OFFSET	0x0024</span>
<span class="cp">#define OMAP3430_PRM_VC_SMPS_VOL_RA	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0024)</span>
<span class="cp">#define OMAP3_PRM_VC_SMPS_CMD_RA_OFFSET	0x0028</span>
<span class="cp">#define OMAP3430_PRM_VC_SMPS_CMD_RA	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0028)</span>
<span class="cp">#define OMAP3_PRM_VC_CMD_VAL_0_OFFSET	0x002c</span>
<span class="cp">#define OMAP3430_PRM_VC_CMD_VAL_0	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x002c)</span>
<span class="cp">#define OMAP3_PRM_VC_CMD_VAL_1_OFFSET	0x0030</span>
<span class="cp">#define OMAP3430_PRM_VC_CMD_VAL_1	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0030)</span>
<span class="cp">#define OMAP3_PRM_VC_CH_CONF_OFFSET	0x0034</span>
<span class="cp">#define OMAP3430_PRM_VC_CH_CONF		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0034)</span>
<span class="cp">#define OMAP3_PRM_VC_I2C_CFG_OFFSET	0x0038</span>
<span class="cp">#define OMAP3430_PRM_VC_I2C_CFG		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0038)</span>
<span class="cp">#define OMAP3_PRM_VC_BYPASS_VAL_OFFSET	0x003c</span>
<span class="cp">#define OMAP3430_PRM_VC_BYPASS_VAL	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x003c)</span>
<span class="cp">#define OMAP3_PRM_RSTCTRL_OFFSET	0x0050</span>
<span class="cp">#define OMAP3430_PRM_RSTCTRL		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0050)</span>
<span class="cp">#define OMAP3_PRM_RSTTIME_OFFSET	0x0054</span>
<span class="cp">#define OMAP3430_PRM_RSTTIME		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0054)</span>
<span class="cp">#define OMAP3_PRM_RSTST_OFFSET	0x0058</span>
<span class="cp">#define OMAP3430_PRM_RSTST		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0058)</span>
<span class="cp">#define OMAP3_PRM_VOLTCTRL_OFFSET	0x0060</span>
<span class="cp">#define OMAP3430_PRM_VOLTCTRL		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0060)</span>
<span class="cp">#define OMAP3_PRM_SRAM_PCHARGE_OFFSET	0x0064</span>
<span class="cp">#define OMAP3430_PRM_SRAM_PCHARGE	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0064)</span>
<span class="cp">#define OMAP3_PRM_CLKSRC_CTRL_OFFSET	0x0070</span>
<span class="cp">#define OMAP3430_PRM_CLKSRC_CTRL	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0070)</span>
<span class="cp">#define OMAP3_PRM_VOLTSETUP1_OFFSET	0x0090</span>
<span class="cp">#define OMAP3430_PRM_VOLTSETUP1		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0090)</span>
<span class="cp">#define OMAP3_PRM_VOLTOFFSET_OFFSET	0x0094</span>
<span class="cp">#define OMAP3430_PRM_VOLTOFFSET		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0094)</span>
<span class="cp">#define OMAP3_PRM_CLKSETUP_OFFSET	0x0098</span>
<span class="cp">#define OMAP3430_PRM_CLKSETUP		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x0098)</span>
<span class="cp">#define OMAP3_PRM_POLCTRL_OFFSET	0x009c</span>
<span class="cp">#define OMAP3430_PRM_POLCTRL		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x009c)</span>
<span class="cp">#define OMAP3_PRM_VOLTSETUP2_OFFSET	0x00a0</span>
<span class="cp">#define OMAP3430_PRM_VOLTSETUP2		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00a0)</span>
<span class="cp">#define OMAP3_PRM_VP1_CONFIG_OFFSET	0x00b0</span>
<span class="cp">#define OMAP3430_PRM_VP1_CONFIG		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00b0)</span>
<span class="cp">#define OMAP3_PRM_VP1_VSTEPMIN_OFFSET	0x00b4</span>
<span class="cp">#define OMAP3430_PRM_VP1_VSTEPMIN	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00b4)</span>
<span class="cp">#define OMAP3_PRM_VP1_VSTEPMAX_OFFSET	0x00b8</span>
<span class="cp">#define OMAP3430_PRM_VP1_VSTEPMAX	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00b8)</span>
<span class="cp">#define OMAP3_PRM_VP1_VLIMITTO_OFFSET	0x00bc</span>
<span class="cp">#define OMAP3430_PRM_VP1_VLIMITTO	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00bc)</span>
<span class="cp">#define OMAP3_PRM_VP1_VOLTAGE_OFFSET	0x00c0</span>
<span class="cp">#define OMAP3430_PRM_VP1_VOLTAGE	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00c0)</span>
<span class="cp">#define OMAP3_PRM_VP1_STATUS_OFFSET	0x00c4</span>
<span class="cp">#define OMAP3430_PRM_VP1_STATUS		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00c4)</span>
<span class="cp">#define OMAP3_PRM_VP2_CONFIG_OFFSET	0x00d0</span>
<span class="cp">#define OMAP3430_PRM_VP2_CONFIG		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00d0)</span>
<span class="cp">#define OMAP3_PRM_VP2_VSTEPMIN_OFFSET	0x00d4</span>
<span class="cp">#define OMAP3430_PRM_VP2_VSTEPMIN	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00d4)</span>
<span class="cp">#define OMAP3_PRM_VP2_VSTEPMAX_OFFSET	0x00d8</span>
<span class="cp">#define OMAP3430_PRM_VP2_VSTEPMAX	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00d8)</span>
<span class="cp">#define OMAP3_PRM_VP2_VLIMITTO_OFFSET	0x00dc</span>
<span class="cp">#define OMAP3430_PRM_VP2_VLIMITTO	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00dc)</span>
<span class="cp">#define OMAP3_PRM_VP2_VOLTAGE_OFFSET	0x00e0</span>
<span class="cp">#define OMAP3430_PRM_VP2_VOLTAGE	OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00e0)</span>
<span class="cp">#define OMAP3_PRM_VP2_STATUS_OFFSET	0x00e4</span>
<span class="cp">#define OMAP3430_PRM_VP2_STATUS		OMAP34XX_PRM_REGADDR(OMAP3430_GR_MOD, 0x00e4)</span>

<span class="cp">#define OMAP3_PRM_CLKSEL_OFFSET	0x0040</span>
<span class="cp">#define OMAP3430_PRM_CLKSEL		OMAP34XX_PRM_REGADDR(OMAP3430_CCR_MOD, 0x0040)</span>
<span class="cp">#define OMAP3_PRM_CLKOUT_CTRL_OFFSET	0x0070</span>
<span class="cp">#define OMAP3430_PRM_CLKOUT_CTRL	OMAP34XX_PRM_REGADDR(OMAP3430_CCR_MOD, 0x0070)</span>

<span class="cm">/*</span>
<span class="cm"> * Module specific PRM register offsets from PRM_BASE + domain offset</span>
<span class="cm"> *</span>
<span class="cm"> * Use prm_{read,write}_mod_reg() with these registers.</span>
<span class="cm"> *</span>
<span class="cm"> * With a few exceptions, these are the register names beginning with</span>
<span class="cm"> * {PM,RM}_* on both OMAP2/3 SoC families..  (The exceptions are the</span>
<span class="cm"> * IRQSTATUS and IRQENABLE bits.)</span>
<span class="cm"> */</span>

<span class="cm">/* Register offsets appearing on both OMAP2 and OMAP3 */</span>

<span class="cp">#define OMAP2_RM_RSTCTRL				0x0050</span>
<span class="cp">#define OMAP2_RM_RSTTIME				0x0054</span>
<span class="cp">#define OMAP2_RM_RSTST					0x0058</span>
<span class="cp">#define OMAP2_PM_PWSTCTRL				0x00e0</span>
<span class="cp">#define OMAP2_PM_PWSTST					0x00e4</span>

<span class="cp">#define PM_WKEN						0x00a0</span>
<span class="cp">#define PM_WKEN1					PM_WKEN</span>
<span class="cp">#define PM_WKST						0x00b0</span>
<span class="cp">#define PM_WKST1					PM_WKST</span>
<span class="cp">#define PM_WKDEP					0x00c8</span>
<span class="cp">#define PM_EVGENCTRL					0x00d4</span>
<span class="cp">#define PM_EVGENONTIM					0x00d8</span>
<span class="cp">#define PM_EVGENOFFTIM					0x00dc</span>

<span class="cm">/* OMAP2xxx specific register offsets */</span>
<span class="cp">#define OMAP24XX_PM_WKEN2				0x00a4</span>
<span class="cp">#define OMAP24XX_PM_WKST2				0x00b4</span>

<span class="cp">#define OMAP24XX_PRCM_IRQSTATUS_DSP			0x00f0	</span><span class="cm">/* IVA mod */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_PRCM_IRQENABLE_DSP			0x00f4	</span><span class="cm">/* IVA mod */</span><span class="cp"></span>
<span class="cp">#define OMAP24XX_PRCM_IRQSTATUS_IVA			0x00f8</span>
<span class="cp">#define OMAP24XX_PRCM_IRQENABLE_IVA			0x00fc</span>

<span class="cm">/* OMAP3 specific register offsets */</span>
<span class="cp">#define OMAP3430ES2_PM_WKEN3				0x00f0</span>
<span class="cp">#define OMAP3430ES2_PM_WKST3				0x00b8</span>

<span class="cp">#define OMAP3430_PM_MPUGRPSEL				0x00a4</span>
<span class="cp">#define OMAP3430_PM_MPUGRPSEL1				OMAP3430_PM_MPUGRPSEL</span>
<span class="cp">#define OMAP3430ES2_PM_MPUGRPSEL3			0x00f8</span>

<span class="cp">#define OMAP3430_PM_IVAGRPSEL				0x00a8</span>
<span class="cp">#define OMAP3430_PM_IVAGRPSEL1				OMAP3430_PM_IVAGRPSEL</span>
<span class="cp">#define OMAP3430ES2_PM_IVAGRPSEL3			0x00f4</span>

<span class="cp">#define OMAP3430_PM_PREPWSTST				0x00e8</span>

<span class="cp">#define OMAP3430_PRM_IRQSTATUS_IVA2			0x00f8</span>
<span class="cp">#define OMAP3430_PRM_IRQENABLE_IVA2			0x00fc</span>


<span class="cp">#ifndef __ASSEMBLER__</span>
<span class="cm">/*</span>
<span class="cm"> * Stub omap2xxx/omap3xxx functions so that common files</span>
<span class="cm"> * continue to build when custom builds are used</span>
<span class="cm"> */</span>
<span class="cp">#if defined(CONFIG_ARCH_OMAP4) &amp;&amp; !(defined(CONFIG_ARCH_OMAP2) ||	\</span>
<span class="cp">					defined(CONFIG_ARCH_OMAP3))</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">omap2_prm_read_mod_reg</span><span class="p">(</span><span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">u16</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">omap2_prm_write_mod_reg</span><span class="p">(</span><span class="n">u32</span> <span class="n">val</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">u16</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">omap2_prm_rmw_mod_reg_bits</span><span class="p">(</span><span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bits</span><span class="p">,</span>
		<span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">omap2_prm_set_mod_reg_bits</span><span class="p">(</span><span class="n">u32</span> <span class="n">bits</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">omap2_prm_clear_mod_reg_bits</span><span class="p">(</span><span class="n">u32</span> <span class="n">bits</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">omap2_prm_read_mod_bits_shift</span><span class="p">(</span><span class="n">s16</span> <span class="n">domain</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">omap2_prm_is_hardreset_asserted</span><span class="p">(</span><span class="n">s16</span> <span class="n">prm_mod</span><span class="p">,</span> <span class="n">u8</span> <span class="n">shift</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">omap2_prm_assert_hardreset</span><span class="p">(</span><span class="n">s16</span> <span class="n">prm_mod</span><span class="p">,</span> <span class="n">u8</span> <span class="n">shift</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">omap2_prm_deassert_hardreset</span><span class="p">(</span><span class="n">s16</span> <span class="n">prm_mod</span><span class="p">,</span> <span class="n">u8</span> <span class="n">rst_shift</span><span class="p">,</span>
						<span class="n">u8</span> <span class="n">st_shift</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">WARN</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;prm: omap2xxx/omap3xxx specific function and &quot;</span>
		<span class="s">&quot;not suppose to be used on omap4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="cm">/* Power/reset management domain register get/set */</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap2_prm_read_mod_reg</span><span class="p">(</span><span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">u16</span> <span class="n">idx</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap2_prm_write_mod_reg</span><span class="p">(</span><span class="n">u32</span> <span class="n">val</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">u16</span> <span class="n">idx</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap2_prm_rmw_mod_reg_bits</span><span class="p">(</span><span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bits</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap2_prm_set_mod_reg_bits</span><span class="p">(</span><span class="n">u32</span> <span class="n">bits</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap2_prm_clear_mod_reg_bits</span><span class="p">(</span><span class="n">u32</span> <span class="n">bits</span><span class="p">,</span> <span class="n">s16</span> <span class="n">module</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap2_prm_read_mod_bits_shift</span><span class="p">(</span><span class="n">s16</span> <span class="n">domain</span><span class="p">,</span> <span class="n">s16</span> <span class="n">idx</span><span class="p">,</span> <span class="n">u32</span> <span class="n">mask</span><span class="p">);</span>

<span class="cm">/* These omap2_ PRM functions apply to both OMAP2 and 3 */</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap2_prm_is_hardreset_asserted</span><span class="p">(</span><span class="n">s16</span> <span class="n">prm_mod</span><span class="p">,</span> <span class="n">u8</span> <span class="n">shift</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap2_prm_assert_hardreset</span><span class="p">(</span><span class="n">s16</span> <span class="n">prm_mod</span><span class="p">,</span> <span class="n">u8</span> <span class="n">shift</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">omap2_prm_deassert_hardreset</span><span class="p">(</span><span class="n">s16</span> <span class="n">prm_mod</span><span class="p">,</span> <span class="n">u8</span> <span class="n">rst_shift</span><span class="p">,</span> <span class="n">u8</span> <span class="n">st_shift</span><span class="p">);</span>

<span class="cm">/* OMAP3-specific VP functions */</span>
<span class="n">u32</span> <span class="n">omap3_prm_vp_check_txdone</span><span class="p">(</span><span class="n">u8</span> <span class="n">vp_id</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">omap3_prm_vp_clear_txdone</span><span class="p">(</span><span class="n">u8</span> <span class="n">vp_id</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * OMAP3 access functions for voltage controller (VC) and</span>
<span class="cm"> * voltage proccessor (VP) in the PRM.</span>
<span class="cm"> */</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap3_prm_vcvp_read</span><span class="p">(</span><span class="n">u8</span> <span class="n">offset</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap3_prm_vcvp_write</span><span class="p">(</span><span class="n">u32</span> <span class="n">val</span><span class="p">,</span> <span class="n">u8</span> <span class="n">offset</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">omap3_prm_vcvp_rmw</span><span class="p">(</span><span class="n">u32</span> <span class="n">mask</span><span class="p">,</span> <span class="n">u32</span> <span class="n">bits</span><span class="p">,</span> <span class="n">u8</span> <span class="n">offset</span><span class="p">);</span>

<span class="cm">/* PRM interrupt-related functions */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap3xxx_prm_read_pending_irqs</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">events</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap3xxx_prm_ocp_barrier</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap3xxx_prm_save_and_clear_irqen</span><span class="p">(</span><span class="n">u32</span> <span class="o">*</span><span class="n">saved_mask</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">omap3xxx_prm_restore_irqen</span><span class="p">(</span><span class="n">u32</span> <span class="o">*</span><span class="n">saved_mask</span><span class="p">);</span>

<span class="cp">#endif	</span><span class="cm">/* CONFIG_ARCH_OMAP4 */</span><span class="cp"></span>

<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * Bits common to specific registers</span>
<span class="cm"> *</span>
<span class="cm"> * The 3430 register and bit names are generally used,</span>
<span class="cm"> * since they tend to make more sense</span>
<span class="cm"> */</span>

<span class="cm">/* PM_EVGENONTIM_MPU */</span>
<span class="cm">/* Named PM_EVEGENONTIM_MPU on the 24XX */</span>
<span class="cp">#define OMAP_ONTIMEVAL_SHIFT				0</span>
<span class="cp">#define OMAP_ONTIMEVAL_MASK				(0xffffffff &lt;&lt; 0)</span>

<span class="cm">/* PM_EVGENOFFTIM_MPU */</span>
<span class="cm">/* Named PM_EVEGENOFFTIM_MPU on the 24XX */</span>
<span class="cp">#define OMAP_OFFTIMEVAL_SHIFT				0</span>
<span class="cp">#define OMAP_OFFTIMEVAL_MASK				(0xffffffff &lt;&lt; 0)</span>

<span class="cm">/* PRM_CLKSETUP and PRCM_VOLTSETUP */</span>
<span class="cm">/* Named PRCM_CLKSSETUP on the 24XX */</span>
<span class="cp">#define OMAP_SETUP_TIME_SHIFT				0</span>
<span class="cp">#define OMAP_SETUP_TIME_MASK				(0xffff &lt;&lt; 0)</span>

<span class="cm">/* PRM_CLKSRC_CTRL */</span>
<span class="cm">/* Named PRCM_CLKSRC_CTRL on the 24XX */</span>
<span class="cp">#define OMAP_SYSCLKDIV_SHIFT				6</span>
<span class="cp">#define OMAP_SYSCLKDIV_MASK				(0x3 &lt;&lt; 6)</span>
<span class="cp">#define OMAP_AUTOEXTCLKMODE_SHIFT			3</span>
<span class="cp">#define OMAP_AUTOEXTCLKMODE_MASK			(0x3 &lt;&lt; 3)</span>
<span class="cp">#define OMAP_SYSCLKSEL_SHIFT				0</span>
<span class="cp">#define OMAP_SYSCLKSEL_MASK				(0x3 &lt;&lt; 0)</span>

<span class="cm">/* PM_EVGENCTRL_MPU */</span>
<span class="cp">#define OMAP_OFFLOADMODE_SHIFT				3</span>
<span class="cp">#define OMAP_OFFLOADMODE_MASK				(0x3 &lt;&lt; 3)</span>
<span class="cp">#define OMAP_ONLOADMODE_SHIFT				1</span>
<span class="cp">#define OMAP_ONLOADMODE_MASK				(0x3 &lt;&lt; 1)</span>
<span class="cp">#define OMAP_ENABLE_MASK				(1 &lt;&lt; 0)</span>

<span class="cm">/* PRM_RSTTIME */</span>
<span class="cm">/* Named RM_RSTTIME_WKUP on the 24xx */</span>
<span class="cp">#define OMAP_RSTTIME2_SHIFT				8</span>
<span class="cp">#define OMAP_RSTTIME2_MASK				(0x1f &lt;&lt; 8)</span>
<span class="cp">#define OMAP_RSTTIME1_SHIFT				0</span>
<span class="cp">#define OMAP_RSTTIME1_MASK				(0xff &lt;&lt; 0)</span>

<span class="cm">/* PRM_RSTCTRL */</span>
<span class="cm">/* Named RM_RSTCTRL_WKUP on the 24xx */</span>
<span class="cm">/* 2420 calls RST_DPLL3 &#39;RST_DPLL&#39; */</span>
<span class="cp">#define OMAP_RST_DPLL3_MASK				(1 &lt;&lt; 2)</span>
<span class="cp">#define OMAP_RST_GS_MASK				(1 &lt;&lt; 1)</span>


<span class="cm">/*</span>
<span class="cm"> * Bits common to module-shared registers</span>
<span class="cm"> *</span>
<span class="cm"> * Not all registers of a particular type support all of these bits -</span>
<span class="cm"> * check TRM if you are unsure</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * 24XX: RM_RSTST_MPU and RM_RSTST_DSP - on 24XX, &#39;COREDOMAINWKUP_RST&#39; is</span>
<span class="cm"> *	 called &#39;COREWKUP_RST&#39;</span>
<span class="cm"> *</span>
<span class="cm"> * 3430: RM_RSTST_IVA2, RM_RSTST_MPU, RM_RSTST_GFX, RM_RSTST_DSS,</span>
<span class="cm"> *	 RM_RSTST_CAM, RM_RSTST_PER, RM_RSTST_NEON</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP_COREDOMAINWKUP_RST_MASK			(1 &lt;&lt; 3)</span>

<span class="cm">/*</span>
<span class="cm"> * 24XX: RM_RSTST_MPU, RM_RSTST_GFX, RM_RSTST_DSP</span>
<span class="cm"> *</span>
<span class="cm"> * 2430: RM_RSTST_MDM</span>
<span class="cm"> *</span>
<span class="cm"> * 3430: RM_RSTST_CORE, RM_RSTST_EMU</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP_DOMAINWKUP_RST_MASK			(1 &lt;&lt; 2)</span>

<span class="cm">/*</span>
<span class="cm"> * 24XX: RM_RSTST_MPU, RM_RSTST_WKUP, RM_RSTST_DSP</span>
<span class="cm"> *	 On 24XX, &#39;GLOBALWARM_RST&#39; is called &#39;GLOBALWMPU_RST&#39;.</span>
<span class="cm"> *</span>
<span class="cm"> * 2430: RM_RSTST_MDM</span>
<span class="cm"> *</span>
<span class="cm"> * 3430: RM_RSTST_CORE, RM_RSTST_EMU</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP_GLOBALWARM_RST_MASK			(1 &lt;&lt; 1)</span>
<span class="cp">#define OMAP_GLOBALCOLD_RST_MASK			(1 &lt;&lt; 0)</span>

<span class="cm">/*</span>
<span class="cm"> * 24XX: PM_WKDEP_GFX, PM_WKDEP_MPU, PM_WKDEP_CORE, PM_WKDEP_DSP</span>
<span class="cm"> *	 2420 TRM sometimes uses &quot;EN_WAKEUP&quot; instead of &quot;EN_WKUP&quot;</span>
<span class="cm"> *</span>
<span class="cm"> * 2430: PM_WKDEP_MDM</span>
<span class="cm"> *</span>
<span class="cm"> * 3430: PM_WKDEP_IVA2, PM_WKDEP_GFX, PM_WKDEP_DSS, PM_WKDEP_CAM,</span>
<span class="cm"> *	 PM_WKDEP_PER</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP_EN_WKUP_SHIFT				4</span>
<span class="cp">#define OMAP_EN_WKUP_MASK				(1 &lt;&lt; 4)</span>

<span class="cm">/*</span>
<span class="cm"> * 24XX: PM_PWSTCTRL_MPU, PM_PWSTCTRL_CORE, PM_PWSTCTRL_GFX,</span>
<span class="cm"> *	 PM_PWSTCTRL_DSP</span>
<span class="cm"> *</span>
<span class="cm"> * 2430: PM_PWSTCTRL_MDM</span>
<span class="cm"> *</span>
<span class="cm"> * 3430: PM_PWSTCTRL_IVA2, PM_PWSTCTRL_CORE, PM_PWSTCTRL_GFX,</span>
<span class="cm"> *	 PM_PWSTCTRL_DSS, PM_PWSTCTRL_CAM, PM_PWSTCTRL_PER,</span>
<span class="cm"> *	 PM_PWSTCTRL_NEON</span>
<span class="cm"> */</span>
<span class="cp">#define OMAP_LOGICRETSTATE_MASK				(1 &lt;&lt; 2)</span>


<span class="cm">/*</span>
<span class="cm"> * MAX_MODULE_HARDRESET_WAIT: Maximum microseconds to wait for an OMAP</span>
<span class="cm"> * submodule to exit hardreset</span>
<span class="cm"> */</span>
<span class="cp">#define MAX_MODULE_HARDRESET_WAIT		10000</span>


<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
