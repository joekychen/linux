<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-omap2 › omap_hwmod_2420_data.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>omap_hwmod_2420_data.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * omap_hwmod_2420_data.c - hardware modules present on the OMAP2420 chips</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2009-2011 Nokia Corporation</span>
<span class="cm"> * Copyright (C) 2012 Texas Instruments, Inc.</span>
<span class="cm"> * Paul Walmsley</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> * published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> * XXX handle crossbar/shared link difference for L3?</span>
<span class="cm"> * XXX these should be marked initdata for multi-OMAP kernels</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;plat/omap_hwmod.h&gt;</span>
<span class="cp">#include &lt;mach/irqs.h&gt;</span>
<span class="cp">#include &lt;plat/cpu.h&gt;</span>
<span class="cp">#include &lt;plat/dma.h&gt;</span>
<span class="cp">#include &lt;plat/serial.h&gt;</span>
<span class="cp">#include &lt;plat/i2c.h&gt;</span>
<span class="cp">#include &lt;plat/gpio.h&gt;</span>
<span class="cp">#include &lt;plat/mcspi.h&gt;</span>
<span class="cp">#include &lt;plat/dmtimer.h&gt;</span>
<span class="cp">#include &lt;plat/l3_2xxx.h&gt;</span>
<span class="cp">#include &lt;plat/l4_2xxx.h&gt;</span>
<span class="cp">#include &lt;plat/mmc.h&gt;</span>

<span class="cp">#include &quot;omap_hwmod_common_data.h&quot;</span>

<span class="cp">#include &quot;cm-regbits-24xx.h&quot;</span>
<span class="cp">#include &quot;prm-regbits-24xx.h&quot;</span>
<span class="cp">#include &quot;wd_timer.h&quot;</span>

<span class="cm">/*</span>
<span class="cm"> * OMAP2420 hardware module integration data</span>
<span class="cm"> *</span>
<span class="cm"> * All of the data in this section should be autogeneratable from the</span>
<span class="cm"> * TI hardware database or other technical documentation.  Data that</span>
<span class="cm"> * is driver-specific or driver-kernel integration-specific belongs</span>
<span class="cm"> * elsewhere.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * IP blocks</span>
<span class="cm"> */</span>

<span class="cm">/* IVA1 (IVA1) */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class</span> <span class="n">iva1_hwmod_class</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;iva1&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_rst_info</span> <span class="n">omap2420_iva_resets</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;iva&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">rst_shift</span> <span class="o">=</span> <span class="mi">8</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_iva_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;iva&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">iva1_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clkdm_name</span>	<span class="o">=</span> <span class="s">&quot;iva1_clkdm&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">rst_lines</span>	<span class="o">=</span> <span class="n">omap2420_iva_resets</span><span class="p">,</span>
	<span class="p">.</span><span class="n">rst_lines_cnt</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">omap2420_iva_resets</span><span class="p">),</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;iva1_ifck&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* DSP */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class</span> <span class="n">dsp_hwmod_class</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;dsp&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_rst_info</span> <span class="n">omap2420_dsp_resets</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;logic&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">rst_shift</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;mmu&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">rst_shift</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_dsp_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;dsp&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">dsp_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clkdm_name</span>	<span class="o">=</span> <span class="s">&quot;dsp_clkdm&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">rst_lines</span>	<span class="o">=</span> <span class="n">omap2420_dsp_resets</span><span class="p">,</span>
	<span class="p">.</span><span class="n">rst_lines_cnt</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">omap2420_dsp_resets</span><span class="p">),</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;dsp_fck&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* I2C common */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class_sysconfig</span> <span class="n">i2c_sysc</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">rev_offs</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sysc_offs</span>	<span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="p">.</span><span class="n">syss_offs</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sysc_flags</span>	<span class="o">=</span> <span class="p">(</span><span class="n">SYSC_HAS_SOFTRESET</span> <span class="o">|</span> <span class="n">SYSS_HAS_RESET_STATUS</span><span class="p">),</span>
	<span class="p">.</span><span class="n">sysc_fields</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap_hwmod_sysc_type1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class</span> <span class="n">i2c_class</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;i2c&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sysc</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">i2c_sysc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">rev</span>		<span class="o">=</span> <span class="n">OMAP_I2C_IP_VERSION_1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reset</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap_i2c_reset</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_i2c_dev_attr</span> <span class="n">i2c_dev_attr</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">OMAP_I2C_FLAG_NO_FIFO</span> <span class="o">|</span>
			  <span class="n">OMAP_I2C_FLAG_SIMPLE_CLOCK</span> <span class="o">|</span>
			  <span class="n">OMAP_I2C_FLAG_16BIT_DATA_REG</span> <span class="o">|</span>
			  <span class="n">OMAP_I2C_FLAG_BUS_SHIFT_2</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* I2C1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_i2c1_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;i2c1&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2_i2c1_mpu_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sdma_reqs</span>	<span class="o">=</span> <span class="n">omap2_i2c1_sdma_reqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;i2c1_fck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP2420_EN_I2C1_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP2420_ST_I2C1_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">i2c_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev_attr</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">i2c_dev_attr</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">HWMOD_16BIT_REG</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* I2C2 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_i2c2_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;i2c2&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2_i2c2_mpu_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sdma_reqs</span>	<span class="o">=</span> <span class="n">omap2_i2c2_sdma_reqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;i2c2_fck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP2420_EN_I2C2_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP2420_ST_I2C2_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">i2c_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev_attr</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">i2c_dev_attr</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">HWMOD_16BIT_REG</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* dma attributes */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_dma_dev_attr</span> <span class="n">dma_dev_attr</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">dev_caps</span>  <span class="o">=</span> <span class="n">RESERVE_CHANNEL</span> <span class="o">|</span> <span class="n">DMA_LINKED_LCH</span> <span class="o">|</span> <span class="n">GLOBAL_PRIORITY</span> <span class="o">|</span>
						<span class="n">IS_CSSA_32</span> <span class="o">|</span> <span class="n">IS_CDSA_32</span><span class="p">,</span>
	<span class="p">.</span><span class="n">lch_count</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_dma_system_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;dma&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_dma_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2_dma_system_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;core_l3_ck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev_attr</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">dma_dev_attr</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">HWMOD_NO_IDLEST</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* mailbox */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_irq_info</span> <span class="n">omap2420_mailbox_irqs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;dsp&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">26</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;iva&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">34</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_mailbox_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;mailbox&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_mailbox_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2420_mailbox_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;mailboxes_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_EN_MAILBOXES_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_ST_MAILBOXES_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * &#39;mcbsp&#39; class</span>
<span class="cm"> * multi channel buffered serial port controller</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class</span> <span class="n">omap2420_mcbsp_hwmod_class</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;mcbsp&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* mcbsp1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_irq_info</span> <span class="n">omap2420_mcbsp1_irqs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;tx&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">59</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rx&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">60</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_mcbsp1_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;mcbsp1&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_mcbsp_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2420_mcbsp1_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sdma_reqs</span>	<span class="o">=</span> <span class="n">omap2_mcbsp1_sdma_reqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;mcbsp1_fck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_EN_MCBSP1_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_ST_MCBSP1_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* mcbsp2 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_irq_info</span> <span class="n">omap2420_mcbsp2_irqs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;tx&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">62</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rx&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">63</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_mcbsp2_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;mcbsp2&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_mcbsp_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2420_mcbsp2_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sdma_reqs</span>	<span class="o">=</span> <span class="n">omap2_mcbsp2_sdma_reqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;mcbsp2_fck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_EN_MCBSP2_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_ST_MCBSP2_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class_sysconfig</span> <span class="n">omap2420_msdi_sysc</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">rev_offs</span>	<span class="o">=</span> <span class="mh">0x3c</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sysc_offs</span>	<span class="o">=</span> <span class="mh">0x64</span><span class="p">,</span>
	<span class="p">.</span><span class="n">syss_offs</span>	<span class="o">=</span> <span class="mh">0x68</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sysc_flags</span>	<span class="o">=</span> <span class="p">(</span><span class="n">SYSC_HAS_SOFTRESET</span> <span class="o">|</span> <span class="n">SYSS_HAS_RESET_STATUS</span><span class="p">),</span>
	<span class="p">.</span><span class="n">sysc_fields</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap_hwmod_sysc_type1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_class</span> <span class="n">omap2420_msdi_hwmod_class</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;msdi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sysc</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_msdi_sysc</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reset</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap_msdi_reset</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* msdi1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_irq_info</span> <span class="n">omap2420_msdi1_irqs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="mi">83</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_dma_info</span> <span class="n">omap2420_msdi1_sdma_reqs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;tx&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">dma_req</span> <span class="o">=</span> <span class="mi">61</span> <span class="p">},</span> <span class="cm">/* OMAP24XX_DMA_MMC1_TX */</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rx&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">dma_req</span> <span class="o">=</span> <span class="mi">62</span> <span class="p">},</span> <span class="cm">/* OMAP24XX_DMA_MMC1_RX */</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">dma_req</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_msdi1_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;msdi1&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_msdi_hwmod_class</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2420_msdi1_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sdma_reqs</span>	<span class="o">=</span> <span class="n">omap2420_msdi1_sdma_reqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;mmc_fck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP2420_EN_MMC_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP2420_ST_MMC_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">HWMOD_16BIT_REG</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* HDQ1W/1-wire */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod</span> <span class="n">omap2420_hdq1w_hwmod</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;hdq1w&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mpu_irqs</span>	<span class="o">=</span> <span class="n">omap2_hdq1w_mpu_irqs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">main_clk</span>	<span class="o">=</span> <span class="s">&quot;hdq_fck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">prcm</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">omap2</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">module_offs</span> <span class="o">=</span> <span class="n">CORE_MOD</span><span class="p">,</span>
			<span class="p">.</span><span class="n">prcm_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">module_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_EN_HDQ_SHIFT</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_reg_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
			<span class="p">.</span><span class="n">idlest_idle_bit</span> <span class="o">=</span> <span class="n">OMAP24XX_ST_HDQ_SHIFT</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">class</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2_hdq1w_class</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * interfaces</span>
<span class="cm"> */</span>

<span class="cm">/* L4 CORE -&gt; I2C1 interface */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__i2c1</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_i2c1_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;i2c1_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2_i2c1_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* L4 CORE -&gt; I2C2 interface */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__i2c2</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_i2c2_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;i2c2_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2_i2c2_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* IVA &lt;- L3 interface */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l3__iva</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l3_main_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_iva_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;core_l3_ck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* DSP &lt;- L3 interface */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l3__dsp</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l3_main_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_dsp_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;dsp_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_timer1_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x48028000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x48028000</span> <span class="o">+</span> <span class="n">SZ_1K</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* l4_wkup -&gt; timer1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__timer1</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_timer1_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;gpt1_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_timer1_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_wkup -&gt; wd_timer2 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_wd_timer2_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x48022000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x4802207f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__wd_timer2</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_wd_timer2_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;mpu_wdt_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_wd_timer2_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_wkup -&gt; gpio1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_gpio1_addr_space</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x48018000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x480181ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__gpio1</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_gpio1_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;gpios_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_gpio1_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_wkup -&gt; gpio2 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_gpio2_addr_space</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x4801a000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x4801a1ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__gpio2</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_gpio2_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;gpios_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_gpio2_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_wkup -&gt; gpio3 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_gpio3_addr_space</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x4801c000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x4801c1ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__gpio3</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_gpio3_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;gpios_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_gpio3_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_wkup -&gt; gpio4 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_gpio4_addr_space</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x4801e000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x4801e1ff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__gpio4</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_gpio4_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;gpios_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_gpio4_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* dma_system -&gt; L3 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_dma_system__l3</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_dma_system_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l3_main_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;core_l3_ck&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_core -&gt; dma_system */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__dma_system</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_dma_system_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;sdma_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2_dma_system_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_core -&gt; mailbox */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__mailbox</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_mailbox_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2_mailbox_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_core -&gt; mcbsp1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__mcbsp1</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_mcbsp1_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;mcbsp1_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2_mcbsp1_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_core -&gt; mcbsp2 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__mcbsp2</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_mcbsp2_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;mcbsp2_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2xxx_mcbsp2_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_msdi1_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x4809c000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x4809c000</span> <span class="o">+</span> <span class="n">SZ_128</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="cm">/* l4_core -&gt; msdi1 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__msdi1</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_msdi1_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;mmc_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_msdi1_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* l4_core -&gt; hdq1w interface */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_core__hdq1w</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_core_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2420_hdq1w_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;hdq_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2_hdq1w_addr_space</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">OMAP_FIREWALL_L4</span> <span class="o">|</span> <span class="n">OCPIF_SWSUP_IDLE</span><span class="p">,</span>
<span class="p">};</span>


<span class="cm">/* l4_wkup -&gt; 32ksync_counter */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_addr_space</span> <span class="n">omap2420_counter_32k_addrs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pa_start</span>	<span class="o">=</span> <span class="mh">0x48004000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">pa_end</span>		<span class="o">=</span> <span class="mh">0x4800401f</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>		<span class="o">=</span> <span class="n">ADDR_TYPE_RT</span>
	<span class="p">},</span>
	<span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="n">omap2420_l4_wkup__counter_32k</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">master</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_l4_wkup_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slave</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">omap2xxx_counter_32k_hwmod</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clk</span>		<span class="o">=</span> <span class="s">&quot;sync_32k_ick&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">addr</span>		<span class="o">=</span> <span class="n">omap2420_counter_32k_addrs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">user</span>		<span class="o">=</span> <span class="n">OCP_USER_MPU</span> <span class="o">|</span> <span class="n">OCP_USER_SDMA</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">omap_hwmod_ocp_if</span> <span class="o">*</span><span class="n">omap2420_hwmod_ocp_ifs</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l3_main__l4_core</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_mpu__l3_main</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_dss__l3</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__mcspi1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__mcspi2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__l4_wkup</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2_l4_core__uart1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2_l4_core__uart2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2_l4_core__uart3</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__i2c1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__i2c2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l3__iva</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l3__dsp</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__timer1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer3</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer4</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer5</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer6</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer7</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer8</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer9</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer10</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer11</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__timer12</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__wd_timer2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__dss</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__dss_dispc</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__dss_rfbi</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2xxx_l4_core__dss_venc</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__gpio1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__gpio2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__gpio3</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__gpio4</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_dma_system__l3</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__dma_system</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__mailbox</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__mcbsp1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__mcbsp2</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__msdi1</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_core__hdq1w</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">omap2420_l4_wkup__counter_32k</span><span class="p">,</span>
	<span class="nb">NULL</span><span class="p">,</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">__init</span> <span class="nf">omap2420_hwmod_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">omap_hwmod_register_links</span><span class="p">(</span><span class="n">omap2420_hwmod_ocp_ifs</span><span class="p">);</span>
<span class="p">}</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
