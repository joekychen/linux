f | io.h | s | 1.0K | 38 | Rob Herring | rob.herring@calxeda.com | 1331091285 |  | ARM: kill off __mem_pci  __mem_pci is only used to enable readl/writel and friends. Just condition this on readl being defined and remove all the __mem_pci defines.  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Lennert Buytenhek <kernel@wantstofly.org> Cc: Imre Kaloz <kaloz@openwrt.org> Cc: Krzysztof Halasa <khc@pm.waw.pl> Cc: Nicolas Pitre <nico@fluxnic.net> Cc: Ben Dooks <ben-linux@fluff.org> Cc: Kukjin Kim <kgene.kim@samsung.com> Cc: Colin Cross <ccross@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Stephen Warren <swarren@nvidia.com>
f | iomap.h | s | 8.3K | 230 | Linus Torvalds | torvalds@linux-foundation.org | 1333069330 |  | 
f | kbc.h | s | 1.5K | 52 | Shridhar Rasal | srasal@nvidia.com | 1328257746 |  | Input: tegra-kbc - allow skipping setting up some of GPIO pins  Allow marking some of GPIO pins as ignored to to avoid continuously generating KBC input events.  Signed-off-by: Shridhar Rasal <srasal@nvidia.com>  Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
f | tegra-ahb.h | s | 677B | 16 | Hiroshi DOYU | hdoyu@nvidia.com | 1336505449 |  | ARM: tegra: Add SMMU enabler in AHB  Add extern func, "tegra_ahb_enable_smmu()" to inform AHB that SMMU is ready.  Signed-off-by: Hiroshi DOYU <hdoyu@nvidia.com> Cc: Felipe Balbi <balbi@ti.com> Signed-off-by: Stephen Warren <swarren@nvidia.com>
f | dma.h | s | 4.6K | 130 | Arnd Bergmann | arnd@arndb.de | 1334601684 |  | ARM: tegra: do not hide dma declarations  The declarations are actually required for the device definitions, and are still valid even if the dma controller is disabled:  arch/arm/mach-tegra/devices.c:559:12: error: 'TEGRA_DMA_REQ_SEL_I2S_1' undeclared here (not in a function) arch/arm/mach-tegra/devices.c:577:12: error: 'TEGRA_DMA_REQ_SEL_I2S2_1' undeclared here (not in a function)  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Alan Ott <alan@signal11.us> Signed-off-by: Stephen Warren <swarren@nvidia.com>
f | clk.h | s | 1.1K | 35 | Peter De Schrijver | pdeschrijver@nvidia.com | 1328548575 |  | ARM: tegra: add support for new clock framework features  Add support for new clock framework features implemented in tegra30.  Signed-off-by: Peter De Schrijver <pdeschrijver@nvidia.com> Tested-by: Stephen Warren <swarren@nvidia.com> Acked-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Olof Johansson <olof@lixom.net>
f | smmu.h | s | 1.6K | 57 | Hiroshi DOYU | hdoyu@nvidia.com | 1327582742 |  | ARM: IOMMU: Tegra30: Add iommu_ops for SMMU driver  Tegra 30 IOMMU H/W, SMMU (System Memory Management Unit). This patch implements struct iommu_ops for SMMU for the upper IOMMU API.  This H/W module supports multiple virtual address spaces(domain x4), and manages 2 level H/W translation pagetable.  Signed-off-by: Hiroshi DOYU <hdoyu@nvidia.com> Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>
f | irammap.h | s | 1.2K | 30 | Stephen Warren | swarren@nvidia.com | 1328581500 |  | ARM: tegra: Pass uncompress.h UART selection to DEBUG_LL  uncompress.h now saves the selected UART's physical address in Tegra's IRAM, along with a cookie to indicate validity.  The first time it's run, macro addruart in debug-macro.S looks for this cookie, and if it's present, uses the UART address stored there. If not, the static value TEGRA_DEBUG_UART_BASE is used, as was previous behaviour. The static behaviour will thus be used when not booting using a zImage.  This work was inspired by work by Doug Anderson <dianders@chromium.org>; see http://lkml.org/lkml/2011/9/26/284. However, this patch relies on the data passing describe above, rather than duplicating the UART selection logic in debug-macro.S; the latest selection logic is more complex due to the need to check reset/clock bits too.  Signed-off-by: Stephen Warren <swarren@nvidia.com> Tested-by: Doug Anderson <dianders@chromium.org> Acked-by: Doug Anderson <dianders@chromium.org> Signed-off-by: Olof Johansson <olof@lixom.net>
f | uncompress.h | s | 5.0K | 203 | Stephen Warren | swarren@nvidia.com | 1334086896 |  | ARM: tegra: uncompress.h: Implement TEGRA_DEBUG_UART_AUTO_ODMDATA  Tegra has 5 UARTS which could be used for low-level debug output. Commit fe26398 "ARM: tegra: uncompress.h: Choose a UART at runtime" implemented one method for the kernel to automatically determine which of these to use at run-time, so that the same DEBUG_LL-enabled kernel image could be used across multiple Tegra boards. The required bootloader-side setup for that option is implemented in NVIDIA's various downstream U-Boot branches, but the U-Boot maintainers have refused to accept it upstream.  This change implements an alternative automatic UART selection option using ODMDATA. This is a 32-bit value programmed into Tegra's boot memory which provides a few pieces of basic board-specific information, including a field that indicates the console UART. Setting up this value is part of the standard Tegra boot architecture, and so requires no Tegra-specific hacks in the bootloader's UART driver.  Note that in theory, the format of ODMDATA is board-specific. However, in practice all boards use the same location/size/values for the UART field. ODMDATA[19:18] (which drive the type of debug console) is more problematic, since some boards use value 2 for UART and others use 3. This patch just accepts either value; if this doesn't work well for a given board, I'd suggest simply not enabling this debug option when building for that board.  Note that the kernel assumes the bootloader has already set up any required pinmux settings for the UART; there is no way the kernel can do this for itself prior to knowing which board it's running on. In practice, people using this feature are highly likely to be using bootloaders that have indeed configured the pinmux. This assumption existed prior to this patch.  Signed-off-by: Stephen Warren <swarren@nvidia.com>
f | tegra_wm8903_pdata.h | s | 699B | 22 | Stephen Warren | swarren@nvidia.com | 1303145758 |  | ARM: Tegra: Add to tegra_wm8903_platform_data  Seaboard derivate Kaen has a GPIO to mute the headphone output. Add a field to tegra_wm8903_platform_data so the board files can pass the GPIO number for that to the ASoC machine driver.  Also, initialize this new field to a "not present" value for Harmony.  Signed-off-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
f | suspend.h | s | 1.0K | 33 | Colin Cross | ccross@android.com | 1297317421 |  | ARM: tegra: Add prototypes for subsystem suspend functions  Signed-off-by: Colin Cross <ccross@android.com>
f | pinconf-tegra.h | s | 1.9K | 57 | Stephen Warren | swarren@nvidia.com | 1331027506 |  | pinctrl: add a driver for NVIDIA Tegra  This adds a driver for the Tegra pinmux, and required parameterization data for Tegra20 and Tegra30.  The driver is initially added with driver name and device tree compatible value that won't cause this driver to be used. A later change will switch the pinctrl driver to use the correct values, switch the old pinmux driver to be disabled, and update all code that uses the old pinmux APIs to use the new pinctrl APIs.  Signed-off-by: Stephen Warren <swarren@nvidia.com> Acked-by: Olof Johansson <olof@lixom.net> [squashed "fix case of Tegra30's foo_groups[] arrays"] Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | gpio-tegra.h | s | 763B | 24 | Stephen Warren | swarren@nvidia.com | 1334766398 |  | gpio: tegra: Hide tegra_gpio_enable/disable()  Recent pinctrl discussions concluded that gpiolib APIs should in fact do whatever is required to mux a GPIO onto pins, by calling pinctrl APIs if required. This change implements this for the Tegra GPIO driver, and removes calls to the Tegra-specific APIs from drivers and board files.  Cc: Chris Ball <cjb@laptop.org> Cc: linux-mmc@vger.kernel.org Signed-off-by: Stephen Warren <swarren@nvidia.com> Acked-by: Chris Ball <cjb@laptop.org> # for sdhci-tegra.c Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Olof Johansson <olof@lixom.net>
f | debug-macro.S | g | 2.9K |  | Linus Torvalds | torvalds@linux-foundation.org | 1333069330 |  | 
f | usb_phy.h | s | 2.1K | 67 | Stephen Warren | swarren@nvidia.com | 1335388929 |  | ARM: tegra: add USB ULPI PHY reset GPIO to device tree  ULPI PHYs have a reset signal, and different boards use a different GPIO for this task. Add a property to device tree to represent this.  I'm not sure if adding this property to the EHCI controller node is entirely correct; perhaps eventually we should have explicit separate nodes for the various PHYs. However, we don't have that right now, so this binding seems like a reasonable choice.  Cc: <devicetree-discuss@lists.ozlabs.org> Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org> Cc: <linux-usb@vger.kernel.org> Signed-off-by: Stephen Warren <swarren@nvidia.com>
f | irqs.h | s | 6.8K | 169 | Peter De Schrijver | pdeschrijver@nvidia.com | 1328548574 |  | ARM: tegra: add support for tegra30 interrupts  Tegra30 has 1 extra legacy interrupt controller. Use the GIC ITLinesNumber field to determine how many interrupt controllers we have and initialize appropriately. Also make room for the extra tegra30 interrupts by moving the GPIO IRQ base. This shouldn't affect existing code as it determines the correct IRQ number for GPIOs using TEGRA_GPIO_TO_IRQ().  Signed-off-by: Peter De Schrijver <pdeschrijver@nvidia.com> Acked-by: Stephen Warren <swarren@nvidia.com> Tested-by: Stephen Warren <swarren@nvidia.com> Acked-by: Colin Cross <ccross@android.com> Signed-off-by: Olof Johansson <olof@lixom.net>
f | powergate.h | s | 1.6K | 45 | Peter De Schrijver | pdeschrijver@nvidia.com | 1330296285 |  | ARM: tegra: support for Tegra30 CPU powerdomains  Secondary CPU powerdomains can be powergated on Tegra30. Add the necessary functions to do this. This will be used to boot the secondary CPUs later on.  Signed-off-by: Peter De Schrijver <pdeschrijver@nvidia.com> Acked-by: Stephen Warren <swarren@nvidia.com> Tested-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Olof Johansson <olof@lixom.net>
f | gpio.h | s | 12B | 1 | Linus Walleij | linus.walleij@linaro.org | 1319886346 |  | ARM: mark empty gpio.h files empty  It is generally a better idea to make intentionally empty files contain the human-readable /* empty */ comment, also it makes the files play nice with "make distclean".  Reported-by: Jeff Garzik <jeff@garzik.org> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Jeff Garzik <jeff@garzik.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | sdhci.h | s | 814B | 27 | Venkat Rao | vrao@broadcom.com | 1306285170 |  | mmc: tegra: add pm_flags  Enable fast bcm4329 WIFI suspend/resume on Tegra2 board.  This patch allows the mach-tegra support to tell the tegra MMC host controller to NOT turn off power for the MMC controller the WIFI part lives behind.  Thus bcm4329 firmware doesn't need to be reloaded.  Signed-off-by: Venkat Rao <vrao@broadcom.com> Tested-by: Grant Grundler <grundler@chromium.org> Reviewed-by: Olof Johansson <olof@lixom.net> Acked-by: Olof Johansson <olof@lixom.net> Signed-off-by: Chris Ball <cjb@laptop.org>
f | timex.h | s | 737B | 23 | Erik Gilling | konkers@android.com | 1281045102 |  | [ARM] tegra: initial tegra support  v2: Fixes from Mike Rapoport 	- remove unused header files (mach/dma.h and mach/nand.h) 	- remove tegra 1 references from Makefile.boot  v2: fixes from Russell King 	- remove mach/io.h include from mach/iomap.h 	- fix whitespace in Kconfig  v2: from Colin Cross 	- fix invalid immediate in debug-macro.S  v3: 	- allow selection of multiple boards  Signed-off-by: Colin Cross <ccross@android.com> Signed-off-by: Erik Gilling <konkers@android.com>
