f | devices-db8500.h | s | 4.3K | 106 | Linus Torvalds | torvalds@linux-foundation.org | 1337813950 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6  Pull crypto updates from Herbert Xu:  - New cipher/hash driver for ARM ux500.  - Code clean-up for aesni-intel.  - Misc fixes.  Fixed up conflicts in arch/arm/mach-ux500/devices-common.h, where quite frankly some of it made no sense at all (the pull brought in a declaration for the dbx500_add_platform_device_noirq() function, which neither exists nor is used anywhere).  Also some trivial add-add context conflicts in the Kconfig file in drivers/{char/hw_random,crypto}/  * git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6:   crypto: aesni-intel - move more common code to ablk_init_common   crypto: aesni-intel - use crypto_[un]register_algs   crypto: ux500 - Cleanup hardware identification   crypto: ux500 - Update DMA handling for 3.4   mach-ux500: crypto - core support for CRYP/HASH module.   crypto: ux500 - Add driver for HASH hardware   crypto: ux500 - Add driver for CRYP hardware   hwrng: Kconfig - modify default state for atmel-rng driver   hwrng: omap - use devm_request_and_ioremap   crypto: crypto4xx - move up err_request_irq label   crypto, xor: Sanitize checksumming function selection output   crypto: caam - add backward compatible string sec4.0
f | Makefile | g | 587B |  | Linus Torvalds | torvalds@linux-foundation.org | 1337704861 |  | 
f | board-mop500-regulators.c | s | 12K | 380 | Ola Lilja | ola.o.lilja@stericsson.com | 1330529557 |  | ARM: ux500: Add audio-regulators  Add regulators Vaud, Vamic1, Vamic2 and Vdmic used by audio.  Signed-off-by: Ola Lilja <ola.o.lilja@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | ste-dma40-db8500.h | s | 4.9K | 140 | Rabin Vincent | rabin.vincent@stericsson.com | 1286217967 |  | ARM: 6418/1: ux500: rename DB8500 DMA event line macros  Change the DMA event line macros to have the name of the SoC.  Also, have the event line number encoded in the macro since on DB5500 several event lines are present at multiple alternate numbers.  Acked-by: Linus Walleij <linus.walleij@stericsson.com> Signed-off-by: Rabin Vincent <rabin.vincent@stericsson.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | board-mop500.c | s | 24K | 781 | Linus Walleij | linus.walleij@linaro.org | 1339540904 |  | serial/amba-pl011: move custom pin control to driver  We had a boot regression in Ux500 in the merge window because two orthogonal pin control schemes for the PL011 were merged at the same time:  - One using the .init() and .exit() hooks into the platform   for Ux500 putting the pins into default vs sleep state   respectively as the port was started/stopped.   commit a09806607fd20bed2f8c41fe22793386790a14aa   "ARM: ux500: switch to using pinctrl for uart0"  - One hogging the default setting at PL011 probe()   commit 258e055111d3cde2607e0d04eb91da2f7a59b591   "serial: amba-pl011: adopt pinctrl support"  To get a solution that works for both let's scrap the stuff in the platform callbacks, instead have the driver itself select default and sleep states when the port is started/stopped. Hopefully this works for all clients. Platform callbacks are bad for device tree migration anyway, so this rids us of another problem in Ux500.  Cc: Shawn Guo <shawn.guo@linaro.org> Cc: Russell King <rmk+kernel@arm.linux.org.uk> Reported-by: Lee Jones <lee.jones@linaro.org> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Tested-by: Shawn Guo <shawn.guo@linaro.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
f | hotplug.c | s | 1.1K | 53 | Will Deacon | will.deacon@arm.com | 1327314005 |  | ARM: 7293/1: logical_cpu_map: decouple CPU mapping from SMP  It turns out that the logical CPU mapping is useful even when !CONFIG_SMP for manipulation of devices like interrupt and power controllers when running a UP kernel on a CPU other than 0. This can happen when kexecing a UP image from an SMP kernel.  In the future, multi-cluster systems running AMP configurations will require something similar for mapping cluster IDs, so it makes sense to decouple this logic in preparation for this support.  Acked-by: Yang Bai <hamo.by@gmail.com> Acked-by: Marc Zyngier <marc.zyngier@arm.com> Reported-by: Joerg Roedel <joerg.roedel@amd.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | devices.c | s | 564B | 21 | Rabin Vincent | rabin.vincent@stericsson.com | 1291810446 |  | ux500: rework device registration  Change the Ux500 devices to be dynamically allocated and added by calling functions instead of referencing structures, thereby allowing 5500 and other derivatives' support to be added without having to duplicate structures, use fixup functions, or use compile-time macros.  Signed-off-by: Rabin Vincent <rabin.vincent@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@stericsson.com>
f | cpuidle.c | s | 4.2K | 142 | Daniel Lezcano | daniel.lezcano@linaro.org | 1335912278 |  | ARM: ux500: add the cpuidle driver for WFI and ARM retention  This patch adds the cpuidle driver for the ux500 SoC. The boards saves 12mA with these states. It is based on the latest cpuidle consolidation from Robert Lee.  The cpu can go to retention only if the other core is in WFI.  If the other cpu is in WFI and we decoupled the gic from the cores, then we have the guarantee, it won't be wake up.  It is up to the prcmu firmware to recouple the gic automatically after the power state mode is selected.  Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org> Acked-by: Vincent Guittot <vincent.guittot@linaro.org> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
d | include |  | 1 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | board-mop500-uib.c | s | 2.5K | 108 | Lee Jones | lee.jones@linaro.org | 1338509073 |  | ARM: ux500: Only initialise STE's UIBs on boards which support them  ST-Ericsson uses User Interface Boards to extend functionality of some of their development boards. However, these aren't compatible with all the supported boards found in Mainline (Snowball for instance). This patch ensures that the UIBs are only probed on boards which can actually support them. This in turn saves lots of unnecessary error messages normally found in Snowball's boot log.  Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Lee Jones <lee.jones@linaro.org> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | board-mop500-regulators.h | s | 615B | 18 | Linus Walleij | linus.walleij@linaro.org | 1301295263 |  | mach-ux500: configure board for the TPS61052 regulator v2  This registers the TPS61052 regulator to the ux500 MOP/HREF boards.  Cc: Samuel Ortiz <samuel.ortiz@intel.com> Cc: Liam Girdwood <lrg@slimlogic.co.uk> Cc: Mark Brown <broonie@opensource.wolfsonmicro.com> Cc: Ola Lilja <ola.o.lilja@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | board-mop500-msp.h | s | 383B | 13 | Ola Lilja | ola.o.lilja@stericsson.com | 1335256007 |  | ARM: ux500: Add support for MSP I2S-devices  Create devices for the MSP-blocks (MSP0, MSP1, MSP2 and MSP3) and associate it with the correct clocks in the clock-framework.  Signed-off-by: Ola Lilja <ola.o.lilja@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | clock.c | s | 17K | 601 | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | cpu-db8500.c | s | 6.7K | 213 | Lee Jones | lee.jones@linaro.org | 1338509050 |  | ARM: ux500: Remove DB8500 PRCMU platform registration when DT is enabled  Now the DB8500 has Device Tree support it will be probed when the DT is parsed, rendering the requirement for platform registration void. This patch removes DB8500 PRCMU platform registration.  Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Lee Jones <lee.jones@linaro.org> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | clock.h | s | 5.2K | 147 | Shawn Guo | shawn.guo@linaro.org | 1336480598 |  | ARM: ux500: use machine specific hook for late init  Signed-off-by: Shawn Guo <shawn.guo@linaro.org> Acked-by: srinidhi kasagar <srinidhi.kasagar@stericsson.com> Acked-by: Linus Walleij <linus.walleij@linaro.org>
f | board-mop500-sdi.c | s | 7.7K | 253 | Linus Torvalds | torvalds@linux-foundation.org | 1332962680 |  | 
f | devices-common.h | s | 3.7K | 128 | Linus Torvalds | torvalds@linux-foundation.org | 1337813950 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6  Pull crypto updates from Herbert Xu:  - New cipher/hash driver for ARM ux500.  - Code clean-up for aesni-intel.  - Misc fixes.  Fixed up conflicts in arch/arm/mach-ux500/devices-common.h, where quite frankly some of it made no sense at all (the pull brought in a declaration for the dbx500_add_platform_device_noirq() function, which neither exists nor is used anywhere).  Also some trivial add-add context conflicts in the Kconfig file in drivers/{char/hw_random,crypto}/  * git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6:   crypto: aesni-intel - move more common code to ablk_init_common   crypto: aesni-intel - use crypto_[un]register_algs   crypto: ux500 - Cleanup hardware identification   crypto: ux500 - Update DMA handling for 3.4   mach-ux500: crypto - core support for CRYP/HASH module.   crypto: ux500 - Add driver for HASH hardware   crypto: ux500 - Add driver for CRYP hardware   hwrng: Kconfig - modify default state for atmel-rng driver   hwrng: omap - use devm_request_and_ioremap   crypto: crypto4xx - move up err_request_irq label   crypto, xor: Sanitize checksumming function selection output   crypto: caam - add backward compatible string sec4.0
f | id.c | s | 2.4K | 91 | Linus Walleij | linus.walleij@linaro.org | 1335911113 |  | ARM: ux500: core U9540 support  This adds support for the U9540 variant of the U8500 series. This is an application processor without internal modem. This is the most basic part with ASIC ID, CPU-related fixes, IRQ list, register ranges, timer, UART, and L2 cache setup. This is based on a patch by Michel Jaouen which was rewritten to fit with the latest 3.3 kernel.  ChangeLog v1->v2: deleted the irqs-db9540.h file since we expect to   migrate to using Device Tree for getting the IRQs to devices. ChangeLog v2->v3: introduced a fixed virtual offset for the ROM   as suggested by Arnd Bergmann.  Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Sebastien Pasdeloup <sebastien.pasdeloup-nonst@stericsson.com> Signed-off-by: Michel Jaouen <michel.jaouen@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | pins-db8500.h | s | 24K | 577 | Linus Walleij | linus.walleij@linaro.org | 1335252965 |  | ARM: ux500: remove a bunch of internal pull-ups  The default configuration for a number of I2C and keypad pins was to pull-up. However on most reference designs the electronics already contain external pull-ups which means the internal pull-ups will lower the common resistance and increase power consumption on these lines, and in some reference designs the keypad inputs are not used so this will just cause problems. So remove these pull-ups and add them on demand instead if needed.  Signed-off-by: Magnus Templing <magnus.templing@stericsson.com> Signed-off-by: Naveen Kumar Gaddipati <naveen.gaddipati@stericsson.com> Reviewed-by: Jonas Aberg <jonas.aberg@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | headsmp.S | g | 850B |  | Rob Herring | rob.herring@calxeda.com | 1326724563 |  | ARM: ux500: add missing ENDPROC to headsmp.S  Once the ENDPROC is in place, BSYM() in not longer necessary to get correct pointer to u8500_secondary_startup().  Signed-off-by: Rob Herring <rob.herring@calxeda.com> Cc: Srinidhi Kasagar <srinidhi.kasagar@stericsson.com> Cc: Linus Walleij <linus.walleij@stericsson.com>
f | board-mop500-msp.c | s | 6.4K | 214 | Linus Walleij | linus.walleij@linaro.org | 1336727659 |  | ARM: ux500: switch MSP to using pinctrl for pins  The MSP platform data callbacks use the old custom callbacks to set the state of the pins, switch over to using pinctrl.  Cc: Ola Lilja <ola.o.lilja@stericsson.com> Acked-by: Stephen Warren <swarren@wwwdotorg.org> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | devices-db8500.c | s | 6.0K | 179 | Andreas Westin | andreas.westin@stericsson.com | 1337066732 |  | mach-ux500: crypto - core support for CRYP/HASH module.  This adds the required platform data and calls to enable the CRYP/HASH driver.  Signed-off-by: Andreas Westin <andreas.westin@stericsson.com> Acked-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
f | devices-common.c | s | 1.2K | 52 | Linus Walleij | linus.walleij@linaro.org | 1334860294 |  | ARM: 7372/1: ux500: factor out dynamic amba device allocator  This replaces the dynamic device allocator in the ux500 machine with the common device allocator in the bus code.  Cc: Srinidhi Kasagar <srinidhi.kasagar@stericsson.com> Cc: Rabin Vincent <rabin.vincent@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | board-mop500-u8500uib.c | s | 2.0K | 75 | Danny Kukawka | danny.kukawka@bisect.de | 1330529558 |  | ARM: ux500: included linux/gpio.h twice  arch/arm/mach-ux500/board-mop500-u8500uib.c included 'linux/gpio.h' remove the duplicate.  Signed-off-by: Danny Kukawka <danny.kukawka@bisect.de> Acked-by: Srinidhi Kasagar <srinidhi.kasagar@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | timer.c | s | 2.8K | 93 | Linus Torvalds | torvalds@linux-foundation.org | 1337704362 |  | 
f | cache-l2x0.c | s | 1.8K | 61 | Arnd Bergmann | arnd@arndb.de | 1337005772 |  | Merge branch 'ux500/delete-u5500' into next/soc  Conflicts: 	arch/arm/mach-ux500/cache-l2x0.c 	arch/arm/mach-ux500/clock.c 	arch/arm/mach-ux500/cpu.c 	arch/arm/mach-ux500/mbox-db5500.c 	arch/arm/mach-ux500/platsmp.c 	arch/arm/mach-ux500/timer.c  Resolve lots of identical conflicts between the removal of u5500 and the addition of u8540.  Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | cpu.c | s | 3.6K | 124 | Linus Torvalds | torvalds@linux-foundation.org | 1338063241 |  | 
f | board-mop500-pins.c | s | 21K | 488 | Linus Walleij | linus.walleij@linaro.org | 1336727659 |  | ARM: ux500: switch MSP to using pinctrl for pins  The MSP platform data callbacks use the old custom callbacks to set the state of the pins, switch over to using pinctrl.  Cc: Ola Lilja <ola.o.lilja@stericsson.com> Acked-by: Stephen Warren <swarren@wwwdotorg.org> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | board-mop500.h | s | 3.6K | 87 | Lee Jones | lee.jones@linaro.org | 1338509073 |  | ARM: ux500: Only initialise STE's UIBs on boards which support them  ST-Ericsson uses User Interface Boards to extend functionality of some of their development boards. However, these aren't compatible with all the supported boards found in Mainline (Snowball for instance). This patch ensures that the UIBs are only probed on boards which can actually support them. This in turn saves lots of unnecessary error messages normally found in Snowball's boot log.  Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Lee Jones <lee.jones@linaro.org> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | Kconfig | g | 1.4K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337704782 |  | 
f | usb.c | s | 3.9K | 136 | Lee Jones | lee.jones@linaro.org | 1329114704 |  | ARM: ux500: move top level platform devices in sysfs to /sys/devices/socX  At the request of Arnd Bergmann this patch moves all SoC platform devices found in sysfs from /sys/devices/platform to /sys/devices/soc<SoCNum>/. It is believed as the devices are SoC specific and a /sys/devices/soc node has recently become available, that this would be a more appropriate place to display the data.  Signed-off-by: Lee Jones <lee.jones@linaro.org> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | board-mop500-stuib.c | s | 4.6K | 177 | Linus Walleij | linus.walleij@linaro.org | 1300107916 |  | mach-ux500: basic HREFv60 support v2  The HREFv60 variant of the MOP500 family of boards remove the external GPIO expander and route these pins back to some of the readily available internal GPIO pins instead.  Based on a patch by Bibek Basu <bibek.basu@stericsson.com> for an internal kernel version.  Cc: Bibek Basu <bibek.basu@stericsson.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
f | platsmp.c | s | 4.2K | 144 | Arnd Bergmann | arnd@arndb.de | 1337005772 |  | Merge branch 'ux500/delete-u5500' into next/soc  Conflicts: 	arch/arm/mach-ux500/cache-l2x0.c 	arch/arm/mach-ux500/clock.c 	arch/arm/mach-ux500/cpu.c 	arch/arm/mach-ux500/mbox-db5500.c 	arch/arm/mach-ux500/platsmp.c 	arch/arm/mach-ux500/timer.c  Resolve lots of identical conflicts between the removal of u5500 and the addition of u8540.  Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | Makefile.boot | g | 129B |  | Arnd Bergmann | arnd@arndb.de | 1331927172 |  | ARM: ux500: Initial Device Tree support for Snowball  This provides very basic Device Tree support for ST-Ericsson's low-cost development platform, Snowball. If Device Tree for ux500 is enabled and the correct board is configured within the Device Tree blob, the correct *_init_machine() will be called.  This patch is based on some original work completed by:   Niklas Hernaeus <niklas.hernaeus@linaro.org>  Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Niklas Hernaeus <niklas.hernaeus@linaro.org> Signed-off-by: Lee Jones <lee.jones@linaro.org> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
