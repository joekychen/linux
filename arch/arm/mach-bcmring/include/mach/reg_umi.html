<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-bcmring › include › mach › reg_umi.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>reg_umi.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*****************************************************************************</span>
<span class="cm">* Copyright 2005 - 2008 Broadcom Corporation.  All rights reserved.</span>
<span class="cm">*</span>
<span class="cm">* Unless you and Broadcom execute a separate written software license</span>
<span class="cm">* agreement governing use of this software, this software is licensed to you</span>
<span class="cm">* under the terms of the GNU General Public License version 2, available at</span>
<span class="cm">* http://www.broadcom.com/licenses/GPLv2.php (the &quot;GPL&quot;).</span>
<span class="cm">*</span>
<span class="cm">* Notwithstanding the above, under no circumstances may you combine this</span>
<span class="cm">* software in any way with any other Broadcom software provided under a</span>
<span class="cm">* license other than the GPL, without Broadcom&#39;s express prior written</span>
<span class="cm">* consent.</span>
<span class="cm">*****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm">*</span>
<span class="cm">*****************************************************************************</span>
<span class="cm">*</span>
<span class="cm">*  REG_UMI.h</span>
<span class="cm">*</span>
<span class="cm">*  PURPOSE:</span>
<span class="cm">*</span>
<span class="cm">*     This file contains definitions for the nand registers:</span>
<span class="cm">*</span>
<span class="cm">*  NOTES:</span>
<span class="cm">*</span>
<span class="cm">*****************************************************************************/</span>

<span class="cp">#if !defined(__ASM_ARCH_REG_UMI_H)</span>
<span class="cp">#define __ASM_ARCH_REG_UMI_H</span>

<span class="cm">/* ---- Include Files ---------------------------------------------------- */</span>
<span class="cp">#include &lt;csp/reg.h&gt;</span>
<span class="cp">#include &lt;mach/csp/mm_io.h&gt;</span>

<span class="cm">/* ---- Constants and Types ---------------------------------------------- */</span>

<span class="cm">/* Unified Memory Interface Ctrl Register */</span>
<span class="cp">#define HW_UMI_BASE       MM_IO_BASE_UMI</span>

<span class="cm">/* Flash bank 0 timing and control register */</span>
<span class="cp">#define REG_UMI_FLASH0_TCR         __REG32(HW_UMI_BASE  + 0x00)</span>
<span class="cm">/* Flash bank 1 timing and control register */</span>
<span class="cp">#define REG_UMI_FLASH1_TCR         __REG32(HW_UMI_BASE  + 0x04)</span>
<span class="cm">/* Flash bank 2 timing and control register */</span>
<span class="cp">#define REG_UMI_FLASH2_TCR         __REG32(HW_UMI_BASE  + 0x08)</span>
<span class="cm">/* MMD interface and control register */</span>
<span class="cp">#define REG_UMI_MMD_ICR            __REG32(HW_UMI_BASE  + 0x0c)</span>
<span class="cm">/* NAND timing and control register */</span>
<span class="cp">#define REG_UMI_NAND_TCR           __REG32(HW_UMI_BASE  + 0x18)</span>
<span class="cm">/* NAND ready/chip select register */</span>
<span class="cp">#define REG_UMI_NAND_RCSR          __REG32(HW_UMI_BASE  + 0x1c)</span>
<span class="cm">/* NAND ECC control &amp; status register */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR       __REG32(HW_UMI_BASE  + 0x20)</span>
<span class="cm">/* NAND ECC data register XXB2B1B0 */</span>
<span class="cp">#define REG_UMI_NAND_ECC_DATA      __REG32(HW_UMI_BASE  + 0x24)</span>
<span class="cm">/* BCH ECC Parameter N */</span>
<span class="cp">#define REG_UMI_BCH_N              __REG32(HW_UMI_BASE  + 0x40)</span>
<span class="cm">/* BCH ECC Parameter T */</span>
<span class="cp">#define REG_UMI_BCH_K              __REG32(HW_UMI_BASE  + 0x44)</span>
<span class="cm">/* BCH ECC Parameter K */</span>
<span class="cp">#define REG_UMI_BCH_T              __REG32(HW_UMI_BASE  + 0x48)</span>
<span class="cm">/* BCH ECC Contro Status */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS    __REG32(HW_UMI_BASE  + 0x4C)</span>
<span class="cm">/* BCH WR ECC 31:0 */</span>
<span class="cp">#define REG_UMI_BCH_WR_ECC_0       __REG32(HW_UMI_BASE  + 0x50)</span>
<span class="cm">/* BCH WR ECC 63:32 */</span>
<span class="cp">#define REG_UMI_BCH_WR_ECC_1       __REG32(HW_UMI_BASE  + 0x54)</span>
<span class="cm">/* BCH WR ECC 95:64 */</span>
<span class="cp">#define REG_UMI_BCH_WR_ECC_2       __REG32(HW_UMI_BASE  + 0x58)</span>
<span class="cm">/* BCH WR ECC 127:96 */</span>
<span class="cp">#define REG_UMI_BCH_WR_ECC_3       __REG32(HW_UMI_BASE  + 0x5c)</span>
<span class="cm">/* BCH WR ECC 155:128 */</span>
<span class="cp">#define REG_UMI_BCH_WR_ECC_4       __REG32(HW_UMI_BASE  + 0x60)</span>
<span class="cm">/* BCH Read Error Location 1,0 */</span>
<span class="cp">#define REG_UMI_BCH_RD_ERR_LOC_1_0 __REG32(HW_UMI_BASE  + 0x64)</span>
<span class="cm">/* BCH Read Error Location 3,2 */</span>
<span class="cp">#define REG_UMI_BCH_RD_ERR_LOC_3_2 __REG32(HW_UMI_BASE  + 0x68)</span>
<span class="cm">/* BCH Read Error Location 5,4 */</span>
<span class="cp">#define REG_UMI_BCH_RD_ERR_LOC_5_4 __REG32(HW_UMI_BASE  + 0x6c)</span>
<span class="cm">/* BCH Read Error Location 7,6 */</span>
<span class="cp">#define REG_UMI_BCH_RD_ERR_LOC_7_6 __REG32(HW_UMI_BASE  + 0x70)</span>
<span class="cm">/* BCH Read Error Location 9,8 */</span>
<span class="cp">#define REG_UMI_BCH_RD_ERR_LOC_9_8 __REG32(HW_UMI_BASE  + 0x74)</span>
<span class="cm">/* BCH Read Error Location 11,10 */</span>
<span class="cp">#define REG_UMI_BCH_RD_ERR_LOC_B_A __REG32(HW_UMI_BASE  + 0x78)</span>

<span class="cm">/* REG_UMI_FLASH0/1/2_TCR, REG_UMI_SRAM0/1_TCR bits */</span>
<span class="cm">/* Enable wait pin during burst write or read */</span>
<span class="cp">#define REG_UMI_TCR_WAITEN              0x80000000</span>
<span class="cm">/* Enable mem ctrlr to work with ext mem of lower freq than AHB clk */</span>
<span class="cp">#define REG_UMI_TCR_LOWFREQ             0x40000000</span>
<span class="cm">/* 1=synch write, 0=async write */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_SYNCWRITE   0x20000000</span>
<span class="cm">/* 1=synch read, 0=async read */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_SYNCREAD    0x10000000</span>
<span class="cm">/* 1=page mode read, 0=normal mode read */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PAGEREAD    0x08000000</span>
<span class="cm">/* page size/burst size (wrap only) */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_MASK   0x07000000</span>
<span class="cm">/* 4 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_4      0x00000000</span>
<span class="cm">/* 8 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_8      0x01000000</span>
<span class="cm">/* 16 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_16     0x02000000</span>
<span class="cm">/* 32 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_32     0x03000000</span>
<span class="cm">/* 64 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_64     0x04000000</span>
<span class="cm">/* 128 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_128    0x05000000</span>
<span class="cm">/* 256 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_256    0x06000000</span>
<span class="cm">/* 512 word */</span>
<span class="cp">#define REG_UMI_TCR_MEMTYPE_PGSZ_512    0x07000000</span>
<span class="cm">/* Page read access cycle / Burst write latency (n+2 / n+1) */</span>
<span class="cp">#define REG_UMI_TCR_TPRC_TWLC_MASK      0x00f80000</span>
<span class="cm">/* Bus turnaround cycle (n) */</span>
<span class="cp">#define REG_UMI_TCR_TBTA_MASK           0x00070000</span>
<span class="cm">/* Write pulse width cycle (n+1) */</span>
<span class="cp">#define REG_UMI_TCR_TWP_MASK            0x0000f800</span>
<span class="cm">/* Write recovery cycle (n+1) */</span>
<span class="cp">#define REG_UMI_TCR_TWR_MASK            0x00000600</span>
<span class="cm">/* Write address setup cycle (n+1) */</span>
<span class="cp">#define REG_UMI_TCR_TAS_MASK            0x00000180</span>
<span class="cm">/* Output enable delay cycle (n) */</span>
<span class="cp">#define REG_UMI_TCR_TOE_MASK            0x00000060</span>
<span class="cm">/* Read access cycle / Burst read latency (n+2 / n+1) */</span>
<span class="cp">#define REG_UMI_TCR_TRC_TLC_MASK        0x0000001f</span>

<span class="cm">/* REG_UMI_MMD_ICR bits */</span>
<span class="cm">/* Flash write protection pin control */</span>
<span class="cp">#define REG_UMI_MMD_ICR_FLASH_WP            0x8000</span>
<span class="cm">/* Extend hold time for sram0, sram1 csn (39 MHz operation) */</span>
<span class="cp">#define REG_UMI_MMD_ICR_XHCS                0x4000</span>
<span class="cm">/* Enable SDRAM 2 interface control */</span>
<span class="cp">#define REG_UMI_MMD_ICR_SDRAM2EN            0x2000</span>
<span class="cm">/* Enable merge of flash banks 0/1 to 512 MBit bank */</span>
<span class="cp">#define REG_UMI_MMD_ICR_INST512             0x1000</span>
<span class="cm">/* Enable merge of flash banks 1/2 to 512 MBit bank */</span>
<span class="cp">#define REG_UMI_MMD_ICR_DATA512             0x0800</span>
<span class="cm">/* Enable SDRAM interface control */</span>
<span class="cp">#define REG_UMI_MMD_ICR_SDRAMEN             0x0400</span>
<span class="cm">/* Polarity of busy state of Burst Wait Signal */</span>
<span class="cp">#define REG_UMI_MMD_ICR_WAITPOL             0x0200</span>
<span class="cm">/* Enable burst clock stopped when not accessing external burst flash/sram */</span>
<span class="cp">#define REG_UMI_MMD_ICR_BCLKSTOP            0x0100</span>
<span class="cm">/* Enable the peri1_csn to replace flash1_csn in 512 Mb flash mode */</span>
<span class="cp">#define REG_UMI_MMD_ICR_PERI1EN             0x0080</span>
<span class="cm">/* Enable the peri2_csn to replace sdram_csn */</span>
<span class="cp">#define REG_UMI_MMD_ICR_PERI2EN             0x0040</span>
<span class="cm">/* Enable the peri3_csn to replace sdram2_csn */</span>
<span class="cp">#define REG_UMI_MMD_ICR_PERI3EN             0x0020</span>
<span class="cm">/* Enable sram bank1 for H/W controlled MRS */</span>
<span class="cp">#define REG_UMI_MMD_ICR_MRSB1               0x0010</span>
<span class="cm">/* Enable sram bank0 for H/W controlled MRS */</span>
<span class="cp">#define REG_UMI_MMD_ICR_MRSB0               0x0008</span>
<span class="cm">/* Polarity for assert3ed state of H/W controlled MRS */</span>
<span class="cp">#define REG_UMI_MMD_ICR_MRSPOL              0x0004</span>
<span class="cm">/* 0: S/W controllable ZZ/MRS/CRE/P-Mode pin */</span>
<span class="cm">/* 1: H/W controlled ZZ/MRS/CRE/P-Mode, same timing as CS */</span>
<span class="cp">#define REG_UMI_MMD_ICR_MRSMODE             0x0002</span>
<span class="cm">/* MRS state for S/W controlled mode */</span>
<span class="cp">#define REG_UMI_MMD_ICR_MRSSTATE            0x0001</span>

<span class="cm">/* REG_UMI_NAND_TCR bits */</span>
<span class="cm">/* Enable software to control CS */</span>
<span class="cp">#define REG_UMI_NAND_TCR_CS_SWCTRL          0x80000000</span>
<span class="cm">/* 16-bit nand wordsize if set */</span>
<span class="cp">#define REG_UMI_NAND_TCR_WORD16             0x40000000</span>
<span class="cm">/* Bus turnaround cycle (n) */</span>
<span class="cp">#define REG_UMI_NAND_TCR_TBTA_MASK          0x00070000</span>
<span class="cm">/* Write pulse width cycle (n+1) */</span>
<span class="cp">#define REG_UMI_NAND_TCR_TWP_MASK           0x0000f800</span>
<span class="cm">/* Write recovery cycle (n+1) */</span>
<span class="cp">#define REG_UMI_NAND_TCR_TWR_MASK           0x00000600</span>
<span class="cm">/* Write address setup cycle (n+1) */</span>
<span class="cp">#define REG_UMI_NAND_TCR_TAS_MASK           0x00000180</span>
<span class="cm">/* Output enable delay cycle (n) */</span>
<span class="cp">#define REG_UMI_NAND_TCR_TOE_MASK           0x00000060</span>
<span class="cm">/* Read access cycle (n+2) */</span>
<span class="cp">#define REG_UMI_NAND_TCR_TRC_TLC_MASK       0x0000001f</span>

<span class="cm">/* REG_UMI_NAND_RCSR bits */</span>
<span class="cm">/* Status: Ready=1, Busy=0 */</span>
<span class="cp">#define REG_UMI_NAND_RCSR_RDY               0x02</span>
<span class="cm">/* Keep CS asserted during operation */</span>
<span class="cp">#define REG_UMI_NAND_RCSR_CS_ASSERTED       0x01</span>

<span class="cm">/* REG_UMI_NAND_ECC_CSR bits */</span>
<span class="cm">/* Interrupt status - read-only */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_NANDINT        0x80000000</span>
<span class="cm">/* Read: Status of ECC done, Write: clear ECC interrupt */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_ECCINT_RAW     0x00800000</span>
<span class="cm">/* Read: Status of R/B, Write: clear R/B interrupt */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_RBINT_RAW      0x00400000</span>
<span class="cm">/* 1 = Enable ECC Interrupt */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_ECCINT_ENABLE  0x00008000</span>
<span class="cm">/* 1 = Assert interrupt at rising edge of R/B_ */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_RBINT_ENABLE   0x00004000</span>
<span class="cm">/* Calculate ECC by 0=512 bytes, 1=256 bytes */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_256BYTE        0x00000080</span>
<span class="cm">/* Enable ECC in hardware */</span>
<span class="cp">#define REG_UMI_NAND_ECC_CSR_ECC_ENABLE     0x00000001</span>

<span class="cm">/* REG_UMI_BCH_CTRL_STATUS bits */</span>
<span class="cm">/* Shift to Indicate Number of correctable errors detected */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_NB_CORR_ERROR_SHIFT 20</span>
<span class="cm">/* Indicate Number of correctable errors detected */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_NB_CORR_ERROR 0x00F00000</span>
<span class="cm">/* Indicate Errors detected during read but uncorrectable */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_UNCORR_ERR    0x00080000</span>
<span class="cm">/* Indicate Errors detected during read and are correctable */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_CORR_ERR      0x00040000</span>
<span class="cm">/* Flag indicates BCH&#39;s ECC status of read process are valid */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_RD_ECC_VALID  0x00020000</span>
<span class="cm">/* Flag indicates BCH&#39;s ECC status of write process are valid */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_WR_ECC_VALID  0x00010000</span>
<span class="cm">/* Pause ECC calculation */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_PAUSE_ECC_DEC 0x00000010</span>
<span class="cm">/* Enable Interrupt */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_INT_EN        0x00000004</span>
<span class="cm">/* Enable ECC during read */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_ECC_RD_EN     0x00000002</span>
<span class="cm">/* Enable ECC during write */</span>
<span class="cp">#define REG_UMI_BCH_CTRL_STATUS_ECC_WR_EN     0x00000001</span>
<span class="cm">/* Mask for location */</span>
<span class="cp">#define REG_UMI_BCH_ERR_LOC_MASK              0x00001FFF</span>
<span class="cm">/* location within a byte */</span>
<span class="cp">#define REG_UMI_BCH_ERR_LOC_BYTE              0x00000007</span>
<span class="cm">/* location within a word */</span>
<span class="cp">#define REG_UMI_BCH_ERR_LOC_WORD              0x00000018</span>
<span class="cm">/* location within a page (512 byte) */</span>
<span class="cp">#define REG_UMI_BCH_ERR_LOC_PAGE              0x00001FE0</span>
<span class="cp">#define REG_UMI_BCH_ERR_LOC_ADDR(index)     (__REG32(HW_UMI_BASE + 0x64 + (index / 2)*4) &gt;&gt; ((index % 2) * 16))</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
