<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-bcmring › include › mach › csp › chipcHw_inline.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../../index.html"></a><h1>chipcHw_inline.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*****************************************************************************</span>
<span class="cm">* Copyright 2003 - 2008 Broadcom Corporation.  All rights reserved.</span>
<span class="cm">*</span>
<span class="cm">* Unless you and Broadcom execute a separate written software license</span>
<span class="cm">* agreement governing use of this software, this software is licensed to you</span>
<span class="cm">* under the terms of the GNU General Public License version 2, available at</span>
<span class="cm">* http://www.broadcom.com/licenses/GPLv2.php (the &quot;GPL&quot;).</span>
<span class="cm">*</span>
<span class="cm">* Notwithstanding the above, under no circumstances may you combine this</span>
<span class="cm">* software in any way with any other Broadcom software provided under a</span>
<span class="cm">* license other than the GPL, without Broadcom&#39;s express prior written</span>
<span class="cm">* consent.</span>
<span class="cm">*****************************************************************************/</span>

<span class="cp">#ifndef CHIPC_INLINE_H</span>
<span class="cp">#define CHIPC_INLINE_H</span>

<span class="cm">/* ---- Include Files ----------------------------------------------------- */</span>

<span class="cp">#include &lt;csp/errno.h&gt;</span>
<span class="cp">#include &lt;csp/reg.h&gt;</span>
<span class="cp">#include &lt;mach/csp/chipcHw_reg.h&gt;</span>
<span class="cp">#include &lt;mach/csp/chipcHw_def.h&gt;</span>

<span class="cm">/* ---- Private Constants and Types --------------------------------------- */</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">chipcHw_OPTYPE_BYPASS</span><span class="p">,</span>	<span class="cm">/* Bypass operation */</span>
	<span class="n">chipcHw_OPTYPE_OUTPUT</span>	<span class="cm">/* Output operation */</span>
<span class="p">}</span> <span class="n">chipcHw_OPTYPE_e</span><span class="p">;</span>

<span class="cm">/* ---- Public Constants and Types ---------------------------------------- */</span>
<span class="cm">/* ---- Public Variable Externs ------------------------------------------- */</span>
<span class="cm">/* ---- Public Function Prototypes ---------------------------------------- */</span>
<span class="cm">/* ---- Private Function Prototypes --------------------------------------- */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="n">chipcHw_setClock</span><span class="p">(</span><span class="n">chipcHw_CLOCK_e</span> <span class="n">clock</span><span class="p">,</span>
				    <span class="n">chipcHw_OPTYPE_e</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get Numeric Chip ID</span>
<span class="cm">*</span>
<span class="cm">*  This function returns Chip ID that includes the revison number</span>
<span class="cm">*</span>
<span class="cm">*  @return  Complete numeric Chip ID</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getChipId</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ChipId</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enable Spread Spectrum</span>
<span class="cm">*</span>
<span class="cm">*  @note chipcHw_Init() must be called earlier</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_enableSpreadSpectrum</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
	     <span class="n">PLLPreDivider</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_PLL_PREDIVIDER_NDIV_MODE_MASK</span><span class="p">)</span> <span class="o">!=</span>
	    <span class="n">chipcHw_REG_PLL_PREDIVIDER_NDIV_MODE_INTEGER</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ddrcReg_PHY_ADDR_CTL_REGP</span><span class="o">-&gt;</span><span class="n">ssCfg</span> <span class="o">=</span>
		    <span class="p">(</span><span class="mh">0xFFFF</span> <span class="o">&lt;&lt;</span> <span class="n">ddrcReg_PHY_ADDR_SS_CFG_NDIV_AMPLITUDE_SHIFT</span><span class="p">)</span> <span class="o">|</span>
		    <span class="p">(</span><span class="n">ddrcReg_PHY_ADDR_SS_CFG_MIN_CYCLE_PER_TICK</span> <span class="o">&lt;&lt;</span>
		     <span class="n">ddrcReg_PHY_ADDR_SS_CFG_CYCLE_PER_TICK_SHIFT</span><span class="p">);</span>
		<span class="n">ddrcReg_PHY_ADDR_CTL_REGP</span><span class="o">-&gt;</span><span class="n">ssCtl</span> <span class="o">|=</span>
		    <span class="n">ddrcReg_PHY_ADDR_SS_CTRL_ENABLE</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disable Spread Spectrum</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_disableSpreadSpectrum</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">ddrcReg_PHY_ADDR_CTL_REGP</span><span class="o">-&gt;</span><span class="n">ssCtl</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">ddrcReg_PHY_ADDR_SS_CTRL_ENABLE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get Chip Product ID</span>
<span class="cm">*</span>
<span class="cm">*  This function returns Chip Product ID</span>
<span class="cm">*</span>
<span class="cm">*  @return  Chip Product ID</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getChipProductId</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		 <span class="n">ChipId</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_CHIPID_BASE_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
		<span class="n">chipcHw_REG_CHIPID_BASE_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get revision number</span>
<span class="cm">*</span>
<span class="cm">*  This function returns revision number of the chip</span>
<span class="cm">*</span>
<span class="cm">*  @return  Revision number</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">chipcHw_REV_NUMBER_e</span> <span class="nf">chipcHw_getChipRevisionNumber</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ChipId</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_CHIPID_REV_MASK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enables bus interface clock</span>
<span class="cm">*</span>
<span class="cm">*  Enables  bus interface clock of various device</span>
<span class="cm">*</span>
<span class="cm">*  @return  void</span>
<span class="cm">*</span>
<span class="cm">*  @note    use chipcHw_REG_BUS_CLOCK_XXXX for mask</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_busInterfaceClockEnable</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">BusIntfClock</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disables bus interface clock</span>
<span class="cm">*</span>
<span class="cm">*  Disables  bus interface clock of various device</span>
<span class="cm">*</span>
<span class="cm">*  @return  void</span>
<span class="cm">*</span>
<span class="cm">*  @note    use chipcHw_REG_BUS_CLOCK_XXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_busInterfaceClockDisable</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">BusIntfClock</span><span class="p">,</span> <span class="o">~</span><span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get status (enabled/disabled) of bus interface clock</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the status of devices&#39; bus interface clock</span>
<span class="cm">*</span>
<span class="cm">*  @return  Bus interface clock</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getBusInterfaceClockStatus</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">BusIntfClock</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enables various audio channels</span>
<span class="cm">*</span>
<span class="cm">*  Enables audio channel</span>
<span class="cm">*</span>
<span class="cm">*  @return  void</span>
<span class="cm">*</span>
<span class="cm">*  @note    use chipcHw_REG_AUDIO_CHANNEL_XXXXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_audioChannelEnable</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">AudioEnable</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disables various audio channels</span>
<span class="cm">*</span>
<span class="cm">*  Disables audio channel</span>
<span class="cm">*</span>
<span class="cm">*  @return  void</span>
<span class="cm">*</span>
<span class="cm">*  @note    use chipcHw_REG_AUDIO_CHANNEL_XXXXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_audioChannelDisable</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">AudioEnable</span><span class="p">,</span> <span class="o">~</span><span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Soft resets devices</span>
<span class="cm">*</span>
<span class="cm">*  Soft resets various devices</span>
<span class="cm">*</span>
<span class="cm">*  @return   void</span>
<span class="cm">*</span>
<span class="cm">*  @note     use chipcHw_REG_SOFT_RESET_XXXXXX defines</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_softReset</span><span class="p">(</span><span class="kt">uint64_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">chipcHw_softResetEnable</span><span class="p">(</span><span class="n">mask</span><span class="p">);</span>
	<span class="n">chipcHw_softResetDisable</span><span class="p">(</span><span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_softResetDisable</span><span class="p">(</span><span class="kt">uint64_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">ctrl1</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">mask</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ctrl2</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span><span class="p">);</span>

	<span class="cm">/* Deassert module soft reset */</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftReset1</span> <span class="o">^=</span> <span class="n">ctrl1</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftReset2</span> <span class="o">^=</span> <span class="p">(</span><span class="n">ctrl2</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">chipcHw_REG_SOFT_RESET_UNHOLD_MASK</span><span class="p">));</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_softResetEnable</span><span class="p">(</span><span class="kt">uint64_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">ctrl1</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">mask</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ctrl2</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span><span class="p">);</span>
	<span class="kt">uint32_t</span> <span class="n">unhold</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftReset1</span> <span class="o">|=</span> <span class="n">ctrl1</span><span class="p">;</span>
	<span class="cm">/* Mask out unhold request bits */</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftReset2</span> <span class="o">|=</span> <span class="p">(</span><span class="n">ctrl2</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">chipcHw_REG_SOFT_RESET_UNHOLD_MASK</span><span class="p">));</span>

	<span class="cm">/* Process unhold requests */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ctrl2</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_SOFT_RESET_VPM_GLOBAL_UNHOLD</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">unhold</span> <span class="o">=</span> <span class="n">chipcHw_REG_SOFT_RESET_VPM_GLOBAL_HOLD</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ctrl2</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_SOFT_RESET_VPM_UNHOLD</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">unhold</span> <span class="o">|=</span> <span class="n">chipcHw_REG_SOFT_RESET_VPM_HOLD</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ctrl2</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_SOFT_RESET_ARM_UNHOLD</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">unhold</span> <span class="o">|=</span> <span class="n">chipcHw_REG_SOFT_RESET_ARM_HOLD</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">unhold</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* Make sure unhold request is effective */</span>
		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftReset1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">unhold</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Configures misc CHIP functionality</span>
<span class="cm">*</span>
<span class="cm">*  Configures CHIP functionality</span>
<span class="cm">*</span>
<span class="cm">*  @return   void</span>
<span class="cm">*</span>
<span class="cm">*  @note     use chipcHw_REG_MISC_CTRL_XXXXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_miscControl</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_miscControlDisable</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span> <span class="o">~</span><span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_miscControlEnable</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Set OTP options</span>
<span class="cm">*</span>
<span class="cm">*  Set OTP options</span>
<span class="cm">*</span>
<span class="cm">*  @return   void</span>
<span class="cm">*</span>
<span class="cm">*  @note     use chipcHw_REG_OTP_XXXXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setOTPOption</span><span class="p">(</span><span class="kt">uint64_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">ctrl1</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">mask</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">ctrl2</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span><span class="p">);</span>

	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftOTP1</span><span class="p">,</span> <span class="n">ctrl1</span><span class="p">);</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftOTP2</span><span class="p">,</span> <span class="n">ctrl2</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Get sticky bits</span>
<span class="cm">*</span>
<span class="cm">*  @return   Sticky bit options of type chipcHw_REG_STICKY_XXXXXX</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getStickyBits</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Sticky</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Set sticky bits</span>
<span class="cm">*</span>
<span class="cm">*  @return   void</span>
<span class="cm">*</span>
<span class="cm">*  @note     use chipcHw_REG_STICKY_XXXXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setStickyBits</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">bits</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_POR_BROM</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_POR_BROM</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">sticky</span><span class="p">;</span>
		<span class="n">sticky</span> <span class="o">=</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Sticky</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Sticky</span> <span class="o">=</span> <span class="n">bits</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Clear sticky bits</span>
<span class="cm">*</span>
<span class="cm">*  @return   void</span>
<span class="cm">*</span>
<span class="cm">*  @note     use chipcHw_REG_STICKY_XXXXXX</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_clearStickyBits</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">mask</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">bits</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span>
	    <span class="p">(</span><span class="n">chipcHw_REG_STICKY_BOOT_DONE</span> <span class="o">|</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span> <span class="o">|</span>
	     <span class="n">chipcHw_REG_STICKY_GENERAL_2</span> <span class="o">|</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span> <span class="o">|</span>
	     <span class="n">chipcHw_REG_STICKY_GENERAL_4</span> <span class="o">|</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">))</span> <span class="p">{</span>
		<span class="kt">uint32_t</span> <span class="n">sticky</span> <span class="o">=</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Sticky</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">=</span> <span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">;</span>
			<span class="n">mask</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_STICKY_BOOT_DONE</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">;</span>
			<span class="n">mask</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_STICKY_GENERAL_1</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">;</span>
			<span class="n">mask</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_STICKY_GENERAL_2</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">;</span>
			<span class="n">mask</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_STICKY_GENERAL_3</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">;</span>
			<span class="n">mask</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_STICKY_GENERAL_4</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">)</span>
		    <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">sticky</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">))</span> <span class="p">{</span>
			<span class="n">bits</span> <span class="o">|=</span> <span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">;</span>
			<span class="n">mask</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_STICKY_GENERAL_5</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Sticky</span> <span class="o">=</span> <span class="n">bits</span> <span class="o">|</span> <span class="n">mask</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Get software strap value</span>
<span class="cm">*</span>
<span class="cm">*  Retrieves software strap value</span>
<span class="cm">*</span>
<span class="cm">*  @return   Software strap value</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getSoftStraps</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftStraps</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Set software override strap options</span>
<span class="cm">*</span>
<span class="cm">*  set software override strap options</span>
<span class="cm">*</span>
<span class="cm">*  @return   nothing</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setSoftStraps</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">strapOptions</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftStraps</span><span class="p">,</span> <span class="n">strapOptions</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get Pin Strap Options</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the raw boot strap options</span>
<span class="cm">*</span>
<span class="cm">*  @return  strap options</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getPinStraps</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PinStraps</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get Valid Strap Options</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the valid raw boot strap options</span>
<span class="cm">*</span>
<span class="cm">*  @return  strap options</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getValidStraps</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">softStraps</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 ** Always return the SoftStraps - bootROM calls chipcHw_initValidStraps</span>
<span class="cm">	 ** which copies HW straps to soft straps if there is no override</span>
<span class="cm">	 */</span>
	<span class="n">softStraps</span> <span class="o">=</span> <span class="n">chipcHw_getSoftStraps</span><span class="p">();</span>

	<span class="k">return</span> <span class="n">softStraps</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief    Initialize valid pin strap options</span>
<span class="cm">*</span>
<span class="cm">*  Retrieves valid pin strap options by copying HW strap options to soft register</span>
<span class="cm">*  (if chipcHw_STRAPS_SOFT_OVERRIDE not set)</span>
<span class="cm">*</span>
<span class="cm">*  @return   nothing</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_initValidStraps</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">softStraps</span><span class="p">;</span>

	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">softStraps</span> <span class="o">=</span> <span class="n">chipcHw_getSoftStraps</span><span class="p">();</span>

	<span class="k">if</span> <span class="p">((</span><span class="n">softStraps</span> <span class="o">&amp;</span> <span class="n">chipcHw_STRAPS_SOFT_OVERRIDE</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* Copy HW straps to software straps */</span>
		<span class="n">chipcHw_setSoftStraps</span><span class="p">(</span><span class="n">chipcHw_getPinStraps</span><span class="p">());</span>
	<span class="p">}</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get boot device</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the device type used in booting the system</span>
<span class="cm">*</span>
<span class="cm">*  @return  Boot device of type chipcHw_BOOT_DEVICE</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">chipcHw_BOOT_DEVICE_e</span> <span class="nf">chipcHw_getBootDevice</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">chipcHw_getValidStraps</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">chipcHw_STRAPS_BOOT_DEVICE_MASK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get boot mode</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the way the system was booted</span>
<span class="cm">*</span>
<span class="cm">*  @return  Boot mode of type chipcHw_BOOT_MODE</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">chipcHw_BOOT_MODE_e</span> <span class="nf">chipcHw_getBootMode</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">chipcHw_getValidStraps</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">chipcHw_STRAPS_BOOT_MODE_MASK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get NAND flash page size</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the NAND device page size</span>
<span class="cm">*</span>
<span class="cm">*  @return  Boot NAND device page size</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">chipcHw_NAND_PAGESIZE_e</span> <span class="nf">chipcHw_getNandPageSize</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">chipcHw_getValidStraps</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">chipcHw_STRAPS_NAND_PAGESIZE_MASK</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get NAND flash address cycle configuration</span>
<span class="cm">*</span>
<span class="cm">*  This function returns the NAND flash address cycle configuration</span>
<span class="cm">*</span>
<span class="cm">*  @return  0 = Do not extra address cycle, 1 = Add extra cycle</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">chipcHw_getNandExtraCycle</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">chipcHw_getValidStraps</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">chipcHw_STRAPS_NAND_EXTRA_CYCLE</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Activates PIF interface</span>
<span class="cm">*</span>
<span class="cm">*  This function activates PIF interface by taking control of LCD pins</span>
<span class="cm">*</span>
<span class="cm">*  @note</span>
<span class="cm">*       When activated, LCD pins will be defined as follows for PIF operation</span>
<span class="cm">*</span>
<span class="cm">*       CLD[17:0]  = pif_data[17:0]</span>
<span class="cm">*       CLD[23:18] = pif_address[5:0]</span>
<span class="cm">*       CLPOWER    = pif_wr_str</span>
<span class="cm">*       CLCP       = pif_rd_str</span>
<span class="cm">*       CLAC       = pif_hat1</span>
<span class="cm">*       CLFP       = pif_hrdy1</span>
<span class="cm">*       CLLP       = pif_hat2</span>
<span class="cm">*       GPIO[42]   = pif_hrdy2</span>
<span class="cm">*</span>
<span class="cm">*       In PIF mode, &quot;pif_hrdy2&quot; overrides other shared function for GPIO[42] pin</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_activatePifInterface</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">LcdPifMode</span><span class="p">,</span> <span class="n">chipcHw_REG_PIF_PIN_ENABLE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Activates LCD interface</span>
<span class="cm">*</span>
<span class="cm">*  This function activates LCD interface</span>
<span class="cm">*</span>
<span class="cm">*  @note</span>
<span class="cm">*       When activated, LCD pins will be defined as follows</span>
<span class="cm">*</span>
<span class="cm">*       CLD[17:0]  = LCD data</span>
<span class="cm">*       CLD[23:18] = LCD data</span>
<span class="cm">*       CLPOWER    = LCD power</span>
<span class="cm">*       CLCP       =</span>
<span class="cm">*       CLAC       = LCD ack</span>
<span class="cm">*       CLFP       =</span>
<span class="cm">*       CLLP       =</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_activateLcdInterface</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">LcdPifMode</span><span class="p">,</span> <span class="n">chipcHw_REG_LCD_PIN_ENABLE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Deactivates PIF/LCD interface</span>
<span class="cm">*</span>
<span class="cm">*  This function deactivates PIF/LCD interface</span>
<span class="cm">*</span>
<span class="cm">*  @note</span>
<span class="cm">*       When deactivated LCD pins will be in rti-stated</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_deactivatePifLcdInterface</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">LcdPifMode</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Select GE2</span>
<span class="cm">*</span>
<span class="cm">*  This function select GE2 as the graphic engine</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_selectGE2</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span> <span class="o">~</span><span class="n">chipcHw_REG_MISC_CTRL_GE_SEL</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Select GE3</span>
<span class="cm">*</span>
<span class="cm">*  This function select GE3 as the graphic engine</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_selectGE3</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span> <span class="n">chipcHw_REG_MISC_CTRL_GE_SEL</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get to know the configuration of GPIO pin</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="n">chipcHw_GPIO_FUNCTION_e</span> <span class="nf">chipcHw_getGpioPinFunction</span><span class="p">(</span><span class="kt">int</span> <span class="n">pin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_GPIO_MUX</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">&amp;</span>
		<span class="p">(</span><span class="n">chipcHw_REG_GPIO_MUX_MASK</span> <span class="o">&lt;&lt;</span>
		 <span class="n">chipcHw_REG_GPIO_MUX_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">)))</span> <span class="o">&gt;&gt;</span>
	    <span class="n">chipcHw_REG_GPIO_MUX_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Configure GPIO pin function</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setGpioPinFunction</span><span class="p">(</span><span class="kt">int</span> <span class="n">pin</span><span class="p">,</span>
					      <span class="n">chipcHw_GPIO_FUNCTION_e</span> <span class="n">func</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_GPIO_MUX</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_GPIO_MUX_MASK</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_GPIO_MUX_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">));</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_GPIO_MUX</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">|=</span>
	    <span class="n">func</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_GPIO_MUX_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set Pin slew rate</span>
<span class="cm">*</span>
<span class="cm">*  This function sets the slew of individual pin</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setPinSlewRate</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">pin</span><span class="p">,</span>
					  <span class="n">chipcHw_PIN_SLEW_RATE_e</span> <span class="n">slewRate</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_SLEW_RATE</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_SLEW_RATE_MASK</span> <span class="o">&lt;&lt;</span>
	      <span class="n">chipcHw_REG_SLEW_RATE_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">));</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_SLEW_RATE</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">slewRate</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_SLEW_RATE_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set Pin output drive current</span>
<span class="cm">*</span>
<span class="cm">*  This function sets output drive current of individual pin</span>
<span class="cm">*</span>
<span class="cm">*  Note: Avoid the use of the word &#39;current&#39; since linux headers define this</span>
<span class="cm">*        to be the current task.</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setPinOutputCurrent</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">pin</span><span class="p">,</span>
					       <span class="n">chipcHw_PIN_CURRENT_STRENGTH_e</span>
					       <span class="n">curr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_CURRENT</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_CURRENT_MASK</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_CURRENT_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">));</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_CURRENT</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">curr</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_CURRENT_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set Pin pullup register</span>
<span class="cm">*</span>
<span class="cm">*  This function sets pullup register of individual pin</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setPinPullup</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">pin</span><span class="p">,</span> <span class="n">chipcHw_PIN_PULL_e</span> <span class="n">pullup</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_PULLUP</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_PULLUP_MASK</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_PULLUP_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">));</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_PULLUP</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">pullup</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_PULLUP_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set Pin input type</span>
<span class="cm">*</span>
<span class="cm">*  This function sets input type of individual pin</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setPinInputType</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">pin</span><span class="p">,</span>
					   <span class="n">chipcHw_PIN_INPUTTYPE_e</span> <span class="n">inputType</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_INPUTTYPE</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_INPUTTYPE_MASK</span> <span class="o">&lt;&lt;</span>
	      <span class="n">chipcHw_REG_INPUTTYPE_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">));</span>
	<span class="o">*</span><span class="p">((</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">chipcHw_REG_INPUTTYPE</span><span class="p">(</span><span class="n">pin</span><span class="p">))</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span> <span class="n">inputType</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_INPUTTYPE_POSITION</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Power up the USB PHY</span>
<span class="cm">*</span>
<span class="cm">*  This function powers up the USB PHY</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_powerUpUsbPhy</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span>
			 <span class="n">chipcHw_REG_MISC_CTRL_USB_POWERON</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Power down the USB PHY</span>
<span class="cm">*</span>
<span class="cm">*  This function powers down the USB PHY</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_powerDownUsbPhy</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span>
			<span class="n">chipcHw_REG_MISC_CTRL_USB_POWEROFF</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set the 2nd USB as host</span>
<span class="cm">*</span>
<span class="cm">*  This function sets the 2nd USB as host</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setUsbHost</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span>
			<span class="n">chipcHw_REG_MISC_CTRL_USB_MODE_HOST</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set the 2nd USB as device</span>
<span class="cm">*</span>
<span class="cm">*  This function sets the 2nd USB as device</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setUsbDevice</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">MiscCtrl</span><span class="p">,</span>
			 <span class="n">chipcHw_REG_MISC_CTRL_USB_MODE_DEVICE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Lower layer function to enable/disable a clock of a certain device</span>
<span class="cm">*</span>
<span class="cm">*  This function enables/disables a core clock</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setClock</span><span class="p">(</span><span class="n">chipcHw_CLOCK_e</span> <span class="n">clock</span><span class="p">,</span>
				    <span class="n">chipcHw_OPTYPE_e</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">volatile</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">pPLLReg</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="mh">0x0</span><span class="p">;</span>
	<span class="k">volatile</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">pClockCtrl</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="p">)</span> <span class="mh">0x0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">clock</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_DDR</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_ARM</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ARMClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_ESW</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ESWClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_VPM</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_ESW125</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ESW125Clock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_UART</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">UARTClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_SDIO0</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SDIO0Clock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_SDIO1</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SDIO1Clock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_SPI</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SPIClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_ETM</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ETMClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_USB</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">USBClock</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CLOCK_POWER_DOWN</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						<span class="n">chipcHw_REG_PLL_CLOCK_POWER_DOWN</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_LCD</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">LCDClock</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CLOCK_POWER_DOWN</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						<span class="n">chipcHw_REG_PLL_CLOCK_POWER_DOWN</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_APM</span>:
		<span class="n">pPLLReg</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">APMClock</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CLOCK_POWER_DOWN</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						<span class="n">chipcHw_REG_PLL_CLOCK_POWER_DOWN</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_BUS</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">ACLKClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_OTP</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">OTPClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_I2C</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">I2CClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_I2S0</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">I2S0Clock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_RTBUS</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">RTBUSClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_APM100</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">APM100Clock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_TSC</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">TSCClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_LED</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">LEDClock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_CLOCK_I2S1</span>:
		<span class="n">pClockCtrl</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">I2S1Clock</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pPLLReg</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span>:
			<span class="cm">/* PLL clock output enable/disable */</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">clock</span> <span class="o">==</span> <span class="n">chipcHw_CLOCK_DDR</span><span class="p">)</span> <span class="p">{</span>
					<span class="cm">/* DDR clock enable is inverted */</span>
					<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
							 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CLOCK_OUTPUT_ENABLE</span><span class="p">);</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
							<span class="n">chipcHw_REG_PLL_CLOCK_OUTPUT_ENABLE</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">clock</span> <span class="o">==</span> <span class="n">chipcHw_CLOCK_DDR</span><span class="p">)</span> <span class="p">{</span>
					<span class="cm">/* DDR clock disable is inverted */</span>
					<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
							<span class="n">chipcHw_REG_PLL_CLOCK_OUTPUT_ENABLE</span><span class="p">);</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
							 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CLOCK_OUTPUT_ENABLE</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">chipcHw_OPTYPE_BYPASS</span>:
			<span class="cm">/* PLL clock bypass enable/disable */</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						<span class="n">chipcHw_REG_PLL_CLOCK_BYPASS_SELECT</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pPLLReg</span><span class="p">,</span>
						 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CLOCK_BYPASS_SELECT</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pClockCtrl</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span>:
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pClockCtrl</span><span class="p">,</span>
						<span class="n">chipcHw_REG_DIV_CLOCK_OUTPUT_ENABLE</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pClockCtrl</span><span class="p">,</span>
						 <span class="o">~</span><span class="n">chipcHw_REG_DIV_CLOCK_OUTPUT_ENABLE</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">chipcHw_OPTYPE_BYPASS</span>:
			<span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">reg32_modify_or</span><span class="p">(</span><span class="n">pClockCtrl</span><span class="p">,</span>
						<span class="n">chipcHw_REG_DIV_CLOCK_BYPASS_SELECT</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="n">reg32_modify_and</span><span class="p">(</span><span class="n">pClockCtrl</span><span class="p">,</span>
						 <span class="o">~</span><span class="n">chipcHw_REG_DIV_CLOCK_BYPASS_SELECT</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disables a core clock of a certain device</span>
<span class="cm">*</span>
<span class="cm">*  This function disables a core clock</span>
<span class="cm">*</span>
<span class="cm">*  @note    no change in power consumption</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setClockDisable</span><span class="p">(</span><span class="n">chipcHw_CLOCK_e</span> <span class="n">clock</span><span class="p">)</span>
<span class="p">{</span>

	<span class="cm">/* Disable output of the clock */</span>
	<span class="n">chipcHw_setClock</span><span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enable a core clock of a certain device</span>
<span class="cm">*</span>
<span class="cm">*  This function enables a core clock</span>
<span class="cm">*</span>
<span class="cm">*  @note    no change in power consumption</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_setClockEnable</span><span class="p">(</span><span class="n">chipcHw_CLOCK_e</span> <span class="n">clock</span><span class="p">)</span>
<span class="p">{</span>

	<span class="cm">/* Enable output of the clock */</span>
	<span class="n">chipcHw_setClock</span><span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">chipcHw_OPTYPE_OUTPUT</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enables bypass clock of a certain device</span>
<span class="cm">*</span>
<span class="cm">*  This function enables bypass clock</span>
<span class="cm">*</span>
<span class="cm">*  @note    Doesnot affect the bus interface clock</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_bypassClockEnable</span><span class="p">(</span><span class="n">chipcHw_CLOCK_e</span> <span class="n">clock</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Enable bypass clock */</span>
	<span class="n">chipcHw_setClock</span><span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">chipcHw_OPTYPE_BYPASS</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disabled bypass clock of a certain device</span>
<span class="cm">*</span>
<span class="cm">*  This function disables bypass clock</span>
<span class="cm">*</span>
<span class="cm">*  @note    Doesnot affect the bus interface clock</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_bypassClockDisable</span><span class="p">(</span><span class="n">chipcHw_CLOCK_e</span> <span class="n">clock</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Disable bypass clock */</span>
	<span class="n">chipcHw_setClock</span><span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">chipcHw_OPTYPE_BYPASS</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Checks if software strap is enabled</span>
<span class="cm"> *</span>
<span class="cm"> *   @return 1 : When enable</span>
<span class="cm"> *           0 : When disable</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">chipcHw_isSoftwareStrapsEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftStraps</span> <span class="o">&amp;</span> <span class="mh">0x00000001</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Enable software strap</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_softwareStrapsEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftStraps</span><span class="p">,</span> <span class="mh">0x00000001</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Disable software strap</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_softwareStrapsDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">SoftStraps</span><span class="p">,</span> <span class="p">(</span><span class="o">~</span><span class="mh">0x00000001</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief PLL test enable</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pllTestEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig</span><span class="p">,</span>
			<span class="n">chipcHw_REG_PLL_CONFIG_TEST_ENABLE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief PLL2 test enable</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pll2TestEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_or</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig2</span><span class="p">,</span>
			<span class="n">chipcHw_REG_PLL_CONFIG_TEST_ENABLE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief PLL test disable</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pllTestDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig</span><span class="p">,</span>
			 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CONFIG_TEST_ENABLE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief PLL2 test disable</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pll2TestDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">reg32_modify_and</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig2</span><span class="p">,</span>
			 <span class="o">~</span><span class="n">chipcHw_REG_PLL_CONFIG_TEST_ENABLE</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Get PLL test status</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">chipcHw_isPllTestEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_ENABLE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Get PLL2 test status</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">int</span> <span class="nf">chipcHw_isPll2TestEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig2</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_ENABLE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief PLL test select</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pllTestSelect</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_MASK</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_SHIFT</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief PLL2 test select</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pll2TestSelect</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>

	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig2</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_MASK</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig2</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_SHIFT</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Get PLL test selected option</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint8_t</span> <span class="nf">chipcHw_getPllTestSelected</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span> <span class="p">((</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
			   <span class="n">PLLConfig</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_MASK</span><span class="p">)</span>
			  <span class="o">&gt;&gt;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_SHIFT</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**  @brief Get PLL2 test selected option</span>
<span class="cm"> */</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint8_t</span> <span class="nf">chipcHw_getPll2TestSelected</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span> <span class="p">((</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
			   <span class="n">PLLConfig2</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_MASK</span><span class="p">)</span>
			  <span class="o">&gt;&gt;</span> <span class="n">chipcHw_REG_PLL_CONFIG_TEST_SELECT_SHIFT</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief  Disable the PLL1</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pll1Disable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig</span> <span class="o">|=</span> <span class="n">chipcHw_REG_PLL_CONFIG_POWER_DOWN</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief  Disable the PLL2</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_pll2Disable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">PLLConfig2</span> <span class="o">|=</span> <span class="n">chipcHw_REG_PLL_CONFIG_POWER_DOWN</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enables DDR SW phase alignment interrupt</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrPhaseAlignInterruptEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Spare1</span> <span class="o">|=</span> <span class="n">chipcHw_REG_SPARE1_DDR_PHASE_INTR_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disables DDR SW phase alignment interrupt</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrPhaseAlignInterruptDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Spare1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_SPARE1_DDR_PHASE_INTR_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set VPM SW phase alignment interrupt mode</span>
<span class="cm">*</span>
<span class="cm">*  This function sets VPM phase alignment interrupt</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">chipcHw_vpmPhaseAlignInterruptMode</span><span class="p">(</span><span class="n">chipcHw_VPM_HW_PHASE_INTR_e</span> <span class="n">mode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">mode</span> <span class="o">==</span> <span class="n">chipcHw_VPM_HW_PHASE_INTR_DISABLE</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Spare1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_SPARE1_VPM_PHASE_INTR_ENABLE</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">Spare1</span> <span class="o">|=</span> <span class="n">chipcHw_REG_SPARE1_VPM_PHASE_INTR_ENABLE</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">=</span>
	    <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
	     <span class="n">VPMPhaseCtrl2</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_VPM_INTR_SELECT_MASK</span> <span class="o">&lt;&lt;</span>
			       <span class="n">chipcHw_REG_VPM_INTR_SELECT_SHIFT</span><span class="p">))</span> <span class="o">|</span> <span class="n">mode</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enable DDR phase alignment in software</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrSwPhaseAlignEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl1</span> <span class="o">|=</span> <span class="n">chipcHw_REG_DDR_SW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disable DDR phase alignment in software</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrSwPhaseAlignDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_DDR_SW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enable DDR phase alignment in hardware</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrHwPhaseAlignEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl1</span> <span class="o">|=</span> <span class="n">chipcHw_REG_DDR_HW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disable DDR phase alignment in hardware</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrHwPhaseAlignDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_DDR_HW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enable VPM phase alignment in software</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmSwPhaseAlignEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl1</span> <span class="o">|=</span> <span class="n">chipcHw_REG_VPM_SW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disable VPM phase alignment in software</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmSwPhaseAlignDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_VPM_SW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Enable VPM phase alignment in hardware</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmHwPhaseAlignEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl1</span> <span class="o">|=</span> <span class="n">chipcHw_REG_VPM_HW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Disable VPM phase alignment in hardware</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmHwPhaseAlignDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl1</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_VPM_HW_PHASE_CTRL_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set DDR phase alignment margin in hardware</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">chipcHw_setDdrHwPhaseAlignMargin</span><span class="p">(</span><span class="n">chipcHw_DDR_HW_PHASE_MARGIN_e</span> <span class="n">margin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">ge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">le</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">margin</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">chipcHw_DDR_HW_PHASE_MARGIN_STRICT</span>:
		<span class="n">ge</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">;</span>
		<span class="n">le</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_DDR_HW_PHASE_MARGIN_MEDIUM</span>:
		<span class="n">ge</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
		<span class="n">le</span> <span class="o">=</span> <span class="mh">0x3F</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_DDR_HW_PHASE_MARGIN_WIDE</span>:
		<span class="n">ge</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
		<span class="n">le</span> <span class="o">=</span> <span class="mh">0x7F</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="p">{</span>
		<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>

		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl1</span> <span class="o">&amp;=</span>
		    <span class="o">~</span><span class="p">((</span><span class="n">chipcHw_REG_DDR_PHASE_VALUE_GE_MASK</span> <span class="o">&lt;&lt;</span>
		       <span class="n">chipcHw_REG_DDR_PHASE_VALUE_GE_SHIFT</span><span class="p">)</span>
		      <span class="o">||</span> <span class="p">(</span><span class="n">chipcHw_REG_DDR_PHASE_VALUE_LE_MASK</span> <span class="o">&lt;&lt;</span>
			  <span class="n">chipcHw_REG_DDR_PHASE_VALUE_LE_SHIFT</span><span class="p">));</span>

		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl1</span> <span class="o">|=</span>
		    <span class="p">((</span><span class="n">ge</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_DDR_PHASE_VALUE_GE_SHIFT</span><span class="p">)</span>
		     <span class="o">||</span> <span class="p">(</span><span class="n">le</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_DDR_PHASE_VALUE_LE_SHIFT</span><span class="p">));</span>

		<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Set VPM phase alignment margin in hardware</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span>
<span class="nf">chipcHw_setVpmHwPhaseAlignMargin</span><span class="p">(</span><span class="n">chipcHw_VPM_HW_PHASE_MARGIN_e</span> <span class="n">margin</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">ge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">le</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">margin</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">chipcHw_VPM_HW_PHASE_MARGIN_STRICT</span>:
		<span class="n">ge</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">;</span>
		<span class="n">le</span> <span class="o">=</span> <span class="mh">0x0F</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_VPM_HW_PHASE_MARGIN_MEDIUM</span>:
		<span class="n">ge</span> <span class="o">=</span> <span class="mh">0x03</span><span class="p">;</span>
		<span class="n">le</span> <span class="o">=</span> <span class="mh">0x3F</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">chipcHw_VPM_HW_PHASE_MARGIN_WIDE</span>:
		<span class="n">ge</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
		<span class="n">le</span> <span class="o">=</span> <span class="mh">0x7F</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="p">{</span>
		<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>

		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl1</span> <span class="o">&amp;=</span>
		    <span class="o">~</span><span class="p">((</span><span class="n">chipcHw_REG_VPM_PHASE_VALUE_GE_MASK</span> <span class="o">&lt;&lt;</span>
		       <span class="n">chipcHw_REG_VPM_PHASE_VALUE_GE_SHIFT</span><span class="p">)</span>
		      <span class="o">||</span> <span class="p">(</span><span class="n">chipcHw_REG_VPM_PHASE_VALUE_LE_MASK</span> <span class="o">&lt;&lt;</span>
			  <span class="n">chipcHw_REG_VPM_PHASE_VALUE_LE_SHIFT</span><span class="p">));</span>

		<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl1</span> <span class="o">|=</span>
		    <span class="p">((</span><span class="n">ge</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_VPM_PHASE_VALUE_GE_SHIFT</span><span class="p">)</span>
		     <span class="o">||</span> <span class="p">(</span><span class="n">le</span> <span class="o">&lt;&lt;</span> <span class="n">chipcHw_REG_VPM_PHASE_VALUE_LE_SHIFT</span><span class="p">));</span>

		<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Checks DDR phase aligned status done by HW</span>
<span class="cm">*</span>
<span class="cm">*  @return  1: When aligned</span>
<span class="cm">*           0: When not aligned</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_isDdrHwPhaseAligned</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		<span class="n">PhaseAlignStatus</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_DDR_PHASE_ALIGNED</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Checks VPM phase aligned status done by HW</span>
<span class="cm">*</span>
<span class="cm">*  @return  1: When aligned</span>
<span class="cm">*           0: When not aligned</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_isVpmHwPhaseAligned</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		<span class="n">PhaseAlignStatus</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_VPM_PHASE_ALIGNED</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get DDR phase aligned status done by HW</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getDdrHwPhaseAlignStatus</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		<span class="n">PhaseAlignStatus</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_DDR_PHASE_STATUS_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
	    <span class="n">chipcHw_REG_DDR_PHASE_STATUS_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get VPM phase aligned status done by HW</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getVpmHwPhaseAlignStatus</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		<span class="n">PhaseAlignStatus</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_VPM_PHASE_STATUS_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
	    <span class="n">chipcHw_REG_VPM_PHASE_STATUS_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get DDR phase control value</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getDdrPhaseControl</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		<span class="n">PhaseAlignStatus</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_DDR_PHASE_CTRL_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
	    <span class="n">chipcHw_REG_DDR_PHASE_CTRL_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Get VPM phase control value</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">uint32_t</span> <span class="nf">chipcHw_getVpmPhaseControl</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">pChipcHw</span><span class="o">-&gt;</span>
		<span class="n">PhaseAlignStatus</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_VPM_PHASE_CTRL_MASK</span><span class="p">)</span> <span class="o">&gt;&gt;</span>
	    <span class="n">chipcHw_REG_VPM_PHASE_CTRL_SHIFT</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   DDR phase alignment timeout count</span>
<span class="cm">*</span>
<span class="cm">*  @note    If HW fails to perform the phase alignment, it will trigger</span>
<span class="cm">*           a DDR phase alignment timeout interrupt.</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrHwPhaseAlignTimeout</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">busCycle</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl2</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_DDR_PHASE_TIMEOUT_COUNT_MASK</span> <span class="o">&lt;&lt;</span>
	      <span class="n">chipcHw_REG_DDR_PHASE_TIMEOUT_COUNT_SHIFT</span><span class="p">);</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl2</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="n">busCycle</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_DDR_PHASE_TIMEOUT_COUNT_MASK</span><span class="p">)</span> <span class="o">&lt;&lt;</span>
	    <span class="n">chipcHw_REG_DDR_PHASE_TIMEOUT_COUNT_SHIFT</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   VPM phase alignment timeout count</span>
<span class="cm">*</span>
<span class="cm">*  @note    If HW fails to perform the phase alignment, it will trigger</span>
<span class="cm">*           a VPM phase alignment timeout interrupt.</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmHwPhaseAlignTimeout</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">busCycle</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">&amp;=</span>
	    <span class="o">~</span><span class="p">(</span><span class="n">chipcHw_REG_VPM_PHASE_TIMEOUT_COUNT_MASK</span> <span class="o">&lt;&lt;</span>
	      <span class="n">chipcHw_REG_VPM_PHASE_TIMEOUT_COUNT_SHIFT</span><span class="p">);</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">|=</span>
	    <span class="p">(</span><span class="n">busCycle</span> <span class="o">&amp;</span> <span class="n">chipcHw_REG_VPM_PHASE_TIMEOUT_COUNT_MASK</span><span class="p">)</span> <span class="o">&lt;&lt;</span>
	    <span class="n">chipcHw_REG_VPM_PHASE_TIMEOUT_COUNT_SHIFT</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Clear DDR phase alignment timeout interrupt</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrHwPhaseAlignTimeoutInterruptClear</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="cm">/* Clear timeout interrupt service bit */</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl2</span> <span class="o">|=</span> <span class="n">chipcHw_REG_DDR_INTR_SERVICED</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl2</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_DDR_INTR_SERVICED</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   Clear VPM phase alignment timeout interrupt</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmHwPhaseAlignTimeoutInterruptClear</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="cm">/* Clear timeout interrupt service bit */</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">|=</span> <span class="n">chipcHw_REG_VPM_INTR_SERVICED</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_VPM_INTR_SERVICED</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   DDR phase alignment timeout interrupt enable</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrHwPhaseAlignTimeoutInterruptEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">chipcHw_ddrHwPhaseAlignTimeoutInterruptClear</span><span class="p">();</span>	<span class="cm">/* Recommended */</span>
	<span class="cm">/* Enable timeout interrupt */</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl2</span> <span class="o">|=</span> <span class="n">chipcHw_REG_DDR_TIMEOUT_INTR_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   VPM phase alignment timeout interrupt enable</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmHwPhaseAlignTimeoutInterruptEnable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">chipcHw_vpmHwPhaseAlignTimeoutInterruptClear</span><span class="p">();</span>	<span class="cm">/* Recommended */</span>
	<span class="cm">/* Enable timeout interrupt */</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">|=</span> <span class="n">chipcHw_REG_VPM_TIMEOUT_INTR_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   DDR phase alignment timeout interrupt disable</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_ddrHwPhaseAlignTimeoutInterruptDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">DDRPhaseCtrl2</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_DDR_TIMEOUT_INTR_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/****************************************************************************/</span>
<span class="cm">/**</span>
<span class="cm">*  @brief   VPM phase alignment timeout interrupt disable</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="cm">/****************************************************************************/</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">chipcHw_vpmHwPhaseAlignTimeoutInterruptDisable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">REG_LOCAL_IRQ_SAVE</span><span class="p">;</span>
	<span class="n">pChipcHw</span><span class="o">-&gt;</span><span class="n">VPMPhaseCtrl2</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">chipcHw_REG_VPM_TIMEOUT_INTR_ENABLE</span><span class="p">;</span>
	<span class="n">REG_LOCAL_IRQ_RESTORE</span><span class="p">;</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* CHIPC_INLINE_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:6}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../../javascript/docco.min.js"></script>
</html>
