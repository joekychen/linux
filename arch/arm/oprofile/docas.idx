f | common.c | s | 2.7K | 103 | Vladimir Zapolskiy | vladimir.zapolskiy@nokia.com | 1324637914 |  | oprofile, arm/sh: Fix oprofile_arch_exit() linkage issue  This change fixes a linking problem, which happens if oprofile is selected to be compiled as built-in:    `oprofile_arch_exit' referenced in section `.init.text' of   arch/arm/oprofile/built-in.o: defined in discarded section   `.exit.text' of arch/arm/oprofile/built-in.o  The problem is appeared after commit 87121ca504, which introduced oprofile_arch_exit() calls from __init function. Note that the aforementioned commit has been backported to stable branches, and the problem is known to be reproduced at least with 3.0.13 and 3.1.5 kernels.  Signed-off-by: Vladimir Zapolskiy <vladimir.zapolskiy@nokia.com> Signed-off-by: Robert Richter <robert.richter@amd.com> Cc: Will Deacon <will.deacon@arm.com> Cc: oprofile-list <oprofile-list@lists.sourceforge.net> Cc: <stable@kernel.org> Link: http://lkml.kernel.org/r/20111222151540.GB16765@erda.amd.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | Makefile | g | 374B |  | Matt Fleming | matt@console-pimps.org | 1286811976 |  | oprofile: Abstract the perf-events backend  Move the perf-events backend from arch/arm/oprofile into drivers/oprofile so that the code can be shared between architectures.  This allows each architecture to maintain only a single copy of the PMU accessor functions instead of one for both perf and OProfile. It also becomes possible for other architectures to delete much of their OProfile code in favour of the common code now available in drivers/oprofile/oprofile_perf.c.  Signed-off-by: Matt Fleming <matt@console-pimps.org> Tested-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Robert Richter <robert.richter@amd.com>
