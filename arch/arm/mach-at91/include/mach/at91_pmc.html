<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-at91 › include › mach › at91_pmc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>at91_pmc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * arch/arm/mach-at91/include/mach/at91_pmc.h</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2005 Ivan Kokshaysky</span>
<span class="cm"> * Copyright (C) SAN People</span>
<span class="cm"> *</span>
<span class="cm"> * Power Management Controller (PMC) - System peripherals registers.</span>
<span class="cm"> * Based on AT91RM9200 datasheet revision E.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef AT91_PMC_H</span>
<span class="cp">#define AT91_PMC_H</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">at91_pmc_base</span><span class="p">;</span>

<span class="cp">#define at91_pmc_read(field) \</span>
<span class="cp">	__raw_readl(at91_pmc_base + field)</span>

<span class="cp">#define at91_pmc_write(field, value) \</span>
<span class="cp">	__raw_writel(value, at91_pmc_base + field)</span>
<span class="cp">#else</span>
<span class="p">.</span><span class="k">extern</span> <span class="n">at91_pmc_base</span>
<span class="cp">#endif</span>

<span class="cp">#define	AT91_PMC_SCER		0x00			</span><span class="cm">/* System Clock Enable Register */</span><span class="cp"></span>
<span class="cp">#define	AT91_PMC_SCDR		0x04			</span><span class="cm">/* System Clock Disable Register */</span><span class="cp"></span>

<span class="cp">#define	AT91_PMC_SCSR		0x08			</span><span class="cm">/* System Clock Status Register */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK		(1 &lt;&lt;  0)		</span><span class="cm">/* Processor Clock */</span><span class="cp"></span>
<span class="cp">#define		AT91RM9200_PMC_UDP	(1 &lt;&lt;  1)		</span><span class="cm">/* USB Devcice Port Clock [AT91RM9200 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91RM9200_PMC_MCKUDP	(1 &lt;&lt;  2)		</span><span class="cm">/* USB Device Port Master Clock Automatic Disable on Suspend [AT91RM9200 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91RM9200_PMC_UHP	(1 &lt;&lt;  4)		</span><span class="cm">/* USB Host Port Clock [AT91RM9200 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91SAM926x_PMC_UHP	(1 &lt;&lt;  6)		</span><span class="cm">/* USB Host Port Clock [AT91SAM926x only] */</span><span class="cp"></span>
<span class="cp">#define		AT91SAM926x_PMC_UDP	(1 &lt;&lt;  7)		</span><span class="cm">/* USB Devcice Port Clock [AT91SAM926x only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK0		(1 &lt;&lt;  8)		</span><span class="cm">/* Programmable Clock 0 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK1		(1 &lt;&lt;  9)		</span><span class="cm">/* Programmable Clock 1 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK2		(1 &lt;&lt; 10)		</span><span class="cm">/* Programmable Clock 2 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK3		(1 &lt;&lt; 11)		</span><span class="cm">/* Programmable Clock 3 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK4		(1 &lt;&lt; 12)		</span><span class="cm">/* Programmable Clock 4 [AT572D940HF only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_HCK0		(1 &lt;&lt; 16)		</span><span class="cm">/* AHB Clock (USB host) [AT91SAM9261 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_HCK1		(1 &lt;&lt; 17)		</span><span class="cm">/* AHB Clock (LCD) [AT91SAM9261 only] */</span><span class="cp"></span>

<span class="cp">#define	AT91_PMC_PCER		0x10			</span><span class="cm">/* Peripheral Clock Enable Register */</span><span class="cp"></span>
<span class="cp">#define	AT91_PMC_PCDR		0x14			</span><span class="cm">/* Peripheral Clock Disable Register */</span><span class="cp"></span>
<span class="cp">#define	AT91_PMC_PCSR		0x18			</span><span class="cm">/* Peripheral Clock Status Register */</span><span class="cp"></span>

<span class="cp">#define	AT91_CKGR_UCKR		0x1C			</span><span class="cm">/* UTMI Clock Register [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_UPLLEN		(1   &lt;&lt; 16)		</span><span class="cm">/* UTMI PLL Enable */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_UPLLCOUNT	(0xf &lt;&lt; 20)		</span><span class="cm">/* UTMI PLL Start-up Time */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_BIASEN		(1   &lt;&lt; 24)		</span><span class="cm">/* UTMI BIAS Enable */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_BIASCOUNT	(0xf &lt;&lt; 28)		</span><span class="cm">/* UTMI BIAS Start-up Time */</span><span class="cp"></span>

<span class="cp">#define	AT91_CKGR_MOR		0x20			</span><span class="cm">/* Main Oscillator Register [not on SAM9RL] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MOSCEN		(1    &lt;&lt;  0)		</span><span class="cm">/* Main Oscillator Enable */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_OSCBYPASS	(1    &lt;&lt;  1)		</span><span class="cm">/* Oscillator Bypass */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MOSCRCEN	(1    &lt;&lt;  3)		</span><span class="cm">/* Main On-Chip RC Oscillator Enable [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_OSCOUNT	(0xff &lt;&lt;  8)		</span><span class="cm">/* Main Oscillator Start-up Time */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_KEY		(0x37 &lt;&lt; 16)		</span><span class="cm">/* MOR Writing Key */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MOSCSEL	(1    &lt;&lt; 24)		</span><span class="cm">/* Main Oscillator Selection [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_CFDEN		(1    &lt;&lt; 25)		</span><span class="cm">/* Clock Failure Detector Enable [some SAM9] */</span><span class="cp"></span>

<span class="cp">#define	AT91_CKGR_MCFR		0x24			</span><span class="cm">/* Main Clock Frequency Register */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MAINF		(0xffff &lt;&lt;  0)		</span><span class="cm">/* Main Clock Frequency */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MAINRDY	(1	&lt;&lt; 16)		</span><span class="cm">/* Main Clock Ready */</span><span class="cp"></span>

<span class="cp">#define	AT91_CKGR_PLLAR		0x28			</span><span class="cm">/* PLL A Register */</span><span class="cp"></span>
<span class="cp">#define	AT91_CKGR_PLLBR		0x2c			</span><span class="cm">/* PLL B Register */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_DIV		(0xff  &lt;&lt;  0)		</span><span class="cm">/* Divider */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PLLCOUNT	(0x3f  &lt;&lt;  8)		</span><span class="cm">/* PLL Counter */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_OUT		(3     &lt;&lt; 14)		</span><span class="cm">/* PLL Clock Frequency Range */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MUL		(0x7ff &lt;&lt; 16)		</span><span class="cm">/* PLL Multiplier */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_USBDIV		(3     &lt;&lt; 28)		</span><span class="cm">/* USB Divisor (PLLB only) */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_USBDIV_1		(0 &lt;&lt; 28)</span>
<span class="cp">#define			AT91_PMC_USBDIV_2		(1 &lt;&lt; 28)</span>
<span class="cp">#define			AT91_PMC_USBDIV_4		(2 &lt;&lt; 28)</span>
<span class="cp">#define		AT91_PMC_USB96M		(1     &lt;&lt; 28)		</span><span class="cm">/* Divider by 2 Enable (PLLB only) */</span><span class="cp"></span>

<span class="cp">#define	AT91_PMC_MCKR		0x30			</span><span class="cm">/* Master Clock Register */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_CSS		(3 &lt;&lt;  0)		</span><span class="cm">/* Master Clock Selection */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_CSS_SLOW		(0 &lt;&lt; 0)</span>
<span class="cp">#define			AT91_PMC_CSS_MAIN		(1 &lt;&lt; 0)</span>
<span class="cp">#define			AT91_PMC_CSS_PLLA		(2 &lt;&lt; 0)</span>
<span class="cp">#define			AT91_PMC_CSS_PLLB		(3 &lt;&lt; 0)</span>
<span class="cp">#define			AT91_PMC_CSS_UPLL		(3 &lt;&lt; 0)	</span><span class="cm">/* [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define		PMC_PRES_OFFSET		2</span>
<span class="cp">#define		AT91_PMC_PRES		(7 &lt;&lt;  PMC_PRES_OFFSET)		</span><span class="cm">/* Master Clock Prescaler */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_PRES_1			(0 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_PRES_2			(1 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_PRES_4			(2 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_PRES_8			(3 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_PRES_16		(4 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_PRES_32		(5 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_PRES_64		(6 &lt;&lt; PMC_PRES_OFFSET)</span>
<span class="cp">#define		PMC_ALT_PRES_OFFSET	4</span>
<span class="cp">#define		AT91_PMC_ALT_PRES	(7 &lt;&lt;  PMC_ALT_PRES_OFFSET)		</span><span class="cm">/* Master Clock Prescaler [alternate location] */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_ALT_PRES_1		(0 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_ALT_PRES_2		(1 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_ALT_PRES_4		(2 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_ALT_PRES_8		(3 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_ALT_PRES_16		(4 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_ALT_PRES_32		(5 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define			AT91_PMC_ALT_PRES_64		(6 &lt;&lt; PMC_ALT_PRES_OFFSET)</span>
<span class="cp">#define		AT91_PMC_MDIV		(3 &lt;&lt;  8)		</span><span class="cm">/* Master Clock Division */</span><span class="cp"></span>
<span class="cp">#define			AT91RM9200_PMC_MDIV_1		(0 &lt;&lt; 8)	</span><span class="cm">/* [AT91RM9200 only] */</span><span class="cp"></span>
<span class="cp">#define			AT91RM9200_PMC_MDIV_2		(1 &lt;&lt; 8)</span>
<span class="cp">#define			AT91RM9200_PMC_MDIV_3		(2 &lt;&lt; 8)</span>
<span class="cp">#define			AT91RM9200_PMC_MDIV_4		(3 &lt;&lt; 8)</span>
<span class="cp">#define			AT91SAM9_PMC_MDIV_1		(0 &lt;&lt; 8)	</span><span class="cm">/* [SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define			AT91SAM9_PMC_MDIV_2		(1 &lt;&lt; 8)</span>
<span class="cp">#define			AT91SAM9_PMC_MDIV_4		(2 &lt;&lt; 8)</span>
<span class="cp">#define			AT91SAM9_PMC_MDIV_6		(3 &lt;&lt; 8)	</span><span class="cm">/* [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define			AT91SAM9_PMC_MDIV_3		(3 &lt;&lt; 8)	</span><span class="cm">/* [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PDIV		(1 &lt;&lt; 12)		</span><span class="cm">/* Processor Clock Division [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_PDIV_1			(0 &lt;&lt; 12)</span>
<span class="cp">#define			AT91_PMC_PDIV_2			(1 &lt;&lt; 12)</span>
<span class="cp">#define		AT91_PMC_PLLADIV2	(1 &lt;&lt; 12)		</span><span class="cm">/* PLLA divisor by 2 [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_PLLADIV2_OFF		(0 &lt;&lt; 12)</span>
<span class="cp">#define			AT91_PMC_PLLADIV2_ON		(1 &lt;&lt; 12)</span>

<span class="cp">#define	AT91_PMC_USB		0x38			</span><span class="cm">/* USB Clock Register [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_USBS		(0x1 &lt;&lt;  0)		</span><span class="cm">/* USB OHCI Input clock selection */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_USBS_PLLA		(0 &lt;&lt; 0)</span>
<span class="cp">#define			AT91_PMC_USBS_UPLL		(1 &lt;&lt; 0)</span>
<span class="cp">#define		AT91_PMC_OHCIUSBDIV	(0xF &lt;&lt;  8)		</span><span class="cm">/* Divider for USB OHCI Clock */</span><span class="cp"></span>

<span class="cp">#define	AT91_PMC_SMD		0x3c			</span><span class="cm">/* Soft Modem Clock Register [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_SMDS		(0x1  &lt;&lt;  0)		</span><span class="cm">/* SMD input clock selection */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_SMD_DIV	(0x1f &lt;&lt;  8)		</span><span class="cm">/* SMD input clock divider */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_SMDDIV(n)	(((n) &lt;&lt;  8) &amp; AT91_PMC_SMD_DIV)</span>

<span class="cp">#define	AT91_PMC_PCKR(n)	(0x40 + ((n) * 4))	</span><span class="cm">/* Programmable Clock 0-N Registers */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_ALT_PCKR_CSS	(0x7 &lt;&lt;  0)		</span><span class="cm">/* Programmable Clock Source Selection [alternate length] */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_CSS_MASTER		(4 &lt;&lt; 0)	</span><span class="cm">/* [some SAM9 only] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_CSSMCK		(0x1 &lt;&lt;  8)		</span><span class="cm">/* CSS or Master Clock Selection */</span><span class="cp"></span>
<span class="cp">#define			AT91_PMC_CSSMCK_CSS		(0 &lt;&lt; 8)</span>
<span class="cp">#define			AT91_PMC_CSSMCK_MCK		(1 &lt;&lt; 8)</span>

<span class="cp">#define	AT91_PMC_IER		0x60			</span><span class="cm">/* Interrupt Enable Register */</span><span class="cp"></span>
<span class="cp">#define	AT91_PMC_IDR		0x64			</span><span class="cm">/* Interrupt Disable Register */</span><span class="cp"></span>
<span class="cp">#define	AT91_PMC_SR		0x68			</span><span class="cm">/* Status Register */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MOSCS		(1 &lt;&lt;  0)		</span><span class="cm">/* MOSCS Flag */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_LOCKA		(1 &lt;&lt;  1)		</span><span class="cm">/* PLLA Lock */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_LOCKB		(1 &lt;&lt;  2)		</span><span class="cm">/* PLLB Lock */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MCKRDY		(1 &lt;&lt;  3)		</span><span class="cm">/* Master Clock */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_LOCKU		(1 &lt;&lt;  6)		</span><span class="cm">/* UPLL Lock [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK0RDY	(1 &lt;&lt;  8)		</span><span class="cm">/* Programmable Clock 0 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK1RDY	(1 &lt;&lt;  9)		</span><span class="cm">/* Programmable Clock 1 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK2RDY	(1 &lt;&lt; 10)		</span><span class="cm">/* Programmable Clock 2 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCK3RDY	(1 &lt;&lt; 11)		</span><span class="cm">/* Programmable Clock 3 */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MOSCSELS	(1 &lt;&lt; 16)		</span><span class="cm">/* Main Oscillator Selection [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_MOSCRCS	(1 &lt;&lt; 17)		</span><span class="cm">/* Main On-Chip RC [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_CFDEV		(1 &lt;&lt; 18)		</span><span class="cm">/* Clock Failure Detector Event [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define	AT91_PMC_IMR		0x6c			</span><span class="cm">/* Interrupt Mask Register */</span><span class="cp"></span>

<span class="cp">#define AT91_PMC_PROT		0xe4			</span><span class="cm">/* Write Protect Mode Register [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_WPEN		(0x1  &lt;&lt;  0)		</span><span class="cm">/* Write Protect Enable */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_WPKEY		(0xffffff &lt;&lt; 8)		</span><span class="cm">/* Write Protect Key */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PROTKEY	(0x504d43 &lt;&lt; 8)		</span><span class="cm">/* Activation Code */</span><span class="cp"></span>

<span class="cp">#define AT91_PMC_WPSR		0xe8			</span><span class="cm">/* Write Protect Status Register [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_WPVS		(0x1  &lt;&lt;  0)		</span><span class="cm">/* Write Protect Violation Status */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_WPVSRC		(0xffff  &lt;&lt;  8)		</span><span class="cm">/* Write Protect Violation Source */</span><span class="cp"></span>

<span class="cp">#define AT91_PMC_PCR		0x10c			</span><span class="cm">/* Peripheral Control Register [some SAM9] */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCR_PID	(0x3f  &lt;&lt;  0)		</span><span class="cm">/* Peripheral ID */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCR_CMD	(0x1  &lt;&lt;  12)		</span><span class="cm">/* Command */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCR_DIV	(0x3  &lt;&lt;  16)		</span><span class="cm">/* Divisor Value */</span><span class="cp"></span>
<span class="cp">#define		AT91_PMC_PCRDIV(n)	(((n) &lt;&lt;  16) &amp; AT91_PMC_PCR_DIV)</span>
<span class="cp">#define		AT91_PMC_PCR_EN		(0x1  &lt;&lt;  28)		</span><span class="cm">/* Enable */</span><span class="cp"></span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
