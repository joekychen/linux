<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-at91 › board-yl-9200.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>board-yl-9200.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * linux/arch/arm/mach-at91/board-yl-9200.c</span>
<span class="cm"> *</span>
<span class="cm"> * Adapted from various board files in arch/arm/mach-at91</span>
<span class="cm"> *</span>
<span class="cm"> * Modifications for YL-9200 platform:</span>
<span class="cm"> *  Copyright (C) 2007 S. Birtles</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> * it under the terms of the GNU General Public License as published by</span>
<span class="cm"> * the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> * (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> * This program is distributed in the hope that it will be useful,</span>
<span class="cm"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> * GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * You should have received a copy of the GNU General Public License</span>
<span class="cm"> * along with this program; if not, write to the Free Software</span>
<span class="cm"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/gpio.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/dma-mapping.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/spi/spi.h&gt;</span>
<span class="cp">#include &lt;linux/spi/ads7846.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/physmap.h&gt;</span>
<span class="cp">#include &lt;linux/gpio_keys.h&gt;</span>
<span class="cp">#include &lt;linux/input.h&gt;</span>

<span class="cp">#include &lt;asm/setup.h&gt;</span>
<span class="cp">#include &lt;asm/mach-types.h&gt;</span>
<span class="cp">#include &lt;asm/irq.h&gt;</span>

<span class="cp">#include &lt;asm/mach/arch.h&gt;</span>
<span class="cp">#include &lt;asm/mach/map.h&gt;</span>
<span class="cp">#include &lt;asm/mach/irq.h&gt;</span>

<span class="cp">#include &lt;mach/hardware.h&gt;</span>
<span class="cp">#include &lt;mach/board.h&gt;</span>
<span class="cp">#include &lt;mach/at91rm9200_mc.h&gt;</span>
<span class="cp">#include &lt;mach/at91_ramc.h&gt;</span>
<span class="cp">#include &lt;mach/cpu.h&gt;</span>

<span class="cp">#include &quot;generic.h&quot;</span>


<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_init_early</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Set cpu type: PQFP */</span>
	<span class="n">at91rm9200_set_type</span><span class="p">(</span><span class="n">ARCH_REVISON_9200_PQFP</span><span class="p">);</span>

	<span class="cm">/* Initialize processor: 18.432 MHz crystal */</span>
	<span class="n">at91_initialize</span><span class="p">(</span><span class="mi">18432000</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * LEDs</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_led</span> <span class="n">yl9200_leds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>	<span class="cm">/* D2 */</span>
		<span class="p">.</span><span class="n">name</span>			<span class="o">=</span> <span class="s">&quot;led2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>			<span class="o">=</span> <span class="n">AT91_PIN_PB17</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span>	<span class="o">=</span> <span class="s">&quot;timer&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* D3 */</span>
		<span class="p">.</span><span class="n">name</span>			<span class="o">=</span> <span class="s">&quot;led3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>			<span class="o">=</span> <span class="n">AT91_PIN_PB16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span>	<span class="o">=</span> <span class="s">&quot;heartbeat&quot;</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* D4 */</span>
		<span class="p">.</span><span class="n">name</span>			<span class="o">=</span> <span class="s">&quot;led4&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>			<span class="o">=</span> <span class="n">AT91_PIN_PB15</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* D5 */</span>
		<span class="p">.</span><span class="n">name</span>			<span class="o">=</span> <span class="s">&quot;led5&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>			<span class="o">=</span> <span class="n">AT91_PIN_PB8</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Ethernet</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">macb_platform_data</span> <span class="n">__initdata</span> <span class="n">yl9200_eth_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">phy_irq_pin</span>		<span class="o">=</span> <span class="n">AT91_PIN_PB28</span><span class="p">,</span>
	<span class="p">.</span><span class="n">is_rmii</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * USB Host</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">at91_usbh_data</span> <span class="n">__initdata</span> <span class="n">yl9200_usbh_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">ports</span>			<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* PQFP version of AT91RM9200 */</span>
	<span class="p">.</span><span class="n">vbus_pin</span>		<span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">},</span>
	<span class="p">.</span><span class="n">overcurrent_pin</span><span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * USB Device</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">at91_udc_data</span> <span class="n">__initdata</span> <span class="n">yl9200_udc_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">pullup_pin</span>		<span class="o">=</span> <span class="n">AT91_PIN_PC4</span><span class="p">,</span>
	<span class="p">.</span><span class="n">vbus_pin</span>		<span class="o">=</span> <span class="n">AT91_PIN_PC5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pullup_active_low</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* Active Low due to PNP transistor (pg 7) */</span>

<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * MMC</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">at91_mmc_data</span> <span class="n">__initdata</span> <span class="n">yl9200_mmc_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">det_pin</span>	<span class="o">=</span> <span class="n">AT91_PIN_PB9</span><span class="p">,</span>
	<span class="p">.</span><span class="n">wire4</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">wp_pin</span>		<span class="o">=</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span>
	<span class="p">.</span><span class="n">vcc_pin</span>	<span class="o">=</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * NAND Flash</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">__initdata</span> <span class="n">yl9200_nand_partition</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;AT91 NAND partition 1, boot&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>	<span class="o">=</span> <span class="n">SZ_256K</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;AT91 NAND partition 2, kernel&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>	<span class="o">=</span> <span class="n">MTDPART_OFS_NXTBLK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>	<span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">SZ_1M</span><span class="p">)</span> <span class="o">-</span> <span class="n">SZ_256K</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;AT91 NAND partition 3, filesystem&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>	<span class="o">=</span> <span class="n">MTDPART_OFS_NXTBLK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>	<span class="o">=</span> <span class="mi">14</span> <span class="o">*</span> <span class="n">SZ_1M</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;AT91 NAND partition 4, storage&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>	<span class="o">=</span> <span class="n">MTDPART_OFS_NXTBLK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>	<span class="o">=</span> <span class="n">SZ_16M</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;AT91 NAND partition 5, ext-fs&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>	<span class="o">=</span> <span class="n">MTDPART_OFS_NXTBLK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>	<span class="o">=</span> <span class="n">SZ_32M</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">atmel_nand_data</span> <span class="n">__initdata</span> <span class="n">yl9200_nand_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">ale</span>		<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">cle</span>		<span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
	<span class="p">.</span><span class="n">det_pin</span>	<span class="o">=</span> <span class="o">-</span><span class="n">EINVAL</span><span class="p">,</span>
	<span class="p">.</span><span class="n">rdy_pin</span>	<span class="o">=</span> <span class="n">AT91_PIN_PC14</span><span class="p">,</span>	<span class="cm">/* R/!B (Sheet10) */</span>
	<span class="p">.</span><span class="n">enable_pin</span>	<span class="o">=</span> <span class="n">AT91_PIN_PC15</span><span class="p">,</span>	<span class="cm">/* !CE  (Sheet10) */</span>
	<span class="p">.</span><span class="n">ecc_mode</span>	<span class="o">=</span> <span class="n">NAND_ECC_SOFT</span><span class="p">,</span>
	<span class="p">.</span><span class="n">parts</span>		<span class="o">=</span> <span class="n">yl9200_nand_partition</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_parts</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_nand_partition</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * NOR Flash</span>
<span class="cm"> */</span>
<span class="cp">#define YL9200_FLASH_BASE	AT91_CHIPSELECT_0</span>
<span class="cp">#define YL9200_FLASH_SIZE	SZ_16M</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">yl9200_flash_partitions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Bootloader&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>		<span class="o">=</span> <span class="n">SZ_256K</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mask_flags</span>	<span class="o">=</span> <span class="n">MTD_WRITEABLE</span><span class="p">,</span>	<span class="cm">/* force read-only */</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Kernel&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>		<span class="o">=</span> <span class="n">MTDPART_OFS_NXTBLK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>		<span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">SZ_1M</span><span class="p">)</span> <span class="o">-</span> <span class="n">SZ_256K</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Filesystem&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>		<span class="o">=</span> <span class="n">MTDPART_OFS_NXTBLK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>		<span class="o">=</span> <span class="n">MTDPART_SIZ_FULL</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">physmap_flash_data</span> <span class="n">yl9200_flash_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">width</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">parts</span>		<span class="o">=</span> <span class="n">yl9200_flash_partitions</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_parts</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_flash_partitions</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">yl9200_flash_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">YL9200_FLASH_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="n">YL9200_FLASH_BASE</span> <span class="o">+</span> <span class="n">YL9200_FLASH_SIZE</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">yl9200_flash</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;physmap-flash&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>		<span class="o">=</span> <span class="p">{</span>
				<span class="p">.</span><span class="n">platform_data</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">yl9200_flash_data</span><span class="p">,</span>
			<span class="p">},</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">yl9200_flash_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_flash_resources</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * I2C (TWI)</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">yl9200_i2c_devices</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>	<span class="cm">/* EEPROM */</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;24c128&quot;</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">),</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * GPIO Buttons</span>
<span class="cm">*/</span>
<span class="cp">#if defined(CONFIG_KEYBOARD_GPIO) || defined(CONFIG_KEYBOARD_GPIO_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">yl9200_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">gpio</span>		<span class="o">=</span> <span class="n">AT91_PIN_PA24</span><span class="p">,</span>
		<span class="p">.</span><span class="n">code</span>		<span class="o">=</span> <span class="n">BTN_2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>		<span class="o">=</span> <span class="s">&quot;SW2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">gpio</span>		<span class="o">=</span> <span class="n">AT91_PIN_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">code</span>		<span class="o">=</span> <span class="n">BTN_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>		<span class="o">=</span> <span class="s">&quot;SW3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">gpio</span>		<span class="o">=</span> <span class="n">AT91_PIN_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">code</span>		<span class="o">=</span> <span class="n">BTN_4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>		<span class="o">=</span> <span class="s">&quot;SW4&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">gpio</span>		<span class="o">=</span> <span class="n">AT91_PIN_PB6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">code</span>		<span class="o">=</span> <span class="n">BTN_5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>		<span class="o">=</span> <span class="s">&quot;SW5&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">yl9200_button_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>	<span class="o">=</span> <span class="n">yl9200_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">yl9200_button_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">yl9200_button_data</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_add_device_buttons</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">at91_set_gpio_input</span><span class="p">(</span><span class="n">AT91_PIN_PA24</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* SW2 */</span>
	<span class="n">at91_set_deglitch</span><span class="p">(</span><span class="n">AT91_PIN_PA24</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">at91_set_gpio_input</span><span class="p">(</span><span class="n">AT91_PIN_PB1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* SW3 */</span>
	<span class="n">at91_set_deglitch</span><span class="p">(</span><span class="n">AT91_PIN_PB1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">at91_set_gpio_input</span><span class="p">(</span><span class="n">AT91_PIN_PB2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* SW4 */</span>
	<span class="n">at91_set_deglitch</span><span class="p">(</span><span class="n">AT91_PIN_PB2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">at91_set_gpio_input</span><span class="p">(</span><span class="n">AT91_PIN_PB6</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* SW5 */</span>
	<span class="n">at91_set_deglitch</span><span class="p">(</span><span class="n">AT91_PIN_PB6</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="cm">/* Enable buttons (Sheet 5) */</span>
	<span class="n">at91_set_gpio_output</span><span class="p">(</span><span class="n">AT91_PIN_PB7</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_button_device</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_add_device_buttons</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * Touchscreen</span>
<span class="cm"> */</span>
<span class="cp">#if defined(CONFIG_TOUCHSCREEN_ADS7846) || defined(CONFIG_TOUCHSCREEN_ADS7846_MODULE)</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">ads7843_pendown_state</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="o">!</span><span class="n">at91_get_gpio_value</span><span class="p">(</span><span class="n">AT91_PIN_PB11</span><span class="p">);</span>	<span class="cm">/* Touchscreen PENIRQ */</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">ads7846_platform_data</span> <span class="n">ads_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">model</span>			<span class="o">=</span> <span class="mi">7843</span><span class="p">,</span>
	<span class="p">.</span><span class="n">x_min</span>			<span class="o">=</span> <span class="mi">150</span><span class="p">,</span>
	<span class="p">.</span><span class="n">x_max</span>			<span class="o">=</span> <span class="mi">3830</span><span class="p">,</span>
	<span class="p">.</span><span class="n">y_min</span>			<span class="o">=</span> <span class="mi">190</span><span class="p">,</span>
	<span class="p">.</span><span class="n">y_max</span>			<span class="o">=</span> <span class="mi">3830</span><span class="p">,</span>
	<span class="p">.</span><span class="n">vref_delay_usecs</span>	<span class="o">=</span> <span class="mi">100</span><span class="p">,</span>

	<span class="cm">/* For a 8&quot; touch-screen */</span></pre></div></td></tr>


<tr id="section-2"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-2">&#182;</a></div><p>.x<em>plate</em>ohms        = 603,
.y<em>plate</em>ohms        = 332,</p></td><td class="code"><div class="highlight"><pre>	<span class="cm">/* For a 10.4&quot; touch-screen */</span></pre></div></td></tr>


<tr id="section-3"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-3">&#182;</a></div><p>.x<em>plate</em>ohms        = 611,
.y<em>plate</em>ohms        = 325,</p></td><td class="code"><div class="highlight"><pre>	<span class="p">.</span><span class="n">x_plate_ohms</span>		<span class="o">=</span> <span class="mi">576</span><span class="p">,</span>
	<span class="p">.</span><span class="n">y_plate_ohms</span>		<span class="o">=</span> <span class="mi">366</span><span class="p">,</span>

	<span class="p">.</span><span class="n">pressure_max</span>		<span class="o">=</span> <span class="mi">15000</span><span class="p">,</span> <span class="cm">/* generally nonsense on the 7843 */</span>
	<span class="p">.</span><span class="n">debounce_max</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">debounce_rep</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">debounce_tol</span>		<span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="mi">0</span><span class="p">),</span>
	<span class="p">.</span><span class="n">get_pendown_state</span>	<span class="o">=</span> <span class="n">ads7843_pendown_state</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_add_device_ts</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">at91_set_gpio_input</span><span class="p">(</span><span class="n">AT91_PIN_PB11</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* Touchscreen interrupt pin */</span>
	<span class="n">at91_set_gpio_input</span><span class="p">(</span><span class="n">AT91_PIN_PB10</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>	<span class="cm">/* Touchscreen BUSY signal - not used! */</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_add_device_ts</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * SPI devices</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">spi_board_info</span> <span class="n">yl9200_spi_devices</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#if defined(CONFIG_TOUCHSCREEN_ADS7846) || defined(CONFIG_TOUCHSCREEN_ADS7846_MODULE)</span>
	<span class="p">{</span>	<span class="cm">/* Touchscreen */</span>
		<span class="p">.</span><span class="n">modalias</span>	<span class="o">=</span> <span class="s">&quot;ads7846&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span>	<span class="o">=</span> <span class="mi">5000</span> <span class="o">*</span> <span class="mi">26</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">ads_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span>		<span class="o">=</span> <span class="n">AT91_PIN_PB11</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
	<span class="p">{</span>	<span class="cm">/* CAN */</span>
		<span class="p">.</span><span class="n">modalias</span>	<span class="o">=</span> <span class="s">&quot;mcp2510&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span>	<span class="o">=</span> <span class="mi">25000</span> <span class="o">*</span> <span class="mi">26</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span>		<span class="o">=</span> <span class="n">AT91_PIN_PC0</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * LCD / VGA</span>
<span class="cm"> *</span>
<span class="cm"> * EPSON S1D13806 FB (discontinued chip)</span>
<span class="cm"> * EPSON S1D13506 FB</span>
<span class="cm"> */</span>
<span class="cp">#if defined(CONFIG_FB_S1D13XXX) || defined(CONFIG_FB_S1D13XXX_MODULE)</span>
<span class="cp">#include &lt;video/s1d13xxxfb.h&gt;</span>


<span class="k">static</span> <span class="kt">void</span> <span class="nf">yl9200_init_video</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* NWAIT Signal */</span>
	<span class="n">at91_set_A_periph</span><span class="p">(</span><span class="n">AT91_PIN_PC6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="cm">/* Initialization of the Static Memory Controller for Chip Select 2 */</span>
	<span class="n">at91_ramc_write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">AT91_SMC_CSR</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">AT91_SMC_DBW_16</span>		<span class="cm">/* 16 bit */</span>
			<span class="o">|</span> <span class="n">AT91_SMC_WSEN</span> <span class="o">|</span> <span class="n">AT91_SMC_NWS_</span><span class="p">(</span><span class="mh">0x4</span><span class="p">)</span>	<span class="cm">/* wait states */</span>
			<span class="o">|</span> <span class="n">AT91_SMC_TDF_</span><span class="p">(</span><span class="mh">0x100</span><span class="p">)</span>			<span class="cm">/* float time */</span>
	<span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">s1d13xxxfb_regval</span> <span class="n">yl9200_s1dfb_initregs</span><span class="p">[]</span> <span class="o">=</span>
<span class="p">{</span>
	<span class="p">{</span><span class="n">S1DREG_MISC</span><span class="p">,</span>			<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* Miscellaneous Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_COM_DISP_MODE</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* Display Mode Register, LCD only*/</span>
	<span class="p">{</span><span class="n">S1DREG_GPIO_CNF0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* General IO Pins Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_GPIO_CTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* General IO Pins Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CLK_CNF</span><span class="p">,</span>		<span class="mh">0x11</span><span class="p">},</span>	<span class="cm">/* Memory Clock Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CLK_CNF</span><span class="p">,</span>		<span class="mh">0x10</span><span class="p">},</span>	<span class="cm">/* LCD Pixel Clock Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CLK_CNF</span><span class="p">,</span>		<span class="mh">0x12</span><span class="p">},</span>	<span class="cm">/* CRT/TV Pixel Clock Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_MPLUG_CLK_CNF</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* MediaPlug Clock Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CPU2MEM_WST_SEL</span><span class="p">,</span>	<span class="mh">0x02</span><span class="p">},</span>	<span class="cm">/* CPU To Memory Wait State Select Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_MEM_CNF</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* Memory Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_SDRAM_REF_RATE</span><span class="p">,</span>		<span class="mh">0x04</span><span class="p">},</span>	<span class="cm">/* DRAM Refresh Rate Register, MCLK source*/</span>
	<span class="p">{</span><span class="n">S1DREG_SDRAM_TC0</span><span class="p">,</span>		<span class="mh">0x12</span><span class="p">},</span>	<span class="cm">/* DRAM Timings Control Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_SDRAM_TC1</span><span class="p">,</span>		<span class="mh">0x02</span><span class="p">},</span>	<span class="cm">/* DRAM Timings Control Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_PANEL_TYPE</span><span class="p">,</span>		<span class="mh">0x25</span><span class="p">},</span>	<span class="cm">/* Panel Type Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_MOD_RATE</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* MOD Rate Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_HWIDTH</span><span class="p">,</span>	<span class="mh">0x4F</span><span class="p">},</span>	<span class="cm">/* LCD Horizontal Display Width Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_NDISP_HPER</span><span class="p">,</span>		<span class="mh">0x13</span><span class="p">},</span>	<span class="cm">/* LCD Horizontal Non-Display Period Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_TFT_FPLINE_START</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* TFT FPLINE Start Position Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_TFT_FPLINE_PWIDTH</span><span class="p">,</span>	<span class="mh">0x0c</span><span class="p">},</span>	<span class="cm">/* TFT FPLINE Pulse Width Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_VHEIGHT0</span><span class="p">,</span>	<span class="mh">0xDF</span><span class="p">},</span>	<span class="cm">/* LCD Vertical Display Height Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_VHEIGHT1</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* LCD Vertical Display Height Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_NDISP_VPER</span><span class="p">,</span>		<span class="mh">0x2c</span><span class="p">},</span>	<span class="cm">/* LCD Vertical Non-Display Period Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_TFT_FPFRAME_START</span><span class="p">,</span>	<span class="mh">0x0a</span><span class="p">},</span>	<span class="cm">/* TFT FPFRAME Start Position Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_TFT_FPFRAME_PWIDTH</span><span class="p">,</span>	<span class="mh">0x02</span><span class="p">},</span>	<span class="cm">/* TFT FPFRAME Pulse Width Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_MODE</span><span class="p">,</span>		<span class="mh">0x05</span><span class="p">},</span>	<span class="cm">/* LCD Display Mode Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_MISC</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* LCD Miscellaneous Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_START0</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Display Start Address Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_START1</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Display Start Address Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_START2</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Display Start Address Register 2*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_MEM_OFF0</span><span class="p">,</span>		<span class="mh">0x80</span><span class="p">},</span>	<span class="cm">/* LCD Memory Address Offset Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_MEM_OFF1</span><span class="p">,</span>		<span class="mh">0x02</span><span class="p">},</span>	<span class="cm">/* LCD Memory Address Offset Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_PIX_PAN</span><span class="p">,</span>		<span class="mh">0x03</span><span class="p">},</span>	<span class="cm">/* LCD Pixel Panning Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_FIFO_HTC</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Display FIFO High Threshold Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_DISP_FIFO_LTC</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Display FIFO Low Threshold Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_HWIDTH</span><span class="p">,</span>	<span class="mh">0x4F</span><span class="p">},</span>	<span class="cm">/* CRT/TV Horizontal Display Width Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_NDISP_HPER</span><span class="p">,</span>		<span class="mh">0x13</span><span class="p">},</span>	<span class="cm">/* CRT/TV Horizontal Non-Display Period Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_HRTC_START</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* CRT/TV HRTC Start Position Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_HRTC_PWIDTH</span><span class="p">,</span>	<span class="mh">0x0B</span><span class="p">},</span>	<span class="cm">/* CRT/TV HRTC Pulse Width Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_VHEIGHT0</span><span class="p">,</span>	<span class="mh">0xDF</span><span class="p">},</span>	<span class="cm">/* CRT/TV Vertical Display Height Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_VHEIGHT1</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* CRT/TV Vertical Display Height Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_NDISP_VPER</span><span class="p">,</span>		<span class="mh">0x2B</span><span class="p">},</span>	<span class="cm">/* CRT/TV Vertical Non-Display Period Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_VRTC_START</span><span class="p">,</span>		<span class="mh">0x09</span><span class="p">},</span>	<span class="cm">/* CRT/TV VRTC Start Position Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_VRTC_PWIDTH</span><span class="p">,</span>	<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* CRT/TV VRTC Pulse Width Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_TV_OUT_CTL</span><span class="p">,</span>		<span class="mh">0x18</span><span class="p">},</span>	<span class="cm">/* TV Output Control Register */</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_MODE</span><span class="p">,</span>		<span class="mh">0x05</span><span class="p">},</span>	<span class="cm">/* CRT/TV Display Mode Register, 16BPP*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_START0</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Display Start Address Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_START1</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Display Start Address Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_START2</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Display Start Address Register 2*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_MEM_OFF0</span><span class="p">,</span>		<span class="mh">0x80</span><span class="p">},</span>	<span class="cm">/* CRT/TV Memory Address Offset Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_MEM_OFF1</span><span class="p">,</span>		<span class="mh">0x02</span><span class="p">},</span>	<span class="cm">/* CRT/TV Memory Address Offset Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_PIX_PAN</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Pixel Panning Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_FIFO_HTC</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Display FIFO High Threshold Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_DISP_FIFO_LTC</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Display FIFO Low Threshold Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_CTL</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_START</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Start Address Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_XPOS0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Cursor X Position Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_XPOS1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Cursor X Position Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_YPOS0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Cursor Y Position Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_YPOS1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Cursor Y Position Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_BCTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Blue Color 0 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_GCTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Green Color 0 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_RCTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Red Color 0 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_BCTL1</span><span class="p">,</span>		<span class="mh">0x1F</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Blue Color 1 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_GCTL1</span><span class="p">,</span>		<span class="mh">0x3F</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Green Color 1 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_RCTL1</span><span class="p">,</span>		<span class="mh">0x1F</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor Red Color 1 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LCD_CUR_FIFO_HTC</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* LCD Ink/Cursor FIFO Threshold Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_CTL</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Control Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_START</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Start Address Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_XPOS0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Cursor X Position Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_XPOS1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Cursor X Position Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_YPOS0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Cursor Y Position Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_YPOS1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Cursor Y Position Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_BCTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Blue Color 0 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_GCTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Green Color 0 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_RCTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Red Color 0 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_BCTL1</span><span class="p">,</span>		<span class="mh">0x1F</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Blue Color 1 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_GCTL1</span><span class="p">,</span>		<span class="mh">0x3F</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Green Color 1 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_RCTL1</span><span class="p">,</span>		<span class="mh">0x1F</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor Red Color 1 Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CRT_CUR_FIFO_HTC</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CRT/TV Ink/Cursor FIFO Threshold Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_CTL0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Control Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_CTL1</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* BitBlt Control Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_CC_EXP</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt ROP Code/Color Expansion Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_OP</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Operation Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_SRC_START0</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Source Start Address Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_SRC_START1</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Source Start Address Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_SRC_START2</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Source Start Address Register 2*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_DST_START0</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Destination Start Address Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_DST_START1</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Destination Start Address Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_DST_START2</span><span class="p">,</span>	<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Destination Start Address Register 2*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_MEM_OFF0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Memory Address Offset Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_MEM_OFF1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Memory Address Offset Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_WIDTH0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Width Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_WIDTH1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Width Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_HEIGHT0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Height Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_HEIGHT1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Height Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_BGC0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Background Color Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_BGC1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Background Color Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_FGC0</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Foreground Color Register 0*/</span>
	<span class="p">{</span><span class="n">S1DREG_BBLT_FGC1</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* BitBlt Foreground Color Register 1*/</span>
	<span class="p">{</span><span class="n">S1DREG_LKUP_MODE</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* Look-Up Table Mode Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_LKUP_ADDR</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* Look-Up Table Address Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_PS_CNF</span><span class="p">,</span>			<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* Power Save Configuration Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_PS_STATUS</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* Power Save Status Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_CPU2MEM_WDOGT</span><span class="p">,</span>		<span class="mh">0x00</span><span class="p">},</span>	<span class="cm">/* CPU-to-Memory Access Watchdog Timer Register*/</span>
	<span class="p">{</span><span class="n">S1DREG_COM_DISP_MODE</span><span class="p">,</span>		<span class="mh">0x01</span><span class="p">},</span>	<span class="cm">/* Display Mode Register, LCD only*/</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">s1d13xxxfb_pdata</span> <span class="n">yl9200_s1dfb_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">initregs</span>		<span class="o">=</span> <span class="n">yl9200_s1dfb_initregs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">initregssize</span>		<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_s1dfb_initregs</span><span class="p">),</span>
	<span class="p">.</span><span class="n">platform_init_video</span>	<span class="o">=</span> <span class="n">yl9200_init_video</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define YL9200_FB_REG_BASE	AT91_CHIPSELECT_7</span>
<span class="cp">#define YL9200_FB_VMEM_BASE	YL9200_FB_REG_BASE + SZ_2M</span>
<span class="cp">#define YL9200_FB_VMEM_SIZE	SZ_2M</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">yl9200_s1dfb_resource</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>	<span class="cm">/* video mem */</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;s1d13xxxfb memory&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">YL9200_FB_VMEM_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="n">YL9200_FB_VMEM_BASE</span> <span class="o">+</span> <span class="n">YL9200_FB_VMEM_SIZE</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>	<span class="cm">/* video registers */</span>
		<span class="p">.</span><span class="n">name</span>	<span class="o">=</span> <span class="s">&quot;s1d13xxxfb registers&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">YL9200_FB_REG_BASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="n">YL9200_FB_REG_BASE</span> <span class="o">+</span> <span class="n">SZ_512</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="n">u64</span> <span class="n">s1dfb_dmamask</span> <span class="o">=</span> <span class="n">DMA_BIT_MASK</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">yl9200_s1dfb_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;s1d13806fb&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>	<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">dma_mask</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">s1dfb_dmamask</span><span class="p">,</span>
		<span class="p">.</span><span class="n">coherent_dma_mask</span>	<span class="o">=</span> <span class="n">DMA_BIT_MASK</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span>
		<span class="p">.</span><span class="n">platform_data</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">yl9200_s1dfb_pdata</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">yl9200_s1dfb_resource</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_s1dfb_resource</span><span class="p">),</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_add_device_video</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_s1dfb_device</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_add_device_video</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>
<span class="cp">#endif</span>


<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">yl9200_board_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* Setup the LEDs D2=PB17 (timer), D3=PB16 (cpu) */</span>
	<span class="n">at91_init_leds</span><span class="p">(</span><span class="n">AT91_PIN_PB16</span><span class="p">,</span> <span class="n">AT91_PIN_PB17</span><span class="p">);</span>

	<span class="cm">/* Serial */</span>
	<span class="cm">/* DBGU on ttyS0. (Rx &amp; Tx only) */</span>
	<span class="n">at91_register_uart</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="cm">/* USART1 on ttyS1. (Rx, Tx, CTS, RTS, DTR, DSR, DCD, RI) */</span>
	<span class="n">at91_register_uart</span><span class="p">(</span><span class="n">AT91RM9200_ID_US1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ATMEL_UART_CTS</span> <span class="o">|</span> <span class="n">ATMEL_UART_RTS</span>
			<span class="o">|</span> <span class="n">ATMEL_UART_DTR</span> <span class="o">|</span> <span class="n">ATMEL_UART_DSR</span> <span class="o">|</span> <span class="n">ATMEL_UART_DCD</span>
			<span class="o">|</span> <span class="n">ATMEL_UART_RI</span><span class="p">);</span>

	<span class="cm">/* USART0 on ttyS2. (Rx &amp; Tx only to JP3) */</span>
	<span class="n">at91_register_uart</span><span class="p">(</span><span class="n">AT91RM9200_ID_US0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="cm">/* USART3 on ttyS3. (Rx, Tx, RTS - RS485 interface) */</span>
	<span class="n">at91_register_uart</span><span class="p">(</span><span class="n">AT91RM9200_ID_US3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ATMEL_UART_RTS</span><span class="p">);</span>
	<span class="n">at91_add_device_serial</span><span class="p">();</span>
	<span class="cm">/* Ethernet */</span>
	<span class="n">at91_add_device_eth</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_eth_data</span><span class="p">);</span>
	<span class="cm">/* USB Host */</span>
	<span class="n">at91_add_device_usbh</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_usbh_data</span><span class="p">);</span>
	<span class="cm">/* USB Device */</span>
	<span class="n">at91_add_device_udc</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_udc_data</span><span class="p">);</span>
	<span class="cm">/* I2C */</span>
	<span class="n">at91_add_device_i2c</span><span class="p">(</span><span class="n">yl9200_i2c_devices</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_i2c_devices</span><span class="p">));</span>
	<span class="cm">/* MMC */</span>
	<span class="n">at91_add_device_mmc</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">yl9200_mmc_data</span><span class="p">);</span>
	<span class="cm">/* NAND */</span>
	<span class="n">at91_add_device_nand</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_nand_data</span><span class="p">);</span>
	<span class="cm">/* NOR Flash */</span>
	<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">yl9200_flash</span><span class="p">);</span>
<span class="cp">#if defined(CONFIG_SPI_ATMEL) || defined(CONFIG_SPI_ATMEL_MODULE)</span>
	<span class="cm">/* SPI */</span>
	<span class="n">at91_add_device_spi</span><span class="p">(</span><span class="n">yl9200_spi_devices</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_spi_devices</span><span class="p">));</span>
	<span class="cm">/* Touchscreen */</span>
	<span class="n">yl9200_add_device_ts</span><span class="p">();</span>
<span class="cp">#endif</span>
	<span class="cm">/* LEDs. */</span>
	<span class="n">at91_gpio_leds</span><span class="p">(</span><span class="n">yl9200_leds</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">yl9200_leds</span><span class="p">));</span>
	<span class="cm">/* Push Buttons */</span>
	<span class="n">yl9200_add_device_buttons</span><span class="p">();</span>
	<span class="cm">/* VGA */</span>
	<span class="n">yl9200_add_device_video</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">YL9200</span><span class="p">,</span> <span class="s">&quot;uCdragon YL-9200&quot;</span><span class="p">)</span>
	<span class="cm">/* Maintainer: S.Birtles */</span>
	<span class="p">.</span><span class="n">timer</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">at91rm9200_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>		<span class="o">=</span> <span class="n">at91_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_early</span>	<span class="o">=</span> <span class="n">yl9200_init_early</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>	<span class="o">=</span> <span class="n">at91_init_irq_default</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>	<span class="o">=</span> <span class="n">yl9200_board_init</span><span class="p">,</span>
<span class="n">MACHINE_END</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
