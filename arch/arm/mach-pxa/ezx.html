<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-pxa › ezx.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>ezx.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  ezx.c - Common code for the EZX platform.</span>
<span class="cm"> *</span>
<span class="cm"> *  Copyright (C) 2005-2006 Harald Welte &lt;laforge@openezx.org&gt;,</span>
<span class="cm"> *		  2007-2008 Daniel Ribeiro &lt;drwyrm@gmail.com&gt;,</span>
<span class="cm"> *		  2007-2008 Stefan Schmidt &lt;stefan@datenfreihafen.org&gt;</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License version 2 as</span>
<span class="cm"> *  published by the Free Software Foundation.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/pwm_backlight.h&gt;</span>
<span class="cp">#include &lt;linux/input.h&gt;</span>
<span class="cp">#include &lt;linux/gpio.h&gt;</span>
<span class="cp">#include &lt;linux/gpio_keys.h&gt;</span>
<span class="cp">#include &lt;linux/leds-lp3944.h&gt;</span>
<span class="cp">#include &lt;linux/i2c/pxa-i2c.h&gt;</span>

<span class="cp">#include &lt;media/soc_camera.h&gt;</span>

<span class="cp">#include &lt;asm/setup.h&gt;</span>
<span class="cp">#include &lt;asm/mach-types.h&gt;</span>
<span class="cp">#include &lt;asm/mach/arch.h&gt;</span>

<span class="cp">#include &lt;mach/pxa27x.h&gt;</span>
<span class="cp">#include &lt;mach/pxafb.h&gt;</span>
<span class="cp">#include &lt;mach/ohci.h&gt;</span>
<span class="cp">#include &lt;mach/hardware.h&gt;</span>
<span class="cp">#include &lt;plat/pxa27x_keypad.h&gt;</span>
<span class="cp">#include &lt;mach/camera.h&gt;</span>

<span class="cp">#include &quot;devices.h&quot;</span>
<span class="cp">#include &quot;generic.h&quot;</span>

<span class="cp">#define EZX_NR_IRQS			(IRQ_BOARD_START + 24)</span>

<span class="cp">#define GPIO12_A780_FLIP_LID 		12</span>
<span class="cp">#define GPIO15_A1200_FLIP_LID 		15</span>
<span class="cp">#define GPIO15_A910_FLIP_LID 		15</span>
<span class="cp">#define GPIO12_E680_LOCK_SWITCH 	12</span>
<span class="cp">#define GPIO15_E6_LOCK_SWITCH 		15</span>
<span class="cp">#define GPIO50_nCAM_EN			50</span>
<span class="cp">#define GPIO19_GEN1_CAM_RST		19</span>
<span class="cp">#define GPIO28_GEN2_CAM_RST		28</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_pwm_backlight_data</span> <span class="n">ezx_backlight_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">pwm_id</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">max_brightness</span>	<span class="o">=</span> <span class="mi">1023</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dft_brightness</span>	<span class="o">=</span> <span class="mi">1023</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pwm_period_ns</span>	<span class="o">=</span> <span class="mi">78770</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">ezx_backlight_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;pwm-backlight&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">parent</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa27x_device_pwm0</span><span class="p">.</span><span class="n">dev</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ezx_backlight_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxafb_mode_info</span> <span class="n">mode_ezx_old</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">pixclock</span>		<span class="o">=</span> <span class="mi">150000</span><span class="p">,</span>
	<span class="p">.</span><span class="n">xres</span>			<span class="o">=</span> <span class="mi">240</span><span class="p">,</span>
	<span class="p">.</span><span class="n">yres</span>			<span class="o">=</span> <span class="mi">320</span><span class="p">,</span>
	<span class="p">.</span><span class="n">bpp</span>			<span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hsync_len</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">left_margin</span>		<span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="p">.</span><span class="n">right_margin</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">vsync_len</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">upper_margin</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">lower_margin</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sync</span>			<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxafb_mach_info</span> <span class="n">ezx_fb_info_1</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">modes</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">mode_ezx_old</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_modes</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">lcd_conn</span>	<span class="o">=</span> <span class="n">LCD_COLOR_TFT_16BPP</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxafb_mode_info</span> <span class="n">mode_72r89803y01</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">pixclock</span>		<span class="o">=</span> <span class="mi">192308</span><span class="p">,</span>
	<span class="p">.</span><span class="n">xres</span>			<span class="o">=</span> <span class="mi">240</span><span class="p">,</span>
	<span class="p">.</span><span class="n">yres</span>			<span class="o">=</span> <span class="mi">320</span><span class="p">,</span>
	<span class="p">.</span><span class="n">bpp</span>			<span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
	<span class="p">.</span><span class="n">depth</span>			<span class="o">=</span> <span class="mi">18</span><span class="p">,</span>
	<span class="p">.</span><span class="n">hsync_len</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">left_margin</span>		<span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
	<span class="p">.</span><span class="n">right_margin</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">vsync_len</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">upper_margin</span>		<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">lower_margin</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">sync</span>			<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxafb_mach_info</span> <span class="n">ezx_fb_info_2</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">modes</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">mode_72r89803y01</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_modes</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">lcd_conn</span>	<span class="o">=</span> <span class="n">LCD_COLOR_TFT_18BPP</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">ezx_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">ezx_backlight_device</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ezx_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* PWM backlight */</span>
	<span class="n">GPIO16_PWM0_OUT</span><span class="p">,</span>

	<span class="cm">/* BTUART */</span>
	<span class="n">GPIO42_BTUART_RXD</span><span class="p">,</span>
	<span class="n">GPIO43_BTUART_TXD</span><span class="p">,</span>
	<span class="n">GPIO44_BTUART_CTS</span><span class="p">,</span>
	<span class="n">GPIO45_BTUART_RTS</span><span class="p">,</span>

	<span class="cm">/* I2C */</span>
	<span class="n">GPIO117_I2C_SCL</span><span class="p">,</span>
	<span class="n">GPIO118_I2C_SDA</span><span class="p">,</span>

	<span class="cm">/* PCAP SSP */</span>
	<span class="n">GPIO29_SSP1_SCLK</span><span class="p">,</span>
	<span class="n">GPIO25_SSP1_TXD</span><span class="p">,</span>
	<span class="n">GPIO26_SSP1_RXD</span><span class="p">,</span>
	<span class="n">GPIO24_GPIO</span><span class="p">,</span>				<span class="cm">/* pcap chip select */</span>
	<span class="n">GPIO1_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_RISE</span><span class="p">,</span>	<span class="cm">/* pcap interrupt */</span>
	<span class="n">GPIO4_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* WDI_AP */</span>
	<span class="n">GPIO55_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* SYS_RESTART */</span>

	<span class="cm">/* MMC */</span>
	<span class="n">GPIO32_MMC_CLK</span><span class="p">,</span>
	<span class="n">GPIO92_MMC_DAT_0</span><span class="p">,</span>
	<span class="n">GPIO109_MMC_DAT_1</span><span class="p">,</span>
	<span class="n">GPIO110_MMC_DAT_2</span><span class="p">,</span>
	<span class="n">GPIO111_MMC_DAT_3</span><span class="p">,</span>
	<span class="n">GPIO112_MMC_CMD</span><span class="p">,</span>
	<span class="n">GPIO11_GPIO</span><span class="p">,</span>				<span class="cm">/* mmc detect */</span>

	<span class="cm">/* usb to external transceiver */</span>
	<span class="n">GPIO34_USB_P2_2</span><span class="p">,</span>
	<span class="n">GPIO35_USB_P2_1</span><span class="p">,</span>
	<span class="n">GPIO36_USB_P2_4</span><span class="p">,</span>
	<span class="n">GPIO39_USB_P2_6</span><span class="p">,</span>
	<span class="n">GPIO40_USB_P2_5</span><span class="p">,</span>
	<span class="n">GPIO53_USB_P2_3</span><span class="p">,</span>

	<span class="cm">/* usb to Neptune GSM chip */</span>
	<span class="n">GPIO30_USB_P3_2</span><span class="p">,</span>
	<span class="n">GPIO31_USB_P3_6</span><span class="p">,</span>
	<span class="n">GPIO90_USB_P3_5</span><span class="p">,</span>
	<span class="n">GPIO91_USB_P3_1</span><span class="p">,</span>
	<span class="n">GPIO56_USB_P3_4</span><span class="p">,</span>
	<span class="n">GPIO113_USB_P3_3</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_MACH_EZX_A780) || defined(CONFIG_MACH_EZX_E680)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">gen1_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* flip / lockswitch */</span>
	<span class="n">GPIO12_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_BOTH</span><span class="p">,</span>

	<span class="cm">/* bluetooth (bcm2035) */</span>
	<span class="n">GPIO14_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_RISE</span><span class="p">,</span>	<span class="cm">/* HOSTWAKE */</span>
	<span class="n">GPIO48_GPIO</span><span class="p">,</span>				<span class="cm">/* RESET */</span>
	<span class="n">GPIO28_GPIO</span><span class="p">,</span>				<span class="cm">/* WAKEUP */</span>

	<span class="cm">/* Neptune handshake */</span>
	<span class="n">GPIO0_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_FALL</span><span class="p">,</span>	<span class="cm">/* BP_RDY */</span>
	<span class="n">GPIO57_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* AP_RDY */</span>
	<span class="n">GPIO13_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_BOTH</span><span class="p">,</span>	<span class="cm">/* WDI */</span>
	<span class="n">GPIO3_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_BOTH</span><span class="p">,</span>	<span class="cm">/* WDI2 */</span>
	<span class="n">GPIO82_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* RESET */</span>
	<span class="n">GPIO99_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* TC_MM_EN */</span>

	<span class="cm">/* sound */</span>
	<span class="n">GPIO52_SSP3_SCLK</span><span class="p">,</span>
	<span class="n">GPIO83_SSP3_SFRM</span><span class="p">,</span>
	<span class="n">GPIO81_SSP3_TXD</span><span class="p">,</span>
	<span class="n">GPIO89_SSP3_RXD</span><span class="p">,</span>

	<span class="cm">/* ssp2 pins to in */</span>
	<span class="n">GPIO22_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_SCLK */</span>
	<span class="n">GPIO37_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_SFRM */</span>
	<span class="n">GPIO38_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_TXD */</span>
	<span class="n">GPIO88_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_RXD */</span>

	<span class="cm">/* camera */</span>
	<span class="n">GPIO23_CIF_MCLK</span><span class="p">,</span>
	<span class="n">GPIO54_CIF_PCLK</span><span class="p">,</span>
	<span class="n">GPIO85_CIF_LV</span><span class="p">,</span>
	<span class="n">GPIO84_CIF_FV</span><span class="p">,</span>
	<span class="n">GPIO27_CIF_DD_0</span><span class="p">,</span>
	<span class="n">GPIO114_CIF_DD_1</span><span class="p">,</span>
	<span class="n">GPIO51_CIF_DD_2</span><span class="p">,</span>
	<span class="n">GPIO115_CIF_DD_3</span><span class="p">,</span>
	<span class="n">GPIO95_CIF_DD_4</span><span class="p">,</span>
	<span class="n">GPIO94_CIF_DD_5</span><span class="p">,</span>
	<span class="n">GPIO17_CIF_DD_6</span><span class="p">,</span>
	<span class="n">GPIO108_CIF_DD_7</span><span class="p">,</span>
	<span class="n">GPIO50_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* CAM_EN */</span>
	<span class="n">GPIO19_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* CAM_RST */</span>

	<span class="cm">/* EMU */</span>
	<span class="n">GPIO120_GPIO</span><span class="p">,</span>				<span class="cm">/* EMU_MUX1 */</span>
	<span class="n">GPIO119_GPIO</span><span class="p">,</span>				<span class="cm">/* EMU_MUX2 */</span>
	<span class="n">GPIO86_GPIO</span><span class="p">,</span>				<span class="cm">/* SNP_INT_CTL */</span>
	<span class="n">GPIO87_GPIO</span><span class="p">,</span>				<span class="cm">/* SNP_INT_IN */</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MACH_EZX_A1200) || defined(CONFIG_MACH_EZX_A910) || \</span>
<span class="cp">	defined(CONFIG_MACH_EZX_E2) || defined(CONFIG_MACH_EZX_E6)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">gen2_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* flip / lockswitch */</span>
	<span class="n">GPIO15_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_BOTH</span><span class="p">,</span>

	<span class="cm">/* EOC */</span>
	<span class="n">GPIO10_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_RISE</span><span class="p">,</span>

	<span class="cm">/* bluetooth (bcm2045) */</span>
	<span class="n">GPIO13_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_RISE</span><span class="p">,</span>	<span class="cm">/* HOSTWAKE */</span>
	<span class="n">GPIO37_GPIO</span><span class="p">,</span>				<span class="cm">/* RESET */</span>
	<span class="n">GPIO57_GPIO</span><span class="p">,</span>				<span class="cm">/* WAKEUP */</span>

	<span class="cm">/* Neptune handshake */</span>
	<span class="n">GPIO0_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_FALL</span><span class="p">,</span>	<span class="cm">/* BP_RDY */</span>
	<span class="n">GPIO96_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* AP_RDY */</span>
	<span class="n">GPIO3_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_EDGE_FALL</span><span class="p">,</span>	<span class="cm">/* WDI */</span>
	<span class="n">GPIO116_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* RESET */</span>
	<span class="n">GPIO41_GPIO</span><span class="p">,</span>				<span class="cm">/* BP_FLASH */</span>

	<span class="cm">/* sound */</span>
	<span class="n">GPIO52_SSP3_SCLK</span><span class="p">,</span>
	<span class="n">GPIO83_SSP3_SFRM</span><span class="p">,</span>
	<span class="n">GPIO81_SSP3_TXD</span><span class="p">,</span>
	<span class="n">GPIO82_SSP3_RXD</span><span class="p">,</span>

	<span class="cm">/* ssp2 pins to in */</span>
	<span class="n">GPIO22_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_SCLK */</span>
	<span class="n">GPIO14_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_SFRM */</span>
	<span class="n">GPIO38_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_TXD */</span>
	<span class="n">GPIO88_GPIO</span><span class="p">,</span>				<span class="cm">/* SSP2_RXD */</span>

	<span class="cm">/* camera */</span>
	<span class="n">GPIO23_CIF_MCLK</span><span class="p">,</span>
	<span class="n">GPIO54_CIF_PCLK</span><span class="p">,</span>
	<span class="n">GPIO85_CIF_LV</span><span class="p">,</span>
	<span class="n">GPIO84_CIF_FV</span><span class="p">,</span>
	<span class="n">GPIO27_CIF_DD_0</span><span class="p">,</span>
	<span class="n">GPIO114_CIF_DD_1</span><span class="p">,</span>
	<span class="n">GPIO51_CIF_DD_2</span><span class="p">,</span>
	<span class="n">GPIO115_CIF_DD_3</span><span class="p">,</span>
	<span class="n">GPIO95_CIF_DD_4</span><span class="p">,</span>
	<span class="n">GPIO48_CIF_DD_5</span><span class="p">,</span>
	<span class="n">GPIO93_CIF_DD_6</span><span class="p">,</span>
	<span class="n">GPIO12_CIF_DD_7</span><span class="p">,</span>
	<span class="n">GPIO50_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* CAM_EN */</span>
	<span class="n">GPIO28_GPIO</span> <span class="o">|</span> <span class="n">MFP_LPM_DRIVE_HIGH</span><span class="p">,</span>	<span class="cm">/* CAM_RST */</span>
	<span class="n">GPIO17_GPIO</span><span class="p">,</span>				<span class="cm">/* CAM_FLASH */</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A780</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">a780_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* keypad */</span>
	<span class="n">GPIO93_KP_DKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO100_KP_MKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO101_KP_MKIN_1</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO102_KP_MKIN_2</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO97_KP_MKIN_3</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO98_KP_MKIN_4</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO103_KP_MKOUT_0</span><span class="p">,</span>
	<span class="n">GPIO104_KP_MKOUT_1</span><span class="p">,</span>
	<span class="n">GPIO105_KP_MKOUT_2</span><span class="p">,</span>
	<span class="n">GPIO106_KP_MKOUT_3</span><span class="p">,</span>
	<span class="n">GPIO107_KP_MKOUT_4</span><span class="p">,</span>

	<span class="cm">/* attenuate sound */</span>
	<span class="n">GPIO96_GPIO</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E680</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">e680_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* keypad */</span>
	<span class="n">GPIO93_KP_DKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO96_KP_DKIN_3</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO97_KP_DKIN_4</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO98_KP_DKIN_5</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO100_KP_MKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO101_KP_MKIN_1</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO102_KP_MKIN_2</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO103_KP_MKOUT_0</span><span class="p">,</span>
	<span class="n">GPIO104_KP_MKOUT_1</span><span class="p">,</span>
	<span class="n">GPIO105_KP_MKOUT_2</span><span class="p">,</span>
	<span class="n">GPIO106_KP_MKOUT_3</span><span class="p">,</span>

	<span class="cm">/* MIDI */</span>
	<span class="n">GPIO79_GPIO</span><span class="p">,</span>				<span class="cm">/* VA_SEL_BUL */</span>
	<span class="n">GPIO80_GPIO</span><span class="p">,</span>				<span class="cm">/* FLT_SEL_BUL */</span>
	<span class="n">GPIO78_GPIO</span><span class="p">,</span>				<span class="cm">/* MIDI_RESET */</span>
	<span class="n">GPIO33_GPIO</span><span class="p">,</span>				<span class="cm">/* MIDI_CS */</span>
	<span class="n">GPIO15_GPIO</span><span class="p">,</span>				<span class="cm">/* MIDI_IRQ */</span>
	<span class="n">GPIO49_GPIO</span><span class="p">,</span>				<span class="cm">/* MIDI_NPWE */</span>
	<span class="n">GPIO18_GPIO</span><span class="p">,</span>				<span class="cm">/* MIDI_RDY */</span>

	<span class="cm">/* leds */</span>
	<span class="n">GPIO46_GPIO</span><span class="p">,</span>
	<span class="n">GPIO47_GPIO</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A1200</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">a1200_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* keypad */</span>
	<span class="n">GPIO100_KP_MKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO101_KP_MKIN_1</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO102_KP_MKIN_2</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO97_KP_MKIN_3</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO98_KP_MKIN_4</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO103_KP_MKOUT_0</span><span class="p">,</span>
	<span class="n">GPIO104_KP_MKOUT_1</span><span class="p">,</span>
	<span class="n">GPIO105_KP_MKOUT_2</span><span class="p">,</span>
	<span class="n">GPIO106_KP_MKOUT_3</span><span class="p">,</span>
	<span class="n">GPIO107_KP_MKOUT_4</span><span class="p">,</span>
	<span class="n">GPIO108_KP_MKOUT_5</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A910</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">a910_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* keypad */</span>
	<span class="n">GPIO100_KP_MKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO101_KP_MKIN_1</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO102_KP_MKIN_2</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO97_KP_MKIN_3</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO98_KP_MKIN_4</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO103_KP_MKOUT_0</span><span class="p">,</span>
	<span class="n">GPIO104_KP_MKOUT_1</span><span class="p">,</span>
	<span class="n">GPIO105_KP_MKOUT_2</span><span class="p">,</span>
	<span class="n">GPIO106_KP_MKOUT_3</span><span class="p">,</span>
	<span class="n">GPIO107_KP_MKOUT_4</span><span class="p">,</span>
	<span class="n">GPIO108_KP_MKOUT_5</span><span class="p">,</span>

	<span class="cm">/* WLAN */</span>
	<span class="n">GPIO89_GPIO</span><span class="p">,</span>				<span class="cm">/* RESET */</span>
	<span class="n">GPIO33_GPIO</span><span class="p">,</span>				<span class="cm">/* WAKEUP */</span>
	<span class="n">GPIO94_GPIO</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>	<span class="cm">/* HOSTWAKE */</span>

	<span class="cm">/* MMC CS */</span>
	<span class="n">GPIO20_GPIO</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E2</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">e2_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* keypad */</span>
	<span class="n">GPIO100_KP_MKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO101_KP_MKIN_1</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO102_KP_MKIN_2</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO97_KP_MKIN_3</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO98_KP_MKIN_4</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO103_KP_MKOUT_0</span><span class="p">,</span>
	<span class="n">GPIO104_KP_MKOUT_1</span><span class="p">,</span>
	<span class="n">GPIO105_KP_MKOUT_2</span><span class="p">,</span>
	<span class="n">GPIO106_KP_MKOUT_3</span><span class="p">,</span>
	<span class="n">GPIO107_KP_MKOUT_4</span><span class="p">,</span>
	<span class="n">GPIO108_KP_MKOUT_5</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E6</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">e6_pin_config</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* keypad */</span>
	<span class="n">GPIO100_KP_MKIN_0</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO101_KP_MKIN_1</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO102_KP_MKIN_2</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO97_KP_MKIN_3</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO98_KP_MKIN_4</span> <span class="o">|</span> <span class="n">WAKEUP_ON_LEVEL_HIGH</span><span class="p">,</span>
	<span class="n">GPIO103_KP_MKOUT_0</span><span class="p">,</span>
	<span class="n">GPIO104_KP_MKOUT_1</span><span class="p">,</span>
	<span class="n">GPIO105_KP_MKOUT_2</span><span class="p">,</span>
	<span class="n">GPIO106_KP_MKOUT_3</span><span class="p">,</span>
	<span class="n">GPIO107_KP_MKOUT_4</span><span class="p">,</span>
	<span class="n">GPIO108_KP_MKOUT_5</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cm">/* KEYPAD */</span>
<span class="cp">#ifdef CONFIG_MACH_EZX_A780</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">a780_key_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_SEND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_BACK</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_END</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PAGEUP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_1</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_NUMERIC_2</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_3</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_SELECT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_KPENTER</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_4</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_NUMERIC_5</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_6</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RECORD</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_7</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_NUMERIC_8</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_9</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_HOME</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_STAR</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_NUMERIC_0</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_POUND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PAGEDOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxa27x_keypad_platform_data</span> <span class="n">a780_keypad_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">matrix_key_rows</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_cols</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map</span> <span class="o">=</span> <span class="n">a780_key_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map_size</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">a780_key_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">direct_key_map</span> <span class="o">=</span> <span class="p">{</span> <span class="n">KEY_CAMERA</span> <span class="p">},</span>
	<span class="p">.</span><span class="n">direct_key_num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>

	<span class="p">.</span><span class="n">debounce_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_EZX_A780 */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E680</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">e680_key_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_SEND</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEUP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PAGEDOWN</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_KPENTER</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxa27x_keypad_platform_data</span> <span class="n">e680_keypad_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">matrix_key_rows</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_cols</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map</span> <span class="o">=</span> <span class="n">e680_key_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map_size</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">e680_key_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">direct_key_map</span> <span class="o">=</span> <span class="p">{</span>
		<span class="n">KEY_CAMERA</span><span class="p">,</span>
		<span class="n">KEY_RESERVED</span><span class="p">,</span>
		<span class="n">KEY_RESERVED</span><span class="p">,</span>
		<span class="n">KEY_F1</span><span class="p">,</span>
		<span class="n">KEY_CANCEL</span><span class="p">,</span>
		<span class="n">KEY_F2</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">direct_key_num</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>

	<span class="p">.</span><span class="n">debounce_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_EZX_E680 */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A1200</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">a1200_key_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEDOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_CAMERA</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_KPENTER</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RECORD</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_SELECT</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_SEND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEUP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxa27x_keypad_platform_data</span> <span class="n">a1200_keypad_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">matrix_key_rows</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_cols</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map</span> <span class="o">=</span> <span class="n">a1200_key_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map_size</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">a1200_key_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">debounce_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_EZX_A1200 */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E6</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">e6_key_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEDOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_NEXTSONG</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PROG1</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_ENTER</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_CAMERA</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_WWW</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_SEND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_PLAYPAUSE</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEUP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_PREVIOUSSONG</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxa27x_keypad_platform_data</span> <span class="n">e6_keypad_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">matrix_key_rows</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_cols</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map</span> <span class="o">=</span> <span class="n">e6_key_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map_size</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">e6_key_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">debounce_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_EZX_E6 */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A910</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">a910_key_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_6</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEDOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_KPENTER</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_5</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_CAMERA</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_8</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_F1</span><span class="p">),</span> <span class="cm">/* Left SoftKey */</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_STAR</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_7</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_NUMERIC_9</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RECORD</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_F2</span><span class="p">),</span> <span class="cm">/* Right SoftKey */</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_BACK</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_SELECT</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_2</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_SEND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_NUMERIC_0</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_1</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RECORD</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_4</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_PAGEUP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_NUMERIC_POUND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_3</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxa27x_keypad_platform_data</span> <span class="n">a910_keypad_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">matrix_key_rows</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_cols</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map</span> <span class="o">=</span> <span class="n">a910_key_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map_size</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">a910_key_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">debounce_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_EZX_A910 */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E2</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">e2_key_map</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_6</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_RIGHT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_9</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_NEXTSONG</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_5</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_F1</span><span class="p">),</span> <span class="cm">/* Left SoftKey */</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_8</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_DOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PAGEUP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_STAR</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_F2</span><span class="p">),</span> <span class="cm">/* Right SoftKey */</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_7</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_KPENTER</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_RECORD</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PAGEDOWN</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_BACK</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_NUMERIC_0</span><span class="p">),</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_2</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_UP</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_SEND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PLAYPAUSE</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_1</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_SOUND</span><span class="p">),</span> <span class="cm">/* Music SoftKey */</span>

	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">KEY_NUMERIC_4</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">KEY_LEFT</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">KEY_NUMERIC_POUND</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">KEY_PREVIOUSSONG</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">KEY_NUMERIC_3</span><span class="p">),</span>
	<span class="n">KEY</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">KEY_RESERVED</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">pxa27x_keypad_platform_data</span> <span class="n">e2_keypad_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">matrix_key_rows</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_cols</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map</span> <span class="o">=</span> <span class="n">e2_key_map</span><span class="p">,</span>
	<span class="p">.</span><span class="n">matrix_key_map_size</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">e2_key_map</span><span class="p">),</span>

	<span class="p">.</span><span class="n">debounce_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_MACH_EZX_E2 */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A780</span>
<span class="cm">/* gpio_keys */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">a780_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">code</span>       <span class="o">=</span> <span class="n">SW_LID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>       <span class="o">=</span> <span class="n">GPIO12_A780_FLIP_LID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>       <span class="o">=</span> <span class="s">&quot;A780 flip lid&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>       <span class="o">=</span> <span class="n">EV_SW</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">a780_gpio_keys_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>  <span class="o">=</span> <span class="n">a780_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">a780_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">a780_gpio_keys</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a780_gpio_keys_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* camera */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">a780_camera_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * GPIO50_nCAM_EN is active low</span>
<span class="cm">	 * GPIO19_GEN1_CAM_RST is active on rising edge</span>
<span class="cm">	 */</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">,</span> <span class="s">&quot;nCAM_EN&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;%s: Failed to request nCAM_EN</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">err</span> <span class="o">=</span> <span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO19_GEN1_CAM_RST</span><span class="p">,</span> <span class="s">&quot;CAM_RST&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;%s: Failed to request CAM_RST</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">fail_gpio_cam_rst</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO19_GEN1_CAM_RST</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">fail_gpio_cam_rst:</span>
	<span class="n">gpio_free</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">);</span>
<span class="nl">fail:</span>
	<span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">a780_camera_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">on</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">,</span> <span class="o">!</span><span class="n">on</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">a780_camera_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO19_GEN1_CAM_RST</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO19_GEN1_CAM_RST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">pxacamera_platform_data</span> <span class="n">a780_pxacamera_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">PXA_CAMERA_MASTER</span> <span class="o">|</span> <span class="n">PXA_CAMERA_DATAWIDTH_8</span> <span class="o">|</span>
		<span class="n">PXA_CAMERA_PCLK_EN</span> <span class="o">|</span> <span class="n">PXA_CAMERA_MCLK_EN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mclk_10khz</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">a780_camera_i2c_board_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;mt9m111&quot;</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">soc_camera_link</span> <span class="n">a780_iclink</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">bus_id</span>         <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span>          <span class="o">=</span> <span class="n">SOCAM_SENSOR_INVERT_PCLK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">i2c_adapter_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">board_info</span>     <span class="o">=</span> <span class="o">&amp;</span><span class="n">a780_camera_i2c_board_info</span><span class="p">,</span>
	<span class="p">.</span><span class="n">power</span>          <span class="o">=</span> <span class="n">a780_camera_power</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reset</span>          <span class="o">=</span> <span class="n">a780_camera_reset</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">a780_camera</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;soc-camera-pdrv&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>    <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a780_iclink</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">a780_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">a780_gpio_keys</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">a780_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">gen1_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a780_pin_config</span><span class="p">));</span>

	<span class="n">pxa_set_ffuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_btuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_stuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_i2c_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_fb_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ezx_fb_info_1</span><span class="p">);</span>

	<span class="n">pxa_set_keypad_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a780_keypad_platform_data</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">a780_camera_init</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pxa_set_camera_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a780_pxacamera_platform_data</span><span class="p">);</span>
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a780_camera</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_devices</span><span class="p">));</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a780_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">EZX_A780</span><span class="p">,</span> <span class="s">&quot;Motorola EZX A780&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">atag_offset</span>    <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>         <span class="o">=</span> <span class="n">pxa27x_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">EZX_NR_IRQS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>       <span class="o">=</span> <span class="n">pxa27x_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>       <span class="o">=</span> <span class="n">pxa27x_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>   <span class="o">=</span> <span class="n">a780_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restart</span>	<span class="o">=</span> <span class="n">pxa_restart</span><span class="p">,</span>
<span class="n">MACHINE_END</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E680</span>
<span class="cm">/* gpio_keys */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">e680_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">code</span>       <span class="o">=</span> <span class="n">KEY_SCREENLOCK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>       <span class="o">=</span> <span class="n">GPIO12_E680_LOCK_SWITCH</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>       <span class="o">=</span> <span class="s">&quot;E680 lock switch&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>       <span class="o">=</span> <span class="n">EV_KEY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">e680_gpio_keys_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>  <span class="o">=</span> <span class="n">e680_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">e680_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">e680_gpio_keys</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">e680_gpio_keys_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">e680_i2c_board_info</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;tea5767&quot;</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">)</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">e680_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">e680_gpio_keys</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">e680_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">gen1_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e680_pin_config</span><span class="p">));</span>

	<span class="n">pxa_set_ffuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_btuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_stuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_i2c_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e680_i2c_board_info</span><span class="p">));</span>

	<span class="n">pxa_set_fb_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ezx_fb_info_1</span><span class="p">);</span>

	<span class="n">pxa_set_keypad_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">e680_keypad_platform_data</span><span class="p">);</span>

	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_devices</span><span class="p">));</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e680_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">EZX_E680</span><span class="p">,</span> <span class="s">&quot;Motorola EZX E680&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">atag_offset</span>    <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>         <span class="o">=</span> <span class="n">pxa27x_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">EZX_NR_IRQS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>       <span class="o">=</span> <span class="n">pxa27x_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>       <span class="o">=</span> <span class="n">pxa27x_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>   <span class="o">=</span> <span class="n">e680_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restart</span>	<span class="o">=</span> <span class="n">pxa_restart</span><span class="p">,</span>
<span class="n">MACHINE_END</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A1200</span>
<span class="cm">/* gpio_keys */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">a1200_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">code</span>       <span class="o">=</span> <span class="n">SW_LID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>       <span class="o">=</span> <span class="n">GPIO15_A1200_FLIP_LID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>       <span class="o">=</span> <span class="s">&quot;A1200 flip lid&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>       <span class="o">=</span> <span class="n">EV_SW</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">a1200_gpio_keys_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>  <span class="o">=</span> <span class="n">a1200_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">a1200_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">a1200_gpio_keys</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a1200_gpio_keys_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">a1200_i2c_board_info</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;tea5767&quot;</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">)</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">a1200_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">a1200_gpio_keys</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">a1200_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">gen2_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a1200_pin_config</span><span class="p">));</span>

	<span class="n">pxa_set_ffuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_btuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_stuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_i2c_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a1200_i2c_board_info</span><span class="p">));</span>

	<span class="n">pxa_set_fb_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ezx_fb_info_2</span><span class="p">);</span>

	<span class="n">pxa_set_keypad_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a1200_keypad_platform_data</span><span class="p">);</span>

	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_devices</span><span class="p">));</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a1200_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">EZX_A1200</span><span class="p">,</span> <span class="s">&quot;Motorola EZX A1200&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">atag_offset</span>    <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>         <span class="o">=</span> <span class="n">pxa27x_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">EZX_NR_IRQS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>       <span class="o">=</span> <span class="n">pxa27x_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>       <span class="o">=</span> <span class="n">pxa27x_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>   <span class="o">=</span> <span class="n">a1200_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restart</span>	<span class="o">=</span> <span class="n">pxa_restart</span><span class="p">,</span>
<span class="n">MACHINE_END</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_A910</span>
<span class="cm">/* gpio_keys */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">a910_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">code</span>       <span class="o">=</span> <span class="n">SW_LID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>       <span class="o">=</span> <span class="n">GPIO15_A910_FLIP_LID</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>       <span class="o">=</span> <span class="s">&quot;A910 flip lid&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>       <span class="o">=</span> <span class="n">EV_SW</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">a910_gpio_keys_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>  <span class="o">=</span> <span class="n">a910_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">a910_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">a910_gpio_keys</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a910_gpio_keys_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* camera */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">a910_camera_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">err</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * GPIO50_nCAM_EN is active low</span>
<span class="cm">	 * GPIO28_GEN2_CAM_RST is active on rising edge</span>
<span class="cm">	 */</span>
	<span class="n">err</span> <span class="o">=</span> <span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">,</span> <span class="s">&quot;nCAM_EN&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;%s: Failed to request nCAM_EN</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">err</span> <span class="o">=</span> <span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO28_GEN2_CAM_RST</span><span class="p">,</span> <span class="s">&quot;CAM_RST&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pr_err</span><span class="p">(</span><span class="s">&quot;%s: Failed to request CAM_RST</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">fail_gpio_cam_rst</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO28_GEN2_CAM_RST</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">fail_gpio_cam_rst:</span>
	<span class="n">gpio_free</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">);</span>
<span class="nl">fail:</span>
	<span class="k">return</span> <span class="n">err</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">a910_camera_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">on</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO50_nCAM_EN</span><span class="p">,</span> <span class="o">!</span><span class="n">on</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">a910_camera_reset</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO28_GEN2_CAM_RST</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">msleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO28_GEN2_CAM_RST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">pxacamera_platform_data</span> <span class="n">a910_pxacamera_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">PXA_CAMERA_MASTER</span> <span class="o">|</span> <span class="n">PXA_CAMERA_DATAWIDTH_8</span> <span class="o">|</span>
		<span class="n">PXA_CAMERA_PCLK_EN</span> <span class="o">|</span> <span class="n">PXA_CAMERA_MCLK_EN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mclk_10khz</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">a910_camera_i2c_board_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;mt9m111&quot;</span><span class="p">,</span> <span class="mh">0x5d</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">soc_camera_link</span> <span class="n">a910_iclink</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">bus_id</span>         <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">i2c_adapter_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">board_info</span>     <span class="o">=</span> <span class="o">&amp;</span><span class="n">a910_camera_i2c_board_info</span><span class="p">,</span>
	<span class="p">.</span><span class="n">power</span>          <span class="o">=</span> <span class="n">a910_camera_power</span><span class="p">,</span>
	<span class="p">.</span><span class="n">reset</span>          <span class="o">=</span> <span class="n">a910_camera_reset</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">a910_camera</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;soc-camera-pdrv&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>    <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a910_iclink</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* leds-lp3944 */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">lp3944_platform_data</span> <span class="n">a910_lp3944_leds</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">leds_size</span> <span class="o">=</span> <span class="n">LP3944_LEDS_MAX</span><span class="p">,</span>
	<span class="p">.</span><span class="n">leds</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910:red:&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_OFF</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910:green:&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_OFF</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910:blue:&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_OFF</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="cm">/* Leds 3 and 4 are used as display power switches */</span>
		<span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910::cli_display&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_OFF</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED_INVERTED</span>
		<span class="p">},</span>
		<span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910::main_display&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_ON</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED_INVERTED</span>
		<span class="p">},</span>
		<span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_NONE</span> <span class="p">},</span>
		<span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910::torch&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_OFF</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED</span><span class="p">,</span>
		<span class="p">},</span>
		<span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;a910::flash&quot;</span><span class="p">,</span>
			<span class="p">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">LP3944_LED_STATUS_OFF</span><span class="p">,</span>
			<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">LP3944_LED_TYPE_LED_INVERTED</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">a910_i2c_board_info</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;lp3944&quot;</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">),</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a910_lp3944_leds</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">a910_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">a910_gpio_keys</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">a910_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">gen2_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a910_pin_config</span><span class="p">));</span>

	<span class="n">pxa_set_ffuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_btuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_stuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_i2c_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a910_i2c_board_info</span><span class="p">));</span>

	<span class="n">pxa_set_fb_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ezx_fb_info_2</span><span class="p">);</span>

	<span class="n">pxa_set_keypad_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a910_keypad_platform_data</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">a910_camera_init</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pxa_set_camera_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a910_pxacamera_platform_data</span><span class="p">);</span>
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a910_camera</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_devices</span><span class="p">));</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">a910_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">EZX_A910</span><span class="p">,</span> <span class="s">&quot;Motorola EZX A910&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">atag_offset</span>    <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>         <span class="o">=</span> <span class="n">pxa27x_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">EZX_NR_IRQS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>       <span class="o">=</span> <span class="n">pxa27x_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>       <span class="o">=</span> <span class="n">pxa27x_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>   <span class="o">=</span> <span class="n">a910_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restart</span>	<span class="o">=</span> <span class="n">pxa_restart</span><span class="p">,</span>
<span class="n">MACHINE_END</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E6</span>
<span class="cm">/* gpio_keys */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">e6_buttons</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">code</span>       <span class="o">=</span> <span class="n">KEY_SCREENLOCK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">gpio</span>       <span class="o">=</span> <span class="n">GPIO15_E6_LOCK_SWITCH</span><span class="p">,</span>
		<span class="p">.</span><span class="n">active_low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">desc</span>       <span class="o">=</span> <span class="s">&quot;E6 lock switch&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span>       <span class="o">=</span> <span class="n">EV_KEY</span><span class="p">,</span>
		<span class="p">.</span><span class="n">wakeup</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">e6_gpio_keys_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>  <span class="o">=</span> <span class="n">e6_buttons</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">e6_buttons</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">e6_gpio_keys</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>  <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">e6_gpio_keys_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">e6_i2c_board_info</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;tea5767&quot;</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">)</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">e6_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="o">&amp;</span><span class="n">e6_gpio_keys</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">e6_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">gen2_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e6_pin_config</span><span class="p">));</span>

	<span class="n">pxa_set_ffuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_btuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_stuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_i2c_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e6_i2c_board_info</span><span class="p">));</span>

	<span class="n">pxa_set_fb_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ezx_fb_info_2</span><span class="p">);</span>

	<span class="n">pxa_set_keypad_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">e6_keypad_platform_data</span><span class="p">);</span>

	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_devices</span><span class="p">));</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e6_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">EZX_E6</span><span class="p">,</span> <span class="s">&quot;Motorola EZX E6&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">atag_offset</span>    <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>         <span class="o">=</span> <span class="n">pxa27x_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">EZX_NR_IRQS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>       <span class="o">=</span> <span class="n">pxa27x_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>       <span class="o">=</span> <span class="n">pxa27x_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>   <span class="o">=</span> <span class="n">e6_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restart</span>	<span class="o">=</span> <span class="n">pxa_restart</span><span class="p">,</span>
<span class="n">MACHINE_END</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MACH_EZX_E2</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">e2_i2c_board_info</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;tea5767&quot;</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">)</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">e2_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">e2_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">gen2_pin_config</span><span class="p">));</span>
	<span class="n">pxa2xx_mfp_config</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e2_pin_config</span><span class="p">));</span>

	<span class="n">pxa_set_ffuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_btuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">pxa_set_stuart_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

	<span class="n">pxa_set_i2c_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
	<span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e2_i2c_board_info</span><span class="p">));</span>

	<span class="n">pxa_set_fb_info</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ezx_fb_info_2</span><span class="p">);</span>

	<span class="n">pxa_set_keypad_info</span><span class="p">(</span><span class="o">&amp;</span><span class="n">e2_keypad_platform_data</span><span class="p">);</span>

	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">ezx_devices</span><span class="p">));</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">ARRAY_AND_SIZE</span><span class="p">(</span><span class="n">e2_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">MACHINE_START</span><span class="p">(</span><span class="n">EZX_E2</span><span class="p">,</span> <span class="s">&quot;Motorola EZX E2&quot;</span><span class="p">)</span>
	<span class="p">.</span><span class="n">atag_offset</span>    <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
	<span class="p">.</span><span class="n">map_io</span>         <span class="o">=</span> <span class="n">pxa27x_map_io</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_irqs</span>	<span class="o">=</span> <span class="n">EZX_NR_IRQS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_irq</span>       <span class="o">=</span> <span class="n">pxa27x_init_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">handle_irq</span>       <span class="o">=</span> <span class="n">pxa27x_handle_irq</span><span class="p">,</span>
	<span class="p">.</span><span class="n">timer</span>          <span class="o">=</span> <span class="o">&amp;</span><span class="n">pxa_timer</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_machine</span>   <span class="o">=</span> <span class="n">e2_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">restart</span>	<span class="o">=</span> <span class="n">pxa_restart</span><span class="p">,</span>
<span class="n">MACHINE_END</span>
<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
