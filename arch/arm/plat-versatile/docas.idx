f | Makefile | g | 256B |  | Marc Zyngier | marc.zyngier@arm.com | 1331645398 |  | ARM: plat-versatile: convert to twd_local_timer_register() interface  Add support for the new smp_twd runtime registration interface to the RealView/VE platforms, and remove the old compile-time support. Tested on EB11MP.  Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
d | include |  | 1 items |  | Linus Walleij | linus.walleij@linaro.org | 1336146817 |  | ARM: 7389/2: plat-versatile: modernize FPGA IRQ controller  This does two things to the FPGA IRQ controller in the versatile family:  - Convert to MULTI_IRQ_HANDLER so we can drop the entry macro   from the Integrator. The C IRQ handler was inspired from   arch/arm/common/vic.c, recent bug discovered in this handler was   accounted for. - Convert to using IRQ domains so we can get rid of the NO_IRQ   mess and proceed with device tree and such stuff.  As part of the exercise, bump all the low IRQ numbers on the Integrator PIC to start from 1 rather than 0, since IRQ 0 is now NO_IRQ. The Linux IRQ numbers are thus entirely decoupled from the hardware IRQ numbers in this controller.  I was unable to split this patch. The main reason is the half-done conversion to device tree in Versatile.  Tested on Integrator/AP and Integrator/CP.  Cc: Grant Likely <grant.likely@secretlab.ca> Acked-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | sched-clock.c | s | 1.2K | 36 | Marc Zyngier | Marc.Zyngier@arm.com | 1324249226 |  | ARM: 7205/2: sched_clock: allow sched_clock to be selected at runtime  sched_clock() is yet another blocker on the road to the single image. This patch implements an idea by Russell King:  http://www.spinics.net/lists/linux-omap/msg49561.html  Instead of asking the platform to implement both sched_clock() itself and the rollover callback, simply register a read() function, and let the ARM code care about sched_clock() itself, the conversion to ns and the rollover. sched_clock() uses this read() function as an indirection to the platform code. If the platform doesn't provide a read(), the code falls back to the jiffy counter (just like the default sched_clock).  This allow some simplifications and possibly some footprint gain when multiple platforms are compiled in. Among the drawbacks, the removal of the *_fixed_sched_clock optimization which could negatively impact some platforms (sa1100, tegra, versatile and omap).  Tested on 11MPCore, OMAP4 and Tegra.  Cc: Imre Kaloz <kaloz@openwrt.org> Cc: Eric Miao <eric.y.miao@gmail.com> Cc: Colin Cross <ccross@android.com> Cc: Erik Gilling <konkers@android.com> Cc: Olof Johansson <olof@lixom.net> Cc: Sascha Hauer <kernel@pengutronix.de> Cc: Alessandro Rubini <rubini@unipv.it> Cc: STEricsson <STEricsson_nomadik_linux@list.st.com> Cc: Lennert Buytenhek <kernel@wantstofly.org> Cc: Ben Dooks <ben-linux@fluff.org> Tested-by: Jamie Iles <jamie@jamieiles.com> Tested-by: Tony Lindgren <tony@atomide.com> Tested-by: Kyungmin Park <kyungmin.park@samsung.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Acked-by: Nicolas Pitre <nico@linaro.org> Acked-by: Krzysztof Halasa <khc@pm.waw.pl> Acked-by: Kukjin Kim <kgene.kim@samsung.com> Signed-off-by: Marc Zyngier <marc.zyngier@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | clock.c | s | 1.5K | 63 | Russell King | rmk+kernel@arm.linux.org.uk | 1272789338 |  | ARM: Indirect round/set_rate operations through clk structure  Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | fpga-irq.c | s | 4.0K | 133 | Linus Walleij | linus.walleij@linaro.org | 1336146817 |  | ARM: 7389/2: plat-versatile: modernize FPGA IRQ controller  This does two things to the FPGA IRQ controller in the versatile family:  - Convert to MULTI_IRQ_HANDLER so we can drop the entry macro   from the Integrator. The C IRQ handler was inspired from   arch/arm/common/vic.c, recent bug discovered in this handler was   accounted for. - Convert to using IRQ domains so we can get rid of the NO_IRQ   mess and proceed with device tree and such stuff.  As part of the exercise, bump all the low IRQ numbers on the Integrator PIC to start from 1 rather than 0, since IRQ 0 is now NO_IRQ. The Linux IRQ numbers are thus entirely decoupled from the hardware IRQ numbers in this controller.  I was unable to split this patch. The main reason is the half-done conversion to device tree in Versatile.  Tested on Integrator/AP and Integrator/CP.  Cc: Grant Likely <grant.likely@secretlab.ca> Acked-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | headsmp.S | g | 962B |  | Pawel Moll | pawel.moll@arm.com | 1326724525 |  | ARM: versatile: Add missing ENDPROC to headsmp.S  Once the ENDPROC is in place, BSYM() in not longer necessary to get correct pointer to versatile_secondary_startup().  Tested-by: Jon Medhurst <tixy@linaro.org> Signed-off-by: Pawel Moll <pawel.moll@arm.com> Acked-by: Dave Martin <dave.martin@linaro.org>
f | leds.c | s | 2.2K | 87 | Linus Walleij | linus.walleij@stericsson.com | 1280137709 |  | ARM: 6235/2: driver for the LEDs found in the later ARM refdesigns  This adds a simple driver supporting the new LED framework with triggers and all for the RealView and Versatile platforms. The RealView and Versatile platform drivers were arranged to compile for all-but-integrator as a side effect since the Integrator has a different LED driver.  Signed-off-by: Linus Walleij <triad@df.lth.se> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | clcd.c | s | 3.9K | 165 | Russell King | rmk+kernel@arm.linux.org.uk | 1298113752 |  | ARM: add versatile family consolidated CLCD support  This consolidates the CLCD panel definitions and memory allocation into one location.  Rename the Sanyo 2.5in and Epson 2.2in displays after their respective part numbers.  Rather than using a general "Sanyo 2.5in" and "Epson 2.2in" description of the display panel, use the manufacturers part number to be more specific.  This helps people identify what the timings actually refer to, which are panel specific.  While here, add CLCD capability information to each panel definition, which has no effect until we add the board-level capabilities.  Acked-by: Catalin Marinas <catalin.marinas@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | Kconfig | g | 366B |  | Linus Walleij | linus.walleij@linaro.org | 1336146817 |  | ARM: 7389/2: plat-versatile: modernize FPGA IRQ controller  This does two things to the FPGA IRQ controller in the versatile family:  - Convert to MULTI_IRQ_HANDLER so we can drop the entry macro   from the Integrator. The C IRQ handler was inspired from   arch/arm/common/vic.c, recent bug discovered in this handler was   accounted for. - Convert to using IRQ domains so we can get rid of the NO_IRQ   mess and proceed with device tree and such stuff.  As part of the exercise, bump all the low IRQ numbers on the Integrator PIC to start from 1 rather than 0, since IRQ 0 is now NO_IRQ. The Linux IRQ numbers are thus entirely decoupled from the hardware IRQ numbers in this controller.  I was unable to split this patch. The main reason is the half-done conversion to device tree in Versatile.  Tested on Integrator/AP and Integrator/CP.  Cc: Grant Likely <grant.likely@secretlab.ca> Acked-by: Rob Herring <rob.herring@calxeda.com> Signed-off-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
f | platsmp.c | s | 2.6K | 91 | Will Deacon | will.deacon@arm.com | 1327314005 |  | ARM: 7293/1: logical_cpu_map: decouple CPU mapping from SMP  It turns out that the logical CPU mapping is useful even when !CONFIG_SMP for manipulation of devices like interrupt and power controllers when running a UP kernel on a CPU other than 0. This can happen when kexecing a UP image from an SMP kernel.  In the future, multi-cluster systems running AMP configurations will require something similar for mapping cluster IDs, so it makes sense to decouple this logic in preparation for this support.  Acked-by: Yang Bai <hamo.by@gmail.com> Acked-by: Marc Zyngier <marc.zyngier@arm.com> Reported-by: Joerg Roedel <joerg.roedel@amd.com> Signed-off-by: Will Deacon <will.deacon@arm.com> Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
