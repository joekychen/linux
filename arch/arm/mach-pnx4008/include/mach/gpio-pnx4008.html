<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › arm › mach-pnx4008 › include › mach › gpio-pnx4008.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>gpio-pnx4008.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * arch/arm/mach-pnx4008/include/mach/gpio-pnx4008.h</span>
<span class="cm"> *</span>
<span class="cm"> * PNX4008 GPIO driver - header file</span>
<span class="cm"> *</span>
<span class="cm"> * Author: Dmitry Chigirev &lt;source@mvista.com&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Based on reference code by Iwo Mergler and Z.Tabaaloute from Philips:</span>
<span class="cm"> * Copyright (c) 2005 Koninklijke Philips Electronics N.V.</span>
<span class="cm"> *</span>
<span class="cm"> * 2005 (c) MontaVista Software, Inc. This file is licensed under</span>
<span class="cm"> * the terms of the GNU General Public License version 2. This program</span>
<span class="cm"> * is licensed &quot;as is&quot; without any warranty of any kind, whether express</span>
<span class="cm"> * or implied.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _PNX4008_GPIO_H_</span>
<span class="cp">#define _PNX4008_GPIO_H_</span>


<span class="cm">/* Block numbers */</span>
<span class="cp">#define GPIO_IN		(0)</span>
<span class="cp">#define GPIO_OUT		(0x100)</span>
<span class="cp">#define GPIO_BID		(0x200)</span>
<span class="cp">#define GPIO_RAM		(0x300)</span>
<span class="cp">#define GPIO_MUX		(0x400)</span>

<span class="cp">#define GPIO_TYPE_MASK(K) ((K) &amp; 0x700)</span>

<span class="cm">/* INPUT GPIOs */</span>
<span class="cm">/* GPI */</span>
<span class="cp">#define GPI_00		(GPIO_IN | 0)</span>
<span class="cp">#define GPI_01		(GPIO_IN | 1)</span>
<span class="cp">#define GPI_02   	(GPIO_IN | 2)</span>
<span class="cp">#define GPI_03 	 	(GPIO_IN | 3)</span>
<span class="cp">#define GPI_04   	(GPIO_IN | 4)</span>
<span class="cp">#define GPI_05   	(GPIO_IN | 5)</span>
<span class="cp">#define GPI_06   	(GPIO_IN | 6)</span>
<span class="cp">#define GPI_07   	(GPIO_IN | 7)</span>
<span class="cp">#define GPI_08   	(GPIO_IN | 8)</span>
<span class="cp">#define GPI_09   	(GPIO_IN | 9)</span>
<span class="cp">#define U1_RX 		(GPIO_IN | 15)</span>
<span class="cp">#define U2_HTCS 	(GPIO_IN | 16)</span>
<span class="cp">#define U2_RX	 	(GPIO_IN | 17)</span>
<span class="cp">#define U3_RX		(GPIO_IN | 18)</span>
<span class="cp">#define U4_RX		(GPIO_IN | 19)</span>
<span class="cp">#define U5_RX		(GPIO_IN | 20)</span>
<span class="cp">#define U6_IRRX 	(GPIO_IN | 21)</span>
<span class="cp">#define U7_HCTS 	(GPIO_IN | 22)</span>
<span class="cp">#define U7_RX		(GPIO_IN | 23)</span>
<span class="cm">/* MISC IN */</span>
<span class="cp">#define SPI1_DATIN	(GPIO_IN | 25)</span>
<span class="cp">#define DISP_SYNC	(GPIO_IN | 26)</span>
<span class="cp">#define SPI2_DATIN	(GPIO_IN | 27)</span>
<span class="cp">#define GPI_11  	(GPIO_IN | 28)</span>

<span class="cp">#define GPIO_IN_MASK   0x1eff83ff</span>

<span class="cm">/* OUTPUT GPIOs */</span>
<span class="cm">/* GPO */</span>
<span class="cp">#define GPO_00		(GPIO_OUT | 0)</span>
<span class="cp">#define GPO_01   	(GPIO_OUT | 1)</span>
<span class="cp">#define GPO_02   	(GPIO_OUT | 2)</span>
<span class="cp">#define GPO_03 	 	(GPIO_OUT | 3)</span>
<span class="cp">#define GPO_04   	(GPIO_OUT | 4)</span>
<span class="cp">#define GPO_05   	(GPIO_OUT | 5)</span>
<span class="cp">#define GPO_06   	(GPIO_OUT | 6)</span>
<span class="cp">#define GPO_07   	(GPIO_OUT | 7)</span>
<span class="cp">#define GPO_08		(GPIO_OUT | 8)</span>
<span class="cp">#define GPO_09   	(GPIO_OUT | 9)</span>
<span class="cp">#define GPO_10   	(GPIO_OUT | 10)</span>
<span class="cp">#define GPO_11 	 	(GPIO_OUT | 11)</span>
<span class="cp">#define GPO_12   	(GPIO_OUT | 12)</span>
<span class="cp">#define GPO_13   	(GPIO_OUT | 13)</span>
<span class="cp">#define GPO_14   	(GPIO_OUT | 14)</span>
<span class="cp">#define GPO_15   	(GPIO_OUT | 15)</span>
<span class="cp">#define GPO_16  	(GPIO_OUT | 16)</span>
<span class="cp">#define GPO_17 	 	(GPIO_OUT | 17)</span>
<span class="cp">#define GPO_18   	(GPIO_OUT | 18)</span>
<span class="cp">#define GPO_19   	(GPIO_OUT | 19)</span>
<span class="cp">#define GPO_20   	(GPIO_OUT | 20)</span>
<span class="cp">#define GPO_21   	(GPIO_OUT | 21)</span>
<span class="cp">#define GPO_22   	(GPIO_OUT | 22)</span>
<span class="cp">#define GPO_23   	(GPIO_OUT | 23)</span>

<span class="cp">#define GPIO_OUT_MASK   0xffffff</span>

<span class="cm">/* BIDIRECTIONAL GPIOs */</span>
<span class="cm">/* RAM pins */</span>
<span class="cp">#define RAM_D19		(GPIO_RAM | 0)</span>
<span class="cp">#define RAM_D20  	(GPIO_RAM | 1)</span>
<span class="cp">#define RAM_D21  	(GPIO_RAM | 2)</span>
<span class="cp">#define RAM_D22 	(GPIO_RAM | 3)</span>
<span class="cp">#define RAM_D23  	(GPIO_RAM | 4)</span>
<span class="cp">#define RAM_D24  	(GPIO_RAM | 5)</span>
<span class="cp">#define RAM_D25  	(GPIO_RAM | 6)</span>
<span class="cp">#define RAM_D26  	(GPIO_RAM | 7)</span>
<span class="cp">#define RAM_D27		(GPIO_RAM | 8)</span>
<span class="cp">#define RAM_D28  	(GPIO_RAM | 9)</span>
<span class="cp">#define RAM_D29  	(GPIO_RAM | 10)</span>
<span class="cp">#define RAM_D30 	(GPIO_RAM | 11)</span>
<span class="cp">#define RAM_D31  	(GPIO_RAM | 12)</span>

<span class="cp">#define GPIO_RAM_MASK   0x1fff</span>

<span class="cm">/* I/O pins */</span>
<span class="cp">#define GPIO_00  	(GPIO_BID | 25)</span>
<span class="cp">#define GPIO_01 	(GPIO_BID | 26)</span>
<span class="cp">#define GPIO_02  	(GPIO_BID | 27)</span>
<span class="cp">#define GPIO_03  	(GPIO_BID | 28)</span>
<span class="cp">#define GPIO_04 	(GPIO_BID | 29)</span>
<span class="cp">#define GPIO_05  	(GPIO_BID | 30)</span>

<span class="cp">#define GPIO_BID_MASK   0x7e000000</span>

<span class="cm">/* Non-GPIO multiplexed PIOs. For multiplexing with GPIO, please use GPIO macros */</span>
<span class="cp">#define GPIO_SDRAM_SEL 	(GPIO_MUX | 3)</span>

<span class="cp">#define GPIO_MUX_MASK   0x8</span>

<span class="cm">/* Extraction/assembly macros */</span>
<span class="cp">#define GPIO_BIT_MASK(K) ((K) &amp; 0x1F)</span>
<span class="cp">#define GPIO_BIT(K) (1 &lt;&lt; GPIO_BIT_MASK(K))</span>
<span class="cp">#define GPIO_ISMUX(K) ((GPIO_TYPE_MASK(K) == GPIO_MUX) &amp;&amp; (GPIO_BIT(K) &amp; GPIO_MUX_MASK))</span>
<span class="cp">#define GPIO_ISRAM(K) ((GPIO_TYPE_MASK(K) == GPIO_RAM) &amp;&amp; (GPIO_BIT(K) &amp; GPIO_RAM_MASK))</span>
<span class="cp">#define GPIO_ISBID(K) ((GPIO_TYPE_MASK(K) == GPIO_BID) &amp;&amp; (GPIO_BIT(K) &amp; GPIO_BID_MASK))</span>
<span class="cp">#define GPIO_ISOUT(K) ((GPIO_TYPE_MASK(K) == GPIO_OUT) &amp;&amp; (GPIO_BIT(K) &amp; GPIO_OUT_MASK))</span>
<span class="cp">#define GPIO_ISIN(K)  ((GPIO_TYPE_MASK(K) == GPIO_IN) &amp;&amp; (GPIO_BIT(K) &amp; GPIO_IN_MASK))</span>

<span class="cm">/* Start Enable Pin Interrupts - table 58 page 66 */</span>

<span class="cp">#define SE_PIN_BASE_INT   32</span>

<span class="cp">#define SE_U7_RX_INT            63</span>
<span class="cp">#define SE_U7_HCTS_INT          62</span>
<span class="cp">#define SE_BT_CLKREQ_INT        61</span>
<span class="cp">#define SE_U6_IRRX_INT          60</span>
<span class="cm">/*59 unused*/</span>
<span class="cp">#define SE_U5_RX_INT            58</span>
<span class="cp">#define SE_GPI_11_INT           57</span>
<span class="cp">#define SE_U3_RX_INT            56</span>
<span class="cp">#define SE_U2_HCTS_INT          55</span>
<span class="cp">#define SE_U2_RX_INT            54</span>
<span class="cp">#define SE_U1_RX_INT            53</span>
<span class="cp">#define SE_DISP_SYNC_INT        52</span>
<span class="cm">/*51 unused*/</span>
<span class="cp">#define SE_SDIO_INT_N           50</span>
<span class="cp">#define SE_MSDIO_START_INT      49</span>
<span class="cp">#define SE_GPI_06_INT           48</span>
<span class="cp">#define SE_GPI_05_INT           47</span>
<span class="cp">#define SE_GPI_04_INT           46</span>
<span class="cp">#define SE_GPI_03_INT           45</span>
<span class="cp">#define SE_GPI_02_INT           44</span>
<span class="cp">#define SE_GPI_01_INT           43</span>
<span class="cp">#define SE_GPI_00_INT           42</span>
<span class="cp">#define SE_SYSCLKEN_PIN_INT     41</span>
<span class="cp">#define SE_SPI1_DATAIN_INT      40</span>
<span class="cp">#define SE_GPI_07_INT           39</span>
<span class="cp">#define SE_SPI2_DATAIN_INT      38</span>
<span class="cp">#define SE_GPI_10_INT           37</span>
<span class="cp">#define SE_GPI_09_INT           36</span>
<span class="cp">#define SE_GPI_08_INT           35</span>
<span class="cm">/*34-32 unused*/</span>

<span class="cm">/* Start Enable Internal Interrupts - table 57 page 65 */</span>

<span class="cp">#define SE_INT_BASE_INT   0</span>

<span class="cp">#define SE_TS_IRQ               31</span>
<span class="cp">#define SE_TS_P_INT             30</span>
<span class="cp">#define SE_TS_AUX_INT           29</span>
<span class="cm">/*27-28 unused*/</span>
<span class="cp">#define SE_USB_AHB_NEED_CLK_INT 26</span>
<span class="cp">#define SE_MSTIMER_INT          25</span>
<span class="cp">#define SE_RTC_INT              24</span>
<span class="cp">#define SE_USB_NEED_CLK_INT     23</span>
<span class="cp">#define SE_USB_INT              22</span>
<span class="cp">#define SE_USB_I2C_INT          21</span>
<span class="cp">#define SE_USB_OTG_TIMER_INT    20</span>
<span class="cp">#define SE_USB_OTG_ATX_INT_N    19</span>
<span class="cm">/*18 unused*/</span>
<span class="cp">#define SE_DSP_GPIO4_INT        17</span>
<span class="cp">#define SE_KEY_IRQ              16</span>
<span class="cp">#define SE_DSP_SLAVEPORT_INT    15</span>
<span class="cp">#define SE_DSP_GPIO1_INT        14</span>
<span class="cp">#define SE_DSP_GPIO0_INT        13</span>
<span class="cp">#define SE_DSP_AHB_INT          12</span>
<span class="cm">/*11-6 unused*/</span>
<span class="cp">#define SE_GPIO_05_INT          5</span>
<span class="cp">#define SE_GPIO_04_INT          4</span>
<span class="cp">#define SE_GPIO_03_INT          3</span>
<span class="cp">#define SE_GPIO_02_INT          2</span>
<span class="cp">#define SE_GPIO_01_INT          1</span>
<span class="cp">#define SE_GPIO_00_INT          0</span>

<span class="cp">#define START_INT_REG_BIT(irq) (1&lt;&lt;((irq)&amp;0x1F))</span>

<span class="cp">#define START_INT_ER_REG(irq)     IO_ADDRESS((PNX4008_PWRMAN_BASE + 0x20 + (((irq)&amp;(0x1&lt;&lt;5))&gt;&gt;1)))</span>
<span class="cp">#define START_INT_RSR_REG(irq)    IO_ADDRESS((PNX4008_PWRMAN_BASE + 0x24 + (((irq)&amp;(0x1&lt;&lt;5))&gt;&gt;1)))</span>
<span class="cp">#define START_INT_SR_REG(irq)     IO_ADDRESS((PNX4008_PWRMAN_BASE + 0x28 + (((irq)&amp;(0x1&lt;&lt;5))&gt;&gt;1)))</span>
<span class="cp">#define START_INT_APR_REG(irq)    IO_ADDRESS((PNX4008_PWRMAN_BASE + 0x2C + (((irq)&amp;(0x1&lt;&lt;5))&gt;&gt;1)))</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_register_pin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_unregister_pin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pnx4008_gpio_read_pin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_write_pin</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_set_pin_direction</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_read_pin_direction</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_set_pin_mux</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pnx4008_gpio_read_pin_mux</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pin</span><span class="p">);</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">start_int_umask</span><span class="p">(</span><span class="n">u8</span> <span class="n">irq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">__raw_readl</span><span class="p">(</span><span class="n">START_INT_ER_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">))</span> <span class="o">|</span>
		     <span class="n">START_INT_REG_BIT</span><span class="p">(</span><span class="n">irq</span><span class="p">),</span> <span class="n">START_INT_ER_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">start_int_mask</span><span class="p">(</span><span class="n">u8</span> <span class="n">irq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">__raw_readl</span><span class="p">(</span><span class="n">START_INT_ER_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">))</span> <span class="o">&amp;</span>
		     <span class="o">~</span><span class="n">START_INT_REG_BIT</span><span class="p">(</span><span class="n">irq</span><span class="p">),</span> <span class="n">START_INT_ER_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">start_int_ack</span><span class="p">(</span><span class="n">u8</span> <span class="n">irq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">START_INT_REG_BIT</span><span class="p">(</span><span class="n">irq</span><span class="p">),</span> <span class="n">START_INT_RSR_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">start_int_set_falling_edge</span><span class="p">(</span><span class="n">u8</span> <span class="n">irq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">__raw_readl</span><span class="p">(</span><span class="n">START_INT_APR_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">))</span> <span class="o">&amp;</span>
		     <span class="o">~</span><span class="n">START_INT_REG_BIT</span><span class="p">(</span><span class="n">irq</span><span class="p">),</span> <span class="n">START_INT_APR_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">start_int_set_rising_edge</span><span class="p">(</span><span class="n">u8</span> <span class="n">irq</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">__raw_readl</span><span class="p">(</span><span class="n">START_INT_APR_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">))</span> <span class="o">|</span>
		     <span class="n">START_INT_REG_BIT</span><span class="p">(</span><span class="n">irq</span><span class="p">),</span> <span class="n">START_INT_APR_REG</span><span class="p">(</span><span class="n">irq</span><span class="p">));</span>
<span class="p">}</span>

<span class="cp">#endif				</span><span class="cm">/* _PNX4008_GPIO_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
