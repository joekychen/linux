f | Makefile | g | 662B |  | Al Viro | viro@zeniv.linux.org.uk | 1332631795 |  | um: use the right ifdef around exports in user_syms.c  ... the same one that controls whether elf_aux.o is included into the build, bringing the vsyscall_e... into it.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | start_up.c | s | 12K | 450 | Al Viro | viro@ftp.linux.org.uk | 1320239727 |  | um: unify ptrace_user.h  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | sigio.c | s | 11K | 458 | Al Viro | viro@ftp.linux.org.uk | 1320239700 |  | um: shared/process.h is empty now; kill it  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | internal.h | s | 39B | 1 | Al Viro | viro@ftp.linux.org.uk | 1320239699 |  | um: start switching the references to host mcontext_t to its userland type  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | time.c | s | 4.1K | 149 | Al Viro | viro@ftp.linux.org.uk | 1320239699 |  | um: start switching the references to host mcontext_t to its userland type  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | elf_aux.c | s | 1.9K | 68 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
d | drivers |  | 7 items |  | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | umid.c | s | 8.0K | 328 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | mem.c | s | 5.5K | 233 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | user_syms.c | s | 3.2K | 98 | Al Viro | viro@zeniv.linux.org.uk | 1332631795 |  | um: use the right ifdef around exports in user_syms.c  ... the same one that controls whether elf_aux.o is included into the build, bringing the vsyscall_e... into it.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | util.c | s | 3.2K | 121 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | registers.c | s | 1.1K | 46 | Ingo van Lil | inguin@gmx.de | 1316048977 |  | um: Save FPU registers between task switches  Some time ago Jeff prepared 42daba316557 ("uml: stop saving process FP state") for UML to stop saving the process FP state between task switches.  The assumption was that since with SKAS0 every guest process runs inside a host process context the host OS will take care of keeping the proper FP state.  Unfortunately this is not true for multi-threaded applications, where all guest threads share a single host process context yet all may use the FPU on their own.  Although I haven't verified it I suspect things to be even worse in SKAS3 mode where all guest processes run inside a single host process.  The patch reintroduces the saving and restoring of the FP context between task switches.  [richard@nod.at: Ingo posted this patch in 2009, sadly it was never applied and got lost. Now in 2011 the problem was reported by Gunnar.]  Signed-off-by: Ingo van Lil <inguin@gmx.de> Signed-off-by: Richard Weinberger <richard@nod.at> Reported-by: <gunnarlindroth@hotmail.com> Tested-by: <gunnarlindroth@hotmail.com> Cc: Stanislav Meduna <stano@meduna.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | irq.c | s | 2.8K | 116 | Al Viro | viro@ftp.linux.org.uk | 1320239700 |  | um: shared/process.h is empty now; kill it  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | helper.c | s | 3.7K | 145 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | aio.c | s | 9.1K | 334 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | execvp.c | s | 4.0K | 131 | Paolo 'Blaisorblade' Giarrusso | blaisorblade@yahoo.it | 1164490114 |  | [PATCH] uml: make execvp safe for our usage  Reimplement execvp for our purposes - after we call fork() it is fundamentally unsafe to use the kernel allocator - current is not valid there.  So we simply pass to our modified execvp() a preallocated buffer.  This fixes a real bug and works very well in testing (I've seen indirectly warning messages from the forked thread - they went on the pipe connected to its stdout and where read as a number by UML, when calling read_output().  I verified the obtained number corresponded to "BUG:").  The added use of __cant_sleep() is not a new bug since __cant_sleep() is already used in the same function - passing an atomicity parameter would be better but it would require huge change, stating that this function must not be called in atomic context and can sleep is a better idea (will make sure of this gradually).  Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it> Acked-by: Jeff Dike <jdike@addtoit.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
d | skas |  | 3 items |  | Richard Weinberger | richard@nod.at | 1337627372 |  | um: Remove unused variables  Signed-off-by: Richard Weinberger <richard@nod.at>
f | process.c | s | 5.2K | 216 | Al Viro | viro@ftp.linux.org.uk | 1320239700 |  | um: shared/process.h is empty now; kill it  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | file.c | s | 10K | 466 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | tty.c | s | 1.0K | 51 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | signal.c | s | 6.4K | 244 | Al Viro | viro@ftp.linux.org.uk | 1320239701 |  | um: sysdep/barrier.h is not used for anything  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | main.c | s | 5.8K | 222 | Al Viro | viro@ftp.linux.org.uk | 1320239684 |  | um: -include user.h for USER_OBJ, trim includes  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
