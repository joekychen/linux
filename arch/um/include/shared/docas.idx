f | common-offsets.h | s | 1.3K | 40 | Al Viro | viro@zeniv.linux.org.uk | 1332631795 |  | um: kill HOST_TASK_PID  just provide get_current_pid() to the userland side of things instead of get_current() + manual poking in its results  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | irq_user.h | s | 609B | 24 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | skas_ptrace.h | s | 254B | 10 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | longjmp.h | s | 401B | 18 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | net_kern.h | s | 1.8K | 60 | Stephen Hemminger | shemminger@linux-foundation.org | 1238139999 |  | uml: convert network device to internal network device stats  Convert the UML network device to use internal network device stats.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Signed-off-by: David S. Miller <davem@davemloft.net>
f | aio.h | s | 530B | 21 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | sysrq.h | s | 143B | 5 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | arch.h | s | 350B | 11 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | kern_util.h | s | 2.0K | 50 | Al Viro | viro@zeniv.linux.org.uk | 1332631795 |  | um: kill HOST_TASK_PID  just provide get_current_pid() to the userland side of things instead of get_current() + manual poking in its results  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | user.h | s | 1.1K | 37 | Al Viro | viro@ftp.linux.org.uk | 1320239698 |  | um: take userland definition of barrier() to user.h  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | registers.h | s | 861B | 20 | Ingo van Lil | inguin@gmx.de | 1316048977 |  | um: Save FPU registers between task switches  Some time ago Jeff prepared 42daba316557 ("uml: stop saving process FP state") for UML to stop saving the process FP state between task switches.  The assumption was that since with SKAS0 every guest process runs inside a host process context the host OS will take care of keeping the proper FP state.  Unfortunately this is not true for multi-threaded applications, where all guest threads share a single host process context yet all may use the FPU on their own.  Although I haven't verified it I suspect things to be even worse in SKAS3 mode where all guest processes run inside a single host process.  The patch reintroduces the saving and restoring of the FP context between task switches.  [richard@nod.at: Ingo posted this patch in 2009, sadly it was never applied and got lost. Now in 2011 the problem was reported by Gunnar.]  Signed-off-by: Ingo van Lil <inguin@gmx.de> Signed-off-by: Richard Weinberger <richard@nod.at> Reported-by: <gunnarlindroth@hotmail.com> Tested-by: <gunnarlindroth@hotmail.com> Cc: Stanislav Meduna <stano@meduna.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | as-layout.h | s | 1.6K | 50 | Al Viro | viro@ftp.linux.org.uk | 1320239685 |  | um: get rid of kern_constants.h  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | irq_kern.h | s | 409B | 14 | Richard Weinberger | richard@nod.at | 1337627376 |  | um: Implement um_free_irq()  Instead of using chip->release() we can achieve the same using a simple wrapper for free_irq(). We have already um_request_irq(), so um_free_irq() is the perfect counterpart.  Signed-off-by: Richard Weinberger <richard@nod.at> Reviewed-by: Thomas Gleixner <tglx@linutronix.de>
f | net_user.h | s | 1.6K | 40 | Alan Cox | alan@lxorguk.ukuu.org.uk | 1245206866 |  | uml: UML net driver does not allow for vlans  See ancient discussion at http://marc.info/?l=user-mode-linux-devel&m=101990155831279&w=2  Addresses http://bugzilla.kernel.org/show_bug.cgi?id=7854  Signed-off-by: Alan Cox <alan@linux.intel.com> Reported-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it> Cc: Jeff Dike <jdike@addtoit.com> Cc: Roland Kletzing <devzero@web.de> Cc: "David S. Miller" <davem@davemloft.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sigio.h | s | 271B | 11 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | mem.h | s | 455B | 17 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | os.h | s | 9.8K | 261 | Al Viro | viro@ftp.linux.org.uk | 1320239717 |  | um: merge os-Linux/tls.c into arch/x86/um/os-Linux/tls.c  it's i386-specific; moreover, analogs on other targets have incompatible interface - PTRACE_GET_THREAD_AREA does exist elsewhere, but struct user_desc does *not*  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | init.h | s | 4.2K | 124 | Geert Uytterhoeven | Geert.Uytterhoeven@sonycom.com | 1245206877 |  | fbdev: move logo externs to header file  Now we have __initconst, we can finally move the external declarations for the various Linux logo structures to <linux/linux_logo.h>.  James' ack dates back to the previous submission (way to long ago), when the logos were still __initdata, which caused failures on some platforms with some toolchain versions.  Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com> Acked-by: James Simmons <jsimmons@infradead.org> Cc: Krzysztof Helt <krzysztof.h1@poczta.fm> Cc: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | elf_user.h | s | 385B | 15 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | mem_user.h | s | 2.4K | 56 | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | ptrace_user.h | s | 1.9K | 47 | Al Viro | viro@ftp.linux.org.uk | 1320239727 |  | um: unify ptrace_user.h  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | kern.h | s | 569B | 17 | Al Viro | viro@ftp.linux.org.uk | 1320239707 |  | um: trim kern.h  most of the functions in there are not used in anything that ends up including that header...  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
f | um_malloc.h | s | 384B | 12 | Al Viro | viro@ftp.linux.org.uk | 1320239685 |  | um: get rid of kern_constants.h  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Richard Weinberger <richard@nod.at>
d | skas |  | 4 items |  | Al Viro | viro@zeniv.linux.org.uk | 1224741319 |  | x86, um: take arch/um/include/* out of the way  We can't just plop asm/* into it - userland helpers are built with it in search path and seeing asm/* show up there suddenly would be a bad idea.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | frame_kern.h | s | 455B | 15 | Al Viro | viro@zeniv.linux.org.uk | 1338569931 |  | most of set_current_blocked() callers want SIGKILL/SIGSTOP removed from set  Only 3 out of 63 do not.  Renamed the current variant to __set_current_blocked(), added set_current_blocked() that will exclude unblockable signals, switched open-coded instances to it.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
