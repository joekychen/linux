d | kernel |  | 35 items |  | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
d | include |  | 2 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1337901450 |  | Merge branch 'next' of git://git.kernel.org/pub/scm/virt/kvm/kvm  Pull KVM changes from Avi Kivity:  "Changes include additional instruction emulation, page-crossing MMIO,   faster dirty logging, preventing the watchdog from killing a stopped   guest, module autoload, a new MSI ABI, and some minor optimizations   and fixes.  Outside x86 we have a small s390 and a very large ppc   update.    Regarding the new (for kvm) rebaseless workflow, some of the patches   that were merged before we switch trees had to be rebased, while   others are true pulls.  In either case the signoffs should be correct   now."  Fix up trivial conflicts in Documentation/feature-removal-schedule.txt arch/powerpc/kvm/book3s_segment.S and arch/x86/include/asm/kvm_para.h.  I suspect the kvm_para.h resolution ends up doing the "do I have cpuid" check effectively twice (it was done differently in two different commits), but better safe than sorry ;)  * 'next' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (125 commits)   KVM: make asm-generic/kvm_para.h have an ifdef __KERNEL__ block   KVM: s390: onereg for timer related registers   KVM: s390: epoch difference and TOD programmable field   KVM: s390: KVM_GET/SET_ONEREG for s390   KVM: s390: add capability indicating COW support   KVM: Fix mmu_reload() clash with nested vmx event injection   KVM: MMU: Don't use RCU for lockless shadow walking   KVM: VMX: Optimize %ds, %es reload   KVM: VMX: Fix %ds/%es clobber   KVM: x86 emulator: convert bsf/bsr instructions to emulate_2op_SrcV_nobyte()   KVM: VMX: unlike vmcs on fail path   KVM: PPC: Emulator: clean up SPR reads and writes   KVM: PPC: Emulator: clean up instruction parsing   kvm/powerpc: Add new ioctl to retreive server MMU infos   kvm/book3s: Make kernel emulated H_PUT_TCE available for "PR" KVM   KVM: PPC: bookehv: Fix r8/r13 storing in level exception handler   KVM: PPC: Book3S: Enable IRQs during exit handling   KVM: PPC: Fix PR KVM on POWER7 bare metal   KVM: PPC: Fix stbux emulation   KVM: PPC: bookehv: Use lwz/stw instead of PPC_LL/PPC_STL for 32-bit fields   ...
d | boot |  | 2 items |  | Stephen Warren | swarren@wwwdotorg.org | 1332769760 |  | Kbuild: centralize MKIMAGE and cmd_uimage definitions  All ARCHs have the same definition of MKIMAGE. Move it to Makefile.lib to avoid duplication.  All ARCHs have similar definitions of cmd_uimage. Place a sufficiently parameterized version in Makefile.lib to avoid duplication.  Signed-off-by: Stephen Warren <swarren@wwwdotorg.org> Acked-by: Nicolas Pitre <nico@linaro.org> Tested-by: Mike Frysinger <vapier@gentoo.org> [Blackfin] Tested-by: Michal Simek <monstr@monstr.eu> [Microblaze] Tested-by: Guan Xuetao <gxt@mprc.pku.edu.cn> [unicore32] Signed-off-by: Michal Marek <mmarek@suse.cz>
f | Makefile | g | 1.5K |  | Thomas Gleixner | tglx@linutronix.de | 1336215626 |  | unicore32: Use generic init_task  Same code. Use the generic version. The special Makefile treatment is pointless anyway as init_task.o contains only data which is handled by the linker script. So no point on being treated like head text.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Link: http://lkml.kernel.org/r/20120503085035.669622065@linutronix.de
f | Kconfig | g | 4.6K |  | Linus Torvalds | torvalds@linux-foundation.org | 1337893306 |  | 
d | mm |  | 17 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1333584823 |  | Merge branch 'for-linus' of git://git.linaro.org/people/mszyprowski/linux-dma-mapping  Pull DMA mapping branch from Marek Szyprowski:  "Short summary for the whole series:    A few limitations have been identified in the current dma-mapping   design and its implementations for various architectures.  There exist   more than one function for allocating and freeing the buffers:   currently these 3 are used dma_{alloc, free}_coherent,   dma_{alloc,free}_writecombine, dma_{alloc,free}_noncoherent.    For most of the systems these calls are almost equivalent and can be   interchanged.  For others, especially the truly non-coherent ones   (like ARM), the difference can be easily noticed in overall driver   performance.  Sadly not all architectures provide implementations for   all of them, so the drivers might need to be adapted and cannot be   easily shared between different architectures.  The provided patches   unify all these functions and hide the differences under the already   existing dma attributes concept.  The thread with more references is   available here:      http://www.spinics.net/lists/linux-sh/msg09777.html    These patches are also a prerequisite for unifying DMA-mapping   implementation on ARM architecture with the common one provided by   dma_map_ops structure and extending it with IOMMU support.  More   information is available in the following thread:      http://thread.gmane.org/gmane.linux.kernel.cross-arch/12819    More works on dma-mapping framework are planned, especially in the   area of buffer sharing and managing the shared mappings (together with   the recently introduced dma_buf interface: commit d15bd7ee445d   "dma-buf: Introduce dma buffer sharing mechanism").    The patches in the current set introduce a new alloc/free methods   (with support for memory attributes) in dma_map_ops structure, which   will later replace dma_alloc_coherent and dma_alloc_writecombine   functions."  People finally started piping up with support for merging this, so I'm merging it as the last of the pending stuff from the merge window. Looks like pohmelfs is going to wait for 3.5 and more external support for merging.  * 'for-linus' of git://git.linaro.org/people/mszyprowski/linux-dma-mapping:   common: DMA-mapping: add NON-CONSISTENT attribute   common: DMA-mapping: add WRITE_COMBINE attribute   common: dma-mapping: introduce mmap method   common: dma-mapping: remove old alloc_coherent and free_coherent methods   Hexagon: adapt for dma_map_ops changes   Unicore32: adapt for dma_map_ops changes   Microblaze: adapt for dma_map_ops changes   SH: adapt for dma_map_ops changes   Alpha: adapt for dma_map_ops changes   SPARC: adapt for dma_map_ops changes   PowerPC: adapt for dma_map_ops changes   MIPS: adapt for dma_map_ops changes   X86 & IA64: adapt for dma_map_ops changes   common: dma-mapping: introduce generic alloc() and free() methods
f | Kconfig.debug | g | 1.5K |  | Paul Bolle | pebolle@tiscali.nl | 1321348398 |  | unicore32: drop unused Kconfig symbols  Signed-off-by: Paul Bolle <pebolle@tiscali.nl> Acked-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
d | lib |  | 11 items |  | Guan Xuetao | gxt@mprc.pku.edu.cn | 1321348394 |  | unicore32: fix build error for find bitops  Remove the __uc32_ prefix in find bitops functions. Move find_* macros behind asm-generic/bitops.h inclusion. see commit <19de85ef574c3a2182e3ccad9581805052f14946>   bitops: add #ifndef for each of find bitops also see commit <63e424c84429903c92a0f1e9654c31ccaf6694d0>   arch: remove CONFIG_GENERIC_FIND_{NEXT_BIT,BIT_LE,LAST_BIT}  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Cc: Akinobu Mita <akinobu.mita@gmail.com> Acked-by: Akinobu Mita <akinobu.mita@gmail.com> Cc: Arnd Bergmann <arnd@arndb.de>
d | configs |  | 1 items |  | Guan Xuetao | gxt@mprc.pku.edu.cn | 1307607882 |  | unicore32: add KBUILD_DEFCONFIG with unicore32_defconfig (old debug_defconfig)  Rename debug_defconfig to unicore32_defconfig, which is a minimal config for PKUnity-v3 (130nm) SoC board. Also, add KBUILD_DEFCONFIG to use 'make defconfig'.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Acked-by: Arnd Bergmann <arnd@arndb.de>
