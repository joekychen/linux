f | init.c | s | 12K | 428 | Tejun Heo | tj@kernel.org | 1323368528 |  | memblock: s/memblock_analyze()/memblock_allow_resize()/ and update users  The only function of memblock_analyze() is now allowing resize of memblock region arrays.  Rename it to memblock_allow_resize() and update its users.  * The following users remain the same other than renaming.    arm/mm/init.c::arm_memblock_init()   microblaze/kernel/prom.c::early_init_devtree()   powerpc/kernel/prom.c::early_init_devtree()   openrisc/kernel/prom.c::early_init_devtree()   sh/mm/init.c::paging_init()   sparc/mm/init_64.c::paging_init()   unicore32/mm/init.c::uc32_memblock_init()  * In the following users, analyze was used to update total size which   is no longer necessary.    powerpc/kernel/machine_kexec.c::reserve_crashkernel()   powerpc/kernel/prom.c::early_init_devtree()   powerpc/mm/init_32.c::MMU_init()   powerpc/mm/tlb_nohash.c::__early_init_mmu()   powerpc/platforms/ps3/mm.c::ps3_mm_add_memory()   powerpc/platforms/embedded6xx/wii.c::wii_memory_fixups()   sh/kernel/machine_kexec.c::reserve_crashkernel()  * x86/kernel/e820.c::memblock_x86_fill() was directly setting   memblock_can_resize before populating memblock and calling analyze   afterwards.  Call memblock_allow_resize() before start populating.  memblock_can_resize is now static inside memblock.c.  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Yinghai Lu <yinghai@kernel.org> Cc: Russell King <linux@arm.linux.org.uk> Cc: Michal Simek <monstr@monstr.eu> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Cc: "H. Peter Anvin" <hpa@zytor.com>
f | flush.c | s | 2.4K | 85 | Guan Xuetao | gxt@mprc.pku.edu.cn | 1332955803 |  | Disintegrate asm/system.h for Unicore32 [based on ver #3, changed by gxt]  Disintegrate asm/system.h for Unicore32. (Compilation successful) The implementation details are not changed, but only splitted. BTW, some codestyles are adjusted.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | Makefile | g | 345B |  | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324761 |  | unicore32: replace unicore32-specific iomap functions with generic lib implementation  1. define and enable CONFIG_GENERIC_IOMAP 2. define unicore32-specific PCI_IOBASE for asm-generic/io.h 3. define HAVE_ARCH_PIO_SIZE and unicore32-specific PIO_* macros 4. remove all unicore32-specific iomap functions  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-and-Acked-by: Arnd Bergmann <arnd@arndb.de>
f | proc-ucv2.S | g | 2.7K |  | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324746 |  | unicore32 core architecture: processor and system headers  This patch includes processor and system headers. System call interface is here. We used the syscall interface the same as asm-generic version.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | mmu.c | s | 12K | 433 | Tejun Heo | tj@kernel.org | 1323368526 |  | memblock: Fix include breakages caused by 24aa07882b  24aa07882b (memblock, x86: Replace memblock_x86_reserve/free_range() with generic ones) removed arch/x86/include/asm/memblock.h and dropped its inclusion from include/linux/memblock.h which breaks other architectures which depended on the generic memblock.h pulling in the arch specific one.  However, the proper fix isn't adding back the asm inclusion.  memblock doesn't have any arch dependent part and doesn't need arch specific header file and asm/memblock.h files are either practically empty or contain mostly unrelated arch specific stuff.  * In microblaze, sh, powerpc, sparc and openrisc, asm/memblock.h is   either empty or just contains unused MEMBLOCK_DBG() macro.  Remove   them.  * In arm and unicore32, asm/memblock.h contains arch specific stuff.   Include it directly from its users.  It might be a good idea to   rename the header file to avoid confusion.  Signed-off-by: Tejun Heo <tj@kernel.org> Reported-by: "H. Peter Anvin" <hpa@zytor.com> Cc: Yinghai Lu <yinghai@kernel.org> Cc: Russell King <linux@arm.linux.org.uk> Cc: Michal Simek <monstr@monstr.eu> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | extable.c | s | 603B | 21 | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324749 |  | unicore32 core architecture: mm related: fault handling  This patch implements fault handling of memory management.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | tlb-ucv2.S | g | 1.7K |  | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324749 |  | unicore32 core architecture: mm related: consistent device DMA handling  This patch implements consistent device DMA handling of memory management. DMA device operations are also here.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | ioremap.c | s | 7.0K | 227 | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324748 |  | unicore32 core architecture: mm related: generic codes  This patch includes generic codes for memory management.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | alignment.c | s | 12K | 455 | Guan Xuetao | gxt@mprc.pku.edu.cn | 1332955803 |  | Disintegrate asm/system.h for Unicore32 [based on ver #3, changed by gxt]  Disintegrate asm/system.h for Unicore32. (Compilation successful) The implementation details are not changed, but only splitted. BTW, some codestyles are adjusted.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | mm.h | s | 1.1K | 36 | Guan Xuetao | gxt@mprc.pku.edu.cn | 1332955803 |  | Disintegrate asm/system.h for Unicore32 [based on ver #3, changed by gxt]  Disintegrate asm/system.h for Unicore32. (Compilation successful) The implementation details are not changed, but only splitted. BTW, some codestyles are adjusted.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | Kconfig | g | 1.2K |  | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324748 |  | unicore32 core architecture: mm related: generic codes  This patch includes generic codes for memory management.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | cache-ucv2.S | g | 4.4K |  | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324749 |  | unicore32 core architecture: mm related: consistent device DMA handling  This patch implements consistent device DMA handling of memory management. DMA device operations are also here.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | fault.c | s | 11K | 410 | Guan Xuetao | gxt@mprc.pku.edu.cn | 1332955803 |  | Disintegrate asm/system.h for Unicore32 [based on ver #3, changed by gxt]  Disintegrate asm/system.h for Unicore32. (Compilation successful) The implementation details are not changed, but only splitted. BTW, some codestyles are adjusted.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | pgd.c | s | 2.1K | 85 | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324758 |  | unicore32 upgrade to v2.6.38-rc5: add one more paramter for pte_alloc_map call  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn>
f | proc-syms.c | s | 601B | 20 | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324745 |  | unicore32 core architecture: generic elf and ksyms stuff  This patch includes some generic stuff including elf and ksyms. Because all one-line asm-generic headers are auto-generated by ASM_GENERIC_HEADERS in arch/unicore32/Makefile, so the rest seems very little. ELF handling functions and module handling functions are also here.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | proc-macros.S | g | 3.6K |  | GuanXuetao | gxt@mprc.pku.edu.cn | 1300324746 |  | unicore32 core architecture: processor and system headers  This patch includes processor and system headers. System call interface is here. We used the syscall interface the same as asm-generic version.  Signed-off-by: Guan Xuetao <gxt@mprc.pku.edu.cn> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | dma-swiotlb.c | s | 1.5K | 44 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1332945399 |  | Unicore32: adapt for dma_map_ops changes  Adapt core Unicore32 architecture code for dma_map_ops changes: replace alloc/free_coherent with generic alloc/free methods.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> [added swiotlb_alloc/free_coherent wrappers] Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
