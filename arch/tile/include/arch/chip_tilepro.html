<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › tile › include › arch › chip_tilepro.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>chip_tilepro.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright 2010 Tilera Corporation. All Rights Reserved.</span>
<span class="cm"> *</span>
<span class="cm"> *   This program is free software; you can redistribute it and/or</span>
<span class="cm"> *   modify it under the terms of the GNU General Public License</span>
<span class="cm"> *   as published by the Free Software Foundation, version 2.</span>
<span class="cm"> *</span>
<span class="cm"> *   This program is distributed in the hope that it will be useful, but</span>
<span class="cm"> *   WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, GOOD TITLE or</span>
<span class="cm"> *   NON INFRINGEMENT.  See the GNU General Public License for</span>
<span class="cm"> *   more details.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * @file</span>
<span class="cm"> * Global header file.</span>
<span class="cm"> * This header file specifies defines for TILEPro.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ARCH_CHIP_H__</span>
<span class="cp">#define __ARCH_CHIP_H__</span>

<span class="cm">/** Specify chip version.</span>
<span class="cm"> * When possible, prefer the CHIP_xxx symbols below for future-proofing.</span>
<span class="cm"> * This is intended for cross-compiling; native compilation should</span>
<span class="cm"> * use the predefined __tile_chip__ symbol.</span>
<span class="cm"> */</span>
<span class="cp">#define TILE_CHIP 1</span>

<span class="cm">/** Specify chip revision.</span>
<span class="cm"> * This provides for the case of a respin of a particular chip type;</span>
<span class="cm"> * the normal value for this symbol is &quot;0&quot;.</span>
<span class="cm"> * This is intended for cross-compiling; native compilation should</span>
<span class="cm"> * use the predefined __tile_chip_rev__ symbol.</span>
<span class="cm"> */</span>
<span class="cp">#define TILE_CHIP_REV 0</span>

<span class="cm">/** The name of this architecture. */</span>
<span class="cp">#define CHIP_ARCH_NAME &quot;tilepro&quot;</span>

<span class="cm">/** The ELF e_machine type for binaries for this chip. */</span>
<span class="cp">#define CHIP_ELF_TYPE() EM_TILEPRO</span>

<span class="cm">/** The alternate ELF e_machine type for binaries for this chip. */</span>
<span class="cp">#define CHIP_COMPAT_ELF_TYPE() 0x2507</span>

<span class="cm">/** What is the native word size of the machine? */</span>
<span class="cp">#define CHIP_WORD_SIZE() 32</span>

<span class="cm">/** How many bits of a virtual address are used. Extra bits must be</span>
<span class="cm"> * the sign extension of the low bits.</span>
<span class="cm"> */</span>
<span class="cp">#define CHIP_VA_WIDTH() 32</span>

<span class="cm">/** How many bits are in a physical address? */</span>
<span class="cp">#define CHIP_PA_WIDTH() 36</span>

<span class="cm">/** Size of the L2 cache, in bytes. */</span>
<span class="cp">#define CHIP_L2_CACHE_SIZE() 65536</span>

<span class="cm">/** Log size of an L2 cache line in bytes. */</span>
<span class="cp">#define CHIP_L2_LOG_LINE_SIZE() 6</span>

<span class="cm">/** Size of an L2 cache line, in bytes. */</span>
<span class="cp">#define CHIP_L2_LINE_SIZE() (1 &lt;&lt; CHIP_L2_LOG_LINE_SIZE())</span>

<span class="cm">/** Associativity of the L2 cache. */</span>
<span class="cp">#define CHIP_L2_ASSOC() 4</span>

<span class="cm">/** Size of the L1 data cache, in bytes. */</span>
<span class="cp">#define CHIP_L1D_CACHE_SIZE() 8192</span>

<span class="cm">/** Log size of an L1 data cache line in bytes. */</span>
<span class="cp">#define CHIP_L1D_LOG_LINE_SIZE() 4</span>

<span class="cm">/** Size of an L1 data cache line, in bytes. */</span>
<span class="cp">#define CHIP_L1D_LINE_SIZE() (1 &lt;&lt; CHIP_L1D_LOG_LINE_SIZE())</span>

<span class="cm">/** Associativity of the L1 data cache. */</span>
<span class="cp">#define CHIP_L1D_ASSOC() 2</span>

<span class="cm">/** Size of the L1 instruction cache, in bytes. */</span>
<span class="cp">#define CHIP_L1I_CACHE_SIZE() 16384</span>

<span class="cm">/** Log size of an L1 instruction cache line in bytes. */</span>
<span class="cp">#define CHIP_L1I_LOG_LINE_SIZE() 6</span>

<span class="cm">/** Size of an L1 instruction cache line, in bytes. */</span>
<span class="cp">#define CHIP_L1I_LINE_SIZE() (1 &lt;&lt; CHIP_L1I_LOG_LINE_SIZE())</span>

<span class="cm">/** Associativity of the L1 instruction cache. */</span>
<span class="cp">#define CHIP_L1I_ASSOC() 1</span>

<span class="cm">/** Stride with which flush instructions must be issued. */</span>
<span class="cp">#define CHIP_FLUSH_STRIDE() CHIP_L2_LINE_SIZE()</span>

<span class="cm">/** Stride with which inv instructions must be issued. */</span>
<span class="cp">#define CHIP_INV_STRIDE() CHIP_L2_LINE_SIZE()</span>

<span class="cm">/** Stride with which finv instructions must be issued. */</span>
<span class="cp">#define CHIP_FINV_STRIDE() CHIP_L2_LINE_SIZE()</span>

<span class="cm">/** Can the local cache coherently cache data that is homed elsewhere? */</span>
<span class="cp">#define CHIP_HAS_COHERENT_LOCAL_CACHE() 1</span>

<span class="cm">/** How many simultaneous outstanding victims can the L2 cache have? */</span>
<span class="cp">#define CHIP_MAX_OUTSTANDING_VICTIMS() 4</span>

<span class="cm">/** Does the TLB support the NC and NOALLOC bits? */</span>
<span class="cp">#define CHIP_HAS_NC_AND_NOALLOC_BITS() 1</span>

<span class="cm">/** Does the chip support hash-for-home caching? */</span>
<span class="cp">#define CHIP_HAS_CBOX_HOME_MAP() 1</span>

<span class="cm">/** Number of entries in the chip&#39;s home map tables. */</span>
<span class="cp">#define CHIP_CBOX_HOME_MAP_SIZE() 64</span>

<span class="cm">/** Do uncacheable requests miss in the cache regardless of whether</span>
<span class="cm"> * there is matching data? */</span>
<span class="cp">#define CHIP_HAS_ENFORCED_UNCACHEABLE_REQUESTS() 1</span>

<span class="cm">/** Does the mf instruction wait for victims? */</span>
<span class="cp">#define CHIP_HAS_MF_WAITS_FOR_VICTIMS() 0</span>

<span class="cm">/** Does the chip have an &quot;inv&quot; instruction that doesn&#39;t also flush? */</span>
<span class="cp">#define CHIP_HAS_INV() 1</span>

<span class="cm">/** Does the chip have a &quot;wh64&quot; instruction? */</span>
<span class="cp">#define CHIP_HAS_WH64() 1</span>

<span class="cm">/** Does this chip have a &#39;dword_align&#39; instruction? */</span>
<span class="cp">#define CHIP_HAS_DWORD_ALIGN() 1</span>

<span class="cm">/** Number of performance counters. */</span>
<span class="cp">#define CHIP_PERFORMANCE_COUNTERS() 4</span>

<span class="cm">/** Does this chip have auxiliary performance counters? */</span>
<span class="cp">#define CHIP_HAS_AUX_PERF_COUNTERS() 1</span>

<span class="cm">/** Is the CBOX_MSR1 SPR supported? */</span>
<span class="cp">#define CHIP_HAS_CBOX_MSR1() 1</span>

<span class="cm">/** Is the TILE_RTF_HWM SPR supported? */</span>
<span class="cp">#define CHIP_HAS_TILE_RTF_HWM() 1</span>

<span class="cm">/** Is the TILE_WRITE_PENDING SPR supported? */</span>
<span class="cp">#define CHIP_HAS_TILE_WRITE_PENDING() 1</span>

<span class="cm">/** Is the PROC_STATUS SPR supported? */</span>
<span class="cp">#define CHIP_HAS_PROC_STATUS_SPR() 1</span>

<span class="cm">/** Is the DSTREAM_PF SPR supported? */</span>
<span class="cp">#define CHIP_HAS_DSTREAM_PF() 0</span>

<span class="cm">/** Log of the number of mshims we have. */</span>
<span class="cp">#define CHIP_LOG_NUM_MSHIMS() 2</span>

<span class="cm">/** Are the bases of the interrupt vector areas fixed? */</span>
<span class="cp">#define CHIP_HAS_FIXED_INTVEC_BASE() 1</span>

<span class="cm">/** Are the interrupt masks split up into 2 SPRs? */</span>
<span class="cp">#define CHIP_HAS_SPLIT_INTR_MASK() 1</span>

<span class="cm">/** Is the cycle count split up into 2 SPRs? */</span>
<span class="cp">#define CHIP_HAS_SPLIT_CYCLE() 1</span>

<span class="cm">/** Does the chip have a static network? */</span>
<span class="cp">#define CHIP_HAS_SN() 1</span>

<span class="cm">/** Does the chip have a static network processor? */</span>
<span class="cp">#define CHIP_HAS_SN_PROC() 0</span>

<span class="cm">/** Size of the L1 static network processor instruction cache, in bytes. */</span>
<span class="cm">/* #define CHIP_L1SNI_CACHE_SIZE() -- does not apply to chip 1 */</span>

<span class="cm">/** Does the chip have DMA support in each tile? */</span>
<span class="cp">#define CHIP_HAS_TILE_DMA() 1</span>

<span class="cm">/** Does the chip have the second revision of the directly accessible</span>
<span class="cm"> *  dynamic networks?  This encapsulates a number of characteristics,</span>
<span class="cm"> *  including the absence of the catch-all, the absence of inline message</span>
<span class="cm"> *  tags, the absence of support for network context-switching, and so on.</span>
<span class="cm"> */</span>
<span class="cp">#define CHIP_HAS_REV1_XDN() 0</span>

<span class="cm">/** Does the chip have cmpexch and similar (fetchadd, exch, etc.)? */</span>
<span class="cp">#define CHIP_HAS_CMPEXCH() 0</span>

<span class="cm">/** Does the chip have memory-mapped I/O support? */</span>
<span class="cp">#define CHIP_HAS_MMIO() 0</span>

<span class="cm">/** Does the chip have post-completion interrupts? */</span>
<span class="cp">#define CHIP_HAS_POST_COMPLETION_INTERRUPTS() 0</span>

<span class="cm">/** Does the chip have native single step support? */</span>
<span class="cp">#define CHIP_HAS_SINGLE_STEP() 0</span>

<span class="cp">#ifndef __OPEN_SOURCE__  </span><span class="cm">/* features only relevant to hypervisor-level code */</span><span class="cp"></span>

<span class="cm">/** How many entries are present in the instruction TLB? */</span>
<span class="cp">#define CHIP_ITLB_ENTRIES() 16</span>

<span class="cm">/** How many entries are present in the data TLB? */</span>
<span class="cp">#define CHIP_DTLB_ENTRIES() 16</span>

<span class="cm">/** How many MAF entries does the XAUI shim have? */</span>
<span class="cp">#define CHIP_XAUI_MAF_ENTRIES() 32</span>

<span class="cm">/** Does the memory shim have a source-id table? */</span>
<span class="cp">#define CHIP_HAS_MSHIM_SRCID_TABLE() 0</span>

<span class="cm">/** Does the L1 instruction cache clear on reset? */</span>
<span class="cp">#define CHIP_HAS_L1I_CLEAR_ON_RESET() 1</span>

<span class="cm">/** Does the chip come out of reset with valid coordinates on all tiles?</span>
<span class="cm"> * Note that if defined, this also implies that the upper left is 1,1.</span>
<span class="cm"> */</span>
<span class="cp">#define CHIP_HAS_VALID_TILE_COORD_RESET() 1</span>

<span class="cm">/** Does the chip have unified packet formats? */</span>
<span class="cp">#define CHIP_HAS_UNIFIED_PACKET_FORMATS() 1</span>

<span class="cm">/** Does the chip support write reordering? */</span>
<span class="cp">#define CHIP_HAS_WRITE_REORDERING() 1</span>

<span class="cm">/** Does the chip support Y-X routing as well as X-Y? */</span>
<span class="cp">#define CHIP_HAS_Y_X_ROUTING() 1</span>

<span class="cm">/** Is INTCTRL_3 managed with the correct MPL? */</span>
<span class="cp">#define CHIP_HAS_INTCTRL_3_STATUS_FIX() 1</span>

<span class="cm">/** Is it possible to configure the chip to be big-endian? */</span>
<span class="cp">#define CHIP_HAS_BIG_ENDIAN_CONFIG() 1</span>

<span class="cm">/** Is the CACHE_RED_WAY_OVERRIDDEN SPR supported? */</span>
<span class="cp">#define CHIP_HAS_CACHE_RED_WAY_OVERRIDDEN() 1</span>

<span class="cm">/** Is the DIAG_TRACE_WAY SPR supported? */</span>
<span class="cp">#define CHIP_HAS_DIAG_TRACE_WAY() 1</span>

<span class="cm">/** Is the MEM_STRIPE_CONFIG SPR supported? */</span>
<span class="cp">#define CHIP_HAS_MEM_STRIPE_CONFIG() 1</span>

<span class="cm">/** Are the TLB_PERF SPRs supported? */</span>
<span class="cp">#define CHIP_HAS_TLB_PERF() 1</span>

<span class="cm">/** Is the VDN_SNOOP_SHIM_CTL SPR supported? */</span>
<span class="cp">#define CHIP_HAS_VDN_SNOOP_SHIM_CTL() 1</span>

<span class="cm">/** Does the chip support rev1 DMA packets? */</span>
<span class="cp">#define CHIP_HAS_REV1_DMA_PACKETS() 1</span>

<span class="cm">/** Does the chip have an IPI shim? */</span>
<span class="cp">#define CHIP_HAS_IPI() 0</span>

<span class="cp">#endif </span><span class="cm">/* !__OPEN_SOURCE__ */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* __ARCH_CHIP_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
