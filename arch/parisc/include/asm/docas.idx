f | hardware.h | s | 4.1K | 111 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: drop include of asm/pdc.h from asm/hardware.h  It seems none of the symbols defined by pdc.h is needed, but it introduces an include loop causing compile errors:  In file included from arch/parisc/include/asm/spinlock.h:4:0,                  from arch/parisc/include/asm/atomic.h:20,                  from include/linux/atomic.h:4,                  from arch/parisc/include/asm/bitops.h:56,                  from include/linux/bitops.h:35,                  from include/asm-generic/getorder.h:7,                  from arch/parisc/include/asm/page.h:162,                  from arch/parisc/include/asm/pdc.h:346,                  from arch/parisc/include/asm/hardware.h:5,                  from arch/parisc/kernel/hardware.c:30: arch/parisc/include/asm/processor.h:74:16: error: field ‘cpu_type’ has incomplete type arch/parisc/include/asm/processor.h:77:20: error: field ‘model’ has incomplete type arch/parisc/include/asm/processor.h: In function ‘parisc_requires_coherency’: arch/parisc/include/asm/processor.h:349:36: error: ‘mako’ undeclared (first use in this function) arch/parisc/include/asm/processor.h:349:36: note: each undeclared identifier is reported only once for each function it appears in arch/parisc/include/asm/processor.h:350:30: error: ‘mako2’ undeclared (first use in this function)  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Acked-by: Grant Grundler <grantgrundler@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kmap_types.h | s | 182B | 8 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | runway.h | s | 281B | 9 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | pci.h | s | 7.2K | 193 | Bjorn Helgaas | bhelgaas@google.com | 1330053544 |  | PCI: collapse pcibios_resource_to_bus  Everybody uses the generic pcibios_resource_to_bus() supplied by the core now, so remove the ARCH_HAS_GENERIC_PCI_OFFSETS used during conversion.  Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | compat.h | s | 3.6K | 145 | Eric W. Biederman | ebiederm@xmission.com | 1319806733 |  | compat: sync compat_stats with statfs.  This was found by inspection while tracking a similar bug in compat_statfs64, that has been fixed in mainline since decemeber.  - This fixes a bug where not all of the f_spare fields   were cleared on mips and s390. - Add the f_flags field to struct compat_statfs - Copy f_flags to userspace in case someone cares. - Use __clear_user to copy the f_spare field to userspace   to ensure that all of the elements of f_spare are cleared.   On some architectures f_spare is has 5 ints and on some   architectures f_spare only has 4 ints.  Which makes   the previous technique of clearing each int individually   broken.  I don't expect anyone actually uses the old statfs system call anymore but if they do let them benefit from having the compat and the native version working the same.  Signed-off-by: Eric W. Biederman <ebiederm@xmission.com> Signed-off-by: Christoph Hellwig <hch@lst.de>
f | io.h | s | 7.8K | 272 | Kyle McMartin | kyle@shortfin.cabal.ca | 1236921648 |  | parisc: define x->x mmio accessors  Bloody inconsiderate driver writers...  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | assembly.h | s | 12K | 468 | Helge Deller | deller@gmx.de | 1236921536 |  | parisc: fix 64bit build  Signed-off-by: Helge Deller <deller@gmx.de> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | agp.h | s | 557B | 16 | David Woodhouse | David.Woodhouse@intel.com | 1249286700 |  | agp: kill phys_to_gart() and gart_to_phys()  There seems to be no reason for these -- they're a 1:1 mapping on all platforms.  Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | sections.h | s | 244B | 9 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | cputime.h | s | 121B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | barrier.h | s | 1.5K | 32 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | mmzone.h | s | 1.6K | 50 | KAMEZAWA Hiroyuki | kamezawa.hiroyu@jp.fujitsu.com | 1309209189 |  | Fix node_start/end_pfn() definition for mm/page_cgroup.c  commit 21a3c96 uses node_start/end_pfn(nid) for detection start/end of nodes. But, it's not defined in linux/mmzone.h but defined in /arch/???/include/mmzone.h which is included only under CONFIG_NEED_MULTIPLE_NODES=y.  Then, we see   mm/page_cgroup.c: In function 'page_cgroup_init':   mm/page_cgroup.c:308: error: implicit declaration of function 'node_start_pfn'   mm/page_cgroup.c:309: error: implicit declaration of function 'node_end_pfn'  So, fixiing page_cgroup.c is an idea...  But node_start_pfn()/node_end_pfn() is a very generic macro and should be implemented in the same manner for all archs. (m32r has different implementation...)  This patch removes definitions of node_start/end_pfn() in each archs and defines a unified one in linux/mmzone.h. It's not under CONFIG_NEED_MULTIPLE_NODES, now.  A result of macro expansion is here (mm/page_cgroup.c)  for !NUMA  start_pfn = ((&contig_page_data)->node_start_pfn);   end_pfn = ({ pg_data_t *__pgdat = (&contig_page_data); __pgdat->node_start_pfn + __pgdat->node_spanned_pages;});  for NUMA (x86-64)   start_pfn = ((node_data[nid])->node_start_pfn);   end_pfn = ({ pg_data_t *__pgdat = (node_data[nid]); __pgdat->node_start_pfn + __pgdat->node_spanned_pages;});  Changelog:  - fixed to avoid using "nid" twice in node_end_pfn() macro.  Reported-and-acked-by: Randy Dunlap <randy.dunlap@oracle.com> Reported-and-tested-by: Ingo Molnar <mingo@elte.hu> Acked-by: Mel Gorman <mgorman@suse.de> Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | delay.h | s | 981B | 33 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | pdcpat.h | s | 13K | 253 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | irq_regs.h | s | 34B | 1 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | cacheflush.h | s | 4.8K | 127 | Cong Wang | amwang@redhat.com | 1332251310 |  | highmem: kill all __kmap_atomic() [swarren@nvidia.com: highmem: Fix ARM build break due to __kmap_atomic rename]  Signed-off-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Cong Wang <amwang@redhat.com>
f | ide.h | s | 1.1K | 46 | Linus Torvalds | torvalds@linux-foundation.org | 1224538831 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/kyle/parisc-2.6  * git://git.kernel.org/pub/scm/linux/kernel/git/kyle/parisc-2.6:   parisc: convert to generic compat_sys_ptrace   parisc: add rtc platform driver   parisc: initialize unwinder much earlier   parisc: add new syscalls   parisc: hijack jump to start_kernel   parisc: add pdc_coproc_cfg_unlocked and set_firmware_width_unlocked   parisc: move include/asm-parisc to arch/parisc/include/asm   parisc: move pdc_result to real2.S   parisc: unify CCIO_COLLECT_STATS implementation   parisc: add arch/parisc/kernel/.gitignore   parisc: ropes.h - fix <asm-parisc/*> -> <asm/*>   parisc: parisc-agp - fix <asm-parisc/*> -> <asm/*>  Resolve remove/rename conflict: include/asm-parisc/a.out.h is no longer relevant.
f | traps.h | s | 304B | 12 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | asmregs.h | s | 3.0K | 165 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | parisc-device.h | s | 1.8K | 51 | Kay Sievers | kay.sievers@vrfy.org | 1227738161 |  | parisc: struct device - replace bus_id with dev_name(), dev_set_name()  (I did not compile or test it, please let me know, or help fixing  it, if something is wrong with the conversion)  This patch is part of a larger patch series which will remove the "char bus_id[20]" name string from struct device. The device name is managed in the kobject anyway, and without any size limitation, and just needlessly copied into "struct device".  To set and read the device name dev_name(dev) and dev_set_name(dev) must be used. If your code uses static kobjects, which it shouldn't do, "const char *init_name" can be used to statically provide the name the registered device should have. At registration time, the init_name field is cleared, to enforce the use of dev_name(dev) to access the device name at a later time.  We need to get rid of all occurrences of bus_id in the entire tree to be able to enable the new interface. Please apply this patch, and possibly convert any remaining remaining occurrences of bus_id.  We want to submit a patch to -next, which will remove bus_id from "struct device", to find the remaining pieces to convert, and finally switch over to the new api, which will remove the 20 bytes array and does no longer have a size limitation.  Thanks, Kay  Cc: Matthew Wilcox <matthew@wil.cx> Cc: linux-parisc@vger.kernel.org Acked-by: Greg Kroah-Hartman <gregkh@suse.de> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | current.h | s | 267B | 10 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | segment.h | s | 134B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | elf.h | s | 13K | 293 | Christoph Hellwig | hch@lst.de | 1260976812 |  | elf: kill USE_ELF_CORE_DUMP  Currently all architectures but microblaze unconditionally define USE_ELF_CORE_DUMP.  The microblaze omission seems like an error to me, so let's kill this ifdef and make sure we are the same everywhere.  Signed-off-by: Christoph Hellwig <hch@lst.de> Acked-by: Hugh Dickins <hugh.dickins@tiscali.co.uk> Cc: <linux-arch@vger.kernel.org> Cc: Michal Simek <michal.simek@petalogix.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tlb.h | s | 633B | 20 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1248721838 |  | mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  Upcoming paches to support the new 64-bit "BookE" powerpc architecture will need to have the virtual address corresponding to PTE page when freeing it, due to the way the HW table walker works.  Basically, the TLB can be loaded with "large" pages that cover the whole virtual space (well, sort-of, half of it actually) represented by a PTE page, and which contain an "indirect" bit indicating that this TLB entry RPN points to an array of PTEs from which the TLB can then create direct entries. Thus, in order to invalidate those when PTE pages are deleted, we need the virtual address to pass to tlbilx or tlbivax instructions.  The old trick of sticking it somewhere in the PTE page struct page sucks too much, the address is almost readily available in all call sites and almost everybody implemets these as macros, so we may as well add the argument everywhere. I added it to the pmd and pud variants for consistency.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: David Howells <dhowells@redhat.com> [MN10300 & FRV] Acked-by: Nick Piggin <npiggin@suse.de> Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [s390] Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | resource.h | s | 140B | 5 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | serial.h | s | 150B | 8 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | unaligned.h | s | 433B | 13 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | ucontext.h | s | 288B | 10 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | perf.h | s | 1.9K | 67 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | ldcw.h | s | 1.6K | 40 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | eisa_eeprom.h | s | 4.4K | 127 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | pdc_chassis.h | s | 15K | 343 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | termios.h | s | 2.6K | 77 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | bitsperlong.h | s | 493B | 17 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | smp.h | s | 1.2K | 38 | James Bottomley | jbottomley@parallels.com | 1337945745 |  | [PARISC] Fix parisc compile failure after smp: Add task_struct argument to __cpu_up()  commit 8239c25f47d2b318156993b15f33900a86ea5e17 added an argument to our __cpu_up() function, but didn't notice we have an extra definition for this in asm/smp.h resulting in a compile failure.  Fix by removing the extraneous parisc definition of __cpu_up().  While we're at it, remove the duplicated definition of smp_send_reschedule().  Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | ioctls.h | s | 3.2K | 83 | Kay Sievers | kay.sievers@vrfy.org | 1297980990 |  | tty: add TIOCVHANGUP to allow clean tty shutdown of all ttys  This is useful for system management software so that it can kick off things like gettys and everything that's started from a tty, before we reuse it from/for something else or shut it down.  Without this ioctl it would have to temporarily become the owner of the tty, then call vhangup() and then give it up again.  Cc: Lennart Poettering <lennart@poettering.net> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | siginfo.h | s | 130B | 6 | Linus Torvalds | torvalds@linux-foundation.org | 1224538831 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/kyle/parisc-2.6  * git://git.kernel.org/pub/scm/linux/kernel/git/kyle/parisc-2.6:   parisc: convert to generic compat_sys_ptrace   parisc: add rtc platform driver   parisc: initialize unwinder much earlier   parisc: add new syscalls   parisc: hijack jump to start_kernel   parisc: add pdc_coproc_cfg_unlocked and set_firmware_width_unlocked   parisc: move include/asm-parisc to arch/parisc/include/asm   parisc: move pdc_result to real2.S   parisc: unify CCIO_COLLECT_STATS implementation   parisc: add arch/parisc/kernel/.gitignore   parisc: ropes.h - fix <asm-parisc/*> -> <asm/*>   parisc: parisc-agp - fix <asm-parisc/*> -> <asm/*>  Resolve remove/rename conflict: include/asm-parisc/a.out.h is no longer relevant.
f | led.h | s | 1.3K | 33 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | dma-mapping.h | s | 7.8K | 207 | Paul Bolle | pebolle@tiscali.nl | 1317139684 |  | doc: fix broken references  There are numerous broken references to Documentation files (in other Documentation files, in comments, etc.). These broken references are caused by typo's in the references, and by renames or removals of the Documentation files. Some broken references are simply odd.  Fix these broken references, sometimes by dropping the irrelevant text they were part of.  Signed-off-by: Paul Bolle <pebolle@tiscali.nl> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | ropes.h | s | 9.7K | 258 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | grfioctl.h | s | 4.7K | 103 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | mckinley.h | s | 231B | 7 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | types.h | s | 91B | 4 | Al Viro | viro@zeniv.linux.org.uk | 1325649317 |  | consolidate umode_t declarations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | kdebug.h | s | 32B | 1 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | bugs.h | s | 301B | 16 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | hw_irq.h | s | 90B | 6 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | bitops.h | s | 5.9K | 190 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dma.h | s | 5.7K | 153 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | checksum.h | s | 5.5K | 185 | Kyle McMartin | kyle@mcmartin.ca | 1231182665 |  | parisc: fix ipv6 checksum  ipv6 recently started exhibiting the same symptoms as ipv4 was, add a memory clobber around inline checksum assembly that fribbles memory to ensure gcc doesn't erroneously cache across it.  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | eisa_bus.h | s | 702B | 20 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | errno.h | s | 5.6K | 111 | Huang Ying | ying.huang@intel.com | 1300378107 |  | mm: make __get_user_pages return -EHWPOISON for HWPOISON page optionally  Make __get_user_pages return -EHWPOISON for HWPOISON page only if FOLL_HWPOISON is specified.  With this patch, the interested callers can distinguish HWPOISON pages from general FAULT pages, while other callers will still get -EFAULT for all these pages, so the user space interface need not to be changed.  This feature is needed by KVM, where UCR MCE should be relayed to guest for HWPOISON page, while instruction emulation and MMIO will be tried for general FAULT page.  The idea comes from Andrew Morton.  Signed-off-by: Huang Ying <ying.huang@intel.com> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | fixmap.h | s | 1.1K | 26 | Helge Deller | deller@gmx.de | 1254108424 |  | parisc: rename parisc's vmalloc_start to parisc_vmalloc_start  building kernel 2.6.32(pre), gives this compiler warning: /linus-linux-2.6/mm/vmalloc.c: In function 'pcpu_get_vm_areas': /linus-linux-2.6/mm/vmalloc.c:2104: warning: 'vmalloc_start' is used uninitialized in this function  The reason is, that the code in mm/vmalloc defines a local variable called vmalloc_start, which is already defined as global variable in parisc's code.  To avoid this kind of problems in future, I suggest to rename the parisc variable to parisc_vmalloc_start.  Signed-off-by: Helge Deller <deller@gmx.de> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | setup.h | s | 110B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | real.h | s | 55B | 3 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | ptrace.h | s | 1.8K | 51 | Mike Frysinger | vapier@gentoo.org | 1311724183 |  | ptrace: unify show_regs() prototype  [ poleg@redhat.com: no need to declare show_regs() in ptrace.h, sched.h does this ] Signed-off-by: Mike Frysinger <vapier@gentoo.org> Cc: Tejun Heo <tj@kernel.org> Signed-off-by: Oleg Nesterov <oleg@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmu_context.h | s | 1.7K | 64 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unwind.h | s | 2.5K | 70 | James Bottomley | James.Bottomley@HansenPartnership.com | 1223656350 |  | parisc: initialize unwinder much earlier  The unwinder was being initialized way too late to be any use debugging early boot crashes. Instead of relying on module_init initcalls to initialize it, let's do it explicitly as early as we can.  Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | mc146818rtc.h | s | 212B | 7 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | cache.h | s | 1.7K | 45 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1287710409 |  | parisc: remove homegrown L1_CACHE_ALIGN macro  Let's use the standard L1_CACHE_ALIGN macro instead.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Signed-off-by: Kyle McMartin <kyle@redhat.com>
f | ftrace.h | s | 897B | 30 | Helge Deller | deller@gmx.de | 1260935334 |  | parisc: add CALLER_ADDR{0-6} macros  Signed-off-by: Helge Deller <deller@gmx.de> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | floppy.h | s | 6.6K | 227 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 | Architecture specific parts of the Floppy driver | parisc: move include/asm-parisc to arch/parisc/include/asm
f | user.h | s | 284B | 5 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | statfs.h | s | 118B | 5 | Linus Torvalds | torvalds@linux-foundation.org | 1224538831 |  | Merge git://git.kernel.org/pub/scm/linux/kernel/git/kyle/parisc-2.6  * git://git.kernel.org/pub/scm/linux/kernel/git/kyle/parisc-2.6:   parisc: convert to generic compat_sys_ptrace   parisc: add rtc platform driver   parisc: initialize unwinder much earlier   parisc: add new syscalls   parisc: hijack jump to start_kernel   parisc: add pdc_coproc_cfg_unlocked and set_firmware_width_unlocked   parisc: move include/asm-parisc to arch/parisc/include/asm   parisc: move pdc_result to real2.S   parisc: unify CCIO_COLLECT_STATS implementation   parisc: add arch/parisc/kernel/.gitignore   parisc: ropes.h - fix <asm-parisc/*> -> <asm/*>   parisc: parisc-agp - fix <asm-parisc/*> -> <asm/*>  Resolve remove/rename conflict: include/asm-parisc/a.out.h is no longer relevant.
f | psw.h | s | 2.3K | 82 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | exec.h | s | 111B | 4 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | xor.h | s | 29B | 1 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | bug.h | s | 2.3K | 81 | James Bottomley | JBottomley@Parallels.com | 1338873017 |  | [PARISC] fix missing TAINT_WARN problem  Al viro broke us with  commit edd63a2763bdae0daa4f0a4d4c5d61d1154352a5 Author: Al Viro <viro@zeniv.linux.org.uk> Date:   Fri Apr 27 13:42:45 2012 -0400      set_restore_sigmask() is never called without SIGPENDING (and never should be)  Although it's pretty much our fault since parisc's asm/bug.h uses BUGWARN_TAINT but doesn't include the file that defines it.  Fix that.  Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | termbits.h | s | 4.6K | 184 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | hardirq.h | s | 220B | 8 | Christoph Hellwig | hch@lst.de | 1254111863 |  | parisc: convert to asm-generic/hardirq.h  Signed-off-by: Christoph Hellwig <hch@lst.de> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | sigcontext.h | s | 494B | 15 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | futex.h | s | 3.5K | 130 | John David Anglin | dave@hiauly1.hia.nrc.ca | 1330356908 |  | [PARISC] futex: Use same lock set as lws calls  In debugging the failure of the glibc tst-cond18 test on parisc, I realized that futexes need to use the same locks the lws calls.  This fixes all the pthread 'cond' tests.  Sadly, there are still problems with thread cancellation.  [jejb: checkpatch fixes] Signed-off-by: John David Anglin <dave.anglin@bell.net> Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | Kbuild | g | 88B |  | James Bottomley | JBottomley@Parallels.com | 1338873022 |  | [PARISC] fix compile break in use of lib/strncopy_from_user.c  Linus broke us with  commit 36126f8f2ed8168eb13aa0662b9b9585cba100a9 Author: Linus Torvalds <torvalds@linux-foundation.org> Date:   Sat May 26 10:43:17 2012 -0700      word-at-a-time: make the interfaces truly generic  By moving functions defined in strncopy_from_user.c into the asm-geneic version word-at-a-time.h.  Spark and OpenRisc were fixed to use this, but not parisc.  Fix by adding to generic-y in asm/Kbuild  Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | mmu.h | s | 156B | 5 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | parport.h | s | 329B | 14 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | atomic.h | s | 6.3K | 186 | Paul Gortmaker | paul.gortmaker@windriver.com | 1333402886 |  | parisc: fix missing cmpxchg file error from system.h split  Commit b4816afa3986 ("Move the asm-generic/system.h xchg() implementation to asm-generic/cmpxchg.h") introduced the concept of asm/cmpxchg.h but the parisc arch never got one.  Fork the cmpxchg content out of the asm/atomic.h file to create one.  Some minor whitespace fixups were done on the block of code that created the new file.  Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | posix_types.h | s | 639B | 17 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | spinlock_types.h | s | 444B | 17 | Thomas Gleixner | tglx@linutronix.de | 1260831332 |  | locking: Convert raw_rwlock to arch_rwlock  Not strictly necessary for -rt as -rt does not have non sleeping rwlocks, but it's odd to not have a consistent naming convention.  No functional change.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Peter Zijlstra <peterz@infradead.org> Acked-by: David S. Miller <davem@davemloft.net> Acked-by: Ingo Molnar <mingo@elte.hu> Cc: linux-arch@vger.kernel.org
f | device.h | s | 129B | 6 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | tlbflush.h | s | 2.3K | 67 | Helge Deller | deller@gmx.de | 1246592049 |  | parisc: ensure broadcast tlb purge runs single threaded  The TLB flushing functions on hppa, which causes PxTLB broadcasts on the system bus, needs to be protected by irq-safe spinlocks to avoid irq handlers to deadlock the kernel. The deadlocks only happened during I/O intensive loads and triggered pretty seldom, which is why this bug went so long unnoticed.  Signed-off-by: Helge Deller <deller@gmx.de> [edited to use spin_lock_irqsave on UP as well since we'd been locking there  all this time anyway, --kyle] Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | linkage.h | s | 550B | 25 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | local.h | s | 31B | 1 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | mutex.h | s | 308B | 8 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | unistd.h | s | 42K | 977 | James Bottomley | James.Bottomley@HansenPartnership.com | 1312154288 |  | [PARISC] wire up sendmmsg syscall  Cc: stable@kernel.org Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | perf_event.h | s | 152B | 4 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1287424730 |  | irq_work: Add generic hardirq context callbacks  Provide a mechanism that allows running code in IRQ context. It is most useful for NMI code that needs to interact with the rest of the system -- like wakeup a task to drain buffers.  Perf currently has such a mechanism, so extract that and provide it as a generic feature, independent of perf so that others may also benefit.  The IRQ context callback is generated through self-IPIs where possible, or on architectures like powerpc the decrementer (the built-in timer facility) is set to generate an interrupt immediately.  Architectures that don't have anything like this get to do with a callback from the timer tick. These architectures can call irq_work_run() at the tail of any IRQ handlers that might enqueue such work (like the perf IRQ handler) to avoid undue latencies in processing the work.  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Acked-by: Kyle McMartin <kyle@mcmartin.ca> Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [ various fixes ] Signed-off-by: Huang Ying <ying.huang@intel.com> LKML-Reference: <1287036094.7768.291.camel@yhuang-dev> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | irqflags.h | s | 1007B | 37 | David Howells | dhowells@redhat.com | 1286456935 |  | Fix IRQ flag handling naming  Fix the IRQ flag handling naming.  In linux/irqflags.h under one configuration, it maps:  	local_irq_enable() -> raw_local_irq_enable() 	local_irq_disable() -> raw_local_irq_disable() 	local_irq_save() -> raw_local_irq_save() 	...  and under the other configuration, it maps:  	raw_local_irq_enable() -> local_irq_enable() 	raw_local_irq_disable() -> local_irq_disable() 	raw_local_irq_save() -> local_irq_save() 	...  This is quite confusing.  There should be one set of names expected of the arch, and this should be wrapped to give another set of names that are expected by users of this facility.  Change this to have the arch provide:  	flags = arch_local_save_flags() 	flags = arch_local_irq_save() 	arch_local_irq_restore(flags) 	arch_local_irq_disable() 	arch_local_irq_enable() 	arch_irqs_disabled_flags(flags) 	arch_irqs_disabled() 	arch_safe_halt()  Then linux/irqflags.h wraps these to provide:  	raw_local_save_flags(flags) 	raw_local_irq_save(flags) 	raw_local_irq_restore(flags) 	raw_local_irq_disable() 	raw_local_irq_enable() 	raw_irqs_disabled_flags(flags) 	raw_irqs_disabled() 	raw_safe_halt()  with type checking on the flags 'arguments', and then wraps those to provide:  	local_save_flags(flags) 	local_irq_save(flags) 	local_irq_restore(flags) 	local_irq_disable() 	local_irq_enable() 	irqs_disabled_flags(flags) 	irqs_disabled() 	safe_halt()  with tracing included if enabled.  The arch functions can now all be inline functions rather than some of them having to be macros.  Signed-off-by: David Howells <dhowells@redhat.com> [X86, FRV, MN10300] Signed-off-by: Chris Metcalf <cmetcalf@tilera.com> [Tile] Signed-off-by: Michal Simek <monstr@monstr.eu> [Microblaze] Tested-by: Catalin Marinas <catalin.marinas@arm.com> [ARM] Acked-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Haavard Skinnemoen <haavard.skinnemoen@atmel.com> [AVR] Acked-by: Tony Luck <tony.luck@intel.com> [IA-64] Acked-by: Hirokazu Takata <takata@linux-m32r.org> [M32R] Acked-by: Greg Ungerer <gerg@uclinux.org> [M68K/M68KNOMMU] Acked-by: Ralf Baechle <ralf@linux-mips.org> [MIPS] Acked-by: Kyle McMartin <kyle@mcmartin.ca> [PA-RISC] Acked-by: Paul Mackerras <paulus@samba.org> [PowerPC] Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [S390] Acked-by: Chen Liqin <liqin.chen@sunplusct.com> [Score] Acked-by: Matt Fleming <matt@console-pimps.org> [SH] Acked-by: David S. Miller <davem@davemloft.net> [Sparc] Acked-by: Chris Zankel <chris@zankel.net> [Xtensa] Reviewed-by: Richard Henderson <rth@twiddle.net> [Alpha] Reviewed-by: Yoshinori Sato <ysato@users.sourceforge.jp> [H8300] Cc: starvik@axis.com [CRIS] Cc: jesper.nilsson@axis.com [CRIS] Cc: linux-cris-kernel@axis.com
f | topology.h | s | 134B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | ioctl.h | s | 1.6K | 38 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | kbdleds.h | s | 438B | 16 | Joshua Cov | joshuacov@googlemail.com | 1336511981 |  | keyboard: Use BIOS Keyboard variable to set Numlock  The PC BIOS does provide a NUMLOCK flag containing the desired state of this LED. This patch sets the current state according to the data in the bios.  [ hpa: fixed __weak declaration without definition, changed "inline"   to "static inline" ]  Signed-Off-By: Joshua Cov <joshuacov@googlemail.com> Link: http://lkml.kernel.org/r/CAKL7Q7rvq87TNS1T_Km8fW_5OzS%2BSbYazLXKxW-6ztOxo3zorg@mail.gmail.com Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | string.h | s | 208B | 7 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | syscall.h | s | 702B | 34 | Kyle McMartin | kyle@mcmartin.ca | 1254107243 |  | parisc: add skeleton syscall.h  Needed for lib/syscall.c when HAVE_ARCH_TRACEHOOK.  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | processor.h | s | 10K | 306 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | module.h | s | 763B | 31 | Helge Deller | deller@gmx.de | 1231107014 |  | parisc: fix module loading failure of large kernel modules  On 32bit (and sometimes 64bit) and with big kernel modules like xfs or ipv6 the relocation types R_PARISC_PCREL17F and R_PARISC_PCREL22F may fail to reach their PLT stub if we only create one big stub array for all sections at the beginning of the core or init section.  With this patch we now instead add individual PLT stub entries directly in front of the code sections where the stubs are actually called. This reduces the distance between the PCREL location and the stub entry so that the relocations can be fulfilled.  While calculating the final layout of the kernel module in memory, the kernel module loader calls arch_mod_section_prepend() to request the to be reserved amount of memory in front of each individual section.  Tested with 32- and 64bit kernels.  Signed-off-by: Helge Deller <deller@gmx.de> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | compat_ucontext.h | s | 552B | 14 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | poll.h | s | 30B | 1 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | page.h | s | 4.7K | 132 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: move definition of PAGE0 to asm/page.h  This was defined in asm/pdc.h which needs to include asm/page.h for __PAGE_OFFSET. This leads to an include loop so that page.h eventually will include pdc.h again. While this is no problem because of header guards, it is a problem because some symbols may be undefined. Such an error is this:  In file included from include/linux/bitops.h:35:0,                  from include/asm-generic/getorder.h:7,                  from arch/parisc/include/asm/page.h:162,                  from arch/parisc/include/asm/pdc.h:346,                  from arch/parisc/include/asm/processor.h:16,                  from arch/parisc/include/asm/spinlock.h:6,                  from arch/parisc/include/asm/atomic.h:20,                  from include/linux/atomic.h:4,                  from include/linux/sysfs.h:20,                  from include/linux/kobject.h:21,                  from include/linux/device.h:17,                  from include/linux/eisa.h:5,                  from arch/parisc/kernel/pci.c:11: arch/parisc/include/asm/bitops.h: In function ‘set_bit’: arch/parisc/include/asm/bitops.h:82:2: error: implicit declaration of function ‘_atomic_spin_lock_irqsave’ [-Werror=implicit-function-declaration] arch/parisc/include/asm/bitops.h:84:2: error: implicit declaration of function ‘_atomic_spin_unlock_irqrestore’ [-Werror=implicit-function-declaration]  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | percpu.h | s | 93B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | superio.h | s | 3.2K | 70 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | special_insns.h | s | 844B | 34 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | pdc.h | s | 24K | 646 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: move definition of PAGE0 to asm/page.h  This was defined in asm/pdc.h which needs to include asm/page.h for __PAGE_OFFSET. This leads to an include loop so that page.h eventually will include pdc.h again. While this is no problem because of header guards, it is a problem because some symbols may be undefined. Such an error is this:  In file included from include/linux/bitops.h:35:0,                  from include/asm-generic/getorder.h:7,                  from arch/parisc/include/asm/page.h:162,                  from arch/parisc/include/asm/pdc.h:346,                  from arch/parisc/include/asm/processor.h:16,                  from arch/parisc/include/asm/spinlock.h:6,                  from arch/parisc/include/asm/atomic.h:20,                  from include/linux/atomic.h:4,                  from include/linux/sysfs.h:20,                  from include/linux/kobject.h:21,                  from include/linux/device.h:17,                  from include/linux/eisa.h:5,                  from arch/parisc/kernel/pci.c:11: arch/parisc/include/asm/bitops.h: In function ‘set_bit’: arch/parisc/include/asm/bitops.h:82:2: error: implicit declaration of function ‘_atomic_spin_lock_irqsave’ [-Werror=implicit-function-declaration] arch/parisc/include/asm/bitops.h:84:2: error: implicit declaration of function ‘_atomic_spin_unlock_irqrestore’ [-Werror=implicit-function-declaration]  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | auxvec.h | s | 66B | 3 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | cmpxchg.h | s | 3.4K | 102 | Paul Gortmaker | paul.gortmaker@windriver.com | 1333402886 |  | parisc: fix missing cmpxchg file error from system.h split  Commit b4816afa3986 ("Move the asm-generic/system.h xchg() implementation to asm-generic/cmpxchg.h") introduced the concept of asm/cmpxchg.h but the parisc arch never got one.  Fork the cmpxchg content out of the asm/atomic.h file to create one.  Some minor whitespace fixups were done on the block of code that created the new file.  Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | div64.h | s | 31B | 1 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | param.h | s | 31B | 1 | Robert P. J. Day | rpjday@crashcourse.ca | 1267916050 |  | parisc: Simplify param.h by including <asm-generic/param.h>  Signed-off-by: Robert P. J. Day <rpjday@crashcourse.ca> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | pgalloc.h | s | 4.0K | 126 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | rt_sigframe.h | s | 706B | 19 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | scatterlist.h | s | 246B | 7 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | swab.h | s | 1.7K | 59 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466287 |  | headers_check fix: parisc, swab.h  fix the following 'make headers_check' warnings:    usr/include/asm-parisc/swab.h:4: include of <linux/types.h> is preferred over <asm/types.h>   usr/include/asm-parisc/swab.h:9: found __[us]{8,16,32,64} type without #include <linux/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | fb.h | s | 364B | 15 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | compat_signal.h | s | 57B | 2 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | thread_info.h | s | 2.7K | 66 | Al Viro | viro@zeniv.linux.org.uk | 1338569930 |  | TIF_RESTORE_SIGMASK can be set only when TIF_SIGPENDING is set  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | irq.h | s | 1.2K | 39 | Thomas Gleixner | tglx@linutronix.de | 1297354934 |  | [PARISC] Convert to new irq_chip functions  Convert all the parisc driver interrupt handlers (dino, eisa, gsc, iosapic and superio) as well as the cpu interrupts.  Prepare show_interrupts for GENERIC_HARDIRQS_NO_DEPRECATED and finally selects that Kconfig option  [jejb: compile and testing fixes] Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | fcntl.h | s | 1.1K | 32 | Stephen Rothwell | sfr@canb.auug.org.au | 1300283642 |  | vfs: add nonconflicting values for O_PATH  [AV: on architectures where default conflicts with existing flags, that is]  Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | timex.h | s | 304B | 14 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | socket.h | s | 1.9K | 60 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | pgtable.h | s | 17K | 416 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: add missing include of asm/page.h to asm/pgtable.h  Fixes these errors:  In file included from arch/parisc/include/asm/io.h:5:0,                  from include/linux/io.h:22,                  from include/linux/pci.h:54,                  from arch/parisc/kernel/setup.c:35: arch/parisc/include/asm/pgtable.h:92:6: warning: "PAGE_SHIFT" is not defined [-Wundef] arch/parisc/include/asm/pgtable.h:92:6: warning: "PAGE_SHIFT" is not defined [-Wundef] arch/parisc/include/asm/pgtable.h:92:6: warning: "BITS_PER_PTE_ENTRY" is not defined [-Wundef]  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | compat_rt_sigframe.h | s | 1.8K | 44 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | ipcbuf.h | s | 678B | 24 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | stat.h | s | 2.5K | 91 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | parisc: get rid of nlink_t, switch to explicitly-sized type  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | shmbuf.h | s | 1.6K | 54 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | machdep.h | s | 310B | 11 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | switch_to.h | s | 293B | 8 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | uaccess.h | s | 9.2K | 231 | James Bottomley | JBottomley@Parallels.com | 1338459277 |  | [PARISC] update parisc to use generic strncpy_from_user()  Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | prefetch.h | s | 1.1K | 38 | James Bottomley | JBottomley@Parallels.com | 1337170521 |  | [PARISC] fix panic on prefetch(NULL) on PA7300LC  Due to an errata, the PA7300LC generates a TLB miss interruption even on the prefetch instruction.  This means that prefetch(NULL), which is supposed to be a nop on linux actually generates a NULL deref fault.  Fix this by testing the address of prefetch against NULL before doing the prefetch.  Cc: stable@vger.kernel.org Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | signal.h | s | 3.8K | 126 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | vga.h | s | 108B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | mman.h | s | 3.4K | 60 | Jason Baron | jbaron@redhat.com | 1332547122 |  | coredump: add VM_NODUMP, MADV_NODUMP, MADV_CLEAR_NODUMP  Since we no longer need the VM_ALWAYSDUMP flag, let's use the freed bit for 'VM_NODUMP' flag.  The idea is is to add a new madvise() flag: MADV_DONTDUMP, which can be set by applications to specifically request memory regions which should not dump core.  The specific application I have in mind is qemu: we can add a flag there that wouldn't dump all of guest memory when qemu dumps core.  This flag might also be useful for security sensitive apps that want to absolutely make sure that parts of memory are not dumped.  To clear the flag use: MADV_DODUMP.  [akpm@linux-foundation.org: s/MADV_NODUMP/MADV_DONTDUMP/, s/MADV_CLEAR_NODUMP/MADV_DODUMP/, per Roland] [akpm@linux-foundation.org: fix up the architectures which broke] Signed-off-by: Jason Baron <jbaron@redhat.com> Acked-by: Roland McGrath <roland@hack.frob.com> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Avi Kivity <avi@redhat.com> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rtc.h | s | 3.1K | 100 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | emergency-restart.h | s | 149B | 4 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | msgbuf.h | s | 1.0K | 34 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | spinlock.h | s | 4.7K | 168 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: add missing includes in asm/spinlock.h  This leads to this errors:  In file included from arch/parisc/include/asm/atomic.h:20:0,                  from include/linux/atomic.h:4,                  from arch/parisc/include/asm/bitops.h:56,                  from include/linux/bitops.h:22,                  from include/linux/kernel.h:19,                  from include/linux/sched.h:55,                  from arch/parisc/kernel/asm-offsets.c:31: arch/parisc/include/asm/spinlock.h: In function ‘arch_spin_is_locked’: arch/parisc/include/asm/spinlock.h:9:2: error: implicit declaration of function ‘__ldcw_align’ [-Werror=implicit-function-declaration] arch/parisc/include/asm/spinlock.h:9:29: warning: initialization makes pointer from integer without a cast [enabled by default] arch/parisc/include/asm/spinlock.h: In function ‘arch_spin_lock_flags’: arch/parisc/include/asm/spinlock.h:22:2: error: implicit declaration of function ‘mb’ [-Werror=implicit-function-declaration] arch/parisc/include/asm/spinlock.h:23:4: warning: assignment makes pointer from integer without a cast [enabled by default] arch/parisc/include/asm/spinlock.h:24:2: error: implicit declaration of function ‘__ldcw’ [-Werror=implicit-function-declaration]  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | byteorder.h | s | 131B | 4 | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sockios.h | s | 347B | 11 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | shmparam.h | s | 200B | 5 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
f | sembuf.h | s | 750B | 26 | Kyle McMartin | kyle@mcmartin.ca | 1223656349 |  | parisc: move include/asm-parisc to arch/parisc/include/asm
