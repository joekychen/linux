<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › parisc › include › asm › pdcpat.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>pdcpat.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __PARISC_PATPDC_H</span>
<span class="cp">#define __PARISC_PATPDC_H</span>

<span class="cm">/*</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2000 (c) Hewlett Packard (Paul Bame &lt;bame()spam.parisc-linux.org&gt;)</span>
<span class="cm"> * Copyright 2000,2004 (c) Grant Grundler &lt;grundler()nahspam.parisc-linux.org&gt;</span>
<span class="cm"> */</span>


<span class="cp">#define PDC_PAT_CELL           	64L   </span><span class="cm">/* Interface for gaining and </span>
<span class="cm">                                         * manipulatin g cell state within PD */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_NUMBER    0L   </span><span class="cm">/* Return Cell number */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_INFO      1L   </span><span class="cm">/* Returns info about Cell */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_MODULE        2L   </span><span class="cm">/* Returns info about Module */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_SET_ATTENTION 9L   </span><span class="cm">/* Set Cell Attention indicator */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_NUMBER_TO_LOC 10L   </span><span class="cm">/* Cell Number -&gt; Location */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_WALK_FABRIC   11L   </span><span class="cm">/* Walk the Fabric */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_RDT_SIZE  12L   </span><span class="cm">/* Return Route Distance Table Sizes */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_RDT       13L   </span><span class="cm">/* Return Route Distance Tables */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_LOCAL_PDH_SZ 14L </span><span class="cm">/* Read Local PDH Buffer Size */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_SET_LOCAL_PDH    15L  </span><span class="cm">/* Write Local PDH Buffer */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_REMOTE_PDH_SZ 16L </span><span class="cm">/* Return Remote PDH Buffer Size */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_REMOTE_PDH 17L </span><span class="cm">/* Read Remote PDH Buffer */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_GET_DBG_INFO   128L  </span><span class="cm">/* Return DBG Buffer Info */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CELL_CHANGE_ALIAS   129L  </span><span class="cm">/* Change Non-Equivalent Alias Chacking */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm">** Arg to PDC_PAT_CELL_MODULE memaddr[4]</span>
<span class="cm">**</span>
<span class="cm">** Addresses on the Merced Bus != all Runway Bus addresses.</span>
<span class="cm">** This is intended for programming SBA/LBA chips range registers.</span>
<span class="cm">*/</span>
<span class="cp">#define IO_VIEW      0UL</span>
<span class="cp">#define PA_VIEW      1UL</span>

<span class="cm">/* PDC_PAT_CELL_MODULE entity type values */</span>
<span class="cp">#define	PAT_ENTITY_CA	0	</span><span class="cm">/* central agent */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_PROC	1	</span><span class="cm">/* processor */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_MEM	2	</span><span class="cm">/* memory controller */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_SBA	3	</span><span class="cm">/* system bus adapter */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_LBA	4	</span><span class="cm">/* local bus adapter */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_PBC	5	</span><span class="cm">/* processor bus converter */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_XBC	6	</span><span class="cm">/* crossbar fabric connect */</span><span class="cp"></span>
<span class="cp">#define	PAT_ENTITY_RC	7	</span><span class="cm">/* fabric interconnect */</span><span class="cp"></span>

<span class="cm">/* PDC_PAT_CELL_MODULE address range type values */</span>
<span class="cp">#define PAT_PBNUM           0         </span><span class="cm">/* PCI Bus Number */</span><span class="cp"></span>
<span class="cp">#define PAT_LMMIO           1         </span><span class="cm">/* &lt; 4G MMIO Space */</span><span class="cp"></span>
<span class="cp">#define PAT_GMMIO           2         </span><span class="cm">/* &gt; 4G MMIO Space */</span><span class="cp"></span>
<span class="cp">#define PAT_NPIOP           3         </span><span class="cm">/* Non Postable I/O Port Space */</span><span class="cp"></span>
<span class="cp">#define PAT_PIOP            4         </span><span class="cm">/* Postable I/O Port Space */</span><span class="cp"></span>
<span class="cp">#define PAT_AHPA            5         </span><span class="cm">/* Addional HPA Space */</span><span class="cp"></span>
<span class="cp">#define PAT_UFO             6         </span><span class="cm">/* HPA Space (UFO for Mariposa) */</span><span class="cp"></span>
<span class="cp">#define PAT_GNIP            7         </span><span class="cm">/* GNI Reserved Space */</span><span class="cp"></span>



<span class="cm">/* PDC PAT CHASSIS LOG -- Platform logging &amp; forward progress functions */</span>

<span class="cp">#define PDC_PAT_CHASSIS_LOG		65L</span>
<span class="cp">#define PDC_PAT_CHASSIS_WRITE_LOG    	0L </span><span class="cm">/* Write Log Entry */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CHASSIS_READ_LOG     	1L </span><span class="cm">/* Read  Log Entry */</span><span class="cp"></span>


<span class="cm">/* PDC PAT CPU  -- CPU configuration within the protection domain */</span>

<span class="cp">#define PDC_PAT_CPU                	67L</span>
<span class="cp">#define PDC_PAT_CPU_INFO            	0L </span><span class="cm">/* Return CPU config info */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_DELETE          	1L </span><span class="cm">/* Delete CPU */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_ADD             	2L </span><span class="cm">/* Add    CPU */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_GET_NUMBER      	3L </span><span class="cm">/* Return CPU Number */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_GET_HPA         	4L </span><span class="cm">/* Return CPU HPA */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_STOP            	5L </span><span class="cm">/* Stop   CPU */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_RENDEZVOUS      	6L </span><span class="cm">/* Rendezvous CPU */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_GET_CLOCK_INFO  	7L </span><span class="cm">/* Return CPU Clock info */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_GET_RENDEZVOUS_STATE 8L </span><span class="cm">/* Return Rendezvous State */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_PLUNGE_FABRIC 	128L </span><span class="cm">/* Plunge Fabric */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_CPU_UPDATE_CACHE_CLEANSING 129L </span><span class="cm">/* Manipulate Cache </span>
<span class="cm">                                                 * Cleansing Mode */</span><span class="cp"></span>
<span class="cm">/*  PDC PAT EVENT -- Platform Events */</span>

<span class="cp">#define PDC_PAT_EVENT              	68L</span>
<span class="cp">#define PDC_PAT_EVENT_GET_CAPS     	0L </span><span class="cm">/* Get Capabilities */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_EVENT_SET_MODE     	1L </span><span class="cm">/* Set Notification Mode */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_EVENT_SCAN         	2L </span><span class="cm">/* Scan Event */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_EVENT_HANDLE       	3L </span><span class="cm">/* Handle Event */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_EVENT_GET_NB_CALL  	4L </span><span class="cm">/* Get Non-Blocking call Args */</span><span class="cp"></span>

<span class="cm">/*  PDC PAT HPMC -- Cause processor to go into spin loop, and wait</span>
<span class="cm"> *  			for wake up from Monarch Processor.</span>
<span class="cm"> */</span>

<span class="cp">#define PDC_PAT_HPMC               70L</span>
<span class="cp">#define PDC_PAT_HPMC_RENDEZ_CPU     0L </span><span class="cm">/* go into spin loop */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_HPMC_SET_PARAMS     1L </span><span class="cm">/* Allows OS to specify intr which PDC </span>
<span class="cm">                                        * will use to interrupt OS during</span>
<span class="cm">                                        * machine check rendezvous */</span><span class="cp"></span>

<span class="cm">/* parameters for PDC_PAT_HPMC_SET_PARAMS: */</span>
<span class="cp">#define HPMC_SET_PARAMS_INTR 	    1L </span><span class="cm">/* Rendezvous Interrupt */</span><span class="cp"></span>
<span class="cp">#define HPMC_SET_PARAMS_WAKE 	    2L </span><span class="cm">/* Wake up processor */</span><span class="cp"></span>


<span class="cm">/*  PDC PAT IO  -- On-line services for I/O modules */</span>

<span class="cp">#define PDC_PAT_IO                  71L</span>
<span class="cp">#define PDC_PAT_IO_GET_SLOT_STATUS   	5L </span><span class="cm">/* Get Slot Status Info*/</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_LOC_FROM_HARDWARE 6L </span><span class="cm">/* Get Physical Location from */</span><span class="cp"></span>
                                            <span class="cm">/* Hardware Path */</span>
<span class="cp">#define PDC_PAT_IO_GET_HARDWARE_FROM_LOC 7L </span><span class="cm">/* Get Hardware Path from </span>
<span class="cm">                                             * Physical Location */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_PCI_CONFIG_FROM_HW 11L </span><span class="cm">/* Get PCI Configuration</span>
<span class="cm">                                               * Address from Hardware Path */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_HW_FROM_PCI_CONFIG 12L </span><span class="cm">/* Get Hardware Path </span>
<span class="cm">                                               * from PCI Configuration Address */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_READ_HOST_BRIDGE_INFO 13L  </span><span class="cm">/* Read Host Bridge State Info */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_CLEAR_HOST_BRIDGE_INFO 14L </span><span class="cm">/* Clear Host Bridge State Info*/</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_PCI_ROUTING_TABLE_SIZE 15L </span><span class="cm">/* Get PCI INT Routing Table </span>
<span class="cm">                                                   * Size */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_PCI_ROUTING_TABLE  16L </span><span class="cm">/* Get PCI INT Routing Table */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_HINT_TABLE_SIZE 	17L </span><span class="cm">/* Get Hint Table Size */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_HINT_TABLE   	18L </span><span class="cm">/* Get Hint Table */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_PCI_CONFIG_READ  	19L </span><span class="cm">/* PCI Config Read */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_PCI_CONFIG_WRITE 	20L </span><span class="cm">/* PCI Config Write */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_NUM_IO_SLOTS 	21L </span><span class="cm">/* Get Number of I/O Bay Slots in </span>
<span class="cm">                                       		  * Cabinet */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_LOC_IO_SLOTS 	22L </span><span class="cm">/* Get Physical Location of I/O */</span><span class="cp"></span>
                                   		     <span class="cm">/* Bay Slots in Cabinet */</span>
<span class="cp">#define PDC_PAT_IO_BAY_STATUS_INFO  	28L </span><span class="cm">/* Get I/O Bay Slot Status Info */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_GET_PROC_VIEW        29L </span><span class="cm">/* Get Processor view of IO address */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_IO_PROG_SBA_DIR_RANGE   30L </span><span class="cm">/* Program directed range */</span><span class="cp"></span>


<span class="cm">/* PDC PAT MEM  -- Manage memory page deallocation */</span>

<span class="cp">#define PDC_PAT_MEM            72L</span>
<span class="cp">#define PDC_PAT_MEM_PD_INFO     	0L </span><span class="cm">/* Return PDT info for PD       */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_PD_CLEAR    	1L </span><span class="cm">/* Clear PDT for PD             */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_PD_READ     	2L </span><span class="cm">/* Read PDT entries for PD      */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_PD_RESET    	3L </span><span class="cm">/* Reset clear bit for PD       */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_CELL_INFO   	5L </span><span class="cm">/* Return PDT info For Cell     */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_CELL_CLEAR  	6L </span><span class="cm">/* Clear PDT For Cell           */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_CELL_READ   	7L </span><span class="cm">/* Read PDT entries For Cell    */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_CELL_RESET  	8L </span><span class="cm">/* Reset clear bit For Cell     */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_SETGM	  	9L </span><span class="cm">/* Set Golden Memory value      */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_ADD_PAGE    	10L </span><span class="cm">/* ADDs a page to the cell      */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_ADDRESS     	11L </span><span class="cm">/* Get Physical Location From   */</span><span class="cp"></span>
                                    		 <span class="cm">/* Memory Address               */</span>
<span class="cp">#define PDC_PAT_MEM_GET_TXT_SIZE   	12L </span><span class="cm">/* Get Formatted Text Size   */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_GET_PD_TXT     	13L </span><span class="cm">/* Get PD Formatted Text     */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_GET_CELL_TXT   	14L </span><span class="cm">/* Get Cell Formatted Text   */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_RD_STATE_INFO  	15L </span><span class="cm">/* Read Mem Module State Info*/</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_CLR_STATE_INFO 	16L </span><span class="cm">/*Clear Mem Module State Info*/</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_CLEAN_RANGE    	128L </span><span class="cm">/*Clean Mem in specific range*/</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_GET_TBL_SIZE   	131L </span><span class="cm">/* Get Memory Table Size     */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_MEM_GET_TBL        	132L </span><span class="cm">/* Get Memory Table          */</span><span class="cp"></span>


<span class="cm">/* PDC PAT NVOLATILE  --  Access Non-Volatile Memory */</span>

<span class="cp">#define PDC_PAT_NVOLATILE	73L</span>
<span class="cp">#define PDC_PAT_NVOLATILE_READ		0L </span><span class="cm">/* Read Non-Volatile Memory   */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_NVOLATILE_WRITE		1L </span><span class="cm">/* Write Non-Volatile Memory  */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_NVOLATILE_GET_SIZE	2L </span><span class="cm">/* Return size of NVM         */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_NVOLATILE_VERIFY	3L </span><span class="cm">/* Verify contents of NVM     */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_NVOLATILE_INIT		4L </span><span class="cm">/* Initialize NVM             */</span><span class="cp"></span>

<span class="cm">/* PDC PAT PD */</span>
<span class="cp">#define PDC_PAT_PD		74L         </span><span class="cm">/* Protection Domain Info   */</span><span class="cp"></span>
<span class="cp">#define PDC_PAT_PD_GET_ADDR_MAP		0L  </span><span class="cm">/* Get Address Map          */</span><span class="cp"></span>

<span class="cm">/* PDC_PAT_PD_GET_ADDR_MAP entry types */</span>
<span class="cp">#define PAT_MEMORY_DESCRIPTOR		1   </span>

<span class="cm">/* PDC_PAT_PD_GET_ADDR_MAP memory types */</span>
<span class="cp">#define PAT_MEMTYPE_MEMORY		0</span>
<span class="cp">#define PAT_MEMTYPE_FIRMWARE		4</span>

<span class="cm">/* PDC_PAT_PD_GET_ADDR_MAP memory usage */</span>
<span class="cp">#define PAT_MEMUSE_GENERAL		0</span>
<span class="cp">#define PAT_MEMUSE_GI			128</span>
<span class="cp">#define PAT_MEMUSE_GNI			129</span>


<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="cp">#ifdef CONFIG_64BIT</span>
<span class="cp">#define is_pdc_pat()	(PDC_TYPE_PAT == pdc_type)</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_get_irt_size</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">num_entries</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_num</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_get_irt</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">r_addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_num</span><span class="p">);</span>
<span class="cp">#else	</span><span class="cm">/* ! CONFIG_64BIT */</span><span class="cp"></span>
<span class="cm">/* No PAT support for 32-bit kernels...sorry */</span>
<span class="cp">#define is_pdc_pat()	(0)</span>
<span class="cp">#define pdc_pat_get_irt_size(num_entries, cell_numn)	PDC_BAD_PROC</span>
<span class="cp">#define pdc_pat_get_irt(r_addr, cell_num)		PDC_BAD_PROC</span>
<span class="cp">#endif	</span><span class="cm">/* ! CONFIG_64BIT */</span><span class="cp"></span>


<span class="k">struct</span> <span class="n">pdc_pat_cell_num</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_num</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_loc</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pdc_pat_cpu_num</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cpu_num</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cpu_loc</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">pdc_pat_pd_addr_map_entry</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">entry_type</span><span class="p">;</span>       <span class="cm">/* 1 = Memory Descriptor Entry Type */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">reserve1</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">memory_type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">memory_usage</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">paddr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">pages</span><span class="p">;</span>            <span class="cm">/* Length in 4K pages */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>  <span class="n">reserve2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_map</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/********************************************************************</span>
<span class="cm">* PDC_PAT_CELL[Return Cell Module] memaddr[0] conf_base_addr</span>
<span class="cm">* ----------------------------------------------------------</span>
<span class="cm">* Bit  0 to 51 - conf_base_addr</span>
<span class="cm">* Bit 52 to 62 - reserved</span>
<span class="cm">* Bit       63 - endianess bit</span>
<span class="cm">********************************************************************/</span>
<span class="cp">#define PAT_GET_CBA(value) ((value) &amp; 0xfffffffffffff000UL)</span>

<span class="cm">/********************************************************************</span>
<span class="cm">* PDC_PAT_CELL[Return Cell Module] memaddr[1] mod_info</span>
<span class="cm">* ----------------------------------------------------</span>
<span class="cm">* Bit  0 to  7 - entity type</span>
<span class="cm">*    0 = central agent,            1 = processor,</span>
<span class="cm">*    2 = memory controller,        3 = system bus adapter,</span>
<span class="cm">*    4 = local bus adapter,        5 = processor bus converter,</span>
<span class="cm">*    6 = crossbar fabric connect,  7 = fabric interconnect,</span>
<span class="cm">*    8 to 254 reserved,            255 = unknown.</span>
<span class="cm">* Bit  8 to 15 - DVI</span>
<span class="cm">* Bit 16 to 23 - IOC functions</span>
<span class="cm">* Bit 24 to 39 - reserved</span>
<span class="cm">* Bit 40 to 63 - mod_pages</span>
<span class="cm">*    number of 4K pages a module occupies starting at conf_base_addr</span>
<span class="cm">********************************************************************/</span>
<span class="cp">#define PAT_GET_ENTITY(value)	(((value) &gt;&gt; 56) &amp; 0xffUL)</span>
<span class="cp">#define PAT_GET_DVI(value)	(((value) &gt;&gt; 48) &amp; 0xffUL)</span>
<span class="cp">#define PAT_GET_IOC(value)	(((value) &gt;&gt; 40) &amp; 0xffUL)</span>
<span class="cp">#define PAT_GET_MOD_PAGES(value) ((value) &amp; 0xffffffUL)</span>


<span class="cm">/*</span>
<span class="cm">** PDC_PAT_CELL_GET_INFO return block</span>
<span class="cm">*/</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">pdc_pat_cell_info_rtn_block</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cpu_info</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_info</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cell_location</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reo_location</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mem_size</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">dimm_status</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pdc_rev</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fabric_info0</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fabric_info1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fabric_info2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">fabric_info3</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">21</span><span class="p">];</span>
<span class="p">}</span> <span class="n">pdc_pat_cell_info_rtn_block_t</span><span class="p">;</span>


<span class="cm">/* FIXME: mod[508] should really be a union of the various mod components */</span>
<span class="k">struct</span> <span class="n">pdc_pat_cell_mod_maddr_block</span> <span class="p">{</span>	<span class="cm">/* PDC_PAT_CELL_MODULE */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cba</span><span class="p">;</span>		<span class="cm">/* func 0 cfg space address */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mod_info</span><span class="p">;</span>		<span class="cm">/* module information */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mod_location</span><span class="p">;</span>	<span class="cm">/* physical location of the module */</span>
	<span class="k">struct</span> <span class="n">hardware_path</span> <span class="n">mod_path</span><span class="p">;</span>	<span class="cm">/* module path (device path - layers) */</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mod</span><span class="p">[</span><span class="mi">508</span><span class="p">];</span>		<span class="cm">/* PAT cell module components */</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span> <span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">pdc_pat_cell_mod_maddr_block</span> <span class="n">pdc_pat_cell_mod_maddr_block_t</span><span class="p">;</span>


<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_chassis_send_log</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">status</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_cell_get_number</span><span class="p">(</span><span class="k">struct</span> <span class="n">pdc_pat_cell_num</span> <span class="o">*</span><span class="n">cell_info</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_cell_module</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">actcnt</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">ploc</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mod</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">view_type</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">mem_addr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_cell_num_to_loc</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_cpu_get_number</span><span class="p">(</span><span class="k">struct</span> <span class="n">pdc_pat_cpu_num</span> <span class="o">*</span><span class="n">cpu_info</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">hpa</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_pd_get_addr_map</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">actual_len</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">mem_addr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">count</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">offset</span><span class="p">);</span>


<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_io_pci_cfg_read</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pci_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pci_size</span><span class="p">,</span> <span class="n">u32</span> <span class="o">*</span><span class="n">val</span><span class="p">);</span> 
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat_io_pci_cfg_write</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pci_addr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">pci_size</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">);</span> 


<span class="cm">/* Flag to indicate this is a PAT box...don&#39;t use this unless you</span>
<span class="cm">** really have to...it might go away some day.</span>
<span class="cm">*/</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">pdc_pat</span><span class="p">;</span>     <span class="cm">/* arch/parisc/kernel/inventory.c */</span>

<span class="cp">#endif </span><span class="cm">/* __ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* ! __PARISC_PATPDC_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
