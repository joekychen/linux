f | signal32.c | s | 16K | 436 | Al Viro | viro@zeniv.linux.org.uk | 1338569931 | Signal support for 32-bit kernel builds | most of set_current_blocked() callers want SIGKILL/SIGSTOP removed from set  Only 3 out of 63 do not.  Renamed the current variant to __set_current_blocked(), added set_current_blocked() that will exclude unblockable signals, switched open-coded instances to it.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | sys_parisc.c | s | 6.7K | 205 | Christoph Hellwig | hch@lst.de | 1268437952 |  | improve sys_newuname() for compat architectures  On an architecture that supports 32-bit compat we need to override the reported machine in uname with the 32-bit value.  Instead of doing this separately in every architecture introduce a COMPAT_UTS_MACHINE define in <asm/compat.h> and apply it directly in sys_newuname().  Signed-off-by: Christoph Hellwig <hch@lst.de> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Jeff Dike <jdike@addtoit.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@elte.hu> Cc: H. Peter Anvin <hpa@zytor.com> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: "Luck, Tony" <tony.luck@intel.com> Cc: James Morris <jmorris@namei.org> Cc: Andreas Schwab <schwab@linux-m68k.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | hpmc.S | g | 7.6K |  | Kyle McMartin | kyle@mcmartin.ca | 1231183107 |  | parisc: export length of os_hpmc vector  and use this instead of dealing with exporting start/end and toying with function descriptors.  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | pa7300lc.c | s | 1.1K | 41 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | pci.c | s | 7.1K | 225 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | time.c | s | 7.5K | 230 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: move definition of PAGE0 to asm/page.h  This was defined in asm/pdc.h which needs to include asm/page.h for __PAGE_OFFSET. This leads to an include loop so that page.h eventually will include pdc.h again. While this is no problem because of header guards, it is a problem because some symbols may be undefined. Such an error is this:  In file included from include/linux/bitops.h:35:0,                  from include/asm-generic/getorder.h:7,                  from arch/parisc/include/asm/page.h:162,                  from arch/parisc/include/asm/pdc.h:346,                  from arch/parisc/include/asm/processor.h:16,                  from arch/parisc/include/asm/spinlock.h:6,                  from arch/parisc/include/asm/atomic.h:20,                  from include/linux/atomic.h:4,                  from include/linux/sysfs.h:20,                  from include/linux/kobject.h:21,                  from include/linux/device.h:17,                  from include/linux/eisa.h:5,                  from arch/parisc/kernel/pci.c:11: arch/parisc/include/asm/bitops.h: In function ‘set_bit’: arch/parisc/include/asm/bitops.h:82:2: error: implicit declaration of function ‘_atomic_spin_lock_irqsave’ [-Werror=implicit-function-declaration] arch/parisc/include/asm/bitops.h:84:2: error: implicit declaration of function ‘_atomic_spin_unlock_irqrestore’ [-Werror=implicit-function-declaration]  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Makefile | g | 1.1K |  | Thomas Gleixner | tglx@linutronix.de | 1336383526 |  | parisc: Fix init_task fallout  Forgot to remove the objects from the Makefiles.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | perf_images.h | s | 133K | 3040 | Helge Deller | deller@parisc-linux.org | 1137979591 |  | [PARISC] Use kzalloc and other janitor-style cleanups  Helge,   o Convert a bunch of kmalloc/memset uses to kzalloc.   o pci.c: Add some __read_mostly annotations.   o pci.c: Move constant pci_post_reset_delay to asm/pci.h   o grfioctl.h: Add A4450A to comment of CRT_ID_VISUALIZE_EG.   o Add some consts to perf.c/perf_images.h  Matthew,   o sticore.c: Add some consts to suppress compile warnings.  Signed-off-by: Helge Deller <deller@parisc-linux.org> Signed-off-by: Matthew Wilcox <willy@parisc-linux.org> Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
f | head.S | g | 8.9K |  | James Bottomley | James.Bottomley@HansenPartnership.com | 1302890118 |  | [PARISC] only make executable areas executable  Currently parisc has the whole kernel marked as RWX, meaning any kernel page at all is eligible to be executed.  This can cause a theoretical problem on systems with combined I/D TLB because the act of referencing a page causes a TLB insertion with an executable bit. This TLB entry may be used by the CPU as the basis for speculating the page into the I-Cache.  If this speculated page is subsequently used for a user process, there is the possibility we will get a stale I-cache line picked up as the binary executes.  As a point of good practise, only mark actual kernel text pages as executable.  The same has to be done for init_text pages, but they're converted to data pages (and the I-Cache flushed) when the init memory is released.  Signed-off-by: James Bottomley <James.Bottomley@suse.de>
f | asm-offsets.c | s | 16K | 296 | Carlos O'Donell | carlos@systemhalted.org | 1275212307 |  | parisc: Use of align_frame provides stack frame.  Any assembly constant generated with the use of align_frame includes size for a full stack frame.  Signed-off-by: Carlos O'Donell <carlos@systemhalted.org> Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
f | topology.c | s | 1.1K | 32 | Helge Deller | deller@gmx.de | 1231182542 |  | parisc: Replace NR_CPUS in parisc code  parisc: Replace most arrays sized by NR_CPUS with percpu variables.  Signed-off-by: Helge Deller <deller@gmx.de> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | binfmt_elf32.c | s | 3.5K | 89 | Martin Schwidefsky | schwidefsky@de.ibm.com | 1224164405 |  | [PATCH] remove unused ibcs2/PER_SVR4 in SET_PERSONALITY  The SET_PERSONALITY macro is always called with a second argument of 0. Remove the ibcs argument and the various tests to set the PER_SVR4 personality.  Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
f | syscall_table.S | g | 13K |  | Stephen Rothwell | sfr@canb.auug.org.au | 1314660719 | System Call Table | remove remaining references to nfsservctl  These were missed in commit f5b940997397 "All Arch: remove linkage for sys_nfsservctl system call" due to them having no sys_ prefix (presumably).  Cc: NeilBrown <neilb@suse.de> Cc: linuxppc-dev@lists.ozlabs.org Cc: linux-parisc@vger.kernel.org Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au> Acked-by: James Bottomley <James.Bottomley@hansenpartnership.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | traps.c | s | 21K | 728 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | vmlinux.lds.S | g | 3.8K |  | John David Anglin | dave.anglin@bell.net | 1337939537 | Kernel link layout for various "sections" | [PARISC] fix boot failure on 32-bit systems caused by branch stubs placed before .text  In certain configurations, the resulting kernel becomes too large to boot because the linker places the long branch stubs for the merged .text section at the very start of the image.  As a result, the initial transfer of control jumps to an unexpected location.  Fix this by placing the head text in a separate section so the stubs for .text are not at the start of the image.  Signed-off-by: John David Anglin <dave.anglin@bell.net> Cc: stable@vger.kernel.org Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | hardware.c | s | 76K | 1363 | Kyle McMartin | kyle@shortfin.cabal.ca | 1205633539 |  | [PARISC] add back Crestone Peak cpu  Crestone Peak Slow is the 800MHz PA-8800 cpu in the C8000. 0x88B is probably the Crestone Peak Fast.  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | pci-dma.c | s | 15K | 499 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103860 |  | parisc: Add export.h to files needing EXPORT_SYMBOL/THIS_MODULE  These guys were getting it implicitly via module.h before, when module.h was everywhere.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | ptrace.c | s | 8.1K | 250 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | perf.c | s | 22K | 735 | Arnd Bergmann | arnd@arndb.de | 1287261788 |  | parisc: remove big kernel lock  The parisc version of the perf code is sufficiently protected by its own spinlock, no need to use the BKL.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Helge Deller <deller@gmx.de> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: linux-parisc@vger.kernel.org
f | unwind.c | s | 11K | 373 | Phil Carmody | ext-phil.2.carmody@nokia.com | 1287709939 |  | parisc: unwind - optimise linked-list searches for modules  Having many dozens of modules, the searches down the linked list of sections would dominate the lookup time, dwarfing any savings from the binary search within the section.  A simple move-to-front optimisation exploits the commonality of the code paths taken, and in simple real-world tests on other architectures reduced the number of steps in the search to barely more than 1.  Signed-off-by: Phil Carmody <ext-phil.2.carmody@nokia.com> Signed-off-by: Kyle McMartin <kyle@redhat.com>
f | parisc_ksyms.c | s | 4.3K | 143 | James Bottomley | JBottomley@Parallels.com | 1338459277 |  | [PARISC] update parisc to use generic strncpy_from_user()  Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | pacache.S | g | 23K |  | John David Anglin | dave.anglin@bell.net | 1337170506 |  | [PARISC] fix crash in flush_icache_page_asm on PA1.1  As pointed out by serveral people, PA1.1 only has a type 26 instruction meaning that the space register must be explicitly encoded.  Not giving an explicit space means that the compiler uses the type 24 version which is PA2.0 only resulting in an illegal instruction crash.  This regression was caused by      commit f311847c2fcebd81912e2f0caf8a461dec28db41     Author: James Bottomley <James.Bottomley@HansenPartnership.com>     Date:   Wed Dec 22 10:22:11 2010 -0600          parisc: flush pages through tmpalias space  Reported-by: Helge Deller <deller@gmx.de> Signed-off-by: John David Anglin <dave.anglin@bell.net> Cc: stable@vger.kernel.org	#2.6.39+ Signed-off-by: James Bottomley <JBottomley@Parallels.com>
f | irq.c | s | 10K | 346 | Thomas Gleixner | tglx@linutronix.de | 1301402888 |  | parisc: Use irq_to_desc() in show_interrupts()  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | real2.S | g | 6.2K |  | Kyle McMartin | kyle@mcmartin.ca | 1223656348 |  | parisc: move pdc_result to real2.S
f | module.c | s | 25K | 832 | Jonas Bonn | jonas@southpole.se | 1311510964 | Kernel dynamically loadable module help for PARISC. | modules: make arch's use default loader hooks  This patch removes all the module loader hook implementations in the architecture specific code where the functionality is the same as that now provided by the recently added default hooks.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Acked-by: Mike Frysinger <vapier@gentoo.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Tested-by: Michal Simek <monstr@monstr.eu> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | inventory.c | s | 15K | 505 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | setup.c | s | 9.7K | 336 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103860 |  | parisc: Add export.h to files needing EXPORT_SYMBOL/THIS_MODULE  These guys were getting it implicitly via module.h before, when module.h was everywhere.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | stacktrace.c | s | 1.7K | 55 | Helge Deller | deller@gmx.de | 1238467894 |  | parisc: add LATENCYTOP_SUPPORT and CONFIG_STACKTRACE_SUPPORT  Signed-off-by: Helge Deller <deller@gmx.de> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | pdc_cons.c | s | 7.7K | 231 | Rolf Eike Beer | eike-kernel@sf-tec.de | 1336687928 |  | parisc: move definition of PAGE0 to asm/page.h  This was defined in asm/pdc.h which needs to include asm/page.h for __PAGE_OFFSET. This leads to an include loop so that page.h eventually will include pdc.h again. While this is no problem because of header guards, it is a problem because some symbols may be undefined. Such an error is this:  In file included from include/linux/bitops.h:35:0,                  from include/asm-generic/getorder.h:7,                  from arch/parisc/include/asm/page.h:162,                  from arch/parisc/include/asm/pdc.h:346,                  from arch/parisc/include/asm/processor.h:16,                  from arch/parisc/include/asm/spinlock.h:6,                  from arch/parisc/include/asm/atomic.h:20,                  from include/linux/atomic.h:4,                  from include/linux/sysfs.h:20,                  from include/linux/kobject.h:21,                  from include/linux/device.h:17,                  from include/linux/eisa.h:5,                  from arch/parisc/kernel/pci.c:11: arch/parisc/include/asm/bitops.h: In function ‘set_bit’: arch/parisc/include/asm/bitops.h:82:2: error: implicit declaration of function ‘_atomic_spin_lock_irqsave’ [-Werror=implicit-function-declaration] arch/parisc/include/asm/bitops.h:84:2: error: implicit declaration of function ‘_atomic_spin_unlock_irqrestore’ [-Werror=implicit-function-declaration]  Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cache.c | s | 13K | 434 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | syscall.S | g | 18K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | unaligned.c | s | 17K | 673 | Christian Dietrich | qy03fugy@stud.informatik.uni-erlangen.de | 1287710009 |  | arch/parisc: Removing undead ifdef CONFIG_PA20  The CONFIG_PA20 ifdef isn't necessary at this point, because it is checked in an outer ifdef level already and has no effect here.  Signed-off-by: Christian Dietrich <qy03fugy@stud.informatik.uni-erlangen.de> Signed-off-by: Kyle McMartin <kyle@redhat.com>
f | smp.c | s | 10K | 362 | Linus Torvalds | torvalds@linux-foundation.org | 1337654637 |  | Merge branch 'smp-hotplug-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull smp hotplug cleanups from Thomas Gleixner:  "This series is merily a cleanup of code copied around in arch/* and   not changing any of the real cpu hotplug horrors yet.  I wish I'd had   something more substantial for 3.5, but I underestimated the lurking   horror..."  Fix up trivial conflicts in arch/{arm,sparc,x86}/Kconfig and arch/sparc/include/asm/thread_info_32.h  * 'smp-hotplug-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip: (79 commits)   um: Remove leftover declaration of alloc_task_struct_node()   task_allocator: Use config switches instead of magic defines   sparc: Use common threadinfo allocator   score: Use common threadinfo allocator   sh-use-common-threadinfo-allocator   mn10300: Use common threadinfo allocator   powerpc: Use common threadinfo allocator   mips: Use common threadinfo allocator   hexagon: Use common threadinfo allocator   m32r: Use common threadinfo allocator   frv: Use common threadinfo allocator   cris: Use common threadinfo allocator   x86: Use common threadinfo allocator   c6x: Use common threadinfo allocator   fork: Provide kmemcache based thread_info allocator   tile: Use common threadinfo allocator   fork: Provide weak arch_release_[task_struct||thread_info] functions   fork: Move thread info gfp flags to header   fork: Remove the weak insanity   sh: Remove cpu_idle_wait()   ...
f | drivers.c | s | 23K | 790 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103860 |  | parisc: Add export.h to files needing EXPORT_SYMBOL/THIS_MODULE  These guys were getting it implicitly via module.h before, when module.h was everywhere.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | perf_asm.S | g | 25K |  | Kyle McMartin | kyle@minerva.i.cabal.ca | 1213368585 |  | Revert "parisc: fix trivial section name warnings"  This reverts commit bd3bb8c15b9a80dbddfb7905b237a4a11a4725b4.  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | sys32.h | s | 1.5K | 41 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | process.c | s | 10K | 346 | Thomas Gleixner | tglx@linutronix.de | 1330594083 |  | sched/rt: Use schedule_preempt_disabled()  Coccinelle based conversion.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/n/tip-24swm5zut3h9c4a6s46x8rws@git.kernel.org Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | firmware.c | s | 41K | 1293 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for PA-RISC  Disintegrate asm/system.h for PA-RISC.  Signed-off-by: David Howells <dhowells@redhat.com> cc: linux-parisc@vger.kernel.org
f | sys_parisc32.c | s | 5.6K | 197 | James Bottomley | James.Bottomley@HansenPartnership.com | 1302893679 |  | [PARISC] wire up fanotify syscalls  Cc: stable@kernel.org Signed-off-by: James Bottomley <James.Bottomley@HansenPartnership.com>
f | pdc_chassis.c | s | 7.9K | 248 | Thibaut Varene | varenet@parisc-linux.org | 1151450917 |  | [PARISC] Work around machines which do not support chassis warnings  pdc_chassis v0.05:  Some machines seems not to implement Chassis warn support. Work around these. Also cleanup a bit of the code.  Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org> Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
f | signal.c | s | 17K | 529 | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | entry.S | g | 54K |  | Al Viro | viro@zeniv.linux.org.uk | 1338569930 |  | TIF_RESTORE_SIGMASK can be set only when TIF_SIGPENDING is set  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | processor.c | s | 11K | 359 | Kyle McMartin | kyle@mcmartin.ca | 1246592051 |  | parisc: processor.c, fix bloated stack frame  The pa_pdc_cell struct can be kmalloc'd, so do that instead.  Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | signal32.h | s | 6.2K | 143 | Simon Arlott | simon@fire.lp0.eu | 1179888736 |  | [PARISC] spelling fixes: arch/parisc/  Spelling fixes in arch/parisc/.  Signed-off-by: Simon Arlott <simon@fire.lp0.eu> Acked-by: Grant Grundler <grundler@parisc-linux.org> Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
f | ftrace.c | s | 4.3K | 148 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276072489 |  | sched_clock: Add local_clock() API and improve documentation  For people who otherwise get to write: cpu_clock(smp_processor_id()), there is now: local_clock().  Also, as per suggestion from Andrew, provide some documentation on the various clock interfaces, and minimize the unsigned long long vs u64 mess.  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: Jens Axboe <jaxboe@fusionio.com> LKML-Reference: <1275052414.1645.52.camel@laptop> Signed-off-by: Ingo Molnar <mingo@elte.hu>
