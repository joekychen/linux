<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › x86 › include › asm › apicdef.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>apicdef.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_X86_APICDEF_H</span>
<span class="cp">#define _ASM_X86_APICDEF_H</span>

<span class="cm">/*</span>
<span class="cm"> * Constants for various Intel APICs. (local APIC, IOAPIC, etc.)</span>
<span class="cm"> *</span>
<span class="cm"> * Alan Cox &lt;Alan.Cox@linux.org&gt;, 1995.</span>
<span class="cm"> * Ingo Molnar &lt;mingo@redhat.com&gt;, 1999, 2000</span>
<span class="cm"> */</span>

<span class="cp">#define IO_APIC_DEFAULT_PHYS_BASE	0xfec00000</span>
<span class="cp">#define	APIC_DEFAULT_PHYS_BASE		0xfee00000</span>

<span class="cm">/*</span>
<span class="cm"> * This is the IO-APIC register space as specified</span>
<span class="cm"> * by Intel docs:</span>
<span class="cm"> */</span>
<span class="cp">#define IO_APIC_SLOT_SIZE		1024</span>

<span class="cp">#define	APIC_ID		0x20</span>

<span class="cp">#define	APIC_LVR	0x30</span>
<span class="cp">#define		APIC_LVR_MASK		0xFF00FF</span>
<span class="cp">#define		APIC_LVR_DIRECTED_EOI	(1 &lt;&lt; 24)</span>
<span class="cp">#define		GET_APIC_VERSION(x)	((x) &amp; 0xFFu)</span>
<span class="cp">#define		GET_APIC_MAXLVT(x)	(((x) &gt;&gt; 16) &amp; 0xFFu)</span>
<span class="cp">#ifdef CONFIG_X86_32</span>
<span class="cp">#  define	APIC_INTEGRATED(x)	((x) &amp; 0xF0u)</span>
<span class="cp">#else</span>
<span class="cp">#  define	APIC_INTEGRATED(x)	(1)</span>
<span class="cp">#endif</span>
<span class="cp">#define		APIC_XAPIC(x)		((x) &gt;= 0x14)</span>
<span class="cp">#define		APIC_EXT_SPACE(x)	((x) &amp; 0x80000000)</span>
<span class="cp">#define	APIC_TASKPRI	0x80</span>
<span class="cp">#define		APIC_TPRI_MASK		0xFFu</span>
<span class="cp">#define	APIC_ARBPRI	0x90</span>
<span class="cp">#define		APIC_ARBPRI_MASK	0xFFu</span>
<span class="cp">#define	APIC_PROCPRI	0xA0</span>
<span class="cp">#define	APIC_EOI	0xB0</span>
<span class="cp">#define		APIC_EOI_ACK		0x0 </span><span class="cm">/* Docs say 0 for future compat. */</span><span class="cp"></span>
<span class="cp">#define	APIC_RRR	0xC0</span>
<span class="cp">#define	APIC_LDR	0xD0</span>
<span class="cp">#define		APIC_LDR_MASK		(0xFFu &lt;&lt; 24)</span>
<span class="cp">#define		GET_APIC_LOGICAL_ID(x)	(((x) &gt;&gt; 24) &amp; 0xFFu)</span>
<span class="cp">#define		SET_APIC_LOGICAL_ID(x)	(((x) &lt;&lt; 24))</span>
<span class="cp">#define		APIC_ALL_CPUS		0xFFu</span>
<span class="cp">#define	APIC_DFR	0xE0</span>
<span class="cp">#define		APIC_DFR_CLUSTER		0x0FFFFFFFul</span>
<span class="cp">#define		APIC_DFR_FLAT			0xFFFFFFFFul</span>
<span class="cp">#define	APIC_SPIV	0xF0</span>
<span class="cp">#define		APIC_SPIV_DIRECTED_EOI		(1 &lt;&lt; 12)</span>
<span class="cp">#define		APIC_SPIV_FOCUS_DISABLED	(1 &lt;&lt; 9)</span>
<span class="cp">#define		APIC_SPIV_APIC_ENABLED		(1 &lt;&lt; 8)</span>
<span class="cp">#define	APIC_ISR	0x100</span>
<span class="cp">#define	APIC_ISR_NR     0x8     </span><span class="cm">/* Number of 32 bit ISR registers. */</span><span class="cp"></span>
<span class="cp">#define	APIC_TMR	0x180</span>
<span class="cp">#define	APIC_IRR	0x200</span>
<span class="cp">#define	APIC_ESR	0x280</span>
<span class="cp">#define		APIC_ESR_SEND_CS	0x00001</span>
<span class="cp">#define		APIC_ESR_RECV_CS	0x00002</span>
<span class="cp">#define		APIC_ESR_SEND_ACC	0x00004</span>
<span class="cp">#define		APIC_ESR_RECV_ACC	0x00008</span>
<span class="cp">#define		APIC_ESR_SENDILL	0x00020</span>
<span class="cp">#define		APIC_ESR_RECVILL	0x00040</span>
<span class="cp">#define		APIC_ESR_ILLREGA	0x00080</span>
<span class="cp">#define 	APIC_LVTCMCI	0x2f0</span>
<span class="cp">#define	APIC_ICR	0x300</span>
<span class="cp">#define		APIC_DEST_SELF		0x40000</span>
<span class="cp">#define		APIC_DEST_ALLINC	0x80000</span>
<span class="cp">#define		APIC_DEST_ALLBUT	0xC0000</span>
<span class="cp">#define		APIC_ICR_RR_MASK	0x30000</span>
<span class="cp">#define		APIC_ICR_RR_INVALID	0x00000</span>
<span class="cp">#define		APIC_ICR_RR_INPROG	0x10000</span>
<span class="cp">#define		APIC_ICR_RR_VALID	0x20000</span>
<span class="cp">#define		APIC_INT_LEVELTRIG	0x08000</span>
<span class="cp">#define		APIC_INT_ASSERT		0x04000</span>
<span class="cp">#define		APIC_ICR_BUSY		0x01000</span>
<span class="cp">#define		APIC_DEST_LOGICAL	0x00800</span>
<span class="cp">#define		APIC_DEST_PHYSICAL	0x00000</span>
<span class="cp">#define		APIC_DM_FIXED		0x00000</span>
<span class="cp">#define		APIC_DM_FIXED_MASK	0x00700</span>
<span class="cp">#define		APIC_DM_LOWEST		0x00100</span>
<span class="cp">#define		APIC_DM_SMI		0x00200</span>
<span class="cp">#define		APIC_DM_REMRD		0x00300</span>
<span class="cp">#define		APIC_DM_NMI		0x00400</span>
<span class="cp">#define		APIC_DM_INIT		0x00500</span>
<span class="cp">#define		APIC_DM_STARTUP		0x00600</span>
<span class="cp">#define		APIC_DM_EXTINT		0x00700</span>
<span class="cp">#define		APIC_VECTOR_MASK	0x000FF</span>
<span class="cp">#define	APIC_ICR2	0x310</span>
<span class="cp">#define		GET_APIC_DEST_FIELD(x)	(((x) &gt;&gt; 24) &amp; 0xFF)</span>
<span class="cp">#define		SET_APIC_DEST_FIELD(x)	((x) &lt;&lt; 24)</span>
<span class="cp">#define	APIC_LVTT	0x320</span>
<span class="cp">#define	APIC_LVTTHMR	0x330</span>
<span class="cp">#define	APIC_LVTPC	0x340</span>
<span class="cp">#define	APIC_LVT0	0x350</span>
<span class="cp">#define		APIC_LVT_TIMER_BASE_MASK	(0x3 &lt;&lt; 18)</span>
<span class="cp">#define		GET_APIC_TIMER_BASE(x)		(((x) &gt;&gt; 18) &amp; 0x3)</span>
<span class="cp">#define		SET_APIC_TIMER_BASE(x)		(((x) &lt;&lt; 18))</span>
<span class="cp">#define		APIC_TIMER_BASE_CLKIN		0x0</span>
<span class="cp">#define		APIC_TIMER_BASE_TMBASE		0x1</span>
<span class="cp">#define		APIC_TIMER_BASE_DIV		0x2</span>
<span class="cp">#define		APIC_LVT_TIMER_ONESHOT		(0 &lt;&lt; 17)</span>
<span class="cp">#define		APIC_LVT_TIMER_PERIODIC		(1 &lt;&lt; 17)</span>
<span class="cp">#define		APIC_LVT_TIMER_TSCDEADLINE	(2 &lt;&lt; 17)</span>
<span class="cp">#define		APIC_LVT_MASKED			(1 &lt;&lt; 16)</span>
<span class="cp">#define		APIC_LVT_LEVEL_TRIGGER		(1 &lt;&lt; 15)</span>
<span class="cp">#define		APIC_LVT_REMOTE_IRR		(1 &lt;&lt; 14)</span>
<span class="cp">#define		APIC_INPUT_POLARITY		(1 &lt;&lt; 13)</span>
<span class="cp">#define		APIC_SEND_PENDING		(1 &lt;&lt; 12)</span>
<span class="cp">#define		APIC_MODE_MASK			0x700</span>
<span class="cp">#define		GET_APIC_DELIVERY_MODE(x)	(((x) &gt;&gt; 8) &amp; 0x7)</span>
<span class="cp">#define		SET_APIC_DELIVERY_MODE(x, y)	(((x) &amp; ~0x700) | ((y) &lt;&lt; 8))</span>
<span class="cp">#define			APIC_MODE_FIXED		0x0</span>
<span class="cp">#define			APIC_MODE_NMI		0x4</span>
<span class="cp">#define			APIC_MODE_EXTINT	0x7</span>
<span class="cp">#define	APIC_LVT1	0x360</span>
<span class="cp">#define	APIC_LVTERR	0x370</span>
<span class="cp">#define	APIC_TMICT	0x380</span>
<span class="cp">#define	APIC_TMCCT	0x390</span>
<span class="cp">#define	APIC_TDCR	0x3E0</span>
<span class="cp">#define APIC_SELF_IPI	0x3F0</span>
<span class="cp">#define		APIC_TDR_DIV_TMBASE	(1 &lt;&lt; 2)</span>
<span class="cp">#define		APIC_TDR_DIV_1		0xB</span>
<span class="cp">#define		APIC_TDR_DIV_2		0x0</span>
<span class="cp">#define		APIC_TDR_DIV_4		0x1</span>
<span class="cp">#define		APIC_TDR_DIV_8		0x2</span>
<span class="cp">#define		APIC_TDR_DIV_16		0x3</span>
<span class="cp">#define		APIC_TDR_DIV_32		0x8</span>
<span class="cp">#define		APIC_TDR_DIV_64		0x9</span>
<span class="cp">#define		APIC_TDR_DIV_128	0xA</span>
<span class="cp">#define	APIC_EFEAT	0x400</span>
<span class="cp">#define	APIC_ECTRL	0x410</span>
<span class="cp">#define APIC_EILVTn(n)	(0x500 + 0x10 * n)</span>
<span class="cp">#define		APIC_EILVT_NR_AMD_K8	1	</span><span class="cm">/* # of extended interrupts */</span><span class="cp"></span>
<span class="cp">#define		APIC_EILVT_NR_AMD_10H	4</span>
<span class="cp">#define		APIC_EILVT_NR_MAX	APIC_EILVT_NR_AMD_10H</span>
<span class="cp">#define		APIC_EILVT_LVTOFF(x)	(((x) &gt;&gt; 4) &amp; 0xF)</span>
<span class="cp">#define		APIC_EILVT_MSG_FIX	0x0</span>
<span class="cp">#define		APIC_EILVT_MSG_SMI	0x2</span>
<span class="cp">#define		APIC_EILVT_MSG_NMI	0x4</span>
<span class="cp">#define		APIC_EILVT_MSG_EXT	0x7</span>
<span class="cp">#define		APIC_EILVT_MASKED	(1 &lt;&lt; 16)</span>

<span class="cp">#define APIC_BASE (fix_to_virt(FIX_APIC_BASE))</span>
<span class="cp">#define APIC_BASE_MSR	0x800</span>
<span class="cp">#define XAPIC_ENABLE	(1UL &lt;&lt; 11)</span>
<span class="cp">#define X2APIC_ENABLE	(1UL &lt;&lt; 10)</span>

<span class="cp">#ifdef CONFIG_X86_32</span>
<span class="cp"># define MAX_IO_APICS 64</span>
<span class="cp"># define MAX_LOCAL_APIC 256</span>
<span class="cp">#else</span>
<span class="cp"># define MAX_IO_APICS 128</span>
<span class="cp"># define MAX_LOCAL_APIC 32768</span>
<span class="cp">#endif</span>

<span class="cm">/*</span>
<span class="cm"> * All x86-64 systems are xAPIC compatible.</span>
<span class="cm"> * In the following, &quot;apicid&quot; is a physical APIC ID.</span>
<span class="cm"> */</span>
<span class="cp">#define XAPIC_DEST_CPUS_SHIFT	4</span>
<span class="cp">#define XAPIC_DEST_CPUS_MASK	((1u &lt;&lt; XAPIC_DEST_CPUS_SHIFT) - 1)</span>
<span class="cp">#define XAPIC_DEST_CLUSTER_MASK	(XAPIC_DEST_CPUS_MASK &lt;&lt; XAPIC_DEST_CPUS_SHIFT)</span>
<span class="cp">#define APIC_CLUSTER(apicid)	((apicid) &amp; XAPIC_DEST_CLUSTER_MASK)</span>
<span class="cp">#define APIC_CLUSTERID(apicid)	(APIC_CLUSTER(apicid) &gt;&gt; XAPIC_DEST_CPUS_SHIFT)</span>
<span class="cp">#define APIC_CPUID(apicid)	((apicid) &amp; XAPIC_DEST_CPUS_MASK)</span>
<span class="cp">#define NUM_APIC_CLUSTERS	((BAD_APICID + 1) &gt;&gt; XAPIC_DEST_CPUS_SHIFT)</span>

<span class="cm">/*</span>
<span class="cm"> * the local APIC register structure, memory mapped. Not terribly well</span>
<span class="cm"> * tested, but we might eventually use this one in the future - the</span>
<span class="cm"> * problem why we cannot use it right now is the P5 APIC, it has an</span>
<span class="cm"> * errata which cannot take 8-bit reads and writes, only 32-bit ones ...</span>
<span class="cm"> */</span>
<span class="cp">#define u32 unsigned int</span>

<span class="k">struct</span> <span class="n">local_apic</span> <span class="p">{</span>

<span class="cm">/*000*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_01</span><span class="p">;</span>

<span class="cm">/*010*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_02</span><span class="p">;</span>

<span class="cm">/*020*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* APIC ID Register */</span>
		<span class="n">u32</span>   <span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">,</span>
			<span class="n">phys_apic_id</span>	<span class="o">:</span>  <span class="mi">4</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">4</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">id</span><span class="p">;</span>

<span class="cm">/*030*/</span>	<span class="k">const</span>
	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* APIC Version Register */</span>
		<span class="n">u32</span>   <span class="n">version</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">max_lvt</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">version</span><span class="p">;</span>

<span class="cm">/*040*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_03</span><span class="p">;</span>

<span class="cm">/*050*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_04</span><span class="p">;</span>

<span class="cm">/*060*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_05</span><span class="p">;</span>

<span class="cm">/*070*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_06</span><span class="p">;</span>

<span class="cm">/*080*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Task Priority Register */</span>
		<span class="n">u32</span>   <span class="n">priority</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">tpr</span><span class="p">;</span>

<span class="cm">/*090*/</span>	<span class="k">const</span>
	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Arbitration Priority Register */</span>
		<span class="n">u32</span>   <span class="n">priority</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">apr</span><span class="p">;</span>

<span class="cm">/*0A0*/</span>	<span class="k">const</span>
	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Processor Priority Register */</span>
		<span class="n">u32</span>   <span class="n">priority</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">ppr</span><span class="p">;</span>

<span class="cm">/*0B0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* End Of Interrupt Register */</span>
		<span class="n">u32</span>   <span class="n">eoi</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">eoi</span><span class="p">;</span>

<span class="cm">/*0C0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_07</span><span class="p">;</span>

<span class="cm">/*0D0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Logical Destination Register */</span>
		<span class="n">u32</span>   <span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">,</span>
			<span class="n">logical_dest</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">ldr</span><span class="p">;</span>

<span class="cm">/*0E0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Destination Format Register */</span>
		<span class="n">u32</span>   <span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">28</span><span class="p">,</span>
			<span class="n">model</span>		<span class="o">:</span>  <span class="mi">4</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">dfr</span><span class="p">;</span>

<span class="cm">/*0F0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Spurious Interrupt Vector Register */</span>
		<span class="n">u32</span>	<span class="n">spurious_vector</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">apic_enabled</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">focus_cpu</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span> <span class="mi">22</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">svr</span><span class="p">;</span>

<span class="cm">/*100*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* In Service Register */</span>
<span class="cm">/*170*/</span>		<span class="n">u32</span> <span class="n">bitfield</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">isr</span> <span class="p">[</span><span class="mi">8</span><span class="p">];</span>

<span class="cm">/*180*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Trigger Mode Register */</span>
<span class="cm">/*1F0*/</span>		<span class="n">u32</span> <span class="n">bitfield</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">tmr</span> <span class="p">[</span><span class="mi">8</span><span class="p">];</span>

<span class="cm">/*200*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Interrupt Request Register */</span>
<span class="cm">/*270*/</span>		<span class="n">u32</span> <span class="n">bitfield</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">irr</span> <span class="p">[</span><span class="mi">8</span><span class="p">];</span>

<span class="cm">/*280*/</span>	<span class="k">union</span> <span class="p">{</span> <span class="cm">/* Error Status Register */</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span>   <span class="n">send_cs_error</span>			<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">receive_cs_error</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">send_accept_error</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">receive_accept_error</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">__reserved_1</span>			<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">send_illegal_vector</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">receive_illegal_vector</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">illegal_register_address</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
				<span class="n">__reserved_2</span>			<span class="o">:</span> <span class="mi">24</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">__reserved_3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">error_bits</span><span class="p">;</span>
		<span class="k">struct</span> <span class="p">{</span>
			<span class="n">u32</span> <span class="n">errors</span><span class="p">;</span>
			<span class="n">u32</span> <span class="n">__reserved_3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
		<span class="p">}</span> <span class="n">all_errors</span><span class="p">;</span>
	<span class="p">}</span> <span class="n">esr</span><span class="p">;</span>

<span class="cm">/*290*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_08</span><span class="p">;</span>

<span class="cm">/*2A0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_09</span><span class="p">;</span>

<span class="cm">/*2B0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_10</span><span class="p">;</span>

<span class="cm">/*2C0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_11</span><span class="p">;</span>

<span class="cm">/*2D0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_12</span><span class="p">;</span>

<span class="cm">/*2E0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_13</span><span class="p">;</span>

<span class="cm">/*2F0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_14</span><span class="p">;</span>

<span class="cm">/*300*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Interrupt Command Register 1 */</span>
		<span class="n">u32</span>   <span class="n">vector</span>			<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">delivery_mode</span>		<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">destination_mode</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">delivery_status</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_1</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">level</span>			<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">trigger</span>			<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>		<span class="o">:</span>  <span class="mi">2</span><span class="p">,</span>
			<span class="n">shorthand</span>		<span class="o">:</span>  <span class="mi">2</span><span class="p">,</span>
			<span class="n">__reserved_3</span>		<span class="o">:</span>  <span class="mi">12</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">icr1</span><span class="p">;</span>

<span class="cm">/*310*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Interrupt Command Register 2 */</span>
		<span class="k">union</span> <span class="p">{</span>
			<span class="n">u32</span>   <span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">,</span>
				<span class="n">phys_dest</span>	<span class="o">:</span>  <span class="mi">4</span><span class="p">,</span>
				<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">4</span><span class="p">;</span>
			<span class="n">u32</span>   <span class="n">__reserved_3</span>	<span class="o">:</span> <span class="mi">24</span><span class="p">,</span>
				<span class="n">logical_dest</span>	<span class="o">:</span>  <span class="mi">8</span><span class="p">;</span>
		<span class="p">}</span> <span class="n">dest</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">icr2</span><span class="p">;</span>

<span class="cm">/*320*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* LVT - Timer */</span>
		<span class="n">u32</span>   <span class="n">vector</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">4</span><span class="p">,</span>
			<span class="n">delivery_status</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">mask</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">timer_mode</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_3</span>	<span class="o">:</span> <span class="mi">14</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">lvt_timer</span><span class="p">;</span>

<span class="cm">/*330*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* LVT - Thermal Sensor */</span>
		<span class="n">u32</span>  <span class="n">vector</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">delivery_mode</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">delivery_status</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">mask</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_3</span>	<span class="o">:</span> <span class="mi">15</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">lvt_thermal</span><span class="p">;</span>

<span class="cm">/*340*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* LVT - Performance Counter */</span>
		<span class="n">u32</span>   <span class="n">vector</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">delivery_mode</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">delivery_status</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">mask</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_3</span>	<span class="o">:</span> <span class="mi">15</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">lvt_pc</span><span class="p">;</span>

<span class="cm">/*350*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* LVT - LINT0 */</span>
		<span class="n">u32</span>   <span class="n">vector</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">delivery_mode</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">delivery_status</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">polarity</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">remote_irr</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">trigger</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">mask</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span> <span class="mi">15</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">lvt_lint0</span><span class="p">;</span>

<span class="cm">/*360*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* LVT - LINT1 */</span>
		<span class="n">u32</span>   <span class="n">vector</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">delivery_mode</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">delivery_status</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">polarity</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">remote_irr</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">trigger</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">mask</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span> <span class="mi">15</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">lvt_lint1</span><span class="p">;</span>

<span class="cm">/*370*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* LVT - Error */</span>
		<span class="n">u32</span>   <span class="n">vector</span>		<span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span>  <span class="mi">4</span><span class="p">,</span>
			<span class="n">delivery_status</span>	<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_2</span>	<span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>
			<span class="n">mask</span>		<span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
			<span class="n">__reserved_3</span>	<span class="o">:</span> <span class="mi">15</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_4</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">lvt_error</span><span class="p">;</span>

<span class="cm">/*380*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Timer Initial Count Register */</span>
		<span class="n">u32</span>   <span class="n">initial_count</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">timer_icr</span><span class="p">;</span>

<span class="cm">/*390*/</span>	<span class="k">const</span>
	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Timer Current Count Register */</span>
		<span class="n">u32</span>   <span class="n">curr_count</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">timer_ccr</span><span class="p">;</span>

<span class="cm">/*3A0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_16</span><span class="p">;</span>

<span class="cm">/*3B0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_17</span><span class="p">;</span>

<span class="cm">/*3C0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_18</span><span class="p">;</span>

<span class="cm">/*3D0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_19</span><span class="p">;</span>

<span class="cm">/*3E0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="cm">/* Timer Divide Configuration Register */</span>
		<span class="n">u32</span>   <span class="n">divisor</span>		<span class="o">:</span>  <span class="mi">4</span><span class="p">,</span>
			<span class="n">__reserved_1</span>	<span class="o">:</span> <span class="mi">28</span><span class="p">;</span>
		<span class="n">u32</span> <span class="n">__reserved_2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="p">}</span> <span class="n">timer_dcr</span><span class="p">;</span>

<span class="cm">/*3F0*/</span>	<span class="k">struct</span> <span class="p">{</span> <span class="n">u32</span> <span class="n">__reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span> <span class="p">}</span> <span class="n">__reserved_20</span><span class="p">;</span>

<span class="p">}</span> <span class="n">__attribute__</span> <span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="cp">#undef u32</span>

<span class="cp">#ifdef CONFIG_X86_32</span>
 <span class="cp">#define BAD_APICID 0xFFu</span>
<span class="cp">#else</span>
 <span class="cp">#define BAD_APICID 0xFFFFu</span>
<span class="cp">#endif</span>

<span class="k">enum</span> <span class="n">ioapic_irq_destination_types</span> <span class="p">{</span>
	<span class="n">dest_Fixed</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">dest_LowestPrio</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">dest_SMI</span>		<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">dest__reserved_1</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="n">dest_NMI</span>		<span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="n">dest_INIT</span>		<span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="n">dest__reserved_2</span>	<span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
	<span class="n">dest_ExtINT</span>		<span class="o">=</span> <span class="mi">7</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_X86_APICDEF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
