<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › x86 › include › asm › mpspec_def.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mpspec_def.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_X86_MPSPEC_DEF_H</span>
<span class="cp">#define _ASM_X86_MPSPEC_DEF_H</span>

<span class="cm">/*</span>
<span class="cm"> * Structure definitions for SMP machines following the</span>
<span class="cm"> * Intel Multiprocessing Specification 1.1 and 1.4.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * This tag identifies where the SMP configuration</span>
<span class="cm"> * information is.</span>
<span class="cm"> */</span>

<span class="cp">#define SMP_MAGIC_IDENT	((&#39;_&#39;&lt;&lt;24) | (&#39;P&#39;&lt;&lt;16) | (&#39;M&#39;&lt;&lt;8) | &#39;_&#39;)</span>

<span class="cp">#ifdef CONFIG_X86_32</span>
<span class="cp"># define MAX_MPC_ENTRY 1024</span>
<span class="cp">#endif</span>

<span class="cm">/* Intel MP Floating Pointer Structure */</span>
<span class="k">struct</span> <span class="n">mpf_intel</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">signature</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>		<span class="cm">/* &quot;_MP_&quot;			*/</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">physptr</span><span class="p">;</span>		<span class="cm">/* Configuration table address	*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">length</span><span class="p">;</span>		<span class="cm">/* Our length (paragraphs)	*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">specification</span><span class="p">;</span>	<span class="cm">/* Specification version	*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">checksum</span><span class="p">;</span>		<span class="cm">/* Checksum (makes sum 0)	*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">feature1</span><span class="p">;</span>		<span class="cm">/* Standard or configuration ?	*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">feature2</span><span class="p">;</span>		<span class="cm">/* Bit7 set for IMCR|PIC	*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">feature3</span><span class="p">;</span>		<span class="cm">/* Unused (0)			*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">feature4</span><span class="p">;</span>		<span class="cm">/* Unused (0)			*/</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">feature5</span><span class="p">;</span>		<span class="cm">/* Unused (0)			*/</span>
<span class="p">};</span>

<span class="cp">#define MPC_SIGNATURE &quot;PCMP&quot;</span>

<span class="k">struct</span> <span class="n">mpc_table</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">signature</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">length</span><span class="p">;</span>		<span class="cm">/* Size of table */</span>
	<span class="kt">char</span> <span class="n">spec</span><span class="p">;</span>			<span class="cm">/* 0x01 */</span>
	<span class="kt">char</span> <span class="n">checksum</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">oem</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="kt">char</span> <span class="n">productid</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">oemptr</span><span class="p">;</span>		<span class="cm">/* 0 if not present */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">oemsize</span><span class="p">;</span>		<span class="cm">/* 0 if not present */</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">oemcount</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">lapic</span><span class="p">;</span>		<span class="cm">/* APIC address */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reserved</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Followed by entries */</span>

<span class="cp">#define	MP_PROCESSOR		0</span>
<span class="cp">#define	MP_BUS			1</span>
<span class="cp">#define	MP_IOAPIC		2</span>
<span class="cp">#define	MP_INTSRC		3</span>
<span class="cp">#define	MP_LINTSRC		4</span>
<span class="cm">/* Used by IBM NUMA-Q to describe node locality */</span>
<span class="cp">#define	MP_TRANSLATION		192</span>

<span class="cp">#define CPU_ENABLED		1	</span><span class="cm">/* Processor is available */</span><span class="cp"></span>
<span class="cp">#define CPU_BOOTPROCESSOR	2	</span><span class="cm">/* Processor is the BP */</span><span class="cp"></span>

<span class="cp">#define CPU_STEPPING_MASK	0x000F</span>
<span class="cp">#define CPU_MODEL_MASK		0x00F0</span>
<span class="cp">#define CPU_FAMILY_MASK		0x0F00</span>

<span class="k">struct</span> <span class="n">mpc_cpu</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">apicid</span><span class="p">;</span>		<span class="cm">/* Local APIC number */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">apicver</span><span class="p">;</span>		<span class="cm">/* Its versions */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cpuflag</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpufeature</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">featureflag</span><span class="p">;</span>	<span class="cm">/* CPUID feature value */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reserved</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mpc_bus</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">busid</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bustype</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* List of Bus Type string values, Intel MP Spec. */</span>
<span class="cp">#define BUSTYPE_EISA	&quot;EISA&quot;</span>
<span class="cp">#define BUSTYPE_ISA	&quot;ISA&quot;</span>
<span class="cp">#define BUSTYPE_INTERN	&quot;INTERN&quot;	</span><span class="cm">/* Internal BUS */</span><span class="cp"></span>
<span class="cp">#define BUSTYPE_MCA	&quot;MCA&quot;		</span><span class="cm">/* Obsolete */</span><span class="cp"></span>
<span class="cp">#define BUSTYPE_VL	&quot;VL&quot;		</span><span class="cm">/* Local bus */</span><span class="cp"></span>
<span class="cp">#define BUSTYPE_PCI	&quot;PCI&quot;</span>
<span class="cp">#define BUSTYPE_PCMCIA	&quot;PCMCIA&quot;</span>
<span class="cp">#define BUSTYPE_CBUS	&quot;CBUS&quot;</span>
<span class="cp">#define BUSTYPE_CBUSII	&quot;CBUSII&quot;</span>
<span class="cp">#define BUSTYPE_FUTURE	&quot;FUTURE&quot;</span>
<span class="cp">#define BUSTYPE_MBI	&quot;MBI&quot;</span>
<span class="cp">#define BUSTYPE_MBII	&quot;MBII&quot;</span>
<span class="cp">#define BUSTYPE_MPI	&quot;MPI&quot;</span>
<span class="cp">#define BUSTYPE_MPSA	&quot;MPSA&quot;</span>
<span class="cp">#define BUSTYPE_NUBUS	&quot;NUBUS&quot;</span>
<span class="cp">#define BUSTYPE_TC	&quot;TC&quot;</span>
<span class="cp">#define BUSTYPE_VME	&quot;VME&quot;</span>
<span class="cp">#define BUSTYPE_XPRESS	&quot;XPRESS&quot;</span>

<span class="cp">#define MPC_APIC_USABLE		0x01</span>

<span class="k">struct</span> <span class="n">mpc_ioapic</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">apicid</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">apicver</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">flags</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">apicaddr</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">mpc_intsrc</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">irqtype</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">irqflag</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">srcbus</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">srcbusirq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dstapic</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dstirq</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">mp_irq_source_types</span> <span class="p">{</span>
	<span class="n">mp_INT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">mp_NMI</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">mp_SMI</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">mp_ExtINT</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">};</span>

<span class="cp">#define MP_IRQDIR_DEFAULT	0</span>
<span class="cp">#define MP_IRQDIR_HIGH		1</span>
<span class="cp">#define MP_IRQDIR_LOW		3</span>

<span class="cp">#define MP_APIC_ALL	0xFF</span>

<span class="k">struct</span> <span class="n">mpc_lintsrc</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">type</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">irqtype</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">irqflag</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">srcbusid</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">srcbusirq</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">destapic</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">destapiclint</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define MPC_OEM_SIGNATURE &quot;_OEM&quot;</span>

<span class="k">struct</span> <span class="n">mpc_oemtable</span> <span class="p">{</span>
	<span class="kt">char</span> <span class="n">signature</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">length</span><span class="p">;</span>		<span class="cm">/* Size of table */</span>
	<span class="kt">char</span>  <span class="n">rev</span><span class="p">;</span>			<span class="cm">/* 0x01 */</span>
	<span class="kt">char</span>  <span class="n">checksum</span><span class="p">;</span>
	<span class="kt">char</span>  <span class="n">mpc</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Default configurations</span>
<span class="cm"> *</span>
<span class="cm"> *	1	2 CPU ISA 82489DX</span>
<span class="cm"> *	2	2 CPU EISA 82489DX neither IRQ 0 timer nor IRQ 13 DMA chaining</span>
<span class="cm"> *	3	2 CPU EISA 82489DX</span>
<span class="cm"> *	4	2 CPU MCA 82489DX</span>
<span class="cm"> *	5	2 CPU ISA+PCI</span>
<span class="cm"> *	6	2 CPU EISA+PCI</span>
<span class="cm"> *	7	2 CPU MCA+PCI</span>
<span class="cm"> */</span>

<span class="k">enum</span> <span class="n">mp_bustype</span> <span class="p">{</span>
	<span class="n">MP_BUS_ISA</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="n">MP_BUS_EISA</span><span class="p">,</span>
	<span class="n">MP_BUS_PCI</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="cm">/* _ASM_X86_MPSPEC_DEF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
