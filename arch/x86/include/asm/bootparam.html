<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › x86 › include › asm › bootparam.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>bootparam.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_X86_BOOTPARAM_H</span>
<span class="cp">#define _ASM_X86_BOOTPARAM_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/screen_info.h&gt;</span>
<span class="cp">#include &lt;linux/apm_bios.h&gt;</span>
<span class="cp">#include &lt;linux/edd.h&gt;</span>
<span class="cp">#include &lt;asm/e820.h&gt;</span>
<span class="cp">#include &lt;asm/ist.h&gt;</span>
<span class="cp">#include &lt;video/edid.h&gt;</span>

<span class="cm">/* setup data types */</span>
<span class="cp">#define SETUP_NONE			0</span>
<span class="cp">#define SETUP_E820_EXT			1</span>
<span class="cp">#define SETUP_DTB			2</span>

<span class="cm">/* extensible setup data list node */</span>
<span class="k">struct</span> <span class="n">setup_data</span> <span class="p">{</span>
	<span class="n">__u64</span> <span class="n">next</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">type</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">len</span><span class="p">;</span>
	<span class="n">__u8</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">setup_header</span> <span class="p">{</span>
	<span class="n">__u8</span>	<span class="n">setup_sects</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">root_flags</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">syssize</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">ram_size</span><span class="p">;</span>
<span class="cp">#define RAMDISK_IMAGE_START_MASK	0x07FF</span>
<span class="cp">#define RAMDISK_PROMPT_FLAG		0x8000</span>
<span class="cp">#define RAMDISK_LOAD_FLAG		0x4000</span>
	<span class="n">__u16</span>	<span class="n">vid_mode</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">root_dev</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">boot_flag</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">jump</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">header</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">version</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">realmode_swtch</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">start_sys</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">kernel_version</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">type_of_loader</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">loadflags</span><span class="p">;</span>
<span class="cp">#define LOADED_HIGH	(1&lt;&lt;0)</span>
<span class="cp">#define QUIET_FLAG	(1&lt;&lt;5)</span>
<span class="cp">#define KEEP_SEGMENTS	(1&lt;&lt;6)</span>
<span class="cp">#define CAN_USE_HEAP	(1&lt;&lt;7)</span>
	<span class="n">__u16</span>	<span class="n">setup_move_size</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">code32_start</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">ramdisk_image</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">ramdisk_size</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">bootsect_kludge</span><span class="p">;</span>
	<span class="n">__u16</span>	<span class="n">heap_end_ptr</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">ext_loader_ver</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">ext_loader_type</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">cmd_line_ptr</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">initrd_addr_max</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">kernel_alignment</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">relocatable_kernel</span><span class="p">;</span>
	<span class="n">__u8</span>	<span class="n">_pad2</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
	<span class="n">__u32</span>	<span class="n">cmdline_size</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">hardware_subarch</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">hardware_subarch_data</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">payload_offset</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">payload_length</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">setup_data</span><span class="p">;</span>
	<span class="n">__u64</span>	<span class="n">pref_address</span><span class="p">;</span>
	<span class="n">__u32</span>	<span class="n">init_size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">sys_desc_table</span> <span class="p">{</span>
	<span class="n">__u16</span> <span class="n">length</span><span class="p">;</span>
	<span class="n">__u8</span>  <span class="n">table</span><span class="p">[</span><span class="mi">14</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* Gleaned from OFW&#39;s set-parameters in cpu/x86/pc/linux.fth */</span>
<span class="k">struct</span> <span class="n">olpc_ofw_header</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">ofw_magic</span><span class="p">;</span>	<span class="cm">/* OFW signature */</span>
	<span class="n">__u32</span> <span class="n">ofw_version</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">cif_handler</span><span class="p">;</span>	<span class="cm">/* callback into OFW */</span>
	<span class="n">__u32</span> <span class="n">irq_desc_table</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">struct</span> <span class="n">efi_info</span> <span class="p">{</span>
	<span class="n">__u32</span> <span class="n">efi_loader_signature</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_systab</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_memdesc_size</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_memdesc_version</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_memmap</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_memmap_size</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_systab_hi</span><span class="p">;</span>
	<span class="n">__u32</span> <span class="n">efi_memmap_hi</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* The so-called &quot;zeropage&quot; */</span>
<span class="k">struct</span> <span class="n">boot_params</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">screen_info</span> <span class="n">screen_info</span><span class="p">;</span>			<span class="cm">/* 0x000 */</span>
	<span class="k">struct</span> <span class="n">apm_bios_info</span> <span class="n">apm_bios_info</span><span class="p">;</span>		<span class="cm">/* 0x040 */</span>
	<span class="n">__u8</span>  <span class="n">_pad2</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>					<span class="cm">/* 0x054 */</span>
	<span class="n">__u64</span>  <span class="n">tboot_addr</span><span class="p">;</span>				<span class="cm">/* 0x058 */</span>
	<span class="k">struct</span> <span class="n">ist_info</span> <span class="n">ist_info</span><span class="p">;</span>			<span class="cm">/* 0x060 */</span>
	<span class="n">__u8</span>  <span class="n">_pad3</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>				<span class="cm">/* 0x070 */</span>
	<span class="n">__u8</span>  <span class="n">hd0_info</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>	<span class="cm">/* obsolete! */</span>		<span class="cm">/* 0x080 */</span>
	<span class="n">__u8</span>  <span class="n">hd1_info</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>	<span class="cm">/* obsolete! */</span>		<span class="cm">/* 0x090 */</span>
	<span class="k">struct</span> <span class="n">sys_desc_table</span> <span class="n">sys_desc_table</span><span class="p">;</span>		<span class="cm">/* 0x0a0 */</span>
	<span class="k">struct</span> <span class="n">olpc_ofw_header</span> <span class="n">olpc_ofw_header</span><span class="p">;</span>		<span class="cm">/* 0x0b0 */</span>
	<span class="n">__u8</span>  <span class="n">_pad4</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>				<span class="cm">/* 0x0c0 */</span>
	<span class="k">struct</span> <span class="n">edid_info</span> <span class="n">edid_info</span><span class="p">;</span>			<span class="cm">/* 0x140 */</span>
	<span class="k">struct</span> <span class="n">efi_info</span> <span class="n">efi_info</span><span class="p">;</span>			<span class="cm">/* 0x1c0 */</span>
	<span class="n">__u32</span> <span class="n">alt_mem_k</span><span class="p">;</span>				<span class="cm">/* 0x1e0 */</span>
	<span class="n">__u32</span> <span class="n">scratch</span><span class="p">;</span>		<span class="cm">/* Scratch field! */</span>	<span class="cm">/* 0x1e4 */</span>
	<span class="n">__u8</span>  <span class="n">e820_entries</span><span class="p">;</span>				<span class="cm">/* 0x1e8 */</span>
	<span class="n">__u8</span>  <span class="n">eddbuf_entries</span><span class="p">;</span>				<span class="cm">/* 0x1e9 */</span>
	<span class="n">__u8</span>  <span class="n">edd_mbr_sig_buf_entries</span><span class="p">;</span>			<span class="cm">/* 0x1ea */</span>
	<span class="n">__u8</span>  <span class="n">kbd_status</span><span class="p">;</span>				<span class="cm">/* 0x1eb */</span>
	<span class="n">__u8</span>  <span class="n">_pad6</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>					<span class="cm">/* 0x1ec */</span>
	<span class="k">struct</span> <span class="n">setup_header</span> <span class="n">hdr</span><span class="p">;</span>    <span class="cm">/* setup header */</span>	<span class="cm">/* 0x1f1 */</span>
	<span class="n">__u8</span>  <span class="n">_pad7</span><span class="p">[</span><span class="mh">0x290</span><span class="o">-</span><span class="mh">0x1f1</span><span class="o">-</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="n">setup_header</span><span class="p">)];</span>
	<span class="n">__u32</span> <span class="n">edd_mbr_sig_buffer</span><span class="p">[</span><span class="n">EDD_MBR_SIG_MAX</span><span class="p">];</span>	<span class="cm">/* 0x290 */</span>
	<span class="k">struct</span> <span class="n">e820entry</span> <span class="n">e820_map</span><span class="p">[</span><span class="n">E820MAX</span><span class="p">];</span>		<span class="cm">/* 0x2d0 */</span>
	<span class="n">__u8</span>  <span class="n">_pad8</span><span class="p">[</span><span class="mi">48</span><span class="p">];</span>				<span class="cm">/* 0xcd0 */</span>
	<span class="k">struct</span> <span class="n">edd_info</span> <span class="n">eddbuf</span><span class="p">[</span><span class="n">EDDMAXNR</span><span class="p">];</span>		<span class="cm">/* 0xd00 */</span>
	<span class="n">__u8</span>  <span class="n">_pad9</span><span class="p">[</span><span class="mi">276</span><span class="p">];</span>				<span class="cm">/* 0xeec */</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">));</span>

<span class="k">enum</span> <span class="p">{</span>
	<span class="n">X86_SUBARCH_PC</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">X86_SUBARCH_LGUEST</span><span class="p">,</span>
	<span class="n">X86_SUBARCH_XEN</span><span class="p">,</span>
	<span class="n">X86_SUBARCH_MRST</span><span class="p">,</span>
	<span class="n">X86_SUBARCH_CE4100</span><span class="p">,</span>
	<span class="n">X86_NR_SUBARCHS</span><span class="p">,</span>
<span class="p">};</span>



<span class="cp">#endif </span><span class="cm">/* _ASM_X86_BOOTPARAM_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
