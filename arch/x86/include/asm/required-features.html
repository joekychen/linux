<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › x86 › include › asm › required-features.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>required-features.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_X86_REQUIRED_FEATURES_H</span>
<span class="cp">#define _ASM_X86_REQUIRED_FEATURES_H</span>

<span class="cm">/* Define minimum CPUID feature set for kernel These bits are checked</span>
<span class="cm">   really early to actually display a visible error message before the</span>
<span class="cm">   kernel dies.  Make sure to assign features to the proper mask!</span>

<span class="cm">   Some requirements that are not in CPUID yet are also in the</span>
<span class="cm">   CONFIG_X86_MINIMUM_CPU_FAMILY which is checked too.</span>

<span class="cm">   The real information is in arch/x86/Kconfig.cpu, this just converts</span>
<span class="cm">   the CONFIGs into a bitmask */</span>

<span class="cp">#ifndef CONFIG_MATH_EMULATION</span>
<span class="cp"># define NEED_FPU	(1&lt;&lt;(X86_FEATURE_FPU &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp"># define NEED_FPU	0</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_X86_PAE) || defined(CONFIG_X86_64)</span>
<span class="cp"># define NEED_PAE	(1&lt;&lt;(X86_FEATURE_PAE &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp"># define NEED_PAE	0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_X86_CMPXCHG64</span>
<span class="cp"># define NEED_CX8	(1&lt;&lt;(X86_FEATURE_CX8 &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp"># define NEED_CX8	0</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_X86_CMOV) || defined(CONFIG_X86_64)</span>
<span class="cp"># define NEED_CMOV	(1&lt;&lt;(X86_FEATURE_CMOV &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp"># define NEED_CMOV	0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_X86_USE_3DNOW</span>
<span class="cp"># define NEED_3DNOW	(1&lt;&lt;(X86_FEATURE_3DNOW &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp"># define NEED_3DNOW	0</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_X86_P6_NOP) || defined(CONFIG_X86_64)</span>
<span class="cp"># define NEED_NOPL	(1&lt;&lt;(X86_FEATURE_NOPL &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp"># define NEED_NOPL	0</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_X86_64</span>
<span class="cp">#ifdef CONFIG_PARAVIRT</span>
<span class="cm">/* Paravirtualized systems may not have PSE or PGE available */</span>
<span class="cp">#define NEED_PSE	0</span>
<span class="cp">#define NEED_PGE	0</span>
<span class="cp">#else</span>
<span class="cp">#define NEED_PSE	(1&lt;&lt;(X86_FEATURE_PSE) &amp; 31)</span>
<span class="cp">#define NEED_PGE	(1&lt;&lt;(X86_FEATURE_PGE) &amp; 31)</span>
<span class="cp">#endif</span>
<span class="cp">#define NEED_MSR	(1&lt;&lt;(X86_FEATURE_MSR &amp; 31))</span>
<span class="cp">#define NEED_FXSR	(1&lt;&lt;(X86_FEATURE_FXSR &amp; 31))</span>
<span class="cp">#define NEED_XMM	(1&lt;&lt;(X86_FEATURE_XMM &amp; 31))</span>
<span class="cp">#define NEED_XMM2	(1&lt;&lt;(X86_FEATURE_XMM2 &amp; 31))</span>
<span class="cp">#define NEED_LM		(1&lt;&lt;(X86_FEATURE_LM &amp; 31))</span>
<span class="cp">#else</span>
<span class="cp">#define NEED_PSE	0</span>
<span class="cp">#define NEED_MSR	0</span>
<span class="cp">#define NEED_PGE	0</span>
<span class="cp">#define NEED_FXSR	0</span>
<span class="cp">#define NEED_XMM	0</span>
<span class="cp">#define NEED_XMM2	0</span>
<span class="cp">#define NEED_LM		0</span>
<span class="cp">#endif</span>

<span class="cp">#define REQUIRED_MASK0	(NEED_FPU|NEED_PSE|NEED_MSR|NEED_PAE|\</span>
<span class="cp">			 NEED_CX8|NEED_PGE|NEED_FXSR|NEED_CMOV|\</span>
<span class="cp">			 NEED_XMM|NEED_XMM2)</span>
<span class="cp">#define SSE_MASK	(NEED_XMM|NEED_XMM2)</span>

<span class="cp">#define REQUIRED_MASK1	(NEED_LM|NEED_3DNOW)</span>

<span class="cp">#define REQUIRED_MASK2	0</span>
<span class="cp">#define REQUIRED_MASK3	(NEED_NOPL)</span>
<span class="cp">#define REQUIRED_MASK4	0</span>
<span class="cp">#define REQUIRED_MASK5	0</span>
<span class="cp">#define REQUIRED_MASK6	0</span>
<span class="cp">#define REQUIRED_MASK7	0</span>
<span class="cp">#define REQUIRED_MASK8	0</span>
<span class="cp">#define REQUIRED_MASK9	0</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_X86_REQUIRED_FEATURES_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
