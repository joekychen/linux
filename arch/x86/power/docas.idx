f | hibernate_32.c | s | 3.9K | 141 | David Howells | dhowells@redhat.com | 1332954672 |  | Disintegrate asm/system.h for X86  Disintegrate asm/system.h for X86.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: H. Peter Anvin <hpa@zytor.com> cc: x86@kernel.org
f | Makefile | g | 292B |  | Peter Chubb | peter.chubb@nicta.com.au | 1247052013 |  | x86: Fix resume from suspend when CONFIG_CC_STACKPROTECTOR  Patch 08687aec71bc9134fe336e561f6did877bacf74fc0a (x86: unify power/cpu_(32||64).c)  renamed cpu_32.c to cpu.c, but did not update the special compilation flags for the file for the new name.  This patch fixes the compilation flags, and therefore fixes resume from suspend on my Acer Aspire One.  [rjw: The regression from 2.6.30 fixed by this patch is tracked as  http://bugzilla.kernel.org/show_bug.cgi?id=13661]  Signed-off-by: Peter Chubb <peterc@nicta.com.au> Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
f | hibernate_asm_32.S | g | 1.6K |  | Shaohua Li | shaohua.li@intel.com | 1269974762 |  | x86-32, resume: do a global tlb flush in S4 resume  Colin King reported a strange oops in S4 resume code path (see below). The test system has i5/i7 CPU. The kernel doesn't open PAE, so 4M page table is used. The oops always happen a virtual address 0xc03ff000, which is mapped to the last 4k of first 4M memory. Doing a global tlb flush fixes the issue.  EIP: 0060:[<c0493a01>] EFLAGS: 00010086 CPU: 0 EIP is at copy_loop+0xe/0x15 EAX: 36aeb000 EBX: 00000000 ECX: 00000400 EDX: f55ad46c ESI: 0f800000 EDI: c03ff000 EBP: f67fbec4 ESP: f67fbea8 DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068 ... ... CR2: 00000000c03ff000  Tested-by: Colin Ian King <colin.king@canonical.com> Signed-off-by: Shaohua Li <shaohua.li@intel.com> LKML-Reference: <20100305005932.GA22675@sli10-desk.sh.intel.com> Acked-by: Rafael J. Wysocki <rjw@sisk.pl> Signed-off-by: H. Peter Anvin <hpa@zytor.com> Cc: <stable@kernel.org>
f | hibernate_asm_64.S | g | 3.8K |  | Jeremy Fitzhardinge | jeremy.fitzhardinge@citrix.com | 1234553701 |  | x86: use _types.h headers in asm where available  In general, the only definitions that assembly files can use are in _types.S headers (where available), so convert them.  Signed-off-by: Jeremy Fitzhardinge <jeremy.fitzhardinge@citrix.com>
f | cpu.c | s | 5.9K | 214 | Marcelo Tosatti | mtosatti@redhat.com | 1333367580 |  | x86, kvm: Call restore_sched_clock_state() only after %gs is initialized  s2ram broke due to this KVM commit:    b74f05d61b73 x86: kvmclock: abstract save/restore sched_clock_state  restore_sched_clock_state() methods use percpu data, therefore they must run after %gs is initialized, but before mtrr_bp_restore() (due to lockstat using sched_clock).  Move it to the correct place.  Reported-and-tested-by: Konstantin Khlebnikov <khlebnikov@openvz.org> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Cc: Avi Kivity <avi@redhat.com> Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | hibernate_64.c | s | 4.1K | 142 | Pavel Machek | pavel@ucw.cz | 1279529814 |  | update email address  pavel@suse.cz no longer works, replace it with working address.  Signed-off-by: Pavel Machek <pavel@ucw.cz> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
