f | common.c | s | 31K | 1088 | Steven Rostedt | srostedt@redhat.com | 1338520341 |  | x86: Allow nesting of the debug stack IDT setting  When the NMI handler runs, it checks if it preempted a debug handler and if that handler is using the debug stack. If it is, it changes the IDT table not to update the stack, otherwise it will reset the debug stack and corrupt the debug handler it preempted.  Now that ftrace uses breakpoints to change functions from nops to callers, many more places may hit a breakpoint. Unfortunately this includes some of the calls that lockdep performs. Which causes issues with the debug stack. It too needs to change the debug stack before tracing (if called from the debug handler).  Allow the debug_stack_set_zero() and debug_stack_reset() to be nested so that the debug handlers can take advantage of them too.  [ Used this_cpu_*() over __get_cpu_var() as suggested by H. Peter Anvin ]  Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
f | Makefile | g | 1.5K |  | Andi Kleen | ak@linux.intel.com | 1327625081 |  | Add driver auto probing for x86 features v4  There's a growing number of drivers that support a specific x86 feature or CPU.  Currently loading these drivers currently on a generic distribution requires various driver specific hacks and it often doesn't work.  This patch adds auto probing for drivers based on the x86 cpuid information, in particular based on vendor/family/model number and also based on CPUID feature bits.  For example a common issue is not loading the SSE 4.2 accelerated CRC module: this can significantly lower the performance of BTRFS which relies on fast CRC.  Another issue is loading the right CPUFREQ driver for the current CPU. Currently distributions often try all all possible driver until one sticks, which is not really a good way to do this.  It works with existing udev without any changes. The code exports the x86 information as a generic string in sysfs that can be matched by udev's pattern matching.  This scheme does not support numeric ranges, so if you want to handle e.g. ranges of model numbers they have to be encoded in ASCII or simply all models or families listed. Fixing that would require changing udev.  Another issue is that udev will happily load all drivers that match, there is currently no nice way to stop a specific driver from being loaded if it's not needed (e.g. if you don't need fast CRC) But there are not that many cpu specific drivers around and they're all not that bloated, so this isn't a particularly serious issue.  Originally this patch added the modalias to the normal cpu sysdevs. However sysdevs don't have all the infrastructure needed for udev, so it couldn't really autoload drivers. This patch instead adds the CPU modaliases to the cpuid devices, which are real devices with full support for udev. This implies that the cpuid driver has to be loaded to use this.  This patch just adds infrastructure, some driver conversions in followups.  Thanks to Kay for helping with some sysfs magic.  v2: Constifcation, some updates v4: (trenn@suse.de):     - Use kzalloc instead of kmalloc to terminate modalias buffer     - Use uppercase hex values to match correctly against hex values containing       letters  Cc: Dave Jones <davej@redhat.com> Cc: Kay Sievers <kay.sievers@vrfy.org> Cc: Jen Axboe <axboe@kernel.dk> Cc: Herbert Xu <herbert@gondor.apana.org.au> Cc: Huang Ying <ying.huang@intel.com> Cc: Len Brown <lenb@kernel.org> Signed-off-by: Andi Kleen <ak@linux.intel.com> Signed-off-by: Thomas Renninger <trenn@suse.de> Acked-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | cpu.h | s | 1009B | 29 | Borislav Petkov | borislav.petkov@amd.com | 1323414053 |  | x86, CPU: Drop superfluous get_cpu_cap() prototype  The get_cpu_cap() external function prototype was declared twice so lose one of them.  Clean up the header guard while at it.  Signed-off-by: Borislav Petkov <borislav.petkov@amd.com> Link: http://lkml.kernel.org/r/1322594083-14507-1-git-send-email-bp@amd64.org Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | sched.c | s | 1.1K | 42 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1253092867 |  | sched: x86: Name old_perf in a unique way  Silly percpu bits don't respect static..  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> LKML-Reference: <new-submission>
f | mkcapflags.pl | s | 885B | 35 | H. Peter Anvin | hpa@zytor.com | 1340722968 |  | x86, cpufeature: Remove stray %s, add -w to mkcapflags.pl  There was a stray %s left from testing, remove it.  Add -w to the #! line (which is parsed by Perl even if the Perl interpreter is invoked explicitly on the command line) to catch these kinds of errors in the future.  Reported-by: Jean Delvare <khali@linux-fr.org> Link: http://lkml.kernel.org/r/20120626143246.0c9bf301@endymion.delvare Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | centaur.c | s | 10K | 447 | Timo Teräs | timo.teras@iki.fi | 1323965082 |  | x86, centaur: Enable cx8 for VIA Eden too  My box with following cpuinfo needs the cx8 enabling still:  vendor_id	: CentaurHauls cpu family	: 6 model		: 13 model name	: VIA Eden Processor 1200MHz stepping	: 0 cpu MHz		: 1199.940 cache size	: 128 KB  This fixes valgrind to work on my box (it requires and checks cx8 from cpuinfo).  Signed-off-by: Timo Teräs <timo.teras@iki.fi> Link: http://lkml.kernel.org/r/1323961888-10223-1-git-send-email-timo.teras@iki.fi Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | umc.c | s | 497B | 22 | Jan Beulich | jbeulich@novell.com | 1236859987 |  | x86: move various CPU initialization objects into .cpuinit.rodata  Impact: debuggability and micro-optimization  Putting whatever is possible into the (final) .rodata section increases the likelihood of catching memory corruption bugs early, and reduces false cache line sharing.  Signed-off-by: Jan Beulich <jbeulich@novell.com> LKML-Reference: <49B90961.76E4.0078.0@novell.com> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | topology.c | s | 2.5K | 81 | H. Peter Anvin | hpa@linux.intel.com | 1279591361 |  | x86, cpu: Split addon_cpuid_features.c  addon_cpuid_features.c contains exactly two almost completely unrelated functions, plus has a long and very generic name.  Split it into two files, scattered.c for the scattered feature flags, and topology.c for the topology information.  Signed-off-by: H. Peter Anvin <hpa@linux.intel.com> LKML-Reference: <tip-*@git.kernel.org>
f | perf_event_amd.c | s | 17K | 619 | Linus Torvalds | torvalds@linux-foundation.org | 1337800369 |  | Merge branches 'perf-urgent-for-linus' and 'perf-core-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull perf fixes from Ingo Molnar:   - Leftover AMD PMU driver fix fix from the end of the v3.4    stabilization cycle.   - Late tools/perf/ changes that missed the first round:     * endianness fixes     * event parsing improvements     * libtraceevent fixes factored out from trace-cmd     * perl scripting engine fixes related to libtraceevent,     * testcase improvements     * perf inject / pipe mode fixes     * plus a kernel side fix  * 'perf-urgent-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:   perf/x86: Update event scheduling constraints for AMD family 15h models  * 'perf-core-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:   Revert "sched, perf: Use a single callback into the scheduler"   perf evlist: Show event attribute details   perf tools: Bump default sample freq to 4 kHz   perf buildid-list: Work better with pipe mode   perf tools: Fix piped mode read code   perf inject: Fix broken perf inject -b   perf tools: rename HEADER_TRACE_INFO to HEADER_TRACING_DATA   perf tools: Add union u64_swap type for swapping u64 data   perf tools: Carry perf_event_attr bitfield throught different endians   perf record: Fix documentation for branch stack sampling   perf target: Add cpu flag to sample_type if target has cpu   perf tools: Always try to build libtraceevent   perf tools: Rename libparsevent to libtraceevent in Makefile   perf script: Rename struct event to struct event_format in perl engine   perf script: Explicitly handle known default print arg type   perf tools: Add hardcoded name term for pmu events   perf tools: Separate 'mem:' event scanner bits   perf tools: Use allocated list for each parsed event   perf tools: Add support for displaying event parser debug info   perf test: Move parse event automated tests to separated object
f | intel_cacheinfo.c | s | 32K | 1025 | Shai Fultheim | shai@scalemp.com | 1336397257 |  | x86/cache_info: Fix setup of l2/l3 ids  On some architectures (such as vSMP), it is possible to have CPUs with a different number of cores sharing the same cache.  The current implementation implicitly assumes that all CPUs will have the same number of cores sharing caches, and as a result, different CPUs can end up with the same l2/l3 ids.  Fix this by masking out the shared cache bits, instead of shifting the APICID. By doing so, it is guaranteed that the generated cache ids are always unique.  Signed-off-by: Shai Fultheim <shai@scalemp.com> [ rebased, simplified, and reworded the commit message] Signed-off-by: Ido Yariv <ido@wizery.com> Cc: Borislav Petkov <borislav.petkov@amd.com> Cc: Andreas Herrmann <andreas.herrmann3@amd.com> Cc: Mike Travis <travis@sgi.com> Cc: Dave Jones <davej@redhat.com> Link: http://lkml.kernel.org/r/1334873351-31142-1-git-send-email-ido@wizery.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | scattered.c | s | 2.0K | 61 | H. Peter Anvin | hpa@linux.intel.com | 1340640075 |  | x86, cpufeature: Rename X86_FEATURE_DTS to X86_FEATURE_DTHERM  It makes sense to label "Digital Thermal Sensor" as "DTS", but unfortunately the string "dts" was already used for "Debug Store", and /proc/cpuinfo is a user space ABI.  Therefore, rename this to "dtherm".  This conflict went into mainline via the hwmon tree without any x86 maintainer ack, and without any kind of hint in the subject.      a4659053 x86/hwmon: fix initialization of coretemp  Reported-by: Jean Delvare <khali@linux-fr.org> Link: http://lkml.kernel.org/r/4FE34BCB.5050305@linux.intel.com Cc: Jan Beulich <JBeulich@suse.com> Cc: <stable@vger.kernel.org> v2.6.36..v3.4 Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | proc.c | s | 4.2K | 148 | Kevin Winchester | kjwinchester@gmail.com | 1324455909 |  | x86: Simplify code by removing a !SMP #ifdefs from 'struct cpuinfo_x86'  Several fields in struct cpuinfo_x86 were not defined for the !SMP case, likely to save space.  However, those fields still have some meaning for UP, and keeping them allows some #ifdef removal from other files.  The additional size of the UP kernel from this change is not significant enough to worry about keeping up the distinction:  	   text    data     bss     dec     hex filename 	4737168	 506459	 972040	6215667	 5ed7f3	vmlinux.o.before 	4737444	 506459	 972040	6215943	 5ed907	vmlinux.o.after  for a difference of 276 bytes for an example UP config.  If someone wants those 276 bytes back badly then it should be implemented in a cleaner way.  Signed-off-by: Kevin Winchester <kjwinchester@gmail.com> Cc: Steffen Persvold <sp@numascale.com> Link: http://lkml.kernel.org/r/1324428742-12498-1-git-send-email-kjwinchester@gmail.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf_event_intel.c | s | 52K | 1716 | Peter Zijlstra | peterz@infradead.org | 1338994789 |  | perf/x86: Enable/Add IvyBridge hardware support  Implement rudimentary IVB perf support. The SDM states its identical to SNB with exception of the exact event tables, but a quick look suggests they're similar enough.  Also mark SNB-EP as broken for now.  Requested-and-tested-by: Linus Torvalds <torvalds@linux-foundation.org> Cc: Stephane Eranian <eranian@google.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1338884803.28282.153.camel@twins Signed-off-by: Ingo Molnar <mingo@kernel.org>
d | mtrr |  | 9 items |  | zhenzhong.duan | zhenzhong.duan@oracle.com | 1338413820 |  | x86, mtrr: Fix a type overflow in range_to_mtrr func  When boot on sun G5+ with 4T mem, see an overflow in mtrr cleanup as below.  *BAD*gran_size: 2G      chunk_size: 2G  num_reg: 10     lose cover RAM: -18014398505283592M  This is because 1<<31 sign extended. Use an unsigned long constant to fix it.  Useful for mem larger than or equal to 4T.  -v2: Use 64bit constant instead of explicit type conversion as suggested by Yinghai. Description updated too.  Signed-off-by: Zhenzhong Duan <zhenzhong.duan@oracle.com> Link: http://lkml.kernel.org/r/4FC5A77F.6060505@oracle.com Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | mshyperv.c | s | 2.0K | 67 | K. Y. Srinivasan | kys@microsoft.com | 1315470839 |  | x86: Hyper-V: Integrate the clocksource with Hyper-V detection code  The Hyper-V clocksource driver is best integrated with Hyper-V detection code since:    (a) Linux guests running on Hyper-V require it    (b) Integration into that code significanly reduces code size  Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Signed-off-by: Haiyang Zhang <haiyangz@microsoft.com> Cc: gregkh@suse.de Cc: devel@linuxdriverproject.org Cc: virtualization@lists.osdl.org Link: http://lkml.kernel.org/r/1315434310-4827-1-git-send-email-kys@microsoft.com Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | powerflags.c | s | 482B | 19 | Joerg Roedel | joerg.roedel@amd.com | 1323933289 |  | x86: Report cpb and eff_freq_ro flags correctly  Add the flags to get rid of the [9] and [10] feature names in cpuinfo's 'power management' fields and replace them with meaningful names.  Signed-off-by: Joerg Roedel <joerg.roedel@amd.com> Link: http://lkml.kernel.org/r/1323875574-17881-1-git-send-email-joerg.roedel@amd.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf_event.c | s | 42K | 1529 | Arun Sharma | asharma@fb.com | 1338995281 |  | perf/x86: Check if user fp is valid  Signed-off-by: Arun Sharma <asharma@fb.com> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: linux-kernel@vger.kernel.org Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1334961696-19580-4-git-send-email-asharma@fb.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | perf_event_p4.c | s | 43K | 1220 | Robert Richter | robert.richter@amd.com | 1336569792 |  | perf: Pass last sampling period to perf_sample_data_init()  We always need to pass the last sample period to perf_sample_data_init(), otherwise the event distribution will be wrong. Thus, modifiyng the function interface with the required period as argument. So basically a pattern like this:          perf_sample_data_init(&data, ~0ULL);         data.period = event->hw.last_period;  will now be like that:          perf_sample_data_init(&data, ~0ULL, event->hw.last_period);  Avoids unininitialized data.period and simplifies code.  Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1333390758-10893-3-git-send-email-robert.richter@amd.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | bugs.c | s | 3.8K | 154 | Suresh Siddha | suresh.b.siddha@intel.com | 1309480187 |  | x86-32, fpu: Fix DNA exception during check_fpu()  Before check_fpu() is called, we have cr0.TS bit set and hence the floating point code to check the FDIV bug was generating a DNA exception.  Use kernel_fpu_begin()/kernel_fpu_end() around the floating point code to avoid this unnecessary device not available exception during boot.  Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1309479572.2665.1372.camel@sbsiddha-MOBL3.sc.intel.com Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | transmeta.c | s | 2.9K | 98 | Borislav Petkov | petkovbb@googlemail.com | 1259006393 |  | x86, cpu: mv display_cacheinfo -> cpu_detect_cache_sizes  display_cacheinfo() doesn't display anything anymore and it is used to detect CPU cache sizes. Rename it accordingly.  Signed-off-by: Borislav Petkov <petkovbb@gmail.com> LKML-Reference: <20091121130145.GA31357@liondog.tnic> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | perf_event.h | s | 14K | 485 | Peter Zijlstra | peterz@infradead.org | 1338994787 |  | perf/x86: Implement cycles:p for SNB/IVB  Now that there's finally a chip with working PEBS (IvyBridge), we can enable the hardware and implement cycles:p for SNB/IVB.  Cc: Stephane Eranian <eranian@google.com> Requested-and-tested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1338884803.28282.153.camel@twins Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | perf_event_amd_ibs.c | s | 19K | 707 | Robert Richter | robert.richter@amd.com | 1336569797 |  | perf/x86-ibs: Fix usage of IBS op current count  The value of IbsOpCurCnt rolls over when it reaches IbsOpMaxCnt. Thus, it is reset to zero by hardware. To get the correct count we need to add the max count to it in case we received an ibs sample (valid bit set).  Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1333390758-10893-13-git-send-email-robert.richter@amd.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | perf_event_intel_lbr.c | s | 16K | 596 | Stephane Eranian | eranian@google.com | 1330955742 |  | perf/x86: Add LBR software filter support for Intel CPUs  This patch adds an internal sofware filter to complement the (optional) LBR hardware filter.  The software filter is necessary:   - as a substitute when there is no HW LBR filter (e.g., Atom, Core)  - to complement HW LBR filter in case of errata (e.g., Nehalem/Westmere)  - to provide finer grain filtering (e.g., all processors)  Sometimes the LBR HW filter cannot distinguish between two types of branches. For instance, to capture syscall as CALLS, it is necessary to enable the LBR_FAR filter which will also capture JMP instructions. Thus, a second pass is necessary to filter those out, this is what the SW filter can do.  The SW filter is built on top of the internal x86 disassembler. It is a best effort filter especially for user level code. It is subject to the availability of the text page of the program.  The SW filter is enabled on all Intel processors. It is bypassed when the user is capturing all branches at all priv levels.  Signed-off-by: Stephane Eranian <eranian@google.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1328826068-11713-9-git-send-email-eranian@google.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | hypervisor.c | s | 2.0K | 67 | Anupam Chanda | achanda@nicira.com | 1310167349 |  | x86, hyper: Change hypervisor detection order  Detect Xen before HyperV because in Viridian compatibility mode Xen presents itself as HyperV.  Move Xen to the top since it seems more likely that Xen would emulate VMware than vice versa.  Signed-off-by: Anupam Chanda <achanda@nicira.com> Link: http://lkml.kernel.org/r/1310150570-26810-1-git-send-email-achanda@nicira.com Acked-by: Stefano Stabellini <stefano.stabellini@eu.citrix.com> Acked-by: Yaozu (Eddie) Dong <eddie.dong@intel.com> Reviewed-by: H. Peter Anvin <hpa@zytor.com> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | perf_event_intel_ds.c | s | 16K | 562 | Peter Zijlstra | peterz@infradead.org | 1338994792 |  | perf/x86: Update SNB PEBS constraints  Afaict there's no need to (incompletely) iterate the MEM_UOPS_RETIRED.* umask state.  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/1338884803.28282.153.camel@twins Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | vmware.c | s | 4.1K | 116 | Lucas De Marchi | lucas.de.marchi@gmail.com | 1300441170 |  | x86: Fix common misspellings  They were generated by 'codespell' and then manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi> Cc: trivial@kernel.org LKML-Reference: <1300389856-1099-3-git-send-email-lucas.demarchi@profusion.mobi> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | cyrix.c | s | 12K | 388 | Borislav Petkov | petkovbb@googlemail.com | 1259006393 |  | x86, cpu: mv display_cacheinfo -> cpu_detect_cache_sizes  display_cacheinfo() doesn't display anything anymore and it is used to detect CPU cache sizes. Rename it accordingly.  Signed-off-by: Borislav Petkov <petkovbb@gmail.com> LKML-Reference: <20091121130145.GA31357@liondog.tnic> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
f | bugs_64.c | s | 788B | 30 | Alan Cox | alan@linux.intel.com | 1247304249 |  | x86/cpu: Clean up various files a bit  No code changes except printk levels (although some of the K6 mtrr code might be clearer if there were a few as would splitting out some of the intel cache code).  Signed-off-by: Alan Cox <alan@linux.intel.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | amd.c | s | 19K | 687 | Andreas Herrmann | andreas.herrmann3@amd.com | 1335537789 |  | x86/amd: Re-enable CPU topology extensions in case BIOS has disabled it  BIOS will switch off the corresponding feature flag on family 15h models 10h-1fh non-desktop CPUs.  The topology extension CPUID leafs are required to detect which cores belong to the same compute unit. (thread siblings mask is set accordingly and also correct information about L1i and L2 cache sharing depends on this).  W/o this patch we wouldn't see which cores belong to the same compute unit and also cache sharing information for L1i and L2 would be incorrect on such systems.  Signed-off-by: Andreas Herrmann <andreas.herrmann3@amd.com> Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | intel.c | s | 14K | 488 | Kevin Winchester | kjwinchester@gmail.com | 1324455909 |  | x86: Simplify code by removing a !SMP #ifdefs from 'struct cpuinfo_x86'  Several fields in struct cpuinfo_x86 were not defined for the !SMP case, likely to save space.  However, those fields still have some meaning for UP, and keeping them allows some #ifdef removal from other files.  The additional size of the UP kernel from this change is not significant enough to worry about keeping up the distinction:  	   text    data     bss     dec     hex filename 	4737168	 506459	 972040	6215667	 5ed7f3	vmlinux.o.before 	4737444	 506459	 972040	6215943	 5ed907	vmlinux.o.after  for a difference of 276 bytes for an example UP config.  If someone wants those 276 bytes back badly then it should be implemented in a cleaner way.  Signed-off-by: Kevin Winchester <kjwinchester@gmail.com> Cc: Steffen Persvold <sp@numascale.com> Link: http://lkml.kernel.org/r/1324428742-12498-1-git-send-email-kjwinchester@gmail.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | match.c | s | 2.4K | 86 | Josh Triplett | josh@joshtriplett.org | 1334578819 |  | x86: Fix typo in MODULE_DEVICE_TABLE example: s/x86_cpu/x86cpu/  Signed-off-by: Josh Triplett <josh@joshtriplett.org> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | perf_event_p6.c | s | 3.9K | 140 | Jiri Olsa | jolsa@redhat.com | 1331917566 |  | perf: Adding sysfs group format attribute for pmu device  Adding sysfs group 'format' attribute for pmu device that contains a syntax description on how to construct raw events.  The event configuration is described in following struct pefr_event_attr attributes:    config   config1   config2  Each sysfs attribute within the format attribute group, describes mapping of name and bitfield definition within one of above attributes.  eg:   "/sys/...<dev>/format/event" contains "config:0-7"   "/sys/...<dev>/format/umask" contains "config:8-15"   "/sys/...<dev>/format/usr"   contains "config:16"  the attribute value syntax is:    line:      config ':' bits   config:    'config' || 'config1' || 'config2"   bits:      bits ',' bit_term || bit_term   bit_term:  VALUE '-' VALUE || VALUE  Adding format attribute definitions for x86 cpu pmus.  Acked-by: Peter Zijlstra <peterz@infradead.org> Signed-off-by: Peter Zijlstra <peterz@infradead.org> Signed-off-by: Jiri Olsa <jolsa@redhat.com> Link: http://lkml.kernel.org/n/tip-vhdk5y2hyype9j63prymty36@git.kernel.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
d | mcheck |  | 12 items |  | Thomas Gleixner | tglx@linutronix.de | 1338975201 |  | x86: mce: Add the dropped timer interval init back  commit 82f7af09 ("x86/mce: Cleanup timer mess) dropped the initialization of the per cpu timer interval. Duh :(  Restore the previous behaviour.  Reported-by: Chen Gong <gong.chen@linux.intel.com> Cc: bp@amd64.org Cc: tony.luck@intel.com Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | perfctr-watchdog.c | s | 3.9K | 133 | Robert Richter | robert.richter@amd.com | 1297859450 |  | perf, x86: Add new AMD family 15h msrs to perfctr reservation code  This patch allows the reservation of perfctrs with new msr addresses introduced for AMD cpu family 15h (0xc0010200/0xc0010201, etc).  Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> LKML-Reference: <1296664860-10886-4-git-send-email-robert.richter@amd.com> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | rdrand.c | s | 2.0K | 65 | H. Peter Anvin | hpa@zytor.com | 1312146139 |  | x86, random: Verify RDRAND functionality and allow it to be disabled  If the CPU declares that RDRAND is available, go through a guranteed reseed sequence, and make sure that it is actually working (producing data.)   If it does not, disable the CPU feature flag.  Allow RDRAND to be disabled on the command line (as opposed to at compile time) for a user who has special requirements with regards to random numbers.  Signed-off-by: H. Peter Anvin <hpa@linux.intel.com> Cc: Matt Mackall <mpm@selenic.com> Cc: Herbert Xu <herbert@gondor.apana.org.au> Cc: "Theodore Ts'o" <tytso@mit.edu>
