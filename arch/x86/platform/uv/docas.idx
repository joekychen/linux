f | tlb_uv.c | s | 55K | 1900 | Cliff Wickman | cpw@sgi.com | 1339148908 |  | x86/uv: Fix UV2 BAU legacy mode  The SGI Altix UV2 BAU (Broadcast Assist Unit) as used for tlb-shootdown (selective broadcast mode) always uses UV2 broadcast descriptor format. There is no need to clear the 'legacy' (UV1) mode, because the hardware always uses UV2 mode for selective broadcast.  But the BIOS uses general broadcast and legacy mode, and the hardware pays attention to the legacy mode bit for general broadcast. So the kernel must not clear that mode bit.  Signed-off-by: Cliff Wickman <cpw@sgi.com> Cc: <stable@kernel.org> Link: http://lkml.kernel.org/r/E1SccoO-0002Lh-Cb@eag09.americas.sgi.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | uv_time.c | s | 10K | 351 | Dimitri Sivanich | sivanich@sgi.com | 1329725276 |  | x86/UV: Lower UV rtc clocksource rating  Lower the rating of the UV rtc clocksource to just below that of the tsc, to improve performance.  Reading the tsc clocksource has lower latency than reading the rtc, so favor it in situations where it is synchronized and stable.  When the tsc is unsynchronized, the rtc needs to be the chosen clocksource.  Signed-off-by: Dimitri Sivanich <sivanich@sgi.com> Cc: John Stultz <johnstul@us.ibm.com> Cc: Jack Steiner <steiner@sgi.com> Link: http://lkml.kernel.org/r/20120217141641.GA28063@sgi.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | uv_sysfs.c | s | 2.2K | 62 | Kay Sievers | kay.sievers@vrfy.org | 1324513563 |  | driver-core: remove sysdev.h usage.  The sysdev.h file should not be needed by any in-kernel code, so remove the .h file from these random files that seem to still want to include it.  The sysdev code will be going away soon, so this include needs to be removed no matter what.  Cc: Jiandong Zheng <jdzheng@broadcom.com> Cc: Scott Branden <sbranden@broadcom.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Kukjin Kim <kgene.kim@samsung.com> Cc: David Brown <davidb@codeaurora.org> Cc: Daniel Walker <dwalker@fifo99.com> Cc: Bryan Huntsman <bryanh@codeaurora.org> Cc: Ben Dooks <ben-linux@fluff.org> Cc: Wan ZongShun <mcuos.com@gmail.com> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Hans-Christian Egtvedt <egtvedt@samfundet.no> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Cc: "Venkatesh Pallipadi Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@redhat.com> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Grant Likely <grant.likely@secretlab.ca> Cc: Richard Purdie <rpurdie@rpsys.net> Cc: Matthew Garrett <mjg@redhat.com> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
f | Makefile | g | 74B |  | Thomas Gleixner | tglx@linutronix.de | 1288182602 |  | x86: Move uv to platform  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Mike Travis <travis@sgi.com>
f | uv_irq.c | s | 6.9K | 238 | Cliff Wickman | cpw@sgi.com | 1327571914 |  | x86/uv: Fix uninitialized spinlocks  Initialize two spinlocks in tlb_uv.c and also properly define/initialize the uv_irq_lock.  The lack of explicit initialization seems to be functionally harmless, but it is diagnosed when these are turned on:          CONFIG_DEBUG_SPINLOCK=y         CONFIG_DEBUG_MUTEXES=y         CONFIG_DEBUG_LOCK_ALLOC=y         CONFIG_LOCKDEP=y  Signed-off-by: Cliff Wickman <cpw@sgi.com> Cc: <stable@kernel.org> Cc: Dimitri Sivanich <sivanich@sgi.com> Link: http://lkml.kernel.org/r/E1RnXd1-0003wU-PM@eag09.americas.sgi.com [ Added the uv_irq_lock initialization fix by Dimitri Sivanich ] Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | bios_uv.c | s | 5.2K | 183 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103835 |  | x86: Fix files explicitly requiring export.h for EXPORT_SYMBOL/THIS_MODULE  These files were implicitly getting EXPORT_SYMBOL via device.h which was including module.h, but that will be fixed up shortly.  By fixing these now, we can avoid seeing things like:  arch/x86/kernel/rtc.c:29: warning: type defaults to ‘int’ in declaration of ‘EXPORT_SYMBOL’ arch/x86/kernel/pci-dma.c:20: warning: type defaults to ‘int’ in declaration of ‘EXPORT_SYMBOL’ arch/x86/kernel/e820.c:69: warning: type defaults to ‘int’ in declaration of ‘EXPORT_SYMBOL_GPL’  [ with input from Randy Dunlap <rdunlap@xenotime.net> and also   from Stephen Rothwell <sfr@canb.auug.org.au> ]  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
