d | mrst |  | 4 items |  | Kay Sievers | kay@vrfy.org | 1339797239 |  | kmsg - kmsg_dump() use iterator to receive log buffer content  Provide an iterator to receive the log buffer content, and convert all kmsg_dump() users to it.  The structured data in the kmsg buffer now contains binary data, which should no longer be copied verbatim to the kmsg_dump() users.  The iterator should provide reliable access to the buffer data, and also supports proper log line-aware chunking of data while iterating.  Signed-off-by: Kay Sievers <kay@vrfy.org> Tested-by: Tony Luck <tony.luck@intel.com> Reported-by: Anton Vorontsov <anton.vorontsov@linaro.org> Tested-by: Anton Vorontsov <anton.vorontsov@linaro.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | uv |  | 6 items |  | Cliff Wickman | cpw@sgi.com | 1339148908 |  | x86/uv: Fix UV2 BAU legacy mode  The SGI Altix UV2 BAU (Broadcast Assist Unit) as used for tlb-shootdown (selective broadcast mode) always uses UV2 broadcast descriptor format. There is no need to clear the 'legacy' (UV1) mode, because the hardware always uses UV2 mode for selective broadcast.  But the BIOS uses general broadcast and legacy mode, and the hardware pays attention to the legacy mode bit for general broadcast. So the kernel must not clear that mode bit.  Signed-off-by: Cliff Wickman <cpw@sgi.com> Cc: <stable@kernel.org> Link: http://lkml.kernel.org/r/E1SccoO-0002Lh-Cb@eag09.americas.sgi.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
d | ce4100 |  | 3 items |  | Sebastian Andrzej Siewior | bigeasy@linutronix.de | 1328310805 |  | gpio: Add a driver for Sodaville GPIO controller  Sodaville has GPIO controller behind the PCI bus. To my suprissed it is not the same as on PXA.  The interrupt & gpio chip can be referenced from the device tree like from any other driver. Unfortunately the driver which uses the gpio interrupt has to use irq_of_parse_and_map() instead of platform_get_irq(). The problem is that the platform device (which is created from the device tree) is most likely created before the interrupt chip is registered and therefore irq_of_parse_and_map() fails.  In theory the driver works as module. In reality most of the irq functions are not exported to modules and it is possible that _this_ module is unloaded while the provided irqs are still in use.  Signed-off-by: Hans J. Koch <hjk@linutronix.de> [torbenh@linutronix.de: make it work after the irq namespace cleanup, 	                add some device tree entries.] Signed-off-by: Torben Hohn <torbenh@linutronix.de> [bigeasy@linutronix.de: convert to generic irq & gpio chip] Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de> [grant.likely@secretlab.ca: depend on x86 to avoid irq_domain breakage] Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | Makefile | g | 187B |  | Ed Wildgoose | git@wildgooses.com | 1316596782 |  | x86: geode: New PCEngines Alix system driver  This new driver replaces the old PCEngines Alix 2/3 LED driver with a new driver that controls the LEDs through the leds-gpio driver. The old driver accessed GPIOs directly, which created a conflict and prevented also loading the cs5535-gpio driver to read other GPIOs on the Alix board. With this new driver, we hook into leds-gpio which in turn uses GPIO to control the LEDs and therefore it's possible to control both the LEDs and access onboard GPIOs  Driver is moved to platform/geode as requested by Grant and any other geode initialisation modules should move here also  This driver is inspired by leds-net5501.c by Alessandro Zummo.  Ideally, leds-net5501.c should also be moved to platform/geode. Additionally the driver relies on parts of the patch: 7f131cf3ed ("leds: leds-alix2c - take port address from MSR) by Daniel Mack to perform detection of the Alix board.  [akpm@linux-foundation.org: include module.h]  Signed-off-by: Ed Wildgoose <kernel@wildgooses.com> Cc: git@wildgooses.com Cc: Alessandro Zummo <a.zummo@towertech.it> Cc: Daniel Mack <daniel@caiaq.de> Cc: Ingo Molnar <mingo@elte.hu> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Richard Purdie <rpurdie@rpsys.net> Reviewed-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
d | olpc |  | 9 items |  | Daniel Drake | dsd@laptop.org | 1336395746 |  | x86/olpc/xo1/sci: Report RTC wakeup events  When the system is woken due to a RTC event, report the wakeup event on the relevant rtc device (if it can be found).  Signed-off-by: Daniel Drake <dsd@laptop.org> Cc: dilinger@queued.net Cc: pgf@laptop.org Link: http://lkml.kernel.org/r/20120418223402.D73249D401E@zog.reactivated.net Signed-off-by: Ingo Molnar <mingo@kernel.org>
d | scx200 |  | 2 items |  | Jim Cromie | jim.cromie@gmail.com | 1328307898 |  | scx200_32: replace printks with pr_<level>s  update scx200_32.c to use pr_<level>, also 2 whitespaces.  Signed-off-by: Jim Cromie <jim.cromie@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
d | iris |  | 2 items |  | Rusty Russell | rusty@rustcorp.com.au | 1326409338 |  | module_param: make bool parameters really bool (arch)  module_param(bool) used to counter-intuitively take an int.  In fddd5201 (mid-2009) we allowed bool or int/unsigned int using a messy trick.  It's time to remove the int/unsigned int option.  For this version it'll simply give a warning, but it'll break next kernel version.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
d | sfi |  | 2 items |  | Ingo Molnar | mingo@elte.hu | 1294406055 |  | Merge branch 'linus' into x86/apic-cleanups  Conflicts: 	arch/x86/include/asm/io_apic.h  Merge reason: Resolve the conflict, update to a more recent -rc base  Signed-off-by: Ingo Molnar <mingo@elte.hu>
d | geode |  | 4 items |  | Bjarke Istrup Pedersen | gurligebis@gentoo.org | 1336167607 |  | arch/x86/platform/geode/net5501.c: change active_low to 0 for LED driver  It seems that there was an error with the active_low = 1 for the LED, since it should be set to 0 (meaning that active is high, since 0 is false, hence the confusion.  The wiki article about it confuses it, since it contradicts itself, regarding what turns on the LED.  I have tested 3.4-rc2 on my net5501 with this patch, and it makes the LED behave correctly, where "none" turns it off, and "default-on" turns it on, when echoed onto the trigger "file" in /sys/class/leds.  Signed-off-by: Bjarke Istrup Pedersen <gurligebis@gentoo.org> Link: http://lkml.kernel.org/r/20120504210146.62186A018B@akpm.mtv.corp.google.com Cc: Philip Prindeville <philipp@redfish-solutions.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: H. Peter Anvin <hpa@zytor.com>
d | efi |  | 6 items |  | Olof Johansson | olof@lixom.net | 1330052091 |  | x86, efi: Allow basic init with mixed 32/64-bit efi/kernel  Traditionally the kernel has refused to setup EFI at all if there's been a mismatch in 32/64-bit mode between EFI and the kernel.  On some platforms that boot natively through EFI (Chrome OS being one), we still need to get at least some of the static data such as memory configuration out of EFI. Runtime services aren't as critical, and it's a significant amount of work to implement switching between the operating modes to call between kernel and firmware for thise cases. So I'm ignoring it for now.  v5: * Fixed some printk strings based on feedback * Renamed 32/64-bit specific types to not have _ prefix * Fixed bug in printout of efi runtime disablement  v4: * Some of the earlier cleanup was accidentally reverted by this patch, fixed. * Reworded some messages to not have to line wrap printk strings  v3: * Reorganized to a series of patches to make it easier to review, and   do some of the cleanups I had left out before.  v2: * Added graceful error handling for 32-bit kernel that gets passed   EFI data above 4GB. * Removed some warnings that were missed in first version.  Signed-off-by: Olof Johansson <olof@lixom.net> Link: http://lkml.kernel.org/r/1329081869-20779-6-git-send-email-olof@lixom.net Signed-off-by: H. Peter Anvin <hpa@zytor.com>
d | visws |  | 2 items |  | Michael S. Tsirkin | mst@redhat.com | 1337327167 |  | x86/apic: Fix typo EIO_ACK -> EOI_ACK and document it  Fix typo in the macro name and document the reason it has this value. Update users.  Signed-off-by: Michael S. Tsirkin <mst@redhat.com> Cc: Avi Kivity <avi@redhat.com> Cc: Marcelo Tosatti <mtosatti@redhat.com> Cc: gleb@redhat.com Cc: Linus Torvalds <torvalds@linux-foundation.org> Link: http://lkml.kernel.org/r/37867b31b9330690af2e60a2a7c4cb4b1b070caf.1337184153.git.mst@redhat.com Signed-off-by: Ingo Molnar <mingo@kernel.org>
