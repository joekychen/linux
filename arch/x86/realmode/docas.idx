d | rm |  | 20 items |  | H. Peter Anvin | hpa@linux.intel.com | 1337583765 |  | x86, realmode: Move end signature into header.S  The end signature was defined in wakeup_asm.S as it originally came from the ACPI wakeup code.  However, we rely on the existence of the .signature section to expand .bss, otherwise we would have to include code to explicitly zero the .bss depending on the configuration. Since the expanded .bss is just in .init.data anyway, it's easier to always have it expanded.  This fixes failures when compiled without CONFIG_ACPI_SLEEP.  Reported-by: Ingo Molnar <mingo@kernel.org> Signed-off-by: H. Peter Anvin <hpa@zytor.com> Cc: Jarkko Sakkinen <jarkko.sakkinen@intel.com>
f | Makefile | g | 366B |  | H. Peter Anvin | hpa@linux.intel.com | 1337201350 |  | x86, realmode: Move kernel/realmode.c to realmode/init.c  Keep all the realmode code together, including initialization (only the rm/ subdirectory is actually built as real-mode code, anyway.)  Signed-off-by: H. Peter Anvin <hpa@linux.intel.com> Cc: Jarkko Sakkinen <jarkko.sakkinen@intel.com>
f | init.c | s | 3.1K | 95 | H. Peter Anvin | hpa@linux.intel.com | 1337202125 |  | x86, realmode: Change EFER to a single u64 field  Change EFER to be a single u64 field instead of two u32 fields; change the order to maintain alignment.  Note that on x86-64 cr4 is really also a 64-bit quantity, although we can only set the low 32 bits from the trampoline code since it is still executing in 32-bit mode at that point.  Signed-off-by: H. Peter Anvin <hpa@linux.intel.com> Cc: Jarkko Sakkinen <jarkko.sakkinen@intel.com>
f | rmpiggy.S | g | 422B |  | Jarkko Sakkinen | jarkko.sakkinen@intel.com | 1336502925 |  | x86, realmode: don't copy real_mode_header  Replaced copying of real_mode_header with a pointer to beginning of RM memory.  Signed-off-by: Jarkko Sakkinen <jarkko.sakkinen@intel.com> Link: http://lkml.kernel.org/r/1336501366-28617-19-git-send-email-jarkko.sakkinen@intel.com Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
