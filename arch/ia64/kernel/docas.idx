f | ivt.S | g | 51K |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | salinfo.c | s | 19K | 627 | Linus Torvalds | torvalds@linux-foundation.org | 1287769976 |  | Merge branch 'llseek' of git://git.kernel.org/pub/scm/linux/kernel/git/arnd/bkl  * 'llseek' of git://git.kernel.org/pub/scm/linux/kernel/git/arnd/bkl:   vfs: make no_llseek the default   vfs: don't use BKL in default_llseek   llseek: automatically add .llseek fop   libfs: use generic_file_llseek for simple_attr   mac80211: disallow seeks in minstrel debug code   lirc: make chardev nonseekable   viotape: use noop_llseek   raw: use explicit llseek file operations   ibmasmfs: use generic_file_llseek   spufs: use llseek in all file operations   arm/omap: use generic_file_llseek in iommu_debug   lkdtm: use generic_file_llseek in debugfs   net/wireless: use generic_file_llseek in debugfs   drm: use noop_llseek
f | mca_drv.h | s | 4.6K | 107 | Hidetoshi Seto | seto.hidetoshi@jp.fujitsu.com | 1202168526 |  | [IA64] mca style cleanup  Unified changelog, 80 columns rule, and address form fix.  Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | pal.S | g | 7.4K |  | Bjorn Helgaas | bjorn.helgaas@hp.com | 1161122059 |  | [IA64] reformat pal.S to fit in 80 columns, fix typos  Reformat to fit in 80 columns.  Fix a couple typos.  Remove a couple unused labels.  Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | smpboot.c | s | 20K | 730 | Thomas Gleixner | tglx@linutronix.de | 1335434770 |  | ia64: Use generic idle thread allocation  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Rusty Russell <rusty@rustcorp.com.au> Cc: Paul E. McKenney <paulmck@linux.vnet.ibm.com> Cc: Srivatsa S. Bhat <srivatsa.bhat@linux.vnet.ibm.com> Cc: Tony Luck <tony.luck@intel.com> Link: http://lkml.kernel.org/r/20120420124557.380965133@linutronix.de
f | mca.c | s | 60K | 1900 | Linus Torvalds | torvalds@linux-foundation.org | 1332980368 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge third batch of patches from Andrew Morton:  - Some MM stragglers  - core SMP library cleanups (on_each_cpu_mask)  - Some IPI optimisations  - kexec  - kdump  - IPMI  - the radix-tree iterator work  - various other misc bits.   "That'll do for -rc1.  I still have ~10 patches for 3.4, will send   those along when they've baked a little more."  * emailed from Andrew Morton <akpm@linux-foundation.org>: (35 commits)   backlight: fix typo in tosa_lcd.c   crc32: add help text for the algorithm select option   mm: move hugepage test examples to tools/testing/selftests/vm   mm: move slabinfo.c to tools/vm   mm: move page-types.c from Documentation to tools/vm   selftests/Makefile: make `run_tests' depend on `all'   selftests: launch individual selftests from the main Makefile   radix-tree: use iterators in find_get_pages* functions   radix-tree: rewrite gang lookup using iterator   radix-tree: introduce bit-optimized iterator   fs/proc/namespaces.c: prevent crash when ns_entries[] is empty   nbd: rename the nbd_device variable from lo to nbd   pidns: add reboot_pid_ns() to handle the reboot syscall   sysctl: use bitmap library functions   ipmi: use locks on watchdog timeout set on reboot   ipmi: simplify locking   ipmi: fix message handling during panics   ipmi: use a tasklet for handling received messages   ipmi: increase KCS timeouts   ipmi: decrease the IPMI message transaction time in interrupt mode   ...
f | Makefile | g | 3.6K |  | Suresh Siddha | suresh.b.siddha@intel.com | 1316593323 |  | iommu: Rename the DMAR and INTR_REMAP config options  Change the CONFIG_DMAR to CONFIG_INTEL_IOMMU to be consistent with the other IOMMU options.  Rename the CONFIG_INTR_REMAP to CONFIG_IRQ_REMAP to match the irq subsystem name.  And define the CONFIG_DMAR_TABLE for the common ACPI DMAR routines shared by both CONFIG_INTEL_IOMMU and CONFIG_IRQ_REMAP.  Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Cc: yinghai@kernel.org Cc: youquan.song@intel.com Cc: joerg.roedel@amd.com Cc: tony.luck@intel.com Cc: dwmw2@infradead.org Link: http://lkml.kernel.org/r/20110824001456.558630224@sbsiddha-desk.sc.intel.com Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perfmon_default_smpl.c | s | 7.3K | 241 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | time.c | s | 12K | 399 | Linus Torvalds | torvalds@linux-foundation.org | 1333055808 |  | Merge branch 'timers-core-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull timer core updates from Thomas Gleixner.  * 'timers-core-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:   ia64: vsyscall: Add missing paranthesis   alarmtimer: Don't call rtc_timer_init() when CONFIG_RTC_CLASS=n   x86: vdso: Put declaration before code   x86-64: Inline vdso clock_gettime helpers   x86-64: Simplify and optimize vdso clock_gettime monotonic variants   kernel-time: fix s/then/than/ spelling errors   time: remove no_sync_cmos_clock   time: Avoid scary backtraces when warning of > 11% adj   alarmtimer: Make sure we initialize the rtctimer   ntp: Fix leap-second hrtimer livelock   x86, tsc: Skip refined tsc calibration on systems with reliable TSC   rtc: Provide flag for rtc devices that don't support UIE   ia64: vsyscall: Use seqcount instead of seqlock   x86: vdso: Use seqcount instead of seqlock   x86: vdso: Remove bogus locking in update_vsyscall_tz()   time: Remove bogus comments   time: Fix change_clocksource locking   time: x86: Fix race switching from vsyscall to non-vsyscall clock
f | uncached.c | s | 7.5K | 227 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | ia64_ksyms.c | s | 2.4K | 82 | Rusty Russell | rusty@rustcorp.com.au | 1256823255 |  | percpu: remove per_cpu__ prefix.  Now that the return from alloc_percpu is compatible with the address of per-cpu vars, it makes sense to hand around the address of per-cpu variables.  To make this sane, we remove the per_cpu__ prefix we used created to stop people accidentally using these vars directly.  Now we have sparse, we can use that (next patch).  tj: * Updated to convert stuff which were missed by or added after the       original patch.      * Kill per_cpu_var() macro.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: Tejun Heo <tj@kernel.org> Reviewed-by: Christoph Lameter <cl@linux-foundation.org>
f | paravirt_patch.c | s | 12K | 442 | Isaku Yamahata | yamahata@valinux.co.jp | 1238090551 |  | ia64/pv_op/binarypatch: add helper functions to support binary patching for paravirt_ops.  add helper functions to support binary patching for paravirt_ops.  Signed-off-by: Isaku Yamahata <yamahata@valinux.co.jp> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | topology.c | s | 10K | 394 | Srivatsa S. Bhat | srivatsa.bhat@linux.vnet.ibm.com | 1332980076 |  | arch/ia64: remove references to cpu_*_map  This was marked as obsolete for quite a while now..  Now it is time to remove it altogether.  And while doing this, get rid of first_cpu() as well.  Also, remove the redundant setting of cpu_online_mask in smp_prepare_cpus() because the generic code would have already set cpu 0 in cpu_online_mask.  Reported-by: Tony Luck <tony.luck@intel.com> Signed-off-by: Srivatsa S. Bhat <srivatsa.bhat@linux.vnet.ibm.com> Cc: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | irq_lsapic.c | s | 989B | 38 | Thomas Gleixner | tglx@linutronix.de | 1301402882 |  | ia64: Convert lsapic to new irq_chip functions  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | relocate_kernel.S | g | 7.5K |  | Tejun Heo | tj@kernel.org | 1256823254 |  | percpu: make percpu symbols in ia64 unique  This patch updates percpu related symbols in ia64 such that percpu symbols are unique and don't clash with local symbols.  This serves two purposes of decreasing the possibility of global percpu symbol collision and allowing dropping per_cpu__ prefix from percpu symbols.  * arch/ia64/kernel/setup.c: s/cpu_info/ia64_cpu_info/  Partly based on Rusty Russell's "alloc_percpu: rename percpu vars which cause name clashes" patch.  Signed-off-by: Tejun Heo <tj@kernel.org> Reviewed-by: Christoph Lameter <cl@linux-foundation.org> Cc: Rusty Russell <rusty@rustcorp.com.au> Cc: Tony Luck <tony.luck@intel.com> Cc: Fenghua Yu <fenghua.yu@intel.com> Cc: linux-ia64@vger.kernel.org
f | fsyscall_gtod_data.h | s | 497B | 20 | Thomas Gleixner | tglx@linutronix.de | 1331860679 |  | ia64: vsyscall: Use seqcount instead of seqlock  The update of the vdso data happens under xtime_lock, so adding a nested lock is pointless. Just use a seqcount to sync the readers.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Tony Luck <tony.luck@intel.com> Signed-off-by: John Stultz <john.stultz@linaro.org>
f | paravirt.c | s | 25K | 804 | Ingo Molnar | mingo@elte.hu | 1330074359 |  | static keys: Introduce 'struct static_key', static_key_true()/false() and static_key_slow_[inc||dec]()  So here's a boot tested patch on top of Jason's series that does all the cleanups I talked about and turns jump labels into a more intuitive to use facility. It should also address the various misconceptions and confusions that surround jump labels.  Typical usage scenarios:          #include <linux/static_key.h>          struct static_key key = STATIC_KEY_INIT_TRUE;          if (static_key_false(&key))                 do unlikely code         else                 do likely code  Or:          if (static_key_true(&key))                 do likely code         else                 do unlikely code  The static key is modified via:          static_key_slow_inc(&key);         ...         static_key_slow_dec(&key);  The 'slow' prefix makes it abundantly clear that this is an expensive operation.  I've updated all in-kernel code to use this everywhere. Note that I (intentionally) have not pushed through the rename blindly through to the lowest levels: the actual jump-label patching arch facility should be named like that, so we want to decouple jump labels from the static-key facility a bit.  On non-jump-label enabled architectures static keys default to likely()/unlikely() branches.  Signed-off-by: Ingo Molnar <mingo@elte.hu> Acked-by: Jason Baron <jbaron@redhat.com> Acked-by: Steven Rostedt <rostedt@goodmis.org> Cc: a.p.zijlstra@chello.nl Cc: mathieu.desnoyers@efficios.com Cc: davem@davemloft.net Cc: ddaney.cavm@gmail.com Cc: Linus Torvalds <torvalds@linux-foundation.org> Link: http://lkml.kernel.org/r/20120222085809.GA26397@elte.hu Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | head.S | g | 28K |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | mca_drv_asm.S | g | 1.1K |  | Hidetoshi Seto | seto.hidetoshi@jp.fujitsu.com | 1202168526 |  | [IA64] mca style cleanup  Unified changelog, 80 columns rule, and address form fix.  Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | efi_stub.S | g | 2.6K |  | David Mosberger-Tang | David.Mosberger@acm.org | 1150925728 |  | [IA64] make efi_stub.S fit in 80 cols  Just a trivial cleanup patch  Signed-off-by: Tony Luck <tony.luck@intel.com>
f | asm-offsets.c | s | 15K | 288 | Thomas Gleixner | tglx@linutronix.de | 1332853575 |  | ia64: vsyscall: Add missing paranthesis  commit 74a622b (ia64: vsyscall: Use seqcount instead of seqlock) broke the ia64 build.  Reported-by: Tony Luck  <tony.luck@intel.com> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | msi_ia64.c | s | 4.4K | 172 | Srivatsa S. Bhat | srivatsa.bhat@linux.vnet.ibm.com | 1332980076 |  | arch/ia64: remove references to cpu_*_map  This was marked as obsolete for quite a while now..  Now it is time to remove it altogether.  And while doing this, get rid of first_cpu() as well.  Also, remove the redundant setting of cpu_online_mask in smp_prepare_cpus() because the generic code would have already set cpu 0 in cpu_online_mask.  Reported-by: Tony Luck <tony.luck@intel.com> Signed-off-by: Srivatsa S. Bhat <srivatsa.bhat@linux.vnet.ibm.com> Cc: Rusty Russell <rusty@rustcorp.com.au> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gate.S | g | 11K |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | pci-swiotlb.c | s | 1.7K | 59 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1332945391 |  | X86 & IA64: adapt for dma_map_ops changes  Adapt core x86 and IA64 architecture code for dma_map_ops changes: replace alloc/free_coherent with generic alloc/free methods.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> [removed swiotlb related changes and replaced it with wrappers,  merged with IA64 patch to avoid inter-patch dependences in intel-iommu code] Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Reviewed-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Tony Luck <tony.luck@intel.com>
f | vmlinux.lds.S | g | 5.0K |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | traps.c | s | 17K | 579 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | jprobes.S | g | 2.9K |  | Tony Luck | tony.luck@intel.com | 1217611281 |  | [IA64] Move include/asm-ia64 to arch/ia64/include/asm  After moving the the include files there were a few clean-ups:  1) Some files used #include <asm-ia64/xyz.h>, changed to <asm/xyz.h>  2) Some comments alerted maintainers to look at various header files to make matching updates if certain code were to be changed. Updated these comments to use the new include paths.  3) Some header files mentioned their own names in initial comments. Just deleted these self references.  Signed-off-by: Tony Luck <tony.luck@intel.com>
f | perfmon_mckinley.h | s | 9.2K | 161 | Simon Arlott | simon@fire.lp0.eu | 1178920543 |  | [IA64] spelling fixes: arch/ia64/  Spelling and apostrophe fixes in arch/ia64/.  Signed-off-by: Simon Arlott <simon@fire.lp0.eu> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | ptrace.c | s | 57K | 1954 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | paravirtentry.S | g | 3.1K |  | Denys Vlasenko | vda.linux@googlemail.com | 1267611960 |  | Rename .data.read_mostly to .data..read_mostly.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | sys_ia64.c | s | 4.9K | 172 | Al Viro | viro@zeniv.linux.org.uk | 1338426296 |  | ia64, sparc64: convert wrappers around do_mremap() to sys_mremap()  they contain open-coded sys_mremap()  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | perfmon_montecito.h | s | 12K | 246 | Matthew Wilcox | matthew@wil.cx | 1165517299 |  | [IA64] sparse cleanups  0/NULL confusion and some missing UL on constants.  Signed-off-by: Matthew Wilcox <matthew@wil.cx> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | pci-dma.c | s | 2.7K | 94 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | gate.lds.S | g | 2.7K |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | unwind.c | s | 62K | 2032 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | paravirt_patchlist.c | s | 2.3K | 69 | Jes Sorensen | jes@sgi.com | 1245254680 |  | [IA64] Fix build error in paravirt_patchlist.c  Andrew cleaned up some #include tangles in: commit 0d9c25dde878a636ee9a9b53923569171bf9a55b   headers: move module_bug_finalize()/module_bug_cleanup() definitions into module.h  which resulted in this build error for ia64:   CC      arch/ia64/kernel/paravirt_patchlist.o arch/ia64/kernel/paravirt_patchlist.c:43: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__initdata' arch/ia64/kernel/paravirt_patchlist.c:54: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'paravirt_get_gate_patchlist' arch/ia64/kernel/paravirt_patchlist.c:76: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'paravirt_get_gate_section' make[1]: *** [arch/ia64/kernel/paravirt_patchlist.o] Error 1  The problem was that paravirt_patchlist.c was relying on some of the nested includes (specifically that linux/bug.h included linux/module.h  Signed-off-by: Jes Sorensen <jes@sgi.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | irq_ia64.c | s | 15K | 591 | Linus Torvalds | torvalds@linux-foundation.org | 1332980368 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge third batch of patches from Andrew Morton:  - Some MM stragglers  - core SMP library cleanups (on_each_cpu_mask)  - Some IPI optimisations  - kexec  - kdump  - IPMI  - the radix-tree iterator work  - various other misc bits.   "That'll do for -rc1.  I still have ~10 patches for 3.4, will send   those along when they've baked a little more."  * emailed from Andrew Morton <akpm@linux-foundation.org>: (35 commits)   backlight: fix typo in tosa_lcd.c   crc32: add help text for the algorithm select option   mm: move hugepage test examples to tools/testing/selftests/vm   mm: move slabinfo.c to tools/vm   mm: move page-types.c from Documentation to tools/vm   selftests/Makefile: make `run_tests' depend on `all'   selftests: launch individual selftests from the main Makefile   radix-tree: use iterators in find_get_pages* functions   radix-tree: rewrite gang lookup using iterator   radix-tree: introduce bit-optimized iterator   fs/proc/namespaces.c: prevent crash when ns_entries[] is empty   nbd: rename the nbd_device variable from lo to nbd   pidns: add reboot_pid_ns() to handle the reboot syscall   sysctl: use bitmap library functions   ipmi: use locks on watchdog timeout set on reboot   ipmi: simplify locking   ipmi: fix message handling during panics   ipmi: use a tasklet for handling received messages   ipmi: increase KCS timeouts   ipmi: decrease the IPMI message transaction time in interrupt mode   ...
f | crash_dump.c | s | 1.5K | 45 | Olaf Hering | olaf@aepfle.de | 1300934839 |  | crash_dump: export is_kdump_kernel to modules, consolidate elfcorehdr_addr, setup_elfcorehdr and saved_max_pfn  The Xen PV drivers in a crashed HVM guest can not connect to the dom0 backend drivers because both frontend and backend drivers are still in connected state.  To run the connection reset function only in case of a crashdump, the is_kdump_kernel() function needs to be available for the PV driver modules.  Consolidate elfcorehdr_addr, setup_elfcorehdr and saved_max_pfn into kernel/crash_dump.c Also export elfcorehdr_addr to make is_kdump_kernel() usable for modules.  Leave 'elfcorehdr' as early_param().  This changes powerpc from __setup() to early_param().  It adds an address range check from x86 also on ia64 and powerpc.  [akpm@linux-foundation.org: additional #includes] [akpm@linux-foundation.org: remove elfcorehdr_addr export] [akpm@linux-foundation.org: fix for Tejun's mm/nobootmem.c changes] Signed-off-by: Olaf Hering <olaf@aepfle.de> Cc: Russell King <rmk@arm.linux.org.uk> Cc: "Luck, Tony" <tony.luck@intel.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Johannes Weiner <hannes@cmpxchg.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | audit.c | s | 1.1K | 51 | Tony Luck | tony.luck@intel.com | 1265654537 |  | [IA64] Remove COMPAT_IA32 support  This has been broken since May 2008 when Al Viro killed altroot support. Since nobody has complained, it would appear that there are no users of this code (A plausible theory since the main OSVs that support ia64 prefer to use the IA32-EL software emulation).  Signed-off-by: Tony Luck <tony.luck@intel.com>
f | paravirt_patchlist.h | s | 1.1K | 26 | Isaku Yamahata | yamahata@valinux.co.jp | 1238089862 |  | ia64/pv_ops: gate page paravirtualization.  paravirtualize gate page by allowing each pv_ops instances to define its own gate page.  Signed-off-by: Isaku Yamahata <yamahata@valinux.co.jp> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | minstate.h | s | 8.0K | 242 | Denys Vlasenko | vda.linux@googlemail.com | 1267611959 |  | Rename .data..patch.XXX to .data..patch.XXX.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | sal.c | s | 10K | 355 | Alex Chiang | achiang@hp.com | 1213227633 |  | [IA64] Update check_sal_cache_flush to use platform_send_ipi()  check_sal_cache_flush is used to detect broken firmware that drops pending interrupts.  The old implementation schedules a timer interrupt for itself in the future by getting the current value of the Interval Timer Counter + 1000 cycles, waits for the interrupt to be pended, calls SAL_CACHE_FLUSH, and finally checks to see if the interrupt is still pending.  This implementation can cause problems for virtual machine code if the process of scheduling the timer interrupt takes more than 1000 cycles; the virtual machine can end up sleeping for several hundred years while waiting for the ITC to wrap around.  The fix is to use platform_send_ipi. The processor will still send an interrupt to itself, using the IA64_IPI_DM_INT delivery mode, which causes the IPI to look like an external interrupt. The rest of the SAL_CACHE_FLUSH + checking to see if the interrupt is still pending remains unchanged.  This fix has been boot tested successfully on:  	- intel tiger2 	- hp rx6600 	- hp rx5670  The rx5670 has known buggy firmware, where SAL_CACHE_FLUSH drops pending interrupts. A boot test on this machine showed this message on the console:  SAL: SAL_CACHE_FLUSH drops interrupts; PAL_CACHE_FLUSH will be used instead  Which proves that the self-inflicted IPI approach is viable. And as expected, the other tested platforms correctly did not display the warning.  Signed-off-by: Alex Chiang <achiang@hp.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | acpi-ext.c | s | 2.7K | 85 | Tejun Heo | tj@kernel.org | 1269954152 |  | include cleanup: Update gfp.h and slab.h includes to prepare for breaking implicit slab.h inclusion from percpu.h  percpu.h is included by sched.h and module.h and thus ends up being included when building most .c files.  percpu.h includes slab.h which in turn includes gfp.h making everything defined by the two files universally available and complicating inclusion dependencies.  percpu.h -> slab.h dependency is about to be removed.  Prepare for this change by updating users of gfp and slab facilities include those headers directly instead of assuming availability.  As this conversion needs to touch large number of source files, the following script is used as the basis of conversion.    http://userweb.kernel.org/~tj/misc/slabh-sweep.py  The script does the followings.  * Scan files for gfp and slab usages and update includes such that   only the necessary includes are there.  ie. if only gfp is used,   gfp.h, if slab is used, slab.h.  * When the script inserts a new include, it looks at the include   blocks and try to put the new include such that its order conforms   to its surrounding.  It's put in the include block which contains   core kernel includes, in the same order that the rest are ordered -   alphabetical, Christmas tree, rev-Xmas-tree or at the end if there   doesn't seem to be any matching order.  * If the script can't find a place to put a new include (mostly   because the file doesn't have fitting include block), it prints out   an error message indicating which .h file needs to be added to the   file.  The conversion was done in the following steps.  1. The initial automatic conversion of all .c files updated slightly    over 4000 files, deleting around 700 includes and adding ~480 gfp.h    and ~3000 slab.h inclusions.  The script emitted errors for ~400    files.  2. Each error was manually checked.  Some didn't need the inclusion,    some needed manual addition while adding it to implementation .h or    embedding .c file was more appropriate for others.  This step added    inclusions to around 150 files.  3. The script was run again and the output was compared to the edits    from #2 to make sure no file was left behind.  4. Several build tests were done and a couple of problems were fixed.    e.g. lib/decompress_*.c used malloc/free() wrappers around slab    APIs requiring slab.h to be added manually.  5. The script was run on all .h files but without automatically    editing them as sprinkling gfp.h and slab.h inclusions around .h    files could easily lead to inclusion dependency hell.  Most gfp.h    inclusion directives were ignored as stuff from gfp.h was usually    wildly available and often used in preprocessor macros.  Each    slab.h inclusion directive was examined and added manually as    necessary.  6. percpu.h was updated not to include slab.h.  7. Build test were done on the following configurations and failures    were fixed.  CONFIG_GCOV_KERNEL was turned off for all tests (as my    distributed build env didn't work with gcov compiles) and a few    more options had to be turned off depending on archs to make things    build (like ipr on powerpc/64 which failed due to missing writeq).     * x86 and x86_64 UP and SMP allmodconfig and a custom test config.    * powerpc and powerpc64 SMP allmodconfig    * sparc and sparc64 SMP allmodconfig    * ia64 SMP allmodconfig    * s390 SMP allmodconfig    * alpha SMP allmodconfig    * um on x86_64 SMP allmodconfig  8. percpu.h modifications were reverted so that it could be applied as    a separate patch and serve as bisection point.  Given the fact that I had only a couple of failures from tests on step 6, I'm fairly confident about the coverage of this conversion patch. If there is a breakage, it's likely to be something in one of the arch headers which should be easily discoverable easily on most builds of the specific arch.  Signed-off-by: Tejun Heo <tj@kernel.org> Guess-its-ok-by: Christoph Lameter <cl@linux-foundation.org> Cc: Ingo Molnar <mingo@redhat.com> Cc: Lee Schermerhorn <Lee.Schermerhorn@hp.com>
f | perfmon_generic.h | s | 2.3K | 41 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | acpi.c | s | 25K | 853 | Rusty Russell | rusty@rustcorp.com.au | 1332997711 |  | documentation: remove references to cpu_*_map.  This has been obsolescent for a while, fix documentation and misc comments.  Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | kprobes.c | s | 29K | 993 | Masami Hiramatsu | mhiramat@redhat.com | 1265272578 |  | kprobes: Disable booster when CONFIG_PREEMPT=y  Disable kprobe booster when CONFIG_PREEMPT=y at this time, because it can't ensure that all kernel threads preempted on kprobe's boosted slot run out from the slot even using freeze_processes().  The booster on preemptive kernel will be resumed if synchronize_tasks() or something like that is introduced.  Signed-off-by: Masami Hiramatsu <mhiramat@redhat.com> Cc: systemtap <systemtap@sources.redhat.com> Cc: DLE <dle-develop@lists.sourceforge.net> Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Jim Keniston <jkenisto@us.ibm.com> Cc: Mathieu Desnoyers <compudj@krystal.dyndns.org> Cc: Steven Rostedt <rostedt@goodmis.org> LKML-Reference: <20100202214904.4694.24330.stgit@dhcp-100-2-132.bos.redhat.com> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | unwind_i.h | s | 5.6K | 144 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | sigframe.h | s | 776B | 22 | Alexey Dobriyan | adobriyan@openvz.org | 1178661119 |  | [IA64] Add TIF_RESTORE_SIGMASK  Preparation for pselect and ppoll. ia32 compat code not tested. :-(  Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru> Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | machine_kexec.c | s | 4.5K | 145 | Paul Gortmaker | paul.gortmaker@windriver.com | 1330376442 |  | [IA64] Fix warning from machine_kexec.c  Use proper cpp defined(...) constructs to avoid this:  arch/ia64/kernel/machine_kexec.c: In function 'arch_crash_save_vmcoreinfo': arch/ia64/kernel/machine_kexec.c:160:8: warning: "CONFIG_PGTABLE_4" is not defined  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | irq.c | s | 4.6K | 167 | Thomas Gleixner | tglx@linutronix.de | 1301402885 |  | ia64: Use generic show_interrupts()  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | Makefile.gate | g | 924B |  | Denys Vlasenko | vda.linux@googlemail.com | 1267611959 |  | Rename .data.gate to .data..gate.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | machvec.c | s | 1.7K | 71 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | fsys.S | g | 25K |  | Andi Kleen | andi@firstfloor.org | 1337202595 |  | [IA64] Liberate the signal layer from IA64 assembler  Currently IA64 has a assembler implementation of sigrtprocmask. Having a single architecture implement this in assembler language is a serious maintenance problem that inhibits further evolution of the signal subsystem.  Everyone who wants to do deep changes to signals would need to learn that assembler language.  Whatever performance improvements IA64 gets from this it cannot be worth the price in maintainability.  We have some locking problems in signal that need to be fixed, but this roadblock needs to be removed first.  So just disable the special assembler IA64 implementation and fall back to a normal syscall there.  Acked-by: Matt Fleming <matt.fleming@intel.com> Signed-off-by: Andi Kleen <andi@firstfloor.org> Signed-off-by: Tony Luck <tony.luck@intel.com>
d | cpufreq |  | 3 items |  | Dominik Brodowski | linux@dominikbrodowski.net | 1304524257 |  | [CPUFREQ] use dynamic debug instead of custom infrastructure  With dynamic debug having gained the capability to report debug messages also during the boot process, it offers a far superior interface for debug messages than the custom cpufreq infrastructure. As a first step, remove the old cpufreq_debug_printk() function and replace it with a call to the generic pr_debug() function.  How can dynamic debug be used on cpufreq? You need a kernel which has CONFIG_DYNAMIC_DEBUG enabled.  To enabled debugging during runtime, mount debugfs and  $ echo -n 'module cpufreq +p' > /sys/kernel/debug/dynamic_debug/control  for debugging the complete "cpufreq" module. To achieve the same goal during boot, append  	ddebug_query="module cpufreq +p"  as a boot parameter to the kernel of your choice.  For more detailled instructions, please see Documentation/dynamic-debug-howto.txt  Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net> Signed-off-by: Dave Jones <davej@redhat.com>
f | module.c | s | 26K | 845 | Jonas Bonn | jonas@southpole.se | 1311510964 |  | modules: make arch's use default loader hooks  This patch removes all the module loader hook implementations in the architecture specific code where the functionality is the same as that now provided by the recently added default hooks.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Acked-by: Mike Frysinger <vapier@gentoo.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Tested-by: Michal Simek <monstr@monstr.eu> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | stacktrace.c | s | 776B | 36 | Tony Luck | tony.luck@intel.com | 1285275127 |  | [IA64] Add CONFIG_STACKTRACE_SUPPORT  Several Linux features are dependent on stack trace support. Add it so they can be enabled.  Signed-off-by: Tony Luck <tony.luck@intel.com>
f | setup.c | s | 28K | 938 | Linus Torvalds | torvalds@linux-foundation.org | 1332980368 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge third batch of patches from Andrew Morton:  - Some MM stragglers  - core SMP library cleanups (on_each_cpu_mask)  - Some IPI optimisations  - kexec  - kdump  - IPMI  - the radix-tree iterator work  - various other misc bits.   "That'll do for -rc1.  I still have ~10 patches for 3.4, will send   those along when they've baked a little more."  * emailed from Andrew Morton <akpm@linux-foundation.org>: (35 commits)   backlight: fix typo in tosa_lcd.c   crc32: add help text for the algorithm select option   mm: move hugepage test examples to tools/testing/selftests/vm   mm: move slabinfo.c to tools/vm   mm: move page-types.c from Documentation to tools/vm   selftests/Makefile: make `run_tests' depend on `all'   selftests: launch individual selftests from the main Makefile   radix-tree: use iterators in find_get_pages* functions   radix-tree: rewrite gang lookup using iterator   radix-tree: introduce bit-optimized iterator   fs/proc/namespaces.c: prevent crash when ns_entries[] is empty   nbd: rename the nbd_device variable from lo to nbd   pidns: add reboot_pid_ns() to handle the reboot syscall   sysctl: use bitmap library functions   ipmi: use locks on watchdog timeout set on reboot   ipmi: simplify locking   ipmi: fix message handling during panics   ipmi: use a tasklet for handling received messages   ipmi: increase KCS timeouts   ipmi: decrease the IPMI message transaction time in interrupt mode   ...
f | perfmon.c | s | 168K | 5692 | Al Viro | viro@zeniv.linux.org.uk | 1338426297 |  | ia64 perfmon: fix get_unmapped_area() use there  get_unmapped_area() returns -E... on failure, not 0.  Moreover, the wrapper around it is completely pointless.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | init_task.c | s | 1.1K | 37 | Tim Abbott | tabbott@ksplice.com | 1267611958 |  | Rename .data.init_task to .data..init_task.  Signed-off-by: Tim Abbott <tabbott@ksplice.com> Cc: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | unaligned.c | s | 41K | 1358 | Akinobu Mita | akinobu.mita@gmail.com | 1274219154 |  | [IA64] use __ratelimit  Replace open-coded rate limiting logic with __ratelimit().  Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | iosapic.c | s | 28K | 971 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | mca_drv.c | s | 21K | 690 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | entry.h | s | 2.9K | 73 | Jörn Engel | joern@wohnheim.fh-wedel.de | 1151688336 |  | Remove obsolete #include <linux/config.h>  Signed-off-by: Jörn Engel <joern@wohnheim.fh-wedel.de> Signed-off-by: Adrian Bunk <bunk@stusta.de>
f | perfmon_itanium.h | s | 6.7K | 99 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | smp.c | s | 7.3K | 302 | Linus Torvalds | torvalds@linux-foundation.org | 1332980368 |  | Merge branch 'akpm' (Andrew's patch-bomb)  Merge third batch of patches from Andrew Morton:  - Some MM stragglers  - core SMP library cleanups (on_each_cpu_mask)  - Some IPI optimisations  - kexec  - kdump  - IPMI  - the radix-tree iterator work  - various other misc bits.   "That'll do for -rc1.  I still have ~10 patches for 3.4, will send   those along when they've baked a little more."  * emailed from Andrew Morton <akpm@linux-foundation.org>: (35 commits)   backlight: fix typo in tosa_lcd.c   crc32: add help text for the algorithm select option   mm: move hugepage test examples to tools/testing/selftests/vm   mm: move slabinfo.c to tools/vm   mm: move page-types.c from Documentation to tools/vm   selftests/Makefile: make `run_tests' depend on `all'   selftests: launch individual selftests from the main Makefile   radix-tree: use iterators in find_get_pages* functions   radix-tree: rewrite gang lookup using iterator   radix-tree: introduce bit-optimized iterator   fs/proc/namespaces.c: prevent crash when ns_entries[] is empty   nbd: rename the nbd_device variable from lo to nbd   pidns: add reboot_pid_ns() to handle the reboot syscall   sysctl: use bitmap library functions   ipmi: use locks on watchdog timeout set on reboot   ipmi: simplify locking   ipmi: fix message handling during panics   ipmi: use a tasklet for handling received messages   ipmi: increase KCS timeouts   ipmi: decrease the IPMI message transaction time in interrupt mode   ...
f | patch.c | s | 6.9K | 227 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | paravirt_inst.h | s | 1.2K | 29 | Isaku Yamahata | yamahata@valinux.co.jp | 1224263574 |  | ia64/pv_ops: paravirtualized instruction checker.  This patch implements a checker to detect instructions which should be paravirtualized instead of direct writing raw instruction. This patch does rough check so that it doesn't fully cover all cases, but it can detects most cases of paravirtualization breakage of hand written assembly codes.  Signed-off-by: Isaku Yamahata <yamahata@valinux.co.jp> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | err_inject.c | s | 7.7K | 265 | Kay Sievers | kay.sievers@vrfy.org | 1324506582 |  | cpu: convert 'cpu' and 'machinecheck' sysdev_class to a regular subsystem  This moves the 'cpu sysdev_class' over to a regular 'cpu' subsystem and converts the devices to regular devices. The sysdev drivers are implemented as subsystem interfaces now.  After all sysdev classes are ported to regular driver core entities, the sysdev implementation will be entirely removed from the kernel.  Userspace relies on events and generic sysfs subsystem infrastructure from sysdev devices, which are made available with this conversion.  Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Hans-Christian Egtvedt <egtvedt@samfundet.no> Cc: Tony Luck <tony.luck@intel.com> Cc: Fenghua Yu <fenghua.yu@intel.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@redhat.com> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Borislav Petkov <bp@amd64.org> Cc: Tigran Aivazian <tigran@aivazian.fsnet.co.uk> Cc: Len Brown <lenb@kernel.org> Cc: Zhang Rui <rui.zhang@intel.com> Cc: Dave Jones <davej@redhat.com> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Russell King <rmk+kernel@arm.linux.org.uk> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Arjan van de Ven <arjan@linux.intel.com> Cc: "Rafael J. Wysocki" <rjw@sisk.pl> Cc: "Srivatsa S. Bhat" <srivatsa.bhat@linux.vnet.ibm.com> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | process.c | s | 20K | 680 | Al Viro | viro@zeniv.linux.org.uk | 1337825360 |  | move key_repace_session_keyring() into tracehook_notify_resume()  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | cyclone.c | s | 2.9K | 109 | Andy Lutomirski | luto@mit.edu | 1310691429 |  | ia64: Replace clocksource.fsys_mmio with generic arch data  Now that clocksource.archdata is available, use it for ia64-specific code.  Cc: Clemens Ladisch <clemens@ladisch.de> Cc: linux-ia64@vger.kernel.org Cc: Tony Luck <tony.luck@intel.com> Cc: Fenghua Yu <fenghua.yu@intel.com> Cc: John Stultz <johnstul@us.ibm.com> Cc: Thomas Gleixner <tglx@linutronix.de> Signed-off-by: Andy Lutomirski <luto@mit.edu> Link: http://lkml.kernel.org/r/d31de0ee0842a0e322fb6441571c2b0adb323fa2.1310563276.git.luto@mit.edu Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | esi_stub.S | g | 2.8K |  | David Mosberger-Tang | David.Mosberger@acm.org | 1150913962 |  | [IA64] esi-support  Add support for making ESI calls [1].  ESI stands for "Extensible SAL specification" and is basically a way for invoking firmware subroutines which are identified by a GUID.  I don't know whether ESI is used by vendors other than HP (if you do, please let me know) but as firmware "backdoors" go, this seems one of the cleaner methods, so it seems reasonable to support it, even though I'm not aware of any publicly documented ESI calls.  I'd have liked to make the ESI module completely stand-alone, but unfortunately that is not easily (or not at all) possible because in order to make ESI calls in physical mode, a small stub similar to the EFI stub is needed in the kernel proper. I did try to create a stub that would work in user-level, but it quickly got ugly beyond recognition (e.g., the stub had to make assumptions about how the module-loader generated call-stubs work) and I didn't even get it to work (that's probably fixable, but I didn't bother because I concluded it was too ugly anyhow).  While it's not terribly elegant to have kernel code which isn't actively used in the kernel proper, I think it might be worth making an exception here for two reasons: the code is trivially small (all that's really needed is esi_stub.S) and by including it in the normal kernel distro, it might encourage other OEMs to also use ESI, which I think would be far better than each inventing their own firmware "backdoor".  The code was originally written by Alex.  I just massaged and packaged it a bit (and perhaps messed up some things along the way...).  Changes since first version of patch that was posted to mailing list: * Export ia64_esi_call and ia64_esi_call_phys() as GPL symbols. * Disallow building esi.c as a module for now.  Building as a module   would currently lead to an unresolved reference to "sal_lock" on SMP kernels   because that symbol doesn't get exported. * Export esi_call_phys() only if ESI is enabled. * Remove internal stuff from esi.h and add a "proc_type" argument to   ia64_esi_call() such that serialization-requirements can be expressed (ESI   follows SAL here, where procedure calls may have to be serialized, are   MP-safe, or MP-safe andr reentrant).  [1] h21007.www2.hp.com/dspp/tech/tech_TechDocumentDetailPage_IDX/1,1701,919,00.html  Signed-off-by: David Mosberger <David.Mosberger@acm.org> Signed-off-by: Alex Williamson <alex.williamson@hp.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | gate-data.S | g | 65B |  | Denys Vlasenko | vda.linux@googlemail.com | 1267611959 |  | Rename .data.gate to .data..gate.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | efi.c | s | 36K | 1206 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for IA64  Disintegrate asm/system.h for IA64.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Tony Luck <tony.luck@intel.com> cc: linux-ia64@vger.kernel.org
f | mca_asm.S | g | 27K |  | Tejun Heo | tj@kernel.org | 1256823254 |  | percpu: make percpu symbols in ia64 unique  This patch updates percpu related symbols in ia64 such that percpu symbols are unique and don't clash with local symbols.  This serves two purposes of decreasing the possibility of global percpu symbol collision and allowing dropping per_cpu__ prefix from percpu symbols.  * arch/ia64/kernel/setup.c: s/cpu_info/ia64_cpu_info/  Partly based on Rusty Russell's "alloc_percpu: rename percpu vars which cause name clashes" patch.  Signed-off-by: Tejun Heo <tj@kernel.org> Reviewed-by: Christoph Lameter <cl@linux-foundation.org> Cc: Rusty Russell <rusty@rustcorp.com.au> Cc: Tony Luck <tony.luck@intel.com> Cc: Fenghua Yu <fenghua.yu@intel.com> Cc: linux-ia64@vger.kernel.org
f | esi.c | s | 4.5K | 172 | André Goddard Rosa | andre.goddard@gmail.com | 1259937595 |  | tree-wide: fix assorted typos all over the place  That is "success", "unknown", "through", "performance", "[re||un]mapping" , "access", "default", "reasonable", "[con]currently", "temperature" , "channel", "[un]used", "application", "example","hierarchy", "therefore" , "[over||under]flow", "contiguous", "threshold", "enough" and others.  Signed-off-by: André Goddard Rosa <andre.goddard@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | palinfo.c | s | 27K | 936 | Joe Perches | joe@perches.com | 1285276925 |  | [IA64] Use static const char * const in palinfo.c  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | entry.S | s | 47K | 1720 | Émeric Maschino | emeric.maschino@gmail.com | 1326142510 |  | ia64: Add accept4() syscall  While debugging udev > 170 failure on Debian Wheezy (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=648325), it appears that the issue was in fact due to missing accept4() in ia64.  This patch simply adds accept4() to ia64.  Signed-off-by: Émeric Maschino <emeric.maschino@gmail.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | crash.c | s | 6.8K | 255 | Eric W. Biederman | ebiederm@xmission.com | 1258562260 |  | sysctl: Drop & in front of every proc_handler.  For consistency drop & in front of every proc_handler.  Explicity taking the address is unnecessary and it prevents optimizations like stubbing the proc_handlers to NULL.  Cc: Alexey Dobriyan <adobriyan@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Joe Perches <joe@perches.com> Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
f | unwind_decoder.c | s | 12K | 410 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | brl_emu.c | s | 5.5K | 207 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | signal.c | s | 16K | 461 | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | nr-irqs.c | s | 519B | 21 | Isaku Yamahata | yamahata@valinux.co.jp | 1224263219 |  | ia64/pv_ops/xen: define the nubmer of irqs which xen needs.  define arch/ia64/include/asm/xen/irq.h to define the number of irqs which xen needs.  Signed-off-by: Isaku Yamahata <yamahata@valinux.co.jp> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | numa.c | s | 2.4K | 77 | holt@sgi.com | holt@sgi.com | 1207687895 |  | [IA64] Minimize per_cpu reservations.  This attached patch significantly shrinks boot memory allocation on ia64. It does this by not allocating per_cpu areas for cpus that can never exist.  In the case where acpi does not have any numa node description of the cpus, I defaulted to assigning the first 32 round-robin on the known nodes..  For the !CONFIG_ACPI  I used for_each_possible_cpu().  Signed-off-by: Robin Holt <holt@sgi.com> Signed-off-by: Tony Luck <tony.luck@intel.com>
f | ftrace.c | s | 5.5K | 175 | Shaohua Li | shaohua.li@intel.com | 1231931491 |  | ftrace, ia64: IA64 dynamic ftrace support  IA64 dynamic ftrace support. The original _mcount stub for each function is like: 	alloc r40=ar.pfs,12,8,0 	mov r43=r0;; 	mov r42=b0 	mov r41=r1 	nop.i 0x0 	br.call.sptk.many b0 = _mcount;;  The patch convert it to below for nop: 	[MII] nop.m 0x0 	mov r3=ip 	nop.i 0x0 	[MLX] nop.m 0x0 	nop.x 0x0;; This isn't completely nop, as there is one instuction 'mov r3=ip', but it should be light and harmless for code follow it.  And below is for call 	[MII] nop.m 0x0 	mov r3=ip 	nop.i 0x0 	[MLX] nop.m 0x0 	brl.many .;; In this way, only one instruction is changed to convert code between nop and call. This should meet dyn-ftrace's requirement. But this requires CPU support brl instruction, so dyn-ftrace isn't supported for old Itanium system. Assume there are quite few such old system running.  Signed-off-by: Shaohua Li <shaohua.li@intel.com> Signed-off-by: Steven Rostedt <srostedt@redhat.com> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | elfcore.c | s | 1.8K | 69 | Daisuke HATAYAMA | d.hatayama@jp.fujitsu.com | 1267903606 |  | elf coredump: add extended numbering support  The current ELF dumper implementation can produce broken corefiles if program headers exceed 65535.  This number is determined by the number of vmas which the process have.  In particular, some extreme programs may use more than 65535 vmas.  (If you google max_map_count, you can find some users facing this problem.) This kind of program never be able to generate correct coredumps.  This patch implements ``extended numbering'' that uses sh_info field of the first section header instead of e_phnum field in order to represent upto 4294967295 vmas.  This is supported by AMD64-ABI(http://www.x86-64.org/documentation.html) and Solaris(http://docs.sun.com/app/docs/doc/817-1984/). Of course, we are preparing patches for gdb and binutils.  Signed-off-by: Daisuke HATAYAMA <d.hatayama@jp.fujitsu.com> Cc: "Luck, Tony" <tony.luck@intel.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: David Howells <dhowells@redhat.com> Cc: Greg Ungerer <gerg@snapgear.com> Cc: Roland McGrath <roland@redhat.com> Cc: Oleg Nesterov <oleg@redhat.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Alexander Viro <viro@zeniv.linux.org.uk> Cc: Andi Kleen <andi@firstfloor.org> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dma-mapping.c | s | 469B | 18 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103858 |  | ia64: Add export.h to arch/ia64 specific files as required  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
