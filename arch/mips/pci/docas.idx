f | pci-lantiq.c | s | 7.2K | 215 | John Crispin | blogic@openwrt.org | 1337607112 |  | MIPS: pci: convert lantiq driver to OF  Implement support for OF inside the lantiq PCI driver. The patch also splits pcibios_plat_dev_init and pcibios_map_irq out into their own file to accomodate coexistance with the upcoming pcie driver.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3806/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-rc32434.c | s | 7.3K | 194 | Yoichi Yuasa | yuasa@linux-mips.org | 1316620317 |  | MIPS: RC32434: Fix PCI build error  arch/mips/pci/pci-rc32434.c: In function 'rc32434_pci_init': arch/mips/pci/pci-rc32434.c:217:16: error: 'rcrc32434_res_pci_io1' undeclared (first use in this function) arch/mips/pci/pci-rc32434.c:217:16: note: each undeclared identifier is reported only once for each function it appears in make[1]: *** [arch/mips/pci/pci-rc32434.o] Error 1  This problem is included in the following commit.    commit 28f65c11f2ffb3957259dece647a24f8ad2e241b   Author: Joe Perches <joe@perches.com>   Date:   Thu Jun 9 09:13:32 2011 -0700        treewide: Convert uses of struct resource to resource_size(ptr)  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Cc: linux-mips <linux-mips@linux-mips.org> Cc: Joe Perches <joe@perches.com> Patchwork: https://patchwork.linux-mips.org/patch/2654/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-vr41xx.c | s | 8.9K | 270 | Joe Perches | joe@perches.com | 1307710536 |  | treewide: Convert uses of struct resource to resource_size(ptr)  Several fixes as well where the +1 was missing.  Done via coccinelle scripts like:  @@ struct resource *ptr; @@  - ptr->end - ptr->start + 1 + resource_size(ptr)  and some grep and typing.  Mostly uncompiled, no cross-compilers.  Signed-off-by: Joe Perches <joe@perches.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | fixup-pnx8550.c | s | 1.4K | 49 | Ralf Baechle | ralf@linux-mips.org | 1184085180 |  | [MIPS] PCI: Make dev pointer argument of pcibios_map_irq const.  This is to break the code of people who think they are supposed to scribble into the pci device structure - it's off limits.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | Makefile | g | 2.6K |  | Ralf Baechle | ralf@linux-mips.org | 1338058548 |  | Merge branches 'fixes-for-linus', 'generic', 'cavium', 'module.h-fixes', 'next/ath79' and 'next/lantiq' into mips-for-linux-next
f | pci.c | s | 8.7K | 301 | John Crispin | blogic@openwrt.org | 1337096959 |  | MIPS: pci: parse memory ranges from devicetree  Implement pci_load_of_ranges on MIPS. Due to lack of test hardware only 32bit bus width is supported. This function is based on pci_process_bridge_OF_ranges from powerpc.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3729/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-emma2rh.c | s | 4.4K | 152 | Ralf Baechle | ralf@linux-mips.org | 1249318360 |  | MIPS: Eleminate filenames from comments  They tend to get not updated when files are moved around or copied and lack any obvious use.  While at it zap some only too obvious comments and as per Shinya's suggestion, add a copyright header to extable.c.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com> Acked-by: Thadeu Lima de Souza Cascardo <cascardo@holoscopio.com>
f | pci-yosemite.c | s | 1.7K | 54 | Ben Hutchings | ben@decadent.org.uk | 1280167699 |  | MIPS: Set io_map_base for several PCI bridges lacking it  Several MIPS platforms don't set pci_controller::io_map_base for their PCI bridges.  This results in a panic in pci_iomap().  (The panic is conditional on CONFIG_PCI_DOMAINS, but that is now enabled for all PCI MIPS systems.)  Signed-off-by: Ben Hutchings <ben@decadent.org.uk> Cc: linux-mips@linux-mips.org Cc: Martin Michlmayr <tbm@cyrius.com> Cc: Aurelien Jarno <aurelien@aurel32.net> Cc: 584784@bugs.debian.org Patchwork: https://patchwork.linux-mips.org/patch/1377/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-emma2rh.c | s | 2.6K | 72 | Ralf Baechle | ralf@linux-mips.org | 1249318360 |  | MIPS: Eleminate filenames from comments  They tend to get not updated when files are moved around or copied and lack any obvious use.  While at it zap some only too obvious comments and as per Shinya's suggestion, add a copyright header to extable.c.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com> Acked-by: Thadeu Lima de Souza Cascardo <cascardo@holoscopio.com>
f | pci-tx4939.c | s | 2.6K | 98 | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-malta.c | s | 2.8K | 91 | Ralf Baechle | ralf@linux-mips.org | 1184085180 |  | [MIPS] PCI: Make dev pointer argument of pcibios_map_irq const.  This is to break the code of people who think they are supposed to scribble into the pci device structure - it's off limits.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-ar71xx.c | s | 9.6K | 292 | Gabor Juhos | juhosg@openwrt.org | 1337096945 |  | MIPS: ath79: add support for the PCI host controller of the AR71XX SoCs  The Atheros AR71XX SoCs have a built-in PCI Host Controller. This patch adds a driver for that, and modifies the relevant files in order to allow to register the PCI controller from board specific setup.  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: Imre Kaloz <kaloz@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3498/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-alchemy.c | s | 13K | 435 | Ralf Baechle | ralf@linux-mips.org | 1323295305 |  | MIPS: Fix Jazz 64-bit build error.  Move add_wired_entry to its own header file from where it will be always included.  Patch up other users of add_wired_entry to also include the header as needed.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pcie-octeon.c | s | 66K | 1924 | David Daney | david.daney@cavium.com | 1323347577 |  | MIPS: Octeon: Add support for OCTEON II PCIe  OCTEON II SOCs have a different PCIe implementation than is present in OCTEON Plus.  Signed-off-by: David Daney <david.daney@cavium.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2985/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-tx4927.c | s | 2.6K | 86 | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-mpc30x.c | s | 1.5K | 43 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-lemote2f.c | s | 4.8K | 142 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271589 |  | MIPS: Loongson: Lemote-2F: USB: Not Emulate Non-Posted Writes  Without this patch, when copying large amounts of data between the USB storage devices and the hard disk, the USB device will disconnect regularly.  Signed-off-by: Hu Hongbing <huhb@lemote.com> Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/822/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-rbtx4927.c | s | 2.3K | 70 | Atsushi Nemoto | anemo@mba.ocn.ne.jp | 1216143875 |  | [MIPS] TXx9: Make single kernel can support multiple boards  Make single kernel can be used on RBTX4927/37/38.  Also make some SoC-specific code independent from board-specific code.  Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-mace.c | s | 2.3K | 90 | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1216143871 |  | [MIPS] Enable FAST-20 for onboard scsi  Both onboard controller of the O2 support FAST-20 transfer speeds, but the bit, which signals that to the aic driver, isn't set. Instead of adding detection code to the scsi driver, we just fake the missing bit in the PCI config space of the scsi chips.  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-yosemite.c | s | 1.6K | 38 | Ralf Baechle | ralf@linux-mips.org | 1184085180 |  | [MIPS] PCI: Make dev pointer argument of pcibios_map_irq const.  This is to break the code of people who think they are supposed to scribble into the pci device structure - it's off limits.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-ip27.c | s | 5.6K | 185 | Bjorn Helgaas | bhelgaas@google.com | 1330053537 |  | mips/PCI: replace pci_probe_only with pci_flags  Some architectures (alpha, mips, powerpc) have an arch-specific "pci_probe_only" flag.  Others use PCI_PROBE_ONLY in pci_flags for the same purpose.  This moves mips to the pci_flags approach so generic code can use the same test across all architectures.  CC: Ralf Baechle <ralf@linux-mips.org> CC: linux-mips@linux-mips.org Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | msi-octeon.c | s | 12K | 378 | Ralf Baechle | ralf@linux-mips.org | 1323295305 |  | MIPS: Fix up inconsistency in panic() string argument.  Panic() invokes printk() to add a \n internally, so panic arguments should not themselves end in \n.  Panic invocations in arch/mips and elsewhere are inconsistently sometimes terminating in \n, sometimes not.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-tx3927.c | s | 7.1K | 206 | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-rbtx4938.c | s | 1.2K | 50 | Atsushi Nemoto | anemo@mba.ocn.ne.jp | 1216143875 |  | [MIPS] TXx9: Make single kernel can support multiple boards  Make single kernel can be used on RBTX4927/37/38.  Also make some SoC-specific code independent from board-specific code.  Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-sb1250.c | s | 7.5K | 245 | Bjorn Helgaas | bhelgaas@google.com | 1330053537 |  | mips/PCI: replace pci_probe_only with pci_flags  Some architectures (alpha, mips, powerpc) have an arch-specific "pci_probe_only" flag.  Others use PCI_PROBE_ONLY in pci_flags for the same purpose.  This moves mips to the pci_flags approach so generic code can use the same test across all architectures.  CC: Ralf Baechle <ralf@linux-mips.org> CC: linux-mips@linux-mips.org Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | pci-bcm1480ht.c | s | 5.7K | 179 | Ralf Baechle | ralf@linux-mips.org | 1253210871 |  | MIPS: Remove useless zero initializations.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-tb0219.c | s | 1.4K | 46 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-rc32434.c | s | 5.2K | 170 | Ralf Baechle | ralf@linux-mips.org | 1216561098 |  | [MIPS] Routerboard 532: Support for base system  Signed-off-by: Phil Sutter <n0-1@freewrt.org> Signed-off-by: Florian Fainelli <florian.fainelli@telecomint.eu> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-bonito64.c | s | 4.1K | 132 | Wu Zhangjin | wuzhangjin@gmail.com | 1261015026 |  | MIPS: Bonito64: Make Loongson independent from Bonito64 code.  The built-in Loongson 2E/2F northbridge in is bonito64-compatible but not identical with it.  To avoid influencing the original bonito64 support and make the loongson support more maintainable, it's better to separate the Bonito64 code from the Loongson code.  This also prepares the kernel for the coming Loongson 2f machines family support.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: Linux-MIPS <linux-mips@linux-mips.org> Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: Zhang Le <r0bertz@gentoo.org> Cc: zhangfx@lemote.com, Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-sni.c | s | 3.6K | 140 | Ralf Baechle | ralf@linux-mips.org | 1192142775 |  | [MIPS] Fix "no space between function name and open parenthesis" warnings.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-sb1250.c | s | 1.2K | 39 | Ralf Baechle | ralf@linux-mips.org | 1249318360 |  | MIPS: Eleminate filenames from comments  They tend to get not updated when files are moved around or copied and lack any obvious use.  While at it zap some only too obvious comments and as per Shinya's suggestion, add a copyright header to extable.c.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com> Acked-by: Thadeu Lima de Souza Cascardo <cascardo@holoscopio.com>
f | ops-bcm63xx.c | s | 10K | 382 | Maxime Bizon | mbizon@freebox.fr | 1253210872 |  | MIPS: BCM63xx: Add support for the Broadcom BCM63xx family of SOCs.  Signed-off-by: Maxime Bizon <mbizon@freebox.fr> Signed-off-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-bcm47xx.c | s | 2.9K | 91 | Hauke Mehrtens | hauke@hauke-m.de | 1328557984 |  | bcma: add PCIe host controller  Some SoCs have a PCIe host controller to make it possible to attach some other devices to it, like an other Wifi card. This code was tested with an Netgear WNDR3400 (bcm4716 based), but should work with all bcma based SoCs.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | ops-vr41xx.c | s | 3.1K | 108 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-wrppmc.c | s | 1010B | 32 | Ralf Baechle | ralf@linux-mips.org | 1184085180 |  | [MIPS] PCI: Make dev pointer argument of pcibios_map_irq const.  This is to break the code of people who think they are supposed to scribble into the pci device structure - it's off limits.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-lantiq.c | s | 1.0K | 33 | John Crispin | blogic@openwrt.org | 1337607112 |  | MIPS: pci: convert lantiq driver to OF  Implement support for OF inside the lantiq PCI driver. The patch also splits pcibios_plat_dev_init and pcibios_map_irq out into their own file to accomodate coexistance with the upcoming pcie driver.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3806/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-fuloong2e.c | s | 5.9K | 179 | Thomas Weber | weber@corscience.de | 1285235210 |  | Fix typo configue => configure in comments  Signed-off-by: Thomas Weber <weber@corscience.de> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | fixup-jmr3927.c | s | 2.6K | 75 | Atsushi Nemoto | anemo@mba.ocn.ne.jp | 1216143875 |  | [MIPS] TXx9: Make single kernel can support multiple boards  Make single kernel can be used on RBTX4927/37/38.  Also make some SoC-specific code independent from board-specific code.  Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-vr41xx.h | s | 4.8K | 139 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-ip32.c | s | 4.1K | 132 | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1199719923 |  | [MIPS] Fix IP32 breakage  - suppress master aborts during config read - set io_map_base - only fixup end of iomem resource to avoid failing request_resource   in serial driver - killed useless setting of crime_int bit, which caused wrong interrupts - use physcial address for serial port platform device and let 8250   driver do the ioremap  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-ar724x.c | s | 6.5K | 232 | Gabor Juhos | juhosg@openwrt.org | 1337096947 |  | MIPS: ath79: update copyright headers of PCI related files  Add copyright records according to the recent changes in the PCI code. Also fix up the descriptions.  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Signed-off-by: Imre Kaloz <kaloz@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3503/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-titan-ht.c | s | 3.3K | 93 | Andrea Gelmini | andrea.gelmini@gelma.net | 1281011144 |  | MIPS: PCI: RM9000 checkpatch cleanup  arch/mips/pci/ops-titan-ht.c:36: ERROR: "foo * bar" should be "foo *bar" arch/mips/pci/ops-titan-ht.c:68: ERROR: "foo * bar" should be "foo *bar"  Signed-off-by: Andrea Gelmini <andrea.gelmini@gelma.net> Cc: Tejun Heo <tj@kernel.org> Cc: Christoph Lameter <cl@linux-foundation.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1277/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-emma2rh.c | s | 2.9K | 84 | Ralf Baechle | ralf@linux-mips.org | 1249318360 |  | MIPS: Eleminate filenames from comments  They tend to get not updated when files are moved around or copied and lack any obvious use.  While at it zap some only too obvious comments and as per Shinya's suggestion, add a copyright header to extable.c.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com> Acked-by: Thadeu Lima de Souza Cascardo <cascardo@holoscopio.com>
f | fixup-tb0287.c | s | 1.6K | 60 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-rc32434.c | s | 2.5K | 60 | Adrian Bunk | bunk@kernel.org | 1225124306 |  | MIPS: RB532: Fix build error  mips/pci/fixup-rc32434.c must #include <asm/mach-rc32434/irq.h>  This patch fixes the following compile error caused by commit 606a083b1e1a357cb66454e4581b80f1a67d8368 (MIPS: RB532: Cleanup the headers again):  <--  snip  -->  ...   CC      arch/mips/pci/fixup-rc32434.o arch/mips/pci/fixup-rc32434.c: In function 'pcibios_map_irq': arch/mips/pci/fixup-rc32434.c:46: error: 'GROUP4_IRQ_BASE' undeclared (first use in this function) arch/mips/pci/fixup-rc32434.c:46: error: (Each undeclared identifier is reported only once arch/mips/pci/fixup-rc32434.c:46: error: for each function it appears in.) make[2]: *** [arch/mips/pci/fixup-rc32434.o] Error 1  <--  snip  -->  A virtually identical patch was also submitted by Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>.  Signed-off-by: Adrian Bunk <bunk@kernel.org> Acked-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-tb0226.c | s | 2.3K | 81 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-bcm63xx.c | s | 485B | 18 | Maxime Bizon | mbizon@freebox.fr | 1253210872 |  | MIPS: BCM63xx: Add support for the Broadcom BCM63xx family of SOCs.  Signed-off-by: Maxime Bizon <mbizon@freebox.fr> Signed-off-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-bcm63xx.h | s | 595B | 22 | Maxime Bizon | mbizon@freebox.fr | 1253210872 |  | MIPS: BCM63xx: Add support for the Broadcom BCM63xx family of SOCs.  Signed-off-by: Maxime Bizon <mbizon@freebox.fr> Signed-off-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-xlr.c | s | 8.7K | 287 | Bjorn Helgaas | bhelgaas@google.com | 1330053537 |  | mips/PCI: replace pci_probe_only with pci_flags  Some architectures (alpha, mips, powerpc) have an arch-specific "pci_probe_only" flag.  Others use PCI_PROBE_ONLY in pci_flags for the same purpose.  This moves mips to the pci_flags approach so generic code can use the same test across all architectures.  CC: Ralf Baechle <ralf@linux-mips.org> CC: linux-mips@linux-mips.org Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | ops-pmcmsp.c | s | 31K | 905 | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-cobalt.c | s | 5.4K | 160 | Bjorn Helgaas | bhelgaas@google.com | 1330053542 |  | mips/PCI: get rid of device resource fixups  Tell the PCI core about host bridge address translation so it can take care of bus-to-resource conversion for us.  Here's the wrinkle on Cobalt: we can't generate normal I/O port addresses on PCI because the GT-64111 doesn't do any address translation, so we have this:    CPU I/O port addresses		[io 0x0000-0xffffff]   PCI bus I/O port addresses	[io 0x10000000-0x10ffffff]  Legacy-mode IDE controllers start out with the legacy bus addresses, e.g., 0x1f0, assigned by pci_setup_device().  These are outside the range of addresses GT-64111 can generate on PCI, but pcibios_fixup_device_resources() converted them to CPU addresses anyway by adding io_offset.  Therefore, we had to pre-adjust them in cobalt_legacy_ide_fixup().  With io_offset = 0xf0000000, we had this:    res->start = 0x1f0	initialized in pci_setup_device()   res->start = 0x100001f0	-= io_offset in cobalt_legacy_ide_fixup()   res->start = 0x1f0	+= io_offset in pcibios_fixup_device_resources()  The difference after this patch is that the generic pci_bus_to_resource() only adds the offset if the bus address is inside a host bridge window. Since 0x1f0 is not a valid bus address and is not inside any windows, it is unaffected, so we now have this:    region->start = 0x1f0	initialized in pci_setup_device()   res->start = 0x1f0	no offset by pci_bus_to_resource()  That means we can remove both pcibios_fixup_device_resources() and cobalt_legacy_ide_fixup().  I would *rather* set the host bridge offset to zero (which corresponds to what the GT-64111 actually does), and have both CPU and PCI addresses of [io 0x10000000-0x10ffffff].  However, that would require changes to generic code that assumes legacy I/O addresses, such as pic1_io_resource ([io 0x0020-0x00021]), and we'd have to keep a Cobalt IDE fixup.  Of course, none of this changes the fact that references to I/O port 0x1f0 actually go to port 0x100001f0, not 0x1f0, on the Cobalt PCI bus. Fortunately the VT82C586 IDE controller only decodes the low 24 address bits, so it does work.  CC: Ralf Baechle <ralf@linux-mips.org> CC: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | fixup-ip32.c | s | 1.5K | 47 | Ralf Baechle | ralf@linux-mips.org | 1184085180 |  | [MIPS] PCI: Make dev pointer argument of pcibios_map_irq const.  This is to break the code of people who think they are supposed to scribble into the pci device structure - it's off limits.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-tx4938.c | s | 4.0K | 134 | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-lasat.c | s | 2.1K | 74 | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1216143879 |  | [MIPS] Remove mips_machtype for LASAT machines  This is the LASAT part of the mips_machtype removal.  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-pmcmsp.c | s | 10K | 202 | Ralf Baechle | ralf@linux-mips.org | 1193686537 |  | Author: Ralf Baechle <ralf@linux-mips.org>  [MIPS] MSP71xx: Fix bitrot.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-lantiq.h | s | 572B | 15 | John Crispin | blogic@openwrt.org | 1305795342 |  | MIPS: Lantiq: Add PCI controller support.  The Lantiq family of SoCs have a EBU (External Bus Unit). This patch adds the driver that allows us to use the EBU as a PCI controller. In order for PCI to work the EBU is set to endianess swap all the data. In addition we need to make use of SWAP_IO_SPACE for device->host DMA to work.  The clock of the PCI works in several modes (internal/external). If this is not configured correctly the SoC will hang.  Signed-off-by: John Crispin <blogic@openwrt.org> Signed-off-by: Ralph Hempel <ralph.hempel@lantiq.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2250/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-loongson2.c | s | 5.4K | 182 | Matt Turner | mattst88@gmail.com | 1337096821 |  | MIPS: Include export.h in for EXPORT_SYMBOL in ops-loongson2.c  Fixes warning: data definition has no type or storage class [enabled by default] warning: type defaults to 'int' in declaration of 'EXPORT_SYMBOL' [-Wimplicit-int] warning: parameter names (without types) in function declaration [enabled by default]  Signed-off-by: Matt Turner <mattst88@gmail.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3746/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-tx4927.c | s | 15K | 484 | David Howells | dhowells@redhat.com | 1286456934 |  | MIPS: Add missing #inclusions of <linux/irq.h>  Add missing #inclusions of <linux/irq.h> to a whole bunch of files that should really include it.  Note that this can replace #inclusions of <asm/irq.h>.  This is required for the patch to sort out irqflags handling function naming to compile on MIPS.  The problem is that these files require access to things like setup_irq() - which isn't available by #including <linux/interrupt.h>  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-nile4.c | s | 3.5K | 116 | Ralf Baechle | ralf@linux-mips.org | 1311199929 |  | MIPS: NILE4: Remove useless inclusion of GT64120 header.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-msc.c | s | 4.0K | 123 | Maciej W. Rozycki | macro@linux-mips.org | 1130610620 |  | Fixes for system controllers for Atlas/Malta core cards.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-octeon.c | s | 22K | 634 | David Daney | david.daney@cavium.com | 1323347188 |  | MIPS: Octeon: Update PCI Latency timer and enable more error reporting.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2987/ Patchwork: https://patchwork.linux-mips.org/patch/3161/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fixup-sni.c | s | 5.0K | 152 | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1195168910 |  | [MIPS] SNI PCIT CPLUS: workaround for b0rked irq wiring of onboard PCI bus 1  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-pnx8550.c | s | 6.3K | 237 | Shinya Kuribayashi | skuribay@ruby.dti.ne.jp | 1224071212 |  | MIPS: Kill unused <asm/debug.h> inclusions  Signed-off-by: Shinya Kuribayashi <skuribay@ruby.dti.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-titan.c | s | 2.9K | 93 | Ralf Baechle | ralf@linux-mips.org | 1150735166 |  | [MIPS] Support for the RM9000-based Basler eXcite smart camera platform.  Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-bcm1480.c | s | 7.1K | 220 | Bjorn Helgaas | bhelgaas@google.com | 1330053537 |  | mips/PCI: replace pci_probe_only with pci_flags  Some architectures (alpha, mips, powerpc) have an arch-specific "pci_probe_only" flag.  Others use PCI_PROBE_ONLY in pci_flags for the same purpose.  This moves mips to the pci_flags approach so generic code can use the same test across all architectures.  CC: Ralf Baechle <ralf@linux-mips.org> CC: linux-mips@linux-mips.org Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | fixup-capcella.c | s | 1.5K | 45 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-bridge.c | s | 8.5K | 262 | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1212685995 |  | [MIPS] IP27: misc fixes  - fix PCI interrupt assignment by emulating ioc3 interrupt pin register - use pci_probe_only mode - select correct page size in bridge - remove no longer needed ioc3_sio_init() code  [Ralf: Fix for 64kB or larger pagesizes]  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-gt64xxx_pci0.c | s | 4.2K | 127 | Yoichi Yuasa | yoichi_yuasa@tripeaks.co.jp | 1177687223 |  | [MIPS] merge GT64111 PCI routines and GT64120 PCI_0 routines  This patch has merged GT64111 PCI routines and GT64120 PCI_0 routines. GT64111 PCI is almost the same as GT64120's PCI_0. This patch don't change GT64120 PCI routines.  Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci-bcm63xx.c | s | 6.6K | 189 | Maxime Bizon | mbizon@freebox.fr | 1323295384 |  | MIPS: BCM63XX: Add support for bcm6368 CPU.  Signed-off-by: Maxime Bizon <mbizon@freebox.fr> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2892/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ops-lantiq.c | s | 2.9K | 93 | John Crispin | blogic@openwrt.org | 1305795342 |  | MIPS: Lantiq: Add PCI controller support.  The Lantiq family of SoCs have a EBU (External Bus Unit). This patch adds the driver that allows us to use the EBU as a PCI controller. In order for PCI to work the EBU is set to endianess swap all the data. In addition we need to make use of SWAP_IO_SPACE for device->host DMA to work.  The clock of the PCI works in several modes (internal/external). If this is not configured correctly the SoC will hang.  Signed-off-by: John Crispin <blogic@openwrt.org> Signed-off-by: Ralph Hempel <ralph.hempel@lantiq.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2250/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
