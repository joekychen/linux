f | time.c | s | 2.0K | 53 | Hauke Mehrtens | hauke@hauke-m.de | 1312828172 |  | bcm47xx: add support for bcma bus  This patch add support for the bcma bus. Broadcom uses only Mips 74K CPUs on the new SoC and on the old ons using ssb bus there are no Mips 74K CPUs.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Acked-by: Ralf Baechle <ralf@linux-mips.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | gpio.c | s | 2.5K | 89 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103857 |  | mips: add export.h to files using EXPORT_SYMBOL/THIS_MODULE  Or else we get lots of variations on this:  arch/mips/pci/pci.c:330: warning: type defaults to 'int' in declaration of 'EXPORT_SYMBOL'  scattered throughout the build.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | nvram.c | s | 2.7K | 102 | Hauke Mehrtens | hauke@hauke-m.de | 1330978850 |  | MIPS: BCM47XX: return number of written bytes in nvram_getenv  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Makefile | g | 194B |  | Hauke Mehrtens | hauke@hauke-m.de | 1330978851 |  | MIPS: BCM47XX: move and extend sprom parsing  Move the sprom parsing from nvram into sprom.c. There are all values needed for sprom version 1 to 9 read from nvram and there are more sanity checks added. This is based on the sprom parsing in the open source part of the Broadcom SDK.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | setup.c | s | 6.8K | 213 | Nathan Hintz | nlhintz@hotmail.com | 1337186763 |  | bcma: Move initialization of SPROM to prevent overwrite  The first thing bcm47xx_fill_sprom does is initialize (zero fill) the SPROM.  For BCMA SOC, this wipes out any values previously read by bcm47xx_fill_sprom_ethernet (see arch/mips/bcm47xx/setup.c - bcm47xx_get_sprom_bcma).  Move the initialization of SPROM so it is called prior to filling in any values.  Signed-off-by: Nathan Hintz <nlhintz@hotmail.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | serial.c | s | 2.4K | 80 | Hauke Mehrtens | hauke@hauke-m.de | 1312828172 |  | bcm47xx: add support for bcma bus  This patch add support for the bcma bus. Broadcom uses only Mips 74K CPUs on the new SoC and on the old ons using ssb bus there are no Mips 74K CPUs.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Acked-by: Ralf Baechle <ralf@linux-mips.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | prom.c | s | 5.1K | 153 | Hauke Mehrtens | hauke@hauke-m.de | 1281011139 |  | MIPS: BCM47xx: Really fix 128MB RAM problem  The previous patch 4a86f2d27733f610e642649aca3e82e86fca9e22 (lmo) rsp. 84a6fcb368a080620d12fc4d79e07902dbee7335 (kernel.org) was wrong.  The BCM47xx architecture maps the ram into a 128MB address space. It will be spaced there as often as goes into the 128MB. Detection tries to find the position where the same memory is found. When reading beyond 128MB the processor will throw an exception. If 128MB RAM is installed, it will not find a memory alias because it tries to read beyond the 128MB border. Now it just assumes 128MB installed ram if it can not find an alias.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1508/ Acked-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | irq.c | s | 2.1K | 61 | Hauke Mehrtens | hauke@hauke-m.de | 1312828173 |  | bcm47xx: fix irq assignment for new SoCs.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Acked-by: Ralf Baechle <ralf@linux-mips.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | sprom.c | s | 25K | 599 | Nathan Hintz | nlhintz@hotmail.com | 1337186763 |  | bcma: Move initialization of SPROM to prevent overwrite  The first thing bcm47xx_fill_sprom does is initialize (zero fill) the SPROM.  For BCMA SOC, this wipes out any values previously read by bcm47xx_fill_sprom_ethernet (see arch/mips/bcm47xx/setup.c - bcm47xx_get_sprom_bcma).  Move the initialization of SPROM so it is called prior to filling in any values.  Signed-off-by: Nathan Hintz <nlhintz@hotmail.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Kconfig | g | 839B |  | Hauke Mehrtens | hauke@hauke-m.de | 1312828172 |  | bcm47xx: add support for bcma bus  This patch add support for the bcma bus. Broadcom uses only Mips 74K CPUs on the new SoC and on the old ons using ssb bus there are no Mips 74K CPUs.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Acked-by: Ralf Baechle <ralf@linux-mips.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | wgt634u.c | s | 4.1K | 145 | Hauke Mehrtens | hauke@hauke-m.de | 1312828170 |  | bcm47xx: prepare to support different buses  Prepare bcm47xx to support different System buses. Before adding support for bcma it should be possible to build bcm47xx without the need of ssb. With this patch bcm47xx does not directly contain a ssb_bus, but a union contain all the supported system buses. As a SoC just uses one system bus a union is a good choice.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Acked-by: Ralf Baechle <ralf@linux-mips.org> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | Platform | g | 199B |  | Ralf Baechle | ralf@linux-mips.org | 1281011154 |  | MIPS: BCM47xx: Migrate to new platform makefile style.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
