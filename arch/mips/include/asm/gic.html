<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › gic.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>gic.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2000, 07 MIPS Technologies, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * GIC Register Definitions</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_GICREGS_H</span>
<span class="cp">#define _ASM_GICREGS_H</span>

<span class="cp">#undef	GICISBYTELITTLEENDIAN</span>

<span class="cm">/* Constants */</span>
<span class="cp">#define GIC_POL_POS			1</span>
<span class="cp">#define GIC_POL_NEG			0</span>
<span class="cp">#define GIC_TRIG_EDGE			1</span>
<span class="cp">#define GIC_TRIG_LEVEL			0</span>

<span class="cp">#define GIC_NUM_INTRS			(24 + NR_CPUS * 2)</span>

<span class="cp">#define MSK(n) ((1 &lt;&lt; (n)) - 1)</span>
<span class="cp">#define REG32(addr)		(*(volatile unsigned int *) (addr))</span>
<span class="cp">#define REG(base, offs)		REG32((unsigned long)(base) + offs##_##OFS)</span>
<span class="cp">#define REGP(base, phys)	REG32((unsigned long)(base) + (phys))</span>

<span class="cm">/* Accessors */</span>
<span class="cp">#define GIC_REG(segment, offset) \</span>
<span class="cp">	REG32(_gic_base + segment##_##SECTION_OFS + offset##_##OFS)</span>
<span class="cp">#define GIC_REG_ADDR(segment, offset) \</span>
<span class="cp">	REG32(_gic_base + segment##_##SECTION_OFS + offset)</span>

<span class="cp">#define GIC_ABS_REG(segment, offset) \</span>
<span class="cp">       (_gic_base + segment##_##SECTION_OFS + offset##_##OFS)</span>
<span class="cp">#define GIC_REG_ABS_ADDR(segment, offset) \</span>
<span class="cp">       (_gic_base + segment##_##SECTION_OFS + offset)</span>

<span class="cp">#ifdef GICISBYTELITTLEENDIAN</span>
<span class="cp">#define GICREAD(reg, data)	(data) = (reg), (data) = le32_to_cpu(data)</span>
<span class="cp">#define GICWRITE(reg, data)	(reg) = cpu_to_le32(data)</span>
<span class="cp">#define GICBIS(reg, bits)			\</span>
<span class="cp">	({unsigned int data;			\</span>
<span class="cp">		GICREAD(reg, data);		\</span>
<span class="cp">		data |= bits;			\</span>
<span class="cp">		GICWRITE(reg, data);		\</span>
<span class="cp">	})</span>

<span class="cp">#else</span>
<span class="cp">#define GICREAD(reg, data)	(data) = (reg)</span>
<span class="cp">#define GICWRITE(reg, data)	(reg) = (data)</span>
<span class="cp">#define GICBIS(reg, bits)	(reg) |= (bits)</span>
<span class="cp">#endif</span>


<span class="cm">/* GIC Address Space */</span>
<span class="cp">#define SHARED_SECTION_OFS		0x0000</span>
<span class="cp">#define SHARED_SECTION_SIZE		0x8000</span>
<span class="cp">#define VPE_LOCAL_SECTION_OFS		0x8000</span>
<span class="cp">#define VPE_LOCAL_SECTION_SIZE		0x4000</span>
<span class="cp">#define VPE_OTHER_SECTION_OFS		0xc000</span>
<span class="cp">#define VPE_OTHER_SECTION_SIZE		0x4000</span>
<span class="cp">#define USM_VISIBLE_SECTION_OFS		0x10000</span>
<span class="cp">#define USM_VISIBLE_SECTION_SIZE	0x10000</span>

<span class="cm">/* Register Map for Shared Section */</span>

<span class="cp">#define	GIC_SH_CONFIG_OFS		0x0000</span>

<span class="cm">/* Shared Global Counter */</span>
<span class="cp">#define GIC_SH_COUNTER_31_00_OFS	0x0010</span>
<span class="cp">#define GIC_SH_COUNTER_63_32_OFS	0x0014</span>
<span class="cp">#define GIC_SH_REVISIONID_OFS		0x0020</span>

<span class="cm">/* Interrupt Polarity */</span>
<span class="cp">#define GIC_SH_POL_31_0_OFS		0x0100</span>
<span class="cp">#define GIC_SH_POL_63_32_OFS		0x0104</span>
<span class="cp">#define GIC_SH_POL_95_64_OFS		0x0108</span>
<span class="cp">#define GIC_SH_POL_127_96_OFS		0x010c</span>
<span class="cp">#define GIC_SH_POL_159_128_OFS		0x0110</span>
<span class="cp">#define GIC_SH_POL_191_160_OFS		0x0114</span>
<span class="cp">#define GIC_SH_POL_223_192_OFS		0x0118</span>
<span class="cp">#define GIC_SH_POL_255_224_OFS		0x011c</span>

<span class="cm">/* Edge/Level Triggering */</span>
<span class="cp">#define GIC_SH_TRIG_31_0_OFS		0x0180</span>
<span class="cp">#define GIC_SH_TRIG_63_32_OFS		0x0184</span>
<span class="cp">#define GIC_SH_TRIG_95_64_OFS		0x0188</span>
<span class="cp">#define GIC_SH_TRIG_127_96_OFS		0x018c</span>
<span class="cp">#define GIC_SH_TRIG_159_128_OFS		0x0190</span>
<span class="cp">#define GIC_SH_TRIG_191_160_OFS		0x0194</span>
<span class="cp">#define GIC_SH_TRIG_223_192_OFS		0x0198</span>
<span class="cp">#define GIC_SH_TRIG_255_224_OFS		0x019c</span>

<span class="cm">/* Dual Edge Triggering */</span>
<span class="cp">#define GIC_SH_DUAL_31_0_OFS		0x0200</span>
<span class="cp">#define GIC_SH_DUAL_63_32_OFS		0x0204</span>
<span class="cp">#define GIC_SH_DUAL_95_64_OFS		0x0208</span>
<span class="cp">#define GIC_SH_DUAL_127_96_OFS		0x020c</span>
<span class="cp">#define GIC_SH_DUAL_159_128_OFS		0x0210</span>
<span class="cp">#define GIC_SH_DUAL_191_160_OFS		0x0214</span>
<span class="cp">#define GIC_SH_DUAL_223_192_OFS		0x0218</span>
<span class="cp">#define GIC_SH_DUAL_255_224_OFS		0x021c</span>

<span class="cm">/* Set/Clear corresponding bit in Edge Detect Register */</span>
<span class="cp">#define GIC_SH_WEDGE_OFS		0x0280</span>

<span class="cm">/* Reset Mask - Disables Interrupt */</span>
<span class="cp">#define GIC_SH_RMASK_31_0_OFS		0x0300</span>
<span class="cp">#define GIC_SH_RMASK_63_32_OFS		0x0304</span>
<span class="cp">#define GIC_SH_RMASK_95_64_OFS		0x0308</span>
<span class="cp">#define GIC_SH_RMASK_127_96_OFS		0x030c</span>
<span class="cp">#define GIC_SH_RMASK_159_128_OFS	0x0310</span>
<span class="cp">#define GIC_SH_RMASK_191_160_OFS	0x0314</span>
<span class="cp">#define GIC_SH_RMASK_223_192_OFS	0x0318</span>
<span class="cp">#define GIC_SH_RMASK_255_224_OFS	0x031c</span>

<span class="cm">/* Set Mask (WO) - Enables Interrupt */</span>
<span class="cp">#define GIC_SH_SMASK_31_0_OFS		0x0380</span>
<span class="cp">#define GIC_SH_SMASK_63_32_OFS		0x0384</span>
<span class="cp">#define GIC_SH_SMASK_95_64_OFS		0x0388</span>
<span class="cp">#define GIC_SH_SMASK_127_96_OFS		0x038c</span>
<span class="cp">#define GIC_SH_SMASK_159_128_OFS	0x0390</span>
<span class="cp">#define GIC_SH_SMASK_191_160_OFS	0x0394</span>
<span class="cp">#define GIC_SH_SMASK_223_192_OFS	0x0398</span>
<span class="cp">#define GIC_SH_SMASK_255_224_OFS	0x039c</span>

<span class="cm">/* Global Interrupt Mask Register (RO) - Bit Set == Interrupt enabled */</span>
<span class="cp">#define GIC_SH_MASK_31_0_OFS		0x0400</span>
<span class="cp">#define GIC_SH_MASK_63_32_OFS		0x0404</span>
<span class="cp">#define GIC_SH_MASK_95_64_OFS		0x0408</span>
<span class="cp">#define GIC_SH_MASK_127_96_OFS		0x040c</span>
<span class="cp">#define GIC_SH_MASK_159_128_OFS		0x0410</span>
<span class="cp">#define GIC_SH_MASK_191_160_OFS		0x0414</span>
<span class="cp">#define GIC_SH_MASK_223_192_OFS		0x0418</span>
<span class="cp">#define GIC_SH_MASK_255_224_OFS		0x041c</span>

<span class="cm">/* Pending Global Interrupts (RO) */</span>
<span class="cp">#define GIC_SH_PEND_31_0_OFS		0x0480</span>
<span class="cp">#define GIC_SH_PEND_63_32_OFS		0x0484</span>
<span class="cp">#define GIC_SH_PEND_95_64_OFS		0x0488</span>
<span class="cp">#define GIC_SH_PEND_127_96_OFS		0x048c</span>
<span class="cp">#define GIC_SH_PEND_159_128_OFS		0x0490</span>
<span class="cp">#define GIC_SH_PEND_191_160_OFS		0x0494</span>
<span class="cp">#define GIC_SH_PEND_223_192_OFS		0x0498</span>
<span class="cp">#define GIC_SH_PEND_255_224_OFS		0x049c</span>

<span class="cp">#define GIC_SH_INTR_MAP_TO_PIN_BASE_OFS	0x0500</span>

<span class="cm">/* Maps Interrupt X to a Pin */</span>
<span class="cp">#define GIC_SH_MAP_TO_PIN(intr) \</span>
<span class="cp">	(GIC_SH_INTR_MAP_TO_PIN_BASE_OFS + (4 * intr))</span>

<span class="cp">#define GIC_SH_INTR_MAP_TO_VPE_BASE_OFS	0x2000</span>

<span class="cm">/* Maps Interrupt X to a VPE */</span>
<span class="cp">#define GIC_SH_MAP_TO_VPE_REG_OFF(intr, vpe) \</span>
<span class="cp">	(GIC_SH_INTR_MAP_TO_VPE_BASE_OFS + (32 * (intr)) + (((vpe) / 32) * 4))</span>
<span class="cp">#define GIC_SH_MAP_TO_VPE_REG_BIT(vpe)	(1 &lt;&lt; ((vpe) % 32))</span>

<span class="cm">/* Convert an interrupt number to a byte offset/bit for multi-word registers */</span>
<span class="cp">#define GIC_INTR_OFS(intr) (((intr) / 32)*4)</span>
<span class="cp">#define GIC_INTR_BIT(intr) ((intr) % 32)</span>

<span class="cm">/* Polarity : Reset Value is always 0 */</span>
<span class="cp">#define GIC_SH_SET_POLARITY_OFS		0x0100</span>
<span class="cp">#define GIC_SET_POLARITY(intr, pol) \</span>
<span class="cp">	GICBIS(GIC_REG_ADDR(SHARED, GIC_SH_SET_POLARITY_OFS + \</span>
<span class="cp">		GIC_INTR_OFS(intr)), (pol) &lt;&lt; GIC_INTR_BIT(intr))</span>

<span class="cm">/* Triggering : Reset Value is always 0 */</span>
<span class="cp">#define GIC_SH_SET_TRIGGER_OFS		0x0180</span>
<span class="cp">#define GIC_SET_TRIGGER(intr, trig) \</span>
<span class="cp">	GICBIS(GIC_REG_ADDR(SHARED, GIC_SH_SET_TRIGGER_OFS + \</span>
<span class="cp">		GIC_INTR_OFS(intr)), (trig) &lt;&lt; GIC_INTR_BIT(intr))</span>

<span class="cm">/* Mask manipulation */</span>
<span class="cp">#define GIC_SH_SMASK_OFS		0x0380</span>
<span class="cp">#define GIC_SET_INTR_MASK(intr) \</span>
<span class="cp">	GICWRITE(GIC_REG_ADDR(SHARED, GIC_SH_SMASK_OFS + \</span>
<span class="cp">		GIC_INTR_OFS(intr)), 1 &lt;&lt; GIC_INTR_BIT(intr))</span>
<span class="cp">#define GIC_SH_RMASK_OFS		0x0300</span>
<span class="cp">#define GIC_CLR_INTR_MASK(intr) \</span>
<span class="cp">	GICWRITE(GIC_REG_ADDR(SHARED, GIC_SH_RMASK_OFS + \</span>
<span class="cp">		GIC_INTR_OFS(intr)), 1 &lt;&lt; GIC_INTR_BIT(intr))</span>

<span class="cm">/* Register Map for Local Section */</span>
<span class="cp">#define GIC_VPE_CTL_OFS			0x0000</span>
<span class="cp">#define GIC_VPE_PEND_OFS		0x0004</span>
<span class="cp">#define GIC_VPE_MASK_OFS		0x0008</span>
<span class="cp">#define GIC_VPE_RMASK_OFS		0x000c</span>
<span class="cp">#define GIC_VPE_SMASK_OFS		0x0010</span>
<span class="cp">#define GIC_VPE_WD_MAP_OFS		0x0040</span>
<span class="cp">#define GIC_VPE_COMPARE_MAP_OFS		0x0044</span>
<span class="cp">#define GIC_VPE_TIMER_MAP_OFS		0x0048</span>
<span class="cp">#define GIC_VPE_PERFCTR_MAP_OFS		0x0050</span>
<span class="cp">#define GIC_VPE_SWINT0_MAP_OFS		0x0054</span>
<span class="cp">#define GIC_VPE_SWINT1_MAP_OFS		0x0058</span>
<span class="cp">#define GIC_VPE_OTHER_ADDR_OFS		0x0080</span>
<span class="cp">#define GIC_VPE_WD_CONFIG0_OFS		0x0090</span>
<span class="cp">#define GIC_VPE_WD_COUNT0_OFS		0x0094</span>
<span class="cp">#define GIC_VPE_WD_INITIAL0_OFS		0x0098</span>
<span class="cp">#define GIC_VPE_COMPARE_LO_OFS		0x00a0</span>
<span class="cp">#define GIC_VPE_COMPARE_HI		0x00a4</span>

<span class="cp">#define GIC_VPE_EIC_SHADOW_SET_BASE	0x0100</span>
<span class="cp">#define GIC_VPE_EIC_SS(intr) \</span>
<span class="cp">	(GIC_EIC_SHADOW_SET_BASE + (4 * intr))</span>

<span class="cp">#define GIC_VPE_EIC_VEC_BASE		0x0800</span>
<span class="cp">#define GIC_VPE_EIC_VEC(intr) \</span>
<span class="cp">	(GIC_VPE_EIC_VEC_BASE + (4 * intr))</span>

<span class="cp">#define GIC_VPE_TENABLE_NMI_OFS		0x1000</span>
<span class="cp">#define GIC_VPE_TENABLE_YQ_OFS		0x1004</span>
<span class="cp">#define GIC_VPE_TENABLE_INT_31_0_OFS	0x1080</span>
<span class="cp">#define GIC_VPE_TENABLE_INT_63_32_OFS	0x1084</span>

<span class="cm">/* User Mode Visible Section Register Map */</span>
<span class="cp">#define GIC_UMV_SH_COUNTER_31_00_OFS	0x0000</span>
<span class="cp">#define GIC_UMV_SH_COUNTER_63_32_OFS	0x0004</span>

<span class="cm">/* Masks */</span>
<span class="cp">#define GIC_SH_CONFIG_COUNTSTOP_SHF	28</span>
<span class="cp">#define GIC_SH_CONFIG_COUNTSTOP_MSK	(MSK(1) &lt;&lt; GIC_SH_CONFIG_COUNTSTOP_SHF)</span>

<span class="cp">#define GIC_SH_CONFIG_COUNTBITS_SHF	24</span>
<span class="cp">#define GIC_SH_CONFIG_COUNTBITS_MSK	(MSK(4) &lt;&lt; GIC_SH_CONFIG_COUNTBITS_SHF)</span>

<span class="cp">#define GIC_SH_CONFIG_NUMINTRS_SHF	16</span>
<span class="cp">#define GIC_SH_CONFIG_NUMINTRS_MSK	(MSK(8) &lt;&lt; GIC_SH_CONFIG_NUMINTRS_SHF)</span>

<span class="cp">#define GIC_SH_CONFIG_NUMVPES_SHF	0</span>
<span class="cp">#define GIC_SH_CONFIG_NUMVPES_MSK	(MSK(8) &lt;&lt; GIC_SH_CONFIG_NUMVPES_SHF)</span>

<span class="cp">#define GIC_SH_WEDGE_SET(intr)		(intr | (0x1 &lt;&lt; 31))</span>
<span class="cp">#define GIC_SH_WEDGE_CLR(intr)		(intr &amp; ~(0x1 &lt;&lt; 31))</span>

<span class="cp">#define GIC_MAP_TO_PIN_SHF		31</span>
<span class="cp">#define GIC_MAP_TO_PIN_MSK		(MSK(1) &lt;&lt; GIC_MAP_TO_PIN_SHF)</span>
<span class="cp">#define GIC_MAP_TO_NMI_SHF		30</span>
<span class="cp">#define GIC_MAP_TO_NMI_MSK		(MSK(1) &lt;&lt; GIC_MAP_TO_NMI_SHF)</span>
<span class="cp">#define GIC_MAP_TO_YQ_SHF		29</span>
<span class="cp">#define GIC_MAP_TO_YQ_MSK		(MSK(1) &lt;&lt; GIC_MAP_TO_YQ_SHF)</span>
<span class="cp">#define GIC_MAP_SHF			0</span>
<span class="cp">#define GIC_MAP_MSK			(MSK(6) &lt;&lt; GIC_MAP_SHF)</span>

<span class="cm">/* GIC_VPE_CTL Masks */</span>
<span class="cp">#define GIC_VPE_CTL_PERFCNT_RTBL_SHF	2</span>
<span class="cp">#define GIC_VPE_CTL_PERFCNT_RTBL_MSK	(MSK(1) &lt;&lt; GIC_VPE_CTL_PERFCNT_RTBL_SHF)</span>
<span class="cp">#define GIC_VPE_CTL_TIMER_RTBL_SHF	1</span>
<span class="cp">#define GIC_VPE_CTL_TIMER_RTBL_MSK	(MSK(1) &lt;&lt; GIC_VPE_CTL_TIMER_RTBL_SHF)</span>
<span class="cp">#define GIC_VPE_CTL_EIC_MODE_SHF	0</span>
<span class="cp">#define GIC_VPE_CTL_EIC_MODE_MSK	(MSK(1) &lt;&lt; GIC_VPE_CTL_EIC_MODE_SHF)</span>

<span class="cm">/* GIC_VPE_PEND Masks */</span>
<span class="cp">#define GIC_VPE_PEND_WD_SHF		0</span>
<span class="cp">#define GIC_VPE_PEND_WD_MSK		(MSK(1) &lt;&lt; GIC_VPE_PEND_WD_SHF)</span>
<span class="cp">#define GIC_VPE_PEND_CMP_SHF		1</span>
<span class="cp">#define GIC_VPE_PEND_CMP_MSK		(MSK(1) &lt;&lt; GIC_VPE_PEND_CMP_SHF)</span>
<span class="cp">#define GIC_VPE_PEND_TIMER_SHF		2</span>
<span class="cp">#define GIC_VPE_PEND_TIMER_MSK		(MSK(1) &lt;&lt; GIC_VPE_PEND_TIMER_SHF)</span>
<span class="cp">#define GIC_VPE_PEND_PERFCOUNT_SHF	3</span>
<span class="cp">#define GIC_VPE_PEND_PERFCOUNT_MSK	(MSK(1) &lt;&lt; GIC_VPE_PEND_PERFCOUNT_SHF)</span>
<span class="cp">#define GIC_VPE_PEND_SWINT0_SHF		4</span>
<span class="cp">#define GIC_VPE_PEND_SWINT0_MSK		(MSK(1) &lt;&lt; GIC_VPE_PEND_SWINT0_SHF)</span>
<span class="cp">#define GIC_VPE_PEND_SWINT1_SHF		5</span>
<span class="cp">#define GIC_VPE_PEND_SWINT1_MSK		(MSK(1) &lt;&lt; GIC_VPE_PEND_SWINT1_SHF)</span>

<span class="cm">/* GIC_VPE_RMASK Masks */</span>
<span class="cp">#define GIC_VPE_RMASK_WD_SHF		0</span>
<span class="cp">#define GIC_VPE_RMASK_WD_MSK		(MSK(1) &lt;&lt; GIC_VPE_RMASK_WD_SHF)</span>
<span class="cp">#define GIC_VPE_RMASK_CMP_SHF		1</span>
<span class="cp">#define GIC_VPE_RMASK_CMP_MSK		(MSK(1) &lt;&lt; GIC_VPE_RMASK_CMP_SHF)</span>
<span class="cp">#define GIC_VPE_RMASK_TIMER_SHF		2</span>
<span class="cp">#define GIC_VPE_RMASK_TIMER_MSK		(MSK(1) &lt;&lt; GIC_VPE_RMASK_TIMER_SHF)</span>
<span class="cp">#define GIC_VPE_RMASK_PERFCNT_SHF	3</span>
<span class="cp">#define GIC_VPE_RMASK_PERFCNT_MSK	(MSK(1) &lt;&lt; GIC_VPE_RMASK_PERFCNT_SHF)</span>
<span class="cp">#define GIC_VPE_RMASK_SWINT0_SHF	4</span>
<span class="cp">#define GIC_VPE_RMASK_SWINT0_MSK	(MSK(1) &lt;&lt; GIC_VPE_RMASK_SWINT0_SHF)</span>
<span class="cp">#define GIC_VPE_RMASK_SWINT1_SHF	5</span>
<span class="cp">#define GIC_VPE_RMASK_SWINT1_MSK	(MSK(1) &lt;&lt; GIC_VPE_RMASK_SWINT1_SHF)</span>

<span class="cm">/* GIC_VPE_SMASK Masks */</span>
<span class="cp">#define GIC_VPE_SMASK_WD_SHF		0</span>
<span class="cp">#define GIC_VPE_SMASK_WD_MSK		(MSK(1) &lt;&lt; GIC_VPE_SMASK_WD_SHF)</span>
<span class="cp">#define GIC_VPE_SMASK_CMP_SHF		1</span>
<span class="cp">#define GIC_VPE_SMASK_CMP_MSK		(MSK(1) &lt;&lt; GIC_VPE_SMASK_CMP_SHF)</span>
<span class="cp">#define GIC_VPE_SMASK_TIMER_SHF		2</span>
<span class="cp">#define GIC_VPE_SMASK_TIMER_MSK		(MSK(1) &lt;&lt; GIC_VPE_SMASK_TIMER_SHF)</span>
<span class="cp">#define GIC_VPE_SMASK_PERFCNT_SHF	3</span>
<span class="cp">#define GIC_VPE_SMASK_PERFCNT_MSK	(MSK(1) &lt;&lt; GIC_VPE_SMASK_PERFCNT_SHF)</span>
<span class="cp">#define GIC_VPE_SMASK_SWINT0_SHF	4</span>
<span class="cp">#define GIC_VPE_SMASK_SWINT0_MSK	(MSK(1) &lt;&lt; GIC_VPE_SMASK_SWINT0_SHF)</span>
<span class="cp">#define GIC_VPE_SMASK_SWINT1_SHF	5</span>
<span class="cp">#define GIC_VPE_SMASK_SWINT1_MSK	(MSK(1) &lt;&lt; GIC_VPE_SMASK_SWINT1_SHF)</span>

<span class="cm">/*</span>
<span class="cm"> * Set the Mapping of Interrupt X to a VPE.</span>
<span class="cm"> */</span>
<span class="cp">#define GIC_SH_MAP_TO_VPE_SMASK(intr, vpe) \</span>
<span class="cp">	GICWRITE(GIC_REG_ADDR(SHARED, GIC_SH_MAP_TO_VPE_REG_OFF(intr, vpe)), \</span>
<span class="cp">		 GIC_SH_MAP_TO_VPE_REG_BIT(vpe))</span>

<span class="k">struct</span> <span class="n">gic_pcpu_mask</span> <span class="p">{</span>
       <span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">pcpu_mask</span><span class="p">,</span> <span class="n">GIC_NUM_INTRS</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">gic_pending_regs</span> <span class="p">{</span>
       <span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">pending</span><span class="p">,</span> <span class="n">GIC_NUM_INTRS</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">gic_intrmask_regs</span> <span class="p">{</span>
       <span class="n">DECLARE_BITMAP</span><span class="p">(</span><span class="n">intrmask</span><span class="p">,</span> <span class="n">GIC_NUM_INTRS</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt Meta-data specification. The ipiflag helps</span>
<span class="cm"> * in building ipi_map.</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">gic_intr_map</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpunum</span><span class="p">;</span>	<span class="cm">/* Directed to this CPU */</span>
<span class="cp">#define GIC_UNUSED		0xdead			</span><span class="cm">/* Dummy data */</span><span class="cp"></span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">pin</span><span class="p">;</span>	<span class="cm">/* Directed to this Pin */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">polarity</span><span class="p">;</span>	<span class="cm">/* Polarity : +/-	*/</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">trigtype</span><span class="p">;</span>	<span class="cm">/* Trigger  : Edge/Levl */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">;</span>	<span class="cm">/* Misc flags	*/</span>
<span class="cp">#define GIC_FLAG_IPI           0x01</span>
<span class="cp">#define GIC_FLAG_TRANSPARENT   0x02</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">gic_init</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">gic_base_addr</span><span class="p">,</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">gic_addrspace_size</span><span class="p">,</span> <span class="k">struct</span> <span class="n">gic_intr_map</span> <span class="o">*</span><span class="n">intrmap</span><span class="p">,</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">intrmap_size</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">irqbase</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">gic_get_int</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">gic_send_ipi</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">intr</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">plat_ipi_call_int_xlate</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">plat_ipi_resched_int_xlate</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_GICREGS_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
