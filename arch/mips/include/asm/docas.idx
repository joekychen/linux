f | io.h | s | 18K | 549 | Ralf Baechle | ralf@linux-mips.org | 1319119219 |  | Revert "MIPS: LD/SD o32 macro GAS fix update"  This reverts commit 97475f8b42e83be2966aa2d70ab9c98477701c53 (lmo) / 82b89152f00f7ad17844d5614d5011e8d7944ac9 (kernel.org) [MIPS: LD/SD o32 macro GAS fix update].  Turns out this patch is producing many build errors with gcc 4.2.  Based on further testing with a test case extracted from the build errors found further build errors and suboptimal generation even in violation of the "R" constraint.  To make matters worse, the binutils changes also don't work quite as intended so revert this patch for now.
d | sn |  | 18 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | kmap_types.h | s | 182B | 8 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | pci.h | s | 4.0K | 116 | John Crispin | blogic@openwrt.org | 1337096959 |  | MIPS: pci: parse memory ranges from devicetree  Implement pci_load_of_ranges on MIPS. Due to lack of test hardware only 32bit bus width is supported. This function is based on pci_process_bridge_OF_ranges from powerpc.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3729/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pgtable-64.h | s | 9.0K | 247 | David Daney | ddaney@caviumnetworks.com | 1288375733 |  | MIPS: Make TASK_SIZE reflect proper size for both 32 and 64 bit processes.  The TASK_SIZE macro should reflect the size of a user process virtual address space.  Previously for 64-bit kernels, this was not the case. The immediate cause of pain was in hugetlbfs/inode.c:hugetlb_get_unmapped_area() where 32-bit processes trying to mmap a huge page would be served a page with an address outside of the 32-bit address range.  But there are other uses of TASK_SIZE in the kernel as well that would like an accurate value.  The new definition is nice because it now makes TASK_SIZE and TASK_SIZE_OF() yield the same value for any given process.  For 32-bit kernels there should be no change, although I did factor out some code in asm/processor.h that became identical for the 32-bit and 64-bit cases.  __UA_LIMIT is now set to ~((1 << SEGBITS) - 1) for 64-bit kernels. This should eliminate the possibility of getting a AddressErrorException in the kernel for addresses that pass the access_ok() test.  With the patch applied, I can still run o32, n32 and n64 processes, and have an o32 shell fork/exec both n32 and n64 processes.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1701/
d | sgi |  | 9 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | reg.h | s | 2.3K | 109 | Yong Zhang | yong.zhang@windriver.com | 1246632327 |  | MIPS: 64-bit: Fix o32 core dump  If an o32 process generates a core dump on a 64 bit kernel, the core file will not be correctly recognized. This is because ELF_CORE_COPY_REGS and ELF_CORE_COPY_TASK_REGS are not correctly defined for o32 and will use the default register set which would be CONFIG_64BIT in asm/elf.h.  So we'll switch to use the right register defines in this situation by checking for WANT_COMPAT_REG_H and use the right defines of ELF_CORE_COPY_REGS and ELF_CORE_COPY_TASK_REGS.  [Ralf: made ELF_CORE_COPY_TASK_REGS() bullet-proof against funny arguments.]  Signed-off-by: Yong Zhang <yong.zhang@windriver.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mipsregs.h | s | 48K | 1479 | Kevin Cernekee | cernekee@gmail.com | 1323295398 |  | MIPS: BMIPS: Add set/clear CP0 macros for BMIPS operations  Several BMIPS-specific CP0 registers are used for SMP boot and other operations.  Signed-off-by: Kevin Cernekee <cernekee@gmail.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2956/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | compat.h | s | 4.8K | 202 | Eric W. Biederman | ebiederm@xmission.com | 1319806733 |  | compat: sync compat_stats with statfs.  This was found by inspection while tracking a similar bug in compat_statfs64, that has been fixed in mainline since decemeber.  - This fixes a bug where not all of the f_spare fields   were cleared on mips and s390. - Add the f_flags field to struct compat_statfs - Copy f_flags to userspace in case someone cares. - Use __clear_user to copy the f_spare field to userspace   to ensure that all of the elements of f_spare are cleared.   On some architectures f_spare is has 5 ints and on some   architectures f_spare only has 4 ints.  Which makes   the previous technique of clearing each int individually   broken.  I don't expect anyone actually uses the old statfs system call anymore but if they do let them benefit from having the compat and the native version working the same.  Signed-off-by: Eric W. Biederman <ebiederm@xmission.com> Signed-off-by: Christoph Hellwig <hch@lst.de>
f | gt64120.h | s | 19K | 473 | Ralf Baechle | ralf@linux-mips.org | 1311199930 |  | MIPS: GT64120: Remove useless inclusion of clocksource.h.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cputime.h | s | 115B | 4 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | barrier.h | s | 4.9K | 165 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
d | mach-ip28 |  | 3 items |  | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1224071211 |  | MIPS: IP22/28: Switch over to RTC class driver  This patchset removes some dead code and creates a platform device for the RTC class driver.  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sections.h | s | 113B | 4 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | debug.h | s | 1.2K | 38 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cpu.h | s | 10K | 289 | Ralf Baechle | ralf@linux-mips.org | 1326292951 |  | Merge branches 'next/ar7', 'next/ath79', 'next/bcm63xx', 'next/bmips', 'next/cavium', 'next/generic', 'next/kprobes', 'next/lantiq', 'next/perf' and 'next/raza' into mips-for-linux-next
f | compiler.h | s | 491B | 17 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | irq_regs.h | s | 554B | 17 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | edac.h | s | 709B | 28 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-jazz |  | 4 items |  | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | pmc-sierra |  | 1 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | delay.h | s | 838B | 27 | Ralf Baechle | ralf@linux-mips.org | 1253210861 |  | MIPS: Fix potencial build error in <asm/delay.h>  <asm/delay.h> will break if HZ isn't defined.  In 2.6.26 and later we're usually lucky ...  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | wbflush.h | s | 694B | 25 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | octeon |  | 73 items |  | David Daney | david.daney@cavium.com | 1337096822 |  | MIPS: OCTEON: Remove unused file.  cvmx-pcieep-defs.h is not mentioned anywhere in the tree, remove it.  Signed-off-by: David Daney <david.daney@cavium.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3652/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | netlogic |  | 7 items |  | Jayachandran C | jayachandranc@netlogicmicro.com | 1323295496 |  | MIPS: Netlogic: Merge some of XLR/XLP wakup code  Create a common NMI and reset handler in smpboot.S and use this for both XLR and XLP.  In the earlier code, the woken up CPUs would busy wait until released, switch this to wakeup by NMI.  The initial wakeup code or XLR and XLP are differ since they are started from different bootloaders (XLP from u-boot and XLR from netlogic bootloader). But in both platforms the woken up CPUs wait and are released by sending an NMI.  Add support for starting XLR and XLP in 1/2/4 threads per core.  Signed-off-by: Jayachandran C <jayachandranc@netlogicmicro.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2970/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mmzone.h | s | 364B | 12 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-rm |  | 3 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gic.h | s | 11K | 290 | Ralf Baechle | ralf@linux-mips.org | 1286213636 |  | MIPS: GIC: Remove dependencies from Malta files.  This prevents the GIC code from being reusable sanely.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cacheflush.h | s | 4.5K | 117 | Ralf Baechle | ralf@linux-mips.org | 1319119218 |  | MIPS: cache: Provide cache flush operations for XFS  Until now flush_kernel_vmap_range() and invalidate_kernel_vmap_range() did not exist on MIPS resulting in heavy cache corruption on XFS filesystems.  Left for the post-3.0 time: optimization and make this work with highmem, too.  Since the combination of highmem + cache aliases atm doesn't work this isn't a regression.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Patchwork: https://patchwork.linux-mips.org/patch/2505/
f | ide.h | s | 330B | 11 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cachectl.h | s | 752B | 23 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | traps.h | s | 1.3K | 36 | David Daney | david.daney@cavium.com | 1337204073 |  | MIPS: Introduce board_cache_error_setup() hook.  This is used in subsequent patches.  Signed-off-by: David Daney <david.daney@cavium.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3819/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | irq_gt641xx.h | s | 2.7K | 56 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | segment.h | s | 147B | 4 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | xtalk |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-powertv |  | 10 items |  | Jesper Juhl | jj@chaosbits.net | 1316220036 |  | MIPS: Remove unneeded version.h includes from arch/mips/  It was pointed out by 'make versioncheck' that some includes of linux/version.h are not needed in arch/mips/. This patch removes them.  Signed-off-by: Jesper Juhl <jj@chaosbits.net> To: LKML <linux-kernel@vger.kernel.org> Cc: trivial@kernel.org Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2540/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sgiarcs.h | s | 15K | 486 | Justin P. Mattock | justinmattock@gmail.com | 1302095978 |  | update David Miller's old email address  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | current.h | s | 33B | 1 | Yoichi Yuasa | yuasa@linux-mips.org | 1267271607 |  | MIPS: Use generic current.h  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Cc: linux-mips <linux-mips@linux-mips.org> Patchwork: http://patchwork.linux-mips.org/patch/957/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | rm9k-ocd.h | s | 2.1K | 48 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | seccomp.h | s | 829B | 24 | Zhang Le | r0bertz@gentoo.org | 1236982079 |  | MIPS: Fix TIF_32BIT undefined problem when seccomp is disabled  Signed-off-by: Zhang Le <r0bertz@gentoo.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | stacktrace.h | s | 1.2K | 48 | Daniel Kalmar | kalmard@homejinni.com | 1308141333 |  | MIPS: Add new unwind_stack variant  The unwind_stack_by_address variant supports unwinding based on any kernel code address. This symbol is also exported so it can be called from modules.  Signed-off-by: Daniel Kalmar <kalmard@homejinni.com> Signed-off-by: Gergely Kis <gergely@homejinni.com> Signed-off-by: Robert Richter <robert.richter@amd.com>
f | watch.h | s | 799B | 26 | David Daney | ddaney@avtrex.com | 1223738336 |  | MIPS: Add HARDWARE_WATCHPOINTS definitions and support code.  This is the main support code for the patch.  Here we just add the code, the following patches hook it up.  Signed-off-by: David Daney <ddaney@avtrex.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>   create mode 100644 arch/mips/include/asm/watch.h  create mode 100644 arch/mips/kernel/watch.c
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | elf.h | s | 11K | 337 | David Daney | ddaney@caviumnetworks.com | 1292523054 |  | MIPS: Don't clobber personality high bits.  The high bits of current->personality carry settings that we don't want to clobber on each exec.  Only clobber them if the lower bits that indicate either PER_LINUX or PER_LINUX32 are invalid.  The clobbering prevents us from using useful bits like ADDR_NO_RANDOMIZE.  Reported-by: Camm Maguire <camm@maguirefamily.org> Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: Camm Maguire <camm@maguirefamily.org> Patchwork: https://patchwork.linux-mips.org/patch/1750/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | regdef.h | s | 2.8K | 98 | Ralf Baechle | ralf@linux-mips.org | 1319495667 |  | MIPS: O32: Provide definition of registers ta0 .. ta3.  Later IRIX versions provide them in <sys/regdef.h> and gas also accepts $ta0 .. $ta3 since binutils 2.18 so Linux should do the same for source compatibility.
f | tlb.h | s | 596B | 19 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sgidefs.h | s | 1.1K | 40 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-bcm47xx |  | 4 items |  | Hauke Mehrtens | hauke@hauke-m.de | 1337186721 |  | bcma: add boardinfo struct  This struct contains information about the board, the chip is running on. The struct is filled for PCIe devices and SoCs. This information is used by b43 and will be used by brcmsmac soon.  Signed-off-by: Hauke Mehrtens <hauke@hauke-m.de> Tested-by: Arend van Spriel <arend@broadcom.com> Signed-off-by: John W. Linville <linville@tuxdriver.com>
f | serial.h | s | 32B | 1 | Yoichi Yuasa | yuasa@linux-mips.org | 1267271607 |  | MIPS: Use generic serial.h  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Cc: linux-mips <linux-mips@linux-mips.org> Patchwork: http://patchwork.linux-mips.org/patch/960/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | resource.h | s | 1007B | 30 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | tlbdebug.h | s | 370B | 14 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-lantiq |  | 6 items |  | John Crispin | blogic@openwrt.org | 1338058377 |  | MIPS: lantiq: remove orphaned code  Now that all drivers are converted to OF we are able to remove some remaining pieces of orphaned code.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3841/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | asmmacro-64.h | s | 3.9K | 128 | Justin P. Mattock | justinmattock@gmail.com | 1302095978 |  | update David Miller's old email address  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | unaligned.h | s | 860B | 25 | Ralf Baechle | ralf@linux-mips.org | 1254340022 |  | MIPS: Avoid spurious make includecheck message  arch/mips/include/asm/unaligned.h: linux/unaligned/generic.h is included more than once.  Entirely legitimate but just noise.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sim.h | s | 2.3K | 70 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ucontext.h | s | 34B | 1 | Yoichi Yuasa | yuasa@linux-mips.org | 1267271607 |  | MIPS: Use generic ucontext.h  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Cc: linux-mips <linux-mips@linux-mips.org> Patchwork: http://patchwork.linux-mips.org/patch/959/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-vr41xx |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | vdso.h | s | 622B | 24 | David Daney | ddaney@caviumnetworks.com | 1271089574 |  | MIPS: Preliminary VDSO  This is a preliminary patch to add a vdso to all user processes.  Still missing are ELF headers and .eh_frame information.  But it is enough to allow us to move signal trampolines off of the stack.  Note that emulation of branch delay slots in the FPU emulator still requires the stack.  We allocate a single page (the vdso) and write all possible signal trampolines into it.  The stack is moved down by one page and the vdso is mapped into this space.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/975/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | smvp.h | s | 535B | 16 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | r4kcache.h | s | 13K | 399 | Justin P. Mattock | justinmattock@gmail.com | 1302095978 |  | update David Miller's old email address  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | termios.h | s | 4.7K | 148 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337096931 |  | MIPS: Delete bogus module.h usage in termios.h  There is no need for this.  Removing it causes a small amount of fallout (shown below) due to a few implicit header presence assumptions that are easily fixed.  arch/mips/include/asm/termios.h:103: error: implicit declaration of function 'access_ok' arch/mips/include/asm/module.h:17: error: expected specifier-qualifier-list before 'Elf64_Addr'  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3449/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-mipssim |  | 2 items |  | Shinya Kuribayashi | skuribay@pobox.com | 1311611215 |  | MIPS: Enable cpu_has_clo_clz for MIPS Technologies' platforms  Enable cpu_has_clo_clz only when CONFIG_CPU_MIPS32 or CONFIG_CPU_MIPS64 is selected.  This will optimize fls() and __fls() to use CLZ insn, and eventually ffs() and __ffs() as well.  Malta and MIPSSim are development platforms, and need to take care of various processor configurations, release rivisions and so on, even across different MIPS ISAs.  For such platforms we have to be careful, for instance, with turning on cpu_has_mips{32,64}r[12] features.  As for CLZ, all MIPS32/64 processors support it, regardless of release revisions.  Signed-off-by: Shinya Kuribayashi <skuribay@pobox.com> To: David VomLehn <dvomlehn@cisco.com> To: macro@linux-mips.org Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1453/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | reboot.h | s | 440B | 13 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ioctls.h | s | 4.2K | 97 | Kay Sievers | kay.sievers@vrfy.org | 1297980990 |  | tty: add TIOCVHANGUP to allow clean tty shutdown of all ttys  This is useful for system management software so that it can kick off things like gettys and everything that's started from a tty, before we reuse it from/for something else or shut it down.  Without this ioctl it would have to temporarily become the owner of the tty, then call vhangup() and then give it up again.  Cc: Lennart Poettering <lennart@poettering.net> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | smp.h | s | 2.5K | 71 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bitsperlong.h | s | 181B | 5 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | mips_mt.h | s | 588B | 20 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | dma-mapping.h | s | 2.3K | 69 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1332945392 |  | MIPS: adapt for dma_map_ops changes  Adapt core MIPS architecture code for dma_map_ops changes: replace alloc/free_coherent with generic alloc/free methods.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> [added missing changes to arch/mips/cavium-octeon/dma-octeon.c,  fixed attrs argument in dma-mapping.h] Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | siginfo.h | s | 3.0K | 110 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | arch_hweight.h | s | 792B | 30 | David Daney | ddaney@caviumnetworks.com | 1281011162 |  | MIPS: Create and use asm/arch_hweight.h  Some MIPS ISA processor varients can do hweight operations efficiently.  Split arch_hweight.h into a seperate file, and implement the operations with __builtin_popcount{,ll} if supported.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Cc: David Daney <ddaney@caviumnetworks.com> Patchwork: https://patchwork.linux-mips.org/patch/1430/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | compat-signal.h | s | 2.6K | 96 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pgtable-32.h | s | 6.7K | 172 | Ralf Baechle | ralf@linux-mips.org | 1326292907 |  | Merge branch 'next/generic' into mips-for-linux-next
d | txx9 |  | 16 items |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
f | war.h | s | 8.0K | 225 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | tlbmisc.h | s | 281B | 8 | Ralf Baechle | ralf@linux-mips.org | 1323295305 |  | MIPS: Fix Jazz 64-bit build error.  Move add_wired_entry to its own header file from where it will be always included.  Patch up other users of add_wired_entry to also include the header as needed.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | prom.h | s | 1.3K | 43 | Ralf Baechle | ralf@linux-mips.org | 1337096959 |  | MIPS: Add helper function to allow platforms to point at a DTB.  Add __dt_setup_arch() that can be called to load a builtin DT. Additionally we add a macro to allow loading a specific symbol from the __dtb_* section.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3715/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | bugs.h | s | 905B | 44 | Ralf Baechle | ralf@linux-mips.org | 1245864879 |  | MIPS: Build fix - include <linux/smp.h> into all smp_processor_id() users.  Some of the were relying into smp.h being dragged in by another header which of course is fragile.  <asm/cpu-info.h> uses smp_processor_id() only in macros and including smp.h there leads to an include loop, so don't change cpu-info.h.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | txx9pio.h | s | 592B | 25 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | jazzdma.h | s | 3.1K | 83 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | types.h | s | 1.0K | 41 | Linus Torvalds | torvalds@linux-foundation.org | 1326593010 |  | Merge branch 'for-next' of git://git.infradead.org/users/dhowells/linux-headers  * 'for-next' of git://git.infradead.org/users/dhowells/linux-headers:   UAPI: Split trivial #if defined(__KERNEL__) && X conditionals   UAPI: Don't have a #elif clause in a __KERNEL__ guard in linux/soundcard.h   UAPI: Fix AHZ multiple inclusion when __KERNEL__ is removed   UAPI: Make linux/patchkey.h easier to parse   UAPI: Fix nested __KERNEL__ guards in video/edid.h   UAPI: Alter the S390 asm include guards to be recognisable by the UAPI splitter   UAPI: Guard linux/cuda.h   UAPI: Guard linux/pmu.h   UAPI: Guard linux/isdn_divertif.h   UAPI: Guard linux/sound.h   UAPI: Rearrange definition of HZ in asm-generic/param.h   UAPI: Make FRV use asm-generic/param.h   UAPI: Make M32R use asm-generic/param.h   UAPI: Make MN10300 use asm-generic/param.h   UAPI: elf_read_implies_exec() is a kernel-only feature - so hide from userspace   UAPI: Don't include linux/compat.h in sparc's asm/siginfo.h   UAPI: Fix arch/mips/include/asm/Kbuild to have separate header-y lines
f | kdebug.h | s | 221B | 13 | David Daney | ddaney@caviumnetworks.com | 1281011189 |  | MIPS: kprobe: Add support.  This patch is based on previous work by Sony and Himanshu Chauhan.  I have done some cleanup and implemented JProbes and KRETPROBES.  The KRETPROBES part is pretty much copied verbatim from powerpc.  A possible future enhance might be to factor out the common code.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: Himanshu Chauhan <hschauhan@nulltrace.org> To: linux-mips@linux-mips.org To: ananth@in.ibm.com, To: anil.s.keshavamurthy@intel.com To: davem@davemloft.net To: masami.hiramatsu.pt@hitachi.com Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/1525/ Patchwork: https://patchwork.linux-mips.org/patch/1530/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | smtc_proc.h | s | 449B | 17 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | bcache.h | s | 1.4K | 46 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | hw_irq.h | s | 475B | 16 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | smtc_ipi.h | s | 2.3K | 106 | Jaidev Patwardhan | jaidev@mips.com | 1257159606 |  | MIPS: SMTC: Avoid queing multiple reschedule IPIs  Signed-off-by: Chris Dearman <chris@mips.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | clock.h | s | 1.4K | 48 | Wu Zhangjin | wuzhangjin@gmail.com | 1261015040 |  | MIPS: Loongson 2F: Add CPU frequency scaling support  Loongson 2F supports CPU clock scaling. When put it into wait mode by setting the frequency as ZERO it will stay in this mode until an external interrupt wakes the CPU again.  To enable clock scaling support, an external timer of a known stable rate is required.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: cpufreq@vger.kernel.org, Cc: Dave Jones <davej@redhat.com>, Cc: Dominik Brodowski <linux@dominikbrodowski.net>, Cc: yanh@lemote.com Cc: huhb@lemote.com, Patchwork: http://patchwork.linux-mips.org/patch/660/ Patchwork: http://patchwork.linux-mips.org/patch/751/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | amon.h | s | 141B | 6 | Tim Anderson | tanderson@mvista.com | 1246632326 |  | MIPS: CMP: activate CMP support  Most of the CMP support was added before, this mostly correct compile problems but adds a platform specific translation for the interrupt number based on cpu number.  Signed-off-by: Tim Anderson <tanderson@mvista.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sparsemem.h | s | 445B | 15 | David Daney | david.daney@cavium.com | 1337096822 |  | MIPS: Handle huge pages with 64KB base page size.  When using sparsemem, we need to adjust some constants as the resulting huge pages are 512MB in size.  Signed-off-by: David Daney <david.daney@cavium.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3745/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-cobalt |  | 5 items |  | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fpregdef.h | s | 2.1K | 89 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | isadep.h | s | 564B | 28 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | bitops.h | s | 15K | 609 | Akinobu Mita | akinobu.mita@gmail.com | 1300934782 |  | bitops: remove minix bitops from asm/bitops.h  minix bit operations are only used by minix filesystem and useless by other modules.  Because byte order of inode and block bitmaps is different on each architecture like below:  m68k: 	big-endian 16bit indexed bitmaps  h8300, microblaze, s390, sparc, m68knommu: 	big-endian 32 or 64bit indexed bitmaps  m32r, mips, sh, xtensa: 	big-endian 32 or 64bit indexed bitmaps for big-endian mode 	little-endian bitmaps for little-endian mode  Others: 	little-endian bitmaps  In order to move minix bit operations from asm/bitops.h to architecture independent code in minix filesystem, this provides two config options.  CONFIG_MINIX_FS_BIG_ENDIAN_16BIT_INDEXED is only selected by m68k. CONFIG_MINIX_FS_NATIVE_ENDIAN is selected by the architectures which use native byte order bitmaps (h8300, microblaze, s390, sparc, m68knommu, m32r, mips, sh, xtensa).  The architectures which always use little-endian bitmaps do not select these options.  Finally, we can remove minix bit operations from asm/bitops.h for all architectures.  Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com> Acked-by: Arnd Bergmann <arnd@arndb.de> Acked-by: Greg Ungerer <gerg@uclinux.org> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Roman Zippel <zippel@linux-m68k.org> Cc: Andreas Schwab <schwab@linux-m68k.org> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Michal Simek <monstr@monstr.eu> Cc: "David S. Miller" <davem@davemloft.net> Cc: Hirokazu Takata <takata@linux-m32r.org> Acked-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dma.h | s | 10K | 278 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
f | bootinfo.h | s | 3.9K | 117 | David Daney | ddaney@caviumnetworks.com | 1323295425 |  | MIPS: Handle initmem in systems with kernel not in add_memory_region() mem  This patch addresses a couple of related problems:  1) The kernel may reside in physical memory outside of the ranges set    by plat_mem_setup().  If this is the case, init mem cannot be    reused as it resides outside of the range of pages that the kernel    memory allocators control.  2) initrd images might be loaded in physical memory outside of the    ranges set by plat_mem_setup().  The memory likewise cannot be    reused.  The patch doesn't handle this specific case, but the    infrastructure is useful for future patches that do.  The crux of the problem is that there are memory regions that need be memory_present(), but that cannot be free_bootmem() at the time of arch_mem_init().  We create a new type of memory (BOOT_MEM_INIT_RAM) for use with add_memory_region().  Then arch_mem_init() adds the init mem with this type if the init mem is not already covered by existing ranges.  When memory is being freed into the bootmem allocator, we skip the BOOT_MEM_INIT_RAM ranges so they are not clobbered, but we do signal them as memory_present().  This way when they are later freed, the necessary memory manager structures have initialized and the Sparse allocater is prevented from crashing.  The Octeon specific code that handled this case is removed, because the new general purpose code handles the case.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1988/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | checksum.h | s | 5.7K | 226 | Ralf Baechle | ralf@linux-mips.org | 1242305428 |  | MIPS: uaccess: Switch lock annotations to might_fault().  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | setup.h | s | 592B | 15 | David Daney | david.daney@cavium.com | 1337204074 |  | MIPS: Move cache setup to setup_arch().  commit 97ce2c88f9ad42e3c60a9beb9fca87abf3639faa (jump-label: initialize jump-label subsystem much earlier) breaks MIPS.  The jump_label_init() call was moved before trap_init() which is where we initialize flush_icache_range().  In order to be good citizens, we move cache initialization earlier so that we don't jump through a null flush_icache_range function pointer when doing the jump label initialization.  Signed-off-by: David Daney <david.daney@cavium.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3822/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | kprobes.h | s | 2.6K | 77 | Maneesh Soni | manesoni@cisco.com | 1323295443 |  | MIPS Kprobes: Support branch instructions probing  This patch provides support for kprobes on branch instructions. The branch instruction at the probed address is actually emulated and not executed out-of-line like other normal instructions. Instead the delay-slot instruction is copied and single stepped out of line.  At the time of probe hit, the original branch instruction is evaluated and the target cp0_epc is computed similar to compute_retrun_epc(). It is also checked if the delay slot instruction can be skipped, which is true if there is a NOP in delay slot or branch is taken in case of branch likely instructions. Once the delay slot instruction is single stepped the normal execution resume with the cp0_epc updated the earlier computed cp0_epc as per the branch instructions.  Signed-off-by: Maneesh Soni <manesoni@cisco.com> Signed-off-by: Victor Kamensky <kamensky@cisco.com> Cc: David Daney <david.daney@cavium.com> Cc: ananth@in.ibm.com Cc: linux-kernel@vger.kernel.org Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2914/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pgtable-bits.h | s | 8.6K | 191 | David Daney | ddaney@caviumnetworks.com | 1267271606 |  | MIPS: Implement Read Inhibit/eXecute Inhibit  The SmartMIPS ASE specifies how Read Inhibit (RI) and eXecute Inhibit (XI) bits in the page tables work.  The upper two bits of EntryLo{0,1} are RI and XI when the feature is enabled in the PageGrain register. SmartMIPS only covers 32-bit systems.  Cavium Octeon+ extends this to 64-bit systems by continuing to place the RI and XI bits in the top of EntryLo even when EntryLo is 64-bits wide.  Because we need to carry the RI and XI bits in the PTE, the layout of the PTE is changed.  There is a two instruction overhead in the TLB refill hot path to get the EntryLo bits into the proper position. Also the TLB load exception has to probe the TLB to check if RI or XI caused the exception.  Also of note is that the layout of the PTE bits is done at compile and runtime rather than statically.  In the 32-bit case this allows for the same number of PFN bits as before the patch as the _PAGE_HUGE is not supported in 32-bit kernels (we have _PAGE_NO_EXEC and _PAGE_NO_READ instead of _PAGE_READ and _PAGE_HUGE).  The patch is tested on Cavium Octeon+, but should also work on 32-bit systems with the Smart-MIPS ASE.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/952/ Patchwork: http://patchwork.linux-mips.org/patch/956/ Patchwork: http://patchwork.linux-mips.org/patch/962/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | bmips.h | s | 2.7K | 95 | Kevin Cernekee | cernekee@gmail.com | 1323295398 |  | MIPS: BMIPS: Introduce bmips.h  bmips.h contains BMIPS definitions that are useful for SMP, vector relocation, performance counters, etc.  Signed-off-by: Kevin Cernekee <cernekee@gmail.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2973/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ptrace.h | s | 4.4K | 142 | Linus Torvalds | torvalds@linux-foundation.org | 1326847291 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit: (29 commits)   audit: no leading space in audit_log_d_path prefix   audit: treat s_id as an untrusted string   audit: fix signedness bug in audit_log_execve_info()   audit: comparison on interprocess fields   audit: implement all object interfield comparisons   audit: allow interfield comparison between gid and ogid   audit: complex interfield comparison helper   audit: allow interfield comparison in audit rules   Kernel: Audit Support For The ARM Platform   audit: do not call audit_getname on error   audit: only allow tasks to set their loginuid if it is -1   audit: remove task argument to audit_set_loginuid   audit: allow audit matching on inode gid   audit: allow matching on obj_uid   audit: remove audit_finish_fork as it can't be called   audit: reject entry,always rules   audit: inline audit_free to simplify the look of generic code   audit: drop audit_set_macxattr as it doesn't do anything   audit: inline checks for not needing to collect aux records   audit: drop some potentially inadvisable likely notations   ...  Use evil merge to fix up grammar mistakes in Kconfig file.  Bad speling and horrible grammar (and copious swearing) is to be expected, but let's keep it to commit messages and comments, rather than expose it to users in config help texts or printouts.
f | fixmap.h | s | 3.4K | 103 | Kevin Cernekee | cernekee@gmail.com | 1311611213 |  | MIPS: Move FIXADDR_TOP into spaces.h  Memory maps and addressing quirks are normally defined in <spaces.h>. There are already three targets that need to override FIXADDR_TOP, and others exist.  This will be a cleaner approach than adding lots of ifdefs in fixmap.h .  Signed-off-by: Kevin Cernekee <cernekee@gmail.com> Cc: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Cc: linux-mips@linux-mips.org Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/1573/ Acked-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | asmmacro.h | s | 1.8K | 79 | David Daney | ddaney@caviumnetworks.com | 1229105543 |  | MIPS: Use EI/DI for MIPS R2.  For MIPS R2, use the EI and DI instructions to enable and disable interrupts.  Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com> Signed-off-by: David Daney <ddaney@caviumnetworks.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | errno.h | s | 5.7K | 123 | Huang Ying | ying.huang@intel.com | 1300378107 |  | mm: make __get_user_pages return -EHWPOISON for HWPOISON page optionally  Make __get_user_pages return -EHWPOISON for HWPOISON page only if FOLL_HWPOISON is specified.  With this patch, the interested callers can distinguish HWPOISON pages from general FAULT pages, while other callers will still get -EFAULT for all these pages, so the user space interface need not to be changed.  This feature is needed by KVM, where UCR MCE should be relayed to guest for HWPOISON page, while instruction emulation and MMIO will be tried for general FAULT page.  The idea comes from Andrew Morton.  Signed-off-by: Huang Ying <ying.huang@intel.com> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | jump_label.h | s | 962B | 41 | Ingo Molnar | mingo@elte.hu | 1330074359 |  | static keys: Introduce 'struct static_key', static_key_true()/false() and static_key_slow_[inc||dec]()  So here's a boot tested patch on top of Jason's series that does all the cleanups I talked about and turns jump labels into a more intuitive to use facility. It should also address the various misconceptions and confusions that surround jump labels.  Typical usage scenarios:          #include <linux/static_key.h>          struct static_key key = STATIC_KEY_INIT_TRUE;          if (static_key_false(&key))                 do unlikely code         else                 do likely code  Or:          if (static_key_true(&key))                 do likely code         else                 do unlikely code  The static key is modified via:          static_key_slow_inc(&key);         ...         static_key_slow_dec(&key);  The 'slow' prefix makes it abundantly clear that this is an expensive operation.  I've updated all in-kernel code to use this everywhere. Note that I (intentionally) have not pushed through the rename blindly through to the lowest levels: the actual jump-label patching arch facility should be named like that, so we want to decouple jump labels from the static-key facility a bit.  On non-jump-label enabled architectures static keys default to likely()/unlikely() branches.  Signed-off-by: Ingo Molnar <mingo@elte.hu> Acked-by: Jason Baron <jbaron@redhat.com> Acked-by: Steven Rostedt <rostedt@goodmis.org> Cc: a.p.zijlstra@chello.nl Cc: mathieu.desnoyers@efficios.com Cc: davem@davemloft.net Cc: ddaney.cavm@gmail.com Cc: Linus Torvalds <torvalds@linux-foundation.org> Link: http://lkml.kernel.org/r/20120222085809.GA26397@elte.hu Signed-off-by: Ingo Molnar <mingo@elte.hu>
d | mach-loongson |  | 10 items |  | Ralf Baechle | ralf@linux-mips.org | 1311611215 |  | MIPS: Remove pointless return statement from empty void functions.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> To: Sergei Shtylyov <sshtylyov@mvista.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2391/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mmu_context.h | s | 8.6K | 269 | David Daney | ddaney@caviumnetworks.com | 1335543389 |  | MIPS: Remove get_current_pgd().  It is unused in the tree.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3557/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mc146818rtc.h | s | 450B | 14 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | floppy.h | s | 1.6K | 45 | Phil Carmody | ext-phil.2.carmody@nokia.com | 1311250200 |  | treewide: fix potentially dangerous trailing ';' in #defined values/expressions  All these are instances of   #define NAME value; or   #define NAME(params_opt) value;  These of course fail to build when used in contexts like   if(foo $OP NAME)   while(bar $OP NAME) and may silently generate the wrong code in contexts such as   foo = NAME + 1;    /* foo = value; + 1; */   bar = NAME - 1;    /* bar = value; - 1; */   baz = NAME & quux; /* baz = value; & quux; */  Reported on comp.lang.c, Message-ID: <ab0d55fe-25e5-482b-811e-c475aa6065c3@c29g2000yqd.googlegroups.com> Initial analysis of the dangers provided by Keith Thompson in that thread.  There are many more instances of more complicated macros having unnecessary trailing semicolons, but this pile seems to be all of the cases of simple values suffering from the problem. (Thus things that are likely to be found in one of the contexts above, more complicated ones aren't.)  Signed-off-by: Phil Carmody <ext-phil.2.carmody@nokia.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | cache.h | s | 627B | 17 | Catalin Marinas | catalin.marinas@arm.com | 1305047724 |  | MIPS: Rename .data..mostly and properly handle it in linker script  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ftrace.h | s | 2.1K | 77 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271592 |  | MIPS: Loongson: Change the Email address of Wu Zhangjin  Currently wuzj@lemote.com is not usable; change it to wuzhangjin@gmail.com.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/829/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-rc32434 |  | 14 items |  | Florian Fainelli | florian@openwrt.org | 1245233186 |  | MIPS: RB532: Cleanup cpu-features-overrides  Remove commented out definitions.  Signed-off-by: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-ip27 |  | 10 items |  | Peter Zijlstra | a.p.zijlstra@chello.nl | 1336568455 |  | sched/numa: Rewrite the CONFIG_NUMA sched domain support  The current code groups up to 16 nodes in a level and then puts an ALLNODES domain spanning the entire tree on top of that. This doesn't reflect the numa topology and esp for the smaller not-fully-connected machines out there today this might make a difference.  Therefore, build a proper numa topology based on node_distance().  Since there's no fixed numa layers anymore, the static SD_NODE_INIT and SD_ALLNODES_INIT aren't usable anymore, the new code tries to construct something similar and scales some values either on the number of cpus in the domain and/or the node_distance() ratio.  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Anton Blanchard <anton@samba.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: David Howells <dhowells@redhat.com> Cc: "David S. Miller" <davem@davemloft.net> Cc: Fenghua Yu <fenghua.yu@intel.com> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: linux-alpha@vger.kernel.org Cc: linux-ia64@vger.kernel.org Cc: linux-kernel@vger.kernel.org Cc: linux-mips@linux-mips.org Cc: linuxppc-dev@lists.ozlabs.org Cc: linux-sh@vger.kernel.org Cc: Matt Turner <mattst88@gmail.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Richard Henderson <rth@twiddle.net> Cc: sparclinux@vger.kernel.org Cc: Tony Luck <tony.luck@intel.com> Cc: x86@kernel.org Cc: Dimitri Sivanich <sivanich@sgi.com> Cc: Greg Pearson <greg.pearson@hp.com> Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com> Cc: bob.picco@oracle.com Cc: chris.mason@oracle.com Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: Andrew Morton <akpm@linux-foundation.org> Link: http://lkml.kernel.org/n/tip-r74n3n8hhuc2ynbrnp3vt954@git.kernel.org Signed-off-by: Ingo Molnar <mingo@kernel.org>
f | cpu-info.h | s | 3.0K | 84 | David Daney | ddaney@caviumnetworks.com | 1295375422 |  | MIPS: Probe for presence of KScratch registers.  Probe c0_config4 for KScratch registers and report them in /proc/cpuinfo.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1877/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | user.h | s | 2.3K | 54 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | exec.h | s | 579B | 15 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
f | termbits.h | s | 7.7K | 211 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | statfs.h | s | 1.9K | 84 | Christoph Hellwig | hch@lst.de | 1281386924 |  | add f_flags to struct statfs(64)  Add a flags field to help glibc implementing statvfs(3) efficiently.  We copy the flag values from glibc, and add a new ST_VALID flag to denote that f_flags is implemented.  Signed-off-by: Christoph Hellwig <hch@lst.de> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | sigcontext.h | s | 2.7K | 91 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466286 |  | headers_check fix: mips, sigcontext.h  fix the following 'make headers_check' warning:    usr/include/asm-mips/sigcontext.h:57: found __[us]{8,16,32,64} type without #include <linux/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | xor.h | s | 29B | 1 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | lasat |  | 7 items |  | Paul Bolle | pebolle@tiscali.nl | 1317139684 |  | doc: fix broken references  There are numerous broken references to Documentation files (in other Documentation files, in comments, etc.). These broken references are caused by typo's in the references, and by renames or removals of the Documentation files. Some broken references are simply odd.  Fix these broken references, sometimes by dropping the irrelevant text they were part of.  Signed-off-by: Paul Bolle <pebolle@tiscali.nl> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | bug.h | s | 720B | 30 | David Daney | ddaney@caviumnetworks.com | 1260033012 |  | MIPS: Convert BUG() to use unreachable()  Use the new unreachable() macro instead of while(1);  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> CC: linux-mips@linux-mips.org Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | hardirq.h | s | 544B | 15 | Christoph Hellwig | hch@lst.de | 1253210868 |  | MIPS: Convert to asm-generic/hardirq.h  Signed-off-by: Christoph Hellwig <hch@lst.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | paccess.h | s | 3.0K | 99 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | fpu_emulator.h | s | 2.0K | 58 | Ralf Baechle | ralf@linux-mips.org | 1271089568 |  | MIPS: Fix build breakage if CONFIG_DEBUG_FS is enabled.  Caused by 38b7827fcdd660f591d645bd3ae6644456a4773c - no, cpu_local_* was not unused.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Cc: Christoph Lameter <cl@linux-foundation.org> Acked-by: David Daney <ddaney@caviumnetworks.com>
f | suspend.h | s | 166B | 5 | Rafael J. Wysocki | rjw@sisk.pl | 1306272955 |  | PM / Hibernate: Remove arch_prepare_suspend()  All architectures supporting hibernation define arch_prepare_suspend() as an empty function, so remove it.  Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
f | break.h | s | 1.6K | 35 | David Daney | ddaney@caviumnetworks.com | 1281011189 |  | MIPS: kprobe: Add support.  This patch is based on previous work by Sony and Himanshu Chauhan.  I have done some cleanup and implemented JProbes and KRETPROBES.  The KRETPROBES part is pretty much copied verbatim from powerpc.  A possible future enhance might be to factor out the common code.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: Himanshu Chauhan <hschauhan@nulltrace.org> To: linux-mips@linux-mips.org To: ananth@in.ibm.com, To: anil.s.keshavamurthy@intel.com To: davem@davemloft.net To: masami.hiramatsu.pt@hitachi.com Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/1525/ Patchwork: https://patchwork.linux-mips.org/patch/1530/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | parport.h | s | 33B | 1 | Yoichi Yuasa | yuasa@linux-mips.org | 1267271607 |  | MIPS: Use generic parport.h  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Cc: linux-mips <linux-mips@linux-mips.org> Patchwork: http://patchwork.linux-mips.org/patch/958/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | futex.h | s | 5.1K | 191 | Michel Lespinasse | walken@google.com | 1299842611 |  | futex: Sanitize futex ops argument types  Change futex_atomic_op_inuser and futex_atomic_cmpxchg_inatomic prototypes to use u32 types for the futex as this is the data type the futex core code uses all over the place.  Signed-off-by: Michel Lespinasse <walken@google.com> Cc: Darren Hart <darren@dvhart.com> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Matt Turner <mattst88@gmail.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: David Howells <dhowells@redhat.com> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <20110311025058.GD26122@google.com> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | Kbuild | g | 107B |  | David Howells | dhowells@redhat.com | 1323697947 |  | UAPI: Fix arch/mips/include/asm/Kbuild to have separate header-y lines  Fix arch/mips/include/asm/Kbuild to have a separate header-y line for each header to make them easier to relocate individually as part of the UAPI header split.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org>
f | kspd.h | s | 1.0K | 31 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | rtlx.h | s | 1.4K | 49 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mmu.h | s | 143B | 7 | David Daney | ddaney@caviumnetworks.com | 1271089574 |  | MIPS: Preliminary VDSO  This is a preliminary patch to add a vdso to all user processes.  Still missing are ELF headers and .eh_frame information.  But it is enough to allow us to move signal trampolines off of the stack.  Note that emulation of branch delay slots in the FPU emulator still requires the stack.  We allocate a single page (the vdso) and write all possible signal trampolines into it.  The stack is moved down by one page and the vdso is mapped into this space.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/975/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mips_machine.h | s | 1.5K | 46 | Gabor Juhos | juhosg@openwrt.org | 1295375421 |  | MIPS: Add generic support for multiple machines within a single kernel  This patch adds a generic solution to support multiple machines based on a given SoC within a single kernel image. It is implemented already for several other architectures but MIPS has no generic support for that yet.  [Ralf: This competes with DT but DT is a much more complex solution and this code has been used by OpenWRT for a long time so for now DT is a bad reason to stop the merge but longer term this should be migrated to DT.]  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Cc: linux-mips@linux-mips.org Cc: kaloz@openwrt.org Cc: Luis R. Rodriguez <lrodriguez@atheros.com> Cc: Cliff Holden <Cliff.Holden@Atheros.com> Patchwork: https://patchwork.linux-mips.org/patch/1814/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sni.h | s | 7.5K | 217 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | addrspace.h | s | 4.1K | 131 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | posix_types.h | s | 817B | 26 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | device.h | s | 323B | 15 | David Daney | ddaney@caviumnetworks.com | 1288375711 |  | MIPS: Convert DMA to use dma-mapping-common.h  Use asm-generic/dma-mapping-common.h to handle all DMA mapping operations and establish a default get_dma_ops() that forwards all operations to the existing code.  Augment dev_archdata to carry a pointer to the struct dma_map_ops, allowing DMA operations to be overridden on a per device basis.  Currently this is never filled in, so the default dma_map_ops are used.  A follow-on patch sets this for Octeon PCI devices.  Also initialize the dma_debug system as it is now used if it is configured.  Includes fixes by Kevin Cernekee <cernekee@gmail.com>.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Patchwork: http://patchwork.linux-mips.org/patch/1637/ Patchwork: http://patchwork.linux-mips.org/patch/1678/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-sibyte |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1271089579 |  | MIPS: Sibyte: Apply M3 workaround only on affected chip types and versions.  Previously it was unconditionally used on all Sibyte family SOCs.  The M3 bug has to be handled in the TLB exception handler which is extremly performance sensitive, so this modification is expected to deliver around 2-3% performance improvment.  This is important as required changes to the M3 workaround will make it more costly.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-lasat |  | 3 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-ip32 |  | 6 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | spinlock_types.h | s | 592B | 29 | David Daney | ddaney@caviumnetworks.com | 1267271622 |  | MIPS: Optimize spinlocks.  The current locking mechanism uses a ll/sc sequence to release a spinlock.  This is slower than a wmb() followed by a store to unlock.  The branching forward to .subsection 2 on sc failure slows down the contended case.  So we get rid of that part too.  Since we are now working on naturally aligned u16 values, we can get rid of a masking operation as the LHU already does the right thing. The ANDI are reversed for better scheduling on multi-issue CPUs  On a 12 CPU 750MHz Octeon cn5750 this patch improves ipv4 UDP packet forwarding rates from 3.58*10^6 PPS to 3.99*10^6 PPS, or about 11%.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/937/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-ip22 |  | 3 items |  | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1224071211 |  | MIPS: IP22/28: Switch over to RTC class driver  This patchset removes some dead code and creates a platform device for the RTC class driver.  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | titan_dep.h | s | 7.6K | 200 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | atomic.h | s | 17K | 678 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
f | uasm.h | s | 7.9K | 223 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337096931 |  | MIPS: Don't use module.h just to export symbols in asm/uasm.h  Putting module.h into widely used headers just bogs cpp down with reams of stuff that isn't needed.  Here, we only need visibility to EXPORT_SYMBOL.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3450/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | spram.h | s | 217B | 8 | Chris Dearman | chris@mips.com | 1257159605 |  | MIPS: SPRAM: Clean up support code a little  Signed-off-by: Chris Dearman <chris@mips.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | linkage.h | s | 143B | 7 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | hazards.h | s | 5.8K | 245 | Kevin Cernekee | cernekee@gmail.com | 1323295397 |  | MIPS: BMIPS: Add CFLAGS, Makefile entries for BMIPS  Add CONFIG_CPU_BMIPS* in all of the right places, so that BMIPS kernel images will compile and run.  Signed-off-by: Kevin Cernekee <cernekee@gmail.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2955/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | local.h | s | 4.9K | 169 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tlbflush.h | s | 1.6K | 39 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mutex.h | s | 308B | 8 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-netlogic |  | 3 items |  | Jayachandran C | jayachandranc@netlogicmicro.com | 1323295495 |  | MIPS: Netlogic: XLP CPU support.  Add support for Netlogic's XLP MIPS SoC. This patch adds: * XLP processor ID in cpu_probe.c and asm/cpu.h * XLP case to asm/module.h * CPU_XLP case to mm/tlbex.c * minor change to r4k cache handling to ignore XLP secondary cache * XLP cpu overrides to mach-netlogic/cpu-feature-overrides.h  Signed-off-by: Jayachandran C <jayachandranc@netlogicmicro.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2966/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | hugetlb.h | s | 2.5K | 95 | Hillf Danton | dhillf@gmail.com | 1323295425 |  | MIPS: Hugetlb: Keep TLB cache hot while flushing  If we only flush the TLB of the given huge page, the TLB cache remains hot for the relevant mm as it is, and less will be refilled after flush, huge or not.  Signed-off-by: Hillf Danton <dhillf@gmail.com> Cc: linux-mips@linux-mips.org Acked-by: David Daney <david.daney@cavium.com> Patchwork: https://patchwork.linux-mips.org/patch/2860/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | perf_event.h | s | 482B | 14 | Deng-Cheng Zhu | dengcheng.zhu@gmail.com | 1300133246 |  | MIPS, Perf-events: Work with irq_work  This is the MIPS part of the following commit by Peter Zijlstra:  - e360adbe29241a0194e10e20595360dd7b98a2b3     irq_work: Add generic hardirq context callbacks      Provide a mechanism that allows running code in IRQ context. It is     most useful for NMI code that needs to interact with the rest of the     system -- like wakeup a task to drain buffers.      Perf currently has such a mechanism, so extract that and provide it as     a generic feature, independent of perf so that others may also     benefit.      The IRQ context callback is generated through self-IPIs where     possible, or on architectures like powerpc the decrementer (the     built-in timer facility) is set to generate an interrupt immediately.      Architectures that don't have anything like this get to do with a     callback from the timer tick. These architectures can call     irq_work_run() at the tail of any IRQ handlers that might enqueue such     work (like the perf IRQ handler) to avoid undue latencies in     processing the work.  For MIPSXX, we need to call irq_work_run() at the tail of the perf IRQ handler as described above.  Reported-by: Wu Zhangjin <wuzhangjin@gmail.com> Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Acked-by: David Daney <ddaney@caviumnetworks.com> Signed-off-by: Deng-Cheng Zhu <dengcheng.zhu@gmail.com> To: fweisbec@gmail.com To: will.deacon@arm.com Cc: linux-mips@linux-mips.org Cc: linux-kernel@vger.kernel.org Cc: paulus@samba.org Cc: mingo@elte.hu Cc: acme@redhat.com Cc: matt@console-pimps.org Cc: sshtylyov@mvista.com, Patchwork: http://patchwork.linux-mips.org/patch/2011/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | irq_cpu.h | s | 561B | 18 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | irqflags.h | s | 6.6K | 265 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | asmmacro-32.h | s | 4.7K | 150 | Justin P. Mattock | justinmattock@gmail.com | 1302095978 |  | update David Miller's old email address  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | vpe.h | s | 1.1K | 30 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | kexec.h | s | 853B | 24 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | unistd.h | s | 43K | 1068 | David Daney | david.daney@cavium.com | 1320797276 |  | MIPS: Hook up process_vm_readv and process_vm_writev system calls.  Signed-off-by: David Daney <david.daney@cavium.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2918/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | dsp.h | s | 1.9K | 74 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | topology.h | s | 398B | 14 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-emma2rh |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | sibyte |  | 24 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | smtc.h | s | 1.6K | 57 | Ralf Baechle | ralf@linux-mips.org | 1311199930 |  | MIPS: SMTC: Fix build.  Commit ee6114202e48dc282c6d04741e9c5d7171eb8bb8 (lmo) rsp. 1685f3b158a244d4f6e205e67c84483fffcb2d9f (kernel.org) ["MIPS: SMTC: Move declaration of smtc_init_secondary to <asm/smtc.h>."] didn't quite do that - it rather lost the declaration of smtc_init_secondary resulting in a build error.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cmp.h | s | 486B | 15 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | string.h | s | 3.0K | 122 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | module.h | s | 4.1K | 126 | Paul Gortmaker | paul.gortmaker@windriver.com | 1337096931 |  | MIPS: Delete bogus module.h usage in termios.h  There is no need for this.  Removing it causes a small amount of fallout (shown below) due to a few implicit header presence assumptions that are easily fixed.  arch/mips/include/asm/termios.h:103: error: implicit declaration of function 'access_ok' arch/mips/include/asm/module.h:17: error: expected specifier-qualifier-list before 'Elf64_Addr'  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3449/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-jz4740 |  | 12 items |  | Antony Pavlov | antonynpavlov@gmail.com | 1335481968 |  | MIPS: JZ4740: Fix the JZ4740_IRQ_DMA macro  Signed-off-by: Antony Pavlov <antonynpavlov@gmail.com> Cc: Lars-Peter Clausen <lars@metafoo.de> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3459/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ioctl.h | s | 718B | 23 | Ralf Baechle | ralf@linux-mips.org | 1245233188 |  | MIPS: ioctl.h: Cleanup.   o Rewrite to use <asm-generic/ioctl.h>.  Cuts down the file from 40 to    16 lines.  o Delete _IOC_VOID, _IOC_OUT, _IOC_IN and _IOC_INOUT.  They were added    for 2.1.14 but I was not able to find any user - not even historical    ones.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | txx9irq.h | s | 738B | 29 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-cavium-octeon |  | 5 items |  | David Daney | david.daney@cavium.com | 1316821481 |  | MIPS: Octeon: Enable C0_UserLocal probing.  Octeon2 processor cores have a UserLocal register.  Remove the hard coded negative probe and allow the standard probing to detect this feature.  Signed-off-by: David Daney <david.daney@cavium.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2578/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-pnx833x |  | 5 items |  | Ralf Baechle | ralf@linux-mips.org | 1267271594 |  | MIPS: Nuke trailing blank lines  Recent git versions now warn about those and they've always been a bit of an annoyance.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ds1287.h | s | 1019B | 25 | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-dec |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | processor.h | s | 9.7K | 302 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
d | pci |  | 1 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | poll.h | s | 154B | 6 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | m48t37.h | s | 696B | 30 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | page.h | s | 6.1K | 181 | Ralf Baechle | ralf@linux-mips.org | 1329759198 |  | MIPS: Remove temporary kludge from <asm/page.h>  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gio_device.h | s | 1.6K | 44 | Thomas Bogendoerfer | tsbogend@alpha.franken.de | 1323295424 |  | MIPS: GIO bus support for SGI IP22/28  SGI IP22/IP28 machines have GIO busses for adding graphics and other extension cards. This patch adds support for GIO driver/device handling and converts the newport console driver to a GIO driver.  [ralf@linux-mips.org: Fixed build error caused by the modules.h -> export.h changes.]  Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de> Acked-by: Florian Tobias Schandinat <FlorianSchandinat@gmx.de> To: linux-fbdev@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/2886/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | txx9tmr.h | s | 1.6K | 58 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | percpu.h | s | 108B | 4 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cmpxchg.h | s | 5.6K | 217 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
f | div64.h | s | 1.6K | 61 | Ralf Baechle | ralf@linux-mips.org | 1242305429 |  | MIPS: Rewrite <asm/div64.h> to work with gcc 4.4.0.  The inline assembler used on 32-bit kernels was using the "h" constraint which was considered dangerous and removed for gcc 4.4.0.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-tx39xx |  | 4 items |  | Kevin Cernekee | cernekee@gmail.com | 1311611213 |  | MIPS: Move FIXADDR_TOP into spaces.h  Memory maps and addressing quirks are normally defined in <spaces.h>. There are already three targets that need to override FIXADDR_TOP, and others exist.  This will be a cleaner approach than adding lots of ifdefs in fixmap.h .  Signed-off-by: Kevin Cernekee <cernekee@gmail.com> Cc: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Cc: linux-mips@linux-mips.org Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/1573/ Acked-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mipsmtregs.h | s | 10K | 328 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | highmem.h | s | 1.7K | 50 | Cong Wang | amwang@redhat.com | 1332251310 |  | highmem: kill all __kmap_atomic() [swarren@nvidia.com: highmem: Fix ARM build break due to __kmap_atomic rename]  Signed-off-by: Stephen Warren <swarren@nvidia.com> Signed-off-by: Cong Wang <amwang@redhat.com>
f | cop2.h | s | 808B | 30 | David Daney | ddaney@caviumnetworks.com | 1286213640 |  | MIPS: Don't place cu2 notifiers in __cpuinitdata  The notifiers may be called at any time, so the notifier_block cannot be in init memory.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1592/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | i8259.h | s | 2.2K | 72 | Ralf Baechle | ralf@linux-mips.org | 1267271618 |  | MIPS: i8259: Convert IRQ controller lock to raw spinlock.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | auxvec.h | s | 72B | 3 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | emma |  | 2 items |  | Shinya Kuribayashi | shinya.kuribayashi.px@renesas.com | 1281011164 |  | MIPS: EMMA2RH: Replace EMMA2RH_SW_IRQ_INTxx with EMMA2RH_SW_IRQ(n)  Don't duplicate worthless lines.  Signed-off-by: Shinya Kuribayashi <shinya.kuribayashi.px@renesas.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1390/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cevt-r4k.h | s | 1.4K | 41 | Ralf Baechle | ralf@linux-mips.org | 1305047724 |  | MIPS: MSP: Fix build error  Reported and original patch by Yoichi Yuasa <yuasa@linux-mips.org>.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | param.h | s | 413B | 13 | Robert P. J. Day | rpjday@crashcourse.ca | 1267271584 |  | MIPS: Simplify param.h by using <asm-generic/param.h>  Signed-off-by: Robert P. J. Day <rpjday@crashcourse.ca> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/810/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-wrppmc |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pgalloc.h | s | 2.9K | 104 | David Daney | ddaney@caviumnetworks.com | 1267271583 |  | MIPS: Two-level pagetables for 64-bit kernels with 64KB pages.  For 64-bit kernels with 64KB pages and two level page tables, there are 42 bits worth of virtual address space This is larger than the 40 bits of virtual address space obtained with the default 4KB Page size and three levels, so there are no draw backs for using two level tables with this configuration.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/761/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | branch.h | s | 951B | 34 | Maneesh Soni | manesoni@cisco.com | 1323295443 |  | MIPS Kprobes: Refactor branch emulation  This patch refactors MIPS branch emulation code so as to allow skipping delay slot instruction in case of branch likely instructions when branch is not taken. This is useful for keeping the code common for use cases like kprobes where one would like to handle the branch instructions keeping the delay slot instuction also in picture for branch likely instructions. Also allow emulation when instruction to be decoded is not at pt_regs->cp0_epc as in case of kprobes where pt_regs->cp0_epc points to the breakpoint instruction.  The patch also exports the function for modules.  Signed-off-by: Maneesh Soni <manesoni@cisco.com> Signed-off-by: Victor Kamensky <kamensky@cisco.com> Cc: David Daney <david.daney@cavium.com> Cc: ananth@in.ibm.com Cc: linux-kernel@vger.kernel.org Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2913/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gpio.h | s | 103B | 4 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | jazz.h | s | 8.6K | 265 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | scatterlist.h | s | 128B | 4 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | time.h | s | 2.3K | 80 | John Stultz | johnstul@us.ibm.com | 1298324030 |  | mips: convert to clocksource_register_hz/khz  This converts the mips clocksources to use clocksource_register_hz/khz  CC: Ralf Baechle <ralf@linux-mips.org> CC: Thomas Gleixner <tglx@linutronix.de> Signed-off-by: John Stultz <johnstul@us.ibm.com>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | r4k-timer.h | s | 592B | 22 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fcntl.h | s | 2.2K | 65 | Namhyung Kim | namhyung@gmail.com | 1287417544 |  | MIPS: 32-bit: Fix build failure in asm/fcntl.h    CC      security/integrity/ima/ima_fs.o In file included from linux/include/linux/fcntl.h:4:0,                  from linux/security/integrity/ima/ima_fs.c:18: linux/arch/mips/include/asm/fcntl.h:63:2: error: expected specifier-qualifier-list before 'off_t' make[3]: *** [security/integrity/ima/ima_fs.o] Error 1 make[2]: *** [security/integrity/ima/ima_fs.o] Error 2 make[1]: *** [sub-make] Error 2 make: *** [all] Error 2  Signed-off-by: Namhyung Kim <namhyung@gmail.com> Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/1715/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sgialib.h | s | 2.3K | 60 | Justin P. Mattock | justinmattock@gmail.com | 1302095978 |  | update David Miller's old email address  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Acked-by: David S. Miller <davem@davemloft.net> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | swab.h | s | 1.1K | 50 | David Daney | ddaney@caviumnetworks.com | 1246632325 |  | MIPS: Define __arch_swab64 for all mips r2 cpus  Some CPUs implement mipsr2, but because they are a super-set of mips64r2 do not define CONFIG_CPU_MIPS64_R2.  Cavium OCTEON falls into this category. We would still like to use the optimized implementation, so since we have already checked for CONFIG_CPU_MIPSR2, checking for CONFIG_64BIT instead of CONFIG_CPU_MIPS64_R2 is sufficient.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fb.h | s | 372B | 15 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-ath79 |  | 11 items |  | Gabor Juhos | juhosg@openwrt.org | 1337096951 |  | MIPS: ath79: add PCI_AR724X Kconfig symbol  The AR724X specific PCI code can be used for the AR934X SoCs, however it can be selected only if SOC_AR724X is set.  Introduce a new Kconfig symbol in order to be able to use the code for AR934X as well.  Signed-off-by: Gabor Juhos <juhosg@openwrt.org> Acked-by: Luis R. Rodriguez <mcgrof@qca.qualcomm.com> Cc: linux-mips@linux-mips.org Cc: mcgrof@infradead.org Patchwork: https://patchwork.linux-mips.org/patch/3514/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | thread_info.h | s | 4.8K | 127 | Thomas Gleixner | tglx@linutronix.de | 1336478925 |  | mips: Use common threadinfo allocator  No point in using kmalloc for allocating 0, 1 resp. 2 pages for threadinfo.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Ralf Baechle <ralf@linux-mips.org> Link: http://lkml.kernel.org/r/20120505150141.936950979@linutronix.de
f | irq.h | s | 3.6K | 110 | Grant Likely | grant.likely@secretlab.ca | 1330102043 |  | irq_domain/mips: Allow irq_domain on MIPS  This patch makes IRQ_DOMAIN usable on MIPS.  It uses an ugly workaround to preserve current behaviour so that MIPS has time to add irq_domain registration to the irq controller drivers.  The workaround will be removed in Linux v3.6  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Rob Herring <rob.herring@calxeda.com> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: linux-mips@linux-mips.org
f | stackframe.h | s | 13K | 583 | David Daney | david.daney@cavium.com | 1316620442 |  | MIPS: Don't clobber CP0_STATUS value for CONFIG_MIPS_MT_SMTC  Reported-by: Edgar E. Iglesias <edgar.iglesias@gmail.com> Signed-off-by: David Daney <david.daney@cavium.com> Patchwork: https://patchwork.linux-mips.org/patch/2753/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | socket.h | s | 3.7K | 108 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | pgtable.h | s | 11K | 362 | Jian Peng | jipeng2005@gmail.com | 1311611211 |  | MIPS: topdown mmap support  This patch introduced topdown mmap support in user process address space allocation policy.  Recently, we ran some large applications that use mmap heavily and lead to OOM due to inflexible mmap allocation policy on MIPS32.  Since most other major archs supported it for years, it is reasonable to follow the trend and reduce the pain of porting applications.  Due to cache aliasing concern, arch_get_unmapped_area_topdown() and other helper functions are implemented in arch/mips/kernel/syscall.c.  Signed-off-by: Jian Peng <jipeng2005@gmail.com> Cc: David Daney <ddaney@caviumnetworks.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2389/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ipcbuf.h | s | 32B | 1 | Al Viro | viro@zeniv.linux.org.uk | 1325649318 |  | consolidate a bunch of ipcbuf.h instances  ... some still remain weird :-/  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | timex.h | s | 1.0K | 35 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cpu-features.h | s | 7.5K | 236 | Ralf Baechle | ralf@linux-mips.org | 1281011161 |  | MIPS: Update comment for cpu_has_clo_clz  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | vr41xx |  | 10 items |  | Yoichi Yuasa | yuasa@linux-mips.org | 1246632329 |  | Update Yoichi Yuasa's e-mail address  Signed-off-by: Yoichi Yuasa <yuasa@linux-mips.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sysmips.h | s | 832B | 23 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | asm.h | s | 9.3K | 369 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-malta |  | 6 items |  | Shinya Kuribayashi | skuribay@pobox.com | 1311611215 |  | MIPS: Enable cpu_has_clo_clz for MIPS Technologies' platforms  Enable cpu_has_clo_clz only when CONFIG_CPU_MIPS32 or CONFIG_CPU_MIPS64 is selected.  This will optimize fls() and __fls() to use CLZ insn, and eventually ffs() and __ffs() as well.  Malta and MIPSSim are development platforms, and need to take care of various processor configurations, release rivisions and so on, even across different MIPS ISAs.  For such platforms we have to be careful, for instance, with turning on cpu_has_mips{32,64}r[12] features.  As for CLZ, all MIPS32/64 processors support it, regardless of release revisions.  Signed-off-by: Shinya Kuribayashi <skuribay@pobox.com> To: David VomLehn <dvomlehn@cisco.com> To: macro@linux-mips.org Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1453/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | fpu.h | s | 2.8K | 122 | Ralf Baechle | ralf@linux-mips.org | 1261015052 |  | MIPS: Cleanup signal code initialization  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Cc: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/709/
f | stat.h | s | 2.8K | 100 | Al Viro | viro@zeniv.linux.org.uk | 1338348522 |  | mips: get rid of nlink_t, use explictly-sized type (__u32 in all cases)  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | clkdev.h | s | 603B | 21 | John Crispin | blogic@openwrt.org | 1337096960 |  | MIPS: add clkdev.h  For clock device lookup tables to work on MIPS, we need to provide this architecture specific header file.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3700/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | inst.h | s | 10.0K | 364 | David Daney | ddaney@caviumnetworks.com | 1295375423 |  | MIPS: Add LDX and LWX instructions to uasm.  Needed by Octeon II optimized TLB handlers.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Pachwork: https://patchwork.linux-mips.org/patch/1903/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mipsprom.h | s | 2.1K | 65 | Ralf Baechle | ralf@linux-mips.org | 1319119218 |  | MIPS: SNI: Fix conflicting wrapper symbols for headers.  If Open Firmware / Device Tree support is enabled on a SNI RM kernel both <asm/mipsprom.h> and <asm/prom.h> will be included into some .c files. Since both headers use the same wrapper symbol only the inclusion of the first file will have an effect but the 2nd file will be ignored resulting in a build error.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | nile4.h | s | 10K | 248 | Ralf Baechle | ralf@linux-mips.org | 1267271594 |  | MIPS: Nuke trailing blank lines  Recent git versions now warn about those and they've always been a bit of an annoyance.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | shmbuf.h | s | 1.0K | 34 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-ar7 |  | 6 items |  | Florian Fainelli | florian@openwrt.org | 1292523056 |  | MIPS: AR7: Fix loops per jiffies on TNETD7200 devices  TNETD7200 run their CPU clock faster than the default CPU clock we assume. In order to have the correct loops per jiffies settings, initialize clocks right before setting mips_hpt_frequency. As a side effect, we can no longer use msleep in clocks.c which requires other parts of the kernel to be initialized, so replace these with mdelay.  Signed-off-by: Florian Fainelli <florian@openwrt.org> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1749/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gcmpregs.h | s | 5.6K | 114 | Chris Dearman | chris@mips.com | 1257159606 |  | MIPS: GIC: Random fixes and enhancements.  Signed-off-by: Chris Dearman <chris@mips.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-pnx8550 |  | 9 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | switch_to.h | s | 2.6K | 73 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
d | mach-db1x00 |  | 4 items |  | Manuel Lauss | manuel.lauss@googlemail.com | 1323340935 |  | MIPS: Alchemy: remove unused board headers  The information in those headers is no longer necessary.  Signed-off-by: Manuel Lauss <manuel.lauss@googlemail.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2876/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-generic |  | 13 items |  | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | prefetch.h | s | 2.1K | 72 | Shinya Kuribayashi | shinya.kuribayashi@necel.com | 1236802267 |  | MIPS: NEC VR5500 processor support fixup  Current VR5500 processor support lacks of some functions which are expected to be configured/synthesized on arch initialization.  Here're some VR5500A spec notes:  * All execution hazards are handled in hardware.  * Once VR5500A stops the operation of the pipeline by WAIT instruction,   it could return from the standby mode only when either a reset, NMI   request, or all enabled interrupts is/are detected.  In other words,   if interrupts are disabled by Status.IE=0, it keeps in standby mode   even when interrupts are internally asserted.    Notes on WAIT: The operation of the processor is undefined if WAIT   insn is in the branch delay slot.  The operation is also undefined   if WAIT insn is executed when Status.EXL and Status.ERL are set to 1.  * VR5500A core only implements the Load prefetch.  With these changes, it boots fine.  Signed-off-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cacheops.h | s | 2.2K | 80 | Ricardo Mendoza | ricmm@gentoo.org | 1281011166 |  | MIPS: RM7000: Add support for tertiary cache  Add support for the external T-cache interface. Allow for platform independent size probing from 512KB to 8MB in powers of two.  Signed-off-by: Ricardo Mendoza <ricmm@gentoo.org> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1477/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-au1x00 |  | 17 items |  | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for MIPS  Disintegrate asm/system.h for MIPS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> cc: linux-mips@linux-mips.org
f | uaccess.h | s | 32K | 1050 | David Daney | ddaney@caviumnetworks.com | 1288375733 |  | MIPS: Make TASK_SIZE reflect proper size for both 32 and 64 bit processes.  The TASK_SIZE macro should reflect the size of a user process virtual address space.  Previously for 64-bit kernels, this was not the case. The immediate cause of pain was in hugetlbfs/inode.c:hugetlb_get_unmapped_area() where 32-bit processes trying to mmap a huge page would be served a page with an address outside of the 32-bit address range.  But there are other uses of TASK_SIZE in the kernel as well that would like an accurate value.  The new definition is nice because it now makes TASK_SIZE and TASK_SIZE_OF() yield the same value for any given process.  For 32-bit kernels there should be no change, although I did factor out some code in asm/processor.h that became identical for the 32-bit and 64-bit cases.  __UA_LIMIT is now set to ~((1 << SEGBITS) - 1) for 64-bit kernels. This should eliminate the possibility of getting a AddressErrorException in the kernel for addresses that pass the access_ok() test.  With the patch applied, I can still run o32, n32 and n64 processes, and have an o32 shell fork/exec both n32 and n64 processes.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1701/
f | mc146818-time.h | s | 3.7K | 103 | Stephen Hemminger | shemminger@vyatta.com | 1294934587 |  | set_rtc_mmss: show warning message only once  Occasionally the system gets into a state where the CMOS clock has gotten slightly ahead of current time and the periodic update of RTC fails.  The message is a nuisance and repeats spamming the log.    See: http://www.ntp.org/ntpfaq/NTP-s-trbl-spec.htm#Q-LINUX-SET-RTC-MMSS  Rather than just removing the message, make it show only once and reduce severity since it indicates a normal and non urgent condition.  Signed-off-by: Stephen Hemminger <shemminger@vyatta.com> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Ingo Molnar <mingo@elte.hu> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Thomas Gleixner <tglx@linutronix.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | vga.h | s | 1.0K | 37 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mman.h | s | 3.6K | 77 | Jason Baron | jbaron@redhat.com | 1332547122 |  | coredump: add VM_NODUMP, MADV_NODUMP, MADV_CLEAR_NODUMP  Since we no longer need the VM_ALWAYSDUMP flag, let's use the freed bit for 'VM_NODUMP' flag.  The idea is is to add a new madvise() flag: MADV_DONTDUMP, which can be set by applications to specifically request memory regions which should not dump core.  The specific application I have in mind is qemu: we can add a flag there that wouldn't dump all of guest memory when qemu dumps core.  This flag might also be useful for security sensitive apps that want to absolutely make sure that parts of memory are not dumped.  To clear the flag use: MADV_DODUMP.  [akpm@linux-foundation.org: s/MADV_NODUMP/MADV_DONTDUMP/, s/MADV_CLEAR_NODUMP/MADV_DODUMP/, per Roland] [akpm@linux-foundation.org: fix up the architectures which broke] Signed-off-by: Jason Baron <jbaron@redhat.com> Acked-by: Roland McGrath <roland@hack.frob.com> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Avi Kivity <avi@redhat.com> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | smp-ops.h | s | 1.9K | 77 | Ralf Baechle | ralf@linux-mips.org | 1311199931 |  | MIPS: ARC: Fix build of firmware library on uniprocessor.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | signal.h | s | 4.2K | 116 | Arnd Bergmann | arnd@arndb.de | 1244746912 |  | asm-generic: rename termios.h, signal.h and mman.h  The existing asm-generic versions are incomplete and included by some architectures. New architectures should be able to use a generic version, so rename the existing files and change all users, which lets us add the new files.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | pmon.h | s | 1.6K | 42 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-bcm63xx |  | 22 items |  | Jonas Gorski | jonas.gorski@gmail.com | 1337096872 |  | MIPS: BCM63XX: Add missing include for bcm63xx_gpio.h  bcm63xx_gpio.h uses macros defined in bcm63xx_cpu.h without including it, leading to the following build failure:    CC [M]  drivers/mmc/core/cd-gpio.o In file included from arch/mips/include/asm/mach-bcm63xx/gpio.h:4:0,                  from arch/mips/include/asm/gpio.h:4,                  from include/linux/gpio.h:30,                  from drivers/mmc/core/cd-gpio.c:12:  arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h: In function 'bcm63xx_gpio_count': arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:10:2: error: implicit declaration of function 'bcm63xx_get_cpu_id' arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:11:7: error: 'BCM6358_CPU_ID' undeclared (first use in this function) arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:11:7: note: each undeclared identifier is reported only once for each function it appears in arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:13:7: error: 'BCM6338_CPU_ID' undeclared (first use in this function) arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:15:7: error: 'BCM6345_CPU_ID' undeclared (first use in this function) arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:17:7: error: 'BCM6368_CPU_ID' undeclared (first use in this function) arch/mips/include/asm/mach-bcm63xx/bcm63xx_gpio.h:19:7: error: 'BCM6348_CPU_ID' undeclared (first use in this function)  make[7]: *** [drivers/mmc/core/cd-gpio.o] Error 1  Signed-off-by: Jonas Gorski <jonas.gorski@gmail.com> Cc: stable@vger.kernel.org Cc: linux-mips@linux-mips.org Cc: Maxime Bizon <mbizon@freebox.fr> Cc: Florian Fainelli <florian@openwrt.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | kgdb.h | s | 1.2K | 35 | Jason Wessel | jason.wessel@windriver.com | 1281018141 |  | kgdb,mips: Individual register get/set for mips  Implement the ability to individually get and set registers for kdb and kgdb for mips.  Signed-off-by: Jason Wessel <jason.wessel@windriver.com> Acked-by: Ralf Baechle <ralf@linux-mips.org> CC: linux-mips@linux-mips.org
f | emergency-restart.h | s | 149B | 4 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | msgbuf.h | s | 1.5K | 43 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-tx49xx |  | 6 items |  | Kevin Cernekee | cernekee@gmail.com | 1311611213 |  | MIPS: Move FIXADDR_TOP into spaces.h  Memory maps and addressing quirks are normally defined in <spaces.h>. There are already three targets that need to override FIXADDR_TOP, and others exist.  This will be a cleaner approach than adding lots of ifdefs in fixmap.h .  Signed-off-by: Kevin Cernekee <cernekee@gmail.com> Cc: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Cc: linux-mips@linux-mips.org Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/1573/ Acked-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | dec |  | 16 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | msc01_ic.h | s | 6.8K | 135 | Ralf Baechle | ralf@linux-mips.org | 1267271594 |  | MIPS: Nuke trailing blank lines  Recent git versions now warn about those and they've always been a bit of an annoyance.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | sockios.h | s | 698B | 21 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | spinlock.h | s | 11K | 417 | Ralf Baechle | ralf@linux-mips.org | 1301075113 |  | MIPS: Microoptimize arch_{read,write}_lock  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | shmparam.h | s | 352B | 10 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mach-yosemite |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | fw |  | 2 items |  | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
d | mips-boards |  | 10 items |  | John Crispin | blogic@openwrt.org | 1337096960 |  | MIPS: remove unused prototype kgdb_config  Trivial fix that removes an orphaned prototype.  Signed-off-by: John Crispin <blogic@openwrt.org> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/3701/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | abi.h | s | 905B | 24 | David Daney | ddaney@caviumnetworks.com | 1271089575 |  | MIPS: Move signal trampolines off of the stack.  This is a follow on to the vdso patch.  Since all processes now have signal trampolines permanently mapped, we can use those instead of putting the trampoline on the stack and invalidating the corresponding icache across all CPUs.  We also get rid of a bunch of ICACHE_REFILLS_WORKAROUND_WAR code.  [Ralf: GDB 7.1 which has the necessary modifications to allow backtracing over signal frames will supposedly be released tomorrow.  The old signal frame format obsoleted by this patch exists in two variations, for sane processors and for those requiring ICACHE_REFILLS_WORKAROUND_WAR.  So there was never a GDB which did support backtracing over signal frames on all MIPS systems.  This convinved me this series should be applied and pushed upstream as soon as possible.]  Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/974/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | byteorder.h | s | 517B | 17 | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | ip32 |  | 3 items |  | Joshua Kinard | kumba@gentoo.org | 1325009854 |  | net: meth: Add set_rx_mode hook to fix ICMPv6 neighbor discovery  SGI IP32 (O2)'s ethernet driver (meth) lacks a set_rx_mode function, which prevents IPv6 from working completely because any ICMPv6 neighbor solicitation requests aren't picked up by the driver.  So the machine can ping out and connect to other systems, but other systems will have a very hard time connecting to the O2.  Signed-off-by: Joshua Kinard <kumba@gentoo.org> Signed-off-by: David S. Miller <davem@davemloft.net>
f | sembuf.h | s | 603B | 19 | Ralf Baechle | ralf@linux-mips.org | 1223738332 |  | MIPS: Move headfiles to new location below arch/mips/include  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
