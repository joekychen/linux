<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › emma › emma2rh.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>emma2rh.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  Copyright (C) NEC Electronics Corporation 2005-2006</span>
<span class="cm"> *</span>
<span class="cm"> *  This file based on include/asm-mips/ddb5xxx/ddb5xxx.h</span>
<span class="cm"> *          Copyright 2001 MontaVista Software Inc.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute it and/or modify</span>
<span class="cm"> *  it under the terms of the GNU General Public License as published by</span>
<span class="cm"> *  the Free Software Foundation; either version 2 of the License, or</span>
<span class="cm"> *  (at your option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is distributed in the hope that it will be useful,</span>
<span class="cm"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm"> *  GNU General Public License for more details.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License</span>
<span class="cm"> *  along with this program; if not, write to the Free Software</span>
<span class="cm"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ASM_EMMA_EMMA2RH_H</span>
<span class="cp">#define __ASM_EMMA_EMMA2RH_H</span>

<span class="cp">#include &lt;irq.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * EMMA2RH registers</span>
<span class="cm"> */</span>
<span class="cp">#define REGBASE 0x10000000</span>

<span class="cp">#define EMMA2RH_BHIF_STRAP_0	(0x000010+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT_ST_0	(0x000030+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT_ST_1	(0x000034+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT_ST_2	(0x000038+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT_EN_0	(0x000040+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT_EN_1	(0x000044+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT_EN_2	(0x000048+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT1_EN_0	(0x000050+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT1_EN_1	(0x000054+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_INT1_EN_2	(0x000058+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_SW_INT	(0x000070+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_SW_INT_EN	(0x000080+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_SW_INT_CLR	(0x000090+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_MAIN_CTRL	(0x0000b4+REGBASE)</span>
<span class="cp">#define EMMA2RH_BHIF_EXCEPT_VECT_BASE_ADDRESS	(0x0000c0+REGBASE)</span>
<span class="cp">#define EMMA2RH_GPIO_DIR	(0x110d20+REGBASE)</span>
<span class="cp">#define EMMA2RH_GPIO_INT_ST	(0x110d30+REGBASE)</span>
<span class="cp">#define EMMA2RH_GPIO_INT_MASK	(0x110d3c+REGBASE)</span>
<span class="cp">#define EMMA2RH_GPIO_INT_MODE	(0x110d48+REGBASE)</span>
<span class="cp">#define EMMA2RH_GPIO_INT_CND_A	(0x110d54+REGBASE)</span>
<span class="cp">#define EMMA2RH_GPIO_INT_CND_B	(0x110d60+REGBASE)</span>
<span class="cp">#define EMMA2RH_PBRD_INT_EN	(0x100010+REGBASE)</span>
<span class="cp">#define EMMA2RH_PBRD_CLKSEL	(0x100028+REGBASE)</span>
<span class="cp">#define EMMA2RH_PFUR0_BASE	(0x101000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PFUR1_BASE	(0x102000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PFUR2_BASE	(0x103000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PIIC0_BASE	(0x107000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PIIC1_BASE	(0x108000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PIIC2_BASE	(0x109000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_CONTROL	(0x200000+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_ARBIT_CTR	(0x200004+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_IWIN0_CTR	(0x200010+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_IWIN1_CTR	(0x200014+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_INIT_ESWP	(0x200018+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_INT		(0x200020+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_INT_EN	(0x200024+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_TWIN_CTR	(0x200030+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_TWIN_BADR	(0x200034+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_TWIN0_DADR	(0x200038+REGBASE)</span>
<span class="cp">#define EMMA2RH_PCI_TWIN1_DADR	(0x20003c+REGBASE)</span>

<span class="cm">/*</span>
<span class="cm"> *  Memory map (physical address)</span>
<span class="cm"> *</span>
<span class="cm"> *  Note most of the following address must be properly aligned by the</span>
<span class="cm"> *  corresponding size.  For example, if PCI_IO_SIZE is 16MB, then</span>
<span class="cm"> *  PCI_IO_BASE must be aligned along 16MB boundary.</span>
<span class="cm"> */</span>

<span class="cm">/* the actual ram size is detected at run-time */</span>
<span class="cp">#define EMMA2RH_RAM_BASE	0x00000000</span>
<span class="cp">#define EMMA2RH_RAM_SIZE	0x10000000	</span><span class="cm">/* less than 256MB */</span><span class="cp"></span>

<span class="cp">#define EMMA2RH_IO_BASE		0x10000000</span>
<span class="cp">#define EMMA2RH_IO_SIZE		0x01000000	</span><span class="cm">/* 16 MB */</span><span class="cp"></span>

<span class="cp">#define EMMA2RH_GENERALIO_BASE	0x11000000</span>
<span class="cp">#define EMMA2RH_GENERALIO_SIZE	0x01000000	</span><span class="cm">/* 16 MB */</span><span class="cp"></span>

<span class="cp">#define EMMA2RH_PCI_IO_BASE	0x12000000</span>
<span class="cp">#define EMMA2RH_PCI_IO_SIZE	0x02000000	</span><span class="cm">/* 32 MB */</span><span class="cp"></span>

<span class="cp">#define EMMA2RH_PCI_MEM_BASE	0x14000000</span>
<span class="cp">#define EMMA2RH_PCI_MEM_SIZE	0x08000000	</span><span class="cm">/* 128 MB */</span><span class="cp"></span>

<span class="cp">#define EMMA2RH_ROM_BASE	0x1c000000</span>
<span class="cp">#define EMMA2RH_ROM_SIZE	0x04000000	</span><span class="cm">/* 64 MB */</span><span class="cp"></span>

<span class="cp">#define EMMA2RH_PCI_CONFIG_BASE	EMMA2RH_PCI_IO_BASE</span>
<span class="cp">#define EMMA2RH_PCI_CONFIG_SIZE	EMMA2RH_PCI_IO_SIZE</span>

<span class="cp">#define NUM_EMMA2RH_IRQ		96</span>

<span class="cp">#define EMMA2RH_IRQ_BASE	(MIPS_CPU_IRQ_BASE + 8)</span>

<span class="cm">/*</span>
<span class="cm"> * emma2rh irq defs</span>
<span class="cm"> */</span>

<span class="cp">#define EMMA2RH_IRQ_INT(n)	(EMMA2RH_IRQ_BASE + (n))</span>

<span class="cp">#define EMMA2RH_IRQ_PFUR0	EMMA2RH_IRQ_INT(49)</span>
<span class="cp">#define EMMA2RH_IRQ_PFUR1	EMMA2RH_IRQ_INT(50)</span>
<span class="cp">#define EMMA2RH_IRQ_PFUR2	EMMA2RH_IRQ_INT(51)</span>
<span class="cp">#define EMMA2RH_IRQ_PIIC0	EMMA2RH_IRQ_INT(56)</span>
<span class="cp">#define EMMA2RH_IRQ_PIIC1	EMMA2RH_IRQ_INT(57)</span>
<span class="cp">#define EMMA2RH_IRQ_PIIC2	EMMA2RH_IRQ_INT(58)</span>

<span class="cm">/*</span>
<span class="cm"> *  EMMA2RH Register Access</span>
<span class="cm"> */</span>

<span class="cp">#define EMMA2RH_BASE (0xa0000000)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">emma2rh_sync</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">volatile</span> <span class="n">u32</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="k">volatile</span> <span class="n">u32</span> <span class="o">*</span><span class="p">)</span><span class="mh">0xbfc00000</span><span class="p">;</span>
	<span class="p">(</span><span class="kt">void</span><span class="p">)(</span><span class="o">*</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">emma2rh_out32</span><span class="p">(</span><span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u32</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="n">u32</span> <span class="o">*</span><span class="p">)(</span><span class="n">EMMA2RH_BASE</span> <span class="o">|</span> <span class="n">offset</span><span class="p">)</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">emma2rh_sync</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u32</span> <span class="nf">emma2rh_in32</span><span class="p">(</span><span class="n">u32</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u32</span> <span class="n">val</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="n">u32</span> <span class="o">*</span><span class="p">)(</span><span class="n">EMMA2RH_BASE</span> <span class="o">|</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">emma2rh_out16</span><span class="p">(</span><span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u16</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="n">u16</span> <span class="o">*</span><span class="p">)(</span><span class="n">EMMA2RH_BASE</span> <span class="o">|</span> <span class="n">offset</span><span class="p">)</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">emma2rh_sync</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">emma2rh_in16</span><span class="p">(</span><span class="n">u32</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u16</span> <span class="n">val</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="n">u16</span> <span class="o">*</span><span class="p">)(</span><span class="n">EMMA2RH_BASE</span> <span class="o">|</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">emma2rh_out8</span><span class="p">(</span><span class="n">u32</span> <span class="n">offset</span><span class="p">,</span> <span class="n">u8</span> <span class="n">val</span><span class="p">)</span>
<span class="p">{</span>
	<span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="n">u8</span> <span class="o">*</span><span class="p">)(</span><span class="n">EMMA2RH_BASE</span> <span class="o">|</span> <span class="n">offset</span><span class="p">)</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
	<span class="n">emma2rh_sync</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u8</span> <span class="nf">emma2rh_in8</span><span class="p">(</span><span class="n">u32</span> <span class="n">offset</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="n">val</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="k">volatile</span> <span class="n">u8</span> <span class="o">*</span><span class="p">)(</span><span class="n">EMMA2RH_BASE</span> <span class="o">|</span> <span class="n">offset</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * IIC registers map</span>
<span class="cm"> **/</span>

<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cm">/* CNT - Control register (00H R/W)                                          */</span>
<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cp">#define SPT         0x00000001</span>
<span class="cp">#define STT         0x00000002</span>
<span class="cp">#define ACKE        0x00000004</span>
<span class="cp">#define WTIM        0x00000008</span>
<span class="cp">#define SPIE        0x00000010</span>
<span class="cp">#define WREL        0x00000020</span>
<span class="cp">#define LREL        0x00000040</span>
<span class="cp">#define IICE        0x00000080</span>
<span class="cp">#define CNT_RESERVED    0x000000ff	</span><span class="cm">/* reserved bit 0 */</span><span class="cp"></span>

<span class="cp">#define I2C_EMMA_START      (IICE | STT)</span>
<span class="cp">#define I2C_EMMA_STOP       (IICE | SPT)</span>
<span class="cp">#define I2C_EMMA_REPSTART   I2C_EMMA_START</span>

<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cm">/* STA - Status register (10H Read)                                          */</span>
<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cp">#define MSTS        0x00000080</span>
<span class="cp">#define ALD         0x00000040</span>
<span class="cp">#define EXC         0x00000020</span>
<span class="cp">#define COI         0x00000010</span>
<span class="cp">#define TRC         0x00000008</span>
<span class="cp">#define ACKD        0x00000004</span>
<span class="cp">#define STD         0x00000002</span>
<span class="cp">#define SPD         0x00000001</span>

<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cm">/* CSEL - Clock select register (20H R/W)                                    */</span>
<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cp">#define FCL         0x00000080</span>
<span class="cp">#define ND50        0x00000040</span>
<span class="cp">#define CLD         0x00000020</span>
<span class="cp">#define DAD         0x00000010</span>
<span class="cp">#define SMC         0x00000008</span>
<span class="cp">#define DFC         0x00000004</span>
<span class="cp">#define CL          0x00000003</span>
<span class="cp">#define CSEL_RESERVED   0x000000ff	</span><span class="cm">/* reserved bit 0 */</span><span class="cp"></span>

<span class="cp">#define FAST397     0x0000008b</span>
<span class="cp">#define FAST297     0x0000008a</span>
<span class="cp">#define FAST347     0x0000000b</span>
<span class="cp">#define FAST260     0x0000000a</span>
<span class="cp">#define FAST130     0x00000008</span>
<span class="cp">#define STANDARD108 0x00000083</span>
<span class="cp">#define STANDARD83  0x00000082</span>
<span class="cp">#define STANDARD95  0x00000003</span>
<span class="cp">#define STANDARD73  0x00000002</span>
<span class="cp">#define STANDARD36  0x00000001</span>
<span class="cp">#define STANDARD71  0x00000000</span>

<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cm">/* SVA - Slave address register (30H R/W)                                    */</span>
<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cp">#define SVA         0x000000fe</span>

<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cm">/* SHR - Shift register (40H R/W)                                            */</span>
<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cp">#define SR          0x000000ff</span>

<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cm">/* INT - Interrupt register (50H R/W)                                        */</span>
<span class="cm">/* INTM - Interrupt mask register (60H R/W)                                  */</span>
<span class="cm">/*---------------------------------------------------------------------------*/</span>
<span class="cp">#define INTE0       0x00000001</span>

<span class="cm">/***********************************************************************</span>
<span class="cm"> * I2C registers</span>
<span class="cm"> ***********************************************************************</span>
<span class="cm"> */</span>
<span class="cp">#define I2C_EMMA_CNT            0x00</span>
<span class="cp">#define I2C_EMMA_STA            0x10</span>
<span class="cp">#define I2C_EMMA_CSEL           0x20</span>
<span class="cp">#define I2C_EMMA_SVA            0x30</span>
<span class="cp">#define I2C_EMMA_SHR            0x40</span>
<span class="cp">#define I2C_EMMA_INT            0x50</span>
<span class="cp">#define I2C_EMMA_INTM           0x60</span>

<span class="cm">/*</span>
<span class="cm"> * include the board dependent part</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_NEC_MARKEINS</span>
<span class="cp">#include &lt;asm/emma/markeins.h&gt;</span>
<span class="cp">#else</span>
<span class="cp">#error &quot;Unknown EMMA2RH board!&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* __ASM_EMMA_EMMA2RH_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
