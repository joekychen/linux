<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › sn › sn0 › hubpi.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../../index.html"></a><h1>hubpi.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Derived from IRIX &lt;sys/SN/SN0/hubpi.h&gt;, revision 1.28.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 1992 - 1997, 1999 Silicon Graphics, Inc.</span>
<span class="cm"> * Copyright (C) 1999 by Ralf Baechle</span>
<span class="cm"> */</span>
<span class="cp">#ifndef	_ASM_SN_SN0_HUBPI_H</span>
<span class="cp">#define	_ASM_SN_SN0_HUBPI_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Hub I/O interface registers</span>
<span class="cm"> *</span>
<span class="cm"> * All registers in this file are subject to change until Hub chip tapeout.</span>
<span class="cm"> * All register &quot;addresses&quot; are actually offsets.  Use the LOCAL_HUB</span>
<span class="cm"> * or REMOTE_HUB macros to synthesize an actual address</span>
<span class="cm"> */</span>

<span class="cp">#define PI_BASE			0x000000</span>

<span class="cm">/* General protection and control registers */</span>

<span class="cp">#define PI_CPU_PROTECT		0x000000 </span><span class="cm">/* CPU Protection 		    */</span><span class="cp"></span>
<span class="cp">#define PI_PROT_OVERRD		0x000008 </span><span class="cm">/* Clear CPU Protection bit 	    */</span><span class="cp"></span>
<span class="cp">#define	PI_IO_PROTECT		0x000010 </span><span class="cm">/* Interrupt Pending Protection    */</span><span class="cp"></span>
<span class="cp">#define PI_REGION_PRESENT	0x000018 </span><span class="cm">/* Indicates whether region exists */</span><span class="cp"></span>
<span class="cp">#define PI_CPU_NUM		0x000020 </span><span class="cm">/* CPU Number ID 		    */</span><span class="cp"></span>
<span class="cp">#define PI_CALIAS_SIZE		0x000028 </span><span class="cm">/* Cached Alias Size 		    */</span><span class="cp"></span>
<span class="cp">#define PI_MAX_CRB_TIMEOUT	0x000030 </span><span class="cm">/* Maximum Timeout for CRB 	    */</span><span class="cp"></span>
<span class="cp">#define PI_CRB_SFACTOR		0x000038 </span><span class="cm">/* Scale factor for CRB timeout    */</span><span class="cp"></span>

<span class="cm">/* CALIAS values */</span>
<span class="cp">#define PI_CALIAS_SIZE_0	0</span>
<span class="cp">#define PI_CALIAS_SIZE_4K	1</span>
<span class="cp">#define PI_CALIAS_SIZE_8K	2</span>
<span class="cp">#define PI_CALIAS_SIZE_16K	3</span>
<span class="cp">#define PI_CALIAS_SIZE_32K	4</span>
<span class="cp">#define PI_CALIAS_SIZE_64K	5</span>
<span class="cp">#define PI_CALIAS_SIZE_128K	6</span>
<span class="cp">#define PI_CALIAS_SIZE_256K	7</span>
<span class="cp">#define PI_CALIAS_SIZE_512K	8</span>
<span class="cp">#define PI_CALIAS_SIZE_1M	9</span>
<span class="cp">#define PI_CALIAS_SIZE_2M	10</span>
<span class="cp">#define PI_CALIAS_SIZE_4M	11</span>
<span class="cp">#define PI_CALIAS_SIZE_8M	12</span>
<span class="cp">#define PI_CALIAS_SIZE_16M	13</span>
<span class="cp">#define PI_CALIAS_SIZE_32M	14</span>
<span class="cp">#define PI_CALIAS_SIZE_64M	15</span>

<span class="cm">/* Processor control and status checking */</span>

<span class="cp">#define PI_CPU_PRESENT_A	0x000040 </span><span class="cm">/* CPU Present A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_CPU_PRESENT_B	0x000048 </span><span class="cm">/* CPU Present B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_CPU_ENABLE_A		0x000050 </span><span class="cm">/* CPU Enable A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_CPU_ENABLE_B		0x000058 </span><span class="cm">/* CPU Enable B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_REPLY_LEVEL		0x000060 </span><span class="cm">/* Reply Level		 	    */</span><span class="cp"></span>
<span class="cp">#define PI_HARDRESET_BIT	0x020068 </span><span class="cm">/* Bit cleared by s/w on SR	    */</span><span class="cp"></span>
<span class="cp">#define PI_NMI_A		0x000070 </span><span class="cm">/* NMI to CPU A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_NMI_B		0x000078 </span><span class="cm">/* NMI to CPU B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_NMI_OFFSET		(PI_NMI_B - PI_NMI_A)</span>
<span class="cp">#define PI_SOFTRESET		0x000080 </span><span class="cm">/* Softreset (to both CPUs) 	    */</span><span class="cp"></span>

<span class="cm">/* Regular Interrupt register checking.  */</span>

<span class="cp">#define PI_INT_PEND_MOD		0x000090 </span><span class="cm">/* Write to set pending ints	    */</span><span class="cp"></span>
<span class="cp">#define PI_INT_PEND0		0x000098 </span><span class="cm">/* Read to get pending ints 	    */</span><span class="cp"></span>
<span class="cp">#define PI_INT_PEND1		0x0000a0 </span><span class="cm">/* Read to get pending ints 	    */</span><span class="cp"></span>
<span class="cp">#define PI_INT_MASK0_A		0x0000a8 </span><span class="cm">/* Interrupt Mask 0 for CPU A 	    */</span><span class="cp"></span>
<span class="cp">#define PI_INT_MASK1_A		0x0000b0 </span><span class="cm">/* Interrupt Mask 1 for CPU A 	    */</span><span class="cp"></span>
<span class="cp">#define PI_INT_MASK0_B		0x0000b8 </span><span class="cm">/* Interrupt Mask 0 for CPU B 	    */</span><span class="cp"></span>
<span class="cp">#define PI_INT_MASK1_B		0x0000c0 </span><span class="cm">/* Interrupt Mask 1 for CPU B 	    */</span><span class="cp"></span>

<span class="cp">#define PI_INT_MASK_OFFSET	0x10	 </span><span class="cm">/* Offset from A to B 		    */</span><span class="cp"></span>

<span class="cm">/* Crosscall interrupts */</span>

<span class="cp">#define PI_CC_PEND_SET_A	0x0000c8 </span><span class="cm">/* CC Interrupt Pending Set, CPU A */</span><span class="cp"></span>
<span class="cp">#define PI_CC_PEND_SET_B	0x0000d0 </span><span class="cm">/* CC Interrupt Pending Set, CPU B */</span><span class="cp"></span>
<span class="cp">#define PI_CC_PEND_CLR_A	0x0000d8 </span><span class="cm">/* CC Interrupt Pending Clr, CPU A */</span><span class="cp"></span>
<span class="cp">#define PI_CC_PEND_CLR_B	0x0000e0 </span><span class="cm">/* CC Interrupt Pending Clr, CPU B */</span><span class="cp"></span>
<span class="cp">#define PI_CC_MASK		0x0000e8 </span><span class="cm">/* CC Interrupt mask 		    */</span><span class="cp"></span>

<span class="cp">#define PI_INT_SET_OFFSET	0x08	 </span><span class="cm">/* Offset from A to B 		    */</span><span class="cp"></span>

<span class="cm">/* Realtime Counter and Profiler control registers */</span>

<span class="cp">#define PI_RT_COUNT		0x030100 </span><span class="cm">/* Real Time Counter 		    */</span><span class="cp"></span>
<span class="cp">#define PI_RT_COMPARE_A		0x000108 </span><span class="cm">/* Real Time Compare A 	    */</span><span class="cp"></span>
<span class="cp">#define PI_RT_COMPARE_B		0x000110 </span><span class="cm">/* Real Time Compare B 	    */</span><span class="cp"></span>
<span class="cp">#define PI_PROFILE_COMPARE	0x000118 </span><span class="cm">/* L5 int to both cpus when == RTC */</span><span class="cp"></span>
<span class="cp">#define PI_RT_PEND_A		0x000120 </span><span class="cm">/* Set if RT int for A pending     */</span><span class="cp"></span>
<span class="cp">#define PI_RT_PEND_B		0x000128 </span><span class="cm">/* Set if RT int for B pending     */</span><span class="cp"></span>
<span class="cp">#define PI_PROF_PEND_A		0x000130 </span><span class="cm">/* Set if Prof int for A pending   */</span><span class="cp"></span>
<span class="cp">#define PI_PROF_PEND_B		0x000138 </span><span class="cm">/* Set if Prof int for B pending   */</span><span class="cp"></span>
<span class="cp">#define PI_RT_EN_A		0x000140 </span><span class="cm">/* RT int for CPU A enable 	    */</span><span class="cp"></span>
<span class="cp">#define PI_RT_EN_B		0x000148 </span><span class="cm">/* RT int for CPU B enable 	    */</span><span class="cp"></span>
<span class="cp">#define PI_PROF_EN_A		0x000150 </span><span class="cm">/* PROF int for CPU A enable 	    */</span><span class="cp"></span>
<span class="cp">#define PI_PROF_EN_B		0x000158 </span><span class="cm">/* PROF int for CPU B enable 	    */</span><span class="cp"></span>
<span class="cp">#define PI_RT_LOCAL_CTRL	0x000160 </span><span class="cm">/* RT control register 	    */</span><span class="cp"></span>
<span class="cp">#define PI_RT_FILTER_CTRL	0x000168 </span><span class="cm">/* GCLK Filter control register    */</span><span class="cp"></span>

<span class="cp">#define PI_COUNT_OFFSET		0x08	 </span><span class="cm">/* A to B offset for all counts    */</span><span class="cp"></span>

<span class="cm">/* Built-In Self Test support */</span>

<span class="cp">#define PI_BIST_WRITE_DATA	0x000200 </span><span class="cm">/* BIST write data 		    */</span><span class="cp"></span>
<span class="cp">#define PI_BIST_READ_DATA	0x000208 </span><span class="cm">/* BIST read data 		    */</span><span class="cp"></span>
<span class="cp">#define PI_BIST_COUNT_TARG	0x000210 </span><span class="cm">/* BIST Count and Target 	    */</span><span class="cp"></span>
<span class="cp">#define PI_BIST_READY		0x000218 </span><span class="cm">/* BIST Ready indicator 	    */</span><span class="cp"></span>
<span class="cp">#define PI_BIST_SHIFT_LOAD	0x000220 </span><span class="cm">/* BIST control 		    */</span><span class="cp"></span>
<span class="cp">#define PI_BIST_SHIFT_UNLOAD	0x000228 </span><span class="cm">/* BIST control 		    */</span><span class="cp"></span>
<span class="cp">#define PI_BIST_ENTER_RUN	0x000230 </span><span class="cm">/* BIST control 		    */</span><span class="cp"></span>

<span class="cm">/* Graphics control registers */</span>

<span class="cp">#define PI_GFX_PAGE_A		0x000300 </span><span class="cm">/* Graphics page A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_CREDIT_CNTR_A	0x000308 </span><span class="cm">/* Graphics credit counter A 	    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_BIAS_A		0x000310 </span><span class="cm">/* Graphics bias A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_INT_CNTR_A	0x000318 </span><span class="cm">/* Graphics interrupt counter A    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_INT_CMP_A	0x000320 </span><span class="cm">/* Graphics interrupt comparator A */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_PAGE_B		0x000328 </span><span class="cm">/* Graphics page B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_CREDIT_CNTR_B	0x000330 </span><span class="cm">/* Graphics credit counter B 	    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_BIAS_B		0x000338 </span><span class="cm">/* Graphics bias B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_INT_CNTR_B	0x000340 </span><span class="cm">/* Graphics interrupt counter B    */</span><span class="cp"></span>
<span class="cp">#define PI_GFX_INT_CMP_B	0x000348 </span><span class="cm">/* Graphics interrupt comparator B */</span><span class="cp"></span>

<span class="cp">#define PI_GFX_OFFSET		(PI_GFX_PAGE_B - PI_GFX_PAGE_A)</span>
<span class="cp">#define PI_GFX_PAGE_ENABLE	0x0000010000000000LL</span>

<span class="cm">/* Error and timeout registers */</span>
<span class="cp">#define PI_ERR_INT_PEND		0x000400 </span><span class="cm">/* Error Interrupt Pending	    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_INT_MASK_A	0x000408 </span><span class="cm">/* Error Interrupt mask for CPU A  */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_INT_MASK_B	0x000410 </span><span class="cm">/* Error Interrupt mask for CPU B  */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STACK_ADDR_A	0x000418 </span><span class="cm">/* Error stack address for CPU A   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STACK_ADDR_B	0x000420 </span><span class="cm">/* Error stack address for CPU B   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STACK_SIZE	0x000428 </span><span class="cm">/* Error Stack Size 		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS0_A	0x000430 </span><span class="cm">/* Error Status 0A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS0_A_RCLR	0x000438 </span><span class="cm">/* Error Status 0A clear on read   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS1_A	0x000440 </span><span class="cm">/* Error Status 1A 		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS1_A_RCLR	0x000448 </span><span class="cm">/* Error Status 1A clear on read   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS0_B	0x000450 </span><span class="cm">/* Error Status 0B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS0_B_RCLR	0x000458 </span><span class="cm">/* Error Status 0B clear on read   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS1_B	0x000460 </span><span class="cm">/* Error Status 1B 		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_STATUS1_B_RCLR	0x000468 </span><span class="cm">/* Error Status 1B clear on read   */</span><span class="cp"></span>
<span class="cp">#define PI_SPOOL_CMP_A		0x000470 </span><span class="cm">/* Spool compare for CPU A 	    */</span><span class="cp"></span>
<span class="cp">#define PI_SPOOL_CMP_B		0x000478 </span><span class="cm">/* Spool compare for CPU B 	    */</span><span class="cp"></span>
<span class="cp">#define PI_CRB_TIMEOUT_A	0x000480 </span><span class="cm">/* Timed out CRB entries for A     */</span><span class="cp"></span>
<span class="cp">#define PI_CRB_TIMEOUT_B	0x000488 </span><span class="cm">/* Timed out CRB entries for B     */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_ERRCHK_EN	0x000490 </span><span class="cm">/* Enables SYSAD error checking    */</span><span class="cp"></span>
<span class="cp">#define PI_BAD_CHECK_BIT_A	0x000498 </span><span class="cm">/* Force SYSAD check bit error     */</span><span class="cp"></span>
<span class="cp">#define PI_BAD_CHECK_BIT_B	0x0004a0 </span><span class="cm">/* Force SYSAD check bit error     */</span><span class="cp"></span>
<span class="cp">#define PI_NACK_CNT_A		0x0004a8 </span><span class="cm">/* Consecutive NACK counter 	    */</span><span class="cp"></span>
<span class="cp">#define PI_NACK_CNT_B		0x0004b0 </span><span class="cm">/* 	&quot;	&quot; for CPU B 	    */</span><span class="cp"></span>
<span class="cp">#define PI_NACK_CMP		0x0004b8 </span><span class="cm">/* NACK count compare		    */</span><span class="cp"></span>
<span class="cp">#define PI_STACKADDR_OFFSET	(PI_ERR_STACK_ADDR_B - PI_ERR_STACK_ADDR_A)</span>
<span class="cp">#define PI_ERRSTAT_OFFSET	(PI_ERR_STATUS0_B - PI_ERR_STATUS0_A)</span>
<span class="cp">#define PI_RDCLR_OFFSET		(PI_ERR_STATUS0_A_RCLR - PI_ERR_STATUS0_A)</span>

<span class="cm">/* Bits in PI_ERR_INT_PEND */</span>
<span class="cp">#define PI_ERR_SPOOL_CMP_B	0x00000001	</span><span class="cm">/* Spool end hit high water */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SPOOL_CMP_A	0x00000002</span>
<span class="cp">#define PI_ERR_SPUR_MSG_B	0x00000004	</span><span class="cm">/* Spurious message intr.   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SPUR_MSG_A	0x00000008</span>
<span class="cp">#define PI_ERR_WRB_TERR_B	0x00000010	</span><span class="cm">/* WRB TERR		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_WRB_TERR_A	0x00000020</span>
<span class="cp">#define PI_ERR_WRB_WERR_B	0x00000040	</span><span class="cm">/* WRB WERR 		    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_WRB_WERR_A	0x00000080</span>
<span class="cp">#define PI_ERR_SYSSTATE_B	0x00000100	</span><span class="cm">/* SysState parity error    */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SYSSTATE_A	0x00000200</span>
<span class="cp">#define PI_ERR_SYSAD_DATA_B	0x00000400	</span><span class="cm">/* SysAD data parity error  */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SYSAD_DATA_A	0x00000800</span>
<span class="cp">#define PI_ERR_SYSAD_ADDR_B	0x00001000	</span><span class="cm">/* SysAD addr parity error  */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SYSAD_ADDR_A	0x00002000</span>
<span class="cp">#define PI_ERR_SYSCMD_DATA_B	0x00004000	</span><span class="cm">/* SysCmd data parity error */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SYSCMD_DATA_A	0x00008000</span>
<span class="cp">#define PI_ERR_SYSCMD_ADDR_B	0x00010000	</span><span class="cm">/* SysCmd addr parity error */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SYSCMD_ADDR_A	0x00020000</span>
<span class="cp">#define PI_ERR_BAD_SPOOL_B	0x00040000	</span><span class="cm">/* Error spooling to memory */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_BAD_SPOOL_A	0x00080000</span>
<span class="cp">#define PI_ERR_UNCAC_UNCORR_B	0x00100000	</span><span class="cm">/* Uncached uncorrectable   */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_UNCAC_UNCORR_A	0x00200000</span>
<span class="cp">#define PI_ERR_SYSSTATE_TAG_B	0x00400000	</span><span class="cm">/* SysState tag parity error */</span><span class="cp"></span>
<span class="cp">#define PI_ERR_SYSSTATE_TAG_A	0x00800000</span>
<span class="cp">#define PI_ERR_MD_UNCORR	0x01000000	</span><span class="cm">/* Must be cleared in MD    */</span><span class="cp"></span>

<span class="cp">#define PI_ERR_CLEAR_ALL_A	0x00aaaaaa</span>
<span class="cp">#define PI_ERR_CLEAR_ALL_B	0x00555555</span>


<span class="cm">/*</span>
<span class="cm"> * The following three macros define all possible error int pends.</span>
<span class="cm"> */</span>

<span class="cp">#define PI_FATAL_ERR_CPU_A	(PI_ERR_SYSSTATE_TAG_A 	| \</span>
<span class="cp">				 PI_ERR_BAD_SPOOL_A 	| \</span>
<span class="cp">				 PI_ERR_SYSCMD_ADDR_A 	| \</span>
<span class="cp">				 PI_ERR_SYSCMD_DATA_A 	| \</span>
<span class="cp">				 PI_ERR_SYSAD_ADDR_A 	| \</span>
<span class="cp">				 PI_ERR_SYSAD_DATA_A	| \</span>
<span class="cp">				 PI_ERR_SYSSTATE_A)</span>

<span class="cp">#define PI_MISC_ERR_CPU_A	(PI_ERR_UNCAC_UNCORR_A 	| \</span>
<span class="cp">				 PI_ERR_WRB_WERR_A 	| \</span>
<span class="cp">				 PI_ERR_WRB_TERR_A 	| \</span>
<span class="cp">				 PI_ERR_SPUR_MSG_A 	| \</span>
<span class="cp">				 PI_ERR_SPOOL_CMP_A)</span>

<span class="cp">#define PI_FATAL_ERR_CPU_B	(PI_ERR_SYSSTATE_TAG_B 	| \</span>
<span class="cp">				 PI_ERR_BAD_SPOOL_B 	| \</span>
<span class="cp">				 PI_ERR_SYSCMD_ADDR_B 	| \</span>
<span class="cp">				 PI_ERR_SYSCMD_DATA_B 	| \</span>
<span class="cp">				 PI_ERR_SYSAD_ADDR_B 	| \</span>
<span class="cp">				 PI_ERR_SYSAD_DATA_B	| \</span>
<span class="cp">				 PI_ERR_SYSSTATE_B)</span>

<span class="cp">#define PI_MISC_ERR_CPU_B 	(PI_ERR_UNCAC_UNCORR_B  | \</span>
<span class="cp">				 PI_ERR_WRB_WERR_B 	| \</span>
<span class="cp">				 PI_ERR_WRB_TERR_B 	| \</span>
<span class="cp">				 PI_ERR_SPUR_MSG_B 	| \</span>
<span class="cp">				 PI_ERR_SPOOL_CMP_B)</span>

<span class="cp">#define PI_ERR_GENERIC	(PI_ERR_MD_UNCORR)</span>

<span class="cm">/*</span>
<span class="cm"> * Error types for PI_ERR_STATUS0_[AB] and error stack:</span>
<span class="cm"> * Use the write types if WRBRRB is 1 else use the read types</span>
<span class="cm"> */</span>

<span class="cm">/* Fields in PI_ERR_STATUS0_[AB] */</span>
<span class="cp">#define PI_ERR_ST0_TYPE_MASK	0x0000000000000007</span>
<span class="cp">#define PI_ERR_ST0_TYPE_SHFT	0</span>
<span class="cp">#define PI_ERR_ST0_REQNUM_MASK	0x0000000000000038</span>
<span class="cp">#define PI_ERR_ST0_REQNUM_SHFT	3</span>
<span class="cp">#define PI_ERR_ST0_SUPPL_MASK	0x000000000001ffc0</span>
<span class="cp">#define PI_ERR_ST0_SUPPL_SHFT	6</span>
<span class="cp">#define PI_ERR_ST0_CMD_MASK	0x0000000001fe0000</span>
<span class="cp">#define PI_ERR_ST0_CMD_SHFT	17</span>
<span class="cp">#define PI_ERR_ST0_ADDR_MASK	0x3ffffffffe000000</span>
<span class="cp">#define PI_ERR_ST0_ADDR_SHFT	25</span>
<span class="cp">#define PI_ERR_ST0_OVERRUN_MASK	0x4000000000000000</span>
<span class="cp">#define PI_ERR_ST0_OVERRUN_SHFT	62</span>
<span class="cp">#define PI_ERR_ST0_VALID_MASK	0x8000000000000000</span>
<span class="cp">#define PI_ERR_ST0_VALID_SHFT	63</span>

<span class="cm">/* Fields in PI_ERR_STATUS1_[AB] */</span>
<span class="cp">#define PI_ERR_ST1_SPOOL_MASK	0x00000000001fffff</span>
<span class="cp">#define PI_ERR_ST1_SPOOL_SHFT	0</span>
<span class="cp">#define PI_ERR_ST1_TOUTCNT_MASK	0x000000001fe00000</span>
<span class="cp">#define PI_ERR_ST1_TOUTCNT_SHFT	21</span>
<span class="cp">#define PI_ERR_ST1_INVCNT_MASK	0x0000007fe0000000</span>
<span class="cp">#define PI_ERR_ST1_INVCNT_SHFT	29</span>
<span class="cp">#define PI_ERR_ST1_CRBNUM_MASK	0x0000038000000000</span>
<span class="cp">#define PI_ERR_ST1_CRBNUM_SHFT	39</span>
<span class="cp">#define PI_ERR_ST1_WRBRRB_MASK	0x0000040000000000</span>
<span class="cp">#define PI_ERR_ST1_WRBRRB_SHFT	42</span>
<span class="cp">#define PI_ERR_ST1_CRBSTAT_MASK	0x001ff80000000000</span>
<span class="cp">#define PI_ERR_ST1_CRBSTAT_SHFT	43</span>
<span class="cp">#define PI_ERR_ST1_MSGSRC_MASK	0xffe0000000000000</span>
<span class="cp">#define PI_ERR_ST1_MSGSRC_SHFT	53</span>

<span class="cm">/* Fields in the error stack */</span>
<span class="cp">#define PI_ERR_STK_TYPE_MASK	0x0000000000000003</span>
<span class="cp">#define PI_ERR_STK_TYPE_SHFT	0</span>
<span class="cp">#define PI_ERR_STK_SUPPL_MASK	0x0000000000000038</span>
<span class="cp">#define PI_ERR_STK_SUPPL_SHFT	3</span>
<span class="cp">#define PI_ERR_STK_REQNUM_MASK	0x00000000000001c0</span>
<span class="cp">#define PI_ERR_STK_REQNUM_SHFT	6</span>
<span class="cp">#define PI_ERR_STK_CRBNUM_MASK	0x0000000000000e00</span>
<span class="cp">#define PI_ERR_STK_CRBNUM_SHFT	9</span>
<span class="cp">#define PI_ERR_STK_WRBRRB_MASK	0x0000000000001000</span>
<span class="cp">#define PI_ERR_STK_WRBRRB_SHFT	12</span>
<span class="cp">#define PI_ERR_STK_CRBSTAT_MASK	0x00000000007fe000</span>
<span class="cp">#define PI_ERR_STK_CRBSTAT_SHFT	13</span>
<span class="cp">#define PI_ERR_STK_CMD_MASK	0x000000007f800000</span>
<span class="cp">#define PI_ERR_STK_CMD_SHFT	23</span>
<span class="cp">#define PI_ERR_STK_ADDR_MASK	0xffffffff80000000</span>
<span class="cp">#define PI_ERR_STK_ADDR_SHFT	31</span>

<span class="cm">/* Error type in the error status or stack on Read CRBs */</span>
<span class="cp">#define PI_ERR_RD_PRERR		1</span>
<span class="cp">#define PI_ERR_RD_DERR		2</span>
<span class="cp">#define PI_ERR_RD_TERR		3</span>

<span class="cm">/* Error type in the error status or stack on Write CRBs */</span>
<span class="cp">#define PI_ERR_WR_WERR		0</span>
<span class="cp">#define PI_ERR_WR_PWERR		1</span>
<span class="cp">#define PI_ERR_WR_TERR		3</span>

<span class="cm">/* Read or Write CRB in error status or stack */</span>
<span class="cp">#define PI_ERR_RRB	0</span>
<span class="cp">#define PI_ERR_WRB	1</span>
<span class="cp">#define PI_ERR_ANY_CRB	2</span>

<span class="cm">/* Address masks in the error status and error stack are not the same */</span>
<span class="cp">#define ERR_STK_ADDR_SHFT	7</span>
<span class="cp">#define ERR_STAT0_ADDR_SHFT	3</span>

<span class="cp">#define PI_MIN_STACK_SIZE 4096	</span><span class="cm">/* For figuring out the size to set */</span><span class="cp"></span>
<span class="cp">#define PI_STACK_SIZE_SHFT	12	</span><span class="cm">/* 4k */</span><span class="cp"></span>

<span class="cp">#define ERR_STACK_SIZE_BYTES(_sz) \</span>
<span class="cp">       ((_sz) ? (PI_MIN_STACK_SIZE &lt;&lt; ((_sz) - 1)) : 0)</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cm">/*</span>
<span class="cm"> * format of error stack and error status registers.</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">err_stack_format</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">sk_addr</span>	   <span class="o">:</span> <span class="mi">33</span><span class="p">,</span>   <span class="cm">/* address */</span>
		<span class="n">sk_cmd</span>	   <span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>   <span class="cm">/* message command */</span>
		<span class="n">sk_crb_sts</span> <span class="o">:</span> <span class="mi">10</span><span class="p">,</span>   <span class="cm">/* status from RRB or WRB */</span>
		<span class="n">sk_rw_rb</span>   <span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* RRB == 0, WRB == 1 */</span>
		<span class="n">sk_crb_num</span> <span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>   <span class="cm">/* WRB (0 to 7) or RRB (0 to 4) */</span>
		<span class="n">sk_t5_req</span>  <span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>   <span class="cm">/* RRB T5 request number */</span>
		<span class="n">sk_suppl</span>   <span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>   <span class="cm">/* lowest 3 bit of supplemental */</span>
		<span class="nl">sk_err_type:</span>  <span class="mi">3</span><span class="p">;</span>   <span class="cm">/* error type	*/</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">pi_err_stack</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">pi_stk_word</span><span class="p">;</span>
	<span class="k">struct</span>	<span class="n">err_stack_format</span> <span class="n">pi_stk_fmt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">pi_err_stack_t</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">err_status0_format</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">s0_valid</span>   <span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* Valid */</span>
		<span class="n">s0_ovr_run</span> <span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* Overrun, spooled to memory */</span>
		<span class="n">s0_addr</span>	   <span class="o">:</span> <span class="mi">37</span><span class="p">,</span>   <span class="cm">/* address */</span>
		<span class="n">s0_cmd</span>	   <span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>   <span class="cm">/* message command */</span>
		<span class="n">s0_supl</span>	   <span class="o">:</span> <span class="mi">11</span><span class="p">,</span>   <span class="cm">/* message supplemental field */</span>
		<span class="n">s0_t5_req</span>  <span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>   <span class="cm">/* RRB T5 request number */</span>
		<span class="nl">s0_err_type:</span>  <span class="mi">3</span><span class="p">;</span>   <span class="cm">/* error type */</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">pi_err_stat0</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">pi_stat0_word</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">err_status0_format</span> <span class="n">pi_stat0_fmt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">pi_err_stat0_t</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">err_status1_format</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">s1_src</span>	   <span class="o">:</span> <span class="mi">11</span><span class="p">,</span>   <span class="cm">/* message source */</span>
		<span class="n">s1_crb_sts</span> <span class="o">:</span> <span class="mi">10</span><span class="p">,</span>   <span class="cm">/* status from RRB or WRB */</span>
		<span class="n">s1_rw_rb</span>   <span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>   <span class="cm">/* RRB == 0, WRB == 1 */</span>
		<span class="n">s1_crb_num</span> <span class="o">:</span>  <span class="mi">3</span><span class="p">,</span>   <span class="cm">/* WRB (0 to 7) or RRB (0 to 4) */</span>
		<span class="nl">s1_inval_cnt:</span><span class="mi">10</span><span class="p">,</span>   <span class="cm">/* signed invalidate counter RRB */</span>
		<span class="n">s1_to_cnt</span>  <span class="o">:</span>  <span class="mi">8</span><span class="p">,</span>   <span class="cm">/* crb timeout counter */</span>
		<span class="n">s1_spl_cnt</span> <span class="o">:</span> <span class="mi">21</span><span class="p">;</span>   <span class="cm">/* number spooled to memory */</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="n">pi_err_stat1</span> <span class="p">{</span>
	<span class="n">u64</span>	<span class="n">pi_stat1_word</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">err_status1_format</span> <span class="n">pi_stat1_fmt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">pi_err_stat1_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">u64</span>	<span class="n">rtc_time_t</span><span class="p">;</span>

<span class="cp">#endif </span><span class="cm">/* !__ASSEMBLY__ */</span><span class="cp"></span>


<span class="cm">/* Bits in PI_SYSAD_ERRCHK_EN */</span>
<span class="cp">#define PI_SYSAD_ERRCHK_ECCGEN	0x01	</span><span class="cm">/* Enable ECC generation	    */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_ERRCHK_QUALGEN	0x02	</span><span class="cm">/* Enable data quality signal gen.  */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_ERRCHK_SADP	0x04	</span><span class="cm">/* Enable SysAD parity checking     */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_ERRCHK_CMDP	0x08	</span><span class="cm">/* Enable SysCmd parity checking    */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_ERRCHK_STATE	0x10	</span><span class="cm">/* Enable SysState parity checking  */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_ERRCHK_QUAL	0x20	</span><span class="cm">/* Enable data quality checking     */</span><span class="cp"></span>
<span class="cp">#define PI_SYSAD_CHECK_ALL	0x3f	</span><span class="cm">/* Generate and check all signals.  */</span><span class="cp"></span>

<span class="cm">/* Interrupt pending bits on R10000 */</span>

<span class="cp">#define HUB_IP_PEND0		0x0400</span>
<span class="cp">#define HUB_IP_PEND1_CC		0x0800</span>
<span class="cp">#define HUB_IP_RT		0x1000</span>
<span class="cp">#define HUB_IP_PROF		0x2000</span>
<span class="cp">#define HUB_IP_ERROR		0x4000</span>
<span class="cp">#define HUB_IP_MASK		0x7c00</span>

<span class="cm">/* PI_RT_LOCAL_CTRL mask and shift definitions */</span>

<span class="cp">#define PRLC_USE_INT_SHFT	16</span>
<span class="cp">#define PRLC_USE_INT_MASK	(UINT64_CAST 1 &lt;&lt; 16)</span>
<span class="cp">#define PRLC_USE_INT		(UINT64_CAST 1 &lt;&lt; 16)</span>
<span class="cp">#define PRLC_GCLK_SHFT		15</span>
<span class="cp">#define PRLC_GCLK_MASK		(UINT64_CAST 1 &lt;&lt; 15)</span>
<span class="cp">#define PRLC_GCLK		(UINT64_CAST 1 &lt;&lt; 15)</span>
<span class="cp">#define PRLC_GCLK_COUNT_SHFT	8</span>
<span class="cp">#define PRLC_GCLK_COUNT_MASK	(UINT64_CAST 0x7f &lt;&lt; 8)</span>
<span class="cp">#define PRLC_MAX_COUNT_SHFT	1</span>
<span class="cp">#define PRLC_MAX_COUNT_MASK	(UINT64_CAST 0x7f &lt;&lt; 1)</span>
<span class="cp">#define PRLC_GCLK_EN_SHFT	0</span>
<span class="cp">#define PRLC_GCLK_EN_MASK	(UINT64_CAST 1)</span>
<span class="cp">#define PRLC_GCLK_EN		(UINT64_CAST 1)</span>

<span class="cm">/* PI_RT_FILTER_CTRL mask and shift definitions */</span>

<span class="cm">/*</span>
<span class="cm"> * Bits for NACK_CNT_A/B and NACK_CMP</span>
<span class="cm"> */</span>
<span class="cp">#define PI_NACK_CNT_EN_SHFT	20</span>
<span class="cp">#define PI_NACK_CNT_EN_MASK	0x100000</span>
<span class="cp">#define PI_NACK_CNT_MASK	0x0fffff</span>
<span class="cp">#define PI_NACK_CNT_MAX		0x0fffff</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_SN_SN0_HUBPI_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:6}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../../javascript/docco.min.js"></script>
</html>
