<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › octeon › cvmx-config.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>cvmx-config.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __CVMX_CONFIG_H__</span>
<span class="cp">#define __CVMX_CONFIG_H__</span>

<span class="cm">/************************* Config Specific Defines ************************/</span>
<span class="cp">#define CVMX_LLM_NUM_PORTS 1</span>
<span class="cp">#define CVMX_NULL_POINTER_PROTECT 1</span>
<span class="cp">#define CVMX_ENABLE_DEBUG_PRINTS 1</span>
<span class="cm">/* PKO queues per port for interface 0 (ports 0-15) */</span>
<span class="cp">#define CVMX_PKO_QUEUES_PER_PORT_INTERFACE0 1</span>
<span class="cm">/* PKO queues per port for interface 1 (ports 16-31) */</span>
<span class="cp">#define CVMX_PKO_QUEUES_PER_PORT_INTERFACE1 1</span>
<span class="cm">/* Limit on the number of PKO ports enabled for interface 0 */</span>
<span class="cp">#define CVMX_PKO_MAX_PORTS_INTERFACE0 CVMX_HELPER_PKO_MAX_PORTS_INTERFACE0</span>
<span class="cm">/* Limit on the number of PKO ports enabled for interface 1 */</span>
<span class="cp">#define CVMX_PKO_MAX_PORTS_INTERFACE1 CVMX_HELPER_PKO_MAX_PORTS_INTERFACE1</span>
<span class="cm">/* PKO queues per port for PCI (ports 32-35) */</span>
<span class="cp">#define CVMX_PKO_QUEUES_PER_PORT_PCI 1</span>
<span class="cm">/* PKO queues per port for Loop devices (ports 36-39) */</span>
<span class="cp">#define CVMX_PKO_QUEUES_PER_PORT_LOOP 1</span>

<span class="cm">/************************* FPA allocation *********************************/</span>
<span class="cm">/* Pool sizes in bytes, must be multiple of a cache line */</span>
<span class="cp">#define CVMX_FPA_POOL_0_SIZE (16 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_1_SIZE (1 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_2_SIZE (8 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_3_SIZE (0 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_4_SIZE (0 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_5_SIZE (0 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_6_SIZE (0 * CVMX_CACHE_LINE_SIZE)</span>
<span class="cp">#define CVMX_FPA_POOL_7_SIZE (0 * CVMX_CACHE_LINE_SIZE)</span>

<span class="cm">/* Pools in use */</span>
<span class="cm">/* Packet buffers */</span>
<span class="cp">#define CVMX_FPA_PACKET_POOL                (0)</span>
<span class="cp">#define CVMX_FPA_PACKET_POOL_SIZE           CVMX_FPA_POOL_0_SIZE</span>
<span class="cm">/* Work queue entrys */</span>
<span class="cp">#define CVMX_FPA_WQE_POOL                   (1)</span>
<span class="cp">#define CVMX_FPA_WQE_POOL_SIZE              CVMX_FPA_POOL_1_SIZE</span>
<span class="cm">/* PKO queue command buffers */</span>
<span class="cp">#define CVMX_FPA_OUTPUT_BUFFER_POOL         (2)</span>
<span class="cp">#define CVMX_FPA_OUTPUT_BUFFER_POOL_SIZE    CVMX_FPA_POOL_2_SIZE</span>

<span class="cm">/*************************  FAU allocation ********************************/</span>
<span class="cm">/* The fetch and add registers are allocated here.  They are arranged</span>
<span class="cm"> * in order of descending size so that all alignment constraints are</span>
<span class="cm"> * automatically met.  The enums are linked so that the following enum</span>
<span class="cm"> * continues allocating where the previous one left off, so the</span>
<span class="cm"> * numbering within each enum always starts with zero.  The macros</span>
<span class="cm"> * take care of the address increment size, so the values entered</span>
<span class="cm"> * always increase by 1.  FAU registers are accessed with byte</span>
<span class="cm"> * addresses.</span>
<span class="cm"> */</span>

<span class="cp">#define CVMX_FAU_REG_64_ADDR(x) ((x &lt;&lt; 3) + CVMX_FAU_REG_64_START)</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">CVMX_FAU_REG_64_START</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="n">CVMX_FAU_REG_64_END</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_64_ADDR</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">}</span> <span class="n">cvmx_fau_reg_64_t</span><span class="p">;</span>

<span class="cp">#define CVMX_FAU_REG_32_ADDR(x) ((x &lt;&lt; 2) + CVMX_FAU_REG_32_START)</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">CVMX_FAU_REG_32_START</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_64_END</span><span class="p">,</span>
	<span class="n">CVMX_FAU_REG_32_END</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_32_ADDR</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">}</span> <span class="n">cvmx_fau_reg_32_t</span><span class="p">;</span>

<span class="cp">#define CVMX_FAU_REG_16_ADDR(x) ((x &lt;&lt; 1) + CVMX_FAU_REG_16_START)</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">CVMX_FAU_REG_16_START</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_32_END</span><span class="p">,</span>
	<span class="n">CVMX_FAU_REG_16_END</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_16_ADDR</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">}</span> <span class="n">cvmx_fau_reg_16_t</span><span class="p">;</span>

<span class="cp">#define CVMX_FAU_REG_8_ADDR(x) ((x) + CVMX_FAU_REG_8_START)</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
	<span class="n">CVMX_FAU_REG_8_START</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_16_END</span><span class="p">,</span>
	<span class="n">CVMX_FAU_REG_8_END</span>	<span class="o">=</span> <span class="n">CVMX_FAU_REG_8_ADDR</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">}</span> <span class="n">cvmx_fau_reg_8_t</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * The name CVMX_FAU_REG_AVAIL_BASE is provided to indicate the first</span>
<span class="cm"> * available FAU address that is not allocated in cvmx-config.h. This</span>
<span class="cm"> * is 64 bit aligned.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_FAU_REG_AVAIL_BASE ((CVMX_FAU_REG_8_END + 0x7) &amp; (~0x7ULL))</span>
<span class="cp">#define CVMX_FAU_REG_END (2048)</span>

<span class="cm">/********************** scratch memory allocation *************************/</span>
<span class="cm">/* Scratchpad memory allocation.  Note that these are byte memory</span>
<span class="cm"> * addresses.  Some uses of scratchpad (IOBDMA for example) require</span>
<span class="cm"> * the use of 8-byte aligned addresses, so proper alignment needs to</span>
<span class="cm"> * be taken into account.</span>
<span class="cm"> */</span>
<span class="cm">/* Generic scratch iobdma area */</span>
<span class="cp">#define CVMX_SCR_SCRATCH               (0)</span>
<span class="cm">/* First location available after cvmx-config.h allocated region. */</span>
<span class="cp">#define CVMX_SCR_REG_AVAIL_BASE        (8)</span>

<span class="cm">/*</span>
<span class="cm"> * CVMX_HELPER_FIRST_MBUFF_SKIP is the number of bytes to reserve</span>
<span class="cm"> * before the beginning of the packet. If necessary, override the</span>
<span class="cm"> * default here.  See the IPD section of the hardware manual for MBUFF</span>
<span class="cm"> * SKIP details.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_FIRST_MBUFF_SKIP 184</span>

<span class="cm">/*</span>
<span class="cm"> * CVMX_HELPER_NOT_FIRST_MBUFF_SKIP is the number of bytes to reserve</span>
<span class="cm"> * in each chained packet element. If necessary, override the default</span>
<span class="cm"> * here.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_NOT_FIRST_MBUFF_SKIP 0</span>

<span class="cm">/*</span>
<span class="cm"> * CVMX_HELPER_ENABLE_BACK_PRESSURE controls whether back pressure is</span>
<span class="cm"> * enabled for all input ports. This controls if IPD sends</span>
<span class="cm"> * backpressure to all ports if Octeon&#39;s FPA pools don&#39;t have enough</span>
<span class="cm"> * packet or work queue entries. Even when this is off, it is still</span>
<span class="cm"> * possible to get backpressure from individual hardware ports. When</span>
<span class="cm"> * configuring backpressure, also check</span>
<span class="cm"> * CVMX_HELPER_DISABLE_*_BACKPRESSURE below. If necessary, override</span>
<span class="cm"> * the default here.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_ENABLE_BACK_PRESSURE 1</span>

<span class="cm">/*</span>
<span class="cm"> * CVMX_HELPER_ENABLE_IPD controls if the IPD is enabled in the helper</span>
<span class="cm"> * function. Once it is enabled the hardware starts accepting</span>
<span class="cm"> * packets. You might want to skip the IPD enable if configuration</span>
<span class="cm"> * changes are need from the default helper setup. If necessary,</span>
<span class="cm"> * override the default here.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_ENABLE_IPD 0</span>

<span class="cm">/*</span>
<span class="cm"> * CVMX_HELPER_INPUT_TAG_TYPE selects the type of tag that the IPD assigns</span>
<span class="cm"> * to incoming packets.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_TYPE CVMX_POW_TAG_TYPE_ORDERED</span>

<span class="cp">#define CVMX_ENABLE_PARAMETER_CHECKING 0</span>

<span class="cm">/*</span>
<span class="cm"> * The following select which fields are used by the PIP to generate</span>
<span class="cm"> * the tag on INPUT</span>
<span class="cm"> * 0: don&#39;t include</span>
<span class="cm"> * 1: include</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV6_SRC_IP	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV6_DST_IP   	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV6_SRC_PORT 	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV6_DST_PORT 	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV6_NEXT_HEADER 	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV4_SRC_IP	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV4_DST_IP   	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV4_SRC_PORT 	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV4_DST_PORT 	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_IPV4_PROTOCOL	0</span>
<span class="cp">#define CVMX_HELPER_INPUT_TAG_INPUT_PORT	1</span>

<span class="cm">/* Select skip mode for input ports */</span>
<span class="cp">#define CVMX_HELPER_INPUT_PORT_SKIP_MODE	CVMX_PIP_PORT_CFG_MODE_SKIPL2</span>

<span class="cm">/*</span>
<span class="cm"> * Force backpressure to be disabled.  This overrides all other</span>
<span class="cm"> * backpressure configuration.</span>
<span class="cm"> */</span>
<span class="cp">#define CVMX_HELPER_DISABLE_RGMII_BACKPRESSURE 0</span>

<span class="cp">#endif </span><span class="cm">/* __CVMX_CONFIG_H__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
