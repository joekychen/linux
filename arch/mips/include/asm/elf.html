<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › elf.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>elf.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Much of this is taken from binutils and GNU libc ...</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_ELF_H</span>
<span class="cp">#define _ASM_ELF_H</span>


<span class="cm">/* ELF header e_flags defines. */</span>
<span class="cm">/* MIPS architecture level. */</span>
<span class="cp">#define EF_MIPS_ARCH_1		0x00000000	</span><span class="cm">/* -mips1 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_2		0x10000000	</span><span class="cm">/* -mips2 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_3		0x20000000	</span><span class="cm">/* -mips3 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_4		0x30000000	</span><span class="cm">/* -mips4 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_5		0x40000000	</span><span class="cm">/* -mips5 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_32		0x50000000	</span><span class="cm">/* MIPS32 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_64		0x60000000	</span><span class="cm">/* MIPS64 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_32R2	0x70000000	</span><span class="cm">/* MIPS32 R2 code.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ARCH_64R2	0x80000000	</span><span class="cm">/* MIPS64 R2 code.  */</span><span class="cp"></span>

<span class="cm">/* The ABI of a file. */</span>
<span class="cp">#define EF_MIPS_ABI_O32		0x00001000	</span><span class="cm">/* O32 ABI.  */</span><span class="cp"></span>
<span class="cp">#define EF_MIPS_ABI_O64		0x00002000	</span><span class="cm">/* O32 extended for 64 bit.  */</span><span class="cp"></span>

<span class="cp">#define PT_MIPS_REGINFO		0x70000000</span>
<span class="cp">#define PT_MIPS_RTPROC		0x70000001</span>
<span class="cp">#define PT_MIPS_OPTIONS		0x70000002</span>

<span class="cm">/* Flags in the e_flags field of the header */</span>
<span class="cp">#define EF_MIPS_NOREORDER	0x00000001</span>
<span class="cp">#define EF_MIPS_PIC		0x00000002</span>
<span class="cp">#define EF_MIPS_CPIC		0x00000004</span>
<span class="cp">#define EF_MIPS_ABI2		0x00000020</span>
<span class="cp">#define EF_MIPS_OPTIONS_FIRST	0x00000080</span>
<span class="cp">#define EF_MIPS_32BITMODE	0x00000100</span>
<span class="cp">#define EF_MIPS_ABI		0x0000f000</span>
<span class="cp">#define EF_MIPS_ARCH		0xf0000000</span>

<span class="cp">#define DT_MIPS_RLD_VERSION	0x70000001</span>
<span class="cp">#define DT_MIPS_TIME_STAMP	0x70000002</span>
<span class="cp">#define DT_MIPS_ICHECKSUM	0x70000003</span>
<span class="cp">#define DT_MIPS_IVERSION	0x70000004</span>
<span class="cp">#define DT_MIPS_FLAGS		0x70000005</span>
	<span class="cp">#define RHF_NONE	0x00000000</span>
	<span class="cp">#define RHF_HARDWAY	0x00000001</span>
	<span class="cp">#define RHF_NOTPOT	0x00000002</span>
	<span class="cp">#define RHF_SGI_ONLY	0x00000010</span>
<span class="cp">#define DT_MIPS_BASE_ADDRESS	0x70000006</span>
<span class="cp">#define DT_MIPS_CONFLICT	0x70000008</span>
<span class="cp">#define DT_MIPS_LIBLIST		0x70000009</span>
<span class="cp">#define DT_MIPS_LOCAL_GOTNO	0x7000000a</span>
<span class="cp">#define DT_MIPS_CONFLICTNO	0x7000000b</span>
<span class="cp">#define DT_MIPS_LIBLISTNO	0x70000010</span>
<span class="cp">#define DT_MIPS_SYMTABNO	0x70000011</span>
<span class="cp">#define DT_MIPS_UNREFEXTNO	0x70000012</span>
<span class="cp">#define DT_MIPS_GOTSYM		0x70000013</span>
<span class="cp">#define DT_MIPS_HIPAGENO	0x70000014</span>
<span class="cp">#define DT_MIPS_RLD_MAP		0x70000016</span>

<span class="cp">#define R_MIPS_NONE		0</span>
<span class="cp">#define R_MIPS_16		1</span>
<span class="cp">#define R_MIPS_32		2</span>
<span class="cp">#define R_MIPS_REL32		3</span>
<span class="cp">#define R_MIPS_26		4</span>
<span class="cp">#define R_MIPS_HI16		5</span>
<span class="cp">#define R_MIPS_LO16		6</span>
<span class="cp">#define R_MIPS_GPREL16		7</span>
<span class="cp">#define R_MIPS_LITERAL		8</span>
<span class="cp">#define R_MIPS_GOT16		9</span>
<span class="cp">#define R_MIPS_PC16		10</span>
<span class="cp">#define R_MIPS_CALL16		11</span>
<span class="cp">#define R_MIPS_GPREL32		12</span>
<span class="cm">/* The remaining relocs are defined on Irix, although they are not</span>
<span class="cm">   in the MIPS ELF ABI.  */</span>
<span class="cp">#define R_MIPS_UNUSED1		13</span>
<span class="cp">#define R_MIPS_UNUSED2		14</span>
<span class="cp">#define R_MIPS_UNUSED3		15</span>
<span class="cp">#define R_MIPS_SHIFT5		16</span>
<span class="cp">#define R_MIPS_SHIFT6		17</span>
<span class="cp">#define R_MIPS_64		18</span>
<span class="cp">#define R_MIPS_GOT_DISP		19</span>
<span class="cp">#define R_MIPS_GOT_PAGE		20</span>
<span class="cp">#define R_MIPS_GOT_OFST		21</span>
<span class="cm">/*</span>
<span class="cm"> * The following two relocation types are specified in the MIPS ABI</span>
<span class="cm"> * conformance guide version 1.2 but not yet in the psABI.</span>
<span class="cm"> */</span>
<span class="cp">#define R_MIPS_GOTHI16		22</span>
<span class="cp">#define R_MIPS_GOTLO16		23</span>
<span class="cp">#define R_MIPS_SUB		24</span>
<span class="cp">#define R_MIPS_INSERT_A		25</span>
<span class="cp">#define R_MIPS_INSERT_B		26</span>
<span class="cp">#define R_MIPS_DELETE		27</span>
<span class="cp">#define R_MIPS_HIGHER		28</span>
<span class="cp">#define R_MIPS_HIGHEST		29</span>
<span class="cm">/*</span>
<span class="cm"> * The following two relocation types are specified in the MIPS ABI</span>
<span class="cm"> * conformance guide version 1.2 but not yet in the psABI.</span>
<span class="cm"> */</span>
<span class="cp">#define R_MIPS_CALLHI16		30</span>
<span class="cp">#define R_MIPS_CALLLO16		31</span>
<span class="cm">/*</span>
<span class="cm"> * This range is reserved for vendor specific relocations.</span>
<span class="cm"> */</span>
<span class="cp">#define R_MIPS_LOVENDOR		100</span>
<span class="cp">#define R_MIPS_HIVENDOR		127</span>

<span class="cp">#define SHN_MIPS_ACCOMON	0xff00		</span><span class="cm">/* Allocated common symbols */</span><span class="cp"></span>
<span class="cp">#define SHN_MIPS_TEXT		0xff01		</span><span class="cm">/* Allocated test symbols.  */</span><span class="cp"></span>
<span class="cp">#define SHN_MIPS_DATA		0xff02		</span><span class="cm">/* Allocated data symbols.  */</span><span class="cp"></span>
<span class="cp">#define SHN_MIPS_SCOMMON	0xff03		</span><span class="cm">/* Small common symbols */</span><span class="cp"></span>
<span class="cp">#define SHN_MIPS_SUNDEFINED	0xff04		</span><span class="cm">/* Small undefined symbols */</span><span class="cp"></span>

<span class="cp">#define SHT_MIPS_LIST		0x70000000</span>
<span class="cp">#define SHT_MIPS_CONFLICT	0x70000002</span>
<span class="cp">#define SHT_MIPS_GPTAB		0x70000003</span>
<span class="cp">#define SHT_MIPS_UCODE		0x70000004</span>
<span class="cp">#define SHT_MIPS_DEBUG		0x70000005</span>
<span class="cp">#define SHT_MIPS_REGINFO	0x70000006</span>
<span class="cp">#define SHT_MIPS_PACKAGE	0x70000007</span>
<span class="cp">#define SHT_MIPS_PACKSYM	0x70000008</span>
<span class="cp">#define SHT_MIPS_RELD		0x70000009</span>
<span class="cp">#define SHT_MIPS_IFACE		0x7000000b</span>
<span class="cp">#define SHT_MIPS_CONTENT	0x7000000c</span>
<span class="cp">#define SHT_MIPS_OPTIONS	0x7000000d</span>
<span class="cp">#define SHT_MIPS_SHDR		0x70000010</span>
<span class="cp">#define SHT_MIPS_FDESC		0x70000011</span>
<span class="cp">#define SHT_MIPS_EXTSYM		0x70000012</span>
<span class="cp">#define SHT_MIPS_DENSE		0x70000013</span>
<span class="cp">#define SHT_MIPS_PDESC		0x70000014</span>
<span class="cp">#define SHT_MIPS_LOCSYM		0x70000015</span>
<span class="cp">#define SHT_MIPS_AUXSYM		0x70000016</span>
<span class="cp">#define SHT_MIPS_OPTSYM		0x70000017</span>
<span class="cp">#define SHT_MIPS_LOCSTR		0x70000018</span>
<span class="cp">#define SHT_MIPS_LINE		0x70000019</span>
<span class="cp">#define SHT_MIPS_RFDESC		0x7000001a</span>
<span class="cp">#define SHT_MIPS_DELTASYM	0x7000001b</span>
<span class="cp">#define SHT_MIPS_DELTAINST	0x7000001c</span>
<span class="cp">#define SHT_MIPS_DELTACLASS	0x7000001d</span>
<span class="cp">#define SHT_MIPS_DWARF		0x7000001e</span>
<span class="cp">#define SHT_MIPS_DELTADECL	0x7000001f</span>
<span class="cp">#define SHT_MIPS_SYMBOL_LIB	0x70000020</span>
<span class="cp">#define SHT_MIPS_EVENTS		0x70000021</span>
<span class="cp">#define SHT_MIPS_TRANSLATE	0x70000022</span>
<span class="cp">#define SHT_MIPS_PIXIE		0x70000023</span>
<span class="cp">#define SHT_MIPS_XLATE		0x70000024</span>
<span class="cp">#define SHT_MIPS_XLATE_DEBUG	0x70000025</span>
<span class="cp">#define SHT_MIPS_WHIRL		0x70000026</span>
<span class="cp">#define SHT_MIPS_EH_REGION	0x70000027</span>
<span class="cp">#define SHT_MIPS_XLATE_OLD	0x70000028</span>
<span class="cp">#define SHT_MIPS_PDR_EXCEPTION	0x70000029</span>

<span class="cp">#define SHF_MIPS_GPREL		0x10000000</span>
<span class="cp">#define SHF_MIPS_MERGE		0x20000000</span>
<span class="cp">#define SHF_MIPS_ADDR		0x40000000</span>
<span class="cp">#define SHF_MIPS_STRING		0x80000000</span>
<span class="cp">#define SHF_MIPS_NOSTRIP	0x08000000</span>
<span class="cp">#define SHF_MIPS_LOCAL		0x04000000</span>
<span class="cp">#define SHF_MIPS_NAMES		0x02000000</span>
<span class="cp">#define SHF_MIPS_NODUPES	0x01000000</span>

<span class="cp">#ifndef ELF_ARCH</span>
<span class="cm">/* ELF register definitions */</span>
<span class="cp">#define ELF_NGREG	45</span>
<span class="cp">#define ELF_NFPREG	33</span>

<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">elf_greg_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">elf_greg_t</span> <span class="n">elf_gregset_t</span><span class="p">[</span><span class="n">ELF_NGREG</span><span class="p">];</span>

<span class="k">typedef</span> <span class="kt">double</span> <span class="n">elf_fpreg_t</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">elf_fpreg_t</span> <span class="n">elf_fpregset_t</span><span class="p">[</span><span class="n">ELF_NFPREG</span><span class="p">];</span>

<span class="cp">#ifdef CONFIG_32BIT</span>

<span class="cm">/*</span>
<span class="cm"> * This is used to ensure we don&#39;t load something for the wrong architecture.</span>
<span class="cm"> */</span>
<span class="cp">#define elf_check_arch(hdr)						\</span>
<span class="cp">({									\</span>
<span class="cp">	int __res = 1;							\</span>
<span class="cp">	struct elfhdr *__h = (hdr);					\</span>
<span class="cp">									\</span>
<span class="cp">	if (__h-&gt;e_machine != EM_MIPS)					\</span>
<span class="cp">		__res = 0;						\</span>
<span class="cp">	if (__h-&gt;e_ident[EI_CLASS] != ELFCLASS32)			\</span>
<span class="cp">		__res = 0;						\</span>
<span class="cp">	if ((__h-&gt;e_flags &amp; EF_MIPS_ABI2) != 0)				\</span>
<span class="cp">		__res = 0;						\</span>
<span class="cp">	if (((__h-&gt;e_flags &amp; EF_MIPS_ABI) != 0) &amp;&amp;			\</span>
<span class="cp">	    ((__h-&gt;e_flags &amp; EF_MIPS_ABI) != EF_MIPS_ABI_O32))		\</span>
<span class="cp">		__res = 0;						\</span>
<span class="cp">									\</span>
<span class="cp">	__res;								\</span>
<span class="cp">})</span>

<span class="cm">/*</span>
<span class="cm"> * These are used to set parameters in the core dumps.</span>
<span class="cm"> */</span>
<span class="cp">#define ELF_CLASS	ELFCLASS32</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_32BIT */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_64BIT</span>
<span class="cm">/*</span>
<span class="cm"> * This is used to ensure we don&#39;t load something for the wrong architecture.</span>
<span class="cm"> */</span>
<span class="cp">#define elf_check_arch(hdr)						\</span>
<span class="cp">({									\</span>
<span class="cp">	int __res = 1;							\</span>
<span class="cp">	struct elfhdr *__h = (hdr);					\</span>
<span class="cp">									\</span>
<span class="cp">	if (__h-&gt;e_machine != EM_MIPS)					\</span>
<span class="cp">		__res = 0;						\</span>
<span class="cp">	if (__h-&gt;e_ident[EI_CLASS] != ELFCLASS64) 			\</span>
<span class="cp">		__res = 0;						\</span>
<span class="cp">									\</span>
<span class="cp">	__res;								\</span>
<span class="cp">})</span>

<span class="cm">/*</span>
<span class="cm"> * These are used to set parameters in the core dumps.</span>
<span class="cm"> */</span>
<span class="cp">#define ELF_CLASS	ELFCLASS64</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_64BIT */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * These are used to set parameters in the core dumps.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef __MIPSEB__</span>
<span class="cp">#define ELF_DATA	ELFDATA2MSB</span>
<span class="cp">#elif defined(__MIPSEL__)</span>
<span class="cp">#define ELF_DATA	ELFDATA2LSB</span>
<span class="cp">#endif</span>
<span class="cp">#define ELF_ARCH	EM_MIPS</span>

<span class="cp">#endif </span><span class="cm">/* !defined(ELF_ARCH) */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">mips_abi</span><span class="p">;</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">mips_abi</span> <span class="n">mips_abi</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mips_abi</span> <span class="n">mips_abi_32</span><span class="p">;</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">mips_abi</span> <span class="n">mips_abi_n32</span><span class="p">;</span>

<span class="cp">#ifdef CONFIG_32BIT</span>

<span class="cp">#define SET_PERSONALITY(ex)						\</span>
<span class="cp">do {									\</span>
<span class="cp">	if (personality(current-&gt;personality) != PER_LINUX)		\</span>
<span class="cp">		set_personality(PER_LINUX);				\</span>
<span class="cp">									\</span>
<span class="cp">	current-&gt;thread.abi = &amp;mips_abi;				\</span>
<span class="cp">} while (0)</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_32BIT */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_64BIT</span>

<span class="cp">#ifdef CONFIG_MIPS32_N32</span>
<span class="cp">#define __SET_PERSONALITY32_N32()					\</span>
<span class="cp">	do {								\</span>
<span class="cp">		set_thread_flag(TIF_32BIT_ADDR);			\</span>
<span class="cp">		current-&gt;thread.abi = &amp;mips_abi_n32;			\</span>
<span class="cp">	} while (0)</span>
<span class="cp">#else</span>
<span class="cp">#define __SET_PERSONALITY32_N32()					\</span>
<span class="cp">	do { } while (0)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MIPS32_O32</span>
<span class="cp">#define __SET_PERSONALITY32_O32()					\</span>
<span class="cp">	do {								\</span>
<span class="cp">		set_thread_flag(TIF_32BIT_REGS);			\</span>
<span class="cp">		set_thread_flag(TIF_32BIT_ADDR);			\</span>
<span class="cp">		current-&gt;thread.abi = &amp;mips_abi_32;			\</span>
<span class="cp">	} while (0)</span>
<span class="cp">#else</span>
<span class="cp">#define __SET_PERSONALITY32_O32()					\</span>
<span class="cp">	do { } while (0)</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_MIPS32_COMPAT</span>
<span class="cp">#define __SET_PERSONALITY32(ex)						\</span>
<span class="cp">do {									\</span>
<span class="cp">	if ((((ex).e_flags &amp; EF_MIPS_ABI2) != 0) &amp;&amp;			\</span>
<span class="cp">	     ((ex).e_flags &amp; EF_MIPS_ABI) == 0)				\</span>
<span class="cp">		__SET_PERSONALITY32_N32();				\</span>
<span class="cp">	else								\</span>
<span class="cp">		__SET_PERSONALITY32_O32();				\</span>
<span class="cp">} while (0)</span>
<span class="cp">#else</span>
<span class="cp">#define __SET_PERSONALITY32(ex)	do { } while (0)</span>
<span class="cp">#endif</span>

<span class="cp">#define SET_PERSONALITY(ex)						\</span>
<span class="cp">do {									\</span>
<span class="cp">	unsigned int p;							\</span>
<span class="cp">									\</span>
<span class="cp">	clear_thread_flag(TIF_32BIT_REGS);				\</span>
<span class="cp">	clear_thread_flag(TIF_32BIT_ADDR);				\</span>
<span class="cp">									\</span>
<span class="cp">	if ((ex).e_ident[EI_CLASS] == ELFCLASS32)			\</span>
<span class="cp">		__SET_PERSONALITY32(ex);				\</span>
<span class="cp">	else								\</span>
<span class="cp">		current-&gt;thread.abi = &amp;mips_abi;			\</span>
<span class="cp">									\</span>
<span class="cp">	p = personality(current-&gt;personality);				\</span>
<span class="cp">	if (p != PER_LINUX32 &amp;&amp; p != PER_LINUX)				\</span>
<span class="cp">		set_personality(PER_LINUX);				\</span>
<span class="cp">} while (0)</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_64BIT */</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">pt_regs</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">task_struct</span><span class="p">;</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">elf_dump_regs</span><span class="p">(</span><span class="n">elf_greg_t</span> <span class="o">*</span><span class="p">,</span> <span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">dump_task_regs</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="p">,</span> <span class="n">elf_gregset_t</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">dump_task_fpu</span><span class="p">(</span><span class="k">struct</span> <span class="n">task_struct</span> <span class="o">*</span><span class="p">,</span> <span class="n">elf_fpregset_t</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#ifndef ELF_CORE_COPY_REGS</span>
<span class="cp">#define ELF_CORE_COPY_REGS(elf_regs, regs)			\</span>
<span class="cp">	elf_dump_regs((elf_greg_t *)&amp;(elf_regs), regs);</span>
<span class="cp">#endif</span>
<span class="cp">#ifndef ELF_CORE_COPY_TASK_REGS</span>
<span class="cp">#define ELF_CORE_COPY_TASK_REGS(tsk, elf_regs) dump_task_regs(tsk, elf_regs)</span>
<span class="cp">#endif</span>
<span class="cp">#define ELF_CORE_COPY_FPREGS(tsk, elf_fpregs)			\</span>
<span class="cp">	dump_task_fpu(tsk, elf_fpregs)</span>

<span class="cp">#define ELF_EXEC_PAGESIZE	PAGE_SIZE</span>

<span class="cm">/* This yields a mask that user programs can use to figure out what</span>
<span class="cm">   instruction set this cpu supports.  This could be done in userspace,</span>
<span class="cm">   but it&#39;s not easy, and we&#39;ve already done it here.  */</span>

<span class="cp">#define ELF_HWCAP       (0)</span>

<span class="cm">/*</span>
<span class="cm"> * This yields a string that ld.so will use to load implementation</span>
<span class="cm"> * specific libraries for optimization.  This is more specific in</span>
<span class="cm"> * intent than poking at uname or /proc/cpuinfo.</span>
<span class="cm"> */</span>

<span class="cp">#define ELF_PLATFORM  __elf_platform</span>
<span class="k">extern</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">__elf_platform</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * See comments in asm-alpha/elf.h, this is the same thing</span>
<span class="cm"> * on the MIPS.</span>
<span class="cm"> */</span>
<span class="cp">#define ELF_PLAT_INIT(_r, load_addr)	do { \</span>
<span class="cp">	_r-&gt;regs[1] = _r-&gt;regs[2] = _r-&gt;regs[3] = _r-&gt;regs[4] = 0;	\</span>
<span class="cp">	_r-&gt;regs[5] = _r-&gt;regs[6] = _r-&gt;regs[7] = _r-&gt;regs[8] = 0;	\</span>
<span class="cp">	_r-&gt;regs[9] = _r-&gt;regs[10] = _r-&gt;regs[11] = _r-&gt;regs[12] = 0;	\</span>
<span class="cp">	_r-&gt;regs[13] = _r-&gt;regs[14] = _r-&gt;regs[15] = _r-&gt;regs[16] = 0;	\</span>
<span class="cp">	_r-&gt;regs[17] = _r-&gt;regs[18] = _r-&gt;regs[19] = _r-&gt;regs[20] = 0;	\</span>
<span class="cp">	_r-&gt;regs[21] = _r-&gt;regs[22] = _r-&gt;regs[23] = _r-&gt;regs[24] = 0;	\</span>
<span class="cp">	_r-&gt;regs[25] = _r-&gt;regs[26] = _r-&gt;regs[27] = _r-&gt;regs[28] = 0;	\</span>
<span class="cp">	_r-&gt;regs[30] = _r-&gt;regs[31] = 0;				\</span>
<span class="cp">} while (0)</span>

<span class="cm">/* This is the location that an ET_DYN program is loaded if exec&#39;ed.  Typical</span>
<span class="cm">   use of this is to invoke &quot;./ld.so someprog&quot; to test out a new version of</span>
<span class="cm">   the loader.  We need to make sure that it is out of the way of the program</span>
<span class="cm">   that it will &quot;exec&quot;, and that there is sufficient room for the brk.  */</span>

<span class="cp">#ifndef ELF_ET_DYN_BASE</span>
<span class="cp">#define ELF_ET_DYN_BASE         (TASK_SIZE / 3 * 2)</span>
<span class="cp">#endif</span>

<span class="cp">#define ARCH_HAS_SETUP_ADDITIONAL_PAGES 1</span>
<span class="k">struct</span> <span class="n">linux_binprm</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">arch_setup_additional_pages</span><span class="p">(</span><span class="k">struct</span> <span class="n">linux_binprm</span> <span class="o">*</span><span class="n">bprm</span><span class="p">,</span>
				       <span class="kt">int</span> <span class="n">uses_interp</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">mm_struct</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">arch_randomize_brk</span><span class="p">(</span><span class="k">struct</span> <span class="n">mm_struct</span> <span class="o">*</span><span class="n">mm</span><span class="p">);</span>
<span class="cp">#define arch_randomize_brk arch_randomize_brk</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_ELF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
