<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › inst.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>inst.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Format of an instruction in memory.</span>
<span class="cm"> *</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 1996, 2000 by Ralf Baechle</span>
<span class="cm"> * Copyright (C) 2006 by Thiemo Seufer</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_INST_H</span>
<span class="cp">#define _ASM_INST_H</span>

<span class="cm">/*</span>
<span class="cm"> * Major opcodes; before MIPS IV cop1x was called cop3.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">major_op</span> <span class="p">{</span>
	<span class="n">spec_op</span><span class="p">,</span> <span class="n">bcond_op</span><span class="p">,</span> <span class="n">j_op</span><span class="p">,</span> <span class="n">jal_op</span><span class="p">,</span>
	<span class="n">beq_op</span><span class="p">,</span> <span class="n">bne_op</span><span class="p">,</span> <span class="n">blez_op</span><span class="p">,</span> <span class="n">bgtz_op</span><span class="p">,</span>
	<span class="n">addi_op</span><span class="p">,</span> <span class="n">addiu_op</span><span class="p">,</span> <span class="n">slti_op</span><span class="p">,</span> <span class="n">sltiu_op</span><span class="p">,</span>
	<span class="n">andi_op</span><span class="p">,</span> <span class="n">ori_op</span><span class="p">,</span> <span class="n">xori_op</span><span class="p">,</span> <span class="n">lui_op</span><span class="p">,</span>
	<span class="n">cop0_op</span><span class="p">,</span> <span class="n">cop1_op</span><span class="p">,</span> <span class="n">cop2_op</span><span class="p">,</span> <span class="n">cop1x_op</span><span class="p">,</span>
	<span class="n">beql_op</span><span class="p">,</span> <span class="n">bnel_op</span><span class="p">,</span> <span class="n">blezl_op</span><span class="p">,</span> <span class="n">bgtzl_op</span><span class="p">,</span>
	<span class="n">daddi_op</span><span class="p">,</span> <span class="n">daddiu_op</span><span class="p">,</span> <span class="n">ldl_op</span><span class="p">,</span> <span class="n">ldr_op</span><span class="p">,</span>
	<span class="n">spec2_op</span><span class="p">,</span> <span class="n">jalx_op</span><span class="p">,</span> <span class="n">mdmx_op</span><span class="p">,</span> <span class="n">spec3_op</span><span class="p">,</span>
	<span class="n">lb_op</span><span class="p">,</span> <span class="n">lh_op</span><span class="p">,</span> <span class="n">lwl_op</span><span class="p">,</span> <span class="n">lw_op</span><span class="p">,</span>
	<span class="n">lbu_op</span><span class="p">,</span> <span class="n">lhu_op</span><span class="p">,</span> <span class="n">lwr_op</span><span class="p">,</span> <span class="n">lwu_op</span><span class="p">,</span>
	<span class="n">sb_op</span><span class="p">,</span> <span class="n">sh_op</span><span class="p">,</span> <span class="n">swl_op</span><span class="p">,</span> <span class="n">sw_op</span><span class="p">,</span>
	<span class="n">sdl_op</span><span class="p">,</span> <span class="n">sdr_op</span><span class="p">,</span> <span class="n">swr_op</span><span class="p">,</span> <span class="n">cache_op</span><span class="p">,</span>
	<span class="n">ll_op</span><span class="p">,</span> <span class="n">lwc1_op</span><span class="p">,</span> <span class="n">lwc2_op</span><span class="p">,</span> <span class="n">pref_op</span><span class="p">,</span>
	<span class="n">lld_op</span><span class="p">,</span> <span class="n">ldc1_op</span><span class="p">,</span> <span class="n">ldc2_op</span><span class="p">,</span> <span class="n">ld_op</span><span class="p">,</span>
	<span class="n">sc_op</span><span class="p">,</span> <span class="n">swc1_op</span><span class="p">,</span> <span class="n">swc2_op</span><span class="p">,</span> <span class="n">major_3b_op</span><span class="p">,</span>
	<span class="n">scd_op</span><span class="p">,</span> <span class="n">sdc1_op</span><span class="p">,</span> <span class="n">sdc2_op</span><span class="p">,</span> <span class="n">sd_op</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of spec opcode.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">spec_op</span> <span class="p">{</span>
	<span class="n">sll_op</span><span class="p">,</span> <span class="n">movc_op</span><span class="p">,</span> <span class="n">srl_op</span><span class="p">,</span> <span class="n">sra_op</span><span class="p">,</span>
	<span class="n">sllv_op</span><span class="p">,</span> <span class="n">pmon_op</span><span class="p">,</span> <span class="n">srlv_op</span><span class="p">,</span> <span class="n">srav_op</span><span class="p">,</span>
	<span class="n">jr_op</span><span class="p">,</span> <span class="n">jalr_op</span><span class="p">,</span> <span class="n">movz_op</span><span class="p">,</span> <span class="n">movn_op</span><span class="p">,</span>
	<span class="n">syscall_op</span><span class="p">,</span> <span class="n">break_op</span><span class="p">,</span> <span class="n">spim_op</span><span class="p">,</span> <span class="n">sync_op</span><span class="p">,</span>
	<span class="n">mfhi_op</span><span class="p">,</span> <span class="n">mthi_op</span><span class="p">,</span> <span class="n">mflo_op</span><span class="p">,</span> <span class="n">mtlo_op</span><span class="p">,</span>
	<span class="n">dsllv_op</span><span class="p">,</span> <span class="n">spec2_unused_op</span><span class="p">,</span> <span class="n">dsrlv_op</span><span class="p">,</span> <span class="n">dsrav_op</span><span class="p">,</span>
	<span class="n">mult_op</span><span class="p">,</span> <span class="n">multu_op</span><span class="p">,</span> <span class="n">div_op</span><span class="p">,</span> <span class="n">divu_op</span><span class="p">,</span>
	<span class="n">dmult_op</span><span class="p">,</span> <span class="n">dmultu_op</span><span class="p">,</span> <span class="n">ddiv_op</span><span class="p">,</span> <span class="n">ddivu_op</span><span class="p">,</span>
	<span class="n">add_op</span><span class="p">,</span> <span class="n">addu_op</span><span class="p">,</span> <span class="n">sub_op</span><span class="p">,</span> <span class="n">subu_op</span><span class="p">,</span>
	<span class="n">and_op</span><span class="p">,</span> <span class="n">or_op</span><span class="p">,</span> <span class="n">xor_op</span><span class="p">,</span> <span class="n">nor_op</span><span class="p">,</span>
	<span class="n">spec3_unused_op</span><span class="p">,</span> <span class="n">spec4_unused_op</span><span class="p">,</span> <span class="n">slt_op</span><span class="p">,</span> <span class="n">sltu_op</span><span class="p">,</span>
	<span class="n">dadd_op</span><span class="p">,</span> <span class="n">daddu_op</span><span class="p">,</span> <span class="n">dsub_op</span><span class="p">,</span> <span class="n">dsubu_op</span><span class="p">,</span>
	<span class="n">tge_op</span><span class="p">,</span> <span class="n">tgeu_op</span><span class="p">,</span> <span class="n">tlt_op</span><span class="p">,</span> <span class="n">tltu_op</span><span class="p">,</span>
	<span class="n">teq_op</span><span class="p">,</span> <span class="n">spec5_unused_op</span><span class="p">,</span> <span class="n">tne_op</span><span class="p">,</span> <span class="n">spec6_unused_op</span><span class="p">,</span>
	<span class="n">dsll_op</span><span class="p">,</span> <span class="n">spec7_unused_op</span><span class="p">,</span> <span class="n">dsrl_op</span><span class="p">,</span> <span class="n">dsra_op</span><span class="p">,</span>
	<span class="n">dsll32_op</span><span class="p">,</span> <span class="n">spec8_unused_op</span><span class="p">,</span> <span class="n">dsrl32_op</span><span class="p">,</span> <span class="n">dsra32_op</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of spec2 opcode.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">spec2_op</span> <span class="p">{</span>
	<span class="n">madd_op</span><span class="p">,</span> <span class="n">maddu_op</span><span class="p">,</span> <span class="n">mul_op</span><span class="p">,</span> <span class="n">spec2_3_unused_op</span><span class="p">,</span>
	<span class="n">msub_op</span><span class="p">,</span> <span class="n">msubu_op</span><span class="p">,</span> <span class="cm">/* more unused ops */</span>
	<span class="n">clz_op</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span> <span class="n">clo_op</span><span class="p">,</span>
	<span class="n">dclz_op</span> <span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span> <span class="n">dclo_op</span><span class="p">,</span>
	<span class="n">sdbpp_op</span> <span class="o">=</span> <span class="mh">0x3f</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of spec3 opcode.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">spec3_op</span> <span class="p">{</span>
	<span class="n">ext_op</span><span class="p">,</span> <span class="n">dextm_op</span><span class="p">,</span> <span class="n">dextu_op</span><span class="p">,</span> <span class="n">dext_op</span><span class="p">,</span>
	<span class="n">ins_op</span><span class="p">,</span> <span class="n">dinsm_op</span><span class="p">,</span> <span class="n">dinsu_op</span><span class="p">,</span> <span class="n">dins_op</span><span class="p">,</span>
	<span class="n">lx_op</span> <span class="o">=</span> <span class="mh">0x0a</span><span class="p">,</span>
	<span class="n">bshfl_op</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">dbshfl_op</span> <span class="o">=</span> <span class="mh">0x24</span><span class="p">,</span>
	<span class="n">rdhwr_op</span> <span class="o">=</span> <span class="mh">0x3b</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * rt field of bcond opcodes.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">rt_op</span> <span class="p">{</span>
	<span class="n">bltz_op</span><span class="p">,</span> <span class="n">bgez_op</span><span class="p">,</span> <span class="n">bltzl_op</span><span class="p">,</span> <span class="n">bgezl_op</span><span class="p">,</span>
	<span class="n">spimi_op</span><span class="p">,</span> <span class="n">unused_rt_op_0x05</span><span class="p">,</span> <span class="n">unused_rt_op_0x06</span><span class="p">,</span> <span class="n">unused_rt_op_0x07</span><span class="p">,</span>
	<span class="n">tgei_op</span><span class="p">,</span> <span class="n">tgeiu_op</span><span class="p">,</span> <span class="n">tlti_op</span><span class="p">,</span> <span class="n">tltiu_op</span><span class="p">,</span>
	<span class="n">teqi_op</span><span class="p">,</span> <span class="n">unused_0x0d_rt_op</span><span class="p">,</span> <span class="n">tnei_op</span><span class="p">,</span> <span class="n">unused_0x0f_rt_op</span><span class="p">,</span>
	<span class="n">bltzal_op</span><span class="p">,</span> <span class="n">bgezal_op</span><span class="p">,</span> <span class="n">bltzall_op</span><span class="p">,</span> <span class="n">bgezall_op</span><span class="p">,</span>
	<span class="n">rt_op_0x14</span><span class="p">,</span> <span class="n">rt_op_0x15</span><span class="p">,</span> <span class="n">rt_op_0x16</span><span class="p">,</span> <span class="n">rt_op_0x17</span><span class="p">,</span>
	<span class="n">rt_op_0x18</span><span class="p">,</span> <span class="n">rt_op_0x19</span><span class="p">,</span> <span class="n">rt_op_0x1a</span><span class="p">,</span> <span class="n">rt_op_0x1b</span><span class="p">,</span>
	<span class="n">bposge32_op</span><span class="p">,</span> <span class="n">rt_op_0x1d</span><span class="p">,</span> <span class="n">rt_op_0x1e</span><span class="p">,</span> <span class="n">rt_op_0x1f</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * rs field of cop opcodes.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">cop_op</span> <span class="p">{</span>
	<span class="n">mfc_op</span>        <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span> <span class="n">dmfc_op</span>       <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">cfc_op</span>        <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">mtc_op</span>        <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">dmtc_op</span>       <span class="o">=</span> <span class="mh">0x05</span><span class="p">,</span> <span class="n">ctc_op</span>        <span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span>
	<span class="n">bc_op</span>         <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span> <span class="n">cop_op</span>        <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">copm_op</span>       <span class="o">=</span> <span class="mh">0x18</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * rt field of cop.bc_op opcodes</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">bcop_op</span> <span class="p">{</span>
	<span class="n">bcf_op</span><span class="p">,</span> <span class="n">bct_op</span><span class="p">,</span> <span class="n">bcfl_op</span><span class="p">,</span> <span class="n">bctl_op</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of cop0 coi opcodes.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">cop0_coi_func</span> <span class="p">{</span>
	<span class="n">tlbr_op</span>       <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">tlbwi_op</span>      <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">tlbwr_op</span>      <span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span> <span class="n">tlbp_op</span>       <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">rfe_op</span>        <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span> <span class="n">eret_op</span>       <span class="o">=</span> <span class="mh">0x18</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of cop0 com opcodes.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">cop0_com_func</span> <span class="p">{</span>
	<span class="n">tlbr1_op</span>      <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">tlbw_op</span>       <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span>
	<span class="n">tlbp1_op</span>      <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span> <span class="n">dctr_op</span>       <span class="o">=</span> <span class="mh">0x09</span><span class="p">,</span>
	<span class="n">dctw_op</span>       <span class="o">=</span> <span class="mh">0x0a</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * fmt field of cop1 opcodes.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">cop1_fmt</span> <span class="p">{</span>
	<span class="n">s_fmt</span><span class="p">,</span> <span class="n">d_fmt</span><span class="p">,</span> <span class="n">e_fmt</span><span class="p">,</span> <span class="n">q_fmt</span><span class="p">,</span>
	<span class="n">w_fmt</span><span class="p">,</span> <span class="n">l_fmt</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of cop1 instructions using d, s or w format.</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">cop1_sdw_func</span> <span class="p">{</span>
	<span class="n">fadd_op</span>      <span class="o">=</span>  <span class="mh">0x00</span><span class="p">,</span> <span class="n">fsub_op</span>      <span class="o">=</span>  <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">fmul_op</span>      <span class="o">=</span>  <span class="mh">0x02</span><span class="p">,</span> <span class="n">fdiv_op</span>      <span class="o">=</span>  <span class="mh">0x03</span><span class="p">,</span>
	<span class="n">fsqrt_op</span>     <span class="o">=</span>  <span class="mh">0x04</span><span class="p">,</span> <span class="n">fabs_op</span>      <span class="o">=</span>  <span class="mh">0x05</span><span class="p">,</span>
	<span class="n">fmov_op</span>      <span class="o">=</span>  <span class="mh">0x06</span><span class="p">,</span> <span class="n">fneg_op</span>      <span class="o">=</span>  <span class="mh">0x07</span><span class="p">,</span>
	<span class="n">froundl_op</span>   <span class="o">=</span>  <span class="mh">0x08</span><span class="p">,</span> <span class="n">ftruncl_op</span>   <span class="o">=</span>  <span class="mh">0x09</span><span class="p">,</span>
	<span class="n">fceill_op</span>    <span class="o">=</span>  <span class="mh">0x0a</span><span class="p">,</span> <span class="n">ffloorl_op</span>   <span class="o">=</span>  <span class="mh">0x0b</span><span class="p">,</span>
	<span class="n">fround_op</span>    <span class="o">=</span>  <span class="mh">0x0c</span><span class="p">,</span> <span class="n">ftrunc_op</span>    <span class="o">=</span>  <span class="mh">0x0d</span><span class="p">,</span>
	<span class="n">fceil_op</span>     <span class="o">=</span>  <span class="mh">0x0e</span><span class="p">,</span> <span class="n">ffloor_op</span>    <span class="o">=</span>  <span class="mh">0x0f</span><span class="p">,</span>
	<span class="n">fmovc_op</span>     <span class="o">=</span>  <span class="mh">0x11</span><span class="p">,</span> <span class="n">fmovz_op</span>     <span class="o">=</span>  <span class="mh">0x12</span><span class="p">,</span>
	<span class="n">fmovn_op</span>     <span class="o">=</span>  <span class="mh">0x13</span><span class="p">,</span> <span class="n">frecip_op</span>    <span class="o">=</span>  <span class="mh">0x15</span><span class="p">,</span>
	<span class="n">frsqrt_op</span>    <span class="o">=</span>  <span class="mh">0x16</span><span class="p">,</span> <span class="n">fcvts_op</span>     <span class="o">=</span>  <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">fcvtd_op</span>     <span class="o">=</span>  <span class="mh">0x21</span><span class="p">,</span> <span class="n">fcvte_op</span>     <span class="o">=</span>  <span class="mh">0x22</span><span class="p">,</span>
	<span class="n">fcvtw_op</span>     <span class="o">=</span>  <span class="mh">0x24</span><span class="p">,</span> <span class="n">fcvtl_op</span>     <span class="o">=</span>  <span class="mh">0x25</span><span class="p">,</span>
	<span class="n">fcmp_op</span>      <span class="o">=</span>  <span class="mh">0x30</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field of cop1x opcodes (MIPS IV).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">cop1x_func</span> <span class="p">{</span>
	<span class="n">lwxc1_op</span>     <span class="o">=</span>  <span class="mh">0x00</span><span class="p">,</span> <span class="n">ldxc1_op</span>     <span class="o">=</span>  <span class="mh">0x01</span><span class="p">,</span>
	<span class="n">pfetch_op</span>    <span class="o">=</span>  <span class="mh">0x07</span><span class="p">,</span> <span class="n">swxc1_op</span>     <span class="o">=</span>  <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">sdxc1_op</span>     <span class="o">=</span>  <span class="mh">0x09</span><span class="p">,</span> <span class="n">madd_s_op</span>    <span class="o">=</span>  <span class="mh">0x20</span><span class="p">,</span>
	<span class="n">madd_d_op</span>    <span class="o">=</span>  <span class="mh">0x21</span><span class="p">,</span> <span class="n">madd_e_op</span>    <span class="o">=</span>  <span class="mh">0x22</span><span class="p">,</span>
	<span class="n">msub_s_op</span>    <span class="o">=</span>  <span class="mh">0x28</span><span class="p">,</span> <span class="n">msub_d_op</span>    <span class="o">=</span>  <span class="mh">0x29</span><span class="p">,</span>
	<span class="n">msub_e_op</span>    <span class="o">=</span>  <span class="mh">0x2a</span><span class="p">,</span> <span class="n">nmadd_s_op</span>   <span class="o">=</span>  <span class="mh">0x30</span><span class="p">,</span>
	<span class="n">nmadd_d_op</span>   <span class="o">=</span>  <span class="mh">0x31</span><span class="p">,</span> <span class="n">nmadd_e_op</span>   <span class="o">=</span>  <span class="mh">0x32</span><span class="p">,</span>
	<span class="n">nmsub_s_op</span>   <span class="o">=</span>  <span class="mh">0x38</span><span class="p">,</span> <span class="n">nmsub_d_op</span>   <span class="o">=</span>  <span class="mh">0x39</span><span class="p">,</span>
	<span class="n">nmsub_e_op</span>   <span class="o">=</span>  <span class="mh">0x3a</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field for mad opcodes (MIPS IV).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">mad_func</span> <span class="p">{</span>
	<span class="n">madd_fp_op</span>      <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span> <span class="n">msub_fp_op</span>      <span class="o">=</span> <span class="mh">0x0a</span><span class="p">,</span>
	<span class="n">nmadd_fp_op</span>     <span class="o">=</span> <span class="mh">0x0c</span><span class="p">,</span> <span class="n">nmsub_fp_op</span>     <span class="o">=</span> <span class="mh">0x0e</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * func field for special3 lx opcodes (Cavium Octeon).</span>
<span class="cm"> */</span>
<span class="k">enum</span> <span class="n">lx_func</span> <span class="p">{</span>
	<span class="n">lwx_op</span>	<span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
	<span class="n">lhx_op</span>	<span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span>
	<span class="n">lbux_op</span>	<span class="o">=</span> <span class="mh">0x06</span><span class="p">,</span>
	<span class="n">ldx_op</span>	<span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="n">lwux_op</span>	<span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="n">lhux_op</span>	<span class="o">=</span> <span class="mh">0x14</span><span class="p">,</span>
	<span class="n">lbx_op</span>	<span class="o">=</span> <span class="mh">0x16</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Damn ...  bitfields depend from byteorder :-(</span>
<span class="cm"> */</span>
<span class="cp">#ifdef __MIPSEB__</span>
<span class="k">struct</span> <span class="n">j_format</span> <span class="p">{</span>	<span class="cm">/* Jump format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">target</span> <span class="o">:</span> <span class="mi">26</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">i_format</span> <span class="p">{</span>	<span class="cm">/* Immediate format (addi, lw, ...) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">signed</span> <span class="kt">int</span> <span class="n">simmediate</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">u_format</span> <span class="p">{</span>	<span class="cm">/* Unsigned immediate format (ori, xori, ...) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uimmediate</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">c_format</span> <span class="p">{</span>	<span class="cm">/* Cache (&gt;= R6000) format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">c_op</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cache</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">simmediate</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">r_format</span> <span class="p">{</span>	<span class="cm">/* Register format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">re</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">p_format</span> <span class="p">{</span>	<span class="cm">/* Performance counter format (R10000) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">re</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">f_format</span> <span class="p">{</span>	<span class="cm">/* FPU register format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">re</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ma_format</span> <span class="p">{</span>	<span class="cm">/* FPU multipy and add format (MIPS IV) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fr</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ft</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">b_format</span> <span class="p">{</span> <span class="cm">/* BREAK and SYSCALL */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">code</span><span class="o">:</span><span class="mi">20</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#elif defined(__MIPSEL__)</span>

<span class="k">struct</span> <span class="n">j_format</span> <span class="p">{</span>	<span class="cm">/* Jump format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">target</span> <span class="o">:</span> <span class="mi">26</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">i_format</span> <span class="p">{</span>	<span class="cm">/* Immediate format */</span>
	<span class="kt">signed</span> <span class="kt">int</span> <span class="n">simmediate</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">u_format</span> <span class="p">{</span>	<span class="cm">/* Unsigned immediate format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">uimmediate</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">c_format</span> <span class="p">{</span>	<span class="cm">/* Cache (&gt;= R6000) format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">simmediate</span> <span class="o">:</span> <span class="mi">16</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cache</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">c_op</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">r_format</span> <span class="p">{</span>	<span class="cm">/* Register format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">re</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">p_format</span> <span class="p">{</span>	<span class="cm">/* Performance counter format (R10000) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">re</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">f_format</span> <span class="p">{</span>	<span class="cm">/* FPU register format */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">re</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">rt</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">ma_format</span> <span class="p">{</span>	<span class="cm">/* FPU multipy and add format (MIPS IV) */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fmt</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span> <span class="o">:</span> <span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fd</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fs</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ft</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">fr</span> <span class="o">:</span> <span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span> <span class="o">:</span> <span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">b_format</span> <span class="p">{</span> <span class="cm">/* BREAK and SYSCALL */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">func</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">code</span><span class="o">:</span><span class="mi">20</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">opcode</span><span class="o">:</span><span class="mi">6</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#else </span><span class="cm">/* !defined (__MIPSEB__) &amp;&amp; !defined (__MIPSEL__) */</span><span class="cp"></span>
<span class="cp">#error &quot;MIPS but neither __MIPSEL__ nor __MIPSEB__?&quot;</span>
<span class="cp">#endif</span>

<span class="k">union</span> <span class="n">mips_instruction</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">word</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">halfword</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">byte</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
	<span class="k">struct</span> <span class="n">j_format</span> <span class="n">j_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">i_format</span> <span class="n">i_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">u_format</span> <span class="n">u_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">c_format</span> <span class="n">c_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">r_format</span> <span class="n">r_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">f_format</span> <span class="n">f_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">ma_format</span> <span class="n">ma_format</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">b_format</span> <span class="n">b_format</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* HACHACHAHCAHC ...  */</span>

<span class="cm">/* In case some other massaging is needed, keep MIPSInst as wrapper */</span>

<span class="cp">#define MIPSInst(x) x</span>

<span class="cp">#define I_OPCODE_SFT	26</span>
<span class="cp">#define MIPSInst_OPCODE(x) (MIPSInst(x) &gt;&gt; I_OPCODE_SFT)</span>

<span class="cp">#define I_JTARGET_SFT	0</span>
<span class="cp">#define MIPSInst_JTARGET(x) (MIPSInst(x) &amp; 0x03ffffff)</span>

<span class="cp">#define I_RS_SFT	21</span>
<span class="cp">#define MIPSInst_RS(x) ((MIPSInst(x) &amp; 0x03e00000) &gt;&gt; I_RS_SFT)</span>

<span class="cp">#define I_RT_SFT	16</span>
<span class="cp">#define MIPSInst_RT(x) ((MIPSInst(x) &amp; 0x001f0000) &gt;&gt; I_RT_SFT)</span>

<span class="cp">#define I_IMM_SFT	0</span>
<span class="cp">#define MIPSInst_SIMM(x) ((int)((short)(MIPSInst(x) &amp; 0xffff)))</span>
<span class="cp">#define MIPSInst_UIMM(x) (MIPSInst(x) &amp; 0xffff)</span>

<span class="cp">#define I_CACHEOP_SFT	18</span>
<span class="cp">#define MIPSInst_CACHEOP(x) ((MIPSInst(x) &amp; 0x001c0000) &gt;&gt; I_CACHEOP_SFT)</span>

<span class="cp">#define I_CACHESEL_SFT	16</span>
<span class="cp">#define MIPSInst_CACHESEL(x) ((MIPSInst(x) &amp; 0x00030000) &gt;&gt; I_CACHESEL_SFT)</span>

<span class="cp">#define I_RD_SFT	11</span>
<span class="cp">#define MIPSInst_RD(x) ((MIPSInst(x) &amp; 0x0000f800) &gt;&gt; I_RD_SFT)</span>

<span class="cp">#define I_RE_SFT	6</span>
<span class="cp">#define MIPSInst_RE(x) ((MIPSInst(x) &amp; 0x000007c0) &gt;&gt; I_RE_SFT)</span>

<span class="cp">#define I_FUNC_SFT	0</span>
<span class="cp">#define MIPSInst_FUNC(x) (MIPSInst(x) &amp; 0x0000003f)</span>

<span class="cp">#define I_FFMT_SFT	21</span>
<span class="cp">#define MIPSInst_FFMT(x) ((MIPSInst(x) &amp; 0x01e00000) &gt;&gt; I_FFMT_SFT)</span>

<span class="cp">#define I_FT_SFT	16</span>
<span class="cp">#define MIPSInst_FT(x) ((MIPSInst(x) &amp; 0x001f0000) &gt;&gt; I_FT_SFT)</span>

<span class="cp">#define I_FS_SFT	11</span>
<span class="cp">#define MIPSInst_FS(x) ((MIPSInst(x) &amp; 0x0000f800) &gt;&gt; I_FS_SFT)</span>

<span class="cp">#define I_FD_SFT	6</span>
<span class="cp">#define MIPSInst_FD(x) ((MIPSInst(x) &amp; 0x000007c0) &gt;&gt; I_FD_SFT)</span>

<span class="cp">#define I_FR_SFT	21</span>
<span class="cp">#define MIPSInst_FR(x) ((MIPSInst(x) &amp; 0x03e00000) &gt;&gt; I_FR_SFT)</span>

<span class="cp">#define I_FMA_FUNC_SFT	2</span>
<span class="cp">#define MIPSInst_FMA_FUNC(x) ((MIPSInst(x) &amp; 0x0000003c) &gt;&gt; I_FMA_FUNC_SFT)</span>

<span class="cp">#define I_FMA_FFMT_SFT	0</span>
<span class="cp">#define MIPSInst_FMA_FFMT(x) (MIPSInst(x) &amp; 0x00000003)</span>

<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">mips_instruction</span><span class="p">;</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_INST_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
