f | dma-coherence.h | s | 1.5K | 59 | David Daney | ddaney@caviumnetworks.com | 1288375712 |  | MIPS: Octeon: Rewrite DMA mapping functions.  All Octeon chips can support more than 4GB of RAM.  Also due to how Octeon PCI is setup, even some configurations with less than 4GB of RAM will have portions that are not accessible from 32-bit devices.  Enable the swiotlb code to handle the cases where a device cannot directly do DMA.  This is a complete rewrite of the Octeon DMA mapping code.  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Patchwork: http://patchwork.linux-mips.org/patch/1639/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cpu-feature-overrides.h | s | 2.2K | 78 | David Daney | david.daney@cavium.com | 1316821481 |  | MIPS: Octeon: Enable C0_UserLocal probing.  Octeon2 processor cores have a UserLocal register.  Remove the hard coded negative probe and allow the standard probing to detect this feature.  Signed-off-by: David Daney <david.daney@cavium.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2578/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | kernel-entry-init.h | s | 3.5K | 126 | Chandrakala Chavva | cchavva@caviumnetworks.com | 1305795349 |  | Octeon: Fix interrupt irq settings for performance counters.  Octeon uses different interrupt irq for timer and performance counters. Set CvmCtl[IPPCI] to correct irq value very early.  Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com> Signed-off-by: David Daney <ddaney@caviumnetworks.com> To: linux-mips@linux-mips.org Cc: Chandrakala Chavva <cchavva@caviumnetworks.com> Patchwork: https://patchwork.linux-mips.org/patch/2085/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | war.h | s | 897B | 24 | David Daney | ddaney@caviumnetworks.com | 1231667841 |  | MIPS: Add Cavium OCTEON processor support files to arch/mips/cavium-octeon.  These are the rest of the new files needed to add OCTEON processor support to the Linux kernel.  Other than Makefile and Kconfig which should be obvious, we have:  csrc-octeon.c   -- Clock source driver for OCTEON. dma-octeon.c    -- Helper functions for mapping DMA memory. flash_setup.c   -- Register on-board flash with the MTD subsystem. octeon-irq.c    -- OCTEON interrupt controller managment. octeon-memcpy.S -- Optimized memcpy() implementation. serial.c        -- Register 8250 platform driver and early console. setup.c         -- Early architecture initialization. smp.c           -- OCTEON SMP support. octeon_switch.S -- Scheduler context switch for OCTEON. c-octeon.c      -- OCTEON cache controller support. cex-oct.S       -- OCTEON cache exception handler.  asm/mach-cavium-octeon/*.h -- Architecture include files.  Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com> Signed-off-by: David Daney <ddaney@caviumnetworks.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>   create mode 100644 arch/mips/cavium-octeon/Kconfig  create mode 100644 arch/mips/cavium-octeon/Makefile  create mode 100644 arch/mips/cavium-octeon/csrc-octeon.c  create mode 100644 arch/mips/cavium-octeon/dma-octeon.c  create mode 100644 arch/mips/cavium-octeon/flash_setup.c  create mode 100644 arch/mips/cavium-octeon/octeon-irq.c  create mode 100644 arch/mips/cavium-octeon/octeon-memcpy.S  create mode 100644 arch/mips/cavium-octeon/serial.c  create mode 100644 arch/mips/cavium-octeon/setup.c  create mode 100644 arch/mips/cavium-octeon/smp.c  create mode 100644 arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h  create mode 100644 arch/mips/include/asm/mach-cavium-octeon/dma-coherence.h  create mode 100644 arch/mips/include/asm/mach-cavium-octeon/irq.h  create mode 100644 arch/mips/include/asm/mach-cavium-octeon/kernel-entry-init.h  create mode 100644 arch/mips/include/asm/mach-cavium-octeon/war.h  create mode 100644 arch/mips/include/asm/octeon/octeon.h  create mode 100644 arch/mips/kernel/octeon_switch.S  create mode 100644 arch/mips/mm/c-octeon.c  create mode 100644 arch/mips/mm/cex-oct.S
f | irq.h | s | 2.8K | 94 | David Daney | ddaney@caviumnetworks.com | 1301402886 |  | MIPS: Octeon: Rewrite interrupt handling code.  This includes conversion to new style irq_chip functions, and correctly enabling/disabling per-CPU interrupts.  The hardware interrupt bit to irq number mapping is now done with a flexible map, instead of by bit twiddling the irq number.  [ tglx: Adjusted to new irq_cpu_on/offline callbacks and         __irq_set_affinity_lock ]  Signed-off-by: David Daney <ddaney@caviumnetworks.com> Cc: linux-mips@linux-mips.org Cc: ralf@linux-mips.org LKML-Reference: <1301081931-11240-5-git-send-email-ddaney@caviumnetworks.com> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
