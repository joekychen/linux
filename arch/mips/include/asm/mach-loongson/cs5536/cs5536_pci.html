<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › mach-loongson › cs5536 › cs5536_pci.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../../index.html"></a><h1>cs5536_pci.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * the definition file of cs5536 Virtual Support Module(VSM).</span>
<span class="cm"> * pci configuration space can be accessed through the VSM, so</span>
<span class="cm"> * there is no need of the MSR read/write now, except the spec.</span>
<span class="cm"> * MSR registers which are not implemented yet.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007 Lemote Inc.</span>
<span class="cm"> * Author : jlliu, liujl@lemote.com</span>
<span class="cm"> */</span>

<span class="cp">#ifndef	_CS5536_PCI_H</span>
<span class="cp">#define	_CS5536_PCI_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/pci_regs.h&gt;</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">cs5536_pci_conf_write4</span><span class="p">(</span><span class="kt">int</span> <span class="n">function</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">,</span> <span class="n">u32</span> <span class="n">value</span><span class="p">);</span>
<span class="k">extern</span> <span class="n">u32</span> <span class="n">cs5536_pci_conf_read4</span><span class="p">(</span><span class="kt">int</span> <span class="n">function</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">);</span>

<span class="cp">#define	CS5536_ACC_INTR		9</span>
<span class="cp">#define	CS5536_IDE_INTR		14</span>
<span class="cp">#define	CS5536_USB_INTR		11</span>
<span class="cp">#define	CS5536_MFGPT_INTR	5</span>
<span class="cp">#define	CS5536_UART1_INTR	4</span>
<span class="cp">#define	CS5536_UART2_INTR	3</span>

<span class="cm">/************** PCI BUS DEVICE FUNCTION ***************/</span>

<span class="cm">/*</span>
<span class="cm"> * PCI bus device function</span>
<span class="cm"> */</span>
<span class="cp">#define	PCI_BUS_CS5536		0</span>
<span class="cp">#define	PCI_IDSEL_CS5536	14</span>

<span class="cm">/********** STANDARD PCI-2.2 EXPANSION ****************/</span>

<span class="cm">/*</span>
<span class="cm"> * PCI configuration space</span>
<span class="cm"> * we have to virtualize the PCI configure space head, so we should</span>
<span class="cm"> * define the necessary IDs and some others.</span>
<span class="cm"> */</span>

<span class="cm">/* CONFIG of PCI VENDOR ID*/</span>
<span class="cp">#define CFG_PCI_VENDOR_ID(mod_dev_id, sys_vendor_id) \</span>
<span class="cp">	(((mod_dev_id) &lt;&lt; 16) | (sys_vendor_id))</span>

<span class="cm">/* VENDOR ID */</span>
<span class="cp">#define	CS5536_VENDOR_ID	0x1022</span>

<span class="cm">/* DEVICE ID */</span>
<span class="cp">#define	CS5536_ISA_DEVICE_ID		0x2090</span>
<span class="cp">#define	CS5536_IDE_DEVICE_ID		0x209a</span>
<span class="cp">#define	CS5536_ACC_DEVICE_ID		0x2093</span>
<span class="cp">#define	CS5536_OHCI_DEVICE_ID		0x2094</span>
<span class="cp">#define	CS5536_EHCI_DEVICE_ID		0x2095</span>

<span class="cm">/* CLASS CODE : CLASS SUB-CLASS INTERFACE */</span>
<span class="cp">#define	CS5536_ISA_CLASS_CODE		0x060100</span>
<span class="cp">#define CS5536_IDE_CLASS_CODE		0x010180</span>
<span class="cp">#define	CS5536_ACC_CLASS_CODE		0x040100</span>
<span class="cp">#define	CS5536_OHCI_CLASS_CODE		0x0C0310</span>
<span class="cp">#define	CS5536_EHCI_CLASS_CODE		0x0C0320</span>

<span class="cm">/* BHLC : BIST HEADER-TYPE LATENCY-TIMER CACHE-LINE-SIZE */</span>

<span class="cp">#define CFG_PCI_CACHE_LINE_SIZE(header_type, latency_timer)	\</span>
<span class="cp">	((PCI_NONE_BIST &lt;&lt; 24) | ((header_type) &lt;&lt; 16) \</span>
<span class="cp">		| ((latency_timer) &lt;&lt; 8) | PCI_NORMAL_CACHE_LINE_SIZE);</span>

<span class="cp">#define	PCI_NONE_BIST			0x00	</span><span class="cm">/* RO not implemented yet. */</span><span class="cp"></span>
<span class="cp">#define	PCI_BRIDGE_HEADER_TYPE		0x80	</span><span class="cm">/* RO */</span><span class="cp"></span>
<span class="cp">#define	PCI_NORMAL_HEADER_TYPE		0x00</span>
<span class="cp">#define	PCI_NORMAL_LATENCY_TIMER	0x00</span>
<span class="cp">#define	PCI_NORMAL_CACHE_LINE_SIZE	0x08	</span><span class="cm">/* RW */</span><span class="cp"></span>

<span class="cm">/* BAR */</span>
<span class="cp">#define	PCI_BAR0_REG			0x10</span>
<span class="cp">#define	PCI_BAR1_REG			0x14</span>
<span class="cp">#define	PCI_BAR2_REG			0x18</span>
<span class="cp">#define	PCI_BAR3_REG			0x1c</span>
<span class="cp">#define	PCI_BAR4_REG			0x20</span>
<span class="cp">#define	PCI_BAR5_REG			0x24</span>
<span class="cp">#define	PCI_BAR_COUNT			6</span>
<span class="cp">#define	PCI_BAR_RANGE_MASK		0xFFFFFFFF</span>

<span class="cm">/* CARDBUS CIS POINTER */</span>
<span class="cp">#define	PCI_CARDBUS_CIS_POINTER		0x00000000</span>

<span class="cm">/* SUBSYSTEM VENDOR ID  */</span>
<span class="cp">#define	CS5536_SUB_VENDOR_ID		CS5536_VENDOR_ID</span>

<span class="cm">/* SUBSYSTEM ID */</span>
<span class="cp">#define	CS5536_ISA_SUB_ID		CS5536_ISA_DEVICE_ID</span>
<span class="cp">#define	CS5536_IDE_SUB_ID		CS5536_IDE_DEVICE_ID</span>
<span class="cp">#define	CS5536_ACC_SUB_ID		CS5536_ACC_DEVICE_ID</span>
<span class="cp">#define	CS5536_OHCI_SUB_ID		CS5536_OHCI_DEVICE_ID</span>
<span class="cp">#define	CS5536_EHCI_SUB_ID		CS5536_EHCI_DEVICE_ID</span>

<span class="cm">/* EXPANSION ROM BAR */</span>
<span class="cp">#define	PCI_EXPANSION_ROM_BAR		0x00000000</span>

<span class="cm">/* CAPABILITIES POINTER */</span>
<span class="cp">#define	PCI_CAPLIST_POINTER		0x00000000</span>
<span class="cp">#define PCI_CAPLIST_USB_POINTER		0x40</span>
<span class="cm">/* INTERRUPT */</span>

<span class="cp">#define CFG_PCI_INTERRUPT_LINE(pin, mod_intr) \</span>
<span class="cp">	((PCI_MAX_LATENCY &lt;&lt; 24) | (PCI_MIN_GRANT &lt;&lt; 16) | \</span>
<span class="cp">		((pin) &lt;&lt; 8) | (mod_intr))</span>

<span class="cp">#define	PCI_MAX_LATENCY			0x40</span>
<span class="cp">#define	PCI_MIN_GRANT			0x00</span>
<span class="cp">#define	PCI_DEFAULT_PIN			0x01</span>

<span class="cm">/*********** EXPANSION PCI REG ************************/</span>

<span class="cm">/*</span>
<span class="cm"> * ISA EXPANSION</span>
<span class="cm"> */</span>
<span class="cp">#define	PCI_UART1_INT_REG 	0x50</span>
<span class="cp">#define PCI_UART2_INT_REG	0x54</span>
<span class="cp">#define	PCI_ISA_FIXUP_REG	0x58</span>

<span class="cm">/*</span>
<span class="cm"> * IDE EXPANSION</span>
<span class="cm"> */</span>
<span class="cp">#define	PCI_IDE_CFG_REG		0x40</span>
<span class="cp">#define	CS5536_IDE_FLASH_SIGNATURE	0xDEADBEEF</span>
<span class="cp">#define	PCI_IDE_DTC_REG		0x48</span>
<span class="cp">#define	PCI_IDE_CAST_REG	0x4C</span>
<span class="cp">#define	PCI_IDE_ETC_REG		0x50</span>
<span class="cp">#define	PCI_IDE_PM_REG		0x54</span>
<span class="cp">#define	PCI_IDE_INT_REG		0x60</span>

<span class="cm">/*</span>
<span class="cm"> * ACC EXPANSION</span>
<span class="cm"> */</span>
<span class="cp">#define	PCI_ACC_INT_REG		0x50</span>

<span class="cm">/*</span>
<span class="cm"> * OHCI EXPANSION : INTTERUPT IS IMPLEMENTED BY THE OHCI</span>
<span class="cm"> */</span>
<span class="cp">#define	PCI_OHCI_PM_REG		0x40</span>
<span class="cp">#define	PCI_OHCI_INT_REG	0x50</span>

<span class="cm">/*</span>
<span class="cm"> * EHCI EXPANSION</span>
<span class="cm"> */</span>
<span class="cp">#define	PCI_EHCI_LEGSMIEN_REG	0x50</span>
<span class="cp">#define	PCI_EHCI_LEGSMISTS_REG	0x54</span>
<span class="cp">#define	PCI_EHCI_FLADJ_REG	0x60</span>

<span class="cp">#endif				</span><span class="cm">/* _CS5536_PCI_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:6}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../../javascript/docco.min.js"></script>
</html>
