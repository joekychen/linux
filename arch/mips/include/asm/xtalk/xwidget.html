<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › xtalk › xwidget.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>xwidget.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> * xwidget.h - generic crosstalk widget header file, derived from IRIX</span>
<span class="cm"> * &lt;sys/xtalk/xtalkwidget.h&gt;, revision 1.32.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 1996, 1999 Silcon Graphics, Inc.</span>
<span class="cm"> * Copyright (C) 1999 Ralf Baechle (ralf@gnu.org)</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_XTALK_XWIDGET_H</span>
<span class="cp">#define _ASM_XTALK_XWIDGET_H</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;asm/xtalk/xtalk.h&gt;</span>

<span class="cp">#define WIDGET_ID			0x04</span>
<span class="cp">#define WIDGET_STATUS			0x0c</span>
<span class="cp">#define WIDGET_ERR_UPPER_ADDR		0x14</span>
<span class="cp">#define WIDGET_ERR_LOWER_ADDR		0x1c</span>
<span class="cp">#define WIDGET_CONTROL			0x24</span>
<span class="cp">#define WIDGET_REQ_TIMEOUT		0x2c</span>
<span class="cp">#define WIDGET_INTDEST_UPPER_ADDR	0x34</span>
<span class="cp">#define WIDGET_INTDEST_LOWER_ADDR	0x3c</span>
<span class="cp">#define WIDGET_ERR_CMD_WORD		0x44</span>
<span class="cp">#define WIDGET_LLP_CFG			0x4c</span>
<span class="cp">#define WIDGET_TFLUSH			0x54</span>

<span class="cm">/* WIDGET_ID */</span>
<span class="cp">#define WIDGET_REV_NUM			0xf0000000</span>
<span class="cp">#define WIDGET_PART_NUM			0x0ffff000</span>
<span class="cp">#define WIDGET_MFG_NUM			0x00000ffe</span>
<span class="cp">#define WIDGET_REV_NUM_SHFT		28</span>
<span class="cp">#define WIDGET_PART_NUM_SHFT		12</span>
<span class="cp">#define WIDGET_MFG_NUM_SHFT		1</span>

<span class="cp">#define XWIDGET_PART_NUM(widgetid) (((widgetid) &amp; WIDGET_PART_NUM) &gt;&gt; WIDGET_PART_NUM_SHFT)</span>
<span class="cp">#define XWIDGET_REV_NUM(widgetid) (((widgetid) &amp; WIDGET_REV_NUM) &gt;&gt; WIDGET_REV_NUM_SHFT)</span>
<span class="cp">#define XWIDGET_MFG_NUM(widgetid) (((widgetid) &amp; WIDGET_MFG_NUM) &gt;&gt; WIDGET_MFG_NUM_SHFT)</span>

<span class="cm">/* WIDGET_STATUS */</span>
<span class="cp">#define WIDGET_LLP_REC_CNT		0xff000000</span>
<span class="cp">#define WIDGET_LLP_TX_CNT		0x00ff0000</span>
<span class="cp">#define WIDGET_PENDING			0x0000001f</span>

<span class="cm">/* WIDGET_ERR_UPPER_ADDR */</span>
<span class="cp">#define	WIDGET_ERR_UPPER_ADDR_ONLY	0x0000ffff</span>

<span class="cm">/* WIDGET_CONTROL */</span>
<span class="cp">#define WIDGET_F_BAD_PKT		0x00010000</span>
<span class="cp">#define WIDGET_LLP_XBAR_CRD		0x0000f000</span>
<span class="cp">#define	WIDGET_LLP_XBAR_CRD_SHFT	12</span>
<span class="cp">#define WIDGET_CLR_RLLP_CNT		0x00000800</span>
<span class="cp">#define WIDGET_CLR_TLLP_CNT		0x00000400</span>
<span class="cp">#define WIDGET_SYS_END			0x00000200</span>
<span class="cp">#define WIDGET_MAX_TRANS		0x000001f0</span>
<span class="cp">#define WIDGET_WIDGET_ID		0x0000000f</span>

<span class="cm">/* WIDGET_INTDEST_UPPER_ADDR */</span>
<span class="cp">#define WIDGET_INT_VECTOR		0xff000000</span>
<span class="cp">#define WIDGET_INT_VECTOR_SHFT		24</span>
<span class="cp">#define WIDGET_TARGET_ID		0x000f0000</span>
<span class="cp">#define WIDGET_TARGET_ID_SHFT		16</span>
<span class="cp">#define WIDGET_UPP_ADDR			0x0000ffff</span>

<span class="cm">/* WIDGET_ERR_CMD_WORD */</span>
<span class="cp">#define WIDGET_DIDN			0xf0000000</span>
<span class="cp">#define WIDGET_SIDN			0x0f000000</span>
<span class="cp">#define WIDGET_PACTYP			0x00f00000</span>
<span class="cp">#define WIDGET_TNUM			0x000f8000</span>
<span class="cp">#define WIDGET_COHERENT			0x00004000</span>
<span class="cp">#define WIDGET_DS			0x00003000</span>
<span class="cp">#define WIDGET_GBR			0x00000800</span>
<span class="cp">#define WIDGET_VBPM			0x00000400</span>
<span class="cp">#define WIDGET_ERROR			0x00000200</span>
<span class="cp">#define WIDGET_BARRIER			0x00000100</span>

<span class="cm">/* WIDGET_LLP_CFG */</span>
<span class="cp">#define WIDGET_LLP_MAXRETRY		0x03ff0000</span>
<span class="cp">#define WIDGET_LLP_MAXRETRY_SHFT	16</span>
<span class="cp">#define WIDGET_LLP_NULLTIMEOUT		0x0000fc00</span>
<span class="cp">#define WIDGET_LLP_NULLTIMEOUT_SHFT	10</span>
<span class="cp">#define WIDGET_LLP_MAXBURST		0x000003ff</span>
<span class="cp">#define WIDGET_LLP_MAXBURST_SHFT	0</span>

<span class="cm">/*</span>
<span class="cm"> * according to the crosstalk spec, only 32-bits access to the widget</span>
<span class="cm"> * configuration registers is allowed.  some widgets may allow 64-bits</span>
<span class="cm"> * access but software should not depend on it.  registers beyond the</span>
<span class="cm"> * widget target flush register are widget dependent thus will not be</span>
<span class="cm"> * defined here</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="k">typedef</span> <span class="n">u32</span> <span class="n">widgetreg_t</span><span class="p">;</span>

<span class="cm">/* widget configuration registers */</span>
<span class="k">typedef</span> <span class="k">volatile</span> <span class="k">struct</span> <span class="n">widget_cfg</span> <span class="p">{</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_0</span><span class="p">;</span>		<span class="cm">/* 0x00 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_id</span><span class="p">;</span>			<span class="cm">/* 0x04 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_1</span><span class="p">;</span>		<span class="cm">/* 0x08 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_status</span><span class="p">;</span>		<span class="cm">/* 0x0c */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_2</span><span class="p">;</span>		<span class="cm">/* 0x10 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_err_upper_addr</span><span class="p">;</span>	<span class="cm">/* 0x14 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_3</span><span class="p">;</span>		<span class="cm">/* 0x18 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_err_lower_addr</span><span class="p">;</span>	<span class="cm">/* 0x1c */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_4</span><span class="p">;</span>		<span class="cm">/* 0x20 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_control</span><span class="p">;</span>		<span class="cm">/* 0x24 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_5</span><span class="p">;</span>		<span class="cm">/* 0x28 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_req_timeout</span><span class="p">;</span>		<span class="cm">/* 0x2c */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_6</span><span class="p">;</span>		<span class="cm">/* 0x30 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_intdest_upper_addr</span><span class="p">;</span>	<span class="cm">/* 0x34 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_7</span><span class="p">;</span>		<span class="cm">/* 0x38 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_intdest_lower_addr</span><span class="p">;</span>	<span class="cm">/* 0x3c */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_8</span><span class="p">;</span>		<span class="cm">/* 0x40 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_err_cmd_word</span><span class="p">;</span>		<span class="cm">/* 0x44 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_9</span><span class="p">;</span>		<span class="cm">/* 0x48 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_llp_cfg</span><span class="p">;</span>		<span class="cm">/* 0x4c */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_pad_10</span><span class="p">;</span>		<span class="cm">/* 0x50 */</span>
	<span class="n">widgetreg_t</span>		<span class="n">w_tflush</span><span class="p">;</span>		<span class="cm">/* 0x54 */</span>
<span class="p">}</span> <span class="n">widget_cfg_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span>	<span class="n">didn</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">sidn</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">pactyp</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">tnum</span><span class="o">:</span><span class="mi">5</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">ct</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">ds</span><span class="o">:</span><span class="mi">2</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">gbr</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">vbpm</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">error</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">bo</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">other</span><span class="o">:</span><span class="mi">8</span><span class="p">;</span>
<span class="p">}</span> <span class="n">w_err_cmd_word_f</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
	<span class="n">widgetreg_t</span>		<span class="n">r</span><span class="p">;</span>
	<span class="n">w_err_cmd_word_f</span>	<span class="n">f</span><span class="p">;</span>
<span class="p">}</span> <span class="n">w_err_cmd_word_u</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">xwidget_info_s</span> <span class="o">*</span><span class="n">xwidget_info_t</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> * Crosstalk Widget Hardware Identification, as defined in the Crosstalk spec.</span>
<span class="cm"> */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="n">xwidget_hwid_s</span> <span class="p">{</span>
	<span class="n">xwidget_part_num_t</span>	<span class="n">part_num</span><span class="p">;</span>
	<span class="n">xwidget_rev_num_t</span>	<span class="n">rev_num</span><span class="p">;</span>
	<span class="n">xwidget_mfg_num_t</span>	<span class="n">mfg_num</span><span class="p">;</span>
<span class="p">}</span> <span class="o">*</span><span class="n">xwidget_hwid_t</span><span class="p">;</span>


<span class="cm">/*</span>
<span class="cm"> * Returns 1 if a driver that handles devices described by hwid1 is able</span>
<span class="cm"> * to manage a device with hardwareid hwid2.  NOTE: We don&#39;t check rev</span>
<span class="cm"> * numbers at all.</span>
<span class="cm"> */</span>
<span class="cp">#define XWIDGET_HARDWARE_ID_MATCH(hwid1, hwid2) \</span>
<span class="cp">	(((hwid1)-&gt;part_num == (hwid2)-&gt;part_num) &amp;&amp; \</span>
<span class="cp">	(((hwid1)-&gt;mfg_num == XWIDGET_MFG_NUM_NONE) || \</span>
<span class="cp">	((hwid2)-&gt;mfg_num == XWIDGET_MFG_NUM_NONE) || \</span>
<span class="cp">	((hwid1)-&gt;mfg_num == (hwid2)-&gt;mfg_num)))</span>

<span class="cp">#endif </span><span class="cm">/* !__ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* _ASM_XTALK_XWIDGET_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
