<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › mach-au1x00 › au1xxx_psc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>au1xxx_psc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *</span>
<span class="cm"> * BRIEF MODULE DESCRIPTION</span>
<span class="cm"> *	Include file for Alchemy Semiconductor&#39;s Au1k CPU.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2004 Embedded Edge, LLC</span>
<span class="cm"> *	dan@embeddededge.com</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute  it and/or modify it</span>
<span class="cm"> *  under  the terms of  the GNU General  Public License as published by the</span>
<span class="cm"> *  Free Software Foundation;  either version 2 of the  License, or (at your</span>
<span class="cm"> *  option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  THIS  SOFTWARE  IS PROVIDED   ``AS  IS&#39;&#39; AND   ANY  EXPRESS OR IMPLIED</span>
<span class="cm"> *  WARRANTIES,   INCLUDING, BUT NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF</span>
<span class="cm"> *  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN</span>
<span class="cm"> *  NO  EVENT  SHALL   THE AUTHOR  BE    LIABLE FOR ANY   DIRECT, INDIRECT,</span>
<span class="cm"> *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<span class="cm"> *  NOT LIMITED   TO, PROCUREMENT OF  SUBSTITUTE GOODS  OR SERVICES; LOSS OF</span>
<span class="cm"> *  USE, DATA,  OR PROFITS; OR  BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON</span>
<span class="cm"> *  ANY THEORY OF LIABILITY, WHETHER IN  CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="cm"> *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<span class="cm"> *  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the  GNU General Public License along</span>
<span class="cm"> *  with this program; if not, write  to the Free Software Foundation, Inc.,</span>
<span class="cm"> *  675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> */</span>

<span class="cm">/* Specifics for the Au1xxx Programmable Serial Controllers, first</span>
<span class="cm"> * seen in the AU1550 part.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _AU1000_PSC_H_</span>
<span class="cp">#define _AU1000_PSC_H_</span>

<span class="cm">/*</span>
<span class="cm"> * The PSC select and control registers are common to all protocols.</span>
<span class="cm"> */</span>
<span class="cp">#define PSC_SEL_OFFSET		0x00000000</span>
<span class="cp">#define PSC_CTRL_OFFSET		0x00000004</span>

<span class="cp">#define PSC_SEL_CLK_MASK	(3 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SEL_CLK_INTCLK	(0 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SEL_CLK_EXTCLK	(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SEL_CLK_SERCLK	(2 &lt;&lt; 4)</span>

<span class="cp">#define PSC_SEL_PS_MASK		0x00000007</span>
<span class="cp">#define PSC_SEL_PS_DISABLED	0</span>
<span class="cp">#define PSC_SEL_PS_SPIMODE	2</span>
<span class="cp">#define PSC_SEL_PS_I2SMODE	3</span>
<span class="cp">#define PSC_SEL_PS_AC97MODE	4</span>
<span class="cp">#define PSC_SEL_PS_SMBUSMODE	5</span>

<span class="cp">#define PSC_CTRL_DISABLE	0</span>
<span class="cp">#define PSC_CTRL_SUSPEND	2</span>
<span class="cp">#define PSC_CTRL_ENABLE 	3</span>

<span class="cm">/* AC97 Registers. */</span>
<span class="cp">#define PSC_AC97CFG_OFFSET	0x00000008</span>
<span class="cp">#define PSC_AC97MSK_OFFSET	0x0000000c</span>
<span class="cp">#define PSC_AC97PCR_OFFSET	0x00000010</span>
<span class="cp">#define PSC_AC97STAT_OFFSET	0x00000014</span>
<span class="cp">#define PSC_AC97EVNT_OFFSET	0x00000018</span>
<span class="cp">#define PSC_AC97TXRX_OFFSET	0x0000001c</span>
<span class="cp">#define PSC_AC97CDC_OFFSET	0x00000020</span>
<span class="cp">#define PSC_AC97RST_OFFSET	0x00000024</span>
<span class="cp">#define PSC_AC97GPO_OFFSET	0x00000028</span>
<span class="cp">#define PSC_AC97GPI_OFFSET	0x0000002c</span>

<span class="cm">/* AC97 Config Register. */</span>
<span class="cp">#define PSC_AC97CFG_RT_MASK	(3 &lt;&lt; 30)</span>
<span class="cp">#define PSC_AC97CFG_RT_FIFO1	(0 &lt;&lt; 30)</span>
<span class="cp">#define PSC_AC97CFG_RT_FIFO2	(1 &lt;&lt; 30)</span>
<span class="cp">#define PSC_AC97CFG_RT_FIFO4	(2 &lt;&lt; 30)</span>
<span class="cp">#define PSC_AC97CFG_RT_FIFO8	(3 &lt;&lt; 30)</span>

<span class="cp">#define PSC_AC97CFG_TT_MASK	(3 &lt;&lt; 28)</span>
<span class="cp">#define PSC_AC97CFG_TT_FIFO1	(0 &lt;&lt; 28)</span>
<span class="cp">#define PSC_AC97CFG_TT_FIFO2	(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_AC97CFG_TT_FIFO4	(2 &lt;&lt; 28)</span>
<span class="cp">#define PSC_AC97CFG_TT_FIFO8	(3 &lt;&lt; 28)</span>

<span class="cp">#define PSC_AC97CFG_DD_DISABLE	(1 &lt;&lt; 27)</span>
<span class="cp">#define PSC_AC97CFG_DE_ENABLE	(1 &lt;&lt; 26)</span>
<span class="cp">#define PSC_AC97CFG_SE_ENABLE	(1 &lt;&lt; 25)</span>

<span class="cp">#define PSC_AC97CFG_LEN_MASK	(0xf &lt;&lt; 21)</span>
<span class="cp">#define PSC_AC97CFG_TXSLOT_MASK	(0x3ff &lt;&lt; 11)</span>
<span class="cp">#define PSC_AC97CFG_RXSLOT_MASK	(0x3ff &lt;&lt; 1)</span>
<span class="cp">#define PSC_AC97CFG_GE_ENABLE	(1)</span>

<span class="cm">/* Enable slots 3-12. */</span>
<span class="cp">#define PSC_AC97CFG_TXSLOT_ENA(x)	(1 &lt;&lt; (((x) - 3) + 11))</span>
<span class="cp">#define PSC_AC97CFG_RXSLOT_ENA(x)	(1 &lt;&lt; (((x) - 3) + 1))</span>

<span class="cm">/*</span>
<span class="cm"> * The word length equation is ((x) * 2) + 2, so choose &#39;x&#39; appropriately.</span>
<span class="cm"> * The only sensible numbers are 7, 9, or possibly 11.  Nah, just do the</span>
<span class="cm"> * arithmetic in the macro.</span>
<span class="cm"> */</span>
<span class="cp">#define PSC_AC97CFG_SET_LEN(x)	(((((x) - 2) / 2) &amp; 0xf) &lt;&lt; 21)</span>
<span class="cp">#define PSC_AC97CFG_GET_LEN(x)	(((((x) &gt;&gt; 21) &amp; 0xf) * 2) + 2)</span>

<span class="cm">/* AC97 Mask Register. */</span>
<span class="cp">#define PSC_AC97MSK_GR		(1 &lt;&lt; 25)</span>
<span class="cp">#define PSC_AC97MSK_CD		(1 &lt;&lt; 24)</span>
<span class="cp">#define PSC_AC97MSK_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_AC97MSK_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_AC97MSK_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_AC97MSK_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_AC97MSK_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_AC97MSK_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_AC97MSK_RD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_AC97MSK_TD		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_AC97MSK_ALLMASK	(PSC_AC97MSK_GR | PSC_AC97MSK_CD | \</span>
<span class="cp">				 PSC_AC97MSK_RR | PSC_AC97MSK_RO | \</span>
<span class="cp">				 PSC_AC97MSK_RU | PSC_AC97MSK_TR | \</span>
<span class="cp">				 PSC_AC97MSK_TO | PSC_AC97MSK_TU | \</span>
<span class="cp">				 PSC_AC97MSK_RD | PSC_AC97MSK_TD)</span>

<span class="cm">/* AC97 Protocol Control Register. */</span>
<span class="cp">#define PSC_AC97PCR_RC		(1 &lt;&lt; 6)</span>
<span class="cp">#define PSC_AC97PCR_RP		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_AC97PCR_RS		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_AC97PCR_TC		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_AC97PCR_TP		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_AC97PCR_TS		(1 &lt;&lt; 0)</span>

<span class="cm">/* AC97 Status register (read only). */</span>
<span class="cp">#define PSC_AC97STAT_CB		(1 &lt;&lt; 26)</span>
<span class="cp">#define PSC_AC97STAT_CP		(1 &lt;&lt; 25)</span>
<span class="cp">#define PSC_AC97STAT_CR		(1 &lt;&lt; 24)</span>
<span class="cp">#define PSC_AC97STAT_RF		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_AC97STAT_RE		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_AC97STAT_RR		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_AC97STAT_TF		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_AC97STAT_TE		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_AC97STAT_TR		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_AC97STAT_RB		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_AC97STAT_TB		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_AC97STAT_DI		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_AC97STAT_DR		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_AC97STAT_SR		(1 &lt;&lt; 0)</span>

<span class="cm">/* AC97 Event Register. */</span>
<span class="cp">#define PSC_AC97EVNT_GR		(1 &lt;&lt; 25)</span>
<span class="cp">#define PSC_AC97EVNT_CD		(1 &lt;&lt; 24)</span>
<span class="cp">#define PSC_AC97EVNT_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_AC97EVNT_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_AC97EVNT_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_AC97EVNT_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_AC97EVNT_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_AC97EVNT_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_AC97EVNT_RD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_AC97EVNT_TD		(1 &lt;&lt; 4)</span>

<span class="cm">/* CODEC Command Register. */</span>
<span class="cp">#define PSC_AC97CDC_RD		(1 &lt;&lt; 25)</span>
<span class="cp">#define PSC_AC97CDC_ID_MASK	(3 &lt;&lt; 23)</span>
<span class="cp">#define PSC_AC97CDC_INDX_MASK	(0x7f &lt;&lt; 16)</span>
<span class="cp">#define PSC_AC97CDC_ID(x)	(((x) &amp; 0x03) &lt;&lt; 23)</span>
<span class="cp">#define PSC_AC97CDC_INDX(x)	(((x) &amp; 0x7f) &lt;&lt; 16)</span>

<span class="cm">/* AC97 Reset Control Register. */</span>
<span class="cp">#define PSC_AC97RST_RST		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_AC97RST_SNC		(1 &lt;&lt; 0)</span>

<span class="cm">/* PSC in I2S Mode. */</span>
<span class="k">typedef</span> <span class="k">struct</span>	<span class="n">psc_i2s</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">psc_sel</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_ctrl</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2scfg</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2smsk</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2spcr</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2sstat</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2sevent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2stxrx</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_i2sudf</span><span class="p">;</span>
<span class="p">}</span> <span class="n">psc_i2s_t</span><span class="p">;</span>

<span class="cp">#define PSC_I2SCFG_OFFSET	0x08</span>
<span class="cp">#define PSC_I2SMASK_OFFSET	0x0C</span>
<span class="cp">#define PSC_I2SPCR_OFFSET	0x10</span>
<span class="cp">#define PSC_I2SSTAT_OFFSET	0x14</span>
<span class="cp">#define PSC_I2SEVENT_OFFSET	0x18</span>
<span class="cp">#define PSC_I2SRXTX_OFFSET	0x1C</span>
<span class="cp">#define PSC_I2SUDF_OFFSET	0x20</span>

<span class="cm">/* I2S Config Register. */</span>
<span class="cp">#define PSC_I2SCFG_RT_MASK	(3 &lt;&lt; 30)</span>
<span class="cp">#define PSC_I2SCFG_RT_FIFO1	(0 &lt;&lt; 30)</span>
<span class="cp">#define PSC_I2SCFG_RT_FIFO2	(1 &lt;&lt; 30)</span>
<span class="cp">#define PSC_I2SCFG_RT_FIFO4	(2 &lt;&lt; 30)</span>
<span class="cp">#define PSC_I2SCFG_RT_FIFO8	(3 &lt;&lt; 30)</span>

<span class="cp">#define PSC_I2SCFG_TT_MASK	(3 &lt;&lt; 28)</span>
<span class="cp">#define PSC_I2SCFG_TT_FIFO1	(0 &lt;&lt; 28)</span>
<span class="cp">#define PSC_I2SCFG_TT_FIFO2	(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_I2SCFG_TT_FIFO4	(2 &lt;&lt; 28)</span>
<span class="cp">#define PSC_I2SCFG_TT_FIFO8	(3 &lt;&lt; 28)</span>

<span class="cp">#define PSC_I2SCFG_DD_DISABLE	(1 &lt;&lt; 27)</span>
<span class="cp">#define PSC_I2SCFG_DE_ENABLE	(1 &lt;&lt; 26)</span>
<span class="cp">#define PSC_I2SCFG_SET_WS(x)	(((((x) / 2) - 1) &amp; 0x7f) &lt;&lt; 16)</span>
<span class="cp">#define PSC_I2SCFG_WS(n)	((n &amp; 0xFF) &lt;&lt; 16)</span>
<span class="cp">#define PSC_I2SCFG_WS_MASK	(PSC_I2SCFG_WS(0x3F))</span>
<span class="cp">#define PSC_I2SCFG_WI		(1 &lt;&lt; 15)</span>

<span class="cp">#define PSC_I2SCFG_DIV_MASK	(3 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SCFG_DIV2		(0 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SCFG_DIV4		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SCFG_DIV8		(2 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SCFG_DIV16	(3 &lt;&lt; 13)</span>

<span class="cp">#define PSC_I2SCFG_BI		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_I2SCFG_BUF		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_I2SCFG_MLJ		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_I2SCFG_XM		(1 &lt;&lt; 9)</span>

<span class="cm">/* The word length equation is simply LEN+1. */</span>
<span class="cp">#define PSC_I2SCFG_SET_LEN(x)	((((x) - 1) &amp; 0x1f) &lt;&lt; 4)</span>
<span class="cp">#define PSC_I2SCFG_GET_LEN(x)	((((x) &gt;&gt; 4) &amp; 0x1f) + 1)</span>

<span class="cp">#define PSC_I2SCFG_LB		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_I2SCFG_MLF		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_I2SCFG_MS		(1 &lt;&lt; 0)</span>

<span class="cm">/* I2S Mask Register. */</span>
<span class="cp">#define PSC_I2SMSK_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SMSK_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_I2SMSK_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_I2SMSK_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_I2SMSK_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_I2SMSK_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_I2SMSK_RD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_I2SMSK_TD		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_I2SMSK_ALLMASK	(PSC_I2SMSK_RR | PSC_I2SMSK_RO | \</span>
<span class="cp">				 PSC_I2SMSK_RU | PSC_I2SMSK_TR | \</span>
<span class="cp">				 PSC_I2SMSK_TO | PSC_I2SMSK_TU | \</span>
<span class="cp">				 PSC_I2SMSK_RD | PSC_I2SMSK_TD)</span>

<span class="cm">/* I2S Protocol Control Register. */</span>
<span class="cp">#define PSC_I2SPCR_RC		(1 &lt;&lt; 6)</span>
<span class="cp">#define PSC_I2SPCR_RP		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_I2SPCR_RS		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_I2SPCR_TC		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_I2SPCR_TP		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_I2SPCR_TS		(1 &lt;&lt; 0)</span>

<span class="cm">/* I2S Status register (read only). */</span>
<span class="cp">#define PSC_I2SSTAT_RF		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SSTAT_RE		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_I2SSTAT_RR		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_I2SSTAT_TF		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_I2SSTAT_TE		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_I2SSTAT_TR		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_I2SSTAT_RB		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_I2SSTAT_TB		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_I2SSTAT_DI		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_I2SSTAT_DR		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_I2SSTAT_SR		(1 &lt;&lt; 0)</span>

<span class="cm">/* I2S Event Register. */</span>
<span class="cp">#define PSC_I2SEVNT_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_I2SEVNT_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_I2SEVNT_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_I2SEVNT_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_I2SEVNT_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_I2SEVNT_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_I2SEVNT_RD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_I2SEVNT_TD		(1 &lt;&lt; 4)</span>

<span class="cm">/* PSC in SPI Mode. */</span>
<span class="k">typedef</span> <span class="k">struct</span>	<span class="n">psc_spi</span> <span class="p">{</span>
	<span class="n">u32</span>	<span class="n">psc_sel</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_ctrl</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_spicfg</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_spimsk</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_spipcr</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_spistat</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_spievent</span><span class="p">;</span>
	<span class="n">u32</span>	<span class="n">psc_spitxrx</span><span class="p">;</span>
<span class="p">}</span> <span class="n">psc_spi_t</span><span class="p">;</span>

<span class="cm">/* SPI Config Register. */</span>
<span class="cp">#define PSC_SPICFG_RT_MASK	(3 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SPICFG_RT_FIFO1	(0 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SPICFG_RT_FIFO2	(1 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SPICFG_RT_FIFO4	(2 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SPICFG_RT_FIFO8	(3 &lt;&lt; 30)</span>

<span class="cp">#define PSC_SPICFG_TT_MASK	(3 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SPICFG_TT_FIFO1	(0 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SPICFG_TT_FIFO2	(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SPICFG_TT_FIFO4	(2 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SPICFG_TT_FIFO8	(3 &lt;&lt; 28)</span>

<span class="cp">#define PSC_SPICFG_DD_DISABLE	(1 &lt;&lt; 27)</span>
<span class="cp">#define PSC_SPICFG_DE_ENABLE	(1 &lt;&lt; 26)</span>
<span class="cp">#define PSC_SPICFG_CLR_BAUD(x)	((x) &amp; ~((0x3f) &lt;&lt; 15))</span>
<span class="cp">#define PSC_SPICFG_SET_BAUD(x)	(((x) &amp; 0x3f) &lt;&lt; 15)</span>

<span class="cp">#define PSC_SPICFG_SET_DIV(x)	(((x) &amp; 0x03) &lt;&lt; 13)</span>
<span class="cp">#define PSC_SPICFG_DIV2		0</span>
<span class="cp">#define PSC_SPICFG_DIV4		1</span>
<span class="cp">#define PSC_SPICFG_DIV8		2</span>
<span class="cp">#define PSC_SPICFG_DIV16	3</span>

<span class="cp">#define PSC_SPICFG_BI		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SPICFG_PSE		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SPICFG_CGE		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SPICFG_CDE		(1 &lt;&lt; 9)</span>

<span class="cp">#define PSC_SPICFG_CLR_LEN(x)	((x) &amp; ~((0x1f) &lt;&lt; 4))</span>
<span class="cp">#define PSC_SPICFG_SET_LEN(x)	(((x-1) &amp; 0x1f) &lt;&lt; 4)</span>

<span class="cp">#define PSC_SPICFG_LB		(1 &lt;&lt; 3)</span>
<span class="cp">#define PSC_SPICFG_MLF		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_SPICFG_MO		(1 &lt;&lt; 0)</span>

<span class="cm">/* SPI Mask Register. */</span>
<span class="cp">#define PSC_SPIMSK_MM		(1 &lt;&lt; 16)</span>
<span class="cp">#define PSC_SPIMSK_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_SPIMSK_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SPIMSK_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SPIMSK_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SPIMSK_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SPIMSK_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_SPIMSK_SD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SPIMSK_MD		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SPIMSK_ALLMASK	(PSC_SPIMSK_MM | PSC_SPIMSK_RR | \</span>
<span class="cp">				 PSC_SPIMSK_RO | PSC_SPIMSK_TO | \</span>
<span class="cp">				 PSC_SPIMSK_TU | PSC_SPIMSK_SD | \</span>
<span class="cp">				 PSC_SPIMSK_MD)</span>

<span class="cm">/* SPI Protocol Control Register. */</span>
<span class="cp">#define PSC_SPIPCR_RC		(1 &lt;&lt; 6)</span>
<span class="cp">#define PSC_SPIPCR_SP		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SPIPCR_SS		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SPIPCR_TC		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_SPIPCR_MS		(1 &lt;&lt; 0)</span>

<span class="cm">/* SPI Status register (read only). */</span>
<span class="cp">#define PSC_SPISTAT_RF		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_SPISTAT_RE		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SPISTAT_RR		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SPISTAT_TF		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SPISTAT_TE		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SPISTAT_TR		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_SPISTAT_SB		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SPISTAT_MB		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SPISTAT_DI		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_SPISTAT_DR		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_SPISTAT_SR		(1 &lt;&lt; 0)</span>

<span class="cm">/* SPI Event Register. */</span>
<span class="cp">#define PSC_SPIEVNT_MM		(1 &lt;&lt; 16)</span>
<span class="cp">#define PSC_SPIEVNT_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_SPIEVNT_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SPIEVNT_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SPIEVNT_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SPIEVNT_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SPIEVNT_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_SPIEVNT_SD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SPIEVNT_MD		(1 &lt;&lt; 4)</span>

<span class="cm">/* Transmit register control. */</span>
<span class="cp">#define PSC_SPITXRX_LC		(1 &lt;&lt; 29)</span>
<span class="cp">#define PSC_SPITXRX_SR		(1 &lt;&lt; 28)</span>

<span class="cm">/* SMBus Config Register. */</span>
<span class="cp">#define PSC_SMBCFG_RT_MASK	(3 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBCFG_RT_FIFO1	(0 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBCFG_RT_FIFO2	(1 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBCFG_RT_FIFO4	(2 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBCFG_RT_FIFO8	(3 &lt;&lt; 30)</span>

<span class="cp">#define PSC_SMBCFG_TT_MASK	(3 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBCFG_TT_FIFO1	(0 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBCFG_TT_FIFO2	(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBCFG_TT_FIFO4	(2 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBCFG_TT_FIFO8	(3 &lt;&lt; 28)</span>

<span class="cp">#define PSC_SMBCFG_DD_DISABLE	(1 &lt;&lt; 27)</span>
<span class="cp">#define PSC_SMBCFG_DE_ENABLE	(1 &lt;&lt; 26)</span>

<span class="cp">#define PSC_SMBCFG_SET_DIV(x)	(((x) &amp; 0x03) &lt;&lt; 13)</span>
<span class="cp">#define PSC_SMBCFG_DIV2		0</span>
<span class="cp">#define PSC_SMBCFG_DIV4		1</span>
<span class="cp">#define PSC_SMBCFG_DIV8		2</span>
<span class="cp">#define PSC_SMBCFG_DIV16	3</span>

<span class="cp">#define PSC_SMBCFG_GCE		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SMBCFG_SFM		(1 &lt;&lt; 8)</span>

<span class="cp">#define PSC_SMBCFG_SET_SLV(x)	(((x) &amp; 0x7f) &lt;&lt; 1)</span>

<span class="cm">/* SMBus Mask Register. */</span>
<span class="cp">#define PSC_SMBMSK_DN		(1 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBMSK_AN		(1 &lt;&lt; 29)</span>
<span class="cp">#define PSC_SMBMSK_AL		(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBMSK_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_SMBMSK_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SMBMSK_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SMBMSK_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SMBMSK_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SMBMSK_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_SMBMSK_SD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SMBMSK_MD		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SMBMSK_ALLMASK	(PSC_SMBMSK_DN | PSC_SMBMSK_AN | \</span>
<span class="cp">				 PSC_SMBMSK_AL | PSC_SMBMSK_RR | \</span>
<span class="cp">				 PSC_SMBMSK_RO | PSC_SMBMSK_TO | \</span>
<span class="cp">				 PSC_SMBMSK_TU | PSC_SMBMSK_SD | \</span>
<span class="cp">				 PSC_SMBMSK_MD)</span>

<span class="cm">/* SMBus Protocol Control Register. */</span>
<span class="cp">#define PSC_SMBPCR_DC		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_SMBPCR_MS		(1 &lt;&lt; 0)</span>

<span class="cm">/* SMBus Status register (read only). */</span>
<span class="cp">#define PSC_SMBSTAT_BB		(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBSTAT_RF		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_SMBSTAT_RE		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SMBSTAT_RR		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SMBSTAT_TF		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SMBSTAT_TE		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SMBSTAT_TR		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_SMBSTAT_SB		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SMBSTAT_MB		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SMBSTAT_DI		(1 &lt;&lt; 2)</span>
<span class="cp">#define PSC_SMBSTAT_DR		(1 &lt;&lt; 1)</span>
<span class="cp">#define PSC_SMBSTAT_SR		(1 &lt;&lt; 0)</span>

<span class="cm">/* SMBus Event Register. */</span>
<span class="cp">#define PSC_SMBEVNT_DN		(1 &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBEVNT_AN		(1 &lt;&lt; 29)</span>
<span class="cp">#define PSC_SMBEVNT_AL		(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBEVNT_RR		(1 &lt;&lt; 13)</span>
<span class="cp">#define PSC_SMBEVNT_RO		(1 &lt;&lt; 12)</span>
<span class="cp">#define PSC_SMBEVNT_RU		(1 &lt;&lt; 11)</span>
<span class="cp">#define PSC_SMBEVNT_TR		(1 &lt;&lt; 10)</span>
<span class="cp">#define PSC_SMBEVNT_TO		(1 &lt;&lt; 9)</span>
<span class="cp">#define PSC_SMBEVNT_TU		(1 &lt;&lt; 8)</span>
<span class="cp">#define PSC_SMBEVNT_SD		(1 &lt;&lt; 5)</span>
<span class="cp">#define PSC_SMBEVNT_MD		(1 &lt;&lt; 4)</span>
<span class="cp">#define PSC_SMBEVNT_ALLCLR	(PSC_SMBEVNT_DN | PSC_SMBEVNT_AN | \</span>
<span class="cp">				 PSC_SMBEVNT_AL | PSC_SMBEVNT_RR | \</span>
<span class="cp">				 PSC_SMBEVNT_RO | PSC_SMBEVNT_TO | \</span>
<span class="cp">				 PSC_SMBEVNT_TU | PSC_SMBEVNT_SD | \</span>
<span class="cp">				 PSC_SMBEVNT_MD)</span>

<span class="cm">/* Transmit register control. */</span>
<span class="cp">#define PSC_SMBTXRX_RSR		(1 &lt;&lt; 28)</span>
<span class="cp">#define PSC_SMBTXRX_STP		(1 &lt;&lt; 29)</span>
<span class="cp">#define PSC_SMBTXRX_DATAMASK	0xff</span>

<span class="cm">/* SMBus protocol timers register. */</span>
<span class="cp">#define PSC_SMBTMR_SET_TH(x)	(((x) &amp; 0x03) &lt;&lt; 30)</span>
<span class="cp">#define PSC_SMBTMR_SET_PS(x)	(((x) &amp; 0x1f) &lt;&lt; 25)</span>
<span class="cp">#define PSC_SMBTMR_SET_PU(x)	(((x) &amp; 0x1f) &lt;&lt; 20)</span>
<span class="cp">#define PSC_SMBTMR_SET_SH(x)	(((x) &amp; 0x1f) &lt;&lt; 15)</span>
<span class="cp">#define PSC_SMBTMR_SET_SU(x)	(((x) &amp; 0x1f) &lt;&lt; 10)</span>
<span class="cp">#define PSC_SMBTMR_SET_CL(x)	(((x) &amp; 0x1f) &lt;&lt; 5)</span>
<span class="cp">#define PSC_SMBTMR_SET_CH(x)	(((x) &amp; 0x1f) &lt;&lt; 0)</span>

<span class="cp">#endif </span><span class="cm">/* _AU1000_PSC_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
