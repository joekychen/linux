<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › mach-au1x00 › au1100_mmc.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>au1100_mmc.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * BRIEF MODULE DESCRIPTION</span>
<span class="cm"> *	Defines for using the MMC/SD controllers on the</span>
<span class="cm"> *      Alchemy Au1100 mips processor.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (c) 2003 Embedded Edge, LLC.</span>
<span class="cm"> * Author: Embedded Edge, LLC.</span>
<span class="cm"> *         	dan@embeddededge.com or tim@embeddededge.com</span>
<span class="cm"> *</span>
<span class="cm"> *  This program is free software; you can redistribute  it and/or modify it</span>
<span class="cm"> *  under  the terms of  the GNU General  Public License as published by the</span>
<span class="cm"> *  Free Software Foundation;  either version 2 of the  License, or (at your</span>
<span class="cm"> *  option) any later version.</span>
<span class="cm"> *</span>
<span class="cm"> *  THIS  SOFTWARE  IS PROVIDED   ``AS  IS&#39;&#39; AND   ANY  EXPRESS OR IMPLIED</span>
<span class="cm"> *  WARRANTIES,   INCLUDING, BUT NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF</span>
<span class="cm"> *  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN</span>
<span class="cm"> *  NO  EVENT  SHALL   THE AUTHOR  BE    LIABLE FOR ANY   DIRECT, INDIRECT,</span>
<span class="cm"> *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT</span>
<span class="cm"> *  NOT LIMITED   TO, PROCUREMENT OF  SUBSTITUTE GOODS  OR SERVICES; LOSS OF</span>
<span class="cm"> *  USE, DATA,  OR PROFITS; OR  BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON</span>
<span class="cm"> *  ANY THEORY OF LIABILITY, WHETHER IN  CONTRACT, STRICT LIABILITY, OR TORT</span>
<span class="cm"> *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span>
<span class="cm"> *  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="cm"> *</span>
<span class="cm"> *  You should have received a copy of the  GNU General Public License along</span>
<span class="cm"> *  with this program; if not, write  to the Free Software Foundation, Inc.,</span>
<span class="cm"> *  675 Mass Ave, Cambridge, MA 02139, USA.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cm">/*</span>
<span class="cm"> * AU1100 MMC/SD definitions.</span>
<span class="cm"> *</span>
<span class="cm"> * From &quot;AMD Alchemy Solutions Au1100 Processor Data Book - Preliminary&quot;</span>
<span class="cm"> *    June, 2003</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __ASM_AU1100_MMC_H</span>
<span class="cp">#define __ASM_AU1100_MMC_H</span>

<span class="cp">#include &lt;linux/leds.h&gt;</span>

<span class="k">struct</span> <span class="n">au1xmmc_platform_data</span> <span class="p">{</span>
	<span class="kt">int</span><span class="p">(</span><span class="o">*</span><span class="n">cd_setup</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="n">mmc_host</span><span class="p">,</span> <span class="kt">int</span> <span class="n">on</span><span class="p">);</span>
	<span class="kt">int</span><span class="p">(</span><span class="o">*</span><span class="n">card_inserted</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="n">mmc_host</span><span class="p">);</span>
	<span class="kt">int</span><span class="p">(</span><span class="o">*</span><span class="n">card_readonly</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="n">mmc_host</span><span class="p">);</span>
	<span class="kt">void</span><span class="p">(</span><span class="o">*</span><span class="n">set_power</span><span class="p">)(</span><span class="kt">void</span> <span class="o">*</span><span class="n">mmc_host</span><span class="p">,</span> <span class="kt">int</span> <span class="n">state</span><span class="p">);</span>
	<span class="k">struct</span> <span class="n">led_classdev</span> <span class="o">*</span><span class="n">led</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mask_host_caps</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define SD0_BASE	0xB0600000</span>
<span class="cp">#define SD1_BASE	0xB0680000</span>


<span class="cm">/*</span>
<span class="cm"> *  Register offsets.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_TXPORT	(0x0000)</span>
<span class="cp">#define SD_RXPORT	(0x0004)</span>
<span class="cp">#define SD_CONFIG	(0x0008)</span>
<span class="cp">#define SD_ENABLE	(0x000C)</span>
<span class="cp">#define SD_CONFIG2	(0x0010)</span>
<span class="cp">#define SD_BLKSIZE	(0x0014)</span>
<span class="cp">#define SD_STATUS	(0x0018)</span>
<span class="cp">#define SD_DEBUG	(0x001C)</span>
<span class="cp">#define SD_CMD		(0x0020)</span>
<span class="cp">#define SD_CMDARG	(0x0024)</span>
<span class="cp">#define SD_RESP3	(0x0028)</span>
<span class="cp">#define SD_RESP2	(0x002C)</span>
<span class="cp">#define SD_RESP1	(0x0030)</span>
<span class="cp">#define SD_RESP0	(0x0034)</span>
<span class="cp">#define SD_TIMEOUT	(0x0038)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_TXPORT bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_TXPORT_TXD	(0x000000ff)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_RXPORT bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_RXPORT_RXD	(0x000000ff)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_CONFIG bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_CONFIG_DIV	(0x000001ff)</span>
<span class="cp">#define SD_CONFIG_DE	(0x00000200)</span>
<span class="cp">#define SD_CONFIG_NE	(0x00000400)</span>
<span class="cp">#define SD_CONFIG_TU	(0x00000800)</span>
<span class="cp">#define SD_CONFIG_TO	(0x00001000)</span>
<span class="cp">#define SD_CONFIG_RU	(0x00002000)</span>
<span class="cp">#define SD_CONFIG_RO	(0x00004000)</span>
<span class="cp">#define SD_CONFIG_I	(0x00008000)</span>
<span class="cp">#define SD_CONFIG_CR	(0x00010000)</span>
<span class="cp">#define SD_CONFIG_RAT	(0x00020000)</span>
<span class="cp">#define SD_CONFIG_DD	(0x00040000)</span>
<span class="cp">#define SD_CONFIG_DT	(0x00080000)</span>
<span class="cp">#define SD_CONFIG_SC	(0x00100000)</span>
<span class="cp">#define SD_CONFIG_RC	(0x00200000)</span>
<span class="cp">#define SD_CONFIG_WC	(0x00400000)</span>
<span class="cp">#define SD_CONFIG_xxx	(0x00800000)</span>
<span class="cp">#define SD_CONFIG_TH	(0x01000000)</span>
<span class="cp">#define SD_CONFIG_TE	(0x02000000)</span>
<span class="cp">#define SD_CONFIG_TA	(0x04000000)</span>
<span class="cp">#define SD_CONFIG_RH	(0x08000000)</span>
<span class="cp">#define SD_CONFIG_RA	(0x10000000)</span>
<span class="cp">#define SD_CONFIG_RF	(0x20000000)</span>
<span class="cp">#define SD_CONFIG_CD	(0x40000000)</span>
<span class="cp">#define SD_CONFIG_SI	(0x80000000)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_ENABLE bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_ENABLE_CE	(0x00000001)</span>
<span class="cp">#define SD_ENABLE_R	(0x00000002)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_CONFIG2 bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_CONFIG2_EN	(0x00000001)</span>
<span class="cp">#define SD_CONFIG2_FF	(0x00000002)</span>
<span class="cp">#define SD_CONFIG2_xx1	(0x00000004)</span>
<span class="cp">#define SD_CONFIG2_DF	(0x00000008)</span>
<span class="cp">#define SD_CONFIG2_DC	(0x00000010)</span>
<span class="cp">#define SD_CONFIG2_xx2	(0x000000e0)</span>
<span class="cp">#define SD_CONFIG2_BB	(0x00000080)</span>
<span class="cp">#define SD_CONFIG2_WB	(0x00000100)</span>
<span class="cp">#define SD_CONFIG2_RW	(0x00000200)</span>
<span class="cp">#define SD_CONFIG2_DP	(0x00000400)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_BLKSIZE bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_BLKSIZE_BS	(0x000007ff)</span>
<span class="cp">#define SD_BLKSIZE_BS_SHIFT	 (0)</span>
<span class="cp">#define SD_BLKSIZE_BC	(0x01ff0000)</span>
<span class="cp">#define SD_BLKSIZE_BC_SHIFT	(16)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_STATUS bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_STATUS_DCRCW	(0x00000007)</span>
<span class="cp">#define SD_STATUS_xx1	(0x00000008)</span>
<span class="cp">#define SD_STATUS_CB	(0x00000010)</span>
<span class="cp">#define SD_STATUS_DB	(0x00000020)</span>
<span class="cp">#define SD_STATUS_CF	(0x00000040)</span>
<span class="cp">#define SD_STATUS_D3	(0x00000080)</span>
<span class="cp">#define SD_STATUS_xx2	(0x00000300)</span>
<span class="cp">#define SD_STATUS_NE	(0x00000400)</span>
<span class="cp">#define SD_STATUS_TU	(0x00000800)</span>
<span class="cp">#define SD_STATUS_TO	(0x00001000)</span>
<span class="cp">#define SD_STATUS_RU	(0x00002000)</span>
<span class="cp">#define SD_STATUS_RO	(0x00004000)</span>
<span class="cp">#define SD_STATUS_I	(0x00008000)</span>
<span class="cp">#define SD_STATUS_CR	(0x00010000)</span>
<span class="cp">#define SD_STATUS_RAT	(0x00020000)</span>
<span class="cp">#define SD_STATUS_DD	(0x00040000)</span>
<span class="cp">#define SD_STATUS_DT	(0x00080000)</span>
<span class="cp">#define SD_STATUS_SC	(0x00100000)</span>
<span class="cp">#define SD_STATUS_RC	(0x00200000)</span>
<span class="cp">#define SD_STATUS_WC	(0x00400000)</span>
<span class="cp">#define SD_STATUS_xx3	(0x00800000)</span>
<span class="cp">#define SD_STATUS_TH	(0x01000000)</span>
<span class="cp">#define SD_STATUS_TE	(0x02000000)</span>
<span class="cp">#define SD_STATUS_TA	(0x04000000)</span>
<span class="cp">#define SD_STATUS_RH	(0x08000000)</span>
<span class="cp">#define SD_STATUS_RA	(0x10000000)</span>
<span class="cp">#define SD_STATUS_RF	(0x20000000)</span>
<span class="cp">#define SD_STATUS_CD	(0x40000000)</span>
<span class="cp">#define SD_STATUS_SI	(0x80000000)</span>


<span class="cm">/*</span>
<span class="cm"> *  SD_CMD bit definitions.</span>
<span class="cm"> */</span>
<span class="cp">#define SD_CMD_GO	(0x00000001)</span>
<span class="cp">#define SD_CMD_RY	(0x00000002)</span>
<span class="cp">#define SD_CMD_xx1	(0x0000000c)</span>
<span class="cp">#define SD_CMD_CT_MASK	(0x000000f0)</span>
<span class="cp">#define SD_CMD_CT_0	(0x00000000)</span>
<span class="cp">#define SD_CMD_CT_1	(0x00000010)</span>
<span class="cp">#define SD_CMD_CT_2	(0x00000020)</span>
<span class="cp">#define SD_CMD_CT_3	(0x00000030)</span>
<span class="cp">#define SD_CMD_CT_4	(0x00000040)</span>
<span class="cp">#define SD_CMD_CT_5	(0x00000050)</span>
<span class="cp">#define SD_CMD_CT_6	(0x00000060)</span>
<span class="cp">#define SD_CMD_CT_7	(0x00000070)</span>
<span class="cp">#define SD_CMD_CI	(0x0000ff00)</span>
<span class="cp">#define SD_CMD_CI_SHIFT		(8)</span>
<span class="cp">#define SD_CMD_RT_MASK	(0x00ff0000)</span>
<span class="cp">#define SD_CMD_RT_0	(0x00000000)</span>
<span class="cp">#define SD_CMD_RT_1	(0x00010000)</span>
<span class="cp">#define SD_CMD_RT_2	(0x00020000)</span>
<span class="cp">#define SD_CMD_RT_3	(0x00030000)</span>
<span class="cp">#define SD_CMD_RT_4	(0x00040000)</span>
<span class="cp">#define SD_CMD_RT_5	(0x00050000)</span>
<span class="cp">#define SD_CMD_RT_6	(0x00060000)</span>
<span class="cp">#define SD_CMD_RT_1B	(0x00810000)</span>


<span class="cp">#endif </span><span class="cm">/* __ASM_AU1100_MMC_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
