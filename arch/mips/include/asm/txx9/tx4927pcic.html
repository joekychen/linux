<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › txx9 › tx4927pcic.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>tx4927pcic.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * include/asm-mips/txx9/tx4927pcic.h</span>
<span class="cm"> * TX4927 PCI controller definitions.</span>
<span class="cm"> *</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ASM_TXX9_TX4927PCIC_H</span>
<span class="cp">#define __ASM_TXX9_TX4927PCIC_H</span>

<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;linux/irqreturn.h&gt;</span>

<span class="k">struct</span> <span class="n">tx4927_pcic_reg</span> <span class="p">{</span>
	<span class="n">u32</span> <span class="n">pciid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcistatus</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pciccrev</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcicfg1</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gm0plbase</span><span class="p">;</span>		<span class="cm">/* +10 */</span>
	<span class="n">u32</span> <span class="n">p2gm0pubase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gm1plbase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gm1pubase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gm2pbase</span><span class="p">;</span>		<span class="cm">/* +20 */</span>
	<span class="n">u32</span> <span class="n">p2giopbase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused0</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcisid</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused1</span><span class="p">;</span>		<span class="cm">/* +30 */</span>
	<span class="n">u32</span> <span class="n">pcicapptr</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcicfg2</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">g2ptocnt</span><span class="p">;</span>		<span class="cm">/* +40 */</span>
	<span class="n">u32</span> <span class="n">unused3</span><span class="p">[</span><span class="mi">15</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">g2pstatus</span><span class="p">;</span>		<span class="cm">/* +80 */</span>
	<span class="n">u32</span> <span class="n">g2pmask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcisstatus</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcimask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gcfg</span><span class="p">;</span>		<span class="cm">/* +90 */</span>
	<span class="n">u32</span> <span class="n">p2gstatus</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gmask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">p2gccmd</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused4</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>		<span class="cm">/* +a0 */</span>
	<span class="n">u32</span> <span class="n">pbareqport</span><span class="p">;</span>		<span class="cm">/* +100 */</span>
	<span class="n">u32</span> <span class="n">pbacfg</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbastatus</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbamask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbabm</span><span class="p">;</span>		<span class="cm">/* +110 */</span>
	<span class="n">u32</span> <span class="n">pbacreq</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbacgnt</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pbacstate</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">g2pmgbase</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* +120 */</span>
	<span class="n">u64</span> <span class="n">g2piogbase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">g2pmmask</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* +140 */</span>
	<span class="n">u32</span> <span class="n">g2piomask</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">g2pmpbase</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* +150 */</span>
	<span class="n">u64</span> <span class="n">g2piopbase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pciccfg</span><span class="p">;</span>		<span class="cm">/* +170 */</span>
	<span class="n">u32</span> <span class="n">pcicstatus</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">pcicmask</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused5</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">p2gmgbase</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>		<span class="cm">/* +180 */</span>
	<span class="n">u64</span> <span class="n">p2giogbase</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">g2pcfgadrs</span><span class="p">;</span>		<span class="cm">/* +1a0 */</span>
	<span class="n">u32</span> <span class="n">g2pcfgdata</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused6</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u32</span> <span class="n">g2pintack</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">g2pspc</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">unused7</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>		<span class="cm">/* +1d0 */</span>
	<span class="n">u64</span> <span class="n">pdmca</span><span class="p">;</span>		<span class="cm">/* +200 */</span>
	<span class="n">u64</span> <span class="n">pdmga</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">pdmpa</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">pdmctr</span><span class="p">;</span>
	<span class="n">u64</span> <span class="n">pdmcfg</span><span class="p">;</span>		<span class="cm">/* +220 */</span>
	<span class="n">u64</span> <span class="n">pdmsts</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* bits for PCICMD */</span>
<span class="cm">/* see PCI_COMMAND_XXX in linux/pci_regs.h */</span>

<span class="cm">/* bits for PCISTAT */</span>
<span class="cm">/* see PCI_STATUS_XXX in linux/pci_regs.h */</span>

<span class="cm">/* bits for IOBA/MBA */</span>
<span class="cm">/* see PCI_BASE_ADDRESS_XXX in linux/pci_regs.h */</span>

<span class="cm">/* bits for G2PSTATUS/G2PMASK */</span>
<span class="cp">#define TX4927_PCIC_G2PSTATUS_ALL	0x00000003</span>
<span class="cp">#define TX4927_PCIC_G2PSTATUS_TTOE	0x00000002</span>
<span class="cp">#define TX4927_PCIC_G2PSTATUS_RTOE	0x00000001</span>

<span class="cm">/* bits for PCIMASK (see also PCI_STATUS_XXX in linux/pci_regs.h */</span>
<span class="cp">#define TX4927_PCIC_PCISTATUS_ALL	0x0000f900</span>

<span class="cm">/* bits for PBACFG */</span>
<span class="cp">#define TX4927_PCIC_PBACFG_FIXPA	0x00000008</span>
<span class="cp">#define TX4927_PCIC_PBACFG_RPBA	0x00000004</span>
<span class="cp">#define TX4927_PCIC_PBACFG_PBAEN	0x00000002</span>
<span class="cp">#define TX4927_PCIC_PBACFG_BMCEN	0x00000001</span>

<span class="cm">/* bits for PBASTATUS/PBAMASK */</span>
<span class="cp">#define TX4927_PCIC_PBASTATUS_ALL	0x00000001</span>
<span class="cp">#define TX4927_PCIC_PBASTATUS_BM	0x00000001</span>

<span class="cm">/* bits for G2PMnGBASE */</span>
<span class="cp">#define TX4927_PCIC_G2PMnGBASE_BSDIS	0x0000002000000000ULL</span>
<span class="cp">#define TX4927_PCIC_G2PMnGBASE_ECHG	0x0000001000000000ULL</span>

<span class="cm">/* bits for G2PIOGBASE */</span>
<span class="cp">#define TX4927_PCIC_G2PIOGBASE_BSDIS	0x0000002000000000ULL</span>
<span class="cp">#define TX4927_PCIC_G2PIOGBASE_ECHG	0x0000001000000000ULL</span>

<span class="cm">/* bits for PCICSTATUS/PCICMASK */</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_ALL	0x000007b8</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_PME	0x00000400</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_TLB	0x00000200</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_NIB	0x00000100</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_ZIB	0x00000080</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_PERR	0x00000020</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_SERR	0x00000010</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_GBE	0x00000008</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_IWB	0x00000002</span>
<span class="cp">#define TX4927_PCIC_PCICSTATUS_E2PDONE	0x00000001</span>

<span class="cm">/* bits for PCICCFG */</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_GBWC_MASK	0x0fff0000</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_HRST	0x00000800</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_SRST	0x00000400</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_IRBER	0x00000200</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_G2PMEN(ch)	(0x00000100&gt;&gt;(ch))</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_G2PM0EN	0x00000100</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_G2PM1EN	0x00000080</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_G2PM2EN	0x00000040</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_G2PIOEN	0x00000020</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_TCAR	0x00000010</span>
<span class="cp">#define TX4927_PCIC_PCICCFG_ICAEN	0x00000008</span>

<span class="cm">/* bits for P2GMnGBASE */</span>
<span class="cp">#define TX4927_PCIC_P2GMnGBASE_TMEMEN	0x0000004000000000ULL</span>
<span class="cp">#define TX4927_PCIC_P2GMnGBASE_TBSDIS	0x0000002000000000ULL</span>
<span class="cp">#define TX4927_PCIC_P2GMnGBASE_TECHG	0x0000001000000000ULL</span>

<span class="cm">/* bits for P2GIOGBASE */</span>
<span class="cp">#define TX4927_PCIC_P2GIOGBASE_TIOEN	0x0000004000000000ULL</span>
<span class="cp">#define TX4927_PCIC_P2GIOGBASE_TBSDIS	0x0000002000000000ULL</span>
<span class="cp">#define TX4927_PCIC_P2GIOGBASE_TECHG	0x0000001000000000ULL</span>

<span class="cp">#define TX4927_PCIC_IDSEL_AD_TO_SLOT(ad)	((ad) - 11)</span>
<span class="cp">#define TX4927_PCIC_MAX_DEVNU	TX4927_PCIC_IDSEL_AD_TO_SLOT(32)</span>

<span class="cm">/* bits for PDMCFG */</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_RSTFIFO	0x00200000</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_EXFER	0x00100000</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_MASK	0x00003800</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_NONE	(0 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_16	(1 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_32	(2 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_64	(3 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_128	(4 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_256	(5 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_512	(6 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_REQDLY_1024	(7 &lt;&lt; 11)</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_ERRIE	0x00000400</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_NCCMPIE	0x00000200</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_NTCMPIE	0x00000100</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_CHNEN	0x00000080</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_XFRACT	0x00000040</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_BSWAP	0x00000020</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_XFRSIZE_MASK	0x0000000c</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_XFRSIZE_1DW	0x00000000</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_XFRSIZE_1QW	0x00000004</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_XFRSIZE_4QW	0x00000008</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_XFRDIRC	0x00000002</span>
<span class="cp">#define TX4927_PCIC_PDMCFG_CHRST	0x00000001</span>

<span class="cm">/* bits for PDMSTS */</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_REQCNT_MASK	0x3f000000</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_FIFOCNT_MASK	0x00f00000</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_FIFOWP_MASK	0x000c0000</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_FIFORP_MASK	0x00030000</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_ERRINT	0x00000800</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_DONEINT	0x00000400</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_CHNEN	0x00000200</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_XFRACT	0x00000100</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_ACCMP	0x00000080</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_NCCMP	0x00000040</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_NTCMP	0x00000020</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_CFGERR	0x00000008</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_PCIERR	0x00000004</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_CHNERR	0x00000002</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_DATAERR	0x00000001</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_ALL_CMP	0x000000e0</span>
<span class="cp">#define TX4927_PCIC_PDMSTS_ALL_ERR	0x0000000f</span>

<span class="k">struct</span> <span class="n">tx4927_pcic_reg</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">get_tx4927_pcicptr</span><span class="p">(</span>
	<span class="k">struct</span> <span class="n">pci_controller</span> <span class="o">*</span><span class="n">channel</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">tx4927_pcic_setup</span><span class="p">(</span><span class="k">struct</span> <span class="n">tx4927_pcic_reg</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">pcicptr</span><span class="p">,</span>
		       <span class="k">struct</span> <span class="n">pci_controller</span> <span class="o">*</span><span class="n">channel</span><span class="p">,</span> <span class="kt">int</span> <span class="n">extarb</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">tx4927_report_pcic_status</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">tx4927_pcibios_setup</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">tx4927_dump_pcic_settings</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="n">irqreturn_t</span> <span class="n">tx4927_pcierr_interrupt</span><span class="p">(</span><span class="kt">int</span> <span class="n">irq</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">dev_id</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __ASM_TXX9_TX4927PCIC_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
