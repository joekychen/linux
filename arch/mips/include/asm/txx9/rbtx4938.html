<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mips › include › asm › txx9 › rbtx4938.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>rbtx4938.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Definitions for TX4937/TX4938</span>
<span class="cm"> *</span>
<span class="cm"> * 2003-2005 (c) MontaVista Software, Inc. This file is licensed under the</span>
<span class="cm"> * terms of the GNU General Public License version 2. This program is</span>
<span class="cm"> * licensed &quot;as is&quot; without any warranty of any kind, whether express</span>
<span class="cm"> * or implied.</span>
<span class="cm"> *</span>
<span class="cm"> * Support for TX4938 in 2.6 - Manish Lachwani (mlachwani@mvista.com)</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ASM_TXX9_RBTX4938_H</span>
<span class="cp">#define __ASM_TXX9_RBTX4938_H</span>

<span class="cp">#include &lt;asm/addrspace.h&gt;</span>
<span class="cp">#include &lt;asm/txx9irq.h&gt;</span>
<span class="cp">#include &lt;asm/txx9/tx4938.h&gt;</span>

<span class="cm">/* Address map */</span>
<span class="cp">#define RBTX4938_FPGA_REG_ADDR	(IO_BASE + TXX9_CE(2) + 0x00000000)</span>
<span class="cp">#define RBTX4938_FPGA_REV_ADDR	(IO_BASE + TXX9_CE(2) + 0x00000002)</span>
<span class="cp">#define RBTX4938_CONFIG1_ADDR	(IO_BASE + TXX9_CE(2) + 0x00000004)</span>
<span class="cp">#define RBTX4938_CONFIG2_ADDR	(IO_BASE + TXX9_CE(2) + 0x00000006)</span>
<span class="cp">#define RBTX4938_CONFIG3_ADDR	(IO_BASE + TXX9_CE(2) + 0x00000008)</span>
<span class="cp">#define RBTX4938_LED_ADDR	(IO_BASE + TXX9_CE(2) + 0x00001000)</span>
<span class="cp">#define RBTX4938_DIPSW_ADDR	(IO_BASE + TXX9_CE(2) + 0x00001002)</span>
<span class="cp">#define RBTX4938_BDIPSW_ADDR	(IO_BASE + TXX9_CE(2) + 0x00001004)</span>
<span class="cp">#define RBTX4938_IMASK_ADDR	(IO_BASE + TXX9_CE(2) + 0x00002000)</span>
<span class="cp">#define RBTX4938_IMASK2_ADDR	(IO_BASE + TXX9_CE(2) + 0x00002002)</span>
<span class="cp">#define RBTX4938_INTPOL_ADDR	(IO_BASE + TXX9_CE(2) + 0x00002004)</span>
<span class="cp">#define RBTX4938_ISTAT_ADDR	(IO_BASE + TXX9_CE(2) + 0x00002006)</span>
<span class="cp">#define RBTX4938_ISTAT2_ADDR	(IO_BASE + TXX9_CE(2) + 0x00002008)</span>
<span class="cp">#define RBTX4938_IMSTAT_ADDR	(IO_BASE + TXX9_CE(2) + 0x0000200a)</span>
<span class="cp">#define RBTX4938_IMSTAT2_ADDR	(IO_BASE + TXX9_CE(2) + 0x0000200c)</span>
<span class="cp">#define RBTX4938_SOFTINT_ADDR	(IO_BASE + TXX9_CE(2) + 0x00003000)</span>
<span class="cp">#define RBTX4938_PIOSEL_ADDR	(IO_BASE + TXX9_CE(2) + 0x00005000)</span>
<span class="cp">#define RBTX4938_SPICS_ADDR	(IO_BASE + TXX9_CE(2) + 0x00005002)</span>
<span class="cp">#define RBTX4938_SFPWR_ADDR	(IO_BASE + TXX9_CE(2) + 0x00005008)</span>
<span class="cp">#define RBTX4938_SFVOL_ADDR	(IO_BASE + TXX9_CE(2) + 0x0000500a)</span>
<span class="cp">#define RBTX4938_SOFTRESET_ADDR	(IO_BASE + TXX9_CE(2) + 0x00007000)</span>
<span class="cp">#define RBTX4938_SOFTRESETLOCK_ADDR	(IO_BASE + TXX9_CE(2) + 0x00007002)</span>
<span class="cp">#define RBTX4938_PCIRESET_ADDR	(IO_BASE + TXX9_CE(2) + 0x00007004)</span>
<span class="cp">#define RBTX4938_ETHER_BASE	(IO_BASE + TXX9_CE(2) + 0x00020000)</span>

<span class="cm">/* Ethernet port address (Jumperless Mode (W12:Open)) */</span>
<span class="cp">#define RBTX4938_ETHER_ADDR	(RBTX4938_ETHER_BASE + 0x280)</span>

<span class="cm">/* bits for ISTAT/IMASK/IMSTAT */</span>
<span class="cp">#define RBTX4938_INTB_PCID	0</span>
<span class="cp">#define RBTX4938_INTB_PCIC	1</span>
<span class="cp">#define RBTX4938_INTB_PCIB	2</span>
<span class="cp">#define RBTX4938_INTB_PCIA	3</span>
<span class="cp">#define RBTX4938_INTB_RTC	4</span>
<span class="cp">#define RBTX4938_INTB_ATA	5</span>
<span class="cp">#define RBTX4938_INTB_MODEM	6</span>
<span class="cp">#define RBTX4938_INTB_SWINT	7</span>
<span class="cp">#define RBTX4938_INTF_PCID	(1 &lt;&lt; RBTX4938_INTB_PCID)</span>
<span class="cp">#define RBTX4938_INTF_PCIC	(1 &lt;&lt; RBTX4938_INTB_PCIC)</span>
<span class="cp">#define RBTX4938_INTF_PCIB	(1 &lt;&lt; RBTX4938_INTB_PCIB)</span>
<span class="cp">#define RBTX4938_INTF_PCIA	(1 &lt;&lt; RBTX4938_INTB_PCIA)</span>
<span class="cp">#define RBTX4938_INTF_RTC	(1 &lt;&lt; RBTX4938_INTB_RTC)</span>
<span class="cp">#define RBTX4938_INTF_ATA	(1 &lt;&lt; RBTX4938_INTB_ATA)</span>
<span class="cp">#define RBTX4938_INTF_MODEM	(1 &lt;&lt; RBTX4938_INTB_MODEM)</span>
<span class="cp">#define RBTX4938_INTF_SWINT	(1 &lt;&lt; RBTX4938_INTB_SWINT)</span>

<span class="cp">#define rbtx4938_fpga_rev_addr	((__u8 __iomem *)RBTX4938_FPGA_REV_ADDR)</span>
<span class="cp">#define rbtx4938_led_addr	((__u8 __iomem *)RBTX4938_LED_ADDR)</span>
<span class="cp">#define rbtx4938_dipsw_addr	((__u8 __iomem *)RBTX4938_DIPSW_ADDR)</span>
<span class="cp">#define rbtx4938_bdipsw_addr	((__u8 __iomem *)RBTX4938_BDIPSW_ADDR)</span>
<span class="cp">#define rbtx4938_imask_addr	((__u8 __iomem *)RBTX4938_IMASK_ADDR)</span>
<span class="cp">#define rbtx4938_imask2_addr	((__u8 __iomem *)RBTX4938_IMASK2_ADDR)</span>
<span class="cp">#define rbtx4938_intpol_addr	((__u8 __iomem *)RBTX4938_INTPOL_ADDR)</span>
<span class="cp">#define rbtx4938_istat_addr	((__u8 __iomem *)RBTX4938_ISTAT_ADDR)</span>
<span class="cp">#define rbtx4938_istat2_addr	((__u8 __iomem *)RBTX4938_ISTAT2_ADDR)</span>
<span class="cp">#define rbtx4938_imstat_addr	((__u8 __iomem *)RBTX4938_IMSTAT_ADDR)</span>
<span class="cp">#define rbtx4938_imstat2_addr	((__u8 __iomem *)RBTX4938_IMSTAT2_ADDR)</span>
<span class="cp">#define rbtx4938_softint_addr	((__u8 __iomem *)RBTX4938_SOFTINT_ADDR)</span>
<span class="cp">#define rbtx4938_piosel_addr	((__u8 __iomem *)RBTX4938_PIOSEL_ADDR)</span>
<span class="cp">#define rbtx4938_spics_addr	((__u8 __iomem *)RBTX4938_SPICS_ADDR)</span>
<span class="cp">#define rbtx4938_sfpwr_addr	((__u8 __iomem *)RBTX4938_SFPWR_ADDR)</span>
<span class="cp">#define rbtx4938_sfvol_addr	((__u8 __iomem *)RBTX4938_SFVOL_ADDR)</span>
<span class="cp">#define rbtx4938_softreset_addr	((__u8 __iomem *)RBTX4938_SOFTRESET_ADDR)</span>
<span class="cp">#define rbtx4938_softresetlock_addr	\</span>
<span class="cp">				((__u8 __iomem *)RBTX4938_SOFTRESETLOCK_ADDR)</span>
<span class="cp">#define rbtx4938_pcireset_addr	((__u8 __iomem *)RBTX4938_PCIRESET_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * IRQ mappings</span>
<span class="cm"> */</span>

<span class="cp">#define RBTX4938_SOFT_INT0	0	</span><span class="cm">/* not used */</span><span class="cp"></span>
<span class="cp">#define RBTX4938_SOFT_INT1	1	</span><span class="cm">/* not used */</span><span class="cp"></span>
<span class="cp">#define RBTX4938_IRC_INT	2</span>
<span class="cp">#define RBTX4938_TIMER_INT	7</span>

<span class="cm">/* These are the virtual IRQ numbers, we divide all IRQ&#39;s into</span>
<span class="cm"> * &#39;spaces&#39;, the &#39;space&#39; determines where and how to enable/disable</span>
<span class="cm"> * that particular IRQ on an RBTX4938 machine.  Add new &#39;spaces&#39; as new</span>
<span class="cm"> * IRQ hardware is supported.</span>
<span class="cm"> */</span>
<span class="cp">#define RBTX4938_NR_IRQ_IOC	8</span>

<span class="cp">#define RBTX4938_IRQ_IRC	TXX9_IRQ_BASE</span>
<span class="cp">#define RBTX4938_IRQ_IOC	(TXX9_IRQ_BASE + TX4938_NUM_IR)</span>
<span class="cp">#define RBTX4938_IRQ_END	(RBTX4938_IRQ_IOC + RBTX4938_NR_IRQ_IOC)</span>

<span class="cp">#define RBTX4938_IRQ_IRC_ECCERR	(RBTX4938_IRQ_IRC + TX4938_IR_ECCERR)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_WTOERR	(RBTX4938_IRQ_IRC + TX4938_IR_WTOERR)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_INT(n)	(RBTX4938_IRQ_IRC + TX4938_IR_INT(n))</span>
<span class="cp">#define RBTX4938_IRQ_IRC_SIO(n)	(RBTX4938_IRQ_IRC + TX4938_IR_SIO(n))</span>
<span class="cp">#define RBTX4938_IRQ_IRC_DMA(ch, n)	(RBTX4938_IRQ_IRC + TX4938_IR_DMA(ch, n))</span>
<span class="cp">#define RBTX4938_IRQ_IRC_PIO	(RBTX4938_IRQ_IRC + TX4938_IR_PIO)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_PDMAC	(RBTX4938_IRQ_IRC + TX4938_IR_PDMAC)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_PCIC	(RBTX4938_IRQ_IRC + TX4938_IR_PCIC)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_TMR(n)	(RBTX4938_IRQ_IRC + TX4938_IR_TMR(n))</span>
<span class="cp">#define RBTX4938_IRQ_IRC_NDFMC	(RBTX4938_IRQ_IRC + TX4938_IR_NDFMC)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_PCIERR	(RBTX4938_IRQ_IRC + TX4938_IR_PCIERR)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_PCIPME	(RBTX4938_IRQ_IRC + TX4938_IR_PCIPME)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_ACLC	(RBTX4938_IRQ_IRC + TX4938_IR_ACLC)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_ACLCPME	(RBTX4938_IRQ_IRC + TX4938_IR_ACLCPME)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_PCIC1	(RBTX4938_IRQ_IRC + TX4938_IR_PCIC1)</span>
<span class="cp">#define RBTX4938_IRQ_IRC_SPI	(RBTX4938_IRQ_IRC + TX4938_IR_SPI)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_PCID	(RBTX4938_IRQ_IOC + RBTX4938_INTB_PCID)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_PCIC	(RBTX4938_IRQ_IOC + RBTX4938_INTB_PCIC)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_PCIB	(RBTX4938_IRQ_IOC + RBTX4938_INTB_PCIB)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_PCIA	(RBTX4938_IRQ_IOC + RBTX4938_INTB_PCIA)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_RTC	(RBTX4938_IRQ_IOC + RBTX4938_INTB_RTC)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_ATA	(RBTX4938_IRQ_IOC + RBTX4938_INTB_ATA)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_MODEM	(RBTX4938_IRQ_IOC + RBTX4938_INTB_MODEM)</span>
<span class="cp">#define RBTX4938_IRQ_IOC_SWINT	(RBTX4938_IRQ_IOC + RBTX4938_INTB_SWINT)</span>


<span class="cm">/* IOC (PCI, etc) */</span>
<span class="cp">#define RBTX4938_IRQ_IOCINT	(TXX9_IRQ_BASE + TX4938_IR_INT(0))</span>
<span class="cm">/* Onboard 10M Ether */</span>
<span class="cp">#define RBTX4938_IRQ_ETHER	(TXX9_IRQ_BASE + TX4938_IR_INT(1))</span>

<span class="cp">#define RBTX4938_RTL_8019_BASE (RBTX4938_ETHER_ADDR - mips_io_port_base)</span>
<span class="cp">#define RBTX4938_RTL_8019_IRQ  (RBTX4938_IRQ_ETHER)</span>

<span class="kt">void</span> <span class="n">rbtx4938_prom_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">rbtx4938_irq_setup</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">pci_dev</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">rbtx4938_pci_map_irq</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">pci_dev</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="n">u8</span> <span class="n">slot</span><span class="p">,</span> <span class="n">u8</span> <span class="n">pin</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* __ASM_TXX9_RBTX4938_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
