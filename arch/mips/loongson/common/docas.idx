f | Makefile | g | 578B |  | Arnaud Patard | apatard@mandriva.com | 1278346652 |  | MIPS: Loongson: Define rtc device on MC146818-equipped systems  This patch declare the rtc device present on systems with clock compatible with the mc146818 and handled by rtc-cmos.  Introduce a new Kconfig entry because there are some systems without rtc_cmos compatible clock.  Signed-off-by: Arnaud Patard <apatard@mandriva.com> To: linux-mips@linux-mips.org Cc: aba@not.so.argh.org Patchwork: http://patchwork.linux-mips.org/patch/1320/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pci.c | s | 2.7K | 77 | Wu Zhangjin | wuzhangjin@gmail.com | 1261015035 |  | MIPS: Loongson 2F: Cleanup the #if clauses  This patch adds two new kernel options: CPU_SUPPORTS_CPUFREQ and CPU_SUPPORTS_ADDRWINCFG to describe the new features of Loongons 2F and replaces the several ugly #if clauses by them.  These two options will be utilized by the future loongson revisions and related drivers such as the coming Loongson 2F CPUFreq driver.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: Wu Zhangjin <wuzhangjin@gmail.com> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | init.c | s | 993B | 31 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271592 |  | MIPS: Loongson: Change the Email address of Wu Zhangjin  Currently wuzj@lemote.com is not usable; change it to wuzhangjin@gmail.com.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/829/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | uart_base.c | s | 1.1K | 40 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271592 |  | MIPS: Loongson: Change the Email address of Wu Zhangjin  Currently wuzj@lemote.com is not usable; change it to wuzhangjin@gmail.com.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/829/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | env.c | s | 2.1K | 71 | Ralf Baechle | ralf@linux-mips.org | 1305047723 |  | MIPS: Loongson: Fix GCC 2.6.0 build error.    CC      arch/mips/loongson/common/env.o arch/mips/loongson/common/env.c: In function 'prom_init_env': arch/mips/loongson/common/env.c:50:12: error: variable 'ret' set but not used [-Werror=unused-but-set-variable] arch/mips/loongson/common/env.c:51:12: error: variable 'ret' set but not used [-Werror=unused-but-set-variable] arch/mips/loongson/common/env.c:52:12: error: variable 'ret' set but not used [-Werror=unused-but-set-variable] arch/mips/loongson/common/env.c:53:12: error: variable 'ret' set but not used [-Werror=unused-but-set-variable] cc1: all warnings being treated as errors  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | pm.c | s | 3.2K | 131 | Lionel Debroux | lionel_debroux@yahoo.fr | 1289913242 |  | suspend: constify platform_suspend_ops  While at it, fix two checkpatch errors. Several non-const struct instances constified by this patch were added after the introduction of platform_suspend_ops in checkpatch.pl's list of "should be const" structs (79404849e90a41ea2109bd0e2f7c7164b0c4ce73).  Patch against mainline. Inspired by hunks of the grsecurity patch, updated for newer kernels.  Signed-off-by: Lionel Debroux <lionel_debroux@yahoo.fr> Acked-by: Ingo Molnar <mingo@elte.hu> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | time.c | s | 820B | 27 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271592 |  | MIPS: Loongson: Change the Email address of Wu Zhangjin  Currently wuzj@lemote.com is not usable; change it to wuzhangjin@gmail.com.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/829/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | gpio.c | s | 2.8K | 115 | Arnaud Patard | apatard@mandriva.com | 1274473876 |  | MIPS: Loongson 2F: Add gpio/gpioilb support  Signed-off-by: Arnaud Patard <apatard@mandriva.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/1163/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | bonito-irq.c | s | 1.4K | 45 | Thomas Gleixner | tglx@linutronix.de | 1301402887 |  | MIPS: Convert the irq functions to the new names  Scripted with coccinelle.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | reset.c | s | 1.6K | 58 | Wu Zhangjin | wuzhangjin@gmail.com | 1272657178 |  | MIPS: Loongson 2F: Fix of problems introduced by -mfix-loongson2f-jump  The -mfix-loongson2f-jump option provided by latest CVS binutils have fixed the out-of-order issue of Loongson-2F described in chapter 15 of the Loongson2F User Manual [1, 2], but introduced some problems.  The option changes all of the jump target to "addr & 0xcfffffff" through the at($1) register, but for the reboot address of Loongson 2F 0xbfc00000 this is wrong.  Avoids the problem via telling the assembler to not use the $at register.  [1] Loongson2F User Manual (Chinese Version)     http://www.loongson.cn/uploadfile/file/200808211 [2] English Version of Chapter 15:     http://groups.google.com.hk/group/loongson-dev/msg/e0d2e220958f10a6?dmode=source  Reported-and-tested-by: Liu Shiwei <liushiwei@gmail.com> Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips <linux-mips@linux-mips.org> Patchwork: http://patchwork.linux-mips.org/patch/1109/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | mem.c | s | 2.7K | 97 | Arnaud Patard | apatard@mandriva.com | 1272657171 |  | MIPS: Loongson: Fix phys_mem_access_prot() check  The check used to determine if uncached accelerated should be used or not is wrong. The parenthesis are misplaced and making the test fail.  Signed-off-by: Arnaud Patard <apatard@mandriva.com> To: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/1161/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | platform.c | s | 874B | 25 | Paul Gortmaker | paul.gortmaker@windriver.com | 1320103855 |  | mips: fix implicit smp.h usage in various files.  We need to call out inclusion of smp.h, or with the module.h cleanup we'll get things like:  arch/mips/loongson/common/platform.c:21: error: implicit declaration of function 'smp_processor_id'  arch/mips/vr41xx/common/giu.c:84: error: implicit declaration of function 'smp_processor_id'  arch/mips/vr41xx/common/rtc.c:85: error: implicit declaration of function 'smp_processor_id'  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
d | cs5536 |  | 8 items |  | Yong Zhang | yong.zhang0@gmail.com | 1323295425 |  | MIPS: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  [ralf@linux-mips.org: Fixed up conflicts in arch/mips/alchemy/common/dbdma.c, arch/mips/cavium-octeon/smp.c and arch/mips/kernel/perf_event.c.]  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> To: linux-kernel@vger.kernel.org Cc: tglx@linutronix.de linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2835/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | irq.c | s | 1.5K | 56 | Wu Zhangjin | wuzhangjin@gmail.com | 1281011183 |  | MIPS: Loongson: Remove set_irq_trigger_mode()  set_irq_trigger_mode() is not needed on all platforms so remove it and move the related source code to mach_init_irq().  This will allow gdium to share the common irq.c without adding an empty set_irq_trigger_mode().  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1493/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | serial.c | s | 2.0K | 63 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271592 |  | MIPS: Loongson: Change the Email address of Wu Zhangjin  Currently wuzj@lemote.com is not usable; change it to wuzhangjin@gmail.com.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/829/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | setup.c | s | 1.2K | 47 | Sebastian Andrzej Siewior | sebastian@breakpoint.cc | 1272657162 |  | MIPS: Fixup screen_info struct initializations  ||arch/mips/sibyte/swarm/setup.c:153: || warning: large integer implicitly truncated to unsigned type  The field was changed in d9b26352 aka ("x86, setup: Store the boot cursor state").  This patch changes the values back they way they were before this extra field got introduced.  While here, the other two boards are also converted to C99 initializer.  Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc> Cc: linux-mips@linux-mips.org Patchwork: http://patchwork.linux-mips.org/patch/1137/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cmdline.c | s | 1.3K | 43 | Robert Millan | rmh@gnu.org | 1300133245 |  | MIPS: Loongson: Remove ad-hoc cmdline default  Loongson builds have an ad-hoc cmdline default of "console=ttyS0,115200 root=/dev/hda1". These settings come from a vendor; I remember builds from Lemote branch requiring a "console=tty" override in order to get a working console.  At least on Yeeloong, they're particularly useless: there's no external serial port, and the IDE drive is now recognised as /dev/sda.  Signed-off-by: Robert Millan <rmh@gnu.org> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1759/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | early_printk.c | s | 1.0K | 33 | Wu Zhangjin | wuzhangjin@gmail.com | 1267271592 |  | MIPS: Loongson: Change the Email address of Wu Zhangjin  Currently wuzj@lemote.com is not usable; change it to wuzhangjin@gmail.com.  Signed-off-by: Wu Zhangjin <wuzhangjin@gmail.com> Cc: linux-mips@linux-mips.org Cc: yanh@lemote.com Cc: huhb@lemote.com Cc: zhangfx@lemote.com Patchwork: http://patchwork.linux-mips.org/patch/829/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | machtype.c | s | 1.7K | 57 | Stefan Weil | weil@mail.berlios.de | 1300133246 |  | MIPS: Loongson: Fix potentially wrong string handling  This error was reported by cppcheck: arch/mips/loongson/common/machtype.c:56: error: Dangerous usage of 'str' (strncpy doesn't always 0-terminate it)  If strncpy copied MACHTYPE_LEN bytes, the destination string str was not terminated.  The patch adds one more byte to str and makes sure that this byte is always 0.  Signed-off-by: Stefan Weil <weil@mail.berlios.de> Cc: Wu Zhangjin <wuzhangjin@gmail.com> Cc: Arnaud Patard <apatard@mandriva.com> Cc: linux-mips@linux-mips.org Cc: linux-kernel@vger.kernel.org Patchwork: https://patchwork.linux-mips.org/patch/2053/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | rtc.c | s | 1.0K | 37 | Arnaud Patard | apatard@mandriva.com | 1278346652 |  | MIPS: Loongson: Define rtc device on MC146818-equipped systems  This patch declare the rtc device present on systems with clock compatible with the mc146818 and handled by rtc-cmos.  Introduce a new Kconfig entry because there are some systems without rtc_cmos compatible clock.  Signed-off-by: Arnaud Patard <apatard@mandriva.com> To: linux-mips@linux-mips.org Cc: aba@not.so.argh.org Patchwork: http://patchwork.linux-mips.org/patch/1320/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
