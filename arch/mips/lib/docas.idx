f | Makefile | g | 1.2K |  | Jayachandran C | jayachandranc@netlogicmicro.com | 1323295496 |  | MIPS: Netlogic: Add XLP makefiles and config  - Add CPU_XLP and NLM_XLR_BOARD to arch/mips/Kconfig for Netlogic XLP boards - Update mips Makefiles to add XLP  Signed-off-by: Jayachandran C <jayachandranc@netlogicmicro.com> Cc: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/2968/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | uncached.c | s | 2.1K | 74 | Ralf Baechle | ralf@linux-mips.org | 1205331281 |  | [MIPS] Fix loads of section missmatches  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | r3k_dump_tlb.c | s | 1.4K | 54 | Atsushi Nemoto | anemo@mba.ocn.ne.jp | 1184258471 |  | [MIPS] Cleanup tlbdebug.h  Also include tlbdebug.h in dump_tlb.c and r3k_dump_tlb.c.  Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp> Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | strlen_user.S | g | 868B |  | Ralf Baechle | ralf@linux-mips.org | 1201601699 |  | [MIPS] Eleminate local symbols from the symbol table.  These symbols appear in oprofile output, stacktraces and similar but only make the output harder to read.  Many identical symbol names such as "both_aligned" were also being used in multiple source files making it impossible to see which file actually was meant.  So let's get rid of them.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | iomap-pci.c | s | 1.3K | 40 | Michael S. Tsirkin | mst@redhat.com | 1328044830 |  | mips: use the the PCI controller's io_map_base  commit eab90291d35438bcebf7c3dc85be66d0f24e3002 (mips: switch to GENERIC_PCI_IOMAP) failed to take into account the PCI controller's io_map_base for mapping IO BARs. This also caused a new warning on mips.  Fix this, without re-introducing code duplication, by setting NO_GENERIC_PCI_IOPORT_MAP and supplying a mips-specific __pci_ioport_map.  Reported-by: Kevin Cernekee <cernekee@gmail.com> Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
f | delay.c | s | 1.4K | 49 | Ralf Baechle | ralf@linux-mips.org | 1271089569 |  | MIPS: delay: Fix use of current_cpu_data in preemptable code.  This may lead to warnings like:  BUG: using smp_processor_id() in preemptible [00000000] code: reboot/1989 caller is __udelay+0x14/0x70 Call Trace: [<ffffffff8110ad28>] dump_stack+0x8/0x34 [<ffffffff812dde04>] debug_smp_processor_id+0xf4/0x110 [<ffffffff812d90bc>] __udelay+0x14/0x70 [<ffffffff81378274>] md_notify_reboot+0x12c/0x148 [<ffffffff81161054>] notifier_call_chain+0x64/0xc8 [<ffffffff811614dc>] __blocking_notifier_call_chain+0x64/0xc0 [<ffffffff8115566c>] kernel_restart_prepare+0x1c/0x38 [<ffffffff811556cc>] kernel_restart+0x14/0x50 [<ffffffff8115581c>] SyS_reboot+0x10c/0x1f0 [<ffffffff81103684>] handle_sysn32+0x44/0x84  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | strnlen_user.S | g | 1.2K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | iomap.c | s | 4.5K | 180 | Jean Delvare | khali@linux-fr.org | 1178157755 |  | PCI: Cleanup the includes of <linux/pci.h>  I noticed that many source files include <linux/pci.h> while they do not appear to need it. Here is an attempt to clean it all up.  In order to find all possibly affected files, I searched for all files including <linux/pci.h> but without any other occurence of "pci" or "PCI". I removed the include statement from all of these, then I compiled an allmodconfig kernel on both i386 and x86_64 and fixed the false positives manually.  My tests covered 66% of the affected files, so there could be false positives remaining. Untested files are:  arch/alpha/kernel/err_common.c arch/alpha/kernel/err_ev6.c arch/alpha/kernel/err_ev7.c arch/ia64/sn/kernel/huberror.c arch/ia64/sn/kernel/xpnet.c arch/m68knommu/kernel/dma.c arch/mips/lib/iomap.c arch/powerpc/platforms/pseries/ras.c arch/ppc/8260_io/enet.c arch/ppc/8260_io/fcc_enet.c arch/ppc/8xx_io/enet.c arch/ppc/syslib/ppc4xx_sgdma.c arch/sh64/mach-cayman/iomap.c arch/xtensa/kernel/xtensa_ksyms.c arch/xtensa/platform-iss/setup.c drivers/i2c/busses/i2c-at91.c drivers/i2c/busses/i2c-mpc.c drivers/media/video/saa711x.c drivers/misc/hdpuftrs/hdpu_cpustate.c drivers/misc/hdpuftrs/hdpu_nexus.c drivers/net/au1000_eth.c drivers/net/fec_8xx/fec_main.c drivers/net/fec_8xx/fec_mii.c drivers/net/fs_enet/fs_enet-main.c drivers/net/fs_enet/mac-fcc.c drivers/net/fs_enet/mac-fec.c drivers/net/fs_enet/mac-scc.c drivers/net/fs_enet/mii-bitbang.c drivers/net/fs_enet/mii-fec.c drivers/net/ibm_emac/ibm_emac_core.c drivers/net/lasi_82596.c drivers/parisc/hppb.c drivers/sbus/sbus.c drivers/video/g364fb.c drivers/video/platinumfb.c drivers/video/stifb.c drivers/video/valkyriefb.c include/asm-arm/arch-ixp4xx/dma.h sound/oss/au1550_ac97.c  I would welcome test reports for these files. I am fine with removing the untested files from the patch if the general opinion is that these changes aren't safe. The tested part would still be nice to have.  Note that this patch depends on another header fixup patch I submitted to LKML yesterday:   [PATCH] scatterlist.h needs types.h   http://lkml.org/lkml/2007/3/01/141  Signed-off-by: Jean Delvare <khali@linux-fr.org> Cc: Badari Pulavarty <pbadari@us.ibm.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | memset.S | g | 4.1K |  | Tony Wu | tung7970@gmail.com | 1292523057 |  | MIPS: Separate two consecutive loads in memset.S  partial_fixup is used in noreorder block.  Separating two consecutive loads can save one cycle on processors with GPR intrelock and can fix load-use on processors that need a load delay slot.  Also do so for fwd_fixup.  [Ralf: Only R2000/R3000 class processors are lacking the the load-user interlock and even some of those got it retrofitted.  With R2000/R3000 being fairly uncommon these days the impact of this bug should be minor.]  Signed-off-by: Tony Wu <tung7970@gmail.com> To: linux-mips@linux-mips.org Patchwork: https://patchwork.linux-mips.org/patch/1768/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | memcpy.S | g | 13K |  | Ralf Baechle | ralf@linux-mips.org | 1233351178 |  | MIPS: IP27: Switch from DMA_IP27 to DMA_COHERENT  The special IP27 DMA code selected by DMA_IP27 has been removed a while ago turning DMA_IP27 into almost a nop.  Also fixup the broken logic of its last users memcpy.S and memcpy-inatomic.s.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ashrdi3.c | s | 499B | 23 | Ralf Baechle | ralf@linux-mips.org | 1150735156 |  | [MIPS] Fix optimization for size build.  It took a while longer than on other architectures but gcc has finally started to strike us as well ...  This also fixes the damage by 6edfba1b33c701108717f4e036320fc39abe1912.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | cmpdi2.c | s | 435B | 21 | Ralf Baechle | ralf@linux-mips.org | 1188177420 |  | [MIPS] Add __cmpdi2  Certain 32-bit kernel configurations seem to be able to cause references, this was observed with gcc 4.1.2.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | dump_tlb.c | s | 2.6K | 100 | Ralf Baechle | ralf@linux-mips.org | 1242305427 |  | MIPS: Cavium: Add support for 8k and 32k page sizes.  Beyond the requirements of the architecture standard Cavium also supports 8k and 32k pages.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Acked-by: David Daney <ddaney@caviumnetworks.com>
f | csum_partial.S | g | 16K |  | Ralf Baechle | ralf@linux-mips.org | 1223738333 |  | MIPS: IP checksums: Optimize adjust of sum on buffers of odd alignment.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | memcpy-inatomic.S | g | 11K |  | Ralf Baechle | ralf@linux-mips.org | 1233351178 |  | MIPS: IP27: Switch from DMA_IP27 to DMA_COHERENT  The special IP27 DMA code selected by DMA_IP27 has been removed a while ago turning DMA_IP27 into almost a nop.  Also fixup the broken logic of its last users memcpy.S and memcpy-inatomic.s.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ashldi3.c | s | 475B | 21 | Ralf Baechle | ralf@linux-mips.org | 1150735156 |  | [MIPS] Fix optimization for size build.  It took a while longer than on other architectures but gcc has finally started to strike us as well ...  This also fixes the damage by 6edfba1b33c701108717f4e036320fc39abe1912.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | strncpy_user.S | g | 1.3K |  | Ralf Baechle | ralf@linux-mips.org | 1201601699 |  | [MIPS] Eleminate local symbols from the symbol table.  These symbols appear in oprofile output, stacktraces and similar but only make the output harder to read.  Many identical symbol names such as "both_aligned" were also being used in multiple source files making it impossible to see which file actually was meant.  So let's get rid of them.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | ucmpdi2.c | s | 503B | 17 | Ralf Baechle | ralf@linux-mips.org | 1205331281 |  | [MIPS] Export __ucmpdi2 to modules.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | libgcc.h | s | 383B | 20 | Andrea Gelmini | andrea.gelmini@gelma.net | 1271089575 |  | MIPS: libgcc.h: Checkpatch cleanup  arch/mips/lib/libgcc.h:21: ERROR: open brace '{' following union go on the same line  Signed-off-by: Andrea Gelmini <andrea.gelmini@gelma.net> To: linux-kernel@vger.kernel.org Cc: Paul Mundt <lethal@linux-sh.org> Cc: linux-mips@linux-mips.org Cc: linux-sh@vger.kernel.org Patchwork: http://patchwork.linux-mips.org/patch/1007/ Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
f | lshrdi3.c | s | 477B | 21 | Ralf Baechle | ralf@linux-mips.org | 1150735156 |  | [MIPS] Fix optimization for size build.  It took a while longer than on other architectures but gcc has finally started to strike us as well ...  This also fixes the damage by 6edfba1b33c701108717f4e036320fc39abe1912.  Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
