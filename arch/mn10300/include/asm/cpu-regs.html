<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mn10300 › include › asm › cpu-regs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>cpu-regs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* MN10300 Core system registers</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007 Red Hat, Inc. All Rights Reserved.</span>
<span class="cm"> * Written by David Howells (dhowells@redhat.com)</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public Licence</span>
<span class="cm"> * as published by the Free Software Foundation; either version</span>
<span class="cm"> * 2 of the Licence, or (at your option) any later version.</span>
<span class="cm"> */</span>
<span class="cp">#ifndef _ASM_CPU_REGS_H</span>
<span class="cp">#define _ASM_CPU_REGS_H</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#endif</span>

<span class="cm">/* we tell the compiler to pretend to be AM33 so that it doesn&#39;t try and use</span>
<span class="cm"> * the FP regs, but tell the assembler that we&#39;re actually allowed AM33v2</span>
<span class="cm"> * instructions */</span>
<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="n">asm</span><span class="p">(</span><span class="s">&quot; .am33_2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="p">.</span><span class="n">am33_2</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __KERNEL__</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cp">#define __SYSREG(ADDR, TYPE) (*(volatile TYPE *)(ADDR))</span>
<span class="cp">#define __SYSREGC(ADDR, TYPE) (*(const volatile TYPE *)(ADDR))</span>
<span class="cp">#else</span>
<span class="cp">#define __SYSREG(ADDR, TYPE) ADDR</span>
<span class="cp">#define __SYSREGC(ADDR, TYPE) ADDR</span>
<span class="cp">#endif</span>

<span class="cm">/* CPU registers */</span>
<span class="cp">#define EPSW_FLAG_Z		0x00000001	</span><span class="cm">/* zero flag */</span><span class="cp"></span>
<span class="cp">#define EPSW_FLAG_N		0x00000002	</span><span class="cm">/* negative flag */</span><span class="cp"></span>
<span class="cp">#define EPSW_FLAG_C		0x00000004	</span><span class="cm">/* carry flag */</span><span class="cp"></span>
<span class="cp">#define EPSW_FLAG_V		0x00000008	</span><span class="cm">/* overflow flag */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM			0x00000700	</span><span class="cm">/* interrupt mode */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_0		0x00000000	</span><span class="cm">/* interrupt mode 0 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_1		0x00000100	</span><span class="cm">/* interrupt mode 1 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_2		0x00000200	</span><span class="cm">/* interrupt mode 2 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_3		0x00000300	</span><span class="cm">/* interrupt mode 3 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_4		0x00000400	</span><span class="cm">/* interrupt mode 4 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_5		0x00000500	</span><span class="cm">/* interrupt mode 5 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_6		0x00000600	</span><span class="cm">/* interrupt mode 6 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_7		0x00000700	</span><span class="cm">/* interrupt mode 7 */</span><span class="cp"></span>
<span class="cp">#define EPSW_IE			0x00000800	</span><span class="cm">/* interrupt enable */</span><span class="cp"></span>
<span class="cp">#define EPSW_S			0x00003000	</span><span class="cm">/* software auxiliary bits */</span><span class="cp"></span>
<span class="cp">#define EPSW_T			0x00008000	</span><span class="cm">/* trace enable */</span><span class="cp"></span>
<span class="cp">#define EPSW_nSL		0x00010000	</span><span class="cm">/* not supervisor level */</span><span class="cp"></span>
<span class="cp">#define EPSW_NMID		0x00020000	</span><span class="cm">/* nonmaskable interrupt disable */</span><span class="cp"></span>
<span class="cp">#define EPSW_nAR		0x00040000	</span><span class="cm">/* register bank control */</span><span class="cp"></span>
<span class="cp">#define EPSW_ML			0x00080000	</span><span class="cm">/* monitor level */</span><span class="cp"></span>
<span class="cp">#define EPSW_FE			0x00100000	</span><span class="cm">/* FPU enable */</span><span class="cp"></span>
<span class="cp">#define EPSW_IM_SHIFT		8		</span><span class="cm">/* EPSW_IM_SHIFT determines the interrupt mode */</span><span class="cp"></span>

<span class="cp">#define NUM2EPSW_IM(num)	((num) &lt;&lt; EPSW_IM_SHIFT)</span>

<span class="cm">/* FPU registers */</span>
<span class="cp">#define FPCR_EF_I		0x00000001	</span><span class="cm">/* inexact result FPU exception flag */</span><span class="cp"></span>
<span class="cp">#define FPCR_EF_U		0x00000002	</span><span class="cm">/* underflow FPU exception flag */</span><span class="cp"></span>
<span class="cp">#define FPCR_EF_O		0x00000004	</span><span class="cm">/* overflow FPU exception flag */</span><span class="cp"></span>
<span class="cp">#define FPCR_EF_Z		0x00000008	</span><span class="cm">/* zero divide FPU exception flag */</span><span class="cp"></span>
<span class="cp">#define FPCR_EF_V		0x00000010	</span><span class="cm">/* invalid operand FPU exception flag */</span><span class="cp"></span>
<span class="cp">#define FPCR_EE_I		0x00000020	</span><span class="cm">/* inexact result FPU exception enable */</span><span class="cp"></span>
<span class="cp">#define FPCR_EE_U		0x00000040	</span><span class="cm">/* underflow FPU exception enable */</span><span class="cp"></span>
<span class="cp">#define FPCR_EE_O		0x00000080	</span><span class="cm">/* overflow FPU exception enable */</span><span class="cp"></span>
<span class="cp">#define FPCR_EE_Z		0x00000100	</span><span class="cm">/* zero divide FPU exception enable */</span><span class="cp"></span>
<span class="cp">#define FPCR_EE_V		0x00000200	</span><span class="cm">/* invalid operand FPU exception enable */</span><span class="cp"></span>
<span class="cp">#define FPCR_EC_I		0x00000400	</span><span class="cm">/* inexact result FPU exception cause */</span><span class="cp"></span>
<span class="cp">#define FPCR_EC_U		0x00000800	</span><span class="cm">/* underflow FPU exception cause */</span><span class="cp"></span>
<span class="cp">#define FPCR_EC_O		0x00001000	</span><span class="cm">/* overflow FPU exception cause */</span><span class="cp"></span>
<span class="cp">#define FPCR_EC_Z		0x00002000	</span><span class="cm">/* zero divide FPU exception cause */</span><span class="cp"></span>
<span class="cp">#define FPCR_EC_V		0x00004000	</span><span class="cm">/* invalid operand FPU exception cause */</span><span class="cp"></span>
<span class="cp">#define FPCR_RM			0x00030000	</span><span class="cm">/* rounding mode */</span><span class="cp"></span>
<span class="cp">#define FPCR_RM_NEAREST		0x00000000	</span><span class="cm">/* - round to nearest value */</span><span class="cp"></span>
<span class="cp">#define FPCR_FCC_U		0x00040000	</span><span class="cm">/* FPU unordered condition code */</span><span class="cp"></span>
<span class="cp">#define FPCR_FCC_E		0x00080000	</span><span class="cm">/* FPU equal condition code */</span><span class="cp"></span>
<span class="cp">#define FPCR_FCC_G		0x00100000	</span><span class="cm">/* FPU greater than condition code */</span><span class="cp"></span>
<span class="cp">#define FPCR_FCC_L		0x00200000	</span><span class="cm">/* FPU less than condition code */</span><span class="cp"></span>
<span class="cp">#define FPCR_INIT		0x00000000	</span><span class="cm">/* no exceptions, rounding to nearest */</span><span class="cp"></span>

<span class="cm">/* CPU control registers */</span>
<span class="cp">#define CPUP			__SYSREG(0xc0000020, u16)	</span><span class="cm">/* CPU pipeline register */</span><span class="cp"></span>
<span class="cp">#define CPUP_DWBD		0x0020		</span><span class="cm">/* write buffer disable flag */</span><span class="cp"></span>
<span class="cp">#define CPUP_IPFD		0x0040		</span><span class="cm">/* instruction prefetch disable flag */</span><span class="cp"></span>
<span class="cp">#define CPUP_EXM		0x0080		</span><span class="cm">/* exception operation mode */</span><span class="cp"></span>
<span class="cp">#define CPUP_EXM_AM33V1		0x0000		</span><span class="cm">/* - AM33 v1 exception mode */</span><span class="cp"></span>
<span class="cp">#define CPUP_EXM_AM33V2		0x0080		</span><span class="cm">/* - AM33 v2 exception mode */</span><span class="cp"></span>

<span class="cp">#define CPUM			__SYSREG(0xc0000040, u16)	</span><span class="cm">/* CPU mode register */</span><span class="cp"></span>
<span class="cp">#define CPUM_SLEEP		0x0004		</span><span class="cm">/* set to enter sleep state */</span><span class="cp"></span>
<span class="cp">#define CPUM_HALT		0x0008		</span><span class="cm">/* set to enter halt state */</span><span class="cp"></span>
<span class="cp">#define CPUM_STOP		0x0010		</span><span class="cm">/* set to enter stop state */</span><span class="cp"></span>

<span class="cp">#define CPUREV			__SYSREGC(0xc0000050, u32)	</span><span class="cm">/* CPU revision register */</span><span class="cp"></span>
<span class="cp">#define CPUREV_TYPE		0x0000000f	</span><span class="cm">/* CPU type */</span><span class="cp"></span>
<span class="cp">#define CPUREV_TYPE_S		0</span>
<span class="cp">#define CPUREV_TYPE_AM33_1	0x00000000	</span><span class="cm">/* - AM33-1 core, AM33/1.00 arch */</span><span class="cp"></span>
<span class="cp">#define CPUREV_TYPE_AM33_2	0x00000001	</span><span class="cm">/* - AM33-2 core, AM33/2.00 arch */</span><span class="cp"></span>
<span class="cp">#define CPUREV_TYPE_AM34_1	0x00000002	</span><span class="cm">/* - AM34-1 core, AM33/2.00 arch */</span><span class="cp"></span>
<span class="cp">#define CPUREV_TYPE_AM33_3	0x00000003	</span><span class="cm">/* - AM33-3 core, AM33/2.00 arch */</span><span class="cp"></span>
<span class="cp">#define CPUREV_TYPE_AM34_2	0x00000004	</span><span class="cm">/* - AM34-2 core, AM33/3.00 arch */</span><span class="cp"></span>
<span class="cp">#define CPUREV_REVISION		0x000000f0	</span><span class="cm">/* CPU revision */</span><span class="cp"></span>
<span class="cp">#define CPUREV_REVISION_S	4</span>
<span class="cp">#define CPUREV_ICWAY		0x00000f00	</span><span class="cm">/* number of instruction cache ways */</span><span class="cp"></span>
<span class="cp">#define CPUREV_ICWAY_S		8</span>
<span class="cp">#define CPUREV_ICSIZE		0x0000f000	</span><span class="cm">/* instruction cache way size */</span><span class="cp"></span>
<span class="cp">#define CPUREV_ICSIZE_S		12</span>
<span class="cp">#define CPUREV_DCWAY		0x000f0000	</span><span class="cm">/* number of data cache ways */</span><span class="cp"></span>
<span class="cp">#define CPUREV_DCWAY_S		16</span>
<span class="cp">#define CPUREV_DCSIZE		0x00f00000	</span><span class="cm">/* data cache way size */</span><span class="cp"></span>
<span class="cp">#define CPUREV_DCSIZE_S		20</span>
<span class="cp">#define CPUREV_FPUTYPE		0x0f000000	</span><span class="cm">/* FPU core type */</span><span class="cp"></span>
<span class="cp">#define CPUREV_FPUTYPE_NONE	0x00000000	</span><span class="cm">/* - no FPU core implemented */</span><span class="cp"></span>
<span class="cp">#define CPUREV_OCDCTG		0xf0000000	</span><span class="cm">/* on-chip debug function category */</span><span class="cp"></span>

<span class="cp">#define DCR			__SYSREG(0xc0000030, u16)	</span><span class="cm">/* Debug control register */</span><span class="cp"></span>

<span class="cm">/* interrupt/exception control registers */</span>
<span class="cp">#define IVAR0			__SYSREG(0xc0000000, u16)	</span><span class="cm">/* interrupt vector 0 */</span><span class="cp"></span>
<span class="cp">#define IVAR1			__SYSREG(0xc0000004, u16)	</span><span class="cm">/* interrupt vector 1 */</span><span class="cp"></span>
<span class="cp">#define IVAR2			__SYSREG(0xc0000008, u16)	</span><span class="cm">/* interrupt vector 2 */</span><span class="cp"></span>
<span class="cp">#define IVAR3			__SYSREG(0xc000000c, u16)	</span><span class="cm">/* interrupt vector 3 */</span><span class="cp"></span>
<span class="cp">#define IVAR4			__SYSREG(0xc0000010, u16)	</span><span class="cm">/* interrupt vector 4 */</span><span class="cp"></span>
<span class="cp">#define IVAR5			__SYSREG(0xc0000014, u16)	</span><span class="cm">/* interrupt vector 5 */</span><span class="cp"></span>
<span class="cp">#define IVAR6			__SYSREG(0xc0000018, u16)	</span><span class="cm">/* interrupt vector 6 */</span><span class="cp"></span>

<span class="cp">#define TBR			__SYSREG(0xc0000024, u32)	</span><span class="cm">/* Trap table base */</span><span class="cp"></span>
<span class="cp">#define TBR_TB			0xff000000	</span><span class="cm">/* table base address bits 31-24 */</span><span class="cp"></span>
<span class="cp">#define TBR_INT_CODE		0x00ffffff	</span><span class="cm">/* interrupt code */</span><span class="cp"></span>

<span class="cp">#define DEAR			__SYSREG(0xc0000038, u32)	</span><span class="cm">/* Data access exception address */</span><span class="cp"></span>

<span class="cp">#define sISR			__SYSREG(0xc0000044, u32)	</span><span class="cm">/* Supervisor interrupt status */</span><span class="cp"></span>
<span class="cp">#define	sISR_IRQICE		0x00000001	</span><span class="cm">/* ICE interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_ISTEP		0x00000002	</span><span class="cm">/* single step interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_MISSA		0x00000004	</span><span class="cm">/* memory access address misalignment fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_UNIMP		0x00000008	</span><span class="cm">/* unimplemented instruction execution fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_PIEXE		0x00000010	</span><span class="cm">/* program interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_MEMERR		0x00000020	</span><span class="cm">/* illegal memory access fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_IBREAK		0x00000040	</span><span class="cm">/* instraction break interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_DBSRL		0x00000080	</span><span class="cm">/* debug serial interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_PERIDB		0x00000100	</span><span class="cm">/* peripheral debug interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_EXUNIMP		0x00000200	</span><span class="cm">/* unimplemented ex-instruction execution fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_OBREAK		0x00000400	</span><span class="cm">/* operand break interrupt */</span><span class="cp"></span>
<span class="cp">#define	sISR_PRIV		0x00000800	</span><span class="cm">/* privileged instruction execution fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_BUSERR		0x00001000	</span><span class="cm">/* bus error fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_DBLFT		0x00002000	</span><span class="cm">/* double fault */</span><span class="cp"></span>
<span class="cp">#define	sISR_DBG		0x00008000	</span><span class="cm">/* debug reserved interrupt */</span><span class="cp"></span>
<span class="cp">#define sISR_ITMISS		0x00010000	</span><span class="cm">/* instruction TLB miss */</span><span class="cp"></span>
<span class="cp">#define sISR_DTMISS		0x00020000	</span><span class="cm">/* data TLB miss */</span><span class="cp"></span>
<span class="cp">#define sISR_ITEX		0x00040000	</span><span class="cm">/* instruction TLB access exception */</span><span class="cp"></span>
<span class="cp">#define sISR_DTEX		0x00080000	</span><span class="cm">/* data TLB access exception */</span><span class="cp"></span>
<span class="cp">#define sISR_ILGIA		0x00100000	</span><span class="cm">/* illegal instruction access exception */</span><span class="cp"></span>
<span class="cp">#define sISR_ILGDA		0x00200000	</span><span class="cm">/* illegal data access exception */</span><span class="cp"></span>
<span class="cp">#define sISR_IOIA		0x00400000	</span><span class="cm">/* internal I/O space instruction access excep */</span><span class="cp"></span>
<span class="cp">#define sISR_PRIVA		0x00800000	</span><span class="cm">/* privileged space instruction access excep */</span><span class="cp"></span>
<span class="cp">#define sISR_PRIDA		0x01000000	</span><span class="cm">/* privileged space data access excep */</span><span class="cp"></span>
<span class="cp">#define sISR_DISA		0x02000000	</span><span class="cm">/* data space instruction access excep */</span><span class="cp"></span>
<span class="cp">#define sISR_SYSC		0x04000000	</span><span class="cm">/* system call instruction excep */</span><span class="cp"></span>
<span class="cp">#define sISR_FPUD		0x08000000	</span><span class="cm">/* FPU disabled excep */</span><span class="cp"></span>
<span class="cp">#define sISR_FPUUI		0x10000000	</span><span class="cm">/* FPU unimplemented instruction excep */</span><span class="cp"></span>
<span class="cp">#define sISR_FPUOP		0x20000000	</span><span class="cm">/* FPU operation excep */</span><span class="cp"></span>
<span class="cp">#define sISR_NE			0x80000000	</span><span class="cm">/* multiple synchronous exceptions excep */</span><span class="cp"></span>

<span class="cm">/* cache control registers */</span>
<span class="cp">#define CHCTR			__SYSREG(0xc0000070, u16)	</span><span class="cm">/* cache control */</span><span class="cp"></span>
<span class="cp">#define CHCTR_ICEN		0x0001		</span><span class="cm">/* instruction cache enable */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCEN		0x0002		</span><span class="cm">/* data cache enable */</span><span class="cp"></span>
<span class="cp">#define CHCTR_ICBUSY		0x0004		</span><span class="cm">/* instruction cache busy */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCBUSY		0x0008		</span><span class="cm">/* data cache busy */</span><span class="cp"></span>
<span class="cp">#define CHCTR_ICINV		0x0010		</span><span class="cm">/* instruction cache invalidate */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCINV		0x0020		</span><span class="cm">/* data cache invalidate */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCWTMD		0x0040		</span><span class="cm">/* data cache writing mode */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCWTMD_WRBACK	0x0000		</span><span class="cm">/* - write back mode */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCWTMD_WRTHROUGH	0x0040		</span><span class="cm">/* - write through mode */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCALMD		0x0080		</span><span class="cm">/* data cache allocation mode */</span><span class="cp"></span>
<span class="cp">#define CHCTR_ICWMD		0x0f00		</span><span class="cm">/* instruction cache way mode */</span><span class="cp"></span>
<span class="cp">#define CHCTR_DCWMD		0xf000		</span><span class="cm">/* data cache way mode */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_AM34_2</span>
<span class="cp">#define ICIVCR			__SYSREG(0xc0000c00, u32)	</span><span class="cm">/* icache area invalidate control */</span><span class="cp"></span>
<span class="cp">#define ICIVCR_ICIVBSY		0x00000008			</span><span class="cm">/* icache area invalidate busy */</span><span class="cp"></span>
<span class="cp">#define ICIVCR_ICI		0x00000001			</span><span class="cm">/* icache area invalidate */</span><span class="cp"></span>

<span class="cp">#define ICIVMR			__SYSREG(0xc0000c04, u32)	</span><span class="cm">/* icache area invalidate mask */</span><span class="cp"></span>

<span class="cp">#define	DCPGCR			__SYSREG(0xc0000c10, u32)	</span><span class="cm">/* data cache area purge control */</span><span class="cp"></span>
<span class="cp">#define	DCPGCR_DCPGBSY		0x00000008			</span><span class="cm">/* data cache area purge busy */</span><span class="cp"></span>
<span class="cp">#define	DCPGCR_DCP		0x00000002			</span><span class="cm">/* data cache area purge */</span><span class="cp"></span>
<span class="cp">#define	DCPGCR_DCI		0x00000001			</span><span class="cm">/* data cache area invalidate */</span><span class="cp"></span>

<span class="cp">#define	DCPGMR			__SYSREG(0xc0000c14, u32)	</span><span class="cm">/* data cache area purge mask */</span><span class="cp"></span>
<span class="cp">#endif </span><span class="cm">/* CONFIG_AM34_2 */</span><span class="cp"></span>

<span class="cm">/* MMU control registers */</span>
<span class="cp">#define MMUCTR			__SYSREG(0xc0000090, u32)	</span><span class="cm">/* MMU control register */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_IRP		0x0000003f	</span><span class="cm">/* instruction TLB replace pointer */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITE		0x00000040	</span><span class="cm">/* instruction TLB enable */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_IIV		0x00000080	</span><span class="cm">/* instruction TLB invalidate */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL		0x00000700	</span><span class="cm">/* instruction TLB lock pointer */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL_NOLOCK	0x00000000	</span><span class="cm">/* - no lock */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL_LOCK0	0x00000100	</span><span class="cm">/* - entry 0 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL_LOCK0_1	0x00000200	</span><span class="cm">/* - entry 0-1 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL_LOCK0_3	0x00000300	</span><span class="cm">/* - entry 0-3 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL_LOCK0_7	0x00000400	</span><span class="cm">/* - entry 0-7 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_ITL_LOCK0_15	0x00000500	</span><span class="cm">/* - entry 0-15 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_CE		0x00008000	</span><span class="cm">/* cacheable bit enable */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DRP		0x003f0000	</span><span class="cm">/* data TLB replace pointer */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTE		0x00400000	</span><span class="cm">/* data TLB enable */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DIV		0x00800000	</span><span class="cm">/* data TLB invalidate */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL		0x07000000	</span><span class="cm">/* data TLB lock pointer */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL_NOLOCK	0x00000000	</span><span class="cm">/* - no lock */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL_LOCK0	0x01000000	</span><span class="cm">/* - entry 0 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL_LOCK0_1	0x02000000	</span><span class="cm">/* - entry 0-1 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL_LOCK0_3	0x03000000	</span><span class="cm">/* - entry 0-3 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL_LOCK0_7	0x04000000	</span><span class="cm">/* - entry 0-7 locked */</span><span class="cp"></span>
<span class="cp">#define MMUCTR_DTL_LOCK0_15	0x05000000	</span><span class="cm">/* - entry 0-15 locked */</span><span class="cp"></span>
<span class="cp">#ifdef CONFIG_AM34_2</span>
<span class="cp">#define MMUCTR_WTE		0x80000000	</span><span class="cm">/* write-through cache TLB entry bit enable */</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#define PIDR			__SYSREG(0xc0000094, u16)	</span><span class="cm">/* PID register */</span><span class="cp"></span>
<span class="cp">#define PIDR_PID		0x00ff		</span><span class="cm">/* process identifier */</span><span class="cp"></span>

<span class="cp">#define PTBR			__SYSREG(0xc0000098, unsigned long) </span><span class="cm">/* Page table base register */</span><span class="cp"></span>

<span class="cp">#define IPTEL			__SYSREG(0xc00000a0, u32)	</span><span class="cm">/* instruction TLB entry */</span><span class="cp"></span>
<span class="cp">#define DPTEL			__SYSREG(0xc00000b0, u32)	</span><span class="cm">/* data TLB entry */</span><span class="cp"></span>
<span class="cp">#define xPTEL_V			0x00000001	</span><span class="cm">/* TLB entry valid */</span><span class="cp"></span>
<span class="cp">#define xPTEL_UNUSED1		0x00000002	</span><span class="cm">/* unused bit */</span><span class="cp"></span>
<span class="cp">#define xPTEL_UNUSED2		0x00000004	</span><span class="cm">/* unused bit */</span><span class="cp"></span>
<span class="cp">#define xPTEL_C			0x00000008	</span><span class="cm">/* cached if set */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PV		0x00000010	</span><span class="cm">/* page valid */</span><span class="cp"></span>
<span class="cp">#define xPTEL_D			0x00000020	</span><span class="cm">/* dirty */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PR		0x000001c0	</span><span class="cm">/* page protection */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PR_ROK		0x00000000	</span><span class="cm">/* - R/O kernel */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PR_RWK		0x00000100	</span><span class="cm">/* - R/W kernel */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PR_ROK_ROU	0x00000080	</span><span class="cm">/* - R/O kernel and R/O user */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PR_RWK_ROU	0x00000180	</span><span class="cm">/* - R/W kernel and R/O user */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PR_RWK_RWU	0x000001c0	</span><span class="cm">/* - R/W kernel and R/W user */</span><span class="cp"></span>
<span class="cp">#define xPTEL_G			0x00000200	</span><span class="cm">/* global (use PID if 0) */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PS		0x00000c00	</span><span class="cm">/* page size */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PS_4Kb		0x00000000	</span><span class="cm">/* - 4Kb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PS_128Kb		0x00000400	</span><span class="cm">/* - 128Kb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PS_1Kb		0x00000800	</span><span class="cm">/* - 1Kb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PS_4Mb		0x00000c00	</span><span class="cm">/* - 4Mb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL_PPN		0xfffff006	</span><span class="cm">/* physical page number */</span><span class="cp"></span>

<span class="cp">#define IPTEU			__SYSREG(0xc00000a4, u32)	</span><span class="cm">/* instruction TLB virtual addr */</span><span class="cp"></span>
<span class="cp">#define DPTEU			__SYSREG(0xc00000b4, u32)	</span><span class="cm">/* data TLB virtual addr */</span><span class="cp"></span>
<span class="cp">#define xPTEU_VPN		0xfffffc00	</span><span class="cm">/* virtual page number */</span><span class="cp"></span>
<span class="cp">#define xPTEU_PID		0x000000ff	</span><span class="cm">/* process identifier to which applicable */</span><span class="cp"></span>

<span class="cp">#define IPTEL2			__SYSREG(0xc00000a8, u32)	</span><span class="cm">/* instruction TLB entry */</span><span class="cp"></span>
<span class="cp">#define DPTEL2			__SYSREG(0xc00000b8, u32)	</span><span class="cm">/* data TLB entry */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_V		0x00000001	</span><span class="cm">/* TLB entry valid */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_C		0x00000002	</span><span class="cm">/* cacheable */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PV		0x00000004	</span><span class="cm">/* page valid */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_D		0x00000008	</span><span class="cm">/* dirty */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PR		0x00000070	</span><span class="cm">/* page protection */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PR_ROK		0x00000000	</span><span class="cm">/* - R/O kernel */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PR_RWK		0x00000040	</span><span class="cm">/* - R/W kernel */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PR_ROK_ROU	0x00000020	</span><span class="cm">/* - R/O kernel and R/O user */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PR_RWK_ROU	0x00000060	</span><span class="cm">/* - R/W kernel and R/O user */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PR_RWK_RWU	0x00000070	</span><span class="cm">/* - R/W kernel and R/W user */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_G		0x00000080	</span><span class="cm">/* global (use PID if 0) */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PS		0x00000300	</span><span class="cm">/* page size */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PS_4Kb		0x00000000	</span><span class="cm">/* - 4Kb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PS_128Kb		0x00000100	</span><span class="cm">/* - 128Kb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PS_1Kb		0x00000200	</span><span class="cm">/* - 1Kb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PS_4Mb		0x00000300	</span><span class="cm">/* - 4Mb page */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_CWT		0x00000400	</span><span class="cm">/* cacheable write-through */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_UNUSED1		0x00000800	</span><span class="cm">/* unused bit (broadcast mask) */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_PPN		0xfffff000	</span><span class="cm">/* physical page number */</span><span class="cp"></span>

<span class="cp">#define xPTEL2_V_BIT		0	</span><span class="cm">/* bit numbers corresponding to above masks */</span><span class="cp"></span>
<span class="cp">#define xPTEL2_C_BIT		1</span>
<span class="cp">#define xPTEL2_PV_BIT		2</span>
<span class="cp">#define xPTEL2_D_BIT		3</span>
<span class="cp">#define xPTEL2_G_BIT		7</span>
<span class="cp">#define xPTEL2_UNUSED1_BIT	11</span>

<span class="cp">#define MMUFCR			__SYSREGC(0xc000009c, u32)	</span><span class="cm">/* MMU exception cause */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_IFC		__SYSREGC(0xc000009c, u16)	</span><span class="cm">/* MMU instruction excep cause */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_DFC		__SYSREGC(0xc000009e, u16)	</span><span class="cm">/* MMU data exception cause */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_TLBMISS	0x0001		</span><span class="cm">/* TLB miss flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_INITWR	0x0002		</span><span class="cm">/* initial write excep flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PGINVAL	0x0004		</span><span class="cm">/* page invalid excep flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PROTVIOL	0x0008		</span><span class="cm">/* protection violation excep flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_ACCESS	0x0010		</span><span class="cm">/* access level flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_ACCESS_USR	0x0000		</span><span class="cm">/* - user mode */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_ACCESS_SR	0x0010		</span><span class="cm">/* - supervisor mode */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_TYPE		0x0020		</span><span class="cm">/* access type flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_TYPE_READ	0x0000		</span><span class="cm">/* - read */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_TYPE_WRITE	0x0020		</span><span class="cm">/* - write */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PR		0x01c0		</span><span class="cm">/* page protection flag */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PR_ROK	0x0000		</span><span class="cm">/* - R/O kernel */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PR_RWK	0x0100		</span><span class="cm">/* - R/W kernel */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PR_ROK_ROU	0x0080		</span><span class="cm">/* - R/O kernel and R/O user */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PR_RWK_ROU	0x0180		</span><span class="cm">/* - R/W kernel and R/O user */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_PR_RWK_RWU	0x01c0		</span><span class="cm">/* - R/W kernel and R/W user */</span><span class="cp"></span>
<span class="cp">#define MMUFCR_xFC_ILLADDR	0x0200		</span><span class="cm">/* illegal address excep flag */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MN10300_HAS_ATOMIC_OPS_UNIT</span>
<span class="cm">/* atomic operation registers */</span>
<span class="cp">#define AAR		__SYSREG(0xc0000a00, u32)	</span><span class="cm">/* cacheable address */</span><span class="cp"></span>
<span class="cp">#define AAR2		__SYSREG(0xc0000a04, u32)	</span><span class="cm">/* uncacheable address */</span><span class="cp"></span>
<span class="cp">#define ADR		__SYSREG(0xc0000a08, u32)	</span><span class="cm">/* data */</span><span class="cp"></span>
<span class="cp">#define ASR		__SYSREG(0xc0000a0c, u32)	</span><span class="cm">/* status */</span><span class="cp"></span>
<span class="cp">#define AARU		__SYSREG(0xd400aa00, u32)	</span><span class="cm">/* user address */</span><span class="cp"></span>
<span class="cp">#define ADRU		__SYSREG(0xd400aa08, u32)	</span><span class="cm">/* user data */</span><span class="cp"></span>
<span class="cp">#define ASRU		__SYSREG(0xd400aa0c, u32)	</span><span class="cm">/* user status */</span><span class="cp"></span>

<span class="cp">#define ASR_RW		0x00000008	</span><span class="cm">/* read */</span><span class="cp"></span>
<span class="cp">#define ASR_BW		0x00000004	</span><span class="cm">/* bus error */</span><span class="cp"></span>
<span class="cp">#define ASR_IW		0x00000002	</span><span class="cm">/* interrupt */</span><span class="cp"></span>
<span class="cp">#define ASR_LW		0x00000001	</span><span class="cm">/* bus lock */</span><span class="cp"></span>

<span class="cp">#define ASRU_RW		ASR_RW		</span><span class="cm">/* read */</span><span class="cp"></span>
<span class="cp">#define ASRU_BW		ASR_BW		</span><span class="cm">/* bus error */</span><span class="cp"></span>
<span class="cp">#define ASRU_IW		ASR_IW		</span><span class="cm">/* interrupt */</span><span class="cp"></span>
<span class="cp">#define ASRU_LW		ASR_LW		</span><span class="cm">/* bus lock */</span><span class="cp"></span>

<span class="cm">/* in inline ASM, we stick the base pointer in to a reg and use offsets from</span>
<span class="cm"> * it */</span>
<span class="cp">#define ATOMIC_OPS_BASE_ADDR 0xc0000a00</span>
<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="n">asm</span><span class="p">(</span>
	<span class="s">&quot;_AAR	= 0</span><span class="se">\n</span><span class="s">&quot;</span>
	<span class="s">&quot;_AAR2	= 4</span><span class="se">\n</span><span class="s">&quot;</span>
	<span class="s">&quot;_ADR	= 8</span><span class="se">\n</span><span class="s">&quot;</span>
	<span class="s">&quot;_ASR	= 12</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="cp">#else</span>
<span class="cp">#define _AAR		0</span>
<span class="cp">#define _AAR2		4</span>
<span class="cp">#define _ADR		8</span>
<span class="cp">#define _ASR		12</span>
<span class="cp">#endif</span>

<span class="cm">/* physical page address for userspace atomic operations registers */</span>
<span class="cp">#define USER_ATOMIC_OPS_PAGE_ADDR  0xd400a000</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_MN10300_HAS_ATOMIC_OPS_UNIT */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __KERNEL__ */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* _ASM_CPU_REGS_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
