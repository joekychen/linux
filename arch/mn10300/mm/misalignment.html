<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › mn10300 › mm › misalignment.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>misalignment.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* MN10300 Misalignment fixup handler</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2007 Red Hat, Inc. All Rights Reserved.</span>
<span class="cm"> * Written by David Howells (dhowells@redhat.com)</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public Licence</span>
<span class="cm"> * as published by the Free Software Foundation; either version</span>
<span class="cm"> * 2 of the Licence, or (at your option) any later version.</span>
<span class="cm"> */</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/sched.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/string.h&gt;</span>
<span class="cp">#include &lt;linux/errno.h&gt;</span>
<span class="cp">#include &lt;linux/ptrace.h&gt;</span>
<span class="cp">#include &lt;linux/timer.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/smp.h&gt;</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cp">#include &lt;linux/spinlock.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/pci.h&gt;</span>
<span class="cp">#include &lt;asm/processor.h&gt;</span>
<span class="cp">#include &lt;asm/uaccess.h&gt;</span>
<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;linux/atomic.h&gt;</span>
<span class="cp">#include &lt;asm/smp.h&gt;</span>
<span class="cp">#include &lt;asm/pgalloc.h&gt;</span>
<span class="cp">#include &lt;asm/cpu-regs.h&gt;</span>
<span class="cp">#include &lt;asm/busctl-regs.h&gt;</span>
<span class="cp">#include &lt;asm/fpu.h&gt;</span>
<span class="cp">#include &lt;asm/gdb-stub.h&gt;</span>
<span class="cp">#include &lt;asm/asm-offsets.h&gt;</span>

<span class="cp">#if 0</span><span class="c"></span>
<span class="c">#define kdebug(FMT, ...) printk(KERN_DEBUG &quot;MISALIGN: &quot;FMT&quot;\n&quot;, ##__VA_ARGS__)</span>
<span class="cp">#else</span>
<span class="cp">#define kdebug(FMT, ...) do {} while (0)</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">misalignment_addr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">registers</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sp</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="n">params</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">opcode</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">disp</span><span class="p">,</span>
			     <span class="kt">void</span> <span class="o">**</span><span class="n">_address</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">**</span><span class="n">_postinc</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">_inc</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">misalignment_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">registers</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">params</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="n">opcode</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">disp</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">**</span><span class="n">_register</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">misalignment_MOV_Lcc</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">opcode</span><span class="p">);</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="n">Dreg_index</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">REG_D0</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_D1</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_D2</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_D3</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="n">Areg_index</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">REG_A0</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_A1</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_A2</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_A3</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="n">Rreg_index</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">REG_E0</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_E1</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_E2</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_E3</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">REG_E4</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_E5</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_E6</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_E7</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">REG_A0</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_A1</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_A2</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_A3</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span>
	<span class="n">REG_D0</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_D1</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_D2</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">REG_D3</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">format_id</span> <span class="p">{</span>
	<span class="n">FMT_S0</span><span class="p">,</span>
	<span class="n">FMT_S1</span><span class="p">,</span>
	<span class="n">FMT_S2</span><span class="p">,</span>
	<span class="n">FMT_S4</span><span class="p">,</span>
	<span class="n">FMT_D0</span><span class="p">,</span>
	<span class="n">FMT_D1</span><span class="p">,</span>
	<span class="n">FMT_D2</span><span class="p">,</span>
	<span class="n">FMT_D4</span><span class="p">,</span>
	<span class="n">FMT_D6</span><span class="p">,</span>
	<span class="n">FMT_D7</span><span class="p">,</span>
	<span class="n">FMT_D8</span><span class="p">,</span>
	<span class="n">FMT_D9</span><span class="p">,</span>
	<span class="n">FMT_D10</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">u_int8_t</span> <span class="n">opsz</span><span class="p">,</span> <span class="n">dispsz</span><span class="p">;</span>
<span class="p">}</span> <span class="n">format_tbl</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">FMT_S0</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">8</span><span class="p">,</span>	<span class="mi">0</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_S1</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">8</span><span class="p">,</span>	<span class="mi">8</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_S2</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">8</span><span class="p">,</span>	<span class="mi">16</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_S4</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">8</span><span class="p">,</span>	<span class="mi">32</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D0</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">16</span><span class="p">,</span>	<span class="mi">0</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D1</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">16</span><span class="p">,</span>	<span class="mi">8</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D2</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">16</span><span class="p">,</span>	<span class="mi">16</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D4</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">16</span><span class="p">,</span>	<span class="mi">32</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D6</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">24</span><span class="p">,</span>	<span class="mi">0</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D7</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">24</span><span class="p">,</span>	<span class="mi">8</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D8</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">24</span><span class="p">,</span>	<span class="mi">24</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D9</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">24</span><span class="p">,</span>	<span class="mi">32</span>	<span class="p">},</span>
	<span class="p">[</span><span class="n">FMT_D10</span><span class="p">]</span>	<span class="o">=</span> <span class="p">{</span> <span class="mi">32</span><span class="p">,</span>	<span class="mi">0</span>	<span class="p">},</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">value_id</span> <span class="p">{</span>
	<span class="n">DM0</span><span class="p">,</span>		<span class="cm">/* data reg in opcode in bits 0-1 */</span>
	<span class="n">DM1</span><span class="p">,</span>		<span class="cm">/* data reg in opcode in bits 2-3 */</span>
	<span class="n">DM2</span><span class="p">,</span>		<span class="cm">/* data reg in opcode in bits 4-5 */</span>
	<span class="n">AM0</span><span class="p">,</span>		<span class="cm">/* addr reg in opcode in bits 0-1 */</span>
	<span class="n">AM1</span><span class="p">,</span>		<span class="cm">/* addr reg in opcode in bits 2-3 */</span>
	<span class="n">AM2</span><span class="p">,</span>		<span class="cm">/* addr reg in opcode in bits 4-5 */</span>
	<span class="n">RM0</span><span class="p">,</span>		<span class="cm">/* reg in opcode in bits 0-3 */</span>
	<span class="n">RM1</span><span class="p">,</span>		<span class="cm">/* reg in opcode in bits 2-5 */</span>
	<span class="n">RM2</span><span class="p">,</span>		<span class="cm">/* reg in opcode in bits 4-7 */</span>
	<span class="n">RM4</span><span class="p">,</span>		<span class="cm">/* reg in opcode in bits 8-11 */</span>
	<span class="n">RM6</span><span class="p">,</span>		<span class="cm">/* reg in opcode in bits 12-15 */</span>

	<span class="n">RD0</span><span class="p">,</span>		<span class="cm">/* reg in displacement in bits 0-3 */</span>
	<span class="n">RD2</span><span class="p">,</span>		<span class="cm">/* reg in displacement in bits 4-7 */</span>

	<span class="n">SP</span><span class="p">,</span>		<span class="cm">/* stack pointer */</span>

	<span class="n">SD8</span><span class="p">,</span>		<span class="cm">/* 8-bit signed displacement */</span>
	<span class="n">SD16</span><span class="p">,</span>		<span class="cm">/* 16-bit signed displacement */</span>
	<span class="n">SD24</span><span class="p">,</span>		<span class="cm">/* 24-bit signed displacement */</span>
	<span class="n">SIMM4_2</span><span class="p">,</span>	<span class="cm">/* 4-bit signed displacement in opcode bits 4-7 */</span>
	<span class="n">SIMM8</span><span class="p">,</span>		<span class="cm">/* 8-bit signed immediate */</span>
	<span class="n">IMM8</span><span class="p">,</span>		<span class="cm">/* 8-bit unsigned immediate */</span>
	<span class="n">IMM16</span><span class="p">,</span>		<span class="cm">/* 16-bit unsigned immediate */</span>
	<span class="n">IMM24</span><span class="p">,</span>		<span class="cm">/* 24-bit unsigned immediate */</span>
	<span class="n">IMM32</span><span class="p">,</span>		<span class="cm">/* 32-bit unsigned immediate */</span>
	<span class="n">IMM32_HIGH8</span><span class="p">,</span>	<span class="cm">/* 32-bit unsigned immediate, LSB in opcode */</span>

	<span class="n">IMM32_MEM</span><span class="p">,</span>	<span class="cm">/* 32-bit unsigned displacement */</span>
	<span class="n">IMM32_HIGH8_MEM</span><span class="p">,</span> <span class="cm">/* 32-bit unsigned displacement, LSB in opcode */</span>

	<span class="n">DN0</span>	<span class="o">=</span> <span class="n">DM0</span><span class="p">,</span>
	<span class="n">DN1</span>	<span class="o">=</span> <span class="n">DM1</span><span class="p">,</span>
	<span class="n">DN2</span>	<span class="o">=</span> <span class="n">DM2</span><span class="p">,</span>
	<span class="n">AN0</span>	<span class="o">=</span> <span class="n">AM0</span><span class="p">,</span>
	<span class="n">AN1</span>	<span class="o">=</span> <span class="n">AM1</span><span class="p">,</span>
	<span class="n">AN2</span>	<span class="o">=</span> <span class="n">AM2</span><span class="p">,</span>
	<span class="n">RN0</span>	<span class="o">=</span> <span class="n">RM0</span><span class="p">,</span>
	<span class="n">RN1</span>	<span class="o">=</span> <span class="n">RM1</span><span class="p">,</span>
	<span class="n">RN2</span>	<span class="o">=</span> <span class="n">RM2</span><span class="p">,</span>
	<span class="n">RN4</span>	<span class="o">=</span> <span class="n">RM4</span><span class="p">,</span>
	<span class="n">RN6</span>	<span class="o">=</span> <span class="n">RM6</span><span class="p">,</span>
	<span class="n">DI</span>	<span class="o">=</span> <span class="n">DM1</span><span class="p">,</span>
	<span class="n">RI</span>	<span class="o">=</span> <span class="n">RM2</span><span class="p">,</span>

<span class="p">};</span>

<span class="k">struct</span> <span class="n">mn10300_opcode</span> <span class="p">{</span>
	<span class="k">const</span> <span class="kt">char</span>	<span class="n">name</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
	<span class="n">u_int32_t</span>	<span class="n">opcode</span><span class="p">;</span>
	<span class="n">u_int32_t</span>	<span class="n">opmask</span><span class="p">;</span>
	<span class="kt">unsigned</span>	<span class="n">exclusion</span><span class="p">;</span>

	<span class="k">enum</span> <span class="n">format_id</span>	<span class="n">format</span><span class="p">;</span>

	<span class="kt">unsigned</span>	<span class="n">cpu_mask</span><span class="p">;</span>
<span class="cp">#define AM33	330</span>

	<span class="kt">unsigned</span>	<span class="n">params</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="cp">#define MEM(ADDR)		(0x80000000 | (ADDR))</span>
<span class="cp">#define MEM2(ADDR1, ADDR2)	(0x80000000 | (ADDR1) &lt;&lt; 8 | (ADDR2))</span>
<span class="cp">#define MEMINC(ADDR)		(0x81000000 | (ADDR))</span>
<span class="cp">#define MEMINC2(ADDR, INC)	(0x81000000 | (ADDR) &lt;&lt; 8 | (INC))</span>
<span class="p">};</span>

<span class="cm">/* LIBOPCODES EXCERPT</span>
<span class="cm">   Assemble Matsushita MN10300 instructions.</span>
<span class="cm">   Copyright 1996, 1997, 1998, 1999, 2000 Free Software Foundation, Inc.</span>

<span class="cm">   This program is free software; you can redistribute it and/or modify</span>
<span class="cm">   it under the terms of the GNU General Public Licence as published by</span>
<span class="cm">   the Free Software Foundation; either version 2 of the Licence, or</span>
<span class="cm">   (at your option) any later version.</span>

<span class="cm">   This program is distributed in the hope that it will be useful,</span>
<span class="cm">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="cm">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="cm">   GNU General Public Licence for more details.</span>

<span class="cm">   You should have received a copy of the GNU General Public Licence</span>
<span class="cm">   along with this program; if not, write to the Free Software</span>
<span class="cm">   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
<span class="cm">*/</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">mn10300_opcode</span> <span class="n">mn10300_opcodes</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0x4200</span><span class="p">,</span>	     <span class="mh">0xf300</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_S1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0x4300</span><span class="p">,</span>	     <span class="mh">0xf300</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_S1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0x5800</span><span class="p">,</span>	     <span class="mh">0xfc00</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_S1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0x5c00</span><span class="p">,</span>	     <span class="mh">0xfc00</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_S1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">AN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0x60</span><span class="p">,</span>	     <span class="mh">0xf0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_S0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0x70</span><span class="p">,</span>	     <span class="mh">0xf0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_S0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf000</span><span class="p">,</span>	     <span class="mh">0xfff0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">AM0</span><span class="p">),</span> <span class="n">AN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf010</span><span class="p">,</span>	     <span class="mh">0xfff0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf300</span><span class="p">,</span>	     <span class="mh">0xffc0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">DI</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">DN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf340</span><span class="p">,</span>	     <span class="mh">0xffc0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">DI</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf380</span><span class="p">,</span>	     <span class="mh">0xffc0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">DI</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">AN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf3c0</span><span class="p">,</span>	     <span class="mh">0xffc0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">DI</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf80000</span><span class="p">,</span>    <span class="mh">0xfff000</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf81000</span><span class="p">,</span>    <span class="mh">0xfff000</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf82000</span><span class="p">,</span>    <span class="mh">0xfff000</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span><span class="n">AM0</span><span class="p">),</span> <span class="n">AN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf83000</span><span class="p">,</span>    <span class="mh">0xfff000</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf90a00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf91a00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf96a00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mh">0x12</span><span class="p">,</span> <span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC</span><span class="p">(</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xf97a00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEMINC</span><span class="p">(</span><span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfa000000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD16</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfa100000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD16</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfa200000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD16</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">AN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfa300000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD16</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfa900000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM16</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfa910000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM16</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfab00000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM16</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">AN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfab40000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM16</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb0a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb1a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb6a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">SIMM8</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb7a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN0</span><span class="p">,</span> <span class="n">SIMM8</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb8a0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb8e0000</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">RI</span><span class="p">,</span> <span class="n">RM0</span><span class="p">),</span> <span class="n">RD2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb9a0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfb9e0000</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RD2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">RI</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc000000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span><span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc100000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span><span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc200000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span><span class="n">AM0</span><span class="p">),</span> <span class="n">AN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc300000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span><span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc800000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_MEM</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc810000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_MEM</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc900000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">AM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfc910000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfca00000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_MEM</span><span class="p">),</span> <span class="n">AN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfca40000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_MEM</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfcb00000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">AN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfcb40000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfd0a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD24</span><span class="p">,</span> <span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfd1a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD24</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfd6a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">IMM24</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfd7a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN0</span><span class="p">,</span> <span class="n">IMM24</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfd8a0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM24</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfd9a0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM24</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe0a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe0a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe0e0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_HIGH8_MEM</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe1a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe1a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe1e0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_HIGH8_MEM</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe6a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">IMM32_HIGH8</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe7a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RN2</span><span class="p">,</span> <span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">IMM32_HIGH8</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe8a0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov&quot;</span><span class="p">,</span>	<span class="mh">0xfe9a0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>

<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf060</span><span class="p">,</span>	     <span class="mh">0xfff0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf070</span><span class="p">,</span>	     <span class="mh">0xfff0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf480</span><span class="p">,</span>	     <span class="mh">0xffc0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">DI</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">DN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf4c0</span><span class="p">,</span>	     <span class="mh">0xffc0</span><span class="p">,</span>	  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">DI</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf86000</span><span class="p">,</span>    <span class="mh">0xfff000</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf87000</span><span class="p">,</span>    <span class="mh">0xfff000</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf89300</span><span class="p">,</span>    <span class="mh">0xfff300</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf8bc00</span><span class="p">,</span>    <span class="mh">0xfffc00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf94a00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf95a00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf9ea00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mh">0x12</span><span class="p">,</span> <span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC</span><span class="p">(</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xf9fa00</span><span class="p">,</span>    <span class="mh">0xffff00</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D6</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEMINC</span><span class="p">(</span><span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfa600000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD16</span><span class="p">,</span> <span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfa700000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD16</span><span class="p">,</span> <span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfa930000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM16</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfabc0000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM16</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfb4a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfb5a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD8</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfbca0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfbce0000</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">RI</span><span class="p">,</span> <span class="n">RM0</span><span class="p">),</span> <span class="n">RD2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfbda0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfbde0000</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RD2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">RI</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfbea0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">SIMM8</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfbfa0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D7</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN0</span><span class="p">,</span> <span class="n">SIMM8</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfc600000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span><span class="n">AM0</span><span class="p">),</span> <span class="n">DN1</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfc700000</span><span class="p">,</span>  <span class="mh">0xfff00000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span><span class="n">AN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfc830000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_MEM</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfc930000</span><span class="p">,</span>  <span class="mh">0xfff30000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">DM1</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfcac0000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_MEM</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfcbc0000</span><span class="p">,</span>  <span class="mh">0xfffc0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">DN0</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfd4a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">SD24</span><span class="p">,</span> <span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfd5a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">SD24</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfdca0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM24</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfdda0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM24</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfdea0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">IMM24</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfdfa0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D8</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN0</span><span class="p">,</span> <span class="n">IMM24</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfe4a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span><span class="n">RM0</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfe4e0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_HIGH8_MEM</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfe5a0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">RN0</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfe5e0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM</span><span class="p">(</span><span class="n">IMM32_HIGH8_MEM</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfeca0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">SP</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfeda0000</span><span class="p">,</span>  <span class="mh">0xffff0f00</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>    <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RM2</span><span class="p">,</span> <span class="n">MEM2</span><span class="p">(</span><span class="n">IMM32_HIGH8</span><span class="p">,</span> <span class="n">SP</span><span class="p">)}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfeea0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">IMM32_HIGH8</span><span class="p">),</span> <span class="n">RN2</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;movhu&quot;</span><span class="p">,</span>	<span class="mh">0xfefa0000</span><span class="p">,</span>  <span class="mh">0xffff0000</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>	<span class="n">FMT_D9</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	<span class="p">{</span><span class="n">RN2</span><span class="p">,</span> <span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RM0</span><span class="p">,</span> <span class="n">IMM32_HIGH8</span><span class="p">)}},</span>

<span class="p">{</span> <span class="s">&quot;mov_llt&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00000</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lgt&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00001</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lge&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00002</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lle&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00003</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lcs&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00004</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lhi&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00005</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lcc&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00006</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lls&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00007</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_leq&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00008</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lne&quot;</span><span class="p">,</span>	<span class="mh">0xf7e00009</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>
<span class="p">{</span> <span class="s">&quot;mov_lra&quot;</span><span class="p">,</span>	<span class="mh">0xf7e0000a</span><span class="p">,</span>  <span class="mh">0xffff000f</span><span class="p">,</span>  <span class="mh">0x22</span><span class="p">,</span> <span class="n">FMT_D10</span><span class="p">,</span> <span class="n">AM33</span><span class="p">,</span>	 <span class="p">{</span><span class="n">MEMINC2</span> <span class="p">(</span><span class="n">RN4</span><span class="p">,</span><span class="n">SIMM4_2</span><span class="p">),</span> <span class="n">RM6</span><span class="p">}},</span>

<span class="p">{</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="mi">0</span><span class="p">}},</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * fix up misalignment problems where possible</span>
<span class="cm"> */</span>
<span class="n">asmlinkage</span> <span class="kt">void</span> <span class="nf">misalignment</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">,</span> <span class="k">enum</span> <span class="n">exception_code</span> <span class="n">code</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">exception_table_entry</span> <span class="o">*</span><span class="n">fixup</span><span class="p">;</span>
	<span class="k">const</span> <span class="k">struct</span> <span class="n">mn10300_opcode</span> <span class="o">*</span><span class="n">pop</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">registers</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="p">)</span> <span class="n">regs</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">store</span><span class="p">,</span> <span class="o">*</span><span class="n">postinc</span><span class="p">,</span> <span class="n">disp</span><span class="p">,</span> <span class="n">inc</span><span class="p">,</span> <span class="n">sp</span><span class="p">;</span>
	<span class="n">mm_segment_t</span> <span class="n">seg</span><span class="p">;</span>
	<span class="n">siginfo_t</span> <span class="n">info</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">noc</span><span class="p">,</span> <span class="n">xo</span><span class="p">,</span> <span class="n">xm</span><span class="p">;</span>
	<span class="kt">uint8_t</span> <span class="o">*</span><span class="n">pc</span><span class="p">,</span> <span class="n">byte</span><span class="p">,</span> <span class="n">datasz</span><span class="p">;</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">address</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="n">tmp</span><span class="p">,</span> <span class="n">npop</span><span class="p">,</span> <span class="n">dispsz</span><span class="p">,</span> <span class="n">loop</span><span class="p">;</span>

	<span class="cm">/* we don&#39;t fix up userspace misalignment faults */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">user_mode</span><span class="p">(</span><span class="n">regs</span><span class="p">))</span>
		<span class="k">goto</span> <span class="n">bus_error</span><span class="p">;</span>

	<span class="n">sp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="n">regs</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">regs</span><span class="p">);</span>

	<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;==&gt;misalignment({pc=%lx,sp=%lx})&quot;</span><span class="p">,</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">sp</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">regs</span><span class="o">-&gt;</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_IE</span><span class="p">)</span>
		<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;or %0,epsw&quot;</span> <span class="o">:</span> <span class="o">:</span> <span class="s">&quot;i&quot;</span><span class="p">(</span><span class="n">EPSW_IE</span><span class="p">));</span>

	<span class="n">seg</span> <span class="o">=</span> <span class="n">get_fs</span><span class="p">();</span>
	<span class="n">set_fs</span><span class="p">(</span><span class="n">KERNEL_DS</span><span class="p">);</span>

	<span class="n">fixup</span> <span class="o">=</span> <span class="n">search_exception_tables</span><span class="p">(</span><span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">);</span>

	<span class="cm">/* first thing to do is to match the opcode */</span>
	<span class="n">pc</span> <span class="o">=</span> <span class="p">(</span><span class="n">u_int8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">__get_user</span><span class="p">(</span><span class="n">byte</span><span class="p">,</span> <span class="n">pc</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
		<span class="k">goto</span> <span class="n">fetch_error</span><span class="p">;</span>
	<span class="n">opcode</span> <span class="o">=</span> <span class="n">byte</span><span class="p">;</span>
	<span class="n">noc</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span><span class="n">pop</span> <span class="o">=</span> <span class="n">mn10300_opcodes</span><span class="p">;</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">pop</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">npop</span> <span class="o">=</span> <span class="n">ilog2</span><span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">opcode</span> <span class="o">|</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">opmask</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">npop</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">npop</span> <span class="o">&gt;</span> <span class="mi">31</span><span class="p">)</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="n">npop</span> <span class="o">=</span> <span class="p">(</span><span class="n">npop</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mi">7</span><span class="p">;</span>

	<span class="nl">got_more_bits:</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">npop</span> <span class="o">==</span> <span class="n">noc</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">((</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">opmask</span><span class="p">)</span> <span class="o">==</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">opcode</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">found_opcode</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">npop</span> <span class="o">&gt;</span> <span class="n">noc</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">xo</span> <span class="o">=</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">npop</span> <span class="o">-</span> <span class="n">noc</span><span class="p">);</span>
			<span class="n">xm</span> <span class="o">=</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">opmask</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">npop</span> <span class="o">-</span> <span class="n">noc</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">((</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="n">xm</span><span class="p">)</span> <span class="o">!=</span> <span class="n">xo</span><span class="p">)</span>
				<span class="k">continue</span><span class="p">;</span>

			<span class="cm">/* we&#39;ve got a partial match (an exact match on the</span>
<span class="cm">			 * first N bytes), so we need to get some more data */</span>
			<span class="n">pc</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">__get_user</span><span class="p">(</span><span class="n">byte</span><span class="p">,</span> <span class="n">pc</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">fetch_error</span><span class="p">;</span>
			<span class="n">opcode</span> <span class="o">=</span> <span class="n">opcode</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span> <span class="o">|</span> <span class="n">byte</span><span class="p">;</span>
			<span class="n">noc</span> <span class="o">+=</span> <span class="mi">8</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">got_more_bits</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="cm">/* there&#39;s already been a partial match as long as the</span>
<span class="cm">			 * complete match we&#39;re now considering, so this one</span>
<span class="cm">			 * should&#39;t match */</span>
			<span class="k">continue</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cm">/* didn&#39;t manage to find a fixup */</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_CRIT</span> <span class="s">&quot;MISALIGN: %lx: unsupported instruction %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">opcode</span><span class="p">);</span>

<span class="nl">failed:</span>
	<span class="n">set_fs</span><span class="p">(</span><span class="n">seg</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">die_if_no_fixup</span><span class="p">(</span><span class="s">&quot;misalignment error&quot;</span><span class="p">,</span> <span class="n">regs</span><span class="p">,</span> <span class="n">code</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>

<span class="nl">bus_error:</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_signo</span>	<span class="o">=</span> <span class="n">SIGBUS</span><span class="p">;</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_errno</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_code</span>	<span class="o">=</span> <span class="n">BUS_ADRALN</span><span class="p">;</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_addr</span>	<span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">;</span>
	<span class="n">force_sig_info</span><span class="p">(</span><span class="n">SIGBUS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">info</span><span class="p">,</span> <span class="n">current</span><span class="p">);</span>
	<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* error reading opcodes */</span>
<span class="nl">fetch_error:</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_CRIT</span>
	       <span class="s">&quot;MISALIGN: %p: fault whilst reading instruction data</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">pc</span><span class="p">);</span>
	<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

<span class="nl">bad_addr_mode:</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_CRIT</span>
	       <span class="s">&quot;MISALIGN: %lx: unsupported addressing mode %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">opcode</span><span class="p">);</span>
	<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

<span class="nl">bad_reg_mode:</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_CRIT</span>
	       <span class="s">&quot;MISALIGN: %lx: unsupported register mode %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">opcode</span><span class="p">);</span>
	<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

<span class="nl">unsupported_instruction:</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_CRIT</span>
	       <span class="s">&quot;MISALIGN: %lx: unsupported instruction %x (%s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
	       <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
	<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>

<span class="nl">transfer_failed:</span>
	<span class="n">set_fs</span><span class="p">(</span><span class="n">seg</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">fixup</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span> <span class="o">=</span> <span class="n">fixup</span><span class="o">-&gt;</span><span class="n">fixup</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">die_if_no_fixup</span><span class="p">(</span><span class="s">&quot;misalignment fixup&quot;</span><span class="p">,</span> <span class="n">regs</span><span class="p">,</span> <span class="n">code</span><span class="p">))</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="n">info</span><span class="p">.</span><span class="n">si_signo</span>	<span class="o">=</span> <span class="n">SIGSEGV</span><span class="p">;</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_errno</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_code</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">info</span><span class="p">.</span><span class="n">si_addr</span>	<span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">;</span>
	<span class="n">force_sig_info</span><span class="p">(</span><span class="n">SIGSEGV</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">info</span><span class="p">,</span> <span class="n">current</span><span class="p">);</span>
	<span class="k">return</span><span class="p">;</span>

	<span class="cm">/* we matched the opcode */</span>
<span class="nl">found_opcode:</span>
	<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;%lx: %x==%x { %x, %x }&quot;</span><span class="p">,</span>
	       <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">opcode</span><span class="p">,</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

	<span class="n">tmp</span> <span class="o">=</span> <span class="n">format_tbl</span><span class="p">[</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">].</span><span class="n">opsz</span><span class="p">;</span>
	<span class="n">BUG_ON</span><span class="p">(</span><span class="n">tmp</span> <span class="o">&gt;</span> <span class="n">noc</span><span class="p">);</span> <span class="cm">/* match was less complete than it ought to have been */</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">tmp</span> <span class="o">&lt;</span> <span class="n">noc</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">tmp</span> <span class="o">=</span> <span class="n">noc</span> <span class="o">-</span> <span class="n">tmp</span><span class="p">;</span>
		<span class="n">opcode</span> <span class="o">&gt;&gt;=</span> <span class="n">tmp</span><span class="p">;</span>
		<span class="n">pc</span> <span class="o">-=</span> <span class="n">tmp</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* grab the extra displacement (note it&#39;s LSB first) */</span>
	<span class="n">disp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">dispsz</span> <span class="o">=</span> <span class="n">format_tbl</span><span class="p">[</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">].</span><span class="n">dispsz</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">loop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">loop</span> <span class="o">&lt;</span> <span class="n">dispsz</span><span class="p">;</span> <span class="n">loop</span> <span class="o">+=</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">pc</span><span class="o">++</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">__get_user</span><span class="p">(</span><span class="n">byte</span><span class="p">,</span> <span class="n">pc</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">fetch_error</span><span class="p">;</span>
		<span class="n">disp</span> <span class="o">|=</span> <span class="n">byte</span> <span class="o">&lt;&lt;</span> <span class="n">loop</span><span class="p">;</span>
		<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;{%p} disp[%02x]=%02x&quot;</span><span class="p">,</span> <span class="n">pc</span><span class="p">,</span> <span class="n">loop</span><span class="p">,</span> <span class="n">byte</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;disp=%lx&quot;</span><span class="p">,</span> <span class="n">disp</span><span class="p">);</span>

	<span class="n">set_fs</span><span class="p">(</span><span class="n">KERNEL_XDS</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">fixup</span><span class="p">)</span>
		<span class="n">set_fs</span><span class="p">(</span><span class="n">seg</span><span class="p">);</span>

	<span class="n">tmp</span> <span class="o">=</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">^</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x80000000</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tmp</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_CRIT</span>
		       <span class="s">&quot;MISALIGN: %lx: insn not move to/from memory %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		       <span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span><span class="p">,</span> <span class="n">opcode</span><span class="p">);</span>
		<span class="k">goto</span> <span class="n">failed</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/* determine the data transfer size of the move */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="cm">/* &quot;mov&quot; */</span>
	    <span class="n">pop</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;l&#39;</span><span class="p">)</span> <span class="cm">/* mov_lcc */</span>
		<span class="n">inc</span> <span class="o">=</span> <span class="n">datasz</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;h&#39;</span><span class="p">)</span> <span class="cm">/* movhu */</span>
		<span class="n">inc</span> <span class="o">=</span> <span class="n">datasz</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="k">goto</span> <span class="n">unsupported_instruction</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80000000</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* move memory to register */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">misalignment_addr</span><span class="p">(</span><span class="n">registers</span><span class="p">,</span> <span class="n">sp</span><span class="p">,</span>
				       <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">disp</span><span class="p">,</span>
				       <span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">postinc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inc</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">bad_addr_mode</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">misalignment_reg</span><span class="p">(</span><span class="n">registers</span><span class="p">,</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">disp</span><span class="p">,</span>
				      <span class="o">&amp;</span><span class="n">store</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">bad_reg_mode</span><span class="p">;</span>

		<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;mov%u (%p),DARn&quot;</span><span class="p">,</span> <span class="n">datasz</span><span class="p">,</span> <span class="n">address</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">copy_from_user</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">address</span><span class="p">,</span> <span class="n">datasz</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">transfer_failed</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x1000000</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;inc=%lx&quot;</span><span class="p">,</span> <span class="n">inc</span><span class="p">);</span>
			<span class="o">*</span><span class="n">postinc</span> <span class="o">+=</span> <span class="n">inc</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="o">*</span><span class="n">store</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
		<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;loaded %lx&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="cm">/* move register to memory */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">misalignment_reg</span><span class="p">(</span><span class="n">registers</span><span class="p">,</span> <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">disp</span><span class="p">,</span>
				      <span class="o">&amp;</span><span class="n">store</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">bad_reg_mode</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">misalignment_addr</span><span class="p">(</span><span class="n">registers</span><span class="p">,</span> <span class="n">sp</span><span class="p">,</span>
				       <span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">disp</span><span class="p">,</span>
				       <span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">postinc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">inc</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">bad_addr_mode</span><span class="p">;</span>

		<span class="n">data</span> <span class="o">=</span> <span class="o">*</span><span class="n">store</span><span class="p">;</span>

		<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;mov%u %lx,(%p)&quot;</span><span class="p">,</span> <span class="n">datasz</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">address</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">copy_to_user</span><span class="p">((</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">,</span> <span class="n">datasz</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">transfer_failed</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x1000000</span><span class="p">)</span>
			<span class="o">*</span><span class="n">postinc</span> <span class="o">+=</span> <span class="n">inc</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">tmp</span> <span class="o">=</span> <span class="n">format_tbl</span><span class="p">[</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">].</span><span class="n">opsz</span> <span class="o">+</span> <span class="n">format_tbl</span><span class="p">[</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">format</span><span class="p">].</span><span class="n">dispsz</span><span class="p">;</span>
	<span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span> <span class="o">+=</span> <span class="n">tmp</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">;</span>

	<span class="cm">/* handle MOV_Lcc, which are currently the only FMT_D10 insns that</span>
<span class="cm">	 * access memory */</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">pop</span><span class="o">-&gt;</span><span class="n">format</span> <span class="o">==</span> <span class="n">FMT_D10</span><span class="p">)</span>
		<span class="n">misalignment_MOV_Lcc</span><span class="p">(</span><span class="n">regs</span><span class="p">,</span> <span class="n">opcode</span><span class="p">);</span>

	<span class="n">set_fs</span><span class="p">(</span><span class="n">seg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * determine the address that was being accessed</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">misalignment_addr</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">registers</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">sp</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="n">params</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">opcode</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">disp</span><span class="p">,</span>
			     <span class="kt">void</span> <span class="o">**</span><span class="n">_address</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">**</span><span class="n">_postinc</span><span class="p">,</span>
			     <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">_inc</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">postinc</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tmp</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">params</span> <span class="o">&amp;</span> <span class="mh">0x1000000</span><span class="p">))</span> <span class="p">{</span>
		<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;noinc&quot;</span><span class="p">);</span>
		<span class="o">*</span><span class="n">_inc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="n">_inc</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="n">params</span> <span class="o">&amp;=</span> <span class="mh">0x00ffffff</span><span class="p">;</span>

	<span class="k">do</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="p">(</span><span class="n">params</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="n">DM0</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Dreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">DM1</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Dreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">DM2</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Dreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">AM0</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Areg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">AM1</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Areg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">AM2</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Areg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RM0</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RM1</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RM2</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RM4</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RM6</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RD0</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">disp</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">RD2</span>:
			<span class="n">postinc</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">disp</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
			<span class="n">address</span> <span class="o">+=</span> <span class="o">*</span><span class="n">postinc</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SP</span>:
			<span class="n">address</span> <span class="o">+=</span> <span class="n">sp</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>

			<span class="cm">/* displacements are either to be added to the address</span>
<span class="cm">			 * before use, or, in the case of post-inc addressing,</span>
<span class="cm">			 * to be added into the base register after use */</span>
		<span class="k">case</span> <span class="n">SD8</span>:
		<span class="k">case</span> <span class="n">SIMM8</span>:
			<span class="n">disp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span> <span class="p">(</span><span class="kt">int8_t</span><span class="p">)</span> <span class="p">(</span><span class="n">disp</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SD16</span>:
			<span class="n">disp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span> <span class="p">(</span><span class="kt">int16_t</span><span class="p">)</span> <span class="p">(</span><span class="n">disp</span> <span class="o">&amp;</span> <span class="mh">0xffff</span><span class="p">);</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SD24</span>:
			<span class="n">tmp</span> <span class="o">=</span> <span class="n">disp</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">;</span>
			<span class="n">asm</span><span class="p">(</span><span class="s">&quot;asr 8,%0&quot;</span> <span class="o">:</span> <span class="s">&quot;=r&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">:</span> <span class="s">&quot;0&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">:</span> <span class="s">&quot;cc&quot;</span><span class="p">);</span>
			<span class="n">disp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span> <span class="n">tmp</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">SIMM4_2</span>:
			<span class="n">tmp</span> <span class="o">=</span> <span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">;</span>
			<span class="n">tmp</span> <span class="o">&lt;&lt;=</span> <span class="mi">28</span><span class="p">;</span>
			<span class="n">asm</span><span class="p">(</span><span class="s">&quot;asr 28,%0&quot;</span> <span class="o">:</span> <span class="s">&quot;=r&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">:</span> <span class="s">&quot;0&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span> <span class="o">:</span> <span class="s">&quot;cc&quot;</span><span class="p">);</span>
			<span class="n">disp</span> <span class="o">=</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span> <span class="n">tmp</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">IMM8</span>:
			<span class="n">disp</span> <span class="o">&amp;=</span> <span class="mh">0x000000ff</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">IMM16</span>:
			<span class="n">disp</span> <span class="o">&amp;=</span> <span class="mh">0x0000ffff</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">IMM24</span>:
			<span class="n">disp</span> <span class="o">&amp;=</span> <span class="mh">0x00ffffff</span><span class="p">;</span>
			<span class="k">goto</span> <span class="n">displace_or_inc</span><span class="p">;</span>
		<span class="k">case</span> <span class="n">IMM32</span>:
		<span class="k">case</span> <span class="n">IMM32_MEM</span>:
		<span class="k">case</span> <span class="n">IMM32_HIGH8</span>:
		<span class="k">case</span> <span class="n">IMM32_HIGH8_MEM</span>:
		<span class="nl">displace_or_inc:</span>
			<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;%s %lx&quot;</span><span class="p">,</span> <span class="n">_inc</span> <span class="o">?</span> <span class="s">&quot;incr&quot;</span> <span class="o">:</span> <span class="s">&quot;disp&quot;</span><span class="p">,</span> <span class="n">disp</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">_inc</span><span class="p">)</span>
				<span class="n">address</span> <span class="o">+=</span> <span class="n">disp</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="o">*</span><span class="n">_inc</span> <span class="o">=</span> <span class="n">disp</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span>
			<span class="n">BUG</span><span class="p">();</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span> <span class="k">while</span> <span class="p">((</span><span class="n">params</span> <span class="o">&gt;&gt;=</span> <span class="mi">8</span><span class="p">));</span>

	<span class="o">*</span><span class="n">_address</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span> <span class="n">address</span><span class="p">;</span>
	<span class="o">*</span><span class="n">_postinc</span> <span class="o">=</span> <span class="n">postinc</span><span class="p">;</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * determine the register that is acting as source/dest</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">misalignment_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">*</span><span class="n">registers</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">params</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="n">opcode</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">disp</span><span class="p">,</span>
			    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="o">**</span><span class="n">_register</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">params</span> <span class="o">&amp;=</span> <span class="mh">0x7fffffff</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">params</span> <span class="o">&amp;</span> <span class="mh">0xffffff00</span><span class="p">)</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">params</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">DM0</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Dreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">DM1</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Dreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">DM2</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Dreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">AM0</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Areg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">AM1</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Areg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">AM2</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Areg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x03</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RM0</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RM1</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RM2</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RM4</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RM6</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">opcode</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RD0</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">disp</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">RD2</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">Rreg_index</span><span class="p">[</span><span class="n">disp</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">&amp;</span> <span class="mh">0x0f</span><span class="p">]];</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">SP</span>:
		<span class="o">*</span><span class="n">_register</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">registers</span><span class="p">[</span><span class="n">REG_SP</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">];</span>
		<span class="k">break</span><span class="p">;</span>

	<span class="nl">default:</span>
		<span class="n">BUG</span><span class="p">();</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * handle the conditional loop part of the move-and-loop instructions</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">misalignment_MOV_Lcc</span><span class="p">(</span><span class="k">struct</span> <span class="n">pt_regs</span> <span class="o">*</span><span class="n">regs</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">opcode</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">epsw</span> <span class="o">=</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">epsw</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">NxorV</span><span class="p">;</span>

	<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;MOV_Lcc %x [flags=%lx]&quot;</span><span class="p">,</span> <span class="n">opcode</span><span class="p">,</span> <span class="n">epsw</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">);</span>

	<span class="cm">/* calculate N^V and shift onto the same bit position as Z */</span>
	<span class="n">NxorV</span> <span class="o">=</span> <span class="p">((</span><span class="n">epsw</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">^</span> <span class="n">epsw</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">opcode</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mh">0x0</span>: <span class="cm">/* MOV_LLT: N^V */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">NxorV</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x1</span>: <span class="cm">/* MOV_LGT: ~(Z or (N^V))*/</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">((</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_FLAG_Z</span><span class="p">)</span> <span class="o">|</span> <span class="n">NxorV</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x2</span>: <span class="cm">/* MOV_LGE: ~(N^V) */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">NxorV</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x3</span>: <span class="cm">/* MOV_LLE: Z or (N^V) */</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_FLAG_Z</span><span class="p">)</span> <span class="o">|</span> <span class="n">NxorV</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">case</span> <span class="mh">0x4</span>: <span class="cm">/* MOV_LCS: C */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_FLAG_C</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x5</span>: <span class="cm">/* MOV_LHI: ~(C or Z) */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">EPSW_FLAG_C</span> <span class="o">|</span> <span class="n">EPSW_FLAG_Z</span><span class="p">)))</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x6</span>: <span class="cm">/* MOV_LCC: ~C */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_FLAG_C</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x7</span>: <span class="cm">/* MOV_LLS: C or Z */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">EPSW_FLAG_C</span> <span class="o">|</span> <span class="n">EPSW_FLAG_Z</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">case</span> <span class="mh">0x8</span>: <span class="cm">/* MOV_LEQ: Z */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_FLAG_Z</span><span class="p">)</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0x9</span>: <span class="cm">/* MOV_LNE: ~Z */</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">epsw</span> <span class="o">&amp;</span> <span class="n">EPSW_FLAG_Z</span><span class="p">))</span>
			<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="k">case</span> <span class="mh">0xa</span>: <span class="cm">/* MOV_LRA: always */</span>
		<span class="k">goto</span> <span class="n">take_the_loop</span><span class="p">;</span>

	<span class="nl">default:</span>
		<span class="n">BUG</span><span class="p">();</span>
	<span class="p">}</span>

<span class="nl">take_the_loop:</span>
	<span class="cm">/* wind the PC back to just after the SETLB insn */</span>
	<span class="n">kdebug</span><span class="p">(</span><span class="s">&quot;loop LAR=%lx&quot;</span><span class="p">,</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">lar</span><span class="p">);</span>
	<span class="n">regs</span><span class="o">-&gt;</span><span class="n">pc</span> <span class="o">=</span> <span class="n">regs</span><span class="o">-&gt;</span><span class="n">lar</span> <span class="o">-</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * misalignment handler tests</span>
<span class="cm"> */</span>
<span class="cp">#ifdef CONFIG_TEST_MISALIGNMENT_HANDLER</span>
<span class="k">static</span> <span class="n">u8</span> <span class="n">__initdata</span> <span class="n">testbuf</span><span class="p">[</span><span class="mi">512</span><span class="p">]</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">aligned</span><span class="p">(</span><span class="mi">16</span><span class="p">)))</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">257</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x11</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">258</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x22</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">259</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x33</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">260</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x44</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#define ASSERTCMP(X, OP, Y)						\</span>
<span class="cp">do {									\</span>
<span class="cp">	if (unlikely(!((X) OP (Y)))) {					\</span>
<span class="cp">		printk(KERN_ERR &quot;\n&quot;);					\</span>
<span class="cp">		printk(KERN_ERR &quot;MISALIGN: Assertion failed at line %u\n&quot;, \</span>
<span class="cp">		       __LINE__);					\</span>
<span class="cp">		printk(KERN_ERR &quot;0x%lx &quot; #OP &quot; 0x%lx is false\n&quot;,	\</span>
<span class="cp">		       (unsigned long)(X), (unsigned long)(Y));		\</span>
<span class="cp">		BUG();							\</span>
<span class="cp">	}								\</span>
<span class="cp">} while(0)</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">test_misalignment</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">register</span> <span class="kt">void</span> <span class="o">*</span><span class="n">r</span> <span class="n">asm</span><span class="p">(</span><span class="s">&quot;e0&quot;</span><span class="p">);</span>
	<span class="k">register</span> <span class="n">u32</span> <span class="n">y</span> <span class="n">asm</span><span class="p">(</span><span class="s">&quot;e1&quot;</span><span class="p">);</span>
	<span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">testbuf</span><span class="p">,</span> <span class="o">*</span><span class="n">q</span><span class="p">;</span>
	<span class="n">u32</span> <span class="n">tmp</span><span class="p">,</span> <span class="n">tmp2</span><span class="p">,</span> <span class="n">x</span><span class="p">;</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;==&gt;test_misalignment() [testbuf=%p]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
	<span class="n">p</span><span class="o">++</span><span class="p">;</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (Am),Dn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mov	(%0),%1&quot;</span> <span class="o">:</span> <span class="s">&quot;+a&quot;</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (256,Am),Dn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mov	(256,%0),%1&quot;</span> <span class="o">:</span> <span class="s">&quot;+a&quot;</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (Di,Am),Dn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">tmp</span> <span class="o">=</span> <span class="mi">256</span><span class="p">;</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mov	(%2,%0),%1&quot;</span> <span class="o">:</span> <span class="s">&quot;+a&quot;</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mi">256</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (256,Rm),Rn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mov	(256,%0),%1&quot;</span> <span class="o">:</span> <span class="s">&quot;+r&quot;</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s">&quot;=r&quot;</span><span class="p">(</span><span class="n">y</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (Rm+),Rn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mov	(%0+),%1&quot;</span> <span class="o">:</span> <span class="s">&quot;+r&quot;</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s">&quot;=r&quot;</span><span class="p">(</span><span class="n">y</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">4</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (Rm+,8),Rn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">r</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span><span class="s">&quot;mov	(%0+,8),%1&quot;</span> <span class="o">:</span> <span class="s">&quot;+r&quot;</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s">&quot;=r&quot;</span><span class="p">(</span><span class="n">y</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">8</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (7,SP),Rn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span>
		<span class="s">&quot;add	-16,sp		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x11,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(7,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x22,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(8,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x33,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(9,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x44,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(10,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	(7,sp),%1	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;add	+16,sp		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="o">:</span> <span class="s">&quot;+a&quot;</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (259,SP),Rn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span>
		<span class="s">&quot;add	-264,sp		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x11,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(259,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x22,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(260,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x33,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(261,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x55,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(262,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	(259,sp),%1	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;add	+264,sp		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="o">:</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x55332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV (260,SP),Rn ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span>
		<span class="s">&quot;add	-264,sp		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x11,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(260,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x22,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(261,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x33,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(262,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	+0x55,%0	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;movbu	%0,(263,sp)	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	(260,sp),%1	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;add	+264,sp		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="o">:</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x55332211</span><span class="p">);</span>


	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV_LNE ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">tmp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">tmp2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span>
		<span class="s">&quot;setlb			</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	%2,%3		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	%1,%2		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;cmp	+0,%1		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov_lne	(%0+,4),%1&quot;</span>
		<span class="o">:</span> <span class="s">&quot;+r&quot;</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp2</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
		<span class="o">:</span>
		<span class="o">:</span> <span class="s">&quot;cc&quot;</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">12</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;___ MOV in SETLB ___</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">tmp</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="n">tmp2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span><span class="p">;</span>
	<span class="n">asm</span> <span class="k">volatile</span><span class="p">(</span>
		<span class="s">&quot;setlb			</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	%1,%3		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;mov	(%0+),%1	</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;cmp	+0,%1		</span><span class="se">\n</span><span class="s">&quot;</span>
		<span class="s">&quot;lne			&quot;</span>
		<span class="o">:</span> <span class="s">&quot;+a&quot;</span><span class="p">(</span><span class="n">q</span><span class="p">),</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp</span><span class="p">),</span> <span class="s">&quot;+d&quot;</span><span class="p">(</span><span class="n">tmp2</span><span class="p">),</span> <span class="s">&quot;=d&quot;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
		<span class="o">:</span>
		<span class="o">:</span> <span class="s">&quot;cc&quot;</span><span class="p">);</span>

	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">256</span> <span class="o">+</span> <span class="mi">8</span><span class="p">);</span>
	<span class="n">ASSERTCMP</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">==</span><span class="p">,</span> <span class="mh">0x44332211</span><span class="p">);</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_NOTICE</span> <span class="s">&quot;&lt;==test_misalignment()</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">arch_initcall</span><span class="p">(</span><span class="n">test_misalignment</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_TEST_MISALIGNMENT_HANDLER */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
