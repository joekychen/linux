<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › frv › include › asm › spr-regs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>spr-regs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* spr-regs.h: special-purpose registers on the FRV</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2003, 2004 Red Hat, Inc. All Rights Reserved.</span>
<span class="cm"> * Written by David Howells (dhowells@redhat.com)</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version</span>
<span class="cm"> * 2 of the License, or (at your option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_SPR_REGS_H</span>
<span class="cp">#define _ASM_SPR_REGS_H</span>

<span class="cm">/*</span>
<span class="cm"> * PSR - Processor Status Register</span>
<span class="cm"> */</span>
<span class="cp">#define PSR_ET			0x00000001	</span><span class="cm">/* enable interrupts/exceptions flag */</span><span class="cp"></span>
<span class="cp">#define PSR_PS			0x00000002	</span><span class="cm">/* previous supervisor mode flag */</span><span class="cp"></span>
<span class="cp">#define PSR_S			0x00000004	</span><span class="cm">/* supervisor mode flag */</span><span class="cp"></span>
<span class="cp">#define PSR_PIL			0x00000078	</span><span class="cm">/* processor external interrupt level */</span><span class="cp"></span>
<span class="cp">#define PSR_PIL_0		0x00000000	</span><span class="cm">/* - no interrupt in progress */</span><span class="cp"></span>
<span class="cp">#define PSR_PIL_13		0x00000068	</span><span class="cm">/* - debugging only */</span><span class="cp"></span>
<span class="cp">#define PSR_PIL_14		0x00000070	</span><span class="cm">/* - debugging in progress */</span><span class="cp"></span>
<span class="cp">#define PSR_PIL_15		0x00000078	</span><span class="cm">/* - NMI in progress */</span><span class="cp"></span>
<span class="cp">#define PSR_EM			0x00000080	</span><span class="cm">/* enable media operation */</span><span class="cp"></span>
<span class="cp">#define PSR_EF			0x00000100	</span><span class="cm">/* enable FPU operation */</span><span class="cp"></span>
<span class="cp">#define PSR_BE			0x00001000	</span><span class="cm">/* endianness mode */</span><span class="cp"></span>
<span class="cp">#define PSR_BE_LE		0x00000000	</span><span class="cm">/* - little endian mode */</span><span class="cp"></span>
<span class="cp">#define PSR_BE_BE		0x00001000	</span><span class="cm">/* - big endian mode */</span><span class="cp"></span>
<span class="cp">#define PSR_CM			0x00002000	</span><span class="cm">/* conditional mode */</span><span class="cp"></span>
<span class="cp">#define PSR_NEM			0x00004000	</span><span class="cm">/* non-excepting mode */</span><span class="cp"></span>
<span class="cp">#define PSR_ICE			0x00010000	</span><span class="cm">/* in-circuit emulation mode */</span><span class="cp"></span>
<span class="cp">#define PSR_VERSION_SHIFT	24		</span><span class="cm">/* CPU silicon ID */</span><span class="cp"></span>
<span class="cp">#define PSR_IMPLE_SHIFT		28		</span><span class="cm">/* CPU core ID */</span><span class="cp"></span>

<span class="cp">#define PSR_VERSION(psr)	(((psr) &gt;&gt; PSR_VERSION_SHIFT) &amp; 0xf)</span>
<span class="cp">#define PSR_IMPLE(psr)		(((psr) &gt;&gt; PSR_IMPLE_SHIFT) &amp; 0xf)</span>

<span class="cp">#define PSR_IMPLE_FR401		0x2</span>
<span class="cp">#define PSR_VERSION_FR401_MB93401	0x0</span>
<span class="cp">#define PSR_VERSION_FR401_MB93401A	0x1</span>
<span class="cp">#define PSR_VERSION_FR401_MB93403	0x2</span>

<span class="cp">#define PSR_IMPLE_FR405		0x4</span>
<span class="cp">#define PSR_VERSION_FR405_MB93405	0x0</span>

<span class="cp">#define PSR_IMPLE_FR451		0x5</span>
<span class="cp">#define PSR_VERSION_FR451_MB93451	0x0</span>

<span class="cp">#define PSR_IMPLE_FR501		0x1</span>
<span class="cp">#define PSR_VERSION_FR501_MB93501	0x1</span>
<span class="cp">#define PSR_VERSION_FR501_MB93501A	0x2</span>

<span class="cp">#define PSR_IMPLE_FR551		0x3</span>
<span class="cp">#define PSR_VERSION_FR551_MB93555	0x1</span>

<span class="cp">#define __get_PSR()	({ unsigned long x; asm volatile(&quot;movsg psr,%0&quot; : &quot;=r&quot;(x)); x; })</span>
<span class="cp">#define __set_PSR(V)	do { asm volatile(&quot;movgs %0,psr&quot; : : &quot;r&quot;(V)); } while(0)</span>

<span class="cm">/*</span>
<span class="cm"> * TBR - Trap Base Register</span>
<span class="cm"> */</span>
<span class="cp">#define TBR_TT			0x00000ff0</span>
<span class="cp">#define TBR_TT_INSTR_MMU_MISS	(0x01 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INSTR_ACC_ERROR	(0x02 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INSTR_ACC_EXCEP	(0x03 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_PRIV_INSTR	(0x06 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_ILLEGAL_INSTR	(0x07 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_FP_EXCEPTION	(0x0d &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_MP_EXCEPTION	(0x0e &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DATA_ACC_ERROR	(0x11 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DATA_MMU_MISS	(0x12 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DATA_ACC_EXCEP	(0x13 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DATA_STR_ERROR	(0x14 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DIVISION_EXCEP	(0x17 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_COMMIT_EXCEP	(0x19 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INSTR_TLB_MISS	(0x1a &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DATA_TLB_MISS	(0x1b &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DATA_DAT_EXCEP	(0x1d &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_DECREMENT_TIMER	(0x1f &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_COMPOUND_EXCEP	(0x20 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_1	(0x21 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_2	(0x22 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_3	(0x23 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_4	(0x24 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_5	(0x25 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_6	(0x26 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_7	(0x27 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_8	(0x28 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_9	(0x29 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_10	(0x2a &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_11	(0x2b &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_12	(0x2c &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_13	(0x2d &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_14	(0x2e &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_INTERRUPT_15	(0x2f &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP0		(0x80 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP1		(0x81 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP2		(0x82 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP3		(0x83 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP120		(0xf8 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP121		(0xf9 &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP122		(0xfa &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP123		(0xfb &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP124		(0xfc &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP125		(0xfd &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_TRAP126		(0xfe &lt;&lt; 4)</span>
<span class="cp">#define TBR_TT_BREAK		(0xff &lt;&lt; 4)</span>

<span class="cp">#define TBR_TT_ATOMIC_CMPXCHG32	TBR_TT_TRAP120</span>
<span class="cp">#define TBR_TT_ATOMIC_XCHG32	TBR_TT_TRAP121</span>
<span class="cp">#define TBR_TT_ATOMIC_XOR	TBR_TT_TRAP122</span>
<span class="cp">#define TBR_TT_ATOMIC_OR	TBR_TT_TRAP123</span>
<span class="cp">#define TBR_TT_ATOMIC_AND	TBR_TT_TRAP124</span>
<span class="cp">#define TBR_TT_ATOMIC_SUB	TBR_TT_TRAP125</span>
<span class="cp">#define TBR_TT_ATOMIC_ADD	TBR_TT_TRAP126</span>

<span class="cp">#define __get_TBR()	({ unsigned long x; asm volatile(&quot;movsg tbr,%0&quot; : &quot;=r&quot;(x)); x; })</span>

<span class="cm">/*</span>
<span class="cm"> * HSR0 - Hardware Status Register 0</span>
<span class="cm"> */</span>
<span class="cp">#define HSR0_PDM		0x00000007	</span><span class="cm">/* power down mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_PDM_NORMAL		0x00000000	</span><span class="cm">/* - normal mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_PDM_CORE_SLEEP	0x00000001	</span><span class="cm">/* - CPU core sleep mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_PDM_BUS_SLEEP	0x00000003	</span><span class="cm">/* - bus sleep mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_PDM_PLL_RUN	0x00000005	</span><span class="cm">/* - PLL run */</span><span class="cp"></span>
<span class="cp">#define HSR0_PDM_PLL_STOP	0x00000007	</span><span class="cm">/* - PLL stop */</span><span class="cp"></span>
<span class="cp">#define HSR0_GRLE		0x00000040	</span><span class="cm">/* GR lower register set enable */</span><span class="cp"></span>
<span class="cp">#define HSR0_GRHE		0x00000080	</span><span class="cm">/* GR higher register set enable */</span><span class="cp"></span>
<span class="cp">#define HSR0_FRLE		0x00000100	</span><span class="cm">/* FR lower register set enable */</span><span class="cp"></span>
<span class="cp">#define HSR0_FRHE		0x00000200	</span><span class="cm">/* FR higher register set enable */</span><span class="cp"></span>
<span class="cp">#define HSR0_GRN		0x00000400	</span><span class="cm">/* GR quantity */</span><span class="cp"></span>
<span class="cp">#define HSR0_GRN_64		0x00000000	</span><span class="cm">/* - 64 GR registers */</span><span class="cp"></span>
<span class="cp">#define HSR0_GRN_32		0x00000400	</span><span class="cm">/* - 32 GR registers */</span><span class="cp"></span>
<span class="cp">#define HSR0_FRN		0x00000800	</span><span class="cm">/* FR quantity */</span><span class="cp"></span>
<span class="cp">#define HSR0_FRN_64		0x00000000	</span><span class="cm">/* - 64 FR registers */</span><span class="cp"></span>
<span class="cp">#define HSR0_FRN_32		0x00000800	</span><span class="cm">/* - 32 FR registers */</span><span class="cp"></span>
<span class="cp">#define HSR0_SA			0x00001000	</span><span class="cm">/* start address (RAMBOOT#) */</span><span class="cp"></span>
<span class="cp">#define HSR0_ETMI		0x00008000	</span><span class="cm">/* enable TIMERI (64-bit up timer) */</span><span class="cp"></span>
<span class="cp">#define HSR0_ETMD		0x00004000	</span><span class="cm">/* enable TIMERD (32-bit down timer) */</span><span class="cp"></span>
<span class="cp">#define HSR0_PEDAT		0x00010000	</span><span class="cm">/* previous DAT mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_XEDAT		0x00020000	</span><span class="cm">/* exception DAT mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_EDAT		0x00080000	</span><span class="cm">/* enable DAT mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_RME		0x00400000	</span><span class="cm">/* enable RAM mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_EMEM		0x00800000	</span><span class="cm">/* enable MMU_Miss mask */</span><span class="cp"></span>
<span class="cp">#define HSR0_EXMMU		0x01000000	</span><span class="cm">/* enable extended MMU mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_EDMMU		0x02000000	</span><span class="cm">/* enable data MMU */</span><span class="cp"></span>
<span class="cp">#define HSR0_EIMMU		0x04000000	</span><span class="cm">/* enable instruction MMU */</span><span class="cp"></span>
<span class="cp">#define HSR0_CBM		0x08000000	</span><span class="cm">/* copy back mode */</span><span class="cp"></span>
<span class="cp">#define HSR0_CBM_WRITE_THRU	0x00000000	</span><span class="cm">/* - write through */</span><span class="cp"></span>
<span class="cp">#define HSR0_CBM_COPY_BACK	0x08000000	</span><span class="cm">/* - copy back */</span><span class="cp"></span>
<span class="cp">#define HSR0_NWA		0x10000000	</span><span class="cm">/* no write allocate */</span><span class="cp"></span>
<span class="cp">#define HSR0_DCE		0x40000000	</span><span class="cm">/* data cache enable */</span><span class="cp"></span>
<span class="cp">#define HSR0_ICE		0x80000000	</span><span class="cm">/* instruction cache enable */</span><span class="cp"></span>

<span class="cp">#define __get_HSR(R)	({ unsigned long x; asm volatile(&quot;movsg hsr&quot;#R&quot;,%0&quot; : &quot;=r&quot;(x)); x; })</span>
<span class="cp">#define __set_HSR(R,V)	do { asm volatile(&quot;movgs %0,hsr&quot;#R : : &quot;r&quot;(V)); } while(0)</span>

<span class="cm">/*</span>
<span class="cm"> * CCR - Condition Codes Register</span>
<span class="cm"> */</span>
<span class="cp">#define CCR_FCC0		0x0000000f	</span><span class="cm">/* FP/Media condition 0 (fcc0 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_FCC1		0x000000f0	</span><span class="cm">/* FP/Media condition 1 (fcc1 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_FCC2		0x00000f00	</span><span class="cm">/* FP/Media condition 2 (fcc2 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_FCC3		0x0000f000	</span><span class="cm">/* FP/Media condition 3 (fcc3 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC0		0x000f0000	</span><span class="cm">/* Integer condition 0 (icc0 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC0_C		0x00010000	</span><span class="cm">/* - Carry flag */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC0_V		0x00020000	</span><span class="cm">/* - Overflow flag */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC0_Z		0x00040000	</span><span class="cm">/* - Zero flag */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC0_N		0x00080000	</span><span class="cm">/* - Negative flag */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC1		0x00f00000	</span><span class="cm">/* Integer condition 1 (icc1 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC2		0x0f000000	</span><span class="cm">/* Integer condition 2 (icc2 reg) */</span><span class="cp"></span>
<span class="cp">#define CCR_ICC3		0xf0000000	</span><span class="cm">/* Integer condition 3 (icc3 reg) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * CCCR - Condition Codes for Conditional Instructions Register</span>
<span class="cm"> */</span>
<span class="cp">#define CCCR_CC0		0x00000003	</span><span class="cm">/* condition 0 (cc0 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC0_FALSE		0x00000002	</span><span class="cm">/* - condition is false */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC0_TRUE		0x00000003	</span><span class="cm">/* - condition is true */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC1		0x0000000c	</span><span class="cm">/* condition 1 (cc1 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC2		0x00000030	</span><span class="cm">/* condition 2 (cc2 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC3		0x000000c0	</span><span class="cm">/* condition 3 (cc3 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC4		0x00000300	</span><span class="cm">/* condition 4 (cc4 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC5		0x00000c00	</span><span class="cm">/* condition 5 (cc5 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC6		0x00003000	</span><span class="cm">/* condition 6 (cc6 reg) */</span><span class="cp"></span>
<span class="cp">#define CCCR_CC7		0x0000c000	</span><span class="cm">/* condition 7 (cc7 reg) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ISR - Integer Status Register</span>
<span class="cm"> */</span>
<span class="cp">#define ISR_EMAM		0x00000001	</span><span class="cm">/* memory misaligned access handling */</span><span class="cp"></span>
<span class="cp">#define ISR_EMAM_EXCEPTION	0x00000000	</span><span class="cm">/* - generate exception */</span><span class="cp"></span>
<span class="cp">#define ISR_EMAM_FUDGE		0x00000001	</span><span class="cm">/* - mask out invalid address bits */</span><span class="cp"></span>
<span class="cp">#define ISR_AEXC		0x00000004	</span><span class="cm">/* accrued [overflow] exception */</span><span class="cp"></span>
<span class="cp">#define ISR_DTT			0x00000018	</span><span class="cm">/* division type trap */</span><span class="cp"></span>
<span class="cp">#define ISR_DTT_IGNORE		0x00000000	</span><span class="cm">/* - ignore division error */</span><span class="cp"></span>
<span class="cp">#define ISR_DTT_DIVBYZERO	0x00000008	</span><span class="cm">/* - generate exception */</span><span class="cp"></span>
<span class="cp">#define ISR_DTT_OVERFLOW	0x00000010	</span><span class="cm">/* - record overflow */</span><span class="cp"></span>
<span class="cp">#define ISR_EDE			0x00000020	</span><span class="cm">/* enable division exception */</span><span class="cp"></span>
<span class="cp">#define ISR_PLI			0x20000000	</span><span class="cm">/* pre-load instruction information */</span><span class="cp"></span>
<span class="cp">#define ISR_QI			0x80000000	</span><span class="cm">/* quad data implementation information */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * EPCR0 - Exception PC Register</span>
<span class="cm"> */</span>
<span class="cp">#define EPCR0_V			0x00000001	</span><span class="cm">/* register content validity indicator */</span><span class="cp"></span>
<span class="cp">#define EPCR0_PC		0xfffffffc	</span><span class="cm">/* faulting instruction address */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ESR0/14/15 - Exception Status Register</span>
<span class="cm"> */</span>
<span class="cp">#define ESRx_VALID		0x00000001	</span><span class="cm">/* register content validity indicator */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC			0x0000003e	</span><span class="cm">/* exception type */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_DATA_STORE	0x00000000	</span><span class="cm">/* - data_store_error */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_INSN_ACCESS	0x00000006	</span><span class="cm">/* - instruction_access_error */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_PRIV_INSN	0x00000008	</span><span class="cm">/* - privileged_instruction */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_ILL_INSN	0x0000000a	</span><span class="cm">/* - illegal_instruction */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_MP_EXCEP	0x0000001c	</span><span class="cm">/* - mp_exception */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_DATA_ACCESS	0x00000020	</span><span class="cm">/* - data_access_error */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_DIVISION	0x00000026	</span><span class="cm">/* - division_exception */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_ITLB_MISS	0x00000034	</span><span class="cm">/* - instruction_access_TLB_miss */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_DTLB_MISS	0x00000036	</span><span class="cm">/* - data_access_TLB_miss */</span><span class="cp"></span>
<span class="cp">#define ESRx_EC_DATA_ACCESS_DAT	0x0000003a	</span><span class="cm">/* - data_access_DAT_exception */</span><span class="cp"></span>

<span class="cp">#define ESR0_IAEC		0x00000100	</span><span class="cm">/* info for instruction-access-exception */</span><span class="cp"></span>
<span class="cp">#define ESR0_IAEC_RESV		0x00000000	</span><span class="cm">/* - reserved */</span><span class="cp"></span>
<span class="cp">#define ESR0_IAEC_PROT_VIOL	0x00000100	</span><span class="cm">/* - protection violation */</span><span class="cp"></span>

<span class="cp">#define ESR0_ATXC		0x00f00000	</span><span class="cm">/* address translation exception code */</span><span class="cp"></span>
<span class="cp">#define ESR0_ATXC_MMU_MISS	0x00000000	</span><span class="cm">/* - MMU miss exception and more (?) */</span><span class="cp"></span>
<span class="cp">#define ESR0_ATXC_MULTI_DAT	0x00800000	</span><span class="cm">/* - multiple DAT entry hit */</span><span class="cp"></span>
<span class="cp">#define ESR0_ATXC_MULTI_SAT	0x00900000	</span><span class="cm">/* - multiple SAT entry hit */</span><span class="cp"></span>
<span class="cp">#define ESR0_ATXC_AMRTLB_MISS	0x00a00000	</span><span class="cm">/* - MMU/TLB miss exception */</span><span class="cp"></span>
<span class="cp">#define ESR0_ATXC_PRIV_EXCEP	0x00c00000	</span><span class="cm">/* - privilege protection fault */</span><span class="cp"></span>
<span class="cp">#define ESR0_ATXC_WP_EXCEP	0x00d00000	</span><span class="cm">/* - write protection fault */</span><span class="cp"></span>

<span class="cp">#define ESR0_EAV		0x00000800	</span><span class="cm">/* true if EAR0 register valid */</span><span class="cp"></span>
<span class="cp">#define ESR15_EAV		0x00000800	</span><span class="cm">/* true if EAR15 register valid */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * ESFR1 - Exception Status Valid Flag Register</span>
<span class="cm"> */</span>
<span class="cp">#define ESFR1_ESR0		0x00000001	</span><span class="cm">/* true if ESR0 is valid */</span><span class="cp"></span>
<span class="cp">#define ESFR1_ESR14		0x00004000	</span><span class="cm">/* true if ESR14 is valid */</span><span class="cp"></span>
<span class="cp">#define ESFR1_ESR15		0x00008000	</span><span class="cm">/* true if ESR15 is valid */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * MSR - Media Status Register</span>
<span class="cm"> */</span>
<span class="cp">#define MSR0_AOVF		0x00000001	</span><span class="cm">/* overflow exception accrued */</span><span class="cp"></span>
<span class="cp">#define MSRx_OVF		0x00000002	</span><span class="cm">/* overflow exception detected */</span><span class="cp"></span>
<span class="cp">#define MSRx_SIE		0x0000003c	</span><span class="cm">/* last SIMD instruction exception detected */</span><span class="cp"></span>
<span class="cp">#define MSRx_SIE_NONE		0x00000000	</span><span class="cm">/* - none detected */</span><span class="cp"></span>
<span class="cp">#define MSRx_SIE_FRkHI_ACCk	0x00000020	</span><span class="cm">/* - exception at FRkHI or ACCk */</span><span class="cp"></span>
<span class="cp">#define MSRx_SIE_FRkLO_ACCk1	0x00000010	</span><span class="cm">/* - exception at FRkLO or ACCk+1 */</span><span class="cp"></span>
<span class="cp">#define MSRx_SIE_FRk1HI_ACCk2	0x00000008	</span><span class="cm">/* - exception at FRk+1HI or ACCk+2 */</span><span class="cp"></span>
<span class="cp">#define MSRx_SIE_FRk1LO_ACCk3	0x00000004	</span><span class="cm">/* - exception at FRk+1LO or ACCk+3 */</span><span class="cp"></span>
<span class="cp">#define MSR0_MTT		0x00007000	</span><span class="cm">/* type of last media trap detected */</span><span class="cp"></span>
<span class="cp">#define MSR0_MTT_NONE		0x00000000	</span><span class="cm">/* - none detected */</span><span class="cp"></span>
<span class="cp">#define MSR0_MTT_OVERFLOW	0x00001000	</span><span class="cm">/* - overflow detected */</span><span class="cp"></span>
<span class="cp">#define MSR0_HI			0x00c00000	</span><span class="cm">/* hardware implementation */</span><span class="cp"></span>
<span class="cp">#define MSR0_HI_ROUNDING	0x00000000	</span><span class="cm">/* - rounding mode */</span><span class="cp"></span>
<span class="cp">#define MSR0_HI_NONROUNDING	0x00c00000	</span><span class="cm">/* - non-rounding mode */</span><span class="cp"></span>
<span class="cp">#define MSR0_EMCI		0x01000000	</span><span class="cm">/* enable media custom instructions */</span><span class="cp"></span>
<span class="cp">#define MSR0_SRDAV		0x10000000	</span><span class="cm">/* select rounding mode of MAVEH */</span><span class="cp"></span>
<span class="cp">#define MSR0_SRDAV_RDAV		0x00000000	</span><span class="cm">/* - controlled by MSR.RDAV */</span><span class="cp"></span>
<span class="cp">#define MSR0_SRDAV_RD		0x10000000	</span><span class="cm">/* - controlled by MSR.RD */</span><span class="cp"></span>
<span class="cp">#define MSR0_RDAV		0x20000000	</span><span class="cm">/* rounding mode of MAVEH */</span><span class="cp"></span>
<span class="cp">#define MSR0_RDAV_NEAREST_MI	0x00000000	</span><span class="cm">/* - round to nearest minus */</span><span class="cp"></span>
<span class="cp">#define MSR0_RDAV_NEAREST_PL	0x20000000	</span><span class="cm">/* - round to nearest plus */</span><span class="cp"></span>
<span class="cp">#define MSR0_RD			0xc0000000	</span><span class="cm">/* rounding mode */</span><span class="cp"></span>
<span class="cp">#define MSR0_RD_NEAREST		0x00000000	</span><span class="cm">/* - nearest */</span><span class="cp"></span>
<span class="cp">#define MSR0_RD_ZERO		0x40000000	</span><span class="cm">/* - zero */</span><span class="cp"></span>
<span class="cp">#define MSR0_RD_POS_INF		0x80000000	</span><span class="cm">/* - positive infinity */</span><span class="cp"></span>
<span class="cp">#define MSR0_RD_NEG_INF		0xc0000000	</span><span class="cm">/* - negative infinity */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * IAMPR0-7 - Instruction Address Mapping Register</span>
<span class="cm"> * DAMPR0-7 - Data Address Mapping Register</span>
<span class="cm"> */</span>
<span class="cp">#define xAMPRx_V		0x00000001	</span><span class="cm">/* register content validity indicator */</span><span class="cp"></span>
<span class="cp">#define DAMPRx_WP		0x00000002	</span><span class="cm">/* write protect */</span><span class="cp"></span>
<span class="cp">#define DAMPRx_WP_RW		0x00000000	</span><span class="cm">/* - read/write */</span><span class="cp"></span>
<span class="cp">#define DAMPRx_WP_RO		0x00000002	</span><span class="cm">/* - read-only */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_C		0x00000004	</span><span class="cm">/* cached/uncached */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_C_CACHED		0x00000000	</span><span class="cm">/* - cached */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_C_UNCACHED	0x00000004	</span><span class="cm">/* - uncached */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_S		0x00000008	</span><span class="cm">/* supervisor only */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_S_USER		0x00000000	</span><span class="cm">/* - userspace can access */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_S_KERNEL		0x00000008	</span><span class="cm">/* - kernel only */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS		0x000000f0	</span><span class="cm">/* segment size */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_16Kb		0x00000000	</span><span class="cm">/* - 16 kilobytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_64Kb		0x00000010	</span><span class="cm">/* - 64 kilobytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_256Kb		0x00000020	</span><span class="cm">/* - 256 kilobytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_1Mb		0x00000030	</span><span class="cm">/* - 1 megabyte */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_2Mb		0x00000040	</span><span class="cm">/* - 2 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_4Mb		0x00000050	</span><span class="cm">/* - 4 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_8Mb		0x00000060	</span><span class="cm">/* - 8 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_16Mb		0x00000070	</span><span class="cm">/* - 16 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_32Mb		0x00000080	</span><span class="cm">/* - 32 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_64Mb		0x00000090	</span><span class="cm">/* - 64 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_128Mb		0x000000a0	</span><span class="cm">/* - 128 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_256Mb		0x000000b0	</span><span class="cm">/* - 256 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_SS_512Mb		0x000000c0	</span><span class="cm">/* - 512 megabytes */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_RESERVED8	0x00000100	</span><span class="cm">/* reserved bit */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_NG		0x00000200	</span><span class="cm">/* non-global */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_L		0x00000400	</span><span class="cm">/* locked */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_M		0x00000800	</span><span class="cm">/* modified */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_D		0x00001000	</span><span class="cm">/* DAT entry */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_RESERVED13	0x00002000	</span><span class="cm">/* reserved bit */</span><span class="cp"></span>
<span class="cp">#define xAMPRx_PPFN		0xfff00000	</span><span class="cm">/* physical page frame number */</span><span class="cp"></span>

<span class="cp">#define xAMPRx_V_BIT		0</span>
<span class="cp">#define DAMPRx_WP_BIT		1</span>
<span class="cp">#define xAMPRx_C_BIT		2</span>
<span class="cp">#define xAMPRx_S_BIT		3</span>
<span class="cp">#define xAMPRx_RESERVED8_BIT	8</span>
<span class="cp">#define xAMPRx_NG_BIT		9</span>
<span class="cp">#define xAMPRx_L_BIT		10</span>
<span class="cp">#define xAMPRx_M_BIT		11</span>
<span class="cp">#define xAMPRx_D_BIT		12</span>
<span class="cp">#define xAMPRx_RESERVED13_BIT	13</span>

<span class="cp">#define __get_IAMPR(R) ({ unsigned long x; asm volatile(&quot;movsg iampr&quot;#R&quot;,%0&quot; : &quot;=r&quot;(x)); x; })</span>
<span class="cp">#define __get_DAMPR(R) ({ unsigned long x; asm volatile(&quot;movsg dampr&quot;#R&quot;,%0&quot; : &quot;=r&quot;(x)); x; })</span>

<span class="cp">#define __get_IAMLR(R) ({ unsigned long x; asm volatile(&quot;movsg iamlr&quot;#R&quot;,%0&quot; : &quot;=r&quot;(x)); x; })</span>
<span class="cp">#define __get_DAMLR(R) ({ unsigned long x; asm volatile(&quot;movsg damlr&quot;#R&quot;,%0&quot; : &quot;=r&quot;(x)); x; })</span>

<span class="cp">#define __set_IAMPR(R,V) 	do { asm volatile(&quot;movgs %0,iampr&quot;#R : : &quot;r&quot;(V)); } while(0)</span>
<span class="cp">#define __set_DAMPR(R,V)  	do { asm volatile(&quot;movgs %0,dampr&quot;#R : : &quot;r&quot;(V)); } while(0)</span>

<span class="cp">#define __set_IAMLR(R,V) 	do { asm volatile(&quot;movgs %0,iamlr&quot;#R : : &quot;r&quot;(V)); } while(0)</span>
<span class="cp">#define __set_DAMLR(R,V)  	do { asm volatile(&quot;movgs %0,damlr&quot;#R : : &quot;r&quot;(V)); } while(0)</span>

<span class="cp">#define save_dampr(R, _dampr)					\</span>
<span class="cp">do {								\</span>
<span class="cp">	asm volatile(&quot;movsg dampr&quot;R&quot;,%0&quot; : &quot;=r&quot;(_dampr));	\</span>
<span class="cp">} while(0)</span>

<span class="cp">#define restore_dampr(R, _dampr)			\</span>
<span class="cp">do {							\</span>
<span class="cp">	asm volatile(&quot;movgs %0,dampr&quot;R :: &quot;r&quot;(_dampr));	\</span>
<span class="cp">} while(0)</span>

<span class="cm">/*</span>
<span class="cm"> * AMCR - Address Mapping Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define AMCR_IAMRN		0x000000ff	</span><span class="cm">/* quantity of IAMPR registers */</span><span class="cp"></span>
<span class="cp">#define AMCR_DAMRN		0x0000ff00	</span><span class="cm">/* quantity of DAMPR registers */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * TTBR - Address Translation Table Base Register</span>
<span class="cm"> */</span>
<span class="cp">#define __get_TTBR()		({ unsigned long x; asm volatile(&quot;movsg ttbr,%0&quot; : &quot;=r&quot;(x)); x; })</span>

<span class="cm">/*</span>
<span class="cm"> * TPXR - TLB Probe Extend Register</span>
<span class="cm"> */</span>
<span class="cp">#define TPXR_E			0x00000001</span>
<span class="cp">#define TPXR_LMAX_SHIFT		20</span>
<span class="cp">#define TPXR_LMAX_SMASK		0xf</span>
<span class="cp">#define TPXR_WMAX_SHIFT		24</span>
<span class="cp">#define TPXR_WMAX_SMASK		0xf</span>
<span class="cp">#define TPXR_WAY_SHIFT		28</span>
<span class="cp">#define TPXR_WAY_SMASK		0xf</span>

<span class="cm">/*</span>
<span class="cm"> * DCR - Debug Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define DCR_IBCE3		0x00000001	</span><span class="cm">/* break on conditional insn pointed to by IBAR3 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBE3		0x00000002	</span><span class="cm">/* break on insn pointed to by IBAR3 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBCE1		0x00000004	</span><span class="cm">/* break on conditional insn pointed to by IBAR2 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBE1		0x00000008	</span><span class="cm">/* break on insn pointed to by IBAR2 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBCE2		0x00000010	</span><span class="cm">/* break on conditional insn pointed to by IBAR1 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBE2		0x00000020	</span><span class="cm">/* break on insn pointed to by IBAR1 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBCE0		0x00000040	</span><span class="cm">/* break on conditional insn pointed to by IBAR0 */</span><span class="cp"></span>
<span class="cp">#define DCR_IBE0		0x00000080	</span><span class="cm">/* break on insn pointed to by IBAR0 */</span><span class="cp"></span>

<span class="cp">#define DCR_DDBE1		0x00004000	</span><span class="cm">/* use DBDR1x when checking DBAR1 */</span><span class="cp"></span>
<span class="cp">#define DCR_DWBE1		0x00008000	</span><span class="cm">/* break on store to address in DBAR1/DBMR1x */</span><span class="cp"></span>
<span class="cp">#define DCR_DRBE1		0x00010000	</span><span class="cm">/* break on load from address in DBAR1/DBMR1x */</span><span class="cp"></span>
<span class="cp">#define DCR_DDBE0		0x00020000	</span><span class="cm">/* use DBDR0x when checking DBAR0 */</span><span class="cp"></span>
<span class="cp">#define DCR_DWBE0		0x00040000	</span><span class="cm">/* break on store to address in DBAR0/DBMR0x */</span><span class="cp"></span>
<span class="cp">#define DCR_DRBE0		0x00080000	</span><span class="cm">/* break on load from address in DBAR0/DBMR0x */</span><span class="cp"></span>

<span class="cp">#define DCR_EIM			0x0c000000	</span><span class="cm">/* external interrupt disable */</span><span class="cp"></span>
<span class="cp">#define DCR_IBM			0x10000000	</span><span class="cm">/* instruction break disable */</span><span class="cp"></span>
<span class="cp">#define DCR_SE			0x20000000	</span><span class="cm">/* single step enable */</span><span class="cp"></span>
<span class="cp">#define DCR_EBE			0x40000000	</span><span class="cm">/* exception break enable */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * BRR - Break Interrupt Request Register</span>
<span class="cm"> */</span>
<span class="cp">#define BRR_ST			0x00000001	</span><span class="cm">/* single-step detected */</span><span class="cp"></span>
<span class="cp">#define BRR_SB			0x00000002	</span><span class="cm">/* break instruction detected */</span><span class="cp"></span>
<span class="cp">#define BRR_BB			0x00000004	</span><span class="cm">/* branch with hint detected */</span><span class="cp"></span>
<span class="cp">#define BRR_CBB			0x00000008	</span><span class="cm">/* branch to LR detected */</span><span class="cp"></span>
<span class="cp">#define BRR_IBx			0x000000f0	</span><span class="cm">/* hardware breakpoint detected */</span><span class="cp"></span>
<span class="cp">#define BRR_DBx			0x00000f00	</span><span class="cm">/* hardware watchpoint detected */</span><span class="cp"></span>
<span class="cp">#define BRR_DBNEx		0x0000f000	</span><span class="cm">/* ? */</span><span class="cp"></span>
<span class="cp">#define BRR_EBTT		0x00ff0000	</span><span class="cm">/* trap type of exception break */</span><span class="cp"></span>
<span class="cp">#define BRR_TB			0x10000000	</span><span class="cm">/* external break request detected */</span><span class="cp"></span>
<span class="cp">#define BRR_CB			0x20000000	</span><span class="cm">/* ICE break command detected */</span><span class="cp"></span>
<span class="cp">#define BRR_EB			0x40000000	</span><span class="cm">/* exception break detected */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * BPSR - Break PSR Save Register</span>
<span class="cm"> */</span>
<span class="cp">#define BPSR_BET		0x00000001	</span><span class="cm">/* former PSR.ET */</span><span class="cp"></span>
<span class="cp">#define BPSR_BS			0x00001000	</span><span class="cm">/* former PSR.S */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* _ASM_SPR_REGS_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
