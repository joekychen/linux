<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › frv › include › asm › mb-regs.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mb-regs.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* mb-regs.h: motherboard registers</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 2003, 2004 Red Hat, Inc. All Rights Reserved.</span>
<span class="cm"> * Written by David Howells (dhowells@redhat.com)</span>
<span class="cm"> *</span>
<span class="cm"> * This program is free software; you can redistribute it and/or</span>
<span class="cm"> * modify it under the terms of the GNU General Public License</span>
<span class="cm"> * as published by the Free Software Foundation; either version</span>
<span class="cm"> * 2 of the License, or (at your option) any later version.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_MB_REGS_H</span>
<span class="cp">#define _ASM_MB_REGS_H</span>

<span class="cp">#include &lt;asm/cpu-irqs.h&gt;</span>
<span class="cp">#include &lt;asm/sections.h&gt;</span>
<span class="cp">#include &lt;asm/mem-layout.h&gt;</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="cm">/* gcc builtins, annotated */</span>

<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">__builtin_read8</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">__builtin_read16</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">__builtin_read32</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">__builtin_write8</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">__builtin_write16</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">short</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">__builtin_write32</span><span class="p">(</span><span class="k">volatile</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cp">#define __region_IO	KERNEL_IO_START	</span><span class="cm">/* the region from 0xe0000000 to 0xffffffff has suitable</span>
<span class="cm">					 * protection laid over the top for use in memory-mapped</span>
<span class="cm">					 * I/O</span>
<span class="cm">					 */</span><span class="cp"></span>

<span class="cp">#define __region_CS0	0xff000000	</span><span class="cm">/* Boot ROMs area */</span><span class="cp"></span>

<span class="cp">#ifdef CONFIG_MB93091_VDK</span>
<span class="cm">/*</span>
<span class="cm"> * VDK motherboard and CPU card specific stuff</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;asm/mb93091-fpga-irqs.h&gt;</span>

<span class="cp">#define IRQ_CPU_MB93493_0	IRQ_CPU_EXTERNAL0</span>
<span class="cp">#define IRQ_CPU_MB93493_1	IRQ_CPU_EXTERNAL1</span>

<span class="cp">#define __region_CS2	0xe0000000	</span><span class="cm">/* SLBUS/PCI I/O space */</span><span class="cp"></span>
<span class="cp">#define __region_CS2_M		0x0fffffff </span><span class="cm">/* mask */</span><span class="cp"></span>
<span class="cp">#define __region_CS2_C		0x00000000 </span><span class="cm">/* control */</span><span class="cp"></span>
<span class="cp">#define __region_CS5	0xf0000000	</span><span class="cm">/* MB93493 CSC area (DAV daughter board) */</span><span class="cp"></span>
<span class="cp">#define __region_CS5_M		0x00ffffff</span>
<span class="cp">#define __region_CS5_C		0x00010000</span>
<span class="cp">#define __region_CS7	0xf1000000	</span><span class="cm">/* CB70 CPU-card PCMCIA port I/O space */</span><span class="cp"></span>
<span class="cp">#define __region_CS7_M		0x00ffffff</span>
<span class="cp">#define __region_CS7_C		0x00410701</span>
<span class="cp">#define __region_CS1	0xfc000000	</span><span class="cm">/* SLBUS/PCI bridge control registers */</span><span class="cp"></span>
<span class="cp">#define __region_CS1_M		0x000fffff</span>
<span class="cp">#define __region_CS1_C		0x00000000</span>
<span class="cp">#define __region_CS6	0xfc100000	</span><span class="cm">/* CB70 CPU-card DM9000 LAN I/O space */</span><span class="cp"></span>
<span class="cp">#define __region_CS6_M		0x000fffff</span>
<span class="cp">#define __region_CS6_C		0x00400707</span>
<span class="cp">#define __region_CS3	0xfc200000	</span><span class="cm">/* MB93493 CSR area (DAV daughter board) */</span><span class="cp"></span>
<span class="cp">#define __region_CS3_M		0x000fffff</span>
<span class="cp">#define __region_CS3_C		0xc8100000</span>
<span class="cp">#define __region_CS4	0xfd000000	</span><span class="cm">/* CB70 CPU-card extra flash space */</span><span class="cp"></span>
<span class="cp">#define __region_CS4_M		0x00ffffff</span>
<span class="cp">#define __region_CS4_C		0x00000f07</span>

<span class="cp">#define __region_PCI_IO		(__region_CS2 + 0x04000000UL)</span>
<span class="cp">#define __region_PCI_MEM	(__region_CS2 + 0x08000000UL)</span>
<span class="cp">#define __flush_PCI_writes()						\</span>
<span class="cp">do {									\</span>
<span class="cp">	__builtin_write8((volatile void __iomem *) __region_PCI_MEM, 0);	\</span>
<span class="cp">} while(0)</span>

<span class="cp">#define __is_PCI_IO(addr) \</span>
<span class="cp">	(((unsigned long)(addr) &gt;&gt; 24) - (__region_PCI_IO &gt;&gt; 24)  &lt; (0x04000000UL &gt;&gt; 24))</span>

<span class="cp">#define __is_PCI_MEM(addr) \</span>
<span class="cp">	((unsigned long)(addr) - __region_PCI_MEM &lt; 0x08000000UL)</span>

<span class="cp">#define __is_PCI_addr(addr) \</span>
<span class="cp">	((unsigned long)(addr) - __region_PCI_IO &lt; 0x0c000000UL)</span>

<span class="cp">#define __get_CLKSW()	({ *(volatile unsigned long *)(__region_CS2 + 0x0130000cUL) &amp; 0xffUL; })</span>
<span class="cp">#define __get_CLKIN()	(__get_CLKSW() * 125U * 100000U / 24U)</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">__nongprelbss</span> <span class="n">mb93090_mb00_detected</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#define __addr_LEDS()		(__region_CS2 + 0x01200004UL)</span>
<span class="cp">#ifdef CONFIG_MB93090_MB00</span>
<span class="cp">#define __set_LEDS(X)							\</span>
<span class="cp">do {									\</span>
<span class="cp">	if (mb93090_mb00_detected)					\</span>
<span class="cp">		__builtin_write32((void __iomem *) __addr_LEDS(), ~(X));	\</span>
<span class="cp">} while (0)</span>
<span class="cp">#else</span>
<span class="cp">#define __set_LEDS(X)</span>
<span class="cp">#endif</span>

<span class="cp">#define __addr_LCD()		(__region_CS2 + 0x01200008UL)</span>
<span class="cp">#define __get_LCD(B)		__builtin_read32((volatile void __iomem *) (B))</span>
<span class="cp">#define __set_LCD(B,X)		__builtin_write32((volatile void __iomem *) (B), (X))</span>

<span class="cp">#define LCD_D			0x000000ff		</span><span class="cm">/* LCD data bus */</span><span class="cp"></span>
<span class="cp">#define LCD_RW			0x00000100		</span><span class="cm">/* LCD R/W signal */</span><span class="cp"></span>
<span class="cp">#define LCD_RS			0x00000200		</span><span class="cm">/* LCD Register Select */</span><span class="cp"></span>
<span class="cp">#define LCD_E			0x00000400		</span><span class="cm">/* LCD Start Enable Signal */</span><span class="cp"></span>

<span class="cp">#define LCD_CMD_CLEAR		(LCD_E|0x001)</span>
<span class="cp">#define LCD_CMD_HOME		(LCD_E|0x002)</span>
<span class="cp">#define LCD_CMD_CURSOR_INC	(LCD_E|0x004)</span>
<span class="cp">#define LCD_CMD_SCROLL_INC	(LCD_E|0x005)</span>
<span class="cp">#define LCD_CMD_CURSOR_DEC	(LCD_E|0x006)</span>
<span class="cp">#define LCD_CMD_SCROLL_DEC	(LCD_E|0x007)</span>
<span class="cp">#define LCD_CMD_OFF		(LCD_E|0x008)</span>
<span class="cp">#define LCD_CMD_ON(CRSR,BLINK)	(LCD_E|0x00c|(CRSR&lt;&lt;1)|BLINK)</span>
<span class="cp">#define LCD_CMD_CURSOR_MOVE_L	(LCD_E|0x010)</span>
<span class="cp">#define LCD_CMD_CURSOR_MOVE_R	(LCD_E|0x014)</span>
<span class="cp">#define LCD_CMD_DISPLAY_SHIFT_L	(LCD_E|0x018)</span>
<span class="cp">#define LCD_CMD_DISPLAY_SHIFT_R	(LCD_E|0x01c)</span>
<span class="cp">#define LCD_CMD_FUNCSET(DL,N,F)	(LCD_E|0x020|(DL&lt;&lt;4)|(N&lt;&lt;3)|(F&lt;&lt;2))</span>
<span class="cp">#define LCD_CMD_SET_CG_ADDR(X)	(LCD_E|0x040|X)</span>
<span class="cp">#define LCD_CMD_SET_DD_ADDR(X)	(LCD_E|0x080|X)</span>
<span class="cp">#define LCD_CMD_READ_BUSY	(LCD_E|LCD_RW)</span>
<span class="cp">#define LCD_DATA_WRITE(X)	(LCD_E|LCD_RS|(X))</span>
<span class="cp">#define LCD_DATA_READ		(LCD_E|LCD_RS|LCD_RW)</span>

<span class="cp">#else</span>
<span class="cm">/*</span>
<span class="cm"> * PDK unit specific stuff</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;asm/mb93093-fpga-irqs.h&gt;</span>

<span class="cp">#define IRQ_CPU_MB93493_0	IRQ_CPU_EXTERNAL0</span>
<span class="cp">#define IRQ_CPU_MB93493_1	IRQ_CPU_EXTERNAL1</span>

<span class="cp">#define __region_CS5	0xf0000000	</span><span class="cm">/* MB93493 CSC area (DAV daughter board) */</span><span class="cp"></span>
<span class="cp">#define __region_CS5_M		0x00ffffff </span><span class="cm">/* mask */</span><span class="cp"></span>
<span class="cp">#define __region_CS5_C		0x00010000 </span><span class="cm">/* control */</span><span class="cp"></span>
<span class="cp">#define __region_CS2	0x20000000	</span><span class="cm">/* FPGA registers */</span><span class="cp"></span>
<span class="cp">#define __region_CS2_M		0x000fffff</span>
<span class="cp">#define __region_CS2_C		0x00000000</span>
<span class="cp">#define __region_CS1	0xfc100000	</span><span class="cm">/* LAN registers */</span><span class="cp"></span>
<span class="cp">#define __region_CS1_M		0x000fffff</span>
<span class="cp">#define __region_CS1_C		0x00010404</span>
<span class="cp">#define __region_CS3	0xfc200000	</span><span class="cm">/* MB93493 CSR area (DAV daughter board) */</span><span class="cp"></span>
<span class="cp">#define __region_CS3_M		0x000fffff</span>
<span class="cp">#define __region_CS3_C		0xc8000000</span>
<span class="cp">#define __region_CS4	0xfd000000	</span><span class="cm">/* extra ROMs area */</span><span class="cp"></span>
<span class="cp">#define __region_CS4_M		0x00ffffff</span>
<span class="cp">#define __region_CS4_C		0x00000f07</span>

<span class="cp">#define __region_CS6	0xfe000000	</span><span class="cm">/* not used - hide behind CPU resource I/O regs */</span><span class="cp"></span>
<span class="cp">#define __region_CS6_M		0x000fffff</span>
<span class="cp">#define __region_CS6_C		0x00000f07</span>
<span class="cp">#define __region_CS7	0xfe000000	</span><span class="cm">/* not used - hide behind CPU resource I/O regs */</span><span class="cp"></span>
<span class="cp">#define __region_CS7_M		0x000fffff</span>
<span class="cp">#define __region_CS7_C		0x00000f07</span>

<span class="cp">#define __is_PCI_IO(addr)	0	</span><span class="cm">/* no PCI */</span><span class="cp"></span>
<span class="cp">#define __is_PCI_MEM(addr)	0</span>
<span class="cp">#define __is_PCI_addr(addr)	0</span>
<span class="cp">#define __region_PCI_IO		0</span>
<span class="cp">#define __region_PCI_MEM	0</span>
<span class="cp">#define __flush_PCI_writes()	do { } while(0)</span>

<span class="cp">#define __get_CLKSW()		0UL</span>
<span class="cp">#define __get_CLKIN()		66000000UL</span>

<span class="cp">#define __addr_LEDS()		(__region_CS2 + 0x00000023UL)</span>
<span class="cp">#define __set_LEDS(X)		__builtin_write8((volatile void __iomem *) __addr_LEDS(), (X))</span>

<span class="cp">#define __addr_FPGATR()		(__region_CS2 + 0x00000030UL)</span>
<span class="cp">#define __set_FPGATR(X)		__builtin_write32((volatile void __iomem *) __addr_FPGATR(), (X))</span>
<span class="cp">#define __get_FPGATR()		__builtin_read32((volatile void __iomem *) __addr_FPGATR())</span>

<span class="cp">#define MB93093_FPGA_FPGATR_AUDIO_CLK	0x00000003</span>

<span class="cp">#define __set_FPGATR_AUDIO_CLK(V) \</span>
<span class="cp">	__set_FPGATR((__get_FPGATR() &amp; ~MB93093_FPGA_FPGATR_AUDIO_CLK) | (V))</span>

<span class="cp">#define MB93093_FPGA_FPGATR_AUDIO_CLK_OFF	0x0</span>
<span class="cp">#define MB93093_FPGA_FPGATR_AUDIO_CLK_11MHz	0x1</span>
<span class="cp">#define MB93093_FPGA_FPGATR_AUDIO_CLK_12MHz	0x2</span>
<span class="cp">#define MB93093_FPGA_FPGATR_AUDIO_CLK_02MHz	0x3</span>

<span class="cp">#define MB93093_FPGA_SWR_PUSHSWMASK	(0x1F&lt;&lt;26)</span>
<span class="cp">#define MB93093_FPGA_SWR_PUSHSW4	(1&lt;&lt;29)</span>

<span class="cp">#define __addr_FPGA_SWR		((volatile void __iomem *)(__region_CS2 + 0x28UL))</span>
<span class="cp">#define __get_FPGA_PUSHSW1_5()	(__builtin_read32(__addr_FPGA_SWR) &amp; MB93093_FPGA_SWR_PUSHSWMASK)</span>


<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_MB_REGS_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
