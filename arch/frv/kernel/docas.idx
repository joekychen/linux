f | gdb-stub.c | s | 54K | 1813 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | Makefile | g | 709B |  | Thomas Gleixner | tglx@linutronix.de | 1336215623 |  | frv: Use generic init_task  Same code. Use the generic version. The special Makefile treatment is pointless anyway as init_task.o contains only data which is handled by the linker script. So no point on being treated like head text.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: David Howells <dhowells@redhat.com> Link: http://lkml.kernel.org/r/20120503085034.546687215@linutronix.de
f | frv_ksyms.c | s | 3.0K | 99 | David Howells | dhowells@redhat.com | 1246502289 |  | FRV: Implement atomic64_t  Implement atomic64_t and its ops for FRV.  Tested with the following patch:  	diff --git a/arch/frv/kernel/setup.c b/arch/frv/kernel/setup.c 	index 55e4fab..086d50d 100644 	--- a/arch/frv/kernel/setup.c 	+++ b/arch/frv/kernel/setup.c 	@@ -746,6 +746,52 @@ static void __init parse_cmdline_early(char *cmdline)  	 } /* end parse_cmdline_early() */  	+static atomic64_t xxx; 	+ 	+static void test_atomic64(void) 	+{ 	+	atomic64_set(&xxx, 0x12300000023LL); 	+ 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != 0x12300000023LL); 	+	mb(); 	+	if (atomic64_inc_return(&xxx) != 0x12300000024LL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != 0x12300000024LL); 	+	mb(); 	+	if (atomic64_sub_return(0x36900000050LL, &xxx) != -0x2460000002cLL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != -0x2460000002cLL); 	+	mb(); 	+	if (atomic64_dec_return(&xxx) != -0x2460000002dLL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != -0x2460000002dLL); 	+	mb(); 	+	if (atomic64_add_return(0x36800000001LL, &xxx) != 0x121ffffffd4LL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != 0x121ffffffd4LL); 	+	mb(); 	+	if (atomic64_cmpxchg(&xxx, 0x123456789abcdefLL, 0x121ffffffd4LL) != 0x121ffffffd4LL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != 0x121ffffffd4LL); 	+	mb(); 	+	if (atomic64_cmpxchg(&xxx, 0x121ffffffd4LL, 0x123456789abcdefLL) != 0x121ffffffd4LL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != 0x123456789abcdefLL); 	+	mb(); 	+	if (atomic64_xchg(&xxx, 0xabcdef123456789LL) != 0x123456789abcdefLL) 	+		BUG(); 	+	mb(); 	+	BUG_ON(atomic64_read(&xxx) != 0xabcdef123456789LL); 	+	mb(); 	+} 	+ 	 /*****************************************************************************/ 	 /* 	  * 	@@ -845,6 +891,8 @@ void __init setup_arch(char **cmdline_p) 	 //	asm volatile("movgs %0,timerd" :: "r"(10000000)); 	 //	__set_HSR(0, __get_HSR(0) || HSR0_ETMD);  	+	test_atomic64(); 	+ 	 } /* end setup_arch() */  	 #if 0  Note that this doesn't cover all the trivial wrappers, but does cover all the substantial implementations.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cmode.S | g | 4.6K |  | David Woodhouse | dwmw2@infradead.org | 1212776950 |  | Fix various old email addresses for dwmw2  Although if people have questions about ARCnet, perhaps it's _better_ for them to be mailing dwmw2@cam.ac.uk about it...  Signed-off-by: David Woodhouse <dwmw2@infradead.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sys_frv.c | s | 1.3K | 39 | Christoph Hellwig | hch@lst.de | 1268437952 |  | Add generic sys_ipc wrapper  Add a generic implementation of the ipc demultiplexer syscall.  Except for s390 and sparc64 all implementations of the sys_ipc are nearly identical.  There are slight differences in the types of the parameters, where mips and powerpc as the only 64-bit architectures with sys_ipc use unsigned long for the "third" argument as it gets casted to a pointer later, while it traditionally is an "int" like most other paramters.  frv goes even further and uses unsigned long for all parameters execept for "ptr" which is a pointer type everywhere.  The change from int to unsigned long for "third" and back to "int" for the others on frv should be fine due to the in-register calling conventions for syscalls (we already had a similar issue with the generic sys_ptrace), but I'd prefer to have the arch maintainers looks over this in details.  Except for that h8300, m68k and m68knommu lack an impplementation of the semtimedop sub call which this patch adds, and various architectures have gets used - at least on i386 it seems superflous as the compat code on x86-64 and ia64 doesn't even bother to implement it.  [akpm@linux-foundation.org: add sys_ipc to sys_ni.c] Signed-off-by: Christoph Hellwig <hch@lst.de> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Jeff Dike <jdike@addtoit.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Ingo Molnar <mingo@elte.hu> Reviewed-by: H. Peter Anvin <hpa@zytor.com> Cc: Al Viro <viro@zeniv.linux.org.uk> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: "Luck, Tony" <tony.luck@intel.com> Cc: James Morris <jmorris@namei.org> Cc: Andreas Schwab <schwab@linux-m68k.org> Acked-by: Jesper Nilsson <jesper.nilsson@axis.com> Acked-by: Russell King <rmk+kernel@arm.linux.org.uk> Acked-by: David Howells <dhowells@redhat.com> Acked-by: Kyle McMartin <kyle@mcmartin.ca> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | time.c | s | 3.1K | 100 | Torben Hohn | torbenh@gmx.de | 1296482145 |  | frv: Switch do_timer() to xtime_update()  __set_LEDS() does not need to be protected by xtime_lock. its used unprotected in other places.  [ tglx: Removed stale comment ]  Signed-off-by: Torben Hohn <torbenh@gmx.de> Cc: hch@infradead.org Cc: Peter Zijlstra <peterz@infradead.org> Cc: johnstul@us.ibm.com Cc: David Howells <dhowells@redhat.com> Cc: yong.zhang0@gmail.com LKML-Reference: <20110127145946.23248.57952.stgit@localhost> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | pm.c | s | 6.2K | 280 | Eric W. Biederman | ebiederm@xmission.com | 1258562260 |  | sysctl: Drop & in front of every proc_handler.  For consistency drop & in front of every proc_handler.  Explicity taking the address is unnecessary and it prevents optimizations like stubbing the proc_handlers to NULL.  Cc: Alexey Dobriyan <adobriyan@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Joe Perches <joe@perches.com> Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
f | head.S | g | 15K |  | Denys Vlasenko | vda.linux@googlemail.com | 1267611961 |  | Rename special text sections in arch/frv from .text.XXX to .text..XXX.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | vmlinux.lds.S | g | 2.3K |  | Tejun Heo | tj@kernel.org | 1300989009 |  | percpu: Always align percpu output section to PAGE_SIZE  Percpu allocator honors alignment request upto PAGE_SIZE and both the percpu addresses in the percpu address space and the translated kernel addresses should be aligned accordingly.  The calculation of the former depends on the alignment of percpu output section in the kernel image.  The linker script macros PERCPU_VADDR() and PERCPU() are used to define this output section and the latter takes @align parameter. Several architectures are using @align smaller than PAGE_SIZE breaking percpu memory alignment.  This patch removes @align parameter from PERCPU(), renames it to PERCPU_SECTION() and makes it always align to PAGE_SIZE.  While at it, add PCPU_SETUP_BUG_ON() checks such that alignment problems are reliably detected and remove percpu alignment comment recently added in workqueue.c as the condition would trigger BUG way before reaching there.  For um, this patch raises the alignment of percpu area.  As the area is in .init, there shouldn't be any noticeable difference.  This problem was discovered by David Howells while debugging boot failure on mn10300.  Signed-off-by: Tejun Heo <tj@kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: uclinux-dist-devel@blackfin.uclinux.org Cc: David Howells <dhowells@redhat.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: user-mode-linux-devel@lists.sourceforge.net
f | asm-offsets.c | s | 3.5K | 96 | Christoph Lameter | clameter@sgi.com | 1209481590 |  | frv: use kbuild.h instead of defining macros in asm-offsets.c  Signed-off-by: Christoph Lameter <clameter@sgi.com> Cc: David Howells <dhowells@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dma.c | s | 11K | 376 | David Howells | dhowells@redhat.com | 1160057412 |  | IRQ: Maintain regs pointer globally rather than passing to IRQ handlers  Maintain a per-CPU global "struct pt_regs *" variable which can be used instead of passing regs around manually through all ~1800 interrupt handlers in the Linux kernel.  The regs pointer is used in few places, but it potentially costs both stack space and code to pass it around.  On the FRV arch, removing the regs parameter from all the genirq function results in a 20% speed up of the IRQ exit path (ie: from leaving timer_interrupt() to leaving do_IRQ()).  Where appropriate, an arch may override the generic storage facility and do something different with the variable.  On FRV, for instance, the address is maintained in GR28 at all times inside the kernel as part of general exception handling.  Having looked over the code, it appears that the parameter may be handed down through up to twenty or so layers of functions.  Consider a USB character device attached to a USB hub, attached to a USB controller that posts its interrupts through a cascaded auxiliary interrupt controller.  A character device driver may want to pass regs to the sysrq handler through the input layer which adds another few layers of parameter passing.  I've build this code with allyesconfig for x86_64 and i386.  I've runtested the main part of the code on FRV and i386, though I can't test most of the drivers. I've also done partial conversion for powerpc and MIPS - these at least compile with minimal configurations.  This will affect all archs.  Mostly the changes should be relatively easy. Take do_IRQ(), store the regs pointer at the beginning, saving the old one:  	struct pt_regs *old_regs = set_irq_regs(regs);  And put the old one back at the end:  	set_irq_regs(old_regs);  Don't pass regs through to generic_handle_irq() or __do_IRQ().  In timer_interrupt(), this sort of change will be necessary:  	-	update_process_times(user_mode(regs)); 	-	profile_tick(CPU_PROFILING, regs); 	+	update_process_times(user_mode(get_irq_regs())); 	+	profile_tick(CPU_PROFILING);  I'd like to move update_process_times()'s use of get_irq_regs() into itself, except that i386, alone of the archs, uses something other than user_mode().  Some notes on the interrupt handling in the drivers:   (*) input_dev() is now gone entirely.  The regs pointer is no longer stored in      the input_dev struct.   (*) finish_unlinks() in drivers/usb/host/ohci-q.c needs checking.  It does      something different depending on whether it's been supplied with a regs      pointer or not.   (*) Various IRQ handler function pointers have been moved to type      irq_handler_t.  Signed-Off-By: David Howells <dhowells@redhat.com> (cherry picked from 1b16e7ac850969f38b375e511e3fa2f474a33867 commit)
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | ptrace.c | s | 8.9K | 324 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | traps.c | s | 14K | 540 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | uaccess.c | s | 2.1K | 79 | Stoyan Gaydarov | stoyboyker@gmail.com | 1244736086 |  | FRV: BUG to BUG_ON changes  Change some BUG()'s to BUG_ON()'s.  Signed-off-by: Stoyan Gaydarov <stoyboyker@gmail.com> Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gdb-io.h | s | 1.9K | 48 | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | gdb-io.c | s | 4.8K | 178 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | entry-table.S | g | 9.8K |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | head-uc-fr555.S | g | 9.1K |  | Tim Abbott | tabbott@MIT.EDU | 1240886790 |  | FRV: Use __INIT macro instead of .text.init.  FRV is placing some code in the .text.init section but does not reference that section in its linker scripts.  This change moves this code from the .text.init section to the .init.text section, which is presumably where it belongs.  Signed-off-by: Tim Abbott <tabbott@mit.edu> Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | head.inc | g | 1.1K |  | David Howells | dhowells@redhat.com | 1207860089 |  | FRV: Make NOMMU-mode work with base addresses other than 0xC0000000 [try #2]  Make NOMMU-mode work with base addresses other than 0xC0000000 by:   (1) Giving the code that sets up the protection registers the right address      in __sdram_base.  Rather than being hard coded to 0xC0000000, the value      of __page_offset is obtained from the linker script.   (2) Eliminate the check in __switch_to() that verifies the current thread      info is in the 0xCxxxxxxx region.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sysctl.c | s | 4.4K | 182 | Jan Blunck | jblunck@suse.de | 1274976776 |  | frv: remove "struct file *" argument from sysctl ->proc_handler  Signed-off-by: Jan Blunck <jblunck@suse.de> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: David Howells <dhowells@redhat.com> Cc: Alexey Dobriyan <adobriyan@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | debug-stub.c | s | 6.0K | 211 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | futex.c | s | 6.6K | 217 | Michel Lespinasse | walken@google.com | 1299842611 |  | futex: Sanitize futex ops argument types  Change futex_atomic_op_inuser and futex_atomic_cmpxchg_inatomic prototypes to use u32 types for the futex as this is the data type the futex core code uses all over the place.  Signed-off-by: Michel Lespinasse <walken@google.com> Cc: Darren Hart <darren@dvhart.com> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Matt Turner <mattst88@gmail.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: David Howells <dhowells@redhat.com> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <20110311025058.GD26122@google.com> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | kernel_thread.S | g | 2.0K |  | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | irq.c | s | 3.8K | 137 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | head-uc-fr401.S | g | 8.6K |  | Tim Abbott | tabbott@MIT.EDU | 1240886790 |  | FRV: Use __INIT macro instead of .text.init.  FRV is placing some code in the .text.init section but does not reference that section in its linker scripts.  This change moves this code from the .text.init section to the .init.text section, which is presumably where it belongs.  Signed-off-by: Tim Abbott <tabbott@mit.edu> Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | switch_to.S | g | 12K |  | David Howells | dhowells@redhat.com | 1207860089 |  | FRV: Make NOMMU-mode work with base addresses other than 0xC0000000 [try #2]  Make NOMMU-mode work with base addresses other than 0xC0000000 by:   (1) Giving the code that sets up the protection registers the right address      in __sdram_base.  Rather than being hard coded to 0xC0000000, the value      of __page_offset is obtained from the linker script.   (2) Eliminate the check in __switch_to() that verifies the current thread      info is in the 0xCxxxxxxx region.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sleep.S | g | 9.6K |  | David Woodhouse | dwmw2@infradead.org | 1212776950 |  | Fix various old email addresses for dwmw2  Although if people have questions about ARCnet, perhaps it's _better_ for them to be mailing dwmw2@cam.ac.uk about it...  Signed-off-by: David Woodhouse <dwmw2@infradead.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | irq-mb93093.c | s | 2.9K | 105 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | module.c | s | 845B | 25 | Jonas Bonn | jonas@southpole.se | 1311510964 |  | modules: make arch's use default loader hooks  This patch removes all the module loader hook implementations in the architecture specific code where the functionality is the same as that now provided by the recently added default hooks.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Acked-by: Mike Frysinger <vapier@gentoo.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Tested-by: Michal Simek <monstr@monstr.eu> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | kernel_execve.S | g | 1.0K |  | Arnd Bergmann | arnd@arndb.de | 1159801043 |  | [PATCH] provide kernel_execve on all architectures  This adds the new kernel_execve function on all architectures that were using _syscall3() to implement execve.  The implementation uses code from the _syscall3 macros provided in the unistd.h header file.  I don't have cross-compilers for any of these architectures, so the patch is untested with the exception of i386.  Most architectures can probably implement this in a nicer way in assembly or by combining it with the sys_execve implementation itself, but this should do it for now.  [bunk@stusta.de: m68knommu build fix] [markh@osdl.org: build fix] [bero@arklinux.org: build fix] [ralf@linux-mips.org: mips fix] [schwidefsky@de.ibm.com: s390 fix] Signed-off-by: Arnd Bergmann <arnd@arndb.de> Cc: Andi Kleen <ak@muc.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Russell King <rmk@arm.linux.org.uk> Cc: Ian Molton <spyro@f2s.com> Cc: Mikael Starvik <starvik@axis.com> Cc: David Howells <dhowells@redhat.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Hirokazu Takata <takata.hirokazu@renesas.com> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp> Cc: Richard Curnow <rc@rc0.org.uk> Cc: William Lee Irwin III <wli@holomorphy.com> Cc: "David S. Miller" <davem@davemloft.net> Cc: Jeff Dike <jdike@addtoit.com> Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it> Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp> Cc: Chris Zankel <chris@zankel.net> Cc: "Luck, Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Roman Zippel <zippel@linux-m68k.org> Signed-off-by: Ralf Baechle <ralf@linux-mips.org> Signed-off-by: Bernhard Rosenkraenzer <bero@arklinux.org> Signed-off-by: Mark Haverkamp <markh@osdl.org> Signed-off-by: Adrian Bunk <bunk@stusta.de> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | local.h | s | 1.7K | 46 | David Howells | dhowells@redhat.com | 1152563061 |  | [PATCH] FRV: Fix FRV arch compile errors  Fix some FRV arch compile errors, including:   (*) Marking nr_kernel_pages as __meminitdata so that references to it end up      being properly calculated rather than being assumed to be in the small      data section (and thus calculated wrt the GP register).  Not doing this      causes the linker to emit errors as the offset is too big to fit into the      load instruction.   (*) Move pm_power_off into an unconditionally compiled .c file as it's now      unconditionally accessed.   (*) Declare frv_change_cmode() in a header file rather than in a .c file, and      declare it asmlinkage.  Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Andrew Morton <akpm@osdl.org> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
f | process.c | s | 7.6K | 297 | Linus Torvalds | torvalds@linux-foundation.org | 1337795947 |  | Merge branch 'x86-fpu-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip  Pull fpu state cleanups from Ingo Molnar:  "This tree streamlines further aspects of FPU handling by eliminating   the prepare_to_copy() complication and moving that logic to   arch_dup_task_struct().    It also fixes the FPU dumps in threaded core dumps, removes and old   (and now invalid) assumption plus micro-optimizes the exit path by   avoiding an FPU save for dead tasks."  Fixed up trivial add-add conflict in arch/sh/kernel/process.c that came in because we now do the FPU handling in arch_dup_task_struct() rather than the legacy (and now gone) prepare_to_copy().  * 'x86-fpu-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:   x86, fpu: drop the fpu state during thread exit   x86, xsave: remove thread_has_fpu() bug check in __sanitize_i387_state()   coredump: ensure the fpu state is flushed for proper multi-threaded core dump   fork: move the real prepare_to_copy() users to arch_dup_task_struct()
f | irq-mb93493.c | s | 3.5K | 125 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | setup.c | s | 31K | 999 | Sam Ravnborg | sam@ravnborg.org | 1260619695 |  | kbuild: move utsrelease.h to include/generated  Fix up all users of utsrelease.h  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | head-mmu-fr451.S | g | 10K |  | Tim Abbott | tabbott@MIT.EDU | 1240886790 |  | FRV: Use __INIT macro instead of .text.init.  FRV is placing some code in the .text.init section but does not reference that section in its linker scripts.  This change moves this code from the .text.init section to the .init.text section, which is presumably where it belongs.  Signed-off-by: Tim Abbott <tabbott@mit.edu> Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | signal.c | s | 13K | 434 | Geert Uytterhoeven | geert@linux-m68k.org | 1338647899 |  | frv: Remove bogus closing parenthesis  Introduced by commit 6fd84c0831ec78d98736b76dc5e9b849f1dbfc9e ("TIF_RESTORE_SIGMASK can be set only when TIF_SIGPENDING is set")  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | entry.S | g | 40K |  | David Howells | dhowells@redhat.com | 1338569978 |  | FRV: Optimise the system call exit path in entry.S [ver #2]  Optimise the system call exit path in entry.S by packing some instructions.  Suggested-by: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: David Howells <dhowells@redhat.com> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | irq-mb93091.c | s | 3.6K | 129 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for FRV  Disintegrate asm/system.h for FRV.  Signed-off-by: David Howells <dhowells@redhat.com>
f | break.S | g | 20K |  | Denys Vlasenko | vda.linux@googlemail.com | 1267611961 |  | Rename special text sections in arch/frv from .text.XXX to .text..XXX.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | head-uc-fr451.S | g | 4.0K |  | Tim Abbott | tabbott@MIT.EDU | 1240886790 |  | FRV: Use __INIT macro instead of .text.init.  FRV is placing some code in the .text.init section but does not reference that section in its linker scripts.  This change moves this code from the .text.init section to the .init.text section, which is presumably where it belongs.  Signed-off-by: Tim Abbott <tabbott@mit.edu> Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pm-mb93093.c | s | 1.4K | 56 | Jörn Engel | joern@wohnheim.fh-wedel.de | 1151688336 |  | Remove obsolete #include <linux/config.h>  Signed-off-by: Jörn Engel <joern@wohnheim.fh-wedel.de> Signed-off-by: Adrian Bunk <bunk@stusta.de>
