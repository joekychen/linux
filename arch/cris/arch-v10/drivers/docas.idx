f | sync_serial.c | s | 43K | 1330 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for CRIS  Disintegrate asm/system.h for CRIS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Jesper Nilsson <jesper.nilsson@axis.com> cc: linux-cris-kernel@axis.com
f | gpio.c | s | 21K | 739 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for CRIS  Disintegrate asm/system.h for CRIS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Jesper Nilsson <jesper.nilsson@axis.com> cc: linux-cris-kernel@axis.com
f | Makefile | g | 348B |  | Jesper Nilsson | jesper.nilsson@axis.com | 1202465191 |  | CRIS v10: Add synchronous serial port driver for CRIS v10.
f | eeprom.c | s | 21K | 736 | Jesper Nilsson | jesper.nilsson@axis.com | 1280919546 |  | cris: autoconvert trivial BKL users to private mutex  All these files use the big kernel lock in a trivial way to serialize their private file operations, typically resulting from an earlier semi-automatic pushdown from VFS.  None of these drivers appears to want to lock against other code, and they all use the BKL as the top-level lock in their file operations, meaning that there is no lock-order inversion problem.  Consequently, we can remove the BKL completely, replacing it with a per-file mutex in every case. Using a scripted approach means we can avoid typos.  file=$1 name=$2 if grep -q lock_kernel ${file} ; then     if grep -q 'include.*linux.mutex.h' ${file} ; then             sed -i '/include.*<linux\/smp_lock.h>/d' ${file}     else             sed -i 's/include.*<linux\/smp_lock.h>.*$/include <linux\/mutex.h>/g' ${file}     fi     sed -i ${file} \         -e "/^#include.*linux.mutex.h/,$ {                 1,/^\(static\||int\||long\)/ {                      /^\(static\||int\||long\)/istatic DEFINE_MUTEX(${name}_mutex);  } }"  \     -e "s/\(un\)*lock_kernel\>[ ]*()/mutex_\1lock(\&${name}_mutex)/g" \     -e '/[      ]*cycle_kernel_lock();/d' else     sed -i -e '/include.*\<smp_lock.h\>/d' ${file}  \                 -e '/cycle_kernel_lock()/d' fi  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Jesper Nilsson <jesper.nilsson@axis.com>
f | Kconfig | g | 21K |  | David S. Miller | davem@davemloft.net | 1320884813 |  | net: Fix references to deleted NET_ETHERNET Kconfig setting.  Change them over to plain "ETHERNET"  Reported-by: Paul Bolle <pebolle@tiscali.nl> Signed-off-by: David S. Miller <davem@davemloft.net> Acked-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | axisflashmap.c | s | 11K | 380 | Jamie Iles | jamie@jamieiles.com | 1306286467 |  | mtd: cris: convert to mtd_device_register()  Convert to mtd_device_register() and remove the CONFIG_MTD_PARTITIONS preprocessor conditionals as partitioning is always available.  Cc: Mikael Starvik <starvik@axis.com> Cc: Jesper Nilsson <jesper.nilsson@axis.com> Signed-off-by: Jamie Iles <jamie@jamieiles.com> Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com> Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
f | i2c.c | s | 13K | 599 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for CRIS  Disintegrate asm/system.h for CRIS.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Jesper Nilsson <jesper.nilsson@axis.com> cc: linux-cris-kernel@axis.com
f | i2c.h | s | 403B | 12 | Jesper Nilsson | jesper.nilsson@axis.com | 1280919581 |  | CRIS: Remove CVS tag.  Signed-off-by: Jesper Nilsson <jesper.nilsson@axis.com>
