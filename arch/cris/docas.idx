d | include |  | 3 items |  | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
d | kernel |  | 13 items |  | Linus Torvalds | torvalds@linux-foundation.org | 1338515250 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/signal  Pull second pile of signal handling patches from Al Viro:  "This one is just task_work_add() series + remaining prereqs for it.    There probably will be another pull request from that tree this   cycle - at least for helpers, to get them out of the way for per-arch   fixes remaining in the tree."  Fix trivial conflict in kernel/irq/manage.c: the merge of Andrew's pile had brought in commit 97fd75b7b8e0 ("kernel/irq/manage.c: use the pr_foo() infrastructure to prefix printks") which changed one of the pr_err() calls that this merge moves around.  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/signal:   keys: kill task_struct->replacement_session_keyring   keys: kill the dummy key_replace_session_keyring()   keys: change keyctl_session_to_parent() to use task_work_add()   genirq: reimplement exit_irq_thread() hook via task_work_add()   task_work_add: generic process-context callbacks   avr32: missed _TIF_NOTIFY_RESUME on one of do_notify_resume callers   parisc: need to check NOTIFY_RESUME when exiting from syscall   move key_repace_session_keyring() into tracehook_notify_resume()   TIF_NOTIFY_RESUME is defined on all targets now
d | boot |  | 5 items |  | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | Makefile | g | 2.4K |  | Sam Ravnborg | sam@ravnborg.org | 1253442502 |  | arm, cris, mips, sparc, powerpc, um, xtensa: fix build with bash 4.0  Albin Tonnerre <albin.tonnerre@free-electrons.com> reported:      Bash 4 filters out variables which contain a dot in them.     This happends to be the case of CPPFLAGS_vmlinux.lds.     This is rather unfortunate, as it now causes     build failures when using SHELL=/bin/bash to compile,     or when bash happens to be used by make (eg when it's /bin/sh)  Remove the common definition of CPPFLAGS_vmlinux.lds by pushing relevant stuff to either Makefile.build or the arch specific kernel/Makefile where we build the linker script.  This is also nice cleanup as we move the information out where it is used.  Notes for the different architectures touched:  arm - we use an already exported symbol cris - we use a config symbol aleady available        [Not build tested] mips - the jiffies complexity has moved to vmlinux.lds.S where we need it.        Added a few variables to CPPFLAGS - they are only used by        the linker script.        [Not build tested] powerpc - removed assignment that is not needed           [not build tested] sparc - simplified it using $(BITS) um - introduced a few new exported variables to deal with this xtensa - added options to CPP invocation          [not build tested]  Cc: Albin Tonnerre <albin.tonnerre@free-electrons.com> Cc: Russell King <linux@arm.linux.org.uk> Cc: Mikael Starvik <starvik@axis.com> Cc: Jesper Nilsson <jesper.nilsson@axis.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Jeff Dike <jdike@addtoit.com> Cc: Chris Zankel <chris@zankel.net> Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
d | arch-v10 |  | 7 items |  | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
d | mm |  | 5 items |  | Kautuk Consul | consul.kautuk@gmail.com | 1333554630 |  | cris/mm/fault.c: Port OOM changes to do_page_fault  Commit d065bd810b6deb67d4897a14bfe21f8eb526ba99 (mm: retry page fault when blocking on disk transfer) and commit 37b23e0525d393d48a7d59f870b3bc061a30ccdb (x86,mm: make pagefault killable)  The above commits introduced changes into the x86 pagefault handler for making the page fault handler retryable as well as killable.  These changes reduce the mmap_sem hold time, which is crucial during OOM killer invocation.  Port these changes to CRIS.  Signed-off-by: Kautuk Consul <consul.kautuk@gmail.com> Signed-off-by: Jesper Nilsson <jesper.nilsson@axis.com>
f | Kconfig | g | 16K |  | Cong Wang | xiyou.wangcong@gmail.com | 1338333738 |  | cris: select GENERIC_ATOMIC64  Cris doesn't implement atomic64 operations neither, should select GENERIC_ATOMIC64.  Signed-off-by: WANG Cong <xiyou.wangcong@gmail.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Jesper Nilsson <jesper.nilsson@axis.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | Kconfig.debug | g | 1.2K |  | Paul Bolle | pebolle@tiscali.nl | 1320055128 |  | Kconfig: remove a few puzzling comments  These comments mention CONFIG options that do not exist: not as a symbol in a Kconfig file (without the CONFIG_ prefix) and neither as a symbol (with that prefix) in the code.  There's one reference to XSCALE_PMU_TIMER as a negative dependency. But XSCALE_PMU_TIMER is never defined (CONFIG_XSCALE_PMU_TIMER is also unused in the code). It shows up with type "unknown" if you search for it in menuconfig. Apparently a negative dependency on an unknown symbol is always true. That negative dependency can be removed too.  Signed-off-by: Paul Bolle <pebolle@tiscali.nl> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
d | arch-v32 |  | 8 items |  | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
d | configs |  | 4 items |  | David Rientjes | rientjes@google.com | 1295571725 |  | kconfig: rename CONFIG_EMBEDDED to CONFIG_EXPERT  The meaning of CONFIG_EMBEDDED has long since been obsoleted; the option is used to configure any non-standard kernel with a much larger scope than only small devices.  This patch renames the option to CONFIG_EXPERT in init/Kconfig and fixes references to the option throughout the kernel.  A new CONFIG_EMBEDDED option is added that automatically selects CONFIG_EXPERT when enabled and can be used in the future to isolate options that should only be considered for embedded systems (RISC architectures, SLOB, etc).  Calling the option "EXPERT" more accurately represents its intention: only expert users who understand the impact of the configuration changes they are making should enable it.  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: David Woodhouse <david.woodhouse@intel.com> Signed-off-by: David Rientjes <rientjes@google.com> Cc: Greg KH <gregkh@suse.de> Cc: "David S. Miller" <davem@davemloft.net> Cc: Jens Axboe <axboe@kernel.dk> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Robin Holt <holt@sgi.com> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
