<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › cris › include › arch-v32 › arch › elf.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>elf.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _ASM_CRIS_ELF_H</span>
<span class="cp">#define _ASM_CRIS_ELF_H</span>

<span class="cp">#include &lt;arch/system.h&gt;</span>

<span class="cp">#define ELF_CORE_EFLAGS EF_CRIS_VARIANT_V32</span>

<span class="cm">/*</span>
<span class="cm"> * This is used to ensure we don&#39;t load something for the wrong architecture.</span>
<span class="cm"> */</span>
<span class="cp">#define elf_check_arch(x)			\</span>
<span class="cp"> ((x)-&gt;e_machine == EM_CRIS			\</span>
<span class="cp">  &amp;&amp; ((((x)-&gt;e_flags &amp; EF_CRIS_VARIANT_MASK) == EF_CRIS_VARIANT_V32	\</span>
<span class="cp">      || (((x)-&gt;e_flags &amp; EF_CRIS_VARIANT_MASK) == EF_CRIS_VARIANT_COMMON_V10_V32))))</span>

<span class="cm">/* CRISv32 ELF register definitions. */</span>

<span class="cp">#include &lt;asm/ptrace.h&gt;</span>

<span class="cm">/* Explicitly zero out registers to increase determinism. */</span>
<span class="cp">#define ELF_PLAT_INIT(_r, load_addr)    do { \</span>
<span class="cp">        (_r)-&gt;r13 = 0; (_r)-&gt;r12 = 0; (_r)-&gt;r11 = 0; (_r)-&gt;r10 = 0; \</span>
<span class="cp">        (_r)-&gt;r9 = 0;  (_r)-&gt;r8 = 0;  (_r)-&gt;r7 = 0;  (_r)-&gt;r6 = 0;  \</span>
<span class="cp">        (_r)-&gt;r5 = 0;  (_r)-&gt;r4 = 0;  (_r)-&gt;r3 = 0;  (_r)-&gt;r2 = 0;  \</span>
<span class="cp">        (_r)-&gt;r1 = 0;  (_r)-&gt;r0 = 0;  (_r)-&gt;mof = 0; (_r)-&gt;srp = 0; \</span>
<span class="cp">        (_r)-&gt;acr = 0; \</span>
<span class="cp">} while (0)</span>

<span class="cm">/*</span>
<span class="cm"> * An executable for which elf_read_implies_exec() returns TRUE will</span>
<span class="cm"> * have the READ_IMPLIES_EXEC personality flag set automatically.</span>
<span class="cm"> */</span>
<span class="cp">#define elf_read_implies_exec_binary(ex, have_pt_gnu_stack)	(!(have_pt_gnu_stack))</span>

<span class="cm">/*</span>
<span class="cm"> * This is basically a pt_regs with the additional definition</span>
<span class="cm"> * of the stack pointer since it&#39;s needed in a core dump.</span>
<span class="cm"> * pr_regs is a elf_gregset_t and should be filled according</span>
<span class="cm"> * to the layout of user_regs_struct.</span>
<span class="cm"> */</span>
<span class="cp">#define ELF_CORE_COPY_REGS(pr_reg, regs)                   \</span>
<span class="cp">        pr_reg[0] = regs-&gt;r0;                              \</span>
<span class="cp">        pr_reg[1] = regs-&gt;r1;                              \</span>
<span class="cp">        pr_reg[2] = regs-&gt;r2;                              \</span>
<span class="cp">        pr_reg[3] = regs-&gt;r3;                              \</span>
<span class="cp">        pr_reg[4] = regs-&gt;r4;                              \</span>
<span class="cp">        pr_reg[5] = regs-&gt;r5;                              \</span>
<span class="cp">        pr_reg[6] = regs-&gt;r6;                              \</span>
<span class="cp">        pr_reg[7] = regs-&gt;r7;                              \</span>
<span class="cp">        pr_reg[8] = regs-&gt;r8;                              \</span>
<span class="cp">        pr_reg[9] = regs-&gt;r9;                              \</span>
<span class="cp">        pr_reg[10] = regs-&gt;r10;                            \</span>
<span class="cp">        pr_reg[11] = regs-&gt;r11;                            \</span>
<span class="cp">        pr_reg[12] = regs-&gt;r12;                            \</span>
<span class="cp">        pr_reg[13] = regs-&gt;r13;                            \</span>
<span class="cp">        pr_reg[14] = rdusp();               </span><span class="cm">/* SP */</span><span class="cp">       \</span>
<span class="cp">        pr_reg[15] = regs-&gt;acr;             </span><span class="cm">/* ACR */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[16] = 0;                     </span><span class="cm">/* BZ */</span><span class="cp">       \</span>
<span class="cp">        pr_reg[17] = rdvr();                </span><span class="cm">/* VR */</span><span class="cp">       \</span>
<span class="cp">        pr_reg[18] = 0;                     </span><span class="cm">/* PID */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[19] = regs-&gt;srs;             </span><span class="cm">/* SRS */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[20] = 0;                     </span><span class="cm">/* WZ */</span><span class="cp">       \</span>
<span class="cp">        pr_reg[21] = regs-&gt;exs;             </span><span class="cm">/* EXS */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[22] = regs-&gt;eda;             </span><span class="cm">/* EDA */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[23] = regs-&gt;mof;             </span><span class="cm">/* MOF */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[24] = 0;                     </span><span class="cm">/* DZ */</span><span class="cp">       \</span>
<span class="cp">        pr_reg[25] = 0;                     </span><span class="cm">/* EBP */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[26] = regs-&gt;erp;             </span><span class="cm">/* ERP */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[27] = regs-&gt;srp;             </span><span class="cm">/* SRP */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[28] = 0;                     </span><span class="cm">/* NRP */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[29] = regs-&gt;ccs;             </span><span class="cm">/* CCS */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[30] = rdusp();               </span><span class="cm">/* USP */</span><span class="cp">      \</span>
<span class="cp">        pr_reg[31] = regs-&gt;spc;             </span><span class="cm">/* SPC */</span><span class="cp">      \</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_CRIS_ELF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
