<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › cris › include › arch-v10 › arch › sv_addr_ag.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>sv_addr_ag.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*!**************************************************************************</span>
<span class="cm">*!                                                            </span>
<span class="cm">*! MACROS:</span>
<span class="cm">*!   IO_MASK(reg,field)</span>
<span class="cm">*!   IO_STATE(reg,field,state)</span>
<span class="cm">*!   IO_EXTRACT(reg,field,val)</span>
<span class="cm">*!   IO_STATE_VALUE(reg,field,state)</span>
<span class="cm">*!   IO_BITNR(reg,field)</span>
<span class="cm">*!   IO_WIDTH(reg,field)</span>
<span class="cm">*!   IO_FIELD(reg,field,val)</span>
<span class="cm">*!   IO_RD(reg)</span>
<span class="cm">*!   All moderegister addresses and fields of these.</span>
<span class="cm">*!</span>
<span class="cm">*!**************************************************************************/</span>

<span class="cp">#ifndef __sv_addr_ag_h__</span>
<span class="cp">#define __sv_addr_ag_h__</span>


<span class="cp">#define __test_sv_addr__ 0</span>

<span class="cm">/*------------------------------------------------------------</span>
<span class="cm">!* General macros to manipulate moderegisters.</span>
<span class="cm">!*-----------------------------------------------------------*/</span>

<span class="cm">/* IO_MASK returns a mask for a specified bitfield in a register.</span>
<span class="cm">   Note that this macro doesn&#39;t work when field width is 32 bits. */</span>
<span class="cp">#define IO_MASK(reg, field) IO_MASK_ (reg##_, field##_)</span>
<span class="cp">#define IO_MASK_(reg_, field_) \</span>
<span class="cp">    ( ( ( 1 &lt;&lt; reg_##_##field_##_WIDTH ) - 1 ) &lt;&lt; reg_##_##field_##_BITNR )</span>

<span class="cm">/* IO_STATE returns a constant corresponding to a one of the symbolic</span>
<span class="cm">   states that the bitfield can have. (Shifted to correct position)  */</span>
<span class="cp">#define IO_STATE(reg, field, state) IO_STATE_ (reg##_, field##_, _##state)</span>
<span class="cp">#define IO_STATE_(reg_, field_, _state) \</span>
<span class="cp">    ( reg_##_##field_##_state &lt;&lt; reg_##_##field_##_BITNR )</span>

<span class="cm">/* IO_EXTRACT returns the masked and shifted value corresponding to the</span>
<span class="cm">   bitfield can have. */</span>
<span class="cp">#define IO_EXTRACT(reg, field, val) IO_EXTRACT_ (reg##_, field##_, val)</span>
<span class="cp">#define IO_EXTRACT_(reg_, field_, val) ( (( ( ( 1 &lt;&lt; reg_##_##field_##_WIDTH ) \</span>
<span class="cp">     - 1 ) &lt;&lt; reg_##_##field_##_BITNR ) &amp; (val)) &gt;&gt; reg_##_##field_##_BITNR )</span>

<span class="cm">/* IO_STATE_VALUE returns a constant corresponding to a one of the symbolic</span>
<span class="cm">   states that the bitfield can have. (Not shifted)  */</span>
<span class="cp">#define IO_STATE_VALUE(reg, field, state) \</span>
<span class="cp">    IO_STATE_VALUE_ (reg##_, field##_, _##state)</span>
<span class="cp">#define IO_STATE_VALUE_(reg_, field_, _state) ( reg_##_##field_##_state )</span>

<span class="cm">/* IO_FIELD shifts the val parameter to be aligned with the bitfield</span>
<span class="cm">   specified. */</span>
<span class="cp">#define IO_FIELD(reg, field, val) IO_FIELD_ (reg##_, field##_, val)</span>
<span class="cp">#define IO_FIELD_(reg_, field_, val) ((val) &lt;&lt; reg_##_##field_##_BITNR)</span>

<span class="cm">/* IO_BITNR returns the starting bitnumber of a bitfield. Bit 0 is</span>
<span class="cm">   LSB and the returned bitnumber is LSB of the field. */</span>
<span class="cp">#define IO_BITNR(reg, field) IO_BITNR_ (reg##_, field##_)</span>
<span class="cp">#define IO_BITNR_(reg_, field_) (reg_##_##field_##_BITNR)</span>

<span class="cm">/* IO_WIDTH returns the width, in bits, of a bitfield. */</span>
<span class="cp">#define IO_WIDTH(reg, field) IO_WIDTH_ (reg##_, field##_)</span>
<span class="cp">#define IO_WIDTH_(reg_, field_) (reg_##_##field_##_WIDTH)</span>

<span class="cm">/*--- Obsolete. Kept for backw compatibility. ---*/</span>
<span class="cm">/* Reads (or writes) a byte/uword/udword from the specified mode</span>
<span class="cm">   register. */</span>
<span class="cp">#define IO_RD(reg) (*(volatile u32*)(reg))</span>
<span class="cp">#define IO_RD_B(reg) (*(volatile u8*)(reg))</span>
<span class="cp">#define IO_RD_W(reg) (*(volatile u16*)(reg))</span>
<span class="cp">#define IO_RD_D(reg) (*(volatile u32*)(reg))</span>

<span class="cm">/*------------------------------------------------------------</span>
<span class="cm">!* Start addresses of the different memory areas.</span>
<span class="cm">!*-----------------------------------------------------------*/</span>

<span class="cp">#define MEM_CSE0_START (0x00000000)</span>
<span class="cp">#define MEM_CSE0_SIZE (0x04000000)</span>
<span class="cp">#define MEM_CSE1_START (0x04000000)</span>
<span class="cp">#define MEM_CSE1_SIZE (0x04000000)</span>
<span class="cp">#define MEM_CSR0_START (0x08000000)</span>
<span class="cp">#define MEM_CSR1_START (0x0c000000)</span>
<span class="cp">#define MEM_CSP0_START (0x10000000)</span>
<span class="cp">#define MEM_CSP1_START (0x14000000)</span>
<span class="cp">#define MEM_CSP2_START (0x18000000)</span>
<span class="cp">#define MEM_CSP3_START (0x1c000000)</span>
<span class="cp">#define MEM_CSP4_START (0x20000000)</span>
<span class="cp">#define MEM_CSP5_START (0x24000000)</span>
<span class="cp">#define MEM_CSP6_START (0x28000000)</span>
<span class="cp">#define MEM_CSP7_START (0x2c000000)</span>
<span class="cp">#define MEM_DRAM_START (0x40000000)</span>

<span class="cp">#define MEM_NON_CACHEABLE (0x80000000)</span>

<span class="cm">/*------------------------------------------------------------</span>
<span class="cm">!* Type casts used in mode register macros, making pointer</span>
<span class="cm">!* dereferencing possible. Empty in assembler.</span>
<span class="cm">!*-----------------------------------------------------------*/</span>

<span class="cp">#ifndef __ASSEMBLER__</span>
<span class="cp"># define  IO_TYPECAST_UDWORD  (volatile u32*)</span>
<span class="cp"># define  IO_TYPECAST_RO_UDWORD  (const volatile u32*)</span>
<span class="cp"># define  IO_TYPECAST_UWORD  (volatile u16*)</span>
<span class="cp"># define  IO_TYPECAST_RO_UWORD  (const volatile u16*)</span>
<span class="cp"># define  IO_TYPECAST_BYTE  (volatile u8*)</span>
<span class="cp"># define  IO_TYPECAST_RO_BYTE  (const volatile u8*)</span>
<span class="cp">#else</span>
<span class="cp"># define  IO_TYPECAST_UDWORD</span>
<span class="cp"># define  IO_TYPECAST_RO_UDWORD</span>
<span class="cp"># define  IO_TYPECAST_UWORD</span>
<span class="cp"># define  IO_TYPECAST_RO_UWORD</span>
<span class="cp"># define  IO_TYPECAST_BYTE</span>
<span class="cp"># define  IO_TYPECAST_RO_BYTE</span>
<span class="cp">#endif</span>

<span class="cm">/*------------------------------------------------------------*/</span>

<span class="cp">#include &quot;sv_addr.agh&quot;</span>

<span class="cp">#if __test_sv_addr__</span>
<span class="cm">/* IO_MASK( R_BUS_CONFIG , CE ) */</span>
<span class="n">IO_MASK</span><span class="p">(</span> <span class="n">R_WAITSTATES</span> <span class="p">,</span> <span class="n">SRAM_WS</span> <span class="p">)</span>
<span class="n">IO_MASK</span><span class="p">(</span> <span class="n">R_TEST</span> <span class="p">,</span> <span class="n">W32</span> <span class="p">)</span>

<span class="n">IO_STATE</span><span class="p">(</span> <span class="n">R_BUS_CONFIG</span><span class="p">,</span> <span class="n">CE</span><span class="p">,</span> <span class="n">DISABLE</span> <span class="p">)</span>
<span class="n">IO_STATE</span><span class="p">(</span> <span class="n">R_BUS_CONFIG</span><span class="p">,</span> <span class="n">CE</span><span class="p">,</span> <span class="n">ENABLE</span> <span class="p">)</span>

<span class="n">IO_STATE</span><span class="p">(</span> <span class="n">R_DRAM_TIMING</span><span class="p">,</span> <span class="n">REF</span><span class="p">,</span> <span class="n">IVAL2</span> <span class="p">)</span>

<span class="n">IO_MASK</span><span class="p">(</span> <span class="n">R_DRAM_TIMING</span><span class="p">,</span> <span class="n">REF</span> <span class="p">)</span>

<span class="n">IO_MASK</span><span class="p">(</span> <span class="n">R_EXT_DMA_0_STAT</span><span class="p">,</span> <span class="n">TFR_COUNT</span> <span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">IO_BITNR</span><span class="p">(</span> <span class="n">R_EXT_DMA_0_STAT</span><span class="p">,</span> <span class="n">TFR_COUNT</span> <span class="p">)</span>

<span class="n">IO_RD</span><span class="p">(</span><span class="n">R_EXT_DMA_0_STAT</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">IO_MASK</span><span class="p">(</span> <span class="n">R_EXT_DMA_0_STAT</span><span class="p">,</span> <span class="n">S</span> <span class="p">)</span> 
   <span class="o">==</span> <span class="n">IO_STATE</span><span class="p">(</span> <span class="n">R_EXT_DMA_0_STAT</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">STARTED</span> <span class="p">)</span>
<span class="cp">#endif</span>


<span class="cp">#endif  </span><span class="cm">/* ifndef __sv_addr_ag_h__ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
