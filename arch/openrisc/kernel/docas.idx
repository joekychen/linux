f | Makefile | g | 281B |  | Thomas Gleixner | tglx@linutronix.de | 1336215624 |  | openrisc: Use generic init_task  Same code. Use the generic version. The special Makefile treatment is pointless anyway as init_task.o contains only data which is handled by the linker script. So no point on being treated like head text.  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Jonas Bonn <jonas@southpole.se> Link: http://lkml.kernel.org/r/20120503085035.083343435@linutronix.de
f | time.c | s | 4.5K | 149 | Jonas Bonn | jonas@southpole.se | 1329469699 |  | openrisc: Set shortest clock event to 100 ticks  It takes a couple of instructions to actually configure a clock event so setting an alarm just 1 clock cycle in the future isn't going to work; doing so results in setting an alarm in the "past" in which case the event won't fire until the timer overflows and rolls back around to the "current time".  Not quite sure how many clock cycles it actually takes to get through to actually writing the register, but 100 seems to work reliably.  Use generic helper to set up the clock event while we're at it.  Reported-by: Jan Schulte <jan.schulte@aacmicrotec.com> Signed-off-by: Jonas Bonn <jonas@southpole.se>
f | head.S | g | 40K |  | Stefan Kristiansson | stefan.kristiansson@saunalahti.fi | 1329468922 |  | openrisc: enable passing of flattened device tree pointer  This patch enables passing a fdt pointer to the kernel.  This makes for the kernel parameter API:  void kernel(unsigned int fdt);  which, in accordance with the OpenRISC ABI results in: r3 = pointer to fdt  Signed-off-by: Stefan Kristiansson <stefan.kristiansson@saunalahti.fi> Signed-off-by: Jonas Bonn <jonas@southpole.se>
f | sys_call_table.c | s | 816B | 24 | Jonas Bonn | jonas@southpole.se | 1311353194 |  | OpenRISC: System calls  The OpenRISC Linux kernel conforms to the "generic" syscall interface which contains only the reduced set of syscalls deemed necessary for new architectures.  Unfortunately, the uClibc port for OpenRISC does not fully support this reduced set; as such, an additional patch available out-of-tree needs to be applied to the kernel in order to use the current uClibc.  This is just a temporary measure until the libc port can be straightened out; it is likely that OpenRISC will make the transition to glibc shortly where the generic syscall interface is better supported.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | traps.c | s | 9.5K | 312 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | dma.c | s | 6.4K | 218 | Jonas Bonn | jonas@southpole.se | 1336470231 |  | openrisc: provide dma_map_ops  This switches OpenRISC over to fully using the generic dma-mapping framework.  This was almost already the case as the architecture's implementation was essentially a copy of the generic header.  This also brings this architecture in line with the recent changes to dma_map_ops (adding attributes to ops->alloc).  Signed-off-by: Jonas Bonn <jonas@southpole.se>
f | asm-offsets.c | s | 2.3K | 62 | Jonas Bonn | jonas@southpole.se | 1311353201 |  | OpenRISC: Miscellaneous  Adds README file, TODO list, and a couple of other pieces that didn't seem to fit into any other patch.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | vmlinux.lds.S | g | 2.5K |  | Jonas Bonn | jonas@southpole.se | 1311353190 |  | OpenRISC: Build infrastructure  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | irq.c | s | 4.6K | 150 | Jonas Bonn | jonas@southpole.se | 1336470180 |  | openrisc: remove unnecessary includes  Signed-off-by: Jonas Bonn <jonas@southpole.se>
f | ptrace.c | s | 5.1K | 178 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | sys_or32.c | s | 1.6K | 48 | Jonas Bonn | jonas@southpole.se | 1311353194 |  | OpenRISC: System calls  The OpenRISC Linux kernel conforms to the "generic" syscall interface which contains only the reduced set of syscalls deemed necessary for new architectures.  Unfortunately, the uClibc port for OpenRISC does not fully support this reduced set; as such, an additional patch available out-of-tree needs to be applied to the kernel in order to use the current uClibc.  This is just a temporary measure until the libc port can be straightened out; it is likely that OpenRISC will make the transition to glibc shortly where the generic syscall interface is better supported.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | module.c | s | 2.0K | 66 | Jonas Bonn | jonas@southpole.se | 1311353197 |  | OpenRISC: Module support  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | setup.c | s | 9.9K | 324 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | prom.c | s | 2.8K | 89 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for OpenRISC  Disintegrate asm/system.h for OpenRISC.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Arnd Bergmann <arnd@arndb.de> cc: linux@lists.openrisc.net
f | process.c | s | 7.5K | 257 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for OpenRISC  Disintegrate asm/system.h for OpenRISC.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Arnd Bergmann <arnd@arndb.de> cc: linux@lists.openrisc.net
f | or32_ksyms.c | s | 1.3K | 41 | Jonas Bonn | jonas@southpole.se | 1311353201 |  | OpenRISC: Miscellaneous  Adds README file, TODO list, and a couple of other pieces that didn't seem to fit into any other patch.  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | signal.c | s | 9.6K | 292 | Al Viro | viro@zeniv.linux.org.uk | 1338569932 |  | new helper: signal_delivered()  Does block_sigmask() + tracehook_signal_handler();  called when sigframe has been successfully built.  All architectures converted to it; block_sigmask() itself is gone now (merged into this one).  I'm still not too happy with the signature, but that's a separate story (IMO we need a structure that would contain signal number + siginfo + k_sigaction, so that get_signal_to_deliver() would fill one, signal_delivered(), handle_signal() and probably setup...frame() - take one).  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | entry.S | g | 30K |  | Jonas Bonn | jonas@southpole.se | 1336470239 |  | openrisc: use scratch regs in atomic syscall  The function sys_or1k_atomic was using call-saved registers without restoring their value before returning.  This is a faux pas: either we need to restore their values or use scratch regs; the latter is less code so that's the route this patch takes.  Thanks to David Hennerström for doing most of the heavy-lifting in tracking this one down.  Reported-by: Davd Hennerström <david.hennerstrom@aacmicrotec.com> Signed-off-by: Jonas Bonn <jonas@southpole.se>
f | idle.c | s | 1.8K | 68 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for OpenRISC  Disintegrate asm/system.h for OpenRISC.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Arnd Bergmann <arnd@arndb.de> cc: linux@lists.openrisc.net
f | vmlinux.h | s | 247B | 9 | Jonas Bonn | jonas@southpole.se | 1311353199 |  | OpenRISC: Headers  Signed-off-by: Jonas Bonn <jonas@southpole.se> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
