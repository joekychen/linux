f | kmap_types.h | s | 109B | 4 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | io.h | s | 9.7K | 306 | Daniel Mack | daniel@caiaq.de | 1265710436 |  | tree-wide: Assorted spelling fixes  In particular, several occurances of funny versions of 'success', 'unknown', 'therefore', 'acknowledge', 'argument', 'achieve', 'address', 'beginning', 'desirable', 'separate' and 'necessary' are fixed.  Signed-off-by: Daniel Mack <daniel@caiaq.de> Cc: Joe Perches <joe@perches.com> Cc: Junio C Hamano <gitster@pobox.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | dbg.h | s | 55B | 2 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pci.h | s | 382B | 14 | Myron Stowe | mstowe@redhat.com | 1325880642 |  | PCI: Pull PCI 'latency timer' setup up into the core  The 'latency timer' of PCI devices, both Type 0 and Type 1, is setup in architecture-specific code [see: 'pcibios_set_master()']. There are two approaches being taken by all the architectures - check if the 'latency timer' is currently set between 16 and 255 and if not bring it within bounds, or, do nothing (and then there is the gratuitously different PA-RISC implementation).  There is nothing architecture-specific about PCI's 'latency timer' so this patch pulls its setup functionality up into the PCI core by creating a generic 'pcibios_set_master()' function using the '__weak' attribute which can be used by all architectures as a default which, if necessary, can then be over-ridden by architecture-specific code.  No functional change.  Signed-off-by: Myron Stowe <myron.stowe@redhat.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | sections.h | s | 97B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | barrier.h | s | 694B | 23 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | cputime.h | s | 118B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cacheflush.h | s | 1.1K | 33 | Ilya Loginov | isloginov@gmail.com | 1259223379 |  | block: add helpers to run flush_dcache_page() against a bio and a request's pages  Mtdblock driver doesn't call flush_dcache_page for pages in request.  So, this causes problems on architectures where the icache doesn't fill from the dcache or with dcache aliases.  The patch fixes this.  The ARCH_IMPLEMENTS_FLUSH_DCACHE_PAGE symbol was introduced to avoid pointless empty cache-thrashing loops on architectures for which flush_dcache_page() is a no-op.  Every architecture was provided with this flush pages on architectires where ARCH_IMPLEMENTS_FLUSH_DCACHE_PAGE is equal 1 or do nothing otherwise.  See "fix mtd_blkdevs problem with caches on some architectures" discussion on LKML for more information.  Signed-off-by: Ilya Loginov <isloginov@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Woodhouse <dwmw2@infradead.org> Cc: Peter Horton <phorton@bitbox.co.uk> Cc: "Ed L. Cashin" <ecashin@coraid.com> Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
f | delay.h | s | 904B | 31 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | shm.h | s | 1.0K | 26 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | irq_regs.h | s | 34B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cachectl.h | s | 499B | 10 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | segment.h | s | 904B | 38 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | timer.h | s | 703B | 21 | Linus Torvalds | torvalds@linux-foundation.org | 1239987567 |  | Get rid of final remnants of include/asm-$(ARCH)  This renames include/asm-h8300/timer.h into arch/h8300/include/asm: it was left over just because that file had been created in the -mm tree before the whole h8300 header subdirectory had been moved, and then got merged in the old location afterwards.  (See commits e0b0f9e4ead2468f84c26332ec42b118e76af572: "h8300: update timer handler - new files" and 758db3f2118703a1e36374dae5d58bed963e7e0d: "[h8300] move include/asm-h8300 to arch/h8300/include/asm" for details).  This also removes a left-over .gitignore file in include/asm-arm that became stale when the ARM header files were moved (which happened in multiple commits, just see "git log -- include/asm-arm" for details).  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | traps.h | s | 843B | 30 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | current.h | s | 602B | 20 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | virtconvert.h | s | 388B | 14 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | target_time.h | s | 295B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | elf.h | s | 2.6K | 86 | Christoph Hellwig | hch@lst.de | 1260976812 |  | elf: kill USE_ELF_CORE_DUMP  Currently all architectures but microblaze unconditionally define USE_ELF_CORE_DUMP.  The microblaze omission seems like an error to me, so let's kill this ifdef and make sure we are the same everywhere.  Signed-off-by: Christoph Hellwig <hch@lst.de> Acked-by: Hugh Dickins <hugh.dickins@tiscali.co.uk> Cc: <linux-arch@vger.kernel.org> Cc: Michal Simek <michal.simek@petalogix.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | resource.h | s | 119B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unaligned.h | s | 302B | 8 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tlb.h | s | 293B | 15 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ioctls.h | s | 160B | 5 | Jeff Mahoney | jeffm@suse.com | 1287768000 |  | ioctl: Use asm-generic/ioctls.h on h8300 (enables termiox)  This patch converts h8300 to use asm-generic/ioctls.h instead of its own version.  The differences between the arch-specific version and the generic version are as follows:  - H8300 defines its own value for FIOQSIZE, asm-generic/ioctls.h keeps it - The generic version adds TIOCSRS485 and TIOGSRS485, but are unused   by any driver available on this architecture. - The generic version adds support for termiox  Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Signed-off-by: Jeff Mahoney <jeffm@suse.com> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | bitsperlong.h | s | 37B | 1 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | ucontext.h | s | 249B | 10 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | termios.h | s | 2.8K | 80 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | types.h | s | 180B | 7 | Al Viro | viro@zeniv.linux.org.uk | 1325649317 |  | consolidate umode_t declarations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | smp.h | s | 32B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | siginfo.h | s | 92B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bugs.h | s | 236B | 14 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bitops.h | s | 6.0K | 186 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | hw_irq.h | s | 17B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bootinfo.h | s | 25B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kdebug.h | s | 32B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | setup.h | s | 87B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | dma.h | s | 414B | 11 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | errno.h | s | 107B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | checksum.h | s | 2.3K | 85 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ptrace.h | s | 1.3K | 55 | Mike Frysinger | vapier@gentoo.org | 1311724183 |  | ptrace: unify show_regs() prototype  [ poleg@redhat.com: no need to declare show_regs() in ptrace.h, sched.h does this ] Signed-off-by: Mike Frysinger <vapier@gentoo.org> Cc: Tejun Heo <tj@kernel.org> Signed-off-by: Oleg Nesterov <oleg@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmu_context.h | s | 708B | 25 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ftrace.h | s | 12B | 1 | Uwe Kleine-Koenig | u.kleine-koenig@pengutronix.de | 1236030577 |  | tracing: make CALLER_ADDRx overwriteable  The current definition of CALLER_ADDRx isn't suitable for all platforms. E.g. for ARM __builtin_return_address(N) doesn't work for N > 0 and AFAIK for powerpc there are no frame pointers needed to have a working __builtin_return_address.  This patch allows defining the CALLER_ADDRx macros in <asm/ftrace.h> and let these take precedence.  Because now <asm/ftrace.h> is included unconditionally in <linux/ftrace.h> all archs that don't already had this include get an empty one for free.  Signed-off-by: Uwe Kleine-Koenig <u.kleine-koenig@pengutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Reviewed-by: KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com> Signed-off-by: Steven Rostedt <srostedt@redhat.com>
f | mc146818rtc.h | s | 233B | 7 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | regs306x.h | s | 4.6K | 193 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cache.h | s | 236B | 8 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | gpio-internal.h | s | 1.3K | 43 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1319663728 |  | h8300: Move gpio.h to gpio-internal.h  The current h8300 GPIO implementation doesn't provide the standard GPIO API, and in fact provides only direction control rather than normal GPIO functionality. Currently this is only used by the platform interrupt implementation rather than by a range of drivers so in preparation for moving over to gpiolib move the header out of the way of the gpiolib header, allowing a default GPIO implementation to be provided.  For actual use of these GPIOs with gpiolib a real driver would still need to be written but there appears to be no current need for this.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | user.h | s | 3.3K | 69 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | termbits.h | s | 4.6K | 184 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | exec.h | s | 105B | 4 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | statfs.h | s | 111B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sigcontext.h | s | 409B | 16 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | bug.h | s | 224B | 8 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | Kbuild | g | 39B |  | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | hardirq.h | s | 356B | 14 | Christoph Hellwig | hch@lst.de | 1253629063 |  | h8300: convert to asm-generic/hardirq.h  Signed-off-by: Christoph Hellwig <hch@lst.de> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | futex.h | s | 82B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | posix_types.h | s | 715B | 19 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | atomic.h | s | 3.3K | 123 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | mmu.h | s | 165B | 7 | David Howells | dhowells@redhat.com | 1231416287 |  | NOMMU: Make VMAs per MM as for MMU-mode linux  Make VMAs per mm_struct as for MMU-mode linux.  This solves two problems:   (1) In SYSV SHM where nattch for a segment does not reflect the number of      shmat's (and forks) done.   (2) In mmap() where the VMA's vm_mm is set to point to the parent mm by an      exec'ing process when VM_EXECUTABLE is specified, regardless of the fact      that a VMA might be shared and already have its vm_mm assigned to another      process or a dead process.  A new struct (vm_region) is introduced to track a mapped region and to remember the circumstances under which it may be shared and the vm_list_struct structure is discarded as it's no longer required.  This patch makes the following additional changes:   (1) Regions are now allocated with alloc_pages() rather than kmalloc() and      with no recourse to __GFP_COMP, so the pages are not composite.  Instead,      each page has a reference on it held by the region.  Anything else that is      interested in such a page will have to get a reference on it to retain it.      When the pages are released due to unmapping, each page is passed to      put_page() and will be freed when the page usage count reaches zero.   (2) Excess pages are trimmed after an allocation as the allocation must be      made as a power-of-2 quantity of pages.   (3) VMAs are added to the parent MM's R/B tree and mmap lists.  As an MM may      end up with overlapping VMAs within the tree, the VMA struct address is      appended to the sort key.   (4) Non-anonymous VMAs are now added to the backing inode's prio list.   (5) Holes may be punched in anonymous VMAs with munmap(), releasing parts of      the backing region.  The VMA and region structs will be split if      necessary.   (6) sys_shmdt() only releases one attachment to a SYSV IPC shared memory      segment instead of all the attachments at that addresss.  Multiple      shmat()'s return the same address under NOMMU-mode instead of different      virtual addresses as under MMU-mode.   (7) Core dumping for ELF-FDPIC requires fewer exceptions for NOMMU-mode.   (8) /proc/maps is now the global list of mapped regions, and may list bits      that aren't actually mapped anywhere.   (9) /proc/meminfo gains a line (tagged "MmapCopy") that indicates the amount      of RAM currently allocated by mmap to hold mappable regions that can't be      mapped directly.  These are copies of the backing device or file if not      anonymous.  These changes make NOMMU mode more similar to MMU mode.  The downside is that NOMMU mode requires some extra memory to track things over NOMMU without this patch (VMAs are no longer shared, and there are now region structs).  Signed-off-by: David Howells <dhowells@redhat.com> Tested-by: Mike Frysinger <vapier.adi@gmail.com> Acked-by: Paul Mundt <lethal@linux-sh.org>
f | device.h | s | 129B | 6 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mutex.h | s | 308B | 8 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sh_bios.h | s | 605B | 23 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | linkage.h | s | 187B | 7 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | tlbflush.h | s | 916B | 44 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | unistd.h | s | 10K | 362 | Al Viro | viro@zeniv.linux.org.uk | 1337659087 |  | h8300: switch to saved_sigmask-based sigsuspend/rt_sigsuspend  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | local.h | s | 88B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | topology.h | s | 131B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | irqflags.h | s | 916B | 35 | David Howells | dhowells@redhat.com | 1286456935 |  | Fix IRQ flag handling naming  Fix the IRQ flag handling naming.  In linux/irqflags.h under one configuration, it maps:  	local_irq_enable() -> raw_local_irq_enable() 	local_irq_disable() -> raw_local_irq_disable() 	local_irq_save() -> raw_local_irq_save() 	...  and under the other configuration, it maps:  	raw_local_irq_enable() -> local_irq_enable() 	raw_local_irq_disable() -> local_irq_disable() 	raw_local_irq_save() -> local_irq_save() 	...  This is quite confusing.  There should be one set of names expected of the arch, and this should be wrapped to give another set of names that are expected by users of this facility.  Change this to have the arch provide:  	flags = arch_local_save_flags() 	flags = arch_local_irq_save() 	arch_local_irq_restore(flags) 	arch_local_irq_disable() 	arch_local_irq_enable() 	arch_irqs_disabled_flags(flags) 	arch_irqs_disabled() 	arch_safe_halt()  Then linux/irqflags.h wraps these to provide:  	raw_local_save_flags(flags) 	raw_local_irq_save(flags) 	raw_local_irq_restore(flags) 	raw_local_irq_disable() 	raw_local_irq_enable() 	raw_irqs_disabled_flags(flags) 	raw_irqs_disabled() 	raw_safe_halt()  with type checking on the flags 'arguments', and then wraps those to provide:  	local_save_flags(flags) 	local_irq_save(flags) 	local_irq_restore(flags) 	local_irq_disable() 	local_irq_enable() 	irqs_disabled_flags(flags) 	irqs_disabled() 	safe_halt()  with tracing included if enabled.  The arch functions can now all be inline functions rather than some of them having to be macros.  Signed-off-by: David Howells <dhowells@redhat.com> [X86, FRV, MN10300] Signed-off-by: Chris Metcalf <cmetcalf@tilera.com> [Tile] Signed-off-by: Michal Simek <monstr@monstr.eu> [Microblaze] Tested-by: Catalin Marinas <catalin.marinas@arm.com> [ARM] Acked-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Haavard Skinnemoen <haavard.skinnemoen@atmel.com> [AVR] Acked-by: Tony Luck <tony.luck@intel.com> [IA-64] Acked-by: Hirokazu Takata <takata@linux-m32r.org> [M32R] Acked-by: Greg Ungerer <gerg@uclinux.org> [M68K/M68KNOMMU] Acked-by: Ralf Baechle <ralf@linux-mips.org> [MIPS] Acked-by: Kyle McMartin <kyle@mcmartin.ca> [PA-RISC] Acked-by: Paul Mackerras <paulus@samba.org> [PowerPC] Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [S390] Acked-by: Chen Liqin <liqin.chen@sunplusct.com> [Score] Acked-by: Matt Fleming <matt@console-pimps.org> [SH] Acked-by: David S. Miller <davem@davemloft.net> [Sparc] Acked-by: Chris Zankel <chris@zankel.net> [Xtensa] Reviewed-by: Richard Henderson <rth@twiddle.net> [Alpha] Reviewed-by: Yoshinori Sato <ysato@users.sourceforge.jp> [H8300] Cc: starvik@axis.com [CRIS] Cc: jesper.nilsson@axis.com [CRIS] Cc: linux-cris-kernel@axis.com
f | module.h | s | 278B | 10 | Alan Jenkins | alan-jenkins@tuffmail.co.uk | 1260856706 |  | module: make MODULE_SYMBOL_PREFIX into a CONFIG option  The next commit will require the use of MODULE_SYMBOL_PREFIX in .tmp_exports-asm.S.  Currently it is mixed in with C structure definitions in "asm/module.h".  Move the definition of this arch option into Kconfig, so it can be easily accessed by any code.  This also lets modpost.c use the same definition.  Previously modpost relied on a hardcoded list of architectures in mk_elfconfig.c.  A build test for blackfin, one of the two MODULE_SYMBOL_PREFIX archs, showed the generated code was unchanged.  vmlinux was identical save for build ids, and an apparently randomized suffix on a single "__key" symbol in the kallsyms data).  Signed-off-by: Alan Jenkins <alan-jenkins@tuffmail.co.uk> Acked-by: Mike Frysinger <vapier@gentoo.org> (blackfin) CC: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
f | ioctl.h | s | 31B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | poll.h | s | 155B | 7 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | string.h | s | 1.0K | 35 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | processor.h | s | 3.5K | 121 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | flat.h | s | 883B | 21 | Oskar Schirmer | os@emlix.com | 1243611602 |  | flat: fix data sections alignment  The flat loader uses an architecture's flat_stack_align() to align the stack but assumes word-alignment is enough for the data sections.  However, on the Xtensa S6000 we have registers up to 128bit width which can be used from userspace and therefor need userspace stack and data-section alignment of at least this size.  This patch drops flat_stack_align() and uses the same alignment that is required for slab caches, ARCH_SLAB_MINALIGN, or wordsize if it's not defined by the architecture.  It also fixes m32r which was obviously kaput, aligning an uninitialized stack entry instead of the stack pointer.  [akpm@linux-foundation.org: coding-style fixes] Signed-off-by: Oskar Schirmer <os@emlix.com> Cc: David Howells <dhowells@redhat.com> Cc: Russell King <rmk@arm.linux.org.uk> Cc: Bryan Wu <cooloney@kernel.org> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Paul Mundt <lethal@linux-sh.org> Cc: Greg Ungerer <gerg@uclinux.org> Signed-off-by: Johannes Weiner <jw@emlix.com> Acked-by: Mike Frysinger <vapier.adi@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | page.h | s | 2.3K | 54 | Arnd Bergmann | arnd@arndb.de | 1244746937 |  | asm-generic: rename page.h and uaccess.h  The current asm-generic/page.h only contains the get_order function, and asm-generic/uaccess.h only implements unaligned accesses. This renames the file to getorder.h and uaccess-unaligned.h to make room for new page.h and uaccess.h file that will be usable by all simple (e.g. nommu) architectures.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | percpu.h | s | 129B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | div64.h | s | 31B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cmpxchg.h | s | 1.5K | 49 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | auxvec.h | s | 64B | 3 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | param.h | s | 328B | 15 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | scatterlist.h | s | 134B | 4 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | pgalloc.h | s | 149B | 5 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | regs267x.h | s | 7.4K | 311 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | swab.h | s | 210B | 7 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466284 |  | headers_check fix: h8300, swab.h  fix the following 'make headers_check' warning:    usr/include/asm-h8300/swab.h:4: include of <linux/types.h> is preferred over <asm/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | irq.h | s | 936B | 43 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | fcntl.h | s | 316B | 8 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | fb.h | s | 205B | 9 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | socket.h | s | 1.6K | 56 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | thread_info.h | s | 2.8K | 87 | Tejun Heo | tj@kernel.org | 1321907545 |  | freezer: remove now unused TIF_FREEZE  Signed-off-by: Tejun Heo <tj@kernel.org> Cc: Arnd Bergmann <arnd@arndb.de> Cc: linux-arch@vger.kernel.org
f | timex.h | s | 350B | 15 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | page_offset.h | s | 38B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | ipcbuf.h | s | 32B | 1 | Al Viro | viro@zeniv.linux.org.uk | 1325649318 |  | consolidate a bunch of ipcbuf.h instances  ... some still remain weird :-/  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | stat.h | s | 1.6K | 64 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pgtable.h | s | 2.1K | 59 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | fpu.h | s | 17B | 1 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | signal.h | s | 3.4K | 132 | Arnd Bergmann | arnd@arndb.de | 1244746912 |  | asm-generic: rename termios.h, signal.h and mman.h  The existing asm-generic versions are incomplete and included by some architectures. New architectures should be able to use a generic version, so rename the existing files and change all users, which lets us add the new files.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | switch_to.h | s | 1.8K | 47 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for H8300  Disintegrate asm/system.h for H8300.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Yoshinori Sato <ysato@users.sourceforge.jp>
f | uaccess.h | s | 4.1K | 134 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | shmbuf.h | s | 1.1K | 38 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mman.h | s | 30B | 1 | Arnd Bergmann | arnd@arndb.de | 1253629062 |  | mm: remove duplicate asm/mman.h files  A number of architectures have identical asm/mman.h files so they can all be merged by using the new generic file.  The remaining asm/mman.h files are substantially different from each other.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | emergency-restart.h | s | 149B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | msgbuf.h | s | 980B | 28 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sockios.h | s | 374B | 11 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | byteorder.h | s | 128B | 4 | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sembuf.h | s | 700B | 22 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | shmparam.h | s | 149B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | spinlock.h | s | 98B | 4 | Linus Torvalds | torvalds@linux-foundation.org | 1218662792 |  | [h8300] move include/asm-h8300 to arch/h8300/include/asm  Done as a script (well, a single "git mv" actually) on request from Yoshinori Sato as a way to avoid a huge diff.  Requested-by: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Sam Ravnborg <sam@ravnborg.org> Cc: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
