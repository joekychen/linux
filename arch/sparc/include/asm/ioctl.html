<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › sparc › include › asm › ioctl.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>ioctl.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef _SPARC_IOCTL_H</span>
<span class="cp">#define _SPARC_IOCTL_H</span>

<span class="cm">/*</span>
<span class="cm"> * Our DIR and SIZE overlap in order to simulteneously provide</span>
<span class="cm"> * a non-zero _IOC_NONE (for binary compatibility) and</span>
<span class="cm"> * 14 bits of size as on i386. Here&#39;s the layout:</span>
<span class="cm"> *</span>
<span class="cm"> *   0xE0000000   DIR</span>
<span class="cm"> *   0x80000000     DIR = WRITE</span>
<span class="cm"> *   0x40000000     DIR = READ</span>
<span class="cm"> *   0x20000000     DIR = NONE</span>
<span class="cm"> *   0x3FFF0000   SIZE (overlaps NONE bit)</span>
<span class="cm"> *   0x0000FF00   TYPE</span>
<span class="cm"> *   0x000000FF   NR (CMD)</span>
<span class="cm"> */</span>

<span class="cp">#define _IOC_NRBITS      8</span>
<span class="cp">#define _IOC_TYPEBITS    8</span>
<span class="cp">#define _IOC_SIZEBITS   13	</span><span class="cm">/* Actually 14, see below. */</span><span class="cp"></span>
<span class="cp">#define _IOC_DIRBITS     3</span>

<span class="cp">#define _IOC_NRMASK      ((1 &lt;&lt; _IOC_NRBITS)-1)</span>
<span class="cp">#define _IOC_TYPEMASK    ((1 &lt;&lt; _IOC_TYPEBITS)-1)</span>
<span class="cp">#define _IOC_SIZEMASK    ((1 &lt;&lt; _IOC_SIZEBITS)-1)</span>
<span class="cp">#define _IOC_XSIZEMASK   ((1 &lt;&lt; (_IOC_SIZEBITS+1))-1)</span>
<span class="cp">#define _IOC_DIRMASK     ((1 &lt;&lt; _IOC_DIRBITS)-1)</span>

<span class="cp">#define _IOC_NRSHIFT     0</span>
<span class="cp">#define _IOC_TYPESHIFT   (_IOC_NRSHIFT + _IOC_NRBITS)</span>
<span class="cp">#define _IOC_SIZESHIFT   (_IOC_TYPESHIFT + _IOC_TYPEBITS)</span>
<span class="cp">#define _IOC_DIRSHIFT    (_IOC_SIZESHIFT + _IOC_SIZEBITS)</span>

<span class="cp">#define _IOC_NONE        1U</span>
<span class="cp">#define _IOC_READ        2U</span>
<span class="cp">#define _IOC_WRITE       4U</span>

<span class="cp">#define _IOC(dir,type,nr,size) \</span>
<span class="cp">        (((dir)  &lt;&lt; _IOC_DIRSHIFT) | \</span>
<span class="cp">         ((type) &lt;&lt; _IOC_TYPESHIFT) | \</span>
<span class="cp">         ((nr)   &lt;&lt; _IOC_NRSHIFT) | \</span>
<span class="cp">         ((size) &lt;&lt; _IOC_SIZESHIFT))</span>

<span class="cp">#define _IO(type,nr)        _IOC(_IOC_NONE,(type),(nr),0)</span>
<span class="cp">#define _IOR(type,nr,size)  _IOC(_IOC_READ,(type),(nr),sizeof(size))</span>
<span class="cp">#define _IOW(type,nr,size)  _IOC(_IOC_WRITE,(type),(nr),sizeof(size))</span>
<span class="cp">#define _IOWR(type,nr,size) _IOC(_IOC_READ|_IOC_WRITE,(type),(nr),sizeof(size))</span>

<span class="cm">/* Used to decode ioctl numbers in drivers despite the leading underscore... */</span>
<span class="cp">#define _IOC_DIR(nr)    \</span>
<span class="cp"> ( (((((nr) &gt;&gt; _IOC_DIRSHIFT) &amp; _IOC_DIRMASK) &amp; (_IOC_WRITE|_IOC_READ)) != 0)?   \</span>
<span class="cp">                            (((nr) &gt;&gt; _IOC_DIRSHIFT) &amp; (_IOC_WRITE|_IOC_READ)):  \</span>
<span class="cp">                            (((nr) &gt;&gt; _IOC_DIRSHIFT) &amp; _IOC_DIRMASK) )</span>
<span class="cp">#define _IOC_TYPE(nr)       (((nr) &gt;&gt; _IOC_TYPESHIFT) &amp; _IOC_TYPEMASK)</span>
<span class="cp">#define _IOC_NR(nr)         (((nr) &gt;&gt; _IOC_NRSHIFT) &amp; _IOC_NRMASK)</span>
<span class="cp">#define _IOC_SIZE(nr)   \</span>
<span class="cp"> ((((((nr) &gt;&gt; _IOC_DIRSHIFT) &amp; _IOC_DIRMASK) &amp; (_IOC_WRITE|_IOC_READ)) == 0)?    \</span>
<span class="cp">                         0: (((nr) &gt;&gt; _IOC_SIZESHIFT) &amp; _IOC_XSIZEMASK))</span>

<span class="cm">/* ...and for the PCMCIA and sound. */</span>
<span class="cp">#define IOC_IN          (_IOC_WRITE &lt;&lt; _IOC_DIRSHIFT)</span>
<span class="cp">#define IOC_OUT         (_IOC_READ &lt;&lt; _IOC_DIRSHIFT)</span>
<span class="cp">#define IOC_INOUT       ((_IOC_WRITE|_IOC_READ) &lt;&lt; _IOC_DIRSHIFT)</span>
<span class="cp">#define IOCSIZE_MASK    (_IOC_XSIZEMASK &lt;&lt; _IOC_SIZESHIFT)</span>
<span class="cp">#define IOCSIZE_SHIFT   (_IOC_SIZESHIFT)</span>

<span class="cp">#endif </span><span class="cm">/* !(_SPARC_IOCTL_H) */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
