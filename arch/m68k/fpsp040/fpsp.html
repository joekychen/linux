<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › fpsp040 › fpsp.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>fpsp.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="o">|</span>
<span class="o">|</span>	<span class="n">fpsp</span><span class="p">.</span><span class="n">h</span> <span class="mf">3.3</span> <span class="mf">3.3</span>
<span class="o">|</span>

<span class="o">|</span>		<span class="n">Copyright</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">Motorola</span><span class="p">,</span> <span class="n">Inc</span><span class="p">.</span> <span class="mi">1990</span>
<span class="o">|</span>			<span class="n">All</span> <span class="n">Rights</span> <span class="n">Reserved</span>
<span class="o">|</span>
<span class="o">|</span>       <span class="n">For</span> <span class="n">details</span> <span class="n">on</span> <span class="n">the</span> <span class="n">license</span> <span class="k">for</span> <span class="n">this</span> <span class="n">file</span><span class="p">,</span> <span class="n">please</span> <span class="n">see</span> <span class="n">the</span>
<span class="o">|</span>       <span class="n">file</span><span class="p">,</span> <span class="n">README</span><span class="p">,</span> <span class="n">in</span> <span class="n">this</span> <span class="n">same</span> <span class="n">directory</span><span class="p">.</span>

<span class="o">|</span>	<span class="n">fpsp</span><span class="p">.</span><span class="n">h</span> <span class="o">---</span> <span class="n">stack</span> <span class="n">frame</span> <span class="n">offsets</span> <span class="n">during</span> <span class="n">FPSP</span> <span class="n">exception</span> <span class="n">handling</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">These</span> <span class="n">equates</span> <span class="n">are</span> <span class="n">used</span> <span class="n">to</span> <span class="n">access</span> <span class="n">the</span> <span class="n">exception</span> <span class="n">frame</span><span class="p">,</span> <span class="n">the</span> <span class="n">fsave</span>
<span class="o">|</span>	<span class="n">frame</span> <span class="n">and</span> <span class="n">any</span> <span class="n">local</span> <span class="n">variables</span> <span class="n">needed</span> <span class="n">by</span> <span class="n">the</span> <span class="n">FPSP</span> <span class="n">package</span><span class="p">.</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">All</span> <span class="n">FPSP</span> <span class="n">handlers</span> <span class="n">begin</span> <span class="n">by</span> <span class="n">executing</span><span class="o">:</span>
<span class="o">|</span>
<span class="o">|</span>		<span class="n">link</span>	<span class="n">a6</span><span class="p">,</span><span class="err">#</span><span class="o">-</span><span class="n">LOCAL_SIZE</span>
<span class="o">|</span>		<span class="n">fsave</span>	<span class="o">-</span><span class="p">(</span><span class="n">a7</span><span class="p">)</span>
<span class="o">|</span>		<span class="n">movem</span><span class="p">.</span><span class="n">l</span>	<span class="n">d0</span><span class="o">-</span><span class="n">d1</span><span class="o">/</span><span class="n">a0</span><span class="o">-</span><span class="n">a1</span><span class="p">,</span><span class="n">USER_DA</span><span class="p">(</span><span class="n">a6</span><span class="p">)</span>
<span class="o">|</span>		<span class="n">fmovem</span><span class="p">.</span><span class="n">x</span> <span class="n">fp0</span><span class="o">-</span><span class="n">fp3</span><span class="p">,</span><span class="n">USER_FP0</span><span class="p">(</span><span class="n">a6</span><span class="p">)</span>
<span class="o">|</span>		<span class="n">fmove</span><span class="p">.</span><span class="n">l</span>	<span class="n">fpsr</span><span class="o">/</span><span class="n">fpcr</span><span class="o">/</span><span class="n">fpiar</span><span class="p">,</span><span class="n">USER_FPSR</span><span class="p">(</span><span class="n">a6</span><span class="p">)</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">After</span> <span class="n">initialization</span><span class="p">,</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">looks</span> <span class="n">like</span> <span class="n">this</span><span class="o">:</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">A7</span> <span class="o">---&gt;</span>	<span class="o">+-------------------------------+</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>	<span class="n">FPU</span> <span class="n">fsave</span> <span class="n">area</span>		<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>		<span class="o">+-------------------------------+</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>	<span class="n">FPSP</span> <span class="n">Local</span> <span class="n">Variables</span>	<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>	     <span class="n">including</span>		<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>	  <span class="n">saved</span> <span class="n">registers</span>	<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>		<span class="o">+-------------------------------+</span>
<span class="o">|</span>	<span class="n">A6</span> <span class="o">---&gt;</span>	<span class="o">|</span>	<span class="n">Saved</span> <span class="n">A6</span>		<span class="o">|</span>
<span class="o">|</span>		<span class="o">+-------------------------------+</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>	<span class="n">Exception</span> <span class="n">Frame</span>		<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>		<span class="o">|</span>				<span class="o">|</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">Positive</span> <span class="n">offsets</span> <span class="n">from</span> <span class="n">A6</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">exception</span> <span class="n">frame</span><span class="p">.</span>  <span class="n">Negative</span>
<span class="o">|</span>	<span class="n">offsets</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Local</span> <span class="n">Variable</span> <span class="n">area</span> <span class="n">and</span> <span class="n">the</span> <span class="n">fsave</span> <span class="n">area</span><span class="p">.</span>
<span class="o">|</span>	<span class="n">The</span> <span class="n">fsave</span> <span class="n">frame</span> <span class="n">is</span> <span class="n">also</span> <span class="n">accessible</span> <span class="n">from</span> <span class="n">the</span> <span class="n">top</span> <span class="n">via</span> <span class="n">A7</span><span class="p">.</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">On</span> <span class="n">exit</span><span class="p">,</span> <span class="n">the</span> <span class="n">handlers</span> <span class="n">execute</span><span class="o">:</span>
<span class="o">|</span>
<span class="o">|</span>		<span class="n">movem</span><span class="p">.</span><span class="n">l</span>	<span class="n">USER_DA</span><span class="p">(</span><span class="n">a6</span><span class="p">),</span><span class="n">d0</span><span class="o">-</span><span class="n">d1</span><span class="o">/</span><span class="n">a0</span><span class="o">-</span><span class="n">a1</span>
<span class="o">|</span>		<span class="n">fmovem</span><span class="p">.</span><span class="n">x</span> <span class="n">USER_FP0</span><span class="p">(</span><span class="n">a6</span><span class="p">),</span><span class="n">fp0</span><span class="o">-</span><span class="n">fp3</span>
<span class="o">|</span>		<span class="n">fmove</span><span class="p">.</span><span class="n">l</span>	<span class="n">USER_FPSR</span><span class="p">(</span><span class="n">a6</span><span class="p">),</span><span class="n">fpsr</span><span class="o">/</span><span class="n">fpcr</span><span class="o">/</span><span class="n">fpiar</span>
<span class="o">|</span>		<span class="n">frestore</span> <span class="p">(</span><span class="n">a7</span><span class="p">)</span><span class="o">+</span>
<span class="o">|</span>		<span class="n">unlk</span>	<span class="n">a6</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">and</span> <span class="n">then</span> <span class="n">either</span> <span class="s">&quot;bra fpsp_done&quot;</span> <span class="k">if</span> <span class="n">the</span> <span class="n">exception</span> <span class="n">was</span> <span class="n">completely</span>
<span class="o">|</span>	<span class="n">handled</span>	<span class="n">by</span> <span class="n">the</span> <span class="n">package</span><span class="p">,</span> <span class="n">or</span> <span class="s">&quot;bra real_xxxx&quot;</span> <span class="n">which</span> <span class="n">is</span> <span class="n">an</span> <span class="n">external</span>
<span class="o">|</span>	<span class="n">label</span> <span class="n">to</span> <span class="n">a</span> <span class="n">routine</span> <span class="n">that</span> <span class="n">will</span> <span class="n">process</span> <span class="n">a</span> <span class="n">real</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">the</span>
<span class="o">|</span>	<span class="n">type</span> <span class="n">that</span> <span class="n">was</span> <span class="n">generated</span><span class="p">.</span>  <span class="n">Some</span> <span class="n">handlers</span> <span class="n">may</span> <span class="n">omit</span> <span class="n">the</span> <span class="s">&quot;frestore&quot;</span>
<span class="o">|</span>	<span class="k">if</span> <span class="n">the</span> <span class="n">FPU</span> <span class="n">state</span> <span class="n">after</span> <span class="n">the</span> <span class="n">exception</span> <span class="n">is</span> <span class="n">idle</span><span class="p">.</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">Sometimes</span> <span class="n">the</span> <span class="n">exception</span> <span class="n">handler</span> <span class="n">will</span> <span class="n">transform</span> <span class="n">the</span> <span class="n">fsave</span> <span class="n">area</span>
<span class="o">|</span>	<span class="n">because</span> <span class="n">it</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">report</span> <span class="n">an</span> <span class="n">exception</span> <span class="n">back</span> <span class="n">to</span> <span class="n">the</span> <span class="n">user</span><span class="p">.</span>  <span class="n">This</span>
<span class="o">|</span>	<span class="n">can</span> <span class="n">happen</span> <span class="k">if</span> <span class="n">the</span> <span class="n">package</span> <span class="n">is</span> <span class="n">entered</span> <span class="k">for</span> <span class="n">an</span> <span class="n">unimplemented</span> <span class="kt">float</span>
<span class="o">|</span>	<span class="n">instruction</span> <span class="n">that</span> <span class="n">generates</span> <span class="p">(</span><span class="n">say</span><span class="p">)</span> <span class="n">an</span> <span class="n">underflow</span><span class="p">.</span>  <span class="n">Alternatively</span><span class="p">,</span>
<span class="o">|</span>	<span class="n">a</span> <span class="n">second</span> <span class="n">fsave</span> <span class="n">frame</span> <span class="n">can</span> <span class="n">be</span> <span class="n">pushed</span> <span class="n">onto</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">and</span> <span class="n">the</span>
<span class="o">|</span>	<span class="n">handler</span>	<span class="n">exit</span> <span class="n">code</span> <span class="n">will</span> <span class="n">reload</span> <span class="n">the</span> <span class="n">new</span> <span class="n">frame</span> <span class="n">and</span> <span class="n">discard</span> <span class="n">the</span> <span class="n">old</span><span class="p">.</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">The</span> <span class="n">registers</span> <span class="n">d0</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span> <span class="n">and</span> <span class="n">fp0</span><span class="o">-</span><span class="n">fp3</span> <span class="n">are</span> <span class="n">always</span> <span class="n">saved</span> <span class="n">and</span>
<span class="o">|</span>	<span class="n">restored</span> <span class="n">from</span> <span class="n">the</span> <span class="s">&quot;local variable&quot;</span> <span class="n">area</span> <span class="n">and</span> <span class="n">can</span> <span class="n">be</span> <span class="n">used</span> <span class="n">as</span>
<span class="o">|</span>	<span class="n">temporaries</span><span class="p">.</span>  <span class="n">If</span> <span class="n">a</span> <span class="n">routine</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">change</span> <span class="n">any</span>
<span class="o">|</span>	<span class="n">of</span> <span class="n">these</span> <span class="n">registers</span><span class="p">,</span> <span class="n">it</span> <span class="n">should</span> <span class="n">modify</span> <span class="n">the</span> <span class="n">saved</span> <span class="n">copy</span> <span class="n">and</span> <span class="n">let</span>
<span class="o">|</span>	<span class="n">the</span> <span class="n">handler</span> <span class="n">exit</span> <span class="n">code</span> <span class="n">restore</span> <span class="n">the</span> <span class="n">value</span><span class="p">.</span>
<span class="o">|</span>
<span class="o">|----------------------------------------------------------------------</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">Local</span> <span class="n">Variables</span> <span class="n">on</span> <span class="n">the</span> <span class="n">stack</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LOCAL_SIZE</span><span class="p">,</span><span class="mi">192</span>		<span class="o">|</span> <span class="n">bytes</span> <span class="n">needed</span> <span class="k">for</span> <span class="n">local</span> <span class="n">variables</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LV</span><span class="p">,</span><span class="o">-</span><span class="n">LOCAL_SIZE</span>	<span class="o">|</span> <span class="n">convenient</span> <span class="n">base</span> <span class="n">value</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_DA</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">0</span>		<span class="o">|</span> <span class="n">save</span> <span class="n">space</span> <span class="k">for</span> <span class="n">D0</span><span class="o">-</span><span class="n">D1</span><span class="p">,</span><span class="n">A0</span><span class="o">-</span><span class="n">A1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_D0</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">0</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">D0</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_D1</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">D1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_A0</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">8</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">A0</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_A1</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">12</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">A1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FP0</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">16</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FP0</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FP1</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">28</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FP1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FP2</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">40</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FP2</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FP3</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">52</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FP3</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FPCR</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">64</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FPCR</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPCR_ENABLE</span><span class="p">,</span><span class="n">USER_FPCR</span><span class="o">+</span><span class="mi">2</span>	<span class="o">|</span>	<span class="n">FPCR</span> <span class="n">exception</span> <span class="n">enable</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPCR_MODE</span><span class="p">,</span><span class="n">USER_FPCR</span><span class="o">+</span><span class="mi">3</span>	<span class="o">|</span>	<span class="n">FPCR</span> <span class="n">rounding</span> <span class="n">mode</span> <span class="n">control</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FPSR</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">68</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FPSR</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPSR_CC</span><span class="p">,</span><span class="n">USER_FPSR</span><span class="o">+</span><span class="mi">0</span>	<span class="o">|</span>	<span class="n">FPSR</span> <span class="n">condition</span> <span class="n">code</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPSR_QBYTE</span><span class="p">,</span><span class="n">USER_FPSR</span><span class="o">+</span><span class="mi">1</span>	<span class="o">|</span>	<span class="n">FPSR</span> <span class="n">quotient</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPSR_EXCEPT</span><span class="p">,</span><span class="n">USER_FPSR</span><span class="o">+</span><span class="mi">2</span>	<span class="o">|</span>	<span class="n">FPSR</span> <span class="n">exception</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPSR_AEXCEPT</span><span class="p">,</span><span class="n">USER_FPSR</span><span class="o">+</span><span class="mi">3</span>	<span class="o">|</span>	<span class="n">FPSR</span> <span class="n">accrued</span> <span class="n">exception</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">USER_FPIAR</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">72</span>		<span class="o">|</span> <span class="n">saved</span> <span class="n">user</span> <span class="n">FPIAR</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FP_SCR1</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">76</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">float</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FP_SCR2</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">92</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">float</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">L_SCR1</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">108</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">long</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">L_SCR2</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">112</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">long</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">STORE_FLG</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">116</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">BINDEC_FLG</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">117</span>		<span class="o">|</span> <span class="n">used</span> <span class="n">in</span> <span class="n">bindec</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">DNRM_FLG</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">118</span>		<span class="o">|</span> <span class="n">used</span> <span class="n">in</span> <span class="n">res_func</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">RES_FLG</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">119</span>		<span class="o">|</span> <span class="n">used</span> <span class="n">in</span> <span class="n">res_func</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">DY_MO_FLG</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">120</span>		<span class="o">|</span> <span class="n">dyadic</span><span class="o">/</span><span class="n">monadic</span> <span class="n">flag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">UFLG_TMP</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">121</span>		<span class="o">|</span> <span class="n">temporary</span> <span class="k">for</span> <span class="n">uflag</span> <span class="n">errata</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">CU_ONLY</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">122</span>		<span class="o">|</span> <span class="n">cu</span><span class="o">-</span><span class="n">only</span> <span class="n">flag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">VER_TMP</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">123</span>		<span class="o">|</span> <span class="n">temp</span> <span class="n">holding</span> <span class="k">for</span> <span class="n">version</span> <span class="n">number</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">L_SCR3</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">124</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">long</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FP_SCR3</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">128</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">float</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FP_SCR4</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">144</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">float</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FP_SCR5</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">160</span>		<span class="o">|</span> <span class="n">room</span> <span class="k">for</span> <span class="n">a</span> <span class="n">temporary</span> <span class="kt">float</span> <span class="n">value</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FP_SCR6</span><span class="p">,</span><span class="n">LV</span><span class="o">+</span><span class="mi">176</span>
<span class="o">|</span>
<span class="o">|</span><span class="n">NEXT</span>		<span class="n">equ</span>	<span class="n">LV</span><span class="o">+</span><span class="mi">192</span>		<span class="p">;</span><span class="n">need</span> <span class="n">to</span> <span class="n">increase</span> <span class="n">LOCAL_SIZE</span>
<span class="o">|</span>
<span class="o">|--------------------------------------------------------------------------</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">fsave</span> <span class="n">offsets</span> <span class="n">and</span> <span class="n">bit</span> <span class="n">definitions</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">Offsets</span> <span class="n">are</span> <span class="n">defined</span> <span class="n">from</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">an</span> <span class="n">fsave</span> <span class="n">because</span> <span class="n">the</span> <span class="n">last</span> <span class="mi">10</span>
<span class="o">|</span>	<span class="n">words</span> <span class="n">of</span> <span class="n">a</span> <span class="n">busy</span> <span class="n">frame</span> <span class="n">are</span> <span class="n">the</span> <span class="n">same</span> <span class="n">as</span> <span class="n">the</span> <span class="n">unimplemented</span> <span class="n">frame</span><span class="p">.</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">CU_SAVEPC</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">92</span>		<span class="o">|</span> <span class="n">micro</span><span class="o">-</span><span class="n">pc</span> <span class="k">for</span> <span class="n">CU</span> <span class="p">(</span><span class="mi">1</span> <span class="n">byte</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPR_DIRTY_BITS</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">91</span>		<span class="o">|</span> <span class="n">fpr</span> <span class="n">dirty</span> <span class="n">bits</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WBTEMP</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">76</span>		<span class="o">|</span> <span class="n">write</span> <span class="n">back</span> <span class="n">temp</span> <span class="p">(</span><span class="mi">12</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WBTEMP_EX</span><span class="p">,</span><span class="n">WBTEMP</span>		<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">sign</span> <span class="n">and</span> <span class="n">exponent</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WBTEMP_HI</span><span class="p">,</span><span class="n">WBTEMP</span><span class="o">+</span><span class="mi">4</span>	<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">mantissa</span> <span class="p">[</span><span class="mi">63</span><span class="o">:</span><span class="mi">32</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WBTEMP_LO</span><span class="p">,</span><span class="n">WBTEMP</span><span class="o">+</span><span class="mi">8</span>	<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">mantissa</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mo">00</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WBTEMP_SGN</span><span class="p">,</span><span class="n">WBTEMP</span><span class="o">+</span><span class="mi">2</span>	<span class="o">|</span> <span class="n">used</span> <span class="n">to</span> <span class="n">store</span> <span class="n">sign</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPSR_SHADOW</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">64</span>		<span class="o">|</span> <span class="n">fpsr</span> <span class="n">shadow</span> <span class="n">reg</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPIARCU</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">60</span>		<span class="o">|</span> <span class="n">Instr</span><span class="p">.</span> <span class="n">addr</span><span class="p">.</span> <span class="n">reg</span><span class="p">.</span> <span class="k">for</span> <span class="n">CU</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">CMDREG2B</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">52</span>		<span class="o">|</span> <span class="n">cmd</span> <span class="n">reg</span> <span class="k">for</span> <span class="n">machine</span> <span class="mi">2</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">CMDREG3B</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">48</span>		<span class="o">|</span> <span class="n">cmd</span> <span class="n">reg</span> <span class="k">for</span> <span class="n">E3</span> <span class="n">exceptions</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bytes</span><span class="p">)</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">NMNEXC</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">44</span>		<span class="o">|</span> <span class="n">NMNEXC</span> <span class="p">(</span><span class="n">unsup</span><span class="p">,</span><span class="n">snan</span> <span class="n">bits</span> <span class="n">only</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmn_unsup_bit</span><span class="p">,</span><span class="mi">1</span>	<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmn_snan_bit</span><span class="p">,</span><span class="mi">0</span>	<span class="o">|</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">NMCEXC</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">43</span>		<span class="o">|</span> <span class="n">NMNEXC</span> <span class="o">&amp;</span> <span class="n">NMCEXC</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmn_operr_bit</span><span class="p">,</span><span class="mi">7</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmn_ovfl_bit</span><span class="p">,</span><span class="mi">6</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmn_unfl_bit</span><span class="p">,</span><span class="mi">5</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmc_unsup_bit</span><span class="p">,</span><span class="mi">4</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmc_snan_bit</span><span class="p">,</span><span class="mi">3</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmc_operr_bit</span><span class="p">,</span><span class="mi">2</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmc_ovfl_bit</span><span class="p">,</span><span class="mi">1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nmc_unfl_bit</span><span class="p">,</span><span class="mi">0</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">STAG</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">40</span>		<span class="o">|</span> <span class="n">source</span> <span class="n">tag</span> <span class="p">(</span><span class="mi">1</span> <span class="n">byte</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WBTEMP_GRS</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">40</span>		<span class="o">|</span> <span class="n">alias</span> <span class="n">wbtemp</span> <span class="n">guard</span><span class="p">,</span> <span class="n">round</span><span class="p">,</span> <span class="n">sticky</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">guard_bit</span><span class="p">,</span><span class="mi">1</span>		<span class="o">|</span> <span class="n">guard</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">bit</span> <span class="n">number</span> <span class="mi">1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">round_bit</span><span class="p">,</span><span class="mi">0</span>		<span class="o">|</span> <span class="n">round</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">bit</span> <span class="n">number</span> <span class="mi">0</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">stag_mask</span><span class="p">,</span><span class="mh">0xE0</span>		<span class="o">|</span> <span class="n">upper</span> <span class="mi">3</span> <span class="n">bits</span> <span class="n">are</span> <span class="n">source</span> <span class="n">tag</span> <span class="n">type</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">denorm_bit</span><span class="p">,</span><span class="mi">7</span>		<span class="o">|</span> <span class="n">bit</span> <span class="n">determines</span> <span class="k">if</span> <span class="n">denorm</span> <span class="n">or</span> <span class="n">unnorm</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">etemp15_bit</span><span class="p">,</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">etemp</span> <span class="n">exponent</span> <span class="n">bit</span> <span class="err">#</span><span class="mi">15</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">wbtemp66_bit</span><span class="p">,</span><span class="mi">2</span>		<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">mantissa</span> <span class="n">bit</span> <span class="err">#</span><span class="mi">66</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">wbtemp1_bit</span><span class="p">,</span><span class="mi">1</span>		<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">mantissa</span> <span class="n">bit</span> <span class="err">#</span><span class="mi">1</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">wbtemp0_bit</span><span class="p">,</span><span class="mi">0</span>		<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">mantissa</span> <span class="n">bit</span> <span class="err">#</span><span class="mi">0</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">STICKY</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">39</span>		<span class="o">|</span> <span class="n">holds</span> <span class="n">sticky</span> <span class="n">bit</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">sticky_bit</span><span class="p">,</span><span class="mi">7</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">CMDREG1B</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">36</span>		<span class="o">|</span> <span class="n">cmd</span> <span class="n">reg</span> <span class="k">for</span> <span class="n">E1</span> <span class="n">exceptions</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">kfact_bit</span><span class="p">,</span><span class="mi">12</span>		<span class="o">|</span> <span class="n">distinguishes</span> <span class="k">static</span><span class="o">/</span><span class="n">dynamic</span> <span class="n">k</span><span class="o">-</span><span class="n">factor</span>
<span class="o">|</span>					<span class="p">;</span><span class="n">on</span> <span class="n">packed</span> <span class="n">move</span> <span class="n">outs</span><span class="p">.</span>  <span class="n">NOTE</span><span class="o">:</span> <span class="n">this</span>
<span class="o">|</span>					<span class="p">;</span><span class="n">equate</span> <span class="n">only</span> <span class="n">works</span> <span class="n">when</span> <span class="n">CMDREG1B</span> <span class="n">is</span> <span class="n">in</span>
<span class="o">|</span>					<span class="p">;</span><span class="n">a</span> <span class="k">register</span><span class="p">.</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">CMDWORD</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">35</span>		<span class="o">|</span> <span class="n">command</span> <span class="n">word</span> <span class="n">in</span> <span class="n">cmd1b</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">direction_bit</span><span class="p">,</span><span class="mi">5</span>		<span class="o">|</span> <span class="n">bit</span> <span class="mi">0</span> <span class="n">in</span> <span class="n">opclass</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">size_bit2</span><span class="p">,</span><span class="mi">12</span>		<span class="o">|</span> <span class="n">bit</span> <span class="mi">2</span> <span class="n">in</span> <span class="n">size</span> <span class="n">field</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">DTAG</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">32</span>		<span class="o">|</span> <span class="n">dest</span> <span class="n">tag</span> <span class="p">(</span><span class="mi">1</span> <span class="n">byte</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">dtag_mask</span><span class="p">,</span><span class="mh">0xE0</span>		<span class="o">|</span> <span class="n">upper</span> <span class="mi">3</span> <span class="n">bits</span> <span class="n">are</span> <span class="n">dest</span> <span class="n">type</span> <span class="n">tag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">fptemp15_bit</span><span class="p">,</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">fptemp</span> <span class="n">exponent</span> <span class="n">bit</span> <span class="err">#</span><span class="mi">15</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">WB_BYTE</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">31</span>		<span class="o">|</span> <span class="n">holds</span> <span class="n">WBTE15</span> <span class="n">bit</span> <span class="p">(</span><span class="mi">1</span> <span class="n">byte</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">wbtemp15_bit</span><span class="p">,</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">wbtemp</span> <span class="n">exponent</span> <span class="n">bit</span> <span class="err">#</span><span class="mi">15</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">E_BYTE</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">28</span>		<span class="o">|</span> <span class="n">holds</span> <span class="n">E1</span> <span class="n">and</span> <span class="n">E3</span> <span class="n">bits</span> <span class="p">(</span><span class="mi">1</span> <span class="n">byte</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">E1</span><span class="p">,</span><span class="mi">2</span>		<span class="o">|</span> <span class="n">which</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">E1</span> <span class="n">flag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">E3</span><span class="p">,</span><span class="mi">1</span>		<span class="o">|</span> <span class="n">which</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">E3</span> <span class="n">flag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">SFLAG</span><span class="p">,</span><span class="mi">0</span>		<span class="o">|</span> <span class="n">which</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">S</span> <span class="n">flag</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">T_BYTE</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">27</span>		<span class="o">|</span> <span class="n">holds</span> <span class="n">T</span> <span class="n">and</span> <span class="n">U</span> <span class="n">bits</span> <span class="p">(</span><span class="mi">1</span> <span class="n">byte</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">XFLAG</span><span class="p">,</span><span class="mi">7</span>		<span class="o">|</span> <span class="n">which</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">X</span> <span class="n">flag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">UFLAG</span><span class="p">,</span><span class="mi">5</span>		<span class="o">|</span> <span class="n">which</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">U</span> <span class="n">flag</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">TFLAG</span><span class="p">,</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">which</span> <span class="n">bit</span> <span class="n">is</span> <span class="n">T</span> <span class="n">flag</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPTEMP</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">24</span>		<span class="o">|</span> <span class="n">fptemp</span> <span class="p">(</span><span class="mi">12</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPTEMP_EX</span><span class="p">,</span><span class="n">FPTEMP</span>		<span class="o">|</span> <span class="n">fptemp</span> <span class="n">sign</span> <span class="n">and</span> <span class="n">exponent</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPTEMP_HI</span><span class="p">,</span><span class="n">FPTEMP</span><span class="o">+</span><span class="mi">4</span>	<span class="o">|</span> <span class="n">fptemp</span> <span class="n">mantissa</span> <span class="p">[</span><span class="mi">63</span><span class="o">:</span><span class="mi">32</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPTEMP_LO</span><span class="p">,</span><span class="n">FPTEMP</span><span class="o">+</span><span class="mi">8</span>	<span class="o">|</span> <span class="n">fptemp</span> <span class="n">mantissa</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mo">00</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FPTEMP_SGN</span><span class="p">,</span><span class="n">FPTEMP</span><span class="o">+</span><span class="mi">2</span>	<span class="o">|</span> <span class="n">used</span> <span class="n">to</span> <span class="n">store</span> <span class="n">sign</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ETEMP</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="mi">12</span>		<span class="o">|</span> <span class="n">etemp</span> <span class="p">(</span><span class="mi">12</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ETEMP_EX</span><span class="p">,</span><span class="n">ETEMP</span>		<span class="o">|</span> <span class="n">etemp</span> <span class="n">sign</span> <span class="n">and</span> <span class="n">exponent</span> <span class="p">(</span><span class="mi">2</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ETEMP_HI</span><span class="p">,</span><span class="n">ETEMP</span><span class="o">+</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">etemp</span> <span class="n">mantissa</span> <span class="p">[</span><span class="mi">63</span><span class="o">:</span><span class="mi">32</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ETEMP_LO</span><span class="p">,</span><span class="n">ETEMP</span><span class="o">+</span><span class="mi">8</span>		<span class="o">|</span> <span class="n">etemp</span> <span class="n">mantissa</span> <span class="p">[</span><span class="mi">31</span><span class="o">:</span><span class="mo">00</span><span class="p">]</span> <span class="p">(</span><span class="mi">4</span> <span class="n">bytes</span><span class="p">)</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ETEMP_SGN</span><span class="p">,</span><span class="n">ETEMP</span><span class="o">+</span><span class="mi">2</span>		<span class="o">|</span> <span class="n">used</span> <span class="n">to</span> <span class="n">store</span> <span class="n">sign</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">EXC_SR</span><span class="p">,</span><span class="mi">4</span>		<span class="o">|</span> <span class="n">exception</span> <span class="n">frame</span> <span class="n">status</span> <span class="k">register</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">EXC_PC</span><span class="p">,</span><span class="mi">6</span>		<span class="o">|</span> <span class="n">exception</span> <span class="n">frame</span> <span class="n">program</span> <span class="n">counter</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">EXC_VEC</span><span class="p">,</span><span class="mi">10</span>		<span class="o">|</span> <span class="n">exception</span> <span class="n">frame</span> <span class="n">vector</span> <span class="p">(</span><span class="n">format</span><span class="o">+</span><span class="n">vector</span><span class="err">#</span><span class="p">)</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">EXC_EA</span><span class="p">,</span><span class="mi">12</span>		<span class="o">|</span> <span class="n">exception</span> <span class="n">frame</span> <span class="n">effective</span> <span class="n">address</span>
<span class="o">|</span>
<span class="o">|--------------------------------------------------------------------------</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">FPSR</span><span class="o">/</span><span class="n">FPCR</span> <span class="n">bits</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">neg_bit</span><span class="p">,</span><span class="mi">3</span>	<span class="o">|</span>  <span class="n">negative</span> <span class="n">result</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">z_bit</span><span class="p">,</span><span class="mi">2</span>	<span class="o">|</span>  <span class="n">zero</span> <span class="n">result</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inf_bit</span><span class="p">,</span><span class="mi">1</span>	<span class="o">|</span>  <span class="n">infinity</span> <span class="n">result</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nan_bit</span><span class="p">,</span><span class="mi">0</span>	<span class="o">|</span>  <span class="n">not</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="n">number</span> <span class="n">result</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">q_sn_bit</span><span class="p">,</span><span class="mi">7</span>	<span class="o">|</span>  <span class="n">sign</span> <span class="n">bit</span> <span class="n">of</span> <span class="n">quotient</span> <span class="n">byte</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">bsun_bit</span><span class="p">,</span><span class="mi">7</span>	<span class="o">|</span>  <span class="n">branch</span> <span class="n">on</span> <span class="n">unordered</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">snan_bit</span><span class="p">,</span><span class="mi">6</span>	<span class="o">|</span>  <span class="n">signalling</span> <span class="n">nan</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">operr_bit</span><span class="p">,</span><span class="mi">5</span>	<span class="o">|</span>  <span class="n">operand</span> <span class="n">error</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ovfl_bit</span><span class="p">,</span><span class="mi">4</span>	<span class="o">|</span>  <span class="n">overflow</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">unfl_bit</span><span class="p">,</span><span class="mi">3</span>	<span class="o">|</span>  <span class="n">underflow</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">dz_bit</span><span class="p">,</span><span class="mi">2</span>	<span class="o">|</span>  <span class="n">divide</span> <span class="n">by</span> <span class="n">zero</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inex2_bit</span><span class="p">,</span><span class="mi">1</span>	<span class="o">|</span>  <span class="n">inexact</span> <span class="n">result</span> <span class="mi">2</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inex1_bit</span><span class="p">,</span><span class="mi">0</span>	<span class="o">|</span>  <span class="n">inexact</span> <span class="n">result</span> <span class="mi">1</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">aiop_bit</span><span class="p">,</span><span class="mi">7</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">illegal</span> <span class="n">operation</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">aovfl_bit</span><span class="p">,</span><span class="mi">6</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">overflow</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">aunfl_bit</span><span class="p">,</span><span class="mi">5</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">underflow</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">adz_bit</span><span class="p">,</span><span class="mi">4</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">divide</span> <span class="n">by</span> <span class="n">zero</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ainex_bit</span><span class="p">,</span><span class="mi">3</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">inexact</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">FPSR</span> <span class="n">individual</span> <span class="n">bit</span> <span class="n">masks</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">neg_mask</span><span class="p">,</span><span class="mh">0x08000000</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">z_mask</span><span class="p">,</span><span class="mh">0x04000000</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inf_mask</span><span class="p">,</span><span class="mh">0x02000000</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nan_mask</span><span class="p">,</span><span class="mh">0x01000000</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">bsun_mask</span><span class="p">,</span><span class="mh">0x00008000</span>	<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">snan_mask</span><span class="p">,</span><span class="mh">0x00004000</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">operr_mask</span><span class="p">,</span><span class="mh">0x00002000</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ovfl_mask</span><span class="p">,</span><span class="mh">0x00001000</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">unfl_mask</span><span class="p">,</span><span class="mh">0x00000800</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">dz_mask</span><span class="p">,</span><span class="mh">0x00000400</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inex2_mask</span><span class="p">,</span><span class="mh">0x00000200</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inex1_mask</span><span class="p">,</span><span class="mh">0x00000100</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">aiop_mask</span><span class="p">,</span><span class="mh">0x00000080</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">illegal</span> <span class="n">operation</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">aovfl_mask</span><span class="p">,</span><span class="mh">0x00000040</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">overflow</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">aunfl_mask</span><span class="p">,</span><span class="mh">0x00000020</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">underflow</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">adz_mask</span><span class="p">,</span><span class="mh">0x00000010</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">divide</span> <span class="n">by</span> <span class="n">zero</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ainex_mask</span><span class="p">,</span><span class="mh">0x00000008</span>	<span class="o">|</span>  <span class="n">accrued</span> <span class="n">inexact</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">FPSR</span> <span class="n">combinations</span> <span class="n">used</span> <span class="n">in</span> <span class="n">the</span> <span class="n">FPSP</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">dzinf_mask</span><span class="p">,</span><span class="n">inf_mask</span><span class="o">+</span><span class="n">dz_mask</span><span class="o">+</span><span class="n">adz_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">opnan_mask</span><span class="p">,</span><span class="n">nan_mask</span><span class="o">+</span><span class="n">operr_mask</span><span class="o">+</span><span class="n">aiop_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nzi_mask</span><span class="p">,</span><span class="mh">0x01ffffff</span>	<span class="o">|</span>  <span class="n">clears</span> <span class="n">N</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">and</span> <span class="n">I</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">unfinx_mask</span><span class="p">,</span><span class="n">unfl_mask</span><span class="o">+</span><span class="n">inex2_mask</span><span class="o">+</span><span class="n">aunfl_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">unf2inx_mask</span><span class="p">,</span><span class="n">unfl_mask</span><span class="o">+</span><span class="n">inex2_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ovfinx_mask</span><span class="p">,</span><span class="n">ovfl_mask</span><span class="o">+</span><span class="n">inex2_mask</span><span class="o">+</span><span class="n">aovfl_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inx1a_mask</span><span class="p">,</span><span class="n">inex1_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inx2a_mask</span><span class="p">,</span><span class="n">inex2_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">snaniop_mask</span><span class="p">,</span><span class="n">nan_mask</span><span class="o">+</span><span class="n">snan_mask</span><span class="o">+</span><span class="n">aiop_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">naniop_mask</span><span class="p">,</span><span class="n">nan_mask</span><span class="o">+</span><span class="n">aiop_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">neginf_mask</span><span class="p">,</span><span class="n">neg_mask</span><span class="o">+</span><span class="n">inf_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">infaiop_mask</span><span class="p">,</span><span class="n">inf_mask</span><span class="o">+</span><span class="n">aiop_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">negz_mask</span><span class="p">,</span><span class="n">neg_mask</span><span class="o">+</span><span class="n">z_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">opaop_mask</span><span class="p">,</span><span class="n">operr_mask</span><span class="o">+</span><span class="n">aiop_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">unfl_inx_mask</span><span class="p">,</span><span class="n">unfl_mask</span><span class="o">+</span><span class="n">aunfl_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">ovfl_inx_mask</span><span class="p">,</span><span class="n">ovfl_mask</span><span class="o">+</span><span class="n">aovfl_mask</span><span class="o">+</span><span class="n">ainex_mask</span>
<span class="o">|</span>
<span class="o">|--------------------------------------------------------------------------</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">FPCR</span> <span class="n">rounding</span> <span class="n">modes</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">x_mode</span><span class="p">,</span><span class="mh">0x00</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">to</span> <span class="n">extended</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">s_mode</span><span class="p">,</span><span class="mh">0x40</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">to</span> <span class="n">single</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">d_mode</span><span class="p">,</span><span class="mh">0x80</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">to</span> <span class="kt">double</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">rn_mode</span><span class="p">,</span><span class="mh">0x00</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">nearest</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">rz_mode</span><span class="p">,</span><span class="mh">0x10</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">to</span> <span class="n">zero</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">rm_mode</span><span class="p">,</span><span class="mh">0x20</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">to</span> <span class="n">minus</span> <span class="n">infinity</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">rp_mode</span><span class="p">,</span><span class="mh">0x30</span>	<span class="o">|</span>  <span class="n">round</span> <span class="n">to</span> <span class="n">plus</span> <span class="n">infinity</span>
<span class="o">|</span>
<span class="o">|--------------------------------------------------------------------------</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">Miscellaneous</span> <span class="n">equates</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">signan_bit</span><span class="p">,</span><span class="mi">6</span>	<span class="o">|</span>  <span class="n">signalling</span> <span class="n">nan</span> <span class="n">bit</span> <span class="n">in</span> <span class="n">mantissa</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">sign_bit</span><span class="p">,</span><span class="mi">7</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">rnd_stky_bit</span><span class="p">,</span><span class="mi">29</span>	<span class="o">|</span>  <span class="n">round</span><span class="o">/</span><span class="n">sticky</span> <span class="n">bit</span> <span class="n">of</span> <span class="n">mantissa</span>
<span class="o">|</span>				<span class="n">this</span> <span class="n">can</span> <span class="n">only</span> <span class="n">be</span> <span class="n">used</span> <span class="k">if</span> <span class="n">in</span> <span class="n">a</span> <span class="n">data</span> <span class="k">register</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">sx_mask</span><span class="p">,</span><span class="mh">0x01800000</span> <span class="o">|</span>  <span class="n">set</span> <span class="n">s</span> <span class="n">and</span> <span class="n">x</span> <span class="n">bits</span> <span class="n">in</span> <span class="n">word</span> <span class="err">$</span><span class="mi">48</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LOCAL_EX</span><span class="p">,</span><span class="mi">0</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LOCAL_SGN</span><span class="p">,</span><span class="mi">2</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LOCAL_HI</span><span class="p">,</span><span class="mi">4</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LOCAL_LO</span><span class="p">,</span><span class="mi">8</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">LOCAL_GRS</span><span class="p">,</span><span class="mi">12</span>	<span class="o">|</span>  <span class="n">valid</span> <span class="n">ONLY</span> <span class="k">for</span> <span class="n">FP_SCR1</span><span class="p">,</span> <span class="n">FP_SCR2</span>
<span class="o">|</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">norm_tag</span><span class="p">,</span><span class="mh">0x00</span>	<span class="o">|</span>  <span class="n">tag</span> <span class="n">bits</span> <span class="n">in</span> <span class="p">{</span><span class="mi">7</span><span class="o">:</span><span class="mi">5</span><span class="p">}</span> <span class="n">position</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">zero_tag</span><span class="p">,</span><span class="mh">0x20</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">inf_tag</span><span class="p">,</span><span class="mh">0x40</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">nan_tag</span><span class="p">,</span><span class="mh">0x60</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">dnrm_tag</span><span class="p">,</span><span class="mh">0x80</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">fsave</span> <span class="n">sizes</span> <span class="n">and</span> <span class="n">formats</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">VER_4</span><span class="p">,</span><span class="mh">0x40</span>		<span class="o">|</span>  <span class="n">fpsp</span> <span class="n">compatible</span> <span class="n">version</span> <span class="n">numbers</span>
<span class="o">|</span>					<span class="n">are</span> <span class="n">in</span> <span class="n">the</span> <span class="err">$</span><span class="mi">40</span><span class="n">s</span> <span class="p">{</span><span class="err">$</span><span class="mi">40</span><span class="o">-</span><span class="err">$</span><span class="mf">4f</span><span class="p">}</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">VER_40</span><span class="p">,</span><span class="mh">0x40</span>		<span class="o">|</span>  <span class="n">original</span> <span class="n">version</span> <span class="n">number</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">VER_41</span><span class="p">,</span><span class="mh">0x41</span>		<span class="o">|</span>  <span class="n">revision</span> <span class="n">version</span> <span class="n">number</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">BUSY_SIZE</span><span class="p">,</span><span class="mi">100</span>		<span class="o">|</span>  <span class="n">size</span> <span class="n">of</span> <span class="n">busy</span> <span class="n">frame</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">BUSY_FRAME</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="n">BUSY_SIZE</span>	<span class="o">|</span>  <span class="n">start</span> <span class="n">of</span> <span class="n">busy</span> <span class="n">frame</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">UNIMP_40_SIZE</span><span class="p">,</span><span class="mi">44</span>		<span class="o">|</span>  <span class="n">size</span> <span class="n">of</span> <span class="n">orig</span> <span class="n">unimp</span> <span class="n">frame</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">UNIMP_41_SIZE</span><span class="p">,</span><span class="mi">52</span>		<span class="o">|</span>  <span class="n">size</span> <span class="n">of</span> <span class="n">rev</span> <span class="n">unimp</span> <span class="n">frame</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">IDLE_SIZE</span><span class="p">,</span><span class="mi">4</span>		<span class="o">|</span>  <span class="n">size</span> <span class="n">of</span> <span class="n">idle</span> <span class="n">frame</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">IDLE_FRAME</span><span class="p">,</span><span class="n">LV</span><span class="o">-</span><span class="n">IDLE_SIZE</span>	<span class="o">|</span>  <span class="n">start</span> <span class="n">of</span> <span class="n">idle</span> <span class="n">frame</span>
<span class="o">|</span>
<span class="o">|</span>	<span class="n">exception</span> <span class="n">vectors</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">TRACE_VEC</span><span class="p">,</span><span class="mh">0x2024</span>		<span class="o">|</span>  <span class="n">trace</span> <span class="n">trap</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">FLINE_VEC</span><span class="p">,</span><span class="mh">0x002C</span>		<span class="o">|</span>  <span class="n">real</span> <span class="n">F</span><span class="o">-</span><span class="n">line</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">UNIMP_VEC</span><span class="p">,</span><span class="mh">0x202C</span>		<span class="o">|</span>  <span class="n">unimplemented</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">INEX_VEC</span><span class="p">,</span><span class="mh">0x00C4</span>
<span class="o">|</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">dbl_thresh</span><span class="p">,</span><span class="mh">0x3C01</span>
	<span class="p">.</span><span class="n">set</span>	<span class="n">sgl_thresh</span><span class="p">,</span><span class="mh">0x3F81</span>
<span class="o">|</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
