f | baboon.c | s | 2.4K | 93 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: fix baboon irq disable and shutdown  The baboon_disabled hack is broken because it is missing an irq shutdown method. So releasing a Baboon irq kills the other Baboon irqs. But we don't really need this hack because we don't have media bay support and TREX uses a NuBus IRQ. Remove it.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | macints.c | s | 8.2K | 309 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: oss irq fixes  The IOP driver calls into the OSS driver to enable its IRQ. This undesirable coupling between drivers only exists because the OSS driver doesn't correctly handle all of its machspec IRQs.  Fix OSS handling of enable/disable for VIA1 IRQs (8 thru 15) which includes MAC_IRQ_ADB.  Back when I implemented pmac_zilog support I redefined IRQ_MAC_SCC incorrectly. Change this to a machspec IRQ so that it works on OSS.  Clean up the unused OSS audio IRQ and OSS_IRQLEV_* cruft that only confuses things.  Fix the OSS description in macints.c and remove an obsolete comment.  Don't enable the VIA1 irq before registering the handler.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | Makefile | g | 142B |  | Finn Thain | fthain@telegraphics.com.au | 1267291869 |  | mac68k: replace mac68k SCC code with platform device  Remove the old 68k Mac serial port code and a lot of related cruft. Add new SCC platform devices to mac 68k platform.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | mac_penguin.S | g | 11K |  | Linus Torvalds | torvalds@ppc970.osdl.org | 1113690036 |  | Linux-2.6.12-rc2  Initial git repository build. I'm not bothering with the full history, even though we have it. We can create a separate "historical" git archive of that later if we want to, and in the meantime it's about 3.2GB when imported into git - space that would just make the early git days unnecessarily complicated, when we don't have a lot of good infrastructure for it.  Let it rip!
f | psc.c | s | 4.2K | 152 | Finn Thain | fthain@telegraphics.com.au | 1323543166 |  | m68k/mac: cleanup mac_irq_pending  mac_irq_pending() has only one caller (mac_esp.c). Nothing tests for Baboon, PSC or OSS pending interrupts. Until that need arises, let's keep it simple and remove all the unused abstraction. Replace it with a routine to check for SCSI DRQ.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | iop.c | s | 17K | 528 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: oss irq fixes  The IOP driver calls into the OSS driver to enable its IRQ. This undesirable coupling between drivers only exists because the OSS driver doesn't correctly handle all of its machspec IRQs.  Fix OSS handling of enable/disable for VIA1 IRQs (8 thru 15) which includes MAC_IRQ_ADB.  Back when I implemented pmac_zilog support I redefined IRQ_MAC_SCC incorrectly. Change this to a machspec IRQ so that it works on OSS.  Clean up the unused OSS audio IRQ and OSS_IRQLEV_* cruft that only confuses things.  Fix the OSS description in macints.c and remove an obsolete comment.  Don't enable the VIA1 irq before registering the handler.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | misc.c | s | 17K | 658 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for M68K  Disintegrate asm/system.h for M68K.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Greg Ungerer <gerg@uclinux.org> cc: linux-m68k@lists.linux-m68k.org
f | config.c | s | 25K | 957 | Geert Uytterhoeven | geert@linux-m68k.org | 1333313871 |  | m68k/mac: Add missing platform check before registering platform devices  On multi-platform kernels, the Mac platform devices should be registered when running on Mac only. Else it may crash later.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Cc: stable@vger.kernel.org
f | via.c | s | 16K | 541 | Finn Thain | fthain@telegraphics.com.au | 1323543168 |  | m68k/mac: cleanup macro case  Code style convention has macro names in uppercase. Change MAC_VIA_IIci to MAC_VIA_IICI.  Also remove an obsolete comment.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | oss.c | s | 5.3K | 196 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: oss irq fixes  The IOP driver calls into the OSS driver to enable its IRQ. This undesirable coupling between drivers only exists because the OSS driver doesn't correctly handle all of its machspec IRQs.  Fix OSS handling of enable/disable for VIA1 IRQs (8 thru 15) which includes MAC_IRQ_ADB.  Back when I implemented pmac_zilog support I redefined IRQ_MAC_SCC incorrectly. Change this to a machspec IRQ so that it works on OSS.  Clean up the unused OSS audio IRQ and OSS_IRQLEV_* cruft that only confuses things.  Fix the OSS description in macints.c and remove an obsolete comment.  Don't enable the VIA1 irq before registering the handler.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | macboing.c | s | 8.2K | 270 | Linus Torvalds | torvalds@linux-foundation.org | 1287952899 |  | Merge branch 'for-next' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial  * 'for-next' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/trivial: (39 commits)   Update broken web addresses in arch directory.   Update broken web addresses in the kernel.   Revert "drivers/usb: Remove unnecessary return's from void functions" for musb gadget   Revert "Fix typo: configuation => configuration" partially   ida: document IDA_BITMAP_LONGS calculation   ext2: fix a typo on comment in ext2/inode.c   drivers/scsi: Remove unnecessary casts of private_data   drivers/s390: Remove unnecessary casts of private_data   net/sunrpc/rpc_pipe.c: Remove unnecessary casts of private_data   drivers/infiniband: Remove unnecessary casts of private_data   drivers/gpu/drm: Remove unnecessary casts of private_data   kernel/pm_qos_params.c: Remove unnecessary casts of private_data   fs/ecryptfs: Remove unnecessary casts of private_data   fs/seq_file.c: Remove unnecessary casts of private_data   arm: uengine.c: remove C99 comments   arm: scoop.c: remove C99 comments   Fix typo configue => configure in comments   Fix typo: configuation => configuration   Fix typo interrest[ing||ed] => interest[ing||ed]   Fix various typos of valid in comments   ...  Fix up trivial conflicts in: 	drivers/char/ipmi/ipmi_si_intf.c 	drivers/usb/gadget/rndis.c 	net/irda/irnet/irnet_ppp.c
