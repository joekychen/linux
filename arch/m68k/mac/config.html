<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › mac › config.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../index.html"></a><h1>config.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *  linux/arch/m68k/mac/config.c</span>
<span class="cm"> *</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file COPYING in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Miscellaneous linux stuff</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/mm.h&gt;</span>
<span class="cp">#include &lt;linux/tty.h&gt;</span>
<span class="cp">#include &lt;linux/console.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cm">/* keyb */</span>
<span class="cp">#include &lt;linux/random.h&gt;</span>
<span class="cp">#include &lt;linux/delay.h&gt;</span>
<span class="cm">/* keyb */</span>
<span class="cp">#include &lt;linux/init.h&gt;</span>
<span class="cp">#include &lt;linux/vt_kern.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/adb.h&gt;</span>
<span class="cp">#include &lt;linux/cuda.h&gt;</span>

<span class="cp">#define BOOTINFO_COMPAT_1_0</span>
<span class="cp">#include &lt;asm/setup.h&gt;</span>
<span class="cp">#include &lt;asm/bootinfo.h&gt;</span>

<span class="cp">#include &lt;asm/io.h&gt;</span>
<span class="cp">#include &lt;asm/irq.h&gt;</span>
<span class="cp">#include &lt;asm/pgtable.h&gt;</span>
<span class="cp">#include &lt;asm/rtc.h&gt;</span>
<span class="cp">#include &lt;asm/machdep.h&gt;</span>

<span class="cp">#include &lt;asm/macintosh.h&gt;</span>
<span class="cp">#include &lt;asm/macints.h&gt;</span>
<span class="cp">#include &lt;asm/machw.h&gt;</span>

<span class="cp">#include &lt;asm/mac_iop.h&gt;</span>
<span class="cp">#include &lt;asm/mac_via.h&gt;</span>
<span class="cp">#include &lt;asm/mac_oss.h&gt;</span>
<span class="cp">#include &lt;asm/mac_psc.h&gt;</span>

<span class="cm">/* Mac bootinfo struct */</span>
<span class="k">struct</span> <span class="n">mac_booter_data</span> <span class="n">mac_bi_data</span><span class="p">;</span>

<span class="cm">/* The phys. video addr. - might be bogus on some machines */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mac_orig_videoaddr</span><span class="p">;</span>

<span class="cm">/* Mac specific timer functions */</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">mac_gettimeoffset</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mac_hwclk</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="k">struct</span> <span class="n">rtc_time</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">mac_set_clock_mmss</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">iop_preinit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">iop_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">via_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">via_init_clock</span><span class="p">(</span><span class="n">irq_handler_t</span> <span class="n">func</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">via_flush_cache</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">oss_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">psc_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">baboon_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">mac_mksound</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">mac_get_model</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">mac_identify</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="k">static</span> <span class="kt">void</span> <span class="n">mac_report_hardware</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#ifdef CONFIG_EARLY_PRINTK</span>
<span class="n">asmlinkage</span> <span class="kt">void</span> <span class="n">__init</span> <span class="n">mac_early_print</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">n</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">mac_early_cons_write</span><span class="p">(</span><span class="k">struct</span> <span class="n">console</span> <span class="o">*</span><span class="n">con</span><span class="p">,</span>
                                 <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">mac_early_print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">console</span> <span class="n">__initdata</span> <span class="n">mac_early_cons</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>  <span class="o">=</span> <span class="s">&quot;early&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">write</span> <span class="o">=</span> <span class="n">mac_early_cons_write</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">CON_PRINTBUFFER</span> <span class="o">|</span> <span class="n">CON_BOOT</span><span class="p">,</span>
	<span class="p">.</span><span class="n">index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">__init</span> <span class="nf">mac_unregister_early_cons</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* mac_early_print can&#39;t be used after init sections are discarded */</span>
	<span class="k">return</span> <span class="n">unregister_console</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mac_early_cons</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">late_initcall</span><span class="p">(</span><span class="n">mac_unregister_early_cons</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">mac_sched_init</span><span class="p">(</span><span class="n">irq_handler_t</span> <span class="n">vector</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">via_init_clock</span><span class="p">(</span><span class="n">vector</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Parse a Macintosh-specific record in the bootinfo</span>
<span class="cm"> */</span>

<span class="kt">int</span> <span class="n">__init</span> <span class="nf">mac_parse_bootinfo</span><span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">bi_record</span> <span class="o">*</span><span class="n">record</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">int</span> <span class="n">unknown</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">const</span> <span class="n">u_long</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="n">record</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">tag</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">BI_MAC_MODEL</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_VADDR</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videoaddr</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_VDEPTH</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videodepth</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_VROW</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videorow</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_VDIM</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">dimensions</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_VLOGICAL</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videological</span> <span class="o">=</span> <span class="n">VIDEOMEMBASE</span> <span class="o">+</span> <span class="p">(</span><span class="o">*</span><span class="n">data</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">VIDEOMEMMASK</span><span class="p">);</span>
		<span class="n">mac_orig_videoaddr</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_SCCBASE</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">sccbase</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_BTIME</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">boottime</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_GMTBIAS</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">gmtbias</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_MEMSIZE</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">memsize</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_CPUID</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">cpuid</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">BI_MAC_ROMBASE</span>:
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">rombase</span> <span class="o">=</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">unknown</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">unknown</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Flip into 24bit mode for an instant - flushes the L2 cache card. We</span>
<span class="cm"> * have to disable interrupts for this. Our IRQ handlers will crap</span>
<span class="cm"> * themselves if they take an IRQ in 24bit mode!</span>
<span class="cm"> */</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">mac_cache_card_flush</span><span class="p">(</span><span class="kt">int</span> <span class="n">writeback</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>

	<span class="n">local_irq_save</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>
	<span class="n">via_flush_cache</span><span class="p">();</span>
	<span class="n">local_irq_restore</span><span class="p">(</span><span class="n">flags</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">config_mac</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">MACH_IS_MAC</span><span class="p">)</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span> <span class="s">&quot;ERROR: no Mac, but config_mac() called!!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="n">mach_sched_init</span> <span class="o">=</span> <span class="n">mac_sched_init</span><span class="p">;</span>
	<span class="n">mach_init_IRQ</span> <span class="o">=</span> <span class="n">mac_init_IRQ</span><span class="p">;</span>
	<span class="n">mach_get_model</span> <span class="o">=</span> <span class="n">mac_get_model</span><span class="p">;</span>
	<span class="n">mach_gettimeoffset</span> <span class="o">=</span> <span class="n">mac_gettimeoffset</span><span class="p">;</span>
	<span class="n">mach_hwclk</span> <span class="o">=</span> <span class="n">mac_hwclk</span><span class="p">;</span>
	<span class="n">mach_set_clock_mmss</span> <span class="o">=</span> <span class="n">mac_set_clock_mmss</span><span class="p">;</span>
	<span class="n">mach_reset</span> <span class="o">=</span> <span class="n">mac_reset</span><span class="p">;</span>
	<span class="n">mach_halt</span> <span class="o">=</span> <span class="n">mac_poweroff</span><span class="p">;</span>
	<span class="n">mach_power_off</span> <span class="o">=</span> <span class="n">mac_poweroff</span><span class="p">;</span>
	<span class="n">mach_max_dma_address</span> <span class="o">=</span> <span class="mh">0xffffffff</span><span class="p">;</span>
<span class="cp">#if defined(CONFIG_INPUT_M68K_BEEP) || defined(CONFIG_INPUT_M68K_BEEP_MODULE)</span>
	<span class="n">mach_beep</span> <span class="o">=</span> <span class="n">mac_mksound</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_EARLY_PRINTK</span>
	<span class="n">register_console</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mac_early_cons</span><span class="p">);</span>
<span class="cp">#endif</span>

	<span class="cm">/*</span>
<span class="cm">	 * Determine hardware present</span>
<span class="cm">	 */</span>

	<span class="n">mac_identify</span><span class="p">();</span>
	<span class="n">mac_report_hardware</span><span class="p">();</span>

	<span class="cm">/*</span>
<span class="cm">	 * AFAIK only the IIci takes a cache card.  The IIfx has onboard</span>
<span class="cm">	 * cache ... someone needs to figure out how to tell if it&#39;s on or</span>
<span class="cm">	 * not.</span>
<span class="cm">	 */</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">==</span> <span class="n">MAC_MODEL_IICI</span>
	    <span class="o">||</span> <span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">==</span> <span class="n">MAC_MODEL_IIFX</span><span class="p">)</span>
		<span class="n">mach_l2_flush</span> <span class="o">=</span> <span class="n">mac_cache_card_flush</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/*</span>
<span class="cm"> * Macintosh Table: hardcoded model configuration data.</span>
<span class="cm"> *</span>
<span class="cm"> * Much of this was defined by Alan, based on who knows what docs.</span>
<span class="cm"> * I&#39;ve added a lot more, and some of that was pure guesswork based</span>
<span class="cm"> * on hardware pages present on the Mac web site. Possibly wildly</span>
<span class="cm"> * inaccurate, so look here if a new Mac model won&#39;t run. Example: if</span>
<span class="cm"> * a Mac crashes immediately after the VIA1 registers have been dumped</span>
<span class="cm"> * to the screen, it probably died attempting to read DirB on a RBV.</span>
<span class="cm"> * Meaning it should have MAC_VIA_IICI here :-)</span>
<span class="cm"> */</span>

<span class="k">struct</span> <span class="n">mac_model</span> <span class="o">*</span><span class="n">macintosh_config</span><span class="p">;</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">macintosh_config</span><span class="p">);</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mac_model</span> <span class="n">mac_data_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/*</span>
<span class="cm">	 * We&#39;ll pretend to be a Macintosh II, that&#39;s pretty safe.</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Unknown&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_IWM</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Original Mac II hardware</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_IWM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IIX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIx&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IICX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIcx&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_SE30</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;SE/30&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Weirdified Mac II hardware - all subtly different. Gee thanks</span>
<span class="cm">	 * Apple. All these boxes seem to have VIA2 in a different place to</span>
<span class="cm">	 * the Mac II (+1A000 rather than +4000)</span>
<span class="cm">	 * CSA: see http://developer.apple.com/technotes/hw/hw_09.html</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIci&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IIFX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIfx&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IOP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_IOP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_IOP</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIsi&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IIVI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIvi&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_IIVX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;IIvx&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Classic models (guessing: similar to SE/30? Nope, similar to LC...)</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_CLII</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Classic II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_CCL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Color Classic&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_CCLII</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Color Classic II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Some Mac LC machines. Basically the same as the IIci, ADB like IIsi</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_LC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;LC&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_LCII</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;LC II&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_LCIII</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;LC III&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Quadra. Video is at 0xF9000000, via is like a MacII. We label it</span>
<span class="cm">	 * differently as some of the stuff connected to VIA2 seems different.</span>
<span class="cm">	 * Better SCSI chip and onboard ethernet using a NatSemi SONIC except</span>
<span class="cm">	 * the 660AV and 840AV which use an AMD 79C940 (MACE).</span>
<span class="cm">	 * The 700, 900 and 950 have some I/O chips in the wrong place to</span>
<span class="cm">	 * confuse us. The 840AV has a SCSI location of its own (same as</span>
<span class="cm">	 * the 660AV).</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q605</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 605&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q605_ACC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 605&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q610</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 610&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q630</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 630&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ide_type</span>	<span class="o">=</span> <span class="n">MAC_IDE_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q650</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 650&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* The Q700 does have a NS Sonic */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q700</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 700&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 800&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q840</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 840AV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_PSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_MACE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_AV</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q900</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 900&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IOP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_IOP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_IOP</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_Q950</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Quadra 950&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IOP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_IOP</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_IOP</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Performa - more LC type machines</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P460</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 460&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P475</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 475&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P475F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 475&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P520</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 520&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P550</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 550&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="cm">/* These have the comm slot, and therefore possibly SONIC ethernet */</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P575</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 575&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P588</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 588&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ide_type</span>	<span class="o">=</span> <span class="n">MAC_IDE_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_TV</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;TV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_P600</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Performa 600&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_IISI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Centris - just guessing again; maybe like Quadra.</span>
<span class="cm">	 * The C610 may or may not have SONIC. We probe to make sure.</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_C610</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Centris 610&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_C650</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Centris 650&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_II</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_C660</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;Centris 660AV&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_CUDA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_QUADRA3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_PSC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_MACE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_AV</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * The PowerBooks all the same &quot;Combo&quot; custom IC for SCSI and SCC</span>
<span class="cm">	 * and a PMU (in two variations?) for ADB. Most of them use the</span>
<span class="cm">	 * Quadra-style VIAs. A few models also have IDE from hell.</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB140</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 140&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB145</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 145&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB150</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 150&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ide_type</span>	<span class="o">=</span> <span class="n">MAC_IDE_PB</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB160</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 160&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB165</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 165&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB165C</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 165c&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB170</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 170&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB180</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 180&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB180C</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 180c&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB190</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 190&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ide_type</span>	<span class="o">=</span> <span class="n">MAC_IDE_BABOON</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB520</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook 520&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">ether_type</span>	<span class="o">=</span> <span class="n">MAC_ETHER_SONIC</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * PowerBook Duos are pretty much like normal PowerBooks</span>
<span class="cm">	 * All of these probably have onboard SONIC in the Dock which</span>
<span class="cm">	 * means we&#39;ll have to probe for it eventually.</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB210</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook Duo 210&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB230</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook Duo 230&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB250</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook Duo 250&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB270C</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook Duo 270c&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB280</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook Duo 280&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="n">MAC_MODEL_PB280C</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;PowerBook Duo 280c&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">adb_type</span>	<span class="o">=</span> <span class="n">MAC_ADB_PB2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">via_type</span>	<span class="o">=</span> <span class="n">MAC_VIA_IICI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scsi_type</span>	<span class="o">=</span> <span class="n">MAC_SCSI_OLD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">scc_type</span>	<span class="o">=</span> <span class="n">MAC_SCC_QUADRA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nubus_type</span>	<span class="o">=</span> <span class="n">MAC_NUBUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">floppy_type</span>	<span class="o">=</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span><span class="p">,</span>
	<span class="p">},</span>

	<span class="cm">/*</span>
<span class="cm">	 * Other stuff?</span>
<span class="cm">	 */</span>

	<span class="p">{</span>
		<span class="p">.</span><span class="n">ident</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">scc_a_rsrcs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">scc_b_rsrcs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span> <span class="p">},</span>
	<span class="p">{</span> <span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="p">},</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">platform_device</span> <span class="n">scc_a_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;scc&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>             <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">scc_a_rsrcs</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>       <span class="o">=</span> <span class="n">scc_a_rsrcs</span><span class="p">,</span>
<span class="p">};</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">scc_a_pdev</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">platform_device</span> <span class="n">scc_b_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;scc&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>             <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">scc_b_rsrcs</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>       <span class="o">=</span> <span class="n">scc_b_rsrcs</span><span class="p">,</span>
<span class="p">};</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">scc_b_pdev</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">mac_identify</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">mac_model</span> <span class="o">*</span><span class="n">m</span><span class="p">;</span>

	<span class="cm">/* Penguin data useful? */</span>
	<span class="kt">int</span> <span class="n">model</span> <span class="o">=</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">model</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* no bootinfo model id -&gt; NetBSD booter was used! */</span>
		<span class="cm">/* XXX FIXME: breaks for model &gt; 31 */</span>
		<span class="n">model</span> <span class="o">=</span> <span class="p">(</span><span class="n">mac_bi_data</span><span class="p">.</span><span class="n">cpuid</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">63</span><span class="p">;</span>
		<span class="n">printk</span><span class="p">(</span><span class="n">KERN_WARNING</span> <span class="s">&quot;No bootinfo model ID, using cpuid instead &quot;</span>
		       <span class="s">&quot;(obsolete bootloader?)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="n">macintosh_config</span> <span class="o">=</span> <span class="n">mac_data_table</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">m</span> <span class="o">=</span> <span class="n">macintosh_config</span><span class="p">;</span> <span class="n">m</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">m</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">==</span> <span class="n">model</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">macintosh_config</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cm">/* Set up serial port resources for the console initcall. */</span>

	<span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">resource_size_t</span><span class="p">)</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">sccbase</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
	<span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">end</span>   <span class="o">=</span> <span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">start</span><span class="p">;</span>
	<span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">resource_size_t</span><span class="p">)</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">sccbase</span><span class="p">;</span>
	<span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">end</span>   <span class="o">=</span> <span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">start</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">scc_type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">MAC_SCC_PSC</span>:
		<span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_MAC_SCC_A</span><span class="p">;</span>
		<span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_MAC_SCC_B</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="cm">/* On non-PSC machines, the serial ports share an IRQ. */</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">==</span> <span class="n">MAC_MODEL_IIFX</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_MAC_SCC</span><span class="p">;</span>
			<span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_MAC_SCC</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="n">scc_a_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_AUTO_4</span><span class="p">;</span>
			<span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">start</span> <span class="o">=</span> <span class="n">scc_b_rsrcs</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_AUTO_4</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * We need to pre-init the IOPs, if any. Otherwise</span>
<span class="cm">	 * the serial console won&#39;t work if the user had</span>
<span class="cm">	 * the serial ports set to &quot;Faster&quot; mode in MacOS.</span>
<span class="cm">	 */</span>
	<span class="n">iop_preinit</span><span class="p">();</span>

	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;Detected Macintosh model: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">model</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Report booter data:</span>
<span class="cm">	 */</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot; Penguin bootinfo data:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot; Video: addr 0x%lx &quot;</span>
		<span class="s">&quot;row 0x%lx depth %lx dimensions %ld x %ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videoaddr</span><span class="p">,</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videorow</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videodepth</span><span class="p">,</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">dimensions</span> <span class="o">&amp;</span> <span class="mh">0xFFFF</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">dimensions</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">);</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot; Videological 0x%lx phys. 0x%lx, SCC at 0x%lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">videological</span><span class="p">,</span> <span class="n">mac_orig_videoaddr</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">sccbase</span><span class="p">);</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot; Boottime: 0x%lx GMTBias: 0x%lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">boottime</span><span class="p">,</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">gmtbias</span><span class="p">);</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_DEBUG</span> <span class="s">&quot; Machine ID: %ld CPUid: 0x%lx memory size: 0x%lx</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
		<span class="n">mac_bi_data</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">cpuid</span><span class="p">,</span> <span class="n">mac_bi_data</span><span class="p">.</span><span class="n">memsize</span><span class="p">);</span>

	<span class="n">iop_init</span><span class="p">();</span>
	<span class="n">via_init</span><span class="p">();</span>
	<span class="n">oss_init</span><span class="p">();</span>
	<span class="n">psc_init</span><span class="p">();</span>
	<span class="n">baboon_init</span><span class="p">();</span>

<span class="cp">#ifdef CONFIG_ADB_CUDA</span>
	<span class="n">find_via_cuda</span><span class="p">();</span>
<span class="cp">#endif</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="n">__init</span> <span class="nf">mac_report_hardware</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;Apple Macintosh %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">mac_get_model</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">strcpy</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="s">&quot;Macintosh &quot;</span><span class="p">);</span>
	<span class="n">strcat</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">swim_rsrc</span> <span class="o">=</span> <span class="p">{</span> <span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span> <span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">swim_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;swim&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">swim_rsrc</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">esp_0_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;mac_esp&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">esp_1_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;mac_esp&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">sonic_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;macsonic&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">mace_pdev</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;macmace&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">__init</span> <span class="nf">mac_platform_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">u8</span> <span class="o">*</span><span class="n">swim_base</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">MACH_IS_MAC</span><span class="p">)</span>
		<span class="k">return</span> <span class="o">-</span><span class="n">ENODEV</span><span class="p">;</span>

	<span class="cm">/*</span>
<span class="cm">	 * Serial devices</span>
<span class="cm">	 */</span>

	<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scc_a_pdev</span><span class="p">);</span>
	<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scc_b_pdev</span><span class="p">);</span>

	<span class="cm">/*</span>
<span class="cm">	 * Floppy device</span>
<span class="cm">	 */</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">floppy_type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">MAC_FLOPPY_SWIM_ADDR1</span>:
		<span class="n">swim_base</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="p">)(</span><span class="n">VIA1_BASE</span> <span class="o">+</span> <span class="mh">0x1E000</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MAC_FLOPPY_SWIM_ADDR2</span>:
		<span class="n">swim_base</span> <span class="o">=</span> <span class="p">(</span><span class="n">u8</span> <span class="o">*</span><span class="p">)(</span><span class="n">VIA1_BASE</span> <span class="o">+</span> <span class="mh">0x16000</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">swim_base</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">swim_base</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">swim_rsrc</span><span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">resource_size_t</span><span class="p">)</span> <span class="n">swim_base</span><span class="p">,</span>
		<span class="n">swim_rsrc</span><span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="p">(</span><span class="n">resource_size_t</span><span class="p">)</span> <span class="n">swim_base</span> <span class="o">+</span> <span class="mh">0x2000</span><span class="p">,</span>
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">swim_pdev</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * SCSI device(s)</span>
<span class="cm">	 */</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">scsi_type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">MAC_SCSI_QUADRA</span>:
	<span class="k">case</span> <span class="n">MAC_SCSI_QUADRA3</span>:
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">esp_0_pdev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MAC_SCSI_QUADRA2</span>:
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">esp_0_pdev</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">((</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">==</span> <span class="n">MAC_MODEL_Q900</span><span class="p">)</span> <span class="o">||</span>
		    <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">ident</span> <span class="o">==</span> <span class="n">MAC_MODEL_Q950</span><span class="p">))</span>
			<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">esp_1_pdev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="cm">/*</span>
<span class="cm">	 * Ethernet device</span>
<span class="cm">	 */</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">macintosh_config</span><span class="o">-&gt;</span><span class="n">ether_type</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="n">MAC_ETHER_SONIC</span>:
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sonic_pdev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="n">MAC_ETHER_MACE</span>:
		<span class="n">platform_device_register</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mace_pdev</span><span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">arch_initcall</span><span class="p">(</span><span class="n">mac_platform_init</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:3}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../javascript/docco.min.js"></script>
</html>
