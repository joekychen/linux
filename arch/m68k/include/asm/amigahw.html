<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › include › asm › amigahw.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>amigahw.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">** asm-m68k/amigahw.h -- This header defines some macros and pointers for</span>
<span class="cm">**                    the various Amiga custom hardware registers.</span>
<span class="cm">**                    The naming conventions used here conform to those</span>
<span class="cm">**                    used in the Amiga Hardware Reference Manual, 3rd Edition</span>
<span class="cm">**</span>
<span class="cm">** Copyright 1992 by Greg Harp</span>
<span class="cm">**</span>
<span class="cm">** This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm">** License.  See the file COPYING in the main directory of this archive</span>
<span class="cm">** for more details.</span>
<span class="cm">**</span>
<span class="cm">** Created: 9/24/92 by Greg Harp</span>
<span class="cm">*/</span>

<span class="cp">#ifndef _M68K_AMIGAHW_H</span>
<span class="cp">#define _M68K_AMIGAHW_H</span>

<span class="cp">#include &lt;linux/ioport.h&gt;</span>

    <span class="cm">/*</span>
<span class="cm">     *  Different Amiga models</span>
<span class="cm">     */</span>

<span class="cp">#define AMI_UNKNOWN	(0)</span>
<span class="cp">#define AMI_500		(1)</span>
<span class="cp">#define AMI_500PLUS	(2)</span>
<span class="cp">#define AMI_600		(3)</span>
<span class="cp">#define AMI_1000	(4)</span>
<span class="cp">#define AMI_1200	(5)</span>
<span class="cp">#define AMI_2000	(6)</span>
<span class="cp">#define AMI_2500	(7)</span>
<span class="cp">#define AMI_3000	(8)</span>
<span class="cp">#define AMI_3000T	(9)</span>
<span class="cp">#define AMI_3000PLUS	(10)</span>
<span class="cp">#define AMI_4000	(11)</span>
<span class="cp">#define AMI_4000T	(12)</span>
<span class="cp">#define AMI_CDTV	(13)</span>
<span class="cp">#define AMI_CD32	(14)</span>
<span class="cp">#define AMI_DRACO	(15)</span>


    <span class="cm">/*</span>
<span class="cm">     *  Chipsets</span>
<span class="cm">     */</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">amiga_chipset</span><span class="p">;</span>

<span class="cp">#define CS_STONEAGE	(0)</span>
<span class="cp">#define CS_OCS		(1)</span>
<span class="cp">#define CS_ECS		(2)</span>
<span class="cp">#define CS_AGA		(3)</span>


    <span class="cm">/*</span>
<span class="cm">     *  Miscellaneous</span>
<span class="cm">     */</span>

<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">amiga_eclock</span><span class="p">;</span>	<span class="cm">/* 700 kHz E Peripheral Clock */</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">amiga_colorclock</span><span class="p">;</span>	<span class="cm">/* 3.5 MHz Color Clock */</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">amiga_chip_size</span><span class="p">;</span>	<span class="cm">/* Chip RAM Size (bytes) */</span>
<span class="k">extern</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">amiga_vblank</span><span class="p">;</span>	<span class="cm">/* VBLANK Frequency */</span>


<span class="cp">#define AMIGAHW_DECLARE(name)	unsigned name : 1</span>
<span class="cp">#define AMIGAHW_SET(name)	(amiga_hw_present.name = 1)</span>
<span class="cp">#define AMIGAHW_PRESENT(name)	(amiga_hw_present.name)</span>

<span class="k">struct</span> <span class="n">amiga_hw_present</span> <span class="p">{</span>
    <span class="cm">/* video hardware */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_VIDEO</span><span class="p">);</span>		<span class="cm">/* Amiga Video */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_BLITTER</span><span class="p">);</span>	<span class="cm">/* Amiga Blitter */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMBER_FF</span><span class="p">);</span>		<span class="cm">/* Amber Flicker Fixer */</span>
    <span class="cm">/* sound hardware */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_AUDIO</span><span class="p">);</span>		<span class="cm">/* Amiga Audio */</span>
    <span class="cm">/* disk storage interfaces */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_FLOPPY</span><span class="p">);</span>	<span class="cm">/* Amiga Floppy */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">A3000_SCSI</span><span class="p">);</span>	<span class="cm">/* SCSI (wd33c93, A3000 alike) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">A4000_SCSI</span><span class="p">);</span>	<span class="cm">/* SCSI (ncr53c710, A4000T alike) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">A1200_IDE</span><span class="p">);</span>		<span class="cm">/* IDE (A1200 alike) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">A4000_IDE</span><span class="p">);</span>		<span class="cm">/* IDE (A4000 alike) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">CD_ROM</span><span class="p">);</span>		<span class="cm">/* CD ROM drive */</span>
    <span class="cm">/* other I/O hardware */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_KEYBOARD</span><span class="p">);</span>	<span class="cm">/* Amiga Keyboard */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_MOUSE</span><span class="p">);</span>		<span class="cm">/* Amiga Mouse */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_SERIAL</span><span class="p">);</span>	<span class="cm">/* Amiga Serial */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AMI_PARALLEL</span><span class="p">);</span>	<span class="cm">/* Amiga Parallel */</span>
    <span class="cm">/* real time clocks */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">A2000_CLK</span><span class="p">);</span>		<span class="cm">/* Hardware Clock (A2000 alike) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">A3000_CLK</span><span class="p">);</span>		<span class="cm">/* Hardware Clock (A3000 alike) */</span>
    <span class="cm">/* supporting hardware */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">CHIP_RAM</span><span class="p">);</span>		<span class="cm">/* Chip RAM */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">PAULA</span><span class="p">);</span>		<span class="cm">/* Paula (8364) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">DENISE</span><span class="p">);</span>		<span class="cm">/* Denise (8362) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">DENISE_HR</span><span class="p">);</span>		<span class="cm">/* Denise (8373) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">LISA</span><span class="p">);</span>		<span class="cm">/* Lisa (8375) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AGNUS_PAL</span><span class="p">);</span>		<span class="cm">/* Normal/Fat PAL Agnus (8367/8371) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AGNUS_NTSC</span><span class="p">);</span>	<span class="cm">/* Normal/Fat NTSC Agnus (8361/8370) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AGNUS_HR_PAL</span><span class="p">);</span>	<span class="cm">/* Fat Hires PAL Agnus (8372) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">AGNUS_HR_NTSC</span><span class="p">);</span>	<span class="cm">/* Fat Hires NTSC Agnus (8372) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">ALICE_PAL</span><span class="p">);</span>		<span class="cm">/* PAL Alice (8374) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">ALICE_NTSC</span><span class="p">);</span>	<span class="cm">/* NTSC Alice (8374) */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">MAGIC_REKICK</span><span class="p">);</span>	<span class="cm">/* A3000 Magic Hard Rekick */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">PCMCIA</span><span class="p">);</span>		<span class="cm">/* PCMCIA Slot */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">ZORRO</span><span class="p">);</span>		<span class="cm">/* Zorro AutoConfig */</span>
    <span class="n">AMIGAHW_DECLARE</span><span class="p">(</span><span class="n">ZORRO3</span><span class="p">);</span>		<span class="cm">/* Zorro III */</span>
<span class="p">};</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">amiga_hw_present</span> <span class="n">amiga_hw_present</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">CUSTOM</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltddat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dmaconr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vposr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vhposr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dskdatr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">joy0dat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">joy1dat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">clxdat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">adkconr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pot0dat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pot1dat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">potgor</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">serdatr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dskbytr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">intenar</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">intreqr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">dskptr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dsklen</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dskdat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">refptr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vposw</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vhposw</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">copcon</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">serdat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">serper</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">potgo</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">joytest</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">strequ</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">strvbl</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">strhor</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">strlong</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltcon0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltcon1</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltafwm</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltalwm</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">bltcpt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">bltbpt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">bltapt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">bltdpt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltsize</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">pad2d</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">bltcon0l</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltsizv</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltsizh</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltcmod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltbmod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltamod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltdmod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">spare2</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltcdat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltbdat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bltadat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">spare3</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">deniseid</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dsksync</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">cop1lc</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="o">*</span><span class="n">cop2lc</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">copjmp1</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">copjmp2</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">copins</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">diwstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">diwstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ddfstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ddfstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dmacon</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">clxcon</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">intena</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">intreq</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">adkcon</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span>	<span class="o">*</span><span class="n">audlc</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">audlen</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">audper</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">audvol</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">auddat</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">audspare</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="p">}</span> <span class="n">aud</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">bplpt</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplcon0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplcon1</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplcon2</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplcon3</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bpl1mod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bpl2mod</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplcon4</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">clxcon2</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bpldat</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span>  <span class="o">*</span><span class="n">sprpt</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
    <span class="k">struct</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">pos</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ctl</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">dataa</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">datab</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">spr</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">color</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">htotal</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hsstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hbstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hbstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vtotal</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vsstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vbstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vbstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">sprhstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">sprhstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplhstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bplhstop</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hhposw</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hhposr</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">beamcon0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hsstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">vsstrt</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">hcenter</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">diwhigh</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">spare4</span><span class="p">[</span><span class="mi">11</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">fmode</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * DMA register bits</span>
<span class="cm"> */</span>
<span class="cp">#define DMAF_SETCLR		(0x8000)</span>
<span class="cp">#define DMAF_AUD0		(0x0001)</span>
<span class="cp">#define DMAF_AUD1		(0x0002)</span>
<span class="cp">#define DMAF_AUD2		(0x0004)</span>
<span class="cp">#define DMAF_AUD3		(0x0008)</span>
<span class="cp">#define DMAF_DISK		(0x0010)</span>
<span class="cp">#define DMAF_SPRITE		(0x0020)</span>
<span class="cp">#define DMAF_BLITTER		(0x0040)</span>
<span class="cp">#define DMAF_COPPER		(0x0080)</span>
<span class="cp">#define DMAF_RASTER		(0x0100)</span>
<span class="cp">#define DMAF_MASTER		(0x0200)</span>
<span class="cp">#define DMAF_BLITHOG		(0x0400)</span>
<span class="cp">#define DMAF_BLTNZERO		(0x2000)</span>
<span class="cp">#define DMAF_BLTDONE		(0x4000)</span>
<span class="cp">#define DMAF_ALL		(0x01FF)</span>

<span class="k">struct</span> <span class="n">CIA</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">pra</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad0</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">prb</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad1</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ddra</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad2</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ddrb</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad3</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">talo</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad4</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">tahi</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad5</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">tblo</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad6</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">tbhi</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pad7</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">todlo</span><span class="p">;</span>	<span class="kt">char</span> <span class="n">pad8</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">todmid</span><span class="p">;</span>	<span class="kt">char</span> <span class="n">pad9</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">todhi</span><span class="p">;</span>	<span class="kt">char</span> <span class="n">pada</span><span class="p">[</span><span class="mh">0x1ff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">sdr</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">padb</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">icr</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">padc</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">cra</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">padd</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">crb</span><span class="p">;</span>		<span class="kt">char</span> <span class="n">pade</span><span class="p">[</span><span class="mh">0xff</span><span class="p">];</span>
<span class="p">};</span>

<span class="cp">#define zTwoBase (0x80000000)</span>
<span class="cp">#define ZTWO_PADDR(x) (((unsigned long)(x))-zTwoBase)</span>
<span class="cp">#define ZTWO_VADDR(x) (((unsigned long)(x))+zTwoBase)</span>

<span class="cp">#define CUSTOM_PHYSADDR     (0xdff000)</span>
<span class="cp">#define amiga_custom ((*(volatile struct CUSTOM *)(zTwoBase+CUSTOM_PHYSADDR)))</span>

<span class="cp">#define CIAA_PHYSADDR	  (0xbfe001)</span>
<span class="cp">#define CIAB_PHYSADDR	  (0xbfd000)</span>
<span class="cp">#define ciaa   ((*(volatile struct CIA *)(zTwoBase + CIAA_PHYSADDR)))</span>
<span class="cp">#define ciab   ((*(volatile struct CIA *)(zTwoBase + CIAB_PHYSADDR)))</span>

<span class="cp">#define CHIP_PHYSADDR	    (0x000000)</span>

<span class="kt">void</span> <span class="n">amiga_chip_init</span> <span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">amiga_chip_alloc</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">size</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span><span class="p">);</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">amiga_chip_alloc_res</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">size</span><span class="p">,</span> <span class="k">struct</span> <span class="n">resource</span> <span class="o">*</span><span class="n">res</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">amiga_chip_free</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">amiga_chip_avail</span><span class="p">(</span> <span class="kt">void</span> <span class="p">);</span> <span class="cm">/*MILAN*/</span>
<span class="k">extern</span> <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">amiga_audio_min_period</span><span class="p">;</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">amifb_video_off</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">amiga_chipset</span> <span class="o">==</span> <span class="n">CS_ECS</span> <span class="o">||</span> <span class="n">amiga_chipset</span> <span class="o">==</span> <span class="n">CS_AGA</span><span class="p">)</span> <span class="p">{</span>
		<span class="cm">/* program Denise/Lisa for a higher maximum play rate */</span>
		<span class="n">amiga_custom</span><span class="p">.</span><span class="n">htotal</span> <span class="o">=</span> <span class="mi">113</span><span class="p">;</span>        <span class="cm">/* 31 kHz */</span>
		<span class="n">amiga_custom</span><span class="p">.</span><span class="n">vtotal</span> <span class="o">=</span> <span class="mi">223</span><span class="p">;</span>        <span class="cm">/* 70 Hz */</span>
		<span class="n">amiga_custom</span><span class="p">.</span><span class="n">beamcon0</span> <span class="o">=</span> <span class="mh">0x4390</span><span class="p">;</span>   <span class="cm">/* HARDDIS, VAR{BEAM,VSY,HSY,CSY}EN */</span>
		<span class="cm">/* suspend the monitor */</span>
		<span class="n">amiga_custom</span><span class="p">.</span><span class="n">hsstrt</span> <span class="o">=</span> <span class="n">amiga_custom</span><span class="p">.</span><span class="n">hsstop</span> <span class="o">=</span> <span class="mi">116</span><span class="p">;</span>
		<span class="n">amiga_custom</span><span class="p">.</span><span class="n">vsstrt</span> <span class="o">=</span> <span class="n">amiga_custom</span><span class="p">.</span><span class="n">vsstop</span> <span class="o">=</span> <span class="mi">226</span><span class="p">;</span>
		<span class="n">amiga_audio_min_period</span> <span class="o">=</span> <span class="mi">57</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">tod3000</span> <span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">second2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">second1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">minute2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">minute1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">hour2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">hour1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">weekday</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">day2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">day1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">month2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">month1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">year2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">year1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">cntrl1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* control-byte 1 */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">cntrl2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* control-byte 2 */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">cntrl3</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* control-byte 3 */</span>
<span class="p">};</span>
<span class="cp">#define TOD3000_CNTRL1_HOLD	0</span>
<span class="cp">#define TOD3000_CNTRL1_FREE	9</span>
<span class="cp">#define tod_3000 ((*(volatile struct tod3000 *)(zTwoBase+0xDC0000)))</span>

<span class="k">struct</span> <span class="n">tod2000</span> <span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">second2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">second1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">minute2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">minute1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">hour2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">hour1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">day2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">day1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">month2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">month1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">year2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* lower digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">year1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* upper digit */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">weekday</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">cntrl1</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* control-byte 1 */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">cntrl2</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* control-byte 2 */</span>
  <span class="kt">unsigned</span> <span class="kt">int</span>  <span class="o">:</span><span class="mi">28</span><span class="p">,</span> <span class="n">cntrl3</span><span class="o">:</span><span class="mi">4</span><span class="p">;</span>	<span class="cm">/* control-byte 3 */</span>
<span class="p">};</span>

<span class="cp">#define TOD2000_CNTRL1_HOLD	(1&lt;&lt;0)</span>
<span class="cp">#define TOD2000_CNTRL1_BUSY	(1&lt;&lt;1)</span>
<span class="cp">#define TOD2000_CNTRL3_24HMODE	(1&lt;&lt;2)</span>
<span class="cp">#define TOD2000_HOUR1_PM	(1&lt;&lt;2)</span>
<span class="cp">#define tod_2000 ((*(volatile struct tod2000 *)(zTwoBase+0xDC0000)))</span>

<span class="cp">#endif </span><span class="cm">/* _M68K_AMIGAHW_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
