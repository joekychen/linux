<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › include › asm › mcfuart.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>mcfuart.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> *	mcfuart.h -- ColdFire internal UART support defines.</span>
<span class="cm"> *</span>
<span class="cm"> *	(C) Copyright 1999-2003, Greg Ungerer (gerg@snapgear.com)</span>
<span class="cm"> * 	(C) Copyright 2000, Lineo Inc. (www.lineo.com) </span>
<span class="cm"> */</span>

<span class="cm">/****************************************************************************/</span>
<span class="cp">#ifndef	mcfuart_h</span>
<span class="cp">#define	mcfuart_h</span>
<span class="cm">/****************************************************************************/</span>

<span class="cp">#include &lt;linux/serial_core.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>

<span class="k">struct</span> <span class="n">mcf_platform_uart</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span>	<span class="n">mapbase</span><span class="p">;</span>	<span class="cm">/* Physical address base */</span>
	<span class="kt">void</span> <span class="n">__iomem</span>	<span class="o">*</span><span class="n">membase</span><span class="p">;</span>	<span class="cm">/* Virtual address if mapped */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">irq</span><span class="p">;</span>		<span class="cm">/* Interrupt vector */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span>	<span class="n">uartclk</span><span class="p">;</span>	<span class="cm">/* UART clock rate */</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> *	Define the ColdFire UART register set addresses.</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UMR		0x00		</span><span class="cm">/* Mode register (r/w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR		0x04		</span><span class="cm">/* Status register (r) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCSR		0x04		</span><span class="cm">/* Clock Select (w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR		0x08		</span><span class="cm">/* Command register (w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_URB		0x0c		</span><span class="cm">/* Receiver Buffer (r) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UTB		0x0c		</span><span class="cm">/* Transmit Buffer (w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UIPCR		0x10		</span><span class="cm">/* Input Port Change (r) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UACR		0x10		</span><span class="cm">/* Auxiliary Control (w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UISR		0x14		</span><span class="cm">/* Interrupt Status (r) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UIMR		0x14		</span><span class="cm">/* Interrupt Mask (w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UBG1		0x18		</span><span class="cm">/* Baud Rate MSB (r/w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UBG2		0x1c		</span><span class="cm">/* Baud Rate LSB (r/w) */</span><span class="cp"></span>
<span class="cp">#ifdef	CONFIG_M5272</span>
<span class="cp">#define	MCFUART_UTF		0x28		</span><span class="cm">/* Transmitter FIFO (r/w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_URF		0x2c		</span><span class="cm">/* Receiver FIFO (r/w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UFPD		0x30		</span><span class="cm">/* Frac Prec. Divider (r/w) */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_M5206) || defined(CONFIG_M5206e) || \</span>
<span class="cp">        defined(CONFIG_M5249) || defined(CONFIG_M5307) || \</span>
<span class="cp">        defined(CONFIG_M5407)</span>
<span class="cp">#define	MCFUART_UIVR		0x30		</span><span class="cm">/* Interrupt Vector (r/w) */</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#define	MCFUART_UIPR		0x34		</span><span class="cm">/* Input Port (r) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UOP1		0x38		</span><span class="cm">/* Output Port Bit Set (w) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UOP0		0x3c		</span><span class="cm">/* Output Port Bit Reset (w) */</span><span class="cp"></span>


<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Mode Register 1 (MR1).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_MR1_RXRTS	0x80		</span><span class="cm">/* Auto RTS flow control */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_RXIRQFULL	0x40		</span><span class="cm">/* RX IRQ type FULL */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_RXIRQRDY	0x00		</span><span class="cm">/* RX IRQ type RDY */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_RXERRBLOCK	0x20		</span><span class="cm">/* RX block error mode */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_RXERRCHAR	0x00		</span><span class="cm">/* RX char error mode */</span><span class="cp"></span>

<span class="cp">#define	MCFUART_MR1_PARITYNONE	0x10		</span><span class="cm">/* No parity */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_PARITYEVEN	0x00		</span><span class="cm">/* Even parity */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_PARITYODD	0x04		</span><span class="cm">/* Odd parity */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_PARITYSPACE	0x08		</span><span class="cm">/* Space parity */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_PARITYMARK	0x0c		</span><span class="cm">/* Mark parity */</span><span class="cp"></span>

<span class="cp">#define	MCFUART_MR1_CS5		0x00		</span><span class="cm">/* 5 bits per char */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_CS6		0x01		</span><span class="cm">/* 6 bits per char */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_CS7		0x02		</span><span class="cm">/* 7 bits per char */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR1_CS8		0x03		</span><span class="cm">/* 8 bits per char */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Mode Register 2 (MR2).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_MR2_LOOPBACK	0x80		</span><span class="cm">/* Loopback mode */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR2_REMOTELOOP	0xc0		</span><span class="cm">/* Remote loopback mode */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR2_AUTOECHO	0x40		</span><span class="cm">/* Automatic echo */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR2_TXRTS	0x20		</span><span class="cm">/* Assert RTS on TX */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR2_TXCTS	0x10		</span><span class="cm">/* Auto CTS flow control */</span><span class="cp"></span>

<span class="cp">#define	MCFUART_MR2_STOP1	0x07		</span><span class="cm">/* 1 stop bit */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR2_STOP15	0x08		</span><span class="cm">/* 1.5 stop bits */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_MR2_STOP2	0x0f		</span><span class="cm">/* 2 stop bits */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Status Register (USR).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_USR_RXBREAK	0x80		</span><span class="cm">/* Received BREAK */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_RXFRAMING	0x40		</span><span class="cm">/* Received framing error */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_RXPARITY	0x20		</span><span class="cm">/* Received parity error */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_RXOVERRUN	0x10		</span><span class="cm">/* Received overrun error */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_TXEMPTY	0x08		</span><span class="cm">/* Transmitter empty */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_TXREADY	0x04		</span><span class="cm">/* Transmitter ready */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_RXFULL	0x02		</span><span class="cm">/* Receiver full */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_USR_RXREADY	0x01		</span><span class="cm">/* Receiver ready */</span><span class="cp"></span>

<span class="cp">#define	MCFUART_USR_RXERR	(MCFUART_USR_RXBREAK | MCFUART_USR_RXFRAMING | \</span>
<span class="cp">				MCFUART_USR_RXPARITY | MCFUART_USR_RXOVERRUN)</span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Clock Select Register (UCSR).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UCSR_RXCLKTIMER	0xd0		</span><span class="cm">/* RX clock is timer */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCSR_RXCLKEXT16	0xe0		</span><span class="cm">/* RX clock is external x16 */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCSR_RXCLKEXT1	0xf0		</span><span class="cm">/* RX clock is external x1 */</span><span class="cp"></span>

<span class="cp">#define	MCFUART_UCSR_TXCLKTIMER	0x0d		</span><span class="cm">/* TX clock is timer */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCSR_TXCLKEXT16	0x0e		</span><span class="cm">/* TX clock is external x16 */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCSR_TXCLKEXT1	0x0f		</span><span class="cm">/* TX clock is external x1 */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Command Register (UCR).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UCR_CMDNULL		0x00	</span><span class="cm">/* No command */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDRESETMRPTR	0x10	</span><span class="cm">/* Reset MR pointer */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDRESETRX		0x20	</span><span class="cm">/* Reset receiver */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDRESETTX		0x30	</span><span class="cm">/* Reset transmitter */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDRESETERR		0x40	</span><span class="cm">/* Reset error status */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDRESETBREAK	0x50	</span><span class="cm">/* Reset BREAK change */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDBREAKSTART	0x60	</span><span class="cm">/* Start BREAK */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_CMDBREAKSTOP	0x70	</span><span class="cm">/* Stop BREAK */</span><span class="cp"></span>

<span class="cp">#define	MCFUART_UCR_TXNULL	0x00		</span><span class="cm">/* No TX command */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_TXENABLE	0x04		</span><span class="cm">/* Enable TX */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_TXDISABLE	0x08		</span><span class="cm">/* Disable TX */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_RXNULL	0x00		</span><span class="cm">/* No RX command */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_RXENABLE	0x01		</span><span class="cm">/* Enable RX */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UCR_RXDISABLE	0x02		</span><span class="cm">/* Disable RX */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Input Port Change Register (UIPCR).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UIPCR_CTSCOS	0x10		</span><span class="cm">/* CTS change of state */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UIPCR_CTS	0x01		</span><span class="cm">/* CTS value */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Input Port Register (UIP).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UIPR_CTS	0x01		</span><span class="cm">/* CTS value */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Output Port Registers (UOP).</span>
<span class="cm"> *	Clear bit by writing to UOP0, set by writing to UOP1.</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UOP_RTS		0x01		</span><span class="cm">/* RTS set or clear */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in the Auxiliary Control Register (UACR).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UACR_IEC	0x01		</span><span class="cm">/* Input enable control */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in Interrupt Status Register (UISR).</span>
<span class="cm"> *	These same bits are used for the Interrupt Mask Register (UIMR).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UIR_COS		0x80		</span><span class="cm">/* Change of state (CTS) */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UIR_DELTABREAK	0x04		</span><span class="cm">/* Break start or stop */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UIR_RXREADY	0x02		</span><span class="cm">/* Receiver ready */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UIR_TXREADY	0x01		</span><span class="cm">/* Transmitter ready */</span><span class="cp"></span>

<span class="cp">#ifdef	CONFIG_M5272</span>
<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in the Transmitter FIFO Register (UTF).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_UTF_TXB		0x1f		</span><span class="cm">/* Transmitter data level */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UTF_FULL	0x20		</span><span class="cm">/* Transmitter fifo full */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_UTF_TXS		0xc0		</span><span class="cm">/* Transmitter status */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> *	Define bit flags in the Receiver FIFO Register (URF).</span>
<span class="cm"> */</span>
<span class="cp">#define	MCFUART_URF_RXB		0x1f		</span><span class="cm">/* Receiver data level */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_URF_FULL	0x20		</span><span class="cm">/* Receiver fifo full */</span><span class="cp"></span>
<span class="cp">#define	MCFUART_URF_RXS		0xc0		</span><span class="cm">/* Receiver status */</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_M54xx)</span>
<span class="cp">#define MCFUART_TXFIFOSIZE	512</span>
<span class="cp">#elif defined(CONFIG_M5272)</span>
<span class="cp">#define MCFUART_TXFIFOSIZE	25</span>
<span class="cp">#else</span>
<span class="cp">#define MCFUART_TXFIFOSIZE	1</span>
<span class="cp">#endif</span>
<span class="cm">/****************************************************************************/</span>
<span class="cp">#endif	</span><span class="cm">/* mcfuart_h */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
