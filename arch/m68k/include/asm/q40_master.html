<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › include › asm › q40_master.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>q40_master.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Q40 master Chip Control</span>
<span class="cm"> * RTC stuff merged for compactnes..</span>
<span class="cm">*/</span>

<span class="cp">#ifndef _Q40_MASTER_H</span>
<span class="cp">#define _Q40_MASTER_H</span>

<span class="cp">#include &lt;asm/raw_io.h&gt;</span>


<span class="cp">#define q40_master_addr 0xff000000</span>

<span class="cp">#define IIRQ_REG            0x0       </span><span class="cm">/* internal IRQ reg */</span><span class="cp"></span>
<span class="cp">#define EIRQ_REG            0x4       </span><span class="cm">/* external ... */</span><span class="cp"></span>
<span class="cp">#define KEYCODE_REG         0x1c      </span><span class="cm">/* value of received scancode  */</span><span class="cp"></span>
<span class="cp">#define DISPLAY_CONTROL_REG 0x18</span>
<span class="cp">#define FRAME_CLEAR_REG     0x24</span>
<span class="cp">#define LED_REG             0x30</span>

<span class="cp">#define Q40_LED_ON()        master_outb(1,LED_REG)</span>
<span class="cp">#define Q40_LED_OFF()       master_outb(0,LED_REG)</span>

<span class="cp">#define INTERRUPT_REG       IIRQ_REG  </span><span class="cm">/* &quot;native&quot; ints */</span><span class="cp"></span>
<span class="cp">#define KEY_IRQ_ENABLE_REG  0x08      </span><span class="cm">/**/</span><span class="cp"></span>
<span class="cp">#define KEYBOARD_UNLOCK_REG 0x20      </span><span class="cm">/* clear kb int */</span><span class="cp"></span>

<span class="cp">#define SAMPLE_ENABLE_REG   0x14      </span><span class="cm">/* generate SAMPLE ints */</span><span class="cp"></span>
<span class="cp">#define SAMPLE_RATE_REG     0x2c</span>
<span class="cp">#define SAMPLE_CLEAR_REG    0x28</span>
<span class="cp">#define SAMPLE_LOW          0x00</span>
<span class="cp">#define SAMPLE_HIGH         0x01</span>

<span class="cp">#define FRAME_RATE_REG       0x38      </span><span class="cm">/* generate FRAME ints at 200 HZ rate */</span><span class="cp"></span>

<span class="cp">#if 0</span><span class="c"></span>
<span class="c">#define SER_ENABLE_REG      0x0c      /* allow serial ints to be generated */</span>
<span class="cp">#endif</span>
<span class="cp">#define EXT_ENABLE_REG      0x10      </span><span class="cm">/* ... rest of the ISA ints ... */</span><span class="cp"></span>


<span class="cp">#define master_inb(_reg_)      in_8((unsigned char *)q40_master_addr+_reg_)</span>
<span class="cp">#define master_outb(_b_,_reg_)  out_8((unsigned char *)q40_master_addr+_reg_,_b_)</span>

<span class="cm">/* RTC defines */</span>

<span class="cp">#define Q40_RTC_BASE	    (0xff021ffc)</span>

<span class="cp">#define Q40_RTC_YEAR        (*(volatile unsigned char *)(Q40_RTC_BASE+0))</span>
<span class="cp">#define Q40_RTC_MNTH        (*(volatile unsigned char *)(Q40_RTC_BASE-4))</span>
<span class="cp">#define Q40_RTC_DATE        (*(volatile unsigned char *)(Q40_RTC_BASE-8))</span>
<span class="cp">#define Q40_RTC_DOW         (*(volatile unsigned char *)(Q40_RTC_BASE-12))</span>
<span class="cp">#define Q40_RTC_HOUR        (*(volatile unsigned char *)(Q40_RTC_BASE-16))</span>
<span class="cp">#define Q40_RTC_MINS        (*(volatile unsigned char *)(Q40_RTC_BASE-20))</span>
<span class="cp">#define Q40_RTC_SECS        (*(volatile unsigned char *)(Q40_RTC_BASE-24))</span>
<span class="cp">#define Q40_RTC_CTRL        (*(volatile unsigned char *)(Q40_RTC_BASE-28))</span>

<span class="cm">/* some control bits */</span>
<span class="cp">#define Q40_RTC_READ   64  </span><span class="cm">/* prepare for reading */</span><span class="cp"></span>
<span class="cp">#define Q40_RTC_WRITE  128</span>

<span class="cm">/* define some Q40 specific ints */</span>
<span class="cp">#include &quot;q40ints.h&quot;</span>

<span class="cm">/* misc defs */</span>
<span class="cp">#define DAC_LEFT  ((unsigned char *)0xff008000)</span>
<span class="cp">#define DAC_RIGHT ((unsigned char *)0xff008004)</span>

<span class="cp">#endif </span><span class="cm">/* _Q40_MASTER_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
