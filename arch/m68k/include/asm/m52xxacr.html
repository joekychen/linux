<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › include › asm › m52xxacr.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>m52xxacr.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> * m52xxacr.h -- ColdFire version 2 core cache support</span>
<span class="cm"> *</span>
<span class="cm"> * (C) Copyright 2010, Greg Ungerer &lt;gerg@snapgear.com&gt;</span>
<span class="cm"> */</span>

<span class="cm">/****************************************************************************/</span>
<span class="cp">#ifndef m52xxacr_h</span>
<span class="cp">#define m52xxacr_h</span>
<span class="cm">/****************************************************************************/</span>

<span class="cm">/*</span>
<span class="cm"> * All varients of the ColdFire using version 2 cores have a similar</span>
<span class="cm"> * cache setup. Although not absolutely identical the cache register</span>
<span class="cm"> * definitions are compatible for all of them. Mostly they support a</span>
<span class="cm"> * configurable cache memory that can be instruction only, data only,</span>
<span class="cm"> * or split instruction and data. The exception is the very old version 2</span>
<span class="cm"> * core based parts, like the 5206(e), 5249 and 5272, which are instruction</span>
<span class="cm"> * cache only. Cache size varies from 2k up to 16k.</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * Define the Cache Control register flags.</span>
<span class="cm"> */</span>
<span class="cp">#define CACR_CENB	0x80000000	</span><span class="cm">/* Enable cache */</span><span class="cp"></span>
<span class="cp">#define CACR_CDPI	0x10000000	</span><span class="cm">/* Disable invalidation by CPUSHL */</span><span class="cp"></span>
<span class="cp">#define CACR_CFRZ	0x08000000	</span><span class="cm">/* Cache freeze mode */</span><span class="cp"></span>
<span class="cp">#define CACR_CINV	0x01000000	</span><span class="cm">/* Invalidate cache */</span><span class="cp"></span>
<span class="cp">#define CACR_DISI	0x00800000	</span><span class="cm">/* Disable instruction cache */</span><span class="cp"></span>
<span class="cp">#define CACR_DISD	0x00400000	</span><span class="cm">/* Disable data cache */</span><span class="cp"></span>
<span class="cp">#define CACR_INVI	0x00200000	</span><span class="cm">/* Invalidate instruction cache */</span><span class="cp"></span>
<span class="cp">#define CACR_INVD	0x00100000	</span><span class="cm">/* Invalidate data cache */</span><span class="cp"></span>
<span class="cp">#define CACR_CEIB	0x00000400	</span><span class="cm">/* Non-cachable instruction burst */</span><span class="cp"></span>
<span class="cp">#define CACR_DCM	0x00000200	</span><span class="cm">/* Default cache mode */</span><span class="cp"></span>
<span class="cp">#define CACR_DBWE	0x00000100	</span><span class="cm">/* Buffered write enable */</span><span class="cp"></span>
<span class="cp">#define CACR_DWP	0x00000020	</span><span class="cm">/* Write protection */</span><span class="cp"></span>
<span class="cp">#define CACR_EUSP	0x00000010	</span><span class="cm">/* Enable separate user a7 */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Define the Access Control register flags.</span>
<span class="cm"> */</span>
<span class="cp">#define ACR_BASE_POS	24		</span><span class="cm">/* Address Base (upper 8 bits) */</span><span class="cp"></span>
<span class="cp">#define ACR_MASK_POS	16		</span><span class="cm">/* Address Mask (next 8 bits) */</span><span class="cp"></span>
<span class="cp">#define ACR_ENABLE	0x00008000	</span><span class="cm">/* Enable this ACR */</span><span class="cp"></span>
<span class="cp">#define ACR_USER	0x00000000	</span><span class="cm">/* Allow only user accesses */</span><span class="cp"></span>
<span class="cp">#define ACR_SUPER	0x00002000	</span><span class="cm">/* Allow supervisor access only */</span><span class="cp"></span>
<span class="cp">#define ACR_ANY		0x00004000	</span><span class="cm">/* Allow any access type */</span><span class="cp"></span>
<span class="cp">#define ACR_CENB	0x00000000	</span><span class="cm">/* Caching of region enabled */</span><span class="cp"></span>
<span class="cp">#define ACR_CDIS	0x00000040	</span><span class="cm">/* Caching of region disabled */</span><span class="cp"></span>
<span class="cp">#define ACR_BWE		0x00000020	</span><span class="cm">/* Write buffer enabled */</span><span class="cp"></span>
<span class="cp">#define ACR_WPROTECT	0x00000004	</span><span class="cm">/* Write protect region */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Set the cache controller settings we will use. On the cores that support</span>
<span class="cm"> * a split cache configuration we allow all the combinations at Kconfig</span>
<span class="cm"> * time. For those cores that only have an instruction cache we just set</span>
<span class="cm"> * that as on.</span>
<span class="cm"> */</span>
<span class="cp">#if defined(CONFIG_CACHE_I)</span>
<span class="cp">#define CACHE_TYPE	(CACR_DISD + CACR_EUSP)</span>
<span class="cp">#define CACHE_INVTYPEI	0</span>
<span class="cp">#elif defined(CONFIG_CACHE_D)</span>
<span class="cp">#define CACHE_TYPE	(CACR_DISI + CACR_EUSP)</span>
<span class="cp">#define CACHE_INVTYPED	0</span>
<span class="cp">#elif defined(CONFIG_CACHE_BOTH)</span>
<span class="cp">#define CACHE_TYPE	CACR_EUSP</span>
<span class="cp">#define CACHE_INVTYPEI	CACR_INVI</span>
<span class="cp">#define CACHE_INVTYPED	CACR_INVD</span>
<span class="cp">#else</span>
<span class="cm">/* This is the instruction cache only devices (no split cache, no eusp) */</span>
<span class="cp">#define CACHE_TYPE	0</span>
<span class="cp">#define CACHE_INVTYPEI	0</span>
<span class="cp">#endif</span>

<span class="cp">#define CACHE_INIT	(CACR_CINV + CACHE_TYPE)</span>
<span class="cp">#define CACHE_MODE	(CACR_CENB + CACHE_TYPE + CACR_DCM)</span>

<span class="cp">#define CACHE_INVALIDATE  (CACHE_MODE + CACR_CINV)</span>
<span class="cp">#if defined(CACHE_INVTYPEI)</span>
<span class="cp">#define CACHE_INVALIDATEI (CACHE_MODE + CACR_CINV + CACHE_INVTYPEI)</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CACHE_INVTYPED)</span>
<span class="cp">#define CACHE_INVALIDATED (CACHE_MODE + CACR_CINV + CACHE_INVTYPED)</span>
<span class="cp">#endif</span>

<span class="cp">#define ACR0_MODE	((CONFIG_RAMBASE &amp; 0xff000000) + \</span>
<span class="cp">			 (0x000f0000) + \</span>
<span class="cp">			 (ACR_ENABLE + ACR_ANY + ACR_CENB + ACR_BWE))</span>
<span class="cp">#define ACR1_MODE	0</span>

<span class="cm">/****************************************************************************/</span>
<span class="cp">#endif  </span><span class="cm">/* m52xxsim_h */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
