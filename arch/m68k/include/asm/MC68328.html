<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › m68k › include › asm › MC68328.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>MC68328.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/* include/asm-m68knommu/MC68328.h: &#39;328 control registers</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright (C) 1999  Vladimir Gurevich &lt;vgurevic@cisco.com&gt;</span>
<span class="cm"> *                     Bear &amp; Hare Software, Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Based on include/asm-m68knommu/MC68332.h</span>
<span class="cm"> * Copyright (C) 1998  Kenneth Albanowski &lt;kjahds@kjahds.com&gt;,</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _MC68328_H_</span>
<span class="cp">#define _MC68328_H_</span>

<span class="cp">#define BYTE_REF(addr) (*((volatile unsigned char*)addr))</span>
<span class="cp">#define WORD_REF(addr) (*((volatile unsigned short*)addr))</span>
<span class="cp">#define LONG_REF(addr) (*((volatile unsigned long*)addr))</span>

<span class="cp">#define PUT_FIELD(field, val) (((val) &lt;&lt; field##_SHIFT) &amp; field##_MASK)</span>
<span class="cp">#define GET_FIELD(reg, field) (((reg) &amp; field##_MASK) &gt;&gt; field##_SHIFT)</span>

<span class="cm">/********** </span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF0xx -- System Control</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>
 
<span class="cm">/*</span>
<span class="cm"> * System Control Register (SCR)</span>
<span class="cm"> */</span>
<span class="cp">#define SCR_ADDR	0xfffff000</span>
<span class="cp">#define SCR		BYTE_REF(SCR_ADDR)</span>

<span class="cp">#define SCR_WDTH8	0x01	</span><span class="cm">/* 8-Bit Width Select */</span><span class="cp"></span>
<span class="cp">#define SCR_DMAP	0x04	</span><span class="cm">/* Double Map */</span><span class="cp"></span>
<span class="cp">#define SCR_SO		0x08	</span><span class="cm">/* Supervisor Only */</span><span class="cp"></span>
<span class="cp">#define SCR_BETEN	0x10	</span><span class="cm">/* Bus-Error Time-Out Enable */</span><span class="cp"></span>
<span class="cp">#define SCR_PRV		0x20	</span><span class="cm">/* Privilege Violation */</span><span class="cp"></span>
<span class="cp">#define SCR_WPV		0x40	</span><span class="cm">/* Write Protect Violation */</span><span class="cp"></span>
<span class="cp">#define SCR_BETO	0x80	</span><span class="cm">/* Bus-Error TimeOut */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Mask Revision Register</span>
<span class="cm"> */</span>
<span class="cp">#define MRR_ADDR 0xfffff004</span>
<span class="cp">#define MRR      LONG_REF(MRR_ADDR)</span>
 
<span class="cm">/********** </span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF1xx -- Chip-Select logic</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/********** </span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF2xx -- Phase Locked Loop (PLL) &amp; Power Control</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * Group Base Address Registers</span>
<span class="cm"> */</span>
<span class="cp">#define GRPBASEA_ADDR	0xfffff100</span>
<span class="cp">#define GRPBASEB_ADDR	0xfffff102</span>
<span class="cp">#define GRPBASEC_ADDR	0xfffff104</span>
<span class="cp">#define GRPBASED_ADDR	0xfffff106</span>

<span class="cp">#define GRPBASEA	WORD_REF(GRPBASEA_ADDR)</span>
<span class="cp">#define GRPBASEB	WORD_REF(GRPBASEB_ADDR)</span>
<span class="cp">#define GRPBASEC	WORD_REF(GRPBASEC_ADDR)</span>
<span class="cp">#define GRPBASED	WORD_REF(GRPBASED_ADDR)</span>

<span class="cp">#define GRPBASE_V	  0x0001	</span><span class="cm">/* Valid */</span><span class="cp"></span>
<span class="cp">#define GRPBASE_GBA_MASK  0xfff0	</span><span class="cm">/* Group Base Address (bits 31-20) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Group Base Address Mask Registers </span>
<span class="cm"> */</span>
<span class="cp">#define GRPMASKA_ADDR	0xfffff108</span>
<span class="cp">#define GRPMASKB_ADDR	0xfffff10a</span>
<span class="cp">#define GRPMASKC_ADDR	0xfffff10c</span>
<span class="cp">#define GRPMASKD_ADDR	0xfffff10e</span>

<span class="cp">#define GRPMASKA	WORD_REF(GRPMASKA_ADDR)</span>
<span class="cp">#define GRPMASKB	WORD_REF(GRPMASKB_ADDR)</span>
<span class="cp">#define GRPMASKC	WORD_REF(GRPMASKC_ADDR)</span>
<span class="cp">#define GRPMASKD	WORD_REF(GRPMASKD_ADDR)</span>

<span class="cp">#define GRMMASK_GMA_MASK 0xfffff0	</span><span class="cm">/* Group Base Mask (bits 31-20) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Chip-Select Option Registers (group A)</span>
<span class="cm"> */</span>
<span class="cp">#define CSA0_ADDR	0xfffff110</span>
<span class="cp">#define CSA1_ADDR	0xfffff114</span>
<span class="cp">#define CSA2_ADDR	0xfffff118</span>
<span class="cp">#define CSA3_ADDR	0xfffff11c</span>

<span class="cp">#define CSA0		LONG_REF(CSA0_ADDR)</span>
<span class="cp">#define CSA1		LONG_REF(CSA1_ADDR)</span>
<span class="cp">#define CSA2		LONG_REF(CSA2_ADDR)</span>
<span class="cp">#define CSA3		LONG_REF(CSA3_ADDR)</span>

<span class="cp">#define CSA_WAIT_MASK	0x00000007	</span><span class="cm">/* Wait State Selection */</span><span class="cp"></span>
<span class="cp">#define CSA_WAIT_SHIFT	0</span>
<span class="cp">#define CSA_RO		0x00000008	</span><span class="cm">/* Read-Only */</span><span class="cp"></span>
<span class="cp">#define CSA_AM_MASK	0x0000ff00	</span><span class="cm">/* Address Mask (bits 23-16) */</span><span class="cp"></span>
<span class="cp">#define CSA_AM_SHIFT	8</span>
<span class="cp">#define CSA_BUSW	0x00010000	</span><span class="cm">/* Bus Width Select */</span><span class="cp"></span>
<span class="cp">#define CSA_AC_MASK	0xff000000	</span><span class="cm">/* Address Compare (bits 23-16) */</span><span class="cp"></span>
<span class="cp">#define CSA_AC_SHIFT	24</span>

<span class="cm">/*</span>
<span class="cm"> * Chip-Select Option Registers (group B)</span>
<span class="cm"> */</span>
<span class="cp">#define CSB0_ADDR	0xfffff120</span>
<span class="cp">#define CSB1_ADDR	0xfffff124</span>
<span class="cp">#define CSB2_ADDR	0xfffff128</span>
<span class="cp">#define CSB3_ADDR	0xfffff12c</span>

<span class="cp">#define CSB0		LONG_REF(CSB0_ADDR)</span>
<span class="cp">#define CSB1		LONG_REF(CSB1_ADDR)</span>
<span class="cp">#define CSB2		LONG_REF(CSB2_ADDR)</span>
<span class="cp">#define CSB3		LONG_REF(CSB3_ADDR)</span>

<span class="cp">#define CSB_WAIT_MASK	0x00000007	</span><span class="cm">/* Wait State Selection */</span><span class="cp"></span>
<span class="cp">#define CSB_WAIT_SHIFT	0</span>
<span class="cp">#define CSB_RO		0x00000008	</span><span class="cm">/* Read-Only */</span><span class="cp"></span>
<span class="cp">#define CSB_AM_MASK	0x0000ff00	</span><span class="cm">/* Address Mask (bits 23-16) */</span><span class="cp"></span>
<span class="cp">#define CSB_AM_SHIFT	8</span>
<span class="cp">#define CSB_BUSW	0x00010000	</span><span class="cm">/* Bus Width Select */</span><span class="cp"></span>
<span class="cp">#define CSB_AC_MASK	0xff000000	</span><span class="cm">/* Address Compare (bits 23-16) */</span><span class="cp"></span>
<span class="cp">#define CSB_AC_SHIFT	24</span>

<span class="cm">/*</span>
<span class="cm"> * Chip-Select Option Registers (group C)</span>
<span class="cm"> */</span>
<span class="cp">#define CSC0_ADDR	0xfffff130</span>
<span class="cp">#define CSC1_ADDR	0xfffff134</span>
<span class="cp">#define CSC2_ADDR	0xfffff138</span>
<span class="cp">#define CSC3_ADDR	0xfffff13c</span>

<span class="cp">#define CSC0		LONG_REF(CSC0_ADDR)</span>
<span class="cp">#define CSC1		LONG_REF(CSC1_ADDR)</span>
<span class="cp">#define CSC2		LONG_REF(CSC2_ADDR)</span>
<span class="cp">#define CSC3		LONG_REF(CSC3_ADDR)</span>

<span class="cp">#define CSC_WAIT_MASK	0x00000007	</span><span class="cm">/* Wait State Selection */</span><span class="cp"></span>
<span class="cp">#define CSC_WAIT_SHIFT	0</span>
<span class="cp">#define CSC_RO		0x00000008	</span><span class="cm">/* Read-Only */</span><span class="cp"></span>
<span class="cp">#define CSC_AM_MASK	0x0000fff0	</span><span class="cm">/* Address Mask (bits 23-12) */</span><span class="cp"></span>
<span class="cp">#define CSC_AM_SHIFT	4</span>
<span class="cp">#define CSC_BUSW	0x00010000	</span><span class="cm">/* Bus Width Select */</span><span class="cp"></span>
<span class="cp">#define CSC_AC_MASK	0xfff00000	</span><span class="cm">/* Address Compare (bits 23-12) */</span><span class="cp"></span>
<span class="cp">#define CSC_AC_SHIFT	20</span>

<span class="cm">/*</span>
<span class="cm"> * Chip-Select Option Registers (group D)</span>
<span class="cm"> */</span>
<span class="cp">#define CSD0_ADDR	0xfffff140</span>
<span class="cp">#define CSD1_ADDR	0xfffff144</span>
<span class="cp">#define CSD2_ADDR	0xfffff148</span>
<span class="cp">#define CSD3_ADDR	0xfffff14c</span>

<span class="cp">#define CSD0		LONG_REF(CSD0_ADDR)</span>
<span class="cp">#define CSD1		LONG_REF(CSD1_ADDR)</span>
<span class="cp">#define CSD2		LONG_REF(CSD2_ADDR)</span>
<span class="cp">#define CSD3		LONG_REF(CSD3_ADDR)</span>

<span class="cp">#define CSD_WAIT_MASK	0x00000007	</span><span class="cm">/* Wait State Selection */</span><span class="cp"></span>
<span class="cp">#define CSD_WAIT_SHIFT	0</span>
<span class="cp">#define CSD_RO		0x00000008	</span><span class="cm">/* Read-Only */</span><span class="cp"></span>
<span class="cp">#define CSD_AM_MASK	0x0000fff0	</span><span class="cm">/* Address Mask (bits 23-12) */</span><span class="cp"></span>
<span class="cp">#define CSD_AM_SHIFT	4</span>
<span class="cp">#define CSD_BUSW	0x00010000	</span><span class="cm">/* Bus Width Select */</span><span class="cp"></span>
<span class="cp">#define CSD_AC_MASK	0xfff00000	</span><span class="cm">/* Address Compare (bits 23-12) */</span><span class="cp"></span>
<span class="cp">#define CSD_AC_SHIFT	20</span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF2xx -- Phase Locked Loop (PLL) &amp; Power Control</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>
 
<span class="cm">/*</span>
<span class="cm"> * PLL Control Register </span>
<span class="cm"> */</span>
<span class="cp">#define PLLCR_ADDR	0xfffff200</span>
<span class="cp">#define PLLCR		WORD_REF(PLLCR_ADDR)</span>

<span class="cp">#define PLLCR_DISPLL	       0x0008	</span><span class="cm">/* Disable PLL */</span><span class="cp"></span>
<span class="cp">#define PLLCR_CLKEN	       0x0010	</span><span class="cm">/* Clock (CLKO pin) enable */</span><span class="cp"></span>
<span class="cp">#define PLLCR_SYSCLK_SEL_MASK  0x0700	</span><span class="cm">/* System Clock Selection */</span><span class="cp"></span>
<span class="cp">#define PLLCR_SYSCLK_SEL_SHIFT 8</span>
<span class="cp">#define PLLCR_PIXCLK_SEL_MASK  0x3800	</span><span class="cm">/* LCD Clock Selection */</span><span class="cp"></span>
<span class="cp">#define PLLCR_PIXCLK_SEL_SHIFT 11</span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define PLLCR_LCDCLK_SEL_MASK	PLLCR_PIXCLK_SEL_MASK</span>
<span class="cp">#define PLLCR_LCDCLK_SEL_SHIFT	PLLCR_PIXCLK_SEL_SHIFT</span>

<span class="cm">/*</span>
<span class="cm"> * PLL Frequency Select Register</span>
<span class="cm"> */</span>
<span class="cp">#define PLLFSR_ADDR	0xfffff202</span>
<span class="cp">#define PLLFSR		WORD_REF(PLLFSR_ADDR)</span>

<span class="cp">#define PLLFSR_PC_MASK	0x00ff		</span><span class="cm">/* P Count */</span><span class="cp"></span>
<span class="cp">#define PLLFSR_PC_SHIFT 0</span>
<span class="cp">#define PLLFSR_QC_MASK	0x0f00		</span><span class="cm">/* Q Count */</span><span class="cp"></span>
<span class="cp">#define PLLFSR_QC_SHIFT 8</span>
<span class="cp">#define PLLFSR_PROT	0x4000		</span><span class="cm">/* Protect P &amp; Q */</span><span class="cp"></span>
<span class="cp">#define PLLFSR_CLK32	0x8000		</span><span class="cm">/* Clock 32 (kHz) */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Power Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define PCTRL_ADDR	0xfffff207</span>
<span class="cp">#define PCTRL		BYTE_REF(PCTRL_ADDR)</span>

<span class="cp">#define PCTRL_WIDTH_MASK	0x1f	</span><span class="cm">/* CPU Clock bursts width */</span><span class="cp"></span>
<span class="cp">#define PCTRL_WIDTH_SHIFT	0</span>
<span class="cp">#define PCTRL_STOP		0x40	</span><span class="cm">/* Enter power-save mode immediately */</span><span class="cp"> </span>
<span class="cp">#define PCTRL_PCEN		0x80	</span><span class="cm">/* Power Control Enable */</span><span class="cp"></span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF3xx -- Interrupt Controller</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/* </span>
<span class="cm"> * Interrupt Vector Register</span>
<span class="cm"> */</span>
<span class="cp">#define IVR_ADDR	0xfffff300</span>
<span class="cp">#define IVR		BYTE_REF(IVR_ADDR)</span>

<span class="cp">#define IVR_VECTOR_MASK 0xF8</span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt control Register</span>
<span class="cm"> */</span>
<span class="cp">#define ICR_ADRR	0xfffff302</span>
<span class="cp">#define ICR		WORD_REF(ICR_ADDR)</span>

<span class="cp">#define ICR_ET6		0x0100	</span><span class="cm">/* Edge Trigger Select for IRQ6 */</span><span class="cp"></span>
<span class="cp">#define ICR_ET3		0x0200	</span><span class="cm">/* Edge Trigger Select for IRQ3 */</span><span class="cp"></span>
<span class="cp">#define ICR_ET2		0x0400	</span><span class="cm">/* Edge Trigger Select for IRQ2 */</span><span class="cp"></span>
<span class="cp">#define ICR_ET1		0x0800	</span><span class="cm">/* Edge Trigger Select for IRQ1 */</span><span class="cp"></span>
<span class="cp">#define ICR_POL6	0x1000	</span><span class="cm">/* Polarity Control for IRQ6 */</span><span class="cp"></span>
<span class="cp">#define ICR_POL3	0x2000	</span><span class="cm">/* Polarity Control for IRQ3 */</span><span class="cp"></span>
<span class="cp">#define ICR_POL2	0x4000	</span><span class="cm">/* Polarity Control for IRQ2 */</span><span class="cp"></span>
<span class="cp">#define ICR_POL1	0x8000	</span><span class="cm">/* Polarity Control for IRQ1 */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * Interrupt Mask Register</span>
<span class="cm"> */</span>
<span class="cp">#define IMR_ADDR	0xfffff304</span>
<span class="cp">#define IMR		LONG_REF(IMR_ADDR)</span>
 
<span class="cm">/*</span>
<span class="cm"> * Define the names for bit positions first. This is useful for</span>
<span class="cm"> * request_irq</span>
<span class="cm"> */</span>
<span class="cp">#define SPIM_IRQ_NUM	0	</span><span class="cm">/* SPI Master interrupt */</span><span class="cp"></span>
<span class="cp">#define	TMR2_IRQ_NUM	1	</span><span class="cm">/* Timer 2 interrupt */</span><span class="cp"></span>
<span class="cp">#define UART_IRQ_NUM	2	</span><span class="cm">/* UART interrupt */</span><span class="cp">	</span>
<span class="cp">#define	WDT_IRQ_NUM	3	</span><span class="cm">/* Watchdog Timer interrupt */</span><span class="cp"></span>
<span class="cp">#define RTC_IRQ_NUM	4	</span><span class="cm">/* RTC interrupt */</span><span class="cp"></span>
<span class="cp">#define	KB_IRQ_NUM	6	</span><span class="cm">/* Keyboard Interrupt */</span><span class="cp"></span>
<span class="cp">#define PWM_IRQ_NUM	7	</span><span class="cm">/* Pulse-Width Modulator int. */</span><span class="cp"></span>
<span class="cp">#define	INT0_IRQ_NUM	8	</span><span class="cm">/* External INT0 */</span><span class="cp"></span>
<span class="cp">#define	INT1_IRQ_NUM	9	</span><span class="cm">/* External INT1 */</span><span class="cp"></span>
<span class="cp">#define	INT2_IRQ_NUM	10	</span><span class="cm">/* External INT2 */</span><span class="cp"></span>
<span class="cp">#define	INT3_IRQ_NUM	11	</span><span class="cm">/* External INT3 */</span><span class="cp"></span>
<span class="cp">#define	INT4_IRQ_NUM	12	</span><span class="cm">/* External INT4 */</span><span class="cp"></span>
<span class="cp">#define	INT5_IRQ_NUM	13	</span><span class="cm">/* External INT5 */</span><span class="cp"></span>
<span class="cp">#define	INT6_IRQ_NUM	14	</span><span class="cm">/* External INT6 */</span><span class="cp"></span>
<span class="cp">#define	INT7_IRQ_NUM	15	</span><span class="cm">/* External INT7 */</span><span class="cp"></span>
<span class="cp">#define IRQ1_IRQ_NUM	16	</span><span class="cm">/* IRQ1 */</span><span class="cp"></span>
<span class="cp">#define IRQ2_IRQ_NUM	17	</span><span class="cm">/* IRQ2 */</span><span class="cp"></span>
<span class="cp">#define IRQ3_IRQ_NUM	18	</span><span class="cm">/* IRQ3 */</span><span class="cp"></span>
<span class="cp">#define IRQ6_IRQ_NUM	19	</span><span class="cm">/* IRQ6 */</span><span class="cp"></span>
<span class="cp">#define PEN_IRQ_NUM	20	</span><span class="cm">/* Pen Interrupt */</span><span class="cp"></span>
<span class="cp">#define SPIS_IRQ_NUM	21	</span><span class="cm">/* SPI Slave Interrupt */</span><span class="cp"></span>
<span class="cp">#define TMR1_IRQ_NUM	22	</span><span class="cm">/* Timer 1 interrupt */</span><span class="cp"></span>
<span class="cp">#define IRQ7_IRQ_NUM	23	</span><span class="cm">/* IRQ7 */</span><span class="cp"></span>

<span class="cm">/* &#39;328-compatible definitions */</span>
<span class="cp">#define SPI_IRQ_NUM	SPIM_IRQ_NUM</span>
<span class="cp">#define TMR_IRQ_NUM	TMR1_IRQ_NUM</span>
 
<span class="cm">/*</span>
<span class="cm"> * Here go the bitmasks themselves</span>
<span class="cm"> */</span>
<span class="cp">#define IMR_MSPIM 	(1 &lt;&lt; SPIM _IRQ_NUM)	</span><span class="cm">/* Mask SPI Master interrupt */</span><span class="cp"></span>
<span class="cp">#define	IMR_MTMR2	(1 &lt;&lt; TMR2_IRQ_NUM)	</span><span class="cm">/* Mask Timer 2 interrupt */</span><span class="cp"></span>
<span class="cp">#define IMR_MUART	(1 &lt;&lt; UART_IRQ_NUM)	</span><span class="cm">/* Mask UART interrupt */</span><span class="cp">	</span>
<span class="cp">#define	IMR_MWDT	(1 &lt;&lt; WDT_IRQ_NUM)	</span><span class="cm">/* Mask Watchdog Timer interrupt */</span><span class="cp"></span>
<span class="cp">#define IMR_MRTC	(1 &lt;&lt; RTC_IRQ_NUM)	</span><span class="cm">/* Mask RTC interrupt */</span><span class="cp"></span>
<span class="cp">#define	IMR_MKB		(1 &lt;&lt; KB_IRQ_NUM)	</span><span class="cm">/* Mask Keyboard Interrupt */</span><span class="cp"></span>
<span class="cp">#define IMR_MPWM	(1 &lt;&lt; PWM_IRQ_NUM)	</span><span class="cm">/* Mask Pulse-Width Modulator int. */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT0	(1 &lt;&lt; INT0_IRQ_NUM)	</span><span class="cm">/* Mask External INT0 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT1	(1 &lt;&lt; INT1_IRQ_NUM)	</span><span class="cm">/* Mask External INT1 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT2	(1 &lt;&lt; INT2_IRQ_NUM)	</span><span class="cm">/* Mask External INT2 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT3	(1 &lt;&lt; INT3_IRQ_NUM)	</span><span class="cm">/* Mask External INT3 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT4	(1 &lt;&lt; INT4_IRQ_NUM)	</span><span class="cm">/* Mask External INT4 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT5	(1 &lt;&lt; INT5_IRQ_NUM)	</span><span class="cm">/* Mask External INT5 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT6	(1 &lt;&lt; INT6_IRQ_NUM)	</span><span class="cm">/* Mask External INT6 */</span><span class="cp"></span>
<span class="cp">#define	IMR_MINT7	(1 &lt;&lt; INT7_IRQ_NUM)	</span><span class="cm">/* Mask External INT7 */</span><span class="cp"></span>
<span class="cp">#define IMR_MIRQ1	(1 &lt;&lt; IRQ1_IRQ_NUM)	</span><span class="cm">/* Mask IRQ1 */</span><span class="cp"></span>
<span class="cp">#define IMR_MIRQ2	(1 &lt;&lt; IRQ2_IRQ_NUM)	</span><span class="cm">/* Mask IRQ2 */</span><span class="cp"></span>
<span class="cp">#define IMR_MIRQ3	(1 &lt;&lt; IRQ3_IRQ_NUM)	</span><span class="cm">/* Mask IRQ3 */</span><span class="cp"></span>
<span class="cp">#define IMR_MIRQ6	(1 &lt;&lt; IRQ6_IRQ_NUM)	</span><span class="cm">/* Mask IRQ6 */</span><span class="cp"></span>
<span class="cp">#define IMR_MPEN	(1 &lt;&lt; PEN_IRQ_NUM)	</span><span class="cm">/* Mask Pen Interrupt */</span><span class="cp"></span>
<span class="cp">#define IMR_MSPIS	(1 &lt;&lt; SPIS_IRQ_NUM)	</span><span class="cm">/* Mask SPI Slave Interrupt */</span><span class="cp"></span>
<span class="cp">#define IMR_MTMR1	(1 &lt;&lt; TMR1_IRQ_NUM)	</span><span class="cm">/* Mask Timer 1 interrupt */</span><span class="cp"></span>
<span class="cp">#define IMR_MIRQ7	(1 &lt;&lt; IRQ7_IRQ_NUM)	</span><span class="cm">/* Mask IRQ7 */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define IMR_MSPI	IMR_MSPIM</span>
<span class="cp">#define IMR_MTMR	IMR_MTMR1</span>

<span class="cm">/* </span>
<span class="cm"> * Interrupt Wake-Up Enable Register</span>
<span class="cm"> */</span>
<span class="cp">#define IWR_ADDR	0xfffff308</span>
<span class="cp">#define IWR		LONG_REF(IWR_ADDR)</span>

<span class="cp">#define IWR_SPIM 	(1 &lt;&lt; SPIM _IRQ_NUM)	</span><span class="cm">/* SPI Master interrupt */</span><span class="cp"></span>
<span class="cp">#define	IWR_TMR2	(1 &lt;&lt; TMR2_IRQ_NUM)	</span><span class="cm">/* Timer 2 interrupt */</span><span class="cp"></span>
<span class="cp">#define IWR_UART	(1 &lt;&lt; UART_IRQ_NUM)	</span><span class="cm">/* UART interrupt */</span><span class="cp">	</span>
<span class="cp">#define	IWR_WDT		(1 &lt;&lt; WDT_IRQ_NUM)	</span><span class="cm">/* Watchdog Timer interrupt */</span><span class="cp"></span>
<span class="cp">#define IWR_RTC		(1 &lt;&lt; RTC_IRQ_NUM)	</span><span class="cm">/* RTC interrupt */</span><span class="cp"></span>
<span class="cp">#define	IWR_KB		(1 &lt;&lt; KB_IRQ_NUM)	</span><span class="cm">/* Keyboard Interrupt */</span><span class="cp"></span>
<span class="cp">#define IWR_PWM		(1 &lt;&lt; PWM_IRQ_NUM)	</span><span class="cm">/* Pulse-Width Modulator int. */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT0	(1 &lt;&lt; INT0_IRQ_NUM)	</span><span class="cm">/* External INT0 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT1	(1 &lt;&lt; INT1_IRQ_NUM)	</span><span class="cm">/* External INT1 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT2	(1 &lt;&lt; INT2_IRQ_NUM)	</span><span class="cm">/* External INT2 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT3	(1 &lt;&lt; INT3_IRQ_NUM)	</span><span class="cm">/* External INT3 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT4	(1 &lt;&lt; INT4_IRQ_NUM)	</span><span class="cm">/* External INT4 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT5	(1 &lt;&lt; INT5_IRQ_NUM)	</span><span class="cm">/* External INT5 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT6	(1 &lt;&lt; INT6_IRQ_NUM)	</span><span class="cm">/* External INT6 */</span><span class="cp"></span>
<span class="cp">#define	IWR_INT7	(1 &lt;&lt; INT7_IRQ_NUM)	</span><span class="cm">/* External INT7 */</span><span class="cp"></span>
<span class="cp">#define IWR_IRQ1	(1 &lt;&lt; IRQ1_IRQ_NUM)	</span><span class="cm">/* IRQ1 */</span><span class="cp"></span>
<span class="cp">#define IWR_IRQ2	(1 &lt;&lt; IRQ2_IRQ_NUM)	</span><span class="cm">/* IRQ2 */</span><span class="cp"></span>
<span class="cp">#define IWR_IRQ3	(1 &lt;&lt; IRQ3_IRQ_NUM)	</span><span class="cm">/* IRQ3 */</span><span class="cp"></span>
<span class="cp">#define IWR_IRQ6	(1 &lt;&lt; IRQ6_IRQ_NUM)	</span><span class="cm">/* IRQ6 */</span><span class="cp"></span>
<span class="cp">#define IWR_PEN		(1 &lt;&lt; PEN_IRQ_NUM)	</span><span class="cm">/* Pen Interrupt */</span><span class="cp"></span>
<span class="cp">#define IWR_SPIS	(1 &lt;&lt; SPIS_IRQ_NUM)	</span><span class="cm">/* SPI Slave Interrupt */</span><span class="cp"></span>
<span class="cp">#define IWR_TMR1	(1 &lt;&lt; TMR1_IRQ_NUM)	</span><span class="cm">/* Timer 1 interrupt */</span><span class="cp"></span>
<span class="cp">#define IWR_IRQ7	(1 &lt;&lt; IRQ7_IRQ_NUM)	</span><span class="cm">/* IRQ7 */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Interrupt Status Register </span>
<span class="cm"> */</span>
<span class="cp">#define ISR_ADDR	0xfffff30c</span>
<span class="cp">#define ISR		LONG_REF(ISR_ADDR)</span>

<span class="cp">#define ISR_SPIM 	(1 &lt;&lt; SPIM _IRQ_NUM)	</span><span class="cm">/* SPI Master interrupt */</span><span class="cp"></span>
<span class="cp">#define	ISR_TMR2	(1 &lt;&lt; TMR2_IRQ_NUM)	</span><span class="cm">/* Timer 2 interrupt */</span><span class="cp"></span>
<span class="cp">#define ISR_UART	(1 &lt;&lt; UART_IRQ_NUM)	</span><span class="cm">/* UART interrupt */</span><span class="cp">	</span>
<span class="cp">#define	ISR_WDT		(1 &lt;&lt; WDT_IRQ_NUM)	</span><span class="cm">/* Watchdog Timer interrupt */</span><span class="cp"></span>
<span class="cp">#define ISR_RTC		(1 &lt;&lt; RTC_IRQ_NUM)	</span><span class="cm">/* RTC interrupt */</span><span class="cp"></span>
<span class="cp">#define	ISR_KB		(1 &lt;&lt; KB_IRQ_NUM)	</span><span class="cm">/* Keyboard Interrupt */</span><span class="cp"></span>
<span class="cp">#define ISR_PWM		(1 &lt;&lt; PWM_IRQ_NUM)	</span><span class="cm">/* Pulse-Width Modulator int. */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT0	(1 &lt;&lt; INT0_IRQ_NUM)	</span><span class="cm">/* External INT0 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT1	(1 &lt;&lt; INT1_IRQ_NUM)	</span><span class="cm">/* External INT1 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT2	(1 &lt;&lt; INT2_IRQ_NUM)	</span><span class="cm">/* External INT2 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT3	(1 &lt;&lt; INT3_IRQ_NUM)	</span><span class="cm">/* External INT3 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT4	(1 &lt;&lt; INT4_IRQ_NUM)	</span><span class="cm">/* External INT4 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT5	(1 &lt;&lt; INT5_IRQ_NUM)	</span><span class="cm">/* External INT5 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT6	(1 &lt;&lt; INT6_IRQ_NUM)	</span><span class="cm">/* External INT6 */</span><span class="cp"></span>
<span class="cp">#define	ISR_INT7	(1 &lt;&lt; INT7_IRQ_NUM)	</span><span class="cm">/* External INT7 */</span><span class="cp"></span>
<span class="cp">#define ISR_IRQ1	(1 &lt;&lt; IRQ1_IRQ_NUM)	</span><span class="cm">/* IRQ1 */</span><span class="cp"></span>
<span class="cp">#define ISR_IRQ2	(1 &lt;&lt; IRQ2_IRQ_NUM)	</span><span class="cm">/* IRQ2 */</span><span class="cp"></span>
<span class="cp">#define ISR_IRQ3	(1 &lt;&lt; IRQ3_IRQ_NUM)	</span><span class="cm">/* IRQ3 */</span><span class="cp"></span>
<span class="cp">#define ISR_IRQ6	(1 &lt;&lt; IRQ6_IRQ_NUM)	</span><span class="cm">/* IRQ6 */</span><span class="cp"></span>
<span class="cp">#define ISR_PEN		(1 &lt;&lt; PEN_IRQ_NUM)	</span><span class="cm">/* Pen Interrupt */</span><span class="cp"></span>
<span class="cp">#define ISR_SPIS	(1 &lt;&lt; SPIS_IRQ_NUM)	</span><span class="cm">/* SPI Slave Interrupt */</span><span class="cp"></span>
<span class="cp">#define ISR_TMR1	(1 &lt;&lt; TMR1_IRQ_NUM)	</span><span class="cm">/* Timer 1 interrupt */</span><span class="cp"></span>
<span class="cp">#define ISR_IRQ7	(1 &lt;&lt; IRQ7_IRQ_NUM)	</span><span class="cm">/* IRQ7 */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define ISR_SPI	ISR_SPIM</span>
<span class="cp">#define ISR_TMR	ISR_TMR1</span>

<span class="cm">/* </span>
<span class="cm"> * Interrupt Pending Register </span>
<span class="cm"> */</span>
<span class="cp">#define IPR_ADDR	0xfffff310</span>
<span class="cp">#define IPR		LONG_REF(IPR_ADDR)</span>

<span class="cp">#define IPR_SPIM 	(1 &lt;&lt; SPIM _IRQ_NUM)	</span><span class="cm">/* SPI Master interrupt */</span><span class="cp"></span>
<span class="cp">#define	IPR_TMR2	(1 &lt;&lt; TMR2_IRQ_NUM)	</span><span class="cm">/* Timer 2 interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_UART	(1 &lt;&lt; UART_IRQ_NUM)	</span><span class="cm">/* UART interrupt */</span><span class="cp">	</span>
<span class="cp">#define	IPR_WDT		(1 &lt;&lt; WDT_IRQ_NUM)	</span><span class="cm">/* Watchdog Timer interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_RTC		(1 &lt;&lt; RTC_IRQ_NUM)	</span><span class="cm">/* RTC interrupt */</span><span class="cp"></span>
<span class="cp">#define	IPR_KB		(1 &lt;&lt; KB_IRQ_NUM)	</span><span class="cm">/* Keyboard Interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_PWM		(1 &lt;&lt; PWM_IRQ_NUM)	</span><span class="cm">/* Pulse-Width Modulator int. */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT0	(1 &lt;&lt; INT0_IRQ_NUM)	</span><span class="cm">/* External INT0 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT1	(1 &lt;&lt; INT1_IRQ_NUM)	</span><span class="cm">/* External INT1 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT2	(1 &lt;&lt; INT2_IRQ_NUM)	</span><span class="cm">/* External INT2 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT3	(1 &lt;&lt; INT3_IRQ_NUM)	</span><span class="cm">/* External INT3 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT4	(1 &lt;&lt; INT4_IRQ_NUM)	</span><span class="cm">/* External INT4 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT5	(1 &lt;&lt; INT5_IRQ_NUM)	</span><span class="cm">/* External INT5 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT6	(1 &lt;&lt; INT6_IRQ_NUM)	</span><span class="cm">/* External INT6 */</span><span class="cp"></span>
<span class="cp">#define	IPR_INT7	(1 &lt;&lt; INT7_IRQ_NUM)	</span><span class="cm">/* External INT7 */</span><span class="cp"></span>
<span class="cp">#define IPR_IRQ1	(1 &lt;&lt; IRQ1_IRQ_NUM)	</span><span class="cm">/* IRQ1 */</span><span class="cp"></span>
<span class="cp">#define IPR_IRQ2	(1 &lt;&lt; IRQ2_IRQ_NUM)	</span><span class="cm">/* IRQ2 */</span><span class="cp"></span>
<span class="cp">#define IPR_IRQ3	(1 &lt;&lt; IRQ3_IRQ_NUM)	</span><span class="cm">/* IRQ3 */</span><span class="cp"></span>
<span class="cp">#define IPR_IRQ6	(1 &lt;&lt; IRQ6_IRQ_NUM)	</span><span class="cm">/* IRQ6 */</span><span class="cp"></span>
<span class="cp">#define IPR_PEN		(1 &lt;&lt; PEN_IRQ_NUM)	</span><span class="cm">/* Pen Interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_SPIS	(1 &lt;&lt; SPIS_IRQ_NUM)	</span><span class="cm">/* SPI Slave Interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_TMR1	(1 &lt;&lt; TMR1_IRQ_NUM)	</span><span class="cm">/* Timer 1 interrupt */</span><span class="cp"></span>
<span class="cp">#define IPR_IRQ7	(1 &lt;&lt; IRQ7_IRQ_NUM)	</span><span class="cm">/* IRQ7 */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define IPR_SPI	IPR_SPIM</span>
<span class="cp">#define IPR_TMR	IPR_TMR1</span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF4xx -- Parallel Ports</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * Port A</span>
<span class="cm"> */</span>
<span class="cp">#define PADIR_ADDR	0xfffff400		</span><span class="cm">/* Port A direction reg */</span><span class="cp"></span>
<span class="cp">#define PADATA_ADDR	0xfffff401		</span><span class="cm">/* Port A data register */</span><span class="cp"></span>
<span class="cp">#define PASEL_ADDR	0xfffff403		</span><span class="cm">/* Port A Select register */</span><span class="cp"></span>

<span class="cp">#define PADIR		BYTE_REF(PADIR_ADDR)</span>
<span class="cp">#define PADATA		BYTE_REF(PADATA_ADDR)</span>
<span class="cp">#define PASEL		BYTE_REF(PASEL_ADDR)</span>

<span class="cp">#define PA(x)           (1 &lt;&lt; (x))</span>
<span class="cp">#define PA_A(x)		PA((x) - 16)	</span><span class="cm">/* This is specific to PA only! */</span><span class="cp"></span>

<span class="cp">#define PA_A16		PA(0)		</span><span class="cm">/* Use A16 as PA(0) */</span><span class="cp"></span>
<span class="cp">#define PA_A17		PA(1)		</span><span class="cm">/* Use A17 as PA(1) */</span><span class="cp"></span>
<span class="cp">#define PA_A18		PA(2)		</span><span class="cm">/* Use A18 as PA(2) */</span><span class="cp"></span>
<span class="cp">#define PA_A19		PA(3)		</span><span class="cm">/* Use A19 as PA(3) */</span><span class="cp"></span>
<span class="cp">#define PA_A20		PA(4)		</span><span class="cm">/* Use A20 as PA(4) */</span><span class="cp"></span>
<span class="cp">#define PA_A21		PA(5)		</span><span class="cm">/* Use A21 as PA(5) */</span><span class="cp"></span>
<span class="cp">#define PA_A22		PA(6)		</span><span class="cm">/* Use A22 as PA(6) */</span><span class="cp"></span>
<span class="cp">#define PA_A23		PA(7)		</span><span class="cm">/* Use A23 as PA(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port B</span>
<span class="cm"> */</span>
<span class="cp">#define PBDIR_ADDR	0xfffff408		</span><span class="cm">/* Port B direction reg */</span><span class="cp"></span>
<span class="cp">#define PBDATA_ADDR	0xfffff409		</span><span class="cm">/* Port B data register */</span><span class="cp"></span>
<span class="cp">#define PBSEL_ADDR	0xfffff40b		</span><span class="cm">/* Port B Select Register */</span><span class="cp"></span>

<span class="cp">#define PBDIR		BYTE_REF(PBDIR_ADDR)</span>
<span class="cp">#define PBDATA		BYTE_REF(PBDATA_ADDR)</span>
<span class="cp">#define PBSEL		BYTE_REF(PBSEL_ADDR)</span>

<span class="cp">#define PB(x)           (1 &lt;&lt; (x))</span>
<span class="cp">#define PB_D(x)		PB(x)		</span><span class="cm">/* This is specific to port B only */</span><span class="cp"></span>

<span class="cp">#define PB_D0		PB(0)		</span><span class="cm">/* Use D0 as PB(0) */</span><span class="cp"></span>
<span class="cp">#define PB_D1		PB(1)		</span><span class="cm">/* Use D1 as PB(1) */</span><span class="cp"></span>
<span class="cp">#define PB_D2		PB(2)		</span><span class="cm">/* Use D2 as PB(2) */</span><span class="cp"></span>
<span class="cp">#define PB_D3		PB(3)		</span><span class="cm">/* Use D3 as PB(3) */</span><span class="cp"></span>
<span class="cp">#define PB_D4		PB(4)		</span><span class="cm">/* Use D4 as PB(4) */</span><span class="cp"></span>
<span class="cp">#define PB_D5		PB(5)		</span><span class="cm">/* Use D5 as PB(5) */</span><span class="cp"></span>
<span class="cp">#define PB_D6		PB(6)		</span><span class="cm">/* Use D6 as PB(6) */</span><span class="cp"></span>
<span class="cp">#define PB_D7		PB(7)		</span><span class="cm">/* Use D7 as PB(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port C</span>
<span class="cm"> */</span>
<span class="cp">#define PCDIR_ADDR	0xfffff410		</span><span class="cm">/* Port C direction reg */</span><span class="cp"></span>
<span class="cp">#define PCDATA_ADDR	0xfffff411		</span><span class="cm">/* Port C data register */</span><span class="cp"></span>
<span class="cp">#define PCSEL_ADDR	0xfffff413		</span><span class="cm">/* Port C Select Register */</span><span class="cp"></span>

<span class="cp">#define PCDIR		BYTE_REF(PCDIR_ADDR)</span>
<span class="cp">#define PCDATA		BYTE_REF(PCDATA_ADDR)</span>
<span class="cp">#define PCSEL		BYTE_REF(PCSEL_ADDR)</span>

<span class="cp">#define PC(x)           (1 &lt;&lt; (x))</span>

<span class="cp">#define PC_WE		PC(6)		</span><span class="cm">/* Use WE    as PC(6) */</span><span class="cp"></span>
<span class="cp">#define PC_DTACK	PC(5)		</span><span class="cm">/* Use DTACK as PC(5) */</span><span class="cp"></span>
<span class="cp">#define PC_IRQ7		PC(4)		</span><span class="cm">/* Use IRQ7  as PC(4) */</span><span class="cp"></span>
<span class="cp">#define PC_LDS		PC(2)		</span><span class="cm">/* Use LDS   as PC(2) */</span><span class="cp"></span>
<span class="cp">#define PC_UDS		PC(1)		</span><span class="cm">/* Use UDS   as PC(1) */</span><span class="cp"></span>
<span class="cp">#define PC_MOCLK	PC(0)		</span><span class="cm">/* Use MOCLK as PC(0) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port D</span>
<span class="cm"> */</span>
<span class="cp">#define PDDIR_ADDR	0xfffff418		</span><span class="cm">/* Port D direction reg */</span><span class="cp"></span>
<span class="cp">#define PDDATA_ADDR	0xfffff419		</span><span class="cm">/* Port D data register */</span><span class="cp"></span>
<span class="cp">#define PDPUEN_ADDR	0xfffff41a		</span><span class="cm">/* Port D Pull-Up enable reg */</span><span class="cp"></span>
<span class="cp">#define PDPOL_ADDR	0xfffff41c		</span><span class="cm">/* Port D Polarity Register */</span><span class="cp"></span>
<span class="cp">#define PDIRQEN_ADDR	0xfffff41d		</span><span class="cm">/* Port D IRQ enable register */</span><span class="cp"></span>
<span class="cp">#define	PDIQEG_ADDR	0xfffff41f		</span><span class="cm">/* Port D IRQ Edge Register */</span><span class="cp"></span>

<span class="cp">#define PDDIR		BYTE_REF(PDDIR_ADDR)</span>
<span class="cp">#define PDDATA		BYTE_REF(PDDATA_ADDR)</span>
<span class="cp">#define PDPUEN		BYTE_REF(PDPUEN_ADDR)</span>
<span class="cp">#define	PDPOL		BYTE_REF(PDPOL_ADDR)</span>
<span class="cp">#define PDIRQEN		BYTE_REF(PDIRQEN_ADDR)</span>
<span class="cp">#define PDIQEG		BYTE_REF(PDIQEG_ADDR)</span>

<span class="cp">#define PD(x)           (1 &lt;&lt; (x))</span>
<span class="cp">#define PD_KB(x)	PD(x)		</span><span class="cm">/* This is specific for Port D only */</span><span class="cp"></span>

<span class="cp">#define PD_KB0		PD(0)	</span><span class="cm">/* Use KB0 as PD(0) */</span><span class="cp"></span>
<span class="cp">#define PD_KB1		PD(1)	</span><span class="cm">/* Use KB1 as PD(1) */</span><span class="cp"></span>
<span class="cp">#define PD_KB2		PD(2)	</span><span class="cm">/* Use KB2 as PD(2) */</span><span class="cp"></span>
<span class="cp">#define PD_KB3		PD(3)	</span><span class="cm">/* Use KB3 as PD(3) */</span><span class="cp"></span>
<span class="cp">#define PD_KB4		PD(4)	</span><span class="cm">/* Use KB4 as PD(4) */</span><span class="cp"></span>
<span class="cp">#define PD_KB5		PD(5)	</span><span class="cm">/* Use KB5 as PD(5) */</span><span class="cp"></span>
<span class="cp">#define PD_KB6		PD(6)	</span><span class="cm">/* Use KB6 as PD(6) */</span><span class="cp"></span>
<span class="cp">#define PD_KB7		PD(7)	</span><span class="cm">/* Use KB7 as PD(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port E</span>
<span class="cm"> */</span>
<span class="cp">#define PEDIR_ADDR	0xfffff420		</span><span class="cm">/* Port E direction reg */</span><span class="cp"></span>
<span class="cp">#define PEDATA_ADDR	0xfffff421		</span><span class="cm">/* Port E data register */</span><span class="cp"></span>
<span class="cp">#define PEPUEN_ADDR	0xfffff422		</span><span class="cm">/* Port E Pull-Up enable reg */</span><span class="cp"></span>
<span class="cp">#define PESEL_ADDR	0xfffff423		</span><span class="cm">/* Port E Select Register */</span><span class="cp"></span>

<span class="cp">#define PEDIR		BYTE_REF(PEDIR_ADDR)</span>
<span class="cp">#define PEDATA		BYTE_REF(PEDATA_ADDR)</span>
<span class="cp">#define PEPUEN		BYTE_REF(PEPUEN_ADDR)</span>
<span class="cp">#define PESEL		BYTE_REF(PESEL_ADDR)</span>

<span class="cp">#define PE(x)           (1 &lt;&lt; (x))</span>

<span class="cp">#define PE_CSA1		PE(1)	</span><span class="cm">/* Use CSA1 as PE(1) */</span><span class="cp"></span>
<span class="cp">#define PE_CSA2		PE(2)	</span><span class="cm">/* Use CSA2 as PE(2) */</span><span class="cp"></span>
<span class="cp">#define PE_CSA3		PE(3)	</span><span class="cm">/* Use CSA3 as PE(3) */</span><span class="cp"></span>
<span class="cp">#define PE_CSB0		PE(4)	</span><span class="cm">/* Use CSB0 as PE(4) */</span><span class="cp"></span>
<span class="cp">#define PE_CSB1		PE(5)	</span><span class="cm">/* Use CSB1 as PE(5) */</span><span class="cp"></span>
<span class="cp">#define PE_CSB2		PE(6)	</span><span class="cm">/* Use CSB2 as PE(6) */</span><span class="cp"></span>
<span class="cp">#define PE_CSB3		PE(7)	</span><span class="cm">/* Use CSB3 as PE(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port F</span>
<span class="cm"> */</span>
<span class="cp">#define PFDIR_ADDR	0xfffff428		</span><span class="cm">/* Port F direction reg */</span><span class="cp"></span>
<span class="cp">#define PFDATA_ADDR	0xfffff429		</span><span class="cm">/* Port F data register */</span><span class="cp"></span>
<span class="cp">#define PFPUEN_ADDR	0xfffff42a		</span><span class="cm">/* Port F Pull-Up enable reg */</span><span class="cp"></span>
<span class="cp">#define PFSEL_ADDR	0xfffff42b		</span><span class="cm">/* Port F Select Register */</span><span class="cp"></span>

<span class="cp">#define PFDIR		BYTE_REF(PFDIR_ADDR)</span>
<span class="cp">#define PFDATA		BYTE_REF(PFDATA_ADDR)</span>
<span class="cp">#define PFPUEN		BYTE_REF(PFPUEN_ADDR)</span>
<span class="cp">#define PFSEL		BYTE_REF(PFSEL_ADDR)</span>

<span class="cp">#define PF(x)           (1 &lt;&lt; (x))</span>
<span class="cp">#define PF_A(x)		PF((x) - 24)	</span><span class="cm">/* This is Port F specific only */</span><span class="cp"></span>

<span class="cp">#define PF_A24		PF(0)	</span><span class="cm">/* Use A24 as PF(0) */</span><span class="cp"></span>
<span class="cp">#define PF_A25		PF(1)	</span><span class="cm">/* Use A25 as PF(1) */</span><span class="cp"></span>
<span class="cp">#define PF_A26		PF(2)	</span><span class="cm">/* Use A26 as PF(2) */</span><span class="cp"></span>
<span class="cp">#define PF_A27		PF(3)	</span><span class="cm">/* Use A27 as PF(3) */</span><span class="cp"></span>
<span class="cp">#define PF_A28		PF(4)	</span><span class="cm">/* Use A28 as PF(4) */</span><span class="cp"></span>
<span class="cp">#define PF_A29		PF(5)	</span><span class="cm">/* Use A29 as PF(5) */</span><span class="cp"></span>
<span class="cp">#define PF_A30		PF(6)	</span><span class="cm">/* Use A30 as PF(6) */</span><span class="cp"></span>
<span class="cp">#define PF_A31		PF(7)	</span><span class="cm">/* Use A31 as PF(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port G</span>
<span class="cm"> */</span>
<span class="cp">#define PGDIR_ADDR	0xfffff430		</span><span class="cm">/* Port G direction reg */</span><span class="cp"></span>
<span class="cp">#define PGDATA_ADDR	0xfffff431		</span><span class="cm">/* Port G data register */</span><span class="cp"></span>
<span class="cp">#define PGPUEN_ADDR	0xfffff432		</span><span class="cm">/* Port G Pull-Up enable reg */</span><span class="cp"></span>
<span class="cp">#define PGSEL_ADDR	0xfffff433		</span><span class="cm">/* Port G Select Register */</span><span class="cp"></span>

<span class="cp">#define PGDIR		BYTE_REF(PGDIR_ADDR)</span>
<span class="cp">#define PGDATA		BYTE_REF(PGDATA_ADDR)</span>
<span class="cp">#define PGPUEN		BYTE_REF(PGPUEN_ADDR)</span>
<span class="cp">#define PGSEL		BYTE_REF(PGSEL_ADDR)</span>

<span class="cp">#define PG(x)           (1 &lt;&lt; (x))</span>

<span class="cp">#define PG_UART_TXD	PG(0)	</span><span class="cm">/* Use UART_TXD as PG(0) */</span><span class="cp"></span>
<span class="cp">#define PG_UART_RXD	PG(1)	</span><span class="cm">/* Use UART_RXD as PG(1) */</span><span class="cp"></span>
<span class="cp">#define PG_PWMOUT	PG(2)	</span><span class="cm">/* Use PWMOUT   as PG(2) */</span><span class="cp"></span>
<span class="cp">#define PG_TOUT2	PG(3)   </span><span class="cm">/* Use TOUT2    as PG(3) */</span><span class="cp"></span>
<span class="cp">#define PG_TIN2		PG(4)	</span><span class="cm">/* Use TIN2     as PG(4) */</span><span class="cp"></span>
<span class="cp">#define PG_TOUT1	PG(5)   </span><span class="cm">/* Use TOUT1    as PG(5) */</span><span class="cp"></span>
<span class="cp">#define PG_TIN1		PG(6)	</span><span class="cm">/* Use TIN1     as PG(6) */</span><span class="cp"></span>
<span class="cp">#define PG_RTCOUT	PG(7)	</span><span class="cm">/* Use RTCOUT   as PG(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port J</span>
<span class="cm"> */</span>
<span class="cp">#define PJDIR_ADDR	0xfffff438		</span><span class="cm">/* Port J direction reg */</span><span class="cp"></span>
<span class="cp">#define PJDATA_ADDR	0xfffff439		</span><span class="cm">/* Port J data register */</span><span class="cp"></span>
<span class="cp">#define PJSEL_ADDR	0xfffff43b		</span><span class="cm">/* Port J Select Register */</span><span class="cp"></span>

<span class="cp">#define PJDIR		BYTE_REF(PJDIR_ADDR)</span>
<span class="cp">#define PJDATA		BYTE_REF(PJDATA_ADDR)</span>
<span class="cp">#define PJSEL		BYTE_REF(PJSEL_ADDR)</span>

<span class="cp">#define PJ(x)           (1 &lt;&lt; (x)) </span>

<span class="cp">#define PJ_CSD3		PJ(7)	</span><span class="cm">/* Use CSD3 as PJ(7) */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Port K</span>
<span class="cm"> */</span>
<span class="cp">#define PKDIR_ADDR	0xfffff440		</span><span class="cm">/* Port K direction reg */</span><span class="cp"></span>
<span class="cp">#define PKDATA_ADDR	0xfffff441		</span><span class="cm">/* Port K data register */</span><span class="cp"></span>
<span class="cp">#define PKPUEN_ADDR	0xfffff442		</span><span class="cm">/* Port K Pull-Up enable reg */</span><span class="cp"></span>
<span class="cp">#define PKSEL_ADDR	0xfffff443		</span><span class="cm">/* Port K Select Register */</span><span class="cp"></span>

<span class="cp">#define PKDIR		BYTE_REF(PKDIR_ADDR)</span>
<span class="cp">#define PKDATA		BYTE_REF(PKDATA_ADDR)</span>
<span class="cp">#define PKPUEN		BYTE_REF(PKPUEN_ADDR)</span>
<span class="cp">#define PKSEL		BYTE_REF(PKSEL_ADDR)</span>

<span class="cp">#define PK(x)           (1 &lt;&lt; (x))</span>

<span class="cm">/* </span>
<span class="cm"> * Port M</span>
<span class="cm"> */</span>
<span class="cp">#define PMDIR_ADDR	0xfffff438		</span><span class="cm">/* Port M direction reg */</span><span class="cp"></span>
<span class="cp">#define PMDATA_ADDR	0xfffff439		</span><span class="cm">/* Port M data register */</span><span class="cp"></span>
<span class="cp">#define PMPUEN_ADDR	0xfffff43a		</span><span class="cm">/* Port M Pull-Up enable reg */</span><span class="cp"></span>
<span class="cp">#define PMSEL_ADDR	0xfffff43b		</span><span class="cm">/* Port M Select Register */</span><span class="cp"></span>

<span class="cp">#define PMDIR		BYTE_REF(PMDIR_ADDR)</span>
<span class="cp">#define PMDATA		BYTE_REF(PMDATA_ADDR)</span>
<span class="cp">#define PMPUEN		BYTE_REF(PMPUEN_ADDR)</span>
<span class="cp">#define PMSEL		BYTE_REF(PMSEL_ADDR)</span>

<span class="cp">#define PM(x)           (1 &lt;&lt; (x))</span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF5xx -- Pulse-Width Modulator (PWM)</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * PWM Control Register </span>
<span class="cm"> */</span>
<span class="cp">#define PWMC_ADDR	0xfffff500</span>
<span class="cp">#define PWMC		WORD_REF(PWMC_ADDR)</span>

<span class="cp">#define PWMC_CLKSEL_MASK	0x0007	</span><span class="cm">/* Clock Selection */</span><span class="cp"></span>
<span class="cp">#define PWMC_CLKSEL_SHIFT	0</span>
<span class="cp">#define PWMC_PWMEN		0x0010	</span><span class="cm">/* Enable PWM */</span><span class="cp"></span>
<span class="cp">#define PMNC_POL		0x0020	</span><span class="cm">/* PWM Output Bit Polarity */</span><span class="cp"></span>
<span class="cp">#define PWMC_PIN		0x0080	</span><span class="cm">/* Current PWM output pin status */</span><span class="cp"></span>
<span class="cp">#define PWMC_LOAD		0x0100	</span><span class="cm">/* Force a new period */</span><span class="cp"></span>
<span class="cp">#define PWMC_IRQEN		0x4000	</span><span class="cm">/* Interrupt Request Enable */</span><span class="cp"></span>
<span class="cp">#define PWMC_CLKSRC		0x8000	</span><span class="cm">/* Clock Source Select */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define PWMC_EN	PWMC_PWMEN</span>

<span class="cm">/*</span>
<span class="cm"> * PWM Period Register</span>
<span class="cm"> */</span>
<span class="cp">#define PWMP_ADDR	0xfffff502</span>
<span class="cp">#define PWMP		WORD_REF(PWMP_ADDR)</span>

<span class="cm">/* </span>
<span class="cm"> * PWM Width Register </span>
<span class="cm"> */</span>
<span class="cp">#define PWMW_ADDR	0xfffff504</span>
<span class="cp">#define PWMW		WORD_REF(PWMW_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * PWM Counter Register</span>
<span class="cm"> */</span>
<span class="cp">#define PWMCNT_ADDR	0xfffff506</span>
<span class="cp">#define PWMCNT		WORD_REF(PWMCNT_ADDR)</span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF6xx -- General-Purpose Timers</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/* </span>
<span class="cm"> * Timer Unit 1 and 2 Control Registers</span>
<span class="cm"> */</span>
<span class="cp">#define TCTL1_ADDR	0xfffff600</span>
<span class="cp">#define TCTL1		WORD_REF(TCTL1_ADDR)</span>
<span class="cp">#define TCTL2_ADDR	0xfffff60c</span>
<span class="cp">#define TCTL2		WORD_REF(TCTL2_ADDR)</span>

<span class="cp">#define	TCTL_TEN		0x0001	</span><span class="cm">/* Timer Enable  */</span><span class="cp"></span>
<span class="cp">#define TCTL_CLKSOURCE_MASK 	0x000e	</span><span class="cm">/* Clock Source: */</span><span class="cp"></span>
<span class="cp">#define   TCTL_CLKSOURCE_STOP	   0x0000	</span><span class="cm">/* Stop count (disabled)    */</span><span class="cp"></span>
<span class="cp">#define   TCTL_CLKSOURCE_SYSCLK	   0x0002	</span><span class="cm">/* SYSCLK to prescaler      */</span><span class="cp"></span>
<span class="cp">#define   TCTL_CLKSOURCE_SYSCLK_16 0x0004	</span><span class="cm">/* SYSCLK/16 to prescaler   */</span><span class="cp"></span>
<span class="cp">#define   TCTL_CLKSOURCE_TIN	   0x0006	</span><span class="cm">/* TIN to prescaler         */</span><span class="cp"></span>
<span class="cp">#define   TCTL_CLKSOURCE_32KHZ	   0x0008	</span><span class="cm">/* 32kHz clock to prescaler */</span><span class="cp"></span>
<span class="cp">#define TCTL_IRQEN		0x0010	</span><span class="cm">/* IRQ Enable    */</span><span class="cp"></span>
<span class="cp">#define TCTL_OM			0x0020	</span><span class="cm">/* Output Mode   */</span><span class="cp"></span>
<span class="cp">#define TCTL_CAP_MASK		0x00c0	</span><span class="cm">/* Capture Edge: */</span><span class="cp"></span>
<span class="cp">#define	  TCTL_CAP_RE		0x0040		</span><span class="cm">/* Capture on rizing edge   */</span><span class="cp"></span>
<span class="cp">#define   TCTL_CAP_FE		0x0080		</span><span class="cm">/* Capture on falling edge  */</span><span class="cp"></span>
<span class="cp">#define TCTL_FRR		0x0010	</span><span class="cm">/* Free-Run Mode */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define TCTL_ADDR	TCTL1_ADDR</span>
<span class="cp">#define TCTL		TCTL1</span>

<span class="cm">/*</span>
<span class="cm"> * Timer Unit 1 and 2 Prescaler Registers</span>
<span class="cm"> */</span>
<span class="cp">#define TPRER1_ADDR	0xfffff602</span>
<span class="cp">#define TPRER1		WORD_REF(TPRER1_ADDR)</span>
<span class="cp">#define TPRER2_ADDR	0xfffff60e</span>
<span class="cp">#define TPRER2		WORD_REF(TPRER2_ADDR)</span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define TPRER_ADDR	TPRER1_ADDR</span>
<span class="cp">#define TPRER		TPRER1</span>

<span class="cm">/*</span>
<span class="cm"> * Timer Unit 1 and 2 Compare Registers</span>
<span class="cm"> */</span>
<span class="cp">#define TCMP1_ADDR	0xfffff604</span>
<span class="cp">#define TCMP1		WORD_REF(TCMP1_ADDR)</span>
<span class="cp">#define TCMP2_ADDR	0xfffff610</span>
<span class="cp">#define TCMP2		WORD_REF(TCMP2_ADDR)</span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define TCMP_ADDR	TCMP1_ADDR</span>
<span class="cp">#define TCMP		TCMP1</span>

<span class="cm">/*</span>
<span class="cm"> * Timer Unit 1 and 2 Capture Registers</span>
<span class="cm"> */</span>
<span class="cp">#define TCR1_ADDR	0xfffff606</span>
<span class="cp">#define TCR1		WORD_REF(TCR1_ADDR)</span>
<span class="cp">#define TCR2_ADDR	0xfffff612</span>
<span class="cp">#define TCR2		WORD_REF(TCR2_ADDR)</span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define TCR_ADDR	TCR1_ADDR</span>
<span class="cp">#define TCR		TCR1</span>

<span class="cm">/*</span>
<span class="cm"> * Timer Unit 1 and 2 Counter Registers</span>
<span class="cm"> */</span>
<span class="cp">#define TCN1_ADDR	0xfffff608</span>
<span class="cp">#define TCN1		WORD_REF(TCN1_ADDR)</span>
<span class="cp">#define TCN2_ADDR	0xfffff614</span>
<span class="cp">#define TCN2		WORD_REF(TCN2_ADDR)</span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define TCN_ADDR	TCN1_ADDR</span>
<span class="cp">#define TCN		TCN</span>

<span class="cm">/*</span>
<span class="cm"> * Timer Unit 1 and 2 Status Registers</span>
<span class="cm"> */</span>
<span class="cp">#define TSTAT1_ADDR	0xfffff60a</span>
<span class="cp">#define TSTAT1		WORD_REF(TSTAT1_ADDR)</span>
<span class="cp">#define TSTAT2_ADDR	0xfffff616</span>
<span class="cp">#define TSTAT2		WORD_REF(TSTAT2_ADDR)</span>

<span class="cp">#define TSTAT_COMP	0x0001		</span><span class="cm">/* Compare Event occurred */</span><span class="cp"></span>
<span class="cp">#define TSTAT_CAPT	0x0001		</span><span class="cm">/* Capture Event occurred */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define TSTAT_ADDR	TSTAT1_ADDR</span>
<span class="cp">#define TSTAT		TSTAT1</span>

<span class="cm">/*</span>
<span class="cm"> * Watchdog Compare Register </span>
<span class="cm"> */</span>
<span class="cp">#define WRR_ADDR	0xfffff61a</span>
<span class="cp">#define WRR		WORD_REF(WRR_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * Watchdog Counter Register </span>
<span class="cm"> */</span>
<span class="cp">#define WCN_ADDR	0xfffff61c</span>
<span class="cp">#define WCN		WORD_REF(WCN_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * Watchdog Control and Status Register</span>
<span class="cm"> */</span>
<span class="cp">#define WCSR_ADDR	0xfffff618</span>
<span class="cp">#define WCSR		WORD_REF(WCSR_ADDR)</span>

<span class="cp">#define WCSR_WDEN	0x0001	</span><span class="cm">/* Watchdog Enable */</span><span class="cp"></span>
<span class="cp">#define WCSR_FI		0x0002	</span><span class="cm">/* Forced Interrupt (instead of SW reset)*/</span><span class="cp"></span>
<span class="cp">#define WCSR_WRST	0x0004	</span><span class="cm">/* Watchdog Reset */</span><span class="cp"></span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF7xx -- Serial Periferial Interface Slave (SPIS)</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * SPI Slave Register</span>
<span class="cm"> */</span>
<span class="cp">#define SPISR_ADDR	0xfffff700</span>
<span class="cp">#define SPISR		WORD_REF(SPISR_ADDR)</span>

<span class="cp">#define SPISR_DATA_ADDR	0xfffff701</span>
<span class="cp">#define SPISR_DATA	BYTE_REF(SPISR_DATA_ADDR)</span>

<span class="cp">#define SPISR_DATA_MASK	 0x00ff	</span><span class="cm">/* Shifted data from the external device */</span><span class="cp"></span>
<span class="cp">#define SPISR_DATA_SHIFT 0</span>
<span class="cp">#define SPISR_SPISEN	 0x0100	</span><span class="cm">/* SPIS module enable */</span><span class="cp"></span>
<span class="cp">#define SPISR_POL	 0x0200	</span><span class="cm">/* SPSCLK polarity control */</span><span class="cp"></span>
<span class="cp">#define SPISR_PHA	 0x0400	</span><span class="cm">/* Phase relationship between SPSCLK &amp; SPSRxD */</span><span class="cp"></span>
<span class="cp">#define SPISR_OVWR	 0x0800	</span><span class="cm">/* Data buffer has been overwritten */</span><span class="cp"></span>
<span class="cp">#define SPISR_DATARDY	 0x1000	</span><span class="cm">/* Data ready */</span><span class="cp"></span>
<span class="cp">#define SPISR_ENPOL	 0x2000	</span><span class="cm">/* Enable Polarity */</span><span class="cp"></span>
<span class="cp">#define SPISR_IRQEN	 0x4000	</span><span class="cm">/* SPIS IRQ Enable */</span><span class="cp"></span>
<span class="cp">#define SPISR_SPISIRQ	 0x8000	</span><span class="cm">/* SPIS IRQ posted */</span><span class="cp"></span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF8xx -- Serial Periferial Interface Master (SPIM)</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * SPIM Data Register</span>
<span class="cm"> */</span>
<span class="cp">#define SPIMDATA_ADDR	0xfffff800</span>
<span class="cp">#define SPIMDATA	WORD_REF(SPIMDATA_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * SPIM Control/Status Register</span>
<span class="cm"> */</span>
<span class="cp">#define SPIMCONT_ADDR	0xfffff802</span>
<span class="cp">#define SPIMCONT	WORD_REF(SPIMCONT_ADDR)</span>

<span class="cp">#define SPIMCONT_BIT_COUNT_MASK	 0x000f	</span><span class="cm">/* Transfer Length in Bytes */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_BIT_COUNT_SHIFT 0</span>
<span class="cp">#define SPIMCONT_POL		 0x0010	</span><span class="cm">/* SPMCLK Signel Polarity */</span><span class="cp"></span>
<span class="cp">#define	SPIMCONT_PHA		 0x0020	</span><span class="cm">/* Clock/Data phase relationship */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_IRQEN		 0x0040 </span><span class="cm">/* IRQ Enable */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_SPIMIRQ	 0x0080	</span><span class="cm">/* Interrupt Request */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_XCH		 0x0100	</span><span class="cm">/* Exchange */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_RSPIMEN	 0x0200	</span><span class="cm">/* Enable SPIM */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_DATA_RATE_MASK	 0xe000	</span><span class="cm">/* SPIM Data Rate */</span><span class="cp"></span>
<span class="cp">#define SPIMCONT_DATA_RATE_SHIFT 13</span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define SPIMCONT_IRQ	SPIMCONT_SPIMIRQ</span>
<span class="cp">#define SPIMCONT_ENABLE	SPIMCONT_SPIMEN</span>
<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFF9xx -- UART</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * UART Status/Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define USTCNT_ADDR	0xfffff900</span>
<span class="cp">#define USTCNT		WORD_REF(USTCNT_ADDR)</span>

<span class="cp">#define USTCNT_TXAVAILEN	0x0001	</span><span class="cm">/* Transmitter Available Int Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_TXHALFEN		0x0002	</span><span class="cm">/* Transmitter Half Empty Int Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_TXEMPTYEN	0x0004	</span><span class="cm">/* Transmitter Empty Int Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_RXREADYEN	0x0008	</span><span class="cm">/* Receiver Ready Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_RXHALFEN		0x0010	</span><span class="cm">/* Receiver Half-Full Int Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_RXFULLEN		0x0020	</span><span class="cm">/* Receiver Full Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_CTSDELTAEN	0x0040	</span><span class="cm">/* CTS Delta Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_GPIODELTAEN	0x0080	</span><span class="cm">/* Old Data Interrupt Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_8_7		0x0100	</span><span class="cm">/* Eight or seven-bit transmission */</span><span class="cp"></span>
<span class="cp">#define USTCNT_STOP		0x0200	</span><span class="cm">/* Stop bit transmission */</span><span class="cp"></span>
<span class="cp">#define USTCNT_ODD_EVEN		0x0400	</span><span class="cm">/* Odd Parity */</span><span class="cp"></span>
<span class="cp">#define	USTCNT_PARITYEN		0x0800	</span><span class="cm">/* Parity Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_CLKMODE		0x1000	</span><span class="cm">/* Clock Mode Select */</span><span class="cp"></span>
<span class="cp">#define	USTCNT_TXEN		0x2000	</span><span class="cm">/* Transmitter Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_RXEN		0x4000	</span><span class="cm">/* Receiver Enable */</span><span class="cp"></span>
<span class="cp">#define USTCNT_UARTEN		0x8000	</span><span class="cm">/* UART Enable */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define USTCNT_TXAE	USTCNT_TXAVAILEN </span>
<span class="cp">#define USTCNT_TXHE	USTCNT_TXHALFEN</span>
<span class="cp">#define USTCNT_TXEE	USTCNT_TXEMPTYEN</span>
<span class="cp">#define USTCNT_RXRE	USTCNT_RXREADYEN</span>
<span class="cp">#define USTCNT_RXHE	USTCNT_RXHALFEN</span>
<span class="cp">#define USTCNT_RXFE	USTCNT_RXFULLEN</span>
<span class="cp">#define USTCNT_CTSD	USTCNT_CTSDELTAEN</span>
<span class="cp">#define USTCNT_ODD	USTCNT_ODD_EVEN</span>
<span class="cp">#define USTCNT_PEN	USTCNT_PARITYEN</span>
<span class="cp">#define USTCNT_CLKM	USTCNT_CLKMODE</span>
<span class="cp">#define USTCNT_UEN	USTCNT_UARTEN</span>

<span class="cm">/*</span>
<span class="cm"> * UART Baud Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define UBAUD_ADDR	0xfffff902</span>
<span class="cp">#define UBAUD		WORD_REF(UBAUD_ADDR)</span>

<span class="cp">#define UBAUD_PRESCALER_MASK	0x003f	</span><span class="cm">/* Actual divisor is 65 - PRESCALER */</span><span class="cp"></span>
<span class="cp">#define UBAUD_PRESCALER_SHIFT	0</span>
<span class="cp">#define UBAUD_DIVIDE_MASK	0x0700	</span><span class="cm">/* Baud Rate freq. divizor */</span><span class="cp"></span>
<span class="cp">#define UBAUD_DIVIDE_SHIFT	8</span>
<span class="cp">#define UBAUD_BAUD_SRC		0x0800	</span><span class="cm">/* Baud Rate Source */</span><span class="cp"></span>
<span class="cp">#define UBAUD_GPIOSRC		0x1000	</span><span class="cm">/* GPIO source */</span><span class="cp"></span>
<span class="cp">#define UBAUD_GPIODIR		0x2000	</span><span class="cm">/* GPIO Direction */</span><span class="cp"></span>
<span class="cp">#define UBAUD_GPIO		0x4000	</span><span class="cm">/* Current GPIO pin status */</span><span class="cp"></span>
<span class="cp">#define UBAUD_GPIODELTA		0x8000	</span><span class="cm">/* GPIO pin value changed */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * UART Receiver Register </span>
<span class="cm"> */</span>
<span class="cp">#define URX_ADDR	0xfffff904</span>
<span class="cp">#define URX		WORD_REF(URX_ADDR)</span>

<span class="cp">#define URX_RXDATA_ADDR	0xfffff905</span>
<span class="cp">#define URX_RXDATA	BYTE_REF(URX_RXDATA_ADDR)</span>

<span class="cp">#define URX_RXDATA_MASK	 0x00ff	</span><span class="cm">/* Received data */</span><span class="cp"></span>
<span class="cp">#define URX_RXDATA_SHIFT 0</span>
<span class="cp">#define URX_PARITY_ERROR 0x0100	</span><span class="cm">/* Parity Error */</span><span class="cp"></span>
<span class="cp">#define URX_BREAK	 0x0200	</span><span class="cm">/* Break Detected */</span><span class="cp"></span>
<span class="cp">#define URX_FRAME_ERROR	 0x0400	</span><span class="cm">/* Framing Error */</span><span class="cp"></span>
<span class="cp">#define URX_OVRUN	 0x0800	</span><span class="cm">/* Serial Overrun */</span><span class="cp"></span>
<span class="cp">#define URX_DATA_READY	 0x2000	</span><span class="cm">/* Data Ready (FIFO not empty) */</span><span class="cp"></span>
<span class="cp">#define URX_FIFO_HALF	 0x4000 </span><span class="cm">/* FIFO is Half-Full */</span><span class="cp"></span>
<span class="cp">#define URX_FIFO_FULL	 0x8000	</span><span class="cm">/* FIFO is Full */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * UART Transmitter Register </span>
<span class="cm"> */</span>
<span class="cp">#define UTX_ADDR	0xfffff906</span>
<span class="cp">#define UTX		WORD_REF(UTX_ADDR)</span>

<span class="cp">#define UTX_TXDATA_ADDR	0xfffff907</span>
<span class="cp">#define UTX_TXDATA	BYTE_REF(UTX_TXDATA_ADDR)</span>

<span class="cp">#define UTX_TXDATA_MASK	 0x00ff	</span><span class="cm">/* Data to be transmitted */</span><span class="cp"></span>
<span class="cp">#define UTX_TXDATA_SHIFT 0</span>
<span class="cp">#define UTX_CTS_DELTA	 0x0100	</span><span class="cm">/* CTS changed */</span><span class="cp"></span>
<span class="cp">#define UTX_CTS_STATUS	 0x0200	</span><span class="cm">/* CTS State */</span><span class="cp"></span>
<span class="cp">#define	UTX_IGNORE_CTS	 0x0800	</span><span class="cm">/* Ignore CTS */</span><span class="cp"></span>
<span class="cp">#define UTX_SEND_BREAK	 0x1000	</span><span class="cm">/* Send a BREAK */</span><span class="cp"></span>
<span class="cp">#define UTX_TX_AVAIL	 0x2000	</span><span class="cm">/* Transmit FIFO has a slot available */</span><span class="cp"></span>
<span class="cp">#define UTX_FIFO_HALF	 0x4000	</span><span class="cm">/* Transmit FIFO is half empty */</span><span class="cp"></span>
<span class="cp">#define UTX_FIFO_EMPTY	 0x8000	</span><span class="cm">/* Transmit FIFO is empty */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define UTX_CTS_STAT	UTX_CTS_STATUS</span>
<span class="cp">#define UTX_NOCTS	UTX_IGNORE_CTS</span>

<span class="cm">/*</span>
<span class="cm"> * UART Miscellaneous Register </span>
<span class="cm"> */</span>
<span class="cp">#define UMISC_ADDR	0xfffff908</span>
<span class="cp">#define UMISC		WORD_REF(UMISC_ADDR)</span>

<span class="cp">#define UMISC_TX_POL	 0x0004	</span><span class="cm">/* Transmit Polarity */</span><span class="cp"></span>
<span class="cp">#define UMISC_RX_POL	 0x0008	</span><span class="cm">/* Receive Polarity */</span><span class="cp"></span>
<span class="cp">#define UMISC_IRDA_LOOP	 0x0010	</span><span class="cm">/* IrDA Loopback Enable */</span><span class="cp"></span>
<span class="cp">#define UMISC_IRDA_EN	 0x0020	</span><span class="cm">/* Infra-Red Enable */</span><span class="cp"></span>
<span class="cp">#define UMISC_RTS	 0x0040	</span><span class="cm">/* Set RTS status */</span><span class="cp"></span>
<span class="cp">#define UMISC_RTSCONT	 0x0080	</span><span class="cm">/* Choose RTS control */</span><span class="cp"></span>
<span class="cp">#define UMISC_LOOP	 0x1000	</span><span class="cm">/* Serial Loopback Enable */</span><span class="cp"></span>
<span class="cp">#define UMISC_FORCE_PERR 0x2000	</span><span class="cm">/* Force Parity Error */</span><span class="cp"></span>
<span class="cp">#define UMISC_CLKSRC	 0x4000	</span><span class="cm">/* Clock Source */</span><span class="cp"></span>


<span class="cm">/* generalization of uart control registers to support multiple ports: */</span>
<span class="k">typedef</span> <span class="k">volatile</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">ustcnt</span><span class="p">;</span>
  <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">ubaud</span><span class="p">;</span>
  <span class="k">union</span> <span class="p">{</span>
    <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">w</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
      <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">status</span><span class="p">;</span>
      <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">rxdata</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">b</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">urx</span><span class="p">;</span>
  <span class="k">union</span> <span class="p">{</span>
    <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">w</span><span class="p">;</span>
    <span class="k">struct</span> <span class="p">{</span>
      <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">status</span><span class="p">;</span>
      <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">txdata</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">b</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">utx</span><span class="p">;</span>
  <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">umisc</span><span class="p">;</span>
  <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">pad1</span><span class="p">;</span>
  <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">pad2</span><span class="p">;</span>
  <span class="k">volatile</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="kt">int</span> <span class="n">pad3</span><span class="p">;</span>
<span class="p">}</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">packed</span><span class="p">))</span> <span class="n">m68328_uart</span><span class="p">;</span>


<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFFAxx -- LCD Controller</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Screen Starting Address Register </span>
<span class="cm"> */</span>
<span class="cp">#define LSSA_ADDR	0xfffffa00</span>
<span class="cp">#define LSSA		LONG_REF(LSSA_ADDR)</span>

<span class="cp">#define LSSA_SSA_MASK	0xfffffffe	</span><span class="cm">/* Bit 0 is reserved */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LCD Virtual Page Width Register </span>
<span class="cm"> */</span>
<span class="cp">#define LVPW_ADDR	0xfffffa05</span>
<span class="cp">#define LVPW		BYTE_REF(LVPW_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Screen Width Register (not compatible with &#39;EZ328 !!!)</span>
<span class="cm"> */</span>
<span class="cp">#define LXMAX_ADDR	0xfffffa08</span>
<span class="cp">#define LXMAX		WORD_REF(LXMAX_ADDR)</span>

<span class="cp">#define LXMAX_XM_MASK	0x02ff		</span><span class="cm">/* Bits 0-3 are reserved */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LCD Screen Height Register</span>
<span class="cm"> */</span>
<span class="cp">#define LYMAX_ADDR	0xfffffa0a</span>
<span class="cp">#define LYMAX		WORD_REF(LYMAX_ADDR)</span>

<span class="cp">#define LYMAX_YM_MASK	0x02ff		</span><span class="cm">/* Bits 10-15 are reserved */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LCD Cursor X Position Register</span>
<span class="cm"> */</span>
<span class="cp">#define LCXP_ADDR	0xfffffa18</span>
<span class="cp">#define LCXP		WORD_REF(LCXP_ADDR)</span>

<span class="cp">#define LCXP_CC_MASK	0xc000		</span><span class="cm">/* Cursor Control */</span><span class="cp"></span>
<span class="cp">#define   LCXP_CC_TRAMSPARENT	0x0000</span>
<span class="cp">#define   LCXP_CC_BLACK		0x4000</span>
<span class="cp">#define   LCXP_CC_REVERSED	0x8000</span>
<span class="cp">#define   LCXP_CC_WHITE		0xc000</span>
<span class="cp">#define LCXP_CXP_MASK	0x02ff		</span><span class="cm">/* Cursor X position */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LCD Cursor Y Position Register</span>
<span class="cm"> */</span>
<span class="cp">#define LCYP_ADDR	0xfffffa1a</span>
<span class="cp">#define LCYP		WORD_REF(LCYP_ADDR)</span>

<span class="cp">#define LCYP_CYP_MASK	0x01ff		</span><span class="cm">/* Cursor Y Position */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LCD Cursor Width and Heigth Register</span>
<span class="cm"> */</span>
<span class="cp">#define LCWCH_ADDR	0xfffffa1c</span>
<span class="cp">#define LCWCH		WORD_REF(LCWCH_ADDR)</span>

<span class="cp">#define LCWCH_CH_MASK	0x001f		</span><span class="cm">/* Cursor Height */</span><span class="cp"></span>
<span class="cp">#define LCWCH_CH_SHIFT	0</span>
<span class="cp">#define LCWCH_CW_MASK	0x1f00		</span><span class="cm">/* Cursor Width */</span><span class="cp"></span>
<span class="cp">#define LCWCH_CW_SHIFT	8</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Blink Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define LBLKC_ADDR	0xfffffa1f</span>
<span class="cp">#define LBLKC		BYTE_REF(LBLKC_ADDR)</span>

<span class="cp">#define LBLKC_BD_MASK	0x7f	</span><span class="cm">/* Blink Divisor */</span><span class="cp"></span>
<span class="cp">#define LBLKC_BD_SHIFT	0</span>
<span class="cp">#define LBLKC_BKEN	0x80	</span><span class="cm">/* Blink Enabled */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LCD Panel Interface Configuration Register </span>
<span class="cm"> */</span>
<span class="cp">#define LPICF_ADDR	0xfffffa20</span>
<span class="cp">#define LPICF		BYTE_REF(LPICF_ADDR)</span>

<span class="cp">#define LPICF_GS_MASK	 0x01	 </span><span class="cm">/* Gray-Scale Mode */</span><span class="cp"></span>
<span class="cp">#define	  LPICF_GS_BW	   0x00</span>
<span class="cp">#define   LPICF_GS_GRAY_4  0x01</span>
<span class="cp">#define LPICF_PBSIZ_MASK 0x06	</span><span class="cm">/* Panel Bus Width */</span><span class="cp"></span>
<span class="cp">#define   LPICF_PBSIZ_1	   0x00</span>
<span class="cp">#define   LPICF_PBSIZ_2    0x02</span>
<span class="cp">#define   LPICF_PBSIZ_4    0x04</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Polarity Configuration Register </span>
<span class="cm"> */</span>
<span class="cp">#define LPOLCF_ADDR	0xfffffa21</span>
<span class="cp">#define LPOLCF		BYTE_REF(LPOLCF_ADDR)</span>

<span class="cp">#define LPOLCF_PIXPOL	0x01	</span><span class="cm">/* Pixel Polarity */</span><span class="cp"></span>
<span class="cp">#define LPOLCF_LPPOL	0x02	</span><span class="cm">/* Line Pulse Polarity */</span><span class="cp"></span>
<span class="cp">#define LPOLCF_FLMPOL	0x04	</span><span class="cm">/* Frame Marker Polarity */</span><span class="cp"></span>
<span class="cp">#define LPOLCF_LCKPOL	0x08	</span><span class="cm">/* LCD Shift Lock Polarity */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * LACD (LCD Alternate Crystal Direction) Rate Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define LACDRC_ADDR	0xfffffa23</span>
<span class="cp">#define LACDRC		BYTE_REF(LACDRC_ADDR)</span>

<span class="cp">#define LACDRC_ACD_MASK	 0x0f	</span><span class="cm">/* Alternate Crystal Direction Control */</span><span class="cp"></span>
<span class="cp">#define LACDRC_ACD_SHIFT 0</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Pixel Clock Divider Register</span>
<span class="cm"> */</span>
<span class="cp">#define LPXCD_ADDR	0xfffffa25</span>
<span class="cp">#define LPXCD		BYTE_REF(LPXCD_ADDR)</span>

<span class="cp">#define	LPXCD_PCD_MASK	0x3f 	</span><span class="cm">/* Pixel Clock Divider */</span><span class="cp"></span>
<span class="cp">#define LPXCD_PCD_SHIFT	0</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Clocking Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define LCKCON_ADDR	0xfffffa27</span>
<span class="cp">#define LCKCON		BYTE_REF(LCKCON_ADDR)</span>

<span class="cp">#define LCKCON_PCDS	 0x01	</span><span class="cm">/* Pixel Clock Divider Source Select */</span><span class="cp"></span>
<span class="cp">#define LCKCON_DWIDTH	 0x02	</span><span class="cm">/* Display Memory Width  */</span><span class="cp"></span>
<span class="cp">#define LCKCON_DWS_MASK	 0x3c	</span><span class="cm">/* Display Wait-State */</span><span class="cp"></span>
<span class="cp">#define LCKCON_DWS_SHIFT 2</span>
<span class="cp">#define LCKCON_DMA16	 0x40	</span><span class="cm">/* DMA burst length */</span><span class="cp"></span>
<span class="cp">#define LCKCON_LCDON	 0x80	</span><span class="cm">/* Enable LCD Controller */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define LCKCON_DW_MASK	LCKCON_DWS_MASK</span>
<span class="cp">#define LCKCON_DW_SHIFT	LCKCON_DWS_SHIFT</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Last Buffer Address Register</span>
<span class="cm"> */</span>
<span class="cp">#define LLBAR_ADDR	0xfffffa29</span>
<span class="cp">#define LLBAR		BYTE_REF(LLBAR_ADDR)</span>

<span class="cp">#define LLBAR_LBAR_MASK	 0x7f	</span><span class="cm">/* Number of memory words to fill 1 line */</span><span class="cp"></span>
<span class="cp">#define LLBAR_LBAR_SHIFT 0</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Octet Terminal Count Register </span>
<span class="cm"> */</span>
<span class="cp">#define LOTCR_ADDR	0xfffffa2b</span>
<span class="cp">#define LOTCR		BYTE_REF(LOTCR_ADDR)</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Panning Offset Register</span>
<span class="cm"> */</span>
<span class="cp">#define LPOSR_ADDR	0xfffffa2d</span>
<span class="cp">#define LPOSR		BYTE_REF(LPOSR_ADDR)</span>

<span class="cp">#define LPOSR_BOS	0x08	</span><span class="cm">/* Byte offset (for B/W mode only */</span><span class="cp"></span>
<span class="cp">#define LPOSR_POS_MASK	0x07	</span><span class="cm">/* Pixel Offset Code */</span><span class="cp"></span>
<span class="cp">#define LPOSR_POS_SHIFT	0</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Frame Rate Control Modulation Register</span>
<span class="cm"> */</span>
<span class="cp">#define LFRCM_ADDR	0xfffffa31</span>
<span class="cp">#define LFRCM		BYTE_REF(LFRCM_ADDR)</span>

<span class="cp">#define LFRCM_YMOD_MASK	 0x0f	</span><span class="cm">/* Vertical Modulation */</span><span class="cp"></span>
<span class="cp">#define LFRCM_YMOD_SHIFT 0</span>
<span class="cp">#define LFRCM_XMOD_MASK	 0xf0	</span><span class="cm">/* Horizontal Modulation */</span><span class="cp"></span>
<span class="cp">#define LFRCM_XMOD_SHIFT 4</span>

<span class="cm">/*</span>
<span class="cm"> * LCD Gray Palette Mapping Register</span>
<span class="cm"> */</span>
<span class="cp">#define LGPMR_ADDR	0xfffffa32</span>
<span class="cp">#define LGPMR		WORD_REF(LGPMR_ADDR)</span>

<span class="cp">#define LGPMR_GLEVEL3_MASK	0x000f</span>
<span class="cp">#define LGPMR_GLEVEL3_SHIFT	0 </span>
<span class="cp">#define LGPMR_GLEVEL2_MASK	0x00f0</span>
<span class="cp">#define LGPMR_GLEVEL2_SHIFT	4 </span>
<span class="cp">#define LGPMR_GLEVEL0_MASK	0x0f00</span>
<span class="cp">#define LGPMR_GLEVEL0_SHIFT	8 </span>
<span class="cp">#define LGPMR_GLEVEL1_MASK	0xf000</span>
<span class="cp">#define LGPMR_GLEVEL1_SHIFT	12</span>

<span class="cm">/**********</span>
<span class="cm"> *</span>
<span class="cm"> * 0xFFFFFBxx -- Real-Time Clock (RTC)</span>
<span class="cm"> *</span>
<span class="cm"> **********/</span>

<span class="cm">/*</span>
<span class="cm"> * RTC Hours Minutes and Seconds Register</span>
<span class="cm"> */</span>
<span class="cp">#define RTCTIME_ADDR	0xfffffb00</span>
<span class="cp">#define RTCTIME		LONG_REF(RTCTIME_ADDR)</span>

<span class="cp">#define RTCTIME_SECONDS_MASK	0x0000003f	</span><span class="cm">/* Seconds */</span><span class="cp"></span>
<span class="cp">#define RTCTIME_SECONDS_SHIFT	0</span>
<span class="cp">#define RTCTIME_MINUTES_MASK	0x003f0000	</span><span class="cm">/* Minutes */</span><span class="cp"></span>
<span class="cp">#define RTCTIME_MINUTES_SHIFT	16</span>
<span class="cp">#define RTCTIME_HOURS_MASK	0x1f000000	</span><span class="cm">/* Hours */</span><span class="cp"></span>
<span class="cp">#define RTCTIME_HOURS_SHIFT	24</span>

<span class="cm">/*</span>
<span class="cm"> *  RTC Alarm Register </span>
<span class="cm"> */</span>
<span class="cp">#define RTCALRM_ADDR    0xfffffb04</span>
<span class="cp">#define RTCALRM         LONG_REF(RTCALRM_ADDR)</span>

<span class="cp">#define RTCALRM_SECONDS_MASK    0x0000003f      </span><span class="cm">/* Seconds */</span><span class="cp"></span>
<span class="cp">#define RTCALRM_SECONDS_SHIFT   0</span>
<span class="cp">#define RTCALRM_MINUTES_MASK    0x003f0000      </span><span class="cm">/* Minutes */</span><span class="cp"></span>
<span class="cp">#define RTCALRM_MINUTES_SHIFT   16</span>
<span class="cp">#define RTCALRM_HOURS_MASK      0x1f000000      </span><span class="cm">/* Hours */</span><span class="cp"></span>
<span class="cp">#define RTCALRM_HOURS_SHIFT     24</span>

<span class="cm">/*</span>
<span class="cm"> * RTC Control Register</span>
<span class="cm"> */</span>
<span class="cp">#define RTCCTL_ADDR	0xfffffb0c</span>
<span class="cp">#define RTCCTL		WORD_REF(RTCCTL_ADDR)</span>

<span class="cp">#define RTCCTL_384	0x0020	</span><span class="cm">/* Crystal Selection */</span><span class="cp"></span>
<span class="cp">#define RTCCTL_ENABLE	0x0080	</span><span class="cm">/* RTC Enable */</span><span class="cp"></span>

<span class="cm">/* &#39;EZ328-compatible definitions */</span>
<span class="cp">#define RTCCTL_XTL	RTCCTL_384</span>
<span class="cp">#define RTCCTL_EN	RTCCTL_ENABLE</span>

<span class="cm">/*</span>
<span class="cm"> * RTC Interrupt Status Register </span>
<span class="cm"> */</span>
<span class="cp">#define RTCISR_ADDR	0xfffffb0e</span>
<span class="cp">#define RTCISR		WORD_REF(RTCISR_ADDR)</span>

<span class="cp">#define RTCISR_SW	0x0001	</span><span class="cm">/* Stopwatch timed out */</span><span class="cp"></span>
<span class="cp">#define RTCISR_MIN	0x0002	</span><span class="cm">/* 1-minute interrupt has occurred */</span><span class="cp"></span>
<span class="cp">#define RTCISR_ALM	0x0004	</span><span class="cm">/* Alarm interrupt has occurred */</span><span class="cp"></span>
<span class="cp">#define RTCISR_DAY	0x0008	</span><span class="cm">/* 24-hour rollover interrupt has occurred */</span><span class="cp"></span>
<span class="cp">#define RTCISR_1HZ	0x0010	</span><span class="cm">/* 1Hz interrupt has occurred */</span><span class="cp"></span>

<span class="cm">/*</span>
<span class="cm"> * RTC Interrupt Enable Register</span>
<span class="cm"> */</span>
<span class="cp">#define RTCIENR_ADDR	0xfffffb10</span>
<span class="cp">#define RTCIENR		WORD_REF(RTCIENR_ADDR)</span>

<span class="cp">#define RTCIENR_SW	0x0001	</span><span class="cm">/* Stopwatch interrupt enable */</span><span class="cp"></span>
<span class="cp">#define RTCIENR_MIN	0x0002	</span><span class="cm">/* 1-minute interrupt enable */</span><span class="cp"></span>
<span class="cp">#define RTCIENR_ALM	0x0004	</span><span class="cm">/* Alarm interrupt enable */</span><span class="cp"></span>
<span class="cp">#define RTCIENR_DAY	0x0008	</span><span class="cm">/* 24-hour rollover interrupt enable */</span><span class="cp"></span>
<span class="cp">#define RTCIENR_1HZ	0x0010	</span><span class="cm">/* 1Hz interrupt enable */</span><span class="cp"></span>

<span class="cm">/* </span>
<span class="cm"> * Stopwatch Minutes Register</span>
<span class="cm"> */</span>
<span class="cp">#define STPWCH_ADDR	0xfffffb12</span>
<span class="cp">#define STPWCH		WORD_REF(STPWCH)</span>

<span class="cp">#define STPWCH_CNT_MASK	 0x00ff	</span><span class="cm">/* Stopwatch countdown value */</span><span class="cp"></span>
<span class="cp">#define SPTWCH_CNT_SHIFT 0</span>

<span class="cp">#endif </span><span class="cm">/* _MC68328_H_ */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
