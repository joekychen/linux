f | q40ints.h | s | 710B | 22 | Geert Uytterhoeven | geert@linux-m68k.org | 1320788152 |  | m68k/irq: Remove obsolete m68k irq framework  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | kmap_types.h | s | 139B | 4 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | io.h | s | 70B | 5 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | motorola_pgtable.h | s | 9.5K | 239 | Greg Ungerer | gerg@uclinux.org | 1325204437 |  | m68k: use ColdFire MMU read/write bit flags when ioremapping  The ColdFire MMU has separate read and write bits, unlike the Motorola m68k MMU which has a single read-only bit.  Define a _PAGE_READWRITE value for the Motorola MMU, which is 0, so we can unconditionaly include that in the page table entry bits when setting up ioremapped pages.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | hwtest.h | s | 428B | 12 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | dbg.h | s | 144B | 6 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | adb_iop.h | s | 1.1K | 34 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sections.h | s | 159B | 5 | Greg Ungerer | gerg@uclinux.org | 1318911746 |  | m68knommu: use generic section names in setup code  We should be including and using sections.h to get at the extern definitions of the linker sections in the m68knommu startup code. Not defining them locally.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | pci.h | s | 319B | 9 | Greg Ungerer | gerg@uclinux.org | 1237871861 |  | m68k: use the mmu pci.h for m68knommu as well  The (m68knommu) COMEMPCI support has been removed from the kernel, so now the mmu pci.h can be used on non-mmu setups as well. Remove the non-mmu pci_no.h and revert the pci_mm.h to be pci.h.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | cputime.h | s | 115B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | apollohw.h | s | 2.8K | 85 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcfne.h | s | 6.1K | 203 | Greg Ungerer | gerg@uclinux.org | 1253058235 |  | m68knommu: remove special interrupt handling code for ne2k support  The improved interrupt support for ColdFire CPU cores means we no longer need all the interrupt setup and ack hacks to support the NE2000 driver on ColdFire platforms. Remove all that code.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | raw_io.h | s | 7.9K | 318 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | barrier.h | s | 516B | 17 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for M68K  Disintegrate asm/system.h for M68K.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Greg Ungerer <gerg@uclinux.org> cc: linux-m68k@lists.linux-m68k.org
f | machines.h | s | 3.1K | 74 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcfpit.h | s | 2.2K | 45 | Greg Ungerer | gerg@uclinux.org | 1300186914 |  | m68knommu: move ColdFire PIT timer base addresses  The PIT hardware timer module used in some ColdFire CPU's is not always addressed relative to an IPSBAR register. Parts like the ColdFire 5207 and 5208 have fixed peripheral addresses. So lets not define the register addresses of the PIT relative to an IPSBAR definition. Move the base address definitions into the per-part headers. This is a lot more consistent since all the other peripheral base addresses are defined in the per-part header files already.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | delay.h | s | 2.6K | 79 | Greg Ungerer | gerg@uclinux.org | 1311556841 |  | m68k: merge and clean up delay.h files  The real difference between the mmu and non-mmu varients of the delay.h files has nothing to do with having an mmu or not. It is processor family differences that means slightly different code. Merge the delay_mm.h and delay_no.h files back into a single file.  The primarly difference we need to deal with is whether the processor supports a 32bit * 32bit -> 64bit multiply. Without it we need to do some shift scaling as well as use a 32bit * 32bit -> 32bit multiply. If building for a multi-CPU type kernel then we must use the simpler mult/shift scaling.  This version of delay code allows the CPU32 family to use a 64bit mul, since it supports this instruction, the old code did not.  The changes use macros where appropriate to try and optimize constant sized udelay times. And it removes the use of a fixed lib function for the non-mmu case. Code size on typical kernel configurations is similar, or only larger by a few tens of bytes.  Also removed the unused muldiv() code from delay_mm.h.  Build and run tested on ColdFire and ARAnyM. Build tested only on 68328 and 68360 (CPU32).  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | irq_regs.h | s | 34B | 1 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | hp300hw.h | s | 982B | 21 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | ide.h | s | 1.6K | 55 | Jate Sujjavanich | jsujjavanich@syntech-fuelmaster.com | 1282099471 |  | m68knommu: arch/m68k/include/asm/ide.h fix for nommu  The arch/m68k/include/asm/ide.h produces errors when the IDE driver is compiled for my 523x uClinux system under kernel. The header makes some redefines of operators not defined in the arch/m68k/include/asm/io_no.h header. There are no separate mmio and iospace defines.  Signed-off-by: Jate Sujjavanich <jsujjavanich@syntech-fuelmaster.com> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | cacheflush.h | s | 86B | 5 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | movs.h | s | 1.4K | 36 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mmzone.h | s | 225B | 6 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | page_no.h | s | 1.3K | 27 | Greg Ungerer | gerg@uclinux.org | 1325204423 |  | m68k: add ColdFire 54xx CPU MMU memory init code  Add code to the 54xx ColdFire CPU init to setup memory ready for the m68k paged memory start up.  Some of the RAM variables that were specific to the non-mmu code paths now need to be used during this setup, so when CONFIG_MMU is enabled. Move these out of page_no.h and into page.h.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | MC68VZ328.h | s | 40K | 1137 | Justin P. Mattock | justinmattock@gmail.com | 1302447665 |  | m68k: fix comment typo 'occcured'  The patch below changes a typo occcured to occurred in two comments.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | shm.h | s | 1.0K | 26 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | cachectl.h | s | 496B | 10 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | traps.h | s | 8.3K | 246 | Greg Ungerer | gerg@uclinux.org | 1324727277 |  | m68k: print memory layout info in boot log  Output a table of the kernel memory regions at boot time. This is taken directly from the ARM architecture code that does this. The table looks like this:  Virtual kernel memory layout:     vector  : 0x00000000 - 0x00000400   (   0 KiB)     kmap    : 0xd0000000 - 0xe0000000   ( 256 MiB)     vmalloc : 0xc0000000 - 0xcfffffff   ( 255 MiB)     lowmem  : 0x00000000 - 0x02000000   (  32 MiB)       .init : 0x00128000 - 0x00134000   (  48 KiB)       .text : 0x00020000 - 0x00118d54   ( 996 KiB)       .data : 0x00118d60 - 0x00126000   (  53 KiB)       .bss  : 0x00134000 - 0x001413e0   (  53 KiB)  This has been very useful while debugging the ColdFire virtual memory support code. But in general I think it is nice to know extacly where the kernel has layed everything out on boot.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m68360_pram.h | s | 19K | 395 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | pinmux.h | s | 830B | 24 | sfking@fdwdc.com | sfking@fdwdc.com | 1252548082 |  | core generic GPIO support for Freescale Coldfire processors.  This adds the basic infrastructure used by all of the different Coldfire CPUs.  Signed-off-by: Steven King <sfking@fdwdc.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3x.h | s | 829B | 24 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | segment.h | s | 1.4K | 53 | Greg Ungerer | gerg@uclinux.org | 1325204422 |  | m68k: use addr_limit checking for m68k CPUs that do no support address spaces  The ColdFire CPU family, and the original 68000, do not support separate address spaces like the other 680x0 CPU types. Modify the set_fs()/get_fs() functions and macros to use a thread_info addr_limit for address space checking. This is pretty much what all other architectures that do not support separate setable address spaces do.  Signed-off-by: Alexander Stein <alexander.stein@systec-electronic.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | virtconvert.h | s | 972B | 39 | Geert Uytterhoeven | geert@linux-m68k.org | 1267291878 |  | m68k: Eliminate unused variable in page_to_phys()  "pgdat" is unused, so we can eliminate it and turn page_to_phys() into a single-line macro.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | current.h | s | 541B | 19 | Greg Ungerer | gerg@uclinux.org | 1237871865 |  | m68k: merge the mmu and non-mmu versions of current.h  Trivial merge of the mmu and non-mmu versions of current.h  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | apollodma.h | s | 9.2K | 214 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m527xsim.h | s | 12K | 300 | Greg Ungerer | gerg@uclinux.org | 1330908146 |  | m68knommu: make 527x CPU reset register addressing consistent  If we make all MCF_RCR (CPU reset register) addressing consistent across all ColdFire CPU family members that use it then we will be able to remove the duplicated copies of the code that use it.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mac_via.h | s | 11K | 249 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: fix nubus slot irq disable and shutdown  Improve NuBus slot interrupt handling code and documentation. This patch fixes the NuBus NIC (mac8390) in my Quadra 700.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | atariints.h | s | 5.4K | 163 | Geert Uytterhoeven | geert@linux-m68k.org | 1335118609 |  | m68k/atari: Change VME irq numbers from unsigned long to unsigned int  Device interrupts numbers were changed to unsigned int in 1997, the year IRQ_MACHSPEC was killed as well.  Also kill a related cast while we're at it.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Cc: netdev@vger.kernel.org
f | MC68EZ328.h | s | 37K | 1060 | Justin P. Mattock | justinmattock@gmail.com | 1302447665 |  | m68k: fix comment typo 'occcured'  The patch below changes a typo occcured to occurred in two comments.  Signed-off-by: Justin P. Mattock <justinmattock@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | elf.h | s | 3.1K | 99 | Greg Ungerer | gerg@uclinux.org | 1325204433 |  | m68k: MMU enabled ColdFire needs 8k ELF alignment  Like the SUN3 hardware MMU the ColdFire MMU uses 8k pages. So we want our ELF page size alingment to also be 8k. Modify the ELF alignment setting.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | pgtable_mm.h | s | 4.8K | 154 | Greg Ungerer | gerg@uclinux.org | 1325204426 |  | m68k: add page table size definitions for ColdFire V4e MMU  Define the page table size and attributes for the ColdFire V4e MMU. Also setup the vmalloc and kmap regions we will use.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | mac_mouse.h | s | 433B | 20 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m532xsim.h | s | 103K | 2031 | Greg Ungerer | gerg@uclinux.org | 1330904589 |  | m68knommu: make 532x QSPI platform addressing consistent  If we make all QSPI (SPI protocol) addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and code and use a single setup for all.  So modify the ColdFire 532x QSPI addressing so that:  . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used . move chip select definitions (CS) to appropriate header  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | quicc_simple.h | s | 1.7K | 43 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | resource.h | s | 116B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | tlb.h | s | 447B | 16 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcfqspi.h | s | 2.0K | 51 | Greg Ungerer | gerg@uclinux.org | 1330904589 |  | m68knommu: make 532x QSPI platform addressing consistent  If we make all QSPI (SPI protocol) addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and code and use a single setup for all.  So modify the ColdFire 532x QSPI addressing so that:  . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used . move chip select definitions (CS) to appropriate header  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | serial.h | s | 1.1K | 31 | Kars de Jong | jongk@linux-m68k.org | 1323543165 |  | m68k/serial: SERIAL_PORT_DFNS only if CONFIG_ISA  Only define SERIAL_PORT_DFNS when CONFIG_ISA is defined. Otherwise the first 4 slots in the 8250 driver are unavailable on non-ISA machines.  Signed-off-by: Kars de Jong <jongk@linux-m68k.org> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | unaligned.h | s | 582B | 18 | Luis Alves | ljalvs@gmail.com | 1337512984 |  | m68knommu: unaligned.h fix for M68000 core  This patch fixes unaligned memory access for the 68000 core based cpu's.  Some time ago, my cpu (68000) was raising address/bus error's when mounting cifs shares (didn't bother to debug it at the time). After developing the MMC/SD card driver I was having the same issue when mounting the vfat fs.  I've traced the issue down to the 'unaligned.h' file. (I guess nobody has ever used unaligned.h back in the 68328 'era'.  Signed-off-by: Luis Alves <ljalvs@gmail.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | ucontext.h | s | 531B | 24 | Greg Ungerer | gerg@uclinux.org | 1324727277 |  | m68k: make fp register stores consistent for m68k and ColdFire  There is no reason we can't make the saved fp registers the same for all m68k types and ColdFire. There is a little wasted space, but the code consistency and cleanliness is a big win.  sigcontext.h is an exported header, but currently there is no in-mainline users of the !__uClinux__ and __mcoldfire__ case that this change effects. Even better this change actually makes this structure consistent with the out-of-mainline ColdFire/MMU code.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | macints.h | s | 3.7K | 115 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: oss irq fixes  The IOP driver calls into the OSS driver to enable its IRQ. This undesirable coupling between drivers only exists because the OSS driver doesn't correctly handle all of its machspec IRQs.  Fix OSS handling of enable/disable for VIA1 IRQs (8 thru 15) which includes MAC_IRQ_ADB.  Back when I implemented pmac_zilog support I redefined IRQ_MAC_SCC incorrectly. Change this to a machspec IRQ so that it works on OSS.  Clean up the unused OSS audio IRQ and OSS_IRQLEV_* cruft that only confuses things.  Fix the OSS description in macints.c and remove an obsolete comment.  Don't enable the VIA1 irq before registering the handler.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | nubus.h | s | 1.2K | 36 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | intersil.h | s | 1.1K | 40 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcfslt.h | s | 1.3K | 36 | Philippe De Muyter | phdm@macqel.be | 1287620250 |  | m68knommu: add basic mmu-less m548x support  Add a very basic mmu-less support for coldfire m548x family.  This is perhaps also valid for m547x family.  The port comprises the serial, tick timer and reboot support.  The gpio part compiles but is empty.  This gives a functional albeit limited linux for the m548x coldfire family.  This has been tested on a Freescale M548xEVB Lite board with a M5484 processor and the default dbug monitor.  Signed-off-by: Philippe De Muyter <phdm@macqel.be> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mac_oss.h | s | 1.8K | 65 | Finn Thain | fthain@telegraphics.com.au | 1323543167 |  | m68k/mac: oss irq fixes  The IOP driver calls into the OSS driver to enable its IRQ. This undesirable coupling between drivers only exists because the OSS driver doesn't correctly handle all of its machspec IRQs.  Fix OSS handling of enable/disable for VIA1 IRQs (8 thru 15) which includes MAC_IRQ_ADB.  Back when I implemented pmac_zilog support I redefined IRQ_MAC_SCC incorrectly. Change this to a machspec IRQ so that it works on OSS.  Clean up the unused OSS audio IRQ and OSS_IRQLEV_* cruft that only confuses things.  Fix the OSS description in macints.c and remove an obsolete comment.  Don't enable the VIA1 irq before registering the handler.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | mcfmmu.h | s | 3.6K | 98 | Greg Ungerer | gerg@uclinux.org | 1325204438 |  | m68k: ColdFire V4e MMU paging init code and miss handler  The different ColdFire V4e MMU requires its own dedicated paging init code, and a TLB miss handler for its software driven TLB.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | termios.h | s | 2.8K | 80 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | bitsperlong.h | s | 37B | 1 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | ioctls.h | s | 157B | 5 | Jeff Mahoney | jeffm@suse.com | 1287733403 |  | m68k: Use asm-generic/ioctls.h (enables termiox)  This patch converts m68k to use asm-generic/ioctls.h instead of its own version.  The differences between the arch-specific version and the generic version are as follows:  - m68k defines its own value for FIOQSIZE, asm-generic/ioctls.h keeps it - The generic version adds TIOCSRS485 and TIOCGRS485m which are unused   by any driver available on this architecture. - The generic version adds support for termiox  Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Roman Zippel <zippel@linux-m68k.org> Cc: Greg Kroah-Hartman <gregkh@suse.de> Signed-off-by: Jeff Mahoney <jeffm@suse.com> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | io_mm.h | s | 9.4K | 290 | Geert Uytterhoeven | geert@linux-m68k.org | 1335118610 |  | m68k: Make sure {read,write}s[bwl]() are always defined  drivers/usb/musb/musb_io.h provides default implementations for {read,write}s[bwl]() on most platforms, some of which will conflict soon with platform-specific counterparts on m68k.  To avoid having to add more platform-specific checks to musb_io.h later, make sure {read,write}s[bwl]() are always defined on m68k, and disable the default implementations in musb_io.h on m68k, like is already done for several other architectures.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Felipe Balbi <balbi@ti.com>
f | amigayle.h | s | 3.2K | 88 | Geert Uytterhoeven | geert@linux-m68k.org | 1274896269 |  | m68k: amiga - Amiga Gayle IDE platform device conversion  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | smp.h | s | 32B | 1 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | dma-mapping.h | s | 2.9K | 85 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281542361 |  | dma-mapping: remove dma_is_consistent API  Architectures implement dma_is_consistent() in different ways (some misinterpret the definition of API in DMA-API.txt).  So it hasn't been so useful for drivers.  We have only one user of the API in tree.  Unlikely out-of-tree drivers use the API.  Even if we fix dma_is_consistent() in some architectures, it doesn't look useful at all.  It was invented long ago for some old systems that can't allocate coherent memory at all.  It's better to export only APIs that are definitely necessary for drivers.  Let's remove this API.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Cc: James Bottomley <James.Bottomley@HansenPartnership.com> Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | siginfo.h | s | 90B | 4 | Maxim Kuvyrkov | maxim@codesourcery.com | 1267291877 |  | m68k: Switch to generic siginfo layout  This patch switches m68k to generic siginfo layout.  The custom layout of m68k's `struct siginfo' had several issues due to not considering aliasing of members in the union, e.g., _uid32 was at different offsets in ._kill, ._rt and ._sigchld.  Signed-off-by: Maxim Kuvyrkov <maxim@codesourcery.com> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | a.out-core.h | s | 2.0K | 59 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | oplib.h | s | 9.5K | 218 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | bugs.h | s | 330B | 18 | Greg Ungerer | gerg@uclinux.org | 1237871865 |  | m68k: merge the mmu and non-mmu versions of bugs.h  Trivial merge of the mmu and non-mmu versions of bugs.h  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | atari_stdma.h | s | 458B | 12 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | contregs.h | s | 3.3K | 48 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcfmbus.h | s | 2.2K | 57 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | types.h | s | 578B | 17 | Al Viro | viro@zeniv.linux.org.uk | 1325649317 |  | consolidate umode_t declarations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | mcfuart.h | s | 6.9K | 163 | Greg Ungerer | gerg@uclinux.org | 1330904588 |  | m68knommu: merge common ColdFire UART IRQ setup  Some ColdFire CPU UART hardware modules can configure the IRQ they use. Currently the same setup code is duplicated in the init code for each of these ColdFire CPUs. Merge all this code to a single instance.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | atari_stram.h | s | 399B | 12 | Michael Schmitz | schmitzmic@googlemail.com | 1312053699 |  | m68k/atari: Reserve some ST-RAM early on for device buffer use  Based on an original patch from Michael Schmitz:  Because mem_init() is now called before device init, devices that rely on ST-RAM may find all ST-RAM already allocated to other users by the time device init happens. In particular, a large initrd RAM disk may use up enough of ST-RAM to cause atari_stram_alloc() to resort to __get_dma_pages() allocation.  In the current state of Atari memory management, all of RAM is marked DMA capable, so __get_dma_pages() may well return RAM that is not in actual fact DMA capable. Using this for frame buffer or SCSI DMA buffer causes subtle failure.  The ST-RAM allocator has been changed to allocate memory from a pool of reserved ST-RAM of configurable size, set aside on ST-RAM init (i.e. before mem_init()). As long as this pool is not exhausted, allocation of real ST-RAM can be guaranteed.  Other changes:   - Replace the custom allocator in the ST-RAM pool by the existing allocator     in the resource subsystem,   - Remove mem_init_done and its hook, as memory init is now done before     device init,   - Remove /proc/stram, as ST-RAM usage now shows up under /proc/iomem, e.g.  	005f2000-006f1fff : ST-RAM Pool 	  005f2000-0063dfff : atafb 	  0063e000-00641fff : ataflop 	  00642000-00642fff : SCSI  Signed-off-by: Michael Schmitz <schmitz@debian.org> [Andreas Schwab <schwab@linux-m68k.org>: Use memparse()] [Geert: Use the resource subsystem instead of a custom allocator] Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | atafdreg.h | s | 2.6K | 63 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m5206sim.h | s | 5.9K | 129 | Greg Ungerer | gerg@uclinux.org | 1330904585 |  | m68knommu: make 5206 UART platform addressing consistent  If we make all UART addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and use a single setup for all.  So modify the ColdFire 5206 UART addressing so that:  . UARTs are numbered from 0 up . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | hw_irq.h | s | 86B | 4 | Greg Ungerer | gerg@uclinux.org | 1237871862 |  | m68k: the one hw_irq.h can be used buy all m68k  The mmu and non-mmu hw_irq.h are identical, revert to a single copy.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | kdebug.h | s | 32B | 1 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3-head.h | s | 314B | 8 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | bootinfo.h | s | 11K | 319 | André Goddard Rosa | andre.goddard@gmail.com | 1259937595 |  | tree-wide: fix assorted typos all over the place  That is "success", "unknown", "through", "performance", "[re||un]mapping" , "access", "default", "reasonable", "[con]currently", "temperature" , "channel", "[un]used", "application", "example","hierarchy", "therefore" , "[over||under]flow", "contiguous", "threshold", "enough" and others.  Signed-off-by: André Goddard Rosa <andre.goddard@gmail.com> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | dma.h | s | 16K | 417 | Greg Ungerer | gerg@uclinux.org | 1253058218 |  | m68k: clean up comment delimiters in dma.h  Change C99 style comments to traditional K&R style.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | bitops.h | s | 12K | 436 | Greg Ungerer | gerg@uclinux.org | 1311556840 |  | m68k: merge mmu and non-mmu bitops.h  The following patch merges the mmu and non-mmu versions of the m68k bitops.h files. Now there is a good deal of difference between the two files, but none of it is actually an mmu specific difference. It is all about the specific m68k/coldfire varient we are targeting. So it makes an awful lot of sense to merge these into a single bitops.h.  There is a number of ways I can see to factor this code. The approach I have taken here is to keep the various versions of each macro/function type together. This means that there is some ifdefery with each to handle each CPU type.  I have added some comments in a couple of appropriate places to try and make it clear what the differences we are dealing with are. Specifically the instruction and addressing mode differences we have to deal with.  The merged form keeps the same underlying optimizations for each CPU type for all the general bit clear/set/change and find bit operations. It does switch to using the generic le operations though, instead of any local varients.  Build tested on ColdFire, 68328, 68360 (which is cpu32) and 68020+. Run tested on ColdFire and ARAnyM.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | q40_master.h | s | 2.2K | 50 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | checksum.h | s | 3.4K | 130 | Greg Ungerer | gerg@uclinux.org | 1324727277 |  | m68k: simpler m68k and ColdFire CPU's can use generic csum code  We have two implementations of the IP checksuming code for the m68k arch. One uses the more advanced instructions available in 68020 and above processors, the other uses the simpler instructions available on the original 68000 processors and the modern ColdFire processors.  This simpler code is pretty much the same as the generic lib implementation of the IP csum functions. So lets just switch over to using that. That means we can completely remove the checksum_no.c file, and only have the local fast code used for the more complex 68k CPU family members.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | motorola_pgalloc.h | s | 2.2K | 86 | Andrew Morton | akpm@linux-foundation.org | 1251321289 |  | arch/m68k/include/asm/motorola_pgalloc.h: fix kunmap arg  arch/m68k/include/asm/motorola_pgalloc.h: In function 'pte_alloc_one': arch/m68k/include/asm/motorola_pgalloc.h:44: warning: passing argument 1 of 'kunmap' from incompatible pointer type  Also, remove unneeded test for kmap() failure.  Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | setup.h | s | 11K | 340 | Greg Ungerer | gerg@uclinux.org | 1325204416 |  | m68k: add machine and CPU definitions for ColdFire cores  Create machine and CPU definitions to support the ColdFire CPU family members that have a virtual memory management unit.  The ColdFire V4e core contains an MMU, and it is quite different to any other 68k family members.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | m68360_regs.h | s | 14K | 354 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m523xsim.h | s | 7.0K | 175 | Greg Ungerer | gerg@uclinux.org | 1330908145 |  | m68knommu: make 523x CPU reset register addressing consistent  If we make all MCF_RCR (CPU reset register) addressing consistent across all ColdFire CPU family members that use it then we will be able to remove the duplicated copies of the code that use it.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | cacheflush_no.h | s | 2.7K | 92 | Greg Ungerer | gerg@uclinux.org | 1337512928 |  | m68knommu: reorganize the no-MMU cache flushing to match m68k  Introduce cache_push() and cache_clear() functions for the non-MMU m68k devices. With these in place we can more easily merge some of the common m68k arch code.  In particular by reorganizing the __flush_cache_all() code and separating the cache push and clear functions it becomes trivial to implement the new cache_push() and cache_clear() functions.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | mcfintc.h | s | 3.0K | 79 | Greg Ungerer | gerg@uclinux.org | 1253058232 |  | m68knommu: map ColdFire interrupts to correct masking bits  The older simple ColdFire interrupt controller has no one-to-one mapping of interrupt numbers to bits in the interrupt mask register. Create a mapping array that each ColdFire CPU type can populate with its available interrupts and the bits that each use in the interrupt mask register.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | errno.h | s | 104B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | ptrace.h | s | 2.0K | 83 | Mike Frysinger | vapier@gentoo.org | 1311724183 |  | ptrace: unify show_regs() prototype  [ poleg@redhat.com: no need to declare show_regs() in ptrace.h, sched.h does this ] Signed-off-by: Mike Frysinger <vapier@gentoo.org> Cc: Tejun Heo <tj@kernel.org> Signed-off-by: Oleg Nesterov <oleg@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mac_baboon.h | s | 960B | 32 | Finn Thain | fthain@telegraphics.com.au | 1323543166 |  | m68k/mac: cleanup forward declarations  Move some forward declarations into header files and adjust includes.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | idprom.h | s | 686B | 22 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mvme147hw.h | s | 2.8K | 93 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mc146818rtc.h | s | 526B | 20 | Greg Ungerer | gerg@uclinux.org | 1237871861 |  | m68k: use the mc146818rtc.h for non-mmu setups as well.  The mmu varient of mc146818rtc.h can be use on the non-mmu builds as well. Revert to the single mc146818rtc.h file.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | mmu_context.h | s | 7.2K | 260 | Greg Ungerer | gerg@uclinux.org | 1325204434 |  | m68k: ColdFire V4e MMU context support code  Add code to manage the context's of the ColdFire V4e MMU. This code is mostly taken from the Freescale 2.6.35 kernel BSP for MMU enabled ColdFire.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | nettel.h | s | 3.0K | 91 | sfking@fdwdc.com | sfking@fdwdc.com | 1252548084 |  | generic GPIO support misc files.  The definition of MCFSIM_PADDR and MCFSIM_PADAT now has MCF_BAR already added in.  Signed-off-by: Steven King <sfking@fdwdc.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | ftrace.h | s | 12B | 1 | Uwe Kleine-Koenig | u.kleine-koenig@pengutronix.de | 1236030577 |  | tracing: make CALLER_ADDRx overwriteable  The current definition of CALLER_ADDRx isn't suitable for all platforms. E.g. for ARM __builtin_return_address(N) doesn't work for N > 0 and AFAIK for powerpc there are no frame pointers needed to have a working __builtin_return_address.  This patch allows defining the CALLER_ADDRx macros in <asm/ftrace.h> and let these take precedence.  Because now <asm/ftrace.h> is included unconditionally in <linux/ftrace.h> all archs that don't already had this include get an empty one for free.  Signed-off-by: Uwe Kleine-Koenig <u.kleine-koenig@pengutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Reviewed-by: KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com> Signed-off-by: Steven Rostedt <srostedt@redhat.com>
f | m52xxacr.h | s | 3.5K | 84 | Greg Ungerer | gerg@uclinux.org | 1294204760 |  | m68knommu: create optimal separate instruction and data cache for ColdFire  Create separate functions to deal with instruction and data cache flushing. This way we can optimize them for the vairous cache types and arrangements used across the ColdFire family.  For example the unified caches in the version 3 cores means we don't need to flush the instruction cache. For the version 2 cores that do not do data cacheing (or where we choose instruction cache only) we don't need to do any data flushing.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | cache.h | s | 257B | 10 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281542361 |  | dma-mapping: rename ARCH_KMALLOC_MINALIGN to ARCH_DMA_MINALIGN  Now each architecture has the own dma_get_cache_alignment implementation.  dma_get_cache_alignment returns the minimum DMA alignment.  Architectures define it as ARCH_KMALLOC_MINALIGN (it's used to make sure that malloc'ed buffer is DMA-safe; the buffer doesn't share a cache with the others).  So we can unify dma_get_cache_alignment implementations.  This patch:  dma_get_cache_alignment() needs to know if an architecture defines ARCH_KMALLOC_MINALIGN or not (needs to know if architecture has DMA alignment restriction).  However, slab.h define ARCH_KMALLOC_MINALIGN if architectures doesn't define it.  Let's rename ARCH_KMALLOC_MINALIGN to ARCH_DMA_MINALIGN. ARCH_KMALLOC_MINALIGN is used only in the internals of slab/slob/slub (except for crypto).  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | math-emu.h | s | 6.7K | 267 | Heiko Carstens | heiko.carstens@de.ibm.com | 1251734929 |  | locking, m68k/asm-offsets: Rename pt_regs offset defines  In order to be able to use asm-offsets.h in C files the existing namespace conflicts must be solved first. In asm-offsets.h e.g. PT_D0 gets defined which is the offset of the d0 member of the pt_regs structure. However a same define (with a different meaning) exists in asm/ptregs.h.  So rename the defines created with the asm-offset mechanism to PT_OFF_D0 etc. There also already exist a few defines with these names that have the same meaning. So remove the existing defines and use the asm-offset generated ones.  Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com> Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Nick Piggin <nickpiggin@yahoo.com.au> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Horst Hartmann <horsth@linux.vnet.ibm.com> Cc: Christian Ehrhardt <ehrhardt@linux.vnet.ibm.com> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: David Miller <davem@davemloft.net> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Paul Mackerras <paulus@samba.org> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Roman Zippel <zippel@linux-m68k.org> Cc: <linux-arch@vger.kernel.org> LKML-Reference: <20090831124416.666403991@de.ibm.com> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | mac_asc.h | s | 481B | 20 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | macintosh.h | s | 3.4K | 120 | Finn Thain | fthain@telegraphics.com.au | 1323543168 |  | m68k/mac: cleanup macro case  Code style convention has macro names in uppercase. Change MAC_VIA_IIci to MAC_VIA_IICI.  Also remove an obsolete comment.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | user.h | s | 3.7K | 80 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | floppy.h | s | 5.1K | 196 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3mmu.h | s | 4.9K | 136 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcfgpio.h | s | 3.3K | 89 | Greg Ungerer | gerg@uclinux.org | 1337512907 |  | m68knommu: make duplicated ColdFire GPIO init code common for all  The code that adds each ColdFire platforms GPIO signals is duplicated in each platforms specific code. Remove it from each platforms code and put a single version in the existing ColdFire gpio subsystem init code.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Steven King <sfking@fdwdc.com>
f | cacheflush_mm.h | s | 5.9K | 208 | Greg Ungerer | gerg@uclinux.org | 1325204428 |  | m68k: add cache support for V4e ColdFire cores running with MMU enabled  Add code to deal with instruction, data and branch caches of the V4e ColdFire cores when they are running with the MMU enabled.  This code is loosely based on Freescales changes for the caches of the V4e ColdFire in the 2.6.25 kernel BSP. That code was originally by Kurt Mahan <kmahan@freescale.com> (now <kmahan@xmission.com>).  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | mvme16xhw.h | s | 2.5K | 87 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | exec.h | s | 102B | 4 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for M68K  Disintegrate asm/system.h for M68K.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Greg Ungerer <gerg@uclinux.org> cc: linux-m68k@lists.linux-m68k.org
f | sigcontext.h | s | 564B | 22 | Greg Ungerer | gerg@uclinux.org | 1324727277 |  | m68k: make fp register stores consistent for m68k and ColdFire  There is no reason we can't make the saved fp registers the same for all m68k types and ColdFire. There is a little wasted space, but the code consistency and cleanliness is a big win.  sigcontext.h is an exported header, but currently there is no in-mainline users of the !__uClinux__ and __mcoldfire__ case that this change effects. Even better this change actually makes this structure consistent with the out-of-mainline ColdFire/MMU code.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | termbits.h | s | 4.5K | 184 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | statfs.h | s | 108B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | xor.h | s | 29B | 1 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m520xsim.h | s | 6.5K | 160 | Greg Ungerer | gerg@uclinux.org | 1330904589 |  | m68knommu: make 520x QSPI platform addressing consistent  If we make all QSPI (SPI protocol) addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and code and use a single setup for all.  So modify the ColdFire 520x QSPI addressing so that:  . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used . move chip select definitions (CS) to appropriate header  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m5272sim.h | s | 5.8K | 121 | Greg Ungerer | gerg@uclinux.org | 1330904588 |  | m68knommu: make 5272 FEC platform addressing consistent  If we make all FEC (ethernet) addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and use a single setup for all.  So modify the ColdFire 5272 FEC addressing so that:  . FECs are numbered from 0 up . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | io_no.h | s | 5.1K | 152 | Greg Ungerer | gerg@uclinux.org | 1306195430 |  | m68knommu: remove stubs for __ioremap() and iounmap()  The implementation of iounmap() and __ioremap() for non-mmu m68k is trivial. We can inline them in m68knommu headers and remove the trivial implementations.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | hardirq.h | s | 795B | 28 | Geert Uytterhoeven | geert@linux-m68k.org | 1320788149 |  | m68k/irq: Add genirq support  Disabled on all platforms for now  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> [v1] Acked-by: Thomas Gleixner <tglx@linutronix.de>
f | bug.h | s | 519B | 26 | Greg Ungerer | gerg@uclinux.org | 1237871864 |  | m68k: merge the mmu and non-mmu versions of bug.h  Trivial merge of the mmu and non-mmu versions of bug.h  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | Kbuild | g | 93B |  | Geert Uytterhoeven | geert@linux-m68k.org | 1338989488 |  | m68k: Use generic strncpy_from_user(), strlen_user(), and strnlen_user()  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Greg Ungerer <gerg@uclinux.org>
f | openprom.h | s | 7.9K | 253 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | parport.h | s | 793B | 22 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | uaccess_mm.h | s | 10K | 362 | Geert Uytterhoeven | geert@linux-m68k.org | 1338989488 |  | m68k: Use generic strncpy_from_user(), strlen_user(), and strnlen_user()  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Greg Ungerer <gerg@uclinux.org>
f | mmu.h | s | 204B | 11 | Greg Ungerer | gerg@uclinux.org | 1237871862 |  | m68k: merge the mmu and non-mmu versions of mmu.h  Trivial merge of the contents of mmu and non-mmu versions of mmu.h  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | uaccess_no.h | s | 4.7K | 151 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | futex.h | s | 82B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | posix_types.h | s | 670B | 18 | Al Viro | viro@zeniv.linux.org.uk | 1338426290 |  | bury __kernel_nlink_t, make internal nlink_t consistent  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | mcfsim.h | s | 1.4K | 45 | Greg Ungerer | gerg@uclinux.org | 1294204757 |  | m68knommu: make Coldfire 548x support more generic  The ColdFire 547x family of processors is very similar to the ColdFire 548x series. Almost all of the support for them is the same. Make the code supporting the 548x more gneric, so it will be capable of supporting both families.  For the most part this is a renaming excerise to make the support code more obviously apply to both families.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | device.h | s | 129B | 6 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | dvma.h | s | 9.6K | 200 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | atomic.h | s | 4.3K | 179 | Greg Ungerer | gerg@uclinux.org | 1333313869 |  | m68k: include asm/cmpxchg.h in our m68k atomic.h  After commit 9ffc93f203c18a70623f21950f1dd473c9ec48cd ("Remove all    CC      init/main.o In file included from include/linux/mm.h:15:0,                  from include/linux/ring_buffer.h:5,                  from include/linux/ftrace_event.h:4,                  from include/trace/syscall.h:6,                  from include/linux/syscalls.h:78,                  from init/main.c:16: include/linux/debug_locks.h: In function ‘__debug_locks_off’: include/linux/debug_locks.h:16:2: error: implicit declaration of function ‘xchg’  There is no indirect inclusions of the new asm/cmpxchg.h for m68k here. Looking at most other architectures they include asm/cmpxchg.h in their asm/atomic.h. M68k currently does not do this. Including this in atomic.h fixes all m68k build problems.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | commproc.h | s | 25K | 626 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | atari_joystick.h | s | 418B | 18 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m68360_enet.h | s | 6.3K | 157 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mac_iop.h | s | 5.3K | 137 | Finn Thain | fthain@telegraphics.com.au | 1323543166 |  | m68k/mac: cleanup forward declarations  Move some forward declarations into header files and adjust includes.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | linkage.h | s | 113B | 5 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | MC68332.h | s | 4.3K | 139 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | dsp56k.h | s | 1.2K | 31 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcftimer.h | s | 2.2K | 51 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | mcfdma.h | s | 6.5K | 109 | Greg Ungerer | gerg@uclinux.org | 1300186914 |  | m68knommu: move ColdFire DMA register addresses to per-cpu headers  The base addresses of the ColdFire DMA unit registers belong with all the other address definitions in the per-cpu headers. The current definitions assume they are relative to an MBAR register. Not all ColdFire CPUs have an MBAR register. A clean address define can only be acheived in the per-cpu headers along with all the other chips peripheral base addresses.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | tlbflush.h | s | 5.9K | 232 | Greg Ungerer | gerg@uclinux.org | 1325204430 |  | m68k: add TLB flush support for the ColdFire V4e MMU hardware  The ColdFire V4e MMU is unlike any of the other m68k MMU hardware. It needs its own TLB flush support code.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | zorro.h | s | 1.1K | 36 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mcf_pgtable.h | s | 10K | 360 | Alexander Stein | alexander.stein@systec-electronic.com | 1328576640 |  | m68k: Add shared bit to Coldfire kernel page entries  We had problems accessing our NOR flash trough mtd. The system always got stuck at attaching UBI using ubiattach if booted from NFS or after mounting squashfs as rootfs directly from NOR flash. After some testing of the new changes introduced from v3.2-rc1 to v3.2-rc7 we had to apply the following patch to get mtd working again.  [gerg: The problem was ultimately caused by allocated kernel pages not having the shared (SG) bit set. Without the SG bit set the MMU will look for page matches incorporating the ASID as well. Things like module regions allocated using vmalloc would fault when other processes run. ]  Signed-off-by: Alexander Stein <alexander.stein@systec-electronic.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mutex.h | s | 308B | 8 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | MC68328.h | s | 37K | 1070 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | local.h | s | 116B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | coldfire.h | s | 1.6K | 43 | Greg Ungerer | gerg@uclinux.org | 1300186917 |  | m68knommu: remove ColdFire CLOCK_DIV config option  The reality is that you do not need the abiltity to configure the clock divider for ColdFire CPUs. It is a fixed ratio on any given ColdFire family member. It is not the same for all ColdFire parts, but it is always the same in a model range. So hard define the divider for each supported ColdFire CPU type and remove the Kconfig option.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | irqflags.h | s | 1.5K | 69 | Philippe De Muyter | phdm@macqel.be | 1288747807 |  | m68k, m68knommu: Do not include linux/hardirq.h in asm/irqflags.h  Recent changes to header files made kernel compilation for m68k/m68knommu fail with :   CC      arch/m68knommu/kernel/asm-offsets.s In file included from /archives/linux/git/arch/m68k/include/asm/system.h:2,                  from include/linux/wait.h:25,                  from include/linux/mmzone.h:9,                  from include/linux/gfp.h:4,                  from include/linux/irq.h:20,                  from include/asm-generic/hardirq.h:12,                  from /archives/linux/git/arch/m68k/include/asm/hardirq_no.h:17,                  from /archives/linux/git/arch/m68k/include/asm/hardirq.h:2,                  from include/linux/hardirq.h:10,                  from /archives/linux/git/arch/m68k/include/asm/irqflags.h:5,                  from include/linux/irqflags.h:15,                  from include/linux/spinlock.h:53,                  from include/linux/seqlock.h:29,                  from include/linux/time.h:8,                  from include/linux/timex.h:56,                  from include/linux/sched.h:56,                  from arch/m68knommu/kernel/asm-offsets.c:12: /archives/linux/git/arch/m68k/include/asm/system_no.h: In function ‘__xchg’: /archives/linux/git/arch/m68k/include/asm/system_no.h:79: error: implicit +declaration of function ‘local_irq_save’ /archives/linux/git/arch/m68k/include/asm/system_no.h:101: error: implicit +declaration of function ‘local_irq_restore’  Fix that  Signed-off-by: Philippe De Muyter <phdm@macqel.be> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mac_psc.h | s | 7.2K | 226 | Finn Thain | fthain@telegraphics.com.au | 1323543166 |  | m68k/mac: cleanup forward declarations  Move some forward declarations into header files and adjust includes.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | natfeat.h | s | 530B | 17 | Petr Stehlik | pstehlik@sophics.cz | 1300299041 |  | m68k/atari: Initial ARAnyM support  Add improved support for running under the ARAnyM emulator (Atari Running on Any Machine - http://aranym.org/).  [michael, geert: Cleanups and updates]  Signed-off-by: Petr Stehlik <pstehlik@sophics.cz> Signed-off-by: Michael Schmitz <schmitz@debian.org> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | unistd.h | s | 10K | 389 | Andreas Schwab | schwab@linux-m68k.org | 1323543169 |  | m68k: Don't comment out syscalls used by glibc  Define again the syscalls that are used by glibc so that it is possible to compile a feature-complete glibc with the newest kernel headers.  Signed-off-by: Andreas Schwab <schwab@linux-m68k.org> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | string.h | s | 2.5K | 98 | Greg Ungerer | gerg@uclinux.org | 1297813396 |  | m68knommu: add optimize memmove() function  Add an m68k/coldfire optimized memmove() function for the m68knommu arch. This is the same function as used by m68k. Simple speed tests show this is faster once buffers are larger than 4 bytes, and significantly faster on much larger buffers (4 times faster above about 100 bytes).  This also goes part of the way to fixing a regression caused by commit ea61bc461d09e8d331a307916530aaae808c72a2 ("m68k/m68knommu: merge MMU and non-MMU string.h"), which breaks non-coldfire non-mmu builds (which is the 68x328 and 68360 families). They currently have no memmove() fucntion defined, since there was none in the m68knommu/lib functions.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | fbio.h | s | 9.8K | 285 | Daniel Mack | daniel@caiaq.de | 1265368962 |  | tree-wide: s/widht/width/g typo in comments  Signed-off-by: Daniel Mack <daniel@caiaq.de> Cc: Jiri Kosina <trivial@kernel.org> Signed-off-by: Jiri Kosina <jkosina@suse.cz>
f | topology.h | s | 128B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | module.h | s | 858B | 31 | Greg Ungerer | gerg@uclinux.org | 1311556840 |  | m68k: merge the non-mmu and mmu versions of module.c  The non-mmu and mmu versions of the module loader module.c are nearly identical. Merge them back to a single module.c. There is a little bit of re-ordering of the struct and enum definitions in module.h to keep the ifdefery to a minimum.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3xflop.h | s | 5.6K | 218 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for M68K  Disintegrate asm/system.h for M68K.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Greg Ungerer <gerg@uclinux.org> cc: linux-m68k@lists.linux-m68k.org
f | bvme6000hw.h | s | 3.4K | 125 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | ioctl.h | s | 31B | 1 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3_pgtable.h | s | 7.9K | 188 | Geert Uytterhoeven | geert@linux-m68k.org | 1294258639 |  | m68k/sun3: Kill pte_unmap() warnings  Since commit 31c911329e048b715a1dfeaaf617be9430fd7f4e ("mm: check the argument of kunmap on architectures without highmem"), we get lots of warnings like  arch/m68k/kernel/sys_m68k.c:508: warning: passing argument 1 of ‘kunmap’ from incompatible pointer type  As m68k doesn't support highmem anyway, open code the calls to kmap() and kunmap() (the latter is a no-op) to kill the warnings, like is done on most other architectures without CONFIG_HIGHPTE.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Sam Creasey <sammy@sammy.net>
f | m54xxacr.h | s | 4.5K | 108 | Greg Ungerer | gerg@uclinux.org | 1325204429 |  | m68k: modify ColdFire 54xx cache support for MMU enabled  Modify the cache setup for the ColdFire 54xx parts when running with the MMU enabled.  We want to map the peripheral register space (MBAR region) as non cacheable. And create an identity mapping for all of RAM for the kernel.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | poll.h | s | 134B | 6 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m68360.h | s | 292B | 9 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | processor.h | s | 4.4K | 155 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | flat.h | s | 601B | 17 | Ezequiel Garcia | elezegarcia@gmail.com | 1337512893 |  | m68k: fix compiler warning by properly inlining flat_set_persistent()  This patch removes the following warning: fs/binfmt_flat.c:752: warning: unused variable 'persistent'. There is neither functionality change, nor extra code generated.  Signed-off-by: Ezequiel Garcia <elezegarcia@gmail.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | blinken.h | s | 641B | 26 | Geert Uytterhoeven | geert@linux-m68k.org | 1323543168 |  | m68k/hp300: Export hp300_ledstate  The accidental loss of CONFIG_DIO in commit 0e152d80507b75c00aac60f2ffc586360687cd52 ("m68k: reorganize Kconfig options to improve mmu/non-mmu selections") exposed a missing symbol export in m68k allmodconfig.  If CONFIG_HP300=y but CONFIG_HPLANCE (which is bool, and depends on CONFIG_DIO) is not set, and CONFIG_MVME147=y and CONFIG_MVME147_NET=m, 7990.c is compiled as a module, giving:  ERROR: "ledstate" [drivers/net/ethernet/amd/7990.ko] undefined!  Add the missing export, and rename ledstate to hp300_ledstate while we're at it, as it's a too generic name.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | percpu.h | s | 123B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | entry.h | s | 5.7K | 221 | Mikael Pettersson | mikpe@it.uu.se | 1335118610 |  | m68k: Correct the Atari ALLOWINT definition  Booting a 3.2, 3.3, or 3.4-rc4 kernel on an Atari using the `nfeth' ethernet device triggers a WARN_ONCE() in generic irq handling code on the first irq for that device:  WARNING: at kernel/irq/handle.c:146 handle_irq_event_percpu+0x134/0x142() irq 3 handler nfeth_interrupt+0x0/0x194 enabled interrupts Modules linked in: Call Trace: [<000299b2>] warn_slowpath_common+0x48/0x6a  [<000299c0>] warn_slowpath_common+0x56/0x6a  [<00029a4c>] warn_slowpath_fmt+0x2a/0x32  [<0005b34c>] handle_irq_event_percpu+0x134/0x142  [<0005b34c>] handle_irq_event_percpu+0x134/0x142  [<0000a584>] nfeth_interrupt+0x0/0x194  [<001ba0a8>] schedule_preempt_disabled+0x0/0xc  [<0005b37a>] handle_irq_event+0x20/0x2c  [<0005add4>] generic_handle_irq+0x2c/0x3a  [<00002ab6>] do_IRQ+0x20/0x32  [<0000289e>] auto_irqhandler_fixup+0x4/0x6  [<00003144>] cpu_idle+0x22/0x2e  [<001b8a78>] printk+0x0/0x18  [<0024d112>] start_kernel+0x37a/0x386  [<0003021d>] __do_proc_dointvec+0xb1/0x366  [<0003021d>] __do_proc_dointvec+0xb1/0x366  [<0024c31e>] _sinittext+0x31e/0x9c0  After invoking the irq's handler the kernel sees !irqs_disabled() and concludes that the handler erroneously enabled interrupts.  However, debugging shows that !irqs_disabled() is true even before the handler is invoked, which indicates a problem in the platform code rather than the specific driver.  The warning does not occur in 3.1 or older kernels.  It turns out that the ALLOWINT definition for Atari is incorrect.  The Atari definition of ALLOWINT is ~0x400, the stated purpose of that is to avoid taking HSYNC interrupts.  irqs_disabled() returns true if the 3-bit ipl & 4 is non-zero.  The nfeth interrupt runs at ipl 3 (it's autovector 3), but 3 & 4 is zero so irqs_disabled() is false, and the warning above is generated.  When interrupts are explicitly disabled, ipl is set to 7.  When they are enabled, ipl is masked with ALLOWINT.  On Atari this will result in ipl = 3, which blocks interrupts at ipl 3 and below.  So how come nfeth interrupts at ipl 3 are received at all?  That's because ipl is reset to 2 by Atari-specific code in default_idle(), again with the stated purpose of blocking HSYNC interrupts.  This discrepancy means that ipl 3 can remain blocked for longer than intended.  Both default_idle() and falcon_hblhandler() identify HSYNC with ipl 2, and the "Atari ST/.../F030 Hardware Register Listing" agrees, but ALLOWINT is defined as if HSYNC was ipl 3.  [As an experiment I modified default_idle() to reset ipl to 3, and as expected that resulted in all nfeth interrupts being blocked.]  The fix is simple: define ALLOWINT as ~0x500 instead.  This makes arch_local_irq_enable() consistent with default_idle(), and prevents the !irqs_disabled() problems for ipl 3 interrupts.  Tested on Atari running in an Aranym VM.  Signed-off-by: Mikael Pettersson <mikpe@it.uu.se> Tested-by: Michael Schmitz <schmitzmic@googlemail.com> (on Falcon/CT60) Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | page.h | s | 1.2K | 42 | Greg Ungerer | gerg@uclinux.org | 1325204432 |  | m68k: set ColdFire MMU page size  We use the ColdFire V4e MMU page size of 8KiB. Define PAGE_SHIFT appropriately.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | div64.h | s | 760B | 28 | Greg Ungerer | gerg@uclinux.org | 1324727277 |  | m68k: handle presence of 64bit mul/div instructions cleanly  The traditional 68000 processors and the newer reduced instruction set ColdFire processors do not support the 32*32->64 multiply or the 64/32->32 divide instructions. This is not a difference based on the presence of a hardware MMU or not.  Create a new config symbol to mark that a CPU type doesn't support the longer multiply/divide instructions. Use this then as a basis for using the fast 64bit based divide (in div64.h) and for linking in the extra libgcc functions that may be required (mulsi3, divsi3, etc).  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | amigaints.h | s | 3.5K | 91 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m528xsim.h | s | 11K | 255 | Steven King | sfking@fdwdc.com | 1339466305 |  | m68knommu: m528x qspi definition fix  The consolidation of the qspi code missed a definition for 528x.  Signed-off-by: Steven King <sfking@fdwdc.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | machw.h | s | 588B | 20 | Finn Thain | fthain@telegraphics.com.au | 1267291869 |  | mac68k: replace mac68k SCC code with platform device  Remove the old 68k Mac serial port code and a lot of related cruft. Add new SCC platform devices to mac 68k platform.  Signed-off-by: Finn Thain <fthain@telegraphics.com.au> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | auxvec.h | s | 62B | 3 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | cmpxchg.h | s | 3.3K | 123 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for M68K  Disintegrate asm/system.h for M68K.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Greg Ungerer <gerg@uclinux.org> cc: linux-m68k@lists.linux-m68k.org
f | m54xxgpt.h | s | 3.4K | 81 | Linus Torvalds | torvalds@linux-foundation.org | 1295366720 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/gerg/m68knommu  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/gerg/m68knommu: (25 commits)   m68knommu: fix broken setting of irq_chip and handler   m68knommu: switch to using -mcpu= flags for ColdFire targets   m68knommu: arch/m68knommu/Kconfig whitespace cleanup   m68knommu: create optimal separate instruction and data cache for ColdFire   m68knommu: support ColdFire caches that do copyback and write-through   m68knommu: support version 2 ColdFire split cache   m68knommu: make cache push code ColdFire generic   m68knommu: clean up ColdFire cache control code   m68knommu: move inclusion of ColdFire v4 cache registers   m68knommu: merge bit definitions for version 3 ColdFire cache controller   m68knommu: create bit definitions for the version 2 ColdFire cache controller   m68knommu: remove empty __iounmap() it is no used   m68knommu: remove kernel_map() code, it is not used   m68knommu: remove do_page_fault(), it is not used   m68knommu: use user stack pointer hardware on some ColdFire cores   m68knommu: remove command line printing DEBUG   m68knommu: remove fasthandler interrupt code   m68knommu: move UART addressing to part specific includes   m68knommu: fix clock rate value reported for ColdFire 54xx parts   m68knommu: move ColdFire CPU names into their headers   ...
f | atarikb.h | s | 1.4K | 39 | Michael Schmitz | schmitz@biophys.uni-duesseldorf.de | 1305821951 |  | input/atari: Use the correct mouse interrupt hook  The Atari keyboard driver calls atari_mouse_interrupt_hook if it's set, not atari_input_mouse_interrupt_hook. Fix below.  [geert] Killed off atari_mouse_interrupt_hook completely, after fixing another incorrect assignment in atarimouse.c.  Signed-off-by: Michael Schmitz <schmitz@debian.org> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | param.h | s | 191B | 9 | Robert P. J. Day | rpjday@crashcourse.ca | 1274123739 |  | m68k: Simplify param.h by using <asm-generic/param.h>  Signed-off-by: Robert P. J. Day <rpjday@crashcourse.ca> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | sun3xprom.h | s | 1.3K | 36 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | gpio.h | s | 6.9K | 216 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1324727276 |  | m68k: Fall back to __gpio_to_irq() for non-arch GPIOs  gpiolib provides __gpio_to_irq() to map gpiolib gpios to interrupts - hook that up on m68k.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m5307sim.h | s | 7.0K | 160 | Greg Ungerer | gerg@uclinux.org | 1330904586 |  | m68knommu: make 5307 UART platform addressing consistent  If we make all UART addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and use a single setup for all.  So modify the ColdFire 5307 UART addressing so that:  . UARTs are numbered from 0 up . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3_pgalloc.h | s | 2.3K | 78 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1248721838 |  | mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  Upcoming paches to support the new 64-bit "BookE" powerpc architecture will need to have the virtual address corresponding to PTE page when freeing it, due to the way the HW table walker works.  Basically, the TLB can be loaded with "large" pages that cover the whole virtual space (well, sort-of, half of it actually) represented by a PTE page, and which contain an "indirect" bit indicating that this TLB entry RPN points to an array of PTEs from which the TLB can then create direct entries. Thus, in order to invalidate those when PTE pages are deleted, we need the virtual address to pass to tlbilx or tlbivax instructions.  The old trick of sticking it somewhere in the PTE page struct page sucks too much, the address is almost readily available in all call sites and almost everybody implemets these as macros, so we may as well add the argument everywhere. I added it to the pmd and pud variants for consistency.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: David Howells <dhowells@redhat.com> [MN10300 & FRV] Acked-by: Nick Piggin <npiggin@suse.de> Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [s390] Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | pgalloc.h | s | 405B | 17 | Greg Ungerer | gerg@uclinux.org | 1325204440 |  | m68k: create ColdFire MMU pgalloc code  Add code to support the ColdFire V4e MMU pgalloc functions.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | m5249sim.h | s | 9.1K | 230 | Greg Ungerer | gerg@uclinux.org | 1330904589 |  | m68knommu: make 5249 QSPI platform addressing consistent  If we make all QSPI (SPI protocol) addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and code and use a single setup for all.  So modify the ColdFire 5249 QSPI addressing so that:  . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used . move chip select definitions (CS) to appropriate header  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | scatterlist.h | s | 131B | 4 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | fb.h | s | 882B | 34 | Greg Ungerer | gerg@uclinux.org | 1237871864 |  | m68k: merge the mmu and non-mmu versions of fb.h  Trivial merge of the mmu and non-mmu versions of fb.h  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | pgtable_no.h | s | 1.7K | 56 | Greg Ungerer | gerg@uclinux.org | 1237871863 |  | m68knommu: mv definition of check_pgt_cache()  Move the definition of check_pgt_cache() to be consistent with where m68k defines it. (Will make merging of these headers easier later on).  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | swab.h | s | 602B | 21 | Maxim Kuvyrkov | maxim@codesourcery.com | 1267291633 |  | m68k: Fix asm/swab.h for ColdFire  Make asm/swab.h compatible with ColdFire ISA_B CPUs.  Signed-off-by: Maxim Kuvyrkov <maxim@codesourcery.com> Acked-by: Greg Ungerer <gerg@uclinux.org> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | mcf_pgalloc.h | s | 2.2K | 77 | Greg Ungerer | gerg@uclinux.org | 1325204440 |  | m68k: create ColdFire MMU pgalloc code  Add code to support the ColdFire V4e MMU pgalloc functions.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | fcntl.h | s | 313B | 8 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | irq.h | s | 2.4K | 65 | Linus Torvalds | torvalds@linux-foundation.org | 1327610637 |  | Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/geert/linux-m68k  * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/geert/linux-m68k:   m68k: Fix assembler constraint to prevent overeager gcc optimisation   mac_esp: rename irq   mac_scsi: dont enable mac_scsi irq before requesting it   macfb: fix black and white modes   m68k/irq: Remove obsolete IRQ_FLG_* definitions  Fix up trivial conflict in arch/m68k/kernel/process_mm.c as per Geert.
f | thread_info.h | s | 2.2K | 71 | Al Viro | viro@zeniv.linux.org.uk | 1337659187 |  | m68k: add TIF_NOTIFY_RESUME and handle it.  TIF_NOTIFY_RESUME added (as bit 5).  That way nommu glue needs no changes at all; mmu one needs just to replace jmi do_signal_return to jne do_signal_return There we have flags shifted up, until bit 6 (SIGPENDING) is in MSBit; instead of checking that MSBit is set (jmi) we check that MSBit or something below it is set (jne); bits 0..4 are never set, so that's precisely "bit 6 or bit 5 is set".  Usual handling of NOTIFY_RESUME/SIGPENDING is done in do_notify_resume(); glue calls it instead of do_signal().  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | bootstd.h | s | 4.6K | 120 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | timex.h | s | 670B | 27 | Philippe De Muyter | phdm@macqel.be | 1253058236 |  | m68knommu: fix ColdFire definition of CLOCK_TICK_RATE  The good definition of CLOCK_TICK_RATE for coldfires has been lost in the merge of m68k and m68knommu include files.  Restore it.  Culprit : commit ebafc17468d58bd903c886175ca84a4edc69ae1d  Signed-off-by: Philippe De Muyter <phdm@macqel.be> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | socket.h | s | 1.6K | 56 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | page_offset.h | s | 217B | 8 | Greg Ungerer | gerg@uclinux.org | 1325204431 |  | m68k: define PAGE_OFFSET_RAW for ColdFire CPU with MMU enabled  The ColdFire CPU configurations need PAGE_OFFSET_RAW set to the base of their RAM. It doesn't matter if they are running with the MMU enabled or disabled, it is always set to the base of RAM.  We can keep the choices simple here and key of CONFIG_RAMBASE. If it is defined we are on a plaftorm (ColdFire or other non-MMU systems) which have a configurable RAM base, just use it.  Reported-by: Alexander Stein <alexander.stein@systec-electronic.com> Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | ipcbuf.h | s | 32B | 1 | Al Viro | viro@zeniv.linux.org.uk | 1325649318 |  | consolidate a bunch of ipcbuf.h instances  ... some still remain weird :-/  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | pgtable.h | s | 80B | 5 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | machdep.h | s | 1.3K | 35 | Greg Ungerer | gerg@uclinux.org | 1330904584 |  | m68knommu: modify timer init code to make it consistent with m68k code  With a few small changes we can make the m68knommu timer init code the same as the m68k code. By using the mach_sched_init function pointer and reworking the current timer initializers to keep track of the common m68k timer_interrupt() handler we end up with almost identical code for m68knommu.  This will allow us to more easily merge the mmu and non-mmu m68k time.c in future patches.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | fpu.h | s | 496B | 19 | Greg Ungerer | gerg@uclinux.org | 1325204447 |  | m68k: add ColdFire FPU support for the V4e ColdFire CPUs  The V4e ColdFire CPU family also has an integrated FPU (as well as the MMU). So add code to support this hardware along side the existing m68k FPU code.  The ColdFire FPU is of course different to all previous 68k FP units. It is close in operation to the 68060, but not completely compatible. The biggest issue to deal with is that the ColdFire FPU multi-move instructions are different. It does not support multi-moving the FP control registers, and the multi-move of the FP data registers uses a different instruction mnemonic.  Signed-off-by: Greg Ungerer <gerg@uclinux.org> Acked-by: Matt Waddel <mwaddel@yahoo.com> Acked-by: Kurt Mahan <kmahan@xmission.com>
f | sbus.h | s | 1.0K | 34 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | stat.h | s | 1.6K | 63 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m5407sim.h | s | 5.7K | 128 | Greg Ungerer | gerg@uclinux.org | 1330904586 |  | m68knommu: make 5407 UART platform addressing consistent  If we make all UART addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and use a single setup for all.  So modify the ColdFire 5407 UART addressing so that:  . UARTs are numbered from 0 up . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m54xxsim.h | s | 2.6K | 72 | Greg Ungerer | gerg@uclinux.org | 1330904586 |  | m68knommu: make 54xx UART platform addressing consistent  If we make all UART addressing consistent across all ColdFire family members then we will be able to remove the duplicated plaform data and use a single setup for all.  So modify the ColdFire 54xx UART addressing so that:  . UARTs are numbered from 0 up . base addresses are absolute (not relative to MBAR peripheral register) . use a common name for IRQs used  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sun3ints.h | s | 989B | 30 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | shmbuf.h | s | 1.1K | 38 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | m53xxacr.h | s | 3.5K | 89 | Greg Ungerer | gerg@uclinux.org | 1294204760 |  | m68knommu: create optimal separate instruction and data cache for ColdFire  Create separate functions to deal with instruction and data cache flushing. This way we can optimize them for the vairous cache types and arrangements used across the ColdFire family.  For example the unified caches in the version 3 cores means we don't need to flush the instruction cache. For the version 2 cores that do not do data cacheing (or where we choose instruction cache only) we don't need to do any data flushing.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | page_mm.h | s | 4.2K | 150 | Ian Campbell | ian.campbell@citrix.com | 1314131988 |  | m68k: fix __page_to_pfn for a const struct page argument  Fixes fallout due to the removal of the cast in commit aa462abe8aaf ("mm: fix __page_to_pfn for a const struct page argument")  Signed-off-by: Ian Campbell <ian.campbell@citrix.com> Cc: Andrew Morton <akpm@linux-foundation.org> Acked-by: Geert Uytterhoeven <geert@linux-m68k.org> Cc: linux-m68k@lists.linux-m68k.org Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | m68360_quicc.h | s | 19K | 348 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | switch_to.h | s | 1.5K | 39 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for M68K  Disintegrate asm/system.h for M68K.  Signed-off-by: David Howells <dhowells@redhat.com> Acked-by: Greg Ungerer <gerg@uclinux.org> cc: linux-m68k@lists.linux-m68k.org
f | atarihw.h | s | 20K | 710 | Geert Uytterhoeven | geert@linux-m68k.org | 1323543169 |  | m68k/atari: Move declaration of atari_SCC_reset_done to header file  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | amigahw.h | s | 10K | 321 | Christian Dietrich | qy03fugy@stud.informatik.uni-erlangen.de | 1287733402 |  | m68k: Remove dead GG2 config option  CONFIG_GG2 doesn't exist in Kconfig, therefore remove all references to it from the source.  Signed-off-by: Christian Dietrich <qy03fugy@stud.informatik.uni-erlangen.de> Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
f | atafd.h | s | 261B | 9 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | uaccess.h | s | 80B | 5 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | signal.h | s | 4.5K | 178 | Greg Ungerer | gerg@uclinux.org | 1311556841 |  | m68k: use CPU_HAS_NO_BITFIELDS for signal functions  When reworking bitops.h to be clean for all processor types we introduced a CONFIG_CPU_HAS_NO_BITFIELDS define to signal whether this processor type supported the bit field instructions. The ARCH_SIG_BITOPS functions for m68k use these instruction types. We should base the use of these functions (or the generic versions) on the CONFIG_CPU_HAS_NO_BITFIELDS define.  Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | vga.h | s | 612B | 24 | Geert Uytterhoeven | geert@linux-m68k.org | 1335118610 |  | m68k/video: Create <asm/vga.h>  For now, it just contains the hack for cirrusfb on Amiga, which is moved out of <video/vga.h> with some slight modifications (use raw_*() instead of z_*(), which are defined on all m68k platforms).  This makes it safe to include <video/vga.h> in all contexts. Before it could fail to compile with  include/video/vga.h: In function ‘vga_mm_r’: include/video/vga.h:242: error: implicit declaration of function ‘z_readb’ include/video/vga.h: In function ‘vga_mm_w’: include/video/vga.h:247: error: implicit declaration of function ‘z_writeb’ include/video/vga.h: In function ‘vga_mm_w_fast’: include/video/vga.h:253: error: implicit declaration of function ‘z_writew’  or  include/video/vga.h:23:21: error: asm/vga.h: No such file or directory  depending on the value of CONFIG_AMIGA.  Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org> Cc: linux-fbdev@vger.kernel.org Cc: dri-devel@lists.freedesktop.org
f | mcfwdebug.h | s | 4.9K | 105 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | amipcmcia.h | s | 2.5K | 91 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | mman.h | s | 30B | 1 | Arnd Bergmann | arnd@arndb.de | 1253629062 |  | mm: remove duplicate asm/mman.h files  A number of architectures have identical asm/mman.h files so they can all be merged by using the new generic file.  The remaining asm/mman.h files are substantially different from each other.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | rtc.h | s | 1.9K | 68 | Geert Uytterhoeven | Geert.Uytterhoeven@sonycom.com | 1238634331 |  | m68k: Hook up rtc-generic  m68k has been a long time user of the generic RTC abstraction, so hook up rtc-generic:   - Create the "rtc-generic" platform device if mach_hwclk is set,   - Add checks for mach_hwclk, in anticipation of RTC chip drivers being moved     to drivers/rtc/.  Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com> Acked-by: Alessandro Zummo <a.zummo@towertech.it> Signed-off-by: Kyle McMartin <kyle@mcmartin.ca>
f | a.out.h | s | 709B | 17 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | emergency-restart.h | s | 149B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | shmparam.h | s | 146B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | sockios.h | s | 370B | 11 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | spinlock.h | s | 94B | 4 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | msgbuf.h | s | 974B | 28 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
f | byteorder.h | s | 125B | 4 | Harvey Harrison | harvey.harrison@gmail.com | 1232995123 |  | m68k{nommu}: fixups after the header move  swab.h seems to have been missed during the header merge. Add conditionals similar to byteorder.h and remove the now unnecessary byteorder_no/mm.h  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | sembuf.h | s | 696B | 22 | Sam Ravnborg | sam@ravnborg.org | 1232107090 |  | m68k,m68knommu: merge header files  Merge header files for m68k and m68knommu to the single location:      arch/m68k/include/asm  The majority of this patch was the result of the script that is included in the changelog below.  The script was originally written by Arnd Bergman and exten by me to cover a few more files.  When the header files differed the script uses the following:  The original m68k file is named <file>_mm.h  [mm for memory manager] The m68knommu file is named <file>_no.h [no for no memory manager]  The files uses the following include guard:  This include gaurd works as the m68knommu toolchain set the __uClinux__ symbol - so this should work in userspace too.  Merging the header files for m68k and m68knommu exposes the (unexpected?) ABI differences thus it is easier to actually identify these and thus to fix them.  The commit has been build tested with both a m68k and a m68knommu toolchain - with success.  The commit has also been tested with "make headers_check" and this patch fixes make headers_check for m68knommu.  The script used: TARGET=arch/m68k/include/asm SOURCE=arch/m68knommu/include/asm  INCLUDE="cachectl.h errno.h fcntl.h hwtest.h ioctls.h ipcbuf.h \ linkage.h math-emu.h md.h mman.h movs.h msgbuf.h openprom.h \ oplib.h poll.h posix_types.h resource.h rtc.h sembuf.h shmbuf.h \ shm.h shmparam.h socket.h sockios.h spinlock.h statfs.h stat.h \ termbits.h termios.h tlb.h types.h user.h"  EQUAL="auxvec.h cputime.h device.h emergency-restart.h futex.h \ ioctl.h irq_regs.h kdebug.h local.h mutex.h percpu.h \ sections.h topology.h"  NOMUUFILES="anchor.h bootstd.h coldfire.h commproc.h dbg.h \ elia.h flat.h m5206sim.h m520xsim.h m523xsim.h m5249sim.h \ m5272sim.h m527xsim.h m528xsim.h m5307sim.h m532xsim.h \ m5407sim.h m68360_enet.h m68360.h m68360_pram.h m68360_quicc.h \ m68360_regs.h MC68328.h MC68332.h MC68EZ328.h MC68VZ328.h \ mcfcache.h mcfdma.h mcfmbus.h mcfne.h mcfpci.h mcfpit.h \ mcfsim.h mcfsmc.h mcftimer.h mcfuart.h mcfwdebug.h \ nettel.h quicc_simple.h smp.h"  FILES="atomic.h bitops.h bootinfo.h bug.h bugs.h byteorder.h cache.h \ cacheflush.h checksum.h current.h delay.h div64.h \ dma-mapping.h dma.h elf.h entry.h fb.h fpu.h hardirq.h hw_irq.h io.h \ irq.h kmap_types.h machdep.h mc146818rtc.h mmu.h mmu_context.h \ module.h page.h page_offset.h param.h pci.h pgalloc.h \ pgtable.h processor.h ptrace.h scatterlist.h segment.h \ setup.h sigcontext.h siginfo.h signal.h string.h system.h swab.h \ thread_info.h timex.h tlbflush.h traps.h uaccess.h ucontext.h \ unaligned.h unistd.h"  mergefile() { 	BASE=${1%.h} 	git mv ${SOURCE}/$1 ${TARGET}/${BASE}_no.h 	git mv ${TARGET}/$1 ${TARGET}/${BASE}_mm.h  cat << EOF > ${TARGET}/$1 EOF  	git add ${TARGET}/$1 }  set -e  mkdir -p ${TARGET}  git mv include/asm-m68k/* ${TARGET} rmdir include/asm-m68k  git rm ${SOURCE}/Kbuild for F in $INCLUDE $EQUAL; do 	git rm ${SOURCE}/$F done  for F in $NOMUUFILES; do 	git mv ${SOURCE}/$F ${TARGET}/$F done  for F in $FILES ; do 	mergefile $F done  rmdir arch/m68knommu/include/asm rmdir arch/m68knommu/include  Cc: Arnd Bergmann <arnd@arndb.de> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Greg Ungerer <gerg@uclinux.org>
