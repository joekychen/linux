f | pci.h | s | 1.8K | 50 | Myron Stowe | mstowe@redhat.com | 1325880641 |  | PCI: Xtensa: convert pcibios_set_master() to a non-inlined function  This patch converts Xtensa's architecture-specific 'pcibios_set_master()' routine to a non-inlined function.  This will allow follow on patches to create a generic 'pcibios_set_master()' function using the '__weak' attribute which can be used by all architectures as a default which, if necessary, can then be over- ridden by architecture-specific code.  Converting 'pci_bios_set_master()' to a non-inlined function will allow Xtensa's 'pcibios_set_master()' implementation to remain architecture-specific after the generic version is introduced and thus, not change current behavior.  No functional change.  Signed-off-by: Myron Stowe <myron.stowe@redhat.com> Signed-off-by: Jesse Barnes <jbarnes@virtuousgeek.org>
f | io.h | s | 5.8K | 174 | Paul Gortmaker | paul.gortmaker@windriver.com | 1335198603 |  | xtensa: fix build error in xtensa/include/asm/io.h  Caused by commit 6c03438edeb5c359af35f060ea016ca65671c269      kernel.h: doesn't explicitly use bug.h, so don't include it.  This header uses bug.h so explicitly include it now that the implicit presence was removed by 6c03438ed.  Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | kmap_types.h | s | 130B | 4 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | sections.h | s | 386B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | barrier.h | s | 675B | 23 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | irq_regs.h | s | 34B | 1 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | cputime.h | s | 118B | 4 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | cacheflush.h | s | 7.1K | 217 | Chris Zankel | chris@zankel.net | 1272779721 |  | xtensa: Fix FLUSH_DCACHE macro for some variants.  Define ARCH_IMPLEMENTS_FLUSH_DCACHE_PAGE also for processor configurations that don't have cache-aliasing.  Signed-off-by: Chris Zankel <chris@zankel.net>
f | platform.h | s | 1.7K | 62 | Johannes Weiner | hannes@cmpxchg.org | 1238741107 |  | xtensa: remove platform rtc hooks  platform_get/set_rtc_time() is not implemented by any of the supported xtensa platforms.  Remove the facility completely.  The initial seconds for xtime come from read_persistent_clock() which returns just 0 in the generic implementation.  Platforms that sport a persistent clock can implement this function.  This is needed to implement the ccount as a clock source.  Signed-off-by: Johannes Weiner <hannes@cmpxchg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | nommu.h | s | 57B | 3 | Johannes Weiner | jw@emlix.com | 1238740910 |  | xtensa: nommu support  Add support for !CONFIG_MMU setups.  Signed-off-by: Johannes Weiner <jw@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | delay.h | s | 1.1K | 39 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | coprocessor.h | s | 5.1K | 141 | Chris Zankel | chris@zankel.net | 1272874003 |  | xtensa: Add missing include in coprocessor.h  Coprocessor.h depends on variant settings.  Signed-off-by: Chris Zankel <chris@zankel.net>
f | current.h | s | 677B | 26 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | segment.h | s | 374B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | cacheasm.h | s | 3.2K | 102 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | elf.h | s | 5.7K | 171 | Chris Zankel | chris@zankel.net | 1272787513 |  | xtensa: Shuffle include statements to fix linker script  The linker script was including assembly macros from the coprocessor header file that is not otherwise used by the script.  Signed-off-by: Chris Zankel <chris@zankel.net>
f | tlb.h | s | 1.1K | 34 | Benjamin Herrenschmidt | benh@kernel.crashing.org | 1248721838 |  | mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  mm: Pass virtual address to [__]p{te,ud,md}_free_tlb()  Upcoming paches to support the new 64-bit "BookE" powerpc architecture will need to have the virtual address corresponding to PTE page when freeing it, due to the way the HW table walker works.  Basically, the TLB can be loaded with "large" pages that cover the whole virtual space (well, sort-of, half of it actually) represented by a PTE page, and which contain an "indirect" bit indicating that this TLB entry RPN points to an array of PTEs from which the TLB can then create direct entries. Thus, in order to invalidate those when PTE pages are deleted, we need the virtual address to pass to tlbilx or tlbivax instructions.  The old trick of sticking it somewhere in the PTE page struct page sucks too much, the address is almost readily available in all call sites and almost everybody implemets these as macros, so we may as well add the argument everywhere. I added it to the pmd and pud variants for consistency.  Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Acked-by: David Howells <dhowells@redhat.com> [MN10300 & FRV] Acked-by: Nick Piggin <npiggin@suse.de> Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [s390] Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | resource.h | s | 379B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | unaligned.h | s | 864B | 26 | Harvey Harrison | harvey.harrison@gmail.com | 1226412850 |  | xtensa: switch to packed struct unaligned access implementation  Rely on byteorder.h checking for endianness.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | serial.h | s | 443B | 15 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | ucontext.h | s | 540B | 19 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | termios.h | s | 2.9K | 88 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | ioctls.h | s | 4.2K | 104 | Kay Sievers | kay.sievers@vrfy.org | 1297980990 |  | tty: add TIOCVHANGUP to allow clean tty shutdown of all ttys  This is useful for system management software so that it can kick off things like gettys and everything that's started from a tty, before we reuse it from/for something else or shut it down.  Without this ioctl it would have to temporarily become the owner of the tty, then call vhangup() and then give it up again.  Cc: Lennart Poettering <lennart@poettering.net> Signed-off-by: Kay Sievers <kay.sievers@vrfy.org> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | smp.h | s | 601B | 21 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | siginfo.h | s | 381B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | bitsperlong.h | s | 37B | 1 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | types.h | s | 729B | 28 | Al Viro | viro@zeniv.linux.org.uk | 1325649317 |  | consolidate umode_t declarations  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | dma-mapping.h | s | 4.2K | 140 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281542361 |  | dma-mapping: remove dma_is_consistent API  Architectures implement dma_is_consistent() in different ways (some misinterpret the definition of API in DMA-API.txt).  So it hasn't been so useful for drivers.  We have only one user of the API in tree.  Unlikely out-of-tree drivers use the API.  Even if we fix dma_is_consistent() in some architectures, it doesn't look useful at all.  It was invented long ago for some old systems that can't allocate coherent memory at all.  It's better to export only APIs that are definitely necessary for drivers.  Let's remove this API.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Cc: James Bottomley <James.Bottomley@HansenPartnership.com> Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kdebug.h | s | 32B | 1 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | bugs.h | s | 451B | 15 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | bitops.h | s | 2.6K | 92 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | dma.h | s | 1.8K | 53 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | pci-bridge.h | s | 2.2K | 70 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | hw_irq.h | s | 320B | 12 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | checksum.h | s | 6.0K | 230 | Chris Zankel | chris@zankel.net | 1242103703 |  | xtensa: Fix checksum header file  We need to add a "memory" dependency (barrier) in assembly macros that access (read or write) memory. Otherwise, the compiler might ill-optimize the order of memory accesses.  Signed-off-by: Chris Zankel <chris@zankel.net>
f | setup.h | s | 399B | 14 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | asmmacro.h | s | 2.7K | 127 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | errno.h | s | 371B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | ptrace.h | s | 3.9K | 112 | Mike Frysinger | vapier@gentoo.org | 1311724183 |  | ptrace: unify show_regs() prototype  [ poleg@redhat.com: no need to declare show_regs() in ptrace.h, sched.h does this ] Signed-off-by: Mike Frysinger <vapier@gentoo.org> Cc: Tejun Heo <tj@kernel.org> Signed-off-by: Oleg Nesterov <oleg@redhat.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cache.h | s | 969B | 27 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281542361 |  | dma-mapping: rename ARCH_KMALLOC_MINALIGN to ARCH_DMA_MINALIGN  Now each architecture has the own dma_get_cache_alignment implementation.  dma_get_cache_alignment returns the minimum DMA alignment.  Architectures define it as ARCH_KMALLOC_MINALIGN (it's used to make sure that malloc'ed buffer is DMA-safe; the buffer doesn't share a cache with the others).  So we can unify dma_get_cache_alignment implementations.  This patch:  dma_get_cache_alignment() needs to know if an architecture defines ARCH_KMALLOC_MINALIGN or not (needs to know if architecture has DMA alignment restriction).  However, slab.h define ARCH_KMALLOC_MINALIGN if architectures doesn't define it.  Let's rename ARCH_KMALLOC_MINALIGN to ARCH_DMA_MINALIGN. ARCH_KMALLOC_MINALIGN is used only in the internals of slab/slob/slub (except for crypto).  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Cc: <linux-arch@vger.kernel.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | mmu_context.h | s | 3.0K | 113 | Johannes Weiner | jw@emlix.com | 1238740910 |  | xtensa: nommu support  Add support for !CONFIG_MMU setups.  Signed-off-by: Johannes Weiner <jw@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | ftrace.h | s | 12B | 1 | Uwe Kleine-Koenig | u.kleine-koenig@pengutronix.de | 1236030577 |  | tracing: make CALLER_ADDRx overwriteable  The current definition of CALLER_ADDRx isn't suitable for all platforms. E.g. for ARM __builtin_return_address(N) doesn't work for N > 0 and AFAIK for powerpc there are no frame pointers needed to have a working __builtin_return_address.  This patch allows defining the CALLER_ADDRx macros in <asm/ftrace.h> and let these take precedence.  Because now <asm/ftrace.h> is included unconditionally in <linux/ftrace.h> all archs that don't already had this include get an empty one for free.  Signed-off-by: Uwe Kleine-Koenig <u.kleine-koenig@pengutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Reviewed-by: KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com> Signed-off-by: Steven Rostedt <srostedt@redhat.com>
f | exec.h | s | 336B | 11 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | xor.h | s | 341B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | statfs.h | s | 370B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | user.h | s | 507B | 17 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | hardirq.h | s | 381B | 13 | Paul Gortmaker | paul.gortmaker@windriver.com | 1335479732 |  | xtensa: fix build fail on undefined ack_bad_irq  Commit e520c410854bab763be24e0fce7ba89dc252efee      "xtensa: convert to asm-generic/hardirq.h"  converted over to using the asm-generic parts, but it also added the sentinel  	#define ack_bad_irq ack_bad_irq  which tells asm-generic to _not_ use the common ack_bad_irq.  Since e520c41 deleted the duplicated code from the arch specific file, we _do_ want the asm-generic one in scope.  So delete the trigger define above which hides it.  In doing so we'll realize that we've got to delete the almost-duplicate prototype as well to avoid "static declaration ... follows non-static".  Cc: Christoph Hellwig <hch@lst.de> Cc: Chris Zankel <chris@zankel.net> Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
f | termbits.h | s | 4.8K | 195 | hyc@symas.com | hyc@symas.com | 1281473259 |  | tty: Add EXTPROC support for LINEMODE  This patch is against the 2.6.34 source.  Paraphrased from the 1989 BSD patch by David Borman @ cray.com:       These are the changes needed for the kernel to support      LINEMODE in the server.       There is a new bit in the termios local flag word, EXTPROC.      When this bit is set, several aspects of the terminal driver      are disabled.  Input line editing, character echo, and mapping      of signals are all disabled.  This allows the telnetd to turn      off these functions when in linemode, but still keep track of      what state the user wants the terminal to be in.       New ioctl:          TIOCSIG         Generate a signal to processes in the                          current process group of the pty.       There is a new mode for packet driver, the TIOCPKT_IOCTL bit.      When packet mode is turned on in the pty, and the EXTPROC bit      is set, then whenever the state of the pty is changed, the      next read on the master side of the pty will have the TIOCPKT_IOCTL      bit set.  This allows the process on the server side of the pty      to know when the state of the terminal has changed; it can then      issue the appropriate ioctl to retrieve the new state.  Since the original BSD patches accompanied the source code for telnet I've left that reference here, but obviously the feature is useful for any remote terminal protocol, including ssh.  The corresponding feature has existed in the BSD tty driver since 1989. For historical reference, a good copy of the relevant files can be found here:  http://anonsvn.mit.edu/viewvc/krb5/trunk/src/appl/telnet/?pathrev=17741  Signed-off-by: Howard Chu <hyc@symas.com> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk> Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
f | bootparam.h | s | 1.5K | 45 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | sigcontext.h | s | 618B | 24 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | Kbuild | g | 39B |  | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cpumask.h | s | 381B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | futex.h | s | 31B | 1 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | bug.h | s | 400B | 15 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | posix_types.h | s | 1.1K | 31 | H. Peter Anvin | hpa@zytor.com | 1329249690 |  | xtensa: Use generic posix_types.h  Change the xtensa architecture to use <asm-generic/posix_types.h>.  Signed-off-by: H. Peter Anvin <hpa@zytor.com> Link: http://lkml.kernel.org/r/1328677745-20121-21-git-send-email-hpa@zytor.com Cc: Chris Zankel <chris@zankel.net>
f | atomic.h | s | 7.1K | 260 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | mmu.h | s | 479B | 18 | Johannes Weiner | jw@emlix.com | 1238740910 |  | xtensa: nommu support  Add support for !CONFIG_MMU setups.  Signed-off-by: Johannes Weiner <jw@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | device.h | s | 129B | 6 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | tlbflush.h | s | 4.9K | 157 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | mutex.h | s | 308B | 8 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | linkage.h | s | 377B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | local.h | s | 371B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | unistd.h | s | 21K | 682 | Al Viro | viro@zeniv.linux.org.uk | 1337659086 |  | xtensa: switch to generic rt_sigsuspend(2)  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | topology.h | s | 386B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | irqflags.h | s | 1.3K | 48 | David Howells | dhowells@redhat.com | 1286456935 |  | Fix IRQ flag handling naming  Fix the IRQ flag handling naming.  In linux/irqflags.h under one configuration, it maps:  	local_irq_enable() -> raw_local_irq_enable() 	local_irq_disable() -> raw_local_irq_disable() 	local_irq_save() -> raw_local_irq_save() 	...  and under the other configuration, it maps:  	raw_local_irq_enable() -> local_irq_enable() 	raw_local_irq_disable() -> local_irq_disable() 	raw_local_irq_save() -> local_irq_save() 	...  This is quite confusing.  There should be one set of names expected of the arch, and this should be wrapped to give another set of names that are expected by users of this facility.  Change this to have the arch provide:  	flags = arch_local_save_flags() 	flags = arch_local_irq_save() 	arch_local_irq_restore(flags) 	arch_local_irq_disable() 	arch_local_irq_enable() 	arch_irqs_disabled_flags(flags) 	arch_irqs_disabled() 	arch_safe_halt()  Then linux/irqflags.h wraps these to provide:  	raw_local_save_flags(flags) 	raw_local_irq_save(flags) 	raw_local_irq_restore(flags) 	raw_local_irq_disable() 	raw_local_irq_enable() 	raw_irqs_disabled_flags(flags) 	raw_irqs_disabled() 	raw_safe_halt()  with type checking on the flags 'arguments', and then wraps those to provide:  	local_save_flags(flags) 	local_irq_save(flags) 	local_irq_restore(flags) 	local_irq_disable() 	local_irq_enable() 	irqs_disabled_flags(flags) 	irqs_disabled() 	safe_halt()  with tracing included if enabled.  The arch functions can now all be inline functions rather than some of them having to be macros.  Signed-off-by: David Howells <dhowells@redhat.com> [X86, FRV, MN10300] Signed-off-by: Chris Metcalf <cmetcalf@tilera.com> [Tile] Signed-off-by: Michal Simek <monstr@monstr.eu> [Microblaze] Tested-by: Catalin Marinas <catalin.marinas@arm.com> [ARM] Acked-by: Thomas Gleixner <tglx@linutronix.de> Acked-by: Haavard Skinnemoen <haavard.skinnemoen@atmel.com> [AVR] Acked-by: Tony Luck <tony.luck@intel.com> [IA-64] Acked-by: Hirokazu Takata <takata@linux-m32r.org> [M32R] Acked-by: Greg Ungerer <gerg@uclinux.org> [M68K/M68KNOMMU] Acked-by: Ralf Baechle <ralf@linux-mips.org> [MIPS] Acked-by: Kyle McMartin <kyle@mcmartin.ca> [PA-RISC] Acked-by: Paul Mackerras <paulus@samba.org> [PowerPC] Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com> [S390] Acked-by: Chen Liqin <liqin.chen@sunplusct.com> [Score] Acked-by: Matt Fleming <matt@console-pimps.org> [SH] Acked-by: David S. Miller <davem@davemloft.net> [Sparc] Acked-by: Chris Zankel <chris@zankel.net> [Xtensa] Reviewed-by: Richard Henderson <rth@twiddle.net> [Alpha] Reviewed-by: Yoshinori Sato <ysato@users.sourceforge.jp> [H8300] Cc: starvik@axis.com [CRIS] Cc: jesper.nilsson@axis.com [CRIS] Cc: linux-cris-kernel@axis.com
f | nommu_context.h | s | 525B | 20 | Johannes Weiner | jw@emlix.com | 1238740910 |  | xtensa: nommu support  Add support for !CONFIG_MMU setups.  Signed-off-by: Johannes Weiner <jw@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | syscall.h | s | 1.3K | 33 | Al Viro | viro@zeniv.linux.org.uk | 1338846454 |  | fixups for signal breakage  Obvious brainos spotted by Geert.  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | string.h | s | 2.7K | 101 | Akinobu Mita | akinobu.mita@gmail.com | 1328314600 |  | xtensa: fix memscan()  Defining memscan() as memchr() is wrong, because the return values of memscan() and memchr() are different when the character is not found.  So use the generic memscan() implementation to fix this.  Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com> Cc: Chris Zankel <chris@zankel.net> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | regs.h | s | 4.2K | 129 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | ioctl.h | s | 31B | 1 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | processor.h | s | 5.8K | 151 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | poll.h | s | 446B | 16 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | flat.h | s | 459B | 10 | Oskar Schirmer | os@emlix.com | 1238740889 |  | xtensa: add flat support  Add the arch-specific header for flat support on xtensa in preparation for the Xtensa S6000 nommu port.  Signed-off-by: Oskar Schirmer <os@emlix.com> Signed-off-by: Johannes Weiner <jw@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | module.h | s | 639B | 22 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | page.h | s | 5.1K | 145 | Sebastian Andrzej Siewior | sebastian@breakpoint.cc | 1306337942 |  | xtensa/mm: remove WANT_PAGE_VIRTUAL  This is not useful: it provides page->virtual and is used with highmem. xtensa has no support for highmem and those HIGHMEM bits which are found by grep are partly implemented.  The interesting functions like kmap() are missing.  If someone actually implements the complete HIGHMEM support he could use HASHED_PAGE_VIRTUAL like most others do.  Signed-off-by: Sebastian Andrzej Siewior <sebastian@breakpoint.cc> Cc: Chris Zankel <chris@zankel.net> Cc: Thomas Gleixner <tglx@linutronix.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | cmpxchg.h | s | 3.5K | 111 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | div64.h | s | 371B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | percpu.h | s | 382B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | pgalloc.h | s | 1.8K | 59 | Chris Zankel | chris@zankel.net | 1272787513 |  | xtensa: Shuffle include statements to fix linker script  The linker script was including assembly macros from the coprocessor header file that is not otherwise used by the script.  Signed-off-by: Chris Zankel <chris@zankel.net>
f | auxvec.h | s | 60B | 3 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | param.h | s | 748B | 27 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | highmem.h | s | 362B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | scatterlist.h | s | 401B | 13 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | gpio.h | s | 106B | 4 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336780814 |  | gpiolib/arches: Centralise bolierplate asm/gpio.h  Rather than requiring architectures that use gpiolib but don't have any need to define anything custom to copy an asm/gpio.h provide a Kconfig symbol which architectures must select in order to include gpio.h and for other architectures just provide the trivial implementation directly.  This makes it much easier to do gpiolib updates and is also a step towards making gpiolib APIs available on every architecture.  For architectures with existing boilerplate code leave a stub header in place which warns on direct inclusion of asm/gpio.h and includes linux/gpio.h to catch code that's doing this.  Direct inclusion of asm/gpio.h has long been deprecated.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Jonas Bonn <jonas@southpole.se> Acked-by: Tony Luck <tony.luck@intel.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | fb.h | s | 205B | 9 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | thread_info.h | s | 4.4K | 131 | Al Viro | viro@zeniv.linux.org.uk | 1337659188 |  | xtensa: add handling of TIF_NOTIFY_RESUME  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | irq.h | s | 1.0K | 39 | Daniel Glöckner | dg@emlix.com | 1245663419 |  | xtensa: allow variant to initialize own irq chips  There was already a PLATFORM_NR_IRQS define, which is now accompanied by a VARIANT_NR_IRQS. To be able to initialize these interrupts, init_IRQ now calls a variant specific hook.  Changes compared to v1: - adapted to new CONFIG_VARIANT_IRQ_EXT - removed definition and call of platform_init_IRQ as there already   is a platform_init_irq defined in asm/platform.h with a weak default   in kernel/platform.c - renamed variant_init_IRQ to variant_init_irq  Note that I could not find the call site of platform_init_irq although it is stated in platform.h that it is called from init_IRQ.  Signed-off-by: Daniel Glöckner <dg@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | swab.h | s | 2.1K | 59 | Jaswinder Singh Rajput | jaswinderrajput@gmail.com | 1233466290 |  | headers_check fix: xtensa, swab.h  fix the following 'make headers_check' warnings:    usr/include/asm-xtensa/swab.h:14: include of <linux/types.h> is preferred over <asm/types.h>   usr/include/asm-xtensa/swab.h:19: found __[us]{8,16,32,64} type without #include <linux/types.h>  Signed-off-by: Jaswinder Singh Rajput <jaswinderrajput@gmail.com>
f | fcntl.h | s | 31B | 1 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | socket.h | s | 1.8K | 65 | Ben Greear | greearb@candelatech.com | 1330076255 |  | net: Add framework to allow sending packets with customized CRC.  This is useful for testing RX handling of frames with bad CRCs.  Requires driver support to actually put the packet on the wire properly.  Signed-off-by: Ben Greear <greearb@candelatech.com> Tested-by: Aaron Brown <aaron.f.brown@intel.com> Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
f | rwsem.h | s | 2.7K | 113 | Thomas Gleixner | tglx@linutronix.de | 1296127839 |  | rwsem: Move duplicate function prototypes to linux/rwsem.h  All architecture specific rwsem headers carry the same function prototypes. Just x86 adds asmregparm, which is an empty define on all other architectures. S390 has a stale rwsem_downgrade_write() prototype.  Remove the duplicates and add the prototypes to linux/rwsem.h  Signed-off-by: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: David Howells <dhowells@redhat.com> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: Richard Henderson <rth@twiddle.net> Acked-by: Tony Luck <tony.luck@intel.com> Acked-by: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Acked-by: David Miller <davem@davemloft.net> Cc: Chris Zankel <chris@zankel.net> LKML-Reference: <20110126195833.970840140@linutronix.de> Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
f | pgtable.h | s | 13K | 342 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1288137128 |  | mm: remove pte_*map_nested()  Since we no longer need to provide KM_type, the whole pte_*map_nested() API is now redundant, remove it.  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Acked-by: Chris Metcalf <cmetcalf@tilera.com> Cc: David Howells <dhowells@redhat.com> Cc: Hugh Dickins <hughd@google.com> Cc: Rik van Riel <riel@redhat.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Steven Rostedt <rostedt@goodmis.org> Cc: Russell King <rmk@arm.linux.org.uk> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Miller <davem@davemloft.net> Cc: Paul Mackerras <paulus@samba.org> Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | timex.h | s | 2.4K | 75 | Oskar Schirmer | os@emlix.com | 1242104411 |  | xtensa: fix wrong extern declaration renamed in code using it  The variable ccount_nsec has been renamed to nsec_per_ccount in arch/xtensa/kernel/time.c in 2b8aea74 (2007-08-05), but the fix failed to rename the variable in arch/xtensa/include/asm/timex.h as well.  Signed-off-by: Oskar Schirmer <os@emlix.com> Signed-off-by: Chris Zankel <chris@zankel.net>
f | stat.h | s | 1.7K | 54 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | shmbuf.h | s | 2.1K | 66 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | ipcbuf.h | s | 842B | 33 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | switch_to.h | s | 601B | 18 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | uaccess.h | s | 13K | 432 | David Howells | dhowells@redhat.com | 1332955803 |  | Disintegrate asm/system.h for Xtensa  Disintegrate asm/system.h for Xtensa.  Signed-off-by: David Howells <dhowells@redhat.com> cc: Chris Zankel <chris@zankel.net>
f | signal.h | s | 3.7K | 137 | Al Viro | viro@zeniv.linux.org.uk | 1337659160 |  | xtensa: xtensa_sigaction doesn't exist  ... and struct old_sigaction never used  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | rmap.h | s | 345B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | vga.h | s | 434B | 15 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | mman.h | s | 3.6K | 80 | Jason Baron | jbaron@redhat.com | 1332547122 |  | coredump: add VM_NODUMP, MADV_NODUMP, MADV_CLEAR_NODUMP  Since we no longer need the VM_ALWAYSDUMP flag, let's use the freed bit for 'VM_NODUMP' flag.  The idea is is to add a new madvise() flag: MADV_DONTDUMP, which can be set by applications to specifically request memory regions which should not dump core.  The specific application I have in mind is qemu: we can add a flag there that wouldn't dump all of guest memory when qemu dumps core.  This flag might also be useful for security sensitive apps that want to absolutely make sure that parts of memory are not dumped.  To clear the flag use: MADV_DODUMP.  [akpm@linux-foundation.org: s/MADV_NODUMP/MADV_DONTDUMP/, s/MADV_CLEAR_NODUMP/MADV_DODUMP/, per Roland] [akpm@linux-foundation.org: fix up the architectures which broke] Signed-off-by: Jason Baron <jbaron@redhat.com> Acked-by: Roland McGrath <roland@hack.frob.com> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Avi Kivity <avi@redhat.com> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Matt Turner <mattst88@gmail.com> Cc: "James E.J. Bottomley" <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | msgbuf.h | s | 1.5K | 45 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | emergency-restart.h | s | 149B | 4 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | sockios.h | s | 800B | 24 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | byteorder.h | s | 277B | 10 | Harvey Harrison | harvey.harrison@gmail.com | 1231991810 |  | byteorder: make swab.h include asm/swab.h like a regular header  Add swab.h to kbuild.asm and remove the individual entries from each arch, mark as unifdef as some arches have some kernel-only bits inside.  Signed-off-by: Harvey Harrison <harvey.harrison@gmail.com> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | spinlock.h | s | 380B | 13 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | shmparam.h | s | 561B | 17 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
f | sembuf.h | s | 1.2K | 40 | Chris Zankel | chris@zankel.net | 1225995909 |  | xtensa: move headers files to arch/xtensa/include  Move all header files for xtensa to arch/xtensa/include and platform and variant header files to the appropriate arch/xtensa/platforms/ and arch/xtensa/variants/ directories.  Moving the files gets also rid of all uses of symlinks in the Makefile.  This has been completed already for the majority of the architectures and xtensa is one out of six missing.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Signed-off-by: Chris Zankel <chris@zankel.net>
