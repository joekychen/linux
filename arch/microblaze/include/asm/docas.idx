f | io.h | s | 7.7K | 214 | Lucas De Marchi | lucas.demarchi@profusion.mobi | 1301581583 |  | Fix common misspellings  Fixes generated by 'codespell' and manually reviewed.  Signed-off-by: Lucas De Marchi <lucas.demarchi@profusion.mobi>
f | kmap_types.h | s | 154B | 4 | Randy Dunlap | randy.dunlap@oracle.com | 1245206871 |  | kmap_types: make most arches use generic header file  Convert most arches to use asm-generic/kmap_types.h.  Move the KM_FENCE_ macro additions into asm-generic/kmap_types.h, controlled by __WITH_KM_FENCE from each arch's kmap_types.h file.  Would be nice to be able to add custom KM_types per arch, but I don't yet see a nice, clean way to do that.  Built on x86_64, i386, mips, sparc, alpha(tonyb), powerpc(tonyb), and 68k(tonyb).  Note: avr32 should be able to remove KM_PTE2 (since it's not used) and then just use the generic kmap_types.h file.  Get avr32 maintainer approval.  Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com> Cc: <linux-arch@vger.kernel.org> Acked-by: Mike Frysinger <vapier@gentoo.org> Cc: Richard Henderson <rth@twiddle.net> Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru> Cc: Bryan Wu <cooloney@kernel.org> Cc: Mikael Starvik <starvik@axis.com> Cc: Hirokazu Takata <takata@linux-m32r.org> Cc: "Luck Tony" <tony.luck@intel.com> Cc: Geert Uytterhoeven <geert@linux-m68k.org> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: David Howells <dhowells@redhat.com> Cc: Kyle McMartin <kyle@mcmartin.ca> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Paul Mundt <lethal@linux-sh.org> Cc: "David S. Miller" <davem@davemloft.net> Cc: Ingo Molnar <mingo@elte.hu> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: "H. Peter Anvin" <hpa@zytor.com> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | kvm_para.h | s | 34B | 1 | Eric B Munson | emunson@mgebm.net | 1333878539 |  | kvmclock: Add functions to check if the host has stopped the vm  When a host stops or suspends a VM it will set a flag to show this.  The watchdog will use these functions to determine if a softlockup is real, or the result of a suspended VM.  Signed-off-by: Eric B Munson <emunson@mgebm.net> asm-generic changes Acked-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com> Signed-off-by: Avi Kivity <avi@redhat.com>
f | selfmod.h | s | 692B | 19 | Michal Simek | monstr@monstr.eu | 1238160315 |  | microblaze_v8: Selfmodified code  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | pci.h | s | 4.4K | 121 | Bjorn Helgaas | bhelgaas@google.com | 1330053544 |  | PCI: collapse pcibios_resource_to_bus  Everybody uses the generic pcibios_resource_to_bus() supplied by the core now, so remove the ARCH_HAS_GENERIC_PCI_OFFSETS used during conversion.  Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | sections.h | s | 727B | 22 | Michal Simek | monstr@monstr.eu | 1243349116 |  | microblaze_mmu_v2: Page table - ioremap - pgtable.c/h, section update  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | cputime.h | s | 33B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | clinkage.h | s | 27B | 1 | Michal Simek | monstr@monstr.eu | 1238160338 |  | microblaze_v8: clinkage.h linkage.h sections.h kmap_types.h  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | exceptions.h | s | 2.1K | 65 | Michal Simek | monstr@monstr.eu | 1299654599 |  | microblaze: Fix sparse warning - fault.c  Warning log: CHECK   arch/microblaze/mm/fault.c arch/microblaze/mm/fault.c:51:6: warning: incorrect type in initializer (different address spaces) arch/microblaze/mm/fault.c:51:6:    expected unknown type 2const [noderef] *__gu_addr<asn:1> arch/microblaze/mm/fault.c:51:6:    got unsigned int *<noident> arch/microblaze/mm/fault.c:68:6: warning: symbol 'bad_page_fault' was not declared. Should it be static?  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | delay.h | s | 2.0K | 60 | Michal Simek | monstr@monstr.eu | 1238160327 |  | microblaze_v8: delay.h, timex.h  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | irq_regs.h | s | 34B | 1 | Michal Simek | monstr@monstr.eu | 1238160335 |  | microblaze_v8: headers for irq  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | barrier.h | s | 756B | 21 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for Microblaze  Disintegrate asm/system.h for Microblaze.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> cc: microblaze-uclinux@itee.uq.edu.au
f | cacheflush.h | s | 4.1K | 103 | Michal Simek | monstr@monstr.eu | 1299654597 |  | microblaze: trivial: Add one empty line  Add one empty line to microblaze_ksyms.c. Remove one empty line to cacheflush.h.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | cpuinfo.h | s | 2.1K | 85 | John A. Williams | john.williams@petalogix.com | 1311578022 |  | microblaze: Unprivileged stream instruction awareness  Add cpuinfo support for the new MicroBlaze option permitting userspace (unprivileged) access to the streaming instructions (FSL / AXI-stream).  Emit a noisy warning at bootup if this is enabled, because bad user code can potentially lockup the CPU.  Signed-off-by: John A. Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | current.h | s | 850B | 25 | Michal Simek | monstr@monstr.eu | 1243349119 |  | microblaze_mmu_v2: Add CURRENT_TASK for entry.S  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | mmu_context_mm.h | s | 3.9K | 122 | Arun Sharma | asharma@fb.com | 1311724187 |  | atomic: use <linux/atomic.h>  This allows us to move duplicated code in <asm/atomic.h> (atomic_inc_not_zero() for now) to <linux/atomic.h>  Signed-off-by: Arun Sharma <asharma@fb.com> Reviewed-by: Eric Dumazet <eric.dumazet@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: David Miller <davem@davemloft.net> Cc: Eric Dumazet <eric.dumazet@gmail.com> Acked-by: Mike Frysinger <vapier@gentoo.org> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | elf.h | s | 3.3K | 98 | Edgar E. Iglesias | edgar.iglesias@petalogix.com | 1318587871 |  | microblaze: Switch ELF_ARCH code to 189  Switch arch code to 189, the registered code in the upstream version of binutils. Continue to accept the experimental 0xbaab.  Signed-off-by: Edgar E. Iglesias <edgar.iglesias@gmail.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | tlb.h | s | 713B | 20 | Michal Simek | monstr@monstr.eu | 1295184561 |  | microblaze: Fix missing pagemap.h  Add missing linux/pagemap.h to solve compilation error.  Error log: In file included from linux/arch/microblaze/include/asm/tlb.h:17,                  from mm/pgtable-generic.c:9: include/asm-generic/tlb.h: In function 'tlb_flush_mmu': include/asm-generic/tlb.h:76: error: implicit declaration of function 'release_pages' include/asm-generic/tlb.h: In function 'tlb_remove_page': include/asm-generic/tlb.h:105: error: implicit declaration of function 'page_cache_release'  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | local64.h | s | 33B | 1 | Peter Zijlstra | a.p.zijlstra@chello.nl | 1276074756 |  | arch: Implement local64_t  On 64bit, local_t is of size long, and thus we make local64_t an alias. On 32bit, we fall back to atomic64_t. (architecture can provide optimized 32-bit version)  (This new facility is to be used by perf events optimizations.)  Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: linux-arch@vger.kernel.org Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Linus Torvalds <torvalds@linux-foundation.org> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | seccomp.h | s | 468B | 12 | Michal Simek | monstr@monstr.eu | 1287640285 |  | microblaze: Add seccomp support  Add seccomp support.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | unaligned.h | s | 871B | 25 | Michal Simek | monstr@monstr.eu | 1299654593 |  | microblaze: Fix unaligned.h for endians  Synchronized with mips unaligned.h.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | serial.h | s | 32B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | ucontext.h | s | 34B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | resource.h | s | 34B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | pvr.h | s | 8.7K | 198 | John A. Williams | john.williams@petalogix.com | 1311578022 |  | microblaze: Unprivileged stream instruction awareness  Add cpuinfo support for the new MicroBlaze option permitting userspace (unprivileged) access to the streaming instructions (FSL / AXI-stream).  Emit a noisy warning at bootup if this is enabled, because bad user code can potentially lockup the CPU.  Signed-off-by: John A. Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | termios.h | s | 33B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | ioctls.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | bitsperlong.h | s | 37B | 1 | Arnd Bergmann | arnd@arndb.de | 1244746934 |  | asm-generic: introduce asm/bitsperlong.h  This provides a reliable way for asm-generic/types.h and other files to find out if it is running on a 32 or 64 bit platform.  We cannot use CONFIG_64BIT for this in headers that are included from user space because CONFIG symbols are not available there. We also cannot do it inside of asm/types.h because some headers need the word size but cannot include types.h.  The solution is to introduce a new header <asm/bitsperlong.h> that defines both __BITS_PER_LONG for user space and BITS_PER_LONG for usage in the kernel. The asm-generic version falls back to 32 bit unless the architecture overrides it, which I did for all 64 bit platforms.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de>
f | dma-mapping.h | s | 4.2K | 133 | Andrzej Pietrasiewicz | andrzej.p@samsung.com | 1332945398 |  | Microblaze: adapt for dma_map_ops changes  Adapt core Microblaze architecture code for dma_map_ops changes: replace alloc/free_coherent with generic alloc/free methods.  Signed-off-by: Andrzej Pietrasiewicz <andrzej.p@samsung.com> Acked-by: Kyungmin Park <kyungmin.park@samsung.com> [fixed coding style issues] Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com> Reviewed-by: Arnd Bergmann <arnd@arndb.de>
f | prom.h | s | 1.9K | 53 | Linus Torvalds | torvalds@linux-foundation.org | 1311783860 |  | Merge branch 'next' of git://git.monstr.eu/linux-2.6-microblaze  * 'next' of git://git.monstr.eu/linux-2.6-microblaze:   microblaze: Do not show error message for 32 interrupt lines   Revert "microblaze: PCI fix typo fault in of_node pointer moving into pci_bus"   microblaze: PCI fix typo fault in of_node pointer moving into pci_bus   microblaze: Add support for early console on mdm   microblaze: Simplify early console binding from DT   microblaze: Get early printk console earlier   microblaze: Standardise cpuinfo output for cache policy   microblaze: Unprivileged stream instruction awareness   microblaze: trivial: Fix typo fault   microblaze: exec: Remove redundant set_fs(USER_DS)   microblaze: Remove duplicated prototype of start_thread()   microblaze: Fix unaligned value saving to the stack for system with MMU   microblaze/irqs: Do not trace arch_local_{*,irq_*} functions
f | siginfo.h | s | 33B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | bugs.h | s | 30B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | pci-bridge.h | s | 4.6K | 123 | Bjorn Helgaas | bhelgaas@google.com | 1330053537 |  | microblaze/PCI: remove unused pci_flags  pci_flags is initialized to zero and never modified (I think this was just copied from powerpc).  Therefore, "(pci_flags & XX)" is always false and "!(pci_flags & XX)" is always true, and we can remove all references to pci_flags.  CC: Michal Simek <monstr@monstr.eu> CC: microblaze-uclinux@itee.uq.edu.au Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
f | types.h | s | 31B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | hw_irq.h | s | 1.0B | 0 | Michal Simek | monstr@monstr.eu | 1239698229 |  | microblaze: Fix problem with removing zero length files  Adding one new line was recommended solution. Test with make distclean  Tested-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | kdebug.h | s | 32B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | setup.h | s | 1.5K | 43 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | checksum.h | s | 961B | 35 | Michal Simek | monstr@monstr.eu | 1287640319 |  | microblaze: Add support for little-endian Microblaze  Microblaze little-endian toolchain exports __MICROBLAZEEL__ which is used in the kernel to identify little/big endian.  The most of the changes are in loading values from DTB which is always big endian.  Little endian platforms are based on new AXI bus which has impact to early uartlite initialization.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | bitops.h | s | 32B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | dma.h | s | 706B | 23 | Michal Simek | monstr@monstr.eu | 1273137718 |  | microblaze: Add isa_dma_bridge_buggy to dma.h  It is necessary for several drivers.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | fixmap.h | s | 3.2K | 95 | Michal Simek | monstr@monstr.eu | 1332491293 |  | microblaze: Highmem support  The first highmem implementation.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | ptrace.h | s | 2.0K | 72 | Eric Paris | eparis@redhat.com | 1326835016 |  | Audit: push audit success and retcode into arch ptrace.h  The audit system previously expected arches calling to audit_syscall_exit to supply as arguments if the syscall was a success and what the return code was. Audit also provides a helper AUDITSC_RESULT which was supposed to simplify things by converting from negative retcodes to an audit internal magic value stating success or failure.  This helper was wrong and could indicate that a valid pointer returned to userspace was a failed syscall.  The fix is to fix the layering foolishness.  We now pass audit_syscall_exit a struct pt_reg and it in turns calls back into arch code to collect the return value and to determine if the syscall was a success or failure.  We also define a generic is_syscall_success() macro which determines success/failure based on if the value is < -MAX_ERRNO.  This works for arches like x86 which do not use a separate mechanism to indicate syscall failure.  We make both the is_syscall_success() and regs_return_value() static inlines instead of macros.  The reason is because the audit function must take a void* for the regs.  (uml calls theirs struct uml_pt_regs instead of just struct pt_regs so audit_syscall_exit can't take a struct pt_regs).  Since the audit function takes a void* we need to use static inlines to cast it back to the arch correct structure to dereference it.  The other major change is that on some arches, like ia64, MIPS and ppc, we change regs_return_value() to give us the negative value on syscall failure. THE only other user of this macro, kretprobe_example.c, won't notice and it makes the value signed consistently for the audit functions across all archs.  In arch/sh/kernel/ptrace_64.c I see that we were using regs[9] in the old audit code as the return value.  But the ptrace_64.h code defined the macro regs_return_value() as regs[3].  I have no idea which one is correct, but this patch now uses the regs_return_value() function, so it now uses regs[3].  For powerpc we previously used regs->result but now use the regs_return_value() function which uses regs->gprs[3].  regs->gprs[3] is always positive so the regs_return_value(), much like ia64 makes it negative before calling the audit code when appropriate.  Signed-off-by: Eric Paris <eparis@redhat.com> Acked-by: H. Peter Anvin <hpa@zytor.com> [for x86 portion] Acked-by: Tony Luck <tony.luck@intel.com> [for ia64] Acked-by: Richard Weinberger <richard@nod.at> [for uml] Acked-by: David S. Miller <davem@davemloft.net> [for sparc] Acked-by: Ralf Baechle <ralf@linux-mips.org> [for mips] Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> [for ppc]
f | mmu_context.h | s | 98B | 5 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | errno.h | s | 31B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | cache.h | s | 644B | 19 | Michal Simek | monstr@monstr.eu | 1273137719 |  | microblaze: Define correct L1_CACHE_SHIFT value  Microblaze cacheline length is configurable and current cpu uses two cacheline length 4 and 8.  We are taking conservative maximum value to be sure that cacheline alignment is satisfied for all cases.  Here is the calculation for cacheline lenght 8  32bit=4Byte values which is corresponding with SHIFT 5.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | ftrace.h | s | 593B | 20 | Michal Simek | monstr@monstr.eu | 1260776641 |  | microblaze: ftrace: Add dynamic trace support  With dynamic function tracer, by default, _mcount is defined as an "empty" function, it returns directly without any more action. When enabling it in user-space, it will jump to a real tracing function(ftrace_caller), and do the real job for us.  Differ from the static function tracer, dynamic function tracer provides two functions ftrace_make_call()/ftrace_make_nop() to enable/disable the tracing of some indicated kernel functions(set_ftrace_filter).  In the kernel version, there is only one "_mcount" string for every kernel function, so, we just need to match this one in mcount_regex of scripts/recordmcount.pl.  For more information please look at code and Documentation/trace folder.  Steven ACK that scripts/recordmcount.pl part.  Acked-by: Steven Rostedt <rostedt@goodmis.org> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | unwind.h | s | 719B | 22 | Steven J. Magnani | steve@digidescorp.com | 1280910155 |  | microblaze: Add stack unwinder  Implement intelligent backtracing by searching for stack frame creation, and emitting only return addresses. Use print_hex_dump() to display the entire binary kernel stack.  Limitation: MMU kernels are not currently able to trace beyond a system trap (interrupt, syscall, etc.). It is the intent of this patch to provide infrastructure that can be extended to add this capability later.  Changes from V1: * Removed checks in find_frame_creation() that prevented location of the frame   creation instruction in heavily optimized code * Various formatting/commenting/file location tweaks per review comments * Dropped Kconfig option to enable STACKTRACE as something logically separate  Signed-off-by: Steven J. Magnani <steve@digidescorp.com>
f | asm-compat.h | s | 479B | 14 | John Williams | john.williams@petalogix.com | 1253607006 |  | microblaze: Copy ppc asm-compat.h for clean handling of constants in asm and C  Provides the ASM_CONST macro for creating asm-safe constants.  No users yet, we'll be using it in upcoming page.h commit, for generating the LOAD_OFFSET macro  Signed-off-by: John Williams <john.williams@petalogix.com>
f | user.h | s | 1.0B | 0 | Michal Simek | monstr@monstr.eu | 1239698229 |  | microblaze: Fix problem with removing zero length files  Adding one new line was recommended solution. Test with make distclean  Tested-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | statfs.h | s | 32B | 1 | Michal Simek | monstr@monstr.eu | 1238160339 |  | microblaze_v8: stats headers  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | xor.h | s | 29B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | exec.h | s | 357B | 11 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for Microblaze  Disintegrate asm/system.h for Microblaze.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> cc: microblaze-uclinux@itee.uq.edu.au
f | hardirq.h | s | 33B | 1 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/microblaze: Convert microblaze to use irq_domains  This patch converts Microblaze to use the irq_domain remapper and get away from hard coding the offset between hwirq number and the linux irq number space.  This also paves the way for multiple interrupt controllers.  v2: Don't enable SPARSE_IRQ and keep NR_IRQS set to 33  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Michal Simek <monstr@monstr.eu> Cc: Rob Herring <rob.herring@calxeda.com> Cc: John Williams <john.williams@petalogix.com> Cc: John Linn <john.linn@xilinx.com>
f | bug.h | s | 29B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | termbits.h | s | 34B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | sigcontext.h | s | 474B | 16 | Michal Simek | monstr@monstr.eu | 1238160340 |  | microblaze_v8: sigcontext.h siginfo.h  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | mmu.h | s | 4.2K | 109 | Michal Simek | monstr@monstr.eu | 1332491299 |  | microblaze: Handle TLB skip size dynamically  This patch fix the problem with rootfs on JFFS2 with early printk console turned on.  The origin version used TLB63 for temporary early printk mapping. The code expect that kernel is not able to use all 64 TLB entries till early printk console is remapped by ioremap. After that temporary mapping on TLB63 is silently lost. This expectation give the opportunity to have early console pretty early.  Microblaze systems with JFFS2 rootfs with early printk console turned on used more than 64 TLB entries before kernel can remap early console. Based on that kernel does access to bad area because early printk mapping is rewritten.  This patch introduces tlb_skip variable which dynamically stores number of skipped TLB entries from the TLB0. skip_tlb=2 means that TLB0 and TLB1 should be skipped.  MICROBLAZE_TLB_SKIP defines how many TLB is skipped at the kernel start. They can be used for user purpose.  TLB 63 is used for temporary LMB mapping (MICROBLAZE_LMB_TLB_ID).  Also clean TLBLO when kernel starts.  For specific kernel sizes kernel can use just one TLB. Detect this case and use the second TLB for general purpose.  Change _tlbia function to flush TLB entries from tlb_skip to TLB_SIZE.  Export tlb_skip size through debugfs.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | futex.h | s | 2.8K | 114 | Michal Simek | monstr@monstr.eu | 1332916104 |  | microblaze: Fix __futex_atomic_op macro register usage  Old Microblaze toolchain supported "b" contstrains for all register but it always points to general purpose reg. New Microblaze toolchain is more strict in this and general purpose register should be used there "r".  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | Kbuild | g | 59B |  | Michal Simek | monstr@monstr.eu | 1242978646 |  | microblaze: Kbuild update  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | parport.h | s | 33B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | atomic.h | s | 533B | 21 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for Microblaze  Disintegrate asm/system.h for Microblaze.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> cc: microblaze-uclinux@itee.uq.edu.au
f | device.h | s | 530B | 19 | Grant Likely | grant.likely@secretlab.ca | 1274508640 |  | arch/microblaze: Move dma_mask from of_device into pdev_archdata  By moving dma_mask into pdev_archdata, and adding archdata to struct of_device, it makes it possible to substitute of_device with struct platform_device, which is a stepping stone to removing the of_platform bus entirely.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | posix_types.h | s | 239B | 6 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | registers.h | s | 1.6K | 43 | Michal Simek | monstr@monstr.eu | 1243349118 |  | microblaze_mmu_v2: Update process creation for MMU  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | tlbflush.h | s | 2.0K | 55 | Michal Simek | monstr@monstr.eu | 1270103904 |  | microblaze: Fix TLB macros  To be able to do trace TLB operations.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | linkage.h | s | 391B | 12 | Michal Simek | monstr@monstr.eu | 1238160338 |  | microblaze_v8: clinkage.h linkage.h sections.h kmap_types.h  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | mutex.h | s | 35B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | local.h | s | 31B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | unistd.h | s | 16K | 428 | Michal Simek | monstr@monstr.eu | 1325758611 |  | microblaze: Wire-up new system calls  Wire up three system calls sendmmsg/process_vm_readv/process_vm_writev  All tested by testing apps. Look at: net: Add sendmmsg socket system call (sha1: 228e548e602061b08ee8e8966f567c12aa079682) Cross Memory Attach (sha1: fcf634098c00dd9cd247447368495f0b79be12d1)  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | irqflags.h | s | 2.6K | 106 | Steven Rostedt | srostedt@redhat.com | 1311577665 |  | microblaze/irqs: Do not trace arch_local_{*,irq_*} functions  Do not trace arch_local_save_flags(), arch_local_irq_*() and friends. Although they are marked inline, gcc may still make a function out of them and add it to the pool of functions that are traced by the function tracer. This can cause undesirable results (kernel panic, triple faults, etc).  Add the notrace notation to prevent them from ever being traced.  Cc: Michal Simek <monstr@monstr.eu> Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
f | string.h | s | 630B | 18 | Steve Magnani | steve@digidescorp.com | 1242914168 |  | microblaze: Guard __HAVE_ARCH macros with __KERNEL__ in string.h  A polarity reversal in the __KERNEL__ guard prevents the __HAVE_ARCH flags from being defined in kernel compilation.  I noticed that there's now an option for assembly-optimized versions of memcpy and memmove. I believe this may be buggy; when I turn it on, all my printk output gets smashed together, as if the newlines aren't getting copied.  Signed-off-by: Steven J. Magnani <steve@digidescorp.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | topology.h | s | 34B | 1 | Grant Likely | grant.likely@secretlab.ca | 1280469838 |  | of: Provide default of_node_to_nid() implementation.  of_node_to_nid() is only relevant in a few architectures.  Don't force everyone to implement it anyway.  Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | syscall.h | s | 2.1K | 90 | Michal Simek | monstr@monstr.eu | 1299654598 |  | microblaze: Fix sparse warnings - ptrace  Warning log: CHECK   arch/microblaze/kernel/ptrace.c arch/microblaze/kernel/ptrace.c:126:11: warning: incorrect type in initializer (different address spaces) arch/microblaze/kernel/ptrace.c:126:11:    expected unknown type 2[noderef] *__pu_addr<asn:1> arch/microblaze/kernel/ptrace.c:126:11:    got unsigned long *<noident> arch/microblaze/kernel/ptrace.c:134:17: warning: symbol 'do_syscall_trace_enter' was not declared. Should it be static? arch/microblaze/kernel/ptrace.c:157:17: warning: symbol 'do_syscall_trace_leave' was not declared. Should it be static?  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | module.h | s | 840B | 26 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | ioctl.h | s | 31B | 1 | Michal Simek | monstr@monstr.eu | 1238160333 |  | microblaze_v8: ioctl support  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | poll.h | s | 30B | 1 | Michal Simek | monstr@monstr.eu | 1238160344 |  | microblaze_v8: pool.h socket.h  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | processor.h | s | 4.8K | 138 | Suresh Siddha | suresh.b.siddha@intel.com | 1337206586 |  | fork: move the real prepare_to_copy() users to arch_dup_task_struct()  Historical prepare_to_copy() is mostly a no-op, duplicated for majority of the architectures and the rest following the x86 model of flushing the extended register state like fpu there.  Remove it and use the arch_dup_task_struct() instead.  Suggested-by: Oleg Nesterov <oleg@redhat.com> Suggested-by: Linus Torvalds <torvalds@linux-foundation.org> Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com> Link: http://lkml.kernel.org/r/1336692811-30576-1-git-send-email-suresh.b.siddha@intel.com Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org> Cc: David Howells <dhowells@redhat.com> Cc: Koichi Yasutake <yasutake.koichi@jp.panasonic.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Paul Mundt <lethal@linux-sh.org> Cc: Chris Zankel <chris@zankel.net> Cc: Richard Henderson <rth@twiddle.net> Cc: Russell King <linux@arm.linux.org.uk> Cc: Haavard Skinnemoen <hskinnemoen@gmail.com> Cc: Mike Frysinger <vapier@gentoo.org> Cc: Mark Salter <msalter@redhat.com> Cc: Aurelien Jacquiot <a-jacquiot@ti.com> Cc: Mikael Starvik <starvik@axis.com> Cc: Yoshinori Sato <ysato@users.sourceforge.jp> Cc: Richard Kuo <rkuo@codeaurora.org> Cc: Tony Luck <tony.luck@intel.com> Cc: Michal Simek <monstr@monstr.eu> Cc: Ralf Baechle <ralf@linux-mips.org> Cc: Jonas Bonn <jonas@southpole.se> Cc: James E.J. Bottomley <jejb@parisc-linux.org> Cc: Helge Deller <deller@gmx.de> Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> Cc: Heiko Carstens <heiko.carstens@de.ibm.com> Cc: Chen Liqin <liqin.chen@sunplusct.com> Cc: Lennox Wu <lennox.wu@gmail.com> Cc: David S. Miller <davem@davemloft.net> Cc: Chris Metcalf <cmetcalf@tilera.com> Cc: Jeff Dike <jdike@addtoit.com> Cc: Richard Weinberger <richard@nod.at> Cc: Guan Xuetao <gxt@mprc.pku.edu.cn> Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
f | cputable.h | s | 1.0B | 0 | Michal Simek | monstr@monstr.eu | 1239698229 |  | microblaze: Fix problem with removing zero length files  Adding one new line was recommended solution. Test with make distclean  Tested-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | flat.h | s | 2.3K | 73 | Andrew Morton | akpm@linux-foundation.org | 1243922076 |  | microblaze: remove unused flat_stack_align() definition  Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | percpu.h | s | 32B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | page.h | s | 6.2K | 172 | Linus Torvalds | torvalds@linux-foundation.org | 1332975501 |  | 
f | entry.h | s | 1.0K | 28 | Michal Simek | monstr@monstr.eu | 1299654594 |  | microblaze: Remove r0_ram pointer and PTO alignment  r0_ram pool was used for saving/restoring register content if hw exception happen. This poll was replaced by pt_pool_space with PT_SIZE size. Based on this change SAVE_STATE_ARG_SPACE was removed which caused that PTO offset is zero that's why is also removed.  r0_ram space was used as scratchpad by v850. In early Microblaze Linux developing phase was this part of code blindly copied.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | syscalls.h | s | 558B | 12 | Michal Simek | monstr@monstr.eu | 1299654598 |  | microblaze: Fix missing microblaze specific syscalls declaration  Warning log: CHECK   arch/microblaze/kernel/sys_microblaze.c arch/microblaze/kernel/sys_microblaze.c:37:17: warning: symbol 'microblaze_vfork' was not declared. Should it be static? arch/microblaze/kernel/sys_microblaze.c:43:17: warning: symbol 'microblaze_clone' was not declared. Should it be static? arch/microblaze/kernel/sys_microblaze.c:50:17: warning: symbol 'microblaze_execve' was not declared. Should it be static?  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | div64.h | s | 31B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | cmpxchg.h | s | 880B | 33 | Michal Simek | monstr@monstr.eu | 1333102306 |  | microblaze: Add missing headers caused by disintegration asm/system.h  It should be the part of patch "Disintegrate asm/system.h for Microblaze" (sha1: c40d04df152a1111c5bbcb632278394dabd2b73d)  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | auxvec.h | s | 1.0B | 0 | Michal Simek | monstr@monstr.eu | 1239698229 |  | microblaze: Fix problem with removing zero length files  Adding one new line was recommended solution. Test with make distclean  Tested-by: Jeff Garzik <jgarzik@redhat.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | param.h | s | 31B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | highmem.h | s | 2.4K | 79 | Michal Simek | monstr@monstr.eu | 1332491293 |  | microblaze: Highmem support  The first highmem implementation.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | gpio.h | s | 106B | 4 | Mark Brown | broonie@opensource.wolfsonmicro.com | 1336780814 |  | gpiolib/arches: Centralise bolierplate asm/gpio.h  Rather than requiring architectures that use gpiolib but don't have any need to define anything custom to copy an asm/gpio.h provide a Kconfig symbol which architectures must select in order to include gpio.h and for other architectures just provide the trivial implementation directly.  This makes it much easier to do gpiolib updates and is also a step towards making gpiolib APIs available on every architecture.  For architectures with existing boilerplate code leave a stub header in place which warns on direct inclusion of asm/gpio.h and includes linux/gpio.h to catch code that's doing this.  Direct inclusion of asm/gpio.h has long been deprecated.  Signed-off-by: Mark Brown <broonie@opensource.wolfsonmicro.com> Acked-by: Jonas Bonn <jonas@southpole.se> Acked-by: Tony Luck <tony.luck@intel.com> Acked-by: Linus Walleij <linus.walleij@linaro.org> Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
f | scatterlist.h | s | 37B | 1 | FUJITA Tomonori | fujita.tomonori@lab.ntt.co.jp | 1281197750 |  | remove needless ISA_DMA_THRESHOLD  Architectures don't need to define ISA_DMA_THRESHOLD anymore.  Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp> Acked-by: James Bottomley <James.Bottomley@suse.de> Acked-by: David Howells <dhowells@redhat.com> Signed-off-by: Jens Axboe <jaxboe@fusionio.com>
f | pgalloc.h | s | 4.7K | 152 | Michal Simek | monstr@monstr.eu | 1287640280 |  | microblaze: Fix pmd_populate macro  Compilation warning: mm/memory.c: In function '__pte_alloc': mm/memory.c:421: warning: assignment makes integer from pointer without a cast  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | asm-offsets.h | s | 35B | 1 | Sam Ravnborg | sam@ravnborg.org | 1260619694 |  | kbuild: move asm-offsets.h to include/generated  The simplest method was to add an extra asm-offsets.h file in arch/$ARCH/include/asm that references the generated file.  We can now migrate the architectures one-by-one to reference the generated file direct - and when done we can delete the temporary arch/$ARCH/include/asm/asm-offsets.h file.  Signed-off-by: Sam Ravnborg <sam@ravnborg.org> Cc: Al Viro <viro@zeniv.linux.org.uk> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | irq.h | s | 532B | 16 | Grant Likely | grant.likely@secretlab.ca | 1329397884 |  | irq_domain/microblaze: Convert microblaze to use irq_domains  This patch converts Microblaze to use the irq_domain remapper and get away from hard coding the offset between hwirq number and the linux irq number space.  This also paves the way for multiple interrupt controllers.  v2: Don't enable SPARSE_IRQ and keep NR_IRQS set to 33  Signed-off-by: Grant Likely <grant.likely@secretlab.ca> Signed-off-by: Michal Simek <monstr@monstr.eu> Cc: Rob Herring <rob.herring@calxeda.com> Cc: John Williams <john.williams@petalogix.com> Cc: John Linn <john.linn@xilinx.com>
f | swab.h | s | 30B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | fcntl.h | s | 31B | 1 | Michal Simek | monstr@monstr.eu | 1238160345 |  | microblaze_v8: fcntl.h sockios.h ucontext.h  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | fb.h | s | 28B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | thread_info.h | s | 5.0K | 166 | Al Viro | viro@zeniv.linux.org.uk | 1338569930 |  | set_restore_sigmask() is never called without SIGPENDING (and never should be)  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
f | pgtable.h | s | 18K | 474 | Linus Torvalds | torvalds@linux-foundation.org | 1332897656 |  | Merge branch 'next' of git://git.monstr.eu/linux-2.6-microblaze  Pull arch/microblaze fixes from Michal Simek  * 'next' of git://git.monstr.eu/linux-2.6-microblaze:   microblaze: Handle TLB skip size dynamically   microblaze: Introduce TLB skip size   microblaze: Improve TLB calculation for small systems   microblaze: Extend space for compiled-in FDT to 32kB   microblaze: Clear all MSR flags on the first kernel instruction   microblaze: Use node name instead of compatible string   microblaze: Fix mapin_ram function   microblaze: Highmem support   microblaze: Use active regions   microblaze: Show more detailed information about memory   microblaze: Introduce fixmap   microblaze: mm: Fix lowmem max memory size limits   microblaze: mm: Use ZONE_DMA instead of ZONE_NORMAL   microblaze: trivial: Fix typo fault in timer.c   microblaze: Use vsprintf extention %pf with builtin_return_address   microblaze: Add PVR version string for MB 8.20.b and 8.30.a   microblaze: Fix makefile to work with latest toolchain   microblaze: Fix typo in early_printk.c
f | timex.h | s | 402B | 12 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | socket.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | ipcbuf.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | shmbuf.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | stat.h | s | 30B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | switch_to.h | s | 629B | 19 | David Howells | dhowells@redhat.com | 1332955802 |  | Disintegrate asm/system.h for Microblaze  Disintegrate asm/system.h for Microblaze.  Not compiled.  Signed-off-by: David Howells <dhowells@redhat.com> cc: microblaze-uclinux@itee.uq.edu.au
f | uaccess.h | s | 11K | 372 | Michal Simek | monstr@monstr.eu | 1332491290 |  | microblaze: mm: Fix lowmem max memory size limits  Use CONFIG_LOWMEM_SIZE if system has larger ram size. For system with larger ram size, enable HIGMEM support.  Also setup limitation for memblock and use memblock allocation in lowmem region.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | signal.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868817 |  | microblaze: clean up signal handling  When legacy signal handling is disabled, the arch/microblaze/kernel/signal.c implementation can be much simpler, as most of it is handled generically from kernel/signal.c.  This is also a prerequisite for using the generic asm/unistd.h, which does not provide __NR_sigreturn, because this macro is referenced by the current signal.c implementation.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | vga.h | s | 29B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | mman.h | s | 30B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | sockios.h | s | 33B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | msgbuf.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | kgdb.h | s | 622B | 23 | Michal Simek | monstr@monstr.eu | 1280911517 |  | microblaze: Add KGDB support  Kgdb uses brki r16, 0x18 instruction to call low level _debug_exception function which save current state to pt_regs and call microblaze_kgdb_break function. _debug_exception should be called only from the kernel space. User space calling is not supported because user application debugging uses different handling.  pt_regs_to_gdb_regs loads additional special registers which can't be changed   * Enable KGDB in Kconfig  * Remove ancient not-tested KGDB support  * Remove ancient _debug_exception code from entry.S  Only MMU KGDB support is supported.  Signed-off-by: Michal Simek <monstr@monstr.eu> CC: Jason Wessel <jason.wessel@windriver.com> CC: John Williams <john.williams@petalogix.com> CC: Edgar E. Iglesias <edgar.iglesias@petalogix.com> CC: linux-kernel@vger.kernel.org Acked-by: Jason Wessel <jason.wessel@windriver.com>
f | emergency-restart.h | s | 43B | 1 | Michal Simek | monstr@monstr.eu | 1238160341 |  | microblaze_v8: headers simple files - empty or redirect to asm-generic  Reviewed-by: Ingo Molnar <mingo@elte.hu> Acked-by: John Linn <john.linn@xilinx.com> Acked-by: Stephen Neuendorffer <stephen.neuendorffer@xilinx.com> Acked-by: John Williams <john.williams@petalogix.com> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | shmparam.h | s | 34B | 1 | Remis Lima Baima | remis.developer@googlemail.com | 1246868815 |  | microblaze: convert all simple headers to use asm-generic  All the simple microblaze header files were adapted to use their asm-generic implementations. These files are more simple and were quite straightforward to change.  fb.h, vga.h and parport.h previously did not exist, using the generic version makes it possible to build more drivers successfully in allyesonfig.  Signed-off-by: Remis Lima Baima <remis.developer@googlemail.com> Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
f | byteorder.h | s | 235B | 8 | Michal Simek | monstr@monstr.eu | 1287640319 |  | microblaze: Add support for little-endian Microblaze  Microblaze little-endian toolchain exports __MICROBLAZEEL__ which is used in the kernel to identify little/big endian.  The most of the changes are in loading values from DTB which is always big endian.  Little endian platforms are based on new AXI bus which has impact to early uartlite initialization.  Signed-off-by: Michal Simek <monstr@monstr.eu>
f | sembuf.h | s | 32B | 1 | Arnd Bergmann | arnd@arndb.de | 1246868810 |  | microblaze: fall back on generic header files for the ABI  Almost all of the ABI relevant header files now have generic versions, so use those now in order to reduce the amount of architecture specific code.  Signed-off-by: Arnd Bergmann <arnd@arndb.de> Signed-off-by: Michal Simek <monstr@monstr.eu>
