f | pm.c | s | 3.1K | 122 | Paul Mundt | lethal@linux-sh.org | 1333103397 |  | sh: fix up fallout from system.h disintegration.  Quite a bit of fallout all over the place, nothing terribly exciting.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | hp6xx_apm.c | s | 2.7K | 90 | Yong Zhang | yong.zhang0@gmail.com | 1319780368 |  | SH: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | pm_wakeup.S | g | 739B |  | Magnus Damm | damm@igel.co.jp | 1235719570 |  | sh: shared register saving code for sh3/sh4/sh4a  This patch reworks the sh3/sh4/sh4a register saving code in the following ways:  - break out prepare_stack_save_dsp() from handle_exception()  - break out save_regs() from handle_exception()  - the register saving order is unchanged  - align new functions to fit in cache lines  - separate exception code from interrupt code  - keep main code flow in a single cache line per exception vector  - use bsr/rts for regular functions (save pr first)  - keep data in one shared cache line (exception_data)  - document the functions  - tie in the hp6xx code  Signed-off-by: Magnus Damm <damm@igel.co.jp> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | Makefile | g | 158B |  | Paul Mundt | lethal@linux-sh.org | 1217332879 |  | sh: Shuffle the board directories in to mach groups.  This flattens out the board directories in to individual mach groups, we will use this for getting rid of unneeded directories, simplifying the build system, and becoming more coherent with the refactored arch/sh/include topology.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | setup.c | s | 3.8K | 148 | Paul Mundt | lethal@linux-sh.org | 1337590441 |  | sh: Kill off machvec IRQ hinting.  Everything is using sparseirq these days, so we have no need to arbitrarily size nr_irqs ahead of time. The legacy IRQ pre-allocation likewise has no meaning for us, so that's killed off too. We now depend on nr_irqs expansion by the generic hardirq layer instead.  It's also worth noting that the majority of boards had completely bogus values for their nr_irqs relative to their CPU and configurations, so this ends up correcting behaviour for quite a few platforms.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
