<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › sh › include › mach-sdk7786 › mach › fpga.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../../index.html"></a><h1>fpga.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __MACH_SDK7786_FPGA_H</span>
<span class="cp">#define __MACH_SDK7786_FPGA_H</span>

<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/bitops.h&gt;</span>

<span class="cp">#define SRSTR		0x000</span>
<span class="cp">#define  SRSTR_MAGIC	0x1971	</span><span class="cm">/* Fixed magical read value */</span><span class="cp"></span>

<span class="cp">#define INTASR		0x010</span>
<span class="cp">#define INTAMR		0x020</span>
<span class="cp">#define MODSWR		0x030</span>
<span class="cp">#define INTTESTR	0x040</span>
<span class="cp">#define SYSSR		0x050</span>
<span class="cp">#define NRGPR		0x060</span>

<span class="cp">#define NMISR		0x070</span>
<span class="cp">#define  NMISR_MAN_NMI	BIT(0)</span>
<span class="cp">#define  NMISR_AUX_NMI	BIT(1)</span>
<span class="cp">#define  NMISR_MASK	(NMISR_MAN_NMI | NMISR_AUX_NMI)</span>

<span class="cp">#define NMIMR		0x080</span>
<span class="cp">#define  NMIMR_MAN_NMIM	BIT(0)	</span><span class="cm">/* Manual NMI mask */</span><span class="cp"></span>
<span class="cp">#define  NMIMR_AUX_NMIM	BIT(1)	</span><span class="cm">/* Auxiliary NMI mask */</span><span class="cp"></span>
<span class="cp">#define  NMIMR_MASK	(NMIMR_MAN_NMIM | NMIMR_AUX_NMIM)</span>

<span class="cp">#define INTBSR		0x090</span>
<span class="cp">#define INTBMR		0x0a0</span>
<span class="cp">#define USRLEDR		0x0b0</span>
<span class="cp">#define MAPSWR		0x0c0</span>
<span class="cp">#define FPGAVR		0x0d0</span>
<span class="cp">#define FPGADR		0x0e0</span>
<span class="cp">#define PCBRR		0x0f0</span>
<span class="cp">#define RSR		0x100</span>
<span class="cp">#define EXTASR		0x110</span>
<span class="cp">#define SPCAR		0x120</span>
<span class="cp">#define INTMSR		0x130</span>

<span class="cp">#define PCIECR		0x140</span>
<span class="cp">#define  PCIECR_PCIEMUX1	BIT(15)</span>
<span class="cp">#define  PCIECR_PCIEMUX0	BIT(14)</span>
<span class="cp">#define  PCIECR_PRST4		BIT(12) </span><span class="cm">/* slot 4 card present */</span><span class="cp"></span>
<span class="cp">#define  PCIECR_PRST3		BIT(11) </span><span class="cm">/* slot 3 card present */</span><span class="cp"></span>
<span class="cp">#define  PCIECR_PRST2		BIT(10) </span><span class="cm">/* slot 2 card present */</span><span class="cp"></span>
<span class="cp">#define  PCIECR_PRST1		BIT(9)  </span><span class="cm">/* slot 1 card present */</span><span class="cp"></span>
<span class="cp">#define  PCIECR_CLKEN		BIT(4)	</span><span class="cm">/* oscillator enable */</span><span class="cp"></span>

<span class="cp">#define FAER		0x150</span>
<span class="cp">#define USRGPIR		0x160</span>

<span class="cm">/* 0x170 reserved */</span>

<span class="cp">#define LCLASR			0x180</span>
<span class="cp">#define  LCLASR_FRAMEN		BIT(15)</span>

<span class="cp">#define  LCLASR_FPGA_SEL_SHIFT	12</span>
<span class="cp">#define  LCLASR_NAND_SEL_SHIFT	8</span>
<span class="cp">#define  LCLASR_NORB_SEL_SHIFT	4</span>
<span class="cp">#define  LCLASR_NORA_SEL_SHIFT	0</span>

<span class="cp">#define  LCLASR_AREA_MASK	0x7</span>

<span class="cp">#define  LCLASR_FPGA_SEL_MASK	(LCLASR_AREA_MASK &lt;&lt; LCLASR_FPGA_SEL_SHIFT)</span>
<span class="cp">#define  LCLASR_NAND_SEL_MASK	(LCLASR_AREA_MASK &lt;&lt; LCLASR_NAND_SEL_SHIFT)</span>
<span class="cp">#define  LCLASR_NORB_SEL_MASK	(LCLASR_AREA_MASK &lt;&lt; LCLASR_NORB_SEL_SHIFT)</span>
<span class="cp">#define  LCLASR_NORA_SEL_MASK	(LCLASR_AREA_MASK &lt;&lt; LCLASR_NORA_SEL_SHIFT)</span>

<span class="cp">#define SBCR		0x190</span>
<span class="cp">#define  SCBR_I2CMEN	BIT(0)	</span><span class="cm">/* FPGA I2C master enable */</span><span class="cp"></span>
<span class="cp">#define  SCBR_I2CCEN	BIT(1)	</span><span class="cm">/* CPU I2C master enable */</span><span class="cp"></span>

<span class="cp">#define PWRCR		0x1a0</span>
<span class="cp">#define  PWRCR_SCISEL0	BIT(0)</span>
<span class="cp">#define  PWRCR_SCISEL1	BIT(1)</span>
<span class="cp">#define  PWRCR_SCIEN	BIT(2)	</span><span class="cm">/* Serial port enable */</span><span class="cp"></span>
<span class="cp">#define  PWRCR_PDWNACK	BIT(5)	</span><span class="cm">/* Power down acknowledge */</span><span class="cp"></span>
<span class="cp">#define  PWRCR_PDWNREQ	BIT(7)	</span><span class="cm">/* Power down request */</span><span class="cp"></span>
<span class="cp">#define  PWRCR_INT2	BIT(11)	</span><span class="cm">/* INT2 connection to power manager */</span><span class="cp"></span>
<span class="cp">#define  PWRCR_BUPINIT	BIT(13)	</span><span class="cm">/* DDR backup initialize */</span><span class="cp"></span>
<span class="cp">#define  PWRCR_BKPRST	BIT(15) </span><span class="cm">/* Backup power reset */</span><span class="cp"></span>

<span class="cp">#define SPCBR		0x1b0</span>
<span class="cp">#define SPICR		0x1c0</span>
<span class="cp">#define SPIDR		0x1d0</span>
<span class="cp">#define I2CCR		0x1e0</span>
<span class="cp">#define I2CDR		0x1f0</span>
<span class="cp">#define FPGACR		0x200</span>
<span class="cp">#define IASELR1		0x210</span>
<span class="cp">#define IASELR2		0x220</span>
<span class="cp">#define IASELR3		0x230</span>
<span class="cp">#define IASELR4		0x240</span>
<span class="cp">#define IASELR5		0x250</span>
<span class="cp">#define IASELR6		0x260</span>
<span class="cp">#define IASELR7		0x270</span>
<span class="cp">#define IASELR8		0x280</span>
<span class="cp">#define IASELR9		0x290</span>
<span class="cp">#define IASELR10	0x2a0</span>
<span class="cp">#define IASELR11	0x2b0</span>
<span class="cp">#define IASELR12	0x2c0</span>
<span class="cp">#define IASELR13	0x2d0</span>
<span class="cp">#define IASELR14	0x2e0</span>
<span class="cp">#define IASELR15	0x2f0</span>
<span class="cm">/* 0x300 reserved */</span>
<span class="cp">#define IBSELR1		0x310</span>
<span class="cp">#define IBSELR2		0x320</span>
<span class="cp">#define IBSELR3		0x330</span>
<span class="cp">#define IBSELR4		0x340</span>
<span class="cp">#define IBSELR5		0x350</span>
<span class="cp">#define IBSELR6		0x360</span>
<span class="cp">#define IBSELR7		0x370</span>
<span class="cp">#define IBSELR8		0x380</span>
<span class="cp">#define IBSELR9		0x390</span>
<span class="cp">#define IBSELR10	0x3a0</span>
<span class="cp">#define IBSELR11	0x3b0</span>
<span class="cp">#define IBSELR12	0x3c0</span>
<span class="cp">#define IBSELR13	0x3d0</span>
<span class="cp">#define IBSELR14	0x3e0</span>
<span class="cp">#define IBSELR15	0x3f0</span>
<span class="cp">#define USRACR		0x400</span>
<span class="cp">#define BEEPR		0x410</span>
<span class="cp">#define USRLCDR		0x420</span>
<span class="cp">#define SMBCR		0x430</span>
<span class="cp">#define SMBDR		0x440</span>
<span class="cp">#define USBCR		0x450</span>
<span class="cp">#define AMSR		0x460</span>
<span class="cp">#define ACCR		0x470</span>
<span class="cp">#define SDIFCR		0x480</span>

<span class="cm">/* arch/sh/boards/mach-sdk7786/fpga.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="n">sdk7786_fpga_base</span><span class="p">;</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">sdk7786_fpga_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/* arch/sh/boards/mach-sdk7786/nmi.c */</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">sdk7786_nmi_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#define SDK7786_FPGA_REGADDR(reg)	(sdk7786_fpga_base + (reg))</span>

<span class="cm">/*</span>
<span class="cm"> * A convenience wrapper from register offset to internal I2C address,</span>
<span class="cm"> * when the FPGA is in I2C slave mode.</span>
<span class="cm"> */</span>
<span class="cp">#define SDK7786_FPGA_I2CADDR(reg)	((reg) &gt;&gt; 3)</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="n">u16</span> <span class="nf">fpga_read_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">ioread16</span><span class="p">(</span><span class="n">sdk7786_fpga_base</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">fpga_write_reg</span><span class="p">(</span><span class="n">u16</span> <span class="n">val</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">iowrite16</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">sdk7786_fpga_base</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* __MACH_SDK7786_FPGA_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:5}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../../javascript/docco.min.js"></script>
</html>
