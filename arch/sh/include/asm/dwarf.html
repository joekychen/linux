<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › sh › include › asm › dwarf.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>dwarf.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright (C) 2009 Matt Fleming &lt;matt@console-pimps.org&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * This file is subject to the terms and conditions of the GNU General Public</span>
<span class="cm"> * License.  See the file &quot;COPYING&quot; in the main directory of this archive</span>
<span class="cm"> * for more details.</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="cp">#ifndef __ASM_SH_DWARF_H</span>
<span class="cp">#define __ASM_SH_DWARF_H</span>

<span class="cp">#ifdef CONFIG_DWARF_UNWINDER</span>

<span class="cm">/*</span>
<span class="cm"> * DWARF expression operations</span>
<span class="cm"> */</span>
<span class="cp">#define DW_OP_addr	0x03</span>
<span class="cp">#define DW_OP_deref	0x06</span>
<span class="cp">#define DW_OP_const1u	0x08</span>
<span class="cp">#define DW_OP_const1s	0x09</span>
<span class="cp">#define DW_OP_const2u	0x0a</span>
<span class="cp">#define DW_OP_const2s	0x0b</span>
<span class="cp">#define DW_OP_const4u	0x0c</span>
<span class="cp">#define DW_OP_const4s	0x0d</span>
<span class="cp">#define DW_OP_const8u	0x0e</span>
<span class="cp">#define DW_OP_const8s	0x0f</span>
<span class="cp">#define DW_OP_constu	0x10</span>
<span class="cp">#define DW_OP_consts	0x11</span>
<span class="cp">#define DW_OP_dup	0x12</span>
<span class="cp">#define DW_OP_drop	0x13</span>
<span class="cp">#define DW_OP_over	0x14</span>
<span class="cp">#define DW_OP_pick	0x15</span>
<span class="cp">#define DW_OP_swap	0x16</span>
<span class="cp">#define DW_OP_rot	0x17</span>
<span class="cp">#define DW_OP_xderef	0x18</span>
<span class="cp">#define DW_OP_abs	0x19</span>
<span class="cp">#define DW_OP_and	0x1a</span>
<span class="cp">#define DW_OP_div	0x1b</span>
<span class="cp">#define DW_OP_minus	0x1c</span>
<span class="cp">#define DW_OP_mod	0x1d</span>
<span class="cp">#define DW_OP_mul	0x1e</span>
<span class="cp">#define DW_OP_neg	0x1f</span>
<span class="cp">#define DW_OP_not	0x20</span>
<span class="cp">#define DW_OP_or	0x21</span>
<span class="cp">#define DW_OP_plus	0x22</span>
<span class="cp">#define DW_OP_plus_uconst	0x23</span>
<span class="cp">#define DW_OP_shl	0x24</span>
<span class="cp">#define DW_OP_shr	0x25</span>
<span class="cp">#define DW_OP_shra	0x26</span>
<span class="cp">#define DW_OP_xor	0x27</span>
<span class="cp">#define DW_OP_skip	0x2f</span>
<span class="cp">#define DW_OP_bra	0x28</span>
<span class="cp">#define DW_OP_eq	0x29</span>
<span class="cp">#define DW_OP_ge	0x2a</span>
<span class="cp">#define DW_OP_gt	0x2b</span>
<span class="cp">#define DW_OP_le	0x2c</span>
<span class="cp">#define DW_OP_lt	0x2d</span>
<span class="cp">#define DW_OP_ne	0x2e</span>
<span class="cp">#define DW_OP_lit0	0x30</span>
<span class="cp">#define DW_OP_lit1	0x31</span>
<span class="cp">#define DW_OP_lit2	0x32</span>
<span class="cp">#define DW_OP_lit3	0x33</span>
<span class="cp">#define DW_OP_lit4	0x34</span>
<span class="cp">#define DW_OP_lit5	0x35</span>
<span class="cp">#define DW_OP_lit6	0x36</span>
<span class="cp">#define DW_OP_lit7	0x37</span>
<span class="cp">#define DW_OP_lit8	0x38</span>
<span class="cp">#define DW_OP_lit9	0x39</span>
<span class="cp">#define DW_OP_lit10	0x3a</span>
<span class="cp">#define DW_OP_lit11	0x3b</span>
<span class="cp">#define DW_OP_lit12	0x3c</span>
<span class="cp">#define DW_OP_lit13	0x3d</span>
<span class="cp">#define DW_OP_lit14	0x3e</span>
<span class="cp">#define DW_OP_lit15	0x3f</span>
<span class="cp">#define DW_OP_lit16	0x40</span>
<span class="cp">#define DW_OP_lit17	0x41</span>
<span class="cp">#define DW_OP_lit18	0x42</span>
<span class="cp">#define DW_OP_lit19	0x43</span>
<span class="cp">#define DW_OP_lit20	0x44</span>
<span class="cp">#define DW_OP_lit21	0x45</span>
<span class="cp">#define DW_OP_lit22	0x46</span>
<span class="cp">#define DW_OP_lit23	0x47</span>
<span class="cp">#define DW_OP_lit24	0x48</span>
<span class="cp">#define DW_OP_lit25	0x49</span>
<span class="cp">#define DW_OP_lit26	0x4a</span>
<span class="cp">#define DW_OP_lit27	0x4b</span>
<span class="cp">#define DW_OP_lit28	0x4c</span>
<span class="cp">#define DW_OP_lit29	0x4d</span>
<span class="cp">#define DW_OP_lit30	0x4e</span>
<span class="cp">#define DW_OP_lit31	0x4f</span>
<span class="cp">#define DW_OP_reg0	0x50</span>
<span class="cp">#define DW_OP_reg1	0x51</span>
<span class="cp">#define DW_OP_reg2	0x52</span>
<span class="cp">#define DW_OP_reg3	0x53</span>
<span class="cp">#define DW_OP_reg4	0x54</span>
<span class="cp">#define DW_OP_reg5	0x55</span>
<span class="cp">#define DW_OP_reg6	0x56</span>
<span class="cp">#define DW_OP_reg7	0x57</span>
<span class="cp">#define DW_OP_reg8	0x58</span>
<span class="cp">#define DW_OP_reg9	0x59</span>
<span class="cp">#define DW_OP_reg10	0x5a</span>
<span class="cp">#define DW_OP_reg11	0x5b</span>
<span class="cp">#define DW_OP_reg12	0x5c</span>
<span class="cp">#define DW_OP_reg13	0x5d</span>
<span class="cp">#define DW_OP_reg14	0x5e</span>
<span class="cp">#define DW_OP_reg15	0x5f</span>
<span class="cp">#define DW_OP_reg16	0x60</span>
<span class="cp">#define DW_OP_reg17	0x61</span>
<span class="cp">#define DW_OP_reg18	0x62</span>
<span class="cp">#define DW_OP_reg19	0x63</span>
<span class="cp">#define DW_OP_reg20	0x64</span>
<span class="cp">#define DW_OP_reg21	0x65</span>
<span class="cp">#define DW_OP_reg22	0x66</span>
<span class="cp">#define DW_OP_reg23	0x67</span>
<span class="cp">#define DW_OP_reg24	0x68</span>
<span class="cp">#define DW_OP_reg25	0x69</span>
<span class="cp">#define DW_OP_reg26	0x6a</span>
<span class="cp">#define DW_OP_reg27	0x6b</span>
<span class="cp">#define DW_OP_reg28	0x6c</span>
<span class="cp">#define DW_OP_reg29	0x6d</span>
<span class="cp">#define DW_OP_reg30	0x6e</span>
<span class="cp">#define DW_OP_reg31	0x6f</span>
<span class="cp">#define DW_OP_breg0	0x70</span>
<span class="cp">#define DW_OP_breg1	0x71</span>
<span class="cp">#define DW_OP_breg2	0x72</span>
<span class="cp">#define DW_OP_breg3	0x73</span>
<span class="cp">#define DW_OP_breg4	0x74</span>
<span class="cp">#define DW_OP_breg5	0x75</span>
<span class="cp">#define DW_OP_breg6	0x76</span>
<span class="cp">#define DW_OP_breg7	0x77</span>
<span class="cp">#define DW_OP_breg8	0x78</span>
<span class="cp">#define DW_OP_breg9	0x79</span>
<span class="cp">#define DW_OP_breg10	0x7a</span>
<span class="cp">#define DW_OP_breg11	0x7b</span>
<span class="cp">#define DW_OP_breg12	0x7c</span>
<span class="cp">#define DW_OP_breg13	0x7d</span>
<span class="cp">#define DW_OP_breg14	0x7e</span>
<span class="cp">#define DW_OP_breg15	0x7f</span>
<span class="cp">#define DW_OP_breg16	0x80</span>
<span class="cp">#define DW_OP_breg17	0x81</span>
<span class="cp">#define DW_OP_breg18	0x82</span>
<span class="cp">#define DW_OP_breg19	0x83</span>
<span class="cp">#define DW_OP_breg20	0x84</span>
<span class="cp">#define DW_OP_breg21	0x85</span>
<span class="cp">#define DW_OP_breg22	0x86</span>
<span class="cp">#define DW_OP_breg23	0x87</span>
<span class="cp">#define DW_OP_breg24	0x88</span>
<span class="cp">#define DW_OP_breg25	0x89</span>
<span class="cp">#define DW_OP_breg26	0x8a</span>
<span class="cp">#define DW_OP_breg27	0x8b</span>
<span class="cp">#define DW_OP_breg28	0x8c</span>
<span class="cp">#define DW_OP_breg29	0x8d</span>
<span class="cp">#define DW_OP_breg30	0x8e</span>
<span class="cp">#define DW_OP_breg31	0x8f</span>
<span class="cp">#define DW_OP_regx	0x90</span>
<span class="cp">#define DW_OP_fbreg	0x91</span>
<span class="cp">#define DW_OP_bregx	0x92</span>
<span class="cp">#define DW_OP_piece	0x93</span>
<span class="cp">#define DW_OP_deref_size	0x94</span>
<span class="cp">#define DW_OP_xderef_size	0x95</span>
<span class="cp">#define DW_OP_nop	0x96</span>
<span class="cp">#define DW_OP_push_object_address	0x97</span>
<span class="cp">#define DW_OP_call2	0x98</span>
<span class="cp">#define DW_OP_call4	0x99</span>
<span class="cp">#define DW_OP_call_ref	0x9a</span>
<span class="cp">#define DW_OP_form_tls_address	0x9b</span>
<span class="cp">#define DW_OP_call_frame_cfa	0x9c</span>
<span class="cp">#define DW_OP_bit_piece	0x9d</span>
<span class="cp">#define DW_OP_lo_user	0xe0</span>
<span class="cp">#define DW_OP_hi_user	0xff</span>

<span class="cm">/*</span>
<span class="cm"> * Addresses used in FDE entries in the .eh_frame section may be encoded</span>
<span class="cm"> * using one of the following encodings.</span>
<span class="cm"> */</span>
<span class="cp">#define DW_EH_PE_absptr	0x00</span>
<span class="cp">#define DW_EH_PE_omit	0xff</span>
<span class="cp">#define DW_EH_PE_uleb128	0x01</span>
<span class="cp">#define DW_EH_PE_udata2	0x02</span>
<span class="cp">#define DW_EH_PE_udata4	0x03</span>
<span class="cp">#define DW_EH_PE_udata8	0x04</span>
<span class="cp">#define DW_EH_PE_sleb128	0x09</span>
<span class="cp">#define DW_EH_PE_sdata2	0x0a</span>
<span class="cp">#define DW_EH_PE_sdata4	0x0b</span>
<span class="cp">#define DW_EH_PE_sdata8	0x0c</span>
<span class="cp">#define DW_EH_PE_signed	0x09</span>

<span class="cp">#define DW_EH_PE_pcrel	0x10</span>

<span class="cm">/*</span>
<span class="cm"> * The architecture-specific register number that contains the return</span>
<span class="cm"> * address in the .debug_frame table.</span>
<span class="cm"> */</span>
<span class="cp">#define DWARF_ARCH_RA_REG	17</span>

<span class="cp">#ifndef __ASSEMBLY__</span>

<span class="cp">#include &lt;linux/compiler.h&gt;</span>
<span class="cp">#include &lt;linux/bug.h&gt;</span>
<span class="cp">#include &lt;linux/list.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Read either the frame pointer (r14) or the stack pointer (r15).</span>
<span class="cm"> * NOTE: this MUST be inlined.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="n">__always_inline</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="nf">dwarf_read_arch_reg</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="k">switch</span> <span class="p">(</span><span class="n">reg</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="mi">14</span>:
		<span class="n">__asm__</span> <span class="n">__volatile__</span><span class="p">(</span><span class="s">&quot;mov r14, %0</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">:</span> <span class="s">&quot;=r&quot;</span> <span class="p">(</span><span class="n">value</span><span class="p">));</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="mi">15</span>:
		<span class="n">__asm__</span> <span class="n">__volatile__</span><span class="p">(</span><span class="s">&quot;mov r15, %0</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">:</span> <span class="s">&quot;=r&quot;</span> <span class="p">(</span><span class="n">value</span><span class="p">));</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="nl">default:</span>
		<span class="n">BUG</span><span class="p">();</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> *	dwarf_cie - Common Information Entry</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">dwarf_cie</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">length</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cie_id</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">version</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">augmentation</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">code_alignment_factor</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">data_alignment_factor</span><span class="p">;</span>

	<span class="cm">/* Which column in the rule table represents return addr of func. */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">return_address_reg</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">initial_instructions</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">instructions_end</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">encoding</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cie_pointer</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define DWARF_CIE_Z_AUGMENTATION	(1 &lt;&lt; 0)</span>

	<span class="cm">/* linked-list entry if this CIE is from a module */</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">link</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">rb_node</span> <span class="n">node</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> *	dwarf_fde - Frame Description Entry</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">dwarf_fde</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">length</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cie_pointer</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">dwarf_cie</span> <span class="o">*</span><span class="n">cie</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">initial_location</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">address_range</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">instructions</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">end</span><span class="p">;</span>

	<span class="cm">/* linked-list entry if this FDE is from a module */</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">link</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">rb_node</span> <span class="n">node</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> *	dwarf_frame - DWARF information for a frame in the call stack</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">dwarf_frame</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">dwarf_frame</span> <span class="o">*</span><span class="n">prev</span><span class="p">,</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">pc</span><span class="p">;</span>

	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">reg_list</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">cfa</span><span class="p">;</span>

	<span class="cm">/* Valid when DW_FRAME_CFA_REG_OFFSET is set in flags */</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfa_register</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfa_offset</span><span class="p">;</span>

	<span class="cm">/* Valid when DW_FRAME_CFA_REG_EXP is set in flags */</span>
	<span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cfa_expr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cfa_expr_len</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define DWARF_FRAME_CFA_REG_OFFSET	(1 &lt;&lt; 0)</span>
<span class="cp">#define DWARF_FRAME_CFA_REG_EXP		(1 &lt;&lt; 1)</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">return_addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> *	dwarf_reg - DWARF register</span>
<span class="cm"> *	@flags: Describes how to calculate the value of this register</span>
<span class="cm"> */</span>
<span class="k">struct</span> <span class="n">dwarf_reg</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">list_head</span> <span class="n">link</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">number</span><span class="p">;</span>

	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">addr</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">flags</span><span class="p">;</span>
<span class="cp">#define DWARF_REG_OFFSET	(1 &lt;&lt; 0)</span>
<span class="cp">#define DWARF_VAL_OFFSET	(1 &lt;&lt; 1)</span>
<span class="cp">#define DWARF_UNDEFINED		(1 &lt;&lt; 2)</span>
<span class="p">};</span>

<span class="cm">/*</span>
<span class="cm"> * Call Frame instruction opcodes.</span>
<span class="cm"> */</span>
<span class="cp">#define DW_CFA_advance_loc	0x40</span>
<span class="cp">#define DW_CFA_offset		0x80</span>
<span class="cp">#define DW_CFA_restore		0xc0</span>
<span class="cp">#define DW_CFA_nop		0x00</span>
<span class="cp">#define DW_CFA_set_loc		0x01</span>
<span class="cp">#define DW_CFA_advance_loc1	0x02</span>
<span class="cp">#define DW_CFA_advance_loc2	0x03</span>
<span class="cp">#define DW_CFA_advance_loc4	0x04</span>
<span class="cp">#define DW_CFA_offset_extended	0x05</span>
<span class="cp">#define DW_CFA_restore_extended	0x06</span>
<span class="cp">#define DW_CFA_undefined	0x07</span>
<span class="cp">#define DW_CFA_same_value	0x08</span>
<span class="cp">#define DW_CFA_register		0x09</span>
<span class="cp">#define DW_CFA_remember_state	0x0a</span>
<span class="cp">#define DW_CFA_restore_state	0x0b</span>
<span class="cp">#define DW_CFA_def_cfa		0x0c</span>
<span class="cp">#define DW_CFA_def_cfa_register	0x0d</span>
<span class="cp">#define DW_CFA_def_cfa_offset	0x0e</span>
<span class="cp">#define DW_CFA_def_cfa_expression	0x0f</span>
<span class="cp">#define DW_CFA_expression	0x10</span>
<span class="cp">#define DW_CFA_offset_extended_sf	0x11</span>
<span class="cp">#define DW_CFA_def_cfa_sf	0x12</span>
<span class="cp">#define DW_CFA_def_cfa_offset_sf	0x13</span>
<span class="cp">#define DW_CFA_val_offset	0x14</span>
<span class="cp">#define DW_CFA_val_offset_sf	0x15</span>
<span class="cp">#define DW_CFA_val_expression	0x16</span>
<span class="cp">#define DW_CFA_lo_user		0x1c</span>
<span class="cp">#define DW_CFA_hi_user		0x3f</span>

<span class="cm">/* GNU extension opcodes  */</span>
<span class="cp">#define DW_CFA_GNU_args_size	0x2e</span>
<span class="cp">#define DW_CFA_GNU_negative_offset_extended 0x2f</span>

<span class="cm">/*</span>
<span class="cm"> * Some call frame instructions encode their operands in the opcode. We</span>
<span class="cm"> * need some helper functions to extract both the opcode and operands</span>
<span class="cm"> * from an instruction.</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">DW_CFA_opcode</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">insn</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">insn</span> <span class="o">&amp;</span> <span class="mh">0xc0</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">DW_CFA_operand</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">insn</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="p">(</span><span class="n">insn</span> <span class="o">&amp;</span> <span class="mh">0x3f</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#define DW_EH_FRAME_CIE	0		</span><span class="cm">/* .eh_frame CIE IDs are 0 */</span><span class="cp"></span>
<span class="cp">#define DW_CIE_ID	0xffffffff</span>
<span class="cp">#define DW64_CIE_ID	0xffffffffffffffffULL</span>

<span class="cm">/*</span>
<span class="cm"> * DWARF FDE/CIE length field values.</span>
<span class="cm"> */</span>
<span class="cp">#define DW_EXT_LO	0xfffffff0</span>
<span class="cp">#define DW_EXT_HI	0xffffffff</span>
<span class="cp">#define DW_EXT_DWARF64	DW_EXT_HI</span>

<span class="k">extern</span> <span class="k">struct</span> <span class="n">dwarf_frame</span> <span class="o">*</span><span class="n">dwarf_unwind_stack</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span>
					      <span class="k">struct</span> <span class="n">dwarf_frame</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">dwarf_free_frame</span><span class="p">(</span><span class="k">struct</span> <span class="n">dwarf_frame</span> <span class="o">*</span><span class="p">);</span>

<span class="k">extern</span> <span class="kt">int</span> <span class="n">module_dwarf_finalize</span><span class="p">(</span><span class="k">const</span> <span class="n">Elf_Ehdr</span> <span class="o">*</span><span class="p">,</span> <span class="k">const</span> <span class="n">Elf_Shdr</span> <span class="o">*</span><span class="p">,</span>
				 <span class="k">struct</span> <span class="n">module</span> <span class="o">*</span><span class="p">);</span>
<span class="k">extern</span> <span class="kt">void</span> <span class="n">module_dwarf_cleanup</span><span class="p">(</span><span class="k">struct</span> <span class="n">module</span> <span class="o">*</span><span class="p">);</span>

<span class="cp">#endif </span><span class="cm">/* !__ASSEMBLY__ */</span><span class="cp"></span>

<span class="cp">#define CFI_STARTPROC	.cfi_startproc</span>
<span class="cp">#define CFI_ENDPROC	.cfi_endproc</span>
<span class="cp">#define CFI_DEF_CFA	.cfi_def_cfa</span>
<span class="cp">#define CFI_REGISTER	.cfi_register</span>
<span class="cp">#define CFI_REL_OFFSET	.cfi_rel_offset</span>
<span class="cp">#define CFI_UNDEFINED	.cfi_undefined</span>

<span class="cp">#else</span>

<span class="cm">/*</span>
<span class="cm"> * Use the asm comment character to ignore the rest of the line.</span>
<span class="cm"> */</span>
<span class="cp">#define CFI_IGNORE	!</span>

<span class="cp">#define CFI_STARTPROC	CFI_IGNORE</span>
<span class="cp">#define CFI_ENDPROC	CFI_IGNORE</span>
<span class="cp">#define CFI_DEF_CFA	CFI_IGNORE</span>
<span class="cp">#define CFI_REGISTER	CFI_IGNORE</span>
<span class="cp">#define CFI_REL_OFFSET	CFI_IGNORE</span>
<span class="cp">#define CFI_UNDEFINED	CFI_IGNORE</span>

<span class="cp">#ifndef __ASSEMBLY__</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">dwarf_unwinder_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="cp">#define module_dwarf_finalize(hdr, sechdrs, me)	(0)</span>
<span class="cp">#define module_dwarf_cleanup(mod)		do { } while (0)</span>

<span class="cp">#endif</span>

<span class="cp">#endif </span><span class="cm">/* CONFIG_DWARF_UNWINDER */</span><span class="cp"></span>

<span class="cp">#endif </span><span class="cm">/* __ASM_SH_DWARF_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
