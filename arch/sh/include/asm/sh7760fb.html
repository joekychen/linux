<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › sh › include › asm › sh7760fb.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>sh7760fb.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * sh7760fb.h -- platform data for SH7760/SH7763 LCDC framebuffer driver.</span>
<span class="cm"> *</span>
<span class="cm"> * (c) 2006-2008 MSC Vertriebsges.m.b.H.,</span>
<span class="cm"> * 			Manuel Lauss &lt;mano@roarinelk.homelinux.net&gt;</span>
<span class="cm"> * (c) 2008 Nobuhiro Iwamatsu &lt;iwamatsu.nobuhiro@renesas.com&gt;</span>
<span class="cm"> */</span>

<span class="cp">#ifndef _ASM_SH_SH7760FB_H</span>
<span class="cp">#define _ASM_SH_SH7760FB_H</span>

<span class="cm">/*</span>
<span class="cm"> * some bits of the colormap registers should be written as zero.</span>
<span class="cm"> * create a mask for that.</span>
<span class="cm"> */</span>
<span class="cp">#define SH7760FB_PALETTE_MASK 0x00f8fcf8</span>

<span class="cm">/* The LCDC dma engine always sets bits 27-26 to 1: this is Area3 */</span>
<span class="cp">#define SH7760FB_DMA_MASK 0x0C000000</span>

<span class="cm">/* palette */</span>
<span class="cp">#define LDPR(x) (((x) &lt;&lt; 2))</span>

<span class="cm">/* framebuffer registers and bits */</span>
<span class="cp">#define LDICKR 0x400</span>
<span class="cp">#define LDMTR 0x402</span>
<span class="cm">/* see sh7760fb.h for LDMTR bits */</span>
<span class="cp">#define LDDFR 0x404</span>
<span class="cp">#define LDDFR_PABD (1 &lt;&lt; 8)</span>
<span class="cp">#define LDDFR_COLOR_MASK 0x7F</span>
<span class="cp">#define LDSMR 0x406</span>
<span class="cp">#define LDSMR_ROT (1 &lt;&lt; 13)</span>
<span class="cp">#define LDSARU 0x408</span>
<span class="cp">#define LDSARL 0x40c</span>
<span class="cp">#define LDLAOR 0x410</span>
<span class="cp">#define LDPALCR 0x412</span>
<span class="cp">#define LDPALCR_PALS (1 &lt;&lt; 4)</span>
<span class="cp">#define LDPALCR_PALEN (1 &lt;&lt; 0)</span>
<span class="cp">#define LDHCNR 0x414</span>
<span class="cp">#define LDHSYNR 0x416</span>
<span class="cp">#define LDVDLNR 0x418</span>
<span class="cp">#define LDVTLNR 0x41a</span>
<span class="cp">#define LDVSYNR 0x41c</span>
<span class="cp">#define LDACLNR 0x41e</span>
<span class="cp">#define LDINTR 0x420</span>
<span class="cp">#define LDPMMR 0x424</span>
<span class="cp">#define LDPSPR 0x426</span>
<span class="cp">#define LDCNTR 0x428</span>
<span class="cp">#define LDCNTR_DON (1 &lt;&lt; 0)</span>
<span class="cp">#define LDCNTR_DON2 (1 &lt;&lt; 4)</span>

<span class="cp">#ifdef CONFIG_CPU_SUBTYPE_SH7763</span>
<span class="cp"># define LDLIRNR       0x440</span>
<span class="cm">/* LDINTR bit */</span>
<span class="cp"># define LDINTR_MINTEN (1 &lt;&lt; 15)</span>
<span class="cp"># define LDINTR_FINTEN (1 &lt;&lt; 14)</span>
<span class="cp"># define LDINTR_VSINTEN (1 &lt;&lt; 13)</span>
<span class="cp"># define LDINTR_VEINTEN (1 &lt;&lt; 12)</span>
<span class="cp"># define LDINTR_MINTS (1 &lt;&lt; 11)</span>
<span class="cp"># define LDINTR_FINTS (1 &lt;&lt; 10)</span>
<span class="cp"># define LDINTR_VSINTS (1 &lt;&lt; 9)</span>
<span class="cp"># define LDINTR_VEINTS (1 &lt;&lt; 8)</span>
<span class="cp"># define VINT_START (LDINTR_VSINTEN)</span>
<span class="cp"># define VINT_CHECK (LDINTR_VSINTS)</span>
<span class="cp">#else</span>
<span class="cm">/* LDINTR bit */</span>
<span class="cp"># define LDINTR_VINTSEL (1 &lt;&lt; 12)</span>
<span class="cp"># define LDINTR_VINTE (1 &lt;&lt; 8)</span>
<span class="cp"># define LDINTR_VINTS (1 &lt;&lt; 0)</span>
<span class="cp"># define VINT_START (LDINTR_VINTSEL)</span>
<span class="cp"># define VINT_CHECK (LDINTR_VINTS)</span>
<span class="cp">#endif</span>

<span class="cm">/* HSYNC polarity inversion */</span>
<span class="cp">#define LDMTR_FLMPOL (1 &lt;&lt; 15)</span>

<span class="cm">/* VSYNC polarity inversion */</span>
<span class="cp">#define LDMTR_CL1POL (1 &lt;&lt; 14)</span>

<span class="cm">/* DISPLAY-ENABLE polarity inversion */</span>
<span class="cp">#define LDMTR_DISPEN_LOWACT (1 &lt;&lt; 13)</span>

<span class="cm">/* DISPLAY DATA BUS polarity inversion */</span>
<span class="cp">#define LDMTR_DPOL_LOWACT (1 &lt;&lt; 12)</span>

<span class="cm">/* AC modulation signal enable */</span>
<span class="cp">#define LDMTR_MCNT (1 &lt;&lt; 10)</span>

<span class="cm">/* Disable output of HSYNC during VSYNC period */</span>
<span class="cp">#define LDMTR_CL1CNT (1 &lt;&lt; 9)</span>

<span class="cm">/* Disable output of VSYNC during VSYNC period */</span>
<span class="cp">#define LDMTR_CL2CNT (1 &lt;&lt; 8)</span>

<span class="cm">/* Display types supported by the LCDC */</span>
<span class="cp">#define LDMTR_STN_MONO_4       0x00</span>
<span class="cp">#define LDMTR_STN_MONO_8       0x01</span>
<span class="cp">#define LDMTR_STN_COLOR_4      0x08</span>
<span class="cp">#define LDMTR_STN_COLOR_8      0x09</span>
<span class="cp">#define LDMTR_STN_COLOR_12     0x0A</span>
<span class="cp">#define LDMTR_STN_COLOR_16     0x0B</span>
<span class="cp">#define LDMTR_DSTN_MONO_8      0x11</span>
<span class="cp">#define LDMTR_DSTN_MONO_16     0x13</span>
<span class="cp">#define LDMTR_DSTN_COLOR_8     0x19</span>
<span class="cp">#define LDMTR_DSTN_COLOR_12    0x1A</span>
<span class="cp">#define LDMTR_DSTN_COLOR_16    0x1B</span>
<span class="cp">#define LDMTR_TFT_COLOR_16     0x2B</span>

<span class="cm">/* framebuffer color layout */</span>
<span class="cp">#define LDDFR_1BPP_MONO 0x00</span>
<span class="cp">#define LDDFR_2BPP_MONO 0x01</span>
<span class="cp">#define LDDFR_4BPP_MONO 0x02</span>
<span class="cp">#define LDDFR_6BPP_MONO 0x04</span>
<span class="cp">#define LDDFR_4BPP 0x0A</span>
<span class="cp">#define LDDFR_8BPP 0x0C</span>
<span class="cp">#define LDDFR_16BPP_RGB555 0x1D</span>
<span class="cp">#define LDDFR_16BPP_RGB565 0x2D</span>

<span class="cm">/* LCDC Pixclock sources */</span>
<span class="cp">#define LCDC_CLKSRC_BUSCLOCK 0</span>
<span class="cp">#define LCDC_CLKSRC_PERIPHERAL 1</span>
<span class="cp">#define LCDC_CLKSRC_EXTERNAL 2</span>

<span class="cp">#define LDICKR_CLKSRC(x) \</span>
<span class="cp">       (((x) &amp; 3) &lt;&lt; 12)</span>

<span class="cm">/* LCDC pixclock input divider. Set to 1 at a minimum! */</span>
<span class="cp">#define LDICKR_CLKDIV(x) \</span>
<span class="cp">       ((x) &amp; 0x1f)</span>

<span class="k">struct</span> <span class="n">sh7760fb_platdata</span> <span class="p">{</span>

	<span class="cm">/* Set this member to a valid fb_videmode for the display you</span>
<span class="cm">	 * wish to use.  The following members must be initialized:</span>
<span class="cm">	 * xres, yres, hsync_len, vsync_len, sync,</span>
<span class="cm">	 * {left,right,upper,lower}_margin.</span>
<span class="cm">	 * The driver uses the above members to calculate register values</span>
<span class="cm">	 * and memory requirements. Other members are ignored but may</span>
<span class="cm">	 * be used by other framebuffer layer components.</span>
<span class="cm">	 */</span>
	<span class="k">struct</span> <span class="n">fb_videomode</span> <span class="o">*</span><span class="n">def_mode</span><span class="p">;</span>

	<span class="cm">/* LDMTR includes display type and signal polarity.  The</span>
<span class="cm">	 * HSYNC/VSYNC polarities are derived from the fb_var_screeninfo</span>
<span class="cm">	 * data above; however the polarities of the following signals</span>
<span class="cm">	 * must be encoded in the ldmtr member:</span>
<span class="cm">	 * Display Enable signal (default high-active)  DISPEN_LOWACT</span>
<span class="cm">	 * Display Data signals (default high-active)   DPOL_LOWACT</span>
<span class="cm">	 * AC Modulation signal (default off)           MCNT</span>
<span class="cm">	 * Hsync-During-Vsync suppression (default off) CL1CNT</span>
<span class="cm">	 * Vsync-during-vsync suppression (default off) CL2CNT</span>
<span class="cm">	 * NOTE: also set a display type!</span>
<span class="cm">	 * (one of LDMTR_{STN,DSTN,TFT}_{MONO,COLOR}_{4,8,12,16})</span>
<span class="cm">	 */</span>
	<span class="n">u16</span> <span class="n">ldmtr</span><span class="p">;</span>

	<span class="cm">/* LDDFR controls framebuffer image format (depth, organization)</span>
<span class="cm">	 * Use ONE of the LDDFR_?BPP_* macros!</span>
<span class="cm">	 */</span>
	<span class="n">u16</span> <span class="n">lddfr</span><span class="p">;</span>

	<span class="cm">/* LDPMMR and LDPSPR control the timing of the power signals</span>
<span class="cm">	 * for the display. Please read the SH7760 Hardware Manual,</span>
<span class="cm">	 * Chapters 30.3.17, 30.3.18 and 30.4.6!</span>
<span class="cm">	 */</span>
	<span class="n">u16</span> <span class="n">ldpmmr</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">ldpspr</span><span class="p">;</span>

	<span class="cm">/* LDACLNR contains the line numbers after which the AC modulation</span>
<span class="cm">	 * signal is to toggle. Set to ZERO for TFTs or displays which</span>
<span class="cm">	 * do not need it. (Chapter 30.3.15 in SH7760 Hardware Manual).</span>
<span class="cm">	 */</span>
	<span class="n">u16</span> <span class="n">ldaclnr</span><span class="p">;</span>

	<span class="cm">/* LDICKR contains information on pixelclock source and config.</span>
<span class="cm">	 * Please use the LDICKR_CLKSRC() and LDICKR_CLKDIV() macros.</span>
<span class="cm">	 * minimal value for CLKDIV() must be 1!.</span>
<span class="cm">	 */</span>
	<span class="n">u16</span> <span class="n">ldickr</span><span class="p">;</span>

	<span class="cm">/* set this member to 1 if you wish to use the LCDC&#39;s hardware</span>
<span class="cm">	 * rotation function.  This is limited to displays &lt;= 320x200</span>
<span class="cm">	 * pixels resolution!</span>
<span class="cm">	 */</span>
	<span class="kt">int</span> <span class="n">rotate</span><span class="p">;</span>		<span class="cm">/* set to 1 to rotate 90 CCW */</span>

	<span class="cm">/* set this to 1 to suppress vsync irq use. */</span>
	<span class="kt">int</span> <span class="n">novsync</span><span class="p">;</span>

	<span class="cm">/* blanking hook for platform. Set this if your platform can do</span>
<span class="cm">	 * more than the LCDC in terms of blanking (e.g. disable clock</span>
<span class="cm">	 * generator / backlight power supply / etc.</span>
<span class="cm">	 */</span>
	<span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">blank</span><span class="p">)</span> <span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* _ASM_SH_SH7760FB_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
