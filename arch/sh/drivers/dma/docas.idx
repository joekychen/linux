f | dma-sh.c | s | 8.8K | 339 | Paul Mundt | lethal@linux-sh.org | 1337427530 |  | sh: dma: More legacy cpu dma chainsawing.  Attempt to "tidy" up some of the multi IRQ handling and base + IRQ management. This should keep it limping along without too much hassle, and no new parts should ever be enabling or using this API anyways.  It doesn't get any closer to lipstick on a pig as this.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | dmabrg.c | s | 5.2K | 171 | Julia Lawall | Julia.Lawall@lip6.fr | 1331792083 |  | arch/sh/drivers/dma/{dma-g2,dmabrg}.c: ensure arguments to request_irq and free_irq are compatible  Convert calls to free_irq so that the second argument is the same as the last argument of the corresponding call to request_irq.  Without this property, free_irq does nothing.  In the case of dmabrg.c the change is merely cosmetic - changing 0 to NULL.  Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | dma-api.c | s | 9.1K | 330 | Kulikov Vasiliy | segooon@gmail.com | 1280905828 |  | sh: dma: check return value of create_proc_read_entry()  create_proc_read_entry() may fail, if so return -ENOMEM.  Signed-off-by: Kulikov Vasiliy <segooon@gmail.com> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | Makefile | g | 251B |  | Nobuhiro Iwamatsu | iwamatsu.nobuhiro@renesas.com | 1252457762 |  | dmaengine: sh: Add Support SuperH DMA Engine driver  This supported all DMA channels, and it was tested in SH7722, SH7780, SH7785 and SH7763. This can not use with SH DMA API.  Signed-off-by: Nobuhiro Iwamatsu <iwamatsu.nobuhiro@renesas.com> Reviewed-by: Matt Fleming <matt@console-pimps.org> Acked-by: Maciej Sosnowski <maciej.sosnowski@intel.com> Acked-by: Paul Mundt <lethal@linux-sh.org> Signed-off-by: Dan Williams <dan.j.williams@intel.com>
f | dma-sysfs.c | s | 4.2K | 135 | Paul Mundt | lethal@linux-sh.org | 1337421009 |  | sh: Kill off MAX_DMA_ADDRESS leftovers.  We don't support the ISA DMA API, so this is only ever misused. The dma-sh case inadvertently broke the dreamcast case by testing the wrong variable for the total number of channels, so this fixes that up too.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | dma-g2.c | s | 4.7K | 159 | Julia Lawall | Julia.Lawall@lip6.fr | 1331792083 |  | arch/sh/drivers/dma/{dma-g2,dmabrg}.c: ensure arguments to request_irq and free_irq are compatible  Convert calls to free_irq so that the second argument is the same as the last argument of the corresponding call to request_irq.  Without this property, free_irq does nothing.  In the case of dmabrg.c the change is merely cosmetic - changing 0 to NULL.  Signed-off-by: Julia Lawall <Julia.Lawall@lip6.fr> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | dma-pvr2.c | s | 2.4K | 87 | Yong Zhang | yong.zhang0@gmail.com | 1319780368 |  | SH: irq: Remove IRQF_DISABLED  Since commit [e58aa3d2: genirq: Run irq handlers with interrupts disabled], We run all interrupt handlers with interrupts disabled and we even check and yell when an interrupt handler returns with interrupts enabled (see commit [b738a50a: genirq: Warn when handler enables interrupts]).  So now this flag is a NOOP and can be removed.  Signed-off-by: Yong Zhang <yong.zhang0@gmail.com> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | Kconfig | g | 2.2K |  | Paul Mundt | lethal@linux-sh.org | 1337421009 |  | sh: Kill off MAX_DMA_ADDRESS leftovers.  We don't support the ISA DMA API, so this is only ever misused. The dma-sh case inadvertently broke the dreamcast case by testing the wrong variable for the total number of channels, so this fixes that up too.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
