<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › sh › drivers › pci › pci-sh4.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>pci-sh4.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef __PCI_SH4_H</span>
<span class="cp">#define __PCI_SH4_H</span>

<span class="cp">#if defined(CONFIG_CPU_SUBTYPE_SH7780) || \</span>
<span class="cp">    defined(CONFIG_CPU_SUBTYPE_SH7785) || \</span>
<span class="cp">    defined(CONFIG_CPU_SUBTYPE_SH7763)</span>
<span class="cp">#include &quot;pci-sh7780.h&quot;</span>
<span class="cp">#else</span>
<span class="cp">#include &quot;pci-sh7751.h&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#include &lt;asm/io.h&gt;</span>

<span class="cm">/* startup values */</span>
<span class="cp">#define PCI_PROBE_BIOS		1</span>
<span class="cp">#define PCI_PROBE_CONF1		2</span>
<span class="cp">#define PCI_PROBE_CONF2		4</span>
<span class="cp">#define PCI_NO_CHECKS		0x400</span>
<span class="cp">#define PCI_ASSIGN_ROMS		0x1000</span>
<span class="cp">#define PCI_BIOS_IRQ_SCAN	0x2000</span>

<span class="cp">#define SH4_PCICR		0x100		</span><span class="cm">/* PCI Control Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_PREFIX	  0xA5000000	</span><span class="cm">/* CR prefix for write */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_FTO		  0x00000400	</span><span class="cm">/* TRDY/IRDY Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_TRSB	  0x00000200	</span><span class="cm">/* Target Read Single */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_BSWP	  0x00000100	</span><span class="cm">/* Target Byte Swap */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_PLUP	  0x00000080	</span><span class="cm">/* Enable PCI Pullup */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_ARBM	  0x00000040	</span><span class="cm">/* PCI Arbitration Mode */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_MD		  0x00000030	</span><span class="cm">/* MD9 and MD10 status */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_SERR	  0x00000008	</span><span class="cm">/* SERR output assert */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_INTA	  0x00000004	</span><span class="cm">/* INTA output assert */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_PRST	  0x00000002	</span><span class="cm">/* PCI Reset Assert */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICR_CFIN	  0x00000001	</span><span class="cm">/* Central Fun. Init Done */</span><span class="cp"></span>
<span class="cp">#define SH4_PCILSR0		0x104		</span><span class="cm">/* PCI Local Space Register0 */</span><span class="cp"></span>
<span class="cp">#define SH4_PCILSR1		0x108		</span><span class="cm">/* PCI Local Space Register1 */</span><span class="cp"></span>
<span class="cp">#define SH4_PCILAR0		0x10C		</span><span class="cm">/* PCI Local Addr Register1 */</span><span class="cp"></span>
<span class="cp">#define SH4_PCILAR1		0x110		</span><span class="cm">/* PCI Local Addr Register1 */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIINT		0x114		</span><span class="cm">/* PCI Interrupt Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_MLCK	  0x00008000	</span><span class="cm">/* Master Lock Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_TABT	  0x00004000	</span><span class="cm">/* Target Abort Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_TRET	  0x00000200	</span><span class="cm">/* Target Retry Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_MFDE	  0x00000100	</span><span class="cm">/* Master Func. Disable Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_PRTY	  0x00000080	</span><span class="cm">/* Address Parity Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_SERR	  0x00000040	</span><span class="cm">/* SERR Detection Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_TWDP	  0x00000020	</span><span class="cm">/* Tgt. Write Parity Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_TRDP	  0x00000010	</span><span class="cm">/* Tgt. Read Parity Err Det. */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_MTABT	  0x00000008	</span><span class="cm">/* Master-Tgt. Abort Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_MMABT	  0x00000004	</span><span class="cm">/* Master-Master Abort Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_MWPD	  0x00000002	</span><span class="cm">/* Master Write PERR Detect */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINT_MRPD	  0x00000001	</span><span class="cm">/* Master Read PERR Detect */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIINTM		0x118		</span><span class="cm">/* PCI Interrupt Mask */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_TTADIM	  BIT(14)	</span><span class="cm">/* Target-target abort interrupt */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_TMTOIM	  BIT(9)	</span><span class="cm">/* Target retry timeout */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_MDEIM	  BIT(8)	</span><span class="cm">/* Master function disable error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_APEDIM	  BIT(7)	</span><span class="cm">/* Address parity error detection */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_SDIM	  BIT(6)	</span><span class="cm">/* SERR detection */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_DPEITWM	  BIT(5)	</span><span class="cm">/* Data parity error for target write */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_PEDITRM	  BIT(4)	</span><span class="cm">/* PERR detection for target read */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_TADIMM	  BIT(3)	</span><span class="cm">/* Target abort for master */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_MADIMM	  BIT(2)	</span><span class="cm">/* Master abort for master */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_MWPDIM	  BIT(1)	</span><span class="cm">/* Master write data parity error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIINTM_MRDPEIM	  BIT(0)	</span><span class="cm">/* Master read data parity error */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIALR		0x11C		</span><span class="cm">/* Error Address Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCICLR		0x120		</span><span class="cm">/* Error Command/Data */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLR_MPIO	  0x80000000</span>
  <span class="cp">#define SH4_PCICLR_MDMA0	  0x40000000	</span><span class="cm">/* DMA0 Transfer Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLR_MDMA1	  0x20000000	</span><span class="cm">/* DMA1 Transfer Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLR_MDMA2	  0x10000000	</span><span class="cm">/* DMA2 Transfer Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLR_MDMA3	  0x08000000	</span><span class="cm">/* DMA3 Transfer Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLR_TGT	  0x04000000	</span><span class="cm">/* Target Transfer Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLR_CMDL	  0x0000000F	</span><span class="cm">/* PCI Command at Error */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIAINT		0x130		</span><span class="cm">/* Arbiter Interrupt Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_MBKN	  0x00002000	</span><span class="cm">/* Master Broken Interrupt */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_TBTO	  0x00001000	</span><span class="cm">/* Target Bus Time Out */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_MBTO	  0x00000800	</span><span class="cm">/* Master Bus Time Out */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_TABT	  0x00000008	</span><span class="cm">/* Target Abort */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_MABT	  0x00000004	</span><span class="cm">/* Master Abort */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_RDPE	  0x00000002	</span><span class="cm">/* Read Data Parity Error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIAINT_WDPE	  0x00000001	</span><span class="cm">/* Write Data Parity Error */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIAINTM            0x134		</span><span class="cm">/* Arbiter Int. Mask Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIBMLR		0x138		</span><span class="cm">/* Error Bus Master Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIBMLR_REQ4	  0x00000010	</span><span class="cm">/* REQ4 bus master at error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIBMLR_REQ3	  0x00000008	</span><span class="cm">/* REQ3 bus master at error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIBMLR_REQ2	  0x00000004	</span><span class="cm">/* REQ2 bus master at error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIBMLR_REQ1	  0x00000002	</span><span class="cm">/* REQ1 bus master at error */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIBMLR_REQ0	  0x00000001	</span><span class="cm">/* REQ0 bus master at error */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDMABT		0x140		</span><span class="cm">/* DMA Transfer Arb. Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDMABT_RRBN	  0x00000001	</span><span class="cm">/* DMA Arbitor Round-Robin */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDPA0		0x180		</span><span class="cm">/* DMA0 Transfer Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDLA0		0x184		</span><span class="cm">/* DMA0 Local Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDTC0		0x188		</span><span class="cm">/* DMA0 Transfer Cnt. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDCR0		0x18C		</span><span class="cm">/* DMA0 Control Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_ALGN	  0x00000600	</span><span class="cm">/* DMA Alignment Mode */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_MAST	  0x00000100	</span><span class="cm">/* DMA Termination Type */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_INTM	  0x00000080	</span><span class="cm">/* DMA Interrupt Done Mask*/</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_INTS	  0x00000040	</span><span class="cm">/* DMA Interrupt Done Status */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_LHLD	  0x00000020	</span><span class="cm">/* Local Address Control */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_PHLD	  0x00000010	</span><span class="cm">/* PCI Address Control*/</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_IOSEL	  0x00000008	</span><span class="cm">/* PCI Address Space Type */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_DIR	  0x00000004	</span><span class="cm">/* DMA Transfer Direction */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_STOP	  0x00000002	</span><span class="cm">/* Force DMA Stop */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIDCR_STRT	  0x00000001	</span><span class="cm">/* DMA Start */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDPA1		0x190		</span><span class="cm">/* DMA1 Transfer Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDLA1		0x194		</span><span class="cm">/* DMA1 Local Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDTC1		0x198		</span><span class="cm">/* DMA1 Transfer Cnt. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDCR1		0x19C		</span><span class="cm">/* DMA1 Control Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDPA2		0x1A0		</span><span class="cm">/* DMA2 Transfer Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDLA2		0x1A4		</span><span class="cm">/* DMA2 Local Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDTC2		0x1A8		</span><span class="cm">/* DMA2 Transfer Cnt. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDCR2		0x1AC		</span><span class="cm">/* DMA2 Control Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDPA3		0x1B0		</span><span class="cm">/* DMA3 Transfer Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDLA3		0x1B4		</span><span class="cm">/* DMA3 Local Addr. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDTC3		0x1B8		</span><span class="cm">/* DMA3 Transfer Cnt. */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIDCR3		0x1BC		</span><span class="cm">/* DMA3 Control Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIPAR		0x1C0		</span><span class="cm">/* PIO Address Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPAR_CFGEN	  0x80000000	</span><span class="cm">/* Configuration Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPAR_BUSNO	  0x00FF0000	</span><span class="cm">/* Config. Bus Number */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPAR_DEVNO	  0x0000FF00	</span><span class="cm">/* Config. Device Number */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPAR_REGAD	  0x000000FC	</span><span class="cm">/* Register Address Number */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIMBR		0x1C4		</span><span class="cm">/* Memory Base Address */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIMBR_MASK	  0xFF000000	</span><span class="cm">/* Memory Space Mask */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIMBR_LOCK	  0x00000001	</span><span class="cm">/* Lock Memory Space */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIIOBR		0x1C8		</span><span class="cm">/* I/O Base Address Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIIOBR_MASK	  0xFFFC0000	</span><span class="cm">/* IO Space Mask */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIIOBR_LOCK	  0x00000001	</span><span class="cm">/* Lock IO Space */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIPINT		0x1CC		</span><span class="cm">/* Power Mgmnt Int. Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPINT_D3	  0x00000002	</span><span class="cm">/* D3 Pwr Mgmt. Interrupt */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPINT_D0	  0x00000001	</span><span class="cm">/* D0 Pwr Mgmt. Interrupt */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIPINTM		0x1D0		</span><span class="cm">/* Power Mgmnt Mask Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCICLKR		0x1D4		</span><span class="cm">/* Clock Ctrl. Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLKR_PCSTP	  0x00000002	</span><span class="cm">/* PCI Clock Stop */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCICLKR_BCSTP	  0x00000001	</span><span class="cm">/* BCLK Clock Stop */</span><span class="cp"></span>
<span class="cm">/* For definitions of BCR, MCR see ... */</span>
<span class="cp">#define SH4_PCIBCR1		0x1E0		</span><span class="cm">/* Memory BCR1 Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIMBR0		SH4_PCIBCR1</span>
<span class="cp">#define SH4_PCIBCR2		0x1E4		</span><span class="cm">/* Memory BCR2 Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIMBMR0		SH4_PCIBCR2</span>
<span class="cp">#define SH4_PCIWCR1		0x1E8		</span><span class="cm">/* Wait Control 1 Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIWCR2		0x1EC		</span><span class="cm">/* Wait Control 2 Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIWCR3		0x1F0		</span><span class="cm">/* Wait Control 3 Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIMBR2		SH4_PCIWCR3</span>
<span class="cp">#define SH4_PCIMCR		0x1F4		</span><span class="cm">/* Memory Control Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIBCR3		0x1f8		</span><span class="cm">/* Memory BCR3 Register */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIPCTR             0x200		</span><span class="cm">/* Port Control Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P2EN	  0x000400000	</span><span class="cm">/* Port 2 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P1EN	  0x000200000	</span><span class="cm">/* Port 1 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P0EN	  0x000100000	</span><span class="cm">/* Port 0 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P2UP	  0x000000020	</span><span class="cm">/* Port2 Pull Up Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P2IO	  0x000000010	</span><span class="cm">/* Port2 Output Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P1UP	  0x000000008	</span><span class="cm">/* Port1 Pull Up Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P1IO	  0x000000004	</span><span class="cm">/* Port1 Output Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P0UP	  0x000000002	</span><span class="cm">/* Port0 Pull Up Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPCTR_P0IO	  0x000000001	</span><span class="cm">/* Port0 Output Enable */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIPDTR		0x204		</span><span class="cm">/* Port Data Register */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPDTR_PB5	  0x000000020	</span><span class="cm">/* Port 5 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPDTR_PB4	  0x000000010	</span><span class="cm">/* Port 4 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPDTR_PB3	  0x000000008	</span><span class="cm">/* Port 3 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPDTR_PB2	  0x000000004	</span><span class="cm">/* Port 2 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPDTR_PB1	  0x000000002	</span><span class="cm">/* Port 1 Enable */</span><span class="cp"></span>
  <span class="cp">#define SH4_PCIPDTR_PB0	  0x000000001	</span><span class="cm">/* Port 0 Enable */</span><span class="cp"></span>
<span class="cp">#define SH4_PCIPDR		0x220		</span><span class="cm">/* Port IO Data Register */</span><span class="cp"></span>

<span class="cm">/* arch/sh/kernel/drivers/pci/ops-sh4.c */</span>
<span class="k">extern</span> <span class="k">struct</span> <span class="n">pci_ops</span> <span class="n">sh4_pci_ops</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">pci_fixup_pcic</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">sh4_pci_address_space</span> <span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">base</span><span class="p">;</span>
	<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">size</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">sh4_pci_address_map</span> <span class="p">{</span>
	<span class="k">struct</span> <span class="n">sh4_pci_address_space</span> <span class="n">window0</span><span class="p">;</span>
	<span class="k">struct</span> <span class="n">sh4_pci_address_space</span> <span class="n">window1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">pci_write_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span>
				 <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">val</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">__raw_writel</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">chan</span><span class="o">-&gt;</span><span class="n">reg_base</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kr">inline</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="nf">pci_read_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">pci_channel</span> <span class="o">*</span><span class="n">chan</span><span class="p">,</span>
					 <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">__raw_readl</span><span class="p">(</span><span class="n">chan</span><span class="o">-&gt;</span><span class="n">reg_base</span> <span class="o">+</span> <span class="n">reg</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif </span><span class="cm">/* __PCI_SH4_H */</span><span class="cp"></span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
