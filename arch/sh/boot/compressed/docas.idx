f | Makefile | g | 2.2K |  | Paul Mundt | lethal@linux-sh.org | 1307350678 |  | sh: Remove compressed kernel libgcc dependency.  SH-2A is unable to combine the kernel and libgcc objects due to fundamental disagreements over FDPIC settings. As the kernel already contains all of the libgcc bits broken out, there's not much need to bother with the linking anymore, as everything can already be derived from the lib dir.  This simply plugs in the necessary bits to ensure that everything is built uniformly, enabling us to wean the compressed build off of explicit libgcc linking.  Reported-by: Phil Edworthy <phil.edworthy@renesas.com> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | misc.c | s | 2.6K | 110 | Paul Mundt | lethal@linux-sh.org | 1294987974 |  | sh: support XZ-compressed kernel.  Follow the x86 change and wire up support for the XZ decompressor.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | vmlinux.scr | g | 161B |  | Denys Vlasenko | vda.linux@googlemail.com | 1267611960 |  | Rename .rodata.compressed to .rodata..compressed.  Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com> Signed-off-by: Michal Marek <mmarek@suse.cz>
f | install.sh | s | 1.3K | 49 | Sam Ravnborg | sam@ravnborg.org | 1253441894 |  | kbuild: use INSTALLKERNEL to select customized installkernel script  Replace the use of CROSS_COMPILE to select a customized installkernel script with the possibility to set INSTALLKERNEL to select a custom installkernel script when running make:      make INSTALLKERNEL=arm-installkernel install  With this patch we are now more consistent across different architectures - they did not all support use of CROSS_COMPILE.  The use of CROSS_COMPILE was a hack as this really belongs to gcc/binutils and the installkernel script does not change just because we change toolchain.  The use of CROSS_COMPILE caused troubles with an upcoming patch that saves CROSS_COMPILE when a kernel is built - it would no longer be installable. [Thanks to Peter Z. for this hint]  This patch undos what Ian did in commit:    0f8e2d62fa04441cd12c08ce521e84e5bd3f8a46   ("use ${CROSS_COMPILE}installkernel in arch/*/boot/install.sh")  The patch has been lightly tested on x86 only - but all changes looks obvious.  Acked-by: Peter Zijlstra <peterz@infradead.org> Acked-by: Mike Frysinger <vapier@gentoo.org> [blackfin] Acked-by: Russell King <linux@arm.linux.org.uk> [arm] Acked-by: Paul Mundt <lethal@linux-sh.org> [sh] Acked-by: "H. Peter Anvin" <hpa@zytor.com> [x86] Cc: Ian Campbell <icampbell@arcom.com> Cc: Tony Luck <tony.luck@intel.com> [ia64] Cc: Fenghua Yu <fenghua.yu@intel.com> [ia64] Cc: Hirokazu Takata <takata@linux-m32r.org> [m32r] Cc: Geert Uytterhoeven <geert@linux-m68k.org> [m68k] Cc: Kyle McMartin <kyle@mcmartin.ca> [parisc] Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org> [powerpc] Cc: Martin Schwidefsky <schwidefsky@de.ibm.com> [s390] Cc: Thomas Gleixner <tglx@linutronix.de> [x86] Cc: Ingo Molnar <mingo@redhat.com> [x86] Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
f | head_32.S | g | 2.3K |  | Magnus Damm | damm@opensource.se | 1285807412 |  | sh: boot kernel with SR.BL set  Update the SH kernel to keep SR.BL set until the VBR register has been initialized. Useful to allow boot of the kernel even though exceptions are pending.  Without this patch there is a window of time when exceptions such as NMI are enabled but no exception handlers are installed.  This patch modifies both the zImage loader and the actual kernel to boot with BL=1, but the zImage loader is modfied in such a way that the init_sr value is unchanged to not break the zImage loader provided by kexec.  Tested on sh7724 Ecovec and on the SH4AL-DSP core included in sh7372.  Signed-off-by: Magnus Damm <damm@opensource.se> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | head_64.S | g | 3.9K |  | Paul Mundt | lethal@linux-sh.org | 1241883382 |  | sh: Fix up the sh64 zImage build.  Signed-off-by: Paul Mundt <lethal@linux-sh.org>
f | cache.c | s | 214B | 10 | Andrea Gelmini | andrea.gelmini@gelma.net | 1267412251 |  | arch/sh/boot/compressed/cache.c: Checkpatch cleanup  arch/sh/boot/compressed/cache.c:8: WARNING: space prohibited between function name and open parenthesis '('  Signed-off-by: Andrea Gelmini <andrea.gelmini@gelma.net> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
