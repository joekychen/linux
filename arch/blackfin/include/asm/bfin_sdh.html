<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › blackfin › include › asm › bfin_sdh.h

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>bfin_sdh.h</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Blackfin Secure Digital Host (SDH) definitions</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright 2008-2010 Analog Devices Inc.</span>
<span class="cm"> *</span>
<span class="cm"> * Licensed under the GPL-2 or later.</span>
<span class="cm"> */</span>

<span class="cp">#ifndef __BFIN_SDH_H__</span>
<span class="cp">#define __BFIN_SDH_H__</span>

<span class="cm">/* Platform resources */</span>
<span class="k">struct</span> <span class="n">bfin_sd_host</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">dma_chan</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">irq_int0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">irq_int1</span><span class="p">;</span>
	<span class="n">u16</span> <span class="n">pin_req</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
<span class="p">};</span>

<span class="cm">/* SDH_COMMAND bitmasks */</span>
<span class="cp">#define CMD_IDX            0x3f        </span><span class="cm">/* Command Index */</span><span class="cp"></span>
<span class="cp">#define CMD_RSP            (1 &lt;&lt; 6)    </span><span class="cm">/* Response */</span><span class="cp"></span>
<span class="cp">#define CMD_L_RSP          (1 &lt;&lt; 7)    </span><span class="cm">/* Long Response */</span><span class="cp"></span>
<span class="cp">#define CMD_INT_E          (1 &lt;&lt; 8)    </span><span class="cm">/* Command Interrupt */</span><span class="cp"></span>
<span class="cp">#define CMD_PEND_E         (1 &lt;&lt; 9)    </span><span class="cm">/* Command Pending */</span><span class="cp"></span>
<span class="cp">#define CMD_E              (1 &lt;&lt; 10)   </span><span class="cm">/* Command Enable */</span><span class="cp"></span>

<span class="cm">/* SDH_PWR_CTL bitmasks */</span>
<span class="cp">#define PWR_ON             0x3         </span><span class="cm">/* Power On */</span><span class="cp"></span>
<span class="cp">#define SD_CMD_OD          (1 &lt;&lt; 6)    </span><span class="cm">/* Open Drain Output */</span><span class="cp"></span>
<span class="cp">#define ROD_CTL            (1 &lt;&lt; 7)    </span><span class="cm">/* Rod Control */</span><span class="cp"></span>

<span class="cm">/* SDH_CLK_CTL bitmasks */</span>
<span class="cp">#define CLKDIV             0xff        </span><span class="cm">/* MC_CLK Divisor */</span><span class="cp"></span>
<span class="cp">#define CLK_E              (1 &lt;&lt; 8)    </span><span class="cm">/* MC_CLK Bus Clock Enable */</span><span class="cp"></span>
<span class="cp">#define PWR_SV_E           (1 &lt;&lt; 9)    </span><span class="cm">/* Power Save Enable */</span><span class="cp"></span>
<span class="cp">#define CLKDIV_BYPASS      (1 &lt;&lt; 10)   </span><span class="cm">/* Bypass Divisor */</span><span class="cp"></span>
<span class="cp">#define WIDE_BUS           (1 &lt;&lt; 11)   </span><span class="cm">/* Wide Bus Mode Enable */</span><span class="cp"></span>

<span class="cm">/* SDH_RESP_CMD bitmasks */</span>
<span class="cp">#define RESP_CMD           0x3f        </span><span class="cm">/* Response Command */</span><span class="cp"></span>

<span class="cm">/* SDH_DATA_CTL bitmasks */</span>
<span class="cp">#define DTX_E              (1 &lt;&lt; 0)    </span><span class="cm">/* Data Transfer Enable */</span><span class="cp"></span>
<span class="cp">#define DTX_DIR            (1 &lt;&lt; 1)    </span><span class="cm">/* Data Transfer Direction */</span><span class="cp"></span>
<span class="cp">#define DTX_MODE           (1 &lt;&lt; 2)    </span><span class="cm">/* Data Transfer Mode */</span><span class="cp"></span>
<span class="cp">#define DTX_DMA_E          (1 &lt;&lt; 3)    </span><span class="cm">/* Data Transfer DMA Enable */</span><span class="cp"></span>
<span class="cp">#define DTX_BLK_LGTH       (0xf &lt;&lt; 4)  </span><span class="cm">/* Data Transfer Block Length */</span><span class="cp"></span>

<span class="cm">/* SDH_STATUS bitmasks */</span>
<span class="cp">#define CMD_CRC_FAIL       (1 &lt;&lt; 0)    </span><span class="cm">/* CMD CRC Fail */</span><span class="cp"></span>
<span class="cp">#define DAT_CRC_FAIL       (1 &lt;&lt; 1)    </span><span class="cm">/* Data CRC Fail */</span><span class="cp"></span>
<span class="cp">#define CMD_TIME_OUT       (1 &lt;&lt; 2)    </span><span class="cm">/* CMD Time Out */</span><span class="cp"></span>
<span class="cp">#define DAT_TIME_OUT       (1 &lt;&lt; 3)    </span><span class="cm">/* Data Time Out */</span><span class="cp"></span>
<span class="cp">#define TX_UNDERRUN        (1 &lt;&lt; 4)    </span><span class="cm">/* Transmit Underrun */</span><span class="cp"></span>
<span class="cp">#define RX_OVERRUN         (1 &lt;&lt; 5)    </span><span class="cm">/* Receive Overrun */</span><span class="cp"></span>
<span class="cp">#define CMD_RESP_END       (1 &lt;&lt; 6)    </span><span class="cm">/* CMD Response End */</span><span class="cp"></span>
<span class="cp">#define CMD_SENT           (1 &lt;&lt; 7)    </span><span class="cm">/* CMD Sent */</span><span class="cp"></span>
<span class="cp">#define DAT_END            (1 &lt;&lt; 8)    </span><span class="cm">/* Data End */</span><span class="cp"></span>
<span class="cp">#define START_BIT_ERR      (1 &lt;&lt; 9)    </span><span class="cm">/* Start Bit Error */</span><span class="cp"></span>
<span class="cp">#define DAT_BLK_END        (1 &lt;&lt; 10)   </span><span class="cm">/* Data Block End */</span><span class="cp"></span>
<span class="cp">#define CMD_ACT            (1 &lt;&lt; 11)   </span><span class="cm">/* CMD Active */</span><span class="cp"></span>
<span class="cp">#define TX_ACT             (1 &lt;&lt; 12)   </span><span class="cm">/* Transmit Active */</span><span class="cp"></span>
<span class="cp">#define RX_ACT             (1 &lt;&lt; 13)   </span><span class="cm">/* Receive Active */</span><span class="cp"></span>
<span class="cp">#define TX_FIFO_STAT       (1 &lt;&lt; 14)   </span><span class="cm">/* Transmit FIFO Status */</span><span class="cp"></span>
<span class="cp">#define RX_FIFO_STAT       (1 &lt;&lt; 15)   </span><span class="cm">/* Receive FIFO Status */</span><span class="cp"></span>
<span class="cp">#define TX_FIFO_FULL       (1 &lt;&lt; 16)   </span><span class="cm">/* Transmit FIFO Full */</span><span class="cp"></span>
<span class="cp">#define RX_FIFO_FULL       (1 &lt;&lt; 17)   </span><span class="cm">/* Receive FIFO Full */</span><span class="cp"></span>
<span class="cp">#define TX_FIFO_ZERO       (1 &lt;&lt; 18)   </span><span class="cm">/* Transmit FIFO Empty */</span><span class="cp"></span>
<span class="cp">#define RX_DAT_ZERO        (1 &lt;&lt; 19)   </span><span class="cm">/* Receive FIFO Empty */</span><span class="cp"></span>
<span class="cp">#define TX_DAT_RDY         (1 &lt;&lt; 20)   </span><span class="cm">/* Transmit Data Available */</span><span class="cp"></span>
<span class="cp">#define RX_FIFO_RDY        (1 &lt;&lt; 21)   </span><span class="cm">/* Receive Data Available */</span><span class="cp"></span>

<span class="cm">/* SDH_STATUS_CLR bitmasks */</span>
<span class="cp">#define CMD_CRC_FAIL_STAT  (1 &lt;&lt; 0)    </span><span class="cm">/* CMD CRC Fail Status */</span><span class="cp"></span>
<span class="cp">#define DAT_CRC_FAIL_STAT  (1 &lt;&lt; 1)    </span><span class="cm">/* Data CRC Fail Status */</span><span class="cp"></span>
<span class="cp">#define CMD_TIMEOUT_STAT   (1 &lt;&lt; 2)    </span><span class="cm">/* CMD Time Out Status */</span><span class="cp"></span>
<span class="cp">#define DAT_TIMEOUT_STAT   (1 &lt;&lt; 3)    </span><span class="cm">/* Data Time Out status */</span><span class="cp"></span>
<span class="cp">#define TX_UNDERRUN_STAT   (1 &lt;&lt; 4)    </span><span class="cm">/* Transmit Underrun Status */</span><span class="cp"></span>
<span class="cp">#define RX_OVERRUN_STAT    (1 &lt;&lt; 5)    </span><span class="cm">/* Receive Overrun Status */</span><span class="cp"></span>
<span class="cp">#define CMD_RESP_END_STAT  (1 &lt;&lt; 6)    </span><span class="cm">/* CMD Response End Status */</span><span class="cp"></span>
<span class="cp">#define CMD_SENT_STAT      (1 &lt;&lt; 7)    </span><span class="cm">/* CMD Sent Status */</span><span class="cp"></span>
<span class="cp">#define DAT_END_STAT       (1 &lt;&lt; 8)    </span><span class="cm">/* Data End Status */</span><span class="cp"></span>
<span class="cp">#define START_BIT_ERR_STAT (1 &lt;&lt; 9)    </span><span class="cm">/* Start Bit Error Status */</span><span class="cp"></span>
<span class="cp">#define DAT_BLK_END_STAT   (1 &lt;&lt; 10)   </span><span class="cm">/* Data Block End Status */</span><span class="cp"></span>

<span class="cm">/* SDH_MASK0 bitmasks */</span>
<span class="cp">#define CMD_CRC_FAIL_MASK  (1 &lt;&lt; 0)    </span><span class="cm">/* CMD CRC Fail Mask */</span><span class="cp"></span>
<span class="cp">#define DAT_CRC_FAIL_MASK  (1 &lt;&lt; 1)    </span><span class="cm">/* Data CRC Fail Mask */</span><span class="cp"></span>
<span class="cp">#define CMD_TIMEOUT_MASK   (1 &lt;&lt; 2)    </span><span class="cm">/* CMD Time Out Mask */</span><span class="cp"></span>
<span class="cp">#define DAT_TIMEOUT_MASK   (1 &lt;&lt; 3)    </span><span class="cm">/* Data Time Out Mask */</span><span class="cp"></span>
<span class="cp">#define TX_UNDERRUN_MASK   (1 &lt;&lt; 4)    </span><span class="cm">/* Transmit Underrun Mask */</span><span class="cp"></span>
<span class="cp">#define RX_OVERRUN_MASK    (1 &lt;&lt; 5)    </span><span class="cm">/* Receive Overrun Mask */</span><span class="cp"></span>
<span class="cp">#define CMD_RESP_END_MASK  (1 &lt;&lt; 6)    </span><span class="cm">/* CMD Response End Mask */</span><span class="cp"></span>
<span class="cp">#define CMD_SENT_MASK      (1 &lt;&lt; 7)    </span><span class="cm">/* CMD Sent Mask */</span><span class="cp"></span>
<span class="cp">#define DAT_END_MASK       (1 &lt;&lt; 8)    </span><span class="cm">/* Data End Mask */</span><span class="cp"></span>
<span class="cp">#define START_BIT_ERR_MASK (1 &lt;&lt; 9)    </span><span class="cm">/* Start Bit Error Mask */</span><span class="cp"></span>
<span class="cp">#define DAT_BLK_END_MASK   (1 &lt;&lt; 10)   </span><span class="cm">/* Data Block End Mask */</span><span class="cp"></span>
<span class="cp">#define CMD_ACT_MASK       (1 &lt;&lt; 11)   </span><span class="cm">/* CMD Active Mask */</span><span class="cp"></span>
<span class="cp">#define TX_ACT_MASK        (1 &lt;&lt; 12)   </span><span class="cm">/* Transmit Active Mask */</span><span class="cp"></span>
<span class="cp">#define RX_ACT_MASK        (1 &lt;&lt; 13)   </span><span class="cm">/* Receive Active Mask */</span><span class="cp"></span>
<span class="cp">#define TX_FIFO_STAT_MASK  (1 &lt;&lt; 14)   </span><span class="cm">/* Transmit FIFO Status Mask */</span><span class="cp"></span>
<span class="cp">#define RX_FIFO_STAT_MASK  (1 &lt;&lt; 15)   </span><span class="cm">/* Receive FIFO Status Mask */</span><span class="cp"></span>
<span class="cp">#define TX_FIFO_FULL_MASK  (1 &lt;&lt; 16)   </span><span class="cm">/* Transmit FIFO Full Mask */</span><span class="cp"></span>
<span class="cp">#define RX_FIFO_FULL_MASK  (1 &lt;&lt; 17)   </span><span class="cm">/* Receive FIFO Full Mask */</span><span class="cp"></span>
<span class="cp">#define TX_FIFO_ZERO_MASK  (1 &lt;&lt; 18)   </span><span class="cm">/* Transmit FIFO Empty Mask */</span><span class="cp"></span>
<span class="cp">#define RX_DAT_ZERO_MASK   (1 &lt;&lt; 19)   </span><span class="cm">/* Receive FIFO Empty Mask */</span><span class="cp"></span>
<span class="cp">#define TX_DAT_RDY_MASK    (1 &lt;&lt; 20)   </span><span class="cm">/* Transmit Data Available Mask */</span><span class="cp"></span>
<span class="cp">#define RX_FIFO_RDY_MASK   (1 &lt;&lt; 21)   </span><span class="cm">/* Receive Data Available Mask */</span><span class="cp"></span>

<span class="cm">/* SDH_FIFO_CNT bitmasks */</span>
<span class="cp">#define FIFO_COUNT         0x7fff      </span><span class="cm">/* FIFO Count */</span><span class="cp"></span>

<span class="cm">/* SDH_E_STATUS bitmasks */</span>
<span class="cp">#define SDIO_INT_DET       (1 &lt;&lt; 1)    </span><span class="cm">/* SDIO Int Detected */</span><span class="cp"></span>
<span class="cp">#define SD_CARD_DET        (1 &lt;&lt; 4)    </span><span class="cm">/* SD Card Detect */</span><span class="cp"></span>

<span class="cm">/* SDH_E_MASK bitmasks */</span>
<span class="cp">#define SDIO_MSK           (1 &lt;&lt; 1)    </span><span class="cm">/* Mask SDIO Int Detected */</span><span class="cp"></span>
<span class="cp">#define SCD_MSK            (1 &lt;&lt; 6)    </span><span class="cm">/* Mask Card Detect */</span><span class="cp"></span>

<span class="cm">/* SDH_CFG bitmasks */</span>
<span class="cp">#define CLKS_EN            (1 &lt;&lt; 0)    </span><span class="cm">/* Clocks Enable */</span><span class="cp"></span>
<span class="cp">#define SD4E               (1 &lt;&lt; 2)    </span><span class="cm">/* SDIO 4-Bit Enable */</span><span class="cp"></span>
<span class="cp">#define MWE                (1 &lt;&lt; 3)    </span><span class="cm">/* Moving Window Enable */</span><span class="cp"></span>
<span class="cp">#define SD_RST             (1 &lt;&lt; 4)    </span><span class="cm">/* SDMMC Reset */</span><span class="cp"></span>
<span class="cp">#define PUP_SDDAT          (1 &lt;&lt; 5)    </span><span class="cm">/* Pull-up SD_DAT */</span><span class="cp"></span>
<span class="cp">#define PUP_SDDAT3         (1 &lt;&lt; 6)    </span><span class="cm">/* Pull-up SD_DAT3 */</span><span class="cp"></span>
<span class="cp">#define PD_SDDAT3          (1 &lt;&lt; 7)    </span><span class="cm">/* Pull-down SD_DAT3 */</span><span class="cp"></span>

<span class="cm">/* SDH_RD_WAIT_EN bitmasks */</span>
<span class="cp">#define RWR                (1 &lt;&lt; 0)    </span><span class="cm">/* Read Wait Request */</span><span class="cp"></span>

<span class="cp">#endif</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
