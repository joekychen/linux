f | defBF561.h | s | 87K | 1291 | Sonic Zhang | sonic.zhang@analog.com | 1337583270 |  | blackfin: license: Change ADI BSD license  Change ADI BSD license to standart 3 clause BSD license for some blackfin arch code requested by ADI Legal.  Signed-off-by: Sonic Zhang <sonic.zhang@analog.com> Signed-off-by: Bob Liu <lliubbo@gmail.com>
f | anomaly.h | s | 17K | 344 | Sonic Zhang | sonic.zhang@analog.com | 1337583270 |  | blackfin: license: Change ADI BSD license  Change ADI BSD license to standart 3 clause BSD license for some blackfin arch code requested by ADI Legal.  Signed-off-by: Sonic Zhang <sonic.zhang@analog.com> Signed-off-by: Bob Liu <lliubbo@gmail.com>
f | mem_map.h | s | 5.9K | 191 | Graf Yang | graf.yang@analog.com | 1294661893 |  | Blackfin: bf561: fix mem_map.h SMP overrides  The BF561 mem_map.h header has the __ASSEMBLY__/CONFIG_SMP checks out of order which leads to build errors for assembly code that happens to include this file.  Signed-off-by: Graf Yang <graf.yang@analog.com> Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | bfin_serial.h | s | 252B | 11 | Mike Frysinger | vapier@gentoo.org | 1294661882 |  | Blackfin: bfin_serial.h: unify heavily duplicated serial code  Each Blackfin port has been duplicating UART structures and defines when there really is no need for it.  So start a new bfin_serial.h header to unify all these pieces and give ourselves a fresh start.  Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | smp.h | s | 728B | 19 | Yi Li | yi.li@analog.com | 1294661895 |  | Blackfin: SMP: rewrite IPI handling to avoid memory allocation  Currently, sending an interprocessor interrupt (IPI) requires building up a message dynamically which means memory allocation.  But often times, we will want to send an IPI in low level contexts where allocation is not possible which may lead to a panic().  So create a per-cpu static array for the message queue and use that instead.  Further, while we have two supplemental interrupts, we are currently only using one of them.  So use the second one for the most common IPI message of all -- smp_send_reschedule().  This avoids ugly contention for locks which in turn would require an IPI message ...  In general, this improves SMP performance, and in some cases allows the SMP port to work in places it wouldn't before.  Such as the PREEMPT_RT state where the slab is protected by a per-cpu spin lock.  If the slab kmalloc/kfree were to put the task to sleep, and that task was actually the IPI handler, then the system falls down yet again.  After running some various stress tests on the system, the static limit of 5 messages seems to work.  On the off chance even this overflows, we simply panic(), and we can review that scenario to see if the limit needs to be increased a bit more.  Signed-off-by: Yi Li <yi.li@analog.com> Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | pll.h | s | 1.3K | 42 | Bob Liu | lliubbo@gmail.com | 1326075975 |  | blackfin: smp: cleanup smp code  move idle task point to percpu blackfin_cpudata and add smp_timer_broadcast interface. enable SUPPLE_1_WAKEUP and add BFIN_IPI_TIMER ipi support.  Signed-off-by: Steven Miao <realmz6@gmail.com> Signed-off-by: Bob Liu <lliubbo@gmail.com>
f | gpio.h | s | 1.3K | 60 | Mike Frysinger | vapier@gentoo.org | 1311398304 |  | Blackfin: gpio: punt unused GPIO_# defines  These defines don't accomplish much as GPIO_# is the same thing as #. Each CPU already provides helpful symbolic defines like GPIO_<PIN> which everyone uses, so just punt these # ones.  Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | dma.h | s | 968B | 34 | Mike Frysinger | vapier.adi@gmail.com | 1231341279 |  | Blackfin arch: push bf561 PERIPHERAL_MAP oddity into bf561-specific code  Signed-off-by: Mike Frysinger <vapier.adi@gmail.com> Signed-off-by: Bryan Wu <cooloney@kernel.org>
f | irq.h | s | 8.2K | 219 | Mike Frysinger | vapier@gentoo.org | 1306325622 |  | Blackfin: bf533/bf537/bf561: convert to BFIN_IRQ helper  This brings the parts in line with newer ones, and makes things easier to read at a glance.  Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | blackfin.h | s | 1.4K | 33 | Mike Frysinger | vapier@gentoo.org | 1294661888 |  | Blackfin: clean up mach header includes  The main asm/blackfin.h header will pull in mach/blackfin.h to get all the fun Blackfin defines.  So having any of the sub-mach headers trying to include asm/blackfin.h makes no sense -- punt it.  The mach/blackfin.h header takes care of including the part-specific def headers which in turn will include any other needed def file. Similarly, it takes care of pulling in the part-specific cdef header. So move this logic out of the blackfin.h when necessary.  Further, make sure the cdef headers do not waste time including the def headers again.  Since all parts need the common def/cdef headers, move this logic out of the part-specific headers and into the mach/blackfin.h file.  Finally, we need to split the BF539 def header since the BF538 does not have MXVR and we don't want to expose those MMRs.  So now all parts should have the same behavior: 	mach/blackfin.h 		asm/def_LPBlackfin.h 		part-specific def.h 		if ! asm 			asm/cdef_LPBlackfin.h 			part-specific cdef.h And the sub def/cdef headers only tail into what they need.  Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | cdefBF561.h | s | 107K | 1448 | Mike Frysinger | vapier@gentoo.org | 1294661890 |  | Blackfin: drop asm/irq.h include from mach headers  These were only included because of the irq handling of the PLL funcs, and those PLL funcs have been moved out into their own header now.  Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | bf561.h | s | 4.9K | 173 | Robin Getz | robin.getz@analog.com | 1254904586 |  | Blackfin: mass clean up of copyright/licensing info  Bill Gatliff & David Brownell pointed out we were missing some copyrights, and licensing terms in some of the files in ./arch/blackfin, so this fixes things, and cleans them up.  It also removes:  - verbose GPL text(refer to the top level ./COPYING file)  - file names (you are looking at the file)  - bug url (it's in the ./MAINTAINERS file)  - "or later" on GPL-2, when we did not have that right  It also allows some Blackfin-specific assembly files to be under a BSD like license (for people to use them outside of Linux).  Signed-off-by: Robin Getz <robin.getz@analog.com> Signed-off-by: Mike Frysinger <vapier@gentoo.org>
f | portmux.h | s | 3.8K | 93 | Mike Frysinger | vapier@gentoo.org | 1281113751 |  | Blackfin: gpio/portmux: clean up whitespace corruption  Random tabs instead of spaces, mixes of the two, and unicode spaces instead of ascii spaces.  Signed-off-by: Mike Frysinger <vapier@gentoo.org>
