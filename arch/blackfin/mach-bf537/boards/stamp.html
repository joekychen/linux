<!DOCTYPE html>
<html><head><title>joekychen/linux » arch › blackfin › mach-bf537 › boards › stamp.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../../../../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../../../../index.html"></a><h1>stamp.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * Copyright 2004-2009 Analog Devices Inc.</span>
<span class="cm"> *                2005 National ICT Australia (NICTA)</span>
<span class="cm"> *                      Aidan Williams &lt;aidan@nicta.com.au&gt;</span>
<span class="cm"> *</span>
<span class="cm"> * Licensed under the GPL-2 or later.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/device.h&gt;</span>
<span class="cp">#include &lt;linux/export.h&gt;</span>
<span class="cp">#include &lt;linux/kernel.h&gt;</span>
<span class="cp">#include &lt;linux/platform_device.h&gt;</span>
<span class="cp">#include &lt;linux/io.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/mtd.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/nand.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/partitions.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/plat-ram.h&gt;</span>
<span class="cp">#include &lt;linux/mtd/physmap.h&gt;</span>
<span class="cp">#include &lt;linux/spi/spi.h&gt;</span>
<span class="cp">#include &lt;linux/spi/flash.h&gt;</span>
<span class="cp">#if defined(CONFIG_USB_ISP1362_HCD) || defined(CONFIG_USB_ISP1362_HCD_MODULE)</span>
<span class="cp">#include &lt;linux/usb/isp1362.h&gt;</span>
<span class="cp">#endif</span>
<span class="cp">#include &lt;linux/i2c.h&gt;</span>
<span class="cp">#include &lt;linux/i2c/adp5588.h&gt;</span>
<span class="cp">#include &lt;linux/etherdevice.h&gt;</span>
<span class="cp">#include &lt;linux/ata_platform.h&gt;</span>
<span class="cp">#include &lt;linux/irq.h&gt;</span>
<span class="cp">#include &lt;linux/interrupt.h&gt;</span>
<span class="cp">#include &lt;linux/usb/sl811.h&gt;</span>
<span class="cp">#include &lt;linux/spi/mmc_spi.h&gt;</span>
<span class="cp">#include &lt;linux/leds.h&gt;</span>
<span class="cp">#include &lt;linux/input.h&gt;</span>
<span class="cp">#include &lt;asm/dma.h&gt;</span>
<span class="cp">#include &lt;asm/bfin5xx_spi.h&gt;</span>
<span class="cp">#include &lt;asm/reboot.h&gt;</span>
<span class="cp">#include &lt;asm/portmux.h&gt;</span>
<span class="cp">#include &lt;asm/dpmc.h&gt;</span>
<span class="cp">#include &lt;asm/bfin_sport.h&gt;</span>
<span class="cp">#ifdef CONFIG_REGULATOR_FIXED_VOLTAGE</span>
<span class="cp">#include &lt;linux/regulator/fixed.h&gt;</span>
<span class="cp">#endif</span>
<span class="cp">#include &lt;linux/regulator/machine.h&gt;</span>
<span class="cp">#include &lt;linux/regulator/consumer.h&gt;</span>
<span class="cp">#include &lt;linux/regulator/userspace-consumer.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * Name the Board for the /proc/cpuinfo</span>
<span class="cm"> */</span>
<span class="k">const</span> <span class="kt">char</span> <span class="n">bfin_board_name</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;ADI BF537-STAMP&quot;</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm"> *  Driver needs to know address, irq and flag pin.</span>
<span class="cm"> */</span>

<span class="cp">#if defined(CONFIG_USB_ISP1760_HCD) || defined(CONFIG_USB_ISP1760_HCD_MODULE)</span>
<span class="cp">#include &lt;linux/usb/isp1760.h&gt;</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_isp1760_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="mh">0x203C0000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>    <span class="o">=</span> <span class="mh">0x203C0000</span> <span class="o">+</span> <span class="mh">0x000fffff</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>    <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_LOWLEVEL</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">isp1760_platform_data</span> <span class="n">isp1760_priv</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">is_isp1761</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">bus_width_16</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">port1_otg</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">analog_oc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dack_polarity_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dreq_polarity_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_isp1760_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>           <span class="o">=</span> <span class="s">&quot;isp1760&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>             <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">isp1760_priv</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span>  <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_isp1760_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>       <span class="o">=</span> <span class="n">bfin_isp1760_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_KEYBOARD_GPIO) || defined(CONFIG_KEYBOARD_GPIO_MODULE)</span>
<span class="cp">#include &lt;linux/gpio_keys.h&gt;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_button</span> <span class="n">bfin_gpio_keys_table</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span><span class="n">BTN_0</span><span class="p">,</span> <span class="n">GPIO_PF2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;gpio-keys: BTN0&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="n">BTN_1</span><span class="p">,</span> <span class="n">GPIO_PF3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;gpio-keys: BTN1&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="n">BTN_2</span><span class="p">,</span> <span class="n">GPIO_PF4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;gpio-keys: BTN2&quot;</span><span class="p">},</span>
	<span class="p">{</span><span class="n">BTN_3</span><span class="p">,</span> <span class="n">GPIO_PF5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;gpio-keys: BTN3&quot;</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">gpio_keys_platform_data</span> <span class="n">bfin_gpio_keys_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">buttons</span>        <span class="o">=</span> <span class="n">bfin_gpio_keys_table</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nbuttons</span>       <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_gpio_keys_table</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_device_gpiokeys</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>      <span class="o">=</span> <span class="s">&quot;gpio-keys&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_gpio_keys_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BFIN_CFPCMCIA) || defined(CONFIG_BFIN_CFPCMCIA_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_pcmcia_cf_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20310000</span><span class="p">,</span> <span class="cm">/* IO PORT */</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20312000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20311000</span><span class="p">,</span> <span class="cm">/* Attribute Memory */</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20311FFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_LOWLEVEL</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="cm">/* Card Detect PF6 */</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_pcmcia_cf_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_cf_pcmcia&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_pcmcia_cf_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_pcmcia_cf_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_RTC_DRV_BFIN) || defined(CONFIG_RTC_DRV_BFIN_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">rtc_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rtc-bfin&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>   <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SMC91X) || defined(CONFIG_SMC91X_MODULE)</span>
<span class="cp">#include &lt;linux/smc91x.h&gt;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">smc91x_platdata</span> <span class="n">smc91x_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">SMC91X_USE_16BIT</span> <span class="o">|</span> <span class="n">SMC91X_NOWAIT</span><span class="p">,</span>
	<span class="p">.</span><span class="n">leda</span> <span class="o">=</span> <span class="n">RPC_LED_100_10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ledb</span> <span class="o">=</span> <span class="n">RPC_LED_TX_RX</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">smc91x_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;smc91x-regs&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20300300</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20300300</span> <span class="o">+</span> <span class="mi">16</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>

		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_HIGHLEVEL</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">smc91x_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;smc91x&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">smc91x_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">smc91x_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>	<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">smc91x_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_DM9000) || defined(CONFIG_DM9000_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">dm9000_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0x203FB800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0x203FB800</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="mh">0x203FB804</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="mh">0x203FB804</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>	<span class="o">=</span> <span class="n">IRQ_PF9</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>	<span class="o">=</span> <span class="n">IRQ_PF9</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>	<span class="o">=</span> <span class="p">(</span><span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_HIGHEDGE</span><span class="p">),</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">dm9000_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;dm9000&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">dm9000_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">dm9000_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_SL811_HCD) || defined(CONFIG_USB_SL811_HCD_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">sl811_hcd_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20340000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20340000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20340004</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20340004</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_HIGHLEVEL</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_USB_SL811_BFIN_USE_VBUS)</span>
<span class="kt">void</span> <span class="nf">sl811_port_power</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">int</span> <span class="n">is_on</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">CONFIG_USB_SL811_BFIN_GPIO_VBUS</span><span class="p">,</span> <span class="s">&quot;usb:SL811_VBUS&quot;</span><span class="p">);</span>
	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">CONFIG_USB_SL811_BFIN_GPIO_VBUS</span><span class="p">,</span> <span class="n">is_on</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">sl811_platform_data</span> <span class="n">sl811_priv</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">potpg</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">power</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span>       <span class="cm">/* == 500mA */</span>
<span class="cp">#if defined(CONFIG_USB_SL811_BFIN_USE_VBUS)</span>
	<span class="p">.</span><span class="n">port_power</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">sl811_port_power</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">sl811_hcd_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;sl811-hcd&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">sl811_priv</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">sl811_hcd_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">sl811_hcd_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_ISP1362_HCD) || defined(CONFIG_USB_ISP1362_HCD_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">isp1362_hcd_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20360000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20360000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20360004</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20360004</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_PF3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_PF3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_LOWEDGE</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">isp1362_platform_data</span> <span class="n">isp1362_priv</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">sel15Kres</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">clknotstop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">oc_enable</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">int_act_high</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">int_edge_triggered</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">remote_wakeup_connected</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">no_power_switching</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">power_switching_mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">isp1362_hcd_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;isp1362-hcd&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">isp1362_priv</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">isp1362_hcd_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">isp1362_hcd_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_CAN_BFIN) || defined(CONFIG_CAN_BFIN_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bfin_can_peripherals</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">P_CAN0_RX</span><span class="p">,</span> <span class="n">P_CAN0_TX</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_can_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0xFFC02A00</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0xFFC02FFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_CAN_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_CAN_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_CAN_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_CAN_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_CAN_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_CAN_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_can_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_can&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_can_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_can_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_can_peripherals</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BFIN_MAC) || defined(CONFIG_BFIN_MAC_MODULE)</span>
<span class="cp">#include &lt;linux/bfin_mac.h&gt;</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bfin_mac_peripherals</span><span class="p">[]</span> <span class="o">=</span> <span class="n">P_MII0</span><span class="p">;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin_phydev_platform_data</span> <span class="n">bfin_phydev_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">PHY_POLL</span><span class="p">,</span> <span class="cm">/* IRQ_MAC_PHYINT */</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin_mii_bus_platform_data</span> <span class="n">bfin_mii_bus_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">phydev_number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phydev_data</span> <span class="o">=</span> <span class="n">bfin_phydev_data</span><span class="p">,</span>
	<span class="p">.</span><span class="n">phy_mode</span> <span class="o">=</span> <span class="n">PHY_INTERFACE_MODE_MII</span><span class="p">,</span>
	<span class="p">.</span><span class="n">mac_peripherals</span> <span class="o">=</span> <span class="n">bfin_mac_peripherals</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_mii_bus</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_mii_bus&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_mii_bus_data</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_mac_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_mac&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_mii_bus</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_NET2272) || defined(CONFIG_USB_NET2272_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">net2272_bfin_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20300000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20300000</span> <span class="o">+</span> <span class="mh">0x100</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_BUS</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_HIGHLEVEL</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">net2272_bfin_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;net2272&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">net2272_bfin_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">net2272_bfin_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MTD_NAND_PLATFORM) || defined(CONFIG_MTD_NAND_PLATFORM_MODULE)</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">part_probes</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;cmdlinepart&quot;</span><span class="p">,</span> <span class="s">&quot;RedBoot&quot;</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">bfin_plat_nand_partitions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;linux kernel(nand)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>   <span class="o">=</span> <span class="mh">0x400000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>   <span class="o">=</span> <span class="s">&quot;file system(nand)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>   <span class="o">=</span> <span class="n">MTDPART_SIZ_FULL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#define BFIN_NAND_PLAT_CLE 2</span>
<span class="cp">#define BFIN_NAND_PLAT_ALE 1</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">bfin_plat_nand_cmd_ctrl</span><span class="p">(</span><span class="k">struct</span> <span class="n">mtd_info</span> <span class="o">*</span><span class="n">mtd</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cmd</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ctrl</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">struct</span> <span class="n">nand_chip</span> <span class="o">*</span><span class="n">this</span> <span class="o">=</span> <span class="n">mtd</span><span class="o">-&gt;</span><span class="n">priv</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">cmd</span> <span class="o">==</span> <span class="n">NAND_CMD_NONE</span><span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">ctrl</span> <span class="o">&amp;</span> <span class="n">NAND_CLE</span><span class="p">)</span>
		<span class="n">writeb</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">this</span><span class="o">-&gt;</span><span class="n">IO_ADDR_W</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">BFIN_NAND_PLAT_CLE</span><span class="p">));</span>
	<span class="k">else</span>
		<span class="n">writeb</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">this</span><span class="o">-&gt;</span><span class="n">IO_ADDR_W</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">BFIN_NAND_PLAT_ALE</span><span class="p">));</span>
<span class="p">}</span>

<span class="cp">#define BFIN_NAND_PLAT_READY GPIO_PF3</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">bfin_plat_nand_dev_ready</span><span class="p">(</span><span class="k">struct</span> <span class="n">mtd_info</span> <span class="o">*</span><span class="n">mtd</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">gpio_get_value</span><span class="p">(</span><span class="n">BFIN_NAND_PLAT_READY</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_nand_data</span> <span class="n">bfin_plat_nand_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">chip</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">nr_chips</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_delay</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
		<span class="p">.</span><span class="n">part_probe_types</span> <span class="o">=</span> <span class="n">part_probes</span><span class="p">,</span>
		<span class="p">.</span><span class="n">partitions</span> <span class="o">=</span> <span class="n">bfin_plat_nand_partitions</span><span class="p">,</span>
		<span class="p">.</span><span class="n">nr_partitions</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_plat_nand_partitions</span><span class="p">),</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">ctrl</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">cmd_ctrl</span>  <span class="o">=</span> <span class="n">bfin_plat_nand_cmd_ctrl</span><span class="p">,</span>
		<span class="p">.</span><span class="n">dev_ready</span> <span class="o">=</span> <span class="n">bfin_plat_nand_dev_ready</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#define MAX(x, y) (x &gt; y ? x : y)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_plat_nand_resources</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20212000</span><span class="p">,</span>
	<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="mh">0x20212000</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">MAX</span><span class="p">(</span><span class="n">BFIN_NAND_PLAT_CLE</span><span class="p">,</span> <span class="n">BFIN_NAND_PLAT_ALE</span><span class="p">)),</span>
	<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_async_nand_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;gen_nand&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_plat_nand_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_plat_nand_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">bfin_plat_nand_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">gpio_request</span><span class="p">(</span><span class="n">BFIN_NAND_PLAT_READY</span><span class="p">,</span> <span class="s">&quot;bfin_nand_plat&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kt">void</span> <span class="nf">bfin_plat_nand_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MTD_PHYSMAP) || defined(CONFIG_MTD_PHYSMAP_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">stamp_partitions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;bootloader(nor)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>       <span class="o">=</span> <span class="mh">0x40000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;linux kernel(nor)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>       <span class="o">=</span> <span class="mh">0x180000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>     <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;file system(nor)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>       <span class="o">=</span> <span class="mh">0x400000</span> <span class="o">-</span> <span class="mh">0x40000</span> <span class="o">-</span> <span class="mh">0x180000</span> <span class="o">-</span> <span class="mh">0x10000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>     <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span>       <span class="o">=</span> <span class="s">&quot;MAC Address(nor)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span>       <span class="o">=</span> <span class="n">MTDPART_SIZ_FULL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span>     <span class="o">=</span> <span class="mh">0x3F0000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mask_flags</span> <span class="o">=</span> <span class="n">MTD_WRITEABLE</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">physmap_flash_data</span> <span class="n">stamp_flash_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">width</span>      <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">parts</span>      <span class="o">=</span> <span class="n">stamp_partitions</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_parts</span>   <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">stamp_partitions</span><span class="p">),</span>
<span class="cp">#ifdef CONFIG_ROMKERNEL</span>
	<span class="p">.</span><span class="n">probe_type</span> <span class="o">=</span> <span class="s">&quot;map_rom&quot;</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">stamp_flash_resource</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20000000</span><span class="p">,</span>
	<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="mh">0x203fffff</span><span class="p">,</span>
	<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">stamp_flash_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s">&quot;physmap-flash&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>            <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">stamp_flash_data</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">resource</span>      <span class="o">=</span> <span class="o">&amp;</span><span class="n">stamp_flash_resource</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MTD_M25P80) \</span>
<span class="cp">	|| defined(CONFIG_MTD_M25P80_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">bfin_spi_flash_partitions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bootloader(spi)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mask_flags</span> <span class="o">=</span> <span class="n">MTD_CAP_ROM</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;linux kernel(spi)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="mh">0x180000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;file system(spi)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">MTDPART_SIZ_FULL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">flash_platform_data</span> <span class="n">bfin_spi_flash_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;m25p80&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">parts</span> <span class="o">=</span> <span class="n">bfin_spi_flash_partitions</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_parts</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_spi_flash_partitions</span><span class="p">),</span>
	<span class="cm">/* .type = &quot;m25p64&quot;, */</span>
<span class="p">};</span>

<span class="cm">/* SPI flash chip (m25p64) */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">spi_flash_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>         <span class="cm">/* use dma transfer with this chip*/</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_INPUT_AD714X_SPI) || defined(CONFIG_INPUT_AD714X_SPI_MODULE)</span>
<span class="cp">#include &lt;linux/input/ad714x.h&gt;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">ad714x_slider_plat</span> <span class="n">ad7147_spi_slider_plat</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start_stage</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end_stage</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_coord</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">ad714x_button_plat</span> <span class="n">ad7147_spi_button_plat</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_FORWARD</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x600</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_LEFT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x500</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_MIDDLE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x800</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_RIGHT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mh">0x100</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x400</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_BACK</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mh">0x200</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x400</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">ad714x_platform_data</span> <span class="n">ad7147_spi_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">slider_num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">button_num</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">slider</span> <span class="o">=</span> <span class="n">ad7147_spi_slider_plat</span><span class="p">,</span>
	<span class="p">.</span><span class="n">button</span> <span class="o">=</span> <span class="n">ad7147_spi_button_plat</span><span class="p">,</span>
	<span class="p">.</span><span class="n">stage_cfg_reg</span> <span class="o">=</span>  <span class="p">{</span>
		<span class="p">{</span><span class="mh">0xFBFF</span><span class="p">,</span> <span class="mh">0x1FFF</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1600</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xEFFF</span><span class="p">,</span> <span class="mh">0x1FFF</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x1FFE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x1FFB</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x1FEF</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x1FBF</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x1EFF</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">,</span> <span class="mi">1650</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x1BFF</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span> <span class="mi">1600</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFF7B</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x506</span><span class="p">,</span>  <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1150</span><span class="p">,</span> <span class="mi">1150</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFDFE</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x606</span><span class="p">,</span>  <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1150</span><span class="p">,</span> <span class="mi">1150</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFEBA</span><span class="p">,</span> <span class="mh">0x1FFF</span><span class="p">,</span> <span class="mh">0x1400</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1200</span><span class="p">,</span> <span class="mi">1200</span><span class="p">,</span> <span class="mi">1300</span><span class="p">,</span> <span class="mi">1300</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFEF</span><span class="p">,</span> <span class="mh">0x1FFF</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span>    <span class="mh">0x2626</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="mi">1150</span><span class="p">,</span> <span class="mi">1150</span><span class="p">},</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">sys_cfg_reg</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x2B2</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x3233</span><span class="p">,</span> <span class="mh">0x819</span><span class="p">,</span> <span class="mh">0x832</span><span class="p">,</span> <span class="mh">0xCFF</span><span class="p">,</span> <span class="mh">0xCFF</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_INPUT_AD714X_I2C) || defined(CONFIG_INPUT_AD714X_I2C_MODULE)</span>
<span class="cp">#include &lt;linux/input/ad714x.h&gt;</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">ad714x_button_plat</span> <span class="n">ad7142_i2c_button_plat</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x2</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x4</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">keycode</span> <span class="o">=</span> <span class="n">BTN_4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">l_mask</span> <span class="o">=</span> <span class="mh">0x0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">h_mask</span> <span class="o">=</span> <span class="mh">0x8</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">ad714x_platform_data</span> <span class="n">ad7142_i2c_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">button_num</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">.</span><span class="n">button</span> <span class="o">=</span> <span class="n">ad7142_i2c_button_plat</span><span class="p">,</span>
	<span class="p">.</span><span class="n">stage_cfg_reg</span> <span class="o">=</span>  <span class="p">{</span>
		<span class="cm">/* fixme: figure out right setting for all comoponent according</span>
<span class="cm">		 * to hardware feature of EVAL-AD7142EB board */</span>
		<span class="p">{</span><span class="mh">0xE7FF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0005</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFDBF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x2DFF</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x37BF</span><span class="p">,</span> <span class="mh">0x0001</span><span class="p">,</span> <span class="mh">0x2626</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">,</span> <span class="mh">0x028A</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
		<span class="p">{</span><span class="mh">0xFFFF</span><span class="p">,</span> <span class="mh">0x3FFF</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x0606</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x01F4</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">,</span> <span class="mh">0x0320</span><span class="p">},</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">sys_cfg_reg</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x0B2</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="mh">0x690</span><span class="p">,</span> <span class="mh">0x664</span><span class="p">,</span> <span class="mh">0x290F</span><span class="p">,</span> <span class="mh">0xF</span><span class="p">,</span> <span class="mh">0xF</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD2S90) || defined(CONFIG_AD2S90_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">ad2s90_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD2S120X) || defined(CONFIG_AD2S120X_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ad2s120x_platform_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* used as SAMPLE and RDVEL */</span>
	<span class="n">GPIO_PF5</span><span class="p">,</span> <span class="n">GPIO_PF6</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">ad2s120x_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD2S1210) || defined(CONFIG_AD2S1210_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ad2s1210_platform_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="cm">/* use as SAMPLE, A0, A1 */</span>
	<span class="n">GPIO_PF7</span><span class="p">,</span> <span class="n">GPIO_PF8</span><span class="p">,</span> <span class="n">GPIO_PF9</span><span class="p">,</span>
<span class="cp"># if defined(CONFIG_AD2S1210_GPIO_INPUT) || defined(CONFIG_AD2S1210_GPIO_OUTPUT)</span>
	<span class="cm">/* the RES0 and RES1 pins */</span>
	<span class="n">GPIO_PF4</span><span class="p">,</span> <span class="n">GPIO_PF5</span><span class="p">,</span>
<span class="cp"># endif</span>
	<span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">ad2s1210_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7314) || defined(CONFIG_AD7314_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">ad7314_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7816) || defined(CONFIG_AD7816_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ad7816_platform_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">GPIO_PF4</span><span class="p">,</span> <span class="cm">/* rdwr_pin */</span>
	<span class="n">GPIO_PF5</span><span class="p">,</span> <span class="cm">/* convert_pin */</span>
	<span class="n">GPIO_PF7</span><span class="p">,</span> <span class="cm">/* busy_pin */</span>
	<span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">ad7816_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7310) || defined(CONFIG_ADT7310_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">adt7310_platform_data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cm">/* INT bound temperature alarm event. line 1 */</span>
	<span class="n">IRQ_PG4</span><span class="p">,</span> <span class="n">IRQF_TRIGGER_LOW</span><span class="p">,</span>
<span class="cm">/* CT bound temperature alarm event irq_flags. line 0 */</span>
	<span class="n">IRQF_TRIGGER_LOW</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">adt7310_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7298) || defined(CONFIG_AD7298_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ad7298_platform_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">GPIO_PF7</span><span class="p">,</span> <span class="cm">/* busy_pin */</span>
	<span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7316_SPI) || defined(CONFIG_ADT7316_SPI_MODULE)</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">adt7316_spi_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">IRQF_TRIGGER_LOW</span><span class="p">,</span> <span class="cm">/* interrupt flags */</span>
	<span class="n">GPIO_PF7</span><span class="p">,</span> <span class="cm">/* ldac_pin, 0 means DAC/LDAC registers control DAC update */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">adt7316_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MMC_SPI) || defined(CONFIG_MMC_SPI_MODULE)</span>
<span class="cp">#define MMC_SPI_CARD_DETECT_INT IRQ_PF5</span>

<span class="k">static</span> <span class="kt">int</span> <span class="nf">bfin_mmc_spi_init</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span>
	<span class="n">irqreturn_t</span> <span class="p">(</span><span class="o">*</span><span class="n">detect_int</span><span class="p">)(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="p">),</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">request_irq</span><span class="p">(</span><span class="n">MMC_SPI_CARD_DETECT_INT</span><span class="p">,</span> <span class="n">detect_int</span><span class="p">,</span>
		<span class="n">IRQF_TRIGGER_FALLING</span><span class="p">,</span> <span class="s">&quot;mmc-spi-detect&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">bfin_mmc_spi_exit</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">free_irq</span><span class="p">(</span><span class="n">MMC_SPI_CARD_DETECT_INT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mmc_spi_platform_data</span> <span class="n">bfin_mmc_spi_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">init</span> <span class="o">=</span> <span class="n">bfin_mmc_spi_init</span><span class="p">,</span>
	<span class="p">.</span><span class="n">exit</span> <span class="o">=</span> <span class="n">bfin_mmc_spi_exit</span><span class="p">,</span>
	<span class="p">.</span><span class="n">detect_delay</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="cm">/* msecs */</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span>  <span class="n">mmc_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pio_interrupt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_TOUCHSCREEN_AD7877) || defined(CONFIG_TOUCHSCREEN_AD7877_MODULE)</span>
<span class="cp">#include &lt;linux/spi/ad7877.h&gt;</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">ad7877_platform_data</span> <span class="n">bfin_ad7877_ts_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">model</span>			<span class="o">=</span> <span class="mi">7877</span><span class="p">,</span>
	<span class="p">.</span><span class="n">vref_delay_usecs</span>	<span class="o">=</span> <span class="mi">50</span><span class="p">,</span>	<span class="cm">/* internal, no capacitor */</span>
	<span class="p">.</span><span class="n">x_plate_ohms</span>		<span class="o">=</span> <span class="mi">419</span><span class="p">,</span>
	<span class="p">.</span><span class="n">y_plate_ohms</span>		<span class="o">=</span> <span class="mi">486</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pressure_max</span>		<span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pressure_min</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">stopacq_polarity</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">first_conversion_delay</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">acquisition_time</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">averaging</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pen_down_acc_interval</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_TOUCHSCREEN_AD7879) || defined(CONFIG_TOUCHSCREEN_AD7879_MODULE)</span>
<span class="cp">#include &lt;linux/spi/ad7879.h&gt;</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">ad7879_platform_data</span> <span class="n">bfin_ad7879_ts_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">model</span>			<span class="o">=</span> <span class="mi">7879</span><span class="p">,</span>	<span class="cm">/* Model = AD7879 */</span>
	<span class="p">.</span><span class="n">x_plate_ohms</span>		<span class="o">=</span> <span class="mi">620</span><span class="p">,</span>	<span class="cm">/* 620 Ohm from the touch datasheet */</span>
	<span class="p">.</span><span class="n">pressure_max</span>		<span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pressure_min</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">first_conversion_delay</span>	<span class="o">=</span> <span class="mi">3</span><span class="p">,</span>	<span class="cm">/* wait 512us before do a first conversion */</span>
	<span class="p">.</span><span class="n">acquisition_time</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* 4us acquisition time per sample */</span>
	<span class="p">.</span><span class="n">median</span>			<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>	<span class="cm">/* do 8 measurements */</span>
	<span class="p">.</span><span class="n">averaging</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* take the average of 4 middle samples */</span>
	<span class="p">.</span><span class="n">pen_down_acc_interval</span>	<span class="o">=</span> <span class="mi">255</span><span class="p">,</span>	<span class="cm">/* 9.4 ms */</span>
	<span class="p">.</span><span class="n">gpio_export</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* Export GPIO to gpiolib */</span>
	<span class="p">.</span><span class="n">gpio_base</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>	<span class="cm">/* Dynamic allocation */</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_INPUT_ADXL34X) || defined(CONFIG_INPUT_ADXL34X_MODULE)</span>
<span class="cp">#include &lt;linux/input/adxl34x.h&gt;</span>
<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">adxl34x_platform_data</span> <span class="n">adxl34x_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">x_axis_offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">y_axis_offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">z_axis_offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tap_threshold</span> <span class="o">=</span> <span class="mh">0x31</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tap_duration</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tap_latency</span> <span class="o">=</span> <span class="mh">0x60</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tap_window</span> <span class="o">=</span> <span class="mh">0xF0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tap_axis_control</span> <span class="o">=</span> <span class="n">ADXL_TAP_X_EN</span> <span class="o">|</span> <span class="n">ADXL_TAP_Y_EN</span> <span class="o">|</span> <span class="n">ADXL_TAP_Z_EN</span><span class="p">,</span>
	<span class="p">.</span><span class="n">act_axis_control</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">,</span>
	<span class="p">.</span><span class="n">activity_threshold</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
	<span class="p">.</span><span class="n">inactivity_threshold</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
	<span class="p">.</span><span class="n">inactivity_time</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
	<span class="p">.</span><span class="n">free_fall_threshold</span> <span class="o">=</span> <span class="mh">0x7</span><span class="p">,</span>
	<span class="p">.</span><span class="n">free_fall_time</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span>
	<span class="p">.</span><span class="n">data_rate</span> <span class="o">=</span> <span class="mh">0x8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">data_range</span> <span class="o">=</span> <span class="n">ADXL_FULL_RES</span><span class="p">,</span>

	<span class="p">.</span><span class="n">ev_type</span> <span class="o">=</span> <span class="n">EV_ABS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ev_code_x</span> <span class="o">=</span> <span class="n">ABS_X</span><span class="p">,</span>		<span class="cm">/* EV_REL */</span>
	<span class="p">.</span><span class="n">ev_code_y</span> <span class="o">=</span> <span class="n">ABS_Y</span><span class="p">,</span>		<span class="cm">/* EV_REL */</span>
	<span class="p">.</span><span class="n">ev_code_z</span> <span class="o">=</span> <span class="n">ABS_Z</span><span class="p">,</span>		<span class="cm">/* EV_REL */</span>

	<span class="p">.</span><span class="n">ev_code_tap</span> <span class="o">=</span> <span class="p">{</span><span class="n">BTN_TOUCH</span><span class="p">,</span> <span class="n">BTN_TOUCH</span><span class="p">,</span> <span class="n">BTN_TOUCH</span><span class="p">},</span> <span class="cm">/* EV_KEY x,y,z */</span>

<span class="cm">/*	.ev_code_ff = KEY_F,*/</span>		<span class="cm">/* EV_KEY */</span>
<span class="cm">/*	.ev_code_act_inactivity = KEY_A,*/</span>	<span class="cm">/* EV_KEY */</span>
	<span class="p">.</span><span class="n">power_mode</span> <span class="o">=</span> <span class="n">ADXL_AUTO_SLEEP</span> <span class="o">|</span> <span class="n">ADXL_LINK</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fifo_mode</span> <span class="o">=</span> <span class="n">ADXL_FIFO_STREAM</span><span class="p">,</span>
	<span class="p">.</span><span class="n">orientation_enable</span> <span class="o">=</span> <span class="n">ADXL_EN_ORIENTATION_3D</span><span class="p">,</span>
	<span class="p">.</span><span class="n">deadzone_angle</span> <span class="o">=</span> <span class="n">ADXL_DEADZONE_ANGLE_10p8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">divisor_length</span> <span class="o">=</span>  <span class="n">ADXL_LP_FILTER_DIVISOR_16</span><span class="p">,</span>
	<span class="cm">/* EV_KEY {+Z, +Y, +X, -X, -Y, -Z} */</span>
	<span class="p">.</span><span class="n">ev_codes_orient_3d</span> <span class="o">=</span> <span class="p">{</span><span class="n">BTN_Z</span><span class="p">,</span> <span class="n">BTN_Y</span><span class="p">,</span> <span class="n">BTN_X</span><span class="p">,</span> <span class="n">BTN_A</span><span class="p">,</span> <span class="n">BTN_B</span><span class="p">,</span> <span class="n">BTN_C</span><span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ENC28J60) || defined(CONFIG_ENC28J60_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">enc28j60_spi_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADF702X) || defined(CONFIG_ADF702X_MODULE)</span>
<span class="cp">#include &lt;linux/spi/adf702x.h&gt;</span>
<span class="cp">#define TXREG 0x0160A470</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u32</span> <span class="n">adf7021_regs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x09608FA0</span><span class="p">,</span>
	<span class="mh">0x00575011</span><span class="p">,</span>
	<span class="mh">0x00A7F092</span><span class="p">,</span>
	<span class="mh">0x2B141563</span><span class="p">,</span>
	<span class="mh">0x81F29E94</span><span class="p">,</span>
	<span class="mh">0x00003155</span><span class="p">,</span>
	<span class="mh">0x050A4F66</span><span class="p">,</span>
	<span class="mh">0x00000007</span><span class="p">,</span>
	<span class="mh">0x00000008</span><span class="p">,</span>
	<span class="mh">0x000231E9</span><span class="p">,</span>
	<span class="mh">0x3296354A</span><span class="p">,</span>
	<span class="mh">0x891A2B3B</span><span class="p">,</span>
	<span class="mh">0x00000D9C</span><span class="p">,</span>
	<span class="mh">0x0000000D</span><span class="p">,</span>
	<span class="mh">0x0000000E</span><span class="p">,</span>
	<span class="mh">0x0000000F</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adf702x_platform_data</span> <span class="n">adf7021_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">regs_base</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">SPORT1_TCR1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_ch_rx</span> <span class="o">=</span> <span class="n">CH_SPORT1_RX</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_ch_tx</span> <span class="o">=</span> <span class="n">CH_SPORT1_TX</span><span class="p">,</span>
	<span class="p">.</span><span class="n">irq_sport_err</span> <span class="o">=</span> <span class="n">IRQ_SPORT1_ERROR</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio_int_rfs</span> <span class="o">=</span> <span class="n">GPIO_PF8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="p">{</span><span class="n">P_SPORT1_DTPRI</span><span class="p">,</span> <span class="n">P_SPORT1_RFS</span><span class="p">,</span> <span class="n">P_SPORT1_DRPRI</span><span class="p">,</span>
			<span class="n">P_SPORT1_RSCLK</span><span class="p">,</span> <span class="n">P_SPORT1_TSCLK</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
	<span class="p">.</span><span class="n">adf702x_model</span> <span class="o">=</span> <span class="n">MODEL_ADF7021</span><span class="p">,</span>
	<span class="p">.</span><span class="n">adf702x_regs</span> <span class="o">=</span> <span class="n">adf7021_regs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tx_reg</span> <span class="o">=</span> <span class="n">TXREG</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">adf702x_mac_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">random_ether_addr</span><span class="p">(</span><span class="n">adf7021_platform_data</span><span class="p">.</span><span class="n">mac_addr</span><span class="p">);</span>
<span class="p">}</span>
<span class="cp">#else</span>
<span class="k">static</span> <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">adf702x_mac_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_TOUCHSCREEN_ADS7846) || defined(CONFIG_TOUCHSCREEN_ADS7846_MODULE)</span>
<span class="cp">#include &lt;linux/spi/ads7846.h&gt;</span>
<span class="k">static</span> <span class="kt">int</span> <span class="nf">ads7873_get_pendown_state</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">gpio_get_value</span><span class="p">(</span><span class="n">GPIO_PF6</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">ads7846_platform_data</span> <span class="n">__initdata</span> <span class="n">ad7873_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">model</span>		<span class="o">=</span> <span class="mi">7873</span><span class="p">,</span>		<span class="cm">/* AD7873 */</span>
	<span class="p">.</span><span class="n">x_max</span>		<span class="o">=</span> <span class="mh">0xfff</span><span class="p">,</span>
	<span class="p">.</span><span class="n">y_max</span>		<span class="o">=</span> <span class="mh">0xfff</span><span class="p">,</span>
	<span class="p">.</span><span class="n">x_plate_ohms</span>	<span class="o">=</span> <span class="mi">620</span><span class="p">,</span>
	<span class="p">.</span><span class="n">debounce_max</span>	<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">debounce_rep</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">debounce_tol</span>	<span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="mi">0</span><span class="p">),</span>
	<span class="p">.</span><span class="n">get_pendown_state</span> <span class="o">=</span> <span class="n">ads7873_get_pendown_state</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MTD_DATAFLASH) \</span>
<span class="cp">	|| defined(CONFIG_MTD_DATAFLASH_MODULE)</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">mtd_partition</span> <span class="n">bfin_spi_dataflash_partitions</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bootloader(spi)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mask_flags</span> <span class="o">=</span> <span class="n">MTD_CAP_ROM</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;linux kernel(spi)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="mh">0x180000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">},</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;file system(spi)&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">MTDPART_SIZ_FULL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">MTDPART_OFS_APPEND</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">flash_platform_data</span> <span class="n">bfin_spi_dataflash_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;SPI Dataflash&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">parts</span> <span class="o">=</span> <span class="n">bfin_spi_dataflash_partitions</span><span class="p">,</span>
	<span class="p">.</span><span class="n">nr_parts</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_spi_dataflash_partitions</span><span class="p">),</span>
<span class="p">};</span>

<span class="cm">/* DataFlash chip */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">data_flash_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>         <span class="cm">/* use dma transfer with this chip*/</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7476) || defined(CONFIG_AD7476_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_chip</span> <span class="n">spi_ad7476_chip_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>         <span class="cm">/* use dma transfer with this chip*/</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">spi_board_info</span> <span class="n">bfin_spi_board_info</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#if defined(CONFIG_MTD_M25P80) \</span>
<span class="cp">	|| defined(CONFIG_MTD_M25P80_MODULE)</span>
	<span class="p">{</span>
		<span class="cm">/* the modalias must be the same as spi device driver name */</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;m25p80&quot;</span><span class="p">,</span> <span class="cm">/* Name of spi_driver for this device */</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">25000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="cm">/* Framework bus number */</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* Framework chip select. On STAMP537 it is SPISSEL1*/</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_spi_flash_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">spi_flash_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_MTD_DATAFLASH) \</span>
<span class="cp">	|| defined(CONFIG_MTD_DATAFLASH_MODULE)</span>
	<span class="p">{</span>	<span class="cm">/* DataFlash chip */</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;mtd_dataflash&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">33250000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="cm">/* Framework bus number */</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* Framework chip select. On STAMP537 it is SPISSEL1*/</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_spi_dataflash_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">data_flash_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_AD1836) \</span>
<span class="cp">	|| defined(CONFIG_SND_BF5XX_SOC_AD1836_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad1836&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">3125000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="s">&quot;ad1836&quot;</span><span class="p">,</span> <span class="cm">/* only includes chip name for the moment */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef CONFIG_SND_SOC_AD193X_SPI</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad193x&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">3125000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_ADAV80X) || defined(CONFIG_SND_SOC_ADV80X_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adav801&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">3125000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_INPUT_AD714X_SPI) || defined(CONFIG_INPUT_AD714X_SPI_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad714x_captouch&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad7147_spi_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD2S90) || defined(CONFIG_AD2S90_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad2s90&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>            <span class="cm">/* change it for your board */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad2s90_spi_chip_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD2S120X) || defined(CONFIG_AD2S120X_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad2s120x&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>            <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="n">ad2s120x_platform_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad2s120x_spi_chip_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD2S1210) || defined(CONFIG_AD2S1210_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad2s1210&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">8192000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>            <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="n">ad2s1210_platform_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad2s1210_spi_chip_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7314) || defined(CONFIG_AD7314_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad7314&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>            <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad7314_spi_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7816) || defined(CONFIG_AD7816_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad7818&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>            <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="n">ad7816_platform_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad7816_spi_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7310) || defined(CONFIG_ADT7310_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adt7310&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>		<span class="cm">/* CT alarm event. Line 0 */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="n">adt7310_platform_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adt7310_spi_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7298) || defined(CONFIG_AD7298_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad7298&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>            <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="n">ad7298_platform_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7316_SPI) || defined(CONFIG_ADT7316_SPI_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adt7316&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>		<span class="cm">/* interrupt line */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>	<span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="n">adt7316_spi_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adt7316_spi_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MMC_SPI) || defined(CONFIG_MMC_SPI_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;mmc_spi&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">20000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_mmc_spi_pdata</span><span class="p">,</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">mmc_spi_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_TOUCHSCREEN_AD7877) || defined(CONFIG_TOUCHSCREEN_AD7877_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span>		<span class="o">=</span> <span class="s">&quot;ad7877&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span>		<span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_ad7877_ts_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span>			<span class="o">=</span> <span class="n">IRQ_PF6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span>	<span class="o">=</span> <span class="mi">12500000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_TOUCHSCREEN_AD7879_SPI) || defined(CONFIG_TOUCHSCREEN_AD7879_SPI_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad7879&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_ad7879_ts_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">5000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_CPHA</span> <span class="o">|</span> <span class="n">SPI_CPOL</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SPI_SPIDEV) || defined(CONFIG_SPI_SPIDEV_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;spidev&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">3125000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_FB_BFIN_LQ035Q1) || defined(CONFIG_FB_BFIN_LQ035Q1_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;bfin-lq035q1-spi&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">20000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_CPHA</span> <span class="o">|</span> <span class="n">SPI_CPOL</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ENC28J60) || defined(CONFIG_ENC28J60_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;enc28j60&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">20000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="n">GPIO_PF10</span> <span class="o">+</span> <span class="n">MAX_CTRL_CS</span><span class="p">,</span>	<span class="cm">/* GPIO controlled SSEL */</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">enc28j60_spi_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_0</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_INPUT_ADXL34X_SPI) || defined(CONFIG_INPUT_ADXL34X_SPI_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span>	<span class="o">=</span> <span class="s">&quot;adxl34x&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span>	<span class="o">=</span> <span class="o">&amp;</span><span class="n">adxl34x_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span>		<span class="o">=</span> <span class="n">IRQ_PF6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span>	<span class="o">=</span> <span class="mi">5000000</span><span class="p">,</span>    <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span>	<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span>	<span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADF702X) || defined(CONFIG_ADF702X_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adf702x&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">16000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="n">GPIO_PF10</span> <span class="o">+</span> <span class="n">MAX_CTRL_CS</span><span class="p">,</span>	<span class="cm">/* GPIO controlled SSEL */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adf7021_platform_data</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_0</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_TOUCHSCREEN_ADS7846) || defined(CONFIG_TOUCHSCREEN_ADS7846_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ads7846&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">2000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="n">GPIO_PF10</span> <span class="o">+</span> <span class="n">MAX_CTRL_CS</span><span class="p">,</span>	<span class="cm">/* GPIO controlled SSEL */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad7873_pdata</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_0</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_AD7476) \</span>
<span class="cp">	|| defined(CONFIG_AD7476_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ad7476&quot;</span><span class="p">,</span> <span class="cm">/* Name of spi_driver for this device */</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">6250000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="cm">/* Framework bus number */</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* Framework chip select. */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">controller_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">spi_ad7476_chip_info</span><span class="p">,</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADE7753) \</span>
<span class="cp">	|| defined(CONFIG_ADE7753_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ade7753&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADE7754) \</span>
<span class="cp">	|| defined(CONFIG_ADE7754_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ade7754&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADE7758) \</span>
<span class="cp">	|| defined(CONFIG_ADE7758_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ade7758&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADE7759) \</span>
<span class="cp">	|| defined(CONFIG_ADE7759_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ade7759&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADE7854_SPI) \</span>
<span class="cp">	|| defined(CONFIG_ADE7854_SPI_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;ade7854&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16060) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16060_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16060_r&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">2900000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="n">MAX_CTRL_CS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS for read, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_0</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16060_w&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">2900000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="cm">/* CS for write, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_1</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16130) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16130_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16130&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS for read, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16201) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16201_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16201&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16203) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16203_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16203&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16204) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16204_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16204&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16209) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16209_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16209&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16220) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16220_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16220&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">2000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16240) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16240_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16240&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1500000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16260) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16260_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16260&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1500000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16261) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16261_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16261&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">2500000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16300) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16300_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16300&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16350) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16350_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16364&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PF4</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_ADIS16400) \</span>
<span class="cp">	|| defined(CONFIG_ADIS16400_MODULE)</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">modalias</span> <span class="o">=</span> <span class="s">&quot;adis16400&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_speed_hz</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">,</span>     <span class="cm">/* max spi clock (SCK) speed in HZ */</span>
		<span class="p">.</span><span class="n">bus_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">chip_select</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* CS, change it for your board */</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">,</span> <span class="cm">/* No spi_driver specific config */</span>
		<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">SPI_MODE_3</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_SPI_BFIN5XX) || defined(CONFIG_SPI_BFIN5XX_MODULE)</span>
<span class="cm">/* SPI controller data */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_master</span> <span class="n">bfin_spi0_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">num_chipselect</span> <span class="o">=</span> <span class="n">MAX_CTRL_CS</span> <span class="o">+</span> <span class="n">MAX_BLACKFIN_GPIOS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="cm">/* master has the ability to do dma transfer */</span>
	<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="p">{</span><span class="n">P_SPI0_SCK</span><span class="p">,</span> <span class="n">P_SPI0_MISO</span><span class="p">,</span> <span class="n">P_SPI0_MOSI</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>

<span class="cm">/* SPI (0) */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_spi0_resource</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">SPI0_REGBASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">SPI0_REGBASE</span> <span class="o">+</span> <span class="mh">0xFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_SPI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">CH_SPI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_SPI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_spi0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-spi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="cm">/* Bus number */</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_spi0_resource</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_spi0_resource</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_spi0_info</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif  </span><span class="cm">/* spi master and devices */</span><span class="cp"></span>

<span class="cp">#if defined(CONFIG_SPI_BFIN_SPORT) || defined(CONFIG_SPI_BFIN_SPORT_MODULE)</span>

<span class="cm">/* SPORT SPI controller data */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_master</span> <span class="n">bfin_sport_spi0_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">num_chipselect</span> <span class="o">=</span> <span class="n">MAX_BLACKFIN_GPIOS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>  <span class="cm">/* master don&#39;t support DMA */</span>
	<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="p">{</span><span class="n">P_SPORT0_DTPRI</span><span class="p">,</span> <span class="n">P_SPORT0_TSCLK</span><span class="p">,</span> <span class="n">P_SPORT0_DRPRI</span><span class="p">,</span>
		<span class="n">P_SPORT0_RSCLK</span><span class="p">,</span> <span class="n">P_SPORT0_TFS</span><span class="p">,</span> <span class="n">P_SPORT0_RFS</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sport_spi0_resource</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">SPORT0_TCR1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">SPORT0_TCR1</span> <span class="o">+</span> <span class="mh">0xFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_SPORT0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
		<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sport_spi0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-sport-spi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="cm">/* Bus number */</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sport_spi0_resource</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sport_spi0_resource</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_sport_spi0_info</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin5xx_spi_master</span> <span class="n">bfin_sport_spi1_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">num_chipselect</span> <span class="o">=</span> <span class="n">MAX_BLACKFIN_GPIOS</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enable_dma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>  <span class="cm">/* master don&#39;t support DMA */</span>
	<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="p">{</span><span class="n">P_SPORT1_DTPRI</span><span class="p">,</span> <span class="n">P_SPORT1_TSCLK</span><span class="p">,</span> <span class="n">P_SPORT1_DRPRI</span><span class="p">,</span>
		<span class="n">P_SPORT1_RSCLK</span><span class="p">,</span> <span class="n">P_SPORT1_TFS</span><span class="p">,</span> <span class="n">P_SPORT1_RFS</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sport_spi1_resource</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">SPORT1_TCR1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">SPORT1_TCR1</span> <span class="o">+</span> <span class="mh">0xFF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
		<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT1_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_SPORT1_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
		<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sport_spi1_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-sport-spi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="cm">/* Bus number */</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sport_spi1_resource</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sport_spi1_resource</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_sport_spi1_info</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#endif  </span><span class="cm">/* sport spi master and devices */</span><span class="cp"></span>

<span class="cp">#if defined(CONFIG_FB_BF537_LQ035) || defined(CONFIG_FB_BF537_LQ035_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_fb_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bf537-lq035&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_FB_BFIN_LQ035Q1) || defined(CONFIG_FB_BFIN_LQ035Q1_MODULE)</span>
<span class="cp">#include &lt;asm/bfin-lq035q1.h&gt;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin_lq035q1fb_disp_info</span> <span class="n">bfin_lq035q1_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">LQ035_NORM</span> <span class="o">|</span> <span class="n">LQ035_RGB</span> <span class="o">|</span> <span class="n">LQ035_RL</span> <span class="o">|</span> <span class="n">LQ035_TB</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ppi_mode</span> <span class="o">=</span> <span class="n">USE_RGB565_16_BIT_PPI</span><span class="p">,</span>
	<span class="p">.</span><span class="n">use_bl</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>	<span class="cm">/* let something else control the LCD Blacklight */</span>
	<span class="p">.</span><span class="n">gpio_bl</span> <span class="o">=</span> <span class="n">GPIO_PF7</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_lq035q1_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_PPI_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_PPI_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_lq035q1_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span>		<span class="o">=</span> <span class="s">&quot;bfin-lq035q1&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span>		<span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_lq035q1_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span>	<span class="o">=</span> <span class="n">bfin_lq035q1_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span>		<span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_lq035q1_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_VIDEO_BLACKFIN_CAPTURE) \</span>
<span class="cp">	|| defined(CONFIG_VIDEO_BLACKFIN_CAPTURE_MODULE)</span>
<span class="cp">#include &lt;linux/videodev2.h&gt;</span>
<span class="cp">#include &lt;media/blackfin/bfin_capture.h&gt;</span>
<span class="cp">#include &lt;media/blackfin/ppi.h&gt;</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">ppi_req</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">P_PPI0_D0</span><span class="p">,</span> <span class="n">P_PPI0_D1</span><span class="p">,</span> <span class="n">P_PPI0_D2</span><span class="p">,</span> <span class="n">P_PPI0_D3</span><span class="p">,</span>
	<span class="n">P_PPI0_D4</span><span class="p">,</span> <span class="n">P_PPI0_D5</span><span class="p">,</span> <span class="n">P_PPI0_D6</span><span class="p">,</span> <span class="n">P_PPI0_D7</span><span class="p">,</span>
	<span class="n">P_PPI0_CLK</span><span class="p">,</span> <span class="n">P_PPI0_FS1</span><span class="p">,</span> <span class="n">P_PPI0_FS2</span><span class="p">,</span>
	<span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">ppi_info</span> <span class="n">ppi_info</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">PPI_TYPE_PPI</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dma_ch</span> <span class="o">=</span> <span class="n">CH_PPI</span><span class="p">,</span>
	<span class="p">.</span><span class="n">irq_err</span> <span class="o">=</span> <span class="n">IRQ_PPI_ERROR</span><span class="p">,</span>
	<span class="p">.</span><span class="n">base</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="n">__iomem</span> <span class="o">*</span><span class="p">)</span><span class="n">PPI_CONTROL</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="n">ppi_req</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_VIDEO_VS6624) \</span>
<span class="cp">	|| defined(CONFIG_VIDEO_VS6624_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">v4l2_input</span> <span class="n">vs6624_inputs</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Camera&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">V4L2_INPUT_TYPE_CAMERA</span><span class="p">,</span>
		<span class="p">.</span><span class="n">std</span> <span class="o">=</span> <span class="n">V4L2_STD_UNKNOWN</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bcap_route</span> <span class="n">vs6624_routes</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">input</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">output</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="n">vs6624_ce_pin</span> <span class="o">=</span> <span class="n">GPIO_PF10</span><span class="p">;</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin_capture_config</span> <span class="n">bfin_capture_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">card_name</span> <span class="o">=</span> <span class="s">&quot;BF537&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">inputs</span> <span class="o">=</span> <span class="n">vs6624_inputs</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_inputs</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">vs6624_inputs</span><span class="p">),</span>
	<span class="p">.</span><span class="n">routes</span> <span class="o">=</span> <span class="n">vs6624_routes</span><span class="p">,</span>
	<span class="p">.</span><span class="n">i2c_adapter_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">board_info</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="s">&quot;vs6624&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">addr</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">vs6624_ce_pin</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">ppi_info</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ppi_info</span><span class="p">,</span>
	<span class="p">.</span><span class="n">ppi_control</span> <span class="o">=</span> <span class="p">(</span><span class="n">PACK_EN</span> <span class="o">|</span> <span class="n">DLEN_8</span> <span class="o">|</span> <span class="n">XFR_TYPE</span> <span class="o">|</span> <span class="mh">0x0020</span><span class="p">),</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_capture_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_capture&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_capture_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SERIAL_BFIN) || defined(CONFIG_SERIAL_BFIN_MODULE)</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_UART0</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_uart0_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">UART0_THR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">UART0_GCTL</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_UART0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_UART0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#ifdef CONFIG_BFIN_UART0_CTSRTS</span>
	<span class="p">{</span>	<span class="cm">/* CTS pin */</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">GPIO_PG7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">GPIO_PG7</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IO</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>	<span class="cm">/* RTS pin */</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">GPIO_PG6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">GPIO_PG6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IO</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bfin_uart0_peripherals</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">P_UART0_TX</span><span class="p">,</span> <span class="n">P_UART0_RX</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_uart0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-uart&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_uart0_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_uart0_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_uart0_peripherals</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_UART1</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_uart1_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">UART1_THR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">UART1_GCTL</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART1_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART1_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART1_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART1_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_UART1_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_UART1_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bfin_uart1_peripherals</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">P_UART1_TX</span><span class="p">,</span> <span class="n">P_UART1_RX</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_uart1_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-uart&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_uart1_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_uart1_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_uart1_peripherals</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BFIN_SIR) || defined(CONFIG_BFIN_SIR_MODULE)</span>
<span class="cp">#ifdef CONFIG_BFIN_SIR0</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sir0_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0xFFC00400</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0xFFC004FF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART0_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_UART0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_UART0_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sir0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_sir&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sir0_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sir0_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_BFIN_SIR1</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sir1_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0xFFC02000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0xFFC020FF</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_UART1_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_UART1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_UART1_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sir1_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_sir&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sir1_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sir1_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_I2C_BLACKFIN_TWI) || defined(CONFIG_I2C_BLACKFIN_TWI_MODULE)</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">u16</span> <span class="n">bfin_twi0_pins</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="n">P_TWI0_SCL</span><span class="p">,</span> <span class="n">P_TWI0_SDA</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_twi0_resource</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">TWI0_REGBASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">TWI0_REGBASE</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_TWI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>   <span class="o">=</span> <span class="n">IRQ_TWI</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">i2c_bfin_twi_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;i2c-bfin-twi&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_twi0_resource</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_twi0_resource</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_twi0_pins</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_KEYBOARD_ADP5588) || defined(CONFIG_KEYBOARD_ADP5588_MODULE)</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">adp5588_keymap</span><span class="p">[</span><span class="n">ADP5588_KEYMAPSIZE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_GRAVE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">1</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_1</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">2</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_2</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">3</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_3</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">4</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_4</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">5</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_5</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">6</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_6</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">7</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_7</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">8</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_8</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">9</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_9</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">10</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_0</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">11</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_MINUS</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">12</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_EQUAL</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">13</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_BACKSLASH</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">15</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP0</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">16</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_Q</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">17</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_W</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">18</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_E</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">19</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_R</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">20</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_T</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">21</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_Y</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">22</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_U</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">23</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_I</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">24</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_O</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">25</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_P</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">26</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_LEFTBRACE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">27</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_RIGHTBRACE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">29</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP1</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">30</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP2</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">31</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP3</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">32</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_A</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">33</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_S</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">34</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_D</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">35</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_F</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">36</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_G</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">37</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_H</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">38</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_J</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">39</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_K</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">40</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_L</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">41</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_SEMICOLON</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">42</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_APOSTROPHE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">43</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_BACKSLASH</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">45</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP4</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">46</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP5</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">47</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP6</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">48</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_102ND</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">49</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_Z</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">50</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_X</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">51</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_C</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">52</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_V</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">53</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_B</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">54</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_N</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">55</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_M</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">56</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_COMMA</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">57</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_DOT</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">58</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_SLASH</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">60</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KPDOT</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">61</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP7</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">62</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP8</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">63</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KP9</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">64</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_SPACE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">65</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_BACKSPACE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">66</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_TAB</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">67</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KPENTER</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">68</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_ENTER</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">69</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_ESC</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">70</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_DELETE</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">74</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_KPMINUS</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">76</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_UP</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">77</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_DOWN</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">78</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_RIGHT</span><span class="p">,</span>
	<span class="p">[</span><span class="mi">79</span><span class="p">]</span>	 <span class="o">=</span> <span class="n">KEY_LEFT</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5588_kpad_platform_data</span> <span class="n">adp5588_kpad_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">rows</span>		<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
	<span class="p">.</span><span class="n">cols</span>		<span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
	<span class="p">.</span><span class="n">keymap</span>		<span class="o">=</span> <span class="n">adp5588_keymap</span><span class="p">,</span>
	<span class="p">.</span><span class="n">keymapsize</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adp5588_keymap</span><span class="p">),</span>
	<span class="p">.</span><span class="n">repeat</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_PMIC_ADP5520) || defined(CONFIG_PMIC_ADP5520_MODULE)</span>
<span class="cp">#include &lt;linux/mfd/adp5520.h&gt;</span>

	<span class="cm">/*</span>
<span class="cm">	 *  ADP5520/5501 Backlight Data</span>
<span class="cm">	 */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5520_backlight_platform_data</span> <span class="n">adp5520_backlight_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">fade_in</span>		<span class="o">=</span> <span class="n">ADP5520_FADE_T_1200ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fade_out</span>		<span class="o">=</span> <span class="n">ADP5520_FADE_T_1200ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fade_led_law</span>		<span class="o">=</span> <span class="n">ADP5520_BL_LAW_LINEAR</span><span class="p">,</span>
	<span class="p">.</span><span class="n">en_ambl_sens</span>		<span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">abml_filt</span>		<span class="o">=</span> <span class="n">ADP5520_BL_AMBL_FILT_640ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">l1_daylight_max</span>	<span class="o">=</span> <span class="n">ADP5520_BL_CUR_mA</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l1_daylight_dim</span>	<span class="o">=</span> <span class="n">ADP5520_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l2_office_max</span>		<span class="o">=</span> <span class="n">ADP5520_BL_CUR_mA</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l2_office_dim</span>		<span class="o">=</span> <span class="n">ADP5520_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l3_dark_max</span>		<span class="o">=</span> <span class="n">ADP5520_BL_CUR_mA</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l3_dark_dim</span>		<span class="o">=</span> <span class="n">ADP5520_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l2_trip</span>		<span class="o">=</span> <span class="n">ADP5520_L2_COMP_CURR_uA</span><span class="p">(</span><span class="mi">700</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l2_hyst</span>		<span class="o">=</span> <span class="n">ADP5520_L2_COMP_CURR_uA</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l3_trip</span>		<span class="o">=</span> <span class="n">ADP5520_L3_COMP_CURR_uA</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span>
	<span class="p">.</span><span class="n">l3_hyst</span>		<span class="o">=</span> <span class="n">ADP5520_L3_COMP_CURR_uA</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="p">};</span>

	<span class="cm">/*</span>
<span class="cm">	 *  ADP5520/5501 LEDs Data</span>
<span class="cm">	 */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">led_info</span> <span class="n">adp5520_leds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;adp5520-led1&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">FLAG_ID_ADP5520_LED1_ADP5501_LED0</span> <span class="o">|</span> <span class="n">ADP5520_LED_OFFT_600ms</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#ifdef ADP5520_EN_ALL_LEDS</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;adp5520-led2&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">FLAG_ID_ADP5520_LED2_ADP5501_LED1</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;adp5520-led3&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">FLAG_ID_ADP5520_LED3_ADP5501_LED2</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5520_leds_platform_data</span> <span class="n">adp5520_leds_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">num_leds</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adp5520_leds</span><span class="p">),</span>
	<span class="p">.</span><span class="n">leds</span> <span class="o">=</span> <span class="n">adp5520_leds</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fade_in</span> <span class="o">=</span> <span class="n">ADP5520_FADE_T_600ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">fade_out</span> <span class="o">=</span> <span class="n">ADP5520_FADE_T_600ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">led_on_time</span> <span class="o">=</span> <span class="n">ADP5520_LED_ONT_600ms</span><span class="p">,</span>
<span class="p">};</span>

	<span class="cm">/*</span>
<span class="cm">	 *  ADP5520 GPIO Data</span>
<span class="cm">	 */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5520_gpio_platform_data</span> <span class="n">adp5520_gpio_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">gpio_start</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio_en_mask</span> <span class="o">=</span> <span class="n">ADP5520_GPIO_C1</span> <span class="o">|</span> <span class="n">ADP5520_GPIO_C2</span> <span class="o">|</span> <span class="n">ADP5520_GPIO_R2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio_pullup_mask</span> <span class="o">=</span> <span class="n">ADP5520_GPIO_C1</span> <span class="o">|</span> <span class="n">ADP5520_GPIO_C2</span> <span class="o">|</span> <span class="n">ADP5520_GPIO_R2</span><span class="p">,</span>
<span class="p">};</span>

	<span class="cm">/*</span>
<span class="cm">	 *  ADP5520 Keypad Data</span>
<span class="cm">	 */</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">adp5520_keymap</span><span class="p">[</span><span class="n">ADP5520_KEYMAPSIZE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_GRAVE</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_1</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_2</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_3</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_4</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_5</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_6</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_7</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_8</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_9</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_0</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_MINUS</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_EQUAL</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_BACKSLASH</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_BACKSPACE</span><span class="p">,</span>
	<span class="p">[</span><span class="n">ADP5520_KEY</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>	<span class="o">=</span> <span class="n">KEY_ENTER</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5520_keys_platform_data</span> <span class="n">adp5520_keys_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">rows_en_mask</span>	<span class="o">=</span> <span class="n">ADP5520_ROW_R3</span> <span class="o">|</span> <span class="n">ADP5520_ROW_R2</span> <span class="o">|</span> <span class="n">ADP5520_ROW_R1</span> <span class="o">|</span> <span class="n">ADP5520_ROW_R0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">cols_en_mask</span>	<span class="o">=</span> <span class="n">ADP5520_COL_C3</span> <span class="o">|</span> <span class="n">ADP5520_COL_C2</span> <span class="o">|</span> <span class="n">ADP5520_COL_C1</span> <span class="o">|</span> <span class="n">ADP5520_COL_C0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">keymap</span>		<span class="o">=</span> <span class="n">adp5520_keymap</span><span class="p">,</span>
	<span class="p">.</span><span class="n">keymapsize</span>	<span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adp5520_keymap</span><span class="p">),</span>
	<span class="p">.</span><span class="n">repeat</span>		<span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>

	<span class="cm">/*</span>
<span class="cm">	 *  ADP5520/5501 Multifunction Device Init Data</span>
<span class="cm">	 */</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5520_platform_data</span> <span class="n">adp5520_pdev_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">backlight</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp5520_backlight_data</span><span class="p">,</span>
	<span class="p">.</span><span class="n">leds</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp5520_leds_data</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp5520_gpio_data</span><span class="p">,</span>
	<span class="p">.</span><span class="n">keys</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp5520_keys_data</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_GPIO_ADP5588) || defined(CONFIG_GPIO_ADP5588_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">adp5588_gpio_platform_data</span> <span class="n">adp5588_gpio_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">gpio_start</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
	<span class="p">.</span><span class="n">pullup_dis_mask</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BACKLIGHT_ADP8870) || defined(CONFIG_BACKLIGHT_ADP8870_MODULE)</span>
<span class="cp">#include &lt;linux/i2c/adp8870.h&gt;</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">led_info</span> <span class="n">adp8870_leds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;adp8870-led7&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">ADP8870_LED_D7</span> <span class="o">|</span> <span class="n">ADP8870_LED_OFFT_600ms</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>


<span class="k">static</span> <span class="k">struct</span> <span class="n">adp8870_backlight_platform_data</span> <span class="n">adp8870_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">bl_led_assign</span> <span class="o">=</span> <span class="n">ADP8870_BL_D1</span> <span class="o">|</span> <span class="n">ADP8870_BL_D2</span> <span class="o">|</span> <span class="n">ADP8870_BL_D3</span> <span class="o">|</span>
			 <span class="n">ADP8870_BL_D4</span> <span class="o">|</span> <span class="n">ADP8870_BL_D5</span> <span class="o">|</span> <span class="n">ADP8870_BL_D6</span><span class="p">,</span>	<span class="cm">/* 1 = Backlight 0 = Individual LED */</span>
	<span class="p">.</span><span class="n">pwm_assign</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>				<span class="cm">/* 1 = Enables PWM mode */</span>

	<span class="p">.</span><span class="n">bl_fade_in</span> <span class="o">=</span> <span class="n">ADP8870_FADE_T_1200ms</span><span class="p">,</span>		<span class="cm">/* Backlight Fade-In Timer */</span>
	<span class="p">.</span><span class="n">bl_fade_out</span> <span class="o">=</span> <span class="n">ADP8870_FADE_T_1200ms</span><span class="p">,</span>		<span class="cm">/* Backlight Fade-Out Timer */</span>
	<span class="p">.</span><span class="n">bl_fade_law</span> <span class="o">=</span> <span class="n">ADP8870_FADE_LAW_CUBIC1</span><span class="p">,</span>		<span class="cm">/* fade-on/fade-off transfer characteristic */</span>

	<span class="p">.</span><span class="n">en_ambl_sens</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>				<span class="cm">/* 1 = enable ambient light sensor */</span>
	<span class="p">.</span><span class="n">abml_filt</span> <span class="o">=</span> <span class="n">ADP8870_BL_AMBL_FILT_320ms</span><span class="p">,</span>	<span class="cm">/* Light sensor filter time */</span>

	<span class="p">.</span><span class="n">l1_daylight_max</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>	<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l1_daylight_dim</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>	<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l2_bright_max</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span>		<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l2_bright_dim</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>		<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l3_office_max</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>		<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l3_office_dim</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>		<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l4_indoor_max</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>		<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l4_indor_dim</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>		<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l5_dark_max</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>		<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l5_dark_dim</span> <span class="o">=</span> <span class="n">ADP8870_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>		<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>

	<span class="p">.</span><span class="n">l2_trip</span> <span class="o">=</span> <span class="n">ADP8870_L2_COMP_CURR_uA</span><span class="p">(</span><span class="mi">710</span><span class="p">),</span>	<span class="cm">/* use L2_COMP_CURR_uA(I) 0 &lt;= I &lt;= 1106 uA */</span>
	<span class="p">.</span><span class="n">l2_hyst</span> <span class="o">=</span> <span class="n">ADP8870_L2_COMP_CURR_uA</span><span class="p">(</span><span class="mi">73</span><span class="p">),</span>		<span class="cm">/* use L2_COMP_CURR_uA(I) 0 &lt;= I &lt;= 1106 uA */</span>
	<span class="p">.</span><span class="n">l3_trip</span> <span class="o">=</span> <span class="n">ADP8870_L3_COMP_CURR_uA</span><span class="p">(</span><span class="mi">389</span><span class="p">),</span>	<span class="cm">/* use L3_COMP_CURR_uA(I) 0 &lt;= I &lt;= 551 uA */</span>
	<span class="p">.</span><span class="n">l3_hyst</span> <span class="o">=</span> <span class="n">ADP8870_L3_COMP_CURR_uA</span><span class="p">(</span><span class="mi">54</span><span class="p">),</span>		<span class="cm">/* use L3_COMP_CURR_uA(I) 0 &lt;= I &lt;= 551 uA */</span>
	<span class="p">.</span><span class="n">l4_trip</span> <span class="o">=</span> <span class="n">ADP8870_L4_COMP_CURR_uA</span><span class="p">(</span><span class="mi">167</span><span class="p">),</span>	<span class="cm">/* use L4_COMP_CURR_uA(I) 0 &lt;= I &lt;= 275 uA */</span>
	<span class="p">.</span><span class="n">l4_hyst</span> <span class="o">=</span> <span class="n">ADP8870_L4_COMP_CURR_uA</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>		<span class="cm">/* use L4_COMP_CURR_uA(I) 0 &lt;= I &lt;= 275 uA */</span>
	<span class="p">.</span><span class="n">l5_trip</span> <span class="o">=</span> <span class="n">ADP8870_L5_COMP_CURR_uA</span><span class="p">(</span><span class="mi">43</span><span class="p">),</span>		<span class="cm">/* use L5_COMP_CURR_uA(I) 0 &lt;= I &lt;= 138 uA */</span>
	<span class="p">.</span><span class="n">l5_hyst</span> <span class="o">=</span> <span class="n">ADP8870_L5_COMP_CURR_uA</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>		<span class="cm">/* use L6_COMP_CURR_uA(I) 0 &lt;= I &lt;= 138 uA */</span>

	<span class="p">.</span><span class="n">leds</span> <span class="o">=</span> <span class="n">adp8870_leds</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_leds</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adp8870_leds</span><span class="p">),</span>
	<span class="p">.</span><span class="n">led_fade_law</span> <span class="o">=</span> <span class="n">ADP8870_FADE_LAW_SQUARE</span><span class="p">,</span>	<span class="cm">/* fade-on/fade-off transfer characteristic */</span>
	<span class="p">.</span><span class="n">led_fade_in</span> <span class="o">=</span> <span class="n">ADP8870_FADE_T_600ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">led_fade_out</span> <span class="o">=</span> <span class="n">ADP8870_FADE_T_600ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">led_on_time</span> <span class="o">=</span> <span class="n">ADP8870_LED_ONT_200ms</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BACKLIGHT_ADP8860) || defined(CONFIG_BACKLIGHT_ADP8860_MODULE)</span>
<span class="cp">#include &lt;linux/i2c/adp8860.h&gt;</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">led_info</span> <span class="n">adp8860_leds</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;adp8860-led7&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">default_trigger</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">ADP8860_LED_D7</span> <span class="o">|</span> <span class="n">ADP8860_LED_OFFT_600ms</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">adp8860_backlight_platform_data</span> <span class="n">adp8860_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">bl_led_assign</span> <span class="o">=</span> <span class="n">ADP8860_BL_D1</span> <span class="o">|</span> <span class="n">ADP8860_BL_D2</span> <span class="o">|</span> <span class="n">ADP8860_BL_D3</span> <span class="o">|</span>
			 <span class="n">ADP8860_BL_D4</span> <span class="o">|</span> <span class="n">ADP8860_BL_D5</span> <span class="o">|</span> <span class="n">ADP8860_BL_D6</span><span class="p">,</span>	<span class="cm">/* 1 = Backlight 0 = Individual LED */</span>

	<span class="p">.</span><span class="n">bl_fade_in</span> <span class="o">=</span> <span class="n">ADP8860_FADE_T_1200ms</span><span class="p">,</span>		<span class="cm">/* Backlight Fade-In Timer */</span>
	<span class="p">.</span><span class="n">bl_fade_out</span> <span class="o">=</span> <span class="n">ADP8860_FADE_T_1200ms</span><span class="p">,</span>		<span class="cm">/* Backlight Fade-Out Timer */</span>
	<span class="p">.</span><span class="n">bl_fade_law</span> <span class="o">=</span> <span class="n">ADP8860_FADE_LAW_CUBIC1</span><span class="p">,</span>		<span class="cm">/* fade-on/fade-off transfer characteristic */</span>

	<span class="p">.</span><span class="n">en_ambl_sens</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>				<span class="cm">/* 1 = enable ambient light sensor */</span>
	<span class="p">.</span><span class="n">abml_filt</span> <span class="o">=</span> <span class="n">ADP8860_BL_AMBL_FILT_320ms</span><span class="p">,</span>	<span class="cm">/* Light sensor filter time */</span>

	<span class="p">.</span><span class="n">l1_daylight_max</span> <span class="o">=</span> <span class="n">ADP8860_BL_CUR_mA</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>	<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l1_daylight_dim</span> <span class="o">=</span> <span class="n">ADP8860_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>	<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l2_office_max</span> <span class="o">=</span> <span class="n">ADP8860_BL_CUR_mA</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>		<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l2_office_dim</span> <span class="o">=</span> <span class="n">ADP8860_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>		<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l3_dark_max</span> <span class="o">=</span> <span class="n">ADP8860_BL_CUR_mA</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>		<span class="cm">/* use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>
	<span class="p">.</span><span class="n">l3_dark_dim</span> <span class="o">=</span> <span class="n">ADP8860_BL_CUR_mA</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>		<span class="cm">/* typ = 0, use BL_CUR_mA(I) 0 &lt;= I &lt;= 30 mA */</span>

	<span class="p">.</span><span class="n">l2_trip</span> <span class="o">=</span> <span class="n">ADP8860_L2_COMP_CURR_uA</span><span class="p">(</span><span class="mi">710</span><span class="p">),</span>	<span class="cm">/* use L2_COMP_CURR_uA(I) 0 &lt;= I &lt;= 1106 uA */</span>
	<span class="p">.</span><span class="n">l2_hyst</span> <span class="o">=</span> <span class="n">ADP8860_L2_COMP_CURR_uA</span><span class="p">(</span><span class="mi">73</span><span class="p">),</span>		<span class="cm">/* use L2_COMP_CURR_uA(I) 0 &lt;= I &lt;= 1106 uA */</span>
	<span class="p">.</span><span class="n">l3_trip</span> <span class="o">=</span> <span class="n">ADP8860_L3_COMP_CURR_uA</span><span class="p">(</span><span class="mi">43</span><span class="p">),</span>		<span class="cm">/* use L3_COMP_CURR_uA(I) 0 &lt;= I &lt;= 138 uA */</span>
	<span class="p">.</span><span class="n">l3_hyst</span> <span class="o">=</span> <span class="n">ADP8860_L3_COMP_CURR_uA</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>		<span class="cm">/* use L3_COMP_CURR_uA(I) 0 &lt;= I &lt;= 138 uA */</span>

	<span class="p">.</span><span class="n">leds</span> <span class="o">=</span> <span class="n">adp8860_leds</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_leds</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">adp8860_leds</span><span class="p">),</span>
	<span class="p">.</span><span class="n">led_fade_law</span> <span class="o">=</span> <span class="n">ADP8860_FADE_LAW_SQUARE</span><span class="p">,</span>	<span class="cm">/* fade-on/fade-off transfer characteristic */</span>
	<span class="p">.</span><span class="n">led_fade_in</span> <span class="o">=</span> <span class="n">ADP8860_FADE_T_600ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">led_fade_out</span> <span class="o">=</span> <span class="n">ADP8860_FADE_T_600ms</span><span class="p">,</span>
	<span class="p">.</span><span class="n">led_on_time</span> <span class="o">=</span> <span class="n">ADP8860_LED_ONT_200ms</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_REGULATOR_AD5398) || defined(CONFIG_REGULATOR_AD5398_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_consumer_supply</span> <span class="n">ad5398_consumer</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">supply</span> <span class="o">=</span> <span class="s">&quot;current&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="n">ad5398_regulator_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;current range&quot;</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_uA</span> <span class="o">=</span> <span class="mi">120000</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid_ops_mask</span> <span class="o">=</span> <span class="n">REGULATOR_CHANGE_CURRENT</span> <span class="o">|</span> <span class="n">REGULATOR_CHANGE_STATUS</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_consumer_supplies</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">consumer_supplies</span>     <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad5398_consumer</span><span class="p">,</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_REGULATOR_VIRTUAL_CONSUMER) || \</span>
<span class="cp">	defined(CONFIG_REGULATOR_VIRTUAL_CONSUMER_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">ad5398_virt_consumer_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;reg-virt-consumer&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="s">&quot;current&quot;</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_REGULATOR_USERSPACE_CONSUMER) || \</span>
<span class="cp">	defined(CONFIG_REGULATOR_USERSPACE_CONSUMER_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_bulk_data</span> <span class="n">ad5398_bulk_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">supply</span> <span class="o">=</span> <span class="s">&quot;current&quot;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_userspace_consumer_data</span> <span class="n">ad5398_userspace_comsumer_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;ad5398&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_supplies</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">supplies</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad5398_bulk_data</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">ad5398_userspace_consumer_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;reg-userspace-consumer&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ad5398_userspace_comsumer_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7410) || defined(CONFIG_ADT7410_MODULE)</span>
<span class="cm">/* INT bound temperature alarm event. line 1 */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">adt7410_platform_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">IRQ_PG4</span><span class="p">,</span> <span class="n">IRQF_TRIGGER_LOW</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7316_I2C) || defined(CONFIG_ADT7316_I2C_MODULE)</span>
<span class="cm">/* INT bound temperature alarm event. line 1 */</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">adt7316_i2c_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">IRQF_TRIGGER_LOW</span><span class="p">,</span> <span class="cm">/* interrupt flags */</span>
	<span class="n">GPIO_PF4</span><span class="p">,</span> <span class="cm">/* ldac_pin, 0 means DAC/LDAC registers control DAC update */</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">i2c_board_info</span> <span class="n">__initdata</span> <span class="n">bfin_i2c_board_info</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#ifdef CONFIG_SND_SOC_AD193X_I2C</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad1937&quot;</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_ADAV80X) || defined(CONFIG_SND_SOC_ADAV80X_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adav803&quot;</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_INPUT_AD714X_I2C) || defined(CONFIG_INPUT_AD714X_I2C_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad7142_captouch&quot;</span><span class="p">,</span> <span class="mh">0x2C</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">ad7142_i2c_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7150) || defined(CONFIG_AD7150_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad7150&quot;</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span> <span class="cm">/* fixme: use real interrupt number */</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7152) || defined(CONFIG_AD7152_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad7152&quot;</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD774X) || defined(CONFIG_AD774X_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad774x&quot;</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADE7854_I2C) || defined(CONFIG_ADE7854_I2C_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ade7854&quot;</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT75) || defined(CONFIG_ADT75_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adt75&quot;</span><span class="p">,</span> <span class="mh">0x9</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7410) || defined(CONFIG_ADT7410_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adt7410&quot;</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">),</span>
		<span class="cm">/* CT critical temperature event. line 0 */</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adt7410_platform_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_AD7291) || defined(CONFIG_AD7291_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad7291&quot;</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_ADT7316_I2C) || defined(CONFIG_ADT7316_I2C_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adt7316&quot;</span><span class="p">,</span> <span class="mh">0x48</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG6</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adt7316_i2c_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BFIN_TWI_LCD) || defined(CONFIG_BFIN_TWI_LCD_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;pcf8574_lcd&quot;</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_INPUT_PCF8574) || defined(CONFIG_INPUT_PCF8574_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;pcf8574_keypad&quot;</span><span class="p">,</span> <span class="mh">0x27</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG6</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_TOUCHSCREEN_AD7879_I2C) || defined(CONFIG_TOUCHSCREEN_AD7879_I2C_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad7879&quot;</span><span class="p">,</span> <span class="mh">0x2F</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">bfin_ad7879_ts_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_KEYBOARD_ADP5588) || defined(CONFIG_KEYBOARD_ADP5588_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adp5588-keys&quot;</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adp5588_kpad_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_PMIC_ADP5520) || defined(CONFIG_PMIC_ADP5520_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;pmic-adp5520&quot;</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adp5520_pdev_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_INPUT_ADXL34X_I2C) || defined(CONFIG_INPUT_ADXL34X_I2C_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adxl34x&quot;</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">),</span>
		<span class="p">.</span><span class="n">irq</span> <span class="o">=</span> <span class="n">IRQ_PG3</span><span class="p">,</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adxl34x_info</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_GPIO_ADP5588) || defined(CONFIG_GPIO_ADP5588_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adp5588-gpio&quot;</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">),</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adp5588_gpio_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_FB_BFIN_7393) || defined(CONFIG_FB_BFIN_7393_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;bfin-adv7393&quot;</span><span class="p">,</span> <span class="mh">0x2B</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_FB_BF537_LQ035) || defined(CONFIG_FB_BF537_LQ035_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;bf537-lq035-ad5280&quot;</span><span class="p">,</span> <span class="mh">0x2F</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_BACKLIGHT_ADP8870) || defined(CONFIG_BACKLIGHT_ADP8870_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adp8870&quot;</span><span class="p">,</span> <span class="mh">0x2B</span><span class="p">),</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adp8870_pdata</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SND_SOC_ADAU1371) || defined(CONFIG_SND_SOC_ADAU1371_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adau1371&quot;</span><span class="p">,</span> <span class="mh">0x1A</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SND_SOC_ADAU1761) || defined(CONFIG_SND_SOC_ADAU1761_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adau1761&quot;</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SND_SOC_ADAU1361) || defined(CONFIG_SND_SOC_ADAU1361_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adau1361&quot;</span><span class="p">,</span> <span class="mh">0x38</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SND_SOC_ADAU1701) || defined(CONFIG_SND_SOC_ADAU1701_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adau1701&quot;</span><span class="p">,</span> <span class="mh">0x34</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_AD525X_DPOT) || defined(CONFIG_AD525X_DPOT_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad5258&quot;</span><span class="p">,</span> <span class="mh">0x18</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SND_SOC_SSM2602) || defined(CONFIG_SND_SOC_SSM2602_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ssm2602&quot;</span><span class="p">,</span> <span class="mh">0x1b</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_REGULATOR_AD5398) || defined(CONFIG_REGULATOR_AD5398_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad5398&quot;</span><span class="p">,</span> <span class="mh">0xC</span><span class="p">),</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">ad5398_regulator_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_BACKLIGHT_ADP8860) || defined(CONFIG_BACKLIGHT_ADP8860_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adp8860&quot;</span><span class="p">,</span> <span class="mh">0x2A</span><span class="p">),</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">adp8860_pdata</span><span class="p">,</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SND_SOC_ADAU1373) || defined(CONFIG_SND_SOC_ADAU1373_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;adau1373&quot;</span><span class="p">,</span> <span class="mh">0x1A</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_BFIN_TWI_LCD) || defined(CONFIG_BFIN_TWI_LCD_MODULE)</span>
	<span class="p">{</span>
		<span class="n">I2C_BOARD_INFO</span><span class="p">(</span><span class="s">&quot;ad5252&quot;</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">),</span>
	<span class="p">},</span>
<span class="cp">#endif</span>
<span class="p">};</span>
<span class="cp">#if defined(CONFIG_SERIAL_BFIN_SPORT) || defined(CONFIG_SERIAL_BFIN_SPORT_MODULE) \</span>
<span class="cp">|| defined(CONFIG_BFIN_SPORT) || defined(CONFIG_BFIN_SPORT_MODULE)</span>
<span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bfin_sport0_peripherals</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">P_SPORT0_TFS</span><span class="p">,</span> <span class="n">P_SPORT0_DTPRI</span><span class="p">,</span> <span class="n">P_SPORT0_TSCLK</span><span class="p">,</span> <span class="n">P_SPORT0_RFS</span><span class="p">,</span>
	<span class="n">P_SPORT0_DRPRI</span><span class="p">,</span> <span class="n">P_SPORT0_RSCLK</span><span class="p">,</span> <span class="n">P_SPORT0_DRSEC</span><span class="p">,</span> <span class="n">P_SPORT0_DTSEC</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_SERIAL_BFIN_SPORT) || defined(CONFIG_SERIAL_BFIN_SPORT_MODULE)</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_SPORT0_UART</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sport0_uart_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">SPORT0_TCR1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">SPORT0_MRCS3</span><span class="o">+</span><span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sport0_uart_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-sport-uart&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sport0_uart_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sport0_uart_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_sport0_peripherals</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_SPORT1_UART</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sport1_uart_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">SPORT1_TCR1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">SPORT1_MRCS3</span><span class="o">+</span><span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT1_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT1_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT1_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT1_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">bfin_sport1_peripherals</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">P_SPORT1_TFS</span><span class="p">,</span> <span class="n">P_SPORT1_DTPRI</span><span class="p">,</span> <span class="n">P_SPORT1_TSCLK</span><span class="p">,</span> <span class="n">P_SPORT1_RFS</span><span class="p">,</span>
	<span class="n">P_SPORT1_DRPRI</span><span class="p">,</span> <span class="n">P_SPORT1_RSCLK</span><span class="p">,</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sport1_uart_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-sport-uart&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sport1_uart_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sport1_uart_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_sport1_peripherals</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_BFIN_SPORT) || defined(CONFIG_BFIN_SPORT_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_sport0_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">SPORT0_TCR1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">SPORT0_MRCS3</span><span class="o">+</span><span class="mi">4</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_RX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_TX</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">IRQ_SPORT0_ERROR</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_SPORT0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_SPORT0_TX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">CH_SPORT0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">CH_SPORT0_RX</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_DMA</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_sport0_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin_sport_raw&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_sport0_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_sport0_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_sport0_peripherals</span><span class="p">,</span> <span class="cm">/* Passed to driver */</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_PATA_PLATFORM) || defined(CONFIG_PATA_PLATFORM_MODULE)</span>
<span class="cp">#define CF_IDE_NAND_CARD_USE_HDD_INTERFACE</span>
<span class="cm">/* #define CF_IDE_NAND_CARD_USE_CF_IN_COMMON_MEMORY_MODE */</span>

<span class="cp">#ifdef CF_IDE_NAND_CARD_USE_HDD_INTERFACE</span>
<span class="cp">#define PATA_INT	IRQ_PF5</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">pata_platform_info</span> <span class="n">bfin_pata_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">ioport_shift</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">irq_flags</span> <span class="o">=</span> <span class="n">IRQF_TRIGGER_HIGH</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_pata_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20314020</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x2031403F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x2031401C</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x2031401F</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">PATA_INT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">PATA_INT</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#elif defined(CF_IDE_NAND_CARD_USE_CF_IN_COMMON_MEMORY_MODE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">pata_platform_info</span> <span class="n">bfin_pata_platform_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">ioport_shift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">};</span>
<span class="cm">/* CompactFlash Storage Card Memory Mapped Addressing</span>
<span class="cm"> * /REG = A11 = 1</span>
<span class="cm"> */</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_pata_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x20211800</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x20211807</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">start</span> <span class="o">=</span> <span class="mh">0x2021180E</span><span class="p">,</span>	<span class="cm">/* Device Ctl */</span>
		<span class="p">.</span><span class="n">end</span> <span class="o">=</span> <span class="mh">0x2021180E</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">IORESOURCE_MEM</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_pata_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;pata_platform&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_pata_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_pata_resources</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_pata_platform_data</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cclk_vlev_datasheet</span><span class="p">[]</span> <span class="o">=</span>
<span class="p">{</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_085</span><span class="p">,</span> <span class="mi">250000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_090</span><span class="p">,</span> <span class="mi">376000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_095</span><span class="p">,</span> <span class="mi">426000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_100</span><span class="p">,</span> <span class="mi">426000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_105</span><span class="p">,</span> <span class="mi">476000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_110</span><span class="p">,</span> <span class="mi">476000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_115</span><span class="p">,</span> <span class="mi">476000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_120</span><span class="p">,</span> <span class="mi">500000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_125</span><span class="p">,</span> <span class="mi">533000000</span><span class="p">),</span>
	<span class="n">VRPAIR</span><span class="p">(</span><span class="n">VLEV_130</span><span class="p">,</span> <span class="mi">600000000</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin_dpmc_platform_data</span> <span class="n">bfin_dmpc_vreg_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">tuple_tab</span> <span class="o">=</span> <span class="n">cclk_vlev_datasheet</span><span class="p">,</span>
	<span class="p">.</span><span class="n">tabsize</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">cclk_vlev_datasheet</span><span class="p">),</span>
	<span class="p">.</span><span class="n">vr_settling_time</span> <span class="o">=</span> <span class="mi">25</span> <span class="cm">/* us */</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_dpmc</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin dpmc&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_dmpc_vreg_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_I2S) || defined(CONFIG_SND_BF5XX_I2S_MODULE) || \</span>
<span class="cp">	defined(CONFIG_SND_BF5XX_TDM) || defined(CONFIG_SND_BF5XX_TDM_MODULE) || \</span>
<span class="cp">	defined(CONFIG_SND_BF5XX_AC97) || defined(CONFIG_SND_BF5XX_AC97_MODULE)</span>

<span class="cp">#define SPORT_REQ(x) \</span>
<span class="cp">	[x] = {P_SPORT##x##_TFS, P_SPORT##x##_DTPRI, P_SPORT##x##_TSCLK, \</span>
<span class="cp">		P_SPORT##x##_RFS, P_SPORT##x##_DRPRI, P_SPORT##x##_RSCLK, 0}</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">u16</span> <span class="n">bfin_snd_pin</span><span class="p">[][</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">SPORT_REQ</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">SPORT_REQ</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">bfin_snd_platform_data</span> <span class="n">bfin_snd_data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_snd_pin</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
	<span class="p">},</span>
	<span class="p">{</span>
		<span class="p">.</span><span class="n">pin_req</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_snd_pin</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#define BFIN_SND_RES(x) \</span>
<span class="cp">	[x] = { \</span>
<span class="cp">		{ \</span>
<span class="cp">			.start = SPORT##x##_TCR1, \</span>
<span class="cp">			.end = SPORT##x##_TCR1, \</span>
<span class="cp">			.flags = IORESOURCE_MEM \</span>
<span class="cp">		}, \</span>
<span class="cp">		{ \</span>
<span class="cp">			.start = CH_SPORT##x##_RX, \</span>
<span class="cp">			.end = CH_SPORT##x##_RX, \</span>
<span class="cp">			.flags = IORESOURCE_DMA, \</span>
<span class="cp">		}, \</span>
<span class="cp">		{ \</span>
<span class="cp">			.start = CH_SPORT##x##_TX, \</span>
<span class="cp">			.end = CH_SPORT##x##_TX, \</span>
<span class="cp">			.flags = IORESOURCE_DMA, \</span>
<span class="cp">		}, \</span>
<span class="cp">		{ \</span>
<span class="cp">			.start = IRQ_SPORT##x##_ERROR, \</span>
<span class="cp">			.end = IRQ_SPORT##x##_ERROR, \</span>
<span class="cp">			.flags = IORESOURCE_IRQ, \</span>
<span class="cp">		} \</span>
<span class="cp">	}</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">bfin_snd_resources</span><span class="p">[][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">BFIN_SND_RES</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
	<span class="n">BFIN_SND_RES</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_I2S) || defined(CONFIG_SND_BF5XX_I2S_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_i2s_pcm</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-i2s-pcm-audio&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_TDM) || defined(CONFIG_SND_BF5XX_TDM_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_tdm_pcm</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-tdm-pcm-audio&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_AC97) || defined(CONFIG_SND_BF5XX_AC97_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_ac97_pcm</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-ac97-pcm-audio&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_AD73311) || \</span>
<span class="cp">				defined(CONFIG_SND_BF5XX_SOC_AD73311_MODULE)</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="n">ad73311_gpio</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="n">GPIO_PF4</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_ad73311_machine</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-snd-ad73311&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">ad73311_gpio</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_AD73311) || defined(CONFIG_SND_SOC_AD73311_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_ad73311_codec_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;ad73311&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_BFIN_EVAL_ADAV80X) || \</span>
<span class="cp">	defined(CONFIG_SND_SOC_BFIN_EVAL_ADAV80X_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_eval_adav801_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-eval-adav801&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_I2S) || defined(CONFIG_SND_BF5XX_SOC_I2S_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_i2s</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-i2s&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_snd_resources</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">]),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_snd_resources</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">],</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_snd_data</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">],</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_TDM) || defined(CONFIG_SND_BF5XX_SOC_TDM_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_tdm</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-tdm&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_snd_resources</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">]),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_snd_resources</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">],</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_snd_data</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">],</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_AC97) || defined(CONFIG_SND_BF5XX_SOC_AC97_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bfin_ac97</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-ac97&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_snd_resources</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">]),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">bfin_snd_resources</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">],</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">bfin_snd_data</span><span class="p">[</span><span class="n">CONFIG_SND_BF5XX_SPORT_NUM</span><span class="p">],</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_REGULATOR_FIXED_VOLTAGE) || defined(CONFIG_REGULATOR_FIXED_VOLTAGE_MODULE)</span>
<span class="cp">#define REGULATOR_ADP122	&quot;adp122&quot;</span>
<span class="cp">#define REGULATOR_ADP122_UV	2500000</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_consumer_supply</span> <span class="n">adp122_consumers</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">supply</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_init_data</span> <span class="n">adp_switch_regulator_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122</span><span class="p">,</span>
		<span class="p">.</span><span class="n">valid_ops_mask</span> <span class="o">=</span> <span class="n">REGULATOR_CHANGE_STATUS</span><span class="p">,</span>
		<span class="p">.</span><span class="n">min_uV</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122_UV</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_uV</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122_UV</span><span class="p">,</span>
		<span class="p">.</span><span class="n">min_uA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="p">.</span><span class="n">max_uA</span> <span class="o">=</span> <span class="mi">300000</span><span class="p">,</span>
	<span class="p">},</span>
	<span class="p">.</span><span class="n">num_consumer_supplies</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>	<span class="cm">/* only 1 */</span>
	<span class="p">.</span><span class="n">consumer_supplies</span>     <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp122_consumers</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">fixed_voltage_config</span> <span class="n">adp_switch_pdata</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">supply_name</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122</span><span class="p">,</span>
	<span class="p">.</span><span class="n">microvolts</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122_UV</span><span class="p">,</span>
	<span class="p">.</span><span class="n">gpio</span> <span class="o">=</span> <span class="n">GPIO_PF2</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enable_high</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">enabled_at_boot</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">init_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp_switch_regulator_data</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">adp_switch_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;reg-fixed-voltage&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp_switch_pdata</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="cp">#if defined(CONFIG_REGULATOR_USERSPACE_CONSUMER) || \</span>
<span class="cp">	defined(CONFIG_REGULATOR_USERSPACE_CONSUMER_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_bulk_data</span> <span class="n">adp122_bulk_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">supply</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">regulator_userspace_consumer_data</span> <span class="n">adp122_userspace_comsumer_data</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">REGULATOR_ADP122</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_supplies</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
	<span class="p">.</span><span class="n">supplies</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp122_bulk_data</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">adp122_userspace_consumer_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;reg-userspace-consumer&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="p">.</span><span class="n">dev</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">platform_data</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">adp122_userspace_comsumer_data</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_IIO_GPIO_TRIGGER) || \</span>
<span class="cp">	defined(CONFIG_IIO_GPIO_TRIGGER_MODULE)</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">resource</span> <span class="n">iio_gpio_trigger_resources</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="p">.</span><span class="n">start</span>  <span class="o">=</span> <span class="n">IRQ_PF5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">end</span>    <span class="o">=</span> <span class="n">IRQ_PF5</span><span class="p">,</span>
		<span class="p">.</span><span class="n">flags</span>  <span class="o">=</span> <span class="n">IORESOURCE_IRQ</span> <span class="o">|</span> <span class="n">IORESOURCE_IRQ_LOWEDGE</span><span class="p">,</span>
	<span class="p">},</span>
<span class="p">};</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">iio_gpio_trigger</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;iio_gpio_trigger&quot;</span><span class="p">,</span>
	<span class="p">.</span><span class="n">num_resources</span> <span class="o">=</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">iio_gpio_trigger_resources</span><span class="p">),</span>
	<span class="p">.</span><span class="n">resource</span> <span class="o">=</span> <span class="n">iio_gpio_trigger_resources</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1373) || \</span>
<span class="cp">	defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1373_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bf5xx_adau1373_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-eval-adau1373&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1701) || \</span>
<span class="cp">	defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1701_MODULE)</span>
<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="n">bf5xx_adau1701_device</span> <span class="o">=</span> <span class="p">{</span>
	<span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bfin-eval-adau1701&quot;</span><span class="p">,</span>
<span class="p">};</span>
<span class="cp">#endif</span>

<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">stamp_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>

	<span class="o">&amp;</span><span class="n">bfin_dpmc</span><span class="p">,</span>
<span class="cp">#if defined(CONFIG_BFIN_SPORT) || defined(CONFIG_BFIN_SPORT_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_sport0_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_BFIN_CFPCMCIA) || defined(CONFIG_BFIN_CFPCMCIA_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_pcmcia_cf_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_RTC_DRV_BFIN) || defined(CONFIG_RTC_DRV_BFIN_MODULE)</span>
	<span class="o">&amp;</span><span class="n">rtc_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_SL811_HCD) || defined(CONFIG_USB_SL811_HCD_MODULE)</span>
	<span class="o">&amp;</span><span class="n">sl811_hcd_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_ISP1362_HCD) || defined(CONFIG_USB_ISP1362_HCD_MODULE)</span>
	<span class="o">&amp;</span><span class="n">isp1362_hcd_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_ISP1760_HCD) || defined(CONFIG_USB_ISP1760_HCD_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_isp1760_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SMC91X) || defined(CONFIG_SMC91X_MODULE)</span>
	<span class="o">&amp;</span><span class="n">smc91x_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_DM9000) || defined(CONFIG_DM9000_MODULE)</span>
	<span class="o">&amp;</span><span class="n">dm9000_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_CAN_BFIN) || defined(CONFIG_CAN_BFIN_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_can_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BFIN_MAC) || defined(CONFIG_BFIN_MAC_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_mii_bus</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">bfin_mac_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_USB_NET2272) || defined(CONFIG_USB_NET2272_MODULE)</span>
	<span class="o">&amp;</span><span class="n">net2272_bfin_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SPI_BFIN5XX) || defined(CONFIG_SPI_BFIN5XX_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_spi0_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SPI_BFIN_SPORT) || defined(CONFIG_SPI_BFIN_SPORT_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_sport_spi0_device</span><span class="p">,</span>
	<span class="o">&amp;</span><span class="n">bfin_sport_spi1_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_FB_BF537_LQ035) || defined(CONFIG_FB_BF537_LQ035_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_fb_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_FB_BFIN_LQ035Q1) || defined(CONFIG_FB_BFIN_LQ035Q1_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_lq035q1_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_VIDEO_BLACKFIN_CAPTURE) \</span>
<span class="cp">	|| defined(CONFIG_VIDEO_BLACKFIN_CAPTURE_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_capture_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SERIAL_BFIN) || defined(CONFIG_SERIAL_BFIN_MODULE)</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_UART0</span>
	<span class="o">&amp;</span><span class="n">bfin_uart0_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_UART1</span>
	<span class="o">&amp;</span><span class="n">bfin_uart1_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_BFIN_SIR) || defined(CONFIG_BFIN_SIR_MODULE)</span>
<span class="cp">#ifdef CONFIG_BFIN_SIR0</span>
	<span class="o">&amp;</span><span class="n">bfin_sir0_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_BFIN_SIR1</span>
	<span class="o">&amp;</span><span class="n">bfin_sir1_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_I2C_BLACKFIN_TWI) || defined(CONFIG_I2C_BLACKFIN_TWI_MODULE)</span>
	<span class="o">&amp;</span><span class="n">i2c_bfin_twi_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SERIAL_BFIN_SPORT) || defined(CONFIG_SERIAL_BFIN_SPORT_MODULE)</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_SPORT0_UART</span>
	<span class="o">&amp;</span><span class="n">bfin_sport0_uart_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_SPORT1_UART</span>
	<span class="o">&amp;</span><span class="n">bfin_sport1_uart_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_PATA_PLATFORM) || defined(CONFIG_PATA_PLATFORM_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_pata_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_KEYBOARD_GPIO) || defined(CONFIG_KEYBOARD_GPIO_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_device_gpiokeys</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MTD_NAND_PLATFORM) || defined(CONFIG_MTD_NAND_PLATFORM_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_async_nand_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_MTD_PHYSMAP) || defined(CONFIG_MTD_PHYSMAP_MODULE)</span>
	<span class="o">&amp;</span><span class="n">stamp_flash_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_I2S) || defined(CONFIG_SND_BF5XX_I2S_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_i2s_pcm</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_TDM) || defined(CONFIG_SND_BF5XX_TDM_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_tdm_pcm</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_AC97) || defined(CONFIG_SND_BF5XX_AC97_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_ac97_pcm</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_AD73311) || \</span>
<span class="cp">		defined(CONFIG_SND_BF5XX_SOC_AD73311_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_ad73311_machine</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_AD73311) || defined(CONFIG_SND_SOC_AD73311_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_ad73311_codec_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_I2S) || defined(CONFIG_SND_BF5XX_SOC_I2S_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_i2s</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_TDM) || defined(CONFIG_SND_BF5XX_SOC_TDM_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_tdm</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_BF5XX_SOC_AC97) || defined(CONFIG_SND_BF5XX_SOC_AC97_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_ac97</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_REGULATOR_AD5398) || defined(CONFIG_REGULATOR_AD5398_MODULE)</span>
<span class="cp">#if defined(CONFIG_REGULATOR_VIRTUAL_CONSUMER) || \</span>
<span class="cp">	defined(CONFIG_REGULATOR_VIRTUAL_CONSUMER_MODULE)</span>
	<span class="o">&amp;</span><span class="n">ad5398_virt_consumer_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(CONFIG_REGULATOR_USERSPACE_CONSUMER) || \</span>
<span class="cp">	defined(CONFIG_REGULATOR_USERSPACE_CONSUMER_MODULE)</span>
	<span class="o">&amp;</span><span class="n">ad5398_userspace_consumer_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_REGULATOR_FIXED_VOLTAGE) || defined(CONFIG_REGULATOR_FIXED_VOLTAGE_MODULE)</span>
	<span class="o">&amp;</span><span class="n">adp_switch_device</span><span class="p">,</span>
<span class="cp">#if defined(CONFIG_REGULATOR_USERSPACE_CONSUMER) || \</span>
<span class="cp">	defined(CONFIG_REGULATOR_USERSPACE_CONSUMER_MODULE)</span>
	<span class="o">&amp;</span><span class="n">adp122_userspace_consumer_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_IIO_GPIO_TRIGGER) || \</span>
<span class="cp">	defined(CONFIG_IIO_GPIO_TRIGGER_MODULE)</span>
	<span class="o">&amp;</span><span class="n">iio_gpio_trigger</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1373) || \</span>
<span class="cp">	defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1373_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bf5xx_adau1373_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1701) || \</span>
<span class="cp">	defined(CONFIG_SND_SOC_BFIN_EVAL_ADAU1701_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bf5xx_adau1701_device</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SND_SOC_BFIN_EVAL_ADAV80X) || \</span>
<span class="cp">	defined(CONFIG_SND_SOC_BFIN_EVAL_ADAV80X_MODULE)</span>
	<span class="o">&amp;</span><span class="n">bfin_eval_adav801_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">net2272_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="cp">#if defined(CONFIG_USB_NET2272) || defined(CONFIG_USB_NET2272_MODULE)</span>
	<span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>

	<span class="n">ret</span> <span class="o">=</span> <span class="n">gpio_request</span><span class="p">(</span><span class="n">GPIO_PF6</span><span class="p">,</span> <span class="s">&quot;net2272&quot;</span><span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ret</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>

	<span class="cm">/* Reset the USB chip */</span>
	<span class="n">gpio_direction_output</span><span class="p">(</span><span class="n">GPIO_PF6</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">mdelay</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">gpio_set_value</span><span class="p">(</span><span class="n">GPIO_PF6</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="cp">#endif</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">__init</span> <span class="nf">stamp_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;%s(): registering device resources</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">__func__</span><span class="p">);</span>
	<span class="n">bfin_plat_nand_init</span><span class="p">();</span>
	<span class="n">adf702x_mac_init</span><span class="p">();</span>
	<span class="n">platform_add_devices</span><span class="p">(</span><span class="n">stamp_devices</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">stamp_devices</span><span class="p">));</span>
	<span class="n">i2c_register_board_info</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">bfin_i2c_board_info</span><span class="p">,</span>
				<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_i2c_board_info</span><span class="p">));</span>
	<span class="n">spi_register_board_info</span><span class="p">(</span><span class="n">bfin_spi_board_info</span><span class="p">,</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">bfin_spi_board_info</span><span class="p">));</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">net2272_init</span><span class="p">())</span>
		<span class="n">pr_warning</span><span class="p">(</span><span class="s">&quot;unable to configure net2272; it probably won&#39;t work</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">arch_initcall</span><span class="p">(</span><span class="n">stamp_init</span><span class="p">);</span>


<span class="k">static</span> <span class="k">struct</span> <span class="n">platform_device</span> <span class="o">*</span><span class="n">stamp_early_devices</span><span class="p">[]</span> <span class="n">__initdata</span> <span class="o">=</span> <span class="p">{</span>
<span class="cp">#if defined(CONFIG_SERIAL_BFIN_CONSOLE) || defined(CONFIG_EARLY_PRINTK)</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_UART0</span>
	<span class="o">&amp;</span><span class="n">bfin_uart0_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_UART1</span>
	<span class="o">&amp;</span><span class="n">bfin_uart1_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>

<span class="cp">#if defined(CONFIG_SERIAL_BFIN_SPORT_CONSOLE)</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_SPORT0_UART</span>
	<span class="o">&amp;</span><span class="n">bfin_sport0_uart_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#ifdef CONFIG_SERIAL_BFIN_SPORT1_UART</span>
	<span class="o">&amp;</span><span class="n">bfin_sport1_uart_device</span><span class="p">,</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="n">__init</span> <span class="nf">native_machine_early_platform_add_devices</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span> <span class="s">&quot;register early platform devices</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
	<span class="n">early_platform_add_devices</span><span class="p">(</span><span class="n">stamp_early_devices</span><span class="p">,</span>
		<span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">stamp_early_devices</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">native_machine_restart</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">cmd</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* workaround reboot hang when booting from SPI */</span>
	<span class="k">if</span> <span class="p">((</span><span class="n">bfin_read_SYSCR</span><span class="p">()</span> <span class="o">&amp;</span> <span class="mh">0x7</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0x3</span><span class="p">)</span>
		<span class="n">bfin_reset_boot_spi_cs</span><span class="p">(</span><span class="n">P_DEFAULT_BOOT_SPI_CS</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm"> * Currently the MAC address is saved in Flash by U-Boot</span>
<span class="cm"> */</span>
<span class="cp">#define FLASH_MAC	0x203f0000</span>
<span class="kt">int</span> <span class="nf">bfin_get_ether_addr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">addr</span><span class="p">)</span>
<span class="p">{</span>
	<span class="o">*</span><span class="p">(</span><span class="n">u32</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">addr</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">=</span> <span class="n">bfin_read32</span><span class="p">(</span><span class="n">FLASH_MAC</span><span class="p">);</span>
	<span class="o">*</span><span class="p">(</span><span class="n">u16</span> <span class="o">*</span><span class="p">)(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span> <span class="o">=</span> <span class="n">bfin_read16</span><span class="p">(</span><span class="n">FLASH_MAC</span> <span class="o">+</span> <span class="mi">4</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">bfin_get_ether_addr</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:4}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../../../../javascript/docco.min.js"></script>
</html>
