f | perf-sched.txt | g | 1.5K |  | Robert Richter | robert.richter@amd.com | 1324666863 |  | perf report: Accept fifos as input file  The default input file for perf report is not handled the same way as perf record does it for its output file. This leads to unexpected behavior of perf report, etc. E.g.:   # perf record -a -e cpu-cycles sleep 2 || perf report || cat  failed to open perf.data: No such file or directory  (try 'perf record' first)  While perf record writes to a fifo, perf report expects perf.data to be read. This patch changes this to accept fifos as input file.  Applies to the following commands:   perf annotate  perf buildid-list  perf evlist  perf kmem  perf lock  perf report  perf sched  perf script  perf timechart  Also fixes char const* -> const char* type declaration for filename strings.  v2: * Prevent potential null pointer access to input_name in   builtin-report.c. Needed due to removal of patch "perf report: Setup   browser if stdout is a pipe"  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/1323248577-11268-5-git-send-email-robert.richter@amd.com Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | Makefile | g | 9.0K |  | Franck Bui-Huu | fbuihuu@gmail.com | 1328562963 |  | perf doc: Allow producing documentation in a specified output directory  Currently we can put the object files in a different directory by using 'O=' comand line argument.  However the generated documentation files don't honor this directive,  This patch fixes that. It's been tested for man target but the others seems currently broken so no tests have been done on them so far.  Link: http://lkml.kernel.org/r/1328541443-18003-1-git-send-email-fbuihuu@gmail.com Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-script-perl.txt | g | 7.2K |  | Jonathan Corbet | corbet@lwn.net | 1303643918 |  | sched: Get rid of lock_depth  Neil Brown pointed out that lock_depth somehow escaped the BKL removal work.  Let's get rid of it now.  Note that the perf scripting utilities still have a bunch of code for dealing with common_lock_depth in tracepoints; I have left that in place in case anybody wants to use that code with older kernels.  Suggested-by: Neil Brown <neilb@suse.de> Signed-off-by: Jonathan Corbet <corbet@lwn.net> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: Andrew Morton <akpm@linux-foundation.org> Link: http://lkml.kernel.org/r/20110422111910.456c0e84@bike.lwn.net Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | manpage-suppress-sp.xsl | g | 737B |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-evlist.txt | g | 542B |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1337707811 |  | perf evlist: Show event attribute details  There was no easy way to see the frequency used, and with the change of default, we better provide one.  [root@sandy linux]# perf evlist -F cycles: sample_freq=4000 [root@sandy linux]# perf evlist -v cycles: sample_freq=4000, size: 80, sample_type: 391, read_format: 7, disabled: 1, inherit: 1, mmap: 1, comm: 1, freq: 1, sample_id_all: 1, exclude_guest: 1 [root@sandy linux]#  Cc: David Ahern <dsahern@gmail.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Namhyung Kim <namhyung@gmail.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/n/tip-e1p9poez3nwrgycbmwqmhlsu@git.kernel.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf.txt | g | 565B |  | Kirill Smelkov | kirr@landau.phys.spbu.ru | 1263400784 |  | perf: Fix few typos + cosmetics  Signed-off-by: Kirill Smelkov <kirr@landau.phys.spbu.ru> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <1263396139-4798-2-git-send-email-acme@infradead.org> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-help.txt | g | 928B |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | manpage-base.xsl | g | 1.2K |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-report.txt | g | 4.3K |  | Pekka Enberg | penberg@kernel.org | 1332180809 |  | perf report: Add a simple GTK2-based 'perf report' browser  This patch adds a simple GTK2-based browser to 'perf report' that's based on the TTY-based browser in builtin-report.c.  To launch "perf report" using the new GTK interface just type:    $ perf report --gtk  The interface is somewhat limited in features at the moment:    - No callgraph support    - No KVM guest profiling support    - No color coding for percentages    - No sorting from the UI    - ..and many, many more!  That said, I think this patch a reasonable start to build future features on.  Signed-off-by: Pekka Enberg <penberg@kernel.org> Cc: Colin Walters <walters@verbum.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Paul Mackerras <paulus@samba.org> Cc: Ingo Molnar <mingo@kernel.org> Link: http://lkml.kernel.org/r/alpine.LFD.2.02.1202231952410.6689@tux.localdomain [ committer note: Added #pragma to make gtk no strict prototype problem go   away as suggested by Colin Walters modulo avoiding push/pop ] Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-stat.txt | g | 3.6K |  | David Ahern | dsahern@gmail.com | 1329180851 |  | perf tools: Allow multiple threads or processes in record, stat, top  Allow a user to collect events for multiple threads or processes using a comma separated list.  e.g., collect data on a VM and its vhost thread:   perf top -p 21483,21485   perf stat -p 21483,21485 -ddd   perf record -p 21483,21485  or monitoring vcpu threads   perf top -t 21488,21489   perf stat -t 21488,21489 -ddd   perf record -t 21488,21489  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Thomas Gleixner <tglx@linutronix.de> Link: http://lkml.kernel.org/r/1328718772-16688-1-git-send-email-dsahern@gmail.com Signed-off-by: David Ahern <dsahern@gmail.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-test.txt | g | 640B |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1322582675 |  | perf test: Allow running just a subset of the available tests  To obtain a list of available tests:  [root@emilia linux]# perf test list  1: vmlinux symtab matches kallsyms  2: detect open syscall event  3: detect open syscall event on all cpus  4: read samples using the mmap interface  5: parse events tests [root@emilia linux]#  To list just a subset:  [root@emilia linux]# perf test list syscall  2: detect open syscall event  3: detect open syscall event on all cpus [root@emilia linux]#  To run a subset:  [root@emilia linux]# perf test detect  2: detect open syscall event: Ok  3: detect open syscall event on all cpus: Ok [root@emilia linux]#  Specific tests can be chosen by number:  [root@emilia linux]# perf test 1 3 parse  1: vmlinux symtab matches kallsyms: Ok  3: detect open syscall event on all cpus: Ok  5: parse events tests: Ok [root@emilia linux]#  Now to write more tests!  Suggested-by: Peter Zijlstra <peterz@infradead.org> Cc: David Ahern <dsahern@gmail.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/n/tip-nqec2145qfxdgimux28aw7v8@git.kernel.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | manpage-1.72.xsl | g | 510B |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perfconfig.example | g | 459B |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1338339990 |  | perf annotate browser: Read perf config file for settings  The defaults are:  [annotate]  	hide_src_code = false 	use_offset = true 	jump_arrows = true 	show_nr_jumps = false  Cc: David Ahern <dsahern@gmail.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Namhyung Kim <namhyung@gmail.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/n/tip-q4egci70rjgxh7bogbbfpcyf@git.kernel.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-buildid-list.txt | g | 831B |  | Robert Richter | robert.richter@amd.com | 1324666863 |  | perf report: Accept fifos as input file  The default input file for perf report is not handled the same way as perf record does it for its output file. This leads to unexpected behavior of perf report, etc. E.g.:   # perf record -a -e cpu-cycles sleep 2 || perf report || cat  failed to open perf.data: No such file or directory  (try 'perf record' first)  While perf record writes to a fifo, perf report expects perf.data to be read. This patch changes this to accept fifos as input file.  Applies to the following commands:   perf annotate  perf buildid-list  perf evlist  perf kmem  perf lock  perf report  perf sched  perf script  perf timechart  Also fixes char const* -> const char* type declaration for filename strings.  v2: * Prevent potential null pointer access to input_name in   builtin-report.c. Needed due to removal of patch "perf report: Setup   browser if stdout is a pipe"  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/1323248577-11268-5-git-send-email-robert.richter@amd.com Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | examples.txt | g | 8.1K |  | Konstantin Khlebnikov | khlebnikov@openvz.org | 1326241841 |  | mm-tracepoint: fix documentation and examples  We renamed the page-free mm tracepoints.  Signed-off-by: Konstantin Khlebnikov <khlebnikov@openvz.org> Cc: Mel Gorman <mel@csn.ul.ie> Cc: KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com> Reviewed-by: Minchan Kim <minchan.kim@gmail.com> Cc: Hugh Dickins <hughd@google.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
f | perf-archive.txt | g | 480B |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1263974098 |  | perf archive: Add documentation  This also makes it appear on the 'perf --help' output, i.e. util/generate-cmdlist.sh now takes it into account.  Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com> Cc: Frédéric Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Paul Mackerras <paulus@samba.org> LKML-Reference: <1263837559-24168-1-git-send-email-acme@infradead.org> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-probe.txt | g | 7.3K |  | Srikar Dronamraju | srikar@linux.vnet.ibm.com | 1336755533 |  | perf probe: Detect probe target when m/x options are absent  Options -m and -x explicitly allow tracing of modules / user space binaries. In absense of these options, check if the first argument can be used as a target.  perf probe /bin/zsh zfree is equivalent to perf probe -x /bin/zsh zfree.  Suggested-by: Arnaldo Carvalho de Melo <acme@redhat.com> Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com> Cc: Andi Kleen <andi@firstfloor.org> Cc: Andrew Morton <akpm@linux-foundation.org> Cc: Anton Arapov <anton@redhat.com> Cc: Christoph Hellwig <hch@infradead.org> Cc: Ingo Molnar <mingo@elte.hu> Cc: Jim Keniston <jkenisto@linux.vnet.ibm.com> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: Linux-mm <linux-mm@kvack.org> Cc: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com> Cc: Oleg Nesterov <oleg@redhat.com> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Steven Rostedt <rostedt@goodmis.org> Cc: Thomas Gleixner <tglx@linutronix.de> Link: http://lkml.kernel.org/r/20120416120925.30661.40409.sendpatchset@srdronam.in.ibm.com Signed-off-by: Srikar Dronamraju <srikar@linux.vnet.ibm.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-script.txt | g | 7.1K |  | Akihiro Nagai | akihiro.nagai.hw@hitachi.com | 1327954387 |  | perf script: Add option resolving vmlinux path  Add the option get the path of [kernel.kallsyms]. Specify '--show-kernel-path' option to use this function. This patch enables other applications to use this output easily.  Without --show-kernel-path  option  ffffffff81467612 irq_return ([kernel.kallsyms]) ffffffff81467612 irq_return ([kernel.kallsyms])     7f24fc02a6b3 _start (/lib64/ld-2.14.so) [snip]  With --show-kernel-path option  ffffffff81467612 irq_return (/lib/modules/3.2.0+/build/vmlinux) ffffffff81467612 irq_return (/lib/modules/3.2.0+/build/vmlinux)     7f24fc02a6b3 _start (/lib64/ld-2.14.so) [snip]  Cc: David Ahern <dsahern@gmail.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: yrl.pp-manager.tt@hitachi.com Link: http://lkml.kernel.org/r/20120130044320.2384.73322.stgit@linux3 Signed-off-by: Akihiro Nagai <akihiro.nagai.hw@hitachi.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-kvm.txt | g | 2.6K |  | Shawn Bohrer | shawn.bohrer@gmail.com | 1291234966 |  | perf kvm: Document missing options  Cc: Ingo Molnar <mingo@elte.hu> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> LKML-Reference: <1291168642-11402-6-git-send-email-shawn.bohrer@gmail.com> Signed-off-by: Shawn Bohrer <shawn.bohrer@gmail.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | manpage-bold-literal.xsl | g | 578B |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-record.txt | g | 5.2K |  | Anshuman Khandual | khandual@linux.vnet.ibm.com | 1337701665 |  | perf record: Fix documentation for branch stack sampling  Signed-off-by: Anshuman Khandual <khandual@linux.vnet.ibm.com> Acked-by: Stephane Eranian <eranian@google.com> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/4FB60C7A.2080508@linux.vnet.ibm.com Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-lock.txt | g | 1.2K |  | Namhyung Kim | namhyung@gmail.com | 1327955448 |  | perf lock: Document lock info subcommand  The commit 26242d859c9be ("perf lock: Add "info" subcommand for dumping misc information") added the subcommand but missed documentation. Add it. Also update stale 'trace' subcommand to 'script'.  Cc: Hitoshi Mitake <mitake@dcl.info.waseda.ac.jp> Cc: Ingo Molnar <mingo@elte.hu> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Link: http://lkml.kernel.org/r/1327827356-8786-5-git-send-email-namhyung@gmail.com Signed-off-by: Namhyung Kim <namhyung@gmail.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-diff.txt | g | 1.4K |  | David Ahern | daahern@cisco.com | 1292969871 |  | perf symbols: Add symfs option for off-box analysis using specified tree  The symfs argument allows analysis of perf.data file using a locally accessible filesystem tree with debug symbols - e.g., tree created during image builds, sshfs mount, loop mounted KVM disk images, USB keys, initrds, etc. Anything with an OS tree can be analyzed from anywhere without the need to populate a local data store with build-ids.  Commiter notes:  o Fixed up symfs="/" variants handling.  o prefixed DSO__ORIG_GUEST_KMODULE case with symfs too, avoiding use of files   outside the symfs directory.  LKML-Reference: <1291926427-28846-1-git-send-email-daahern@cisco.com> Signed-off-by: David Ahern <daahern@cisco.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-buildid-cache.txt | g | 647B |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1280327410 |  | perf man pages: Fix cut'n'paste error  We remove files _from_ the cache.  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> LKML-Reference: <new-submission> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-list.txt | g | 3.3K |  | Joerg Roedel | joerg.roedel@amd.com | 1325872189 |  | perf tools: Add support for guest/host-only profiling  To restrict a counter to either host or guest mode this patch introduces two new event modifiers: G and H.  With G the counter is configured in guest-only mode and with H in host-only mode.  Cc: Gleb Natapov <gleb@redhat.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Joerg Roedel <joro@8bytes.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Signed-off-by: Gleb Natapov <gleb@redhat.com> Signed-off-by: Joerg Roedel <joerg.roedel@amd.com> Link: http://lkml.kernel.org/n/tip-or5aj3rghy9ngyg882z6kln9@git.kernel.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-kmem.txt | g | 793B |  | Robert Richter | robert.richter@amd.com | 1324666863 |  | perf report: Accept fifos as input file  The default input file for perf report is not handled the same way as perf record does it for its output file. This leads to unexpected behavior of perf report, etc. E.g.:   # perf record -a -e cpu-cycles sleep 2 || perf report || cat  failed to open perf.data: No such file or directory  (try 'perf record' first)  While perf record writes to a fifo, perf report expects perf.data to be read. This patch changes this to accept fifos as input file.  Applies to the following commands:   perf annotate  perf buildid-list  perf evlist  perf kmem  perf lock  perf report  perf sched  perf script  perf timechart  Also fixes char const* -> const char* type declaration for filename strings.  v2: * Prevent potential null pointer access to input_name in   builtin-report.c. Needed due to removal of patch "perf report: Setup   browser if stdout is a pipe"  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/1323248577-11268-5-git-send-email-robert.richter@amd.com Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | manpage-normal.xsl | g | 475B |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | asciidoc.conf | g | 2.2K |  | Ingo Molnar | mingo@elte.hu | 1244313223 |  | perf_counter tools: Move from Documentation/perf_counter/ to tools/perf/  Several people have suggested that 'perf' has become a full-fledged tool that should be moved out of Documentation/. Move it to the (new) tools/ directory.  Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Arnaldo Carvalho de Melo <acme@redhat.com> LKML-Reference: <new-submission> Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-top.txt | g | 3.7K |  | David Ahern | dsahern@gmail.com | 1329180851 |  | perf tools: Allow multiple threads or processes in record, stat, top  Allow a user to collect events for multiple threads or processes using a comma separated list.  e.g., collect data on a VM and its vhost thread:   perf top -p 21483,21485   perf stat -p 21483,21485 -ddd   perf record -p 21483,21485  or monitoring vcpu threads   perf top -t 21488,21489   perf stat -t 21488,21489 -ddd   perf record -t 21488,21489  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Thomas Gleixner <tglx@linutronix.de> Link: http://lkml.kernel.org/r/1328718772-16688-1-git-send-email-dsahern@gmail.com Signed-off-by: David Ahern <dsahern@gmail.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-annotate.txt | g | 2.1K |  | Robert Richter | robert.richter@amd.com | 1324666863 |  | perf report: Accept fifos as input file  The default input file for perf report is not handled the same way as perf record does it for its output file. This leads to unexpected behavior of perf report, etc. E.g.:   # perf record -a -e cpu-cycles sleep 2 || perf report || cat  failed to open perf.data: No such file or directory  (try 'perf record' first)  While perf record writes to a fifo, perf report expects perf.data to be read. This patch changes this to accept fifos as input file.  Applies to the following commands:   perf annotate  perf buildid-list  perf evlist  perf kmem  perf lock  perf report  perf sched  perf script  perf timechart  Also fixes char const* -> const char* type declaration for filename strings.  v2: * Prevent potential null pointer access to input_name in   builtin-report.c. Needed due to removal of patch "perf report: Setup   browser if stdout is a pipe"  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/1323248577-11268-5-git-send-email-robert.richter@amd.com Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-script-python.txt | g | 22K |  | Jonathan Corbet | corbet@lwn.net | 1303643918 |  | sched: Get rid of lock_depth  Neil Brown pointed out that lock_depth somehow escaped the BKL removal work.  Let's get rid of it now.  Note that the perf scripting utilities still have a bunch of code for dealing with common_lock_depth in tracepoints; I have left that in place in case anybody wants to use that code with older kernels.  Suggested-by: Neil Brown <neilb@suse.de> Signed-off-by: Jonathan Corbet <corbet@lwn.net> Cc: Arnd Bergmann <arnd@arndb.de> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Linus Torvalds <torvalds@linux-foundation.org> Cc: Andrew Morton <akpm@linux-foundation.org> Link: http://lkml.kernel.org/r/20110422111910.456c0e84@bike.lwn.net Signed-off-by: Ingo Molnar <mingo@elte.hu>
f | perf-inject.txt | g | 847B |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1272980902 |  | perf inject: Add missing bits  New commands need to have Documentation and be added to command-list.txt so that they can appear when 'perf' is called withouth any subcommand:  [root@doppio linux-2.6-tip]# perf   usage: perf [--version] [--help] COMMAND [ARGS]   The most commonly used perf commands are:    annotate        Read perf.data (created by perf record) and display annotated code    archive         Create archive with object files with build-ids found in perf.data file    bench           General framework for benchmark suites    buildid-cache   Manage build-id cache.    buildid-list    List the buildids in a perf.data file    diff            Read two perf.data files and display the differential profile    inject          Filter to augment the events stream with additional information    kmem            Tool to trace/measure kernel memory(slab) properties    kvm             Tool to trace/measure kvm guest os    list            List all symbolic event types    lock            Analyze lock events    probe           Define new dynamic tracepoints    record          Run a command and record its profile into perf.data    report          Read perf.data (created by perf record) and display the profile    sched           Tool to trace/measure scheduler properties (latencies)    stat            Run a command and gather performance counter statistics    test            Runs sanity tests.    timechart       Tool to visualize total system behavior during a workload    top             System profiling tool.    trace           Read perf.data (created by perf record) and display trace output   See 'perf help COMMAND' for more information on a specific command.  [root@doppio linux-2.6-tip]#  The new 'perf inject' command hadn't so it wasn't appearing on that list.  Also fix the long option, that should have no spaces in it, rename the faulty one to be '--build-ids', instead of '--inject build-ids'.  Reported-by: Ingo Molnar <mingo@elte.hu> Cc: Frédéric Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Tom Zanussi <tzanussi@gmail.com> LKML-Reference: <new-submission> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-timechart.txt | g | 1011B |  | Robert Richter | robert.richter@amd.com | 1324666863 |  | perf report: Accept fifos as input file  The default input file for perf report is not handled the same way as perf record does it for its output file. This leads to unexpected behavior of perf report, etc. E.g.:   # perf record -a -e cpu-cycles sleep 2 || perf report || cat  failed to open perf.data: No such file or directory  (try 'perf record' first)  While perf record writes to a fifo, perf report expects perf.data to be read. This patch changes this to accept fifos as input file.  Applies to the following commands:   perf annotate  perf buildid-list  perf evlist  perf kmem  perf lock  perf report  perf sched  perf script  perf timechart  Also fixes char const* -> const char* type declaration for filename strings.  v2: * Prevent potential null pointer access to input_name in   builtin-report.c. Needed due to removal of patch "perf report: Setup   browser if stdout is a pipe"  Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/r/1323248577-11268-5-git-send-email-robert.richter@amd.com Signed-off-by: Robert Richter <robert.richter@amd.com> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | perf-bench.txt | g | 2.4K |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1273069407 |  | perf tools: Fixup minor doc formatting issues  Cc: Frédéric Weisbecker <fweisbec@gmail.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Tom Zanussi <tzanussi@gmail.com> LKML-Reference: <new-submission> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
