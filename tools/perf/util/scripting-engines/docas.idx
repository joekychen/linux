f | trace-event-perl.c | s | 15K | 528 | Frederic Weisbecker | fweisbec@gmail.com | 1337700749 |  | perf script: Rename struct event to struct event_format in perl engine  While migrating to the libtraceevent, the perl scripting engine missed this structure rename.  This fixes:       util/scripting-engines/trace-event-perl.c: In function "find_cache_event":      util/scripting-engines/trace-event-perl.c:244: error: assignment from incompatible pointer type      util/scripting-engines/trace-event-perl.c:248: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:248: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:250: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c: In function "perl_process_tracepoint":      util/scripting-engines/trace-event-perl.c:286: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:286: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:307: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c: In function "perl_generate_script":      util/scripting-engines/trace-event-perl.c:498: error: passing argument 1 of "trace_find_next_event" from incompatible pointer type      util/scripting-engines/../trace-event.h:56: note: expected "struct event_format *" but argument is of type "struct event *"      util/scripting-engines/trace-event-perl.c:498: error: assignment from incompatible pointer type      util/scripting-engines/trace-event-perl.c:499: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:499: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:513: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:532: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:556: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:569: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:570: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:579: error: dereferencing pointer to incomplete type      util/scripting-engines/trace-event-perl.c:580: error: dereferencing pointer to incomplete type  Reported-by: Arnaldo Carvalho de Melo <acme@redhat.com> Signed-off-by: Frederic Weisbecker <fweisbec@redhat.com> Cc: Frederic Weisbecker <fweisbec@redhat.com> Cc: Ingo Molnar <mingo@kernel.org> Cc: Namhyung Kim <namhyung.kim@lge.com> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Steven Rostedt <rostedt@goodmis.org> Cc: Tom Zanussi <tzanussi@gmail.com> Link: http://lkml.kernel.org/r/1337697049-30251-2-git-send-email-fweisbec@gmail.com Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
f | trace-event-python.c | s | 14K | 499 | Steven Rostedt | srostedt@redhat.com | 1335353328 |  | perf: Have perf use the new libtraceevent.a library  The event parsing code in perf was originally copied from trace-cmd but never was kept up-to-date with the changes that was done there. The trace-cmd libtraceevent.a code is much more mature than what is currently in perf.  This updates the code to use wrappers to handle the calls to the new event parsing code. The new code requires a handle to be pass around, which removes the global event variables and allows more than one event structure to be read from different files (and different machines).  But perf still has the old global events and the code throughout perf does not yet have a nice way to pass around a handle. A global 'pevent' has been made for perf and the old calls have been created as wrappers to the new event parsing code that uses the global pevent.  With this change, perf can later incorporate the pevent handle into the perf structures and allow more than one file to be read and compared, that contains different events.  Signed-off-by: Steven Rostedt <rostedt@goodmis.org> Cc: Ingo Molnar <mingo@kernel.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Arnaldo Carvalho de Melo <acme@infradead.org> Cc: Steven Rostedt <rostedt@goodmis.org> Cc: Borislav Petkov <bp@alien8.de> Cc: Jiri Olsa <jolsa@redhat.com> Cc: Arun Sharma <asharma@fb.com> Cc: Namhyung Kim <namhyung.kim@lge.com> Signed-off-by: Frederic Weisbecker <fweisbec@gmail.com>
