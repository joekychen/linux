f | Makefile | g | 2.6K |  | Borislav Petkov | borislav.petkov@amd.com | 1334167217 |  | tools: Connect to the kernel build system  Now you can do  $ make tools/<toolname>  from the toplevel kernel directory and have the respective tool built.  If you want to build and install it, do  $ make tools/<toolname>_install  $ make tools/<toolname>_clean  should clean the respective tool directories.  If you want to clean all in tools, simply do  $ make tools/clean  Also, if you want to get what the possible targets are, simply calling  $ make tools/  should give you the short help.  $ make tools/install  installs all tools, of course. Doh.  Signed-off-by: Borislav Petkov <borislav.petkov@amd.com> Cc: Ingo Molnar <mingo@kernel.org> Cc: Michal Marek <mmarek@suse.cz> Cc: Sam Ravnborg <sam@ravnborg.org> Link: http://lkml.kernel.org/r/1334162178-17152-6-git-send-email-bp@amd64.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
d | scripts |  | 1 items |  | Steven Rostedt | srostedt@redhat.com | 1335351700 |  | perf: Build libtraceevent.a  Have building perf also build libtraceevent.a. Currently, perf does not use the code within libtraceevent.a, but it soon will.  Signed-off-by: Steven Rostedt <rostedt@goodmis.org> Cc: Ingo Molnar <mingo@kernel.org> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Arnaldo Carvalho de Melo <acme@infradead.org> Cc: Steven Rostedt <rostedt@goodmis.org> Cc: Borislav Petkov <bp@alien8.de> Cc: Jiri Olsa <jolsa@redhat.com> Cc: Arun Sharma <asharma@fb.com> Cc: Namhyung Kim <namhyung.kim@lge.com> Signed-off-by: Frederic Weisbecker <fweisbec@gmail.com>
d | usb |  | 4 items |  | Du, ChangbinX | changbinx.du@intel.com | 1337096473 |  | USB: testusb: add path /dev/bus/usb to default search paths for usbfs  As real device-nodes managed by udev whose nodes lived in /dev/bus/usb are mostly used today, let testusb tool use that directory as one default path make tool be more convenient to use.  Signed-off-by: Du Changbin <changbinx.du@intel.com> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | nfsd |  | 1 items |  | Bryan Schumaker | bjschuma@netapp.com | 1320718247 |  | NFSD: Added fault injection script  This script provides a convenient way to use the NFSD fault injection framework.  Fault injection writes to dmesg using the KERN_INFO flag, so this script will compare the before and after output of `dmesg` to show the user what happened  Signed-off-by: Bryan Schumaker <bjschuma@netapp.com> Signed-off-by: J. Bruce Fields <bfields@redhat.com>
d | testing |  | 2 items |  | Cyrill Gorcunov | gorcunov@openvz.org | 1338511772 |  | syscalls, x86: add __NR_kcmp syscall  While doing the checkpoint-restore in the user space one need to determine whether various kernel objects (like mm_struct-s of file_struct-s) are shared between tasks and restore this state.  The 2nd step can be solved by using appropriate CLONE_ flags and the unshare syscall, while there's currently no ways for solving the 1st one.  One of the ways for checking whether two tasks share e.g.  mm_struct is to provide some mm_struct ID of a task to its proc file, but showing such info considered to be not that good for security reasons.  Thus after some debates we end up in conclusion that using that named 'comparison' syscall might be the best candidate.  So here is it -- __NR_kcmp.  It takes up to 5 arguments - the pids of the two tasks (which characteristics should be compared), the comparison type and (in case of comparison of files) two file descriptors.  Lookups for pids are done in the caller's PID namespace only.  At moment only x86 is supported and tested.  [akpm@linux-foundation.org: fix up selftests, warnings] [akpm@linux-foundation.org: include errno.h] [akpm@linux-foundation.org: tweak comment text] Signed-off-by: Cyrill Gorcunov <gorcunov@openvz.org> Acked-by: "Eric W. Biederman" <ebiederm@xmission.com> Cc: Pavel Emelyanov <xemul@parallels.com> Cc: Andrey Vagin <avagin@openvz.org> Cc: KOSAKI Motohiro <kosaki.motohiro@gmail.com> Cc: Ingo Molnar <mingo@elte.hu> Cc: H. Peter Anvin <hpa@zytor.com> Cc: Thomas Gleixner <tglx@linutronix.de> Cc: Glauber Costa <glommer@parallels.com> Cc: Andi Kleen <andi@firstfloor.org> Cc: Tejun Heo <tj@kernel.org> Cc: Matt Helsley <matthltc@us.ibm.com> Cc: Pekka Enberg <penberg@kernel.org> Cc: Eric Dumazet <eric.dumazet@gmail.com> Cc: Vasiliy Kulikov <segoon@openwall.com> Cc: Alexey Dobriyan <adobriyan@gmail.com> Cc: Valdis.Kletnieks@vt.edu Cc: Michal Marek <mmarek@suse.cz> Cc: Frederic Weisbecker <fweisbec@gmail.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | power |  | 2 items |  | Len Brown | len.brown@intel.com | 1338781669 |  | tools/power turbostat: fix IVB support  Initial IVB support went into turbostat in Linux-3.1: 553575f1ae048aa44682b46b3c51929a0b3ad337 (tools turbostat: recognize and run properly on IVB)  However, when running on IVB, turbostat would fail to report the new couters added with SNB, c7, pc2 and pc7. So in scenarios where these counters are non-zero on IVB, turbostat would report erroneous residencey results.  In particular c7 time would be added to c1 time, since c1 time is calculated as "that which is left over".  Also, turbostat reports MHz capabilities when passed the "-v" option, and it would incorrectly report 133MHz bclk instead of 100MHz bclk for IVB, which would inflate GHz reported with that option.  This patch is a backport of a fix already included in turbostat v2.  Signed-off-by: Len Brown <len.brown@intel.com>
d | virtio |  | 4 items |  | Michael S. Tsirkin | mst@redhat.com | 1335972134 |  | virtio/tools: add delayed interupt mode  Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
d | include |  | 1 items |  | Matt Fleming | matt.fleming@intel.com | 1330453371 |  | tools/include: Add byteshift headers for endian access  There are various hostprogs in the kernel that are rolling their own implementations of {get,put}_unaligned_le*(). Copy the byteshift headers from include/linux/unaligned so that they can all use a single implementation.  This requires changing some of the data types to the userspace exported ones (u32 -> __u32, etc).  Signed-off-by: Matt Fleming <matt.fleming@intel.com> Link: http://lkml.kernel.org/r/1330436245-24875-2-git-send-email-matt@console-pimps.org Signed-off-by: H. Peter Anvin <hpa@zytor.com>
d | perf |  | 39 items |  | Arnaldo Carvalho de Melo | acme@redhat.com | 1339511289 |  | perf tools: Fix synthesizing tracepoint names from the perf.data headers  We need to use the per event info snapshoted at record time to synthesize the events name, so do it just after reading the perf.data headers, when we already processed the /sys events data, otherwise we'll end up using the local /sys that only by sheer luck will have the same tracepoint ID -> real event association.  Example:    # uname -a   Linux felicio.ghostprotocols.net 3.4.0-rc5+ #1 SMP Sat May 19 15:27:11 BRT 2012 x86_64 x86_64 x86_64 GNU/Linux   # perf record -e sched:sched_switch usleep 1   [ perf record: Woken up 1 times to write data ]   [ perf record: Captured and wrote 0.015 MB perf.data (~648 samples) ]   # cat /t/events/sched/sched_switch/id   279   # perf evlist -v   sched:sched_switch: sample_freq=1, type: 2, config: 279, size: 80, sample_type: 1159, read_format: 7, disabled: 1, inherit: 1, mmap: 1, comm: 1, enable_on_exec: 1, sample_id_all: 1, exclude_guest: 1   #  So on the above machine the sched:sched_switch has tracepoint id 279, but on the machine were we'll analyse it it has a different id:    $ cat /t/events/sched/sched_switch/id   56   $ perf evlist -i /tmp/perf.data   kmem:mm_balancedirty_writeout   $ cat /t/events/kmem/mm_balancedirty_writeout/id   279  With this fix:    $ perf evlist -i /tmp/perf.data   sched:sched_switch  Reported-by: Dmitry Antipov <dmitry.antipov@linaro.org> Cc: David Ahern <dsahern@gmail.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Jiri Olsa <jolsa@redhat.com> Cc: Mike Galbraith <efault@gmx.de> Cc: Namhyung Kim <namhyung@gmail.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <peterz@infradead.org> Cc: Stephane Eranian <eranian@google.com> Link: http://lkml.kernel.org/n/tip-auwks8fpuhmrdpiefs55o5oz@git.kernel.org Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
d | lib |  | 1 items |  | Namhyung Kim | namhyung@gmail.com | 1338052498 |  | tools lib traceevent: Silence compiler warning on 32bit build  The gcc complains about casting a pointer to unsigned long long directly:      SUBDIR ../lib/traceevent/   CC FPIC            event-parse.o   CC FPIC            trace-seq.o   CC FPIC            parse-filter.o /home/namhyung/project/linux/tools/lib/traceevent/parse-filter.c: In function ‘get_value’: /home/namhyung/project/linux/tools/lib/traceevent/parse-filter.c:1588: warning: cast from pointer to integer of different size   CC FPIC            parse-utils.o   BUILD STATIC LIB   libtraceevent.a  Signed-off-by: Namhyung Kim <namhyung@gmail.com> Cc: Frederic Weisbecker <fweisbec@gmail.com> Cc: Paul Mackerras <paulus@samba.org> Cc: Peter Zijlstra <a.p.zijlstra@chello.nl> Cc: Steven Rostedt <rostedt@goodmis.org> Link: http://lkml.kernel.org/r/1338003691-3141-1-git-send-email-namhyung@gmail.com Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
d | hv |  | 1 items |  | Olaf Hering | olaf@aepfle.de | 1339255786 |  | Tools: hv: verify origin of netlink connector message  The SuSE security team suggested to use recvfrom instead of recv to be certain that the connector message is originated from kernel.  CVE-2012-2669  Signed-off-by: Olaf Hering <olaf@aepfle.de> Signed-off-by: Marcus Meissner <meissner@suse.de> Signed-off-by: Sebastian Krahmer <krahmer@suse.de> Signed-off-by: K. Y. Srinivasan <kys@microsoft.com> Cc: stable <stable@vger.kernel.org> Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
d | vm |  | 3 items |  | Ulrich Drepper | drepper@akkadia.org | 1338333741 |  | tools/vm/page-types.c: cleanups  Compiling page-type.c with a recent compiler produces many warnings, mostly related to signed/unsigned comparisons.  This patch cleans up most of them.  One remaining warning is about an unused parameter.  The <compiler.h> file doesn't define a __unused macro (or the like) yet.  This can be addressed later.  Signed-off-by: Ulrich Drepper <drepper@gmail.com> Acked-by: KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com> Acked-by: Fengguang Wu <fengguang.wu@intel.com> Signed-off-by: Andrew Morton <akpm@linux-foundation.org> Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
d | firewire |  | 5 items |  | Stefan Richter | stefanr@s5r6.in-berlin.de | 1280221452 |  | tools/firewire: nosy-dump: increment program version  Since version 0.3 from Kristian's repository, there should actually be no change in functionality except for the x86-64 fix.  Nevertheless, make it distinct from the original nosy-dump --- just in case and also because of potential future changes.  Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
d | lguest |  | 5 items |  | Davidlohr Bueso | dave@gnu.org | 1326345287 |  | lguest: move the lguest tool to the tools directory  This is a better location instead of having it in Documentation.  Signed-off-by: Davidlohr Bueso <dave@gnu.org> Signed-off-by: Rusty Russell <rusty@rustcorp.com.au> (fixed compile)
