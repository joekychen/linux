<!DOCTYPE html>
<html><head><title>joekychen/linux » lib › crc-ccitt.c

</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="generator" content="Docco">
<link rel="stylesheet" media="all" href="../stylesheets/docco.min.css" />


</head>
<body>
<div id="container">
<div id="background"></div>
<table cellpadding="0" cellspacing="0">
<thead><tr><th class="docs"><a id="home" href="../index.html"></a><h1>crc-ccitt.c</h1></th><th class="code"></th></tr></thead>
<tbody>


<tr id="section-1"><td class="docs"><div class="pilwrap"><a class="pilcrow" href="#section-1">&#182;</a></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> *	linux/lib/crc-ccitt.c</span>
<span class="cm"> *</span>
<span class="cm"> *	This source code is licensed under the GNU General Public License,</span>
<span class="cm"> *	Version 2. See the file COPYING for more details.</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;linux/types.h&gt;</span>
<span class="cp">#include &lt;linux/module.h&gt;</span>
<span class="cp">#include &lt;linux/crc-ccitt.h&gt;</span>

<span class="cm">/*</span>
<span class="cm"> * This mysterious table is just the CRC of each possible byte. It can be</span>
<span class="cm"> * computed using the standard bit-at-a-time methods. The polynomial can</span>
<span class="cm"> * be seen in entry 128, 0x8408. This corresponds to x^0 + x^5 + x^12.</span>
<span class="cm"> * Add the implicit x^16, and you have the standard CRC-CCITT.</span>
<span class="cm"> */</span>
<span class="n">u16</span> <span class="k">const</span> <span class="n">crc_ccitt_table</span><span class="p">[</span><span class="mi">256</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="mh">0x0000</span><span class="p">,</span> <span class="mh">0x1189</span><span class="p">,</span> <span class="mh">0x2312</span><span class="p">,</span> <span class="mh">0x329b</span><span class="p">,</span> <span class="mh">0x4624</span><span class="p">,</span> <span class="mh">0x57ad</span><span class="p">,</span> <span class="mh">0x6536</span><span class="p">,</span> <span class="mh">0x74bf</span><span class="p">,</span>
	<span class="mh">0x8c48</span><span class="p">,</span> <span class="mh">0x9dc1</span><span class="p">,</span> <span class="mh">0xaf5a</span><span class="p">,</span> <span class="mh">0xbed3</span><span class="p">,</span> <span class="mh">0xca6c</span><span class="p">,</span> <span class="mh">0xdbe5</span><span class="p">,</span> <span class="mh">0xe97e</span><span class="p">,</span> <span class="mh">0xf8f7</span><span class="p">,</span>
	<span class="mh">0x1081</span><span class="p">,</span> <span class="mh">0x0108</span><span class="p">,</span> <span class="mh">0x3393</span><span class="p">,</span> <span class="mh">0x221a</span><span class="p">,</span> <span class="mh">0x56a5</span><span class="p">,</span> <span class="mh">0x472c</span><span class="p">,</span> <span class="mh">0x75b7</span><span class="p">,</span> <span class="mh">0x643e</span><span class="p">,</span>
	<span class="mh">0x9cc9</span><span class="p">,</span> <span class="mh">0x8d40</span><span class="p">,</span> <span class="mh">0xbfdb</span><span class="p">,</span> <span class="mh">0xae52</span><span class="p">,</span> <span class="mh">0xdaed</span><span class="p">,</span> <span class="mh">0xcb64</span><span class="p">,</span> <span class="mh">0xf9ff</span><span class="p">,</span> <span class="mh">0xe876</span><span class="p">,</span>
	<span class="mh">0x2102</span><span class="p">,</span> <span class="mh">0x308b</span><span class="p">,</span> <span class="mh">0x0210</span><span class="p">,</span> <span class="mh">0x1399</span><span class="p">,</span> <span class="mh">0x6726</span><span class="p">,</span> <span class="mh">0x76af</span><span class="p">,</span> <span class="mh">0x4434</span><span class="p">,</span> <span class="mh">0x55bd</span><span class="p">,</span>
	<span class="mh">0xad4a</span><span class="p">,</span> <span class="mh">0xbcc3</span><span class="p">,</span> <span class="mh">0x8e58</span><span class="p">,</span> <span class="mh">0x9fd1</span><span class="p">,</span> <span class="mh">0xeb6e</span><span class="p">,</span> <span class="mh">0xfae7</span><span class="p">,</span> <span class="mh">0xc87c</span><span class="p">,</span> <span class="mh">0xd9f5</span><span class="p">,</span>
	<span class="mh">0x3183</span><span class="p">,</span> <span class="mh">0x200a</span><span class="p">,</span> <span class="mh">0x1291</span><span class="p">,</span> <span class="mh">0x0318</span><span class="p">,</span> <span class="mh">0x77a7</span><span class="p">,</span> <span class="mh">0x662e</span><span class="p">,</span> <span class="mh">0x54b5</span><span class="p">,</span> <span class="mh">0x453c</span><span class="p">,</span>
	<span class="mh">0xbdcb</span><span class="p">,</span> <span class="mh">0xac42</span><span class="p">,</span> <span class="mh">0x9ed9</span><span class="p">,</span> <span class="mh">0x8f50</span><span class="p">,</span> <span class="mh">0xfbef</span><span class="p">,</span> <span class="mh">0xea66</span><span class="p">,</span> <span class="mh">0xd8fd</span><span class="p">,</span> <span class="mh">0xc974</span><span class="p">,</span>
	<span class="mh">0x4204</span><span class="p">,</span> <span class="mh">0x538d</span><span class="p">,</span> <span class="mh">0x6116</span><span class="p">,</span> <span class="mh">0x709f</span><span class="p">,</span> <span class="mh">0x0420</span><span class="p">,</span> <span class="mh">0x15a9</span><span class="p">,</span> <span class="mh">0x2732</span><span class="p">,</span> <span class="mh">0x36bb</span><span class="p">,</span>
	<span class="mh">0xce4c</span><span class="p">,</span> <span class="mh">0xdfc5</span><span class="p">,</span> <span class="mh">0xed5e</span><span class="p">,</span> <span class="mh">0xfcd7</span><span class="p">,</span> <span class="mh">0x8868</span><span class="p">,</span> <span class="mh">0x99e1</span><span class="p">,</span> <span class="mh">0xab7a</span><span class="p">,</span> <span class="mh">0xbaf3</span><span class="p">,</span>
	<span class="mh">0x5285</span><span class="p">,</span> <span class="mh">0x430c</span><span class="p">,</span> <span class="mh">0x7197</span><span class="p">,</span> <span class="mh">0x601e</span><span class="p">,</span> <span class="mh">0x14a1</span><span class="p">,</span> <span class="mh">0x0528</span><span class="p">,</span> <span class="mh">0x37b3</span><span class="p">,</span> <span class="mh">0x263a</span><span class="p">,</span>
	<span class="mh">0xdecd</span><span class="p">,</span> <span class="mh">0xcf44</span><span class="p">,</span> <span class="mh">0xfddf</span><span class="p">,</span> <span class="mh">0xec56</span><span class="p">,</span> <span class="mh">0x98e9</span><span class="p">,</span> <span class="mh">0x8960</span><span class="p">,</span> <span class="mh">0xbbfb</span><span class="p">,</span> <span class="mh">0xaa72</span><span class="p">,</span>
	<span class="mh">0x6306</span><span class="p">,</span> <span class="mh">0x728f</span><span class="p">,</span> <span class="mh">0x4014</span><span class="p">,</span> <span class="mh">0x519d</span><span class="p">,</span> <span class="mh">0x2522</span><span class="p">,</span> <span class="mh">0x34ab</span><span class="p">,</span> <span class="mh">0x0630</span><span class="p">,</span> <span class="mh">0x17b9</span><span class="p">,</span>
	<span class="mh">0xef4e</span><span class="p">,</span> <span class="mh">0xfec7</span><span class="p">,</span> <span class="mh">0xcc5c</span><span class="p">,</span> <span class="mh">0xddd5</span><span class="p">,</span> <span class="mh">0xa96a</span><span class="p">,</span> <span class="mh">0xb8e3</span><span class="p">,</span> <span class="mh">0x8a78</span><span class="p">,</span> <span class="mh">0x9bf1</span><span class="p">,</span>
	<span class="mh">0x7387</span><span class="p">,</span> <span class="mh">0x620e</span><span class="p">,</span> <span class="mh">0x5095</span><span class="p">,</span> <span class="mh">0x411c</span><span class="p">,</span> <span class="mh">0x35a3</span><span class="p">,</span> <span class="mh">0x242a</span><span class="p">,</span> <span class="mh">0x16b1</span><span class="p">,</span> <span class="mh">0x0738</span><span class="p">,</span>
	<span class="mh">0xffcf</span><span class="p">,</span> <span class="mh">0xee46</span><span class="p">,</span> <span class="mh">0xdcdd</span><span class="p">,</span> <span class="mh">0xcd54</span><span class="p">,</span> <span class="mh">0xb9eb</span><span class="p">,</span> <span class="mh">0xa862</span><span class="p">,</span> <span class="mh">0x9af9</span><span class="p">,</span> <span class="mh">0x8b70</span><span class="p">,</span>
	<span class="mh">0x8408</span><span class="p">,</span> <span class="mh">0x9581</span><span class="p">,</span> <span class="mh">0xa71a</span><span class="p">,</span> <span class="mh">0xb693</span><span class="p">,</span> <span class="mh">0xc22c</span><span class="p">,</span> <span class="mh">0xd3a5</span><span class="p">,</span> <span class="mh">0xe13e</span><span class="p">,</span> <span class="mh">0xf0b7</span><span class="p">,</span>
	<span class="mh">0x0840</span><span class="p">,</span> <span class="mh">0x19c9</span><span class="p">,</span> <span class="mh">0x2b52</span><span class="p">,</span> <span class="mh">0x3adb</span><span class="p">,</span> <span class="mh">0x4e64</span><span class="p">,</span> <span class="mh">0x5fed</span><span class="p">,</span> <span class="mh">0x6d76</span><span class="p">,</span> <span class="mh">0x7cff</span><span class="p">,</span>
	<span class="mh">0x9489</span><span class="p">,</span> <span class="mh">0x8500</span><span class="p">,</span> <span class="mh">0xb79b</span><span class="p">,</span> <span class="mh">0xa612</span><span class="p">,</span> <span class="mh">0xd2ad</span><span class="p">,</span> <span class="mh">0xc324</span><span class="p">,</span> <span class="mh">0xf1bf</span><span class="p">,</span> <span class="mh">0xe036</span><span class="p">,</span>
	<span class="mh">0x18c1</span><span class="p">,</span> <span class="mh">0x0948</span><span class="p">,</span> <span class="mh">0x3bd3</span><span class="p">,</span> <span class="mh">0x2a5a</span><span class="p">,</span> <span class="mh">0x5ee5</span><span class="p">,</span> <span class="mh">0x4f6c</span><span class="p">,</span> <span class="mh">0x7df7</span><span class="p">,</span> <span class="mh">0x6c7e</span><span class="p">,</span>
	<span class="mh">0xa50a</span><span class="p">,</span> <span class="mh">0xb483</span><span class="p">,</span> <span class="mh">0x8618</span><span class="p">,</span> <span class="mh">0x9791</span><span class="p">,</span> <span class="mh">0xe32e</span><span class="p">,</span> <span class="mh">0xf2a7</span><span class="p">,</span> <span class="mh">0xc03c</span><span class="p">,</span> <span class="mh">0xd1b5</span><span class="p">,</span>
	<span class="mh">0x2942</span><span class="p">,</span> <span class="mh">0x38cb</span><span class="p">,</span> <span class="mh">0x0a50</span><span class="p">,</span> <span class="mh">0x1bd9</span><span class="p">,</span> <span class="mh">0x6f66</span><span class="p">,</span> <span class="mh">0x7eef</span><span class="p">,</span> <span class="mh">0x4c74</span><span class="p">,</span> <span class="mh">0x5dfd</span><span class="p">,</span>
	<span class="mh">0xb58b</span><span class="p">,</span> <span class="mh">0xa402</span><span class="p">,</span> <span class="mh">0x9699</span><span class="p">,</span> <span class="mh">0x8710</span><span class="p">,</span> <span class="mh">0xf3af</span><span class="p">,</span> <span class="mh">0xe226</span><span class="p">,</span> <span class="mh">0xd0bd</span><span class="p">,</span> <span class="mh">0xc134</span><span class="p">,</span>
	<span class="mh">0x39c3</span><span class="p">,</span> <span class="mh">0x284a</span><span class="p">,</span> <span class="mh">0x1ad1</span><span class="p">,</span> <span class="mh">0x0b58</span><span class="p">,</span> <span class="mh">0x7fe7</span><span class="p">,</span> <span class="mh">0x6e6e</span><span class="p">,</span> <span class="mh">0x5cf5</span><span class="p">,</span> <span class="mh">0x4d7c</span><span class="p">,</span>
	<span class="mh">0xc60c</span><span class="p">,</span> <span class="mh">0xd785</span><span class="p">,</span> <span class="mh">0xe51e</span><span class="p">,</span> <span class="mh">0xf497</span><span class="p">,</span> <span class="mh">0x8028</span><span class="p">,</span> <span class="mh">0x91a1</span><span class="p">,</span> <span class="mh">0xa33a</span><span class="p">,</span> <span class="mh">0xb2b3</span><span class="p">,</span>
	<span class="mh">0x4a44</span><span class="p">,</span> <span class="mh">0x5bcd</span><span class="p">,</span> <span class="mh">0x6956</span><span class="p">,</span> <span class="mh">0x78df</span><span class="p">,</span> <span class="mh">0x0c60</span><span class="p">,</span> <span class="mh">0x1de9</span><span class="p">,</span> <span class="mh">0x2f72</span><span class="p">,</span> <span class="mh">0x3efb</span><span class="p">,</span>
	<span class="mh">0xd68d</span><span class="p">,</span> <span class="mh">0xc704</span><span class="p">,</span> <span class="mh">0xf59f</span><span class="p">,</span> <span class="mh">0xe416</span><span class="p">,</span> <span class="mh">0x90a9</span><span class="p">,</span> <span class="mh">0x8120</span><span class="p">,</span> <span class="mh">0xb3bb</span><span class="p">,</span> <span class="mh">0xa232</span><span class="p">,</span>
	<span class="mh">0x5ac5</span><span class="p">,</span> <span class="mh">0x4b4c</span><span class="p">,</span> <span class="mh">0x79d7</span><span class="p">,</span> <span class="mh">0x685e</span><span class="p">,</span> <span class="mh">0x1ce1</span><span class="p">,</span> <span class="mh">0x0d68</span><span class="p">,</span> <span class="mh">0x3ff3</span><span class="p">,</span> <span class="mh">0x2e7a</span><span class="p">,</span>
	<span class="mh">0xe70e</span><span class="p">,</span> <span class="mh">0xf687</span><span class="p">,</span> <span class="mh">0xc41c</span><span class="p">,</span> <span class="mh">0xd595</span><span class="p">,</span> <span class="mh">0xa12a</span><span class="p">,</span> <span class="mh">0xb0a3</span><span class="p">,</span> <span class="mh">0x8238</span><span class="p">,</span> <span class="mh">0x93b1</span><span class="p">,</span>
	<span class="mh">0x6b46</span><span class="p">,</span> <span class="mh">0x7acf</span><span class="p">,</span> <span class="mh">0x4854</span><span class="p">,</span> <span class="mh">0x59dd</span><span class="p">,</span> <span class="mh">0x2d62</span><span class="p">,</span> <span class="mh">0x3ceb</span><span class="p">,</span> <span class="mh">0x0e70</span><span class="p">,</span> <span class="mh">0x1ff9</span><span class="p">,</span>
	<span class="mh">0xf78f</span><span class="p">,</span> <span class="mh">0xe606</span><span class="p">,</span> <span class="mh">0xd49d</span><span class="p">,</span> <span class="mh">0xc514</span><span class="p">,</span> <span class="mh">0xb1ab</span><span class="p">,</span> <span class="mh">0xa022</span><span class="p">,</span> <span class="mh">0x92b9</span><span class="p">,</span> <span class="mh">0x8330</span><span class="p">,</span>
	<span class="mh">0x7bc7</span><span class="p">,</span> <span class="mh">0x6a4e</span><span class="p">,</span> <span class="mh">0x58d5</span><span class="p">,</span> <span class="mh">0x495c</span><span class="p">,</span> <span class="mh">0x3de3</span><span class="p">,</span> <span class="mh">0x2c6a</span><span class="p">,</span> <span class="mh">0x1ef1</span><span class="p">,</span> <span class="mh">0x0f78</span>
<span class="p">};</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">crc_ccitt_table</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> *	crc_ccitt - recompute the CRC for the data buffer</span>
<span class="cm"> *	@crc: previous CRC value</span>
<span class="cm"> *	@buffer: data pointer</span>
<span class="cm"> *	@len: number of bytes in the buffer</span>
<span class="cm"> */</span>
<span class="n">u16</span> <span class="nf">crc_ccitt</span><span class="p">(</span><span class="n">u16</span> <span class="n">crc</span><span class="p">,</span> <span class="n">u8</span> <span class="k">const</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">len</span><span class="o">--</span><span class="p">)</span>
		<span class="n">crc</span> <span class="o">=</span> <span class="n">crc_ccitt_byte</span><span class="p">(</span><span class="n">crc</span><span class="p">,</span> <span class="o">*</span><span class="n">buffer</span><span class="o">++</span><span class="p">);</span>
	<span class="k">return</span> <span class="n">crc</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">EXPORT_SYMBOL</span><span class="p">(</span><span class="n">crc_ccitt</span><span class="p">);</span>

<span class="n">MODULE_DESCRIPTION</span><span class="p">(</span><span class="s">&quot;CRC-CCITT calculations&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>

</pre></div></td></tr>

</tbody>
</table>
</div>

</body>
<script>docas={repo:"joekychen/linux",depth:1}</script>
<script>document.write('<script src=' + ('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0rc1/zepto.min.js' : 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')+'><\\/script>')</script>
<script src="http://baoshan.github.com/moment/min/moment.min.js"></script>
<script src="../javascript/docco.min.js"></script>
</html>
